!function(y){"object"==typeof exports&&"undefined"!=typeof module?module.exports=y():"function"==typeof define&&define.amd?define([],y):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Plotly=y()}(function(){return function y($,ee,p){function m(e,n){if(!ee[e]){if(!$[e]){var t="function"==typeof require&&require;if(!n&&t)return t(e,!0);if(b)return b(e,!0);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}var r=ee[e]={exports:{}};$[e][0].call(r.exports,function(u){return m($[e][1][u]||u)},r,r.exports,y,$,ee,p)}return ee[e].exports}for(var b="function"==typeof require&&require,v=0;v<p.length;v++)m(p[v]);return m}({1:[function(y,$,ee){"use strict";var p=y("../src/lib"),m={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var b in m){var v=b.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");p.addStyleRule(v,m[b])}},{"../src/lib":503}],2:[function(y,$,ee){"use strict";$.exports=y("../src/transforms/aggregate")},{"../src/transforms/aggregate":1113}],3:[function(y,$,ee){"use strict";$.exports=y("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(y,$,ee){"use strict";$.exports=y("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(y,$,ee){"use strict";$.exports=y("../src/traces/box")},{"../src/traces/box":679}],6:[function(y,$,ee){"use strict";$.exports=y("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(y,$,ee){"use strict";$.exports=y("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(y,$,ee){"use strict";$.exports=y("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(y,$,ee){"use strict";$.exports=y("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(y,$,ee){"use strict";$.exports=y("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(y,$,ee){"use strict";$.exports=y("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(y,$,ee){"use strict";$.exports=y("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(y,$,ee){"use strict";$.exports=y("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(y,$,ee){"use strict";$.exports=y("../src/core")},{"../src/core":481}],15:[function(y,$,ee){"use strict";$.exports=y("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(y,$,ee){"use strict";$.exports=y("../src/transforms/filter")},{"../src/transforms/filter":1114}],17:[function(y,$,ee){"use strict";$.exports=y("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(y,$,ee){"use strict";$.exports=y("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(y,$,ee){"use strict";$.exports=y("../src/transforms/groupby")},{"../src/transforms/groupby":1115}],20:[function(y,$,ee){"use strict";$.exports=y("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(y,$,ee){"use strict";$.exports=y("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":810}],22:[function(y,$,ee){"use strict";$.exports=y("../src/traces/histogram")},{"../src/traces/histogram":822}],23:[function(y,$,ee){"use strict";$.exports=y("../src/traces/histogram2d")},{"../src/traces/histogram2d":828}],24:[function(y,$,ee){"use strict";$.exports=y("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":832}],25:[function(y,$,ee){"use strict";$.exports=y("../src/traces/icicle")},{"../src/traces/icicle":838}],26:[function(y,$,ee){"use strict";$.exports=y("../src/traces/image")},{"../src/traces/image":851}],27:[function(y,$,ee){"use strict";var p=y("./core");p.register([y("./bar"),y("./box"),y("./heatmap"),y("./histogram"),y("./histogram2d"),y("./histogram2dcontour"),y("./contour"),y("./scatterternary"),y("./violin"),y("./funnel"),y("./waterfall"),y("./image"),y("./pie"),y("./sunburst"),y("./treemap"),y("./icicle"),y("./funnelarea"),y("./scatter3d"),y("./surface"),y("./isosurface"),y("./volume"),y("./mesh3d"),y("./cone"),y("./streamtube"),y("./scattergeo"),y("./choropleth"),y("./scattergl"),y("./splom"),y("./pointcloud"),y("./heatmapgl"),y("./parcoords"),y("./parcats"),y("./scattermapbox"),y("./choroplethmapbox"),y("./densitymapbox"),y("./sankey"),y("./indicator"),y("./table"),y("./carpet"),y("./scattercarpet"),y("./contourcarpet"),y("./ohlc"),y("./candlestick"),y("./scatterpolar"),y("./scatterpolargl"),y("./barpolar"),y("./scattersmith"),y("./aggregate"),y("./filter"),y("./groupby"),y("./sort"),y("./calendars")]),$.exports=p},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(y,$,ee){"use strict";$.exports=y("../src/traces/indicator")},{"../src/traces/indicator":859}],29:[function(y,$,ee){"use strict";$.exports=y("../src/traces/isosurface")},{"../src/traces/isosurface":865}],30:[function(y,$,ee){"use strict";$.exports=y("../src/traces/mesh3d")},{"../src/traces/mesh3d":870}],31:[function(y,$,ee){"use strict";$.exports=y("../src/traces/ohlc")},{"../src/traces/ohlc":875}],32:[function(y,$,ee){"use strict";$.exports=y("../src/traces/parcats")},{"../src/traces/parcats":884}],33:[function(y,$,ee){"use strict";$.exports=y("../src/traces/parcoords")},{"../src/traces/parcoords":894}],34:[function(y,$,ee){"use strict";$.exports=y("../src/traces/pie")},{"../src/traces/pie":905}],35:[function(y,$,ee){"use strict";$.exports=y("../src/traces/pointcloud")},{"../src/traces/pointcloud":914}],36:[function(y,$,ee){"use strict";$.exports=y("../src/traces/sankey")},{"../src/traces/sankey":920}],37:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scatter3d")},{"../src/traces/scatter3d":958}],38:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":965}],39:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scattergeo")},{"../src/traces/scattergeo":973}],40:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scattergl")},{"../src/traces/scattergl":986}],41:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":996}],42:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1004}],43:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1011}],44:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scattersmith")},{"../src/traces/scattersmith":1018}],45:[function(y,$,ee){"use strict";$.exports=y("../src/traces/scatterternary")},{"../src/traces/scatterternary":1026}],46:[function(y,$,ee){"use strict";$.exports=y("../src/transforms/sort")},{"../src/transforms/sort":1117}],47:[function(y,$,ee){"use strict";$.exports=y("../src/traces/splom")},{"../src/traces/splom":1035}],48:[function(y,$,ee){"use strict";$.exports=y("../src/traces/streamtube")},{"../src/traces/streamtube":1043}],49:[function(y,$,ee){"use strict";$.exports=y("../src/traces/sunburst")},{"../src/traces/sunburst":1051}],50:[function(y,$,ee){"use strict";$.exports=y("../src/traces/surface")},{"../src/traces/surface":1060}],51:[function(y,$,ee){"use strict";$.exports=y("../src/traces/table")},{"../src/traces/table":1068}],52:[function(y,$,ee){"use strict";$.exports=y("../src/traces/treemap")},{"../src/traces/treemap":1079}],53:[function(y,$,ee){"use strict";$.exports=y("../src/traces/violin")},{"../src/traces/violin":1092}],54:[function(y,$,ee){"use strict";$.exports=y("../src/traces/volume")},{"../src/traces/volume":1100}],55:[function(y,$,ee){"use strict";$.exports=y("../src/traces/waterfall")},{"../src/traces/waterfall":1108}],56:[function(y,$,ee){var p,m;p=this,m=function(p,m,b,v,e){"use strict";function n(re){return re.target.depth}function t(re,ne){return re.sourceLinks.length?re.depth:ne-1}function a(re){return function(){return re}}e=e&&e.hasOwnProperty("default")?e.default:e;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(re){return typeof re}:function(re){return re&&"function"==typeof Symbol&&re.constructor===Symbol&&re!==Symbol.prototype?"symbol":typeof re};function u(re,ne){return i(re.source,ne.source)||re.index-ne.index}function s(re,ne){return i(re.target,ne.target)||re.index-ne.index}function i(re,ne){return re.partOfCycle===ne.partOfCycle?re.y0-ne.y0:"top"===re.circularLinkType||"bottom"===ne.circularLinkType?-1:1}function l(re){return re.value}function c(re){return(re.y0+re.y1)/2}function f(re){return c(re.source)}function g(re){return c(re.target)}function h(re){return re.index}function o(re){return re.nodes}function x(re){return re.links}function d(re,ne){var se=re.get(ne);if(!se)throw new Error("missing: "+ne);return se}function w(re,ne){return ne(re)}function _(re,ne,se){var oe=0;if(null===se){for(var pe=[],ce=0;ce<re.links.length;ce++){var ge=re.links[ce],xe=ge.source.index,we=ge.target.index;pe[xe]||(pe[xe]=[]),pe[we]||(pe[we]=[]),-1===pe[xe].indexOf(we)&&pe[xe].push(we)}var be=e(pe);be.sort(function(me,Te){return me.length-Te.length});var Se={};for(ce=0;ce<be.length;ce++){var fe=be[ce].slice(-2);Se[fe[0]]||(Se[fe[0]]={}),Se[fe[0]][fe[1]]=!0}re.links.forEach(function(me){var Te=me.target.index,_e=me.source.index;Te===_e||Se[_e]&&Se[_e][Te]?(me.circular=!0,me.circularLinkID=oe,oe+=1):me.circular=!1})}else re.links.forEach(function(me){me.source[se]<me.target[se]?me.circular=!1:(me.circular=!0,me.circularLinkID=oe,oe+=1)})}function T(re,ne){var se=0,oe=0;re.links.forEach(function(pe){pe.circular&&(pe.circularLinkType=pe.source.circularLinkType||pe.target.circularLinkType?pe.source.circularLinkType?pe.source.circularLinkType:pe.target.circularLinkType:se<oe?"top":"bottom","top"==pe.circularLinkType?se+=1:oe+=1,re.nodes.forEach(function(ce){w(ce,ne)!=w(pe.source,ne)&&w(ce,ne)!=w(pe.target,ne)||(ce.circularLinkType=pe.circularLinkType)}))}),re.links.forEach(function(pe){pe.circular&&(pe.source.circularLinkType==pe.target.circularLinkType&&(pe.circularLinkType=pe.source.circularLinkType),J(pe,ne)&&(pe.circularLinkType=pe.source.circularLinkType))})}function k(re){var ne=Math.abs(re.y1-re.y0),se=Math.abs(re.target.x0-re.source.x1);return Math.atan(se/ne)}function L(re,ne){var se=0;re.sourceLinks.forEach(function(pe){se=pe.circular&&!J(pe,ne)?se+1:se});var oe=0;return re.targetLinks.forEach(function(pe){oe=pe.circular&&!J(pe,ne)?oe+1:oe}),se+oe}function M(re){var se=0;re.source.sourceLinks.forEach(function(ce){se=ce.circular?se+1:se});var pe=0;return re.target.targetLinks.forEach(function(ce){pe=ce.circular?pe+1:pe}),!(se>1||pe>1)}function O(re,ne,se){return re.sort(S),re.forEach(function(oe,pe){var ce,ge,xe=0;if(J(oe,se)&&M(oe))oe.circularPathData.verticalBuffer=xe+oe.width/2;else{for(var we=0;we<pe;we++)if(!((ce=re[pe]).source.column<(ge=re[we]).target.column||ce.target.column>ge.source.column)){var be=re[we].circularPathData.verticalBuffer+re[we].width/2+ne;xe=be>xe?be:xe}oe.circularPathData.verticalBuffer=xe+oe.width/2}}),re}function P(re,ne,se,oe){var pe=m.min(re.links,function(ce){return ce.source.y0});re.links.forEach(function(ce){ce.circular&&(ce.circularPathData={})}),O(re.links.filter(function(ce){return"top"==ce.circularLinkType}),ne,oe),O(re.links.filter(function(ce){return"bottom"==ce.circularLinkType}),ne,oe),re.links.forEach(function(ce){if(ce.circular){if(ce.circularPathData.arcRadius=ce.width+10,ce.circularPathData.leftNodeBuffer=5,ce.circularPathData.rightNodeBuffer=5,ce.circularPathData.sourceWidth=ce.source.x1-ce.source.x0,ce.circularPathData.sourceX=ce.source.x0+ce.circularPathData.sourceWidth,ce.circularPathData.targetX=ce.target.x0,ce.circularPathData.sourceY=ce.y0,ce.circularPathData.targetY=ce.y1,J(ce,oe)&&M(ce))ce.circularPathData.leftSmallArcRadius=10+ce.width/2,ce.circularPathData.leftLargeArcRadius=10+ce.width/2,ce.circularPathData.rightSmallArcRadius=10+ce.width/2,ce.circularPathData.rightLargeArcRadius=10+ce.width/2,"bottom"==ce.circularLinkType?(ce.circularPathData.verticalFullExtent=ce.source.y1+25+ce.circularPathData.verticalBuffer,ce.circularPathData.verticalLeftInnerExtent=ce.circularPathData.verticalFullExtent-ce.circularPathData.leftLargeArcRadius,ce.circularPathData.verticalRightInnerExtent=ce.circularPathData.verticalFullExtent-ce.circularPathData.rightLargeArcRadius):(ce.circularPathData.verticalFullExtent=ce.source.y0-25-ce.circularPathData.verticalBuffer,ce.circularPathData.verticalLeftInnerExtent=ce.circularPathData.verticalFullExtent+ce.circularPathData.leftLargeArcRadius,ce.circularPathData.verticalRightInnerExtent=ce.circularPathData.verticalFullExtent+ce.circularPathData.rightLargeArcRadius);else{var ge=ce.source.column,xe=ce.circularLinkType,we=re.links.filter(function(fe){return fe.source.column==ge&&fe.circularLinkType==xe});we.sort("bottom"==ce.circularLinkType?R:E);var be=0;we.forEach(function(fe,me){fe.circularLinkID==ce.circularLinkID&&(ce.circularPathData.leftSmallArcRadius=10+ce.width/2+be,ce.circularPathData.leftLargeArcRadius=10+ce.width/2+me*ne+be),be+=fe.width}),ge=ce.target.column,(we=re.links.filter(function(fe){return fe.target.column==ge&&fe.circularLinkType==xe})).sort("bottom"==ce.circularLinkType?H:B),be=0,we.forEach(function(fe,me){fe.circularLinkID==ce.circularLinkID&&(ce.circularPathData.rightSmallArcRadius=10+ce.width/2+be,ce.circularPathData.rightLargeArcRadius=10+ce.width/2+me*ne+be),be+=fe.width}),"bottom"==ce.circularLinkType?(ce.circularPathData.verticalFullExtent=Math.max(se,ce.source.y1,ce.target.y1)+25+ce.circularPathData.verticalBuffer,ce.circularPathData.verticalLeftInnerExtent=ce.circularPathData.verticalFullExtent-ce.circularPathData.leftLargeArcRadius,ce.circularPathData.verticalRightInnerExtent=ce.circularPathData.verticalFullExtent-ce.circularPathData.rightLargeArcRadius):(ce.circularPathData.verticalFullExtent=pe-25-ce.circularPathData.verticalBuffer,ce.circularPathData.verticalLeftInnerExtent=ce.circularPathData.verticalFullExtent+ce.circularPathData.leftLargeArcRadius,ce.circularPathData.verticalRightInnerExtent=ce.circularPathData.verticalFullExtent+ce.circularPathData.rightLargeArcRadius)}ce.circularPathData.leftInnerExtent=ce.circularPathData.sourceX+ce.circularPathData.leftNodeBuffer,ce.circularPathData.rightInnerExtent=ce.circularPathData.targetX-ce.circularPathData.rightNodeBuffer,ce.circularPathData.leftFullExtent=ce.circularPathData.sourceX+ce.circularPathData.leftLargeArcRadius+ce.circularPathData.leftNodeBuffer,ce.circularPathData.rightFullExtent=ce.circularPathData.targetX-ce.circularPathData.rightLargeArcRadius-ce.circularPathData.rightNodeBuffer}if(ce.circular)ce.path="top"==(fe=ce).circularLinkType?"M"+fe.circularPathData.sourceX+" "+fe.circularPathData.sourceY+" L"+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.sourceY+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftSmallArcRadius+" 0 0 0 "+fe.circularPathData.leftFullExtent+" "+(fe.circularPathData.sourceY-fe.circularPathData.leftSmallArcRadius)+" L"+fe.circularPathData.leftFullExtent+" "+fe.circularPathData.verticalLeftInnerExtent+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftLargeArcRadius+" 0 0 0 "+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.verticalFullExtent+" L"+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.verticalFullExtent+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightLargeArcRadius+" 0 0 0 "+fe.circularPathData.rightFullExtent+" "+fe.circularPathData.verticalRightInnerExtent+" L"+fe.circularPathData.rightFullExtent+" "+(fe.circularPathData.targetY-fe.circularPathData.rightSmallArcRadius)+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightSmallArcRadius+" 0 0 0 "+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.targetY+" L"+fe.circularPathData.targetX+" "+fe.circularPathData.targetY:"M"+fe.circularPathData.sourceX+" "+fe.circularPathData.sourceY+" L"+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.sourceY+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftSmallArcRadius+" 0 0 1 "+fe.circularPathData.leftFullExtent+" "+(fe.circularPathData.sourceY+fe.circularPathData.leftSmallArcRadius)+" L"+fe.circularPathData.leftFullExtent+" "+fe.circularPathData.verticalLeftInnerExtent+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftLargeArcRadius+" 0 0 1 "+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.verticalFullExtent+" L"+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.verticalFullExtent+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightLargeArcRadius+" 0 0 1 "+fe.circularPathData.rightFullExtent+" "+fe.circularPathData.verticalRightInnerExtent+" L"+fe.circularPathData.rightFullExtent+" "+(fe.circularPathData.targetY+fe.circularPathData.rightSmallArcRadius)+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightSmallArcRadius+" 0 0 1 "+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.targetY+" L"+fe.circularPathData.targetX+" "+fe.circularPathData.targetY;else{var Se=v.linkHorizontal().source(function(fe){return[fe.source.x0+(fe.source.x1-fe.source.x0),fe.y0]}).target(function(fe){return[fe.target.x0,fe.y1]});ce.path=Se(ce)}var fe})}function S(re,ne){return V(re)==V(ne)?"bottom"==re.circularLinkType?R(re,ne):E(re,ne):V(ne)-V(re)}function E(re,ne){return re.y0-ne.y0}function R(re,ne){return ne.y0-re.y0}function B(re,ne){return re.y1-ne.y1}function H(re,ne){return ne.y1-re.y1}function V(re){return re.target.column-re.source.column}function Z(re){return re.target.x0-re.source.x1}function W(re,ne){var se=k(re),oe=Z(ne)/Math.tan(se);return"up"==j(re)?re.y1+oe:re.y1-oe}function G(re,ne){var se=k(re),oe=Z(ne)/Math.tan(se);return"up"==j(re)?re.y1-oe:re.y1+oe}function X(re,ne,se,oe){re.links.forEach(function(pe){if(!pe.circular&&pe.target.column-pe.source.column>1){var ce=pe.source.column+1,ge=pe.target.column-1,xe=1,we=ge-ce+1;for(xe=1;ce<=ge;ce++,xe++)re.nodes.forEach(function(be){if(be.column==ce){var Se,fe=xe/(we+1),me=Math.pow(1-fe,3),Te=3*fe*Math.pow(1-fe,2),_e=3*Math.pow(fe,2)*(1-fe),Me=Math.pow(fe,3),Ie=me*pe.y0+Te*pe.y0+_e*pe.y1+Me*pe.y1,ze=Ie-pe.width/2,Ve=Ie+pe.width/2;ze>be.y0&&ze<be.y1?(Se=be.y1-ze+10,be=D(be,Se="bottom"==be.circularLinkType?Se:-Se,ne,se),re.nodes.forEach(function(Je){w(Je,oe)!=w(be,oe)&&Je.column==be.column&&te(be,Je)&&D(Je,Se,ne,se)})):(Ve>be.y0&&Ve<be.y1||ze<be.y0&&Ve>be.y1)&&(be=D(be,Se=Ve-be.y0+10,ne,se),re.nodes.forEach(function(Je){w(Je,oe)!=w(be,oe)&&Je.column==be.column&&Je.y0<be.y1&&Je.y1>be.y1&&D(Je,Se,ne,se)}))}})}})}function te(re,ne){return re.y0>ne.y0&&re.y0<ne.y1||re.y1>ne.y0&&re.y1<ne.y1||re.y0<ne.y0&&re.y1>ne.y1}function D(re,ne,se,oe){return re.y0+ne>=se&&re.y1+ne<=oe&&(re.y0=re.y0+ne,re.y1=re.y1+ne,re.targetLinks.forEach(function(pe){pe.y1=pe.y1+ne}),re.sourceLinks.forEach(function(pe){pe.y0=pe.y0+ne})),re}function N(re,ne,se,oe){re.nodes.forEach(function(pe){oe&&pe.y+(pe.y1-pe.y0)>ne&&(pe.y=pe.y-(pe.y+(pe.y1-pe.y0)-ne));var ce=re.links.filter(function(we){return w(we.source,se)==w(pe,se)}),ge=ce.length;ge>1&&ce.sort(function(we,be){if(!we.circular&&!be.circular){if(we.target.column==be.target.column||!Q(we,be))return we.y1-be.y1;if(we.target.column>be.target.column){var Se=G(be,we);return we.y1-Se}if(be.target.column>we.target.column)return G(we,be)-be.y1}return we.circular&&!be.circular?"top"==we.circularLinkType?-1:1:be.circular&&!we.circular?"top"==be.circularLinkType?1:-1:we.circular&&be.circular?we.circularLinkType===be.circularLinkType&&"top"==we.circularLinkType?we.target.column===be.target.column?we.target.y1-be.target.y1:be.target.column-we.target.column:we.circularLinkType===be.circularLinkType&&"bottom"==we.circularLinkType?we.target.column===be.target.column?be.target.y1-we.target.y1:we.target.column-be.target.column:"top"==we.circularLinkType?-1:1:void 0});var xe=pe.y0;ce.forEach(function(we){we.y0=xe+we.width/2,xe+=we.width}),ce.forEach(function(we,be){if("bottom"==we.circularLinkType){for(var Se=be+1,fe=0;Se<ge;Se++)fe+=ce[Se].width;we.y0=pe.y1-fe-we.width/2}})})}function U(re,ne,se){re.nodes.forEach(function(oe){var pe=re.links.filter(function(xe){return w(xe.target,se)==w(oe,se)}),ce=pe.length;ce>1&&pe.sort(function(xe,we){if(!xe.circular&&!we.circular){if(xe.source.column==we.source.column||!Q(xe,we))return xe.y0-we.y0;if(we.source.column<xe.source.column){var be=W(we,xe);return xe.y0-be}if(xe.source.column<we.source.column)return W(xe,we)-we.y0}return xe.circular&&!we.circular?"top"==xe.circularLinkType?-1:1:we.circular&&!xe.circular?"top"==we.circularLinkType?1:-1:xe.circular&&we.circular?xe.circularLinkType===we.circularLinkType&&"top"==xe.circularLinkType?xe.source.column===we.source.column?xe.source.y1-we.source.y1:xe.source.column-we.source.column:xe.circularLinkType===we.circularLinkType&&"bottom"==xe.circularLinkType?xe.source.column===we.source.column?xe.source.y1-we.source.y1:we.source.column-xe.source.column:"top"==xe.circularLinkType?-1:1:void 0});var ge=oe.y0;pe.forEach(function(xe){xe.y1=ge+xe.width/2,ge+=xe.width}),pe.forEach(function(xe,we){if("bottom"==xe.circularLinkType){for(var be=we+1,Se=0;be<ce;be++)Se+=pe[be].width;xe.y1=oe.y1-Se-xe.width/2}})})}function Q(re,ne){return j(re)==j(ne)}function j(re){return re.y0-re.y1>0?"up":"down"}function J(re,ne){return w(re.source,ne)==w(re.target,ne)}function K(re,ne,se){var oe=re.nodes,pe=re.links,ce=!1,ge=!1;if(pe.forEach(function(be){"top"==be.circularLinkType?ce=!0:"bottom"==be.circularLinkType&&(ge=!0)}),0==ce||0==ge){var xe=m.min(oe,function(be){return be.y0}),we=(se-ne)/(m.max(oe,function(be){return be.y1})-xe);oe.forEach(function(be){var Se=(be.y1-be.y0)*we;be.y0=(be.y0-xe)*we,be.y1=be.y0+Se}),pe.forEach(function(be){be.y0=(be.y0-xe)*we,be.y1=(be.y1-xe)*we,be.width=be.width*we})}}p.sankeyCircular=function(){var re,ne,se=0,oe=0,pe=1,ce=1,ge=24,xe=h,we=t,be=o,Se=x,fe=32,me=2,Te=null;function _e(){var De={nodes:be.apply(null,arguments),links:Se.apply(null,arguments)};Me(De),_(De,0,Te),Ie(De),ze(De),T(De,xe),Ve(De,fe,xe),Je(De);for(var Be=4,Ze=0;Ze<Be;Ze++)N(De,ce,xe),U(De,0,xe),X(De,oe,ce,xe),N(De,ce,xe),U(De,0,xe);return K(De,oe,ce),P(De,me,ce,xe),De}function Me(De){De.nodes.forEach(function(Ze,Ye){Ze.index=Ye,Ze.sourceLinks=[],Ze.targetLinks=[]});var Be=b.map(De.nodes,xe);return De.links.forEach(function(Ze,Ye){Ze.index=Ye;var tt=Ze.source,st=Ze.target;"object"!==(void 0===tt?"undefined":r(tt))&&(tt=Ze.source=d(Be,tt)),"object"!==(void 0===st?"undefined":r(st))&&(st=Ze.target=d(Be,st)),tt.sourceLinks.push(Ze),st.targetLinks.push(Ze)}),De}function Ie(De){De.nodes.forEach(function(Be){Be.partOfCycle=!1,Be.value=Math.max(m.sum(Be.sourceLinks,l),m.sum(Be.targetLinks,l)),Be.sourceLinks.forEach(function(Ze){Ze.circular&&(Be.partOfCycle=!0,Be.circularLinkType=Ze.circularLinkType)}),Be.targetLinks.forEach(function(Ze){Ze.circular&&(Be.partOfCycle=!0,Be.circularLinkType=Ze.circularLinkType)})})}function ze(De){var Be,Ze,Ye;for(Be=De.nodes,Ze=[],Ye=0;Be.length;++Ye,Be=Ze,Ze=[])Be.forEach(function(tt){tt.depth=Ye,tt.sourceLinks.forEach(function(st){Ze.indexOf(st.target)<0&&!st.circular&&Ze.push(st.target)})});for(Be=De.nodes,Ze=[],Ye=0;Be.length;++Ye,Be=Ze,Ze=[])Be.forEach(function(tt){tt.height=Ye,tt.targetLinks.forEach(function(st){Ze.indexOf(st.source)<0&&!st.circular&&Ze.push(st.source)})});De.nodes.forEach(function(tt){tt.column=Math.floor(we.call(null,tt,Ye))})}function Ve(De,Be,Ze){var Ye=b.nest().key(function(Mt){return Mt.column}).sortKeys(m.ascending).entries(De.nodes).map(function(Mt){return Mt.values});(function(Mt){if(ne){var rt=1/0;Ye.forEach(function(Yt){var Fe=ce*ne/(Yt.length+1);rt=Fe<rt?Fe:rt}),re=rt}var et=m.min(Ye,function(Yt){return(ce-oe-(Yt.length-1)*re)/m.sum(Yt,l)});et*=.3,De.links.forEach(function(Yt){Yt.width=Yt.value*et});var Yt,Fe,He,Oe,$e,ke,bt=(Fe=0,He=0,Oe=0,$e=0,ke=m.max((Yt=De).nodes,function(Le){return Le.column}),Yt.links.forEach(function(Le){Le.circular&&("top"==Le.circularLinkType?Fe+=Le.width:He+=Le.width,0==Le.target.column&&($e+=Le.width),Le.source.column==ke&&(Oe+=Le.width))}),{top:Fe=Fe>0?Fe+25+10:Fe,bottom:He=He>0?He+25+10:He,left:$e=$e>0?$e+25+10:$e,right:Oe=Oe>0?Oe+25+10:Oe}),Rt=function(Yt,Fe){var He=m.max(Yt.nodes,function(Pe){return Pe.column}),Oe=pe-se,$e=ce-oe,ke=Oe/(Oe+Fe.right+Fe.left),Le=$e/($e+Fe.top+Fe.bottom);return se=se*ke+Fe.left,pe=0==Fe.right?pe:pe*ke,oe=oe*Le+Fe.top,ce*=Le,Yt.nodes.forEach(function(Pe){Pe.x0=se+Pe.column*((pe-se-ge)/He),Pe.x1=Pe.x0+ge}),Le}(De,bt);et*=Rt,De.links.forEach(function(Yt){Yt.width=Yt.value*et}),Ye.forEach(function(Yt){var Fe=Yt.length;Yt.forEach(function(He,Oe){He.depth==Ye.length-1&&1==Fe||0==He.depth&&1==Fe?(He.y0=ce/2-He.value*et,He.y1=He.y0+He.value*et):He.partOfCycle?0==L(He,Mt)?(He.y0=ce/2+Oe,He.y1=He.y0+He.value*et):"top"==He.circularLinkType?(He.y0=oe+Oe,He.y1=He.y0+He.value*et):(He.y0=ce-He.value*et-Oe,He.y1=He.y0+He.value*et):0==bt.top||0==bt.bottom?(He.y0=(ce-oe)/Fe*Oe,He.y1=He.y0+He.value*et):(He.y0=(ce-oe)/2-Fe/2+Oe,He.y1=He.y0+He.value*et)})})})(Ze),Pt();for(var tt=1,st=Be;st>0;--st)vt(tt*=.99,Ze),Pt();function vt(Mt,rt){var et=Ye.length;Ye.forEach(function(bt){var Rt=bt.length,Yt=bt[0].depth;bt.forEach(function(Fe){var He;if((Fe.sourceLinks.length||Fe.targetLinks.length)&&!(Fe.partOfCycle&&L(Fe,rt)>0))if(0==Yt&&1==Rt)Fe.y0=ce/2-(He=Fe.y1-Fe.y0)/2,Fe.y1=ce/2+He/2;else if(Yt==et-1&&1==Rt)Fe.y0=ce/2-(He=Fe.y1-Fe.y0)/2,Fe.y1=ce/2+He/2;else{var Oe=m.mean(Fe.sourceLinks,g),$e=m.mean(Fe.targetLinks,f),ke=((Oe&&$e?(Oe+$e)/2:Oe||$e)-c(Fe))*Mt;Fe.y0+=ke,Fe.y1+=ke}})})}function Pt(){Ye.forEach(function(Mt){var rt,et,bt,Rt=oe,Yt=Mt.length;for(Mt.sort(i),bt=0;bt<Yt;++bt)(et=Rt-(rt=Mt[bt]).y0)>0&&(rt.y0+=et,rt.y1+=et),Rt=rt.y1+re;if((et=Rt-re-ce)>0)for(Rt=rt.y0-=et,rt.y1-=et,bt=Yt-2;bt>=0;--bt)(et=(rt=Mt[bt]).y1+re-Rt)>0&&(rt.y0-=et,rt.y1-=et),Rt=rt.y0})}}function Je(De){De.nodes.forEach(function(Be){Be.sourceLinks.sort(s),Be.targetLinks.sort(u)}),De.nodes.forEach(function(Be){var Ze=Be.y0,Ye=Ze,tt=Be.y1,st=tt;Be.sourceLinks.forEach(function(vt){vt.circular?(vt.y0=tt-vt.width/2,tt-=vt.width):(vt.y0=Ze+vt.width/2,Ze+=vt.width)}),Be.targetLinks.forEach(function(vt){vt.circular?(vt.y1=st-vt.width/2,st-=vt.width):(vt.y1=Ye+vt.width/2,Ye+=vt.width)})})}return _e.nodeId=function(De){return arguments.length?(xe="function"==typeof De?De:a(De),_e):xe},_e.nodeAlign=function(De){return arguments.length?(we="function"==typeof De?De:a(De),_e):we},_e.nodeWidth=function(De){return arguments.length?(ge=+De,_e):ge},_e.nodePadding=function(De){return arguments.length?(re=+De,_e):re},_e.nodes=function(De){return arguments.length?(be="function"==typeof De?De:a(De),_e):be},_e.links=function(De){return arguments.length?(Se="function"==typeof De?De:a(De),_e):Se},_e.size=function(De){return arguments.length?(se=oe=0,pe=+De[0],ce=+De[1],_e):[pe-se,ce-oe]},_e.extent=function(De){return arguments.length?(se=+De[0][0],pe=+De[1][0],oe=+De[0][1],ce=+De[1][1],_e):[[se,oe],[pe,ce]]},_e.iterations=function(De){return arguments.length?(fe=+De,_e):fe},_e.circularLinkGap=function(De){return arguments.length?(me=+De,_e):me},_e.nodePaddingRatio=function(De){return arguments.length?(ne=+De,_e):ne},_e.sortNodes=function(De){return arguments.length?(Te=De,_e):Te},_e.update=function(De){return T(De,xe),Je(De),De.links.forEach(function(Be){Be.circular&&(Be.circularLinkType=Be.y0+Be.y1<ce?"top":"bottom",Be.source.circularLinkType=Be.circularLinkType,Be.target.circularLinkType=Be.circularLinkType)}),N(De,ce,xe,!1),U(De,0,xe),P(De,me,ce,xe),De},_e},p.sankeyCenter=function(re){return re.targetLinks.length?re.depth:re.sourceLinks.length?m.min(re.sourceLinks,n)-1:0},p.sankeyLeft=function(re){return re.depth},p.sankeyRight=function(re,ne){return ne-1-re.height},p.sankeyJustify=t,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?m(ee,y("d3-array"),y("d3-collection"),y("d3-shape"),y("elementary-circuits-directed-graph")):m(p.d3=p.d3||{},p.d3,p.d3,p.d3,null)},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(y,$,ee){var p,m;p=this,m=function(p,m,b,v){"use strict";function e(w){return w.target.depth}function n(w,_){return w.sourceLinks.length?w.depth:_-1}function t(w){return function(){return w}}function a(w,_){return u(w.source,_.source)||w.index-_.index}function r(w,_){return u(w.target,_.target)||w.index-_.index}function u(w,_){return w.y0-_.y0}function s(w){return w.value}function i(w){return(w.y0+w.y1)/2}function l(w){return i(w.source)*w.value}function c(w){return i(w.target)*w.value}function f(w){return w.index}function g(w){return w.nodes}function h(w){return w.links}function o(w,_){var T=w.get(_);if(!T)throw new Error("missing: "+_);return T}function x(w){return[w.source.x1,w.y0]}function d(w){return[w.target.x0,w.y1]}p.sankey=function(){var w=0,_=0,T=1,k=1,L=24,M=8,O=f,P=n,S=g,E=h,R=32;function B(){var X={nodes:S.apply(null,arguments),links:E.apply(null,arguments)};return H(X),V(X),Z(X),W(X),G(X),X}function H(X){X.nodes.forEach(function(D,N){D.index=N,D.sourceLinks=[],D.targetLinks=[]});var te=b.map(X.nodes,O);X.links.forEach(function(D,N){D.index=N;var U=D.source,Q=D.target;"object"!=typeof U&&(U=D.source=o(te,U)),"object"!=typeof Q&&(Q=D.target=o(te,Q)),U.sourceLinks.push(D),Q.targetLinks.push(D)})}function V(X){X.nodes.forEach(function(te){te.value=Math.max(m.sum(te.sourceLinks,s),m.sum(te.targetLinks,s))})}function Z(X){var te,D,N;for(te=X.nodes,D=[],N=0;te.length;++N,te=D,D=[])te.forEach(function(Q){Q.depth=N,Q.sourceLinks.forEach(function(j){D.indexOf(j.target)<0&&D.push(j.target)})});for(te=X.nodes,D=[],N=0;te.length;++N,te=D,D=[])te.forEach(function(Q){Q.height=N,Q.targetLinks.forEach(function(j){D.indexOf(j.source)<0&&D.push(j.source)})});var U=(T-w-L)/(N-1);X.nodes.forEach(function(Q){Q.x1=(Q.x0=w+Math.max(0,Math.min(N-1,Math.floor(P.call(null,Q,N))))*U)+L})}function W(X){var te=b.nest().key(function(J){return J.x0}).sortKeys(m.ascending).entries(X.nodes).map(function(J){return J.values});(function(){var J=m.max(te,function(ne){return ne.length}),K=2/3*(k-_)/(J-1);M>K&&(M=K);var re=m.min(te,function(ne){return(k-_-(ne.length-1)*M)/m.sum(ne,s)});te.forEach(function(ne){ne.forEach(function(se,oe){se.y1=(se.y0=oe)+se.value*re})}),X.links.forEach(function(ne){ne.width=ne.value*re})})(),j();for(var D=1,N=R;N>0;--N)Q(D*=.99),j(),U(D),j();function U(J){te.forEach(function(K){K.forEach(function(re){if(re.targetLinks.length){var ne=(m.sum(re.targetLinks,l)/m.sum(re.targetLinks,s)-i(re))*J;re.y0+=ne,re.y1+=ne}})})}function Q(J){te.slice().reverse().forEach(function(K){K.forEach(function(re){if(re.sourceLinks.length){var ne=(m.sum(re.sourceLinks,c)/m.sum(re.sourceLinks,s)-i(re))*J;re.y0+=ne,re.y1+=ne}})})}function j(){te.forEach(function(J){var K,re,ne,se=_,oe=J.length;for(J.sort(u),ne=0;ne<oe;++ne)(re=se-(K=J[ne]).y0)>0&&(K.y0+=re,K.y1+=re),se=K.y1+M;if((re=se-M-k)>0)for(se=K.y0-=re,K.y1-=re,ne=oe-2;ne>=0;--ne)(re=(K=J[ne]).y1+M-se)>0&&(K.y0-=re,K.y1-=re),se=K.y0})}}function G(X){X.nodes.forEach(function(te){te.sourceLinks.sort(r),te.targetLinks.sort(a)}),X.nodes.forEach(function(te){var D=te.y0,N=D;te.sourceLinks.forEach(function(U){U.y0=D+U.width/2,D+=U.width}),te.targetLinks.forEach(function(U){U.y1=N+U.width/2,N+=U.width})})}return B.update=function(X){return G(X),X},B.nodeId=function(X){return arguments.length?(O="function"==typeof X?X:t(X),B):O},B.nodeAlign=function(X){return arguments.length?(P="function"==typeof X?X:t(X),B):P},B.nodeWidth=function(X){return arguments.length?(L=+X,B):L},B.nodePadding=function(X){return arguments.length?(M=+X,B):M},B.nodes=function(X){return arguments.length?(S="function"==typeof X?X:t(X),B):S},B.links=function(X){return arguments.length?(E="function"==typeof X?X:t(X),B):E},B.size=function(X){return arguments.length?(w=_=0,T=+X[0],k=+X[1],B):[T-w,k-_]},B.extent=function(X){return arguments.length?(w=+X[0][0],T=+X[1][0],_=+X[0][1],k=+X[1][1],B):[[w,_],[T,k]]},B.iterations=function(X){return arguments.length?(R=+X,B):R},B},p.sankeyCenter=function(w){return w.targetLinks.length?w.depth:w.sourceLinks.length?m.min(w.sourceLinks,e)-1:0},p.sankeyLeft=function(w){return w.depth},p.sankeyRight=function(w,_){return _-1-w.height},p.sankeyJustify=n,p.sankeyLinkHorizontal=function(){return v.linkHorizontal().source(x).target(d)},Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?m(ee,y("d3-array"),y("d3-collection"),y("d3-shape")):m(p.d3=p.d3||{},p.d3,p.d3,p.d3)},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(y,$,ee){(function(){var p={version:"3.8.0"},m=[].slice,b=function(le){return m.call(le)},v=self.document;function e(le){return le&&(le.ownerDocument||le.document||le).documentElement}function n(le){return le&&(le.ownerDocument&&le.ownerDocument.defaultView||le.document&&le||le.defaultView)}if(v)try{b(v.documentElement.childNodes)}catch(le){b=function(C){for(var z=C.length,F=new Array(z);z--;)F[z]=C[z];return F}}if(Date.now||(Date.now=function(){return+new Date}),v)try{v.createElement("DIV").style.setProperty("opacity",0,"")}catch(le){var t=this.Element.prototype,a=t.setAttribute,r=t.setAttributeNS,u=this.CSSStyleDeclaration.prototype,s=u.setProperty;t.setAttribute=function(C,z){a.call(this,C,z+"")},t.setAttributeNS=function(C,z,F){r.call(this,C,z,F+"")},u.setProperty=function(C,z,F){s.call(this,C,z+"",F)}}function i(le,C){return le<C?-1:le>C?1:le>=C?0:NaN}function l(le){return null===le?NaN:+le}function c(le){return!isNaN(le)}function f(le){return{left:function(C,z,F,q){for(arguments.length<3&&(F=0),arguments.length<4&&(q=C.length);F<q;){var ae=F+q>>>1;le(C[ae],z)<0?F=ae+1:q=ae}return F},right:function(C,z,F,q){for(arguments.length<3&&(F=0),arguments.length<4&&(q=C.length);F<q;){var ae=F+q>>>1;le(C[ae],z)>0?q=ae:F=ae+1}return F}}}p.ascending=i,p.descending=function(le,C){return C<le?-1:C>le?1:C>=le?0:NaN},p.min=function(le,C){var z,F,q=-1,ae=le.length;if(1===arguments.length){for(;++q<ae;)if(null!=(F=le[q])&&F>=F){z=F;break}for(;++q<ae;)null!=(F=le[q])&&z>F&&(z=F)}else{for(;++q<ae;)if(null!=(F=C.call(le,le[q],q))&&F>=F){z=F;break}for(;++q<ae;)null!=(F=C.call(le,le[q],q))&&z>F&&(z=F)}return z},p.max=function(le,C){var z,F,q=-1,ae=le.length;if(1===arguments.length){for(;++q<ae;)if(null!=(F=le[q])&&F>=F){z=F;break}for(;++q<ae;)null!=(F=le[q])&&F>z&&(z=F)}else{for(;++q<ae;)if(null!=(F=C.call(le,le[q],q))&&F>=F){z=F;break}for(;++q<ae;)null!=(F=C.call(le,le[q],q))&&F>z&&(z=F)}return z},p.extent=function(le,C){var z,F,q,ae=-1,ue=le.length;if(1===arguments.length){for(;++ae<ue;)if(null!=(F=le[ae])&&F>=F){z=q=F;break}for(;++ae<ue;)null!=(F=le[ae])&&(z>F&&(z=F),q<F&&(q=F))}else{for(;++ae<ue;)if(null!=(F=C.call(le,le[ae],ae))&&F>=F){z=q=F;break}for(;++ae<ue;)null!=(F=C.call(le,le[ae],ae))&&(z>F&&(z=F),q<F&&(q=F))}return[z,q]},p.sum=function(le,C){var z,F=0,q=le.length,ae=-1;if(1===arguments.length)for(;++ae<q;)c(z=+le[ae])&&(F+=z);else for(;++ae<q;)c(z=+C.call(le,le[ae],ae))&&(F+=z);return F},p.mean=function(le,C){var z,F=0,q=le.length,ae=-1,ue=q;if(1===arguments.length)for(;++ae<q;)c(z=l(le[ae]))?F+=z:--ue;else for(;++ae<q;)c(z=l(C.call(le,le[ae],ae)))?F+=z:--ue;if(ue)return F/ue},p.quantile=function(le,C){var z=(le.length-1)*C+1,F=Math.floor(z),q=+le[F-1],ae=z-F;return ae?q+ae*(le[F]-q):q},p.median=function(le,C){var z,F=[],q=le.length,ae=-1;if(1===arguments.length)for(;++ae<q;)c(z=l(le[ae]))&&F.push(z);else for(;++ae<q;)c(z=l(C.call(le,le[ae],ae)))&&F.push(z);if(F.length)return p.quantile(F.sort(i),.5)},p.variance=function(le,C){var z,F,q=le.length,ae=0,ue=0,de=-1,ye=0;if(1===arguments.length)for(;++de<q;)c(z=l(le[de]))&&(ue+=(F=z-ae)*(z-(ae+=F/++ye)));else for(;++de<q;)c(z=l(C.call(le,le[de],de)))&&(ue+=(F=z-ae)*(z-(ae+=F/++ye)));if(ye>1)return ue/(ye-1)},p.deviation=function(){var le=p.variance.apply(this,arguments);return le&&Math.sqrt(le)};var g=f(i);function h(le){return le.length}p.bisectLeft=g.left,p.bisect=p.bisectRight=g.right,p.bisector=function(le){return f(1===le.length?function(C,z){return i(le(C),z)}:le)},p.shuffle=function(le,C,z){(ae=arguments.length)<3&&(z=le.length,ae<2&&(C=0));for(var F,q,ae=z-C;ae;)q=Math.random()*ae--|0,F=le[ae+C],le[ae+C]=le[q+C],le[q+C]=F;return le},p.permute=function(le,C){for(var z=C.length,F=new Array(z);z--;)F[z]=le[C[z]];return F},p.pairs=function(le){for(var C=0,z=le.length-1,F=le[0],q=new Array(z<0?0:z);C<z;)q[C]=[F,F=le[++C]];return q},p.transpose=function(le){if(!(q=le.length))return[];for(var C=-1,z=p.min(le,h),F=new Array(z);++C<z;)for(var q,ae=-1,ue=F[C]=new Array(q);++ae<q;)ue[ae]=le[ae][C];return F},p.zip=function(){return p.transpose(arguments)},p.keys=function(le){var C=[];for(var z in le)C.push(z);return C},p.values=function(le){var C=[];for(var z in le)C.push(le[z]);return C},p.entries=function(le){var C=[];for(var z in le)C.push({key:z,value:le[z]});return C},p.merge=function(le){for(var C,z,F,q=le.length,ae=-1,ue=0;++ae<q;)ue+=le[ae].length;for(z=new Array(ue);--q>=0;)for(C=(F=le[q]).length;--C>=0;)z[--ue]=F[C];return z};var o=Math.abs;function x(le){for(var C=1;le*C%1;)C*=10;return C}function d(le,C){for(var z in C)Object.defineProperty(le.prototype,z,{value:C[z],enumerable:!1})}function w(){this._=Object.create(null)}function _(le){return"__proto__"==(le+="")||"\0"===le[0]?"\0"+le:le}function T(le){return"\0"===(le+="")[0]?le.slice(1):le}function k(le){return _(le)in this._}function L(le){return(le=_(le))in this._&&delete this._[le]}function M(){var le=[];for(var C in this._)le.push(T(C));return le}function O(){var le=0;for(var C in this._)++le;return le}function P(){for(var le in this._)return!1;return!0}function S(){this._=Object.create(null)}function E(le){return le}function R(le,C,z){return function(){var F=z.apply(C,arguments);return F===C?le:F}}function B(le,C){if(C in le)return C;C=C.charAt(0).toUpperCase()+C.slice(1);for(var z=0,F=H.length;z<F;++z){var q=H[z]+C;if(q in le)return q}}p.range=function(le,C,z){if(arguments.length<3&&(z=1,arguments.length<2&&(C=le,le=0)),(C-le)/z==1/0)throw new Error("infinite range");var F,q=[],ae=x(o(z)),ue=-1;if(le*=ae,C*=ae,(z*=ae)<0)for(;(F=le+z*++ue)>C;)q.push(F/ae);else for(;(F=le+z*++ue)<C;)q.push(F/ae);return q},p.map=function(le,C){var z=new w;if(le instanceof w)le.forEach(function(de,ye){z.set(de,ye)});else if(Array.isArray(le)){var F,q=-1,ae=le.length;if(1===arguments.length)for(;++q<ae;)z.set(q,le[q]);else for(;++q<ae;)z.set(C.call(le,F=le[q],q),F)}else for(var ue in le)z.set(ue,le[ue]);return z},d(w,{has:k,get:function(le){return this._[_(le)]},set:function(le,C){return this._[_(le)]=C},remove:L,keys:M,values:function(){var le=[];for(var C in this._)le.push(this._[C]);return le},entries:function(){var le=[];for(var C in this._)le.push({key:T(C),value:this._[C]});return le},size:O,empty:P,forEach:function(le){for(var C in this._)le.call(this,T(C),this._[C])}}),p.nest=function(){var le,C,z={},F=[],q=[];function ae(ue,de,ye){if(ye>=F.length)return C?C.call(z,de):le?de.sort(le):de;for(var Ae,Ue,Ge,nt,xt=-1,At=de.length,wt=F[ye++],Tt=new w;++xt<At;)(nt=Tt.get(Ae=wt(Ue=de[xt])))?nt.push(Ue):Tt.set(Ae,[Ue]);return ue?(Ue=ue(),Ge=function(yt,Ft){Ue.set(yt,ae(ue,Ft,ye))}):(Ue={},Ge=function(yt,Ft){Ue[yt]=ae(ue,Ft,ye)}),Tt.forEach(Ge),Ue}return z.map=function(ue,de){return ae(de,ue,0)},z.entries=function(ue){return function de(ye,Ae){if(Ae>=F.length)return ye;var Ue=[],Ge=q[Ae++];return ye.forEach(function(nt,xt){Ue.push({key:nt,values:de(xt,Ae)})}),Ge?Ue.sort(function(nt,xt){return Ge(nt.key,xt.key)}):Ue}(ae(p.map,ue,0),0)},z.key=function(ue){return F.push(ue),z},z.sortKeys=function(ue){return q[F.length-1]=ue,z},z.sortValues=function(ue){return le=ue,z},z.rollup=function(ue){return C=ue,z},z},p.set=function(le){var C=new S;if(le)for(var z=0,F=le.length;z<F;++z)C.add(le[z]);return C},d(S,{has:k,add:function(le){return this._[_(le+="")]=!0,le},remove:L,values:M,size:O,empty:P,forEach:function(le){for(var C in this._)le.call(this,T(C))}}),p.behavior={},p.rebind=function(le,C){for(var z,F=1,q=arguments.length;++F<q;)le[z=arguments[F]]=R(le,C,C[z]);return le};var H=["webkit","ms","moz","Moz","o","O"];function V(){}function Z(){}function W(le){var C=[],z=new w;function F(){for(var q,ae=C,ue=-1,de=ae.length;++ue<de;)(q=ae[ue].on)&&q.apply(this,arguments);return le}return F.on=function(q,ae){var ue,de=z.get(q);return arguments.length<2?de&&de.on:(de&&(de.on=null,C=C.slice(0,ue=C.indexOf(de)).concat(C.slice(ue+1)),z.remove(q)),ae&&C.push(z.set(q,{on:ae})),le)},F}function G(){p.event.preventDefault()}function X(){for(var le,C=p.event;le=C.sourceEvent;)C=le;return C}function te(le){for(var C=new Z,z=0,F=arguments.length;++z<F;)C[arguments[z]]=W(C);return C.of=function(q,ae){return function(ue){try{var de=ue.sourceEvent=p.event;ue.target=le,p.event=ue,C[ue.type].apply(q,ae)}finally{p.event=de}}},C}p.dispatch=function(){for(var le=new Z,C=-1,z=arguments.length;++C<z;)le[arguments[C]]=W(le);return le},Z.prototype.on=function(le,C){var z=le.indexOf("."),F="";if(z>=0&&(F=le.slice(z+1),le=le.slice(0,z)),le)return arguments.length<2?this[le].on(F):this[le].on(F,C);if(2===arguments.length){if(null==C)for(le in this)this.hasOwnProperty(le)&&this[le].on(F,null);return this}},p.event=null,p.requote=function(le){return le.replace(D,"\\$&")};var D=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,N={}.__proto__?function(le,C){le.__proto__=C}:function(le,C){for(var z in C)le[z]=C[z]};function U(le){return N(le,K),le}var Q=function(le,C){return C.querySelector(le)},j=function(le,C){return C.querySelectorAll(le)},J=function(le,C){var z=le.matches||le[B(le,"matchesSelector")];return(J=function(F,q){return z.call(F,q)})(le,C)};"function"==typeof Sizzle&&(Q=function(le,C){return Sizzle(le,C)[0]||null},j=Sizzle,J=Sizzle.matchesSelector),p.selection=function(){return p.select(v.documentElement)};var K=p.selection.prototype=[];function re(le){return"function"==typeof le?le:function(){return Q(le,this)}}function ne(le){return"function"==typeof le?le:function(){return j(le,this)}}K.select=function(le){var C,z,F,q,ae=[];le=re(le);for(var ue=-1,de=this.length;++ue<de;){ae.push(C=[]),C.parentNode=(F=this[ue]).parentNode;for(var ye=-1,Ae=F.length;++ye<Ae;)(q=F[ye])?(C.push(z=le.call(q,q.__data__,ye,ue)),z&&"__data__"in q&&(z.__data__=q.__data__)):C.push(null)}return U(ae)},K.selectAll=function(le){var C,z,F=[];le=ne(le);for(var q=-1,ae=this.length;++q<ae;)for(var ue=this[q],de=-1,ye=ue.length;++de<ye;)(z=ue[de])&&(F.push(C=b(le.call(z,z.__data__,de,q))),C.parentNode=z);return U(F)};var se="http://www.w3.org/1999/xhtml",oe={svg:"http://www.w3.org/2000/svg",xhtml:se,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pe(le,C){return le=p.ns.qualify(le),null==C?le.local?function(){this.removeAttributeNS(le.space,le.local)}:function(){this.removeAttribute(le)}:"function"==typeof C?le.local?function(){var z=C.apply(this,arguments);null==z?this.removeAttributeNS(le.space,le.local):this.setAttributeNS(le.space,le.local,z)}:function(){var z=C.apply(this,arguments);null==z?this.removeAttribute(le):this.setAttribute(le,z)}:le.local?function(){this.setAttributeNS(le.space,le.local,C)}:function(){this.setAttribute(le,C)}}function ce(le){return le.trim().replace(/\s+/g," ")}function ge(le){return new RegExp("(?:^|\\s+)"+p.requote(le)+"(?:\\s+|$)","g")}function xe(le){return(le+"").trim().split(/^|\s+/)}function we(le,C){var z=(le=xe(le).map(be)).length;return"function"==typeof C?function(){for(var F=-1,q=C.apply(this,arguments);++F<z;)le[F](this,q)}:function(){for(var F=-1;++F<z;)le[F](this,C)}}function be(le){var C=ge(le);return function(z,F){if(q=z.classList)return F?q.add(le):q.remove(le);var q=z.getAttribute("class")||"";F?(C.lastIndex=0,C.test(q)||z.setAttribute("class",ce(q+" "+le))):z.setAttribute("class",ce(q.replace(C," ")))}}function Se(le,C,z){return null==C?function(){this.style.removeProperty(le)}:"function"==typeof C?function(){var F=C.apply(this,arguments);null==F?this.style.removeProperty(le):this.style.setProperty(le,F,z)}:function(){this.style.setProperty(le,C,z)}}function fe(le,C){return null==C?function(){delete this[le]}:"function"==typeof C?function(){var z=C.apply(this,arguments);null==z?delete this[le]:this[le]=z}:function(){this[le]=C}}function me(le){return"function"==typeof le?le:(le=p.ns.qualify(le)).local?function(){return this.ownerDocument.createElementNS(le.space,le.local)}:function(){var C=this.ownerDocument,z=this.namespaceURI;return z===se&&C.documentElement.namespaceURI===se?C.createElement(le):C.createElementNS(z,le)}}function Te(){var le=this.parentNode;le&&le.removeChild(this)}function _e(le){return{__data__:le}}function Me(le){return function(){return J(this,le)}}function Ie(le){return arguments.length||(le=i),function(C,z){return C&&z?le(C.__data__,z.__data__):!C-!z}}function ze(le,C){for(var z=0,F=le.length;z<F;z++)for(var q,ae=le[z],ue=0,de=ae.length;ue<de;ue++)(q=ae[ue])&&C(q,ue,z);return le}function Ve(le){return N(le,Je),le}p.ns={prefix:oe,qualify:function(le){var C=le.indexOf(":"),z=le;return C>=0&&"xmlns"!==(z=le.slice(0,C))&&(le=le.slice(C+1)),oe.hasOwnProperty(z)?{space:oe[z],local:le}:le}},K.attr=function(le,C){if(arguments.length<2){if("string"==typeof le){var z=this.node();return(le=p.ns.qualify(le)).local?z.getAttributeNS(le.space,le.local):z.getAttribute(le)}for(C in le)this.each(pe(C,le[C]));return this}return this.each(pe(le,C))},K.classed=function(le,C){if(arguments.length<2){if("string"==typeof le){var z=this.node(),F=(le=xe(le)).length,q=-1;if(C=z.classList){for(;++q<F;)if(!C.contains(le[q]))return!1}else for(C=z.getAttribute("class");++q<F;)if(!ge(le[q]).test(C))return!1;return!0}for(C in le)this.each(we(C,le[C]));return this}return this.each(we(le,C))},K.style=function(le,C,z){var F=arguments.length;if(F<3){if("string"!=typeof le){for(z in F<2&&(C=""),le)this.each(Se(z,le[z],C));return this}if(F<2){var q=this.node();return n(q).getComputedStyle(q,null).getPropertyValue(le)}z=""}return this.each(Se(le,C,z))},K.property=function(le,C){if(arguments.length<2){if("string"==typeof le)return this.node()[le];for(C in le)this.each(fe(C,le[C]));return this}return this.each(fe(le,C))},K.text=function(le){return arguments.length?this.each("function"==typeof le?function(){var C=le.apply(this,arguments);this.textContent=null==C?"":C}:null==le?function(){this.textContent=""}:function(){this.textContent=le}):this.node().textContent},K.html=function(le){return arguments.length?this.each("function"==typeof le?function(){var C=le.apply(this,arguments);this.innerHTML=null==C?"":C}:null==le?function(){this.innerHTML=""}:function(){this.innerHTML=le}):this.node().innerHTML},K.append=function(le){return le=me(le),this.select(function(){return this.appendChild(le.apply(this,arguments))})},K.insert=function(le,C){return le=me(le),C=re(C),this.select(function(){return this.insertBefore(le.apply(this,arguments),C.apply(this,arguments)||null)})},K.remove=function(){return this.each(Te)},K.data=function(le,C){var z,F,q=-1,ae=this.length;if(!arguments.length){for(le=new Array(ae=(z=this[0]).length);++q<ae;)(F=z[q])&&(le[q]=F.__data__);return le}function ue(Ue,Ge){var nt,xt,At,wt=Ue.length,Tt=Ge.length,yt=Math.min(wt,Tt),Ft=new Array(Tt),Ot=new Array(Tt),Nt=new Array(wt);if(C){var er,fr=new w,Tr=new Array(wt);for(nt=-1;++nt<wt;)(xt=Ue[nt])&&(fr.has(er=C.call(xt,xt.__data__,nt))?Nt[nt]=xt:fr.set(er,xt),Tr[nt]=er);for(nt=-1;++nt<Tt;)(xt=fr.get(er=C.call(Ge,At=Ge[nt],nt)))?!0!==xt&&(Ft[nt]=xt,xt.__data__=At):Ot[nt]=_e(At),fr.set(er,!0);for(nt=-1;++nt<wt;)nt in Tr&&!0!==fr.get(Tr[nt])&&(Nt[nt]=Ue[nt])}else{for(nt=-1;++nt<yt;)At=Ge[nt],(xt=Ue[nt])?(xt.__data__=At,Ft[nt]=xt):Ot[nt]=_e(At);for(;nt<Tt;++nt)Ot[nt]=_e(Ge[nt]);for(;nt<wt;++nt)Nt[nt]=Ue[nt]}Ot.update=Ft,Ot.parentNode=Ft.parentNode=Nt.parentNode=Ue.parentNode,de.push(Ot),ye.push(Ft),Ae.push(Nt)}var de=Ve([]),ye=U([]),Ae=U([]);if("function"==typeof le)for(;++q<ae;)ue(z=this[q],le.call(z,z.parentNode.__data__,q));else for(;++q<ae;)ue(z=this[q],le);return ye.enter=function(){return de},ye.exit=function(){return Ae},ye},K.datum=function(le){return arguments.length?this.property("__data__",le):this.property("__data__")},K.filter=function(le){var C,z,F,q=[];"function"!=typeof le&&(le=Me(le));for(var ae=0,ue=this.length;ae<ue;ae++){q.push(C=[]),C.parentNode=(z=this[ae]).parentNode;for(var de=0,ye=z.length;de<ye;de++)(F=z[de])&&le.call(F,F.__data__,de,ae)&&C.push(F)}return U(q)},K.order=function(){for(var le=-1,C=this.length;++le<C;)for(var z,F=this[le],q=F.length-1,ae=F[q];--q>=0;)(z=F[q])&&(ae&&ae!==z.nextSibling&&ae.parentNode.insertBefore(z,ae),ae=z);return this},K.sort=function(le){le=Ie.apply(this,arguments);for(var C=-1,z=this.length;++C<z;)this[C].sort(le);return this.order()},K.each=function(le){return ze(this,function(C,z,F){le.call(C,C.__data__,z,F)})},K.call=function(le){var C=b(arguments);return le.apply(C[0]=this,C),this},K.empty=function(){return!this.node()},K.node=function(){for(var le=0,C=this.length;le<C;le++)for(var z=this[le],F=0,q=z.length;F<q;F++){var ae=z[F];if(ae)return ae}return null},K.size=function(){var le=0;return ze(this,function(){++le}),le};var Je=[];function De(le){var C,z;return function(F,q,ae){var ue,de=le[ae].update,ye=de.length;for(ae!=z&&(z=ae,C=0),q>=C&&(C=q+1);!(ue=de[C])&&++C<ye;);return ue}}function Be(le,C,z){var F="__on"+le,q=le.indexOf("."),ae=Ye;q>0&&(le=le.slice(0,q));var ue=Ze.get(le);function de(){var ye=this[F];ye&&(this.removeEventListener(le,ye,ye.$),delete this[F])}return ue&&(le=ue,ae=tt),q?C?function(){var ye=ae(C,b(arguments));de.call(this),this.addEventListener(le,this[F]=ye,ye.$=z),ye._=C}:de:C?V:function(){var ye,Ae=new RegExp("^__on([^.]+)"+p.requote(le)+"$");for(var Ue in this)if(ye=Ue.match(Ae)){var Ge=this[Ue];this.removeEventListener(ye[1],Ge,Ge.$),delete this[Ue]}}}p.selection.enter=Ve,p.selection.enter.prototype=Je,Je.append=K.append,Je.empty=K.empty,Je.node=K.node,Je.call=K.call,Je.size=K.size,Je.select=function(le){for(var C,z,F,q,ae,ue=[],de=-1,ye=this.length;++de<ye;){F=(q=this[de]).update,ue.push(C=[]),C.parentNode=q.parentNode;for(var Ae=-1,Ue=q.length;++Ae<Ue;)(ae=q[Ae])?(C.push(F[Ae]=z=le.call(q.parentNode,ae.__data__,Ae,de)),z.__data__=ae.__data__):C.push(null)}return U(ue)},Je.insert=function(le,C){return arguments.length<2&&(C=De(this)),K.insert.call(this,le,C)},p.select=function(le){var C;return"string"==typeof le?(C=[Q(le,v)]).parentNode=v.documentElement:(C=[le]).parentNode=e(le),U([C])},p.selectAll=function(le){var C;return"string"==typeof le?(C=b(j(le,v))).parentNode=v.documentElement:(C=b(le)).parentNode=null,U([C])},K.on=function(le,C,z){var F=arguments.length;if(F<3){if("string"!=typeof le){for(z in F<2&&(C=!1),le)this.each(Be(z,le[z],C));return this}if(F<2)return(F=this.node()["__on"+le])&&F._;z=!1}return this.each(Be(le,C,z))};var Ze=p.map({mouseenter:"mouseover",mouseleave:"mouseout"});function Ye(le,C){return function(z){var F=p.event;p.event=z,C[0]=this.__data__;try{le.apply(this,C)}finally{p.event=F}}}function tt(le,C){var z=Ye(le,C);return function(F){var q=F.relatedTarget;q&&(q===this||8&q.compareDocumentPosition(this))||z.call(this,F)}}v&&Ze.forEach(function(le){"on"+le in v&&Ze.remove(le)});var st,vt=0;function Pt(le){var C=".dragsuppress-"+ ++vt,z="click"+C,F=p.select(n(le)).on("touchmove"+C,G).on("dragstart"+C,G).on("selectstart"+C,G);if(null==st&&(st=!("onselectstart"in le)&&B(le.style,"userSelect")),st){var q=e(le).style,ae=q[st];q[st]="none"}return function(ue){if(F.on(C,null),st&&(q[st]=ae),ue){var de=function(){F.on(z,null)};F.on(z,function(){G(),de()},!0),setTimeout(de,0)}}}p.mouse=function(le){return rt(le,X())};var Mt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function rt(le,C){C.changedTouches&&(C=C.changedTouches[0]);var z=le.ownerSVGElement||le;if(z.createSVGPoint){var F=z.createSVGPoint();if(Mt<0){var q=n(le);if(q.scrollX||q.scrollY){var ae=(z=p.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Mt=!(ae.f||ae.e),z.remove()}}return Mt?(F.x=C.pageX,F.y=C.pageY):(F.x=C.clientX,F.y=C.clientY),[(F=F.matrixTransform(le.getScreenCTM().inverse())).x,F.y]}var ue=le.getBoundingClientRect();return[C.clientX-ue.left-le.clientLeft,C.clientY-ue.top-le.clientTop]}function et(){return p.event.changedTouches[0].identifier}p.touch=function(le,C,z){if(arguments.length<3&&(z=C,C=X().changedTouches),C)for(var F,q=0,ae=C.length;q<ae;++q)if((F=C[q]).identifier===z)return rt(le,F)},p.behavior.drag=function(){var le=te(q,"drag","dragstart","dragend"),C=null,z=ae(V,p.mouse,n,"mousemove","mouseup"),F=ae(et,p.touch,E,"touchmove","touchend");function q(){this.on("mousedown.drag",z).on("touchstart.drag",F)}function ae(ue,de,ye,Ae,Ue){return function(){var Ge,nt=this,xt=p.event.target.correspondingElement||p.event.target,At=nt.parentNode,wt=le.of(nt,arguments),Tt=0,yt=ue(),Ft=".drag"+(null==yt?"":"-"+yt),Ot=p.select(ye(xt)).on(Ae+Ft,fr).on(Ue+Ft,Tr),Nt=Pt(xt),er=de(At,yt);function fr(){var wr,Zr,Xr=de(At,yt);Xr&&(Tt|=(wr=Xr[0]-er[0])|(Zr=Xr[1]-er[1]),er=Xr,wt({type:"drag",x:Xr[0]+Ge[0],y:Xr[1]+Ge[1],dx:wr,dy:Zr}))}function Tr(){de(At,yt)&&(Ot.on(Ae+Ft,null).on(Ue+Ft,null),Nt(Tt),wt({type:"dragend"}))}Ge=C?[(Ge=C.apply(nt,arguments)).x-er[0],Ge.y-er[1]]:[0,0],wt({type:"dragstart"})}}return q.origin=function(ue){return arguments.length?(C=ue,q):C},p.rebind(q,le,"on")},p.touches=function(le,C){return arguments.length<2&&(C=X().touches),C?b(C).map(function(z){var F=rt(le,z);return F.identifier=z.identifier,F}):[]};var bt=1e-6,Rt=Math.PI,Yt=2*Rt,Fe=Yt-bt,He=Rt/2,Oe=Rt/180,$e=180/Rt;function ke(le){return le>1?He:le<-1?-He:Math.asin(le)}function Le(le){return((le=Math.exp(le))+1/le)/2}var Pe=Math.SQRT2;p.interpolateZoom=function(le,C){var z,F,q=le[0],ae=le[1],ue=le[2],Ae=C[2],Ue=C[0]-q,Ge=C[1]-ae,nt=Ue*Ue+Ge*Ge;if(nt<1e-12)F=Math.log(Ae/ue)/Pe,z=function(Ft){return[q+Ft*Ue,ae+Ft*Ge,ue*Math.exp(Pe*Ft*F)]};else{var xt=Math.sqrt(nt),At=(Ae*Ae-ue*ue+4*nt)/(2*ue*2*xt),wt=(Ae*Ae-ue*ue-4*nt)/(2*Ae*2*xt),Tt=Math.log(Math.sqrt(At*At+1)-At),yt=Math.log(Math.sqrt(wt*wt+1)-wt);F=(yt-Tt)/Pe,z=function(Ft){var Ot,Tr,Nt=Ft*F,er=Le(Tt),fr=ue/(2*xt)*(er*(Ot=Pe*Nt+Tt,((Ot=Math.exp(2*Ot))-1)/(Ot+1))-(Tr=Tt,((Tr=Math.exp(Tr))-1/Tr)/2));return[q+fr*Ue,ae+fr*Ge,ue*er/Le(Pe*Nt+Tt)]}}return z.duration=1e3*F,z},p.behavior.zoom=function(){var le,C,z,F,q,ae,ue,de,ye,Ae={x:0,y:0,k:1},Ue=[960,500],Ge=at,nt=250,xt=0,At="mousedown.zoom",wt="mousemove.zoom",Tt="mouseup.zoom",yt="touchstart.zoom",Ft=te(Ot,"zoomstart","zoom","zoomend");function Ot(Ur){Ur.on(At,rn).on(Xe+".zoom",Gn).on("dblclick.zoom",oi).on(yt,Nn)}function Nt(Ur){return[(Ur[0]-Ae.x)/Ae.k,(Ur[1]-Ae.y)/Ae.k]}function er(Ur){Ae.k=Math.max(Ge[0],Math.min(Ge[1],Ur))}function fr(Ur,_n){var Yn;Ae.x+=Ur[0]-(_n=[(Yn=_n)[0]*Ae.k+Ae.x,Yn[1]*Ae.k+Ae.y])[0],Ae.y+=Ur[1]-_n[1]}function Tr(Ur,_n,Yn,Vn){Ur.__chart__={x:Ae.x,y:Ae.y,k:Ae.k},er(Math.pow(2,Vn)),fr(C=_n,Yn),Ur=p.select(Ur),nt>0&&(Ur=Ur.transition().duration(nt)),Ur.call(Ot.event)}function wr(){ue&&ue.domain(ae.range().map(function(Ur){return(Ur-Ae.x)/Ae.k}).map(ae.invert)),ye&&ye.domain(de.range().map(function(Ur){return(Ur-Ae.y)/Ae.k}).map(de.invert))}function Zr(Ur){xt++||Ur({type:"zoomstart"})}function Xr(Ur){wr(),Ur({type:"zoom",scale:Ae.k,translate:[Ae.x,Ae.y]})}function fn(Ur){--xt||(Ur({type:"zoomend"}),C=null)}function rn(){var Ur=this,_n=Ft.of(Ur,arguments),Yn=0,Vn=p.select(n(Ur)).on(wt,wi).on(Tt,Xn),Qn=Nt(p.mouse(Ur)),li=Pt(Ur);function wi(){Yn=1,fr(p.mouse(Ur),Qn),Xr(_n)}function Xn(){Vn.on(wt,null).on(Tt,null),li(Yn),fn(_n)}_s.call(Ur),Zr(_n)}function Nn(){var Ur,_n=this,Yn=Ft.of(_n,arguments),Vn={},Qn=0,li=".zoom-"+p.event.changedTouches[0].identifier,wi="touchmove"+li,Xn="touchend"+li,mi=[],pi=p.select(_n),Mi=Pt(_n);function vi(){var Ma=p.touches(_n);return Ur=Ae.k,Ma.forEach(function(Sa){Sa.identifier in Vn&&(Vn[Sa.identifier]=Nt(Sa))}),Ma}function Si(){var Ma=p.event.target;p.select(Ma).on(wi,Di).on(Xn,aa),mi.push(Ma);for(var Sa=p.event.changedTouches,ia=0,xa=Sa.length;ia<xa;++ia)Vn[Sa[ia].identifier]=null;var ua=vi(),ho=Date.now();if(1===ua.length){if(ho-q<500){var Na=ua[0];Tr(_n,Na,Vn[Na.identifier],Math.floor(Math.log(Ae.k)/Math.LN2)+1),G()}q=ho}else if(ua.length>1){var Co=ua[1],ms=(Na=ua[0])[0]-Co[0],Rs=Na[1]-Co[1];Qn=ms*ms+Rs*Rs}}function Di(){var Ma,Sa,ia,xa,ua=p.touches(_n);_s.call(_n);for(var ho=0,Na=ua.length;ho<Na;++ho,xa=null)if(xa=Vn[(ia=ua[ho]).identifier]){if(Sa)break;Ma=ia,Sa=xa}if(xa){var Co=(Co=ia[0]-Ma[0])*Co+(Co=ia[1]-Ma[1])*Co,ms=Qn&&Math.sqrt(Co/Qn);Ma=[(Ma[0]+ia[0])/2,(Ma[1]+ia[1])/2],Sa=[(Sa[0]+xa[0])/2,(Sa[1]+xa[1])/2],er(ms*Ur)}q=null,fr(Ma,Sa),Xr(Yn)}function aa(){if(p.event.touches.length){for(var Ma=p.event.changedTouches,Sa=0,ia=Ma.length;Sa<ia;++Sa)delete Vn[Ma[Sa].identifier];for(var xa in Vn)return void vi()}p.selectAll(mi).on(li,null),pi.on(At,rn).on(yt,Nn),Mi(),fn(Yn)}Si(),Zr(Yn),pi.on(At,null).on(yt,Si)}function Gn(){var Ur=Ft.of(this,arguments);F?clearTimeout(F):(_s.call(this),le=Nt(C=z||p.mouse(this)),Zr(Ur)),F=setTimeout(function(){F=null,fn(Ur)},50),G(),er(Math.pow(2,.002*Ce())*Ae.k),fr(C,le),Xr(Ur)}function oi(){var Ur=p.mouse(this),_n=Math.log(Ae.k)/Math.LN2;Tr(this,Ur,Nt(Ur),p.event.shiftKey?Math.ceil(_n)-1:Math.floor(_n)+1)}return Xe||(Xe="onwheel"in v?(Ce=function(){return-p.event.deltaY*(p.event.deltaMode?120:1)},"wheel"):"onmousewheel"in v?(Ce=function(){return p.event.wheelDelta},"mousewheel"):(Ce=function(){return-p.event.detail},"MozMousePixelScroll")),Ot.event=function(Ur){Ur.each(function(){var _n=Ft.of(this,arguments),Yn=Ae;us?p.select(this).transition().each("start.zoom",function(){Ae=this.__chart__||{x:0,y:0,k:1},Zr(_n)}).tween("zoom:zoom",function(){var Vn=Ue[0],li=C?C[0]:Vn/2,wi=C?C[1]:Ue[1]/2,Xn=p.interpolateZoom([(li-Ae.x)/Ae.k,(wi-Ae.y)/Ae.k,Vn/Ae.k],[(li-Yn.x)/Yn.k,(wi-Yn.y)/Yn.k,Vn/Yn.k]);return function(mi){var pi=Xn(mi),Mi=Vn/pi[2];this.__chart__=Ae={x:li-pi[0]*Mi,y:wi-pi[1]*Mi,k:Mi},Xr(_n)}}).each("interrupt.zoom",function(){fn(_n)}).each("end.zoom",function(){fn(_n)}):(this.__chart__=Ae,Zr(_n),Xr(_n),fn(_n))})},Ot.translate=function(Ur){return arguments.length?(Ae={x:+Ur[0],y:+Ur[1],k:Ae.k},wr(),Ot):[Ae.x,Ae.y]},Ot.scale=function(Ur){return arguments.length?(Ae={x:Ae.x,y:Ae.y,k:null},er(+Ur),wr(),Ot):Ae.k},Ot.scaleExtent=function(Ur){return arguments.length?(Ge=null==Ur?at:[+Ur[0],+Ur[1]],Ot):Ge},Ot.center=function(Ur){return arguments.length?(z=Ur&&[+Ur[0],+Ur[1]],Ot):z},Ot.size=function(Ur){return arguments.length?(Ue=Ur&&[+Ur[0],+Ur[1]],Ot):Ue},Ot.duration=function(Ur){return arguments.length?(nt=+Ur,Ot):nt},Ot.x=function(Ur){return arguments.length?(ue=Ur,ae=Ur.copy(),Ae={x:0,y:0,k:1},Ot):ue},Ot.y=function(Ur){return arguments.length?(ye=Ur,de=Ur.copy(),Ae={x:0,y:0,k:1},Ot):ye},p.rebind(Ot,Ft,"on")};var Ce,Xe,at=[0,1/0];function pt(){}function ut(le,C,z){return this instanceof ut?(this.h=+le,this.s=+C,void(this.l=+z)):arguments.length<2?le instanceof ut?new ut(le.h,le.s,le.l):dr(""+le,hr,ut):new ut(le,C,z)}p.color=pt,pt.prototype.toString=function(){return this.rgb()+""},p.hsl=ut;var St=ut.prototype=new pt;function ot(le,C,z){var F,q;function ae(ue){return Math.round(255*((de=ue)>360?de-=360:de<0&&(de+=360),de<60?F+(q-F)*de/60:de<180?q:de<240?F+(q-F)*(240-de)/60:F));var de}return le=isNaN(le)?0:(le%=360)<0?le+360:le,C=isNaN(C)||C<0?0:C>1?1:C,F=2*(z=z<0?0:z>1?1:z)-(q=z<=.5?z*(1+C):z+C-z*C),new Vt(ae(le+120),ae(le),ae(le-120))}function Et(le,C,z){return this instanceof Et?(this.h=+le,this.c=+C,void(this.l=+z)):arguments.length<2?le instanceof Et?new Et(le.h,le.c,le.l):Re(le instanceof mt?le.l:(le=cr((le=p.rgb(le)).r,le.g,le.b)).l,le.a,le.b):new Et(le,C,z)}St.brighter=function(le){return le=Math.pow(.7,arguments.length?le:1),new ut(this.h,this.s,this.l/le)},St.darker=function(le){return le=Math.pow(.7,arguments.length?le:1),new ut(this.h,this.s,le*this.l)},St.rgb=function(){return ot(this.h,this.s,this.l)},p.hcl=Et;var Lt=Et.prototype=new pt;function Qe(le,C,z){return isNaN(le)&&(le=0),isNaN(C)&&(C=0),new mt(z,Math.cos(le*=Oe)*C,Math.sin(le)*C)}function mt(le,C,z){return this instanceof mt?(this.l=+le,this.a=+C,void(this.b=+z)):arguments.length<2?le instanceof mt?new mt(le.l,le.a,le.b):le instanceof Et?Qe(le.h,le.c,le.l):cr((le=Vt(le)).r,le.g,le.b):new mt(le,C,z)}Lt.brighter=function(le){return new Et(this.h,this.c,Math.min(100,this.l+It*(arguments.length?le:1)))},Lt.darker=function(le){return new Et(this.h,this.c,Math.max(0,this.l-It*(arguments.length?le:1)))},Lt.rgb=function(){return Qe(this.h,this.c,this.l).rgb()},p.lab=mt;var It=18,jt=mt.prototype=new pt;function Zt(le,C,z){var F=(le+16)/116,q=F+C/500,ae=F-z/200;return new Vt(Dt(3.2404542*(q=.95047*lt(q))-1.5371385*(F=1*lt(F))-.4985314*(ae=1.08883*lt(ae))),Dt(-.969266*q+1.8760108*F+.041556*ae),Dt(.0556434*q-.2040259*F+1.0572252*ae))}function Re(le,C,z){return le>0?new Et(Math.atan2(z,C)*$e,Math.sqrt(C*C+z*z),le):new Et(NaN,NaN,le)}function lt(le){return le>.206893034?le*le*le:(le-4/29)/7.787037}function _t(le){return le>.008856?Math.pow(le,1/3):7.787037*le+4/29}function Dt(le){return Math.round(255*(le<=.00304?12.92*le:1.055*Math.pow(le,1/2.4)-.055))}function Vt(le,C,z){return this instanceof Vt?(this.r=~~le,this.g=~~C,void(this.b=~~z)):arguments.length<2?le instanceof Vt?new Vt(le.r,le.g,le.b):dr(""+le,Vt,ot):new Vt(le,C,z)}function nr(le){return new Vt(le>>16,le>>8&255,255&le)}function Gt(le){return nr(le)+""}jt.brighter=function(le){return new mt(Math.min(100,this.l+It*(arguments.length?le:1)),this.a,this.b)},jt.darker=function(le){return new mt(Math.max(0,this.l-It*(arguments.length?le:1)),this.a,this.b)},jt.rgb=function(){return Zt(this.l,this.a,this.b)},p.rgb=Vt;var Kt=Vt.prototype=new pt;function ir(le){return le<16?"0"+Math.max(0,le).toString(16):Math.min(255,le).toString(16)}function dr(le,C,z){var F,q,ae,ue=0,de=0,ye=0;if(F=/([a-z]+)\((.*)\)/.exec(le=le.toLowerCase()))switch(q=F[2].split(","),F[1]){case"hsl":return z(parseFloat(q[0]),parseFloat(q[1])/100,parseFloat(q[2])/100);case"rgb":return C(mr(q[0]),mr(q[1]),mr(q[2]))}return(ae=Ir.get(le))?C(ae.r,ae.g,ae.b):(null==le||"#"!==le.charAt(0)||isNaN(ae=parseInt(le.slice(1),16))||(4===le.length?(ue=(3840&ae)>>4,ue|=ue>>4,de=240&ae,de|=de>>4,ye=15&ae,ye|=ye<<4):7===le.length&&(ue=(16711680&ae)>>16,de=(65280&ae)>>8,ye=255&ae)),C(ue,de,ye))}function hr(le,C,z){var F,q,ae=Math.min(le/=255,C/=255,z/=255),ue=Math.max(le,C,z),de=ue-ae,ye=(ue+ae)/2;return de?(q=ye<.5?de/(ue+ae):de/(2-ue-ae),F=le==ue?(C-z)/de+(C<z?6:0):C==ue?(z-le)/de+2:(le-C)/de+4,F*=60):(F=NaN,q=ye>0&&ye<1?0:F),new ut(F,q,ye)}function cr(le,C,z){var F=_t((.4124564*(le=sr(le))+.3575761*(C=sr(C))+.1804375*(z=sr(z)))/.95047),q=_t((.2126729*le+.7151522*C+.072175*z)/1);return mt(116*q-16,500*(F-q),200*(q-_t((.0193339*le+.119192*C+.9503041*z)/1.08883)))}function sr(le){return(le/=255)<=.04045?le/12.92:Math.pow((le+.055)/1.055,2.4)}function mr(le){var C=parseFloat(le);return"%"===le.charAt(le.length-1)?Math.round(2.55*C):C}Kt.brighter=function(le){le=Math.pow(.7,arguments.length?le:1);var C=this.r,z=this.g,F=this.b,q=30;return C||z||F?(C&&C<q&&(C=q),z&&z<q&&(z=q),F&&F<q&&(F=q),new Vt(Math.min(255,C/le),Math.min(255,z/le),Math.min(255,F/le))):new Vt(q,q,q)},Kt.darker=function(le){return new Vt((le=Math.pow(.7,arguments.length?le:1))*this.r,le*this.g,le*this.b)},Kt.hsl=function(){return hr(this.r,this.g,this.b)},Kt.toString=function(){return"#"+ir(this.r)+ir(this.g)+ir(this.b)};var Ir=p.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function vr(le){return"function"==typeof le?le:function(){return le}}function Br(le){return function(C,z,F){return 2===arguments.length&&"function"==typeof z&&(F=z,z=null),Jr(C,z,le,F)}}function Jr(le,C,z,F){var Ue,q={},ae=p.dispatch("beforesend","progress","load","error"),ue={},de=new XMLHttpRequest,ye=null;function Ae(){var Ue,nt,xt,Ge=de.status;if(!Ge&&((xt=(nt=de).responseType)&&"text"!==xt?nt.response:nt.responseText)||Ge>=200&&Ge<300||304===Ge){try{Ue=z.call(q,de)}catch(nt){return void ae.error.call(q,nt)}ae.load.call(q,Ue)}else ae.error.call(q,de)}return self.XDomainRequest&&!("withCredentials"in de)&&/^(http(s)?:)?\/\//.test(le)&&(de=new XDomainRequest),"onload"in de?de.onload=de.onerror=Ae:de.onreadystatechange=function(){de.readyState>3&&Ae()},de.onprogress=function(Ue){var Ge=p.event;p.event=Ue;try{ae.progress.call(q,de)}finally{p.event=Ge}},q.header=function(Ue,Ge){return Ue=(Ue+"").toLowerCase(),arguments.length<2?ue[Ue]:(null==Ge?delete ue[Ue]:ue[Ue]=Ge+"",q)},q.mimeType=function(Ue){return arguments.length?(C=null==Ue?null:Ue+"",q):C},q.responseType=function(Ue){return arguments.length?(ye=Ue,q):ye},q.response=function(Ue){return z=Ue,q},["get","post"].forEach(function(Ue){q[Ue]=function(){return q.send.apply(q,[Ue].concat(b(arguments)))}}),q.send=function(Ue,Ge,nt){if(2===arguments.length&&"function"==typeof Ge&&(nt=Ge,Ge=null),de.open(Ue,le,!0),null==C||"accept"in ue||(ue.accept=C+",*/*"),de.setRequestHeader)for(var xt in ue)de.setRequestHeader(xt,ue[xt]);return null!=C&&de.overrideMimeType&&de.overrideMimeType(C),null!=ye&&(de.responseType=ye),null!=nt&&q.on("error",nt).on("load",function(At){nt(null,At)}),ae.beforesend.call(q,de),de.send(null==Ge?null:Ge),q},q.abort=function(){return de.abort(),q},p.rebind(q,ae,"on"),null==F?q:q.get(1===(Ue=F).length?function(Ge,nt){Ue(null==Ge?nt:null)}:Ue)}Ir.forEach(function(le,C){Ir.set(le,nr(C))}),p.functor=vr,p.xhr=Br(E),p.dsv=function(le,C){var z=new RegExp('["'+le+"\n]"),F=le.charCodeAt(0);function q(Ae,Ue,Ge){arguments.length<3&&(Ge=Ue,Ue=null);var nt=Jr(Ae,C,null==Ue?ae:ue(Ue),Ge);return nt.row=function(xt){return arguments.length?nt.response(null==(Ue=xt)?ae:ue(xt)):Ue},nt}function ae(Ae){return q.parse(Ae.responseText)}function ue(Ae){return function(Ue){return q.parse(Ue.responseText,Ae)}}function de(Ae){return Ae.map(ye).join(le)}function ye(Ae){return z.test(Ae)?'"'+Ae.replace(/\"/g,'""')+'"':Ae}return q.parse=function(Ae,Ue){var Ge;return q.parseRows(Ae,function(nt,xt){if(Ge)return Ge(nt,xt-1);var At=function(wt){for(var Tt={},yt=nt.length,Ft=0;Ft<yt;++Ft)Tt[nt[Ft]]=wt[Ft];return Tt};Ge=Ue?function(wt,Tt){return Ue(At(wt),Tt)}:At})},q.parseRows=function(Ae,Ue){var Ge,nt,xt={},At={},wt=[],Tt=Ae.length,yt=0,Ft=0;function Ot(){if(yt>=Tt)return At;if(nt)return nt=!1,xt;var er=yt;if(34===Ae.charCodeAt(er)){for(var fr=er;fr++<Tt;)if(34===Ae.charCodeAt(fr)){if(34!==Ae.charCodeAt(fr+1))break;++fr}return yt=fr+2,13===(Tr=Ae.charCodeAt(fr+1))?(nt=!0,10===Ae.charCodeAt(fr+2)&&++yt):10===Tr&&(nt=!0),Ae.slice(er+1,fr).replace(/""/g,'"')}for(;yt<Tt;){var Tr,wr=1;if(10===(Tr=Ae.charCodeAt(yt++)))nt=!0;else if(13===Tr)nt=!0,10===Ae.charCodeAt(yt)&&(++yt,++wr);else if(Tr!==F)continue;return Ae.slice(er,yt-wr)}return Ae.slice(er)}for(;(Ge=Ot())!==At;){for(var Nt=[];Ge!==xt&&Ge!==At;)Nt.push(Ge),Ge=Ot();Ue&&null==(Nt=Ue(Nt,Ft++))||wt.push(Nt)}return wt},q.format=function(Ae){if(Array.isArray(Ae[0]))return q.formatRows(Ae);var Ue=new S,Ge=[];return Ae.forEach(function(nt){for(var xt in nt)Ue.has(xt)||Ge.push(Ue.add(xt))}),[Ge.map(ye).join(le)].concat(Ae.map(function(nt){return Ge.map(function(xt){return ye(nt[xt])}).join(le)})).join("\n")},q.formatRows=function(Ae){return Ae.map(de).join("\n")},q},p.csv=p.dsv(",","text/csv"),p.tsv=p.dsv("\t","text/tab-separated-values");var ln,En,Cn,An,$r=this[B(this,"requestAnimationFrame")]||function(le){setTimeout(le,17)};function Rr(le,C,z){var F=arguments.length;F<2&&(C=0),F<3&&(z=Date.now());var q=z+C,ae={c:le,t:q,n:null};return En?En.n=ae:ln=ae,En=ae,Cn||(An=clearTimeout(An),Cn=1,$r(Lr)),ae}function Lr(){var le=Qr(),C=On()-le;C>24?(isFinite(C)&&(clearTimeout(An),An=setTimeout(Lr,C)),Cn=0):(Cn=1,$r(Lr))}function Qr(){for(var le=Date.now(),C=ln;C;)le>=C.t&&C.c(le-C.t)&&(C.c=null),C=C.n;return le}function On(){for(var le,C=ln,z=1/0;C;)C.c?(C.t<z&&(z=C.t),C=(le=C).n):C=le?le.n=C.n:ln=C.n;return En=le,z}function zr(le){return le[0]}function sn(le){return le[1]}function Mn(le){for(var C,z,F,q=le.length,ae=[0,1],ue=2,de=2;de<q;de++){for(;ue>1&&((z=le[ae[ue-1]])[0]-(C=le[ae[ue-2]])[0])*((F=le[de])[1]-C[1])-(z[1]-C[1])*(F[0]-C[0])<=0;)--ue;ae[ue++]=de}return ae.slice(0,ue)}function Tn(le,C){return le[0]-C[0]||le[1]-C[1]}p.timer=function(){Rr.apply(this,arguments)},p.timer.flush=function(){Qr(),On()},p.round=function(le,C){return C?Math.round(le*(C=Math.pow(10,C)))/C:Math.round(le)},p.geom={},p.geom.hull=function(le){var C=zr,z=sn;if(arguments.length)return F(le);function F(q){if(q.length<3)return[];var ae,ue=vr(C),de=vr(z),ye=q.length,Ae=[],Ue=[];for(ae=0;ae<ye;ae++)Ae.push([+ue.call(this,q[ae],ae),+de.call(this,q[ae],ae),ae]);for(Ae.sort(Tn),ae=0;ae<ye;ae++)Ue.push([Ae[ae][0],-Ae[ae][1]]);var Ge=Mn(Ae),nt=Mn(Ue),xt=nt[0]===Ge[0],At=nt[nt.length-1]===Ge[Ge.length-1],wt=[];for(ae=Ge.length-1;ae>=0;--ae)wt.push(q[Ae[Ge[ae]][2]]);for(ae=+xt;ae<nt.length-At;++ae)wt.push(q[Ae[nt[ae]][2]]);return wt}return F.x=function(q){return arguments.length?(C=q,F):C},F.y=function(q){return arguments.length?(z=q,F):z},F},p.geom.polygon=function(le){return N(le,Rn),le};var Rn=p.geom.polygon.prototype=[];function $t(le,C,z){return(z[0]-C[0])*(le[1]-C[1])<(z[1]-C[1])*(le[0]-C[0])}function Ct(le,C,z,F){var q=le[0],ae=z[0],ue=C[0]-q,de=F[0]-ae,ye=le[1],Ae=z[1],Ue=C[1]-ye,Ge=F[1]-Ae,nt=(de*(ye-Ae)-Ge*(q-ae))/(Ge*ue-de*Ue);return[q+nt*ue,ye+nt*Ue]}function Ut(le){var C=le[0],z=le[le.length-1];return!(C[0]-z[0]||C[1]-z[1])}Rn.area=function(){for(var le,C=-1,z=this.length,F=this[z-1],q=0;++C<z;)q+=(le=F)[1]*(F=this[C])[0]-le[0]*F[1];return.5*q},Rn.centroid=function(le){var C,z,F=-1,q=this.length,ae=0,ue=0,de=this[q-1];for(arguments.length||(le=-1/(6*this.area()));++F<q;)ae+=((C=de)[0]+(de=this[F])[0])*(z=C[0]*de[1]-de[0]*C[1]),ue+=(C[1]+de[1])*z;return[ae*le,ue*le]},Rn.clip=function(le){for(var C,z,F,q,ae,ue,de=Ut(le),ye=-1,Ae=this.length-Ut(this),Ue=this[Ae-1];++ye<Ae;){for(C=le.slice(),le.length=0,q=this[ye],ae=C[(F=C.length-de)-1],z=-1;++z<F;)$t(ue=C[z],Ue,q)?($t(ae,Ue,q)||le.push(Ct(ae,ue,Ue,q)),le.push(ue)):$t(ae,Ue,q)&&le.push(Ct(ae,ue,Ue,q)),ae=ue;de&&le.push(le[0]),Ue=q}return le};var lr,_r,qr,Vr,br,yr=[],kr=[];function Cr(){ea(this),this.edge=this.site=this.circle=null}function Ar(le){var C=yr.pop()||new Cr;return C.site=le,C}function Yr(le){wn(le),qr.remove(le),yr.push(le),ea(le)}function cn(le){var C=le.circle,z=C.x,F=C.cy,q={x:z,y:F},ae=le.P,ue=le.N,de=[le];Yr(le);for(var ye=ae;ye.circle&&o(z-ye.circle.x)<bt&&o(F-ye.circle.cy)<bt;)ae=ye.P,de.unshift(ye),Yr(ye),ye=ae;de.unshift(ye),wn(ye);for(var Ae=ue;Ae.circle&&o(z-Ae.circle.x)<bt&&o(F-Ae.circle.cy)<bt;)ue=Ae.N,de.push(Ae),Yr(Ae),Ae=ue;de.push(Ae),wn(Ae);var Ue,Ge=de.length;for(Ue=1;Ue<Ge;++Ue)ui((Ae=de[Ue]).edge,(ye=de[Ue-1]).site,Ae.site,q);(Ae=de[Ge-1]).edge=gn((ye=de[0]).site,Ae.site,null,q),dn(ye),dn(Ae)}function yn(le){for(var C,z,F,q,ae=le.x,ue=le.y,de=qr._;de;)if((F=Kr(de,ue)-ae)>bt)de=de.L;else{if(!((q=ae-mn(de,ue))>bt)){F>-bt?(C=de.P,z=de):q>-bt?(C=de,z=de.N):C=z=de;break}if(!de.R){C=de;break}de=de.R}var ye=Ar(le);if(qr.insert(C,ye),C||z){if(C===z)return wn(C),z=Ar(C.site),qr.insert(ye,z),ye.edge=z.edge=gn(C.site,ye.site),dn(C),void dn(z);if(z){wn(C),wn(z);var Ae=C.site,Ue=Ae.x,Ge=Ae.y,nt=le.x-Ue,xt=le.y-Ge,At=z.site,wt=At.x-Ue,Tt=At.y-Ge,yt=2*(nt*Tt-xt*wt),Ft=nt*nt+xt*xt,Ot=wt*wt+Tt*Tt,Nt={x:(Tt*Ft-xt*Ot)/yt+Ue,y:(nt*Ot-wt*Ft)/yt+Ge};ui(z.edge,Ae,At,Nt),ye.edge=gn(Ae,le,null,Nt),z.edge=gn(le,At,null,Nt),dn(C),dn(z)}else ye.edge=gn(C.site,ye.site)}}function Kr(le,C){var z=le.site,F=z.x,q=z.y,ae=q-C;if(!ae)return F;var ue=le.P;if(!ue)return-1/0;var de=(z=ue.site).x,ye=z.y,Ae=ye-C;if(!Ae)return de;var Ue=de-F,Ge=1/ae-1/Ae,nt=Ue/Ae;return Ge?(-nt+Math.sqrt(nt*nt-2*Ge*(Ue*Ue/(-2*Ae)-ye+Ae/2+q-ae/2)))/Ge+F:(F+de)/2}function mn(le,C){var z=le.N;if(z)return Kr(z,C);var F=le.site;return F.y===C?F.x:1/0}function jr(le){this.site=le,this.edges=[]}function Nr(le,C){return C.angle-le.angle}function nn(){ea(this),this.x=this.y=this.arc=this.site=this.cy=null}function dn(le){var C=le.P,z=le.N;if(C&&z){var F=C.site,q=le.site,ae=z.site;if(F!==ae){var ue=q.x,de=q.y,ye=F.x-ue,Ae=F.y-de,Ue=ae.x-ue,Ge=2*(ye*(Tt=ae.y-de)-Ae*Ue);if(!(Ge>=-1e-12)){var nt=ye*ye+Ae*Ae,xt=Ue*Ue+Tt*Tt,At=(Tt*nt-Ae*xt)/Ge,wt=(ye*xt-Ue*nt)/Ge,Tt=wt+de,yt=kr.pop()||new nn;yt.arc=le,yt.site=q,yt.x=At+ue,yt.y=Tt+Math.sqrt(At*At+wt*wt),yt.cy=Tt,le.circle=yt;for(var Ft=null,Ot=br._;Ot;)if(yt.y<Ot.y||yt.y===Ot.y&&yt.x<=Ot.x){if(!Ot.L){Ft=Ot.P;break}Ot=Ot.L}else{if(!Ot.R){Ft=Ot;break}Ot=Ot.R}br.insert(Ft,yt),Ft||(Vr=yt)}}}}function wn(le){var C=le.circle;C&&(C.P||(Vr=C.N),br.remove(C),kr.push(C),ea(C),le.circle=null)}function ii(le,C){var z=le.b;if(z)return!0;var F,q,ae=le.a,ue=C[0][0],de=C[1][0],ye=C[0][1],Ae=C[1][1],Ue=le.l,Ge=le.r,nt=Ue.x,xt=Ue.y,At=Ge.x,wt=Ge.y,Tt=(nt+At)/2;if(wt===xt){if(Tt<ue||Tt>=de)return;if(nt>At){if(ae){if(ae.y>=Ae)return}else ae={x:Tt,y:ye};z={x:Tt,y:Ae}}else{if(ae){if(ae.y<ye)return}else ae={x:Tt,y:Ae};z={x:Tt,y:ye}}}else if(q=(xt+wt)/2-(F=(nt-At)/(wt-xt))*Tt,F<-1||F>1)if(nt>At){if(ae){if(ae.y>=Ae)return}else ae={x:(ye-q)/F,y:ye};z={x:(Ae-q)/F,y:Ae}}else{if(ae){if(ae.y<ye)return}else ae={x:(Ae-q)/F,y:Ae};z={x:(ye-q)/F,y:ye}}else if(xt<wt){if(ae){if(ae.x>=de)return}else ae={x:ue,y:F*ue+q};z={x:de,y:F*de+q}}else{if(ae){if(ae.x<ue)return}else ae={x:de,y:F*de+q};z={x:ue,y:F*ue+q}}return le.a=ae,le.b=z,!0}function qn(le,C){this.l=le,this.r=C,this.a=this.b=null}function gn(le,C,z,F){var q=new qn(le,C);return lr.push(q),z&&ui(q,le,C,z),F&&ui(q,C,le,F),_r[le.i].edges.push(new Yi(q,le,C)),_r[C.i].edges.push(new Yi(q,C,le)),q}function ei(le,C,z){var F=new qn(le,null);return F.a=C,F.b=z,lr.push(F),F}function ui(le,C,z,F){le.a||le.b?le.l===z?le.b=F:le.a=F:(le.a=F,le.l=C,le.r=z)}function Yi(le,C,z){var F=le.a,q=le.b;this.edge=le,this.site=C,this.angle=z?Math.atan2(z.y-C.y,z.x-C.x):le.l===C?Math.atan2(q.x-F.x,F.y-q.y):Math.atan2(F.x-q.x,q.y-F.y)}function Ea(){this._=null}function ea(le){le.U=le.C=le.L=le.R=le.P=le.N=null}function ga(le,C){var z=C,F=C.R,q=z.U;q?q.L===z?q.L=F:q.R=F:le._=F,F.U=q,z.U=F,z.R=F.L,z.R&&(z.R.U=z),F.L=z}function ki(le,C){var z=C,F=C.L,q=z.U;q?q.L===z?q.L=F:q.R=F:le._=F,F.U=q,z.U=F,z.L=F.R,z.L&&(z.L.U=z),F.R=z}function Fi(le){for(;le.L;)le=le.L;return le}function oo(le,C){var z,F,q,ae=le.sort(zo).pop();for(lr=[],_r=new Array(le.length),qr=new Ea,br=new Ea;;)if(q=Vr,ae&&(!q||ae.y<q.y||ae.y===q.y&&ae.x<q.x))ae.x===z&&ae.y===F||(_r[ae.i]=new jr(ae),yn(ae),z=ae.x,F=ae.y),ae=le.pop();else{if(!q)break;cn(q.arc)}C&&(function(de){for(var ye,Ae,Ue,Ge,nt,xt=lr,At=(Ae=de[0][0],Ue=de[0][1],Ge=de[1][0],nt=de[1][1],function(Tt){var yt,Ft=Tt.a,Ot=Tt.b,Nt=Ft.x,er=Ft.y,fr=0,Tr=1,wr=Ot.x-Nt,Zr=Ot.y-er;if(yt=Ae-Nt,wr||!(yt>0)){if(yt/=wr,wr<0){if(yt<fr)return;yt<Tr&&(Tr=yt)}else if(wr>0){if(yt>Tr)return;yt>fr&&(fr=yt)}if(yt=Ge-Nt,wr||!(yt<0)){if(yt/=wr,wr<0){if(yt>Tr)return;yt>fr&&(fr=yt)}else if(wr>0){if(yt<fr)return;yt<Tr&&(Tr=yt)}if(yt=Ue-er,Zr||!(yt>0)){if(yt/=Zr,Zr<0){if(yt<fr)return;yt<Tr&&(Tr=yt)}else if(Zr>0){if(yt>Tr)return;yt>fr&&(fr=yt)}if(yt=nt-er,Zr||!(yt<0)){if(yt/=Zr,Zr<0){if(yt>Tr)return;yt>fr&&(fr=yt)}else if(Zr>0){if(yt<fr)return;yt<Tr&&(Tr=yt)}return fr>0&&(Tt.a={x:Nt+fr*wr,y:er+fr*Zr}),Tr<1&&(Tt.b={x:Nt+Tr*wr,y:er+Tr*Zr}),Tt}}}}}),wt=xt.length;wt--;)(!ii(ye=xt[wt],de)||!At(ye)||o(ye.a.x-ye.b.x)<bt&&o(ye.a.y-ye.b.y)<bt)&&(ye.a=ye.b=null,xt.splice(wt,1))}(C),function(de){for(var ye,Ae,Ue,Ge,nt,xt,At,wt,Tt,yt,Ft=de[0][0],Ot=de[1][0],Nt=de[0][1],er=de[1][1],fr=_r,Tr=fr.length;Tr--;)if((nt=fr[Tr])&&nt.prepare())for(wt=(At=nt.edges).length,xt=0;xt<wt;)Ue=(yt=At[xt].end()).x,Ge=yt.y,ye=(Tt=At[++xt%wt].start()).x,Ae=Tt.y,(o(Ue-ye)>bt||o(Ge-Ae)>bt)&&(At.splice(xt,0,new Yi(ei(nt.site,yt,o(Ue-Ft)<bt&&er-Ge>bt?{x:Ft,y:o(ye-Ft)<bt?Ae:er}:o(Ge-er)<bt&&Ot-Ue>bt?{x:o(Ae-er)<bt?ye:Ot,y:er}:o(Ue-Ot)<bt&&Ge-Nt>bt?{x:Ot,y:o(ye-Ot)<bt?Ae:Nt}:o(Ge-Nt)<bt&&Ue-Ft>bt?{x:o(Ae-Nt)<bt?ye:Ft,y:Nt}:null),nt.site,null)),++wt)}(C));var ue={cells:_r,edges:lr};return qr=br=lr=_r=null,ue}function zo(le,C){return C.y-le.y||C.x-le.x}jr.prototype.prepare=function(){for(var le,C=this.edges,z=C.length;z--;)(le=C[z].edge).b&&le.a||C.splice(z,1);return C.sort(Nr),C.length},Yi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ea.prototype={insert:function(le,C){var z,F,q;if(le){if(C.P=le,C.N=le.N,le.N&&(le.N.P=C),le.N=C,le.R){for(le=le.R;le.L;)le=le.L;le.L=C}else le.R=C;z=le}else this._?(le=Fi(this._),C.P=null,C.N=le,le.P=le.L=C,z=le):(C.P=C.N=null,this._=C,z=null);for(C.L=C.R=null,C.U=z,C.C=!0,le=C;z&&z.C;)z===(F=z.U).L?(q=F.R)&&q.C?(z.C=q.C=!1,F.C=!0,le=F):(le===z.R&&(ga(this,z),z=(le=z).U),z.C=!1,F.C=!0,ki(this,F)):(q=F.L)&&q.C?(z.C=q.C=!1,F.C=!0,le=F):(le===z.L&&(ki(this,z),z=(le=z).U),z.C=!1,F.C=!0,ga(this,F)),z=le.U;this._.C=!1},remove:function(le){le.N&&(le.N.P=le.P),le.P&&(le.P.N=le.N),le.N=le.P=null;var C,z,F,q=le.U,ae=le.L,ue=le.R;if(z=ae?ue?Fi(ue):ae:ue,q?q.L===le?q.L=z:q.R=z:this._=z,ae&&ue?(F=z.C,z.C=le.C,z.L=ae,ae.U=z,z!==ue?(q=z.U,z.U=le.U,q.L=le=z.R,z.R=ue,ue.U=z):(z.U=q,q=z,le=z.R)):(F=le.C,le=z),le&&(le.U=q),!F)if(le&&le.C)le.C=!1;else{do{if(le===this._)break;if(le===q.L){if((C=q.R).C&&(C.C=!1,q.C=!0,ga(this,q),C=q.R),C.L&&C.L.C||C.R&&C.R.C){C.R&&C.R.C||(C.L.C=!1,C.C=!0,ki(this,C),C=q.R),C.C=q.C,q.C=C.R.C=!1,ga(this,q),le=this._;break}}else if((C=q.L).C&&(C.C=!1,q.C=!0,ki(this,q),C=q.L),C.L&&C.L.C||C.R&&C.R.C){C.L&&C.L.C||(C.R.C=!1,C.C=!0,ga(this,C),C=q.L),C.C=q.C,q.C=C.L.C=!1,ki(this,q),le=this._;break}C.C=!0,le=q,q=q.U}while(!le.C);le&&(le.C=!1)}}},p.geom.voronoi=function(le){var C=zr,z=sn,F=C,q=z,ae=Ho;if(le)return ue(le);function ue(ye){var Ae=new Array(ye.length),Ue=ae[0][0],Ge=ae[0][1],nt=ae[1][0],xt=ae[1][1];return oo(de(ye),ae).cells.forEach(function(At,wt){var Tt=At.edges,yt=At.site;(Ae[wt]=Tt.length?Tt.map(function(Ft){var Ot=Ft.start();return[Ot.x,Ot.y]}):yt.x>=Ue&&yt.x<=nt&&yt.y>=Ge&&yt.y<=xt?[[Ue,xt],[nt,xt],[nt,Ge],[Ue,Ge]]:[]).point=ye[wt]}),Ae}function de(ye){return ye.map(function(Ae,Ue){return{x:Math.round(F(Ae,Ue)/bt)*bt,y:Math.round(q(Ae,Ue)/bt)*bt,i:Ue}})}return ue.links=function(ye){return oo(de(ye)).edges.filter(function(Ae){return Ae.l&&Ae.r}).map(function(Ae){return{source:ye[Ae.l.i],target:ye[Ae.r.i]}})},ue.triangles=function(ye){var Ae=[];return oo(de(ye)).cells.forEach(function(Ue,Ge){for(var nt,xt,At,wt,Tt=Ue.site,yt=Ue.edges.sort(Nr),Ft=-1,Ot=yt.length,Nt=yt[Ot-1].edge,er=Nt.l===Tt?Nt.r:Nt.l;++Ft<Ot;)nt=er,er=(Nt=yt[Ft].edge).l===Tt?Nt.r:Nt.l,Ge<nt.i&&Ge<er.i&&((xt=Tt).x-(wt=er).x)*((At=nt).y-xt.y)-(xt.x-At.x)*(wt.y-xt.y)<0&&Ae.push([ye[Ge],ye[nt.i],ye[er.i]])}),Ae},ue.x=function(ye){return arguments.length?(F=vr(C=ye),ue):C},ue.y=function(ye){return arguments.length?(q=vr(z=ye),ue):z},ue.clipExtent=function(ye){return arguments.length?(ae=null==ye?Ho:ye,ue):ae===Ho?null:ae},ue.size=function(ye){return arguments.length?ue.clipExtent(ye&&[[0,0],ye]):ae===Ho?null:ae&&ae[1]},ue};var Ho=[[-1e6,-1e6],[1e6,1e6]];function Ua(le){return le.x}function qa(le){return le.y}function Do(le,C,z,F,q,ae){if(!le(C,z,F,q,ae)){var ue=.5*(z+q),de=.5*(F+ae),ye=C.nodes;ye[0]&&Do(le,ye[0],z,F,ue,de),ye[1]&&Do(le,ye[1],ue,F,q,de),ye[2]&&Do(le,ye[2],z,de,ue,ae),ye[3]&&Do(le,ye[3],ue,de,q,ae)}}function ji(le,C,z,F,q,ae,ue){var de,ye=1/0;return function Ae(Ue,Ge,nt,xt,At){if(!(Ge>ae||nt>ue||xt<F||At<q)){if(wt=Ue.point){var wt,Tt=C-Ue.x,yt=z-Ue.y,Ft=Tt*Tt+yt*yt;if(Ft<ye){var Ot=Math.sqrt(ye=Ft);F=C-Ot,q=z-Ot,ae=C+Ot,ue=z+Ot,de=wt}}for(var Nt=Ue.nodes,er=.5*(Ge+xt),fr=.5*(nt+At),Tr=(z>=fr)<<1|C>=er,wr=Tr+4;Tr<wr;++Tr)if(Ue=Nt[3&Tr])switch(3&Tr){case 0:Ae(Ue,Ge,nt,er,fr);break;case 1:Ae(Ue,er,nt,xt,fr);break;case 2:Ae(Ue,Ge,fr,er,At);break;case 3:Ae(Ue,er,fr,xt,At)}}}(le,F,q,ae,ue),de}function _o(le,C){le=p.rgb(le),C=p.rgb(C);var z=le.r,F=le.g,q=le.b,ae=C.r-z,ue=C.g-F,de=C.b-q;return function(ye){return"#"+ir(Math.round(z+ae*ye))+ir(Math.round(F+ue*ye))+ir(Math.round(q+de*ye))}}function so(le,C){var z,F={},q={};for(z in le)z in C?F[z]=Ia(le[z],C[z]):q[z]=le[z];for(z in C)z in le||(q[z]=C[z]);return function(ae){for(z in F)q[z]=F[z](ae);return q}}function ma(le,C){return le=+le,C=+C,function(z){return le*(1-z)+C*z}}function Ga(le,C){var z,F,q,ae=lo.lastIndex=yo.lastIndex=0,ue=-1,de=[],ye=[];for(le+="",C+="";(z=lo.exec(le))&&(F=yo.exec(C));)(q=F.index)>ae&&(q=C.slice(ae,q),de[ue]?de[ue]+=q:de[++ue]=q),(z=z[0])===(F=F[0])?de[ue]?de[ue]+=F:de[++ue]=F:(de[++ue]=null,ye.push({i:ue,x:ma(z,F)})),ae=yo.lastIndex;return ae<C.length&&(q=C.slice(ae),de[ue]?de[ue]+=q:de[++ue]=q),de.length<2?ye[0]?(C=ye[0].x,function(Ae){return C(Ae)+""}):function(){return C}:(C=ye.length,function(Ae){for(var Ue,Ge=0;Ge<C;++Ge)de[(Ue=ye[Ge]).i]=Ue.x(Ae);return de.join("")})}p.geom.delaunay=function(le){return p.geom.voronoi().triangles(le)},p.geom.quadtree=function(le,C,z,F,q){var ae,ue=zr,de=sn;if(ae=arguments.length)return ue=Ua,de=qa,3===ae&&(q=z,F=C,z=C=0),ye(le);function ye(Ae){var Ue,Ge,nt,xt,At,wt,Tt,yt,Ft,Ot=vr(ue),Nt=vr(de);if(null!=C)wt=C,Tt=z,yt=F,Ft=q;else if(yt=Ft=-(wt=Tt=1/0),Ge=[],nt=[],At=Ae.length,ae)for(xt=0;xt<At;++xt)(Ue=Ae[xt]).x<wt&&(wt=Ue.x),Ue.y<Tt&&(Tt=Ue.y),Ue.x>yt&&(yt=Ue.x),Ue.y>Ft&&(Ft=Ue.y),Ge.push(Ue.x),nt.push(Ue.y);else for(xt=0;xt<At;++xt){var er=+Ot(Ue=Ae[xt],xt),fr=+Nt(Ue,xt);er<wt&&(wt=er),fr<Tt&&(Tt=fr),er>yt&&(yt=er),fr>Ft&&(Ft=fr),Ge.push(er),nt.push(fr)}var Tr=yt-wt,wr=Ft-Tt;function Zr(rn,Nn,Gn,oi,Ur,_n,Yn,Vn){if(!isNaN(Gn)&&!isNaN(oi))if(rn.leaf){var Qn=rn.x,li=rn.y;if(null!=Qn)if(o(Qn-Gn)+o(li-oi)<.01)Xr(rn,Nn,Gn,oi,Ur,_n,Yn,Vn);else{var wi=rn.point;rn.x=rn.y=rn.point=null,Xr(rn,wi,Qn,li,Ur,_n,Yn,Vn),Xr(rn,Nn,Gn,oi,Ur,_n,Yn,Vn)}else rn.x=Gn,rn.y=oi,rn.point=Nn}else Xr(rn,Nn,Gn,oi,Ur,_n,Yn,Vn)}function Xr(rn,Nn,Gn,oi,Ur,_n,Yn,Vn){var Qn=.5*(Ur+Yn),li=.5*(_n+Vn),wi=Gn>=Qn,Xn=oi>=li,mi=Xn<<1|wi;rn.leaf=!1,wi?Ur=Qn:Yn=Qn,Xn?_n=li:Vn=li,Zr(rn=rn.nodes[mi]||(rn.nodes[mi]={leaf:!0,nodes:[],point:null,x:null,y:null}),Nn,Gn,oi,Ur,_n,Yn,Vn)}Tr>wr?Ft=Tt+Tr:yt=wt+wr;var fn={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(rn){Zr(fn,rn,+Ot(rn,++xt),+Nt(rn,xt),wt,Tt,yt,Ft)},visit:function(rn){Do(rn,fn,wt,Tt,yt,Ft)},find:function(rn){return ji(fn,rn[0],rn[1],wt,Tt,yt,Ft)}};if(xt=-1,null==C){for(;++xt<At;)Zr(fn,Ae[xt],Ge[xt],nt[xt],wt,Tt,yt,Ft);--xt}else Ae.forEach(fn.add);return Ge=nt=Ae=Ue=null,fn}return ye.x=function(Ae){return arguments.length?(ue=Ae,ye):ue},ye.y=function(Ae){return arguments.length?(de=Ae,ye):de},ye.extent=function(Ae){return arguments.length?(null==Ae?C=z=F=q=null:(C=+Ae[0][0],z=+Ae[0][1],F=+Ae[1][0],q=+Ae[1][1]),ye):null==C?null:[[C,z],[F,q]]},ye.size=function(Ae){return arguments.length?(null==Ae?C=z=F=q=null:(C=z=0,F=+Ae[0],q=+Ae[1]),ye):null==C?null:[F-C,q-z]},ye},p.interpolateRgb=_o,p.interpolateObject=so,p.interpolateNumber=ma,p.interpolateString=Ga;var lo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yo=new RegExp(lo.source,"g");function Ia(le,C){for(var z,F=p.interpolators.length;--F>=0&&!(z=p.interpolators[F](le,C)););return z}function la(le,C){var z,F=[],q=[],ae=le.length,ue=C.length,de=Math.min(le.length,C.length);for(z=0;z<de;++z)F.push(Ia(le[z],C[z]));for(;z<ae;++z)q[z]=le[z];for(;z<ue;++z)q[z]=C[z];return function(ye){for(z=0;z<de;++z)q[z]=F[z](ye);return q}}p.interpolate=Ia,p.interpolators=[function(le,C){var z=typeof C;return("string"===z?Ir.has(C.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(C)?_o:Ga:C instanceof pt?_o:Array.isArray(C)?la:"object"===z&&isNaN(C)?so:ma)(le,C)}],p.interpolateArray=la;var Va=function(){return E},ps=p.map({linear:Va,poly:function(le){return function(C){return Math.pow(C,le)}},quad:function(){return ys},cubic:function(){return xs},sin:function(){return bs},exp:function(){return wo},circle:function(){return To},elastic:function(le,C){var z;return arguments.length<2&&(C=.45),arguments.length?z=C/Yt*Math.asin(1/le):(le=1,z=C/4),function(F){return 1+le*Math.pow(2,-10*F)*Math.sin((F-z)*Yt/C)}},back:function(le){return le||(le=1.70158),function(C){return C*C*((le+1)*C-le)}},bounce:function(){return Ro}}),vs=p.map({in:E,out:ss,"in-out":Xo,"out-in":function(le){return Xo(ss(le))}});function Ui(le){return function(C){return C<=0?0:C>=1?1:le(C)}}function ss(le){return function(C){return 1-le(1-C)}}function Xo(le){return function(C){return.5*(C<.5?le(2*C):2-le(2-2*C))}}function ys(le){return le*le}function xs(le){return le*le*le}function ds(le){if(le<=0)return 0;if(le>=1)return 1;var C=le*le,z=C*le;return 4*(le<.5?z:3*(le-C)+z-.75)}function bs(le){return 1-Math.cos(le*He)}function wo(le){return Math.pow(2,10*(le-1))}function To(le){return 1-Math.sqrt(1-le*le)}function Ro(le){return le<1/2.75?7.5625*le*le:le<2/2.75?7.5625*(le-=1.5/2.75)*le+.75:le<2.5/2.75?7.5625*(le-=2.25/2.75)*le+.9375:7.5625*(le-=2.625/2.75)*le+.984375}function Fo(le,C){return C-=le,function(z){return Math.round(le+C*z)}}function Bo(le){var C,z,F,q=[le.a,le.b],ae=[le.c,le.d],ue=co(q),de=Zo(q,ae),ye=co(((C=ae)[0]+=(F=-de)*(z=q)[0],C[1]+=F*z[1],C))||0;q[0]*ae[1]<ae[0]*q[1]&&(q[0]*=-1,q[1]*=-1,ue*=-1,de*=-1),this.rotate=(ue?Math.atan2(q[1],q[0]):Math.atan2(-ae[0],ae[1]))*$e,this.translate=[le.e,le.f],this.scale=[ue,ye],this.skew=ye?Math.atan2(de,ye)*$e:0}function Zo(le,C){return le[0]*C[0]+le[1]*C[1]}function co(le){var C=Math.sqrt(Zo(le,le));return C&&(le[0]/=C,le[1]/=C),C}p.ease=function(le){var C=le.indexOf("-"),z=C>=0?le.slice(0,C):le,F=C>=0?le.slice(C+1):"in";return z=ps.get(z)||Va,Ui((F=vs.get(F)||E)(z.apply(null,m.call(arguments,1))))},p.interpolateHcl=function(le,C){le=p.hcl(le),C=p.hcl(C);var z=le.h,F=le.c,q=le.l,ae=C.h-z,ue=C.c-F,de=C.l-q;return isNaN(ue)&&(ue=0,F=isNaN(F)?C.c:F),isNaN(ae)?(ae=0,z=isNaN(z)?C.h:z):ae>180?ae-=360:ae<-180&&(ae+=360),function(ye){return Qe(z+ae*ye,F+ue*ye,q+de*ye)+""}},p.interpolateHsl=function(le,C){le=p.hsl(le),C=p.hsl(C);var z=le.h,F=le.s,q=le.l,ae=C.h-z,ue=C.s-F,de=C.l-q;return isNaN(ue)&&(ue=0,F=isNaN(F)?C.s:F),isNaN(ae)?(ae=0,z=isNaN(z)?C.h:z):ae>180?ae-=360:ae<-180&&(ae+=360),function(ye){return ot(z+ae*ye,F+ue*ye,q+de*ye)+""}},p.interpolateLab=function(le,C){le=p.lab(le),C=p.lab(C);var z=le.l,F=le.a,q=le.b,ae=C.l-z,ue=C.a-F,de=C.b-q;return function(ye){return Zt(z+ae*ye,F+ue*ye,q+de*ye)+""}},p.interpolateRound=Fo,p.transform=function(le){var C=v.createElementNS(p.ns.prefix.svg,"g");return(p.transform=function(z){if(null!=z){C.setAttribute("transform",z);var F=C.transform.baseVal.consolidate()}return new Bo(F?F.matrix:ls)})(le)},Bo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ls={a:1,b:0,c:0,d:1,e:0,f:0};function no(le){return le.length?le.pop()+",":""}function No(le,C){var q,ae,ue,z=[],F=[];return le=p.transform(le),C=p.transform(C),function(q,ae,ue,de){if(q[0]!==ae[0]||q[1]!==ae[1]){var ye=ue.push("translate(",null,",",null,")");de.push({i:ye-4,x:ma(q[0],ae[0])},{i:ye-2,x:ma(q[1],ae[1])})}else(ae[0]||ae[1])&&ue.push("translate("+ae+")")}(le.translate,C.translate,z,F),ue=z,(q=le.rotate)!==(ae=C.rotate)?(q-ae>180?ae+=360:ae-q>180&&(q+=360),F.push({i:ue.push(no(ue)+"rotate(",null,")")-2,x:ma(q,ae)})):ae&&ue.push(no(ue)+"rotate("+ae+")"),function(q,ae,ue,de){q!==ae?de.push({i:ue.push(no(ue)+"skewX(",null,")")-2,x:ma(q,ae)}):ae&&ue.push(no(ue)+"skewX("+ae+")")}(le.skew,C.skew,z,F),function(q,ae,ue,de){if(q[0]!==ae[0]||q[1]!==ae[1]){var ye=ue.push(no(ue)+"scale(",null,",",null,")");de.push({i:ye-4,x:ma(q[0],ae[0])},{i:ye-2,x:ma(q[1],ae[1])})}else 1===ae[0]&&1===ae[1]||ue.push(no(ue)+"scale("+ae+")")}(le.scale,C.scale,z,F),le=C=null,function(q){for(var ae,ue=-1,de=F.length;++ue<de;)z[(ae=F[ue]).i]=ae.x(q);return z.join("")}}function cs(le,C){return C=(C-=le=+le)||1/C,function(z){return(z-le)/C}}function ko(le,C){return C=(C-=le=+le)||1/C,function(z){return Math.max(0,Math.min(1,(z-le)/C))}}function Bi(le){for(var C=le.source,z=le.target,F=function(ue,de){if(ue===de)return ue;for(var ye=je(ue),Ae=je(de),Ue=ye.pop(),Ge=Ae.pop(),nt=null;Ue===Ge;)nt=Ue,Ue=ye.pop(),Ge=Ae.pop();return nt}(C,z),q=[C];C!==F;)q.push(C=C.parent);for(var ae=q.length;z!==F;)q.splice(ae,0,z),z=z.parent;return q}function je(le){for(var C=[],z=le.parent;null!=z;)C.push(le),le=z,z=z.parent;return C.push(le),C}function qe(le){le.fixed|=2}function Ke(le){le.fixed&=-7}function it(le){le.fixed|=4,le.px=le.x,le.py=le.y}function gt(le){le.fixed&=-5}p.interpolateTransform=No,p.layout={},p.layout.bundle=function(){return function(le){for(var C=[],z=-1,F=le.length;++z<F;)C.push(Bi(le[z]));return C}},p.layout.chord=function(){var le,C,z,F,q,ae,ue,de={},ye=0;function Ae(){var Ge,nt,xt,At,wt,Tt={},yt=[],Ft=p.range(F),Ot=[];for(le=[],C=[],Ge=0,At=-1;++At<F;){for(nt=0,wt=-1;++wt<F;)nt+=z[At][wt];yt.push(nt),Ot.push(p.range(F)),Ge+=nt}for(q&&Ft.sort(function(fn,rn){return q(yt[fn],yt[rn])}),ae&&Ot.forEach(function(fn,rn){fn.sort(function(Nn,Gn){return ae(z[rn][Nn],z[rn][Gn])})}),Ge=(Yt-ye*F)/Ge,nt=0,At=-1;++At<F;){for(xt=nt,wt=-1;++wt<F;){var Nt=Ft[At],er=Ot[Nt][wt],fr=z[Nt][er],Tr=nt,wr=nt+=fr*Ge;Tt[Nt+"-"+er]={index:Nt,subindex:er,startAngle:Tr,endAngle:wr,value:fr}}C[Nt]={index:Nt,startAngle:xt,endAngle:nt,value:yt[Nt]},nt+=ye}for(At=-1;++At<F;)for(wt=At-1;++wt<F;){var Zr=Tt[At+"-"+wt],Xr=Tt[wt+"-"+At];(Zr.value||Xr.value)&&le.push(Zr.value<Xr.value?{source:Xr,target:Zr}:{source:Zr,target:Xr})}ue&&Ue()}function Ue(){le.sort(function(Ge,nt){return ue((Ge.source.value+Ge.target.value)/2,(nt.source.value+nt.target.value)/2)})}return de.matrix=function(Ge){return arguments.length?(F=(z=Ge)&&z.length,le=C=null,de):z},de.padding=function(Ge){return arguments.length?(ye=Ge,le=C=null,de):ye},de.sortGroups=function(Ge){return arguments.length?(q=Ge,le=C=null,de):q},de.sortSubgroups=function(Ge){return arguments.length?(ae=Ge,le=null,de):ae},de.sortChords=function(Ge){return arguments.length?(ue=Ge,le&&Ue(),de):ue},de.chords=function(){return le||Ae(),le},de.groups=function(){return C||Ae(),C},de},p.layout.force=function(){var le,C,z,F,q,ae,ue={},de=p.dispatch("start","tick","end"),ye=[1,1],Ae=.9,Ue=ht,Ge=kt,nt=-30,xt=Jt,At=.1,wt=.64,Tt=[],yt=[];function Ft(Nt){return function(er,fr,Tr,wr){if(er.point!==Nt){var Zr=er.cx-Nt.x,Xr=er.cy-Nt.y,fn=wr-fr,rn=Zr*Zr+Xr*Xr;if(fn*fn/wt<rn){if(rn<xt){var Nn=er.charge/rn;Nt.px-=Zr*Nn,Nt.py-=Xr*Nn}return!0}er.point&&rn&&rn<xt&&(Nt.px-=Zr*(Nn=er.pointCharge/rn),Nt.py-=Xr*Nn)}return!er.charge}}function Ot(Nt){Nt.px=p.event.x,Nt.py=p.event.y,ue.resume()}return ue.tick=function(){if((z*=.99)<.005)return le=null,de.end({type:"end",alpha:z=0}),!0;var Nt,er,fr,Tr,wr,Zr,Xr,fn,rn,Nn=Tt.length,Gn=yt.length;for(er=0;er<Gn;++er)Tr=(fr=yt[er]).source,(Zr=(fn=(wr=fr.target).x-Tr.x)*fn+(rn=wr.y-Tr.y)*rn)&&(fn*=Zr=z*q[er]*((Zr=Math.sqrt(Zr))-F[er])/Zr,rn*=Zr,wr.x-=fn*(Xr=Tr.weight+wr.weight?Tr.weight/(Tr.weight+wr.weight):.5),wr.y-=rn*Xr,Tr.x+=fn*(Xr=1-Xr),Tr.y+=rn*Xr);if((Xr=z*At)&&(fn=ye[0]/2,rn=ye[1]/2,er=-1,Xr))for(;++er<Nn;)(fr=Tt[er]).x+=(fn-fr.x)*Xr,fr.y+=(rn-fr.y)*Xr;if(nt)for(function oi(Ur,_n,Yn){var Vn=0,Qn=0;if(Ur.charge=0,!Ur.leaf)for(var li,wi=Ur.nodes,Xn=wi.length,mi=-1;++mi<Xn;)null!=(li=wi[mi])&&(oi(li,_n,Yn),Ur.charge+=li.charge,Vn+=li.charge*li.cx,Qn+=li.charge*li.cy);if(Ur.point){Ur.leaf||(Ur.point.x+=Math.random()-.5,Ur.point.y+=Math.random()-.5);var pi=_n*Yn[Ur.point.index];Ur.charge+=Ur.pointCharge=pi,Vn+=pi*Ur.point.x,Qn+=pi*Ur.point.y}Ur.cx=Vn/Ur.charge,Ur.cy=Qn/Ur.charge}(Nt=p.geom.quadtree(Tt),z,ae),er=-1;++er<Nn;)(fr=Tt[er]).fixed||Nt.visit(Ft(fr));for(er=-1;++er<Nn;)(fr=Tt[er]).fixed?(fr.x=fr.px,fr.y=fr.py):(fr.x-=(fr.px-(fr.px=fr.x))*Ae,fr.y-=(fr.py-(fr.py=fr.y))*Ae);de.tick({type:"tick",alpha:z})},ue.nodes=function(Nt){return arguments.length?(Tt=Nt,ue):Tt},ue.links=function(Nt){return arguments.length?(yt=Nt,ue):yt},ue.size=function(Nt){return arguments.length?(ye=Nt,ue):ye},ue.linkDistance=function(Nt){return arguments.length?(Ue="function"==typeof Nt?Nt:+Nt,ue):Ue},ue.distance=ue.linkDistance,ue.linkStrength=function(Nt){return arguments.length?(Ge="function"==typeof Nt?Nt:+Nt,ue):Ge},ue.friction=function(Nt){return arguments.length?(Ae=+Nt,ue):Ae},ue.charge=function(Nt){return arguments.length?(nt="function"==typeof Nt?Nt:+Nt,ue):nt},ue.chargeDistance=function(Nt){return arguments.length?(xt=Nt*Nt,ue):Math.sqrt(xt)},ue.gravity=function(Nt){return arguments.length?(At=+Nt,ue):At},ue.theta=function(Nt){return arguments.length?(wt=Nt*Nt,ue):Math.sqrt(wt)},ue.alpha=function(Nt){return arguments.length?(Nt=+Nt,z?Nt>0?z=Nt:(le.c=null,le.t=NaN,le=null,de.end({type:"end",alpha:z=0})):Nt>0&&(de.start({type:"start",alpha:z=Nt}),le=Rr(ue.tick)),ue):z},ue.start=function(){var Nt,er,fr,Tr=Tt.length,wr=yt.length,Zr=ye[0],Xr=ye[1];for(Nt=0;Nt<Tr;++Nt)(fr=Tt[Nt]).index=Nt,fr.weight=0;for(Nt=0;Nt<wr;++Nt)"number"==typeof(fr=yt[Nt]).source&&(fr.source=Tt[fr.source]),"number"==typeof fr.target&&(fr.target=Tt[fr.target]),++fr.source.weight,++fr.target.weight;for(Nt=0;Nt<Tr;++Nt)fr=Tt[Nt],isNaN(fr.x)&&(fr.x=fn("x",Zr)),isNaN(fr.y)&&(fr.y=fn("y",Xr)),isNaN(fr.px)&&(fr.px=fr.x),isNaN(fr.py)&&(fr.py=fr.y);if(F=[],"function"==typeof Ue)for(Nt=0;Nt<wr;++Nt)F[Nt]=+Ue.call(this,yt[Nt],Nt);else for(Nt=0;Nt<wr;++Nt)F[Nt]=Ue;if(q=[],"function"==typeof Ge)for(Nt=0;Nt<wr;++Nt)q[Nt]=+Ge.call(this,yt[Nt],Nt);else for(Nt=0;Nt<wr;++Nt)q[Nt]=Ge;if(ae=[],"function"==typeof nt)for(Nt=0;Nt<Tr;++Nt)ae[Nt]=+nt.call(this,Tt[Nt],Nt);else for(Nt=0;Nt<Tr;++Nt)ae[Nt]=nt;function fn(rn,Nn){if(!er){for(er=new Array(Tr),_n=0;_n<Tr;++_n)er[_n]=[];for(_n=0;_n<wr;++_n){var Gn=yt[_n];er[Gn.source.index].push(Gn.target),er[Gn.target.index].push(Gn.source)}}for(var oi,Ur=er[Nt],_n=-1,Yn=Ur.length;++_n<Yn;)if(!isNaN(oi=Ur[_n][rn]))return oi;return Math.random()*Nn}return ue.resume()},ue.resume=function(){return ue.alpha(.1)},ue.stop=function(){return ue.alpha(0)},ue.drag=function(){if(C||(C=p.behavior.drag().origin(E).on("dragstart.force",qe).on("drag.force",Ot).on("dragend.force",Ke)),!arguments.length)return C;this.on("mouseover.force",it).on("mouseout.force",gt).call(C)},p.rebind(ue,de,"on")};var ht=20,kt=1,Jt=1/0;function Qt(le,C){return p.rebind(le,C,"sort","children","value"),le.nodes=le,le.links=Pr,le}function Wt(le,C){for(var z=[le];null!=(le=z.pop());)if(C(le),(q=le.children)&&(F=q.length))for(var F,q;--F>=0;)z.push(q[F])}function tr(le,C){for(var z=[le],F=[];null!=(le=z.pop());)if(F.push(le),(ae=le.children)&&(q=ae.length))for(var q,ae,ue=-1;++ue<q;)z.push(ae[ue]);for(;null!=(le=F.pop());)C(le)}function ur(le){return le.children}function gr(le){return le.value}function xr(le,C){return C.value-le.value}function Pr(le){return p.merge(le.map(function(C){return(C.children||[]).map(function(z){return{source:C,target:z}})}))}p.layout.hierarchy=function(){var le=xr,C=ur,z=gr;function F(q){var ae,ue=[q],de=[];for(q.depth=0;null!=(ae=ue.pop());)if(de.push(ae),(Ae=C.call(F,ae,ae.depth))&&(ye=Ae.length)){for(var ye,Ae,Ue;--ye>=0;)ue.push(Ue=Ae[ye]),Ue.parent=ae,Ue.depth=ae.depth+1;z&&(ae.value=0),ae.children=Ae}else z&&(ae.value=+z.call(F,ae,ae.depth)||0),delete ae.children;return tr(q,function(Ge){var nt,xt;le&&(nt=Ge.children)&&nt.sort(le),z&&(xt=Ge.parent)&&(xt.value+=Ge.value)}),de}return F.sort=function(q){return arguments.length?(le=q,F):le},F.children=function(q){return arguments.length?(C=q,F):C},F.value=function(q){return arguments.length?(z=q,F):z},F.revalue=function(q){return z&&(Wt(q,function(ae){ae.children&&(ae.value=0)}),tr(q,function(ae){var ue;ae.children||(ae.value=+z.call(F,ae,ae.depth)||0),(ue=ae.parent)&&(ue.value+=ae.value)})),q},F},p.layout.partition=function(){var le=p.layout.hierarchy(),C=[1,1];function z(F,q){var ae=le.call(this,F,q);return function ue(de,ye,Ae,Ue){var Ge=de.children;if(de.x=ye,de.y=de.depth*Ue,de.dx=Ae,de.dy=Ue,Ge&&(nt=Ge.length)){var nt,xt,At,wt=-1;for(Ae=de.value?Ae/de.value:0;++wt<nt;)ue(xt=Ge[wt],ye,At=xt.value*Ae,Ue),ye+=At}}(ae[0],0,C[0],C[1]/function ue(de){var ye=de.children,Ae=0;if(ye&&(Ue=ye.length))for(var Ue,Ge=-1;++Ge<Ue;)Ae=Math.max(Ae,ue(ye[Ge]));return 1+Ae}(ae[0])),ae}return z.size=function(F){return arguments.length?(C=F,z):C},Qt(z,le)},p.layout.pie=function(){var le=Number,C=en,z=0,F=Yt,q=0;function ae(ue){var de,ye=ue.length,Ae=ue.map(function(Ft,Ot){return+le.call(ae,Ft,Ot)}),Ue=+("function"==typeof z?z.apply(this,arguments):z),Ge=("function"==typeof F?F.apply(this,arguments):F)-Ue,nt=Math.min(Math.abs(Ge)/ye,+("function"==typeof q?q.apply(this,arguments):q)),xt=nt*(Ge<0?-1:1),At=p.sum(Ae),wt=At?(Ge-ye*xt)/At:0,Tt=p.range(ye),yt=[];return null!=C&&Tt.sort(C===en?function(Ft,Ot){return Ae[Ot]-Ae[Ft]}:function(Ft,Ot){return C(ue[Ft],ue[Ot])}),Tt.forEach(function(Ft){yt[Ft]={data:ue[Ft],value:de=Ae[Ft],startAngle:Ue,endAngle:Ue+=de*wt+xt,padAngle:nt}}),yt}return ae.value=function(ue){return arguments.length?(le=ue,ae):le},ae.sort=function(ue){return arguments.length?(C=ue,ae):C},ae.startAngle=function(ue){return arguments.length?(z=ue,ae):z},ae.endAngle=function(ue){return arguments.length?(F=ue,ae):F},ae.padAngle=function(ue){return arguments.length?(q=ue,ae):q},ae};var en={};function hn(le){return le.x}function Sn(le){return le.y}function Pn(le,C,z){le.y0=C,le.y=z}p.layout.stack=function(){var le=E,C=hi,z=bi,F=Pn,q=hn,ae=Sn;function ue(de,ye){if(!(nt=de.length))return de;var Ae=de.map(function(Ft,Ot){return le.call(ue,Ft,Ot)}),Ue=Ae.map(function(Ft){return Ft.map(function(Ot,Nt){return[q.call(ue,Ot,Nt),ae.call(ue,Ot,Nt)]})}),Ge=C.call(ue,Ue,ye);Ae=p.permute(Ae,Ge),Ue=p.permute(Ue,Ge);var nt,xt,At,wt,Tt=z.call(ue,Ue,ye),yt=Ae[0].length;for(At=0;At<yt;++At)for(F.call(ue,Ae[0][At],wt=Tt[At],Ue[0][At][1]),xt=1;xt<nt;++xt)F.call(ue,Ae[xt][At],wt+=Ue[xt-1][At][1],Ue[xt][At][1]);return de}return ue.values=function(de){return arguments.length?(le=de,ue):le},ue.order=function(de){return arguments.length?(C="function"==typeof de?de:Un.get(de)||hi,ue):C},ue.offset=function(de){return arguments.length?(z="function"==typeof de?de:In.get(de)||bi,ue):z},ue.x=function(de){return arguments.length?(q=de,ue):q},ue.y=function(de){return arguments.length?(ae=de,ue):ae},ue.out=function(de){return arguments.length?(F=de,ue):F},ue};var Un=p.map({"inside-out":function(le){var C,z,F=le.length,q=le.map(Oi),ae=le.map(Ii),ue=p.range(F).sort(function(Ge,nt){return q[Ge]-q[nt]}),de=0,ye=0,Ae=[],Ue=[];for(C=0;C<F;++C)z=ue[C],de<ye?(de+=ae[z],Ae.push(z)):(ye+=ae[z],Ue.push(z));return Ue.reverse().concat(Ae)},reverse:function(le){return p.range(le.length).reverse()},default:hi}),In=p.map({silhouette:function(le){var C,z,F,q=le.length,ae=le[0].length,ue=[],de=0,ye=[];for(z=0;z<ae;++z){for(C=0,F=0;C<q;C++)F+=le[C][z][1];F>de&&(de=F),ue.push(F)}for(z=0;z<ae;++z)ye[z]=(de-ue[z])/2;return ye},wiggle:function(le){var C,z,F,q,ae,ue,de,ye,Ae,Ue=le.length,Ge=le[0],nt=Ge.length,xt=[];for(xt[0]=ye=Ae=0,z=1;z<nt;++z){for(C=0,q=0;C<Ue;++C)q+=le[C][z][1];for(C=0,ae=0,de=Ge[z][0]-Ge[z-1][0];C<Ue;++C){for(F=0,ue=(le[C][z][1]-le[C][z-1][1])/(2*de);F<C;++F)ue+=(le[F][z][1]-le[F][z-1][1])/de;ae+=ue*le[C][z][1]}xt[z]=ye-=q?ae/q*de:0,ye<Ae&&(Ae=ye)}for(z=0;z<nt;++z)xt[z]-=Ae;return xt},expand:function(le){var C,z,F,q=le.length,ae=le[0].length,ue=1/q,de=[];for(z=0;z<ae;++z){for(C=0,F=0;C<q;C++)F+=le[C][z][1];if(F)for(C=0;C<q;C++)le[C][z][1]/=F;else for(C=0;C<q;C++)le[C][z][1]=ue}for(z=0;z<ae;++z)de[z]=0;return de},zero:bi});function hi(le){return p.range(le.length)}function bi(le){for(var C=-1,z=le[0].length,F=[];++C<z;)F[C]=0;return F}function Oi(le){for(var C,z=1,F=0,q=le[0][1],ae=le.length;z<ae;++z)(C=le[z][1])>q&&(F=z,q=C);return F}function Ii(le){return le.reduce(zi,0)}function zi(le,C){return le+C[1]}function va(le,C){return pa(le,Math.ceil(Math.log(C.length)/Math.LN2+1))}function pa(le,C){for(var z=-1,F=+le[0],q=(le[1]-F)/C,ae=[];++z<=C;)ae[z]=q*z+F;return ae}function ta(le){return[p.min(le),p.max(le)]}function ra(le,C){return le.value-C.value}function da(le,C){var z=le._pack_next;le._pack_next=C,C._pack_prev=le,C._pack_next=z,z._pack_prev=C}function Oa(le,C){le._pack_next=C,C._pack_prev=le}function Ya(le,C){var z=C.x-le.x,F=C.y-le.y,q=le.r+C.r;return.999*q*q>z*z+F*F}function Wa(le){if((C=le.children)&&(ye=C.length)){var C,z,F,q,ae,ue,de,ye,Ae=1/0,Ue=-1/0,Ge=1/0,nt=-1/0;if(C.forEach(Xa),(z=C[0]).x=-z.r,z.y=0,Ot(z),ye>1&&((F=C[1]).x=F.r,F.y=0,Ot(F),ye>2))for(Ei(z,F,q=C[2]),Ot(q),da(z,q),z._pack_prev=q,da(q,F),F=z._pack_next,ae=3;ae<ye;ae++){Ei(z,F,q=C[ae]);var xt=0,At=1,wt=1;for(ue=F._pack_next;ue!==F;ue=ue._pack_next,At++)if(Ya(ue,q)){xt=1;break}if(1==xt)for(de=z._pack_prev;de!==ue._pack_prev&&!Ya(de,q);de=de._pack_prev,wt++);xt?(At<wt||At==wt&&F.r<z.r?Oa(z,F=ue):Oa(z=de,F),ae--):(da(z,q),F=q,Ot(q))}var Tt=(Ae+Ue)/2,yt=(Ge+nt)/2,Ft=0;for(ae=0;ae<ye;ae++)(q=C[ae]).x-=Tt,q.y-=yt,Ft=Math.max(Ft,q.r+Math.sqrt(q.x*q.x+q.y*q.y));le.r=Ft,C.forEach(Za)}function Ot(Nt){Ae=Math.min(Nt.x-Nt.r,Ae),Ue=Math.max(Nt.x+Nt.r,Ue),Ge=Math.min(Nt.y-Nt.r,Ge),nt=Math.max(Nt.y+Nt.r,nt)}}function Xa(le){le._pack_next=le._pack_prev=le}function Za(le){delete le._pack_next,delete le._pack_prev}function Ei(le,C,z){var F=le.r+z.r,q=C.x-le.x,ae=C.y-le.y;if(F&&(q||ae)){var ue=C.r+z.r,de=q*q+ae*ae,ye=.5+((F*=F)-(ue*=ue))/(2*de),Ae=Math.sqrt(Math.max(0,2*ue*(F+de)-(F-=de)*F-ue*ue))/(2*de);z.x=le.x+ye*q+Ae*ae,z.y=le.y+ye*ae-Ae*q}else z.x=le.x+F,z.y=le.y}function ft(le,C){return le.parent==C.parent?1:2}function zt(le){var C=le.children;return C.length?C[0]:le.t}function ar(le){var C,z=le.children;return(C=z.length)?z[C-1]:le.t}function Ht(le,C,z){var F=z/(C.i-le.i);C.c-=F,C.s+=z,le.c+=F,C.z+=z,C.m+=z}function or(le,C,z){return le.a.parent===C.parent?le.a:z}function Er(le){return{x:le.x,y:le.y,dx:le.dx,dy:le.dy}}function Or(le,C){var z=le.x+C[3],F=le.y+C[0],q=le.dx-C[1]-C[3],ae=le.dy-C[0]-C[2];return q<0&&(z+=q/2,q=0),ae<0&&(F+=ae/2,ae=0),{x:z,y:F,dx:q,dy:ae}}function Gr(le){var C=le[0],z=le[le.length-1];return C<z?[C,z]:[z,C]}function an(le){return le.rangeExtent?le.rangeExtent():Gr(le.range())}function tn(le,C,z,F){var q=z(le[0],le[1]),ae=F(C[0],C[1]);return function(ue){return ae(q(ue))}}function pn(le,C){var z,F=0,q=le.length-1,ae=le[F],ue=le[q];return ue<ae&&(z=F,F=q,q=z,z=ae,ae=ue,ue=z),le[F]=C.floor(ae),le[q]=C.ceil(ue),le}function xn(le){return le?{floor:function(C){return Math.floor(C/le)*le},ceil:function(C){return Math.ceil(C/le)*le}}:on}p.layout.histogram=function(){var le=!0,C=Number,z=ta,F=va;function q(ae,ue){for(var de,ye,Ae=[],Ue=ae.map(C,this),Ge=z.call(this,Ue,ue),nt=F.call(this,Ge,Ue,ue),xt=(ue=-1,Ue.length),At=nt.length-1,wt=le?1:1/xt;++ue<At;)(de=Ae[ue]=[]).dx=nt[ue+1]-(de.x=nt[ue]),de.y=0;if(At>0)for(ue=-1;++ue<xt;)(ye=Ue[ue])>=Ge[0]&&ye<=Ge[1]&&((de=Ae[p.bisect(nt,ye,1,At)-1]).y+=wt,de.push(ae[ue]));return Ae}return q.value=function(ae){return arguments.length?(C=ae,q):C},q.range=function(ae){return arguments.length?(z=vr(ae),q):z},q.bins=function(ae){return arguments.length?(F="number"==typeof ae?function(ue){return pa(ue,ae)}:vr(ae),q):F},q.frequency=function(ae){return arguments.length?(le=!!ae,q):le},q},p.layout.pack=function(){var le,C=p.layout.hierarchy().sort(ra),z=0,F=[1,1];function q(ae,ue){var de=C.call(this,ae,ue),ye=de[0],Ae=F[0],Ue=F[1],Ge=null==le?Math.sqrt:"function"==typeof le?le:function(){return le};if(ye.x=ye.y=0,tr(ye,function(xt){xt.r=+Ge(xt.value)}),tr(ye,Wa),z){var nt=z*(le?1:Math.max(2*ye.r/Ae,2*ye.r/Ue))/2;tr(ye,function(xt){xt.r+=nt}),tr(ye,Wa),tr(ye,function(xt){xt.r-=nt})}return function xt(At,wt,Tt,yt){var Ft=At.children;if(At.x=wt+=yt*At.x,At.y=Tt+=yt*At.y,At.r*=yt,Ft)for(var Ot=-1,Nt=Ft.length;++Ot<Nt;)xt(Ft[Ot],wt,Tt,yt)}(ye,Ae/2,Ue/2,le?1:1/Math.max(2*ye.r/Ae,2*ye.r/Ue)),de}return q.size=function(ae){return arguments.length?(F=ae,q):F},q.radius=function(ae){return arguments.length?(le=null==ae||"function"==typeof ae?ae:+ae,q):le},q.padding=function(ae){return arguments.length?(z=+ae,q):z},Qt(q,C)},p.layout.tree=function(){var le=p.layout.hierarchy().sort(null).value(null),C=ft,z=[1,1],F=null;function q(ye,Ae){var Ue=le.call(this,ye,Ae),Ge=Ue[0],nt=function(Ot){for(var Nt,er={A:null,children:[Ot]},fr=[er];null!=(Nt=fr.pop());)for(var Tr,wr=Nt.children,Zr=0,Xr=wr.length;Zr<Xr;++Zr)fr.push((wr[Zr]=Tr={_:wr[Zr],parent:Nt,children:(Tr=wr[Zr].children)&&Tr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Zr}).a=Tr);return er.children[0]}(Ge);if(tr(nt,ae),nt.parent.m=-nt.z,Wt(nt,ue),F)Wt(Ge,de);else{var xt=Ge,At=Ge,wt=Ge;Wt(Ge,function(Ot){Ot.x<xt.x&&(xt=Ot),Ot.x>At.x&&(At=Ot),Ot.depth>wt.depth&&(wt=Ot)});var Tt=C(xt,At)/2-xt.x,yt=z[0]/(At.x+C(At,xt)/2+Tt),Ft=z[1]/(wt.depth||1);Wt(Ge,function(Ot){Ot.x=(Ot.x+Tt)*yt,Ot.y=Ot.depth*Ft})}return Ue}function ae(ye){var Ae=ye.children,Ue=ye.parent.children,Ge=ye.i?Ue[ye.i-1]:null;if(Ae.length){!function(xt){for(var At,wt=0,Tt=0,yt=xt.children,Ft=yt.length;--Ft>=0;)(At=yt[Ft]).z+=wt,At.m+=wt,wt+=At.s+(Tt+=At.c)}(ye);var nt=(Ae[0].z+Ae[Ae.length-1].z)/2;Ge?(ye.z=Ge.z+C(ye._,Ge._),ye.m=ye.z-nt):ye.z=nt}else Ge&&(ye.z=Ge.z+C(ye._,Ge._));ye.parent.A=function(xt,At,wt){if(At){for(var Tt,yt=xt,Ft=xt,Ot=At,Nt=yt.parent.children[0],er=yt.m,fr=Ft.m,Tr=Ot.m,wr=Nt.m;Ot=ar(Ot),yt=zt(yt),Ot&&yt;)Nt=zt(Nt),(Ft=ar(Ft)).a=xt,(Tt=Ot.z+Tr-yt.z-er+C(Ot._,yt._))>0&&(Ht(or(Ot,xt,wt),xt,Tt),er+=Tt,fr+=Tt),Tr+=Ot.m,er+=yt.m,wr+=Nt.m,fr+=Ft.m;Ot&&!ar(Ft)&&(Ft.t=Ot,Ft.m+=Tr-fr),yt&&!zt(Nt)&&(Nt.t=yt,Nt.m+=er-wr,wt=xt)}return wt}(ye,Ge,ye.parent.A||Ue[0])}function ue(ye){ye._.x=ye.z+ye.parent.m,ye.m+=ye.parent.m}function de(ye){ye.x*=z[0],ye.y=ye.depth*z[1]}return q.separation=function(ye){return arguments.length?(C=ye,q):C},q.size=function(ye){return arguments.length?(F=null==(z=ye)?de:null,q):F?null:z},q.nodeSize=function(ye){return arguments.length?(F=null==(z=ye)?null:de,q):F?z:null},Qt(q,le)},p.layout.cluster=function(){var le=p.layout.hierarchy().sort(null).value(null),C=ft,z=[1,1],F=!1;function q(ae,ue){var de,ye=le.call(this,ae,ue),Ae=ye[0],Ue=0;tr(Ae,function(wt){var yt,Tt=wt.children;Tt&&Tt.length?(wt.x=(yt=Tt).reduce(function(Ft,Ot){return Ft+Ot.x},0)/yt.length,wt.y=function(yt){return 1+p.max(yt,function(Ft){return Ft.y})}(Tt)):(wt.x=de?Ue+=C(wt,de):0,wt.y=0,de=wt)});var Ge=function wt(Tt){var yt=Tt.children;return yt&&yt.length?wt(yt[0]):Tt}(Ae),nt=function wt(Tt){var yt,Ft=Tt.children;return Ft&&(yt=Ft.length)?wt(Ft[yt-1]):Tt}(Ae),xt=Ge.x-C(Ge,nt)/2,At=nt.x+C(nt,Ge)/2;return tr(Ae,F?function(wt){wt.x=(wt.x-Ae.x)*z[0],wt.y=(Ae.y-wt.y)*z[1]}:function(wt){wt.x=(wt.x-xt)/(At-xt)*z[0],wt.y=(1-(Ae.y?wt.y/Ae.y:1))*z[1]}),ye}return q.separation=function(ae){return arguments.length?(C=ae,q):C},q.size=function(ae){return arguments.length?(F=null==(z=ae),q):F?null:z},q.nodeSize=function(ae){return arguments.length?(F=null!=(z=ae),q):F?z:null},Qt(q,le)},p.layout.treemap=function(){var le,C=p.layout.hierarchy(),z=Math.round,F=[1,1],q=null,ae=Er,ue=!1,de="squarify",ye=.5*(1+Math.sqrt(5));function Ae(wt,Tt){for(var yt,Ft,Ot=-1,Nt=wt.length;++Ot<Nt;)Ft=(yt=wt[Ot]).value*(Tt<0?0:Tt),yt.area=isNaN(Ft)||Ft<=0?0:Ft}function Ue(wt){var Tt=wt.children;if(Tt&&Tt.length){var yt,Ft,Ot,Nt=ae(wt),er=[],fr=Tt.slice(),Tr=1/0,wr="slice"===de?Nt.dx:"dice"===de?Nt.dy:"slice-dice"===de?1&wt.depth?Nt.dy:Nt.dx:Math.min(Nt.dx,Nt.dy);for(Ae(fr,Nt.dx*Nt.dy/wt.value),er.area=0;(Ot=fr.length)>0;)er.push(yt=fr[Ot-1]),er.area+=yt.area,"squarify"!==de||(Ft=nt(er,wr))<=Tr?(fr.pop(),Tr=Ft):(er.area-=er.pop().area,xt(er,wr,Nt,!1),wr=Math.min(Nt.dx,Nt.dy),er.length=er.area=0,Tr=1/0);er.length&&(xt(er,wr,Nt,!0),er.length=er.area=0),Tt.forEach(Ue)}}function Ge(wt){var Tt=wt.children;if(Tt&&Tt.length){var yt,Ft=ae(wt),Ot=Tt.slice(),Nt=[];for(Ae(Ot,Ft.dx*Ft.dy/wt.value),Nt.area=0;yt=Ot.pop();)Nt.push(yt),Nt.area+=yt.area,null!=yt.z&&(xt(Nt,yt.z?Ft.dx:Ft.dy,Ft,!Ot.length),Nt.length=Nt.area=0);Tt.forEach(Ge)}}function nt(wt,Tt){for(var yt,Ft=wt.area,Ot=0,Nt=1/0,er=-1,fr=wt.length;++er<fr;)(yt=wt[er].area)&&(yt<Nt&&(Nt=yt),yt>Ot&&(Ot=yt));return Tt*=Tt,(Ft*=Ft)?Math.max(Tt*Ot*ye/Ft,Ft/(Tt*Nt*ye)):1/0}function xt(wt,Tt,yt,Ft){var Ot,Nt=-1,er=wt.length,fr=yt.x,Tr=yt.y,wr=Tt?z(wt.area/Tt):0;if(Tt==yt.dx){for((Ft||wr>yt.dy)&&(wr=yt.dy);++Nt<er;)(Ot=wt[Nt]).x=fr,Ot.y=Tr,Ot.dy=wr,fr+=Ot.dx=Math.min(yt.x+yt.dx-fr,wr?z(Ot.area/wr):0);Ot.z=!0,Ot.dx+=yt.x+yt.dx-fr,yt.y+=wr,yt.dy-=wr}else{for((Ft||wr>yt.dx)&&(wr=yt.dx);++Nt<er;)(Ot=wt[Nt]).x=fr,Ot.y=Tr,Ot.dx=wr,Tr+=Ot.dy=Math.min(yt.y+yt.dy-Tr,wr?z(Ot.area/wr):0);Ot.z=!1,Ot.dy+=yt.y+yt.dy-Tr,yt.x+=wr,yt.dx-=wr}}function At(wt){var Tt=le||C(wt),yt=Tt[0];return yt.x=yt.y=0,yt.value?(yt.dx=F[0],yt.dy=F[1]):yt.dx=yt.dy=0,le&&C.revalue(yt),Ae([yt],yt.dx*yt.dy/yt.value),(le?Ge:Ue)(yt),ue&&(le=Tt),Tt}return At.size=function(wt){return arguments.length?(F=wt,At):F},At.padding=function(wt){if(!arguments.length)return q;function Tt(Ot){var Nt=wt.call(At,Ot,Ot.depth);return null==Nt?Er(Ot):Or(Ot,"number"==typeof Nt?[Nt,Nt,Nt,Nt]:Nt)}function yt(Ot){return Or(Ot,wt)}var Ft;return ae=null==(q=wt)?Er:"function"==(Ft=typeof wt)?Tt:("number"===Ft&&(wt=[wt,wt,wt,wt]),yt),At},At.round=function(wt){return arguments.length?(z=wt?Math.round:Number,At):z!=Number},At.sticky=function(wt){return arguments.length?(ue=wt,le=null,At):ue},At.ratio=function(wt){return arguments.length?(ye=wt,At):ye},At.mode=function(wt){return arguments.length?(de=wt+"",At):de},Qt(At,C)},p.random={normal:function(le,C){var z=arguments.length;return z<2&&(C=1),z<1&&(le=0),function(){var F,q,ae;do{ae=(F=2*Math.random()-1)*F+(q=2*Math.random()-1)*q}while(!ae||ae>1);return le+C*F*Math.sqrt(-2*Math.log(ae)/ae)}},logNormal:function(){var le=p.random.normal.apply(p,arguments);return function(){return Math.exp(le())}},bates:function(le){var C=p.random.irwinHall(le);return function(){return C()/le}},irwinHall:function(le){return function(){for(var C=0,z=0;z<le;z++)C+=Math.random();return C}}},p.scale={};var on={floor:E,ceil:E};function bn(le,C,z,F){var q=[],ae=[],ue=0,de=Math.min(le.length,C.length)-1;for(le[de]<le[0]&&(le=le.slice().reverse(),C=C.slice().reverse());++ue<=de;)q.push(z(le[ue-1],le[ue])),ae.push(F(C[ue-1],C[ue]));return function(ye){var Ae=p.bisect(le,ye,1,de)-1;return ae[Ae](q[Ae](ye))}}function zn(le,C){return p.rebind(le,C,"range","rangeRound","interpolate","clamp")}function jn(le,C){return pn(le,xn($n(le,C)[2])),pn(le,xn($n(le,C)[2])),le}function $n(le,C){null==C&&(C=10);var z=Gr(le),F=z[1]-z[0],q=Math.pow(10,Math.floor(Math.log(F/C)/Math.LN10)),ae=C/F*q;return ae<=.15?q*=10:ae<=.35?q*=5:ae<=.75&&(q*=2),z[0]=Math.ceil(z[0]/q)*q,z[1]=Math.floor(z[1]/q)*q+.5*q,z[2]=q,z}function Wr(le,C){return p.range.apply(p,$n(le,C))}p.scale.linear=function(){return function le(C,z,F,q){var ae,ue;function de(){var Ae=Math.min(C.length,z.length)>2?bn:tn,Ue=q?ko:cs;return ae=Ae(C,z,Ue,F),ue=Ae(z,C,Ue,Ia),ye}function ye(Ae){return ae(Ae)}return ye.invert=function(Ae){return ue(Ae)},ye.domain=function(Ae){return arguments.length?(C=Ae.map(Number),de()):C},ye.range=function(Ae){return arguments.length?(z=Ae,de()):z},ye.rangeRound=function(Ae){return ye.range(Ae).interpolate(Fo)},ye.clamp=function(Ae){return arguments.length?(q=Ae,de()):q},ye.interpolate=function(Ae){return arguments.length?(F=Ae,de()):F},ye.ticks=function(Ae){return Wr(C,Ae)},ye.tickFormat=function(Ae,Ue){return d3_scale_linearTickFormat(C,Ae,Ue)},ye.nice=function(Ae){return jn(C,Ae),de()},ye.copy=function(){return le(C,z,F,q)},de()}([0,1],[0,1],Ia,!1)},p.scale.log=function(){return function le(C,z,F,q){function ae(ye){return(F?Math.log(ye<0?0:ye):-Math.log(ye>0?0:-ye))/Math.log(z)}function ue(ye){return F?Math.pow(z,ye):-Math.pow(z,-ye)}function de(ye){return C(ae(ye))}return de.invert=function(ye){return ue(C.invert(ye))},de.domain=function(ye){return arguments.length?(F=ye[0]>=0,C.domain((q=ye.map(Number)).map(ae)),de):q},de.base=function(ye){return arguments.length?(z=+ye,C.domain(q.map(ae)),de):z},de.nice=function(){var ye=pn(q.map(ae),F?Math:Jn);return C.domain(ye),q=ye.map(ue),de},de.ticks=function(){var ye=Gr(q),Ae=[],Ue=ye[0],Ge=ye[1],nt=Math.floor(ae(Ue)),xt=Math.ceil(ae(Ge)),At=z%1?2:z;if(isFinite(xt-nt)){if(F){for(;nt<xt;nt++)for(var wt=1;wt<At;wt++)Ae.push(ue(nt)*wt);Ae.push(ue(nt))}else for(Ae.push(ue(nt));nt++<xt;)for(wt=At-1;wt>0;wt--)Ae.push(ue(nt)*wt);for(nt=0;Ae[nt]<Ue;nt++);for(xt=Ae.length;Ae[xt-1]>Ge;xt--);Ae=Ae.slice(nt,xt)}return Ae},de.copy=function(){return le(C.copy(),z,F,q)},zn(de,C)}(p.scale.linear().domain([0,1]),10,!0,[1,10])};var Jn={floor:function(le){return-Math.ceil(-le)},ceil:function(le){return-Math.floor(-le)}};function Ln(le){return function(C){return C<0?-Math.pow(-C,le):Math.pow(C,le)}}p.scale.pow=function(){return function le(C,z,F){var q=Ln(z),ae=Ln(1/z);function ue(de){return C(q(de))}return ue.invert=function(de){return ae(C.invert(de))},ue.domain=function(de){return arguments.length?(C.domain((F=de.map(Number)).map(q)),ue):F},ue.ticks=function(de){return Wr(F,de)},ue.tickFormat=function(de,ye){return d3_scale_linearTickFormat(F,de,ye)},ue.nice=function(de){return ue.domain(jn(F,de))},ue.exponent=function(de){return arguments.length?(q=Ln(z=de),ae=Ln(1/z),C.domain(F.map(q)),ue):z},ue.copy=function(){return le(C.copy(),z,F)},zn(ue,C)}(p.scale.linear(),1,[0,1])},p.scale.sqrt=function(){return p.scale.pow().exponent(.5)},p.scale.ordinal=function(){return function le(C,z){var F,q,ae;function ue(ye){return q[((F.get(ye)||("range"===z.t?F.set(ye,C.push(ye)):NaN))-1)%q.length]}function de(ye,Ae){return p.range(C.length).map(function(Ue){return ye+Ae*Ue})}return ue.domain=function(ye){if(!arguments.length)return C;C=[],F=new w;for(var Ae,Ue=-1,Ge=ye.length;++Ue<Ge;)F.has(Ae=ye[Ue])||F.set(Ae,C.push(Ae));return ue[z.t].apply(ue,z.a)},ue.range=function(ye){return arguments.length?(q=ye,ae=0,z={t:"range",a:arguments},ue):q},ue.rangePoints=function(ye,Ae){arguments.length<2&&(Ae=0);var Ue=ye[0],Ge=ye[1],nt=C.length<2?(Ue=(Ue+Ge)/2,0):(Ge-Ue)/(C.length-1+Ae);return q=de(Ue+nt*Ae/2,nt),ae=0,z={t:"rangePoints",a:arguments},ue},ue.rangeRoundPoints=function(ye,Ae){arguments.length<2&&(Ae=0);var Ue=ye[0],Ge=ye[1],nt=C.length<2?(Ue=Ge=Math.round((Ue+Ge)/2),0):(Ge-Ue)/(C.length-1+Ae)|0;return q=de(Ue+Math.round(nt*Ae/2+(Ge-Ue-(C.length-1+Ae)*nt)/2),nt),ae=0,z={t:"rangeRoundPoints",a:arguments},ue},ue.rangeBands=function(ye,Ae,Ue){arguments.length<2&&(Ae=0),arguments.length<3&&(Ue=Ae);var Ge=ye[1]<ye[0],nt=ye[Ge-0],xt=ye[1-Ge],At=(xt-nt)/(C.length-Ae+2*Ue);return q=de(nt+At*Ue,At),Ge&&q.reverse(),ae=At*(1-Ae),z={t:"rangeBands",a:arguments},ue},ue.rangeRoundBands=function(ye,Ae,Ue){arguments.length<2&&(Ae=0),arguments.length<3&&(Ue=Ae);var Ge=ye[1]<ye[0],nt=ye[Ge-0],xt=ye[1-Ge],At=Math.floor((xt-nt)/(C.length-Ae+2*Ue));return q=de(nt+Math.round((xt-nt-(C.length-Ae)*At)/2),At),Ge&&q.reverse(),ae=Math.round(At*(1-Ae)),z={t:"rangeRoundBands",a:arguments},ue},ue.rangeBand=function(){return ae},ue.rangeExtent=function(){return Gr(z.a[0])},ue.copy=function(){return le(C,z)},ue.domain(C)}([],{t:"range",a:[[]]})},p.scale.category10=function(){return p.scale.ordinal().range(Bn)},p.scale.category20=function(){return p.scale.ordinal().range(Zn)},p.scale.category20b=function(){return p.scale.ordinal().range(xi)},p.scale.category20c=function(){return p.scale.ordinal().range(Ai)};var Bn=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Gt),Zn=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Gt),xi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Gt),Ai=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Gt);function kn(){return 0}p.scale.quantile=function(){return function le(C,z){var F;function q(){var ue=0,de=z.length;for(F=[];++ue<de;)F[ue-1]=p.quantile(C,ue/de);return ae}function ae(ue){if(!isNaN(ue=+ue))return z[p.bisect(F,ue)]}return ae.domain=function(ue){return arguments.length?(C=ue.map(l).filter(c).sort(i),q()):C},ae.range=function(ue){return arguments.length?(z=ue,q()):z},ae.quantiles=function(){return F},ae.invertExtent=function(ue){return(ue=z.indexOf(ue))<0?[NaN,NaN]:[ue>0?F[ue-1]:C[0],ue<F.length?F[ue]:C[C.length-1]]},ae.copy=function(){return le(C,z)},q()}([],[])},p.scale.quantize=function(){return function le(C,z,F){var q,ae;function ue(ye){return F[Math.max(0,Math.min(ae,Math.floor(q*(ye-C))))]}function de(){return q=F.length/(z-C),ae=F.length-1,ue}return ue.domain=function(ye){return arguments.length?(C=+ye[0],z=+ye[ye.length-1],de()):[C,z]},ue.range=function(ye){return arguments.length?(F=ye,de()):F},ue.invertExtent=function(ye){return[ye=(ye=F.indexOf(ye))<0?NaN:ye/q+C,ye+1/q]},ue.copy=function(){return le(C,z,F)},de()}(0,1,[0,1])},p.scale.threshold=function(){return function le(C,z){function F(q){if(q<=q)return z[p.bisect(C,q)]}return F.domain=function(q){return arguments.length?(C=q,F):C},F.range=function(q){return arguments.length?(z=q,F):z},F.invertExtent=function(q){return q=z.indexOf(q),[C[q-1],C[q]]},F.copy=function(){return le(C,z)},F}([.5],[0,1])},p.scale.identity=function(){return function le(C){function z(F){return+F}return z.invert=z,z.domain=z.range=function(F){return arguments.length?(C=F.map(z),z):C},z.ticks=function(F){return Wr(C,F)},z.tickFormat=function(F,q){return d3_scale_linearTickFormat(C,F,q)},z.copy=function(){return le(C)},z}([0,1])},p.svg={},p.svg.arc=function(){var le=Ti,C=fi,z=kn,F=Li,q=Ci,ae=_i,ue=Xi;function de(){var Ae=Math.max(0,+le.apply(this,arguments)),Ue=Math.max(0,+C.apply(this,arguments)),Ge=q.apply(this,arguments)-He,nt=ae.apply(this,arguments)-He,xt=Math.abs(nt-Ge),At=Ge>nt?0:1;if(Ue<Ae&&(wt=Ue,Ue=Ae,Ae=wt),xt>=Fe)return ye(Ue,At)+(Ae?ye(Ae,1-At):"")+"Z";var wt,Tt,yt,Ft,Ot,Nt,er,fr,Tr,wr,Zr,Xr,fn=0,rn=0,Nn=[];if((Ft=(+ue.apply(this,arguments)||0)/2)&&(yt=F===Li?Math.sqrt(Ae*Ae+Ue*Ue):+F.apply(this,arguments),At||(rn*=-1),Ue&&(rn=ke(yt/Ue*Math.sin(Ft))),Ae&&(fn=ke(yt/Ae*Math.sin(Ft)))),Ue){Ot=Ue*Math.cos(Ge+rn),Nt=Ue*Math.sin(Ge+rn),er=Ue*Math.cos(nt-rn),fr=Ue*Math.sin(nt-rn);var Gn=Math.abs(nt-Ge-2*rn)<=Rt?0:1;if(rn&&Kn(Ot,Nt,er,fr)===At^Gn){var oi=(Ge+nt)/2;Ot=Ue*Math.cos(oi),Nt=Ue*Math.sin(oi),er=fr=null}}else Ot=Nt=0;if(Ae){Tr=Ae*Math.cos(nt-fn),wr=Ae*Math.sin(nt-fn),Zr=Ae*Math.cos(Ge+fn),Xr=Ae*Math.sin(Ge+fn);var Ur=Math.abs(Ge-nt+2*fn)<=Rt?0:1;if(fn&&Kn(Tr,wr,Zr,Xr)===1-At^Ur){var _n=(Ge+nt)/2;Tr=Ae*Math.cos(_n),wr=Ae*Math.sin(_n),Zr=Xr=null}}else Tr=wr=0;if(xt>bt&&(wt=Math.min(Math.abs(Ue-Ae)/2,+z.apply(this,arguments)))>.001){Tt=Ae<Ue^At?0:1;var Yn=wt,Vn=wt;if(xt<Rt){var Qn=null==Zr?[Tr,wr]:null==er?[Ot,Nt]:Ct([Ot,Nt],[Zr,Xr],[er,fr],[Tr,wr]),li=Ot-Qn[0],wi=Nt-Qn[1],Xn=er-Qn[0],mi=fr-Qn[1],pi=1/Math.sin(Math.acos((li*Xn+wi*mi)/(Math.sqrt(li*li+wi*wi)*Math.sqrt(Xn*Xn+mi*mi)))/2),Mi=Math.sqrt(Qn[0]*Qn[0]+Qn[1]*Qn[1]);Vn=Math.min(wt,(Ae-Mi)/(pi-1)),Yn=Math.min(wt,(Ue-Mi)/(pi+1))}if(null!=er){var vi=Vi(null==Zr?[Tr,wr]:[Zr,Xr],[Ot,Nt],Ue,Yn,At),Si=Vi([er,fr],[Tr,wr],Ue,Yn,At);wt===Yn?Nn.push("M",vi[0],"A",Yn,",",Yn," 0 0,",Tt," ",vi[1],"A",Ue,",",Ue," 0 ",1-At^Kn(vi[1][0],vi[1][1],Si[1][0],Si[1][1]),",",At," ",Si[1],"A",Yn,",",Yn," 0 0,",Tt," ",Si[0]):Nn.push("M",vi[0],"A",Yn,",",Yn," 0 1,",Tt," ",Si[0])}else Nn.push("M",Ot,",",Nt);if(null!=Zr){var Di=Vi([Ot,Nt],[Zr,Xr],Ae,-Vn,At),aa=Vi([Tr,wr],null==er?[Ot,Nt]:[er,fr],Ae,-Vn,At);wt===Vn?Nn.push("L",aa[0],"A",Vn,",",Vn," 0 0,",Tt," ",aa[1],"A",Ae,",",Ae," 0 ",At^Kn(aa[1][0],aa[1][1],Di[1][0],Di[1][1]),",",1-At," ",Di[1],"A",Vn,",",Vn," 0 0,",Tt," ",Di[0]):Nn.push("L",aa[0],"A",Vn,",",Vn," 0 0,",Tt," ",Di[0])}else Nn.push("L",Tr,",",wr)}else Nn.push("M",Ot,",",Nt),null!=er&&Nn.push("A",Ue,",",Ue," 0 ",Gn,",",At," ",er,",",fr),Nn.push("L",Tr,",",wr),null!=Zr&&Nn.push("A",Ae,",",Ae," 0 ",Ur,",",1-At," ",Zr,",",Xr);return Nn.push("Z"),Nn.join("")}function ye(Ae,Ue){return"M0,"+Ae+"A"+Ae+","+Ae+" 0 1,"+Ue+" 0,"+-Ae+"A"+Ae+","+Ae+" 0 1,"+Ue+" 0,"+Ae}return de.innerRadius=function(Ae){return arguments.length?(le=vr(Ae),de):le},de.outerRadius=function(Ae){return arguments.length?(C=vr(Ae),de):C},de.cornerRadius=function(Ae){return arguments.length?(z=vr(Ae),de):z},de.padRadius=function(Ae){return arguments.length?(F=Ae==Li?Li:vr(Ae),de):F},de.startAngle=function(Ae){return arguments.length?(q=vr(Ae),de):q},de.endAngle=function(Ae){return arguments.length?(ae=vr(Ae),de):ae},de.padAngle=function(Ae){return arguments.length?(ue=vr(Ae),de):ue},de.centroid=function(){var Ae=(+le.apply(this,arguments)+ +C.apply(this,arguments))/2,Ue=(+q.apply(this,arguments)+ +ae.apply(this,arguments))/2-He;return[Math.cos(Ue)*Ae,Math.sin(Ue)*Ae]},de};var Li="auto";function Ti(le){return le.innerRadius}function fi(le){return le.outerRadius}function Ci(le){return le.startAngle}function _i(le){return le.endAngle}function Xi(le){return le&&le.padAngle}function Kn(le,C,z,F){return(le-z)*C-(C-F)*le>0?0:1}function Vi(le,C,z,F,q){var ae=le[0]-C[0],ue=le[1]-C[1],de=(q?F:-F)/Math.sqrt(ae*ae+ue*ue),ye=de*ue,Ae=-de*ae,Ue=le[0]+ye,Ge=le[1]+Ae,nt=C[0]+ye,xt=C[1]+Ae,At=(Ue+nt)/2,wt=(Ge+xt)/2,Tt=nt-Ue,yt=xt-Ge,Ft=Tt*Tt+yt*yt,Ot=z-F,Nt=Ue*xt-nt*Ge,er=(yt<0?-1:1)*Math.sqrt(Math.max(0,Ot*Ot*Ft-Nt*Nt)),fr=(Nt*yt-Tt*er)/Ft,Tr=(-Nt*Tt-yt*er)/Ft,wr=(Nt*yt+Tt*er)/Ft,Zr=(-Nt*Tt+yt*er)/Ft,Xr=fr-At,fn=Tr-wt,rn=wr-At,Nn=Zr-wt;return Xr*Xr+fn*fn>rn*rn+Nn*Nn&&(fr=wr,Tr=Zr),[[fr-ye,Tr-Ae],[fr*z/Ot,Tr*z/Ot]]}function za(){return!0}function qo(le){var C=zr,z=sn,F=za,q=uo,ae=q.key,ue=.7;function de(ye){var Ae,Ue=[],Ge=[],nt=-1,xt=ye.length,At=vr(C),wt=vr(z);function Tt(){Ue.push("M",q(le(Ge),ue))}for(;++nt<xt;)F.call(this,Ae=ye[nt],nt)?Ge.push([+At.call(this,Ae,nt),+wt.call(this,Ae,nt)]):Ge.length&&(Tt(),Ge=[]);return Ge.length&&Tt(),Ue.length?Ue.join(""):null}return de.x=function(ye){return arguments.length?(C=ye,de):C},de.y=function(ye){return arguments.length?(z=ye,de):z},de.defined=function(ye){return arguments.length?(F=ye,de):F},de.interpolate=function(ye){return arguments.length?(ae="function"==typeof ye?q=ye:(q=Lo.get(ye)||uo).key,de):ae},de.tension=function(ye){return arguments.length?(ue=ye,de):ue},de}p.svg.line=function(){return qo(E)};var Lo=p.map({linear:uo,"linear-closed":di,step:function(le){for(var C=0,z=le.length,F=le[0],q=[F[0],",",F[1]];++C<z;)q.push("H",(F[0]+(F=le[C])[0])/2,"V",F[1]);return z>1&&q.push("H",F[0]),q.join("")},"step-before":ca,"step-after":fo,basis:Ba,"basis-open":function(le){if(le.length<4)return uo(le);for(var C,z=[],F=-1,q=le.length,ae=[0],ue=[0];++F<3;)ae.push((C=le[F])[0]),ue.push(C[1]);for(z.push(Ji(Ja,ae)+","+Ji(Ja,ue)),--F;++F<q;)C=le[F],ae.shift(),ae.push(C[0]),ue.shift(),ue.push(C[1]),rs(z,ae,ue);return z.join("")},"basis-closed":function(le){for(var C,z,F=-1,q=le.length,ae=q+4,ue=[],de=[];++F<4;)ue.push((z=le[F%q])[0]),de.push(z[1]);for(C=[Ji(Ja,ue),",",Ji(Ja,de)],--F;++F<ae;)z=le[F%q],ue.shift(),ue.push(z[0]),de.shift(),de.push(z[1]),rs(C,ue,de);return C.join("")},bundle:function(le,C){var z=le.length-1;if(z)for(var F,q,ae=le[0][0],ue=le[0][1],de=le[z][0]-ae,ye=le[z][1]-ue,Ae=-1;++Ae<=z;)(F=le[Ae])[0]=C*F[0]+(1-C)*(ae+(q=Ae/z)*de),F[1]=C*F[1]+(1-C)*(ue+q*ye);return Ba(le)},cardinal:function(le,C){return le.length<3?uo(le):le[0]+Hi(le,ya(le,C))},"cardinal-open":function(le,C){return le.length<4?uo(le):le[1]+Hi(le.slice(1,-1),ya(le,C))},"cardinal-closed":function(le,C){return le.length<3?di(le):le[0]+Hi((le.push(le[0]),le),ya([le[le.length-2]].concat(le,[le[1]]),C))},monotone:function(le){return le.length<3?uo(le):le[0]+Hi(le,function(C){for(var z,F,q,ae,ue=[],de=function(Ue){for(var Ge=0,nt=Ue.length-1,xt=[],At=Ue[0],wt=Ue[1],Tt=xt[0]=Jo(At,wt);++Ge<nt;)xt[Ge]=(Tt+(Tt=Jo(At=wt,wt=Ue[Ge+1])))/2;return xt[Ge]=Tt,xt}(C),ye=-1,Ae=C.length-1;++ye<Ae;)z=Jo(C[ye],C[ye+1]),o(z)<bt?de[ye]=de[ye+1]=0:(ae=(F=de[ye]/z)*F+(q=de[ye+1]/z)*q)>9&&(ae=3*z/Math.sqrt(ae),de[ye]=ae*F,de[ye+1]=ae*q);for(ye=-1;++ye<=Ae;)ae=(C[Math.min(Ae,ye+1)][0]-C[Math.max(0,ye-1)][0])/(6*(1+de[ye]*de[ye])),ue.push([ae||0,de[ye]*ae||0]);return ue}(le))}});function uo(le){return le.length>1?le.join("L"):le+"Z"}function di(le){return le.join("L")+"Z"}function ca(le){for(var C=0,z=le.length,F=le[0],q=[F[0],",",F[1]];++C<z;)q.push("V",(F=le[C])[1],"H",F[0]);return q.join("")}function fo(le){for(var C=0,z=le.length,F=le[0],q=[F[0],",",F[1]];++C<z;)q.push("H",(F=le[C])[0],"V",F[1]);return q.join("")}function Hi(le,C){if(C.length<1||le.length!=C.length&&le.length!=C.length+2)return uo(le);var z=le.length!=C.length,F="",q=le[0],ae=le[1],ue=C[0],de=ue,ye=1;if(z&&(F+="Q"+(ae[0]-2*ue[0]/3)+","+(ae[1]-2*ue[1]/3)+","+ae[0]+","+ae[1],q=le[1],ye=2),C.length>1){ae=le[ye],ye++,F+="C"+(q[0]+ue[0])+","+(q[1]+ue[1])+","+(ae[0]-(de=C[1])[0])+","+(ae[1]-de[1])+","+ae[0]+","+ae[1];for(var Ae=2;Ae<C.length;Ae++,ye++)F+="S"+((ae=le[ye])[0]-(de=C[Ae])[0])+","+(ae[1]-de[1])+","+ae[0]+","+ae[1]}if(z){var Ue=le[ye];F+="Q"+(ae[0]+2*de[0]/3)+","+(ae[1]+2*de[1]/3)+","+Ue[0]+","+Ue[1]}return F}function ya(le,C){for(var z,F=[],q=(1-C)/2,ae=le[0],ue=le[1],de=1,ye=le.length;++de<ye;)z=ae,ae=ue,F.push([q*((ue=le[de])[0]-z[0]),q*(ue[1]-z[1])]);return F}function Ba(le){if(le.length<3)return uo(le);var C=1,z=le.length,F=le[0],q=F[0],ae=F[1],ue=[q,q,q,(F=le[1])[0]],de=[ae,ae,ae,F[1]],ye=[q,",",ae,"L",Ji(Ja,ue),",",Ji(Ja,de)];for(le.push(le[z-1]);++C<=z;)F=le[C],ue.shift(),ue.push(F[0]),de.shift(),de.push(F[1]),rs(ye,ue,de);return le.pop(),ye.push("L",F),ye.join("")}function Ji(le,C){return le[0]*C[0]+le[1]*C[1]+le[2]*C[2]+le[3]*C[3]}Lo.forEach(function(le,C){C.key=le,C.closed=/-closed$/.test(le)});var io=[0,2/3,1/3,0],Ki=[0,1/3,2/3,0],Ja=[0,1/6,2/3,1/6];function rs(le,C,z){le.push("C",Ji(io,C),",",Ji(io,z),",",Ji(Ki,C),",",Ji(Ki,z),",",Ji(Ja,C),",",Ji(Ja,z))}function Jo(le,C){return(C[1]-le[1])/(C[0]-le[0])}function Is(le){for(var C,z,F,q=-1,ae=le.length;++q<ae;)z=(C=le[q])[0],F=C[1]-He,C[0]=z*Math.cos(F),C[1]=z*Math.sin(F);return le}function La(le){var C=zr,z=zr,F=0,q=sn,ae=za,ue=uo,de=ue.key,ye=ue,Ae="L",Ue=.7;function Ge(nt){var xt,At,wt,Tt=[],yt=[],Ft=[],Ot=-1,Nt=nt.length,er=vr(C),fr=vr(F),Tr=C===z?function(){return At}:vr(z),wr=F===q?function(){return wt}:vr(q);function Zr(){Tt.push("M",ue(le(Ft),Ue),Ae,ye(le(yt.reverse()),Ue),"Z")}for(;++Ot<Nt;)ae.call(this,xt=nt[Ot],Ot)?(yt.push([At=+er.call(this,xt,Ot),wt=+fr.call(this,xt,Ot)]),Ft.push([+Tr.call(this,xt,Ot),+wr.call(this,xt,Ot)])):yt.length&&(Zr(),yt=[],Ft=[]);return yt.length&&Zr(),Tt.length?Tt.join(""):null}return Ge.x=function(nt){return arguments.length?(C=z=nt,Ge):z},Ge.x0=function(nt){return arguments.length?(C=nt,Ge):C},Ge.x1=function(nt){return arguments.length?(z=nt,Ge):z},Ge.y=function(nt){return arguments.length?(F=q=nt,Ge):q},Ge.y0=function(nt){return arguments.length?(F=nt,Ge):F},Ge.y1=function(nt){return arguments.length?(q=nt,Ge):q},Ge.defined=function(nt){return arguments.length?(ae=nt,Ge):ae},Ge.interpolate=function(nt){return arguments.length?(de="function"==typeof nt?ue=nt:(ue=Lo.get(nt)||uo).key,ye=ue.reverse||ue,Ae=ue.closed?"M":"L",Ge):de},Ge.tension=function(nt){return arguments.length?(Ue=nt,Ge):Ue},Ge}function Os(le){return le.source}function Ca(le){return le.target}function Ko(le){return le.radius}function ai(le){return[le.x,le.y]}function gi(le){return function(){var C=le.apply(this,arguments),z=C[0],F=C[1]-He;return[z*Math.cos(F),z*Math.sin(F)]}}function zs(){return 64}function Ds(){return"circle"}function Qo(le){var C=Math.sqrt(le/Rt);return"M0,"+C+"A"+C+","+C+" 0 1,1 0,"+-C+"A"+C+","+C+" 0 1,1 0,"+C+"Z"}p.svg.line.radial=function(){var le=qo(Is);return le.radius=le.x,delete le.x,le.angle=le.y,delete le.y,le},ca.reverse=fo,fo.reverse=ca,p.svg.area=function(){return La(E)},p.svg.area.radial=function(){var le=La(Is);return le.radius=le.x,delete le.x,le.innerRadius=le.x0,delete le.x0,le.outerRadius=le.x1,delete le.x1,le.angle=le.y,delete le.y,le.startAngle=le.y0,delete le.y0,le.endAngle=le.y1,delete le.y1,le},p.svg.chord=function(){var le=Os,C=Ca,z=Ko,F=Ci,q=_i;function ae(Ae,Ue){var Ge,nt,xt=ue(this,le,Ae,Ue),At=ue(this,C,Ae,Ue);return"M"+xt.p0+de(xt.r,xt.p1,xt.a1-xt.a0)+((Ge=xt).a0==(nt=At).a0&&Ge.a1==nt.a1?ye(0,0,0,xt.p0):ye(0,0,0,At.p0)+de(At.r,At.p1,At.a1-At.a0)+ye(0,0,0,xt.p0))+"Z"}function ue(Ae,Ue,Ge,nt){var xt=Ue.call(Ae,Ge,nt),At=z.call(Ae,xt,nt),wt=F.call(Ae,xt,nt)-He,Tt=q.call(Ae,xt,nt)-He;return{r:At,a0:wt,a1:Tt,p0:[At*Math.cos(wt),At*Math.sin(wt)],p1:[At*Math.cos(Tt),At*Math.sin(Tt)]}}function de(Ae,Ue,Ge){return"A"+Ae+","+Ae+" 0 "+ +(Ge>Rt)+",1 "+Ue}function ye(Ae,Ue,Ge,nt){return"Q 0,0 "+nt}return ae.radius=function(Ae){return arguments.length?(z=vr(Ae),ae):z},ae.source=function(Ae){return arguments.length?(le=vr(Ae),ae):le},ae.target=function(Ae){return arguments.length?(C=vr(Ae),ae):C},ae.startAngle=function(Ae){return arguments.length?(F=vr(Ae),ae):F},ae.endAngle=function(Ae){return arguments.length?(q=vr(Ae),ae):q},ae},p.svg.diagonal=function(){var le=Os,C=Ca,z=ai;function F(q,ae){var ue=le.call(this,q,ae),de=C.call(this,q,ae),ye=(ue.y+de.y)/2,Ae=[ue,{x:ue.x,y:ye},{x:de.x,y:ye},de];return"M"+(Ae=Ae.map(z))[0]+"C"+Ae[1]+" "+Ae[2]+" "+Ae[3]}return F.source=function(q){return arguments.length?(le=vr(q),F):le},F.target=function(q){return arguments.length?(C=vr(q),F):C},F.projection=function(q){return arguments.length?(z=q,F):z},F},p.svg.diagonal.radial=function(){var le=p.svg.diagonal(),C=ai,z=le.projection;return le.projection=function(F){return arguments.length?z(gi(C=F)):C},le},p.svg.symbol=function(){var le=Ds,C=zs;function z(F,q){return(Ao.get(le.call(this,F,q))||Qo)(C.call(this,F,q))}return z.type=function(F){return arguments.length?(le=vr(F),z):le},z.size=function(F){return arguments.length?(C=vr(F),z):C},z};var Ao=p.map({circle:Qo,cross:function(le){var C=Math.sqrt(le/5)/2;return"M"+-3*C+","+-C+"H"+-C+"V"+-3*C+"H"+C+"V"+-C+"H"+3*C+"V"+C+"H"+C+"V"+3*C+"H"+-C+"V"+C+"H"+-3*C+"Z"},diamond:function(le){var C=Math.sqrt(le/(2*Ws)),z=C*Ws;return"M0,"+-C+"L"+z+",0 0,"+C+" "+-z+",0Z"},square:function(le){var C=Math.sqrt(le)/2;return"M"+-C+","+-C+"L"+C+","+-C+" "+C+","+C+" "+-C+","+C+"Z"},"triangle-down":function(le){var C=Math.sqrt(le/jo),z=C*jo/2;return"M0,"+z+"L"+C+","+-z+" "+-C+","+-z+"Z"},"triangle-up":function(le){var C=Math.sqrt(le/jo),z=C*jo/2;return"M0,"+-z+"L"+C+","+z+" "+-C+","+z+"Z"}});p.svg.symbolTypes=Ao.keys();var jo=Math.sqrt(3),Ws=Math.tan(30*Oe);K.transition=function(le){for(var C,z,F=us||++fs,q=Ts(le),ae=[],ue=ns||{time:Date.now(),ease:ds,delay:0,duration:250},de=-1,ye=this.length;++de<ye;){ae.push(C=[]);for(var Ae=this[de],Ue=-1,Ge=Ae.length;++Ue<Ge;)(z=Ae[Ue])&&is(z,Ue,q,F,ue),C.push(z)}return Qi(ae,q,F)},K.interrupt=function(le){return this.each(null==le?_s:qi(Ts(le)))};var _s=qi(Ts());function qi(le){return function(){var C,z,F;(C=this[le])&&(F=C[z=C.active])&&(F.timer.c=null,F.timer.t=NaN,--C.count?delete C[z]:delete this[le],C.active+=.5,F.event&&F.event.interrupt.call(this,this.__data__,F.index))}}function Qi(le,C,z){return N(le,Aa),le.namespace=C,le.id=z,le}var us,ns,Aa=[],fs=0;function ws(le,C,z,F){var q=le.id,ae=le.namespace;return ze(le,"function"==typeof z?function(ue,de,ye){ue[ae][q].tween.set(C,F(z.call(ue,ue.__data__,de,ye)))}:(z=F(z),function(ue){ue[ae][q].tween.set(C,z)}))}function gs(le){return null==le&&(le=""),function(){this.textContent=le}}function Ts(le){return null==le?"__transition__":"__transition_"+le+"__"}function is(le,C,z,F,q){var ae,ue,de,ye,Ae,Ue=le[z]||(le[z]={active:0,count:0}),Ge=Ue[F];function nt(At){var wt=Ue.active,Tt=Ue[wt];for(var yt in Tt&&(Tt.timer.c=null,Tt.timer.t=NaN,--Ue.count,delete Ue[wt],Tt.event&&Tt.event.interrupt.call(le,le.__data__,Tt.index)),Ue)if(+yt<F){var Ft=Ue[yt];Ft.timer.c=null,Ft.timer.t=NaN,--Ue.count,delete Ue[yt]}ue.c=xt,Rr(function(){return ue.c&&xt(At||1)&&(ue.c=null,ue.t=NaN),1},0,ae),Ue.active=F,Ge.event&&Ge.event.start.call(le,le.__data__,C),Ae=[],Ge.tween.forEach(function(Ot,Nt){(Nt=Nt.call(le,le.__data__,C))&&Ae.push(Nt)}),ye=Ge.ease,de=Ge.duration}function xt(At){for(var wt=At/de,Tt=ye(wt),yt=Ae.length;yt>0;)Ae[--yt].call(le,Tt);if(wt>=1)return Ge.event&&Ge.event.end.call(le,le.__data__,C),--Ue.count?delete Ue[F]:delete le[z],1}Ge||(ue=Rr(function(At){var wt=Ge.delay;if(ue.t=wt+ae,wt<=At)return nt(At-wt);ue.c=nt},0,ae=q.time),Ge=Ue[F]={tween:new w,time:ae,timer:ue,delay:q.delay,duration:q.duration,ease:q.ease,index:C},q=null,++Ue.count)}Aa.call=K.call,Aa.empty=K.empty,Aa.node=K.node,Aa.size=K.size,p.transition=function(le,C){return le&&le.transition?us?le.transition(C):le:p.selection().transition(le)},p.transition.prototype=Aa,Aa.select=function(le){var C,z,F,q=this.id,ae=this.namespace,ue=[];le=re(le);for(var de=-1,ye=this.length;++de<ye;){ue.push(C=[]);for(var Ae=this[de],Ue=-1,Ge=Ae.length;++Ue<Ge;)(F=Ae[Ue])&&(z=le.call(F,F.__data__,Ue,de))?("__data__"in F&&(z.__data__=F.__data__),is(z,Ue,ae,q,F[ae][q]),C.push(z)):C.push(null)}return Qi(ue,ae,q)},Aa.selectAll=function(le){var C,z,F,q,ae,ue=this.id,de=this.namespace,ye=[];le=ne(le);for(var Ae=-1,Ue=this.length;++Ae<Ue;)for(var Ge=this[Ae],nt=-1,xt=Ge.length;++nt<xt;)if(F=Ge[nt]){ae=F[de][ue],z=le.call(F,F.__data__,nt,Ae),ye.push(C=[]);for(var At=-1,wt=z.length;++At<wt;)(q=z[At])&&is(q,At,de,ue,ae),C.push(q)}return Qi(ye,de,ue)},Aa.filter=function(le){var C,z,F=[];"function"!=typeof le&&(le=Me(le));for(var q=0,ae=this.length;q<ae;q++){F.push(C=[]);for(var ue,de=0,ye=(ue=this[q]).length;de<ye;de++)(z=ue[de])&&le.call(z,z.__data__,de,q)&&C.push(z)}return Qi(F,this.namespace,this.id)},Aa.tween=function(le,C){var z=this.id,F=this.namespace;return arguments.length<2?this.node()[F][z].tween.get(le):ze(this,null==C?function(q){q[F][z].tween.remove(le)}:function(q){q[F][z].tween.set(le,C)})},Aa.attr=function(le,C){if(arguments.length<2){for(C in le)this.attr(C,le[C]);return this}var z="transform"==le?No:Ia,F=p.ns.qualify(le);function q(){this.removeAttribute(F)}function ae(){this.removeAttributeNS(F.space,F.local)}function ue(ye){return null==ye?q:(ye+="",function(){var Ae,Ue=this.getAttribute(F);return Ue!==ye&&(Ae=z(Ue,ye),function(Ge){this.setAttribute(F,Ae(Ge))})})}function de(ye){return null==ye?ae:(ye+="",function(){var Ae,Ue=this.getAttributeNS(F.space,F.local);return Ue!==ye&&(Ae=z(Ue,ye),function(Ge){this.setAttributeNS(F.space,F.local,Ae(Ge))})})}return ws(this,"attr."+le,C,F.local?de:ue)},Aa.attrTween=function(le,C){var z=p.ns.qualify(le);return this.tween("attr."+le,z.local?function(F,q){var ae=C.call(this,F,q,this.getAttributeNS(z.space,z.local));return ae&&function(ue){this.setAttributeNS(z.space,z.local,ae(ue))}}:function(F,q){var ae=C.call(this,F,q,this.getAttribute(z));return ae&&function(ue){this.setAttribute(z,ae(ue))}})},Aa.style=function(le,C,z){var F=arguments.length;if(F<3){if("string"!=typeof le){for(z in F<2&&(C=""),le)this.style(z,le[z],C);return this}z=""}function q(){this.style.removeProperty(le)}function ae(ue){return null==ue?q:(ue+="",function(){var de,ye=n(this).getComputedStyle(this,null).getPropertyValue(le);return ye!==ue&&(de=Ia(ye,ue),function(Ae){this.style.setProperty(le,de(Ae),z)})})}return ws(this,"style."+le,C,ae)},Aa.styleTween=function(le,C,z){function F(q,ae){var ue=C.call(this,q,ae,n(this).getComputedStyle(this,null).getPropertyValue(le));return ue&&function(de){this.style.setProperty(le,ue(de),z)}}return arguments.length<3&&(z=""),this.tween("style."+le,F)},Aa.text=function(le){return ws(this,"text",le,gs)},Aa.remove=function(){var le=this.namespace;return this.each("end.transition",function(){var C;this[le].count<2&&(C=this.parentNode)&&C.removeChild(this)})},Aa.ease=function(le){var C=this.id,z=this.namespace;return arguments.length<1?this.node()[z][C].ease:("function"!=typeof le&&(le=p.ease.apply(p,arguments)),ze(this,function(F){F[z][C].ease=le}))},Aa.delay=function(le){var C=this.id,z=this.namespace;return arguments.length<1?this.node()[z][C].delay:ze(this,"function"==typeof le?function(F,q,ae){F[z][C].delay=+le.call(F,F.__data__,q,ae)}:(le=+le,function(F){F[z][C].delay=le}))},Aa.duration=function(le){var C=this.id,z=this.namespace;return arguments.length<1?this.node()[z][C].duration:ze(this,"function"==typeof le?function(F,q,ae){F[z][C].duration=Math.max(1,le.call(F,F.__data__,q,ae))}:(le=Math.max(1,le),function(F){F[z][C].duration=le}))},Aa.each=function(le,C){var z=this.id,F=this.namespace;if(arguments.length<2){var q=ns,ae=us;try{us=z,ze(this,function(ue,de,ye){ns=ue[F][z],le.call(ue,ue.__data__,de,ye)})}finally{ns=q,us=ae}}else ze(this,function(ue){var de=ue[F][z];(de.event||(de.event=p.dispatch("start","end","interrupt"))).on(le,C)});return this},Aa.transition=function(){for(var le,C,z,F=this.id,q=++fs,ae=this.namespace,ue=[],de=0,ye=this.length;de<ye;de++){ue.push(le=[]);for(var Ae,Ue=0,Ge=(Ae=this[de]).length;Ue<Ge;Ue++)(C=Ae[Ue])&&is(C,Ue,ae,q,{time:(z=C[ae][F]).time,ease:z.ease,delay:z.delay+z.duration,duration:z.duration}),le.push(C)}return Qi(ue,ae,q)},p.svg.axis=function(){var le,C=p.scale.linear(),z=Xs,F=6,q=6,ae=3,ue=[10],de=null;function ye(Ae){Ae.each(function(){var Ue,Ge=p.select(this),nt=this.__chart__||C,xt=this.__chart__=C.copy(),At=null==de?xt.ticks?xt.ticks.apply(xt,ue):xt.domain():de,wt=null==le?xt.tickFormat?xt.tickFormat.apply(xt,ue):E:le,Tt=Ge.selectAll(".tick").data(At,xt),yt=Tt.enter().insert("g",".domain").attr("class","tick").style("opacity",bt),Ft=p.transition(Tt.exit()).style("opacity",bt).remove(),Ot=p.transition(Tt.order()).style("opacity",1),Nt=Math.max(F,0)+ae,er=an(xt),fr=Ge.selectAll(".domain").data([0]),Tr=(fr.enter().append("path").attr("class","domain"),p.transition(fr));yt.append("line"),yt.append("text");var wr,Zr,Xr,fn,rn=yt.select("line"),Nn=Ot.select("line"),Gn=Tt.select("text").text(wt),oi=yt.select("text"),Ur=Ot.select("text"),_n="top"===z||"left"===z?-1:1;if("bottom"===z||"top"===z?(Ue=hs,wr="x",Xr="y",Zr="x2",fn="y2",Gn.attr("dy",_n<0?"0em":".71em").style("text-anchor","middle"),Tr.attr("d","M"+er[0]+","+_n*q+"V0H"+er[1]+"V"+_n*q)):(Ue=Zs,wr="y",Xr="x",Zr="y2",fn="x2",Gn.attr("dy",".32em").style("text-anchor",_n<0?"end":"start"),Tr.attr("d","M"+_n*q+","+er[0]+"H0V"+er[1]+"H"+_n*q)),rn.attr(fn,_n*F),oi.attr(Xr,_n*Nt),Nn.attr(Zr,0).attr(fn,_n*F),Ur.attr(wr,0).attr(Xr,_n*Nt),xt.rangeBand){var Yn=xt,Vn=Yn.rangeBand()/2;nt=xt=function(Qn){return Yn(Qn)+Vn}}else nt.rangeBand?nt=xt:Ft.call(Ue,xt,nt);yt.call(Ue,nt,xt),Ot.call(Ue,xt,xt)})}return ye.scale=function(Ae){return arguments.length?(C=Ae,ye):C},ye.orient=function(Ae){return arguments.length?(z=Ae in il?Ae+"":Xs,ye):z},ye.ticks=function(){return arguments.length?(ue=b(arguments),ye):ue},ye.tickValues=function(Ae){return arguments.length?(de=Ae,ye):de},ye.tickFormat=function(Ae){return arguments.length?(le=Ae,ye):le},ye.tickSize=function(Ae){var Ue=arguments.length;return Ue?(F=+Ae,q=+arguments[Ue-1],ye):F},ye.innerTickSize=function(Ae){return arguments.length?(F=+Ae,ye):F},ye.outerTickSize=function(Ae){return arguments.length?(q=+Ae,ye):q},ye.tickPadding=function(Ae){return arguments.length?(ae=+Ae,ye):ae},ye.tickSubdivide=function(){return arguments.length&&ye},ye};var Xs="bottom",il={top:1,right:1,bottom:1,left:1};function hs(le,C,z){le.attr("transform",function(F){var q=C(F);return"translate("+(isFinite(q)?q:z(F))+",0)"})}function Zs(le,C,z){le.attr("transform",function(F){var q=C(F);return"translate(0,"+(isFinite(q)?q:z(F))+")"})}p.svg.brush=function(){var le,C,z=te(Ue,"brushstart","brush","brushend"),F=null,q=null,ae=[0,0],ue=[0,0],de=!0,ye=!0,Ae=Ka[0];function Ue(wt){wt.each(function(){var Tt=p.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",At).on("touchstart.brush",At),yt=Tt.selectAll(".background").data([0]);yt.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Tt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Ft=Tt.selectAll(".resize").data(Ae,E);Ft.exit().remove(),Ft.enter().append("g").attr("class",function(fr){return"resize "+fr}).style("cursor",function(fr){return ks[fr]}).append("rect").attr("x",function(fr){return/[ew]$/.test(fr)?-3:null}).attr("y",function(fr){return/^[ns]/.test(fr)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Ft.style("display",Ue.empty()?"none":null);var Ot,Nt=p.transition(Tt),er=p.transition(yt);F&&(Ot=an(F),er.attr("x",Ot[0]).attr("width",Ot[1]-Ot[0]),nt(Nt)),q&&(Ot=an(q),er.attr("y",Ot[0]).attr("height",Ot[1]-Ot[0]),xt(Nt)),Ge(Nt)})}function Ge(wt){wt.selectAll(".resize").attr("transform",function(Tt){return"translate("+ae[+/e$/.test(Tt)]+","+ue[+/^s/.test(Tt)]+")"})}function nt(wt){wt.select(".extent").attr("x",ae[0]),wt.selectAll(".extent,.n>rect,.s>rect").attr("width",ae[1]-ae[0])}function xt(wt){wt.select(".extent").attr("y",ue[0]),wt.selectAll(".extent,.e>rect,.w>rect").attr("height",ue[1]-ue[0])}function At(){var wt,Tt,yt=this,Ft=p.select(p.event.target),Ot=z.of(yt,arguments),Nt=p.select(yt),er=Ft.datum(),fr=!/^(n|s)$/.test(er)&&F,Tr=!/^(e|w)$/.test(er)&&q,wr=Ft.classed("extent"),Zr=Pt(yt),Xr=p.mouse(yt),fn=p.select(n(yt)).on("keydown.brush",Gn).on("keyup.brush",oi);if(p.event.changedTouches?fn.on("touchmove.brush",Ur).on("touchend.brush",Yn):fn.on("mousemove.brush",Ur).on("mouseup.brush",Yn),Nt.interrupt().selectAll("*").interrupt(),wr)Xr[0]=ae[0]-Xr[0],Xr[1]=ue[0]-Xr[1];else if(er){var rn=+/w$/.test(er),Nn=+/^n/.test(er);Tt=[ae[1-rn]-Xr[0],ue[1-Nn]-Xr[1]],Xr[0]=ae[rn],Xr[1]=ue[Nn]}else p.event.altKey&&(wt=Xr.slice());function Gn(){32==p.event.keyCode&&(wr||(wt=null,Xr[0]-=ae[1],Xr[1]-=ue[1],wr=2),G())}function oi(){32==p.event.keyCode&&2==wr&&(Xr[0]+=ae[1],Xr[1]+=ue[1],wr=0,G())}function Ur(){var Vn=p.mouse(yt),Qn=!1;Tt&&(Vn[0]+=Tt[0],Vn[1]+=Tt[1]),wr||(p.event.altKey?(wt||(wt=[(ae[0]+ae[1])/2,(ue[0]+ue[1])/2]),Xr[0]=ae[+(Vn[0]<wt[0])],Xr[1]=ue[+(Vn[1]<wt[1])]):wt=null),fr&&_n(Vn,F,0)&&(nt(Nt),Qn=!0),Tr&&_n(Vn,q,1)&&(xt(Nt),Qn=!0),Qn&&(Ge(Nt),Ot({type:"brush",mode:wr?"move":"resize"}))}function _n(Vn,Qn,li){var wi,Xn,mi=an(Qn),pi=mi[0],Mi=mi[1],vi=Xr[li],Si=li?ue:ae,Di=Si[1]-Si[0];if(wr&&(pi-=vi,Mi-=Di+vi),wi=(li?ye:de)?Math.max(pi,Math.min(Mi,Vn[li])):Vn[li],wr?Xn=(wi+=vi)+Di:(wt&&(vi=Math.max(pi,Math.min(Mi,2*wt[li]-wi))),vi<wi?(Xn=wi,wi=vi):Xn=vi),Si[0]!=wi||Si[1]!=Xn)return li?C=null:le=null,Si[0]=wi,Si[1]=Xn,!0}function Yn(){Ur(),Nt.style("pointer-events","all").selectAll(".resize").style("display",Ue.empty()?"none":null),p.select("body").style("cursor",null),fn.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Zr(),Ot({type:"brushend"})}Nt.style("pointer-events","none").selectAll(".resize").style("display",null),p.select("body").style("cursor",Ft.style("cursor")),Ot({type:"brushstart"}),Ur()}return Ue.event=function(wt){wt.each(function(){var Tt=z.of(this,arguments),yt={x:ae,y:ue,i:le,j:C},Ft=this.__chart__||yt;this.__chart__=yt,us?p.select(this).transition().each("start.brush",function(){le=Ft.i,C=Ft.j,ae=Ft.x,ue=Ft.y,Tt({type:"brushstart"})}).tween("brush:brush",function(){var Ot=la(ae,yt.x),Nt=la(ue,yt.y);return le=C=null,function(er){ae=yt.x=Ot(er),ue=yt.y=Nt(er),Tt({type:"brush",mode:"resize"})}}).each("end.brush",function(){le=yt.i,C=yt.j,Tt({type:"brush",mode:"resize"}),Tt({type:"brushend"})}):(Tt({type:"brushstart"}),Tt({type:"brush",mode:"resize"}),Tt({type:"brushend"}))})},Ue.x=function(wt){return arguments.length?(Ae=Ka[!(F=wt)<<1|!q],Ue):F},Ue.y=function(wt){return arguments.length?(Ae=Ka[!F<<1|!(q=wt)],Ue):q},Ue.clamp=function(wt){return arguments.length?(F&&q?(de=!!wt[0],ye=!!wt[1]):F?de=!!wt:q&&(ye=!!wt),Ue):F&&q?[de,ye]:F?de:q?ye:null},Ue.extent=function(wt){var Tt,yt,Ft,Ot,Nt;return arguments.length?(F&&(Tt=wt[0],yt=wt[1],q&&(Tt=Tt[0],yt=yt[0]),le=[Tt,yt],F.invert&&(Tt=F(Tt),yt=F(yt)),yt<Tt&&(Nt=Tt,Tt=yt,yt=Nt),Tt==ae[0]&&yt==ae[1]||(ae=[Tt,yt])),q&&(Ft=wt[0],Ot=wt[1],F&&(Ft=Ft[1],Ot=Ot[1]),C=[Ft,Ot],q.invert&&(Ft=q(Ft),Ot=q(Ot)),Ot<Ft&&(Nt=Ft,Ft=Ot,Ot=Nt),Ft==ue[0]&&Ot==ue[1]||(ue=[Ft,Ot])),Ue):(F&&(le?(Tt=le[0],yt=le[1]):(Tt=ae[0],yt=ae[1],F.invert&&(Tt=F.invert(Tt),yt=F.invert(yt)),yt<Tt&&(Nt=Tt,Tt=yt,yt=Nt))),q&&(C?(Ft=C[0],Ot=C[1]):(Ft=ue[0],Ot=ue[1],q.invert&&(Ft=q.invert(Ft),Ot=q.invert(Ot)),Ot<Ft&&(Nt=Ft,Ft=Ot,Ot=Nt))),F&&q?[[Tt,Ft],[yt,Ot]]:F?[Tt,yt]:q&&[Ft,Ot])},Ue.clear=function(){return Ue.empty()||(ae=[0,0],ue=[0,0],le=C=null),Ue},Ue.empty=function(){return!!F&&ae[0]==ae[1]||!!q&&ue[0]==ue[1]},p.rebind(Ue,z,"on")};var ks={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ka=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function al(le){return JSON.parse(le.responseText)}function ol(le){var C=v.createRange();return C.selectNode(v.body),C.createContextualFragment(le.responseText)}p.text=Br(function(le){return le.responseText}),p.json=function(le,C){return Jr(le,"application/json",al,C)},p.html=function(le,C){return Jr(le,"text/html",ol,C)},p.xml=Br(function(le){return le.responseXML}),"object"==typeof $&&$.exports?$.exports=p:this.d3=p}).apply(self)},{}],59:[function(y,$,ee){"use strict";$.exports=y("./quad")},{"./quad":60}],60:[function(y,$,ee){"use strict";var p=y("binary-search-bounds"),m=y("clamp"),b=y("parse-rect"),v=y("array-bounds"),e=y("pick-by-alias"),n=y("defined"),t=y("flatten-vertex-data"),a=y("is-obj"),r=y("dtype"),u=y("math-log2");function s(i,l){for(var c=l[0],f=l[1],g=1/(l[2]-c),h=1/(l[3]-f),o=new Array(i.length),x=0,d=i.length/2;x<d;x++)o[2*x]=m((i[2*x]-c)*g,0,1),o[2*x+1]=m((i[2*x+1]-f)*h,0,1);return o}$.exports=function(i,l){l||(l={}),i=t(i,"float64"),l=e(l,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=n(l.maxDepth,255),f=n(l.bounds,v(i,2));f[0]===f[2]&&f[2]++,f[1]===f[3]&&f[3]++;var g,h=s(i,f),o=i.length>>>1;l.dtype||(l.dtype="array"),"string"==typeof l.dtype?g=new(r(l.dtype))(o):l.dtype&&(g=l.dtype,Array.isArray(g)&&(g.length=o));for(var x=0;x<o;++x)g[x]=x;var d=[],w=[],_=[],T=[];!function B(H,V,Z,W,G,X){if(!W.length)return null;var te=d[G]||(d[G]=[]),D=_[G]||(_[G]=[]),N=w[G]||(w[G]=[]),U=te.length;if(++G>c||X>1073741824){for(var Q=0;Q<W.length;Q++)te.push(W[Q]),D.push(X),N.push(null,null,null,null);return U}if(te.push(W[0]),D.push(X),W.length<=1)return N.push(null,null,null,null),U;for(var j=.5*Z,J=H+j,K=V+j,re=[],ne=[],se=[],oe=[],pe=1,ce=W.length;pe<ce;pe++){var ge=W[pe],we=h[2*ge+1];h[2*ge]<J?we<K?re.push(ge):ne.push(ge):we<K?se.push(ge):oe.push(ge)}return N.push(B(H,V,j,re,G,X<<=2),B(H,K,j,ne,G,X+1),B(J,V,j,se,G,X+2),B(J,K,j,oe,G,X+3)),U}(0,0,1,g,0,1);for(var k=0,L=0;L<d.length;L++){var M=d[L];if(g.set)g.set(M,k);else for(var O=0,P=M.length;O<P;O++)g[O+k]=M[O];var S=k+d[L].length;T[L]=[k,S],k=S}return g.range=function(){for(var B,H=[],V=arguments.length;V--;)H[V]=arguments[V];if(a(H[H.length-1])){var Z=H.pop();H.length||null==Z.x&&null==Z.l&&null==Z.left||(H=[Z],B={}),B=e(Z,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else B={};H.length||(H=f);var ne,W=b.apply(void 0,H),G=[Math.min(W.x,W.x+W.width),Math.min(W.y,W.y+W.height),Math.max(W.x,W.x+W.width),Math.max(W.y,W.y+W.height)],X=G[0],te=G[1],D=G[2],N=G[3],U=s([X,te,D,N],f),Q=U[0],j=U[1],J=U[2],K=U[3],re=n(B.level,d.length);if(null!=B.d&&("number"==typeof B.d?ne=[B.d,B.d]:B.d.length&&(ne=B.d),re=Math.min(Math.max(Math.ceil(-u(Math.abs(ne[0])/(f[2]-f[0]))),Math.ceil(-u(Math.abs(ne[1])/(f[3]-f[1])))),re)),re=Math.min(re,d.length),B.lod)return E(Q,j,J,K,re);var se=[];function oe(ce,ge,xe,we,be,Se){if(null!==be&&null!==Se&&!(Q>ce+xe||j>ge+xe||J<ce||K<ge||we>=re||be===Se)){var fe=d[we];void 0===Se&&(Se=fe.length);for(var me=be;me<Se;me++){var Te=fe[me],_e=i[2*Te],Me=i[2*Te+1];_e>=X&&_e<=D&&Me>=te&&Me<=N&&se.push(Te)}var Ie=w[we],ze=Ie[4*be+0],Ve=Ie[4*be+1],Je=Ie[4*be+2],De=Ie[4*be+3],Be=pe(Ie,be+1),Ze=.5*xe,Ye=we+1;oe(ce,ge,Ze,Ye,ze,Ve||Je||De||Be),oe(ce,ge+Ze,Ze,Ye,Ve,Je||De||Be),oe(ce+Ze,ge,Ze,Ye,Je,De||Be),oe(ce+Ze,ge+Ze,Ze,Ye,De,Be)}}function pe(ce,ge){for(var xe=null,we=0;null===xe;)if(xe=ce[4*ge+we],++we>ce.length)return null;return xe}return oe(0,0,1,0,0,1),se},g;function E(B,H,V,Z,W){for(var G=[],X=0;X<W;X++){var te=_[X],D=T[X][0],N=R(B,H,X),U=R(V,Z,X),Q=p.ge(te,N),j=p.gt(te,U,Q,te.length-1);G[X]=[Q+D,j+D]}return G}function R(B,H,V){for(var Z=1,W=.5,G=.5,X=.5,te=0;te<V;te++)Z<<=2,Z+=B<W?H<G?0:1:H<G?2:3,X*=.5,W+=B<W?-X:X,G+=H<G?-X:X;return Z}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(y,$,ee){"use strict";Object.defineProperty(ee,"__esModule",{value:!0});var p=y("@turf/meta");function m(e){var n=0;if(e&&e.length>0){n+=Math.abs(b(e[0]));for(var t=1;t<e.length;t++)n-=Math.abs(b(e[t]))}return n}function b(e){var n,t,a,r,u,s,i=0,l=e.length;if(l>2){for(s=0;s<l;s++)s===l-2?(a=l-2,r=l-1,u=0):s===l-1?(a=l-1,r=0,u=1):(a=s,r=s+1,u=s+2),n=e[a],t=e[r],i+=(v(e[u][0])-v(n[0]))*Math.sin(v(t[1]));i=6378137*i*6378137/2}return i}function v(e){return e*Math.PI/180}ee.default=function(e){return p.geomReduce(e,function(n,t){return n+function(a){var r,u=0;switch(a.type){case"Polygon":return m(a.coordinates);case"MultiPolygon":for(r=0;r<a.coordinates.length;r++)u+=m(a.coordinates[r]);return u;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(t)},0)}},{"@turf/meta":63}],62:[function(y,$,ee){"use strict";function p(l,c,f){void 0===f&&(f={});var g={type:"Feature"};return(0===f.id||f.id)&&(g.id=f.id),f.bbox&&(g.bbox=f.bbox),g.properties=c||{},g.geometry=l,g}function m(l,c,f){if(void 0===f&&(f={}),!l)throw new Error("coordinates is required");if(!Array.isArray(l))throw new Error("coordinates must be an Array");if(l.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!i(l[0])||!i(l[1]))throw new Error("coordinates must contain numbers");return p({type:"Point",coordinates:l},c,f)}function b(l,c,f){void 0===f&&(f={});for(var g=0,h=l;g<h.length;g++){var o=h[g];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var x=0;x<o[o.length-1].length;x++)if(o[o.length-1][x]!==o[0][x])throw new Error("First and last Position are not equivalent.")}return p({type:"Polygon",coordinates:l},c,f)}function v(l,c,f){if(void 0===f&&(f={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return p({type:"LineString",coordinates:l},c,f)}function e(l,c){void 0===c&&(c={});var f={type:"FeatureCollection"};return c.id&&(f.id=c.id),c.bbox&&(f.bbox=c.bbox),f.features=l,f}function n(l,c,f){return void 0===f&&(f={}),p({type:"MultiLineString",coordinates:l},c,f)}function t(l,c,f){return void 0===f&&(f={}),p({type:"MultiPoint",coordinates:l},c,f)}function a(l,c,f){return void 0===f&&(f={}),p({type:"MultiPolygon",coordinates:l},c,f)}function r(l,c){void 0===c&&(c="kilometers");var f=ee.factors[c];if(!f)throw new Error(c+" units is invalid");return l*f}function u(l,c){void 0===c&&(c="kilometers");var f=ee.factors[c];if(!f)throw new Error(c+" units is invalid");return l/f}function s(l){return l%(2*Math.PI)*180/Math.PI}function i(l){return!isNaN(l)&&null!==l&&!Array.isArray(l)}Object.defineProperty(ee,"__esModule",{value:!0}),ee.earthRadius=6371008.8,ee.factors={centimeters:100*ee.earthRadius,centimetres:100*ee.earthRadius,degrees:ee.earthRadius/111325,feet:3.28084*ee.earthRadius,inches:39.37*ee.earthRadius,kilometers:ee.earthRadius/1e3,kilometres:ee.earthRadius/1e3,meters:ee.earthRadius,metres:ee.earthRadius,miles:ee.earthRadius/1609.344,millimeters:1e3*ee.earthRadius,millimetres:1e3*ee.earthRadius,nauticalmiles:ee.earthRadius/1852,radians:1,yards:1.0936*ee.earthRadius},ee.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ee.earthRadius,yards:1.0936133},ee.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ee.feature=p,ee.geometry=function(l,c,f){switch(void 0===f&&(f={}),l){case"Point":return m(c).geometry;case"LineString":return v(c).geometry;case"Polygon":return b(c).geometry;case"MultiPoint":return t(c).geometry;case"MultiLineString":return n(c).geometry;case"MultiPolygon":return a(c).geometry;default:throw new Error(l+" is invalid")}},ee.point=m,ee.points=function(l,c,f){return void 0===f&&(f={}),e(l.map(function(g){return m(g,c)}),f)},ee.polygon=b,ee.polygons=function(l,c,f){return void 0===f&&(f={}),e(l.map(function(g){return b(g,c)}),f)},ee.lineString=v,ee.lineStrings=function(l,c,f){return void 0===f&&(f={}),e(l.map(function(g){return v(g,c)}),f)},ee.featureCollection=e,ee.multiLineString=n,ee.multiPoint=t,ee.multiPolygon=a,ee.geometryCollection=function(l,c,f){return void 0===f&&(f={}),p({type:"GeometryCollection",geometries:l},c,f)},ee.round=function(l,c){if(void 0===c&&(c=0),c&&!(c>=0))throw new Error("precision must be a positive number");var f=Math.pow(10,c||0);return Math.round(l*f)/f},ee.radiansToLength=r,ee.lengthToRadians=u,ee.lengthToDegrees=function(l,c){return s(u(l,c))},ee.bearingToAzimuth=function(l){var c=l%360;return c<0&&(c+=360),c},ee.radiansToDegrees=s,ee.degreesToRadians=function(l){return l%360*Math.PI/180},ee.convertLength=function(l,c,f){if(void 0===c&&(c="kilometers"),void 0===f&&(f="kilometers"),!(l>=0))throw new Error("length must be a positive number");return r(u(l,c),f)},ee.convertArea=function(l,c,f){if(void 0===c&&(c="meters"),void 0===f&&(f="kilometers"),!(l>=0))throw new Error("area must be a positive number");var g=ee.areaFactors[c];if(!g)throw new Error("invalid original units");var h=ee.areaFactors[f];if(!h)throw new Error("invalid final units");return l/g*h},ee.isNumber=i,ee.isObject=function(l){return!!l&&l.constructor===Object},ee.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(4!==l.length&&6!==l.length)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(c){if(!i(c))throw new Error("bbox must only contain numbers")})},ee.validateId=function(l){if(!l)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof l))throw new Error("id must be a number or a string")}},{}],63:[function(y,$,ee){"use strict";Object.defineProperty(ee,"__esModule",{value:!0});var p=y("@turf/helpers");function m(r,u,s){if(null!==r)for(var i,l,c,f,g,h,o,x,d=0,w=0,_=r.type,T="FeatureCollection"===_,k="Feature"===_,L=T?r.features.length:1,M=0;M<L;M++){g=(x=!!(o=T?r.features[M].geometry:k?r.geometry:r)&&"GeometryCollection"===o.type)?o.geometries.length:1;for(var O=0;O<g;O++){var P=0,S=0;if(null!==(f=x?o.geometries[O]:o)){h=f.coordinates;var E=f.type;switch(d=!s||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===u(h,w,M,P,S))return!1;w++,P++;break;case"LineString":case"MultiPoint":for(i=0;i<h.length;i++){if(!1===u(h[i],w,M,P,S))return!1;w++,"MultiPoint"===E&&P++}"LineString"===E&&P++;break;case"Polygon":case"MultiLineString":for(i=0;i<h.length;i++){for(l=0;l<h[i].length-d;l++){if(!1===u(h[i][l],w,M,P,S))return!1;w++}"MultiLineString"===E&&P++,"Polygon"===E&&S++}"Polygon"===E&&P++;break;case"MultiPolygon":for(i=0;i<h.length;i++){for(S=0,l=0;l<h[i].length;l++){for(c=0;c<h[i][l].length-d;c++){if(!1===u(h[i][l][c],w,M,P,S))return!1;w++}S++}P++}break;case"GeometryCollection":for(i=0;i<f.geometries.length;i++)if(!1===m(f.geometries[i],u,s))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(r,u){var s;switch(r.type){case"FeatureCollection":for(s=0;s<r.features.length&&!1!==u(r.features[s].properties,s);s++);break;case"Feature":u(r.properties,0)}}function v(r,u){if("Feature"===r.type)u(r,0);else if("FeatureCollection"===r.type)for(var s=0;s<r.features.length&&!1!==u(r.features[s],s);s++);}function e(r,u){var s,i,l,c,f,g,h,o,x,d,w=0,_="FeatureCollection"===r.type,T="Feature"===r.type,k=_?r.features.length:1;for(s=0;s<k;s++){for(o=_?r.features[s].properties:T?r.properties:{},x=_?r.features[s].bbox:T?r.bbox:void 0,d=_?r.features[s].id:T?r.id:void 0,f=(h=!!(g=_?r.features[s].geometry:T?r.geometry:r)&&"GeometryCollection"===g.type)?g.geometries.length:1,l=0;l<f;l++)if(null!==(c=h?g.geometries[l]:g))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===u(c,w,o,x,d))return!1;break;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)if(!1===u(c.geometries[i],w,o,x,d))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===u(null,w,o,x,d))return!1;w++}}function n(r,u){e(r,function(s,i,l,c,f){var g,h=null===s?null:s.type;switch(h){case null:case"Point":case"LineString":case"Polygon":return!1!==u(p.feature(s,l,{bbox:c,id:f}),i,0)&&void 0}switch(h){case"MultiPoint":g="Point";break;case"MultiLineString":g="LineString";break;case"MultiPolygon":g="Polygon"}for(var o=0;o<s.coordinates.length;o++)if(!1===u(p.feature({type:g,coordinates:s.coordinates[o]},l),i,o))return!1})}function t(r,u){n(r,function(s,i,l){var c=0;if(s.geometry){var f=s.geometry.type;if("Point"!==f&&"MultiPoint"!==f){var g,h=0,o=0,x=0;return!1!==m(s,function(d,w,_,T,k){if(void 0===g||i>h||T>o||k>x)return g=d,h=i,o=T,x=k,void(c=0);var L=p.lineString([g,d],s.properties);if(!1===u(L,i,l,k,c))return!1;c++,g=d})&&void 0}}})}function a(r,u){if(!r)throw new Error("geojson is required");n(r,function(s,i,l){if(null!==s.geometry){var f=s.geometry.coordinates;switch(s.geometry.type){case"LineString":if(!1===u(s,i,l,0,0))return!1;break;case"Polygon":for(var g=0;g<f.length;g++)if(!1===u(p.lineString(f[g],s.properties),i,l,g))return!1}}})}ee.coordEach=m,ee.coordReduce=function(r,u,s,i){var l=s;return m(r,function(c,f,g,h,o){l=0===f&&void 0===s?c:u(l,c,f,g,h,o)},i),l},ee.propEach=b,ee.propReduce=function(r,u,s){var i=s;return b(r,function(l,c){i=0===c&&void 0===s?l:u(i,l,c)}),i},ee.featureEach=v,ee.featureReduce=function(r,u,s){var i=s;return v(r,function(l,c){i=0===c&&void 0===s?l:u(i,l,c)}),i},ee.coordAll=function(r){var u=[];return m(r,function(s){u.push(s)}),u},ee.geomEach=e,ee.geomReduce=function(r,u,s){var i=s;return e(r,function(l,c,f,g,h){i=0===c&&void 0===s?l:u(i,l,c,f,g,h)}),i},ee.flattenEach=n,ee.flattenReduce=function(r,u,s){var i=s;return n(r,function(l,c,f){i=0===c&&0===f&&void 0===s?l:u(i,l,c,f)}),i},ee.segmentEach=t,ee.segmentReduce=function(r,u,s){var i=s,l=!1;return t(r,function(c,f,g,h,o){i=!1===l&&void 0===s?c:u(i,c,f,g,h,o),l=!0}),i},ee.lineEach=a,ee.lineReduce=function(r,u,s){var i=s;return a(r,function(l,c,f,g){i=0===c&&void 0===s?l:u(i,l,c,f,g)}),i},ee.findSegment=function(r,u){if(!p.isObject(u=u||{}))throw new Error("options is invalid");var s,i=u.featureIndex||0,l=u.multiFeatureIndex||0,c=u.geometryIndex||0,f=u.segmentIndex||0,g=u.properties;switch(r.type){case"FeatureCollection":i<0&&(i=r.features.length+i),g=g||r.features[i].properties,s=r.features[i].geometry;break;case"Feature":g=g||r.properties,s=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=r;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var h=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=h.length+f-1),p.lineString([h[f],h[f+1]],g,u);case"Polygon":return c<0&&(c=h.length+c),f<0&&(f=h[c].length+f-1),p.lineString([h[c][f],h[c][f+1]],g,u);case"MultiLineString":return l<0&&(l=h.length+l),f<0&&(f=h[l].length+f-1),p.lineString([h[l][f],h[l][f+1]],g,u);case"MultiPolygon":return l<0&&(l=h.length+l),c<0&&(c=h[l].length+c),f<0&&(f=h[l][c].length-f-1),p.lineString([h[l][c][f],h[l][c][f+1]],g,u)}throw new Error("geojson is invalid")},ee.findPoint=function(r,u){if(!p.isObject(u=u||{}))throw new Error("options is invalid");var s,i=u.featureIndex||0,l=u.multiFeatureIndex||0,c=u.geometryIndex||0,f=u.coordIndex||0,g=u.properties;switch(r.type){case"FeatureCollection":i<0&&(i=r.features.length+i),g=g||r.features[i].properties,s=r.features[i].geometry;break;case"Feature":g=g||r.properties,s=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=r;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var h=s.coordinates;switch(s.type){case"Point":return p.point(h,g,u);case"MultiPoint":return l<0&&(l=h.length+l),p.point(h[l],g,u);case"LineString":return f<0&&(f=h.length+f),p.point(h[f],g,u);case"Polygon":return c<0&&(c=h.length+c),f<0&&(f=h[c].length+f),p.point(h[c][f],g,u);case"MultiLineString":return l<0&&(l=h.length+l),f<0&&(f=h[l].length+f),p.point(h[l][f],g,u);case"MultiPolygon":return l<0&&(l=h.length+l),c<0&&(c=h[l].length+c),f<0&&(f=h[l][c].length-f),p.point(h[l][c][f],g,u)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(y,$,ee){"use strict";Object.defineProperty(ee,"__esModule",{value:!0});var p=y("@turf/meta");function m(b){var v=[1/0,1/0,-1/0,-1/0];return p.coordEach(b,function(e){v[0]>e[0]&&(v[0]=e[0]),v[1]>e[1]&&(v[1]=e[1]),v[2]<e[0]&&(v[2]=e[0]),v[3]<e[1]&&(v[3]=e[1])}),v}m.default=m,ee.default=m},{"@turf/meta":66}],65:[function(y,$,ee){arguments[4][62][0].apply(ee,arguments)},{dup:62}],66:[function(y,$,ee){arguments[4][63][0].apply(ee,arguments)},{"@turf/helpers":65,dup:63}],67:[function(y,$,ee){"use strict";Object.defineProperty(ee,"__esModule",{value:!0});var p=y("@turf/meta"),m=y("@turf/helpers");ee.default=function(b,v){void 0===v&&(v={});var e=0,n=0,t=0;return p.coordEach(b,function(a){e+=a[0],n+=a[1],t++}),m.point([e/t,n/t],v.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(y,$,ee){"use strict";function p(l,c,f){void 0===f&&(f={});var g={type:"Feature"};return(0===f.id||f.id)&&(g.id=f.id),f.bbox&&(g.bbox=f.bbox),g.properties=c||{},g.geometry=l,g}function m(l,c,f){return void 0===f&&(f={}),p({type:"Point",coordinates:l},c,f)}function b(l,c,f){void 0===f&&(f={});for(var g=0,h=l;g<h.length;g++){var o=h[g];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var x=0;x<o[o.length-1].length;x++)if(o[o.length-1][x]!==o[0][x])throw new Error("First and last Position are not equivalent.")}return p({type:"Polygon",coordinates:l},c,f)}function v(l,c,f){if(void 0===f&&(f={}),l.length<2)throw new Error("coordinates must be an array of two or more positions");return p({type:"LineString",coordinates:l},c,f)}function e(l,c){void 0===c&&(c={});var f={type:"FeatureCollection"};return c.id&&(f.id=c.id),c.bbox&&(f.bbox=c.bbox),f.features=l,f}function n(l,c,f){return void 0===f&&(f={}),p({type:"MultiLineString",coordinates:l},c,f)}function t(l,c,f){return void 0===f&&(f={}),p({type:"MultiPoint",coordinates:l},c,f)}function a(l,c,f){return void 0===f&&(f={}),p({type:"MultiPolygon",coordinates:l},c,f)}function r(l,c){void 0===c&&(c="kilometers");var f=ee.factors[c];if(!f)throw new Error(c+" units is invalid");return l*f}function u(l,c){void 0===c&&(c="kilometers");var f=ee.factors[c];if(!f)throw new Error(c+" units is invalid");return l/f}function s(l){return l%(2*Math.PI)*180/Math.PI}function i(l){return!isNaN(l)&&null!==l&&!Array.isArray(l)&&!/^\s*$/.test(l)}Object.defineProperty(ee,"__esModule",{value:!0}),ee.earthRadius=6371008.8,ee.factors={centimeters:100*ee.earthRadius,centimetres:100*ee.earthRadius,degrees:ee.earthRadius/111325,feet:3.28084*ee.earthRadius,inches:39.37*ee.earthRadius,kilometers:ee.earthRadius/1e3,kilometres:ee.earthRadius/1e3,meters:ee.earthRadius,metres:ee.earthRadius,miles:ee.earthRadius/1609.344,millimeters:1e3*ee.earthRadius,millimetres:1e3*ee.earthRadius,nauticalmiles:ee.earthRadius/1852,radians:1,yards:ee.earthRadius/1.0936},ee.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ee.earthRadius,yards:1/1.0936},ee.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ee.feature=p,ee.geometry=function(l,c,f){switch(void 0===f&&(f={}),l){case"Point":return m(c).geometry;case"LineString":return v(c).geometry;case"Polygon":return b(c).geometry;case"MultiPoint":return t(c).geometry;case"MultiLineString":return n(c).geometry;case"MultiPolygon":return a(c).geometry;default:throw new Error(l+" is invalid")}},ee.point=m,ee.points=function(l,c,f){return void 0===f&&(f={}),e(l.map(function(g){return m(g,c)}),f)},ee.polygon=b,ee.polygons=function(l,c,f){return void 0===f&&(f={}),e(l.map(function(g){return b(g,c)}),f)},ee.lineString=v,ee.lineStrings=function(l,c,f){return void 0===f&&(f={}),e(l.map(function(g){return v(g,c)}),f)},ee.featureCollection=e,ee.multiLineString=n,ee.multiPoint=t,ee.multiPolygon=a,ee.geometryCollection=function(l,c,f){return void 0===f&&(f={}),p({type:"GeometryCollection",geometries:l},c,f)},ee.round=function(l,c){if(void 0===c&&(c=0),c&&!(c>=0))throw new Error("precision must be a positive number");var f=Math.pow(10,c||0);return Math.round(l*f)/f},ee.radiansToLength=r,ee.lengthToRadians=u,ee.lengthToDegrees=function(l,c){return s(u(l,c))},ee.bearingToAzimuth=function(l){var c=l%360;return c<0&&(c+=360),c},ee.radiansToDegrees=s,ee.degreesToRadians=function(l){return l%360*Math.PI/180},ee.convertLength=function(l,c,f){if(void 0===c&&(c="kilometers"),void 0===f&&(f="kilometers"),!(l>=0))throw new Error("length must be a positive number");return r(u(l,c),f)},ee.convertArea=function(l,c,f){if(void 0===c&&(c="meters"),void 0===f&&(f="kilometers"),!(l>=0))throw new Error("area must be a positive number");var g=ee.areaFactors[c];if(!g)throw new Error("invalid original units");var h=ee.areaFactors[f];if(!h)throw new Error("invalid final units");return l/g*h},ee.isNumber=i,ee.isObject=function(l){return!!l&&l.constructor===Object},ee.validateBBox=function(l){if(!l)throw new Error("bbox is required");if(!Array.isArray(l))throw new Error("bbox must be an Array");if(4!==l.length&&6!==l.length)throw new Error("bbox must be an Array of 4 or 6 numbers");l.forEach(function(c){if(!i(c))throw new Error("bbox must only contain numbers")})},ee.validateId=function(l){if(!l)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof l))throw new Error("id must be a number or a string")},ee.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},ee.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},ee.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},ee.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},ee.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},ee.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},ee.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(y,$,ee){"use strict";Object.defineProperty(ee,"__esModule",{value:!0});var p=y("@turf/helpers");function m(r,u,s){if(null!==r)for(var i,l,c,f,g,h,o,x,d=0,w=0,_=r.type,T="FeatureCollection"===_,k="Feature"===_,L=T?r.features.length:1,M=0;M<L;M++){g=(x=!!(o=T?r.features[M].geometry:k?r.geometry:r)&&"GeometryCollection"===o.type)?o.geometries.length:1;for(var O=0;O<g;O++){var P=0,S=0;if(null!==(f=x?o.geometries[O]:o)){h=f.coordinates;var E=f.type;switch(d=!s||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":if(!1===u(h,w,M,P,S))return!1;w++,P++;break;case"LineString":case"MultiPoint":for(i=0;i<h.length;i++){if(!1===u(h[i],w,M,P,S))return!1;w++,"MultiPoint"===E&&P++}"LineString"===E&&P++;break;case"Polygon":case"MultiLineString":for(i=0;i<h.length;i++){for(l=0;l<h[i].length-d;l++){if(!1===u(h[i][l],w,M,P,S))return!1;w++}"MultiLineString"===E&&P++,"Polygon"===E&&S++}"Polygon"===E&&P++;break;case"MultiPolygon":for(i=0;i<h.length;i++){for(S=0,l=0;l<h[i].length;l++){for(c=0;c<h[i][l].length-d;c++){if(!1===u(h[i][l][c],w,M,P,S))return!1;w++}S++}P++}break;case"GeometryCollection":for(i=0;i<f.geometries.length;i++)if(!1===m(f.geometries[i],u,s))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b(r,u){var s;switch(r.type){case"FeatureCollection":for(s=0;s<r.features.length&&!1!==u(r.features[s].properties,s);s++);break;case"Feature":u(r.properties,0)}}function v(r,u){if("Feature"===r.type)u(r,0);else if("FeatureCollection"===r.type)for(var s=0;s<r.features.length&&!1!==u(r.features[s],s);s++);}function e(r,u){var s,i,l,c,f,g,h,o,x,d,w=0,_="FeatureCollection"===r.type,T="Feature"===r.type,k=_?r.features.length:1;for(s=0;s<k;s++){for(o=_?r.features[s].properties:T?r.properties:{},x=_?r.features[s].bbox:T?r.bbox:void 0,d=_?r.features[s].id:T?r.id:void 0,f=(h=!!(g=_?r.features[s].geometry:T?r.geometry:r)&&"GeometryCollection"===g.type)?g.geometries.length:1,l=0;l<f;l++)if(null!==(c=h?g.geometries[l]:g))switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===u(c,w,o,x,d))return!1;break;case"GeometryCollection":for(i=0;i<c.geometries.length;i++)if(!1===u(c.geometries[i],w,o,x,d))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===u(null,w,o,x,d))return!1;w++}}function n(r,u){e(r,function(s,i,l,c,f){var g,h=null===s?null:s.type;switch(h){case null:case"Point":case"LineString":case"Polygon":return!1!==u(p.feature(s,l,{bbox:c,id:f}),i,0)&&void 0}switch(h){case"MultiPoint":g="Point";break;case"MultiLineString":g="LineString";break;case"MultiPolygon":g="Polygon"}for(var o=0;o<s.coordinates.length;o++)if(!1===u(p.feature({type:g,coordinates:s.coordinates[o]},l),i,o))return!1})}function t(r,u){n(r,function(s,i,l){var c=0;if(s.geometry){var f=s.geometry.type;if("Point"!==f&&"MultiPoint"!==f){var g,h=0,o=0,x=0;return!1!==m(s,function(d,w,_,T,k){if(void 0===g||i>h||T>o||k>x)return g=d,h=i,o=T,x=k,void(c=0);var L=p.lineString([g,d],s.properties);if(!1===u(L,i,l,k,c))return!1;c++,g=d})&&void 0}}})}function a(r,u){if(!r)throw new Error("geojson is required");n(r,function(s,i,l){if(null!==s.geometry){var f=s.geometry.coordinates;switch(s.geometry.type){case"LineString":if(!1===u(s,i,l,0,0))return!1;break;case"Polygon":for(var g=0;g<f.length;g++)if(!1===u(p.lineString(f[g],s.properties),i,l,g))return!1}}})}ee.coordEach=m,ee.coordReduce=function(r,u,s,i){var l=s;return m(r,function(c,f,g,h,o){l=0===f&&void 0===s?c:u(l,c,f,g,h,o)},i),l},ee.propEach=b,ee.propReduce=function(r,u,s){var i=s;return b(r,function(l,c){i=0===c&&void 0===s?l:u(i,l,c)}),i},ee.featureEach=v,ee.featureReduce=function(r,u,s){var i=s;return v(r,function(l,c){i=0===c&&void 0===s?l:u(i,l,c)}),i},ee.coordAll=function(r){var u=[];return m(r,function(s){u.push(s)}),u},ee.geomEach=e,ee.geomReduce=function(r,u,s){var i=s;return e(r,function(l,c,f,g,h){i=0===c&&void 0===s?l:u(i,l,c,f,g,h)}),i},ee.flattenEach=n,ee.flattenReduce=function(r,u,s){var i=s;return n(r,function(l,c,f){i=0===c&&0===f&&void 0===s?l:u(i,l,c,f)}),i},ee.segmentEach=t,ee.segmentReduce=function(r,u,s){var i=s,l=!1;return t(r,function(c,f,g,h,o){i=!1===l&&void 0===s?c:u(i,c,f,g,h,o),l=!0}),i},ee.lineEach=a,ee.lineReduce=function(r,u,s){var i=s;return a(r,function(l,c,f,g){i=0===c&&void 0===s?l:u(i,l,c,f,g)}),i},ee.findSegment=function(r,u){if(!p.isObject(u=u||{}))throw new Error("options is invalid");var s,i=u.featureIndex||0,l=u.multiFeatureIndex||0,c=u.geometryIndex||0,f=u.segmentIndex||0,g=u.properties;switch(r.type){case"FeatureCollection":i<0&&(i=r.features.length+i),g=g||r.features[i].properties,s=r.features[i].geometry;break;case"Feature":g=g||r.properties,s=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=r;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var h=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=h.length+f-1),p.lineString([h[f],h[f+1]],g,u);case"Polygon":return c<0&&(c=h.length+c),f<0&&(f=h[c].length+f-1),p.lineString([h[c][f],h[c][f+1]],g,u);case"MultiLineString":return l<0&&(l=h.length+l),f<0&&(f=h[l].length+f-1),p.lineString([h[l][f],h[l][f+1]],g,u);case"MultiPolygon":return l<0&&(l=h.length+l),c<0&&(c=h[l].length+c),f<0&&(f=h[l][c].length-f-1),p.lineString([h[l][c][f],h[l][c][f+1]],g,u)}throw new Error("geojson is invalid")},ee.findPoint=function(r,u){if(!p.isObject(u=u||{}))throw new Error("options is invalid");var s,i=u.featureIndex||0,l=u.multiFeatureIndex||0,c=u.geometryIndex||0,f=u.coordIndex||0,g=u.properties;switch(r.type){case"FeatureCollection":i<0&&(i=r.features.length+i),g=g||r.features[i].properties,s=r.features[i].geometry;break;case"Feature":g=g||r.properties,s=r.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=r;break;default:throw new Error("geojson is invalid")}if(null===s)return null;var h=s.coordinates;switch(s.type){case"Point":return p.point(h,g,u);case"MultiPoint":return l<0&&(l=h.length+l),p.point(h[l],g,u);case"LineString":return f<0&&(f=h.length+f),p.point(h[f],g,u);case"Polygon":return c<0&&(c=h.length+c),f<0&&(f=h[c].length+f),p.point(h[c][f],g,u);case"MultiLineString":return l<0&&(l=h.length+l),f<0&&(f=h[l].length+f),p.point(h[l][f],g,u);case"MultiPolygon":return l<0&&(l=h.length+l),c<0&&(c=h[l].length+c),f<0&&(f=h[l][c].length-f),p.point(h[l][c][f],g,u)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(y,$,ee){$.exports=function(p){var m=0,b=0,v=0,e=0;return p.map(function(n){var t=(n=n.slice())[0],a=t.toUpperCase();if(t!=a)switch(n[0]=a,t){case"a":n[6]+=v,n[7]+=e;break;case"v":n[1]+=e;break;case"h":n[1]+=v;break;default:for(var r=1;r<n.length;)n[r++]+=v,n[r++]+=e}switch(a){case"Z":v=m,e=b;break;case"H":v=n[1];break;case"V":e=n[1];break;case"M":v=m=n[1],e=b=n[2];break;default:v=n[n.length-2],e=n[n.length-1]}return n})}},{}],71:[function(y,$,ee){"use strict";$.exports=function(p,m){if(!p||null==p.length)throw Error("Argument should be an array");m=null==m?1:Math.floor(m);for(var b=Array(2*m),v=0;v<m;v++){for(var e=-1/0,n=1/0,t=v,a=p.length;t<a;t+=m)p[t]>e&&(e=p[t]),p[t]<n&&(n=p[t]);b[v]=n,b[m+v]=e}return b}},{}],72:[function(y,$,ee){"use strict";$.exports=function(p,m,b){if("function"==typeof Array.prototype.findIndex)return p.findIndex(m,b);if("function"!=typeof m)throw new TypeError("predicate must be a function");var v=Object(p),e=v.length;if(0===e)return-1;for(var n=0;n<e;n++)if(m.call(b,v[n],n,v))return n;return-1}},{}],73:[function(y,$,ee){"use strict";var p=y("array-bounds");$.exports=function(m,b,v){if(!m||null==m.length)throw Error("Argument should be an array");null==b&&(b=1),null==v&&(v=p(m,b));for(var e=0;e<b;e++){var n=v[b+e],t=v[e],a=e,r=m.length;if(n===1/0&&t===-1/0)for(a=e;a<r;a+=b)m[a]=m[a]===n?1:m[a]===t?0:.5;else if(n===1/0)for(a=e;a<r;a+=b)m[a]=m[a]===n?1:0;else if(t===-1/0)for(a=e;a<r;a+=b)m[a]=m[a]===t?0:1;else{var u=n-t;for(a=e;a<r;a+=b)isNaN(m[a])||(m[a]=0===u?.5:(m[a]-t)/u)}}return m}},{"array-bounds":71}],74:[function(y,$,ee){$.exports=function(p,m){var b="number"==typeof p,v="number"==typeof m;b&&!v?(m=p,p=0):b||v||(p=0,m=0);var e=(m|=0)-(p|=0);if(e<0)throw new Error("array length must be positive");for(var n=new Array(e),t=0,a=p;t<e;t++,a++)n[t]=a;return n}},{}],75:[function(y,$,ee){(function(p){(function(){"use strict";var m=y("object-assign");function b(T,k){if(T===k)return 0;for(var L=T.length,M=k.length,O=0,P=Math.min(L,M);O<P;++O)if(T[O]!==k[O]){L=T[O],M=k[O];break}return L<M?-1:M<L?1:0}function v(T){return p.Buffer&&"function"==typeof p.Buffer.isBuffer?p.Buffer.isBuffer(T):!(null==T||!T._isBuffer)}var e=y("util/"),n=Object.prototype.hasOwnProperty,t=Array.prototype.slice,a="foo"===function(){}.name;function r(T){return Object.prototype.toString.call(T)}function u(T){return!v(T)&&"function"==typeof p.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(T):!!T&&(T instanceof DataView||!!(T.buffer&&T.buffer instanceof ArrayBuffer)))}var s=$.exports=h,i=/\s*function\s+([^\(\s]*)\s*/;function l(T){if(e.isFunction(T)){if(a)return T.name;var k=T.toString().match(i);return k&&k[1]}}function c(T,k){return"string"==typeof T?T.length<k?T:T.slice(0,k):T}function f(T){if(a||!e.isFunction(T))return e.inspect(T);var k=l(T);return"[Function"+(k?": "+k:"")+"]"}function g(T,k,L,M,O){throw new s.AssertionError({message:L,actual:T,expected:k,operator:M,stackStartFunction:O})}function h(T,k){T||g(T,!0,k,"==",s.ok)}function o(T,k,L,M){if(T===k)return!0;if(v(T)&&v(k))return 0===b(T,k);if(e.isDate(T)&&e.isDate(k))return T.getTime()===k.getTime();if(e.isRegExp(T)&&e.isRegExp(k))return T.source===k.source&&T.global===k.global&&T.multiline===k.multiline&&T.lastIndex===k.lastIndex&&T.ignoreCase===k.ignoreCase;if(null!==T&&"object"==typeof T||null!==k&&"object"==typeof k){if(u(T)&&u(k)&&r(T)===r(k)&&!(T instanceof Float32Array||T instanceof Float64Array))return 0===b(new Uint8Array(T.buffer),new Uint8Array(k.buffer));if(v(T)!==v(k))return!1;var O=(M=M||{actual:[],expected:[]}).actual.indexOf(T);return-1!==O&&O===M.expected.indexOf(k)||(M.actual.push(T),M.expected.push(k),function(P,S,E,R){if(null==P||null==S)return!1;if(e.isPrimitive(P)||e.isPrimitive(S))return P===S;if(E&&Object.getPrototypeOf(P)!==Object.getPrototypeOf(S))return!1;var B=x(P),H=x(S);if(B&&!H||!B&&H)return!1;if(B)return o(P=t.call(P),S=t.call(S),E);var V,Z,W=_(P),G=_(S);if(W.length!==G.length)return!1;for(W.sort(),G.sort(),Z=W.length-1;Z>=0;Z--)if(W[Z]!==G[Z])return!1;for(Z=W.length-1;Z>=0;Z--)if(!o(P[V=W[Z]],S[V],E,R))return!1;return!0}(T,k,L,M))}return L?T===k:T==k}function x(T){return"[object Arguments]"==Object.prototype.toString.call(T)}function d(T,k){if(!T||!k)return!1;if("[object RegExp]"==Object.prototype.toString.call(k))return k.test(T);try{if(T instanceof k)return!0}catch(L){}return!Error.isPrototypeOf(k)&&!0===k.call({},T)}function w(T,k,L,M){var O;if("function"!=typeof k)throw new TypeError('"block" argument must be a function');"string"==typeof L&&(M=L,L=null),O=function(E){var R;try{E()}catch(B){R=B}return R}(k),M=(L&&L.name?" ("+L.name+").":".")+(M?" "+M:"."),T&&!O&&g(O,L,"Missing expected exception"+M);var P="string"==typeof M,S=!T&&O&&!L;if((!T&&e.isError(O)&&P&&d(O,L)||S)&&g(O,L,"Got unwanted exception"+M),T&&O&&L&&!d(O,L)||!T&&O)throw O}s.AssertionError=function(T){this.name="AssertionError",this.actual=T.actual,this.expected=T.expected,this.operator=T.operator,T.message?(this.message=T.message,this.generatedMessage=!1):(this.message=c(f(this.actual),128)+" "+this.operator+" "+c(f(this.expected),128),this.generatedMessage=!0);var k=T.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var L=new Error;if(L.stack){var M=L.stack,O=l(k),P=M.indexOf("\n"+O);if(P>=0){var S=M.indexOf("\n",P+1);M=M.substring(S+1)}this.stack=M}}},e.inherits(s.AssertionError,Error),s.fail=g,s.ok=h,s.equal=function(T,k,L){T!=k&&g(T,k,L,"==",s.equal)},s.notEqual=function(T,k,L){T==k&&g(T,k,L,"!=",s.notEqual)},s.deepEqual=function(T,k,L){o(T,k,!1)||g(T,k,L,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(T,k,L){o(T,k,!0)||g(T,k,L,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function(T,k,L){o(T,k,!1)&&g(T,k,L,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=function T(k,L,M){o(k,L,!0)&&g(k,L,M,"notDeepStrictEqual",T)},s.strictEqual=function(T,k,L){T!==k&&g(T,k,L,"===",s.strictEqual)},s.notStrictEqual=function(T,k,L){T===k&&g(T,k,L,"!==",s.notStrictEqual)},s.throws=function(T,k,L){w(!0,T,k,L)},s.doesNotThrow=function(T,k,L){w(!1,T,k,L)},s.ifError=function(T){if(T)throw T},s.strict=m(function T(k,L){k||g(k,!0,L,"==",T)},s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var _=Object.keys||function(T){var k=[];for(var L in T)n.call(T,L)&&k.push(L);return k}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":247,"util/":78}],76:[function(y,$,ee){$.exports="function"==typeof Object.create?function(p,m){p.super_=m,p.prototype=Object.create(m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}})}:function(p,m){p.super_=m;var b=function(){};b.prototype=m.prototype,p.prototype=new b,p.prototype.constructor=p}},{}],77:[function(y,$,ee){$.exports=function(p){return p&&"object"==typeof p&&"function"==typeof p.copy&&"function"==typeof p.fill&&"function"==typeof p.readUInt8}},{}],78:[function(y,$,ee){(function(p,m){(function(){var b=/%[sdj%]/g;ee.format=function(P){if(!g(P)){for(var S=[],E=0;E<arguments.length;E++)S.push(n(arguments[E]));return S.join(" ")}E=1;for(var R=arguments,B=R.length,H=String(P).replace(b,function(Z){if("%%"===Z)return"%";if(E>=B)return Z;switch(Z){case"%s":return String(R[E++]);case"%d":return Number(R[E++]);case"%j":try{return JSON.stringify(R[E++])}catch(W){return"[Circular]"}default:return Z}}),V=R[E];E<B;V=R[++E])c(V)||!x(V)?H+=" "+V:H+=" "+n(V);return H},ee.deprecate=function(P,S){if(h(m.process))return function(){return ee.deprecate(P,S).apply(this,arguments)};if(!0===p.noDeprecation)return P;var E=!1;return function(){if(!E){if(p.throwDeprecation)throw new Error(S);p.traceDeprecation?console.trace(S):console.error(S),E=!0}return P.apply(this,arguments)}};var v,e={};function n(P,S){var E={seen:[],stylize:a};return arguments.length>=3&&(E.depth=arguments[2]),arguments.length>=4&&(E.colors=arguments[3]),l(S)?E.showHidden=S:S&&ee._extend(E,S),h(E.showHidden)&&(E.showHidden=!1),h(E.depth)&&(E.depth=2),h(E.colors)&&(E.colors=!1),h(E.customInspect)&&(E.customInspect=!0),E.colors&&(E.stylize=t),r(E,P,E.depth)}function t(P,S){var E=n.styles[S];return E?"\x1b["+n.colors[E][0]+"m"+P+"\x1b["+n.colors[E][1]+"m":P}function a(P,S){return P}function r(P,S,E){if(P.customInspect&&S&&_(S.inspect)&&S.inspect!==ee.inspect&&(!S.constructor||S.constructor.prototype!==S)){var R=S.inspect(E,P);return g(R)||(R=r(P,R,E)),R}var B=function(D,N){if(h(N))return D.stylize("undefined","undefined");if(g(N)){var U="'"+JSON.stringify(N).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return D.stylize(U,"string")}return f(N)?D.stylize(""+N,"number"):l(N)?D.stylize(""+N,"boolean"):c(N)?D.stylize("null","null"):void 0}(P,S);if(B)return B;var N,H=Object.keys(S),V=(N={},H.forEach(function(U,Q){N[U]=!0}),N);if(P.showHidden&&(H=Object.getOwnPropertyNames(S)),w(S)&&(H.indexOf("message")>=0||H.indexOf("description")>=0))return u(S);if(0===H.length){if(_(S))return P.stylize("[Function"+(S.name?": "+S.name:"")+"]","special");if(o(S))return P.stylize(RegExp.prototype.toString.call(S),"regexp");if(d(S))return P.stylize(Date.prototype.toString.call(S),"date");if(w(S))return u(S)}var W,G="",X=!1,te=["{","}"];return i(S)&&(X=!0,te=["[","]"]),_(S)&&(G=" [Function"+(S.name?": "+S.name:"")+"]"),o(S)&&(G=" "+RegExp.prototype.toString.call(S)),d(S)&&(G=" "+Date.prototype.toUTCString.call(S)),w(S)&&(G=" "+u(S)),0!==H.length||X&&0!=S.length?E<0?o(S)?P.stylize(RegExp.prototype.toString.call(S),"regexp"):P.stylize("[Object]","special"):(P.seen.push(S),W=X?function(D,N,U,Q,j){for(var J=[],K=0,re=N.length;K<re;++K)O(N,String(K))?J.push(s(D,N,U,Q,String(K),!0)):J.push("");return j.forEach(function(ne){ne.match(/^\d+$/)||J.push(s(D,N,U,Q,ne,!0))}),J}(P,S,E,V,H):H.map(function(D){return s(P,S,E,V,D,X)}),P.seen.pop(),function(D,N,U){return D.reduce(function(Q,j){return j.indexOf("\n"),Q+j.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?U[0]+(""===N?"":N+"\n ")+" "+D.join(",\n  ")+" "+U[1]:U[0]+N+" "+D.join(", ")+" "+U[1]}(W,G,te)):te[0]+G+te[1]}function u(P){return"["+Error.prototype.toString.call(P)+"]"}function s(P,S,E,R,B,H){var V,Z,W;if((W=Object.getOwnPropertyDescriptor(S,B)||{value:S[B]}).get?Z=P.stylize(W.set?"[Getter/Setter]":"[Getter]","special"):W.set&&(Z=P.stylize("[Setter]","special")),O(R,B)||(V="["+B+"]"),Z||(P.seen.indexOf(W.value)<0?(Z=c(E)?r(P,W.value,null):r(P,W.value,E-1)).indexOf("\n")>-1&&(Z=H?Z.split("\n").map(function(G){return"  "+G}).join("\n").substr(2):"\n"+Z.split("\n").map(function(G){return"   "+G}).join("\n")):Z=P.stylize("[Circular]","special")),h(V)){if(H&&B.match(/^\d+$/))return Z;(V=JSON.stringify(""+B)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(V=V.substr(1,V.length-2),V=P.stylize(V,"name")):(V=V.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),V=P.stylize(V,"string"))}return V+": "+Z}function i(P){return Array.isArray(P)}function l(P){return"boolean"==typeof P}function c(P){return null===P}function f(P){return"number"==typeof P}function g(P){return"string"==typeof P}function h(P){return void 0===P}function o(P){return x(P)&&"[object RegExp]"===T(P)}function x(P){return"object"==typeof P&&null!==P}function d(P){return x(P)&&"[object Date]"===T(P)}function w(P){return x(P)&&("[object Error]"===T(P)||P instanceof Error)}function _(P){return"function"==typeof P}function T(P){return Object.prototype.toString.call(P)}function k(P){return P<10?"0"+P.toString(10):P.toString(10)}ee.debuglog=function(P){if(h(v)&&(v=p.env.NODE_DEBUG||""),P=P.toUpperCase(),!e[P])if(new RegExp("\\b"+P+"\\b","i").test(v)){var S=p.pid;e[P]=function(){var E=ee.format.apply(ee,arguments);console.error("%s %d: %s",P,S,E)}}else e[P]=function(){};return e[P]},ee.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ee.isArray=i,ee.isBoolean=l,ee.isNull=c,ee.isNullOrUndefined=function(P){return null==P},ee.isNumber=f,ee.isString=g,ee.isSymbol=function(P){return"symbol"==typeof P},ee.isUndefined=h,ee.isRegExp=o,ee.isObject=x,ee.isDate=d,ee.isError=w,ee.isFunction=_,ee.isPrimitive=function(P){return null===P||"boolean"==typeof P||"number"==typeof P||"string"==typeof P||"symbol"==typeof P||void 0===P},ee.isBuffer=y("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(){var P=new Date,S=[k(P.getHours()),k(P.getMinutes()),k(P.getSeconds())].join(":");return[P.getDate(),L[P.getMonth()],S].join(" ")}function O(P,S){return Object.prototype.hasOwnProperty.call(P,S)}ee.log=function(){console.log("%s - %s",M(),ee.format.apply(ee,arguments))},ee.inherits=y("inherits"),ee._extend=function(P,S){if(!S||!x(S))return P;for(var E=Object.keys(S),R=E.length;R--;)P[E[R]]=S[E[R]];return P}}).call(this)}).call(this,y("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(y,$,ee){"use strict";ee.byteLength=function(r){var u=t(r),i=u[1];return 3*(u[0]+i)/4-i},ee.toByteArray=function(r){var u,s,d,i=t(r),l=i[0],c=i[1],f=new b(3*(l+(d=c))/4-d),g=0,h=c>0?l-4:l;for(s=0;s<h;s+=4)u=m[r.charCodeAt(s)]<<18|m[r.charCodeAt(s+1)]<<12|m[r.charCodeAt(s+2)]<<6|m[r.charCodeAt(s+3)],f[g++]=u>>16&255,f[g++]=u>>8&255,f[g++]=255&u;return 2===c&&(u=m[r.charCodeAt(s)]<<2|m[r.charCodeAt(s+1)]>>4,f[g++]=255&u),1===c&&(u=m[r.charCodeAt(s)]<<10|m[r.charCodeAt(s+1)]<<4|m[r.charCodeAt(s+2)]>>2,f[g++]=u>>8&255,f[g++]=255&u),f},ee.fromByteArray=function(r){for(var u,s=r.length,i=s%3,l=[],c=0,f=s-i;c<f;c+=16383)l.push(a(r,c,c+16383>f?f:c+16383));return 1===i?l.push(p[(u=r[s-1])>>2]+p[u<<4&63]+"=="):2===i&&l.push(p[(u=(r[s-2]<<8)+r[s-1])>>10]+p[u>>4&63]+p[u<<2&63]+"="),l.join("")};for(var p=[],m=[],b="undefined"!=typeof Uint8Array?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=v.length;e<n;++e)p[e]=v[e],m[v.charCodeAt(e)]=e;function t(r){var u=r.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=r.indexOf("=");return-1===s&&(s=u),[s,s===u?0:4-s%4]}function a(r,u,s){for(var l,c=[],f=u;f<s;f+=3)c.push(p[(l=(r[f]<<16&16711680)+(r[f+1]<<8&65280)+(255&r[f+2]))>>18&63]+p[l>>12&63]+p[l>>6&63]+p[63&l]);return c.join("")}m["-".charCodeAt(0)]=62,m["_".charCodeAt(0)]=63},{}],80:[function(y,$,ee){"use strict";function p(t,a,r,u,s){for(var i=s+1;u<=s;){var l=u+s>>>1,c=t[l];(void 0!==r?r(c,a):c-a)>=0?(i=l,s=l-1):u=l+1}return i}function m(t,a,r,u,s){for(var i=s+1;u<=s;){var l=u+s>>>1,c=t[l];(void 0!==r?r(c,a):c-a)>0?(i=l,s=l-1):u=l+1}return i}function b(t,a,r,u,s){for(var i=u-1;u<=s;){var l=u+s>>>1,c=t[l];(void 0!==r?r(c,a):c-a)<0?(i=l,u=l+1):s=l-1}return i}function v(t,a,r,u,s){for(var i=u-1;u<=s;){var l=u+s>>>1,c=t[l];(void 0!==r?r(c,a):c-a)<=0?(i=l,u=l+1):s=l-1}return i}function e(t,a,r,u,s){for(;u<=s;){var i=u+s>>>1,l=t[i],c=void 0!==r?r(l,a):l-a;if(0===c)return i;c<=0?u=i+1:s=i-1}return-1}function n(t,a,r,u,s,i){return"function"==typeof r?i(t,a,r,void 0===u?0:0|u,void 0===s?t.length-1:0|s):i(t,a,void 0,void 0===r?0:0|r,void 0===u?t.length-1:0|u)}$.exports={ge:function(t,a,r,u,s){return n(t,a,r,u,s,p)},gt:function(t,a,r,u,s){return n(t,a,r,u,s,m)},lt:function(t,a,r,u,s){return n(t,a,r,u,s,b)},le:function(t,a,r,u,s){return n(t,a,r,u,s,v)},eq:function(t,a,r,u,s){return n(t,a,r,u,s,e)}}},{}],81:[function(y,$,ee){"use strict";function p(b){var v=32;return(b&=-b)&&v--,65535&b&&(v-=16),16711935&b&&(v-=8),252645135&b&&(v-=4),858993459&b&&(v-=2),1431655765&b&&(v-=1),v}ee.INT_BITS=32,ee.INT_MAX=2147483647,ee.INT_MIN=-1<<31,ee.sign=function(b){return(b>0)-(b<0)},ee.abs=function(b){var v=b>>31;return(b^v)-v},ee.min=function(b,v){return v^(b^v)&-(b<v)},ee.max=function(b,v){return b^(b^v)&-(b<v)},ee.isPow2=function(b){return!(b&b-1||!b)},ee.log2=function(b){var v,e;return v=(b>65535)<<4,v|=e=((b>>>=v)>255)<<3,v|=e=((b>>>=e)>15)<<2,(v|=e=((b>>>=e)>3)<<1)|(b>>>=e)>>1},ee.log10=function(b){return b>=1e9?9:b>=1e8?8:b>=1e7?7:b>=1e6?6:b>=1e5?5:b>=1e4?4:b>=1e3?3:b>=100?2:b>=10?1:0},ee.popCount=function(b){return 16843009*((b=(858993459&(b-=b>>>1&1431655765))+(b>>>2&858993459))+(b>>>4)&252645135)>>>24},ee.countTrailingZeros=p,ee.nextPow2=function(b){return b+=0===b,--b,b|=b>>>1,b|=b>>>2,b|=b>>>4,1+((b|=b>>>8)|b>>>16)},ee.prevPow2=function(b){return b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,(b|=b>>>16)-(b>>>1)},ee.parity=function(b){return b^=b>>>16,b^=b>>>8,b^=b>>>4,27030>>>(b&=15)&1};var m=new Array(256);(function(b){for(var v=0;v<256;++v){var e=v,n=v,t=7;for(e>>>=1;e;e>>>=1)n<<=1,n|=1&e,--t;b[v]=n<<t&255}})(m),ee.reverse=function(b){return m[255&b]<<24|m[b>>>8&255]<<16|m[b>>>16&255]<<8|m[b>>>24&255]},ee.interleave2=function(b,v){return(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b&=65535)|b<<8))|b<<4))|b<<2))|b<<1))|(v=1431655765&((v=858993459&((v=252645135&((v=16711935&((v&=65535)|v<<8))|v<<4))|v<<2))|v<<1))<<1},ee.deinterleave2=function(b,v){return(b=65535&((b=16711935&((b=252645135&((b=858993459&((b=b>>>v&1431655765)|b>>>1))|b>>>2))|b>>>4))|b>>>16))<<16>>16},ee.interleave3=function(b,v,e){return b=1227133513&((b=3272356035&((b=251719695&((b=4278190335&((b&=1023)|b<<16))|b<<8))|b<<4))|b<<2),(b|=(v=1227133513&((v=3272356035&((v=251719695&((v=4278190335&((v&=1023)|v<<16))|v<<8))|v<<4))|v<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},ee.deinterleave3=function(b,v){return(b=1023&((b=4278190335&((b=251719695&((b=3272356035&((b=b>>>v&1227133513)|b>>>2))|b>>>4))|b>>>8))|b>>>16))<<22>>22},ee.nextCombination=function(b){var v=b|b-1;return v+1|(~v&-~v)-1>>>p(b)+1}},{}],82:[function(y,$,ee){"use strict";var p=y("clamp");$.exports=function(e,n){n||(n={});var t,a,r,u,s,i,c,g,h,o=null==n.cutoff?.25:n.cutoff,x=null==n.radius?8:n.radius,d=n.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!n.width||!n.height)throw Error("For raw data width and height should be provided by options");t=n.width,a=n.height,u=e,i=n.stride?n.stride:Math.floor(e.length/t/a)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(u=(c=e).getContext("2d").getImageData(0,0,t=c.width,a=c.height).data,i=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(u=e.getImageData(0,0,t=(c=e.canvas).width,a=c.height).data,i=4):window.ImageData&&e instanceof window.ImageData&&(t=e.width,a=e.height,u=e.data,i=4);if(r=Math.max(t,a),window.Uint8ClampedArray&&u instanceof window.Uint8ClampedArray||window.Uint8Array&&u instanceof window.Uint8Array)for(s=u,u=Array(t*a),g=0,h=s.length;g<h;g++)u[g]=s[g*i+d]/255;else if(1!==i)throw Error("Raw data can have only 1 value per pixel");var w=Array(t*a),_=Array(t*a),T=Array(r),k=Array(r),L=Array(r+1),M=Array(r);for(g=0,h=t*a;g<h;g++){var O=u[g];w[g]=1===O?0:0===O?m:Math.pow(Math.max(0,.5-O),2),_[g]=1===O?m:0===O?0:Math.pow(Math.max(0,O-.5),2)}b(w,t,a,T,k,M,L),b(_,t,a,T,k,M,L);var P=window.Float32Array?new Float32Array(t*a):new Array(t*a);for(g=0,h=t*a;g<h;g++)P[g]=p(1-((w[g]-_[g])/x+o),0,1);return P};var m=1e20;function b(e,n,t,a,r,u,s){for(var i=0;i<n;i++){for(var l=0;l<t;l++)a[l]=e[l*n+i];for(v(a,r,u,s,t),l=0;l<t;l++)e[l*n+i]=r[l]}for(l=0;l<t;l++){for(i=0;i<n;i++)a[i]=e[l*n+i];for(v(a,r,u,s,n),i=0;i<n;i++)e[l*n+i]=Math.sqrt(r[i])}}function v(e,n,t,a,r){t[0]=0,a[0]=-m,a[1]=+m;for(var u=1,s=0;u<r;u++){for(var i=(e[u]+u*u-(e[t[s]]+t[s]*t[s]))/(2*u-2*t[s]);i<=a[s];)s--,i=(e[u]+u*u-(e[t[s]]+t[s]*t[s]))/(2*u-2*t[s]);t[++s]=u,a[s]=i,a[s+1]=+m}for(u=0,s=0;u<r;u++){for(;a[s+1]<u;)s++;n[u]=(u-t[s])*(u-t[s])+e[t[s]]}}},{clamp:86}],83:[function(y,$,ee){},{}],84:[function(y,$,ee){"use strict";var p,m="object"==typeof Reflect?Reflect:null,b=m&&"function"==typeof m.apply?m.apply:function(f,g,h){return Function.prototype.apply.call(f,g,h)};p=m&&"function"==typeof m.ownKeys?m.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var v=Number.isNaN||function(f){return f!=f};function e(){e.init.call(this)}$.exports=e,$.exports.once=function(f,g){return new Promise(function(h,o){function x(){void 0!==d&&f.removeListener("error",d),h([].slice.call(arguments))}var d;"error"!==g&&(d=function(w){f.removeListener(g,x),o(w)},f.once("error",d)),f.once(g,x)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var n=10;function t(f){if("function"!=typeof f)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof f)}function a(f){return void 0===f._maxListeners?e.defaultMaxListeners:f._maxListeners}function r(f,g,h,o){var x,d,w;if(t(h),void 0===(d=f._events)?(d=f._events=Object.create(null),f._eventsCount=0):(void 0!==d.newListener&&(f.emit("newListener",g,h.listener?h.listener:h),d=f._events),w=d[g]),void 0===w)w=d[g]=h,++f._eventsCount;else if("function"==typeof w?w=d[g]=o?[h,w]:[w,h]:o?w.unshift(h):w.push(h),(x=a(f))>0&&w.length>x&&!w.warned){w.warned=!0;var T=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(g)+" listeners added. Use emitter.setMaxListeners() to increase limit");T.name="MaxListenersExceededWarning",T.emitter=f,T.type=g,T.count=w.length,console&&console.warn&&console.warn(T)}return f}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(f,g,h){var o={fired:!1,wrapFn:void 0,target:f,type:g,listener:h},x=u.bind(o);return x.listener=h,o.wrapFn=x,x}function i(f,g,h){var o=f._events;if(void 0===o)return[];var x=o[g];return void 0===x?[]:"function"==typeof x?h?[x.listener||x]:[x]:h?function(d){for(var w=new Array(d.length),_=0;_<w.length;++_)w[_]=d[_].listener||d[_];return w}(x):c(x,x.length)}function l(f){var g=this._events;if(void 0!==g){var h=g[f];if("function"==typeof h)return 1;if(void 0!==h)return h.length}return 0}function c(f,g){for(var h=new Array(g),o=0;o<g;++o)h[o]=f[o];return h}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(f){if("number"!=typeof f||f<0||v(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");n=f}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(f){if("number"!=typeof f||f<0||v(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+f+".");return this._maxListeners=f,this},e.prototype.getMaxListeners=function(){return a(this)},e.prototype.emit=function(f){for(var g=[],h=1;h<arguments.length;h++)g.push(arguments[h]);var o="error"===f,x=this._events;if(void 0!==x)o=o&&void 0===x.error;else if(!o)return!1;if(o){var d;if(g.length>0&&(d=g[0]),d instanceof Error)throw d;var w=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw w.context=d,w}var _=x[f];if(void 0===_)return!1;if("function"==typeof _)b(_,this,g);else{var T=_.length,k=c(_,T);for(h=0;h<T;++h)b(k[h],this,g)}return!0},e.prototype.on=e.prototype.addListener=function(f,g){return r(this,f,g,!1)},e.prototype.prependListener=function(f,g){return r(this,f,g,!0)},e.prototype.once=function(f,g){return t(g),this.on(f,s(this,f,g)),this},e.prototype.prependOnceListener=function(f,g){return t(g),this.prependListener(f,s(this,f,g)),this},e.prototype.off=e.prototype.removeListener=function(f,g){var h,o,x,d,w;if(t(g),void 0===(o=this._events))return this;if(void 0===(h=o[f]))return this;if(h===g||h.listener===g)0==--this._eventsCount?this._events=Object.create(null):(delete o[f],o.removeListener&&this.emit("removeListener",f,h.listener||g));else if("function"!=typeof h){for(x=-1,d=h.length-1;d>=0;d--)if(h[d]===g||h[d].listener===g){w=h[d].listener,x=d;break}if(x<0)return this;0===x?h.shift():function(_,T){for(;T+1<_.length;T++)_[T]=_[T+1];_.pop()}(h,x),1===h.length&&(o[f]=h[0]),void 0!==o.removeListener&&this.emit("removeListener",f,w||g)}return this},e.prototype.removeAllListeners=function(f){var g,h,o;if(void 0===(h=this._events))return this;if(void 0===h.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==h[f]&&(0==--this._eventsCount?this._events=Object.create(null):delete h[f]),this;if(0===arguments.length){var x,d=Object.keys(h);for(o=0;o<d.length;++o)"removeListener"!==(x=d[o])&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(g=h[f]))this.removeListener(f,g);else if(void 0!==g)for(o=g.length-1;o>=0;o--)this.removeListener(f,g[o]);return this},e.prototype.listeners=function(f){return i(this,f,!0)},e.prototype.rawListeners=function(f){return i(this,f,!1)},e.listenerCount=function(f,g){return"function"==typeof f.listenerCount?f.listenerCount(g):l.call(f,g)},e.prototype.listenerCount=l,e.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},{}],85:[function(y,$,ee){(function(p){(function(){"use strict";var m=y("base64-js"),b=y("ieee754");function v(D){if(D>2147483647)throw new RangeError('The value "'+D+'" is invalid for option "size"');var N=new Uint8Array(D);return N.__proto__=e.prototype,N}function e(D,N,U){if("number"==typeof D){if("string"==typeof N)throw new TypeError('The "string" argument must be of type string. Received type number');return a(D)}return n(D,N,U)}function n(D,N,U){if("string"==typeof D)return function(J,K){if("string"==typeof K&&""!==K||(K="utf8"),!e.isEncoding(K))throw new TypeError("Unknown encoding: "+K);var re=0|s(J,K),ne=v(re),se=ne.write(J,K);return se!==re&&(ne=ne.slice(0,se)),ne}(D,N);if(ArrayBuffer.isView(D))return r(D);if(null==D)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof D);if(X(D,ArrayBuffer)||D&&X(D.buffer,ArrayBuffer))return function(J,K,re){if(K<0||J.byteLength<K)throw new RangeError('"offset" is outside of buffer bounds');if(J.byteLength<K+(re||0))throw new RangeError('"length" is outside of buffer bounds');var ne;return(ne=void 0===K&&void 0===re?new Uint8Array(J):void 0===re?new Uint8Array(J,K):new Uint8Array(J,K,re)).__proto__=e.prototype,ne}(D,N,U);if("number"==typeof D)throw new TypeError('The "value" argument must not be of type number. Received type number');var Q=D.valueOf&&D.valueOf();if(null!=Q&&Q!==D)return e.from(Q,N,U);var j=function(J){if(e.isBuffer(J)){var K=0|u(J.length),re=v(K);return 0===re.length||J.copy(re,0,0,K),re}return void 0!==J.length?"number"!=typeof J.length||te(J.length)?v(0):r(J):"Buffer"===J.type&&Array.isArray(J.data)?r(J.data):void 0}(D);if(j)return j;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof D[Symbol.toPrimitive])return e.from(D[Symbol.toPrimitive]("string"),N,U);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof D)}function t(D){if("number"!=typeof D)throw new TypeError('"size" argument must be of type number');if(D<0)throw new RangeError('The value "'+D+'" is invalid for option "size"')}function a(D){return t(D),v(D<0?0:0|u(D))}function r(D){for(var N=D.length<0?0:0|u(D.length),U=v(N),Q=0;Q<N;Q+=1)U[Q]=255&D[Q];return U}function u(D){if(D>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|D}function s(D,N){if(e.isBuffer(D))return D.length;if(ArrayBuffer.isView(D)||X(D,ArrayBuffer))return D.byteLength;if("string"!=typeof D)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof D);var U=D.length,Q=arguments.length>2&&!0===arguments[2];if(!Q&&0===U)return 0;for(var j=!1;;)switch(N){case"ascii":case"latin1":case"binary":return U;case"utf8":case"utf-8":return Z(D).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*U;case"hex":return U>>>1;case"base64":return W(D).length;default:if(j)return Q?-1:Z(D).length;N=(""+N).toLowerCase(),j=!0}}function i(D,N,U){var Q=!1;if((void 0===N||N<0)&&(N=0),N>this.length||((void 0===U||U>this.length)&&(U=this.length),U<=0)||(U>>>=0)<=(N>>>=0))return"";for(D||(D="utf8");;)switch(D){case"hex":return M(this,N,U);case"utf8":case"utf-8":return T(this,N,U);case"ascii":return k(this,N,U);case"latin1":case"binary":return L(this,N,U);case"base64":return _(this,N,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,N,U);default:if(Q)throw new TypeError("Unknown encoding: "+D);D=(D+"").toLowerCase(),Q=!0}}function l(D,N,U){var Q=D[N];D[N]=D[U],D[U]=Q}function c(D,N,U,Q,j){if(0===D.length)return-1;if("string"==typeof U?(Q=U,U=0):U>2147483647?U=2147483647:U<-2147483648&&(U=-2147483648),te(U=+U)&&(U=j?0:D.length-1),U<0&&(U=D.length+U),U>=D.length){if(j)return-1;U=D.length-1}else if(U<0){if(!j)return-1;U=0}if("string"==typeof N&&(N=e.from(N,Q)),e.isBuffer(N))return 0===N.length?-1:f(D,N,U,Q,j);if("number"==typeof N)return N&=255,"function"==typeof Uint8Array.prototype.indexOf?j?Uint8Array.prototype.indexOf.call(D,N,U):Uint8Array.prototype.lastIndexOf.call(D,N,U):f(D,[N],U,Q,j);throw new TypeError("val must be string, number or Buffer")}function f(D,N,U,Q,j){var J,K=1,re=D.length,ne=N.length;if(void 0!==Q&&("ucs2"===(Q=String(Q).toLowerCase())||"ucs-2"===Q||"utf16le"===Q||"utf-16le"===Q)){if(D.length<2||N.length<2)return-1;K=2,re/=2,ne/=2,U/=2}function se(ge,xe){return 1===K?ge[xe]:ge.readUInt16BE(xe*K)}if(j){var oe=-1;for(J=U;J<re;J++)if(se(D,J)===se(N,-1===oe?0:J-oe)){if(-1===oe&&(oe=J),J-oe+1===ne)return oe*K}else-1!==oe&&(J-=J-oe),oe=-1}else for(U+ne>re&&(U=re-ne),J=U;J>=0;J--){for(var pe=!0,ce=0;ce<ne;ce++)if(se(D,J+ce)!==se(N,ce)){pe=!1;break}if(pe)return J}return-1}function g(D,N,U,Q){U=Number(U)||0;var j=D.length-U;Q?(Q=Number(Q))>j&&(Q=j):Q=j;var J=N.length;Q>J/2&&(Q=J/2);for(var K=0;K<Q;++K){var re=parseInt(N.substr(2*K,2),16);if(te(re))return K;D[U+K]=re}return K}function h(D,N,U,Q){return G(Z(N,D.length-U),D,U,Q)}function o(D,N,U,Q){return G(function(j){for(var J=[],K=0;K<j.length;++K)J.push(255&j.charCodeAt(K));return J}(N),D,U,Q)}function x(D,N,U,Q){return o(D,N,U,Q)}function d(D,N,U,Q){return G(W(N),D,U,Q)}function w(D,N,U,Q){return G(function(j,J){for(var K,re,se=[],oe=0;oe<j.length&&!((J-=2)<0);++oe)re=(K=j.charCodeAt(oe))>>8,se.push(K%256),se.push(re);return se}(N,D.length-U),D,U,Q)}function _(D,N,U){return m.fromByteArray(0===N&&U===D.length?D:D.slice(N,U))}function T(D,N,U){U=Math.min(D.length,U);for(var Q=[],j=N;j<U;){var J,K,re,ne,se=D[j],oe=null,pe=se>239?4:se>223?3:se>191?2:1;if(j+pe<=U)switch(pe){case 1:se<128&&(oe=se);break;case 2:128==(192&(J=D[j+1]))&&(ne=(31&se)<<6|63&J)>127&&(oe=ne);break;case 3:K=D[j+2],128==(192&(J=D[j+1]))&&128==(192&K)&&(ne=(15&se)<<12|(63&J)<<6|63&K)>2047&&(ne<55296||ne>57343)&&(oe=ne);break;case 4:K=D[j+2],re=D[j+3],128==(192&(J=D[j+1]))&&128==(192&K)&&128==(192&re)&&(ne=(15&se)<<18|(63&J)<<12|(63&K)<<6|63&re)>65535&&ne<1114112&&(oe=ne)}null===oe?(oe=65533,pe=1):oe>65535&&(Q.push((oe-=65536)>>>10&1023|55296),oe=56320|1023&oe),Q.push(oe),j+=pe}return function(ce){var ge=ce.length;if(ge<=4096)return String.fromCharCode.apply(String,ce);for(var xe="",we=0;we<ge;)xe+=String.fromCharCode.apply(String,ce.slice(we,we+=4096));return xe}(Q)}function k(D,N,U){var Q="";U=Math.min(D.length,U);for(var j=N;j<U;++j)Q+=String.fromCharCode(127&D[j]);return Q}function L(D,N,U){var Q="";U=Math.min(D.length,U);for(var j=N;j<U;++j)Q+=String.fromCharCode(D[j]);return Q}function M(D,N,U){var Q=D.length;(!N||N<0)&&(N=0),(!U||U<0||U>Q)&&(U=Q);for(var j="",J=N;J<U;++J)j+=V(D[J]);return j}function O(D,N,U){for(var Q=D.slice(N,U),j="",J=0;J<Q.length;J+=2)j+=String.fromCharCode(Q[J]+256*Q[J+1]);return j}function P(D,N,U){if(D%1!=0||D<0)throw new RangeError("offset is not uint");if(D+N>U)throw new RangeError("Trying to access beyond buffer length")}function S(D,N,U,Q,j,J){if(!e.isBuffer(D))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>j||N<J)throw new RangeError('"value" argument is out of bounds');if(U+Q>D.length)throw new RangeError("Index out of range")}function E(D,N,U,Q,j,J){if(U+Q>D.length)throw new RangeError("Index out of range");if(U<0)throw new RangeError("Index out of range")}function R(D,N,U,Q,j){return N=+N,U>>>=0,j||E(D,0,U,4),b.write(D,N,U,Q,23,4),U+4}function B(D,N,U,Q,j){return N=+N,U>>>=0,j||E(D,0,U,8),b.write(D,N,U,Q,52,8),U+8}ee.Buffer=e,ee.SlowBuffer=function(D){return+D!=D&&(D=0),e.alloc(+D)},ee.INSPECT_MAX_BYTES=50,ee.kMaxLength=2147483647,(e.TYPED_ARRAY_SUPPORT=function(){try{var D=new Uint8Array(1);return D.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===D.foo()}catch(N){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(D,N,U){return n(D,N,U)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(D,N,U){return j=N,J=U,t(Q=D),Q<=0?v(Q):void 0!==j?"string"==typeof J?v(Q).fill(j,J):v(Q).fill(j):v(Q);var Q,j,J},e.allocUnsafe=function(D){return a(D)},e.allocUnsafeSlow=function(D){return a(D)},e.isBuffer=function(D){return null!=D&&!0===D._isBuffer&&D!==e.prototype},e.compare=function(D,N){if(X(D,Uint8Array)&&(D=e.from(D,D.offset,D.byteLength)),X(N,Uint8Array)&&(N=e.from(N,N.offset,N.byteLength)),!e.isBuffer(D)||!e.isBuffer(N))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===N)return 0;for(var U=D.length,Q=N.length,j=0,J=Math.min(U,Q);j<J;++j)if(D[j]!==N[j]){U=D[j],Q=N[j];break}return U<Q?-1:Q<U?1:0},e.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(D,N){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(0===D.length)return e.alloc(0);var U;if(void 0===N)for(N=0,U=0;U<D.length;++U)N+=D[U].length;var Q=e.allocUnsafe(N),j=0;for(U=0;U<D.length;++U){var J=D[U];if(X(J,Uint8Array)&&(J=e.from(J)),!e.isBuffer(J))throw new TypeError('"list" argument must be an Array of Buffers');J.copy(Q,j),j+=J.length}return Q},e.byteLength=s,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var D=this.length;if(D%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var N=0;N<D;N+=2)l(this,N,N+1);return this},e.prototype.swap32=function(){var D=this.length;if(D%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var N=0;N<D;N+=4)l(this,N,N+3),l(this,N+1,N+2);return this},e.prototype.swap64=function(){var D=this.length;if(D%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var N=0;N<D;N+=8)l(this,N,N+7),l(this,N+1,N+6),l(this,N+2,N+5),l(this,N+3,N+4);return this},e.prototype.toLocaleString=e.prototype.toString=function(){var D=this.length;return 0===D?"":0===arguments.length?T(this,0,D):i.apply(this,arguments)},e.prototype.equals=function(D){if(!e.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D||0===e.compare(this,D)},e.prototype.inspect=function(){var D="",N=ee.INSPECT_MAX_BYTES;return D=this.toString("hex",0,N).replace(/(.{2})/g,"$1 ").trim(),this.length>N&&(D+=" ... "),"<Buffer "+D+">"},e.prototype.compare=function(D,N,U,Q,j){if(X(D,Uint8Array)&&(D=e.from(D,D.offset,D.byteLength)),!e.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(void 0===N&&(N=0),void 0===U&&(U=D?D.length:0),void 0===Q&&(Q=0),void 0===j&&(j=this.length),N<0||U>D.length||Q<0||j>this.length)throw new RangeError("out of range index");if(Q>=j&&N>=U)return 0;if(Q>=j)return-1;if(N>=U)return 1;if(this===D)return 0;for(var J=(j>>>=0)-(Q>>>=0),K=(U>>>=0)-(N>>>=0),re=Math.min(J,K),ne=this.slice(Q,j),se=D.slice(N,U),oe=0;oe<re;++oe)if(ne[oe]!==se[oe]){J=ne[oe],K=se[oe];break}return J<K?-1:K<J?1:0},e.prototype.includes=function(D,N,U){return-1!==this.indexOf(D,N,U)},e.prototype.indexOf=function(D,N,U){return c(this,D,N,U,!0)},e.prototype.lastIndexOf=function(D,N,U){return c(this,D,N,U,!1)},e.prototype.write=function(D,N,U,Q){if(void 0===N)Q="utf8",U=this.length,N=0;else if(void 0===U&&"string"==typeof N)Q=N,U=this.length,N=0;else{if(!isFinite(N))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");N>>>=0,isFinite(U)?(U>>>=0,void 0===Q&&(Q="utf8")):(Q=U,U=void 0)}var j=this.length-N;if((void 0===U||U>j)&&(U=j),D.length>0&&(U<0||N<0)||N>this.length)throw new RangeError("Attempt to write outside buffer bounds");Q||(Q="utf8");for(var J=!1;;)switch(Q){case"hex":return g(this,D,N,U);case"utf8":case"utf-8":return h(this,D,N,U);case"ascii":return o(this,D,N,U);case"latin1":case"binary":return x(this,D,N,U);case"base64":return d(this,D,N,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,D,N,U);default:if(J)throw new TypeError("Unknown encoding: "+Q);Q=(""+Q).toLowerCase(),J=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(D,N){var U=this.length;(D=~~D)<0?(D+=U)<0&&(D=0):D>U&&(D=U),(N=void 0===N?U:~~N)<0?(N+=U)<0&&(N=0):N>U&&(N=U),N<D&&(N=D);var Q=this.subarray(D,N);return Q.__proto__=e.prototype,Q},e.prototype.readUIntLE=function(D,N,U){D>>>=0,N>>>=0,U||P(D,N,this.length);for(var Q=this[D],j=1,J=0;++J<N&&(j*=256);)Q+=this[D+J]*j;return Q},e.prototype.readUIntBE=function(D,N,U){D>>>=0,N>>>=0,U||P(D,N,this.length);for(var Q=this[D+--N],j=1;N>0&&(j*=256);)Q+=this[D+--N]*j;return Q},e.prototype.readUInt8=function(D,N){return D>>>=0,N||P(D,1,this.length),this[D]},e.prototype.readUInt16LE=function(D,N){return D>>>=0,N||P(D,2,this.length),this[D]|this[D+1]<<8},e.prototype.readUInt16BE=function(D,N){return D>>>=0,N||P(D,2,this.length),this[D]<<8|this[D+1]},e.prototype.readUInt32LE=function(D,N){return D>>>=0,N||P(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+16777216*this[D+3]},e.prototype.readUInt32BE=function(D,N){return D>>>=0,N||P(D,4,this.length),16777216*this[D]+(this[D+1]<<16|this[D+2]<<8|this[D+3])},e.prototype.readIntLE=function(D,N,U){D>>>=0,N>>>=0,U||P(D,N,this.length);for(var Q=this[D],j=1,J=0;++J<N&&(j*=256);)Q+=this[D+J]*j;return Q>=(j*=128)&&(Q-=Math.pow(2,8*N)),Q},e.prototype.readIntBE=function(D,N,U){D>>>=0,N>>>=0,U||P(D,N,this.length);for(var Q=N,j=1,J=this[D+--Q];Q>0&&(j*=256);)J+=this[D+--Q]*j;return J>=(j*=128)&&(J-=Math.pow(2,8*N)),J},e.prototype.readInt8=function(D,N){return D>>>=0,N||P(D,1,this.length),128&this[D]?-1*(255-this[D]+1):this[D]},e.prototype.readInt16LE=function(D,N){D>>>=0,N||P(D,2,this.length);var U=this[D]|this[D+1]<<8;return 32768&U?4294901760|U:U},e.prototype.readInt16BE=function(D,N){D>>>=0,N||P(D,2,this.length);var U=this[D+1]|this[D]<<8;return 32768&U?4294901760|U:U},e.prototype.readInt32LE=function(D,N){return D>>>=0,N||P(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},e.prototype.readInt32BE=function(D,N){return D>>>=0,N||P(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},e.prototype.readFloatLE=function(D,N){return D>>>=0,N||P(D,4,this.length),b.read(this,D,!0,23,4)},e.prototype.readFloatBE=function(D,N){return D>>>=0,N||P(D,4,this.length),b.read(this,D,!1,23,4)},e.prototype.readDoubleLE=function(D,N){return D>>>=0,N||P(D,8,this.length),b.read(this,D,!0,52,8)},e.prototype.readDoubleBE=function(D,N){return D>>>=0,N||P(D,8,this.length),b.read(this,D,!1,52,8)},e.prototype.writeUIntLE=function(D,N,U,Q){D=+D,N>>>=0,U>>>=0,Q||S(this,D,N,U,Math.pow(2,8*U)-1,0);var j=1,J=0;for(this[N]=255&D;++J<U&&(j*=256);)this[N+J]=D/j&255;return N+U},e.prototype.writeUIntBE=function(D,N,U,Q){D=+D,N>>>=0,U>>>=0,Q||S(this,D,N,U,Math.pow(2,8*U)-1,0);var j=U-1,J=1;for(this[N+j]=255&D;--j>=0&&(J*=256);)this[N+j]=D/J&255;return N+U},e.prototype.writeUInt8=function(D,N,U){return D=+D,N>>>=0,U||S(this,D,N,1,255,0),this[N]=255&D,N+1},e.prototype.writeUInt16LE=function(D,N,U){return D=+D,N>>>=0,U||S(this,D,N,2,65535,0),this[N]=255&D,this[N+1]=D>>>8,N+2},e.prototype.writeUInt16BE=function(D,N,U){return D=+D,N>>>=0,U||S(this,D,N,2,65535,0),this[N]=D>>>8,this[N+1]=255&D,N+2},e.prototype.writeUInt32LE=function(D,N,U){return D=+D,N>>>=0,U||S(this,D,N,4,4294967295,0),this[N+3]=D>>>24,this[N+2]=D>>>16,this[N+1]=D>>>8,this[N]=255&D,N+4},e.prototype.writeUInt32BE=function(D,N,U){return D=+D,N>>>=0,U||S(this,D,N,4,4294967295,0),this[N]=D>>>24,this[N+1]=D>>>16,this[N+2]=D>>>8,this[N+3]=255&D,N+4},e.prototype.writeIntLE=function(D,N,U,Q){if(D=+D,N>>>=0,!Q){var j=Math.pow(2,8*U-1);S(this,D,N,U,j-1,-j)}var J=0,K=1,re=0;for(this[N]=255&D;++J<U&&(K*=256);)D<0&&0===re&&0!==this[N+J-1]&&(re=1),this[N+J]=(D/K>>0)-re&255;return N+U},e.prototype.writeIntBE=function(D,N,U,Q){if(D=+D,N>>>=0,!Q){var j=Math.pow(2,8*U-1);S(this,D,N,U,j-1,-j)}var J=U-1,K=1,re=0;for(this[N+J]=255&D;--J>=0&&(K*=256);)D<0&&0===re&&0!==this[N+J+1]&&(re=1),this[N+J]=(D/K>>0)-re&255;return N+U},e.prototype.writeInt8=function(D,N,U){return D=+D,N>>>=0,U||S(this,D,N,1,127,-128),D<0&&(D=255+D+1),this[N]=255&D,N+1},e.prototype.writeInt16LE=function(D,N,U){return D=+D,N>>>=0,U||S(this,D,N,2,32767,-32768),this[N]=255&D,this[N+1]=D>>>8,N+2},e.prototype.writeInt16BE=function(D,N,U){return D=+D,N>>>=0,U||S(this,D,N,2,32767,-32768),this[N]=D>>>8,this[N+1]=255&D,N+2},e.prototype.writeInt32LE=function(D,N,U){return D=+D,N>>>=0,U||S(this,D,N,4,2147483647,-2147483648),this[N]=255&D,this[N+1]=D>>>8,this[N+2]=D>>>16,this[N+3]=D>>>24,N+4},e.prototype.writeInt32BE=function(D,N,U){return D=+D,N>>>=0,U||S(this,D,N,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),this[N]=D>>>24,this[N+1]=D>>>16,this[N+2]=D>>>8,this[N+3]=255&D,N+4},e.prototype.writeFloatLE=function(D,N,U){return R(this,D,N,!0,U)},e.prototype.writeFloatBE=function(D,N,U){return R(this,D,N,!1,U)},e.prototype.writeDoubleLE=function(D,N,U){return B(this,D,N,!0,U)},e.prototype.writeDoubleBE=function(D,N,U){return B(this,D,N,!1,U)},e.prototype.copy=function(D,N,U,Q){if(!e.isBuffer(D))throw new TypeError("argument should be a Buffer");if(U||(U=0),Q||0===Q||(Q=this.length),N>=D.length&&(N=D.length),N||(N=0),Q>0&&Q<U&&(Q=U),Q===U||0===D.length||0===this.length)return 0;if(N<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(Q<0)throw new RangeError("sourceEnd out of bounds");Q>this.length&&(Q=this.length),D.length-N<Q-U&&(Q=D.length-N+U);var j=Q-U;if(this===D&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(N,U,Q);else if(this===D&&U<N&&N<Q)for(var J=j-1;J>=0;--J)D[J+N]=this[J+U];else Uint8Array.prototype.set.call(D,this.subarray(U,Q),N);return j},e.prototype.fill=function(D,N,U,Q){if("string"==typeof D){if("string"==typeof N?(Q=N,N=0,U=this.length):"string"==typeof U&&(Q=U,U=this.length),void 0!==Q&&"string"!=typeof Q)throw new TypeError("encoding must be a string");if("string"==typeof Q&&!e.isEncoding(Q))throw new TypeError("Unknown encoding: "+Q);if(1===D.length){var j=D.charCodeAt(0);("utf8"===Q&&j<128||"latin1"===Q)&&(D=j)}}else"number"==typeof D&&(D&=255);if(N<0||this.length<N||this.length<U)throw new RangeError("Out of range index");if(U<=N)return this;var J;if(N>>>=0,U=void 0===U?this.length:U>>>0,D||(D=0),"number"==typeof D)for(J=N;J<U;++J)this[J]=D;else{var K=e.isBuffer(D)?D:e.from(D,Q),re=K.length;if(0===re)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(J=0;J<U-N;++J)this[J+N]=K[J%re]}return this};var H=/[^+/0-9A-Za-z-_]/g;function V(D){return D<16?"0"+D.toString(16):D.toString(16)}function Z(D,N){var U;N=N||1/0;for(var Q=D.length,j=null,J=[],K=0;K<Q;++K){if((U=D.charCodeAt(K))>55295&&U<57344){if(!j){if(U>56319){(N-=3)>-1&&J.push(239,191,189);continue}if(K+1===Q){(N-=3)>-1&&J.push(239,191,189);continue}j=U;continue}if(U<56320){(N-=3)>-1&&J.push(239,191,189),j=U;continue}U=65536+(j-55296<<10|U-56320)}else j&&(N-=3)>-1&&J.push(239,191,189);if(j=null,U<128){if((N-=1)<0)break;J.push(U)}else if(U<2048){if((N-=2)<0)break;J.push(U>>6|192,63&U|128)}else if(U<65536){if((N-=3)<0)break;J.push(U>>12|224,U>>6&63|128,63&U|128)}else{if(!(U<1114112))throw new Error("Invalid code point");if((N-=4)<0)break;J.push(U>>18|240,U>>12&63|128,U>>6&63|128,63&U|128)}}return J}function W(D){return m.toByteArray(function(N){if((N=(N=N.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;N.length%4!=0;)N+="=";return N}(D))}function G(D,N,U,Q){for(var j=0;j<Q&&!(j+U>=N.length||j>=D.length);++j)N[j+U]=D[j];return j}function X(D,N){return D instanceof N||null!=D&&null!=D.constructor&&null!=D.constructor.name&&D.constructor.name===N.name}function te(D){return D!=D}}).call(this)}).call(this,y("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(y,$,ee){$.exports=function(p,m,b){return m<b?p<m?m:p>b?b:p:p<b?b:p>m?m:p}},{}],87:[function(y,$,ee){"use strict";var p=y("clamp");function m(b,v){null==v&&(v=!0);var e=b[0],n=b[1],t=b[2],a=b[3];return null==a&&(a=v?1:255),v&&(e*=255,n*=255,t*=255,a*=255),16777216*(e=255&p(e,0,255))+((n=255&p(n,0,255))<<16)+((t=255&p(t,0,255))<<8)+(255&p(a,0,255))}$.exports=m,$.exports.to=m,$.exports.from=function(b,v){var e=(b=+b)>>>24,n=(16711680&b)>>>16,t=(65280&b)>>>8,a=255&b;return!1===v?[e,n,t,a]:[e/255,n/255,t/255,a/255]}},{clamp:86}],88:[function(y,$,ee){"use strict";$.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(y,$,ee){"use strict";var p=y("color-rgba"),m=y("clamp"),b=y("dtype");$.exports=function(v,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var a,n=new(b(e))(4),t="uint8"!==e&&"uint8_clamped"!==e;return v.length&&"string"!=typeof v||((v=p(v))[0]/=255,v[1]/=255,v[2]/=255),(a=v)instanceof Uint8Array||a instanceof Uint8ClampedArray||Array.isArray(a)&&(a[0]>1||0===a[0])&&(a[1]>1||0===a[1])&&(a[2]>1||0===a[2])&&(!a[3]||a[3]>1)?(n[0]=v[0],n[1]=v[1],n[2]=v[2],n[3]=null!=v[3]?v[3]:255,t&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(t?(n[0]=v[0],n[1]=v[1],n[2]=v[2],n[3]=null!=v[3]?v[3]:1):(n[0]=m(Math.floor(255*v[0]),0,255),n[1]=m(Math.floor(255*v[1]),0,255),n[2]=m(Math.floor(255*v[2]),0,255),n[3]=null==v[3]?255:m(Math.floor(255*v[3]),0,255)),n)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(y,$,ee){(function(p){(function(){"use strict";var m=y("color-name"),b=y("is-plain-obj"),v=y("defined");$.exports=function(n){var t,a,r=[],u=1;if("string"==typeof n)if(m[n])r=m[n].slice(),a="rgb";else if("transparent"===n)u=0,a="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var s=(c=n.slice(1)).length;u=1,s<=4?(r=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],4===s&&(u=parseInt(c[3]+c[3],16)/255)):(r=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],8===s&&(u=parseInt(c[6]+c[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),a="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var i=t[1],l="rgb"===i,c=i.replace(/a$/,"");a=c,s="cmyk"===c?4:"gray"===c?1:3,r=t[2].trim().split(/\s*,\s*/).map(function(g,h){if(/%$/.test(g))return h===s?parseFloat(g)/100:"rgb"===c?255*parseFloat(g)/100:parseFloat(g);if("h"===c[h]){if(/deg$/.test(g))return parseFloat(g);if(void 0!==e[g])return e[g]}return parseFloat(g)}),i===c&&r.push(1),u=l||void 0===r[s]?1:r[s],r=r.slice(0,s)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(r=n.match(/([0-9]+)/g).map(function(g){return parseFloat(g)}),a=n.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(n))if(b(n)){var f=v(n.r,n.red,n.R,null);null!==f?(a="rgb",r=[f,v(n.g,n.green,n.G),v(n.b,n.blue,n.B)]):(a="hsl",r=[v(n.h,n.hue,n.H),v(n.s,n.saturation,n.S),v(n.l,n.lightness,n.L,n.b,n.brightness)]),u=v(n.a,n.alpha,n.opacity,1),null!=n.opacity&&(u/=100)}else(Array.isArray(n)||p.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(n))&&(r=[n[0],n[1],n[2]],a="rgb",u=4===n.length?n[3]:1);else a="rgb",r=[n>>>16,(65280&n)>>>8,255&n];return{space:a,values:r,alpha:u}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(y,$,ee){"use strict";var p=y("color-parse"),m=y("color-space/hsl"),b=y("clamp");$.exports=function(v){var e,n=p(v);return n.space?((e=Array(3))[0]=b(n.values[0],0,255),e[1]=b(n.values[1],0,255),e[2]=b(n.values[2],0,255),"h"===n.space[0]&&(e=m.rgb(e)),e.push(b(n.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(y,$,ee){"use strict";var p=y("./rgb");$.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(m){var b,v,e,n,t,a=m[0]/360,r=m[1]/100,u=m[2]/100;if(0===r)return[t=255*u,t,t];b=2*u-(v=u<.5?u*(1+r):u+r-u*r),n=[0,0,0];for(var s=0;s<3;s++)(e=a+1/3*-(s-1))<0?e++:e>1&&e--,n[s]=255*(t=6*e<1?b+6*(v-b)*e:2*e<1?v:3*e<2?b+(v-b)*(2/3-e)*6:b);return n}},p.hsl=function(m){var b,v,e=m[0]/255,n=m[1]/255,t=m[2]/255,a=Math.min(e,n,t),r=Math.max(e,n,t),u=r-a;return r===a?b=0:e===r?b=(n-t)/u:n===r?b=2+(t-e)/u:t===r&&(b=4+(e-n)/u),(b=Math.min(60*b,360))<0&&(b+=360),v=(a+r)/2,[b,100*(r===a?0:v<=.5?u/(r+a):u/(2-r-a)),100*v]}},{"./rgb":93}],93:[function(y,$,ee){"use strict";$.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(y,$,ee){$.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(y,$,ee){$.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(y,$,ee){$.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(y,$,ee){$.exports=["normal","italic","oblique"]},{}],98:[function(y,$,ee){$.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(y,$,ee){"use strict";$.exports={parse:y("./parse"),stringify:y("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(y,$,ee){"use strict";var p=y("css-font-size-keywords");$.exports={isSize:function(m){return/^[\d\.]/.test(m)||-1!==m.indexOf("/")||-1!==p.indexOf(m)}}},{"css-font-size-keywords":95}],101:[function(y,$,ee){"use strict";var p=y("unquote"),m=y("css-global-keywords"),b=y("css-system-font-keywords"),v=y("css-font-weight-keywords"),e=y("css-font-style-keywords"),n=y("css-font-stretch-keywords"),t=y("string-split-by"),a=y("./lib/util").isSize;$.exports=u;var r=u.cache={};function u(i){if("string"!=typeof i)throw new Error("Font argument must be a string.");if(r[i])return r[i];if(""===i)throw new Error("Cannot parse an empty string.");if(-1!==b.indexOf(i))return r[i]={system:i};for(var l,c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},f=t(i,/\s+/);l=f.shift();){if(-1!==m.indexOf(l))return["style","variant","weight","stretch"].forEach(function(h){c[h]=l}),r[i]=c;if(-1===e.indexOf(l))if("normal"!==l&&"small-caps"!==l)if(-1===n.indexOf(l)){if(-1===v.indexOf(l)){if(a(l)){var g=t(l,"/");if(c.size=g[0],null!=g[1]?c.lineHeight=s(g[1]):"/"===f[0]&&(f.shift(),c.lineHeight=s(f.shift())),!f.length)throw new Error("Missing required font-family.");return c.family=t(f.join(" "),/\s*,\s*/).map(p),r[i]=c}throw new Error("Unknown or unsupported font token: "+l)}c.weight=l}else c.stretch=l;else c.variant=l;else c.style=l}throw new Error("Missing required font-size.")}function s(i){var l=parseFloat(i);return l.toString()===i?l:i}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(y,$,ee){"use strict";var p=y("pick-by-alias"),m=y("./lib/util").isSize,b=l(y("css-global-keywords")),v=l(y("css-system-font-keywords")),e=l(y("css-font-weight-keywords")),n=l(y("css-font-style-keywords")),t=l(y("css-font-stretch-keywords")),a={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},s="serif";function i(c,f){if(c&&!f[c]&&!b[c])throw Error("Unknown keyword `"+c+"`");return c}function l(c){for(var f={},g=0;g<c.length;g++)f[c[g]]=1;return f}$.exports=function(c){if((c=p(c,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return c.system&&i(c.system,v),c.system;if(i(c.style,n),i(c.variant,a),i(c.weight,e),i(c.stretch,t),null==c.size&&(c.size="1rem"),"number"==typeof c.size&&(c.size+="px"),!m)throw Error("Bad size value `"+c.size+"`");c.family||(c.family=s),Array.isArray(c.family)&&(c.family.length||(c.family=[s]),c.family=c.family.map(function(g){return r[g]?g:'"'+g+'"'}).join(", "));var f=[];return f.push(c.style),c.variant!==c.style&&f.push(c.variant),c.weight!==c.variant&&c.weight!==c.style&&f.push(c.weight),c.stretch!==c.weight&&c.stretch!==c.variant&&c.stretch!==c.style&&f.push(c.stretch),f.push(c.size+(null==c.lineHeight||"normal"===c.lineHeight||c.lineHeight+""=="1"?"":"/"+c.lineHeight)),f.push(c.family),f.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(y,$,ee){$.exports=["inherit","initial","unset"]},{}],104:[function(y,$,ee){$.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(y,$,ee){"use strict";var p,m=y("type/value/is"),b=y("type/value/ensure"),v=y("type/plain-function/ensure"),e=y("es5-ext/object/copy"),n=y("es5-ext/object/normalize-options"),t=y("es5-ext/object/map"),a=Function.prototype.bind,r=Object.defineProperty,u=Object.prototype.hasOwnProperty;p=function(s,i,l){var c,f=b(i)&&v(i.value);return delete(c=e(i)).writable,delete c.value,c.get=function(){return!l.overwriteDefinition&&u.call(this,s)?f:(i.value=a.call(f,l.resolveContext?l.resolveContext(this):this),r(this,s,i),this[s])},c},$.exports=function(s){var i=n(arguments[1]);return m(i.resolveContext)&&v(i.resolveContext),t(s,function(l,c){return p(c,l,i)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(y,$,ee){"use strict";var p=y("type/value/is"),m=y("type/plain-function/is"),b=y("es5-ext/object/assign"),v=y("es5-ext/object/normalize-options"),e=y("es5-ext/string/#/contains");($.exports=function(n,t){var a,r,u,s,i;return arguments.length<2||"string"!=typeof n?(s=t,t=n,n=null):s=arguments[2],p(n)?(a=e.call(n,"c"),r=e.call(n,"e"),u=e.call(n,"w")):(a=u=!0,r=!1),i={value:t,configurable:a,enumerable:r,writable:u},s?b(v(s),i):i}).gs=function(n,t,a){var r,u,s,i;return"string"!=typeof n?(s=a,a=t,t=n,n=null):s=arguments[3],p(t)?m(t)?p(a)?m(a)||(s=a,a=void 0):a=void 0:(s=t,t=a=void 0):t=void 0,p(n)?(r=e.call(n,"c"),u=e.call(n,"e")):(r=!0,u=!1),i={get:t,set:a,configurable:r,enumerable:u},s?b(v(s),i):i}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(y,$,ee){(function(p){"use strict";function m(P,S){return P<S?-1:P>S?1:P>=S?0:NaN}function b(P){var S;return 1===P.length&&(S=P,P=function(E,R){return m(S(E),R)}),{left:function(E,R,B,H){for(null==B&&(B=0),null==H&&(H=E.length);B<H;){var V=B+H>>>1;P(E[V],R)<0?B=V+1:H=V}return B},right:function(E,R,B,H){for(null==B&&(B=0),null==H&&(H=E.length);B<H;){var V=B+H>>>1;P(E[V],R)>0?H=V:B=V+1}return B}}}var v=b(m),e=v.right,n=v.left;function t(P,S){return[P,S]}function a(P){return null===P?NaN:+P}function r(P,S){var E,R,B=P.length,H=0,V=-1,Z=0,W=0;if(null==S)for(;++V<B;)isNaN(E=a(P[V]))||(W+=(R=E-Z)*(E-(Z+=R/++H)));else for(;++V<B;)isNaN(E=a(S(P[V],V,P)))||(W+=(R=E-Z)*(E-(Z+=R/++H)));if(H>1)return W/(H-1)}function u(P,S){var E=r(P,S);return E&&Math.sqrt(E)}function s(P,S){var E,R,B,H=P.length,V=-1;if(null==S){for(;++V<H;)if(null!=(E=P[V])&&E>=E)for(R=B=E;++V<H;)null!=(E=P[V])&&(R>E&&(R=E),B<E&&(B=E))}else for(;++V<H;)if(null!=(E=S(P[V],V,P))&&E>=E)for(R=B=E;++V<H;)null!=(E=S(P[V],V,P))&&(R>E&&(R=E),B<E&&(B=E));return[R,B]}var i=Array.prototype,l=i.slice,c=i.map;function f(P){return function(){return P}}function g(P){return P}function h(P,S,E){P=+P,S=+S,E=(B=arguments.length)<2?(S=P,P=0,1):B<3?1:+E;for(var R=-1,B=0|Math.max(0,Math.ceil((S-P)/E)),H=new Array(B);++R<B;)H[R]=P+R*E;return H}var o=Math.sqrt(50),x=Math.sqrt(10),d=Math.sqrt(2);function w(P,S,E){var R=(S-P)/Math.max(0,E),B=Math.floor(Math.log(R)/Math.LN10),H=R/Math.pow(10,B);return B>=0?(H>=o?10:H>=x?5:H>=d?2:1)*Math.pow(10,B):-Math.pow(10,-B)/(H>=o?10:H>=x?5:H>=d?2:1)}function _(P,S,E){var R=Math.abs(S-P)/Math.max(0,E),B=Math.pow(10,Math.floor(Math.log(R)/Math.LN10)),H=R/B;return H>=o?B*=10:H>=x?B*=5:H>=d&&(B*=2),S<P?-B:B}function T(P){return Math.ceil(Math.log(P.length)/Math.LN2)+1}function k(P,S,E){if(null==E&&(E=a),R=P.length){if((S=+S)<=0||R<2)return+E(P[0],0,P);if(S>=1)return+E(P[R-1],R-1,P);var R,B=(R-1)*S,H=Math.floor(B),V=+E(P[H],H,P);return V+(+E(P[H+1],H+1,P)-V)*(B-H)}}function L(P,S){var E,R,B=P.length,H=-1;if(null==S){for(;++H<B;)if(null!=(E=P[H])&&E>=E)for(R=E;++H<B;)null!=(E=P[H])&&R>E&&(R=E)}else for(;++H<B;)if(null!=(E=S(P[H],H,P))&&E>=E)for(R=E;++H<B;)null!=(E=S(P[H],H,P))&&R>E&&(R=E);return R}function M(P){if(!(B=P.length))return[];for(var S=-1,E=L(P,O),R=new Array(E);++S<E;)for(var B,H=-1,V=R[S]=new Array(B);++H<B;)V[H]=P[H][S];return R}function O(P){return P.length}p.bisect=e,p.bisectRight=e,p.bisectLeft=n,p.ascending=m,p.bisector=b,p.cross=function(P,S,E){var R,B,H,V,Z=P.length,W=S.length,G=new Array(Z*W);for(null==E&&(E=t),R=H=0;R<Z;++R)for(V=P[R],B=0;B<W;++B,++H)G[H]=E(V,S[B]);return G},p.descending=function(P,S){return S<P?-1:S>P?1:S>=P?0:NaN},p.deviation=u,p.extent=s,p.histogram=function(){var P=g,S=s,E=T;function R(B){var H,V,Z=B.length,W=new Array(Z);for(H=0;H<Z;++H)W[H]=P(B[H],H,B);var G=S(W),X=G[0],te=G[1],D=E(W,X,te);Array.isArray(D)||(D=_(X,te,D),D=h(Math.ceil(X/D)*D,te,D));for(var N=D.length;D[0]<=X;)D.shift(),--N;for(;D[N-1]>te;)D.pop(),--N;var U,Q=new Array(N+1);for(H=0;H<=N;++H)(U=Q[H]=[]).x0=H>0?D[H-1]:X,U.x1=H<N?D[H]:te;for(H=0;H<Z;++H)X<=(V=W[H])&&V<=te&&Q[e(D,V,0,N)].push(B[H]);return Q}return R.value=function(B){return arguments.length?(P="function"==typeof B?B:f(B),R):P},R.domain=function(B){return arguments.length?(S="function"==typeof B?B:f([B[0],B[1]]),R):S},R.thresholds=function(B){return arguments.length?(E="function"==typeof B?B:Array.isArray(B)?f(l.call(B)):f(B),R):E},R},p.thresholdFreedmanDiaconis=function(P,S,E){return P=c.call(P,a).sort(m),Math.ceil((E-S)/(2*(k(P,.75)-k(P,.25))*Math.pow(P.length,-1/3)))},p.thresholdScott=function(P,S,E){return Math.ceil((E-S)/(3.5*u(P)*Math.pow(P.length,-1/3)))},p.thresholdSturges=T,p.max=function(P,S){var E,R,B=P.length,H=-1;if(null==S){for(;++H<B;)if(null!=(E=P[H])&&E>=E)for(R=E;++H<B;)null!=(E=P[H])&&E>R&&(R=E)}else for(;++H<B;)if(null!=(E=S(P[H],H,P))&&E>=E)for(R=E;++H<B;)null!=(E=S(P[H],H,P))&&E>R&&(R=E);return R},p.mean=function(P,S){var E,R=P.length,B=R,H=-1,V=0;if(null==S)for(;++H<R;)isNaN(E=a(P[H]))?--B:V+=E;else for(;++H<R;)isNaN(E=a(S(P[H],H,P)))?--B:V+=E;if(B)return V/B},p.median=function(P,S){var E,R=P.length,B=-1,H=[];if(null==S)for(;++B<R;)isNaN(E=a(P[B]))||H.push(E);else for(;++B<R;)isNaN(E=a(S(P[B],B,P)))||H.push(E);return k(H.sort(m),.5)},p.merge=function(P){for(var S,E,R,B=P.length,H=-1,V=0;++H<B;)V+=P[H].length;for(E=new Array(V);--B>=0;)for(S=(R=P[B]).length;--S>=0;)E[--V]=R[S];return E},p.min=L,p.pairs=function(P,S){null==S&&(S=t);for(var E=0,R=P.length-1,B=P[0],H=new Array(R<0?0:R);E<R;)H[E]=S(B,B=P[++E]);return H},p.permute=function(P,S){for(var E=S.length,R=new Array(E);E--;)R[E]=P[S[E]];return R},p.quantile=k,p.range=h,p.scan=function(P,S){if(E=P.length){var E,R,B=0,H=0,V=P[H];for(null==S&&(S=m);++B<E;)(S(R=P[B],V)<0||0!==S(V,V))&&(V=R,H=B);return 0===S(V,V)?H:void 0}},p.shuffle=function(P,S,E){for(var R,B,H=(null==E?P.length:E)-(S=null==S?0:+S);H;)B=Math.random()*H--|0,R=P[H+S],P[H+S]=P[B+S],P[B+S]=R;return P},p.sum=function(P,S){var E,R=P.length,B=-1,H=0;if(null==S)for(;++B<R;)(E=+P[B])&&(H+=E);else for(;++B<R;)(E=+S(P[B],B,P))&&(H+=E);return H},p.ticks=function(P,S,E){var R,B,H,V,Z=-1;if(E=+E,(P=+P)==(S=+S)&&E>0)return[P];if((R=S<P)&&(B=P,P=S,S=B),0===(V=w(P,S,E))||!isFinite(V))return[];if(V>0)for(P=Math.ceil(P/V),S=Math.floor(S/V),H=new Array(B=Math.ceil(S-P+1));++Z<B;)H[Z]=(P+Z)*V;else for(P=Math.floor(P*V),S=Math.ceil(S*V),H=new Array(B=Math.ceil(P-S+1));++Z<B;)H[Z]=(P-Z)/V;return R&&H.reverse(),H},p.tickIncrement=w,p.tickStep=_,p.transpose=M,p.variance=r,p.zip=function(){return M(arguments)},Object.defineProperty(p,"__esModule",{value:!0})})("object"==typeof ee&&void 0!==$?ee:this.d3=this.d3||{})},{}],108:[function(y,$,ee){(function(p){"use strict";function m(){}function b(s,i){var l=new m;if(s instanceof m)s.each(function(o,x){l.set(x,o)});else if(Array.isArray(s)){var c,f=-1,g=s.length;if(null==i)for(;++f<g;)l.set(f,s[f]);else for(;++f<g;)l.set(i(c=s[f],f,s),c)}else if(s)for(var h in s)l.set(h,s[h]);return l}function v(){return{}}function e(s,i,l){s[i]=l}function n(){return b()}function t(s,i,l){s.set(i,l)}function a(){}m.prototype=b.prototype={constructor:m,has:function(s){return"$"+s in this},get:function(s){return this["$"+s]},set:function(s,i){return this["$"+s]=i,this},remove:function(s){var i="$"+s;return i in this&&delete this[i]},clear:function(){for(var s in this)"$"===s[0]&&delete this[s]},keys:function(){var s=[];for(var i in this)"$"===i[0]&&s.push(i.slice(1));return s},values:function(){var s=[];for(var i in this)"$"===i[0]&&s.push(this[i]);return s},entries:function(){var s=[];for(var i in this)"$"===i[0]&&s.push({key:i.slice(1),value:this[i]});return s},size:function(){var s=0;for(var i in this)"$"===i[0]&&++s;return s},empty:function(){for(var s in this)if("$"===s[0])return!1;return!0},each:function(s){for(var i in this)"$"===i[0]&&s(this[i],i.slice(1),this)}};var r=b.prototype;function u(s,i){var l=new a;if(s instanceof a)s.each(function(g){l.add(g)});else if(s){var c=-1,f=s.length;if(null==i)for(;++c<f;)l.add(s[c]);else for(;++c<f;)l.add(i(s[c],c,s))}return l}a.prototype=u.prototype={constructor:a,has:r.has,add:function(s){return this["$"+(s+="")]=s,this},remove:r.remove,clear:r.clear,values:r.keys,size:r.size,empty:r.empty,each:r.each},p.nest=function(){var s,i,l,c=[],f=[];function g(h,o,x,d){if(o>=c.length)return null!=s&&h.sort(s),null!=i?i(h):h;for(var w,_,T,k=-1,L=h.length,M=c[o++],O=b(),P=x();++k<L;)(T=O.get(w=M(_=h[k])+""))?T.push(_):O.set(w,[_]);return O.each(function(S,E){d(P,E,g(S,o,x,d))}),P}return l={object:function(h){return g(h,0,v,e)},map:function(h){return g(h,0,n,t)},entries:function(h){return function o(x,d){if(++d>c.length)return x;var w,_=f[d-1];return null!=i&&d>=c.length?w=x.entries():(w=[],x.each(function(T,k){w.push({key:k,values:o(T,d)})})),null!=_?w.sort(function(T,k){return _(T.key,k.key)}):w}(g(h,0,n,t),0)},key:function(h){return c.push(h),l},sortKeys:function(h){return f[c.length-1]=h,l},sortValues:function(h){return s=h,l},rollup:function(h){return i=h,l}}},p.set=u,p.map=b,p.keys=function(s){var i=[];for(var l in s)i.push(l);return i},p.values=function(s){var i=[];for(var l in s)i.push(s[l]);return i},p.entries=function(s){var i=[];for(var l in s)i.push({key:l,value:s[l]});return i},Object.defineProperty(p,"__esModule",{value:!0})})("object"==typeof ee&&void 0!==$?ee:this.d3=this.d3||{})},{}],109:[function(y,$,ee){var p;p=this,function(p){"use strict";function m(fe,me,Te){fe.prototype=me.prototype=Te,Te.constructor=fe}function b(fe,me){var Te=Object.create(fe.prototype);for(var _e in me)Te[_e]=me[_e];return Te}function v(){}var e="\\s*([+-]?\\d+)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",a=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),u=new RegExp("^rgb\\("+[t,t,t]+"\\)$"),s=new RegExp("^rgba\\("+[e,e,e,n]+"\\)$"),i=new RegExp("^rgba\\("+[t,t,t,n]+"\\)$"),l=new RegExp("^hsl\\("+[n,t,t]+"\\)$"),c=new RegExp("^hsla\\("+[n,t,t,n]+"\\)$"),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(){return this.rgb().formatHex()}function h(){return this.rgb().formatRgb()}function o(fe){var me,Te;return fe=(fe+"").trim().toLowerCase(),(me=a.exec(fe))?(Te=me[1].length,me=parseInt(me[1],16),6===Te?x(me):3===Te?new T(me>>8&15|me>>4&240,me>>4&15|240&me,(15&me)<<4|15&me,1):8===Te?d(me>>24&255,me>>16&255,me>>8&255,(255&me)/255):4===Te?d(me>>12&15|me>>8&240,me>>8&15|me>>4&240,me>>4&15|240&me,((15&me)<<4|15&me)/255):null):(me=r.exec(fe))?new T(me[1],me[2],me[3],1):(me=u.exec(fe))?new T(255*me[1]/100,255*me[2]/100,255*me[3]/100,1):(me=s.exec(fe))?d(me[1],me[2],me[3],me[4]):(me=i.exec(fe))?d(255*me[1]/100,255*me[2]/100,255*me[3]/100,me[4]):(me=l.exec(fe))?O(me[1],me[2]/100,me[3]/100,1):(me=c.exec(fe))?O(me[1],me[2]/100,me[3]/100,me[4]):f.hasOwnProperty(fe)?x(f[fe]):"transparent"===fe?new T(NaN,NaN,NaN,0):null}function x(fe){return new T(fe>>16&255,fe>>8&255,255&fe,1)}function d(fe,me,Te,_e){return _e<=0&&(fe=me=Te=NaN),new T(fe,me,Te,_e)}function w(fe){return fe instanceof v||(fe=o(fe)),fe?new T((fe=fe.rgb()).r,fe.g,fe.b,fe.opacity):new T}function _(fe,me,Te,_e){return 1===arguments.length?w(fe):new T(fe,me,Te,null==_e?1:_e)}function T(fe,me,Te,_e){this.r=+fe,this.g=+me,this.b=+Te,this.opacity=+_e}function k(){return"#"+M(this.r)+M(this.g)+M(this.b)}function L(){var fe=this.opacity;return(1===(fe=isNaN(fe)?1:Math.max(0,Math.min(1,fe)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===fe?")":", "+fe+")")}function M(fe){return((fe=Math.max(0,Math.min(255,Math.round(fe)||0)))<16?"0":"")+fe.toString(16)}function O(fe,me,Te,_e){return _e<=0?fe=me=Te=NaN:Te<=0||Te>=1?fe=me=NaN:me<=0&&(fe=NaN),new E(fe,me,Te,_e)}function P(fe){if(fe instanceof E)return new E(fe.h,fe.s,fe.l,fe.opacity);if(fe instanceof v||(fe=o(fe)),!fe)return new E;if(fe instanceof E)return fe;var me=(fe=fe.rgb()).r/255,Te=fe.g/255,_e=fe.b/255,Me=Math.min(me,Te,_e),Ie=Math.max(me,Te,_e),ze=NaN,Ve=Ie-Me,Je=(Ie+Me)/2;return Ve?(ze=me===Ie?(Te-_e)/Ve+6*(Te<_e):Te===Ie?(_e-me)/Ve+2:(me-Te)/Ve+4,Ve/=Je<.5?Ie+Me:2-Ie-Me,ze*=60):Ve=Je>0&&Je<1?0:ze,new E(ze,Ve,Je,fe.opacity)}function S(fe,me,Te,_e){return 1===arguments.length?P(fe):new E(fe,me,Te,null==_e?1:_e)}function E(fe,me,Te,_e){this.h=+fe,this.s=+me,this.l=+Te,this.opacity=+_e}function R(fe,me,Te){return 255*(fe<60?me+(Te-me)*fe/60:fe<180?Te:fe<240?me+(Te-me)*(240-fe)/60:me)}m(v,o,{copy:function(fe){return Object.assign(new this.constructor,this,fe)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:function(){return P(this).formatHsl()},formatRgb:h,toString:h}),m(T,_,b(v,{brighter:function(fe){return fe=null==fe?1/.7:Math.pow(1/.7,fe),new T(this.r*fe,this.g*fe,this.b*fe,this.opacity)},darker:function(fe){return fe=null==fe?.7:Math.pow(.7,fe),new T(this.r*fe,this.g*fe,this.b*fe,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k,formatHex:k,formatRgb:L,toString:L})),m(E,S,b(v,{brighter:function(fe){return fe=null==fe?1/.7:Math.pow(1/.7,fe),new E(this.h,this.s,this.l*fe,this.opacity)},darker:function(fe){return fe=null==fe?.7:Math.pow(.7,fe),new E(this.h,this.s,this.l*fe,this.opacity)},rgb:function(){var fe=this.h%360+360*(this.h<0),me=isNaN(fe)||isNaN(this.s)?0:this.s,Te=this.l,_e=Te+(Te<.5?Te:1-Te)*me,Me=2*Te-_e;return new T(R(fe>=240?fe-240:fe+120,Me,_e),R(fe,Me,_e),R(fe<120?fe+240:fe-120,Me,_e),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var fe=this.opacity;return(1===(fe=isNaN(fe)?1:Math.max(0,Math.min(1,fe)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===fe?")":", "+fe+")")}}));var B=Math.PI/180,H=180/Math.PI,V=6/29,Z=3*V*V;function W(fe){if(fe instanceof X)return new X(fe.l,fe.a,fe.b,fe.opacity);if(fe instanceof J)return K(fe);fe instanceof T||(fe=w(fe));var me,Te,_e=U(fe.r),Me=U(fe.g),Ie=U(fe.b),ze=te((.2225045*_e+.7168786*Me+.0606169*Ie)/1);return _e===Me&&Me===Ie?me=Te=ze:(me=te((.4360747*_e+.3850649*Me+.1430804*Ie)/.96422),Te=te((.0139322*_e+.0971045*Me+.7141733*Ie)/.82521)),new X(116*ze-16,500*(me-ze),200*(ze-Te),fe.opacity)}function G(fe,me,Te,_e){return 1===arguments.length?W(fe):new X(fe,me,Te,null==_e?1:_e)}function X(fe,me,Te,_e){this.l=+fe,this.a=+me,this.b=+Te,this.opacity=+_e}function te(fe){return fe>.008856451679035631?Math.pow(fe,1/3):fe/Z+4/29}function D(fe){return fe>V?fe*fe*fe:Z*(fe-4/29)}function N(fe){return 255*(fe<=.0031308?12.92*fe:1.055*Math.pow(fe,1/2.4)-.055)}function U(fe){return(fe/=255)<=.04045?fe/12.92:Math.pow((fe+.055)/1.055,2.4)}function Q(fe){if(fe instanceof J)return new J(fe.h,fe.c,fe.l,fe.opacity);if(fe instanceof X||(fe=W(fe)),0===fe.a&&0===fe.b)return new J(NaN,0<fe.l&&fe.l<100?0:NaN,fe.l,fe.opacity);var me=Math.atan2(fe.b,fe.a)*H;return new J(me<0?me+360:me,Math.sqrt(fe.a*fe.a+fe.b*fe.b),fe.l,fe.opacity)}function j(fe,me,Te,_e){return 1===arguments.length?Q(fe):new J(fe,me,Te,null==_e?1:_e)}function J(fe,me,Te,_e){this.h=+fe,this.c=+me,this.l=+Te,this.opacity=+_e}function K(fe){if(isNaN(fe.h))return new X(fe.l,0,0,fe.opacity);var me=fe.h*B;return new X(fe.l,Math.cos(me)*fe.c,Math.sin(me)*fe.c,fe.opacity)}m(X,G,b(v,{brighter:function(fe){return new X(this.l+18*(null==fe?1:fe),this.a,this.b,this.opacity)},darker:function(fe){return new X(this.l-18*(null==fe?1:fe),this.a,this.b,this.opacity)},rgb:function(){var fe=(this.l+16)/116,me=isNaN(this.a)?fe:fe+this.a/500,Te=isNaN(this.b)?fe:fe-this.b/200;return new T(N(3.1338561*(me=.96422*D(me))-1.6168667*(fe=1*D(fe))-.4906146*(Te=.82521*D(Te))),N(-.9787684*me+1.9161415*fe+.033454*Te),N(.0719453*me-.2289914*fe+1.4052427*Te),this.opacity)}})),m(J,j,b(v,{brighter:function(fe){return new J(this.h,this.c,this.l+18*(null==fe?1:fe),this.opacity)},darker:function(fe){return new J(this.h,this.c,this.l-18*(null==fe?1:fe),this.opacity)},rgb:function(){return K(this).rgb()}}));var ne=1.78277,se=-.29227,oe=-.90649,pe=1.97294,ce=pe*oe,ge=pe*ne,xe=ne*se- -.14861*oe;function we(fe){if(fe instanceof Se)return new Se(fe.h,fe.s,fe.l,fe.opacity);fe instanceof T||(fe=w(fe));var Te=fe.g/255,_e=fe.b/255,Me=(xe*_e+ce*(fe.r/255)-ge*Te)/(xe+ce-ge),Ie=_e-Me,ze=(pe*(Te-Me)-se*Ie)/oe,Ve=Math.sqrt(ze*ze+Ie*Ie)/(pe*Me*(1-Me)),Je=Ve?Math.atan2(ze,Ie)*H-120:NaN;return new Se(Je<0?Je+360:Je,Ve,Me,fe.opacity)}function be(fe,me,Te,_e){return 1===arguments.length?we(fe):new Se(fe,me,Te,null==_e?1:_e)}function Se(fe,me,Te,_e){this.h=+fe,this.s=+me,this.l=+Te,this.opacity=+_e}m(Se,be,b(v,{brighter:function(fe){return fe=null==fe?1/.7:Math.pow(1/.7,fe),new Se(this.h,this.s,this.l*fe,this.opacity)},darker:function(fe){return fe=null==fe?.7:Math.pow(.7,fe),new Se(this.h,this.s,this.l*fe,this.opacity)},rgb:function(){var fe=isNaN(this.h)?0:(this.h+120)*B,me=+this.l,Te=isNaN(this.s)?0:this.s*me*(1-me),_e=Math.cos(fe),Me=Math.sin(fe);return new T(255*(me+Te*(-.14861*_e+ne*Me)),255*(me+Te*(se*_e+oe*Me)),255*(me+Te*(pe*_e)),this.opacity)}})),p.color=o,p.cubehelix=be,p.gray=function(fe,me){return new X(fe,0,0,null==me?1:me)},p.hcl=j,p.hsl=S,p.lab=G,p.lch=function(fe,me,Te,_e){return 1===arguments.length?Q(fe):new J(Te,me,fe,null==_e?1:_e)},p.rgb=_,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(p=p||self).d3=p.d3||{})},{}],110:[function(y,$,ee){var p;p=this,function(p){"use strict";var m={value:function(){}};function b(){for(var a,r=0,u=arguments.length,s={};r<u;++r){if(!(a=arguments[r]+"")||a in s||/[\s.]/.test(a))throw new Error("illegal type: "+a);s[a]=[]}return new v(s)}function v(a){this._=a}function e(a,r){return a.trim().split(/^|\s+/).map(function(u){var s="",i=u.indexOf(".");if(i>=0&&(s=u.slice(i+1),u=u.slice(0,i)),u&&!r.hasOwnProperty(u))throw new Error("unknown type: "+u);return{type:u,name:s}})}function n(a,r){for(var u,s=0,i=a.length;s<i;++s)if((u=a[s]).name===r)return u.value}function t(a,r,u){for(var s=0,i=a.length;s<i;++s)if(a[s].name===r){a[s]=m,a=a.slice(0,s).concat(a.slice(s+1));break}return null!=u&&a.push({name:r,value:u}),a}v.prototype=b.prototype={constructor:v,on:function(a,r){var u,s=this._,i=e(a+"",s),l=-1,c=i.length;if(!(arguments.length<2)){if(null!=r&&"function"!=typeof r)throw new Error("invalid callback: "+r);for(;++l<c;)if(u=(a=i[l]).type)s[u]=t(s[u],a.name,r);else if(null==r)for(u in s)s[u]=t(s[u],a.name,null);return this}for(;++l<c;)if((u=(a=i[l]).type)&&(u=n(s[u],a.name)))return u},copy:function(){var a={},r=this._;for(var u in r)a[u]=r[u].slice();return new v(a)},call:function(a,r){if((u=arguments.length-2)>0)for(var u,s,i=new Array(u),l=0;l<u;++l)i[l]=arguments[l+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(l=0,u=(s=this._[a]).length;l<u;++l)s[l].value.apply(r,i)},apply:function(a,r,u){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var s=this._[a],i=0,l=s.length;i<l;++i)s[i].value.apply(r,u)}},p.dispatch=b,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(p=p||self).d3=p.d3||{})},{}],111:[function(y,$,ee){var p,m;p=this,m=function(p,m,b,v,e){"use strict";function n(f){return function(){return f}}function t(){return 1e-6*(Math.random()-.5)}function a(f){return f.x+f.vx}function r(f){return f.y+f.vy}function u(f){return f.index}function s(f,g){var h=f.get(g);if(!h)throw new Error("missing: "+g);return h}function i(f){return f.x}function l(f){return f.y}var c=Math.PI*(3-Math.sqrt(5));p.forceCenter=function(f,g){var h;function o(){var x,d,w=h.length,_=0,T=0;for(x=0;x<w;++x)_+=(d=h[x]).x,T+=d.y;for(_=_/w-f,T=T/w-g,x=0;x<w;++x)(d=h[x]).x-=_,d.y-=T}return null==f&&(f=0),null==g&&(g=0),o.initialize=function(x){h=x},o.x=function(x){return arguments.length?(f=+x,o):f},o.y=function(x){return arguments.length?(g=+x,o):g},o},p.forceCollide=function(f){var g,h,o=1,x=1;function d(){for(var T,k,L,M,O,P,S,E=g.length,R=0;R<x;++R)for(k=m.quadtree(g,a,r).visitAfter(w),T=0;T<E;++T)S=(P=h[(L=g[T]).index])*P,M=L.x+L.vx,O=L.y+L.vy,k.visit(B);function B(H,V,Z,W,G){var X=H.data,te=H.r,D=P+te;if(!X)return V>M+D||W<M-D||Z>O+D||G<O-D;if(X.index>L.index){var N=M-X.x-X.vx,U=O-X.y-X.vy,Q=N*N+U*U;Q<D*D&&(0===N&&(Q+=(N=t())*N),0===U&&(Q+=(U=t())*U),Q=(D-(Q=Math.sqrt(Q)))/Q*o,L.vx+=(N*=Q)*(D=(te*=te)/(S+te)),L.vy+=(U*=Q)*D,X.vx-=N*(D=1-D),X.vy-=U*D)}}}function w(T){if(T.data)return T.r=h[T.data.index];for(var k=T.r=0;k<4;++k)T[k]&&T[k].r>T.r&&(T.r=T[k].r)}function _(){if(g){var T,k,L=g.length;for(h=new Array(L),T=0;T<L;++T)h[(k=g[T]).index]=+f(k,T,g)}}return"function"!=typeof f&&(f=n(null==f?1:+f)),d.initialize=function(T){g=T,_()},d.iterations=function(T){return arguments.length?(x=+T,d):x},d.strength=function(T){return arguments.length?(o=+T,d):o},d.radius=function(T){return arguments.length?(f="function"==typeof T?T:n(+T),_(),d):f},d},p.forceLink=function(f){var g,h,o,x,d,w=u,_=function(S){return 1/Math.min(x[S.source.index],x[S.target.index])},T=n(30),k=1;function L(S){for(var E=0,R=f.length;E<k;++E)for(var B,H,V,Z,W,G,X,te=0;te<R;++te)H=(B=f[te]).source,Z=(V=B.target).x+V.vx-H.x-H.vx||t(),W=V.y+V.vy-H.y-H.vy||t(),Z*=G=((G=Math.sqrt(Z*Z+W*W))-h[te])/G*S*g[te],W*=G,V.vx-=Z*(X=d[te]),V.vy-=W*X,H.vx+=Z*(X=1-X),H.vy+=W*X}function M(){if(o){var S,E,R=o.length,B=f.length,H=b.map(o,w);for(S=0,x=new Array(R);S<B;++S)(E=f[S]).index=S,"object"!=typeof E.source&&(E.source=s(H,E.source)),"object"!=typeof E.target&&(E.target=s(H,E.target)),x[E.source.index]=(x[E.source.index]||0)+1,x[E.target.index]=(x[E.target.index]||0)+1;for(S=0,d=new Array(B);S<B;++S)d[S]=x[(E=f[S]).source.index]/(x[E.source.index]+x[E.target.index]);g=new Array(B),O(),h=new Array(B),P()}}function O(){if(o)for(var S=0,E=f.length;S<E;++S)g[S]=+_(f[S],S,f)}function P(){if(o)for(var S=0,E=f.length;S<E;++S)h[S]=+T(f[S],S,f)}return null==f&&(f=[]),L.initialize=function(S){o=S,M()},L.links=function(S){return arguments.length?(f=S,M(),L):f},L.id=function(S){return arguments.length?(w=S,L):w},L.iterations=function(S){return arguments.length?(k=+S,L):k},L.strength=function(S){return arguments.length?(_="function"==typeof S?S:n(+S),O(),L):_},L.distance=function(S){return arguments.length?(T="function"==typeof S?S:n(+S),P(),L):T},L},p.forceManyBody=function(){var f,g,h,o,x=n(-30),d=1,w=1/0,_=.81;function T(O){var P,S=f.length,E=m.quadtree(f,i,l).visitAfter(L);for(h=O,P=0;P<S;++P)g=f[P],E.visit(M)}function k(){if(f){var O,P,S=f.length;for(o=new Array(S),O=0;O<S;++O)o[(P=f[O]).index]=+x(P,O,f)}}function L(O){var P,S,E,R,B,H=0,V=0;if(O.length){for(E=R=B=0;B<4;++B)(P=O[B])&&(S=Math.abs(P.value))&&(H+=P.value,V+=S,E+=S*P.x,R+=S*P.y);O.x=E/V,O.y=R/V}else{(P=O).x=P.data.x,P.y=P.data.y;do{H+=o[P.data.index]}while(P=P.next)}O.value=H}function M(O,P,S,E){if(!O.value)return!0;var R=O.x-g.x,B=O.y-g.y,H=E-P,V=R*R+B*B;if(H*H/_<V)return V<w&&(0===R&&(V+=(R=t())*R),0===B&&(V+=(B=t())*B),V<d&&(V=Math.sqrt(d*V)),g.vx+=R*O.value*h/V,g.vy+=B*O.value*h/V),!0;if(!(O.length||V>=w)){(O.data!==g||O.next)&&(0===R&&(V+=(R=t())*R),0===B&&(V+=(B=t())*B),V<d&&(V=Math.sqrt(d*V)));do{O.data!==g&&(g.vx+=R*(H=o[O.data.index]*h/V),g.vy+=B*H)}while(O=O.next)}}return T.initialize=function(O){f=O,k()},T.strength=function(O){return arguments.length?(x="function"==typeof O?O:n(+O),k(),T):x},T.distanceMin=function(O){return arguments.length?(d=O*O,T):Math.sqrt(d)},T.distanceMax=function(O){return arguments.length?(w=O*O,T):Math.sqrt(w)},T.theta=function(O){return arguments.length?(_=O*O,T):Math.sqrt(_)},T},p.forceRadial=function(f,g,h){var o,x,d,w=n(.1);function _(k){for(var L=0,M=o.length;L<M;++L){var O=o[L],P=O.x-g||1e-6,S=O.y-h||1e-6,E=Math.sqrt(P*P+S*S),R=(d[L]-E)*x[L]*k/E;O.vx+=P*R,O.vy+=S*R}}function T(){if(o){var k,L=o.length;for(x=new Array(L),d=new Array(L),k=0;k<L;++k)d[k]=+f(o[k],k,o),x[k]=isNaN(d[k])?0:+w(o[k],k,o)}}return"function"!=typeof f&&(f=n(+f)),null==g&&(g=0),null==h&&(h=0),_.initialize=function(k){o=k,T()},_.strength=function(k){return arguments.length?(w="function"==typeof k?k:n(+k),T(),_):w},_.radius=function(k){return arguments.length?(f="function"==typeof k?k:n(+k),T(),_):f},_.x=function(k){return arguments.length?(g=+k,_):g},_.y=function(k){return arguments.length?(h=+k,_):h},_},p.forceSimulation=function(f){var g,h=1,o=.001,x=1-Math.pow(o,1/300),d=0,w=.6,_=b.map(),T=e.timer(L),k=v.dispatch("tick","end");function L(){M(),k.call("tick",g),h<o&&(T.stop(),k.call("end",g))}function M(S){var E,R,B=f.length;void 0===S&&(S=1);for(var H=0;H<S;++H)for(h+=(d-h)*x,_.each(function(V){V(h)}),E=0;E<B;++E)null==(R=f[E]).fx?R.x+=R.vx*=w:(R.x=R.fx,R.vx=0),null==R.fy?R.y+=R.vy*=w:(R.y=R.fy,R.vy=0);return g}function O(){for(var S,E=0,R=f.length;E<R;++E){if((S=f[E]).index=E,null!=S.fx&&(S.x=S.fx),null!=S.fy&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var B=10*Math.sqrt(E),H=E*c;S.x=B*Math.cos(H),S.y=B*Math.sin(H)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function P(S){return S.initialize&&S.initialize(f),S}return null==f&&(f=[]),O(),g={tick:M,restart:function(){return T.restart(L),g},stop:function(){return T.stop(),g},nodes:function(S){return arguments.length?(f=S,O(),_.each(P),g):f},alpha:function(S){return arguments.length?(h=+S,g):h},alphaMin:function(S){return arguments.length?(o=+S,g):o},alphaDecay:function(S){return arguments.length?(x=+S,g):+x},alphaTarget:function(S){return arguments.length?(d=+S,g):d},velocityDecay:function(S){return arguments.length?(w=1-S,g):1-w},force:function(S,E){return arguments.length>1?(null==E?_.remove(S):_.set(S,P(E)),g):_.get(S)},find:function(S,E,R){var B,H,V,Z,W,G=0,X=f.length;for(null==R?R=1/0:R*=R,G=0;G<X;++G)(V=(B=S-(Z=f[G]).x)*B+(H=E-Z.y)*H)<R&&(W=Z,R=V);return W},on:function(S,E){return arguments.length>1?(k.on(S,E),g):k.on(S)}}},p.forceX=function(f){var g,h,o,x=n(.1);function d(_){for(var T,k=0,L=g.length;k<L;++k)(T=g[k]).vx+=(o[k]-T.x)*h[k]*_}function w(){if(g){var _,T=g.length;for(h=new Array(T),o=new Array(T),_=0;_<T;++_)h[_]=isNaN(o[_]=+f(g[_],_,g))?0:+x(g[_],_,g)}}return"function"!=typeof f&&(f=n(null==f?0:+f)),d.initialize=function(_){g=_,w()},d.strength=function(_){return arguments.length?(x="function"==typeof _?_:n(+_),w(),d):x},d.x=function(_){return arguments.length?(f="function"==typeof _?_:n(+_),w(),d):f},d},p.forceY=function(f){var g,h,o,x=n(.1);function d(_){for(var T,k=0,L=g.length;k<L;++k)(T=g[k]).vy+=(o[k]-T.y)*h[k]*_}function w(){if(g){var _,T=g.length;for(h=new Array(T),o=new Array(T),_=0;_<T;++_)h[_]=isNaN(o[_]=+f(g[_],_,g))?0:+x(g[_],_,g)}}return"function"!=typeof f&&(f=n(null==f?0:+f)),d.initialize=function(_){g=_,w()},d.strength=function(_){return arguments.length?(x="function"==typeof _?_:n(+_),w(),d):x},d.y=function(_){return arguments.length?(f="function"==typeof _?_:n(+_),w(),d):f},d},Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?m(ee,y("d3-quadtree"),y("d3-collection"),y("d3-dispatch"),y("d3-timer")):m(p.d3=p.d3||{},p.d3,p.d3,p.d3,p.d3)},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(y,$,ee){var p;p=this,function(p){"use strict";function m(g,h){if((o=(g=h?g.toExponential(h-1):g.toExponential()).indexOf("e"))<0)return null;var o,x=g.slice(0,o);return[x.length>1?x[0]+x.slice(2):x,+g.slice(o+1)]}function b(g){return(g=m(Math.abs(g)))?g[1]:NaN}var v,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n(g){if(!(h=e.exec(g)))throw new Error("invalid format: "+g);var h;return new t({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}function t(g){this.fill=void 0===g.fill?" ":g.fill+"",this.align=void 0===g.align?">":g.align+"",this.sign=void 0===g.sign?"-":g.sign+"",this.symbol=void 0===g.symbol?"":g.symbol+"",this.zero=!!g.zero,this.width=void 0===g.width?void 0:+g.width,this.comma=!!g.comma,this.precision=void 0===g.precision?void 0:+g.precision,this.trim=!!g.trim,this.type=void 0===g.type?"":g.type+""}function a(g,h){var o=m(g,h);if(!o)return g+"";var x=o[0],d=o[1];return d<0?"0."+new Array(-d).join("0")+x:x.length>d+1?x.slice(0,d+1)+"."+x.slice(d+1):x+new Array(d-x.length+2).join("0")}n.prototype=t.prototype,t.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var r={"%":function(g,h){return(100*g).toFixed(h)},b:function(g){return Math.round(g).toString(2)},c:function(g){return g+""},d:function(g){return Math.abs(g=Math.round(g))>=1e21?g.toLocaleString("en").replace(/,/g,""):g.toString(10)},e:function(g,h){return g.toExponential(h)},f:function(g,h){return g.toFixed(h)},g:function(g,h){return g.toPrecision(h)},o:function(g){return Math.round(g).toString(8)},p:function(g,h){return a(100*g,h)},r:a,s:function(g,h){var o=m(g,h);if(!o)return g+"";var x=o[0],d=o[1],w=d-(v=3*Math.max(-8,Math.min(8,Math.floor(d/3))))+1,_=x.length;return w===_?x:w>_?x+new Array(w-_+1).join("0"):w>0?x.slice(0,w)+"."+x.slice(w):"0."+new Array(1-w).join("0")+m(g,Math.max(0,h+w-1))[0]},X:function(g){return Math.round(g).toString(16).toUpperCase()},x:function(g){return Math.round(g).toString(16)}};function u(g){return g}var s,i=Array.prototype.map,l=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function c(g){var h,o,P,x=void 0===g.grouping||void 0===g.thousands?u:(h=i.call(g.grouping,Number),o=g.thousands+"",function(P,S){for(var E=P.length,R=[],B=0,H=h[0],V=0;E>0&&H>0&&(V+H+1>S&&(H=Math.max(1,S-V)),R.push(P.substring(E-=H,E+H)),!((V+=H+1)>S));)H=h[B=(B+1)%h.length];return R.reverse().join(o)}),d=void 0===g.currency?"":g.currency[0]+"",w=void 0===g.currency?"":g.currency[1]+"",_=void 0===g.decimal?".":g.decimal+"",T=void 0===g.numerals?u:(P=i.call(g.numerals,String),function(S){return S.replace(/[0-9]/g,function(E){return P[+E]})}),k=void 0===g.percent?"%":g.percent+"",L=void 0===g.minus?"-":g.minus+"",M=void 0===g.nan?"NaN":g.nan+"";function O(P){var S=(P=n(P)).fill,E=P.align,R=P.sign,B=P.symbol,H=P.zero,V=P.width,Z=P.comma,W=P.precision,G=P.trim,X=P.type;"n"===X?(Z=!0,X="g"):r[X]||(void 0===W&&(W=12),G=!0,X="g"),(H||"0"===S&&"="===E)&&(H=!0,S="0",E="=");var te="$"===B?d:"#"===B&&/[boxX]/.test(X)?"0"+X.toLowerCase():"",D="$"===B?w:/[%p]/.test(X)?k:"",N=r[X],U=/[defgprs%]/.test(X);function Q(j){var J,K,re,ne=te,se=D;if("c"===X)se=N(j)+se,j="";else{var oe=(j=+j)<0||1/j<0;if(j=isNaN(j)?M:N(Math.abs(j),W),G&&(j=function(ge){e:for(var xe,we=ge.length,be=1,Se=-1;be<we;++be)switch(ge[be]){case".":Se=xe=be;break;case"0":0===Se&&(Se=be),xe=be;break;default:if(!+ge[be])break e;Se>0&&(Se=0)}return Se>0?ge.slice(0,Se)+ge.slice(xe+1):ge}(j)),oe&&0==+j&&"+"!==R&&(oe=!1),ne=(oe?"("===R?R:L:"-"===R||"("===R?"":R)+ne,se=("s"===X?l[8+v/3]:"")+se+(oe&&"("===R?")":""),U)for(J=-1,K=j.length;++J<K;)if(48>(re=j.charCodeAt(J))||re>57){se=(46===re?_+j.slice(J+1):j.slice(J))+se,j=j.slice(0,J);break}}Z&&!H&&(j=x(j,1/0));var pe=ne.length+j.length+se.length,ce=pe<V?new Array(V-pe+1).join(S):"";switch(Z&&H&&(j=x(ce+j,ce.length?V-se.length:1/0),ce=""),E){case"<":j=ne+j+se+ce;break;case"=":j=ne+ce+j+se;break;case"^":j=ce.slice(0,pe=ce.length>>1)+ne+j+se+ce.slice(pe);break;default:j=ce+ne+j+se}return T(j)}return W=void 0===W?6:/[gprs]/.test(X)?Math.max(1,Math.min(21,W)):Math.max(0,Math.min(20,W)),Q.toString=function(){return P+""},Q}return{format:O,formatPrefix:function(P,S){var E=O(((P=n(P)).type="f",P)),R=3*Math.max(-8,Math.min(8,Math.floor(b(S)/3))),B=Math.pow(10,-R),H=l[8+R/3];return function(V){return E(B*V)+H}}}}function f(g){return s=c(g),p.format=s.format,p.formatPrefix=s.formatPrefix,s}f({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),p.FormatSpecifier=t,p.formatDefaultLocale=f,p.formatLocale=c,p.formatSpecifier=n,p.precisionFixed=function(g){return Math.max(0,-b(Math.abs(g)))},p.precisionPrefix=function(g,h){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(b(h)/3)))-b(Math.abs(g)))},p.precisionRound=function(g,h){return g=Math.abs(g),h=Math.abs(h)-g,Math.max(0,b(h)-b(g))+1},Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(p="undefined"!=typeof globalThis?globalThis:p||self).d3=p.d3||{})},{}],113:[function(y,$,ee){var p,m;p=this,m=function(p,m,b){"use strict";var v=Math.abs,e=Math.atan,n=Math.atan2,t=Math.cos,a=Math.exp,r=Math.floor,u=Math.log,s=Math.max,i=Math.min,l=Math.pow,c=Math.round,f=Math.sign||function(je){return je>0?1:je<0?-1:0},g=Math.sin,h=Math.tan,o=1e-6,x=Math.PI,d=x/2,w=x/4,_=Math.SQRT1_2,T=E(2),k=E(x),L=2*x,M=180/x,O=x/180;function P(je){return je>1?d:je<-1?-d:Math.asin(je)}function S(je){return je>1?0:je<-1?x:Math.acos(je)}function E(je){return je>0?Math.sqrt(je):0}function R(je){return(a(je)-a(-je))/2}function B(je){return(a(je)+a(-je))/2}function H(je){var qe=h(je/2),Ke=2*u(t(je/2))/(qe*qe);function it(gt,ht){var kt=t(gt),Jt=t(ht),Qt=g(ht),Wt=Jt*kt,tr=-((1-Wt?u((1+Wt)/2)/(1-Wt):-.5)+Ke/(1+Wt));return[tr*Jt*g(gt),tr*Qt]}return it.invert=function(gt,ht){var kt,Jt=E(gt*gt+ht*ht),Qt=-je/2,Wt=50;if(!Jt)return[0,0];do{var tr=Qt/2,ur=t(tr),gr=g(tr),xr=gr/ur,Pr=-u(v(ur));Qt-=kt=(2/xr*Pr-Ke*xr-Jt)/(-Pr/(gr*gr)+1-Ke/(2*ur*ur))*(ur<0?.7:1)}while(v(kt)>o&&--Wt>0);var en=g(Qt);return[n(gt*en,Jt*t(Qt)),P(ht*en/Jt)]},it}function V(je,qe){var gt,Ke=t(qe),it=(gt=S(Ke*t(je/=2)))?gt/Math.sin(gt):1;return[2*Ke*g(je)*it,g(qe)*it]}function Z(je){var qe=g(je),Ke=t(je),it=je>=0?1:-1,gt=h(it*je),ht=(1+qe-Ke)/2;function kt(Jt,Qt){var Wt=t(Qt),tr=t(Jt/=2);return[(1+Wt)*g(Jt),(it*Qt>-n(tr,gt)-.001?0:10*-it)+ht+g(Qt)*Ke-(1+Wt)*qe*tr]}return kt.invert=function(Jt,Qt){var Wt=0,tr=0,ur=50;do{var gr=t(Wt),xr=g(Wt),Pr=t(tr),en=g(tr),hn=1+Pr,Sn=hn*xr-Jt,Pn=ht+en*Ke-hn*qe*gr-Qt,Un=hn*gr/2,In=-xr*en,hi=qe*hn*xr/2,bi=Ke*Pr+qe*gr*en,Oi=In*hi-bi*Un,Ii=(Pn*In-Sn*bi)/Oi/2,zi=(Sn*hi-Pn*Un)/Oi;v(zi)>2&&(zi/=2),Wt-=Ii,tr-=zi}while((v(Ii)>o||v(zi)>o)&&--ur>0);return it*tr>-n(t(Wt),gt)-.001?[2*Wt,tr]:null},kt}function W(je,qe){var Ke=h(qe/2),it=E(1-Ke*Ke),gt=1+it*t(je/=2),ht=g(je)*it/gt,kt=Ke/gt,Jt=ht*ht,Qt=kt*kt;return[4/3*ht*(3+Jt-3*Qt),4/3*kt*(3+3*Jt-Qt)]}V.invert=function(je,qe){if(!(je*je+4*qe*qe>x*x+o)){var Ke=je,it=qe,gt=25;do{var ht,kt=g(Ke),Jt=g(Ke/2),Qt=t(Ke/2),Wt=g(it),tr=t(it),ur=g(2*it),gr=Wt*Wt,xr=tr*tr,Pr=Jt*Jt,en=1-xr*Qt*Qt,hn=en?S(tr*Qt)*E(ht=1/en):ht=0,Sn=2*hn*tr*Jt-je,Pn=hn*Wt-qe,Un=ht*(xr*Pr+hn*tr*Qt*gr),In=ht*(.5*kt*ur-2*hn*Wt*Jt),hi=.25*ht*(ur*Jt-hn*Wt*xr*kt),bi=ht*(gr*Qt+hn*Pr*tr),Oi=In*hi-bi*Un;if(!Oi)break;var Ii=(Pn*In-Sn*bi)/Oi,zi=(Sn*hi-Pn*Un)/Oi;Ke-=Ii,it-=zi}while((v(Ii)>o||v(zi)>o)&&--gt>0);return[Ke,it]}},W.invert=function(je,qe){if(qe*=3/8,!(je*=3/8)&&v(qe)>1)return null;var Wt,Ke=1+je*je+qe*qe,it=E((Ke-E(Ke*Ke-4*qe*qe))/2),gt=P(it)/3,ht=it?(Wt=v(qe/it),u(Wt+E(Wt*Wt-1))/3):function(Wt){return u(Wt+E(Wt*Wt+1))}(v(je))/3,kt=t(gt),Jt=B(ht),Qt=Jt*Jt-kt*kt;return[2*f(je)*n(R(ht)*kt,.25-Qt),2*f(qe)*n(Jt*g(gt),.25+Qt)]};var G=E(8),X=u(1+T);function te(je,qe){var Ke=v(qe);return Ke<w?[je,u(h(w+qe/2))]:[je*t(Ke)*(2*T-1/g(Ke)),f(qe)*(2*T*(Ke-w)-u(h(Ke/2)))]}function D(je){var qe=2*x/je;function Ke(it,gt){var ht=m.geoAzimuthalEquidistantRaw(it,gt);if(v(it)>d){var kt=n(ht[1],ht[0]),Jt=E(ht[0]*ht[0]+ht[1]*ht[1]),Qt=qe*c((kt-d)/qe)+d,Wt=n(g(kt-=Qt),2-t(kt));kt=Qt+P(x/Jt*g(Wt))-Wt,ht[0]=Jt*t(kt),ht[1]=Jt*g(kt)}return ht}return Ke.invert=function(it,gt){var ht=E(it*it+gt*gt);if(ht>d){var kt=n(gt,it),Jt=qe*c((kt-d)/qe)+d,Qt=kt>Jt?-1:1,Wt=ht*t(Jt-kt),tr=1/h(Qt*S((Wt-x)/E(x*(x-2*Wt)+ht*ht)));kt=Jt+2*e((tr+Qt*E(tr*tr-3))/3),it=ht*t(kt),gt=ht*g(kt)}return m.geoAzimuthalEquidistantRaw.invert(it,gt)},Ke}function N(je,qe){if(arguments.length<2&&(qe=je),1===qe)return m.geoAzimuthalEqualAreaRaw;if(qe===1/0)return U;function Ke(it,gt){var ht=m.geoAzimuthalEqualAreaRaw(it/qe,gt);return ht[0]*=je,ht}return Ke.invert=function(it,gt){var ht=m.geoAzimuthalEqualAreaRaw.invert(it/je,gt);return ht[0]*=qe,ht},Ke}function U(je,qe){return[je*t(qe)/t(qe/=2),2*g(qe)]}function Q(je,qe,Ke){var it,gt,ht,kt=100;Ke=void 0===Ke?0:+Ke,qe=+qe;do{(gt=je(Ke))===(ht=je(Ke+o))&&(ht=gt+o),Ke-=it=-1*o*(gt-qe)/(gt-ht)}while(kt-- >0&&v(it)>o);return kt<0?NaN:Ke}function j(je,qe,Ke){return void 0===qe&&(qe=40),void 0===Ke&&(Ke=1e-12),function(it,gt,ht,kt){var Jt,Qt,Wt;ht=void 0===ht?0:+ht,kt=void 0===kt?0:+kt;for(var tr=0;tr<qe;tr++){var ur=je(ht,kt),gr=ur[0]-it,xr=ur[1]-gt;if(v(gr)<Ke&&v(xr)<Ke)break;var Pr=gr*gr+xr*xr;if(Pr>Jt)ht-=Qt/=2,kt-=Wt/=2;else{Jt=Pr;var en=(ht>0?-1:1)*Ke,hn=(kt>0?-1:1)*Ke,Sn=je(ht+en,kt),Pn=je(ht,kt+hn),Un=(Sn[0]-ur[0])/en,In=(Sn[1]-ur[1])/en,hi=(Pn[0]-ur[0])/hn,bi=(Pn[1]-ur[1])/hn,Oi=bi*Un-In*hi,Ii=(v(Oi)<.5?.5:1)/Oi;if(ht+=Qt=(xr*hi-gr*bi)*Ii,kt+=Wt=(gr*In-xr*Un)*Ii,v(Qt)<Ke&&v(Wt)<Ke)break}}return[ht,kt]}}function J(){var je=N(1.68,2);function qe(Ke,it){if(Ke+it<-1.4){var gt=(Ke-it+1.6)*(Ke+it+1.4)/8;Ke+=gt,it-=.8*gt*g(it+x/2)}var ht=je(Ke,it),kt=(1-t(Ke*it))/12;return ht[1]<0&&(ht[0]*=1+kt),ht[1]>0&&(ht[1]*=1+kt/1.5*ht[0]*ht[0]),ht}return qe.invert=j(qe),qe}function K(je,qe){var Ke,it=je*g(qe),gt=30;do{qe-=Ke=(qe+g(qe)-it)/(1+t(qe))}while(v(Ke)>o&&--gt>0);return qe/2}function re(je,qe,Ke){function it(gt,ht){return[je*gt*t(ht=K(Ke,ht)),qe*g(ht)]}return it.invert=function(gt,ht){return ht=P(ht/qe),[gt/(je*t(ht)),P((2*ht+g(2*ht))/Ke)]},it}te.invert=function(je,qe){if((it=v(qe))<X)return[je,2*e(a(qe))-d];var Ke,it,gt=w,ht=25;do{var kt=t(gt/2),Jt=h(gt/2);gt-=Ke=(G*(gt-w)-u(Jt)-it)/(G-kt*kt/(2*Jt))}while(v(Ke)>1e-12&&--ht>0);return[je/(t(gt)*(G-1/g(gt))),f(qe)*gt]},U.invert=function(je,qe){var Ke=2*P(qe/2);return[je*t(Ke/2)/t(Ke),Ke]};var ne=re(T/d,T,x),se=2.00276;function pe(je,qe){var Ke=K(x,qe);return[se*je/(1/t(qe)+1.11072/t(Ke)),(qe+T*g(Ke))/se]}function ce(je){var qe=0,Ke=m.geoProjectionMutator(je),it=Ke(qe);return it.parallel=function(gt){return arguments.length?Ke(qe=gt*O):qe*M},it}function ge(je,qe){return[je*t(qe),qe]}function xe(je){if(!je)return ge;var qe=1/h(je);function Ke(it,gt){var ht=qe+je-gt,kt=ht&&it*t(gt)/ht;return[ht*g(kt),qe-ht*t(kt)]}return Ke.invert=function(it,gt){var ht=E(it*it+(gt=qe-gt)*gt),kt=qe+je-ht;return[ht/t(kt)*n(it,gt),kt]},Ke}function we(je){function qe(Ke,it){var gt=d-it,ht=gt&&Ke*je*g(gt)/gt;return[gt*g(ht)/je,d-gt*t(ht)]}return qe.invert=function(Ke,it){var gt=Ke*je,ht=d-it,kt=E(gt*gt+ht*ht),Jt=n(gt,ht);return[(kt?kt/g(kt):1)*Jt/je,d-kt]},qe}pe.invert=function(je,qe){var Ke,it,gt=se*qe,ht=qe<0?-w:w,kt=25;do{it=gt-T*g(ht),ht-=Ke=(g(2*ht)+2*ht-x*g(it))/(2*t(2*ht)+2+x*t(it)*T*t(ht))}while(v(Ke)>o&&--kt>0);return it=gt-T*g(ht),[je*(1/t(it)+1.11072/t(ht))/se,it]},ge.invert=function(je,qe){return[je/t(qe),qe]};var be=re(1,4/x,x);function Se(je,qe,Ke,it,gt,ht){var kt,Jt=t(ht);if(v(je)>1||v(ht)>1)kt=S(Ke*gt+qe*it*Jt);else{var Qt=g(je/2),Wt=g(ht/2);kt=2*P(E(Qt*Qt+qe*it*Wt*Wt))}return v(kt)>o?[kt,n(it*g(ht),qe*gt-Ke*it*Jt)]:[0,0]}function fe(je,qe,Ke){return S((je*je+qe*qe-Ke*Ke)/(2*je*qe))}function me(je){return je-2*x*r((je+x)/(2*x))}function Te(je,qe,Ke){for(var it,gt=[[je[0],je[1],g(je[1]),t(je[1])],[qe[0],qe[1],g(qe[1]),t(qe[1])],[Ke[0],Ke[1],g(Ke[1]),t(Ke[1])]],ht=gt[2],kt=0;kt<3;++kt,ht=it)ht.v=Se((it=gt[kt])[1]-ht[1],ht[3],ht[2],it[3],it[2],it[0]-ht[0]),ht.point=[0,0];var Jt=fe(gt[0].v[0],gt[2].v[0],gt[1].v[0]),Qt=fe(gt[0].v[0],gt[1].v[0],gt[2].v[0]),Wt=x-Jt;gt[2].point[1]=0,gt[0].point[0]=-(gt[1].point[0]=gt[0].v[0]/2);var tr=[gt[2].point[0]=gt[0].point[0]+gt[2].v[0]*t(Jt),2*(gt[0].point[1]=gt[1].point[1]=gt[2].v[0]*g(Jt))];return function(ur,gr){var xr,Pr=g(gr),en=t(gr),hn=new Array(3);for(xr=0;xr<3;++xr){var Sn=gt[xr];if(hn[xr]=Se(gr-Sn[1],Sn[3],Sn[2],en,Pr,ur-Sn[0]),!hn[xr][0])return Sn.point;hn[xr][1]=me(hn[xr][1]-Sn.v[1])}var Pn=tr.slice();for(xr=0;xr<3;++xr){var In=fe(gt[xr].v[0],hn[xr][0],hn[2==xr?0:xr+1][0]);hn[xr][1]<0&&(In=-In),xr?1==xr?(Pn[0]-=hn[xr][0]*t(In=Qt-In),Pn[1]-=hn[xr][0]*g(In)):(Pn[0]+=hn[xr][0]*t(In=Wt-In),Pn[1]+=hn[xr][0]*g(In)):(Pn[0]+=hn[xr][0]*t(In),Pn[1]-=hn[xr][0]*g(In))}return Pn[0]/=3,Pn[1]/=3,Pn}}function _e(je){return je[0]*=O,je[1]*=O,je}function Me(je,qe,Ke){var it=m.geoCentroid({type:"MultiPoint",coordinates:[je,qe,Ke]}),gt=[-it[0],-it[1]],ht=m.geoRotation(gt),kt=Te(_e(ht(je)),_e(ht(qe)),_e(ht(Ke)));kt.invert=j(kt);var Jt=m.geoProjection(kt).rotate(gt),Qt=Jt.center;return delete Jt.rotate,Jt.center=function(Wt){return arguments.length?Qt(ht(Wt)):ht.invert(Qt())},Jt.clipAngle(90)}function Ie(je,qe){var Ke=E(1-g(qe));return[2/k*je*Ke,k*(1-Ke)]}function ze(je){var qe=h(je);function Ke(it,gt){return[it,(it?it/g(it):1)*(g(gt)*t(it)-qe*t(gt))]}return Ke.invert=qe?function(it,gt){it&&(gt*=g(it)/it);var ht=t(it);return[it,2*n(E(ht*ht+qe*qe-gt*gt)-ht,qe-gt)]}:function(it,gt){return[it,P(it?gt*h(it)/it:gt)]},Ke}Ie.invert=function(je,qe){var Ke=(Ke=qe/k-1)*Ke;return[Ke>0?je*E(x/Ke)/2:0,P(1-Ke)]};var Ve=E(3);function Je(je,qe){return[Ve*je*(2*t(2*qe/3)-1)/k,Ve*k*g(qe/3)]}function De(je){var qe=t(je);function Ke(it,gt){return[it*qe,g(gt)/qe]}return Ke.invert=function(it,gt){return[it/qe,P(gt*qe)]},Ke}function Be(je){var qe=t(je);function Ke(it,gt){return[it*qe,(1+qe)*h(gt/2)]}return Ke.invert=function(it,gt){return[it/qe,2*e(gt/(1+qe))]},Ke}function Ze(je,qe){var Ke=E(8/(3*x));return[Ke*je*(1-v(qe)/x),Ke*qe]}function Ye(je,qe){var Ke=E(4-3*g(v(qe)));return[2/E(6*x)*je*Ke,f(qe)*E(2*x/3)*(2-Ke)]}function tt(je,qe){var Ke=E(x*(4+x));return[2/Ke*je*(1+E(1-4*qe*qe/(x*x))),4/Ke*qe]}function st(je,qe){var Ke=(2+d)*g(qe);qe/=2;for(var it=0,gt=1/0;it<10&&v(gt)>o;it++){var ht=t(qe);qe-=gt=(qe+g(qe)*(ht+2)-Ke)/(2*ht*(1+ht))}return[2/E(x*(4+x))*je*(1+t(qe)),2*E(x/(4+x))*g(qe)]}function vt(je,qe){return[je*(1+t(qe))/E(2+x),2*qe/E(2+x)]}function Pt(je,qe){for(var Ke=(1+d)*g(qe),it=0,gt=1/0;it<10&&v(gt)>o;it++)qe-=gt=(qe+g(qe)-Ke)/(1+t(qe));return Ke=E(2+x),[je*(1+t(qe))/Ke,2*qe/Ke]}Je.invert=function(je,qe){var Ke=3*P(qe/(Ve*k));return[k*je/(Ve*(2*t(2*Ke/3)-1)),Ke]},Ze.invert=function(je,qe){var Ke=E(8/(3*x)),it=qe/Ke;return[je/(Ke*(1-v(it)/x)),it]},Ye.invert=function(je,qe){var Ke=2-v(qe)/E(2*x/3);return[je*E(6*x)/(2*Ke),f(qe)*P((4-Ke*Ke)/3)]},tt.invert=function(je,qe){var Ke=E(x*(4+x))/2;return[je*Ke/(1+E(1-qe*qe*(4+x)/(4*x))),qe*Ke/2]},st.invert=function(je,qe){var Ke=qe*E((4+x)/x)/2,it=P(Ke),gt=t(it);return[je/(2/E(x*(4+x))*(1+gt)),P((it+Ke*(gt+2))/(2+d))]},vt.invert=function(je,qe){var Ke=E(2+x),it=qe*Ke/2;return[Ke*je/(1+t(it)),it]},Pt.invert=function(je,qe){var Ke=1+d,it=E(Ke/2);return[2*je*it/(1+t(qe*=it)),P((qe+g(qe))/Ke)]};var Mt=3+2*T;function rt(je,qe){var Ke=g(je/=2),it=t(je),gt=E(t(qe)),ht=t(qe/=2),kt=g(qe)/(ht+T*it*gt),Jt=E(2/(1+kt*kt)),Qt=E((T*ht+(it+Ke)*gt)/(T*ht+(it-Ke)*gt));return[Mt*(Jt*(Qt-1/Qt)-2*u(Qt)),Mt*(Jt*kt*(Qt+1/Qt)-2*e(kt))]}rt.invert=function(je,qe){if(!(Ke=W.invert(je/1.2,1.065*qe)))return null;var Ke,it=Ke[0],gt=Ke[1],ht=20;je/=Mt,qe/=Mt;do{var kt=it/2,Jt=gt/2,Qt=g(kt),Wt=t(kt),tr=g(Jt),ur=t(Jt),gr=t(gt),xr=E(gr),Pr=tr/(ur+T*Wt*xr),en=Pr*Pr,hn=E(2/(1+en)),Sn=(T*ur+(Wt+Qt)*xr)/(T*ur+(Wt-Qt)*xr),Pn=E(Sn),Un=Pn-1/Pn,In=Pn+1/Pn,hi=hn*Un-2*u(Pn)-je,bi=hn*Pr*In-2*e(Pr)-qe,Oi=tr&&_*xr*Qt*en/tr,Ii=(T*Wt*ur+xr)/(2*(ur+T*Wt*xr)*(ur+T*Wt*xr)*xr),zi=-.5*Pr*hn*hn*hn,va=zi*Oi,pa=zi*Ii,ta=(ta=2*ur+T*xr*(Wt-Qt))*ta*Pn,ra=(T*Wt*ur*xr+gr)/ta,da=-T*Qt*tr/(xr*ta),Oa=Un*va-2*ra/Pn+hn*(ra+ra/Sn),Ya=Un*pa-2*da/Pn+hn*(da+da/Sn),Wa=Pr*In*va-2*Oi/(1+en)+hn*In*Oi+hn*Pr*(ra-ra/Sn),Xa=Pr*In*pa-2*Ii/(1+en)+hn*In*Ii+hn*Pr*(da-da/Sn),Za=Ya*Wa-Xa*Oa;if(!Za)break;var Ei=(bi*Ya-hi*Xa)/Za,ft=(hi*Wa-bi*Oa)/Za;it-=Ei,gt=s(-d,i(d,gt-ft))}while((v(Ei)>o||v(ft)>o)&&--ht>0);return v(v(gt)-d)<o?[0,gt]:ht&&[it,gt]};var et=t(35*O);function bt(je,qe){var Ke=h(qe/2);return[je*et*E(1-Ke*Ke),(1+et)*Ke]}function Rt(je,qe){var Ke=qe/2,it=t(Ke);return[2*je/k*t(qe)*it*it,k*h(Ke)]}function Yt(je){var qe=1-je,Ke=gt(x,0)[0]-gt(-x,0)[0],it=E(2*(gt(0,d)[1]-gt(0,-d)[1])/Ke);function gt(Jt,Qt){var Wt=t(Qt),tr=g(Qt);return[Wt/(qe+je*Wt)*Jt,qe*Qt+je*tr]}function ht(Jt,Qt){var Wt=gt(Jt,Qt);return[Wt[0]*it,Wt[1]/it]}function kt(Jt){return ht(0,Jt)[1]}return ht.invert=function(Jt,Qt){var Wt=Q(kt,Qt);return[Jt/it*(je+qe/t(Wt)),Wt]},ht}function Fe(je){return[je[0]/2,P(h(je[1]/2*O))*M]}function He(je){return[2*je[0],2*e(g(je[1]*O))*M]}function Oe(je,qe){var Ke=2*x/qe,it=je*je;function gt(ht,kt){var Jt=m.geoAzimuthalEquidistantRaw(ht,kt),Qt=Jt[0],Wt=Jt[1],tr=Qt*Qt+Wt*Wt;if(tr>it){var ur=E(tr),gr=n(Wt,Qt),xr=Ke*c(gr/Ke),Pr=gr-xr,en=je*t(Pr),hn=(je*g(Pr)-Pr*g(en))/(d-en),Sn=$e(Pr,hn),Pn=(x-je)/ke(Sn,en,x);Qt=ur;var Un,In=50;do{Qt-=Un=(je+ke(Sn,en,Qt)*Pn-ur)/(Sn(Qt)*Pn)}while(v(Un)>o&&--In>0);Wt=Pr*g(Qt),Qt<d&&(Wt-=hn*(Qt-d));var hi=g(xr),bi=t(xr);Jt[0]=Qt*bi-Wt*hi,Jt[1]=Qt*hi+Wt*bi}return Jt}return gt.invert=function(ht,kt){var Jt=ht*ht+kt*kt;if(Jt>it){var Qt=E(Jt),Wt=n(kt,ht),tr=Ke*c(Wt/Ke),ur=Wt-tr;ht=Qt*t(ur),kt=Qt*g(ur);for(var gr=ht-d,xr=g(ht),Pr=kt/xr,en=ht<d?1/0:0,hn=10;;){var Sn=je*g(Pr),Pn=je*t(Pr),Un=g(Pn),In=d-Pn,hi=(Sn-Pr*Un)/In,bi=$e(Pr,hi);if(v(en)<1e-12||!--hn)break;Pr-=en=(Pr*xr-hi*gr-kt)/(xr-2*gr*(In*(Pn+Pr*Sn*t(Pn)-Un)-Sn*(Sn-Pr*Un))/(In*In))}ht=(Qt=je+ke(bi,Pn,ht)*(x-je)/ke(bi,Pn,x))*t(Wt=tr+Pr),kt=Qt*g(Wt)}return m.geoAzimuthalEquidistantRaw.invert(ht,kt)},gt}function $e(je,qe){return function(Ke){var it=je*t(Ke);return Ke<d&&(it-=qe),E(1+it*it)}}function ke(je,qe,Ke){for(var it=(Ke-qe)/50,gt=je(qe)+je(Ke),ht=1,kt=qe;ht<50;++ht)gt+=2*je(kt+=it);return.5*gt*it}function Le(je,qe,Ke,it,gt,ht,kt,Jt){function Qt(Wt,tr){if(!tr)return[je*Wt/x,0];var ur=tr*tr,gr=je+ur*(qe+ur*(Ke+ur*it)),xr=tr*(gt-1+ur*(ht-Jt+ur*kt)),Pr=(gr*gr+xr*xr)/(2*xr),en=Wt*P(gr/Pr)/x;return[Pr*g(en),tr*(1+ur*Jt)+Pr*(1-t(en))]}return arguments.length<8&&(Jt=0),Qt.invert=function(Wt,tr){var ur,gr,xr=x*Wt/je,Pr=tr,en=50;do{var hn=Pr*Pr,Sn=je+hn*(qe+hn*(Ke+hn*it)),Pn=Pr*(gt-1+hn*(ht-Jt+hn*kt)),Un=Sn*Sn+Pn*Pn,In=2*Pn,hi=Un/In,bi=hi*hi,Oi=P(Sn/hi)/x,Ii=xr*Oi,zi=Sn*Sn,va=(2*qe+hn*(4*Ke+6*hn*it))*Pr,pa=gt+hn*(3*ht+5*hn*kt),ta=(2*(Sn*va+Pn*(pa-1))*In-Un*(2*(pa-1)))/(In*In),ra=t(Ii),da=g(Ii),Oa=hi*ra,Ya=hi*da,Wa=xr/x*(1/E(1-zi/bi))*(va*hi-Sn*ta)/bi,Xa=Ya-Wt,Za=Pr*(1+hn*Jt)+hi-Oa-tr,Ei=ta*da+Oa*Wa,ft=Oa*Oi,zt=1+ta-(ta*ra-Ya*Wa),ar=Ya*Oi,Ht=Ei*ar-zt*ft;if(!Ht)break;xr-=ur=(Za*Ei-Xa*zt)/Ht,Pr-=gr=(Xa*ar-Za*ft)/Ht}while((v(ur)>o||v(gr)>o)&&--en>0);return[xr,Pr]},Qt}bt.invert=function(je,qe){var Ke=qe/(1+et);return[je&&je/(et*E(1-Ke*Ke)),2*e(Ke)]},Rt.invert=function(je,qe){var Ke=e(qe/k),it=t(Ke),gt=2*Ke;return[je*k/2/(t(gt)*it*it),gt]};var Pe=Le(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Ce=Le(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Xe=Le(5/6*x,-.62636,-.0344,0,1.3493,-.05524,0,.045);function at(je,qe){var Ke=je*je,it=qe*qe;return[je*(1-.162388*it)*(.87-952426e-9*Ke*Ke),qe*(1+it/12)]}at.invert=function(je,qe){var Ke,it=je,gt=qe,ht=50;do{var kt=gt*gt;gt-=Ke=(gt*(1+kt/12)-qe)/(1+kt/4)}while(v(Ke)>o&&--ht>0);ht=50,je/=1-.162388*kt;do{var Jt=(Jt=it*it)*Jt;it-=Ke=(it*(.87-952426e-9*Jt)-je)/(.87-.00476213*Jt)}while(v(Ke)>o&&--ht>0);return[it,gt]};var pt=Le(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function ut(je){var qe=je(d,0)[0]-je(-d,0)[0];function Ke(it,gt){var ht=it>0?-.5:.5,kt=je(it+ht*x,gt);return kt[0]-=ht*qe,kt}return je.invert&&(Ke.invert=function(it,gt){var ht=it>0?-.5:.5,kt=je.invert(it+ht*qe,gt),Jt=kt[0]-ht*x;return Jt<-x?Jt+=2*x:Jt>x&&(Jt-=2*x),kt[0]=Jt,kt}),Ke}function St(je,qe){var Ke=f(je),it=f(qe),gt=t(qe),ht=t(je)*gt,kt=g(je)*gt,Jt=g(it*qe);je=v(n(kt,Jt)),qe=P(ht),v(je-d)>o&&(je%=d);var Qt=function(Wt,tr){if(tr===d)return[0,0];var ur,gr,xr=g(tr),Pr=xr*xr,en=Pr*Pr,hn=1+en,Sn=1+3*en,Pn=1-en,Un=P(1/E(hn)),In=Pn+Pr*hn*Un,hi=(1-xr)/In,bi=E(hi),Oi=hi*hn,Ii=E(Oi),zi=bi*Pn;if(0===Wt)return[0,-(zi+Pr*Ii)];var va,pa=t(tr),ta=1/pa,ra=2*xr*pa,da=(-In*pa-(-3*Pr+Un*Sn)*ra*(1-xr))/(In*In),Oa=-ta*ra,Ya=-ta*(Pr*hn*da+hi*Sn*ra),Wa=-2*ta*(Pn*(.5*da/bi)-2*Pr*bi*ra),Xa=4*Wt/x;if(Wt>.222*x||tr<x/4&&Wt>.175*x){if(ur=(zi+Pr*E(Oi*(1+en)-zi*zi))/(1+en),Wt>x/4)return[ur,ur];var Za=ur,Ei=.5*ur;ur=.5*(Ei+Za),gr=50;do{var zt=ur*(Wa+Oa*E(Oi-ur*ur))+Ya*P(ur/Ii)-Xa;if(!zt)break;zt<0?Ei=ur:Za=ur,ur=.5*(Ei+Za)}while(v(Za-Ei)>o&&--gr>0)}else{ur=o,gr=25;do{var ar=ur*ur,Ht=E(Oi-ar),or=Wa+Oa*Ht,Er=ur*or+Ya*P(ur/Ii)-Xa;ur-=va=Ht?Er/(or+(Ya-Oa*ar)/Ht):0}while(v(va)>o&&--gr>0)}return[ur,-zi-Pr*E(Oi-ur*ur)]}(je>x/4?d-je:je,qe);return je>x/4&&(Jt=Qt[0],Qt[0]=-Qt[1],Qt[1]=-Jt),Qt[0]*=Ke,Qt[1]*=-it,Qt}function ot(je,qe){var Ke,it,gt,ht,kt,Jt;if(qe<o)return[(ht=g(je))-(Ke=qe*(je-ht*(it=t(je)))/4)*it,it+Ke*ht,1-qe*ht*ht/2,je-Ke];if(qe>=1-o)return Ke=(1-qe)/4,gt=1/(it=B(je)),[(ht=((Jt=a(2*(Jt=je)))-1)/(Jt+1))+Ke*((kt=it*R(je))-je)/(it*it),gt-Ke*ht*gt*(kt-je),gt+Ke*ht*gt*(kt+je),2*e(a(je))-d+Ke*(kt-je)/it];var Qt=[1,0,0,0,0,0,0,0,0],Wt=[E(qe),0,0,0,0,0,0,0,0],tr=0;for(it=E(1-qe),kt=1;v(Wt[tr]/Qt[tr])>o&&tr<8;)Ke=Qt[tr++],Wt[tr]=(Ke-it)/2,Qt[tr]=(Ke+it)/2,it=E(Ke*it),kt*=2;gt=kt*Qt[tr]*je;do{gt=(P(ht=Wt[tr]*g(it=gt)/Qt[tr])+gt)/2}while(--tr);return[g(gt),ht=t(gt),ht/t(gt-it),gt]}function Et(je,qe){if(!qe)return je;if(1===qe)return u(h(je/2+w));for(var Ke=1,it=E(1-qe),gt=E(qe),ht=0;v(gt)>o;ht++){if(je%x){var kt=e(it*h(je)/Ke);kt<0&&(kt+=x),je+=kt+~~(je/x)*x}else je+=je;gt=(Ke+it)/2,it=E(Ke*it),gt=((Ke=gt)-it)/2}return je/(l(2,ht)*Ke)}function Lt(je,qe){var Wt,tr,ur,gr,xr,Ke=(T-1)/(T+1),it=E(1-Ke*Ke),gt=Et(d,it*it),ht=u(h(x/4+v(qe)/2)),kt=a(-1*ht)/E(Ke),Jt=(Wt=kt*t(-1*je),gr=(tr=kt*g(-1*je))+1,[.5*((Wt>=0?d:-d)-n(xr=1-(ur=Wt*Wt)-tr*tr,2*Wt)),-.25*u(xr*xr+4*ur)+.5*u(gr*gr+ur)]),Qt=function(Wt,tr,ur){var gr=v(Wt),xr=R(v(tr));if(gr){var Pr=1/g(gr),en=1/(h(gr)*h(gr)),hn=-(en+ur*(xr*xr*Pr*Pr)-1+ur),Sn=(-hn+E(hn*hn-(ur-1)*en*4))/2;return[Et(e(1/E(Sn)),ur)*f(Wt),Et(e(E((Sn/en-1)/ur)),1-ur)*f(tr)]}return[0,Et(e(xr),1-ur)*f(tr)]}(Jt[0],Jt[1],it*it);return[-Qt[1],(qe>=0?1:-1)*(.5*gt-Qt[0])]}function Qe(je){var qe=g(je),Ke=t(je),it=mt(je);function gt(ht,kt){var Jt=it(ht,kt);ht=Jt[0];var Qt=g(kt=Jt[1]),Wt=t(kt),tr=t(ht),ur=S(qe*Qt+Ke*Wt*tr),gr=g(ur),xr=v(gr)>o?ur/gr:1;return[xr*Ke*g(ht),(v(ht)>d?xr:-xr)*(qe*Wt-Ke*Qt*tr)]}return it.invert=mt(-je),gt.invert=function(ht,kt){var Jt=E(ht*ht+kt*kt),Qt=-g(Jt),Wt=t(Jt),tr=Jt*Wt,ur=-kt*Qt,gr=Jt*qe,xr=E(tr*tr+ur*ur-gr*gr),Pr=n(tr*gr+ur*xr,ur*gr-tr*xr),en=(Jt>d?-1:1)*n(ht*Qt,Jt*t(Pr)*Wt+kt*g(Pr)*Qt);return it.invert(en,Pr)},gt}function mt(je){var qe=g(je),Ke=t(je);return function(it,gt){var ht=t(gt),kt=t(it)*ht,Jt=g(it)*ht,Qt=g(gt);return[n(Jt,kt*Ke-Qt*qe),P(Qt*Ke+kt*qe)]}}St.invert=function(je,qe){v(je)>1&&(je=2*f(je)-je),v(qe)>1&&(qe=2*f(qe)-qe);var Ke=f(je),it=f(qe),gt=-Ke*je,ht=-it*qe,kt=ht/gt<1,Jt=function(ur,gr){for(var xr=0,Pr=1,en=.5,hn=50;;){var Sn=en*en,Pn=E(en),Un=P(1/E(1+Sn)),In=1-Sn+en*(1+Sn)*Un,hi=(1-Pn)/In,bi=E(hi),Oi=hi*(1+Sn),Ii=bi*(1-Sn),zi=E(Oi-ur*ur),va=gr+Ii+en*zi;if(v(Pr-xr)<1e-12||0==--hn||0===va)break;va>0?xr=en:Pr=en,en=.5*(xr+Pr)}if(!hn)return null;var pa=P(Pn),ta=t(pa),ra=1/ta,da=2*Pn*ta,Oa=(-In*ta-(-3*en+Un*(1+3*Sn))*da*(1-Pn))/(In*In);return[x/4*(ur*(-2*ra*(.5*Oa/bi*(1-Sn)-2*en*bi*da)+-ra*da*zi)+-ra*(en*(1+Sn)*Oa+hi*(1+3*Sn)*da)*P(ur/E(Oi))),pa]}(kt?ht:gt,kt?gt:ht),Qt=Jt[0],Wt=Jt[1],tr=t(Wt);return kt&&(Qt=-d-Qt),[Ke*(n(g(Qt)*tr,-g(Wt))+x),it*P(t(Qt)*tr)]},Lt.invert=function(je,qe){var Ke,it,gt,ht,kt,Jt,xr,Pr,en,Qt=(T-1)/(T+1),Wt=E(1-Qt*Qt),ur=(it=-je,gt=Wt*Wt,(Ke=.5*Et(d,Wt*Wt)-qe)?(ht=ot(Ke,gt),it?(Jt=(kt=ot(it,1-gt))[1]*kt[1]+gt*ht[0]*ht[0]*kt[0]*kt[0],[[ht[0]*kt[2]/Jt,ht[1]*ht[2]*kt[0]*kt[1]/Jt],[ht[1]*kt[1]/Jt,-ht[0]*ht[2]*kt[0]*kt[2]/Jt],[ht[2]*kt[1]*kt[2]/Jt,-gt*ht[0]*ht[1]*kt[0]/Jt]]):[[ht[0],0],[ht[1],0],[ht[2],0]]):[[0,(kt=ot(it,1-gt))[0]/kt[1]],[1/kt[1],0],[kt[2]/kt[1],0]]),gr=[((xr=ur[0])[0]*(Pr=ur[1])[0]+xr[1]*Pr[1])/(en=Pr[0]*Pr[0]+Pr[1]*Pr[1]),(xr[1]*Pr[0]-xr[0]*Pr[1])/en];return[n(gr[1],gr[0])/-1,2*e(a(-.5*u(Qt*gr[0]*gr[0]+Qt*gr[1]*gr[1])))-d]};var It=P(1-1/3)*M,jt=De(0);function Zt(je){var qe=It*O,Ke=Ie(x,qe)[0]-Ie(-x,qe)[0],it=jt(0,qe)[1],gt=Ie(0,qe)[1],ht=k-gt,kt=L/je,Jt=4/L,Qt=it+ht*ht*4/L;function Wt(tr,ur){var gr,xr=v(ur);if(xr>qe){var Pr=i(je-1,s(0,r((tr+x)/kt)));(gr=Ie(tr+=x*(je-1)/je-Pr*kt,xr))[0]=gr[0]*L/Ke-L*(je-1)/(2*je)+Pr*L/je,gr[1]=it+4*(gr[1]-gt)*ht/L,ur<0&&(gr[1]=-gr[1])}else gr=jt(tr,ur);return gr[0]*=Jt,gr[1]/=Qt,gr}return Wt.invert=function(tr,ur){tr/=Jt;var gr=v(ur*=Qt);if(gr>it){var xr=i(je-1,s(0,r((tr+x)/kt))),Pr=Ie.invert(tr=(tr+x*(je-1)/je-xr*kt)*Ke/L,.25*(gr-it)*L/ht+gt);return Pr[0]-=x*(je-1)/je-xr*kt,ur<0&&(Pr[1]=-Pr[1]),Pr}return jt.invert(tr,ur)},Wt}function Re(je,qe){return[je,1&qe?90-o:It]}function lt(je,qe){return[je,1&qe?-90+o:-It]}function _t(je){return[je[0]*(1-o),je[1]]}function Dt(je){var qe,Ke=1+je,it=P(g(1/Ke)),gt=2*E(x/(qe=x+4*it*Ke)),ht=.5*gt*(Ke+E(je*(2+je))),kt=je*je,Jt=Ke*Ke;function Qt(Wt,tr){var ur,gr,xr=1-g(tr);if(xr&&xr<2){var Pr,en=d-tr,hn=25;do{var Sn=g(en),Pn=t(en),Un=it+n(Sn,Ke-Pn),In=1+Jt-2*Ke*Pn;en-=Pr=(en-kt*it-Ke*Sn+In*Un-.5*xr*qe)/(2*Ke*Sn*Un)}while(v(Pr)>1e-12&&--hn>0);ur=gt*E(In),gr=Wt*Un/x}else ur=gt*(je+xr),gr=Wt*it/x;return[ur*g(gr),ht-ur*t(gr)]}return Qt.invert=function(Wt,tr){var ur=Wt*Wt+(tr-=ht)*tr,gr=(1+Jt-ur/(gt*gt))/(2*Ke),xr=S(gr),Pr=g(xr),en=it+n(Pr,Ke-gr);return[P(Wt/E(ur))*x/en,P(1-2*(xr-kt*it-Ke*Pr+(1+Jt-2*Ke*gr)*en)/qe)]},Qt}function Vt(je,qe){return qe>-.7109889596207567?((je=ne(je,qe))[1]+=.0528035274542,je):ge(je,qe)}function nr(je,qe){return v(qe)>.7109889596207567?((je=ne(je,qe))[1]-=qe>0?.0528035274542:-.0528035274542,je):ge(je,qe)}function Gt(je,qe,Ke,it){var gt=E(4*x/(2*Ke+(1+je-qe/2)*g(2*Ke)+(je+qe)/2*g(4*Ke)+qe/2*g(6*Ke))),ht=E(it*g(Ke)*E((1+je*t(2*Ke)+qe*t(4*Ke))/(1+je+qe))),kt=Ke*Qt(1);function Jt(ur){return E(1+je*t(2*ur)+qe*t(4*ur))}function Qt(ur){var gr=ur*Ke;return(2*gr+(1+je-qe/2)*g(2*gr)+(je+qe)/2*g(4*gr)+qe/2*g(6*gr))/Ke}function Wt(ur){return Jt(ur)*g(ur)}var tr=function(ur,gr){var xr=Ke*Q(Qt,kt*g(gr)/Ke,gr/x);isNaN(xr)&&(xr=Ke*f(gr));var Pr=gt*Jt(xr);return[Pr*ht*ur/x*t(xr),Pr/ht*g(xr)]};return tr.invert=function(ur,gr){var xr=Q(Wt,gr*ht/gt);return[ur*x/(t(xr)*gt*ht*Jt(xr)),P(Ke*Qt(xr/Ke)/kt)]},0===Ke&&(gt=E(it/x),(tr=function(ur,gr){return[ur*gt,g(gr)/gt]}).invert=function(ur,gr){return[ur/gt,P(gr*gt)]}),tr}function ir(je,qe,Ke){function it(xr){return je+(1-je)*l(1-l(xr,qe),1/qe)}function gt(xr){return function(je,qe,Ke,it,gt){void 0===it&&(it=1e-8),void 0===gt&&(gt=20);var ht=je(0),kt=je(.5*(0+Ke)),Jt=je(Ke);return function Qt(Wt,tr,ur,gr,xr,Pr,en,hn,Sn,Pn,Un){if(Un.nanEncountered)return NaN;var In,hi,bi,Oi,Ii,zi,va,pa,ta,ra;if(hi=Wt(tr+.25*(In=ur-tr)),bi=Wt(ur-.25*In),isNaN(hi))Un.nanEncountered=!0;else{if(!isNaN(bi))return ra=((zi=(Oi=In*(gr+4*hi+xr)/12)+(Ii=In*(xr+4*bi+Pr)/12))-en)/15,Pn>Sn?(Un.maxDepthCount++,zi+ra):Math.abs(ra)<hn?zi+ra:(pa=Qt(Wt,tr,va=tr+.5*In,gr,hi,xr,Oi,.5*hn,Sn,Pn+1,Un),isNaN(pa)?(Un.nanEncountered=!0,NaN):(ta=Qt(Wt,va,ur,xr,bi,Pr,Ii,.5*hn,Sn,Pn+1,Un),isNaN(ta)?(Un.nanEncountered=!0,NaN):pa+ta));Un.nanEncountered=!0}}(je,0,Ke,ht,kt,Jt,(ht+4*kt+Jt)*(Ke-0)/6,it,gt,1,{maxDepthCount:0,nanEncountered:!1})}(it,0,xr,1e-4)}for(var ht=1/gt(1),Jt=(1+1e-8)*ht,Qt=[],Wt=0;Wt<=1e3;Wt++)Qt.push(gt(Wt/1e3)*Jt);function tr(xr){var Pr=0,en=1e3,hn=500;do{Qt[hn]>xr?en=hn:Pr=hn,hn=Pr+en>>1}while(hn>Pr);var Sn=Qt[hn+1]-Qt[hn];return Sn&&(Sn=(xr-Qt[hn+1])/Sn),(hn+1+Sn)/1e3}var ur=2*tr(1)/x*ht/Ke,gr=function(xr,Pr){var en=tr(v(g(Pr))),hn=it(en)*xr;return en/=ur,[hn,Pr>=0?en:-en]};return gr.invert=function(xr,Pr){var en;return v(Pr*=ur)<1&&(en=f(Pr)*P(gt(v(Pr))*ht)),[xr/it(v(Pr)),en]},gr}function dr(je,qe){return v(je[0]-qe[0])<o&&v(je[1]-qe[1])<o}function hr(je,qe){for(var Ke,it,gt,ht=-1,kt=je.length,Jt=je[0],Qt=[];++ht<kt;){it=((Ke=je[ht])[0]-Jt[0])/qe,gt=(Ke[1]-Jt[1])/qe;for(var Wt=0;Wt<qe;++Wt)Qt.push([Jt[0]+Wt*it,Jt[1]+Wt*gt]);Jt=Ke}return Qt.push(Ke),Qt}function cr(je){var qe,Ke,gt,ht,Jt,Qt=[],Wt=je[0].length;for(Jt=0;Jt<Wt;++Jt)Ke=(qe=je[0][Jt])[0][0],Qt.push(hr([[Ke+o,qe[0][1]+o],[Ke+o,(gt=qe[1][1])-o],[(ht=qe[2][0])-o,gt-o],[ht-o,qe[2][1]+o]],30));for(Jt=je[1].length-1;Jt>=0;--Jt)Ke=(qe=je[1][Jt])[0][0],Qt.push(hr([[(ht=qe[2][0])-o,qe[2][1]-o],[ht-o,(gt=qe[1][1])+o],[Ke+o,gt+o],[Ke+o,qe[0][1]-o]],30));return{type:"Polygon",coordinates:[b.merge(Qt)]}}function sr(je,qe,Ke){var it,gt;function ht(Qt,Wt){for(var tr=Wt<0?-1:1,ur=qe[+(Wt<0)],gr=0,xr=ur.length-1;gr<xr&&Qt>ur[gr][2][0];++gr);var Pr=je(Qt-ur[gr][1][0],Wt);return Pr[0]+=je(ur[gr][1][0],tr*Wt>tr*ur[gr][0][1]?ur[gr][0][1]:Wt)[0],Pr}Ke?ht.invert=Ke(ht):je.invert&&(ht.invert=function(Qt,Wt){for(var tr=gt[+(Wt<0)],ur=qe[+(Wt<0)],gr=0,xr=tr.length;gr<xr;++gr){var Pr=tr[gr];if(Pr[0][0]<=Qt&&Qt<Pr[1][0]&&Pr[0][1]<=Wt&&Wt<Pr[1][1]){var en=je.invert(Qt-je(ur[gr][1][0],0)[0],Wt);return en[0]+=ur[gr][1][0],dr(ht(en[0],en[1]),[Qt,Wt])?en:null}}});var kt=m.geoProjection(ht),Jt=kt.stream;return kt.stream=function(Qt){var Wt=kt.rotate(),tr=Jt(Qt),ur=(kt.rotate([0,0]),Jt(Qt));return kt.rotate(Wt),tr.sphere=function(){m.geoStream(it,ur)},tr},kt.lobes=function(Qt){return arguments.length?(it=cr(Qt),qe=Qt.map(function(Wt){return Wt.map(function(tr){return[[tr[0][0]*O,tr[0][1]*O],[tr[1][0]*O,tr[1][1]*O],[tr[2][0]*O,tr[2][1]*O]]})}),gt=qe.map(function(Wt){return Wt.map(function(tr){var ur,gr=je(tr[0][0],tr[0][1])[0],xr=je(tr[2][0],tr[2][1])[0],Pr=je(tr[1][0],tr[0][1])[1],en=je(tr[1][0],tr[1][1])[1];return Pr>en&&(ur=Pr,Pr=en,en=ur),[[gr,Pr],[xr,en]]})}),kt):qe.map(function(Wt){return Wt.map(function(tr){return[[tr[0][0]*M,tr[0][1]*M],[tr[1][0]*M,tr[1][1]*M],[tr[2][0]*M,tr[2][1]*M]]})})},null!=qe&&kt.lobes(qe),kt}Vt.invert=function(je,qe){return qe>-.7109889596207567?ne.invert(je,qe-.0528035274542):ge.invert(je,qe)},nr.invert=function(je,qe){return v(qe)>.7109889596207567?ne.invert(je,qe+(qe>0?.0528035274542:-.0528035274542)):ge.invert(je,qe)};var mr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Ir=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],vr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Br=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],Jr=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],ln=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function En(je,qe){return[3/L*je*E(x*x/3-qe*qe),qe]}function Cn(je){function qe(Ke,it){if(v(v(it)-d)<o)return[0,it<0?-2:2];var gt=g(it),ht=l((1+gt)/(1-gt),je/2),kt=.5*(ht+1/ht)+t(Ke*=je);return[2*g(Ke)/kt,(ht-1/ht)/kt]}return qe.invert=function(Ke,it){var gt=v(it);if(v(gt-2)<o)return Ke?null:[0,f(it)*d];if(gt>2)return null;var ht=(Ke/=2)*Ke,kt=(it/=2)*it,Jt=2*it/(1+ht+kt);return Jt=l((1+Jt)/(1-Jt),1/je),[n(2*Ke,1-ht-kt)/je,P((Jt-1)/(Jt+1))]},qe}En.invert=function(je,qe){return[L/3*je/E(x*x/3-qe*qe),qe]};var An=x/T;function $r(je,qe){return[je*(1+E(t(qe)))/2,qe/(t(qe/2)*t(je/6))]}function Rr(je,qe){var Ke=je*je,it=qe*qe;return[je*(.975534+it*(-.0143059*Ke-.119161+-.0547009*it)),qe*(1.00384+Ke*(.0802894+-.02855*it+199025e-9*Ke)+it*(.0998909+-.0491032*it))]}function Lr(je,qe){return[g(je)/t(qe),h(qe)*t(je)]}function Qr(je){var qe=t(je),Ke=h(w+je/2);function it(gt,ht){var kt=ht-je,Jt=v(kt)<o?gt*qe:v(Jt=w+ht/2)<o||v(v(Jt)-d)<o?0:gt*kt/u(h(Jt)/Ke);return[Jt,kt]}return it.invert=function(gt,ht){var kt,Jt=ht+je;return[v(ht)<o?gt/qe:v(kt=w+Jt/2)<o||v(v(kt)-d)<o?0:gt*u(h(kt)/Ke)/ht,Jt]},it}function On(je,qe){return[je,1.25*u(h(w+.4*qe))]}function zr(je){var qe=je.length-1;function Ke(it,gt){for(var ht,kt=t(gt),Jt=2/(1+kt*t(it)),Qt=Jt*kt*g(it),Wt=Jt*g(gt),tr=qe,ur=je[tr],gr=ur[0],xr=ur[1];--tr>=0;)gr=(ur=je[tr])[0]+Qt*(ht=gr)-Wt*xr,xr=ur[1]+Qt*xr+Wt*ht;return[gr=Qt*(ht=gr)-Wt*xr,xr=Qt*xr+Wt*ht]}return Ke.invert=function(it,gt){var ht=20,kt=it,Jt=gt;do{for(var Qt,Wt=qe,tr=je[Wt],ur=tr[0],gr=tr[1],xr=0,Pr=0;--Wt>=0;)xr=ur+kt*(Qt=xr)-Jt*Pr,Pr=gr+kt*Pr+Jt*Qt,ur=(tr=je[Wt])[0]+kt*(Qt=ur)-Jt*gr,gr=tr[1]+kt*gr+Jt*Qt;var en,hn,Sn=(xr=ur+kt*(Qt=xr)-Jt*Pr)*xr+(Pr=gr+kt*Pr+Jt*Qt)*Pr;kt-=en=((ur=kt*(Qt=ur)-Jt*gr-it)*xr+(gr=kt*gr+Jt*Qt-gt)*Pr)/Sn,Jt-=hn=(gr*xr-ur*Pr)/Sn}while(v(en)+v(hn)>1e-12&&--ht>0);if(ht){var Pn=E(kt*kt+Jt*Jt),Un=2*e(.5*Pn),In=g(Un);return[n(kt*In,Pn*t(Un)),Pn?P(Jt*In/Pn):0]}},Ke}$r.invert=function(je,qe){var Ke=v(je),it=v(qe),gt=o,ht=d;it<An?ht*=it/An:gt+=6*S(An/it);for(var kt=0;kt<25;kt++){var Jt=g(ht),Qt=E(t(ht)),Wt=g(ht/2),tr=t(ht/2),ur=g(gt/6),gr=t(gt/6),xr=.5*gt*(1+Qt)-Ke,Pr=ht/(tr*gr)-it,en=Qt?-.25*gt*Jt/Qt:0,hn=.5*(1+Qt),Sn=(1+.5*ht*Wt/tr)/(tr*gr),Pn=ht/tr*(ur/6)/(gr*gr),Un=en*Pn-Sn*hn,In=(xr*Pn-Pr*hn)/Un,hi=(Pr*en-xr*Sn)/Un;if(ht-=In,gt-=hi,v(In)<o&&v(hi)<o)break}return[je<0?-gt:gt,qe<0?-ht:ht]},Rr.invert=function(je,qe){var Ke=f(je)*x,it=qe/2,gt=50;do{var ht=Ke*Ke,kt=it*it,Jt=Ke*it,Qt=Ke*(.975534+kt*(-.0143059*ht-.119161+-.0547009*kt))-je,Wt=it*(1.00384+ht*(.0802894+-.02855*kt+199025e-9*ht)+kt*(.0998909+-.0491032*kt))-qe,tr=.975534-kt*(.119161+3*ht*.0143059+.0547009*kt),ur=-Jt*(.238322+.2188036*kt+.0286118*ht),gr=Jt*(.1605788+7961e-7*ht+-.0571*kt),xr=1.00384+ht*(.0802894+199025e-9*ht)+kt*(3*(.0998909-.02855*ht)-.245516*kt),Pr=ur*gr-xr*tr,en=(Wt*ur-Qt*xr)/Pr,hn=(Qt*gr-Wt*tr)/Pr;Ke-=en,it-=hn}while((v(en)>o||v(hn)>o)&&--gt>0);return gt&&[Ke,it]},Lr.invert=function(je,qe){var Ke=je*je,it=qe*qe+1,gt=Ke+it,ht=je?_*E((gt-E(gt*gt-4*Ke))/Ke):1/E(it);return[P(je*ht),f(qe)*S(ht)]},On.invert=function(je,qe){return[je,2.5*e(a(.8*qe))-.625*x]};var sn=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Mn=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Tn=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Rn=[[.9245,0],[0,0],[.01943,0]],$t=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Ct(je,qe){var Ke=m.geoProjection(zr(je)).rotate(qe).clipAngle(90),it=m.geoRotation(qe),gt=Ke.center;return delete Ke.rotate,Ke.center=function(ht){return arguments.length?gt(it(ht)):it.invert(gt())},Ke}var Ut=E(6),lr=E(7);function _r(je,qe){var Ke=P(7*g(qe)/(3*Ut));return[Ut*je*(2*t(2*Ke/3)-1)/lr,9*g(Ke/3)/lr]}function qr(je,qe){for(var Ke,it=(1+_)*g(qe),gt=qe,ht=0;ht<25&&(gt-=Ke=(g(gt/2)+g(gt)-it)/(.5*t(gt/2)+t(gt)),!(v(Ke)<o));ht++);return[je*(1+2*t(gt)/t(gt/2))/(3*T),2*E(3)*g(gt/2)/E(2+T)]}function Vr(je,qe){for(var Ke,it=E(6/(4+x)),gt=(1+x/4)*g(qe),ht=qe/2,kt=0;kt<25&&(ht-=Ke=(ht/2+g(ht)-gt)/(.5+t(ht)),!(v(Ke)<o));kt++);return[it*(.5+t(ht))*je/1.5,it*ht]}function br(je,qe){var Ke=qe*qe,it=Ke*Ke,gt=Ke*it;return[je*(.84719-.13063*Ke+gt*gt*(.05494*Ke-.04515-.02326*it+.00331*gt)),qe*(1.01183+it*it*(.01926*Ke-.02625-.00396*it))]}function yr(je,qe){return[je*(1+t(qe))/2,2*(qe-h(qe/2))]}_r.invert=function(je,qe){var Ke=3*P(qe*lr/9);return[je*lr/(Ut*(2*t(2*Ke/3)-1)),P(3*g(Ke)*Ut/7)]},qr.invert=function(je,qe){var Ke=qe*E(2+T)/(2*E(3)),it=2*P(Ke);return[3*T*je/(1+2*t(it)/t(it/2)),P((Ke+g(it))/(1+_))]},Vr.invert=function(je,qe){var Ke=E(6/(4+x)),it=qe/Ke;return v(v(it)-d)<o&&(it=it<0?-d:d),[1.5*je/(Ke*(.5+t(it))),P((it/2+g(it))/(1+x/4))]},br.invert=function(je,qe){var Ke,it,gt,ht,kt=qe,Jt=25;do{kt-=Ke=(kt*(1.01183+(gt=(it=kt*kt)*it)*gt*(.01926*it-.02625-.00396*gt))-qe)/(1.01183+gt*gt*(.21186*it-.23625+-.05148*gt))}while(v(Ke)>1e-12&&--Jt>0);return[je/(.84719-.13063*(it=kt*kt)+(ht=it*(gt=it*it))*ht*(.05494*it-.04515-.02326*gt+.00331*ht)),kt]},yr.invert=function(je,qe){for(var Ke=qe/2,it=0,gt=1/0;it<10&&v(gt)>o;++it){var ht=t(qe/2);qe-=gt=(qe-h(qe/2)-Ke)/(1-.5/(ht*ht))}return[2*je/(1+t(qe)),qe]};var kr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Cr(je,qe){var Ke=g(qe),it=t(qe),gt=f(je);if(0===je||v(qe)===d)return[0,qe];if(0===qe)return[je,0];if(v(je)===d)return[je*it,d*Ke];var ht=x/(2*je)-2*je/x,kt=2*qe/x,Jt=(1-kt*kt)/(Ke-kt),Qt=ht*ht,Wt=Jt*Jt,tr=1+Qt/Wt,ur=1+Wt/Qt,gr=(ht*Ke/Jt-ht/2)/tr,xr=(Wt*Ke/Qt+Jt/2)/ur,Pr=xr*xr-(Wt*Ke*Ke/Qt+Jt*Ke-1)/ur;return[d*(gr+E(gr*gr+it*it/tr)*gt),d*(xr+E(Pr<0?0:Pr)*f(-qe*ht)*gt)]}function Ar(je,qe){var Ke=qe*qe;return[je,qe*(1.0148+Ke*Ke*(.23185+Ke*(.02406*Ke-.14499)))]}function Yr(je,qe){if(v(qe)<o)return[je,0];var Ke=h(qe),it=je*g(qe);return[g(it)/Ke,qe+(1-t(it))/Ke]}function yn(je,qe){return[je[0]*qe[0]+je[1]*qe[3],je[0]*qe[1]+je[1]*qe[4],je[0]*qe[2]+je[1]*qe[5]+je[2],je[3]*qe[0]+je[4]*qe[3],je[3]*qe[1]+je[4]*qe[4],je[3]*qe[2]+je[4]*qe[5]+je[5]]}function Kr(je,qe){return[je[0]-qe[0],je[1]-qe[1]]}function mn(je){return E(je[0]*je[0]+je[1]*je[1])}function jr(je,qe,Ke){function it(kt,Jt){var Qt,Wt=qe(kt,Jt),tr=Wt.project([kt*M,Jt*M]);return(Qt=Wt.transform)?[Qt[0]*tr[0]+Qt[1]*tr[1]+Qt[2],-(Qt[3]*tr[0]+Qt[4]*tr[1]+Qt[5])]:(tr[1]=-tr[1],tr)}(function kt(Jt,Qt){if(Jt.edges=function(Pr){for(var en=Pr.length,hn=[],Sn=Pr[en-1],Pn=0;Pn<en;++Pn)hn.push([Sn,Sn=Pr[Pn]]);return hn}(Jt.face),Qt.face){var Wt=Jt.shared=function(Pr,en){for(var hn,Sn,Pn=Pr.length,Un=null,In=0;In<Pn;++In){hn=Pr[In];for(var hi=en.length;--hi>=0;)if(hn[0]===(Sn=en[hi])[0]&&hn[1]===Sn[1]){if(Un)return[Un,hn];Un=hn}}}(Jt.face,Qt.face),tr=function(je,qe){var kt,Jt,Ke=Kr(je[1],je[0]),it=Kr(qe[1],qe[0]),gt=n((kt=Ke)[0]*(Jt=it)[1]-kt[1]*Jt[0],kt[0]*Jt[0]+kt[1]*Jt[1]),ht=mn(Ke)/mn(it);return yn([1,0,je[0][0],0,1,je[0][1]],yn([ht,0,0,0,ht,0],yn([t(gt),g(gt),0,-g(gt),t(gt),0],[1,0,-qe[0][0],0,1,-qe[0][1]])))}(Wt.map(Qt.project),Wt.map(Jt.project));Jt.transform=Qt.transform?yn(Qt.transform,tr):tr;for(var ur=Qt.edges,gr=0,xr=ur.length;gr<xr;++gr)Nr(Wt[0],ur[gr][1])&&Nr(Wt[1],ur[gr][0])&&(ur[gr]=Jt),Nr(Wt[0],ur[gr][0])&&Nr(Wt[1],ur[gr][1])&&(ur[gr]=Jt);for(gr=0,xr=(ur=Jt.edges).length;gr<xr;++gr)Nr(Wt[0],ur[gr][0])&&Nr(Wt[1],ur[gr][1])&&(ur[gr]=Qt),Nr(Wt[0],ur[gr][1])&&Nr(Wt[1],ur[gr][0])&&(ur[gr]=Qt)}else Jt.transform=Qt.transform;return Jt.children&&Jt.children.forEach(function(Pr){kt(Pr,Jt)}),Jt})(je,{transform:null}),nn(je)&&(it.invert=function(kt,Jt){var Qt=function Wt(tr,ur){var Un,In,gr=tr.project.invert,xr=tr.transform,Pr=ur;if(xr&&(Pr=[(xr=[(In=1/((Un=xr)[0]*Un[4]-Un[1]*Un[3]))*Un[4],-In*Un[1],In*(Un[1]*Un[5]-Un[2]*Un[4]),-In*Un[3],In*Un[0],In*(Un[2]*Un[3]-Un[0]*Un[5])])[0]*Pr[0]+xr[1]*Pr[1]+xr[2],xr[3]*Pr[0]+xr[4]*Pr[1]+xr[5]]),gr&&tr===function(Un){return qe(Un[0]*O,Un[1]*O)}(en=gr(Pr)))return en;for(var en,hn=tr.children,Sn=0,Pn=hn&&hn.length;Sn<Pn;++Sn)if(en=Wt(hn[Sn],ur))return en}(je,[kt,-Jt]);return Qt&&(Qt[0]*=O,Qt[1]*=O,Qt)});var gt=m.geoProjection(it),ht=gt.stream;return gt.stream=function(kt){var Jt=gt.rotate(),Qt=ht(kt),Wt=(gt.rotate([0,0]),ht(kt));return gt.rotate(Jt),Qt.sphere=function(){Wt.polygonStart(),Wt.lineStart(),function tr(ur,gr,xr){var Pr,en,hn=gr.edges,Sn=hn.length,Pn={type:"MultiPoint",coordinates:gr.face},Un=gr.face.filter(function(va){return 90!==v(va[1])}),In=m.geoBounds({type:"MultiPoint",coordinates:Un}),hi=!1,bi=-1,Oi=In[1][0]-In[0][0],Ii=180===Oi||360===Oi?[(In[0][0]+In[1][0])/2,(In[0][1]+In[1][1])/2]:m.geoCentroid(Pn);if(xr)for(;++bi<Sn&&hn[bi]!==xr;);++bi;for(var zi=0;zi<Sn;++zi)en=hn[(zi+bi)%Sn],Array.isArray(en)?(hi||(ur.point((Pr=m.geoInterpolate(en[0],Ii)(o))[0],Pr[1]),hi=!0),ur.point((Pr=m.geoInterpolate(en[1],Ii)(o))[0],Pr[1])):(hi=!1,en!==xr&&tr(ur,en,gr))}(Wt,je),Wt.lineEnd(),Wt.polygonEnd()},Qt},gt.angle(null==Ke?-30:Ke*M)}function Nr(je,qe){return je&&qe&&je[0]===qe[0]&&je[1]===qe[1]}function nn(je){return je.project.invert||je.children&&je.children.some(nn)}Cr.invert=function(je,qe){var Ke=(je/=d)*je,it=Ke+(qe/=d)*qe,gt=x*x;return[je?(it-1+E((1-it)*(1-it)+4*Ke))/(2*je)*d:0,Q(function(ht){return it*(x*g(ht)-2*ht)*x+4*ht*ht*(qe-g(ht))+2*x*ht-gt*qe},0)]},Ar.invert=function(je,qe){qe>1.790857183?qe=1.790857183:qe<-1.790857183&&(qe=-1.790857183);var Ke,it=qe;do{var gt=it*it;it-=Ke=(it*(1.0148+gt*gt*(.23185+gt*(.02406*gt-.14499)))-qe)/(1.0148+gt*gt*(5*.23185+gt*(.21654*gt-1.01493)))}while(v(Ke)>o);return[je,it]},Yr.invert=function(je,qe){if(v(qe)<o)return[je,0];var Ke,it=je*je+qe*qe,gt=.5*qe,ht=10;do{var kt=h(gt),Jt=1/t(gt),Qt=it-2*qe*gt+gt*gt;gt-=Ke=(kt*Qt+2*(gt-qe))/(2+Qt*Jt*Jt+2*(gt-qe)*kt)}while(v(Ke)>o&&--ht>0);return kt=h(gt),[(v(qe)<v(gt+1/kt)?P(je*kt):f(qe)*f(je)*(S(v(je*kt))+d))/g(gt),gt]};var dn=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],wn=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(je){return je.map(function(qe){return dn[qe]})}),ii=2/E(3);function qn(je,qe){var Ke=Ie(je,qe);return[Ke[0]*ii,Ke[1]]}function gn(je,qe){for(var Ke=0,it=je.length,gt=0;Ke<it;++Ke)gt+=je[Ke]*qe[Ke];return gt}function ei(je){return[n(je[1],je[0])*M,P(s(-1,i(1,je[2])))*M]}function ui(je){var qe=je[0]*O,Ke=je[1]*O,it=t(Ke);return[it*t(qe),it*g(qe),g(Ke)]}function Yi(){}function Ea(je,qe){return{type:"FeatureCollection",features:je.features.map(function(Ke){return ea(Ke,qe)})}}function ea(je,qe){return{type:"Feature",id:je.id,properties:je.properties,geometry:ga(je.geometry,qe)}}function ga(je,qe){if(!je)return null;if("GeometryCollection"===je.type)return gt=qe,{type:"GeometryCollection",geometries:je.geometries.map(function(ht){return ga(ht,gt)})};var gt,Ke;switch(je.type){case"Point":case"MultiPoint":Ke=oo;break;case"LineString":case"MultiLineString":Ke=zo;break;case"Polygon":case"MultiPolygon":case"Sphere":Ke=Ho;break;default:return null}return m.geoStream(je,qe(Ke)),Ke.result()}qn.invert=function(je,qe){return Ie.invert(je/ii,qe)};var ki=[],Fi=[],oo={point:function(je,qe){ki.push([je,qe])},result:function(){var je=ki.length?ki.length<2?{type:"Point",coordinates:ki[0]}:{type:"MultiPoint",coordinates:ki}:null;return ki=[],je}},zo={lineStart:Yi,point:function(je,qe){ki.push([je,qe])},lineEnd:function(){ki.length&&(Fi.push(ki),ki=[])},result:function(){var je=Fi.length?Fi.length<2?{type:"LineString",coordinates:Fi[0]}:{type:"MultiLineString",coordinates:Fi}:null;return Fi=[],je}},Ho={polygonStart:Yi,lineStart:Yi,point:function(je,qe){ki.push([je,qe])},lineEnd:function(){var je=ki.length;if(je){do{ki.push(ki[0].slice())}while(++je<4);Fi.push(ki),ki=[]}},polygonEnd:Yi,result:function(){if(!Fi.length)return null;var je=[],qe=[];return Fi.forEach(function(Ke){!function(it){if((gt=it.length)<4)return!1;for(var gt,ht=0,kt=it[gt-1][1]*it[0][0]-it[gt-1][0]*it[0][1];++ht<gt;)kt+=it[ht-1][1]*it[ht][0]-it[ht-1][0]*it[ht][1];return kt<=0}(Ke)?qe.push(Ke):je.push([Ke])}),qe.forEach(function(Ke){var it=Ke[0];je.some(function(gt){if(function(ht,kt){for(var Jt=kt[0],Qt=kt[1],Wt=!1,tr=0,ur=ht.length,gr=ur-1;tr<ur;gr=tr++){var xr=ht[tr],Pr=xr[0],en=xr[1],hn=ht[gr],Pn=hn[1];en>Qt^Pn>Qt&&Jt<(hn[0]-Pr)*(Qt-en)/(Pn-en)+Pr&&(Wt=!Wt)}return Wt}(gt[0],it))return gt.push(Ke),!0})||je.push([Ke])}),Fi=[],je.length?je.length>1?{type:"MultiPolygon",coordinates:je}:{type:"Polygon",coordinates:je[0]}:null}};function Ua(je){var qe=je(d,0)[0]-je(-d,0)[0];function Ke(it,gt){var ht=v(it)<d,kt=je(ht?it:it>0?it-x:it+x,gt),Jt=(kt[0]-kt[1])*_,Qt=(kt[0]+kt[1])*_;if(ht)return[Jt,Qt];var Wt=qe*_,tr=Jt>0^Qt>0?-1:1;return[tr*Jt-f(Qt)*Wt,tr*Qt-f(Jt)*Wt]}return je.invert&&(Ke.invert=function(it,gt){var ht=(it+gt)*_,kt=(gt-it)*_,Jt=v(ht)<.5*qe&&v(kt)<.5*qe;if(!Jt){var Qt=qe*_,Wt=ht>0^kt>0?-1:1,tr=-Wt*it+(kt>0?1:-1)*Qt,ur=-Wt*gt+(ht>0?1:-1)*Qt;ht=(-tr-ur)*_,kt=(tr-ur)*_}var gr=je.invert(ht,kt);return Jt||(gr[0]+=ht>0?x:-x),gr}),m.geoProjection(Ke).rotate([-90,-90,45]).clipAngle(179.999)}function qa(){return Ua(Lt).scale(111.48)}function Do(je){var qe=g(je);function Ke(it,gt){var ht=qe?h(it*qe/2)/qe:it/2;if(!gt)return[2*ht,-je];var kt=2*e(ht*g(gt)),Jt=1/h(gt);return[g(kt)*Jt,gt+(1-t(kt))*Jt-je]}return Ke.invert=function(it,gt){if(v(gt+=je)<o)return[qe?2*e(qe*it/2)/qe:it,0];var ht,kt=it*it+gt*gt,Jt=0,Qt=10;do{var Wt=h(Jt),tr=1/t(Jt),ur=kt-2*gt*Jt+Jt*Jt;Jt-=ht=(Wt*ur+2*(Jt-gt))/(2+ur*tr*tr+2*(Jt-gt)*Wt)}while(v(ht)>o&&--Qt>0);var gr=it*(Wt=h(Jt)),xr=h(v(gt)<v(Jt+1/Wt)?.5*P(gr):.5*S(gr)+x/4)/g(Jt);return[qe?2*e(qe*xr)/qe:2*xr,Jt]},Ke}var ji=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function _o(je,qe){var Ke,it=i(18,36*v(qe)/x),gt=r(it),ht=it-gt,kt=(Ke=ji[gt])[0],Jt=Ke[1],Qt=(Ke=ji[++gt])[0],Wt=Ke[1],tr=(Ke=ji[i(19,++gt)])[0],ur=Ke[1];return[je*(Qt+ht*(tr-kt)/2+ht*ht*(tr-2*Qt+kt)/2),(qe>0?d:-d)*(Wt+ht*(ur-Jt)/2+ht*ht*(ur-2*Wt+Jt)/2)]}function so(je,qe){var Ke=function(kt){function Jt(Qt,Wt){var tr=t(Wt),ur=(kt-1)/(kt-tr*t(Qt));return[ur*tr*g(Qt),ur*g(Wt)]}return Jt.invert=function(Qt,Wt){var tr=Qt*Qt+Wt*Wt,ur=E(tr),gr=(kt-E(1-tr*(kt+1)/(kt-1)))/((kt-1)/ur+ur/(kt-1));return[n(Qt*gr,ur*E(1-gr*gr)),ur?P(Wt*gr/ur):0]},Jt}(je);if(!qe)return Ke;var it=t(qe),gt=g(qe);function ht(kt,Jt){var Qt=Ke(kt,Jt),Wt=Qt[1],tr=Wt*gt/(je-1)+it;return[Qt[0]*it/tr,Wt/tr]}return ht.invert=function(kt,Jt){var Qt=(je-1)/(je-1-Jt*gt);return Ke.invert(Qt*kt,Qt*Jt*it)},ht}ji.forEach(function(je){je[1]*=1.0144}),_o.invert=function(je,qe){var Ke=qe/d,it=90*Ke,gt=i(18,v(it/5)),ht=s(0,r(gt));do{var kt=ji[ht][1],Jt=ji[ht+1][1],Qt=ji[i(19,ht+2)][1],Wt=Qt-kt,tr=Qt-2*Jt+kt,ur=2*(v(Ke)-Jt)/Wt,gr=tr/Wt,xr=ur*(1-gr*ur*(1-2*gr*ur));if(xr>=0||1===ht){it=(qe>=0?5:-5)*(xr+gt);var Pr,en=50;do{xr=(gt=i(18,v(it)/5))-(ht=r(gt)),kt=ji[ht][1],Jt=ji[ht+1][1],Qt=ji[i(19,ht+2)][1],it-=(Pr=(qe>=0?d:-d)*(Jt+xr*(Qt-kt)/2+xr*xr*(Qt-2*Jt+kt)/2)-qe)*M}while(v(Pr)>1e-12&&--en>0);break}}while(--ht>=0);var hn=ji[ht][0],Sn=ji[ht+1][0],Pn=ji[i(19,ht+2)][0];return[je/(Sn+xr*(Pn-hn)/2+xr*xr*(Pn-2*Sn+hn)/2),it*O]};var ma=-179.9999,Ga=179.9999,lo=-89.9999;function yo(je){return je.length>0}function Ia(je){return-90===je||90===je?[0,je]:[-180,(qe=je,Math.floor(1e4*qe)/1e4)];var qe}function la(je){var qe=je[0],Ke=je[1],it=!1;return qe<=ma?(qe=-180,it=!0):qe>=Ga&&(qe=180,it=!0),Ke<=lo?(Ke=-90,it=!0):Ke>=89.9999&&(Ke=90,it=!0),it?[qe,Ke]:je}function Va(je){return je.map(la)}function ps(je,qe,Ke){for(var it=0,gt=je.length;it<gt;++it){var ht=je[it].slice();Ke.push({index:-1,polygon:qe,ring:ht});for(var kt=0,Jt=ht.length;kt<Jt;++kt){var Qt=ht[kt],Wt=Qt[0],tr=Qt[1];if(Wt<=ma||Wt>=Ga||tr<=lo||tr>=89.9999){ht[kt]=la(Qt);for(var ur=kt+1;ur<Jt;++ur){var gr=ht[ur],xr=gr[0],Pr=gr[1];if(xr>ma&&xr<Ga&&Pr>lo&&Pr<89.9999)break}if(ur===kt+1)continue;if(kt){var en={index:-1,polygon:qe,ring:ht.slice(0,kt+1)};en.ring[en.ring.length-1]=Ia(tr),Ke[Ke.length-1]=en}else Ke.pop();if(ur>=Jt)break;Ke.push({index:-1,polygon:qe,ring:ht=ht.slice(ur-1)}),ht[0]=Ia(ht[0][1]),kt=-1,Jt=ht.length}}}}function vs(je){var qe,Ke,it,gt,ht,kt,Jt=je.length,Qt={},Wt={};for(qe=0;qe<Jt;++qe)(it=(Ke=je[qe]).ring[0])[0]!==(ht=Ke.ring[Ke.ring.length-1])[0]||it[1]!==ht[1]?(Ke.index=qe,Qt[it]=Wt[ht]=Ke):(Ke.polygon.push(Ke.ring),je[qe]=null);for(qe=0;qe<Jt;++qe)if(Ke=je[qe]){if(gt=Wt[it=Ke.ring[0]],kt=Qt[ht=Ke.ring[Ke.ring.length-1]],delete Qt[it],delete Wt[ht],it[0]===ht[0]&&it[1]===ht[1]){Ke.polygon.push(Ke.ring);continue}gt?(delete Wt[it],delete Qt[gt.ring[0]],gt.ring.pop(),je[gt.index]=null,Ke={index:-1,polygon:gt.polygon,ring:gt.ring.concat(Ke.ring)},gt===kt?Ke.polygon.push(Ke.ring):(Ke.index=Jt++,je.push(Qt[Ke.ring[0]]=Wt[Ke.ring[Ke.ring.length-1]]=Ke))):kt?(delete Qt[ht],delete Wt[kt.ring[kt.ring.length-1]],Ke.ring.pop(),Ke={index:Jt++,polygon:kt.polygon,ring:Ke.ring.concat(kt.ring)},je[kt.index]=null,je.push(Qt[Ke.ring[0]]=Wt[Ke.ring[Ke.ring.length-1]]=Ke)):(Ke.ring.push(Ke.ring[0]),Ke.polygon.push(Ke.ring))}}function Ui(je){var qe={type:"Feature",geometry:ss(je.geometry)};return null!=je.id&&(qe.id=je.id),null!=je.bbox&&(qe.bbox=je.bbox),null!=je.properties&&(qe.properties=je.properties),qe}function ss(je){if(null==je)return je;var qe,Ke,it,gt;switch(je.type){case"GeometryCollection":qe={type:"GeometryCollection",geometries:je.geometries.map(ss)};break;case"Point":qe={type:"Point",coordinates:la(je.coordinates)};break;case"MultiPoint":case"LineString":qe={type:je.type,coordinates:Va(je.coordinates)};break;case"MultiLineString":qe={type:"MultiLineString",coordinates:je.coordinates.map(Va)};break;case"Polygon":var ht=[];ps(je.coordinates,ht,Ke=[]),vs(Ke),qe={type:"Polygon",coordinates:ht};break;case"MultiPolygon":Ke=[],it=-1,gt=je.coordinates.length;for(var kt=new Array(gt);++it<gt;)ps(je.coordinates[it],kt[it]=[],Ke);vs(Ke),qe={type:"MultiPolygon",coordinates:kt.filter(yo)};break;default:return je}return null!=je.bbox&&(qe.bbox=je.bbox),qe}function Xo(je,qe){var Ke=h(qe/2),it=g(w*Ke);return[je*(.74482-.34588*it*it),1.70711*Ke]}function ys(je,qe,Ke){var it=m.geoInterpolate(qe,Ke),gt=it(.5),ht=m.geoRotation([-gt[0],-gt[1]])(qe),kt=it.distance/2,Jt=-P(g(ht[1]*O)/g(kt)),Qt=[-gt[0],-gt[1],-(ht[0]>0?x-Jt:Jt)*M],Wt=m.geoProjection(je(kt)).rotate(Qt),tr=m.geoRotation(Qt),ur=Wt.center;return delete Wt.rotate,Wt.center=function(gr){return arguments.length?ur(tr(gr)):tr.invert(ur())},Wt.clipAngle(90)}function xs(je){var qe=t(je);function Ke(it,gt){var ht=m.geoGnomonicRaw(it,gt);return ht[0]*=qe,ht}return Ke.invert=function(it,gt){return m.geoGnomonicRaw.invert(it/qe,gt)},Ke}function ds(je,qe){return ys(xs,je,qe)}function bs(je){if(!(je*=2))return m.geoAzimuthalEquidistantRaw;var qe=-je/2,Ke=-qe,it=je*je,gt=h(Ke),ht=.5/g(Ke);function kt(Jt,Qt){var Wt=S(t(Qt)*t(Jt-qe)),tr=S(t(Qt)*t(Jt-Ke));return[((Wt*=Wt)-(tr*=tr))/(2*je),(Qt<0?-1:1)*E(4*it*tr-(it-Wt+tr)*(it-Wt+tr))/(2*je)]}return kt.invert=function(Jt,Qt){var Wt,tr,ur=Qt*Qt,gr=t(E(ur+(Wt=Jt+qe)*Wt)),xr=t(E(ur+(Wt=Jt+Ke)*Wt));return[n(tr=gr-xr,Wt=(gr+xr)*gt),(Qt<0?-1:1)*S(E(Wt*Wt+tr*tr)*ht)]},kt}function wo(je,qe){return ys(bs,je,qe)}function To(je,qe){if(v(qe)<o)return[je,0];var Ke=v(qe/d),it=P(Ke);if(v(je)<o||v(v(qe)-d)<o)return[0,f(qe)*x*h(it/2)];var gt=t(it),ht=v(x/je-je/x)/2,kt=ht*ht,Jt=gt/(Ke+gt-1),Qt=Jt*(2/Ke-1),Wt=Qt*Qt,tr=Wt+kt,ur=Jt-Wt,gr=kt+Jt;return[f(je)*x*(ht*ur+E(kt*ur*ur-tr*(Jt*Jt-Wt)))/tr,f(qe)*x*(Qt*gr-ht*E((kt+1)*tr-gr*gr))/tr]}function Ro(je,qe){if(v(qe)<o)return[je,0];var Ke=v(qe/d),it=P(Ke);if(v(je)<o||v(v(qe)-d)<o)return[0,f(qe)*x*h(it/2)];var gt=t(it),ht=v(x/je-je/x)/2,kt=ht*ht,Jt=gt*(E(1+kt)-ht*gt)/(1+kt*Ke*Ke);return[f(je)*x*Jt,f(qe)*x*E(1-Jt*(2*ht+Jt))]}function Fo(je,qe){if(v(qe)<o)return[je,0];var Ke=qe/d,it=P(Ke);if(v(je)<o||v(v(qe)-d)<o)return[0,x*h(it/2)];var gt=(x/je-je/x)/2,ht=Ke/(1+t(it));return[x*(f(je)*E(gt*gt+1-ht*ht)-gt),x*ht]}function Bo(je,qe){if(!qe)return[je,0];var Ke=v(qe);if(!je||Ke===d)return[0,qe];var it=Ke/d,gt=it*it,ht=(8*it-gt*(gt+2)-5)/(2*gt*(it-1)),kt=ht*ht,Jt=it*ht,Qt=gt+kt+2*Jt,Wt=it+3*ht,tr=je/d,ur=tr+1/tr,gr=f(v(je)-d)*E(ur*ur-4),xr=gr*gr,Pr=(gr*(Qt+kt-1)+2*E(Qt*(gt+kt*xr-1)+(1-gt)*(gt*(Wt*Wt+4*kt)+12*Jt*kt+4*kt*kt)))/(4*Qt+xr);return[f(je)*d*Pr,f(qe)*d*E(1+gr*v(Pr)-Pr*Pr)]}function Zo(je,qe,Ke,it){var gt=x/3;je=s(je,o),qe=s(qe,o),je=i(je,d),qe=i(qe,x-o),Ke=s(Ke,0),Ke=i(Ke,100-o);var ht=(it=s(it,o))/100,kt=S((Ke/100+1)*t(gt))/gt,Jt=g(je)/g(kt*d),Qt=qe/x,Wt=E(ht*g(je/2)/g(qe/2));return function(tr,ur,gr,xr,Pr){function en(hn,Sn){var Pn=gr*g(xr*Sn),Un=E(1-Pn*Pn),In=E(2/(1+Un*t(hn*=Pr)));return[tr*Un*In*g(hn),ur*Pn*In]}return en.invert=function(hn,Sn){var Pn=hn/tr,Un=Sn/ur,In=E(Pn*Pn+Un*Un),hi=2*P(In/2);return[n(hn*h(hi),tr*In)/Pr,In&&P(Sn*g(hi)/(ur*gr*In))/xr]},en}(Wt/E(Qt*Jt*kt),1/(Wt*E(Qt*Jt*kt)),Jt,kt,Qt)}function co(){var je=65*O,qe=60*O,Ke=20,it=200,gt=m.geoProjectionMutator(Zo),ht=gt(je,qe,Ke,it);return ht.poleline=function(kt){return arguments.length?gt(je=+kt*O,qe,Ke,it):je*M},ht.parallels=function(kt){return arguments.length?gt(je,qe=+kt*O,Ke,it):qe*M},ht.inflation=function(kt){return arguments.length?gt(je,qe,Ke=+kt,it):Ke},ht.ratio=function(kt){return arguments.length?gt(je,qe,Ke,it=+kt):it},ht.scale(163.775)}Xo.invert=function(je,qe){var Ke=qe/1.70711,it=g(w*Ke);return[je/(.74482-.34588*it*it),2*e(Ke)]},To.invert=function(je,qe){if(v(qe)<o)return[je,0];if(v(je)<o)return[0,d*g(2*e(qe/x))];var Ke=(je/=x)*je,it=(qe/=x)*qe,gt=Ke+it,ht=gt*gt,kt=-v(qe)*(1+gt),Jt=kt-2*it+Ke,Qt=-2*kt+1+2*it+ht,Wt=it/Qt+(2*Jt*Jt*Jt/(Qt*Qt*Qt)-9*kt*Jt/(Qt*Qt))/27,tr=(kt-Jt*Jt/(3*Qt))/Qt,ur=2*E(-tr/3),gr=S(3*Wt/(tr*ur))/3;return[x*(gt-1+E(1+2*(Ke-it)+ht))/(2*je),f(qe)*x*(-ur*t(gr+x/3)-Jt/(3*Qt))]},Ro.invert=function(je,qe){if(!je)return[0,d*g(2*e(qe/x))];var Ke=v(je/x),it=(1-Ke*Ke-(qe/=x)*qe)/(2*Ke),gt=E(it*it+1);return[f(je)*x*(gt-it),f(qe)*d*g(2*n(E((1-2*it*Ke)*(it+gt)-Ke),E(gt+it+Ke)))]},Fo.invert=function(je,qe){if(!qe)return[je,0];var Ke=qe/x,it=(x*x*(1-Ke*Ke)-je*je)/(2*x*je);return[je?x*(f(je)*E(it*it+1)-it):0,d*g(2*e(Ke))]},Bo.invert=function(je,qe){var Ke;if(!je||!qe)return[je,qe];qe/=x;var it=f(je)*je/d,gt=(it*it-1+4*qe*qe)/v(it),ht=gt*gt,kt=2*qe,Jt=50;do{var Qt=kt*kt,Wt=(8*kt-Qt*(Qt+2)-5)/(2*Qt*(kt-1)),tr=(3*kt-Qt*kt-10)/(2*Qt*kt),ur=Wt*Wt,gr=kt*Wt,xr=kt+Wt,Pr=xr*xr,en=kt+3*Wt,hn=-2*xr*(4*gr*ur+(1-4*Qt+3*Qt*Qt)*(1+tr)+ur*(14*Qt-6-ht+(8*Qt-8-2*ht)*tr)+gr*(12*Qt-8+(10*Qt-10-ht)*tr)),Sn=E(Pr*(Qt+ur*ht-1)+(1-Qt)*(Qt*(en*en+4*ur)+ur*(12*gr+4*ur)));kt-=Ke=(gt*(Pr+ur-1)+2*Sn-it*(4*Pr+ht))/(gt*(2*Wt*tr+2*xr*(1+tr))+hn/Sn-8*xr*(gt*(-1+ur+Pr)+2*Sn)*(1+tr)/(ht+4*Pr))}while(Ke>o&&--Jt>0);return[f(je)*(E(gt*gt+4)+gt)*x/4,d*kt]};var ls=4*x+3*E(3),no=2*E(2*x*E(3)/ls),No=re(no*E(3)/x,no,ls/6);function cs(je,qe){return[je*E(1-3*qe*qe/(x*x)),qe]}function ko(je,qe){var Ke=t(qe),it=t(je)*Ke,gt=1-it,ht=t(je=n(g(je)*Ke,-g(qe))),kt=g(je);return[kt*(Ke=E(1-it*it))-ht*gt,-ht*Ke-kt*gt]}function Bi(je,qe){var Ke=V(je,qe);return[(Ke[0]+je/d)/2,(Ke[1]+qe)/2]}cs.invert=function(je,qe){return[je/E(1-3*qe*qe/(x*x)),qe]},ko.invert=function(je,qe){var Ke=(je*je+qe*qe)/-2,it=E(-Ke*(2+Ke)),gt=qe*Ke+je*it,ht=je*Ke-qe*it,kt=E(ht*ht+gt*gt);return[n(it*gt,kt*(1+Ke)),kt?-P(it*ht/kt):0]},Bi.invert=function(je,qe){var Ke=je,it=qe,gt=25;do{var ht,kt=t(it),Jt=g(it),Qt=g(2*it),Wt=Jt*Jt,tr=kt*kt,ur=g(Ke),gr=t(Ke/2),xr=g(Ke/2),Pr=xr*xr,en=1-tr*gr*gr,hn=en?S(kt*gr)*E(ht=1/en):ht=0,Sn=.5*(2*hn*kt*xr+Ke/d)-je,Pn=.5*(hn*Jt+it)-qe,Un=.5*ht*(tr*Pr+hn*kt*gr*Wt)+.5/d,In=ht*(ur*Qt/4-hn*Jt*xr),hi=.125*ht*(Qt*xr-hn*Jt*tr*ur),bi=.5*ht*(Wt*gr+hn*Pr*kt)+.5,Oi=In*hi-bi*Un,Ii=(Pn*In-Sn*bi)/Oi,zi=(Sn*hi-Pn*Un)/Oi;Ke-=Ii,it-=zi}while((v(Ii)>o||v(zi)>o)&&--gt>0);return[Ke,it]},p.geoNaturalEarth=m.geoNaturalEarth1,p.geoNaturalEarthRaw=m.geoNaturalEarth1Raw,p.geoAiry=function(){var je=d,qe=m.geoProjectionMutator(H),Ke=qe(je);return Ke.radius=function(it){return arguments.length?qe(je=it*O):je*M},Ke.scale(179.976).clipAngle(147)},p.geoAiryRaw=H,p.geoAitoff=function(){return m.geoProjection(V).scale(152.63)},p.geoAitoffRaw=V,p.geoArmadillo=function(){var je=20*O,qe=je>=0?1:-1,Ke=h(qe*je),it=m.geoProjectionMutator(Z),gt=it(je),ht=gt.stream;return gt.parallel=function(kt){return arguments.length?(Ke=h((qe=(je=kt*O)>=0?1:-1)*je),it(je)):je*M},gt.stream=function(kt){var Jt=gt.rotate(),Qt=ht(kt),Wt=(gt.rotate([0,0]),ht(kt)),tr=gt.precision();return gt.rotate(Jt),Qt.sphere=function(){Wt.polygonStart(),Wt.lineStart();for(var ur=-180*qe;qe*ur<180;ur+=90*qe)Wt.point(ur,90*qe);if(je)for(;qe*(ur-=3*qe*tr)>=-180;)Wt.point(ur,qe*-n(t(ur*O/2),Ke)*M);Wt.lineEnd(),Wt.polygonEnd()},Qt},gt.scale(218.695).center([0,28.0974])},p.geoArmadilloRaw=Z,p.geoAugust=function(){return m.geoProjection(W).scale(66.1603)},p.geoAugustRaw=W,p.geoBaker=function(){return m.geoProjection(te).scale(112.314)},p.geoBakerRaw=te,p.geoBerghaus=function(){var je=5,qe=m.geoProjectionMutator(D),Ke=qe(je),it=Ke.stream,gt=-t(.01*O),ht=g(.01*O);return Ke.lobes=function(kt){return arguments.length?qe(je=+kt):je},Ke.stream=function(kt){var Jt=Ke.rotate(),Qt=it(kt),Wt=(Ke.rotate([0,0]),it(kt));return Ke.rotate(Jt),Qt.sphere=function(){Wt.polygonStart(),Wt.lineStart();for(var tr=0,ur=360/je,gr=2*x/je,xr=90-180/je,Pr=d;tr<je;++tr,xr-=ur,Pr-=gr)Wt.point(n(ht*t(Pr),gt)*M,P(ht*g(Pr))*M),xr<-90?(Wt.point(-90,-180-xr-.01),Wt.point(-90,-180-xr+.01)):(Wt.point(90,xr+.01),Wt.point(90,xr-.01));Wt.lineEnd(),Wt.polygonEnd()},Qt},Ke.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},p.geoBerghausRaw=D,p.geoBertin1953=function(){return m.geoProjection(J()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},p.geoBertin1953Raw=J,p.geoBoggs=function(){return m.geoProjection(pe).scale(160.857)},p.geoBoggsRaw=pe,p.geoBonne=function(){return ce(xe).scale(123.082).center([0,26.1441]).parallel(45)},p.geoBonneRaw=xe,p.geoBottomley=function(){var je=.5,qe=m.geoProjectionMutator(we),Ke=qe(je);return Ke.fraction=function(it){return arguments.length?qe(je=+it):je},Ke.scale(158.837)},p.geoBottomleyRaw=we,p.geoBromley=function(){return m.geoProjection(be).scale(152.63)},p.geoBromleyRaw=be,p.geoChamberlin=Me,p.geoChamberlinRaw=Te,p.geoChamberlinAfrica=function(){return Me([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},p.geoCollignon=function(){return m.geoProjection(Ie).scale(95.6464).center([0,30])},p.geoCollignonRaw=Ie,p.geoCraig=function(){return ce(ze).scale(249.828).clipAngle(90)},p.geoCraigRaw=ze,p.geoCraster=function(){return m.geoProjection(Je).scale(156.19)},p.geoCrasterRaw=Je,p.geoCylindricalEqualArea=function(){return ce(De).parallel(38.58).scale(195.044)},p.geoCylindricalEqualAreaRaw=De,p.geoCylindricalStereographic=function(){return ce(Be).scale(124.75)},p.geoCylindricalStereographicRaw=Be,p.geoEckert1=function(){return m.geoProjection(Ze).scale(165.664)},p.geoEckert1Raw=Ze,p.geoEckert2=function(){return m.geoProjection(Ye).scale(165.664)},p.geoEckert2Raw=Ye,p.geoEckert3=function(){return m.geoProjection(tt).scale(180.739)},p.geoEckert3Raw=tt,p.geoEckert4=function(){return m.geoProjection(st).scale(180.739)},p.geoEckert4Raw=st,p.geoEckert5=function(){return m.geoProjection(vt).scale(173.044)},p.geoEckert5Raw=vt,p.geoEckert6=function(){return m.geoProjection(Pt).scale(173.044)},p.geoEckert6Raw=Pt,p.geoEisenlohr=function(){return m.geoProjection(rt).scale(62.5271)},p.geoEisenlohrRaw=rt,p.geoFahey=function(){return m.geoProjection(bt).scale(137.152)},p.geoFaheyRaw=bt,p.geoFoucaut=function(){return m.geoProjection(Rt).scale(135.264)},p.geoFoucautRaw=Rt,p.geoFoucautSinusoidal=function(){var je=.5,qe=m.geoProjectionMutator(Yt),Ke=qe(je);return Ke.alpha=function(it){return arguments.length?qe(je=+it):je},Ke.scale(168.725)},p.geoFoucautSinusoidalRaw=Yt,p.geoGilbert=function(je){null==je&&(je=m.geoOrthographic);var qe=je(),Ke=m.geoEquirectangular().scale(M).precision(0).clipAngle(null).translate([0,0]);function it(ht){return qe(Fe(ht))}function gt(ht){it[ht]=function(){return arguments.length?(qe[ht].apply(qe,arguments),it):qe[ht]()}}return qe.invert&&(it.invert=function(ht){return He(qe.invert(ht))}),it.stream=function(ht){var kt=qe.stream(ht),Jt=Ke.stream({point:function(Qt,Wt){kt.point(Qt/2,P(h(-Wt/2*O))*M)},lineStart:function(){kt.lineStart()},lineEnd:function(){kt.lineEnd()},polygonStart:function(){kt.polygonStart()},polygonEnd:function(){kt.polygonEnd()}});return Jt.sphere=kt.sphere,Jt},it.rotate=function(ht){return arguments.length?(Ke.rotate(ht),it):Ke.rotate()},it.center=function(ht){return arguments.length?(qe.center(Fe(ht)),it):He(qe.center())},gt("angle"),gt("clipAngle"),gt("clipExtent"),gt("fitExtent"),gt("fitHeight"),gt("fitSize"),gt("fitWidth"),gt("scale"),gt("translate"),gt("precision"),it.scale(249.5)},p.geoGingery=function(){var je=6,qe=30*O,Ke=t(qe),it=g(qe),gt=m.geoProjectionMutator(Oe),ht=gt(qe,je),kt=ht.stream,Jt=-t(.01*O),Qt=g(.01*O);return ht.radius=function(Wt){return arguments.length?(Ke=t(qe=Wt*O),it=g(qe),gt(qe,je)):qe*M},ht.lobes=function(Wt){return arguments.length?gt(qe,je=+Wt):je},ht.stream=function(Wt){var tr=ht.rotate(),ur=kt(Wt),gr=(ht.rotate([0,0]),kt(Wt));return ht.rotate(tr),ur.sphere=function(){gr.polygonStart(),gr.lineStart();for(var xr=0,Pr=2*x/je,en=0;xr<je;++xr,en-=Pr)gr.point(n(Qt*t(en),Jt)*M,P(Qt*g(en))*M),gr.point(n(it*t(en-Pr/2),Ke)*M,P(it*g(en-Pr/2))*M);gr.lineEnd(),gr.polygonEnd()},ur},ht.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},p.geoGingeryRaw=Oe,p.geoGinzburg4=function(){return m.geoProjection(Pe).scale(149.995)},p.geoGinzburg4Raw=Pe,p.geoGinzburg5=function(){return m.geoProjection(Ce).scale(153.93)},p.geoGinzburg5Raw=Ce,p.geoGinzburg6=function(){return m.geoProjection(Xe).scale(130.945)},p.geoGinzburg6Raw=Xe,p.geoGinzburg8=function(){return m.geoProjection(at).scale(131.747)},p.geoGinzburg8Raw=at,p.geoGinzburg9=function(){return m.geoProjection(pt).scale(131.087)},p.geoGinzburg9Raw=pt,p.geoGringorten=function(){return m.geoProjection(ut(St)).scale(239.75)},p.geoGringortenRaw=St,p.geoGuyou=function(){return m.geoProjection(ut(Lt)).scale(151.496)},p.geoGuyouRaw=Lt,p.geoHammer=function(){var je=2,qe=m.geoProjectionMutator(N),Ke=qe(je);return Ke.coefficient=function(it){return arguments.length?qe(je=+it):je},Ke.scale(169.529)},p.geoHammerRaw=N,p.geoHammerRetroazimuthal=function(){var je=0,qe=m.geoProjectionMutator(Qe),Ke=qe(je),it=Ke.rotate,gt=Ke.stream,ht=m.geoCircle();return Ke.parallel=function(kt){if(!arguments.length)return je*M;var Jt=Ke.rotate();return qe(je=kt*O).rotate(Jt)},Ke.rotate=function(kt){return arguments.length?(it.call(Ke,[kt[0],kt[1]-je*M]),ht.center([-kt[0],-kt[1]]),Ke):((kt=it.call(Ke))[1]+=je*M,kt)},Ke.stream=function(kt){return(kt=gt(kt)).sphere=function(){kt.polygonStart();var Jt,Qt=ht.radius(89.99)().coordinates[0],Wt=Qt.length-1,tr=-1;for(kt.lineStart();++tr<Wt;)kt.point((Jt=Qt[tr])[0],Jt[1]);for(kt.lineEnd(),Wt=(Qt=ht.radius(90.01)().coordinates[0]).length-1,kt.lineStart();--tr>=0;)kt.point((Jt=Qt[tr])[0],Jt[1]);kt.lineEnd(),kt.polygonEnd()},kt},Ke.scale(79.4187).parallel(45).clipAngle(179.999)},p.geoHammerRetroazimuthalRaw=Qe,p.geoHealpix=function(){var je=4,qe=m.geoProjectionMutator(Zt),Ke=qe(je),it=Ke.stream;return Ke.lobes=function(gt){return arguments.length?qe(je=+gt):je},Ke.stream=function(gt){var ht=Ke.rotate(),kt=it(gt),Jt=(Ke.rotate([0,0]),it(gt));return Ke.rotate(ht),kt.sphere=function(){var Qt,Wt;m.geoStream((Wt=[].concat(b.range(-180,180+(Qt=180/je)/2,Qt).map(Re),b.range(180,-180-Qt/2,-Qt).map(lt)),{type:"Polygon",coordinates:[180===Qt?Wt.map(_t):Wt]}),Jt)},kt},Ke.scale(239.75)},p.geoHealpixRaw=Zt,p.geoHill=function(){var je=1,qe=m.geoProjectionMutator(Dt),Ke=qe(je);return Ke.ratio=function(it){return arguments.length?qe(je=+it):je},Ke.scale(167.774).center([0,18.67])},p.geoHillRaw=Dt,p.geoHomolosine=function(){return m.geoProjection(nr).scale(152.63)},p.geoHomolosineRaw=nr,p.geoHufnagel=function(){var je=1,qe=0,Ke=45*O,it=2,gt=m.geoProjectionMutator(Gt),ht=gt(je,qe,Ke,it);return ht.a=function(kt){return arguments.length?gt(je=+kt,qe,Ke,it):je},ht.b=function(kt){return arguments.length?gt(je,qe=+kt,Ke,it):qe},ht.psiMax=function(kt){return arguments.length?gt(je,qe,Ke=+kt*O,it):Ke*M},ht.ratio=function(kt){return arguments.length?gt(je,qe,Ke,it=+kt):it},ht.scale(180.739)},p.geoHufnagelRaw=Gt,p.geoHyperelliptical=function(){var je=0,qe=2.5,Ke=1.183136,it=m.geoProjectionMutator(ir),gt=it(je,qe,Ke);return gt.alpha=function(ht){return arguments.length?it(je=+ht,qe,Ke):je},gt.k=function(ht){return arguments.length?it(je,qe=+ht,Ke):qe},gt.gamma=function(ht){return arguments.length?it(je,qe,Ke=+ht):Ke},gt.scale(152.63)},p.geoHyperellipticalRaw=ir,p.geoInterrupt=sr,p.geoInterruptedBoggs=function(){return sr(pe,mr).scale(160.857)},p.geoInterruptedHomolosine=function(){return sr(nr,Ir).scale(152.63)},p.geoInterruptedMollweide=function(){return sr(ne,vr).scale(169.529)},p.geoInterruptedMollweideHemispheres=function(){return sr(ne,Br).scale(169.529).rotate([20,0])},p.geoInterruptedSinuMollweide=function(){return sr(Vt,Jr,j).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},p.geoInterruptedSinusoidal=function(){return sr(ge,ln).scale(152.63).rotate([-20,0])},p.geoKavrayskiy7=function(){return m.geoProjection(En).scale(158.837)},p.geoKavrayskiy7Raw=En,p.geoLagrange=function(){var je=.5,qe=m.geoProjectionMutator(Cn),Ke=qe(je);return Ke.spacing=function(it){return arguments.length?qe(je=+it):je},Ke.scale(124.75)},p.geoLagrangeRaw=Cn,p.geoLarrivee=function(){return m.geoProjection($r).scale(97.2672)},p.geoLarriveeRaw=$r,p.geoLaskowski=function(){return m.geoProjection(Rr).scale(139.98)},p.geoLaskowskiRaw=Rr,p.geoLittrow=function(){return m.geoProjection(Lr).scale(144.049).clipAngle(89.999)},p.geoLittrowRaw=Lr,p.geoLoximuthal=function(){return ce(Qr).parallel(40).scale(158.837)},p.geoLoximuthalRaw=Qr,p.geoMiller=function(){return m.geoProjection(On).scale(108.318)},p.geoMillerRaw=On,p.geoModifiedStereographic=Ct,p.geoModifiedStereographicRaw=zr,p.geoModifiedStereographicAlaska=function(){return Ct(sn,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},p.geoModifiedStereographicGs48=function(){return Ct(Mn,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},p.geoModifiedStereographicGs50=function(){return Ct(Tn,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},p.geoModifiedStereographicMiller=function(){return Ct(Rn,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},p.geoModifiedStereographicLee=function(){return Ct($t,[165,10]).scale(250).clipAngle(130).center([-165,-10])},p.geoMollweide=function(){return m.geoProjection(ne).scale(169.529)},p.geoMollweideRaw=ne,p.geoMtFlatPolarParabolic=function(){return m.geoProjection(_r).scale(164.859)},p.geoMtFlatPolarParabolicRaw=_r,p.geoMtFlatPolarQuartic=function(){return m.geoProjection(qr).scale(188.209)},p.geoMtFlatPolarQuarticRaw=qr,p.geoMtFlatPolarSinusoidal=function(){return m.geoProjection(Vr).scale(166.518)},p.geoMtFlatPolarSinusoidalRaw=Vr,p.geoNaturalEarth2=function(){return m.geoProjection(br).scale(175.295)},p.geoNaturalEarth2Raw=br,p.geoNellHammer=function(){return m.geoProjection(yr).scale(152.63)},p.geoNellHammerRaw=yr,p.geoInterruptedQuarticAuthalic=function(){return sr(N(1/0),kr).rotate([20,0]).scale(152.63)},p.geoNicolosi=function(){return m.geoProjection(Cr).scale(127.267)},p.geoNicolosiRaw=Cr,p.geoPatterson=function(){return m.geoProjection(Ar).scale(139.319)},p.geoPattersonRaw=Ar,p.geoPolyconic=function(){return m.geoProjection(Yr).scale(103.74)},p.geoPolyconicRaw=Yr,p.geoPolyhedral=jr,p.geoPolyhedralButterfly=function(je){je=je||function(Ke){var it=m.geoCentroid({type:"MultiPoint",coordinates:Ke});return m.geoGnomonic().scale(1).translate([0,0]).rotate([-it[0],-it[1]])};var qe=wn.map(function(Ke){return{face:Ke,project:je(Ke)}});return[-1,0,0,1,0,1,4,5].forEach(function(Ke,it){var gt=qe[Ke];gt&&(gt.children||(gt.children=[])).push(qe[it])}),jr(qe[0],function(Ke,it){return qe[Ke<-x/2?it<0?6:4:Ke<0?it<0?2:0:Ke<x/2?it<0?3:1:it<0?7:5]}).angle(-30).scale(101.858).center([0,45])},p.geoPolyhedralCollignon=function(je){je=je||function(Ke){var it=m.geoCentroid({type:"MultiPoint",coordinates:Ke});return m.geoProjection(qn).translate([0,0]).scale(1).rotate(it[1]>0?[-it[0],0]:[180-it[0],180])};var qe=wn.map(function(Ke){return{face:Ke,project:je(Ke)}});return[-1,0,0,1,0,1,4,5].forEach(function(Ke,it){var gt=qe[Ke];gt&&(gt.children||(gt.children=[])).push(qe[it])}),jr(qe[0],function(Ke,it){return qe[Ke<-x/2?it<0?6:4:Ke<0?it<0?2:0:Ke<x/2?it<0?3:1:it<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},p.geoPolyhedralWaterman=function(je){je=je||function(ht){var kt=6===ht.length?m.geoCentroid({type:"MultiPoint",coordinates:ht}):ht[0];return m.geoGnomonic().scale(1).translate([0,0]).rotate([-kt[0],-kt[1]])};var qe=wn.map(function(ht){for(var kt,Jt=ht.map(ui),Qt=Jt.length,Wt=Jt[Qt-1],tr=[],ur=0;ur<Qt;++ur)tr.push(ei([.9486832980505138*Wt[0]+.31622776601683794*(kt=Jt[ur])[0],.9486832980505138*Wt[1]+.31622776601683794*kt[1],.9486832980505138*Wt[2]+.31622776601683794*kt[2]]),ei([.9486832980505138*kt[0]+.31622776601683794*Wt[0],.9486832980505138*kt[1]+.31622776601683794*Wt[1],.9486832980505138*kt[2]+.31622776601683794*Wt[2]])),Wt=kt;return tr}),Ke=[],it=[-1,0,0,1,0,1,4,5];qe.forEach(function(ht,kt){for(var Jt,Qt,Wt=wn[kt],tr=Wt.length,ur=Ke[kt]=[],gr=0;gr<tr;++gr)qe.push([Wt[gr],ht[(2*gr+2)%(2*tr)],ht[(2*gr+1)%(2*tr)]]),it.push(kt),ur.push((Jt=ui(ht[(2*gr+2)%(2*tr)]),Qt=ui(ht[(2*gr+1)%(2*tr)]),[Jt[1]*Qt[2]-Jt[2]*Qt[1],Jt[2]*Qt[0]-Jt[0]*Qt[2],Jt[0]*Qt[1]-Jt[1]*Qt[0]]))});var gt=qe.map(function(ht){return{project:je(ht),face:ht}});return it.forEach(function(ht,kt){var Jt=gt[ht];Jt&&(Jt.children||(Jt.children=[])).push(gt[kt])}),jr(gt[0],function(ht,kt){var Jt=t(kt),Qt=[Jt*t(ht),Jt*g(ht),g(kt)],Wt=ht<-x/2?kt<0?6:4:ht<0?kt<0?2:0:ht<x/2?kt<0?3:1:kt<0?7:5,tr=Ke[Wt];return gt[gn(tr[0],Qt)<0?8+3*Wt:gn(tr[1],Qt)<0?8+3*Wt+1:gn(tr[2],Qt)<0?8+3*Wt+2:Wt]}).angle(-30).scale(110.625).center([0,45])},p.geoProject=function(je,qe){var Ke,it=qe.stream;if(!it)throw new Error("invalid projection");switch(je&&je.type){case"Feature":Ke=ea;break;case"FeatureCollection":Ke=Ea;break;default:Ke=ga}return Ke(je,it)},p.geoGringortenQuincuncial=function(){return Ua(St).scale(176.423)},p.geoPeirceQuincuncial=qa,p.geoPierceQuincuncial=qa,p.geoQuantize=function(je,qe){if(!(0<=(qe=+qe)&&qe<=20))throw new Error("invalid digits");function Ke(Wt){var tr=Wt.length,ur=2,gr=new Array(tr);for(gr[0]=+Wt[0].toFixed(qe),gr[1]=+Wt[1].toFixed(qe);ur<tr;)gr[ur]=Wt[ur],++ur;return gr}function it(Wt){return Wt.map(Ke)}function gt(Wt){for(var tr=Ke(Wt[0]),ur=[tr],gr=1;gr<Wt.length;gr++){var xr=Ke(Wt[gr]);(xr.length>2||xr[0]!=tr[0]||xr[1]!=tr[1])&&(ur.push(xr),tr=xr)}return 1===ur.length&&Wt.length>1&&ur.push(Ke(Wt[Wt.length-1])),ur}function ht(Wt){return Wt.map(gt)}function kt(Wt){if(null==Wt)return Wt;var tr;switch(Wt.type){case"GeometryCollection":tr={type:"GeometryCollection",geometries:Wt.geometries.map(kt)};break;case"Point":tr={type:"Point",coordinates:Ke(Wt.coordinates)};break;case"MultiPoint":tr={type:Wt.type,coordinates:it(Wt.coordinates)};break;case"LineString":tr={type:Wt.type,coordinates:gt(Wt.coordinates)};break;case"MultiLineString":case"Polygon":tr={type:Wt.type,coordinates:ht(Wt.coordinates)};break;case"MultiPolygon":tr={type:"MultiPolygon",coordinates:Wt.coordinates.map(ht)};break;default:return Wt}return null!=Wt.bbox&&(tr.bbox=Wt.bbox),tr}function Jt(Wt){var tr={type:"Feature",properties:Wt.properties,geometry:kt(Wt.geometry)};return null!=Wt.id&&(tr.id=Wt.id),null!=Wt.bbox&&(tr.bbox=Wt.bbox),tr}if(null!=je)switch(je.type){case"Feature":return Jt(je);case"FeatureCollection":var Qt={type:"FeatureCollection",features:je.features.map(Jt)};return null!=je.bbox&&(Qt.bbox=je.bbox),Qt;default:return kt(je)}return je},p.geoQuincuncial=Ua,p.geoRectangularPolyconic=function(){return ce(Do).scale(131.215)},p.geoRectangularPolyconicRaw=Do,p.geoRobinson=function(){return m.geoProjection(_o).scale(152.63)},p.geoRobinsonRaw=_o,p.geoSatellite=function(){var je=2,qe=0,Ke=m.geoProjectionMutator(so),it=Ke(je,qe);return it.distance=function(gt){return arguments.length?Ke(je=+gt,qe):je},it.tilt=function(gt){return arguments.length?Ke(je,qe=gt*O):qe*M},it.scale(432.147).clipAngle(S(1/je)*M-1e-6)},p.geoSatelliteRaw=so,p.geoSinuMollweide=function(){return m.geoProjection(Vt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},p.geoSinuMollweideRaw=Vt,p.geoSinusoidal=function(){return m.geoProjection(ge).scale(152.63)},p.geoSinusoidalRaw=ge,p.geoStitch=function(je){if(null==je)return je;switch(je.type){case"Feature":return Ui(je);case"FeatureCollection":var qe={type:"FeatureCollection",features:je.features.map(Ui)};return null!=je.bbox&&(qe.bbox=je.bbox),qe;default:return ss(je)}},p.geoTimes=function(){return m.geoProjection(Xo).scale(146.153)},p.geoTimesRaw=Xo,p.geoTwoPointAzimuthal=ds,p.geoTwoPointAzimuthalRaw=xs,p.geoTwoPointAzimuthalUsa=function(){return ds([-158,21.5],[-77,39]).clipAngle(60).scale(400)},p.geoTwoPointEquidistant=wo,p.geoTwoPointEquidistantRaw=bs,p.geoTwoPointEquidistantUsa=function(){return wo([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},p.geoVanDerGrinten=function(){return m.geoProjection(To).scale(79.4183)},p.geoVanDerGrintenRaw=To,p.geoVanDerGrinten2=function(){return m.geoProjection(Ro).scale(79.4183)},p.geoVanDerGrinten2Raw=Ro,p.geoVanDerGrinten3=function(){return m.geoProjection(Fo).scale(79.4183)},p.geoVanDerGrinten3Raw=Fo,p.geoVanDerGrinten4=function(){return m.geoProjection(Bo).scale(127.16)},p.geoVanDerGrinten4Raw=Bo,p.geoWagner=co,p.geoWagner7=function(){return co().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},p.geoWagnerRaw=Zo,p.geoWagner4=function(){return m.geoProjection(No).scale(176.84)},p.geoWagner4Raw=No,p.geoWagner6=function(){return m.geoProjection(cs).scale(152.63)},p.geoWagner6Raw=cs,p.geoWiechel=function(){return m.geoProjection(ko).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},p.geoWiechelRaw=ko,p.geoWinkel3=function(){return m.geoProjection(Bi).scale(158.837)},p.geoWinkel3Raw=Bi,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?m(ee,y("d3-geo"),y("d3-array")):m(p.d3=p.d3||{},p.d3,p.d3)},{"d3-array":107,"d3-geo":114}],114:[function(y,$,ee){var p,m;p=this,m=function(p,m){"use strict";function b(){return new v}function v(){this.reset()}v.prototype={constructor:v,reset:function(){this.s=this.t=0},add:function(ft){n(e,ft,this.t),n(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new v;function n(ft,zt,ar){var Ht=ft.s=zt+ar,or=Ht-zt;ft.t=zt-(Ht-or)+(ar-or)}var t=1e-6,a=Math.PI,r=a/2,u=a/4,s=2*a,i=180/a,l=a/180,c=Math.abs,f=Math.atan,g=Math.atan2,h=Math.cos,o=Math.ceil,x=Math.exp,d=Math.log,w=Math.pow,_=Math.sin,T=Math.sign||function(ft){return ft>0?1:ft<0?-1:0},k=Math.sqrt,L=Math.tan;function M(ft){return ft>1?0:ft<-1?a:Math.acos(ft)}function O(ft){return ft>1?r:ft<-1?-r:Math.asin(ft)}function P(ft){return(ft=_(ft/2))*ft}function S(){}function E(ft,zt){ft&&B.hasOwnProperty(ft.type)&&B[ft.type](ft,zt)}var R={Feature:function(ft,zt){E(ft.geometry,zt)},FeatureCollection:function(ft,zt){for(var ar=ft.features,Ht=-1,or=ar.length;++Ht<or;)E(ar[Ht].geometry,zt)}},B={Sphere:function(ft,zt){zt.sphere()},Point:function(ft,zt){zt.point((ft=ft.coordinates)[0],ft[1],ft[2])},MultiPoint:function(ft,zt){for(var ar=ft.coordinates,Ht=-1,or=ar.length;++Ht<or;)zt.point((ft=ar[Ht])[0],ft[1],ft[2])},LineString:function(ft,zt){H(ft.coordinates,zt,0)},MultiLineString:function(ft,zt){for(var ar=ft.coordinates,Ht=-1,or=ar.length;++Ht<or;)H(ar[Ht],zt,0)},Polygon:function(ft,zt){V(ft.coordinates,zt)},MultiPolygon:function(ft,zt){for(var ar=ft.coordinates,Ht=-1,or=ar.length;++Ht<or;)V(ar[Ht],zt)},GeometryCollection:function(ft,zt){for(var ar=ft.geometries,Ht=-1,or=ar.length;++Ht<or;)E(ar[Ht],zt)}};function H(ft,zt,ar){var Ht,or=-1,Er=ft.length-ar;for(zt.lineStart();++or<Er;)zt.point((Ht=ft[or])[0],Ht[1],Ht[2]);zt.lineEnd()}function V(ft,zt){var ar=-1,Ht=ft.length;for(zt.polygonStart();++ar<Ht;)H(ft[ar],zt,1);zt.polygonEnd()}function Z(ft,zt){ft&&R.hasOwnProperty(ft.type)?R[ft.type](ft,zt):E(ft,zt)}var W,G,X,te,D,N=b(),U=b(),Q={point:S,lineStart:S,lineEnd:S,polygonStart:function(){N.reset(),Q.lineStart=j,Q.lineEnd=J},polygonEnd:function(){var ft=+N;U.add(ft<0?s+ft:ft),this.lineStart=this.lineEnd=this.point=S},sphere:function(){U.add(s)}};function j(){Q.point=K}function J(){re(W,G)}function K(ft,zt){Q.point=re,W=ft,G=zt,X=ft*=l,te=h(zt=(zt*=l)/2+u),D=_(zt)}function re(ft,zt){var ar=(ft*=l)-X,Ht=ar>=0?1:-1,or=Ht*ar,Er=h(zt=(zt*=l)/2+u),Or=_(zt),Gr=D*Or,an=te*Er+Gr*h(or),tn=Gr*Ht*_(or);N.add(g(tn,an)),X=ft,te=Er,D=Or}function ne(ft){return[g(ft[1],ft[0]),O(ft[2])]}function se(ft){var zt=ft[0],ar=ft[1],Ht=h(ar);return[Ht*h(zt),Ht*_(zt),_(ar)]}function oe(ft,zt){return ft[0]*zt[0]+ft[1]*zt[1]+ft[2]*zt[2]}function pe(ft,zt){return[ft[1]*zt[2]-ft[2]*zt[1],ft[2]*zt[0]-ft[0]*zt[2],ft[0]*zt[1]-ft[1]*zt[0]]}function ce(ft,zt){ft[0]+=zt[0],ft[1]+=zt[1],ft[2]+=zt[2]}function ge(ft,zt){return[ft[0]*zt,ft[1]*zt,ft[2]*zt]}function xe(ft){var zt=k(ft[0]*ft[0]+ft[1]*ft[1]+ft[2]*ft[2]);ft[0]/=zt,ft[1]/=zt,ft[2]/=zt}var we,be,Se,fe,me,Te,_e,Me,Ie,ze,Ve,Je,De,Be,Ze,Ye,tt,st,vt,Pt,Mt,rt,et,bt,Rt,Yt,Fe=b(),He={point:Oe,lineStart:ke,lineEnd:Le,polygonStart:function(){He.point=Pe,He.lineStart=Ce,He.lineEnd=Xe,Fe.reset(),Q.polygonStart()},polygonEnd:function(){Q.polygonEnd(),He.point=Oe,He.lineStart=ke,He.lineEnd=Le,N<0?(we=-(Se=180),be=-(fe=90)):Fe>t?fe=90:Fe<-t&&(be=-90),ze[0]=we,ze[1]=Se},sphere:function(){we=-(Se=180),be=-(fe=90)}};function Oe(ft,zt){Ie.push(ze=[we=ft,Se=ft]),zt<be&&(be=zt),zt>fe&&(fe=zt)}function $e(ft,zt){var ar=se([ft*l,zt*l]);if(Me){var Ht=pe(Me,ar),or=pe([Ht[1],-Ht[0],0],Ht);xe(or),or=ne(or);var Er,Or=ft-me,Gr=Or>0?1:-1,an=or[0]*i*Gr,tn=c(Or)>180;tn^(Gr*me<an&&an<Gr*ft)?(Er=or[1]*i)>fe&&(fe=Er):tn^(Gr*me<(an=(an+360)%360-180)&&an<Gr*ft)?(Er=-or[1]*i)<be&&(be=Er):(zt<be&&(be=zt),zt>fe&&(fe=zt)),tn?ft<me?at(we,ft)>at(we,Se)&&(Se=ft):at(ft,Se)>at(we,Se)&&(we=ft):Se>=we?(ft<we&&(we=ft),ft>Se&&(Se=ft)):ft>me?at(we,ft)>at(we,Se)&&(Se=ft):at(ft,Se)>at(we,Se)&&(we=ft)}else Ie.push(ze=[we=ft,Se=ft]);zt<be&&(be=zt),zt>fe&&(fe=zt),Me=ar,me=ft}function ke(){He.point=$e}function Le(){ze[0]=we,ze[1]=Se,He.point=Oe,Me=null}function Pe(ft,zt){if(Me){var ar=ft-me;Fe.add(c(ar)>180?ar+(ar>0?360:-360):ar)}else Te=ft,_e=zt;Q.point(ft,zt),$e(ft,zt)}function Ce(){Q.lineStart()}function Xe(){Pe(Te,_e),Q.lineEnd(),c(Fe)>t&&(we=-(Se=180)),ze[0]=we,ze[1]=Se,Me=null}function at(ft,zt){return(zt-=ft)<0?zt+360:zt}function pt(ft,zt){return ft[0]-zt[0]}function ut(ft,zt){return ft[0]<=ft[1]?ft[0]<=zt&&zt<=ft[1]:zt<ft[0]||ft[1]<zt}var St={sphere:S,point:ot,lineStart:Lt,lineEnd:It,polygonStart:function(){St.lineStart=jt,St.lineEnd=Zt},polygonEnd:function(){St.lineStart=Lt,St.lineEnd=It}};function ot(ft,zt){ft*=l;var ar=h(zt*=l);Et(ar*h(ft),ar*_(ft),_(zt))}function Et(ft,zt,ar){++Ve,De+=(ft-De)/Ve,Be+=(zt-Be)/Ve,Ze+=(ar-Ze)/Ve}function Lt(){St.point=Qe}function Qe(ft,zt){ft*=l;var ar=h(zt*=l);bt=ar*h(ft),Rt=ar*_(ft),Yt=_(zt),St.point=mt,Et(bt,Rt,Yt)}function mt(ft,zt){ft*=l;var ar=h(zt*=l),Ht=ar*h(ft),or=ar*_(ft),Er=_(zt),Or=g(k((Or=Rt*Er-Yt*or)*Or+(Or=Yt*Ht-bt*Er)*Or+(Or=bt*or-Rt*Ht)*Or),bt*Ht+Rt*or+Yt*Er);Je+=Or,Ye+=Or*(bt+(bt=Ht)),tt+=Or*(Rt+(Rt=or)),st+=Or*(Yt+(Yt=Er)),Et(bt,Rt,Yt)}function It(){St.point=ot}function jt(){St.point=Re}function Zt(){lt(rt,et),St.point=ot}function Re(ft,zt){rt=ft,et=zt,ft*=l,zt*=l,St.point=lt;var ar=h(zt);bt=ar*h(ft),Rt=ar*_(ft),Yt=_(zt),Et(bt,Rt,Yt)}function lt(ft,zt){ft*=l;var ar=h(zt*=l),Ht=ar*h(ft),or=ar*_(ft),Er=_(zt),Or=Rt*Er-Yt*or,Gr=Yt*Ht-bt*Er,an=bt*or-Rt*Ht,tn=k(Or*Or+Gr*Gr+an*an),pn=O(tn),xn=tn&&-pn/tn;vt+=xn*Or,Pt+=xn*Gr,Mt+=xn*an,Je+=pn,Ye+=pn*(bt+(bt=Ht)),tt+=pn*(Rt+(Rt=or)),st+=pn*(Yt+(Yt=Er)),Et(bt,Rt,Yt)}function _t(ft){return function(){return ft}}function Dt(ft,zt){function ar(Ht,or){return Ht=ft(Ht,or),zt(Ht[0],Ht[1])}return ft.invert&&zt.invert&&(ar.invert=function(Ht,or){return(Ht=zt.invert(Ht,or))&&ft.invert(Ht[0],Ht[1])}),ar}function Vt(ft,zt){return[c(ft)>a?ft+Math.round(-ft/s)*s:ft,zt]}function nr(ft,zt,ar){return(ft%=s)?zt||ar?Dt(Kt(ft),ir(zt,ar)):Kt(ft):zt||ar?ir(zt,ar):Vt}function Gt(ft){return function(zt,ar){return[(zt+=ft)>a?zt-s:zt<-a?zt+s:zt,ar]}}function Kt(ft){var zt=Gt(ft);return zt.invert=Gt(-ft),zt}function ir(ft,zt){var ar=h(ft),Ht=_(ft),or=h(zt),Er=_(zt);function Or(Gr,an){var tn=h(an),pn=h(Gr)*tn,xn=_(Gr)*tn,on=_(an),bn=on*ar+pn*Ht;return[g(xn*or-bn*Er,pn*ar-on*Ht),O(bn*or+xn*Er)]}return Or.invert=function(Gr,an){var tn=h(an),pn=h(Gr)*tn,xn=_(Gr)*tn,on=_(an),bn=on*or-xn*Er;return[g(xn*or+on*Er,pn*ar+bn*Ht),O(bn*ar-pn*Ht)]},Or}function dr(ft){function zt(ar){return(ar=ft(ar[0]*l,ar[1]*l))[0]*=i,ar[1]*=i,ar}return ft=nr(ft[0]*l,ft[1]*l,ft.length>2?ft[2]*l:0),zt.invert=function(ar){return(ar=ft.invert(ar[0]*l,ar[1]*l))[0]*=i,ar[1]*=i,ar},zt}function hr(ft,zt,ar,Ht,or,Er){if(ar){var Or=h(zt),Gr=_(zt),an=Ht*ar;null==or?(or=zt+Ht*s,Er=zt-an/2):(or=cr(Or,or),Er=cr(Or,Er),(Ht>0?or<Er:or>Er)&&(or+=Ht*s));for(var tn,pn=or;Ht>0?pn>Er:pn<Er;pn-=an)tn=ne([Or,-Gr*h(pn),-Gr*_(pn)]),ft.point(tn[0],tn[1])}}function cr(ft,zt){(zt=se(zt))[0]-=ft,xe(zt);var ar=M(-zt[1]);return((-zt[2]<0?-ar:ar)+s-t)%s}function sr(){var ft,zt=[];return{point:function(ar,Ht,or){ft.push([ar,Ht,or])},lineStart:function(){zt.push(ft=[])},lineEnd:S,rejoin:function(){zt.length>1&&zt.push(zt.pop().concat(zt.shift()))},result:function(){var ar=zt;return zt=[],ft=null,ar}}}function mr(ft,zt){return c(ft[0]-zt[0])<t&&c(ft[1]-zt[1])<t}function Ir(ft,zt,ar,Ht){this.x=ft,this.z=zt,this.o=ar,this.e=Ht,this.v=!1,this.n=this.p=null}function vr(ft,zt,ar,Ht,or){var Er,Or,Gr=[],an=[];if(ft.forEach(function(zn){if(!((jn=zn.length-1)<=0)){var jn,$n,Wr=zn[0],Jn=zn[jn];if(mr(Wr,Jn)){if(!Wr[2]&&!Jn[2]){for(or.lineStart(),Er=0;Er<jn;++Er)or.point((Wr=zn[Er])[0],Wr[1]);return void or.lineEnd()}Jn[0]+=2*t}Gr.push($n=new Ir(Wr,zn,null,!0)),an.push($n.o=new Ir(Wr,null,$n,!1)),Gr.push($n=new Ir(Jn,zn,null,!1)),an.push($n.o=new Ir(Jn,null,$n,!0))}}),Gr.length){for(an.sort(zt),Br(Gr),Br(an),Er=0,Or=an.length;Er<Or;++Er)an[Er].e=ar=!ar;for(var tn,pn,xn=Gr[0];;){for(var on=xn,bn=!0;on.v;)if((on=on.n)===xn)return;tn=on.z,or.lineStart();do{if(on.v=on.o.v=!0,on.e){if(bn)for(Er=0,Or=tn.length;Er<Or;++Er)or.point((pn=tn[Er])[0],pn[1]);else Ht(on.x,on.n.x,1,or);on=on.n}else{if(bn)for(Er=(tn=on.p.z).length-1;Er>=0;--Er)or.point((pn=tn[Er])[0],pn[1]);else Ht(on.x,on.p.x,-1,or);on=on.p}tn=(on=on.o).z,bn=!bn}while(!on.v);or.lineEnd()}}}function Br(ft){if(zt=ft.length){for(var zt,ar,Ht=0,or=ft[0];++Ht<zt;)or.n=ar=ft[Ht],ar.p=or,or=ar;or.n=ar=ft[0],ar.p=or}}Vt.invert=Vt;var Jr=b();function ln(ft){return c(ft[0])<=a?ft[0]:T(ft[0])*((c(ft[0])+a)%s-a)}function En(ft,zt){var ar=ln(zt),Ht=zt[1],or=_(Ht),Er=[_(ar),-h(ar),0],Or=0,Gr=0;Jr.reset(),1===or?Ht=r+t:-1===or&&(Ht=-r-t);for(var an=0,tn=ft.length;an<tn;++an)if(xn=(pn=ft[an]).length)for(var pn,xn,on=pn[xn-1],bn=ln(on),zn=on[1]/2+u,jn=_(zn),$n=h(zn),Wr=0;Wr<xn;++Wr,bn=Ln,jn=Zn,$n=xi,on=Jn){var Jn=pn[Wr],Ln=ln(Jn),Bn=Jn[1]/2+u,Zn=_(Bn),xi=h(Bn),Ai=Ln-bn,kn=Ai>=0?1:-1,Li=kn*Ai,Ti=Li>a,fi=jn*Zn;if(Jr.add(g(fi*kn*_(Li),$n*xi+fi*h(Li))),Or+=Ti?Ai+kn*s:Ai,Ti^bn>=ar^Ln>=ar){var Ci=pe(se(on),se(Jn));xe(Ci);var _i=pe(Er,Ci);xe(_i);var Xi=(Ti^Ai>=0?-1:1)*O(_i[2]);(Ht>Xi||Ht===Xi&&(Ci[0]||Ci[1]))&&(Gr+=Ti^Ai>=0?1:-1)}}return(Or<-t||Or<t&&Jr<-t)^1&Gr}function Cn(ft,zt,ar,Ht){return function(or){var Er,Or,Gr,an=zt(or),tn=sr(),pn=zt(tn),xn=!1,on={point:bn,lineStart:jn,lineEnd:$n,polygonStart:function(){on.point=Wr,on.lineStart=Jn,on.lineEnd=Ln,Or=[],Er=[]},polygonEnd:function(){on.point=bn,on.lineStart=jn,on.lineEnd=$n,Or=m.merge(Or);var Bn=En(Er,Ht);Or.length?(xn||(or.polygonStart(),xn=!0),vr(Or,$r,Bn,ar,or)):Bn&&(xn||(or.polygonStart(),xn=!0),or.lineStart(),ar(null,null,1,or),or.lineEnd()),xn&&(or.polygonEnd(),xn=!1),Or=Er=null},sphere:function(){or.polygonStart(),or.lineStart(),ar(null,null,1,or),or.lineEnd(),or.polygonEnd()}};function bn(Bn,Zn){ft(Bn,Zn)&&or.point(Bn,Zn)}function zn(Bn,Zn){an.point(Bn,Zn)}function jn(){on.point=zn,an.lineStart()}function $n(){on.point=bn,an.lineEnd()}function Wr(Bn,Zn){Gr.push([Bn,Zn]),pn.point(Bn,Zn)}function Jn(){pn.lineStart(),Gr=[]}function Ln(){Wr(Gr[0][0],Gr[0][1]),pn.lineEnd();var Bn,Zn,xi,Ai,kn=pn.clean(),Li=tn.result(),Ti=Li.length;if(Gr.pop(),Er.push(Gr),Gr=null,Ti)if(1&kn){if((Zn=(xi=Li[0]).length-1)>0){for(xn||(or.polygonStart(),xn=!0),or.lineStart(),Bn=0;Bn<Zn;++Bn)or.point((Ai=xi[Bn])[0],Ai[1]);or.lineEnd()}}else Ti>1&&2&kn&&Li.push(Li.pop().concat(Li.shift())),Or.push(Li.filter(An))}return on}}function An(ft){return ft.length>1}function $r(ft,zt){return((ft=ft.x)[0]<0?ft[1]-r-t:r-ft[1])-((zt=zt.x)[0]<0?zt[1]-r-t:r-zt[1])}var Rr=Cn(function(){return!0},function(ft){var zt,ar=NaN,Ht=NaN,or=NaN;return{lineStart:function(){ft.lineStart(),zt=1},point:function(Er,Or){var tn,pn,xn,on,bn,zn,jn,Gr=Er>0?a:-a,an=c(Er-ar);c(an-a)<t?(ft.point(ar,Ht=(Ht+Or)/2>0?r:-r),ft.point(or,Ht),ft.lineEnd(),ft.lineStart(),ft.point(Gr,Ht),ft.point(Er,Ht),zt=0):or!==Gr&&an>=a&&(c(ar-or)<t&&(ar-=or*t),c(Er-Gr)<t&&(Er-=Gr*t),pn=Ht,on=Or,jn=_((tn=ar)-(xn=Er)),Ht=c(jn)>t?f((_(pn)*(zn=h(on))*_(xn)-_(on)*(bn=h(pn))*_(tn))/(bn*zn*jn)):(pn+on)/2,ft.point(or,Ht),ft.lineEnd(),ft.lineStart(),ft.point(Gr,Ht),zt=0),ft.point(ar=Er,Ht=Or),or=Gr},lineEnd:function(){ft.lineEnd(),ar=Ht=NaN},clean:function(){return 2-zt}}},function(ft,zt,ar,Ht){var or;if(null==ft)Ht.point(-a,or=ar*r),Ht.point(0,or),Ht.point(a,or),Ht.point(a,0),Ht.point(a,-or),Ht.point(0,-or),Ht.point(-a,-or),Ht.point(-a,0),Ht.point(-a,or);else if(c(ft[0]-zt[0])>t){var Er=ft[0]<zt[0]?a:-a;Ht.point(-Er,or=ar*Er/2),Ht.point(0,or),Ht.point(Er,or)}else Ht.point(zt[0],zt[1])},[-a,-r]);function Lr(ft){var zt=h(ft),ar=6*l,Ht=zt>0,or=c(zt)>t;function Er(an,tn){return h(an)*h(tn)>zt}function Or(an,tn,pn){var xn=[1,0,0],on=pe(se(an),se(tn)),bn=oe(on,on),zn=on[0],jn=bn-zn*zn;if(!jn)return!pn&&an;var $n=zt*bn/jn,Wr=-zt*zn/jn,Jn=pe(xn,on),Ln=ge(xn,$n);ce(Ln,ge(on,Wr));var Bn=Jn,Zn=oe(Ln,Bn),xi=oe(Bn,Bn),Ai=Zn*Zn-xi*(oe(Ln,Ln)-1);if(!(Ai<0)){var kn=k(Ai),Li=ge(Bn,(-Zn-kn)/xi);if(ce(Li,Ln),Li=ne(Li),!pn)return Li;var Ti,fi=an[0],Ci=tn[0],_i=an[1],Xi=tn[1];Ci<fi&&(Ti=fi,fi=Ci,Ci=Ti);var Kn=Ci-fi,Vi=c(Kn-a)<t;if(!Vi&&Xi<_i&&(Ti=_i,_i=Xi,Xi=Ti),Vi||Kn<t?Vi?_i+Xi>0^Li[1]<(c(Li[0]-fi)<t?_i:Xi):_i<=Li[1]&&Li[1]<=Xi:Kn>a^(fi<=Li[0]&&Li[0]<=Ci)){var za=ge(Bn,(-Zn+kn)/xi);return ce(za,Ln),[Li,ne(za)]}}}function Gr(an,tn){var pn=Ht?ft:a-ft,xn=0;return an<-pn?xn|=1:an>pn&&(xn|=2),tn<-pn?xn|=4:tn>pn&&(xn|=8),xn}return Cn(Er,function(an){var tn,pn,xn,on,bn;return{lineStart:function(){on=xn=!1,bn=1},point:function(zn,jn){var $n,Wr=[zn,jn],Jn=Er(zn,jn),Ln=Ht?Jn?0:Gr(zn,jn):Jn?Gr(zn+(zn<0?a:-a),jn):0;if(!tn&&(on=xn=Jn)&&an.lineStart(),Jn!==xn&&(!($n=Or(tn,Wr))||mr(tn,$n)||mr(Wr,$n))&&(Wr[2]=1),Jn!==xn)bn=0,Jn?(an.lineStart(),$n=Or(Wr,tn),an.point($n[0],$n[1])):($n=Or(tn,Wr),an.point($n[0],$n[1],2),an.lineEnd()),tn=$n;else if(or&&tn&&Ht^Jn){var Bn;Ln&pn||!(Bn=Or(Wr,tn,!0))||(bn=0,Ht?(an.lineStart(),an.point(Bn[0][0],Bn[0][1]),an.point(Bn[1][0],Bn[1][1]),an.lineEnd()):(an.point(Bn[1][0],Bn[1][1]),an.lineEnd(),an.lineStart(),an.point(Bn[0][0],Bn[0][1],3)))}!Jn||tn&&mr(tn,Wr)||an.point(Wr[0],Wr[1]),tn=Wr,xn=Jn,pn=Ln},lineEnd:function(){xn&&an.lineEnd(),tn=null},clean:function(){return bn|(on&&xn)<<1}}},function(an,tn,pn,xn){hr(xn,ft,ar,pn,an,tn)},Ht?[0,-ft]:[-a,ft-a])}function Qr(ft,zt,ar,Ht){function or(tn,pn){return ft<=tn&&tn<=ar&&zt<=pn&&pn<=Ht}function Er(tn,pn,xn,on){var bn=0,zn=0;if(null==tn||(bn=Or(tn,xn))!==(zn=Or(pn,xn))||an(tn,pn)<0^xn>0)do{on.point(0===bn||3===bn?ft:ar,bn>1?Ht:zt)}while((bn=(bn+xn+4)%4)!==zn);else on.point(pn[0],pn[1])}function Or(tn,pn){return c(tn[0]-ft)<t?pn>0?0:3:c(tn[0]-ar)<t?pn>0?2:1:c(tn[1]-zt)<t?pn>0?1:0:pn>0?3:2}function Gr(tn,pn){return an(tn.x,pn.x)}function an(tn,pn){var xn=Or(tn,1),on=Or(pn,1);return xn!==on?xn-on:0===xn?pn[1]-tn[1]:1===xn?tn[0]-pn[0]:2===xn?tn[1]-pn[1]:pn[0]-tn[0]}return function(tn){var pn,xn,on,bn,zn,jn,$n,Wr,Jn,Ln,Bn,Zn=tn,xi=sr(),Ai={point:kn,lineStart:function(){Ai.point=Li,xn&&xn.push(on=[]),Ln=!0,Jn=!1,$n=Wr=NaN},lineEnd:function(){pn&&(Li(bn,zn),jn&&Jn&&xi.rejoin(),pn.push(xi.result())),Ai.point=kn,Jn&&Zn.lineEnd()},polygonStart:function(){Zn=xi,pn=[],xn=[],Bn=!0},polygonEnd:function(){var Ti=function(){for(var _i=0,Xi=0,Kn=xn.length;Xi<Kn;++Xi)for(var Vi,za,qo=xn[Xi],Lo=1,uo=qo.length,di=qo[0],ca=di[0],fo=di[1];Lo<uo;++Lo)Vi=ca,za=fo,ca=(di=qo[Lo])[0],fo=di[1],za<=Ht?fo>Ht&&(ca-Vi)*(Ht-za)>(fo-za)*(ft-Vi)&&++_i:fo<=Ht&&(ca-Vi)*(Ht-za)<(fo-za)*(ft-Vi)&&--_i;return _i}(),fi=Bn&&Ti,Ci=(pn=m.merge(pn)).length;(fi||Ci)&&(tn.polygonStart(),fi&&(tn.lineStart(),Er(null,null,1,tn),tn.lineEnd()),Ci&&vr(pn,Gr,Ti,Er,tn),tn.polygonEnd()),Zn=tn,pn=xn=on=null}};function kn(Ti,fi){or(Ti,fi)&&Zn.point(Ti,fi)}function Li(Ti,fi){var Ci=or(Ti,fi);if(xn&&on.push([Ti,fi]),Ln)bn=Ti,zn=fi,jn=Ci,Ln=!1,Ci&&(Zn.lineStart(),Zn.point(Ti,fi));else if(Ci&&Jn)Zn.point(Ti,fi);else{var _i=[$n=Math.max(-1e9,Math.min(1e9,$n)),Wr=Math.max(-1e9,Math.min(1e9,Wr))],Xi=[Ti=Math.max(-1e9,Math.min(1e9,Ti)),fi=Math.max(-1e9,Math.min(1e9,fi))];!function(Kn,Vi,za,qo,Lo,uo){var di,ca=Kn[0],fo=Kn[1],Hi=0,ya=1,Ba=Vi[0]-ca,Ji=Vi[1]-fo;if(di=za-ca,Ba||!(di>0)){if(di/=Ba,Ba<0){if(di<Hi)return;di<ya&&(ya=di)}else if(Ba>0){if(di>ya)return;di>Hi&&(Hi=di)}if(di=Lo-ca,Ba||!(di<0)){if(di/=Ba,Ba<0){if(di>ya)return;di>Hi&&(Hi=di)}else if(Ba>0){if(di<Hi)return;di<ya&&(ya=di)}if(di=qo-fo,Ji||!(di>0)){if(di/=Ji,Ji<0){if(di<Hi)return;di<ya&&(ya=di)}else if(Ji>0){if(di>ya)return;di>Hi&&(Hi=di)}if(di=uo-fo,Ji||!(di<0)){if(di/=Ji,Ji<0){if(di>ya)return;di>Hi&&(Hi=di)}else if(Ji>0){if(di<Hi)return;di<ya&&(ya=di)}return Hi>0&&(Kn[0]=ca+Hi*Ba,Kn[1]=fo+Hi*Ji),ya<1&&(Vi[0]=ca+ya*Ba,Vi[1]=fo+ya*Ji),!0}}}}}(_i,Xi,ft,zt,ar,Ht)?Ci&&(Zn.lineStart(),Zn.point(Ti,fi),Bn=!1):(Jn||(Zn.lineStart(),Zn.point(_i[0],_i[1])),Zn.point(Xi[0],Xi[1]),Ci||Zn.lineEnd(),Bn=!1)}$n=Ti,Wr=fi,Jn=Ci}return Ai}}var On,zr,sn,Mn=b(),Tn={sphere:S,point:S,lineStart:function(){Tn.point=$t,Tn.lineEnd=Rn},lineEnd:S,polygonStart:S,polygonEnd:S};function Rn(){Tn.point=Tn.lineEnd=S}function $t(ft,zt){On=ft*=l,zr=_(zt*=l),sn=h(zt),Tn.point=Ct}function Ct(ft,zt){ft*=l;var ar=_(zt*=l),Ht=h(zt),or=c(ft-On),Er=h(or),Or=Ht*_(or),Gr=sn*ar-zr*Ht*Er,an=zr*ar+sn*Ht*Er;Mn.add(g(k(Or*Or+Gr*Gr),an)),On=ft,zr=ar,sn=Ht}function Ut(ft){return Mn.reset(),Z(ft,Tn),+Mn}var lr=[null,null],_r={type:"LineString",coordinates:lr};function qr(ft,zt){return lr[0]=ft,lr[1]=zt,Ut(_r)}var Vr={Feature:function(ft,zt){return yr(ft.geometry,zt)},FeatureCollection:function(ft,zt){for(var ar=ft.features,Ht=-1,or=ar.length;++Ht<or;)if(yr(ar[Ht].geometry,zt))return!0;return!1}},br={Sphere:function(){return!0},Point:function(ft,zt){return kr(ft.coordinates,zt)},MultiPoint:function(ft,zt){for(var ar=ft.coordinates,Ht=-1,or=ar.length;++Ht<or;)if(kr(ar[Ht],zt))return!0;return!1},LineString:function(ft,zt){return Cr(ft.coordinates,zt)},MultiLineString:function(ft,zt){for(var ar=ft.coordinates,Ht=-1,or=ar.length;++Ht<or;)if(Cr(ar[Ht],zt))return!0;return!1},Polygon:function(ft,zt){return Ar(ft.coordinates,zt)},MultiPolygon:function(ft,zt){for(var ar=ft.coordinates,Ht=-1,or=ar.length;++Ht<or;)if(Ar(ar[Ht],zt))return!0;return!1},GeometryCollection:function(ft,zt){for(var ar=ft.geometries,Ht=-1,or=ar.length;++Ht<or;)if(yr(ar[Ht],zt))return!0;return!1}};function yr(ft,zt){return!(!ft||!br.hasOwnProperty(ft.type))&&br[ft.type](ft,zt)}function kr(ft,zt){return 0===qr(ft,zt)}function Cr(ft,zt){for(var ar,Ht,or,Er=0,Or=ft.length;Er<Or;Er++){if(0===(Ht=qr(ft[Er],zt))||Er>0&&(or=qr(ft[Er],ft[Er-1]))>0&&ar<=or&&Ht<=or&&(ar+Ht-or)*(1-Math.pow((ar-Ht)/or,2))<1e-12*or)return!0;ar=Ht}return!1}function Ar(ft,zt){return!!En(ft.map(Yr),cn(zt))}function Yr(ft){return(ft=ft.map(cn)).pop(),ft}function cn(ft){return[ft[0]*l,ft[1]*l]}function yn(ft,zt,ar){var Ht=m.range(ft,zt-t,ar).concat(zt);return function(or){return Ht.map(function(Er){return[or,Er]})}}function Kr(ft,zt,ar){var Ht=m.range(ft,zt-t,ar).concat(zt);return function(or){return Ht.map(function(Er){return[Er,or]})}}function mn(){var ft,zt,ar,Ht,or,Er,Or,Gr,an,tn,pn,xn,on=10,bn=on,zn=90,jn=360,$n=2.5;function Wr(){return{type:"MultiLineString",coordinates:Jn()}}function Jn(){return m.range(o(Ht/zn)*zn,ar,zn).map(pn).concat(m.range(o(Gr/jn)*jn,Or,jn).map(xn)).concat(m.range(o(zt/on)*on,ft,on).filter(function(Ln){return c(Ln%zn)>t}).map(an)).concat(m.range(o(Er/bn)*bn,or,bn).filter(function(Ln){return c(Ln%jn)>t}).map(tn))}return Wr.lines=function(){return Jn().map(function(Ln){return{type:"LineString",coordinates:Ln}})},Wr.outline=function(){return{type:"Polygon",coordinates:[pn(Ht).concat(xn(Or).slice(1),pn(ar).reverse().slice(1),xn(Gr).reverse().slice(1))]}},Wr.extent=function(Ln){return arguments.length?Wr.extentMajor(Ln).extentMinor(Ln):Wr.extentMinor()},Wr.extentMajor=function(Ln){return arguments.length?(Gr=+Ln[0][1],Or=+Ln[1][1],(Ht=+Ln[0][0])>(ar=+Ln[1][0])&&(Ln=Ht,Ht=ar,ar=Ln),Gr>Or&&(Ln=Gr,Gr=Or,Or=Ln),Wr.precision($n)):[[Ht,Gr],[ar,Or]]},Wr.extentMinor=function(Ln){return arguments.length?(Er=+Ln[0][1],or=+Ln[1][1],(zt=+Ln[0][0])>(ft=+Ln[1][0])&&(Ln=zt,zt=ft,ft=Ln),Er>or&&(Ln=Er,Er=or,or=Ln),Wr.precision($n)):[[zt,Er],[ft,or]]},Wr.step=function(Ln){return arguments.length?Wr.stepMajor(Ln).stepMinor(Ln):Wr.stepMinor()},Wr.stepMajor=function(Ln){return arguments.length?(zn=+Ln[0],jn=+Ln[1],Wr):[zn,jn]},Wr.stepMinor=function(Ln){return arguments.length?(on=+Ln[0],bn=+Ln[1],Wr):[on,bn]},Wr.precision=function(Ln){return arguments.length?($n=+Ln,an=yn(Er,or,90),tn=Kr(zt,ft,$n),pn=yn(Gr,Or,90),xn=Kr(Ht,ar,$n),Wr):$n},Wr.extentMajor([[-180,-90+t],[180,90-t]]).extentMinor([[-180,-80-t],[180,80+t]])}function jr(ft){return ft}var Nr,nn,dn,wn,ii=b(),qn=b(),gn={point:S,lineStart:S,lineEnd:S,polygonStart:function(){gn.lineStart=ei,gn.lineEnd=Ea},polygonEnd:function(){gn.lineStart=gn.lineEnd=gn.point=S,ii.add(c(qn)),qn.reset()},result:function(){var ft=ii/2;return ii.reset(),ft}};function ei(){gn.point=ui}function ui(ft,zt){gn.point=Yi,Nr=dn=ft,nn=wn=zt}function Yi(ft,zt){qn.add(wn*ft-dn*zt),dn=ft,wn=zt}function Ea(){Yi(Nr,nn)}var zo,Ho,Ua,qa,ea=1/0,ga=ea,ki=-ea,Fi=ki,oo={point:function(ft,zt){ft<ea&&(ea=ft),ft>ki&&(ki=ft),zt<ga&&(ga=zt),zt>Fi&&(Fi=zt)},lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S,result:function(){var ft=[[ea,ga],[ki,Fi]];return ki=Fi=-(ga=ea=1/0),ft}},Do=0,ji=0,_o=0,so=0,ma=0,Ga=0,lo=0,yo=0,Ia=0,la={point:Va,lineStart:ps,lineEnd:ss,polygonStart:function(){la.lineStart=Xo,la.lineEnd=ys},polygonEnd:function(){la.point=Va,la.lineStart=ps,la.lineEnd=ss},result:function(){var ft=Ia?[lo/Ia,yo/Ia]:Ga?[so/Ga,ma/Ga]:_o?[Do/_o,ji/_o]:[NaN,NaN];return Do=ji=_o=so=ma=Ga=lo=yo=Ia=0,ft}};function Va(ft,zt){Do+=ft,ji+=zt,++_o}function ps(){la.point=vs}function vs(ft,zt){la.point=Ui,Va(Ua=ft,qa=zt)}function Ui(ft,zt){var ar=ft-Ua,Ht=zt-qa,or=k(ar*ar+Ht*Ht);so+=or*(Ua+ft)/2,ma+=or*(qa+zt)/2,Ga+=or,Va(Ua=ft,qa=zt)}function ss(){la.point=Va}function Xo(){la.point=xs}function ys(){ds(zo,Ho)}function xs(ft,zt){la.point=ds,Va(zo=Ua=ft,Ho=qa=zt)}function ds(ft,zt){var ar=ft-Ua,Ht=zt-qa,or=k(ar*ar+Ht*Ht);so+=or*(Ua+ft)/2,ma+=or*(qa+zt)/2,Ga+=or,lo+=(or=qa*ft-Ua*zt)*(Ua+ft),yo+=or*(qa+zt),Ia+=3*or,Va(Ua=ft,qa=zt)}function bs(ft){this._context=ft}bs.prototype={_radius:4.5,pointRadius:function(ft){return this._radius=ft,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(ft,zt){switch(this._point){case 0:this._context.moveTo(ft,zt),this._point=1;break;case 1:this._context.lineTo(ft,zt);break;default:this._context.moveTo(ft+this._radius,zt),this._context.arc(ft,zt,this._radius,0,s)}},result:S};var wo,To,Ro,Fo,Bo,Zo=b(),co={point:S,lineStart:function(){co.point=ls},lineEnd:function(){wo&&no(To,Ro),co.point=S},polygonStart:function(){wo=!0},polygonEnd:function(){wo=null},result:function(){var ft=+Zo;return Zo.reset(),ft}};function ls(ft,zt){co.point=no,To=Fo=ft,Ro=Bo=zt}function no(ft,zt){Zo.add(k((Fo-=ft)*Fo+(Bo-=zt)*Bo)),Fo=ft,Bo=zt}function No(){this._string=[]}function cs(ft){return"m0,"+ft+"a"+ft+","+ft+" 0 1,1 0,"+-2*ft+"a"+ft+","+ft+" 0 1,1 0,"+2*ft+"z"}function ko(ft){return function(zt){var ar=new Bi;for(var Ht in ft)ar[Ht]=ft[Ht];return ar.stream=zt,ar}}function Bi(){}function je(ft,zt,ar){var Ht=ft.clipExtent&&ft.clipExtent();return ft.scale(150).translate([0,0]),null!=Ht&&ft.clipExtent(null),Z(ar,ft.stream(oo)),zt(oo.result()),null!=Ht&&ft.clipExtent(Ht),ft}function qe(ft,zt,ar){return je(ft,function(Ht){var or=zt[1][0]-zt[0][0],Er=zt[1][1]-zt[0][1],Or=Math.min(or/(Ht[1][0]-Ht[0][0]),Er/(Ht[1][1]-Ht[0][1])),Gr=+zt[0][0]+(or-Or*(Ht[1][0]+Ht[0][0]))/2,an=+zt[0][1]+(Er-Or*(Ht[1][1]+Ht[0][1]))/2;ft.scale(150*Or).translate([Gr,an])},ar)}function Ke(ft,zt,ar){return qe(ft,[[0,0],zt],ar)}function it(ft,zt,ar){return je(ft,function(Ht){var or=+zt,Er=or/(Ht[1][0]-Ht[0][0]),Or=(or-Er*(Ht[1][0]+Ht[0][0]))/2,Gr=-Er*Ht[0][1];ft.scale(150*Er).translate([Or,Gr])},ar)}function gt(ft,zt,ar){return je(ft,function(Ht){var or=+zt,Er=or/(Ht[1][1]-Ht[0][1]),Or=-Er*Ht[0][0],Gr=(or-Er*(Ht[1][1]+Ht[0][1]))/2;ft.scale(150*Er).translate([Or,Gr])},ar)}No.prototype={_radius:4.5,_circle:cs(4.5),pointRadius:function(ft){return(ft=+ft)!==this._radius&&(this._radius=ft,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(ft,zt){switch(this._point){case 0:this._string.push("M",ft,",",zt),this._point=1;break;case 1:this._string.push("L",ft,",",zt);break;default:null==this._circle&&(this._circle=cs(this._radius)),this._string.push("M",ft,",",zt,this._circle)}},result:function(){if(this._string.length){var ft=this._string.join("");return this._string=[],ft}return null}},Bi.prototype={constructor:Bi,point:function(ft,zt){this.stream.point(ft,zt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ht=h(30*l);function kt(ft,zt){return+zt?function(ar,Ht){function or(Er,Or,Gr,an,tn,pn,xn,on,bn,zn,jn,$n,Wr,Jn){var Ln=xn-Er,Bn=on-Or,Zn=Ln*Ln+Bn*Bn;if(Zn>4*Ht&&Wr--){var xi=an+zn,Ai=tn+jn,kn=pn+$n,Li=k(xi*xi+Ai*Ai+kn*kn),Ti=O(kn/=Li),fi=c(c(kn)-1)<t||c(Gr-bn)<t?(Gr+bn)/2:g(Ai,xi),Ci=ar(fi,Ti),_i=Ci[0],Xi=Ci[1],Kn=_i-Er,Vi=Xi-Or,za=Bn*Kn-Ln*Vi;(za*za/Zn>Ht||c((Ln*Kn+Bn*Vi)/Zn-.5)>.3||an*zn+tn*jn+pn*$n<ht)&&(or(Er,Or,Gr,an,tn,pn,_i,Xi,fi,xi/=Li,Ai/=Li,kn,Wr,Jn),Jn.point(_i,Xi),or(_i,Xi,fi,xi,Ai,kn,xn,on,bn,zn,jn,$n,Wr,Jn))}}return function(Er){var Or,Gr,an,tn,pn,xn,on,bn,zn,jn,$n,Wr,Jn={point:Ln,lineStart:Bn,lineEnd:xi,polygonStart:function(){Er.polygonStart(),Jn.lineStart=Ai},polygonEnd:function(){Er.polygonEnd(),Jn.lineStart=Bn}};function Ln(Ti,fi){Ti=ar(Ti,fi),Er.point(Ti[0],Ti[1])}function Bn(){bn=NaN,Jn.point=Zn,Er.lineStart()}function Zn(Ti,fi){var Ci=se([Ti,fi]),_i=ar(Ti,fi);or(bn,zn,on,jn,$n,Wr,bn=_i[0],zn=_i[1],on=Ti,jn=Ci[0],$n=Ci[1],Wr=Ci[2],16,Er),Er.point(bn,zn)}function xi(){Jn.point=Ln,Er.lineEnd()}function Ai(){Bn(),Jn.point=kn,Jn.lineEnd=Li}function kn(Ti,fi){Zn(Or=Ti,fi),Gr=bn,an=zn,tn=jn,pn=$n,xn=Wr,Jn.point=Zn}function Li(){or(bn,zn,on,jn,$n,Wr,Gr,an,Or,tn,pn,xn,16,Er),Jn.lineEnd=xi,xi()}return Jn}}(ft,zt):(ar=ft,ko({point:function(Ht,or){Ht=ar(Ht,or),this.stream.point(Ht[0],Ht[1])}}));var ar}var Jt=ko({point:function(ft,zt){this.stream.point(ft*l,zt*l)}});function Qt(ft,zt,ar,Ht,or){function Er(Or,Gr){return[zt+ft*(Or*=Ht),ar-ft*(Gr*=or)]}return Er.invert=function(Or,Gr){return[(Or-zt)/ft*Ht,(ar-Gr)/ft*or]},Er}function Wt(ft,zt,ar,Ht,or,Er){var Or=h(Er),Gr=_(Er),an=Or*ft,tn=Gr*ft,pn=Or/ft,xn=Gr/ft,on=(Gr*ar-Or*zt)/ft,bn=(Gr*zt+Or*ar)/ft;function zn(jn,$n){return[an*(jn*=Ht)-tn*($n*=or)+zt,ar-tn*jn-an*$n]}return zn.invert=function(jn,$n){return[Ht*(pn*jn-xn*$n+on),or*(bn-xn*jn-pn*$n)]},zn}function tr(ft){return ur(function(){return ft})()}function ur(ft){var zt,ar,Ht,or,Er,Or,Gr,an,tn,pn,xn=150,on=480,bn=250,zn=0,jn=0,$n=0,Wr=0,Jn=0,Ln=0,Bn=1,Zn=1,xi=null,Ai=Rr,kn=null,Li=jr,Ti=.5;function fi(Kn){return an(Kn[0]*l,Kn[1]*l)}function Ci(Kn){return(Kn=an.invert(Kn[0],Kn[1]))&&[Kn[0]*i,Kn[1]*i]}function _i(){var Kn=Wt(xn,0,0,Bn,Zn,Ln).apply(null,zt(zn,jn)),Vi=(Ln?Wt:Qt)(xn,on-Kn[0],bn-Kn[1],Bn,Zn,Ln);return ar=nr($n,Wr,Jn),Gr=Dt(zt,Vi),an=Dt(ar,Gr),Or=kt(Gr,Ti),Xi()}function Xi(){return tn=pn=null,fi}return fi.stream=function(Kn){return tn&&pn===Kn?tn:tn=Jt((Vi=ar,ko({point:function(za,qo){var Lo=Vi(za,qo);return this.stream.point(Lo[0],Lo[1])}}))(Ai(Or(Li(pn=Kn)))));var Vi},fi.preclip=function(Kn){return arguments.length?(Ai=Kn,xi=void 0,Xi()):Ai},fi.postclip=function(Kn){return arguments.length?(Li=Kn,kn=Ht=or=Er=null,Xi()):Li},fi.clipAngle=function(Kn){return arguments.length?(Ai=+Kn?Lr(xi=Kn*l):(xi=null,Rr),Xi()):xi*i},fi.clipExtent=function(Kn){return arguments.length?(Li=null==Kn?(kn=Ht=or=Er=null,jr):Qr(kn=+Kn[0][0],Ht=+Kn[0][1],or=+Kn[1][0],Er=+Kn[1][1]),Xi()):null==kn?null:[[kn,Ht],[or,Er]]},fi.scale=function(Kn){return arguments.length?(xn=+Kn,_i()):xn},fi.translate=function(Kn){return arguments.length?(on=+Kn[0],bn=+Kn[1],_i()):[on,bn]},fi.center=function(Kn){return arguments.length?(zn=Kn[0]%360*l,jn=Kn[1]%360*l,_i()):[zn*i,jn*i]},fi.rotate=function(Kn){return arguments.length?($n=Kn[0]%360*l,Wr=Kn[1]%360*l,Jn=Kn.length>2?Kn[2]%360*l:0,_i()):[$n*i,Wr*i,Jn*i]},fi.angle=function(Kn){return arguments.length?(Ln=Kn%360*l,_i()):Ln*i},fi.reflectX=function(Kn){return arguments.length?(Bn=Kn?-1:1,_i()):Bn<0},fi.reflectY=function(Kn){return arguments.length?(Zn=Kn?-1:1,_i()):Zn<0},fi.precision=function(Kn){return arguments.length?(Or=kt(Gr,Ti=Kn*Kn),Xi()):k(Ti)},fi.fitExtent=function(Kn,Vi){return qe(fi,Kn,Vi)},fi.fitSize=function(Kn,Vi){return Ke(fi,Kn,Vi)},fi.fitWidth=function(Kn,Vi){return it(fi,Kn,Vi)},fi.fitHeight=function(Kn,Vi){return gt(fi,Kn,Vi)},function(){return zt=ft.apply(this,arguments),fi.invert=zt.invert&&Ci,_i()}}function gr(ft){var zt=0,ar=a/3,Ht=ur(ft),or=Ht(zt,ar);return or.parallels=function(Er){return arguments.length?Ht(zt=Er[0]*l,ar=Er[1]*l):[zt*i,ar*i]},or}function xr(ft,zt){var ar=_(ft),Ht=(ar+_(zt))/2;if(c(Ht)<t)return function(Gr){var an=h(Gr);function tn(pn,xn){return[pn*an,_(xn)/an]}return tn.invert=function(pn,xn){return[pn/an,O(xn*an)]},tn}(ft);var or=1+ar*(2*Ht-ar),Er=k(or)/Ht;function Or(Gr,an){var tn=k(or-2*Ht*_(an))/Ht;return[tn*_(Gr*=Ht),Er-tn*h(Gr)]}return Or.invert=function(Gr,an){var tn=Er-an,pn=g(Gr,c(tn))*T(tn);return tn*Ht<0&&(pn-=a*T(Gr)*T(tn)),[pn/Ht,O((or-(Gr*Gr+tn*tn)*Ht*Ht)/(2*Ht))]},Or}function Pr(){return gr(xr).scale(155.424).center([0,33.6442])}function en(){return Pr().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function hn(ft){return function(zt,ar){var Ht=h(zt),or=h(ar),Er=ft(Ht*or);return[Er*or*_(zt),Er*_(ar)]}}function Sn(ft){return function(zt,ar){var Ht=k(zt*zt+ar*ar),or=ft(Ht),Er=_(or),Or=h(or);return[g(zt*Er,Ht*Or),O(Ht&&ar*Er/Ht)]}}var Pn=hn(function(ft){return k(2/(1+ft))});Pn.invert=Sn(function(ft){return 2*O(ft/2)});var Un=hn(function(ft){return(ft=M(ft))&&ft/_(ft)});function In(ft,zt){return[ft,d(L((r+zt)/2))]}function hi(ft){var zt,ar,Ht,or=tr(ft),Er=or.center,Or=or.scale,Gr=or.translate,an=or.clipExtent,tn=null;function pn(){var xn=a*Or(),on=or(dr(or.rotate()).invert([0,0]));return an(null==tn?[[on[0]-xn,on[1]-xn],[on[0]+xn,on[1]+xn]]:ft===In?[[Math.max(on[0]-xn,tn),zt],[Math.min(on[0]+xn,ar),Ht]]:[[tn,Math.max(on[1]-xn,zt)],[ar,Math.min(on[1]+xn,Ht)]])}return or.scale=function(xn){return arguments.length?(Or(xn),pn()):Or()},or.translate=function(xn){return arguments.length?(Gr(xn),pn()):Gr()},or.center=function(xn){return arguments.length?(Er(xn),pn()):Er()},or.clipExtent=function(xn){return arguments.length?(null==xn?tn=zt=ar=Ht=null:(tn=+xn[0][0],zt=+xn[0][1],ar=+xn[1][0],Ht=+xn[1][1]),pn()):null==tn?null:[[tn,zt],[ar,Ht]]},pn()}function bi(ft){return L((r+ft)/2)}function Oi(ft,zt){var ar=h(ft),Ht=ft===zt?_(ft):d(ar/h(zt))/d(bi(zt)/bi(ft)),or=ar*w(bi(ft),Ht)/Ht;if(!Ht)return In;function Er(Or,Gr){or>0?Gr<-r+t&&(Gr=-r+t):Gr>r-t&&(Gr=r-t);var an=or/w(bi(Gr),Ht);return[an*_(Ht*Or),or-an*h(Ht*Or)]}return Er.invert=function(Or,Gr){var an=or-Gr,tn=T(Ht)*k(Or*Or+an*an),pn=g(Or,c(an))*T(an);return an*Ht<0&&(pn-=a*T(Or)*T(an)),[pn/Ht,2*f(w(or/tn,1/Ht))-r]},Er}function Ii(ft,zt){return[ft,zt]}function zi(ft,zt){var ar=h(ft),Ht=ft===zt?_(ft):(ar-h(zt))/(zt-ft),or=ar/Ht+ft;if(c(Ht)<t)return Ii;function Er(Or,Gr){var an=or-Gr,tn=Ht*Or;return[an*_(tn),or-an*h(tn)]}return Er.invert=function(Or,Gr){var an=or-Gr,tn=g(Or,c(an))*T(an);return an*Ht<0&&(tn-=a*T(Or)*T(an)),[tn/Ht,or-T(Ht)*k(Or*Or+an*an)]},Er}Un.invert=Sn(function(ft){return ft}),In.invert=function(ft,zt){return[ft,2*f(x(zt))-r]},Ii.invert=Ii;var va=1.340264,pa=-.081106,ta=893e-6,ra=.003796,da=k(3)/2;function Oa(ft,zt){var ar=O(da*_(zt)),Ht=ar*ar,or=Ht*Ht*Ht;return[ft*h(ar)/(da*(va+3*pa*Ht+or*(7*ta+9*ra*Ht))),ar*(va+pa*Ht+or*(ta+ra*Ht))]}function Ya(ft,zt){var ar=h(zt),Ht=h(ft)*ar;return[ar*_(ft)/Ht,_(zt)/Ht]}function Wa(ft,zt){var ar=zt*zt,Ht=ar*ar;return[ft*(.8707-.131979*ar+Ht*(Ht*(.003971*ar-.001529*Ht)-.013791)),zt*(1.007226+ar*(.015085+Ht*(.028874*ar-.044475-.005916*Ht)))]}function Xa(ft,zt){return[h(zt)*_(ft),_(zt)]}function Za(ft,zt){var ar=h(zt),Ht=1+h(ft)*ar;return[ar*_(ft)/Ht,_(zt)/Ht]}function Ei(ft,zt){return[d(L((r+zt)/2)),-ft]}Oa.invert=function(ft,zt){for(var ar,Ht=zt,or=Ht*Ht,Er=or*or*or,Or=0;Or<12&&(Er=(or=(Ht-=ar=(Ht*(va+pa*or+Er*(ta+ra*or))-zt)/(va+3*pa*or+Er*(7*ta+9*ra*or)))*Ht)*or*or,!(c(ar)<1e-12));++Or);return[da*ft*(va+3*pa*or+Er*(7*ta+9*ra*or))/h(Ht),O(_(Ht)/da)]},Ya.invert=Sn(f),Wa.invert=function(ft,zt){var ar,Ht=zt,or=25;do{var Er=Ht*Ht,Or=Er*Er;Ht-=ar=(Ht*(1.007226+Er*(.015085+Or*(.028874*Er-.044475-.005916*Or)))-zt)/(1.007226+Er*(.045255+Or*(.259866*Er-.311325-.005916*11*Or)))}while(c(ar)>t&&--or>0);return[ft/(.8707+(Er=Ht*Ht)*(Er*(Er*Er*Er*(.003971-.001529*Er)-.013791)-.131979)),Ht]},Xa.invert=Sn(O),Za.invert=Sn(function(ft){return 2*f(ft)}),Ei.invert=function(ft,zt){return[-zt,2*f(x(ft))-r]},p.geoAlbers=en,p.geoAlbersUsa=function(){var ft,zt,ar,Ht,or,Er,Or=en(),Gr=Pr().rotate([154,0]).center([-2,58.5]).parallels([55,65]),an=Pr().rotate([157,0]).center([-3,19.9]).parallels([8,18]),tn={point:function(on,bn){Er=[on,bn]}};function pn(on){var bn=on[0],zn=on[1];return Er=null,ar.point(bn,zn),Er||(Ht.point(bn,zn),Er)||(or.point(bn,zn),Er)}function xn(){return ft=zt=null,pn}return pn.invert=function(on){var bn=Or.scale(),zn=Or.translate(),jn=(on[0]-zn[0])/bn,$n=(on[1]-zn[1])/bn;return($n>=.12&&$n<.234&&jn>=-.425&&jn<-.214?Gr:$n>=.166&&$n<.234&&jn>=-.214&&jn<-.115?an:Or).invert(on)},pn.stream=function(on){return ft&&zt===on?ft:(bn=[Or.stream(zt=on),Gr.stream(on),an.stream(on)],zn=bn.length,ft={point:function(jn,$n){for(var Wr=-1;++Wr<zn;)bn[Wr].point(jn,$n)},sphere:function(){for(var jn=-1;++jn<zn;)bn[jn].sphere()},lineStart:function(){for(var jn=-1;++jn<zn;)bn[jn].lineStart()},lineEnd:function(){for(var jn=-1;++jn<zn;)bn[jn].lineEnd()},polygonStart:function(){for(var jn=-1;++jn<zn;)bn[jn].polygonStart()},polygonEnd:function(){for(var jn=-1;++jn<zn;)bn[jn].polygonEnd()}});var bn,zn},pn.precision=function(on){return arguments.length?(Or.precision(on),Gr.precision(on),an.precision(on),xn()):Or.precision()},pn.scale=function(on){return arguments.length?(Or.scale(on),Gr.scale(.35*on),an.scale(on),pn.translate(Or.translate())):Or.scale()},pn.translate=function(on){if(!arguments.length)return Or.translate();var bn=Or.scale(),zn=+on[0],jn=+on[1];return ar=Or.translate(on).clipExtent([[zn-.455*bn,jn-.238*bn],[zn+.455*bn,jn+.238*bn]]).stream(tn),Ht=Gr.translate([zn-.307*bn,jn+.201*bn]).clipExtent([[zn-.425*bn+t,jn+.12*bn+t],[zn-.214*bn-t,jn+.234*bn-t]]).stream(tn),or=an.translate([zn-.205*bn,jn+.212*bn]).clipExtent([[zn-.214*bn+t,jn+.166*bn+t],[zn-.115*bn-t,jn+.234*bn-t]]).stream(tn),xn()},pn.fitExtent=function(on,bn){return qe(pn,on,bn)},pn.fitSize=function(on,bn){return Ke(pn,on,bn)},pn.fitWidth=function(on,bn){return it(pn,on,bn)},pn.fitHeight=function(on,bn){return gt(pn,on,bn)},pn.scale(1070)},p.geoArea=function(ft){return U.reset(),Z(ft,Q),2*U},p.geoAzimuthalEqualArea=function(){return tr(Pn).scale(124.75).clipAngle(179.999)},p.geoAzimuthalEqualAreaRaw=Pn,p.geoAzimuthalEquidistant=function(){return tr(Un).scale(79.4188).clipAngle(179.999)},p.geoAzimuthalEquidistantRaw=Un,p.geoBounds=function(ft){var zt,ar,Ht,or,Er,Or,Gr;if(fe=Se=-(we=be=1/0),Ie=[],Z(ft,He),ar=Ie.length){for(Ie.sort(pt),zt=1,Er=[Ht=Ie[0]];zt<ar;++zt)ut(Ht,(or=Ie[zt])[0])||ut(Ht,or[1])?(at(Ht[0],or[1])>at(Ht[0],Ht[1])&&(Ht[1]=or[1]),at(or[0],Ht[1])>at(Ht[0],Ht[1])&&(Ht[0]=or[0])):Er.push(Ht=or);for(Or=-1/0,zt=0,Ht=Er[ar=Er.length-1];zt<=ar;Ht=or,++zt)(Gr=at(Ht[1],(or=Er[zt])[0]))>Or&&(Or=Gr,we=or[0],Se=Ht[1])}return Ie=ze=null,we===1/0||be===1/0?[[NaN,NaN],[NaN,NaN]]:[[we,be],[Se,fe]]},p.geoCentroid=function(ft){Ve=Je=De=Be=Ze=Ye=tt=st=vt=Pt=Mt=0,Z(ft,St);var zt=vt,ar=Pt,Ht=Mt,or=zt*zt+ar*ar+Ht*Ht;return or<1e-12&&(zt=Ye,ar=tt,Ht=st,Je<t&&(zt=De,ar=Be,Ht=Ze),(or=zt*zt+ar*ar+Ht*Ht)<1e-12)?[NaN,NaN]:[g(ar,zt)*i,O(Ht/k(or))*i]},p.geoCircle=function(){var ft,zt,ar=_t([0,0]),Ht=_t(90),or=_t(6),Er={point:function(Gr,an){ft.push(Gr=zt(Gr,an)),Gr[0]*=i,Gr[1]*=i}};function Or(){var Gr=ar.apply(this,arguments),an=Ht.apply(this,arguments)*l,tn=or.apply(this,arguments)*l;return ft=[],zt=nr(-Gr[0]*l,-Gr[1]*l,0).invert,hr(Er,an,tn,1),Gr={type:"Polygon",coordinates:[ft]},ft=zt=null,Gr}return Or.center=function(Gr){return arguments.length?(ar="function"==typeof Gr?Gr:_t([+Gr[0],+Gr[1]]),Or):ar},Or.radius=function(Gr){return arguments.length?(Ht="function"==typeof Gr?Gr:_t(+Gr),Or):Ht},Or.precision=function(Gr){return arguments.length?(or="function"==typeof Gr?Gr:_t(+Gr),Or):or},Or},p.geoClipAntimeridian=Rr,p.geoClipCircle=Lr,p.geoClipExtent=function(){var ft,zt,ar,Ht=0,or=0,Er=960,Or=500;return ar={stream:function(Gr){return ft&&zt===Gr?ft:ft=Qr(Ht,or,Er,Or)(zt=Gr)},extent:function(Gr){return arguments.length?(Ht=+Gr[0][0],or=+Gr[0][1],Er=+Gr[1][0],Or=+Gr[1][1],ft=zt=null,ar):[[Ht,or],[Er,Or]]}}},p.geoClipRectangle=Qr,p.geoConicConformal=function(){return gr(Oi).scale(109.5).parallels([30,30])},p.geoConicConformalRaw=Oi,p.geoConicEqualArea=Pr,p.geoConicEqualAreaRaw=xr,p.geoConicEquidistant=function(){return gr(zi).scale(131.154).center([0,13.9389])},p.geoConicEquidistantRaw=zi,p.geoContains=function(ft,zt){return(ft&&Vr.hasOwnProperty(ft.type)?Vr[ft.type]:yr)(ft,zt)},p.geoDistance=qr,p.geoEqualEarth=function(){return tr(Oa).scale(177.158)},p.geoEqualEarthRaw=Oa,p.geoEquirectangular=function(){return tr(Ii).scale(152.63)},p.geoEquirectangularRaw=Ii,p.geoGnomonic=function(){return tr(Ya).scale(144.049).clipAngle(60)},p.geoGnomonicRaw=Ya,p.geoGraticule=mn,p.geoGraticule10=function(){return mn()()},p.geoIdentity=function(){var ft,zt,ar,Ht,or,Er,Or,Gr=1,an=0,tn=0,pn=1,xn=1,on=0,bn=null,zn=1,jn=1,$n=ko({point:function(Bn,Zn){var xi=Ln([Bn,Zn]);this.stream.point(xi[0],xi[1])}}),Wr=jr;function Jn(){return zn=Gr*pn,jn=Gr*xn,Er=Or=null,Ln}function Ln(Bn){var Zn=Bn[0]*zn,xi=Bn[1]*jn;if(on){var Ai=xi*ft-Zn*zt;Zn=Zn*ft+xi*zt,xi=Ai}return[Zn+an,xi+tn]}return Ln.invert=function(Bn){var Zn=Bn[0]-an,xi=Bn[1]-tn;if(on){var Ai=xi*ft+Zn*zt;Zn=Zn*ft-xi*zt,xi=Ai}return[Zn/zn,xi/jn]},Ln.stream=function(Bn){return Er&&Or===Bn?Er:Er=$n(Wr(Or=Bn))},Ln.postclip=function(Bn){return arguments.length?(Wr=Bn,bn=ar=Ht=or=null,Jn()):Wr},Ln.clipExtent=function(Bn){return arguments.length?(Wr=null==Bn?(bn=ar=Ht=or=null,jr):Qr(bn=+Bn[0][0],ar=+Bn[0][1],Ht=+Bn[1][0],or=+Bn[1][1]),Jn()):null==bn?null:[[bn,ar],[Ht,or]]},Ln.scale=function(Bn){return arguments.length?(Gr=+Bn,Jn()):Gr},Ln.translate=function(Bn){return arguments.length?(an=+Bn[0],tn=+Bn[1],Jn()):[an,tn]},Ln.angle=function(Bn){return arguments.length?(zt=_(on=Bn%360*l),ft=h(on),Jn()):on*i},Ln.reflectX=function(Bn){return arguments.length?(pn=Bn?-1:1,Jn()):pn<0},Ln.reflectY=function(Bn){return arguments.length?(xn=Bn?-1:1,Jn()):xn<0},Ln.fitExtent=function(Bn,Zn){return qe(Ln,Bn,Zn)},Ln.fitSize=function(Bn,Zn){return Ke(Ln,Bn,Zn)},Ln.fitWidth=function(Bn,Zn){return it(Ln,Bn,Zn)},Ln.fitHeight=function(Bn,Zn){return gt(Ln,Bn,Zn)},Ln},p.geoInterpolate=function(ft,zt){var ar=ft[0]*l,Ht=ft[1]*l,or=zt[0]*l,Er=zt[1]*l,Or=h(Ht),Gr=_(Ht),an=h(Er),tn=_(Er),pn=Or*h(ar),xn=Or*_(ar),on=an*h(or),bn=an*_(or),zn=2*O(k(P(Er-Ht)+Or*an*P(or-ar))),jn=_(zn),$n=zn?function(Wr){var Jn=_(Wr*=zn)/jn,Ln=_(zn-Wr)/jn,Bn=Ln*pn+Jn*on,Zn=Ln*xn+Jn*bn,xi=Ln*Gr+Jn*tn;return[g(Zn,Bn)*i,g(xi,k(Bn*Bn+Zn*Zn))*i]}:function(){return[ar*i,Ht*i]};return $n.distance=zn,$n},p.geoLength=Ut,p.geoMercator=function(){return hi(In).scale(961/s)},p.geoMercatorRaw=In,p.geoNaturalEarth1=function(){return tr(Wa).scale(175.295)},p.geoNaturalEarth1Raw=Wa,p.geoOrthographic=function(){return tr(Xa).scale(249.5).clipAngle(90+t)},p.geoOrthographicRaw=Xa,p.geoPath=function(ft,zt){var ar,Ht,or=4.5;function Er(Or){return Or&&("function"==typeof or&&Ht.pointRadius(+or.apply(this,arguments)),Z(Or,ar(Ht))),Ht.result()}return Er.area=function(Or){return Z(Or,ar(gn)),gn.result()},Er.measure=function(Or){return Z(Or,ar(co)),co.result()},Er.bounds=function(Or){return Z(Or,ar(oo)),oo.result()},Er.centroid=function(Or){return Z(Or,ar(la)),la.result()},Er.projection=function(Or){return arguments.length?(ar=null==Or?(ft=null,jr):(ft=Or).stream,Er):ft},Er.context=function(Or){return arguments.length?(Ht=null==Or?(zt=null,new No):new bs(zt=Or),"function"!=typeof or&&Ht.pointRadius(or),Er):zt},Er.pointRadius=function(Or){return arguments.length?(or="function"==typeof Or?Or:(Ht.pointRadius(+Or),+Or),Er):or},Er.projection(ft).context(zt)},p.geoProjection=tr,p.geoProjectionMutator=ur,p.geoRotation=dr,p.geoStereographic=function(){return tr(Za).scale(250).clipAngle(142)},p.geoStereographicRaw=Za,p.geoStream=Z,p.geoTransform=function(ft){return{stream:ko(ft)}},p.geoTransverseMercator=function(){var ft=hi(Ei),zt=ft.center,ar=ft.rotate;return ft.center=function(Ht){return arguments.length?zt([-Ht[1],Ht[0]]):[(Ht=zt())[1],-Ht[0]]},ft.rotate=function(Ht){return arguments.length?ar([Ht[0],Ht[1],Ht.length>2?Ht[2]+90:90]):[(Ht=ar())[0],Ht[1],Ht[2]-90]},ar([0,0,90]).scale(159.155)},p.geoTransverseMercatorRaw=Ei,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?m(ee,y("d3-array")):m((p=p||self).d3=p.d3||{},p.d3)},{"d3-array":107}],115:[function(y,$,ee){var p;p=this,function(p){"use strict";function m(oe,pe){return oe.parent===pe.parent?1:2}function b(oe,pe){return oe+pe.x}function v(oe,pe){return Math.max(oe,pe.y)}function e(oe){var pe=0,ce=oe.children,ge=ce&&ce.length;if(ge)for(;--ge>=0;)pe+=ce[ge].value;else pe=1;oe.value=pe}function n(oe,pe){var ce,ge,xe,we,be,Se=new u(oe),fe=+oe.value&&(Se.value=oe.value),me=[Se];for(null==pe&&(pe=t);ce=me.pop();)if(fe&&(ce.value=+ce.data.value),(xe=pe(ce.data))&&(be=xe.length))for(ce.children=new Array(be),we=be-1;we>=0;--we)me.push(ge=ce.children[we]=new u(xe[we])),ge.parent=ce,ge.depth=ce.depth+1;return Se.eachBefore(r)}function t(oe){return oe.children}function a(oe){oe.data=oe.data.data}function r(oe){var pe=0;do{oe.height=pe}while((oe=oe.parent)&&oe.height<++pe)}function u(oe){this.data=oe,this.depth=this.height=0,this.parent=null}u.prototype=n.prototype={constructor:u,count:function(){return this.eachAfter(e)},each:function(oe){var pe,ce,ge,xe,we=this,be=[we];do{for(pe=be.reverse(),be=[];we=pe.pop();)if(oe(we),ce=we.children)for(ge=0,xe=ce.length;ge<xe;++ge)be.push(ce[ge])}while(be.length);return this},eachAfter:function(oe){for(var pe,ce,ge,xe=this,we=[xe],be=[];xe=we.pop();)if(be.push(xe),pe=xe.children)for(ce=0,ge=pe.length;ce<ge;++ce)we.push(pe[ce]);for(;xe=be.pop();)oe(xe);return this},eachBefore:function(oe){for(var pe,ce,ge=this,xe=[ge];ge=xe.pop();)if(oe(ge),pe=ge.children)for(ce=pe.length-1;ce>=0;--ce)xe.push(pe[ce]);return this},sum:function(oe){return this.eachAfter(function(pe){for(var ce=+oe(pe.data)||0,ge=pe.children,xe=ge&&ge.length;--xe>=0;)ce+=ge[xe].value;pe.value=ce})},sort:function(oe){return this.eachBefore(function(pe){pe.children&&pe.children.sort(oe)})},path:function(oe){for(var pe=this,ce=function(we,be){if(we===be)return we;var Se=we.ancestors(),fe=be.ancestors(),me=null;for(we=Se.pop(),be=fe.pop();we===be;)me=we,we=Se.pop(),be=fe.pop();return me}(pe,oe),ge=[pe];pe!==ce;)ge.push(pe=pe.parent);for(var xe=ge.length;oe!==ce;)ge.splice(xe,0,oe),oe=oe.parent;return ge},ancestors:function(){for(var oe=this,pe=[oe];oe=oe.parent;)pe.push(oe);return pe},descendants:function(){var oe=[];return this.each(function(pe){oe.push(pe)}),oe},leaves:function(){var oe=[];return this.eachBefore(function(pe){pe.children||oe.push(pe)}),oe},links:function(){var oe=this,pe=[];return oe.each(function(ce){ce!==oe&&pe.push({source:ce.parent,target:ce})}),pe},copy:function(){return n(this).eachBefore(a)}};var s=Array.prototype.slice;function i(oe){for(var pe,ce,ge=0,xe=(oe=function(be){for(var Se,fe,me=be.length;me;)fe=Math.random()*me--|0,Se=be[me],be[me]=be[fe],be[fe]=Se;return be}(s.call(oe))).length,we=[];ge<xe;)pe=oe[ge],ce&&f(ce,pe)?++ge:(ce=h(we=l(we,pe)),ge=0);return ce}function l(oe,pe){var ce,ge;if(g(pe,oe))return[pe];for(ce=0;ce<oe.length;++ce)if(c(pe,oe[ce])&&g(o(oe[ce],pe),oe))return[oe[ce],pe];for(ce=0;ce<oe.length-1;++ce)for(ge=ce+1;ge<oe.length;++ge)if(c(o(oe[ce],oe[ge]),pe)&&c(o(oe[ce],pe),oe[ge])&&c(o(oe[ge],pe),oe[ce])&&g(x(oe[ce],oe[ge],pe),oe))return[oe[ce],oe[ge],pe];throw new Error}function c(oe,pe){var ce=oe.r-pe.r,ge=pe.x-oe.x,xe=pe.y-oe.y;return ce<0||ce*ce<ge*ge+xe*xe}function f(oe,pe){var ce=oe.r-pe.r+1e-6,ge=pe.x-oe.x,xe=pe.y-oe.y;return ce>0&&ce*ce>ge*ge+xe*xe}function g(oe,pe){for(var ce=0;ce<pe.length;++ce)if(!f(oe,pe[ce]))return!1;return!0}function h(oe){switch(oe.length){case 1:return{x:(pe=oe[0]).x,y:pe.y,r:pe.r};case 2:return o(oe[0],oe[1]);case 3:return x(oe[0],oe[1],oe[2])}var pe}function o(oe,pe){var ce=oe.x,ge=oe.y,xe=oe.r,we=pe.x,be=pe.y,Se=pe.r,fe=we-ce,me=be-ge,Te=Se-xe,_e=Math.sqrt(fe*fe+me*me);return{x:(ce+we+fe/_e*Te)/2,y:(ge+be+me/_e*Te)/2,r:(_e+xe+Se)/2}}function x(oe,pe,ce){var ge=oe.x,xe=oe.y,we=oe.r,be=pe.x,Se=pe.y,fe=pe.r,me=ce.x,Te=ce.y,_e=ce.r,Me=ge-be,Ie=ge-me,ze=xe-Se,Ve=xe-Te,Je=fe-we,De=_e-we,Be=ge*ge+xe*xe-we*we,Ze=Be-be*be-Se*Se+fe*fe,Ye=Be-me*me-Te*Te+_e*_e,tt=Ie*ze-Me*Ve,st=(ze*Ye-Ve*Ze)/(2*tt)-ge,vt=(Ve*Je-ze*De)/tt,Pt=(Ie*Ze-Me*Ye)/(2*tt)-xe,Mt=(Me*De-Ie*Je)/tt,rt=vt*vt+Mt*Mt-1,et=2*(we+st*vt+Pt*Mt),bt=st*st+Pt*Pt-we*we,Rt=-(rt?(et+Math.sqrt(et*et-4*rt*bt))/(2*rt):bt/et);return{x:ge+st+vt*Rt,y:xe+Pt+Mt*Rt,r:Rt}}function d(oe,pe,ce){var ge,xe,we,be,Se=oe.x-pe.x,fe=oe.y-pe.y,me=Se*Se+fe*fe;me?(xe=pe.r+ce.r,be=oe.r+ce.r,(xe*=xe)>(be*=be)?(ge=(me+be-xe)/(2*me),we=Math.sqrt(Math.max(0,be/me-ge*ge)),ce.x=oe.x-ge*Se-we*fe,ce.y=oe.y-ge*fe+we*Se):(ge=(me+xe-be)/(2*me),we=Math.sqrt(Math.max(0,xe/me-ge*ge)),ce.x=pe.x+ge*Se-we*fe,ce.y=pe.y+ge*fe+we*Se)):(ce.x=pe.x+ce.r,ce.y=pe.y)}function w(oe,pe){var ce=oe.r+pe.r-1e-6,ge=pe.x-oe.x,xe=pe.y-oe.y;return ce>0&&ce*ce>ge*ge+xe*xe}function _(oe){var pe=oe._,ce=oe.next._,ge=pe.r+ce.r,xe=(pe.x*ce.r+ce.x*pe.r)/ge,we=(pe.y*ce.r+ce.y*pe.r)/ge;return xe*xe+we*we}function T(oe){this._=oe,this.next=null,this.previous=null}function k(oe){if(!(xe=oe.length))return 0;var pe,ce,ge,xe,we,be,Se,fe,me,Te,_e;if((pe=oe[0]).x=0,pe.y=0,!(xe>1))return pe.r;if(pe.x=-(ce=oe[1]).r,ce.x=pe.r,ce.y=0,!(xe>2))return pe.r+ce.r;d(ce,pe,ge=oe[2]),pe=new T(pe),ce=new T(ce),ge=new T(ge),pe.next=ge.previous=ce,ce.next=pe.previous=ge,ge.next=ce.previous=pe;e:for(Se=3;Se<xe;++Se){d(pe._,ce._,ge=oe[Se]),ge=new T(ge),fe=ce.next,me=pe.previous,Te=ce._.r,_e=pe._.r;do{if(Te<=_e){if(w(fe._,ge._)){pe.next=ce=fe,ce.previous=pe,--Se;continue e}Te+=fe._.r,fe=fe.next}else{if(w(me._,ge._)){(pe=me).next=ce,ce.previous=pe,--Se;continue e}_e+=me._.r,me=me.previous}}while(fe!==me.next);for(ge.previous=pe,ge.next=ce,pe.next=ce.previous=ce=ge,we=_(pe);(ge=ge.next)!==ce;)(be=_(ge))<we&&(pe=ge,we=be);ce=pe.next}for(pe=[ce._],ge=ce;(ge=ge.next)!==ce;)pe.push(ge._);for(ge=i(pe),Se=0;Se<xe;++Se)(pe=oe[Se]).x-=ge.x,pe.y-=ge.y;return ge.r}function L(oe){return null==oe?null:M(oe)}function M(oe){if("function"!=typeof oe)throw new Error;return oe}function O(){return 0}function P(oe){return function(){return oe}}function S(oe){return Math.sqrt(oe.value)}function E(oe){return function(pe){pe.children||(pe.r=Math.max(0,+oe(pe)||0))}}function R(oe,pe){return function(ce){if(ge=ce.children){var ge,xe,we,be=ge.length,Se=oe(ce)*pe||0;if(Se)for(xe=0;xe<be;++xe)ge[xe].r+=Se;if(we=k(ge),Se)for(xe=0;xe<be;++xe)ge[xe].r-=Se;ce.r=we+Se}}}function B(oe){return function(pe){var ce=pe.parent;pe.r*=oe,ce&&(pe.x=ce.x+oe*pe.x,pe.y=ce.y+oe*pe.y)}}function H(oe){oe.x0=Math.round(oe.x0),oe.y0=Math.round(oe.y0),oe.x1=Math.round(oe.x1),oe.y1=Math.round(oe.y1)}function V(oe,pe,ce,ge,xe){for(var we,be=oe.children,Se=-1,fe=be.length,me=oe.value&&(ge-pe)/oe.value;++Se<fe;)(we=be[Se]).y0=ce,we.y1=xe,we.x0=pe,we.x1=pe+=we.value*me}var Z={depth:-1},W={};function G(oe){return oe.id}function X(oe){return oe.parentId}function te(oe,pe){return oe.parent===pe.parent?1:2}function D(oe){var pe=oe.children;return pe?pe[0]:oe.t}function N(oe){var pe=oe.children;return pe?pe[pe.length-1]:oe.t}function U(oe,pe,ce){var ge=ce/(pe.i-oe.i);pe.c-=ge,pe.s+=ce,oe.c+=ge,pe.z+=ce,pe.m+=ce}function Q(oe,pe,ce){return oe.a.parent===pe.parent?oe.a:ce}function j(oe,pe){this._=oe,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=pe}function J(oe,pe,ce,ge,xe){for(var we,be=oe.children,Se=-1,fe=be.length,me=oe.value&&(xe-ce)/oe.value;++Se<fe;)(we=be[Se]).x0=pe,we.x1=ge,we.y0=ce,we.y1=ce+=we.value*me}j.prototype=Object.create(u.prototype);var K=(1+Math.sqrt(5))/2;function re(oe,pe,ce,ge,xe,we){for(var be,Se,fe,me,Te,_e,Me,Ie,ze,Ve,Je,De=[],Be=pe.children,Ze=0,Ye=0,tt=Be.length,st=pe.value;Ze<tt;){fe=xe-ce,me=we-ge;do{Te=Be[Ye++].value}while(!Te&&Ye<tt);for(_e=Me=Te,Je=Te*Te*(Ve=Math.max(me/fe,fe/me)/(st*oe)),ze=Math.max(Me/Je,Je/_e);Ye<tt;++Ye){if(Te+=Se=Be[Ye].value,Se<_e&&(_e=Se),Se>Me&&(Me=Se),Je=Te*Te*Ve,(Ie=Math.max(Me/Je,Je/_e))>ze){Te-=Se;break}ze=Ie}De.push(be={value:Te,dice:fe<me,children:Be.slice(Ze,Ye)}),be.dice?V(be,ce,ge,xe,st?ge+=me*Te/st:we):J(be,ce,ge,st?ce+=fe*Te/st:xe,we),st-=Te,Ze=Ye}return De}var ne=function oe(pe){function ce(ge,xe,we,be,Se){re(pe,ge,xe,we,be,Se)}return ce.ratio=function(ge){return oe((ge=+ge)>1?ge:1)},ce}(K),se=function oe(pe){function ce(ge,xe,we,be,Se){if((fe=ge._squarify)&&fe.ratio===pe)for(var fe,me,Te,_e,Me,Ie=-1,ze=fe.length,Ve=ge.value;++Ie<ze;){for(Te=(me=fe[Ie]).children,_e=me.value=0,Me=Te.length;_e<Me;++_e)me.value+=Te[_e].value;me.dice?V(me,xe,we,be,we+=(Se-we)*me.value/Ve):J(me,xe,we,xe+=(be-xe)*me.value/Ve,Se),Ve-=me.value}else ge._squarify=fe=re(pe,ge,xe,we,be,Se),fe.ratio=pe}return ce.ratio=function(ge){return oe((ge=+ge)>1?ge:1)},ce}(K);p.cluster=function(){var oe=m,pe=1,ce=1,ge=!1;function xe(we){var be,Se=0;we.eachAfter(function(Me){var ze,Ie=Me.children;Ie?(Me.x=(ze=Ie).reduce(b,0)/ze.length,Me.y=function(ze){return 1+ze.reduce(v,0)}(Ie)):(Me.x=be?Se+=oe(Me,be):0,Me.y=0,be=Me)});var fe=function(Me){for(var Ie;Ie=Me.children;)Me=Ie[0];return Me}(we),me=function(Me){for(var Ie;Ie=Me.children;)Me=Ie[Ie.length-1];return Me}(we),Te=fe.x-oe(fe,me)/2,_e=me.x+oe(me,fe)/2;return we.eachAfter(ge?function(Me){Me.x=(Me.x-we.x)*pe,Me.y=(we.y-Me.y)*ce}:function(Me){Me.x=(Me.x-Te)/(_e-Te)*pe,Me.y=(1-(we.y?Me.y/we.y:1))*ce})}return xe.separation=function(we){return arguments.length?(oe=we,xe):oe},xe.size=function(we){return arguments.length?(ge=!1,pe=+we[0],ce=+we[1],xe):ge?null:[pe,ce]},xe.nodeSize=function(we){return arguments.length?(ge=!0,pe=+we[0],ce=+we[1],xe):ge?[pe,ce]:null},xe},p.hierarchy=n,p.pack=function(){var oe=null,pe=1,ce=1,ge=O;function xe(we){return we.x=pe/2,we.y=ce/2,oe?we.eachBefore(E(oe)).eachAfter(R(ge,.5)).eachBefore(B(1)):we.eachBefore(E(S)).eachAfter(R(O,1)).eachAfter(R(ge,we.r/Math.min(pe,ce))).eachBefore(B(Math.min(pe,ce)/(2*we.r))),we}return xe.radius=function(we){return arguments.length?(oe=L(we),xe):oe},xe.size=function(we){return arguments.length?(pe=+we[0],ce=+we[1],xe):[pe,ce]},xe.padding=function(we){return arguments.length?(ge="function"==typeof we?we:P(+we),xe):ge},xe},p.packEnclose=i,p.packSiblings=function(oe){return k(oe),oe},p.partition=function(){var oe=1,pe=1,ce=0,ge=!1;function xe(we){var Se,fe,be=we.height+1;return we.x0=we.y0=ce,we.x1=oe,we.y1=pe/be,we.eachBefore((Se=pe,fe=be,function(me){me.children&&V(me,me.x0,Se*(me.depth+1)/fe,me.x1,Se*(me.depth+2)/fe);var Te=me.x0,_e=me.y0,Me=me.x1-ce,Ie=me.y1-ce;Me<Te&&(Te=Me=(Te+Me)/2),Ie<_e&&(_e=Ie=(_e+Ie)/2),me.x0=Te,me.y0=_e,me.x1=Me,me.y1=Ie})),ge&&we.eachBefore(H),we}return xe.round=function(we){return arguments.length?(ge=!!we,xe):ge},xe.size=function(we){return arguments.length?(oe=+we[0],pe=+we[1],xe):[oe,pe]},xe.padding=function(we){return arguments.length?(ce=+we,xe):ce},xe},p.stratify=function(){var oe=G,pe=X;function ce(ge){var xe,we,be,Se,fe,me,Te,_e=ge.length,Me=new Array(_e),Ie={};for(we=0;we<_e;++we)fe=Me[we]=new u(xe=ge[we]),null!=(me=oe(xe,we,ge))&&(me+="")&&(Ie[Te="$"+(fe.id=me)]=Te in Ie?W:fe);for(we=0;we<_e;++we)if(fe=Me[we],null!=(me=pe(ge[we],we,ge))&&(me+="")){if(!(Se=Ie["$"+me]))throw new Error("missing: "+me);if(Se===W)throw new Error("ambiguous: "+me);Se.children?Se.children.push(fe):Se.children=[fe],fe.parent=Se}else{if(be)throw new Error("multiple roots");be=fe}if(!be)throw new Error("no root");if(be.parent=Z,be.eachBefore(function(ze){ze.depth=ze.parent.depth+1,--_e}).eachBefore(r),be.parent=null,_e>0)throw new Error("cycle");return be}return ce.id=function(ge){return arguments.length?(oe=M(ge),ce):oe},ce.parentId=function(ge){return arguments.length?(pe=M(ge),ce):pe},ce},p.tree=function(){var oe=te,pe=1,ce=1,ge=null;function xe(fe){var me=function(De){for(var Be,Ze,Ye,tt,st,vt=new j(De,0),Pt=[vt];Be=Pt.pop();)if(Ye=Be._.children)for(Be.children=new Array(st=Ye.length),tt=st-1;tt>=0;--tt)Pt.push(Ze=Be.children[tt]=new j(Ye[tt],tt)),Ze.parent=Be;return(vt.parent=new j(null,0)).children=[vt],vt}(fe);if(me.eachAfter(we),me.parent.m=-me.z,me.eachBefore(be),ge)fe.eachBefore(Se);else{var Te=fe,_e=fe,Me=fe;fe.eachBefore(function(De){De.x<Te.x&&(Te=De),De.x>_e.x&&(_e=De),De.depth>Me.depth&&(Me=De)});var Ie=Te===_e?1:oe(Te,_e)/2,ze=Ie-Te.x,Ve=pe/(_e.x+Ie+ze),Je=ce/(Me.depth||1);fe.eachBefore(function(De){De.x=(De.x+ze)*Ve,De.y=De.depth*Je})}return fe}function we(fe){var me=fe.children,Te=fe.parent.children,_e=fe.i?Te[fe.i-1]:null;if(me){!function(Ie){for(var ze,Ve=0,Je=0,De=Ie.children,Be=De.length;--Be>=0;)(ze=De[Be]).z+=Ve,ze.m+=Ve,Ve+=ze.s+(Je+=ze.c)}(fe);var Me=(me[0].z+me[me.length-1].z)/2;_e?(fe.z=_e.z+oe(fe._,_e._),fe.m=fe.z-Me):fe.z=Me}else _e&&(fe.z=_e.z+oe(fe._,_e._));fe.parent.A=function(Ie,ze,Ve){if(ze){for(var Je,De=Ie,Be=Ie,Ze=ze,Ye=De.parent.children[0],tt=De.m,st=Be.m,vt=Ze.m,Pt=Ye.m;Ze=N(Ze),De=D(De),Ze&&De;)Ye=D(Ye),(Be=N(Be)).a=Ie,(Je=Ze.z+vt-De.z-tt+oe(Ze._,De._))>0&&(U(Q(Ze,Ie,Ve),Ie,Je),tt+=Je,st+=Je),vt+=Ze.m,tt+=De.m,Pt+=Ye.m,st+=Be.m;Ze&&!N(Be)&&(Be.t=Ze,Be.m+=vt-st),De&&!D(Ye)&&(Ye.t=De,Ye.m+=tt-Pt,Ve=Ie)}return Ve}(fe,_e,fe.parent.A||Te[0])}function be(fe){fe._.x=fe.z+fe.parent.m,fe.m+=fe.parent.m}function Se(fe){fe.x*=pe,fe.y=fe.depth*ce}return xe.separation=function(fe){return arguments.length?(oe=fe,xe):oe},xe.size=function(fe){return arguments.length?(ge=!1,pe=+fe[0],ce=+fe[1],xe):ge?null:[pe,ce]},xe.nodeSize=function(fe){return arguments.length?(ge=!0,pe=+fe[0],ce=+fe[1],xe):ge?[pe,ce]:null},xe},p.treemap=function(){var oe=ne,pe=!1,ce=1,ge=1,xe=[0],we=O,be=O,Se=O,fe=O,me=O;function Te(Me){return Me.x0=Me.y0=0,Me.x1=ce,Me.y1=ge,Me.eachBefore(_e),xe=[0],pe&&Me.eachBefore(H),Me}function _e(Me){var Ie=xe[Me.depth],ze=Me.x0+Ie,Ve=Me.y0+Ie,Je=Me.x1-Ie,De=Me.y1-Ie;Je<ze&&(ze=Je=(ze+Je)/2),De<Ve&&(Ve=De=(Ve+De)/2),Me.x0=ze,Me.y0=Ve,Me.x1=Je,Me.y1=De,Me.children&&(Ie=xe[Me.depth+1]=we(Me)/2,ze+=me(Me)-Ie,Ve+=be(Me)-Ie,(Je-=Se(Me)-Ie)<ze&&(ze=Je=(ze+Je)/2),(De-=fe(Me)-Ie)<Ve&&(Ve=De=(Ve+De)/2),oe(Me,ze,Ve,Je,De))}return Te.round=function(Me){return arguments.length?(pe=!!Me,Te):pe},Te.size=function(Me){return arguments.length?(ce=+Me[0],ge=+Me[1],Te):[ce,ge]},Te.tile=function(Me){return arguments.length?(oe=M(Me),Te):oe},Te.padding=function(Me){return arguments.length?Te.paddingInner(Me).paddingOuter(Me):Te.paddingInner()},Te.paddingInner=function(Me){return arguments.length?(we="function"==typeof Me?Me:P(+Me),Te):we},Te.paddingOuter=function(Me){return arguments.length?Te.paddingTop(Me).paddingRight(Me).paddingBottom(Me).paddingLeft(Me):Te.paddingTop()},Te.paddingTop=function(Me){return arguments.length?(be="function"==typeof Me?Me:P(+Me),Te):be},Te.paddingRight=function(Me){return arguments.length?(Se="function"==typeof Me?Me:P(+Me),Te):Se},Te.paddingBottom=function(Me){return arguments.length?(fe="function"==typeof Me?Me:P(+Me),Te):fe},Te.paddingLeft=function(Me){return arguments.length?(me="function"==typeof Me?Me:P(+Me),Te):me},Te},p.treemapBinary=function(oe,pe,ce,ge,xe){var we,be,Se=oe.children,fe=Se.length,me=new Array(fe+1);for(me[0]=be=we=0;we<fe;++we)me[we+1]=be+=Se[we].value;!function Te(_e,Me,Ie,ze,Ve,Je,De){if(_e>=Me-1){var Be=Se[_e];return Be.x0=ze,Be.y0=Ve,Be.x1=Je,void(Be.y1=De)}for(var Ze=me[_e],Ye=Ie/2+Ze,tt=_e+1,st=Me-1;tt<st;){var vt=tt+st>>>1;me[vt]<Ye?tt=vt+1:st=vt}Ye-me[tt-1]<me[tt]-Ye&&_e+1<tt&&--tt;var Pt=me[tt]-Ze,Mt=Ie-Pt;if(Je-ze>De-Ve){var rt=(ze*Mt+Je*Pt)/Ie;Te(_e,tt,Pt,ze,Ve,rt,De),Te(tt,Me,Mt,rt,Ve,Je,De)}else{var et=(Ve*Mt+De*Pt)/Ie;Te(_e,tt,Pt,ze,Ve,Je,et),Te(tt,Me,Mt,ze,et,Je,De)}}(0,fe,oe.value,pe,ce,ge,xe)},p.treemapDice=V,p.treemapResquarify=se,p.treemapSlice=J,p.treemapSliceDice=function(oe,pe,ce,ge,xe){(1&oe.depth?J:V)(oe,pe,ce,ge,xe)},p.treemapSquarify=ne,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(p=p||self).d3=p.d3||{})},{}],116:[function(y,$,ee){var p,m;p=this,m=function(p,m){"use strict";function b(K,re,ne,se,oe){var pe=K*K,ce=pe*K;return((1-3*K+3*pe-ce)*re+(4-6*pe+3*ce)*ne+(1+3*K+3*pe-3*ce)*se+ce*oe)/6}function v(K){var re=K.length-1;return function(ne){var se=ne<=0?ne=0:ne>=1?(ne=1,re-1):Math.floor(ne*re),oe=K[se],pe=K[se+1];return b((ne-se/re)*re,se>0?K[se-1]:2*oe-pe,oe,pe,se<re-1?K[se+2]:2*pe-oe)}}function e(K){var re=K.length;return function(ne){var se=Math.floor(((ne%=1)<0?++ne:ne)*re);return b((ne-se/re)*re,K[(se+re-1)%re],K[se%re],K[(se+1)%re],K[(se+2)%re])}}function n(K){return function(){return K}}function t(K,re){return function(ne){return K+ne*re}}function a(K,re){var ne=re-K;return ne?t(K,ne>180||ne<-180?ne-360*Math.round(ne/360):ne):n(isNaN(K)?re:K)}function u(K,re){var ne=re-K;return ne?t(K,ne):n(isNaN(K)?re:K)}var s=function K(re){var ne=function(K){return 1==(K=+K)?u:function(re,ne){return ne-re?(se=re,oe=ne,pe=K,se=Math.pow(se,pe),oe=Math.pow(oe,pe)-se,pe=1/pe,function(ce){return Math.pow(se+ce*oe,pe)}):n(isNaN(re)?ne:re);var se,oe,pe}}(re);function se(oe,pe){var ce=ne((oe=m.rgb(oe)).r,(pe=m.rgb(pe)).r),ge=ne(oe.g,pe.g),xe=ne(oe.b,pe.b),we=u(oe.opacity,pe.opacity);return function(be){return oe.r=ce(be),oe.g=ge(be),oe.b=xe(be),oe.opacity=we(be),oe+""}}return se.gamma=K,se}(1);function i(K){return function(re){var ne,se,oe=re.length,pe=new Array(oe),ce=new Array(oe),ge=new Array(oe);for(ne=0;ne<oe;++ne)se=m.rgb(re[ne]),pe[ne]=se.r||0,ce[ne]=se.g||0,ge[ne]=se.b||0;return pe=K(pe),ce=K(ce),ge=K(ge),se.opacity=1,function(xe){return se.r=pe(xe),se.g=ce(xe),se.b=ge(xe),se+""}}}var l=i(v),c=i(e);function f(K,re){re||(re=[]);var ne,se=K?Math.min(re.length,K.length):0,oe=re.slice();return function(pe){for(ne=0;ne<se;++ne)oe[ne]=K[ne]*(1-pe)+re[ne]*pe;return oe}}function g(K){return ArrayBuffer.isView(K)&&!(K instanceof DataView)}function h(K,re){var ne,se=re?re.length:0,oe=K?Math.min(se,K.length):0,pe=new Array(oe),ce=new Array(se);for(ne=0;ne<oe;++ne)pe[ne]=k(K[ne],re[ne]);for(;ne<se;++ne)ce[ne]=re[ne];return function(ge){for(ne=0;ne<oe;++ne)ce[ne]=pe[ne](ge);return ce}}function o(K,re){var ne=new Date;return K=+K,re=+re,function(se){return ne.setTime(K*(1-se)+re*se),ne}}function x(K,re){return K=+K,re=+re,function(ne){return K*(1-ne)+re*ne}}function d(K,re){var ne,se={},oe={};for(ne in null!==K&&"object"==typeof K||(K={}),null!==re&&"object"==typeof re||(re={}),re)ne in K?se[ne]=k(K[ne],re[ne]):oe[ne]=re[ne];return function(pe){for(ne in se)oe[ne]=se[ne](pe);return oe}}var w=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(w.source,"g");function T(K,re){var ne,se,oe,we,pe=w.lastIndex=_.lastIndex=0,ce=-1,ge=[],xe=[];for(K+="",re+="";(ne=w.exec(K))&&(se=_.exec(re));)(oe=se.index)>pe&&(oe=re.slice(pe,oe),ge[ce]?ge[ce]+=oe:ge[++ce]=oe),(ne=ne[0])===(se=se[0])?ge[ce]?ge[ce]+=se:ge[++ce]=se:(ge[++ce]=null,xe.push({i:ce,x:x(ne,se)})),pe=_.lastIndex;return pe<re.length&&(oe=re.slice(pe),ge[ce]?ge[ce]+=oe:ge[++ce]=oe),ge.length<2?xe[0]?(we=xe[0].x,function(be){return we(be)+""}):function(we){return function(){return we}}(re):(re=xe.length,function(we){for(var be,Se=0;Se<re;++Se)ge[(be=xe[Se]).i]=be.x(we);return ge.join("")})}function k(K,re){var ne,se=typeof re;return null==re||"boolean"===se?n(re):("number"===se?x:"string"===se?(ne=m.color(re))?(re=ne,s):T:re instanceof m.color?s:re instanceof Date?o:g(re)?f:Array.isArray(re)?h:"function"!=typeof re.valueOf&&"function"!=typeof re.toString||isNaN(re)?d:x)(K,re)}var L,M,O,P,S=180/Math.PI,E={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function R(K,re,ne,se,oe,pe){var ce,ge,xe;return(ce=Math.sqrt(K*K+re*re))&&(K/=ce,re/=ce),(xe=K*ne+re*se)&&(ne-=K*xe,se-=re*xe),(ge=Math.sqrt(ne*ne+se*se))&&(ne/=ge,se/=ge,xe/=ge),K*se<re*ne&&(K=-K,re=-re,xe=-xe,ce=-ce),{translateX:oe,translateY:pe,rotate:Math.atan2(re,K)*S,skewX:Math.atan(xe)*S,scaleX:ce,scaleY:ge}}function B(K,re,ne,se){function oe(pe){return pe.length?pe.pop()+" ":""}return function(pe,ce){var we,be,Se,ge=[],xe=[];return pe=K(pe),ce=K(ce),function(we,be,Se,fe,me,Te){if(we!==Se||be!==fe){var _e=me.push("translate(",null,re,null,ne);Te.push({i:_e-4,x:x(we,Se)},{i:_e-2,x:x(be,fe)})}else(Se||fe)&&me.push("translate("+Se+re+fe+ne)}(pe.translateX,pe.translateY,ce.translateX,ce.translateY,ge,xe),Se=ge,(we=pe.rotate)!==(be=ce.rotate)?(we-be>180?be+=360:be-we>180&&(we+=360),xe.push({i:Se.push(oe(Se)+"rotate(",null,se)-2,x:x(we,be)})):be&&Se.push(oe(Se)+"rotate("+be+se),function(we,be,Se,fe){we!==be?fe.push({i:Se.push(oe(Se)+"skewX(",null,se)-2,x:x(we,be)}):be&&Se.push(oe(Se)+"skewX("+be+se)}(pe.skewX,ce.skewX,ge,xe),function(we,be,Se,fe,me,Te){if(we!==Se||be!==fe){var _e=me.push(oe(me)+"scale(",null,",",null,")");Te.push({i:_e-4,x:x(we,Se)},{i:_e-2,x:x(be,fe)})}else 1===Se&&1===fe||me.push(oe(me)+"scale("+Se+","+fe+")")}(pe.scaleX,pe.scaleY,ce.scaleX,ce.scaleY,ge,xe),pe=ce=null,function(we){for(var be,Se=-1,fe=xe.length;++Se<fe;)ge[(be=xe[Se]).i]=be.x(we);return ge.join("")}}}var H=B(function(K){return"none"===K?E:(L||(L=document.createElement("DIV"),M=document.documentElement,O=document.defaultView),L.style.transform=K,K=O.getComputedStyle(M.appendChild(L),null).getPropertyValue("transform"),M.removeChild(L),R(+(K=K.slice(7,-1).split(","))[0],+K[1],+K[2],+K[3],+K[4],+K[5]))},"px, ","px)","deg)"),V=B(function(K){return null==K?E:(P||(P=document.createElementNS("http://www.w3.org/2000/svg","g")),P.setAttribute("transform",K),(K=P.transform.baseVal.consolidate())?R((K=K.matrix).a,K.b,K.c,K.d,K.e,K.f):E)},", ",")",")"),Z=Math.SQRT2;function W(K){return((K=Math.exp(K))+1/K)/2}function G(K){return function(re,ne){var se=K((re=m.hsl(re)).h,(ne=m.hsl(ne)).h),oe=u(re.s,ne.s),pe=u(re.l,ne.l),ce=u(re.opacity,ne.opacity);return function(ge){return re.h=se(ge),re.s=oe(ge),re.l=pe(ge),re.opacity=ce(ge),re+""}}}var X=G(a),te=G(u);function D(K){return function(re,ne){var se=K((re=m.hcl(re)).h,(ne=m.hcl(ne)).h),oe=u(re.c,ne.c),pe=u(re.l,ne.l),ce=u(re.opacity,ne.opacity);return function(ge){return re.h=se(ge),re.c=oe(ge),re.l=pe(ge),re.opacity=ce(ge),re+""}}}var N=D(a),U=D(u);function Q(K){return function re(ne){function se(oe,pe){var ce=K((oe=m.cubehelix(oe)).h,(pe=m.cubehelix(pe)).h),ge=u(oe.s,pe.s),xe=u(oe.l,pe.l),we=u(oe.opacity,pe.opacity);return function(be){return oe.h=ce(be),oe.s=ge(be),oe.l=xe(Math.pow(be,ne)),oe.opacity=we(be),oe+""}}return ne=+ne,se.gamma=re,se}(1)}var j=Q(a),J=Q(u);p.interpolate=k,p.interpolateArray=function(K,re){return(g(re)?f:h)(K,re)},p.interpolateBasis=v,p.interpolateBasisClosed=e,p.interpolateCubehelix=j,p.interpolateCubehelixLong=J,p.interpolateDate=o,p.interpolateDiscrete=function(K){var re=K.length;return function(ne){return K[Math.max(0,Math.min(re-1,Math.floor(ne*re)))]}},p.interpolateHcl=N,p.interpolateHclLong=U,p.interpolateHsl=X,p.interpolateHslLong=te,p.interpolateHue=function(K,re){var ne=a(+K,+re);return function(se){var oe=ne(se);return oe-360*Math.floor(oe/360)}},p.interpolateLab=function(K,re){var ne=u((K=m.lab(K)).l,(re=m.lab(re)).l),se=u(K.a,re.a),oe=u(K.b,re.b),pe=u(K.opacity,re.opacity);return function(ce){return K.l=ne(ce),K.a=se(ce),K.b=oe(ce),K.opacity=pe(ce),K+""}},p.interpolateNumber=x,p.interpolateNumberArray=f,p.interpolateObject=d,p.interpolateRgb=s,p.interpolateRgbBasis=l,p.interpolateRgbBasisClosed=c,p.interpolateRound=function(K,re){return K=+K,re=+re,function(ne){return Math.round(K*(1-ne)+re*ne)}},p.interpolateString=T,p.interpolateTransformCss=H,p.interpolateTransformSvg=V,p.interpolateZoom=function(K,re){var ne,se,oe=K[0],pe=K[1],ce=K[2],we=re[2],be=re[0]-oe,Se=re[1]-pe,fe=be*be+Se*Se;if(fe<1e-12)se=Math.log(we/ce)/Z,ne=function(ze){return[oe+ze*be,pe+ze*Se,ce*Math.exp(Z*ze*se)]};else{var me=Math.sqrt(fe),Te=(we*we-ce*ce+4*fe)/(2*ce*2*me),_e=(we*we-ce*ce-4*fe)/(2*we*2*me),Me=Math.log(Math.sqrt(Te*Te+1)-Te),Ie=Math.log(Math.sqrt(_e*_e+1)-_e);se=(Ie-Me)/Z,ne=function(ze){var Ve,Ze,Je=ze*se,De=W(Me),Be=ce/(2*me)*(De*(Ve=Z*Je+Me,((Ve=Math.exp(2*Ve))-1)/(Ve+1))-(Ze=Me,((Ze=Math.exp(Ze))-1/Ze)/2));return[oe+Be*be,pe+Be*Se,ce*De/W(Z*Je+Me)]}}return ne.duration=1e3*se,ne},p.piecewise=function(K,re){for(var ne=0,se=re.length-1,oe=re[0],pe=new Array(se<0?0:se);ne<se;)pe[ne]=K(oe,oe=re[++ne]);return function(ce){var ge=Math.max(0,Math.min(se-1,Math.floor(ce*=se)));return pe[ge](ce-ge)}},p.quantize=function(K,re){for(var ne=new Array(re),se=0;se<re;++se)ne[se]=K(se/(re-1));return ne},Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?m(ee,y("d3-color")):m((p=p||self).d3=p.d3||{},p.d3)},{"d3-color":109}],117:[function(y,$,ee){var p;p=this,function(p){"use strict";var m=Math.PI,b=2*m,v=b-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new e}e.prototype=n.prototype={constructor:e,moveTo:function(t,a){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+a)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,a){this._+="L"+(this._x1=+t)+","+(this._y1=+a)},quadraticCurveTo:function(t,a,r,u){this._+="Q"+ +t+","+ +a+","+(this._x1=+r)+","+(this._y1=+u)},bezierCurveTo:function(t,a,r,u,s,i){this._+="C"+ +t+","+ +a+","+ +r+","+ +u+","+(this._x1=+s)+","+(this._y1=+i)},arcTo:function(t,a,r,u,s){var i=this._x1,l=this._y1,c=(r=+r)-(t=+t),f=(u=+u)-(a=+a),g=i-t,h=l-a,o=g*g+h*h;if((s=+s)<0)throw new Error("negative radius: "+s);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=a);else if(o>1e-6)if(Math.abs(h*c-f*g)>1e-6&&s){var x=r-i,d=u-l,w=c*c+f*f,_=x*x+d*d,T=Math.sqrt(w),k=Math.sqrt(o),L=s*Math.tan((m-Math.acos((w+o-_)/(2*T*k)))/2),M=L/k,O=L/T;Math.abs(M-1)>1e-6&&(this._+="L"+(t+M*g)+","+(a+M*h)),this._+="A"+s+","+s+",0,0,"+ +(h*x>g*d)+","+(this._x1=t+O*c)+","+(this._y1=a+O*f)}else this._+="L"+(this._x1=t)+","+(this._y1=a)},arc:function(t,a,r,u,s,i){t=+t,a=+a,i=!!i;var l=(r=+r)*Math.cos(u),c=r*Math.sin(u),f=t+l,g=a+c,h=1^i,o=i?u-s:s-u;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+f+","+g:(Math.abs(this._x1-f)>1e-6||Math.abs(this._y1-g)>1e-6)&&(this._+="L"+f+","+g),r&&(o<0&&(o=o%b+b),o>v?this._+="A"+r+","+r+",0,1,"+h+","+(t-l)+","+(a-c)+"A"+r+","+r+",0,1,"+h+","+(this._x1=f)+","+(this._y1=g):o>1e-6&&(this._+="A"+r+","+r+",0,"+ +(o>=m)+","+h+","+(this._x1=t+r*Math.cos(s))+","+(this._y1=a+r*Math.sin(s))))},rect:function(t,a,r,u){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+a)+"h"+ +r+"v"+ +u+"h"+-r+"Z"},toString:function(){return this._}},p.path=n,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(p=p||self).d3=p.d3||{})},{}],118:[function(y,$,ee){var p;p=this,function(p){"use strict";function m(u,s,i,l){if(isNaN(s)||isNaN(i))return u;var c,f,g,h,o,x,d,w,_,T=u._root,k={data:l},L=u._x0,M=u._y0,O=u._x1,P=u._y1;if(!T)return u._root=k,u;for(;T.length;)if((x=s>=(f=(L+O)/2))?L=f:O=f,(d=i>=(g=(M+P)/2))?M=g:P=g,c=T,!(T=T[w=d<<1|x]))return c[w]=k,u;if(h=+u._x.call(null,T.data),o=+u._y.call(null,T.data),s===h&&i===o)return k.next=T,c?c[w]=k:u._root=k,u;do{c=c?c[w]=new Array(4):u._root=new Array(4),(x=s>=(f=(L+O)/2))?L=f:O=f,(d=i>=(g=(M+P)/2))?M=g:P=g}while((w=d<<1|x)==(_=(o>=g)<<1|h>=f));return c[_]=T,c[w]=k,u}function b(u,s,i,l,c){this.node=u,this.x0=s,this.y0=i,this.x1=l,this.y1=c}function v(u){return u[0]}function e(u){return u[1]}function n(u,s,i){var l=new t(null==s?v:s,null==i?e:i,NaN,NaN,NaN,NaN);return null==u?l:l.addAll(u)}function t(u,s,i,l,c,f){this._x=u,this._y=s,this._x0=i,this._y0=l,this._x1=c,this._y1=f,this._root=void 0}function a(u){for(var s={data:u.data},i=s;u=u.next;)i=i.next={data:u.data};return s}var r=n.prototype=t.prototype;r.copy=function(){var u,s,i=new t(this._x,this._y,this._x0,this._y0,this._x1,this._y1),l=this._root;if(!l)return i;if(!l.length)return i._root=a(l),i;for(u=[{source:l,target:i._root=new Array(4)}];l=u.pop();)for(var c=0;c<4;++c)(s=l.source[c])&&(s.length?u.push({source:s,target:l.target[c]=new Array(4)}):l.target[c]=a(s));return i},r.add=function(u){var s=+this._x.call(null,u),i=+this._y.call(null,u);return m(this.cover(s,i),s,i,u)},r.addAll=function(u){var s,i,l,c,f=u.length,g=new Array(f),h=new Array(f),o=1/0,x=1/0,d=-1/0,w=-1/0;for(i=0;i<f;++i)isNaN(l=+this._x.call(null,s=u[i]))||isNaN(c=+this._y.call(null,s))||(g[i]=l,h[i]=c,l<o&&(o=l),l>d&&(d=l),c<x&&(x=c),c>w&&(w=c));if(o>d||x>w)return this;for(this.cover(o,x).cover(d,w),i=0;i<f;++i)m(this,g[i],h[i],u[i]);return this},r.cover=function(u,s){if(isNaN(u=+u)||isNaN(s=+s))return this;var i=this._x0,l=this._y0,c=this._x1,f=this._y1;if(isNaN(i))c=(i=Math.floor(u))+1,f=(l=Math.floor(s))+1;else{for(var g,h,o=c-i,x=this._root;i>u||u>=c||l>s||s>=f;)switch(h=(s<l)<<1|u<i,(g=new Array(4))[h]=x,x=g,o*=2,h){case 0:c=i+o,f=l+o;break;case 1:i=c-o,f=l+o;break;case 2:c=i+o,l=f-o;break;case 3:i=c-o,l=f-o}this._root&&this._root.length&&(this._root=x)}return this._x0=i,this._y0=l,this._x1=c,this._y1=f,this},r.data=function(){var u=[];return this.visit(function(s){if(!s.length)do{u.push(s.data)}while(s=s.next)}),u},r.extent=function(u){return arguments.length?this.cover(+u[0][0],+u[0][1]).cover(+u[1][0],+u[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},r.find=function(u,s,i){var l,c,f,g,h,o,x,d=this._x0,w=this._y0,_=this._x1,T=this._y1,k=[],L=this._root;for(L&&k.push(new b(L,d,w,_,T)),null==i?i=1/0:(d=u-i,w=s-i,_=u+i,T=s+i,i*=i);o=k.pop();)if(!(!(L=o.node)||(c=o.x0)>_||(f=o.y0)>T||(g=o.x1)<d||(h=o.y1)<w))if(L.length){var M=(c+g)/2,O=(f+h)/2;k.push(new b(L[3],M,O,g,h),new b(L[2],c,O,M,h),new b(L[1],M,f,g,O),new b(L[0],c,f,M,O)),(x=(s>=O)<<1|u>=M)&&(o=k[k.length-1],k[k.length-1]=k[k.length-1-x],k[k.length-1-x]=o)}else{var P=u-+this._x.call(null,L.data),S=s-+this._y.call(null,L.data),E=P*P+S*S;if(E<i){var R=Math.sqrt(i=E);d=u-R,w=s-R,_=u+R,T=s+R,l=L.data}}return l},r.remove=function(u){if(isNaN(f=+this._x.call(null,u))||isNaN(g=+this._y.call(null,u)))return this;var s,i,l,c,f,g,h,o,x,d,w,_,T=this._root,k=this._x0,L=this._y0,M=this._x1,O=this._y1;if(!T)return this;if(T.length)for(;;){if((x=f>=(h=(k+M)/2))?k=h:M=h,(d=g>=(o=(L+O)/2))?L=o:O=o,s=T,!(T=T[w=d<<1|x]))return this;if(!T.length)break;(s[w+1&3]||s[w+2&3]||s[w+3&3])&&(i=s,_=w)}for(;T.data!==u;)if(l=T,!(T=T.next))return this;return(c=T.next)&&delete T.next,l?(c?l.next=c:delete l.next,this):s?(c?s[w]=c:delete s[w],(T=s[0]||s[1]||s[2]||s[3])&&T===(s[3]||s[2]||s[1]||s[0])&&!T.length&&(i?i[_]=T:this._root=T),this):(this._root=c,this)},r.removeAll=function(u){for(var s=0,i=u.length;s<i;++s)this.remove(u[s]);return this},r.root=function(){return this._root},r.size=function(){var u=0;return this.visit(function(s){if(!s.length)do{++u}while(s=s.next)}),u},r.visit=function(u){var s,i,l,c,f,g,h=[],o=this._root;for(o&&h.push(new b(o,this._x0,this._y0,this._x1,this._y1));s=h.pop();)if(!u(o=s.node,l=s.x0,c=s.y0,f=s.x1,g=s.y1)&&o.length){var x=(l+f)/2,d=(c+g)/2;(i=o[3])&&h.push(new b(i,x,d,f,g)),(i=o[2])&&h.push(new b(i,l,d,x,g)),(i=o[1])&&h.push(new b(i,x,c,f,d)),(i=o[0])&&h.push(new b(i,l,c,x,d))}return this},r.visitAfter=function(u){var s,i=[],l=[];for(this._root&&i.push(new b(this._root,this._x0,this._y0,this._x1,this._y1));s=i.pop();){var c=s.node;if(c.length){var f,g=s.x0,h=s.y0,o=s.x1,x=s.y1,d=(g+o)/2,w=(h+x)/2;(f=c[0])&&i.push(new b(f,g,h,d,w)),(f=c[1])&&i.push(new b(f,d,h,o,w)),(f=c[2])&&i.push(new b(f,g,w,d,x)),(f=c[3])&&i.push(new b(f,d,w,o,x))}l.push(s)}for(;s=l.pop();)u(s.node,s.x0,s.y0,s.x1,s.y1);return this},r.x=function(u){return arguments.length?(this._x=u,this):this._x},r.y=function(u){return arguments.length?(this._y=u,this):this._y},p.quadtree=n,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(p=p||self).d3=p.d3||{})},{}],119:[function(y,$,ee){var p,m;p=this,m=function(p,m){"use strict";function b(Re){return function(){return Re}}var v=Math.abs,e=Math.atan2,n=Math.cos,t=Math.max,a=Math.min,r=Math.sin,u=Math.sqrt,s=Math.PI,i=s/2,l=2*s;function c(Re){return Re>1?0:Re<-1?s:Math.acos(Re)}function f(Re){return Re>=1?i:Re<=-1?-i:Math.asin(Re)}function g(Re){return Re.innerRadius}function h(Re){return Re.outerRadius}function o(Re){return Re.startAngle}function x(Re){return Re.endAngle}function d(Re){return Re&&Re.padAngle}function w(Re,lt,_t,Dt,Vt,nr,Gt,Kt){var ir=_t-Re,dr=Dt-lt,hr=Gt-Vt,cr=Kt-nr,sr=cr*ir-hr*dr;if(!(sr*sr<1e-12))return[Re+(sr=(hr*(lt-nr)-cr*(Re-Vt))/sr)*ir,lt+sr*dr]}function _(Re,lt,_t,Dt,Vt,nr,Gt){var Kt=Re-_t,ir=lt-Dt,dr=(Gt?nr:-nr)/u(Kt*Kt+ir*ir),hr=dr*ir,cr=-dr*Kt,sr=Re+hr,mr=lt+cr,Ir=_t+hr,vr=Dt+cr,Br=(sr+Ir)/2,Jr=(mr+vr)/2,ln=Ir-sr,En=vr-mr,Cn=ln*ln+En*En,An=Vt-nr,$r=sr*vr-Ir*mr,Rr=(En<0?-1:1)*u(t(0,An*An*Cn-$r*$r)),Lr=($r*En-ln*Rr)/Cn,Qr=(-$r*ln-En*Rr)/Cn,On=($r*En+ln*Rr)/Cn,zr=(-$r*ln+En*Rr)/Cn,sn=Lr-Br,Mn=Qr-Jr,Tn=On-Br,Rn=zr-Jr;return sn*sn+Mn*Mn>Tn*Tn+Rn*Rn&&(Lr=On,Qr=zr),{cx:Lr,cy:Qr,x01:-hr,y01:-cr,x11:Lr*(Vt/An-1),y11:Qr*(Vt/An-1)}}function T(Re){this._context=Re}function k(Re){return new T(Re)}function L(Re){return Re[0]}function M(Re){return Re[1]}function O(){var Re=L,lt=M,_t=b(!0),Dt=null,Vt=k,nr=null;function Gt(Kt){var ir,dr,hr,cr=Kt.length,sr=!1;for(null==Dt&&(nr=Vt(hr=m.path())),ir=0;ir<=cr;++ir)!(ir<cr&&_t(dr=Kt[ir],ir,Kt))===sr&&((sr=!sr)?nr.lineStart():nr.lineEnd()),sr&&nr.point(+Re(dr,ir,Kt),+lt(dr,ir,Kt));if(hr)return nr=null,hr+""||null}return Gt.x=function(Kt){return arguments.length?(Re="function"==typeof Kt?Kt:b(+Kt),Gt):Re},Gt.y=function(Kt){return arguments.length?(lt="function"==typeof Kt?Kt:b(+Kt),Gt):lt},Gt.defined=function(Kt){return arguments.length?(_t="function"==typeof Kt?Kt:b(!!Kt),Gt):_t},Gt.curve=function(Kt){return arguments.length?(Vt=Kt,null!=Dt&&(nr=Vt(Dt)),Gt):Vt},Gt.context=function(Kt){return arguments.length?(null==Kt?Dt=nr=null:nr=Vt(Dt=Kt),Gt):Dt},Gt}function P(){var Re=L,lt=null,_t=b(0),Dt=M,Vt=b(!0),nr=null,Gt=k,Kt=null;function ir(hr){var cr,sr,mr,Ir,vr,Br=hr.length,Jr=!1,ln=new Array(Br),En=new Array(Br);for(null==nr&&(Kt=Gt(vr=m.path())),cr=0;cr<=Br;++cr){if(!(cr<Br&&Vt(Ir=hr[cr],cr,hr))===Jr)if(Jr=!Jr)sr=cr,Kt.areaStart(),Kt.lineStart();else{for(Kt.lineEnd(),Kt.lineStart(),mr=cr-1;mr>=sr;--mr)Kt.point(ln[mr],En[mr]);Kt.lineEnd(),Kt.areaEnd()}Jr&&(ln[cr]=+Re(Ir,cr,hr),En[cr]=+_t(Ir,cr,hr),Kt.point(lt?+lt(Ir,cr,hr):ln[cr],Dt?+Dt(Ir,cr,hr):En[cr]))}if(vr)return Kt=null,vr+""||null}function dr(){return O().defined(Vt).curve(Gt).context(nr)}return ir.x=function(hr){return arguments.length?(Re="function"==typeof hr?hr:b(+hr),lt=null,ir):Re},ir.x0=function(hr){return arguments.length?(Re="function"==typeof hr?hr:b(+hr),ir):Re},ir.x1=function(hr){return arguments.length?(lt=null==hr?null:"function"==typeof hr?hr:b(+hr),ir):lt},ir.y=function(hr){return arguments.length?(_t="function"==typeof hr?hr:b(+hr),Dt=null,ir):_t},ir.y0=function(hr){return arguments.length?(_t="function"==typeof hr?hr:b(+hr),ir):_t},ir.y1=function(hr){return arguments.length?(Dt=null==hr?null:"function"==typeof hr?hr:b(+hr),ir):Dt},ir.lineX0=ir.lineY0=function(){return dr().x(Re).y(_t)},ir.lineY1=function(){return dr().x(Re).y(Dt)},ir.lineX1=function(){return dr().x(lt).y(_t)},ir.defined=function(hr){return arguments.length?(Vt="function"==typeof hr?hr:b(!!hr),ir):Vt},ir.curve=function(hr){return arguments.length?(Gt=hr,null!=nr&&(Kt=Gt(nr)),ir):Gt},ir.context=function(hr){return arguments.length?(null==hr?nr=Kt=null:Kt=Gt(nr=hr),ir):nr},ir}function S(Re,lt){return lt<Re?-1:lt>Re?1:lt>=Re?0:NaN}function E(Re){return Re}T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,lt){switch(Re=+Re,lt=+lt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,lt):this._context.moveTo(Re,lt);break;case 1:this._point=2;default:this._context.lineTo(Re,lt)}}};var R=H(k);function B(Re){this._curve=Re}function H(Re){function lt(_t){return new B(Re(_t))}return lt._curve=Re,lt}function V(Re){var lt=Re.curve;return Re.angle=Re.x,delete Re.x,Re.radius=Re.y,delete Re.y,Re.curve=function(_t){return arguments.length?lt(H(_t)):lt()._curve},Re}function Z(){return V(O().curve(R))}function W(){var Re=P().curve(R),lt=Re.curve,_t=Re.lineX0,Dt=Re.lineX1,Vt=Re.lineY0,nr=Re.lineY1;return Re.angle=Re.x,delete Re.x,Re.startAngle=Re.x0,delete Re.x0,Re.endAngle=Re.x1,delete Re.x1,Re.radius=Re.y,delete Re.y,Re.innerRadius=Re.y0,delete Re.y0,Re.outerRadius=Re.y1,delete Re.y1,Re.lineStartAngle=function(){return V(_t())},delete Re.lineX0,Re.lineEndAngle=function(){return V(Dt())},delete Re.lineX1,Re.lineInnerRadius=function(){return V(Vt())},delete Re.lineY0,Re.lineOuterRadius=function(){return V(nr())},delete Re.lineY1,Re.curve=function(Gt){return arguments.length?lt(H(Gt)):lt()._curve},Re}function G(Re,lt){return[(lt=+lt)*Math.cos(Re-=Math.PI/2),lt*Math.sin(Re)]}B.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Re,lt){this._curve.point(lt*Math.sin(Re),lt*-Math.cos(Re))}};var X=Array.prototype.slice;function te(Re){return Re.source}function D(Re){return Re.target}function N(Re){var lt=te,_t=D,Dt=L,Vt=M,nr=null;function Gt(){var Kt,ir=X.call(arguments),dr=lt.apply(this,ir),hr=_t.apply(this,ir);if(nr||(nr=Kt=m.path()),Re(nr,+Dt.apply(this,(ir[0]=dr,ir)),+Vt.apply(this,ir),+Dt.apply(this,(ir[0]=hr,ir)),+Vt.apply(this,ir)),Kt)return nr=null,Kt+""||null}return Gt.source=function(Kt){return arguments.length?(lt=Kt,Gt):lt},Gt.target=function(Kt){return arguments.length?(_t=Kt,Gt):_t},Gt.x=function(Kt){return arguments.length?(Dt="function"==typeof Kt?Kt:b(+Kt),Gt):Dt},Gt.y=function(Kt){return arguments.length?(Vt="function"==typeof Kt?Kt:b(+Kt),Gt):Vt},Gt.context=function(Kt){return arguments.length?(nr=null==Kt?null:Kt,Gt):nr},Gt}function U(Re,lt,_t,Dt,Vt){Re.moveTo(lt,_t),Re.bezierCurveTo(lt=(lt+Dt)/2,_t,lt,Vt,Dt,Vt)}function Q(Re,lt,_t,Dt,Vt){Re.moveTo(lt,_t),Re.bezierCurveTo(lt,_t=(_t+Vt)/2,Dt,_t,Dt,Vt)}function j(Re,lt,_t,Dt,Vt){var nr=G(lt,_t),Gt=G(lt,_t=(_t+Vt)/2),Kt=G(Dt,_t),ir=G(Dt,Vt);Re.moveTo(nr[0],nr[1]),Re.bezierCurveTo(Gt[0],Gt[1],Kt[0],Kt[1],ir[0],ir[1])}var J={draw:function(Re,lt){var _t=Math.sqrt(lt/s);Re.moveTo(_t,0),Re.arc(0,0,_t,0,l)}},K={draw:function(Re,lt){var _t=Math.sqrt(lt/5)/2;Re.moveTo(-3*_t,-_t),Re.lineTo(-_t,-_t),Re.lineTo(-_t,-3*_t),Re.lineTo(_t,-3*_t),Re.lineTo(_t,-_t),Re.lineTo(3*_t,-_t),Re.lineTo(3*_t,_t),Re.lineTo(_t,_t),Re.lineTo(_t,3*_t),Re.lineTo(-_t,3*_t),Re.lineTo(-_t,_t),Re.lineTo(-3*_t,_t),Re.closePath()}},re=Math.sqrt(1/3),ne=2*re,se={draw:function(Re,lt){var _t=Math.sqrt(lt/ne),Dt=_t*re;Re.moveTo(0,-_t),Re.lineTo(Dt,0),Re.lineTo(0,_t),Re.lineTo(-Dt,0),Re.closePath()}},oe=Math.sin(s/10)/Math.sin(7*s/10),pe=Math.sin(l/10)*oe,ce=-Math.cos(l/10)*oe,ge={draw:function(Re,lt){var _t=Math.sqrt(.8908130915292852*lt),Dt=pe*_t,Vt=ce*_t;Re.moveTo(0,-_t),Re.lineTo(Dt,Vt);for(var nr=1;nr<5;++nr){var Gt=l*nr/5,Kt=Math.cos(Gt),ir=Math.sin(Gt);Re.lineTo(ir*_t,-Kt*_t),Re.lineTo(Kt*Dt-ir*Vt,ir*Dt+Kt*Vt)}Re.closePath()}},xe={draw:function(Re,lt){var _t=Math.sqrt(lt),Dt=-_t/2;Re.rect(Dt,Dt,_t,_t)}},we=Math.sqrt(3),be={draw:function(Re,lt){var _t=-Math.sqrt(lt/(3*we));Re.moveTo(0,2*_t),Re.lineTo(-we*_t,-_t),Re.lineTo(we*_t,-_t),Re.closePath()}},Se=-.5,fe=Math.sqrt(3)/2,me=1/Math.sqrt(12),Te=3*(me/2+1),_e={draw:function(Re,lt){var _t=Math.sqrt(lt/Te),Dt=_t/2,Vt=_t*me,nr=Dt,Gt=_t*me+_t,Kt=-nr,ir=Gt;Re.moveTo(Dt,Vt),Re.lineTo(nr,Gt),Re.lineTo(Kt,ir),Re.lineTo(Se*Dt-fe*Vt,fe*Dt+Se*Vt),Re.lineTo(Se*nr-fe*Gt,fe*nr+Se*Gt),Re.lineTo(Se*Kt-fe*ir,fe*Kt+Se*ir),Re.lineTo(Se*Dt+fe*Vt,Se*Vt-fe*Dt),Re.lineTo(Se*nr+fe*Gt,Se*Gt-fe*nr),Re.lineTo(Se*Kt+fe*ir,Se*ir-fe*Kt),Re.closePath()}},Me=[J,K,se,xe,ge,be,_e];function Ie(){}function ze(Re,lt,_t){Re._context.bezierCurveTo((2*Re._x0+Re._x1)/3,(2*Re._y0+Re._y1)/3,(Re._x0+2*Re._x1)/3,(Re._y0+2*Re._y1)/3,(Re._x0+4*Re._x1+lt)/6,(Re._y0+4*Re._y1+_t)/6)}function Ve(Re){this._context=Re}function Je(Re){this._context=Re}function De(Re){this._context=Re}function Be(Re,lt){this._basis=new Ve(Re),this._beta=lt}Ve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ze(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,lt){switch(Re=+Re,lt=+lt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,lt):this._context.moveTo(Re,lt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ze(this,Re,lt)}this._x0=this._x1,this._x1=Re,this._y0=this._y1,this._y1=lt}},Je.prototype={areaStart:Ie,areaEnd:Ie,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Re,lt){switch(Re=+Re,lt=+lt,this._point){case 0:this._point=1,this._x2=Re,this._y2=lt;break;case 1:this._point=2,this._x3=Re,this._y3=lt;break;case 2:this._point=3,this._x4=Re,this._y4=lt,this._context.moveTo((this._x0+4*this._x1+Re)/6,(this._y0+4*this._y1+lt)/6);break;default:ze(this,Re,lt)}this._x0=this._x1,this._x1=Re,this._y0=this._y1,this._y1=lt}},De.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,lt){switch(Re=+Re,lt=+lt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var _t=(this._x0+4*this._x1+Re)/6,Dt=(this._y0+4*this._y1+lt)/6;this._line?this._context.lineTo(_t,Dt):this._context.moveTo(_t,Dt);break;case 3:this._point=4;default:ze(this,Re,lt)}this._x0=this._x1,this._x1=Re,this._y0=this._y1,this._y1=lt}},Be.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Re=this._x,lt=this._y,_t=Re.length-1;if(_t>0)for(var Dt,Vt=Re[0],nr=lt[0],Gt=Re[_t]-Vt,Kt=lt[_t]-nr,ir=-1;++ir<=_t;)this._basis.point(this._beta*Re[ir]+(1-this._beta)*(Vt+(Dt=ir/_t)*Gt),this._beta*lt[ir]+(1-this._beta)*(nr+Dt*Kt));this._x=this._y=null,this._basis.lineEnd()},point:function(Re,lt){this._x.push(+Re),this._y.push(+lt)}};var Ze=function Re(lt){function _t(Dt){return 1===lt?new Ve(Dt):new Be(Dt,lt)}return _t.beta=function(Dt){return Re(+Dt)},_t}(.85);function Ye(Re,lt,_t){Re._context.bezierCurveTo(Re._x1+Re._k*(Re._x2-Re._x0),Re._y1+Re._k*(Re._y2-Re._y0),Re._x2+Re._k*(Re._x1-lt),Re._y2+Re._k*(Re._y1-_t),Re._x2,Re._y2)}function tt(Re,lt){this._context=Re,this._k=(1-lt)/6}tt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ye(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,lt){switch(Re=+Re,lt=+lt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,lt):this._context.moveTo(Re,lt);break;case 1:this._point=2,this._x1=Re,this._y1=lt;break;case 2:this._point=3;default:Ye(this,Re,lt)}this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=lt}};var st=function Re(lt){function _t(Dt){return new tt(Dt,lt)}return _t.tension=function(Dt){return Re(+Dt)},_t}(0);function vt(Re,lt){this._context=Re,this._k=(1-lt)/6}vt.prototype={areaStart:Ie,areaEnd:Ie,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Re,lt){switch(Re=+Re,lt=+lt,this._point){case 0:this._point=1,this._x3=Re,this._y3=lt;break;case 1:this._point=2,this._context.moveTo(this._x4=Re,this._y4=lt);break;case 2:this._point=3,this._x5=Re,this._y5=lt;break;default:Ye(this,Re,lt)}this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=lt}};var Pt=function Re(lt){function _t(Dt){return new vt(Dt,lt)}return _t.tension=function(Dt){return Re(+Dt)},_t}(0);function Mt(Re,lt){this._context=Re,this._k=(1-lt)/6}Mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,lt){switch(Re=+Re,lt=+lt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ye(this,Re,lt)}this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=lt}};var rt=function Re(lt){function _t(Dt){return new Mt(Dt,lt)}return _t.tension=function(Dt){return Re(+Dt)},_t}(0);function et(Re,lt,_t){var Dt=Re._x1,Vt=Re._y1,nr=Re._x2,Gt=Re._y2;if(Re._l01_a>1e-12){var Kt=2*Re._l01_2a+3*Re._l01_a*Re._l12_a+Re._l12_2a,ir=3*Re._l01_a*(Re._l01_a+Re._l12_a);Dt=(Dt*Kt-Re._x0*Re._l12_2a+Re._x2*Re._l01_2a)/ir,Vt=(Vt*Kt-Re._y0*Re._l12_2a+Re._y2*Re._l01_2a)/ir}if(Re._l23_a>1e-12){var dr=2*Re._l23_2a+3*Re._l23_a*Re._l12_a+Re._l12_2a,hr=3*Re._l23_a*(Re._l23_a+Re._l12_a);nr=(nr*dr+Re._x1*Re._l23_2a-lt*Re._l12_2a)/hr,Gt=(Gt*dr+Re._y1*Re._l23_2a-_t*Re._l12_2a)/hr}Re._context.bezierCurveTo(Dt,Vt,nr,Gt,Re._x2,Re._y2)}function bt(Re,lt){this._context=Re,this._alpha=lt}bt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,lt){if(Re=+Re,lt=+lt,this._point){var _t=this._x2-Re,Dt=this._y2-lt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(_t*_t+Dt*Dt,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,lt):this._context.moveTo(Re,lt);break;case 1:this._point=2;break;case 2:this._point=3;default:et(this,Re,lt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=lt}};var Rt=function Re(lt){function _t(Dt){return lt?new bt(Dt,lt):new tt(Dt,0)}return _t.alpha=function(Dt){return Re(+Dt)},_t}(.5);function Yt(Re,lt){this._context=Re,this._alpha=lt}Yt.prototype={areaStart:Ie,areaEnd:Ie,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Re,lt){if(Re=+Re,lt=+lt,this._point){var _t=this._x2-Re,Dt=this._y2-lt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(_t*_t+Dt*Dt,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Re,this._y3=lt;break;case 1:this._point=2,this._context.moveTo(this._x4=Re,this._y4=lt);break;case 2:this._point=3,this._x5=Re,this._y5=lt;break;default:et(this,Re,lt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=lt}};var Fe=function Re(lt){function _t(Dt){return lt?new Yt(Dt,lt):new vt(Dt,0)}return _t.alpha=function(Dt){return Re(+Dt)},_t}(.5);function He(Re,lt){this._context=Re,this._alpha=lt}He.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,lt){if(Re=+Re,lt=+lt,this._point){var _t=this._x2-Re,Dt=this._y2-lt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(_t*_t+Dt*Dt,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:et(this,Re,lt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Re,this._y0=this._y1,this._y1=this._y2,this._y2=lt}};var Oe=function Re(lt){function _t(Dt){return lt?new He(Dt,lt):new Mt(Dt,0)}return _t.alpha=function(Dt){return Re(+Dt)},_t}(.5);function $e(Re){this._context=Re}function ke(Re){return Re<0?-1:1}function Le(Re,lt,_t){var Dt=Re._x1-Re._x0,Vt=lt-Re._x1,nr=(Re._y1-Re._y0)/(Dt||Vt<0&&-0),Gt=(_t-Re._y1)/(Vt||Dt<0&&-0),Kt=(nr*Vt+Gt*Dt)/(Dt+Vt);return(ke(nr)+ke(Gt))*Math.min(Math.abs(nr),Math.abs(Gt),.5*Math.abs(Kt))||0}function Pe(Re,lt){var _t=Re._x1-Re._x0;return _t?(3*(Re._y1-Re._y0)/_t-lt)/2:lt}function Ce(Re,lt,_t){var Dt=Re._x0,nr=Re._x1,Gt=Re._y1,Kt=(nr-Dt)/3;Re._context.bezierCurveTo(Dt+Kt,Re._y0+Kt*lt,nr-Kt,Gt-Kt*_t,nr,Gt)}function Xe(Re){this._context=Re}function at(Re){this._context=new pt(Re)}function pt(Re){this._context=Re}function ut(Re){this._context=Re}function St(Re){var lt,_t,Dt=Re.length-1,Vt=new Array(Dt),nr=new Array(Dt),Gt=new Array(Dt);for(Vt[0]=0,nr[0]=2,Gt[0]=Re[0]+2*Re[1],lt=1;lt<Dt-1;++lt)Vt[lt]=1,nr[lt]=4,Gt[lt]=4*Re[lt]+2*Re[lt+1];for(Vt[Dt-1]=2,nr[Dt-1]=7,Gt[Dt-1]=8*Re[Dt-1]+Re[Dt],lt=1;lt<Dt;++lt)nr[lt]-=_t=Vt[lt]/nr[lt-1],Gt[lt]-=_t*Gt[lt-1];for(Vt[Dt-1]=Gt[Dt-1]/nr[Dt-1],lt=Dt-2;lt>=0;--lt)Vt[lt]=(Gt[lt]-Vt[lt+1])/nr[lt];for(nr[Dt-1]=(Re[Dt]+Vt[Dt-1])/2,lt=0;lt<Dt-1;++lt)nr[lt]=2*Re[lt+1]-Vt[lt+1];return[Vt,nr]}function ot(Re,lt){this._context=Re,this._t=lt}function Et(Re,lt){if((Vt=Re.length)>1)for(var _t,Dt,Vt,nr=1,Gt=Re[lt[0]],Kt=Gt.length;nr<Vt;++nr)for(Dt=Gt,Gt=Re[lt[nr]],_t=0;_t<Kt;++_t)Gt[_t][1]+=Gt[_t][0]=isNaN(Dt[_t][1])?Dt[_t][0]:Dt[_t][1]}function Lt(Re){for(var lt=Re.length,_t=new Array(lt);--lt>=0;)_t[lt]=lt;return _t}function Qe(Re,lt){return Re[lt]}function mt(Re){var lt=Re.map(It);return Lt(Re).sort(function(_t,Dt){return lt[_t]-lt[Dt]})}function It(Re){for(var lt,_t=-1,Dt=0,Vt=Re.length,nr=-1/0;++_t<Vt;)(lt=+Re[_t][1])>nr&&(nr=lt,Dt=_t);return Dt}function jt(Re){var lt=Re.map(Zt);return Lt(Re).sort(function(_t,Dt){return lt[_t]-lt[Dt]})}function Zt(Re){for(var lt,_t=0,Dt=-1,Vt=Re.length;++Dt<Vt;)(lt=+Re[Dt][1])&&(_t+=lt);return _t}$e.prototype={areaStart:Ie,areaEnd:Ie,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Re,lt){Re=+Re,lt=+lt,this._point?this._context.lineTo(Re,lt):(this._point=1,this._context.moveTo(Re,lt))}},Xe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ce(this,this._t0,Pe(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Re,lt){var _t=NaN;if(lt=+lt,(Re=+Re)!==this._x1||lt!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,lt):this._context.moveTo(Re,lt);break;case 1:this._point=2;break;case 2:this._point=3,Ce(this,Pe(this,_t=Le(this,Re,lt)),_t);break;default:Ce(this,this._t0,_t=Le(this,Re,lt))}this._x0=this._x1,this._x1=Re,this._y0=this._y1,this._y1=lt,this._t0=_t}}},(at.prototype=Object.create(Xe.prototype)).point=function(Re,lt){Xe.prototype.point.call(this,lt,Re)},pt.prototype={moveTo:function(Re,lt){this._context.moveTo(lt,Re)},closePath:function(){this._context.closePath()},lineTo:function(Re,lt){this._context.lineTo(lt,Re)},bezierCurveTo:function(Re,lt,_t,Dt,Vt,nr){this._context.bezierCurveTo(lt,Re,Dt,_t,nr,Vt)}},ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Re=this._x,lt=this._y,_t=Re.length;if(_t)if(this._line?this._context.lineTo(Re[0],lt[0]):this._context.moveTo(Re[0],lt[0]),2===_t)this._context.lineTo(Re[1],lt[1]);else for(var Dt=St(Re),Vt=St(lt),nr=0,Gt=1;Gt<_t;++nr,++Gt)this._context.bezierCurveTo(Dt[0][nr],Vt[0][nr],Dt[1][nr],Vt[1][nr],Re[Gt],lt[Gt]);(this._line||0!==this._line&&1===_t)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Re,lt){this._x.push(+Re),this._y.push(+lt)}},ot.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Re,lt){switch(Re=+Re,lt=+lt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Re,lt):this._context.moveTo(Re,lt);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,lt),this._context.lineTo(Re,lt);else{var _t=this._x*(1-this._t)+Re*this._t;this._context.lineTo(_t,this._y),this._context.lineTo(_t,lt)}}this._x=Re,this._y=lt}},p.arc=function(){var Re=g,lt=h,_t=b(0),Dt=null,Vt=o,nr=x,Gt=d,Kt=null;function ir(){var dr,hr,cr=+Re.apply(this,arguments),sr=+lt.apply(this,arguments),mr=Vt.apply(this,arguments)-i,Ir=nr.apply(this,arguments)-i,vr=v(Ir-mr),Br=Ir>mr;if(Kt||(Kt=dr=m.path()),sr<cr&&(hr=sr,sr=cr,cr=hr),sr>1e-12)if(vr>l-1e-12)Kt.moveTo(sr*n(mr),sr*r(mr)),Kt.arc(0,0,sr,mr,Ir,!Br),cr>1e-12&&(Kt.moveTo(cr*n(Ir),cr*r(Ir)),Kt.arc(0,0,cr,Ir,mr,Br));else{var Jr,ln,En=mr,Cn=Ir,An=mr,$r=Ir,Rr=vr,Lr=vr,Qr=Gt.apply(this,arguments)/2,On=Qr>1e-12&&(Dt?+Dt.apply(this,arguments):u(cr*cr+sr*sr)),zr=a(v(sr-cr)/2,+_t.apply(this,arguments)),sn=zr,Mn=zr;if(On>1e-12){var Tn=f(On/cr*r(Qr)),Rn=f(On/sr*r(Qr));(Rr-=2*Tn)>1e-12?(An+=Tn*=Br?1:-1,$r-=Tn):(Rr=0,An=$r=(mr+Ir)/2),(Lr-=2*Rn)>1e-12?(En+=Rn*=Br?1:-1,Cn-=Rn):(Lr=0,En=Cn=(mr+Ir)/2)}var $t=sr*n(En),Ct=sr*r(En),Ut=cr*n($r),lr=cr*r($r);if(zr>1e-12){var _r,qr=sr*n(Cn),Vr=sr*r(Cn),br=cr*n(An),yr=cr*r(An);if(vr<s&&(_r=w($t,Ct,br,yr,qr,Vr,Ut,lr))){var kr=$t-_r[0],Cr=Ct-_r[1],Ar=qr-_r[0],Yr=Vr-_r[1],cn=1/r(c((kr*Ar+Cr*Yr)/(u(kr*kr+Cr*Cr)*u(Ar*Ar+Yr*Yr)))/2),yn=u(_r[0]*_r[0]+_r[1]*_r[1]);sn=a(zr,(cr-yn)/(cn-1)),Mn=a(zr,(sr-yn)/(cn+1))}}Lr>1e-12?Mn>1e-12?(Jr=_(br,yr,$t,Ct,sr,Mn,Br),ln=_(qr,Vr,Ut,lr,sr,Mn,Br),Kt.moveTo(Jr.cx+Jr.x01,Jr.cy+Jr.y01),Mn<zr?Kt.arc(Jr.cx,Jr.cy,Mn,e(Jr.y01,Jr.x01),e(ln.y01,ln.x01),!Br):(Kt.arc(Jr.cx,Jr.cy,Mn,e(Jr.y01,Jr.x01),e(Jr.y11,Jr.x11),!Br),Kt.arc(0,0,sr,e(Jr.cy+Jr.y11,Jr.cx+Jr.x11),e(ln.cy+ln.y11,ln.cx+ln.x11),!Br),Kt.arc(ln.cx,ln.cy,Mn,e(ln.y11,ln.x11),e(ln.y01,ln.x01),!Br))):(Kt.moveTo($t,Ct),Kt.arc(0,0,sr,En,Cn,!Br)):Kt.moveTo($t,Ct),cr>1e-12&&Rr>1e-12?sn>1e-12?(Jr=_(Ut,lr,qr,Vr,cr,-sn,Br),ln=_($t,Ct,br,yr,cr,-sn,Br),Kt.lineTo(Jr.cx+Jr.x01,Jr.cy+Jr.y01),sn<zr?Kt.arc(Jr.cx,Jr.cy,sn,e(Jr.y01,Jr.x01),e(ln.y01,ln.x01),!Br):(Kt.arc(Jr.cx,Jr.cy,sn,e(Jr.y01,Jr.x01),e(Jr.y11,Jr.x11),!Br),Kt.arc(0,0,cr,e(Jr.cy+Jr.y11,Jr.cx+Jr.x11),e(ln.cy+ln.y11,ln.cx+ln.x11),Br),Kt.arc(ln.cx,ln.cy,sn,e(ln.y11,ln.x11),e(ln.y01,ln.x01),!Br))):Kt.arc(0,0,cr,$r,An,Br):Kt.lineTo(Ut,lr)}else Kt.moveTo(0,0);if(Kt.closePath(),dr)return Kt=null,dr+""||null}return ir.centroid=function(){var dr=(+Re.apply(this,arguments)+ +lt.apply(this,arguments))/2,hr=(+Vt.apply(this,arguments)+ +nr.apply(this,arguments))/2-s/2;return[n(hr)*dr,r(hr)*dr]},ir.innerRadius=function(dr){return arguments.length?(Re="function"==typeof dr?dr:b(+dr),ir):Re},ir.outerRadius=function(dr){return arguments.length?(lt="function"==typeof dr?dr:b(+dr),ir):lt},ir.cornerRadius=function(dr){return arguments.length?(_t="function"==typeof dr?dr:b(+dr),ir):_t},ir.padRadius=function(dr){return arguments.length?(Dt=null==dr?null:"function"==typeof dr?dr:b(+dr),ir):Dt},ir.startAngle=function(dr){return arguments.length?(Vt="function"==typeof dr?dr:b(+dr),ir):Vt},ir.endAngle=function(dr){return arguments.length?(nr="function"==typeof dr?dr:b(+dr),ir):nr},ir.padAngle=function(dr){return arguments.length?(Gt="function"==typeof dr?dr:b(+dr),ir):Gt},ir.context=function(dr){return arguments.length?(Kt=null==dr?null:dr,ir):Kt},ir},p.area=P,p.areaRadial=W,p.curveBasis=function(Re){return new Ve(Re)},p.curveBasisClosed=function(Re){return new Je(Re)},p.curveBasisOpen=function(Re){return new De(Re)},p.curveBundle=Ze,p.curveCardinal=st,p.curveCardinalClosed=Pt,p.curveCardinalOpen=rt,p.curveCatmullRom=Rt,p.curveCatmullRomClosed=Fe,p.curveCatmullRomOpen=Oe,p.curveLinear=k,p.curveLinearClosed=function(Re){return new $e(Re)},p.curveMonotoneX=function(Re){return new Xe(Re)},p.curveMonotoneY=function(Re){return new at(Re)},p.curveNatural=function(Re){return new ut(Re)},p.curveStep=function(Re){return new ot(Re,.5)},p.curveStepAfter=function(Re){return new ot(Re,1)},p.curveStepBefore=function(Re){return new ot(Re,0)},p.line=O,p.lineRadial=Z,p.linkHorizontal=function(){return N(U)},p.linkRadial=function(){var Re=N(j);return Re.angle=Re.x,delete Re.x,Re.radius=Re.y,delete Re.y,Re},p.linkVertical=function(){return N(Q)},p.pie=function(){var Re=E,lt=S,_t=null,Dt=b(0),Vt=b(l),nr=b(0);function Gt(Kt){var ir,dr,hr,cr,sr,mr=Kt.length,Ir=0,vr=new Array(mr),Br=new Array(mr),Jr=+Dt.apply(this,arguments),ln=Math.min(l,Math.max(-l,Vt.apply(this,arguments)-Jr)),En=Math.min(Math.abs(ln)/mr,nr.apply(this,arguments)),Cn=En*(ln<0?-1:1);for(ir=0;ir<mr;++ir)(sr=Br[vr[ir]=ir]=+Re(Kt[ir],ir,Kt))>0&&(Ir+=sr);for(null!=lt?vr.sort(function(An,$r){return lt(Br[An],Br[$r])}):null!=_t&&vr.sort(function(An,$r){return _t(Kt[An],Kt[$r])}),ir=0,hr=Ir?(ln-mr*Cn)/Ir:0;ir<mr;++ir,Jr=cr)cr=Jr+((sr=Br[dr=vr[ir]])>0?sr*hr:0)+Cn,Br[dr]={data:Kt[dr],index:ir,value:sr,startAngle:Jr,endAngle:cr,padAngle:En};return Br}return Gt.value=function(Kt){return arguments.length?(Re="function"==typeof Kt?Kt:b(+Kt),Gt):Re},Gt.sortValues=function(Kt){return arguments.length?(lt=Kt,_t=null,Gt):lt},Gt.sort=function(Kt){return arguments.length?(_t=Kt,lt=null,Gt):_t},Gt.startAngle=function(Kt){return arguments.length?(Dt="function"==typeof Kt?Kt:b(+Kt),Gt):Dt},Gt.endAngle=function(Kt){return arguments.length?(Vt="function"==typeof Kt?Kt:b(+Kt),Gt):Vt},Gt.padAngle=function(Kt){return arguments.length?(nr="function"==typeof Kt?Kt:b(+Kt),Gt):nr},Gt},p.pointRadial=G,p.radialArea=W,p.radialLine=Z,p.stack=function(){var Re=b([]),lt=Lt,_t=Et,Dt=Qe;function Vt(nr){var Gt,Kt,ir=Re.apply(this,arguments),dr=nr.length,hr=ir.length,cr=new Array(hr);for(Gt=0;Gt<hr;++Gt){for(var sr,mr=ir[Gt],Ir=cr[Gt]=new Array(dr),vr=0;vr<dr;++vr)Ir[vr]=sr=[0,+Dt(nr[vr],mr,vr,nr)],sr.data=nr[vr];Ir.key=mr}for(Gt=0,Kt=lt(cr);Gt<hr;++Gt)cr[Kt[Gt]].index=Gt;return _t(cr,Kt),cr}return Vt.keys=function(nr){return arguments.length?(Re="function"==typeof nr?nr:b(X.call(nr)),Vt):Re},Vt.value=function(nr){return arguments.length?(Dt="function"==typeof nr?nr:b(+nr),Vt):Dt},Vt.order=function(nr){return arguments.length?(lt=null==nr?Lt:"function"==typeof nr?nr:b(X.call(nr)),Vt):lt},Vt.offset=function(nr){return arguments.length?(_t=null==nr?Et:nr,Vt):_t},Vt},p.stackOffsetDiverging=function(Re,lt){if((Kt=Re.length)>0)for(var _t,Dt,Vt,nr,Gt,Kt,ir=0,dr=Re[lt[0]].length;ir<dr;++ir)for(nr=Gt=0,_t=0;_t<Kt;++_t)(Vt=(Dt=Re[lt[_t]][ir])[1]-Dt[0])>0?(Dt[0]=nr,Dt[1]=nr+=Vt):Vt<0?(Dt[1]=Gt,Dt[0]=Gt+=Vt):(Dt[0]=0,Dt[1]=Vt)},p.stackOffsetExpand=function(Re,lt){if((Dt=Re.length)>0){for(var _t,Dt,Vt,nr=0,Gt=Re[0].length;nr<Gt;++nr){for(Vt=_t=0;_t<Dt;++_t)Vt+=Re[_t][nr][1]||0;if(Vt)for(_t=0;_t<Dt;++_t)Re[_t][nr][1]/=Vt}Et(Re,lt)}},p.stackOffsetNone=Et,p.stackOffsetSilhouette=function(Re,lt){if((_t=Re.length)>0){for(var _t,Dt=0,Vt=Re[lt[0]],nr=Vt.length;Dt<nr;++Dt){for(var Gt=0,Kt=0;Gt<_t;++Gt)Kt+=Re[Gt][Dt][1]||0;Vt[Dt][1]+=Vt[Dt][0]=-Kt/2}Et(Re,lt)}},p.stackOffsetWiggle=function(Re,lt){if((Vt=Re.length)>0&&(Dt=(_t=Re[lt[0]]).length)>0){for(var _t,Dt,Vt,nr=0,Gt=1;Gt<Dt;++Gt){for(var Kt=0,ir=0,dr=0;Kt<Vt;++Kt){for(var hr=Re[lt[Kt]],cr=hr[Gt][1]||0,sr=(cr-(hr[Gt-1][1]||0))/2,mr=0;mr<Kt;++mr){var Ir=Re[lt[mr]];sr+=(Ir[Gt][1]||0)-(Ir[Gt-1][1]||0)}ir+=cr,dr+=sr*cr}_t[Gt-1][1]+=_t[Gt-1][0]=nr,ir&&(nr-=dr/ir)}_t[Gt-1][1]+=_t[Gt-1][0]=nr,Et(Re,lt)}},p.stackOrderAppearance=mt,p.stackOrderAscending=jt,p.stackOrderDescending=function(Re){return jt(Re).reverse()},p.stackOrderInsideOut=function(Re){var lt,_t,Dt=Re.length,Vt=Re.map(Zt),nr=mt(Re),Gt=0,Kt=0,ir=[],dr=[];for(lt=0;lt<Dt;++lt)_t=nr[lt],Gt<Kt?(Gt+=Vt[_t],ir.push(_t)):(Kt+=Vt[_t],dr.push(_t));return dr.reverse().concat(ir)},p.stackOrderNone=Lt,p.stackOrderReverse=function(Re){return Lt(Re).reverse()},p.symbol=function(){var Re=b(J),lt=b(64),_t=null;function Dt(){var Vt;if(_t||(_t=Vt=m.path()),Re.apply(this,arguments).draw(_t,+lt.apply(this,arguments)),Vt)return _t=null,Vt+""||null}return Dt.type=function(Vt){return arguments.length?(Re="function"==typeof Vt?Vt:b(Vt),Dt):Re},Dt.size=function(Vt){return arguments.length?(lt="function"==typeof Vt?Vt:b(+Vt),Dt):lt},Dt.context=function(Vt){return arguments.length?(_t=null==Vt?null:Vt,Dt):_t},Dt},p.symbolCircle=J,p.symbolCross=K,p.symbolDiamond=se,p.symbolSquare=xe,p.symbolStar=ge,p.symbolTriangle=be,p.symbolWye=_e,p.symbols=Me,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?m(ee,y("d3-path")):m((p=p||self).d3=p.d3||{},p.d3)},{"d3-path":117}],120:[function(y,$,ee){var p,m;p=this,m=function(p,m){"use strict";function b(rt){if(0<=rt.y&&rt.y<100){var et=new Date(-1,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L);return et.setFullYear(rt.y),et}return new Date(rt.y,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L)}function v(rt){if(0<=rt.y&&rt.y<100){var et=new Date(Date.UTC(-1,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L));return et.setUTCFullYear(rt.y),et}return new Date(Date.UTC(rt.y,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L))}function e(rt,et,bt){return{y:rt,m:et,d:bt,H:0,M:0,S:0,L:0}}function n(rt){var et=rt.dateTime,bt=rt.date,Rt=rt.time,Yt=rt.periods,Fe=rt.days,He=rt.shortDays,Oe=rt.months,$e=rt.shortMonths,ke=c(Yt),Le=f(Yt),Pe=c(Fe),Ce=f(Fe),Xe=c(He),at=f(He),pt=c(Oe),ut=f(Oe),St=c($e),ot=f($e),Et={a:function(Zt){return He[Zt.getDay()]},A:function(Zt){return Fe[Zt.getDay()]},b:function(Zt){return $e[Zt.getMonth()]},B:function(Zt){return Oe[Zt.getMonth()]},c:null,d:W,e:W,f:N,H:G,I:X,j:te,L:D,m:U,M:Q,p:function(Zt){return Yt[+(Zt.getHours()>=12)]},q:function(Zt){return 1+~~(Zt.getMonth()/3)},Q:tt,s:st,S:j,u:J,U:K,V:re,w:ne,W:se,x:null,X:null,y:oe,Y:pe,Z:ce,"%":Ye},Lt={a:function(Zt){return He[Zt.getUTCDay()]},A:function(Zt){return Fe[Zt.getUTCDay()]},b:function(Zt){return $e[Zt.getUTCMonth()]},B:function(Zt){return Oe[Zt.getUTCMonth()]},c:null,d:ge,e:ge,f:fe,H:xe,I:we,j:be,L:Se,m:me,M:Te,p:function(Zt){return Yt[+(Zt.getUTCHours()>=12)]},q:function(Zt){return 1+~~(Zt.getUTCMonth()/3)},Q:tt,s:st,S:_e,u:Me,U:Ie,V:ze,w:Ve,W:Je,x:null,X:null,y:De,Y:Be,Z:Ze,"%":Ye},Qe={a:function(Zt,Re,lt){var _t=Xe.exec(Re.slice(lt));return _t?(Zt.w=at[_t[0].toLowerCase()],lt+_t[0].length):-1},A:function(Zt,Re,lt){var _t=Pe.exec(Re.slice(lt));return _t?(Zt.w=Ce[_t[0].toLowerCase()],lt+_t[0].length):-1},b:function(Zt,Re,lt){var _t=St.exec(Re.slice(lt));return _t?(Zt.m=ot[_t[0].toLowerCase()],lt+_t[0].length):-1},B:function(Zt,Re,lt){var _t=pt.exec(Re.slice(lt));return _t?(Zt.m=ut[_t[0].toLowerCase()],lt+_t[0].length):-1},c:function(Zt,Re,lt){return jt(Zt,et,Re,lt)},d:M,e:M,f:B,H:P,I:P,j:O,L:R,m:L,M:S,p:function(Zt,Re,lt){var _t=ke.exec(Re.slice(lt));return _t?(Zt.p=Le[_t[0].toLowerCase()],lt+_t[0].length):-1},q:k,Q:V,s:Z,S:E,u:h,U:o,V:x,w:g,W:d,x:function(Zt,Re,lt){return jt(Zt,bt,Re,lt)},X:function(Zt,Re,lt){return jt(Zt,Rt,Re,lt)},y:_,Y:w,Z:T,"%":H};function mt(Zt,Re){return function(lt){var _t,Dt,Vt,nr=[],Gt=-1,Kt=0,ir=Zt.length;for(lt instanceof Date||(lt=new Date(+lt));++Gt<ir;)37===Zt.charCodeAt(Gt)&&(nr.push(Zt.slice(Kt,Gt)),null!=(Dt=a[_t=Zt.charAt(++Gt)])?_t=Zt.charAt(++Gt):Dt="e"===_t?" ":"0",(Vt=Re[_t])&&(_t=Vt(lt,Dt)),nr.push(_t),Kt=Gt+1);return nr.push(Zt.slice(Kt,Gt)),nr.join("")}}function It(Zt,Re){return function(lt){var _t,Dt,Vt=e(1900,void 0,1);if(jt(Vt,Zt,lt+="",0)!=lt.length)return null;if("Q"in Vt)return new Date(Vt.Q);if("s"in Vt)return new Date(1e3*Vt.s+("L"in Vt?Vt.L:0));if(Re&&!("Z"in Vt)&&(Vt.Z=0),"p"in Vt&&(Vt.H=Vt.H%12+12*Vt.p),void 0===Vt.m&&(Vt.m="q"in Vt?Vt.q:0),"V"in Vt){if(Vt.V<1||Vt.V>53)return null;"w"in Vt||(Vt.w=1),"Z"in Vt?(Dt=(_t=v(e(Vt.y,0,1))).getUTCDay(),_t=Dt>4||0===Dt?m.utcMonday.ceil(_t):m.utcMonday(_t),_t=m.utcDay.offset(_t,7*(Vt.V-1)),Vt.y=_t.getUTCFullYear(),Vt.m=_t.getUTCMonth(),Vt.d=_t.getUTCDate()+(Vt.w+6)%7):(Dt=(_t=b(e(Vt.y,0,1))).getDay(),_t=Dt>4||0===Dt?m.timeMonday.ceil(_t):m.timeMonday(_t),_t=m.timeDay.offset(_t,7*(Vt.V-1)),Vt.y=_t.getFullYear(),Vt.m=_t.getMonth(),Vt.d=_t.getDate()+(Vt.w+6)%7)}else("W"in Vt||"U"in Vt)&&("w"in Vt||(Vt.w="u"in Vt?Vt.u%7:"W"in Vt?1:0),Dt="Z"in Vt?v(e(Vt.y,0,1)).getUTCDay():b(e(Vt.y,0,1)).getDay(),Vt.m=0,Vt.d="W"in Vt?(Vt.w+6)%7+7*Vt.W-(Dt+5)%7:Vt.w+7*Vt.U-(Dt+6)%7);return"Z"in Vt?(Vt.H+=Vt.Z/100|0,Vt.M+=Vt.Z%100,v(Vt)):b(Vt)}}function jt(Zt,Re,lt,_t){for(var Dt,Vt,nr=0,Gt=Re.length,Kt=lt.length;nr<Gt;){if(_t>=Kt)return-1;if(37===(Dt=Re.charCodeAt(nr++))){if(Dt=Re.charAt(nr++),!(Vt=Qe[Dt in a?Re.charAt(nr++):Dt])||(_t=Vt(Zt,lt,_t))<0)return-1}else if(Dt!=lt.charCodeAt(_t++))return-1}return _t}return Et.x=mt(bt,Et),Et.X=mt(Rt,Et),Et.c=mt(et,Et),Lt.x=mt(bt,Lt),Lt.X=mt(Rt,Lt),Lt.c=mt(et,Lt),{format:function(Zt){var Re=mt(Zt+="",Et);return Re.toString=function(){return Zt},Re},parse:function(Zt){var Re=It(Zt+="",!1);return Re.toString=function(){return Zt},Re},utcFormat:function(Zt){var Re=mt(Zt+="",Lt);return Re.toString=function(){return Zt},Re},utcParse:function(Zt){var Re=It(Zt+="",!0);return Re.toString=function(){return Zt},Re}}}var t,a={"-":"",_:" ",0:"0"},r=/^\s*\d+/,u=/^%/,s=/[\\^$*+?|[\]().{}]/g;function i(rt,et,bt){var Rt=rt<0?"-":"",Yt=(Rt?-rt:rt)+"",Fe=Yt.length;return Rt+(Fe<bt?new Array(bt-Fe+1).join(et)+Yt:Yt)}function l(rt){return rt.replace(s,"\\$&")}function c(rt){return new RegExp("^(?:"+rt.map(l).join("|")+")","i")}function f(rt){for(var et={},bt=-1,Rt=rt.length;++bt<Rt;)et[rt[bt].toLowerCase()]=bt;return et}function g(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+1));return Rt?(rt.w=+Rt[0],bt+Rt[0].length):-1}function h(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+1));return Rt?(rt.u=+Rt[0],bt+Rt[0].length):-1}function o(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+2));return Rt?(rt.U=+Rt[0],bt+Rt[0].length):-1}function x(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+2));return Rt?(rt.V=+Rt[0],bt+Rt[0].length):-1}function d(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+2));return Rt?(rt.W=+Rt[0],bt+Rt[0].length):-1}function w(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+4));return Rt?(rt.y=+Rt[0],bt+Rt[0].length):-1}function _(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+2));return Rt?(rt.y=+Rt[0]+(+Rt[0]>68?1900:2e3),bt+Rt[0].length):-1}function T(rt,et,bt){var Rt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(et.slice(bt,bt+6));return Rt?(rt.Z=Rt[1]?0:-(Rt[2]+(Rt[3]||"00")),bt+Rt[0].length):-1}function k(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+1));return Rt?(rt.q=3*Rt[0]-3,bt+Rt[0].length):-1}function L(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+2));return Rt?(rt.m=Rt[0]-1,bt+Rt[0].length):-1}function M(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+2));return Rt?(rt.d=+Rt[0],bt+Rt[0].length):-1}function O(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+3));return Rt?(rt.m=0,rt.d=+Rt[0],bt+Rt[0].length):-1}function P(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+2));return Rt?(rt.H=+Rt[0],bt+Rt[0].length):-1}function S(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+2));return Rt?(rt.M=+Rt[0],bt+Rt[0].length):-1}function E(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+2));return Rt?(rt.S=+Rt[0],bt+Rt[0].length):-1}function R(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+3));return Rt?(rt.L=+Rt[0],bt+Rt[0].length):-1}function B(rt,et,bt){var Rt=r.exec(et.slice(bt,bt+6));return Rt?(rt.L=Math.floor(Rt[0]/1e3),bt+Rt[0].length):-1}function H(rt,et,bt){var Rt=u.exec(et.slice(bt,bt+1));return Rt?bt+Rt[0].length:-1}function V(rt,et,bt){var Rt=r.exec(et.slice(bt));return Rt?(rt.Q=+Rt[0],bt+Rt[0].length):-1}function Z(rt,et,bt){var Rt=r.exec(et.slice(bt));return Rt?(rt.s=+Rt[0],bt+Rt[0].length):-1}function W(rt,et){return i(rt.getDate(),et,2)}function G(rt,et){return i(rt.getHours(),et,2)}function X(rt,et){return i(rt.getHours()%12||12,et,2)}function te(rt,et){return i(1+m.timeDay.count(m.timeYear(rt),rt),et,3)}function D(rt,et){return i(rt.getMilliseconds(),et,3)}function N(rt,et){return D(rt,et)+"000"}function U(rt,et){return i(rt.getMonth()+1,et,2)}function Q(rt,et){return i(rt.getMinutes(),et,2)}function j(rt,et){return i(rt.getSeconds(),et,2)}function J(rt){var et=rt.getDay();return 0===et?7:et}function K(rt,et){return i(m.timeSunday.count(m.timeYear(rt)-1,rt),et,2)}function re(rt,et){var bt=rt.getDay();return rt=bt>=4||0===bt?m.timeThursday(rt):m.timeThursday.ceil(rt),i(m.timeThursday.count(m.timeYear(rt),rt)+(4===m.timeYear(rt).getDay()),et,2)}function ne(rt){return rt.getDay()}function se(rt,et){return i(m.timeMonday.count(m.timeYear(rt)-1,rt),et,2)}function oe(rt,et){return i(rt.getFullYear()%100,et,2)}function pe(rt,et){return i(rt.getFullYear()%1e4,et,4)}function ce(rt){var et=rt.getTimezoneOffset();return(et>0?"-":(et*=-1,"+"))+i(et/60|0,"0",2)+i(et%60,"0",2)}function ge(rt,et){return i(rt.getUTCDate(),et,2)}function xe(rt,et){return i(rt.getUTCHours(),et,2)}function we(rt,et){return i(rt.getUTCHours()%12||12,et,2)}function be(rt,et){return i(1+m.utcDay.count(m.utcYear(rt),rt),et,3)}function Se(rt,et){return i(rt.getUTCMilliseconds(),et,3)}function fe(rt,et){return Se(rt,et)+"000"}function me(rt,et){return i(rt.getUTCMonth()+1,et,2)}function Te(rt,et){return i(rt.getUTCMinutes(),et,2)}function _e(rt,et){return i(rt.getUTCSeconds(),et,2)}function Me(rt){var et=rt.getUTCDay();return 0===et?7:et}function Ie(rt,et){return i(m.utcSunday.count(m.utcYear(rt)-1,rt),et,2)}function ze(rt,et){var bt=rt.getUTCDay();return rt=bt>=4||0===bt?m.utcThursday(rt):m.utcThursday.ceil(rt),i(m.utcThursday.count(m.utcYear(rt),rt)+(4===m.utcYear(rt).getUTCDay()),et,2)}function Ve(rt){return rt.getUTCDay()}function Je(rt,et){return i(m.utcMonday.count(m.utcYear(rt)-1,rt),et,2)}function De(rt,et){return i(rt.getUTCFullYear()%100,et,2)}function Be(rt,et){return i(rt.getUTCFullYear()%1e4,et,4)}function Ze(){return"+0000"}function Ye(){return"%"}function tt(rt){return+rt}function st(rt){return Math.floor(+rt/1e3)}function vt(rt){return t=n(rt),p.timeFormat=t.format,p.timeParse=t.parse,p.utcFormat=t.utcFormat,p.utcParse=t.utcParse,t}vt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Pt=Date.prototype.toISOString?function(rt){return rt.toISOString()}:p.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Mt=+new Date("2000-01-01T00:00:00.000Z")?function(rt){var et=new Date(rt);return isNaN(et)?null:et}:p.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");p.isoFormat=Pt,p.isoParse=Mt,p.timeFormatDefaultLocale=vt,p.timeFormatLocale=n,Object.defineProperty(p,"__esModule",{value:!0})},"object"==typeof ee&&void 0!==$?m(ee,y("d3-time")):m((p=p||self).d3=p.d3||{},p.d3)},{"d3-time":121}],121:[function(y,$,ee){var p;p=this,function(p){"use strict";var m=new Date,b=new Date;function v(me,Te,_e,Me){function Ie(ze){return me(ze=0===arguments.length?new Date:new Date(+ze)),ze}return Ie.floor=function(ze){return me(ze=new Date(+ze)),ze},Ie.ceil=function(ze){return me(ze=new Date(ze-1)),Te(ze,1),me(ze),ze},Ie.round=function(ze){var Ve=Ie(ze),Je=Ie.ceil(ze);return ze-Ve<Je-ze?Ve:Je},Ie.offset=function(ze,Ve){return Te(ze=new Date(+ze),null==Ve?1:Math.floor(Ve)),ze},Ie.range=function(ze,Ve,Je){var De,Be=[];if(ze=Ie.ceil(ze),Je=null==Je?1:Math.floor(Je),!(ze<Ve&&Je>0))return Be;do{Be.push(De=new Date(+ze)),Te(ze,Je),me(ze)}while(De<ze&&ze<Ve);return Be},Ie.filter=function(ze){return v(function(Ve){if(Ve>=Ve)for(;me(Ve),!ze(Ve);)Ve.setTime(Ve-1)},function(Ve,Je){if(Ve>=Ve)if(Je<0)for(;++Je<=0;)for(;Te(Ve,-1),!ze(Ve););else for(;--Je>=0;)for(;Te(Ve,1),!ze(Ve););})},_e&&(Ie.count=function(ze,Ve){return m.setTime(+ze),b.setTime(+Ve),me(m),me(b),Math.floor(_e(m,b))},Ie.every=function(ze){return ze=Math.floor(ze),isFinite(ze)&&ze>0?ze>1?Ie.filter(Me?function(Ve){return Me(Ve)%ze==0}:function(Ve){return Ie.count(0,Ve)%ze==0}):Ie:null}),Ie}var e=v(function(){},function(me,Te){me.setTime(+me+Te)},function(me,Te){return Te-me});e.every=function(me){return me=Math.floor(me),isFinite(me)&&me>0?me>1?v(function(Te){Te.setTime(Math.floor(Te/me)*me)},function(Te,_e){Te.setTime(+Te+_e*me)},function(Te,_e){return(_e-Te)/me}):e:null};var n=e.range,t=v(function(me){me.setTime(me-me.getMilliseconds())},function(me,Te){me.setTime(+me+1e3*Te)},function(me,Te){return(Te-me)/1e3},function(me){return me.getUTCSeconds()}),a=t.range,r=v(function(me){me.setTime(me-me.getMilliseconds()-1e3*me.getSeconds())},function(me,Te){me.setTime(+me+6e4*Te)},function(me,Te){return(Te-me)/6e4},function(me){return me.getMinutes()}),u=r.range,s=v(function(me){me.setTime(me-me.getMilliseconds()-1e3*me.getSeconds()-6e4*me.getMinutes())},function(me,Te){me.setTime(+me+36e5*Te)},function(me,Te){return(Te-me)/36e5},function(me){return me.getHours()}),i=s.range,l=v(function(me){me.setHours(0,0,0,0)},function(me,Te){me.setDate(me.getDate()+Te)},function(me,Te){return(Te-me-6e4*(Te.getTimezoneOffset()-me.getTimezoneOffset()))/864e5},function(me){return me.getDate()-1}),c=l.range;function f(me){return v(function(Te){Te.setDate(Te.getDate()-(Te.getDay()+7-me)%7),Te.setHours(0,0,0,0)},function(Te,_e){Te.setDate(Te.getDate()+7*_e)},function(Te,_e){return(_e-Te-6e4*(_e.getTimezoneOffset()-Te.getTimezoneOffset()))/6048e5})}var g=f(0),h=f(1),o=f(2),x=f(3),d=f(4),w=f(5),_=f(6),T=g.range,k=h.range,L=o.range,M=x.range,O=d.range,P=w.range,S=_.range,E=v(function(me){me.setDate(1),me.setHours(0,0,0,0)},function(me,Te){me.setMonth(me.getMonth()+Te)},function(me,Te){return Te.getMonth()-me.getMonth()+12*(Te.getFullYear()-me.getFullYear())},function(me){return me.getMonth()}),R=E.range,B=v(function(me){me.setMonth(0,1),me.setHours(0,0,0,0)},function(me,Te){me.setFullYear(me.getFullYear()+Te)},function(me,Te){return Te.getFullYear()-me.getFullYear()},function(me){return me.getFullYear()});B.every=function(me){return isFinite(me=Math.floor(me))&&me>0?v(function(Te){Te.setFullYear(Math.floor(Te.getFullYear()/me)*me),Te.setMonth(0,1),Te.setHours(0,0,0,0)},function(Te,_e){Te.setFullYear(Te.getFullYear()+_e*me)}):null};var H=B.range,V=v(function(me){me.setUTCSeconds(0,0)},function(me,Te){me.setTime(+me+6e4*Te)},function(me,Te){return(Te-me)/6e4},function(me){return me.getUTCMinutes()}),Z=V.range,W=v(function(me){me.setUTCMinutes(0,0,0)},function(me,Te){me.setTime(+me+36e5*Te)},function(me,Te){return(Te-me)/36e5},function(me){return me.getUTCHours()}),G=W.range,X=v(function(me){me.setUTCHours(0,0,0,0)},function(me,Te){me.setUTCDate(me.getUTCDate()+Te)},function(me,Te){return(Te-me)/864e5},function(me){return me.getUTCDate()-1}),te=X.range;function D(me){return v(function(Te){Te.setUTCDate(Te.getUTCDate()-(Te.getUTCDay()+7-me)%7),Te.setUTCHours(0,0,0,0)},function(Te,_e){Te.setUTCDate(Te.getUTCDate()+7*_e)},function(Te,_e){return(_e-Te)/6048e5})}var N=D(0),U=D(1),Q=D(2),j=D(3),J=D(4),K=D(5),re=D(6),ne=N.range,se=U.range,oe=Q.range,pe=j.range,ce=J.range,ge=K.range,xe=re.range,we=v(function(me){me.setUTCDate(1),me.setUTCHours(0,0,0,0)},function(me,Te){me.setUTCMonth(me.getUTCMonth()+Te)},function(me,Te){return Te.getUTCMonth()-me.getUTCMonth()+12*(Te.getUTCFullYear()-me.getUTCFullYear())},function(me){return me.getUTCMonth()}),be=we.range,Se=v(function(me){me.setUTCMonth(0,1),me.setUTCHours(0,0,0,0)},function(me,Te){me.setUTCFullYear(me.getUTCFullYear()+Te)},function(me,Te){return Te.getUTCFullYear()-me.getUTCFullYear()},function(me){return me.getUTCFullYear()});Se.every=function(me){return isFinite(me=Math.floor(me))&&me>0?v(function(Te){Te.setUTCFullYear(Math.floor(Te.getUTCFullYear()/me)*me),Te.setUTCMonth(0,1),Te.setUTCHours(0,0,0,0)},function(Te,_e){Te.setUTCFullYear(Te.getUTCFullYear()+_e*me)}):null};var fe=Se.range;p.timeDay=l,p.timeDays=c,p.timeFriday=w,p.timeFridays=P,p.timeHour=s,p.timeHours=i,p.timeInterval=v,p.timeMillisecond=e,p.timeMilliseconds=n,p.timeMinute=r,p.timeMinutes=u,p.timeMonday=h,p.timeMondays=k,p.timeMonth=E,p.timeMonths=R,p.timeSaturday=_,p.timeSaturdays=S,p.timeSecond=t,p.timeSeconds=a,p.timeSunday=g,p.timeSundays=T,p.timeThursday=d,p.timeThursdays=O,p.timeTuesday=o,p.timeTuesdays=L,p.timeWednesday=x,p.timeWednesdays=M,p.timeWeek=g,p.timeWeeks=T,p.timeYear=B,p.timeYears=H,p.utcDay=X,p.utcDays=te,p.utcFriday=K,p.utcFridays=ge,p.utcHour=W,p.utcHours=G,p.utcMillisecond=e,p.utcMilliseconds=n,p.utcMinute=V,p.utcMinutes=Z,p.utcMonday=U,p.utcMondays=se,p.utcMonth=we,p.utcMonths=be,p.utcSaturday=re,p.utcSaturdays=xe,p.utcSecond=t,p.utcSeconds=a,p.utcSunday=N,p.utcSundays=ne,p.utcThursday=J,p.utcThursdays=ce,p.utcTuesday=Q,p.utcTuesdays=oe,p.utcWednesday=j,p.utcWednesdays=pe,p.utcWeek=N,p.utcWeeks=ne,p.utcYear=Se,p.utcYears=fe,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(p=p||self).d3=p.d3||{})},{}],122:[function(y,$,ee){arguments[4][121][0].apply(ee,arguments)},{dup:121}],123:[function(y,$,ee){var p;p=this,function(p){"use strict";var m,b,v=0,e=0,n=0,t=0,a=0,r=0,u="object"==typeof performance&&performance.now?performance:Date,s="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(d){setTimeout(d,17)};function i(){return a||(s(l),a=u.now()+r)}function l(){a=0}function c(){this._call=this._time=this._next=null}function f(d,w,_){var T=new c;return T.restart(d,w,_),T}function g(){i(),++v;for(var d,w=m;w;)(d=a-w._time)>=0&&w._call.call(null,d),w=w._next;--v}function h(){a=(t=u.now())+r,v=e=0;try{g()}finally{v=0,function(){for(var d,w,_=m,T=1/0;_;)_._call?(T>_._time&&(T=_._time),d=_,_=_._next):(w=_._next,_._next=null,_=d?d._next=w:m=w);b=d,x(T)}(),a=0}}function o(){var d=u.now(),w=d-t;w>1e3&&(r-=w,t=d)}function x(d){v||(e&&(e=clearTimeout(e)),d-a>24?(d<1/0&&(e=setTimeout(h,d-u.now()-r)),n&&(n=clearInterval(n))):(n||(t=u.now(),n=setInterval(o,1e3)),v=1,s(h)))}c.prototype=f.prototype={constructor:c,restart:function(d,w,_){if("function"!=typeof d)throw new TypeError("callback is not a function");_=(null==_?i():+_)+(null==w?0:+w),this._next||b===this||(b?b._next=this:m=this,b=this),this._call=d,this._time=_,x()},stop:function(){this._call&&(this._call=null,this._time=1/0,x())}},p.interval=function(d,w,_){var T=new c,k=w;return null==w?(T.restart(d,w,_),T):(w=+w,_=null==_?i():+_,T.restart(function L(M){M+=k,T.restart(L,k+=w,_),d(M)},w,_),T)},p.now=i,p.timeout=function(d,w,_){var T=new c;return T.restart(function(k){T.stop(),d(k+w)},w=null==w?0:+w,_),T},p.timer=f,p.timerFlush=g,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(p=p||self).d3=p.d3||{})},{}],124:[function(y,$,ee){$.exports=function(){for(var p=0;p<arguments.length;p++)if(void 0!==arguments[p])return arguments[p]}},{}],125:[function(y,$,ee){"use strict";$.exports=b;var p=(b.canvas=document.createElement("canvas")).getContext("2d"),m=v([32,126]);function b(e,n){Array.isArray(e)&&(e=e.join(", "));var t,a={},r=16,u=.05;n&&(2===n.length&&"number"==typeof n[0]?t=v(n):Array.isArray(n)?t=n:(n.o?t=v(n.o):n.pairs&&(t=n.pairs),n.fontSize&&(r=n.fontSize),null!=n.threshold&&(u=n.threshold))),t||(t=m),p.font=r+"px "+e;for(var s=0;s<t.length;s++){var i=t[s],l=p.measureText(i[0]).width+p.measureText(i[1]).width,c=p.measureText(i).width;Math.abs(l-c)>r*u&&(a[i]=(c-l)/r*1e3)}return a}function v(e){for(var n=[],t=e[0];t<=e[1];t++)for(var a=String.fromCharCode(t),r=e[0];r<e[1];r++){var u=a+String.fromCharCode(r);n.push(u)}return n}b.createPairs=v,b.ascii=m},{}],126:[function(y,$,ee){var p=y("abs-svg-path"),m=y("normalize-svg-path"),b={M:"moveTo",C:"bezierCurveTo"};$.exports=function(v,e){v.beginPath(),m(p(e)).forEach(function(n){var t=n[0],a=n.slice(1);v[b[t]].apply(v,a)}),v.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(y,$,ee){$.exports=function(p){switch(p){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(y,$,ee){"use strict";$.exports=function(p,m){switch(void 0===m&&(m=0),typeof p){case"number":if(p>0)return function(b,v){var e,n;for(e=new Array(b),n=0;n<b;++n)e[n]=v;return e}(0|p,m);break;case"object":if("number"==typeof p.length)return function b(v,e,n){var t=0|v[n];if(t<=0)return[];var a,r=new Array(t);if(n===v.length-1)for(a=0;a<t;++a)r[a]=e;else for(a=0;a<t;++a)r[a]=b(v,e,n+1);return r}(p,m,0)}return[]}},{}],129:[function(y,$,ee){"use strict";function p(O,P,S){S=S||2;var E,R,B,H,V,Z,W,G=P&&P.length,X=G?P[0]*S:O.length,te=m(O,0,X,S,!0),D=[];if(!te||te.next===te.prev)return D;if(G&&(te=function(U,Q,j,J){var K,re,oe,pe=[];for(K=0,re=Q.length;K<re;K++)(oe=m(U,Q[K]*J,K<re-1?Q[K+1]*J:U.length,J,!1))===oe.next&&(oe.steiner=!0),pe.push(l(oe));for(pe.sort(r),K=0;K<pe.length;K++)u(pe[K],j),j=b(j,j.next);return j}(O,P,te,S)),O.length>80*S){E=B=O[0],R=H=O[1];for(var N=S;N<X;N+=S)(V=O[N])<E&&(E=V),(Z=O[N+1])<R&&(R=Z),V>B&&(B=V),Z>H&&(H=Z);W=0!==(W=Math.max(B-E,H-R))?1/W:0}return v(te,D,S,E,R,W),D}function m(O,P,S,E,R){var B,H;if(R===M(O,P,S,E)>0)for(B=P;B<S;B+=E)H=T(B,O[B],O[B+1],H);else for(B=S-E;B>=P;B-=E)H=T(B,O[B],O[B+1],H);return H&&h(H,H.next)&&(k(H),H=H.next),H}function b(O,P){if(!O)return O;P||(P=O);var S,E=O;do{if(S=!1,E.steiner||!h(E,E.next)&&0!==g(E.prev,E,E.next))E=E.next;else{if(k(E),(E=P=E.prev)===E.next)break;S=!0}}while(S||E!==P);return P}function v(O,P,S,E,R,B,H){if(O){!H&&B&&function(G,X,te,D){var N=G;do{null===N.z&&(N.z=i(N.x,N.y,X,te,D)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next}while(N!==G);N.prevZ.nextZ=null,N.prevZ=null,function(U){var Q,j,J,K,re,ne,se,oe,pe=1;do{for(j=U,U=null,re=null,ne=0;j;){for(ne++,J=j,se=0,Q=0;Q<pe&&(se++,J=J.nextZ);Q++);for(oe=pe;se>0||oe>0&&J;)0!==se&&(0===oe||!J||j.z<=J.z)?(K=j,j=j.nextZ,se--):(K=J,J=J.nextZ,oe--),re?re.nextZ=K:U=K,K.prevZ=re,re=K;j=J}re.nextZ=null,pe*=2}while(ne>1)}(N)}(O,E,R,B);for(var V,Z,W=O;O.prev!==O.next;)if(V=O.prev,Z=O.next,B?n(O,E,R,B):e(O))P.push(V.i/S),P.push(O.i/S),P.push(Z.i/S),k(O),O=Z.next,W=Z.next;else if((O=Z)===W){H?1===H?v(O=t(b(O),P,S),P,S,E,R,B,2):2===H&&a(O,P,S,E,R,B):v(b(O),P,S,E,R,B,1);break}}}function e(O){var P=O.prev,S=O,E=O.next;if(g(P,S,E)>=0)return!1;for(var R=O.next.next;R!==O.prev;){if(c(P.x,P.y,S.x,S.y,E.x,E.y,R.x,R.y)&&g(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function n(O,P,S,E){var R=O.prev,B=O,H=O.next;if(g(R,B,H)>=0)return!1;for(var W=R.x>B.x?R.x>H.x?R.x:H.x:B.x>H.x?B.x:H.x,G=R.y>B.y?R.y>H.y?R.y:H.y:B.y>H.y?B.y:H.y,X=i(R.x<B.x?R.x<H.x?R.x:H.x:B.x<H.x?B.x:H.x,R.y<B.y?R.y<H.y?R.y:H.y:B.y<H.y?B.y:H.y,P,S,E),te=i(W,G,P,S,E),D=O.prevZ,N=O.nextZ;D&&D.z>=X&&N&&N.z<=te;){if(D!==O.prev&&D!==O.next&&c(R.x,R.y,B.x,B.y,H.x,H.y,D.x,D.y)&&g(D.prev,D,D.next)>=0||(D=D.prevZ,N!==O.prev&&N!==O.next&&c(R.x,R.y,B.x,B.y,H.x,H.y,N.x,N.y)&&g(N.prev,N,N.next)>=0))return!1;N=N.nextZ}for(;D&&D.z>=X;){if(D!==O.prev&&D!==O.next&&c(R.x,R.y,B.x,B.y,H.x,H.y,D.x,D.y)&&g(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;N&&N.z<=te;){if(N!==O.prev&&N!==O.next&&c(R.x,R.y,B.x,B.y,H.x,H.y,N.x,N.y)&&g(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function t(O,P,S){var E=O;do{var R=E.prev,B=E.next.next;!h(R,B)&&o(R,E,E.next,B)&&w(R,B)&&w(B,R)&&(P.push(R.i/S),P.push(E.i/S),P.push(B.i/S),k(E),k(E.next),E=O=B),E=E.next}while(E!==O);return b(E)}function a(O,P,S,E,R,B){var H=O;do{for(var V=H.next.next;V!==H.prev;){if(H.i!==V.i&&f(H,V)){var Z=_(H,V);return H=b(H,H.next),Z=b(Z,Z.next),v(H,P,S,E,R,B),void v(Z,P,S,E,R,B)}V=V.next}H=H.next}while(H!==O)}function r(O,P){return O.x-P.x}function u(O,P){if(P=function(E,R){var B,H=R,V=E.x,Z=E.y,W=-1/0;do{if(Z<=H.y&&Z>=H.next.y&&H.next.y!==H.y){var G=H.x+(Z-H.y)*(H.next.x-H.x)/(H.next.y-H.y);if(G<=V&&G>W){if(W=G,G===V){if(Z===H.y)return H;if(Z===H.next.y)return H.next}B=H.x<H.next.x?H:H.next}}H=H.next}while(H!==R);if(!B)return null;if(V===W)return B;var X,te=B,D=B.x,N=B.y,U=1/0;H=B;do{V>=H.x&&H.x>=D&&V!==H.x&&c(Z<N?V:W,Z,D,N,Z<N?W:V,Z,H.x,H.y)&&(X=Math.abs(Z-H.y)/(V-H.x),w(H,E)&&(X<U||X===U&&(H.x>B.x||H.x===B.x&&s(B,H)))&&(B=H,U=X)),H=H.next}while(H!==te);return B}(O,P)){var S=_(P,O);b(P,P.next),b(S,S.next)}}function s(O,P){return g(O.prev,O,P.prev)<0&&g(P.next,O,O.next)<0}function i(O,P,S,E,R){return(O=1431655765&((O=858993459&((O=252645135&((O=16711935&((O=32767*(O-S)*R)|O<<8))|O<<4))|O<<2))|O<<1))|(P=1431655765&((P=858993459&((P=252645135&((P=16711935&((P=32767*(P-E)*R)|P<<8))|P<<4))|P<<2))|P<<1))<<1}function l(O){var P=O,S=O;do{(P.x<S.x||P.x===S.x&&P.y<S.y)&&(S=P),P=P.next}while(P!==O);return S}function c(O,P,S,E,R,B,H,V){return(R-H)*(P-V)-(O-H)*(B-V)>=0&&(O-H)*(E-V)-(S-H)*(P-V)>=0&&(S-H)*(B-V)-(R-H)*(E-V)>=0}function f(O,P){return O.next.i!==P.i&&O.prev.i!==P.i&&!function(S,E){var R=S;do{if(R.i!==S.i&&R.next.i!==S.i&&R.i!==E.i&&R.next.i!==E.i&&o(R,R.next,S,E))return!0;R=R.next}while(R!==S);return!1}(O,P)&&(w(O,P)&&w(P,O)&&function(S,E){var R=S,B=!1,H=(S.x+E.x)/2,V=(S.y+E.y)/2;do{R.y>V!=R.next.y>V&&R.next.y!==R.y&&H<(R.next.x-R.x)*(V-R.y)/(R.next.y-R.y)+R.x&&(B=!B),R=R.next}while(R!==S);return B}(O,P)&&(g(O.prev,O,P.prev)||g(O,P.prev,P))||h(O,P)&&g(O.prev,O,O.next)>0&&g(P.prev,P,P.next)>0)}function g(O,P,S){return(P.y-O.y)*(S.x-P.x)-(P.x-O.x)*(S.y-P.y)}function h(O,P){return O.x===P.x&&O.y===P.y}function o(O,P,S,E){var R=d(g(O,P,S)),B=d(g(O,P,E)),H=d(g(S,E,O)),V=d(g(S,E,P));return R!==B&&H!==V||!(0!==R||!x(O,S,P))||!(0!==B||!x(O,E,P))||!(0!==H||!x(S,O,E))||!(0!==V||!x(S,P,E))}function x(O,P,S){return P.x<=Math.max(O.x,S.x)&&P.x>=Math.min(O.x,S.x)&&P.y<=Math.max(O.y,S.y)&&P.y>=Math.min(O.y,S.y)}function d(O){return O>0?1:O<0?-1:0}function w(O,P){return g(O.prev,O,O.next)<0?g(O,P,O.next)>=0&&g(O,O.prev,P)>=0:g(O,P,O.prev)<0||g(O,O.next,P)<0}function _(O,P){var S=new L(O.i,O.x,O.y),E=new L(P.i,P.x,P.y),R=O.next,B=P.prev;return O.next=P,P.prev=O,S.next=R,R.prev=S,E.next=S,S.prev=E,B.next=E,E.prev=B,E}function T(O,P,S,E){var R=new L(O,P,S);return E?(R.next=E.next,R.prev=E,E.next.prev=R,E.next=R):(R.prev=R,R.next=R),R}function k(O){O.next.prev=O.prev,O.prev.next=O.next,O.prevZ&&(O.prevZ.nextZ=O.nextZ),O.nextZ&&(O.nextZ.prevZ=O.prevZ)}function L(O,P,S){this.i=O,this.x=P,this.y=S,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(O,P,S,E){for(var R=0,B=P,H=S-E;B<S;B+=E)R+=(O[H]-O[B])*(O[B+1]+O[H+1]),H=B;return R}$.exports=p,$.exports.default=p,p.deviation=function(O,P,S,E){var R=P&&P.length,H=Math.abs(M(O,0,R?P[0]*S:O.length,S));if(R)for(var V=0,Z=P.length;V<Z;V++)H-=Math.abs(M(O,P[V]*S,V<Z-1?P[V+1]*S:O.length,S));var X=0;for(V=0;V<E.length;V+=3){var te=E[V]*S,D=E[V+1]*S,N=E[V+2]*S;X+=Math.abs((O[te]-O[N])*(O[D+1]-O[te+1])-(O[te]-O[D])*(O[N+1]-O[te+1]))}return 0===H&&0===X?0:Math.abs((X-H)/H)},p.flatten=function(O){for(var P=O[0][0].length,S={vertices:[],holes:[],dimensions:P},E=0,R=0;R<O.length;R++){for(var B=0;B<O[R].length;B++)for(var H=0;H<P;H++)S.vertices.push(O[R][B][H]);R>0&&S.holes.push(E+=O[R-1].length)}return S}},{}],130:[function(y,$,ee){var p=y("strongly-connected-components");$.exports=function(m,b){var v,e=[],n=[],t=[],a={},r=[];function u(o){var x,d,w=!1;for(n.push(o),t[o]=!0,x=0;x<r[o].length;x++)(d=r[o][x])===v?(s(v,n),w=!0):t[d]||(w=u(d));if(w)!function T(k){t[k]=!1,a.hasOwnProperty(k)&&Object.keys(a[k]).forEach(function(L){delete a[k][L],t[L]&&T(L)})}(o);else for(x=0;x<r[o].length;x++){var _=a[d=r[o][x]];_||(a[d]=_={}),_[d]=!0}return n.pop(),w}function s(o,x){var d=[].concat(x).concat(o);b?b(u):e.push(d)}function i(o){!function(L){for(var M=0;M<m.length;M++)M<L&&(m[M]=[]),m[M]=m[M].filter(function(O){return O>=L})}(o);for(var x,d=p(m).components.filter(function(L){return L.length>1}),w=1/0,_=0;_<d.length;_++)for(var T=0;T<d[_].length;T++)d[_][T]<w&&(w=d[_][T],x=_);var k=d[x];return!!k&&{leastVertex:w,adjList:m.map(function(L,M){return-1===k.indexOf(M)?[]:L.filter(function(O){return-1!==k.indexOf(O)})})}}v=0;for(var l=m.length;v<l;){var c=i(v);if(v=c.leastVertex,r=c.adjList){for(var f=0;f<r.length;f++)for(var g=0;g<r[f].length;g++){var h=r[f][g];t[+h]=!1,a[h]={}}u(v),v+=1}else v=l}return b?void 0:e}},{"strongly-connected-components":306}],131:[function(y,$,ee){"use strict";var p=y("../../object/valid-value");$.exports=function(){return p(this).length=0,this}},{"../../object/valid-value":162}],132:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?Array.from:y("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(y,$,ee){"use strict";$.exports=function(){var p,m,b=Array.from;return"function"==typeof b&&(m=b(p=["raz","dwa"]),Boolean(m&&m!==p&&"dwa"===m[1]))}},{}],134:[function(y,$,ee){"use strict";var p=y("es6-symbol").iterator,m=y("../../function/is-arguments"),b=y("../../function/is-function"),v=y("../../number/to-pos-integer"),e=y("../../object/valid-callable"),n=y("../../object/valid-value"),t=y("../../object/is-value"),a=y("../../string/is-string"),r=Array.isArray,u=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},i=Object.defineProperty;$.exports=function(l){var c,f,g,h,o,x,d,w,_,T,k=arguments[1],L=arguments[2];if(l=Object(n(l)),t(k)&&e(k),this&&this!==Array&&b(this))c=this;else{if(!k){if(m(l))return 1!==(o=l.length)?Array.apply(null,l):((h=new Array(1))[0]=l[0],h);if(r(l)){for(h=new Array(o=l.length),f=0;f<o;++f)h[f]=l[f];return h}}h=[]}if(!r(l))if(void 0!==(_=l[p])){for(d=e(_).call(l),c&&(h=new c),w=d.next(),f=0;!w.done;)T=k?u.call(k,L,w.value,f):w.value,c?(s.value=T,i(h,f,s)):h[f]=T,w=d.next(),++f;o=f}else if(a(l)){for(o=l.length,c&&(h=new c),f=0,g=0;f<o;++f)T=l[f],f+1<o&&(x=T.charCodeAt(0))>=55296&&x<=56319&&(T+=l[++f]),T=k?u.call(k,L,T,g):T,c?(s.value=T,i(h,g,s)):h[g]=T,++g;o=g}if(void 0===o)for(o=v(l.length),c&&(h=new c(o)),f=0;f<o;++f)T=k?u.call(k,L,l[f],f):l[f],c?(s.value=T,i(h,f,s)):h[f]=T;return c&&(s.value=null,h.length=o),h}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(y,$,ee){"use strict";var p=Object.prototype.toString,m=p.call(function(){return arguments}());$.exports=function(b){return p.call(b)===m}},{}],136:[function(y,$,ee){"use strict";var p=Object.prototype.toString,m=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);$.exports=function(b){return"function"==typeof b&&m(p.call(b))}},{}],137:[function(y,$,ee){"use strict";$.exports=function(){}},{}],138:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?Math.sign:y("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(y,$,ee){"use strict";$.exports=function(){var p=Math.sign;return"function"==typeof p&&1===p(10)&&-1===p(-20)}},{}],140:[function(y,$,ee){"use strict";$.exports=function(p){return p=Number(p),isNaN(p)||0===p?p:p>0?1:-1}},{}],141:[function(y,$,ee){"use strict";var p=y("../math/sign"),m=Math.abs,b=Math.floor;$.exports=function(v){return isNaN(v)?0:0!==(v=Number(v))&&isFinite(v)?p(v)*b(m(v)):v}},{"../math/sign":138}],142:[function(y,$,ee){"use strict";var p=y("./to-integer"),m=Math.max;$.exports=function(b){return m(0,p(b))}},{"./to-integer":141}],143:[function(y,$,ee){"use strict";var p=y("./valid-callable"),m=y("./valid-value"),b=Function.prototype.bind,v=Function.prototype.call,e=Object.keys,n=Object.prototype.propertyIsEnumerable;$.exports=function(t,a){return function(r,u){var s,i=arguments[2],l=arguments[3];return r=Object(m(r)),p(u),s=e(r),l&&s.sort("function"==typeof l?b.call(l,r):void 0),"function"!=typeof t&&(t=s[t]),v.call(t,s,function(c,f){return n.call(r,c)?v.call(u,i,r[c],c,r,f):a})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?Object.assign:y("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(y,$,ee){"use strict";$.exports=function(){var p,m=Object.assign;return"function"==typeof m&&(m(p={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),p.foo+p.bar+p.trzy==="razdwatrzy")}},{}],146:[function(y,$,ee){"use strict";var p=y("../keys"),m=y("../valid-value"),b=Math.max;$.exports=function(v,e){var n,t,a,r=b(arguments.length,2);for(v=Object(m(v)),a=function(u){try{v[u]=e[u]}catch(s){n||(n=s)}},t=1;t<r;++t)p(e=arguments[t]).forEach(a);if(void 0!==n)throw n;return v}},{"../keys":152,"../valid-value":162}],147:[function(y,$,ee){"use strict";var p=y("../array/from"),m=y("./assign"),b=y("./valid-value");$.exports=function(v){var e=Object(b(v)),n=arguments[1],t=Object(arguments[2]);if(e!==v&&!n)return e;var a={};return n?p(n,function(r){(t.ensure||r in v)&&(a[r]=v[r])}):m(a,v),a}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(y,$,ee){"use strict";var p,m,b,v,e=Object.create;y("./set-prototype-of/is-implemented")()||(p=y("./set-prototype-of/shim")),$.exports=p?1!==p.level?e:(m={},b={},v={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(n){b[n]="__proto__"!==n?v:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(m,b),Object.defineProperty(p,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:m}),function(n,t){return e(null===n?m:n,t)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(y,$,ee){"use strict";$.exports=y("./_iterate")("forEach")},{"./_iterate":143}],150:[function(y,$,ee){"use strict";var p=y("./is-value"),m={function:!0,object:!0};$.exports=function(b){return p(b)&&m[typeof b]||!1}},{"./is-value":151}],151:[function(y,$,ee){"use strict";var p=y("../function/noop")();$.exports=function(m){return m!==p&&null!==m}},{"../function/noop":137}],152:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?Object.keys:y("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(y,$,ee){"use strict";$.exports=function(){try{return Object.keys("primitive"),!0}catch(p){return!1}}},{}],154:[function(y,$,ee){"use strict";var p=y("../is-value"),m=Object.keys;$.exports=function(b){return m(p(b)?Object(b):b)}},{"../is-value":151}],155:[function(y,$,ee){"use strict";var p=y("./valid-callable"),m=y("./for-each"),b=Function.prototype.call;$.exports=function(v,e){var n={},t=arguments[2];return p(e),m(v,function(a,r,u,s){n[r]=b.call(e,t,a,r,u,s)}),n}},{"./for-each":149,"./valid-callable":160}],156:[function(y,$,ee){"use strict";var p=y("./is-value"),m=Array.prototype.forEach,b=Object.create,v=function(e,n){var t;for(t in e)n[t]=e[t]};$.exports=function(e){var n=b(null);return m.call(arguments,function(t){p(t)&&v(Object(t),n)}),n}},{"./is-value":151}],157:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?Object.setPrototypeOf:y("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(y,$,ee){"use strict";var p=Object.create,m=Object.getPrototypeOf,b={};$.exports=function(){var v=Object.setPrototypeOf,e=arguments[0]||p;return"function"==typeof v&&m(v(e(null),b))===b}},{}],159:[function(y,$,ee){"use strict";var p,t,a,r,m=y("../is-object"),b=y("../valid-value"),v=Object.prototype.isPrototypeOf,e=Object.defineProperty,n={configurable:!0,enumerable:!1,writable:!0,value:void 0};p=function(t,a){if(b(t),null===a||m(a))return t;throw new TypeError("Prototype must be null or an object")},$.exports=(t=function(){var t,a=Object.create(null),r={},u=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(u){try{(t=u.set).call(a,r)}catch(s){}if(Object.getPrototypeOf(a)===r)return{set:t,level:2}}return a.__proto__=r,Object.getPrototypeOf(a)===r?{level:2}:((a={}).__proto__=r,Object.getPrototypeOf(a)===r&&{level:1})}(),t?(2===t.level?t.set?(r=t.set,a=function(u,s){return r.call(p(u,s),s),u}):a=function(u,s){return p(u,s).__proto__=s,u}:a=function u(s,i){var l;return p(s,i),(l=v.call(u.nullPolyfill,s))&&delete u.nullPolyfill.__proto__,null===i&&(i=u.nullPolyfill),s.__proto__=i,l&&e(u.nullPolyfill,"__proto__",n),s},Object.defineProperty(a,"level",{configurable:!1,enumerable:!1,writable:!1,value:t.level})):null),y("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(y,$,ee){"use strict";$.exports=function(p){if("function"!=typeof p)throw new TypeError(p+" is not a function");return p}},{}],161:[function(y,$,ee){"use strict";var p=y("./is-object");$.exports=function(m){if(!p(m))throw new TypeError(m+" is not an Object");return m}},{"./is-object":150}],162:[function(y,$,ee){"use strict";var p=y("./is-value");$.exports=function(m){if(!p(m))throw new TypeError("Cannot use null or undefined");return m}},{"./is-value":151}],163:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?String.prototype.contains:y("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(y,$,ee){"use strict";var p="razdwatrzy";$.exports=function(){return"function"==typeof p.contains&&!0===p.contains("dwa")&&!1===p.contains("foo")}},{}],165:[function(y,$,ee){"use strict";var p=String.prototype.indexOf;$.exports=function(m){return p.call(this,m,arguments[1])>-1}},{}],166:[function(y,$,ee){"use strict";var p=Object.prototype.toString,m=p.call("");$.exports=function(b){return"string"==typeof b||b&&"object"==typeof b&&(b instanceof String||p.call(b)===m)||!1}},{}],167:[function(y,$,ee){"use strict";var p=Object.create(null),m=Math.random;$.exports=function(){var b;do{b=m().toString(36).slice(2)}while(p[b]);return b}},{}],168:[function(y,$,ee){"use strict";var p,m=y("es5-ext/object/set-prototype-of"),b=y("es5-ext/string/#/contains"),v=y("d"),e=y("es6-symbol"),n=y("./"),t=Object.defineProperty;p=$.exports=function(a,r){if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");n.call(this,a),r=r?b.call(r,"key+value")?"key+value":b.call(r,"key")?"key":"value":"value",t(this,"__kind__",v("",r))},m&&m(p,n),delete p.prototype.constructor,p.prototype=Object.create(n.prototype,{_resolve:v(function(a){return"value"===this.__kind__?this.__list__[a]:"key+value"===this.__kind__?[a,this.__list__[a]]:a})}),t(p.prototype,e.toStringTag,v("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(y,$,ee){"use strict";var p=y("es5-ext/function/is-arguments"),m=y("es5-ext/object/valid-callable"),b=y("es5-ext/string/is-string"),v=y("./get"),e=Array.isArray,n=Function.prototype.call,t=Array.prototype.some;$.exports=function(a,r){var u,s,i,l,c,f,g,h,o=arguments[2];if(e(a)||p(a)?u="array":b(a)?u="string":a=v(a),m(r),i=function(){l=!0},"array"!==u)if("string"!==u)for(s=a.next();!s.done;){if(n.call(r,o,s.value,i),l)return;s=a.next()}else for(f=a.length,c=0;c<f&&(g=a[c],c+1<f&&(h=g.charCodeAt(0))>=55296&&h<=56319&&(g+=a[++c]),n.call(r,o,g,i),!l);++c);else t.call(a,function(x){return n.call(r,o,x,i),l})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(y,$,ee){"use strict";var p=y("es5-ext/function/is-arguments"),m=y("es5-ext/string/is-string"),b=y("./array"),v=y("./string"),e=y("./valid-iterable"),n=y("es6-symbol").iterator;$.exports=function(t){return"function"==typeof e(t)[n]?t[n]():p(t)?new b(t):m(t)?new v(t):new b(t)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(y,$,ee){"use strict";var p,m=y("es5-ext/array/#/clear"),b=y("es5-ext/object/assign"),v=y("es5-ext/object/valid-callable"),e=y("es5-ext/object/valid-value"),n=y("d"),t=y("d/auto-bind"),a=y("es6-symbol"),r=Object.defineProperty,u=Object.defineProperties;$.exports=p=function(s,i){if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");u(this,{__list__:n("w",e(s)),__context__:n("w",i),__nextIndex__:n("w",0)}),i&&(v(i.on),i.on("_add",this._onAdd),i.on("_delete",this._onDelete),i.on("_clear",this._onClear))},delete p.prototype.constructor,u(p.prototype,b({_next:n(function(){var s;if(this.__list__)return this.__redo__&&void 0!==(s=this.__redo__.shift())?s:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:n(function(){return this._createResult(this._next())}),_createResult:n(function(s){return void 0===s?{done:!0,value:void 0}:{done:!1,value:this._resolve(s)}}),_resolve:n(function(s){return this.__list__[s]}),_unBind:n(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:n(function(){return"[object "+(this[a.toStringTag]||"Object")+"]"})},t({_onAdd:n(function(s){s>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(i,l){i>=s&&(this.__redo__[l]=++i)},this),this.__redo__.push(s)):r(this,"__redo__",n("c",[s])))}),_onDelete:n(function(s){var i;s>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(i=this.__redo__.indexOf(s))&&this.__redo__.splice(i,1),this.__redo__.forEach(function(l,c){l>s&&(this.__redo__[c]=--l)},this)))}),_onClear:n(function(){this.__redo__&&m.call(this.__redo__),this.__nextIndex__=0})}))),r(p.prototype,a.iterator,n(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(y,$,ee){"use strict";var p=y("es5-ext/function/is-arguments"),m=y("es5-ext/object/is-value"),b=y("es5-ext/string/is-string"),v=y("es6-symbol").iterator,e=Array.isArray;$.exports=function(n){return!(!m(n)||!e(n)&&!b(n)&&!p(n)&&"function"!=typeof n[v])}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(y,$,ee){"use strict";var p,m=y("es5-ext/object/set-prototype-of"),b=y("d"),v=y("es6-symbol"),e=y("./"),n=Object.defineProperty;p=$.exports=function(t){if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");t=String(t),e.call(this,t),n(this,"__length__",b("",t.length))},m&&m(p,e),delete p.prototype.constructor,p.prototype=Object.create(e.prototype,{_next:b(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:b(function(t){var a,r=this.__list__[t];return this.__nextIndex__===this.__length__?r:(a=r.charCodeAt(0))>=55296&&a<=56319?r+this.__list__[this.__nextIndex__++]:r})}),n(p.prototype,v.toStringTag,b("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(y,$,ee){"use strict";var p=y("./is-iterable");$.exports=function(m){if(!p(m))throw new TypeError(m+" is not iterable");return m}},{"./is-iterable":172}],175:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?y("ext/global-this").Symbol:y("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(y,$,ee){"use strict";var p=y("ext/global-this"),m={object:!0,symbol:!0};$.exports=function(){var b,v=p.Symbol;if("function"!=typeof v)return!1;b=v("test symbol");try{String(b)}catch(e){return!1}return!!m[typeof v.iterator]&&!!m[typeof v.toPrimitive]&&!!m[typeof v.toStringTag]}},{"ext/global-this":188}],177:[function(y,$,ee){"use strict";$.exports=function(p){return!!p&&("symbol"==typeof p||!!p.constructor&&"Symbol"===p.constructor.name&&"Symbol"===p[p.constructor.toStringTag])}},{}],178:[function(y,$,ee){"use strict";var p=y("d"),b=Object.defineProperty,v=Object.prototype,e=(0,Object.create)(null);$.exports=function(n){for(var t,a,r=0;e[n+(r||"")];)++r;return e[n+=r||""]=!0,b(v,t="@@"+n,p.gs(null,function(u){a||(a=!0,b(this,t,p(u)),a=!1)})),t}},{d:106}],179:[function(y,$,ee){"use strict";var p=y("d"),m=y("ext/global-this").Symbol;$.exports=function(b){return Object.defineProperties(b,{hasInstance:p("",m&&m.hasInstance||b("hasInstance")),isConcatSpreadable:p("",m&&m.isConcatSpreadable||b("isConcatSpreadable")),iterator:p("",m&&m.iterator||b("iterator")),match:p("",m&&m.match||b("match")),replace:p("",m&&m.replace||b("replace")),search:p("",m&&m.search||b("search")),species:p("",m&&m.species||b("species")),split:p("",m&&m.split||b("split")),toPrimitive:p("",m&&m.toPrimitive||b("toPrimitive")),toStringTag:p("",m&&m.toStringTag||b("toStringTag")),unscopables:p("",m&&m.unscopables||b("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(y,$,ee){"use strict";var p=y("d"),m=y("../../../validate-symbol"),b=Object.create(null);$.exports=function(v){return Object.defineProperties(v,{for:p(function(e){return b[e]?b[e]:b[e]=v(String(e))}),keyFor:p(function(e){var n;for(n in m(e),b)if(b[n]===e)return n})})}},{"../../../validate-symbol":182,d:106}],181:[function(y,$,ee){"use strict";var p,m,b,v=y("d"),e=y("./validate-symbol"),n=y("ext/global-this").Symbol,t=y("./lib/private/generate-name"),a=y("./lib/private/setup/standard-symbols"),r=y("./lib/private/setup/symbol-registry"),u=Object.create,s=Object.defineProperties,i=Object.defineProperty;if("function"==typeof n)try{String(n()),b=!0}catch(l){}else n=null;m=function(l){if(this instanceof m)throw new TypeError("Symbol is not a constructor");return p(l)},$.exports=p=function l(c){var f;if(this instanceof l)throw new TypeError("Symbol is not a constructor");return b?n(c):(f=u(m.prototype),c=void 0===c?"":String(c),s(f,{__description__:v("",c),__name__:v("",t(c))}))},a(p),r(p),s(m.prototype,{constructor:v(p),toString:v("",function(){return this.__name__})}),s(p.prototype,{toString:v(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:v(function(){return e(this)})}),i(p.prototype,p.toPrimitive,v("",function(){var l=e(this);return"symbol"==typeof l?l:l.toString()})),i(p.prototype,p.toStringTag,v("c","Symbol")),i(m.prototype,p.toStringTag,v("c",p.prototype[p.toStringTag])),i(m.prototype,p.toPrimitive,v("c",p.prototype[p.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(y,$,ee){"use strict";var p=y("./is-symbol");$.exports=function(m){if(!p(m))throw new TypeError(m+" is not a symbol");return m}},{"./is-symbol":177}],183:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?WeakMap:y("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(y,$,ee){"use strict";$.exports=function(){var p,m;if("function"!=typeof WeakMap)return!1;try{p=new WeakMap([[m={},"one"],[{},"two"],[{},"three"]])}catch(b){return!1}return"[object WeakMap]"===String(p)&&"function"==typeof p.set&&p.set({},1)===p&&"function"==typeof p.delete&&"function"==typeof p.has&&"one"===p.get(m)}},{}],185:[function(y,$,ee){"use strict";$.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],186:[function(y,$,ee){"use strict";var p,m=y("es5-ext/object/is-value"),b=y("es5-ext/object/set-prototype-of"),v=y("es5-ext/object/valid-object"),e=y("es5-ext/object/valid-value"),n=y("es5-ext/string/random-uniq"),t=y("d"),a=y("es6-iterator/get"),r=y("es6-iterator/for-of"),u=y("es6-symbol").toStringTag,s=y("./is-native-implemented"),i=Array.isArray,l=Object.defineProperty,c=Object.prototype.hasOwnProperty,f=Object.getPrototypeOf;$.exports=p=function(){var g,h=arguments[0];if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");return g=s&&b&&WeakMap!==p?b(new WeakMap,f(this)):this,m(h)&&(i(h)||(h=a(h))),l(g,"__weakMapData__",t("c","$weakMap$"+n())),h&&r(h,function(o){e(o),g.set(o[0],o[1])}),g},s&&(b&&b(p,WeakMap),p.prototype=Object.create(WeakMap.prototype,{constructor:t(p)})),Object.defineProperties(p.prototype,{delete:t(function(g){return!!c.call(v(g),this.__weakMapData__)&&(delete g[this.__weakMapData__],!0)}),get:t(function(g){if(c.call(v(g),this.__weakMapData__))return g[this.__weakMapData__]}),has:t(function(g){return c.call(v(g),this.__weakMapData__)}),set:t(function(g,h){return l(v(g),this.__weakMapData__,t("c",h)),this}),toString:t(function(){return"[object WeakMap]"})}),l(p.prototype,u,t("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(y,$,ee){var p=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};$.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(m){return p()}try{return __global__||p()}finally{delete Object.prototype.__global__}}()},{}],188:[function(y,$,ee){"use strict";$.exports=y("./is-implemented")()?globalThis:y("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(y,$,ee){"use strict";$.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(y,$,ee){"use strict";var p=y("is-string-blank");$.exports=function(m){var b=typeof m;if("string"===b){var v=m;if(0==(m=+m)&&p(v))return!1}else if("number"!==b)return!1;return m-m<1}},{"is-string-blank":237}],191:[function(y,$,ee){var p=y("dtype");$.exports=function(m,b,v){if(!m)throw new TypeError("must specify data as first parameter");if(v=0|+(v||0),Array.isArray(m)&&m[0]&&"number"==typeof m[0][0]){var e,n,t,a,r=m[0].length,u=m.length*r;b&&"string"!=typeof b||(b=new(p(b||"float32"))(u+v));var s=b.length-v;if(u!==s)throw new Error("source length "+u+" ("+r+"x"+m.length+") does not match destination length "+s);for(e=0,t=v;e<m.length;e++)for(n=0;n<r;n++)b[t++]=null===m[e][n]?NaN:m[e][n]}else if(b&&"string"!=typeof b)b.set(m,v);else{var i=p(b||"float32");if(Array.isArray(m)||"array"===b)for(e=0,t=v,a=(b=new i(m.length+v)).length;t<a;t++,e++)b[t]=null===m[e]?NaN:m[e];else 0===v?b=new i(m):(b=new i(m.length+v)).set(m,v)}return b}},{dtype:127}],192:[function(y,$,ee){"use strict";var p=y("css-font/stringify"),m=[32,126];$.exports=function(b){var v=(b=b||{}).shape?b.shape:b.canvas?[b.canvas.width,b.canvas.height]:[512,512],e=b.canvas||document.createElement("canvas"),n=b.font,t="number"==typeof b.step?[b.step,b.step]:b.step||[32,32],a=b.chars||m;if(n&&"string"!=typeof n&&(n=p(n)),Array.isArray(a)){if(2===a.length&&"number"==typeof a[0]&&"number"==typeof a[1]){for(var r=[],u=a[0],s=0;u<=a[1];u++)r[s++]=String.fromCharCode(u);a=r}}else a=String(a).split("");v=v.slice(),e.width=v[0],e.height=v[1];var i=e.getContext("2d");i.fillStyle="#000",i.fillRect(0,0,e.width,e.height),i.font=n,i.textAlign="center",i.textBaseline="middle",i.fillStyle="#fff";var l=t[0]/2,c=t[1]/2;for(u=0;u<a.length;u++)i.fillText(a[u],l,c),(l+=t[0])>v[0]-t[0]/2&&(l=t[0]/2,c+=t[1]);return e}},{"css-font/stringify":102}],193:[function(y,$,ee){"use strict";function p(e,n){n||(n={}),("string"==typeof e||Array.isArray(e))&&(n.family=e);var t=Array.isArray(n.family)?n.family.join(", "):n.family;if(!t)throw Error("`family` must be defined");var a=n.size||n.fontSize||n.em||48,u=(e=[n.style||n.fontStyle||"",n.weight||n.fontWeight||"",a].join(" ")+"px "+t,n.origin||"top");if(p.cache[t]&&a<=p.cache[t].em)return m(p.cache[t],u);var s=n.canvas||p.canvas,i=s.getContext("2d"),l={upper:void 0!==n.upper?n.upper:"H",lower:void 0!==n.lower?n.lower:"x",descent:void 0!==n.descent?n.descent:"p",ascent:void 0!==n.ascent?n.ascent:"h",tittle:void 0!==n.tittle?n.tittle:"i",overshoot:void 0!==n.overshoot?n.overshoot:"O"},c=Math.ceil(1.5*a);s.height=c,s.width=.5*c,i.font=e;var f={top:0};i.clearRect(0,0,c,c),i.textBaseline="top",i.fillStyle="black",i.fillText("H",0,0);var g=b(i.getImageData(0,0,c,c));i.clearRect(0,0,c,c),i.textBaseline="bottom",i.fillText("H",0,c);var h=b(i.getImageData(0,0,c,c));f.lineHeight=f.bottom=c-h+g,i.clearRect(0,0,c,c),i.textBaseline="alphabetic",i.fillText("H",0,c);var o=c-b(i.getImageData(0,0,c,c))-1+g;f.baseline=f.alphabetic=o,i.clearRect(0,0,c,c),i.textBaseline="middle",i.fillText("H",0,.5*c);var x=b(i.getImageData(0,0,c,c));f.median=f.middle=c-x-1+g-.5*c,i.clearRect(0,0,c,c),i.textBaseline="hanging",i.fillText("H",0,.5*c);var d=b(i.getImageData(0,0,c,c));f.hanging=c-d-1+g-.5*c,i.clearRect(0,0,c,c),i.textBaseline="ideographic",i.fillText("H",0,c);var w=b(i.getImageData(0,0,c,c));if(f.ideographic=c-w-1+g,l.upper&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(l.upper,0,0),f.upper=b(i.getImageData(0,0,c,c)),f.capHeight=f.baseline-f.upper),l.lower&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(l.lower,0,0),f.lower=b(i.getImageData(0,0,c,c)),f.xHeight=f.baseline-f.lower),l.tittle&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(l.tittle,0,0),f.tittle=b(i.getImageData(0,0,c,c))),l.ascent&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(l.ascent,0,0),f.ascent=b(i.getImageData(0,0,c,c))),l.descent&&(i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(l.descent,0,0),f.descent=v(i.getImageData(0,0,c,c))),l.overshoot){i.clearRect(0,0,c,c),i.textBaseline="top",i.fillText(l.overshoot,0,0);var _=v(i.getImageData(0,0,c,c));f.overshoot=_-o}for(var T in f)f[T]/=a;return f.em=a,p.cache[t]=f,m(f,u)}function m(e,n){var t={};for(var a in"string"==typeof n&&(n=e[n]),e)"em"!==a&&(t[a]=e[a]-n);return t}function b(e){for(var n=e.height,t=e.data,a=3;a<t.length;a+=4)if(0!==t[a])return Math.floor(.25*(a-3)/n)}function v(e){for(var n=e.height,t=e.data,a=t.length-1;a>0;a-=4)if(0!==t[a])return Math.floor(.25*(a-3)/n)}$.exports=p,p.canvas=document.createElement("canvas"),p.cache={}},{}],194:[function(y,$,ee){$.exports=function(p,m){if("string"!=typeof p)throw new TypeError("must specify type string");if(m=m||{},"undefined"==typeof document&&!m.canvas)return null;var b=m.canvas||document.createElement("canvas");"number"==typeof m.width&&(b.width=m.width),"number"==typeof m.height&&(b.height=m.height);var v,e=m;try{var n=[p];0===p.indexOf("webgl")&&n.push("experimental-"+p);for(var t=0;t<n.length;t++)if(v=b.getContext(n[t],e))return v}catch(a){v=null}return v||null}},{}],195:[function(y,$,ee){$.exports=function(p,m){var b=m[0],v=m[1],e=m[2],n=m[3],t=m[4],a=m[5],r=m[6],u=m[7],s=m[8],i=m[9],l=m[10],c=m[11],f=m[12],g=m[13],h=m[14],o=m[15];return p[0]=a*(l*o-c*h)-i*(r*o-u*h)+g*(r*c-u*l),p[1]=-(v*(l*o-c*h)-i*(e*o-n*h)+g*(e*c-n*l)),p[2]=v*(r*o-u*h)-a*(e*o-n*h)+g*(e*u-n*r),p[3]=-(v*(r*c-u*l)-a*(e*c-n*l)+i*(e*u-n*r)),p[4]=-(t*(l*o-c*h)-s*(r*o-u*h)+f*(r*c-u*l)),p[5]=b*(l*o-c*h)-s*(e*o-n*h)+f*(e*c-n*l),p[6]=-(b*(r*o-u*h)-t*(e*o-n*h)+f*(e*u-n*r)),p[7]=b*(r*c-u*l)-t*(e*c-n*l)+s*(e*u-n*r),p[8]=t*(i*o-c*g)-s*(a*o-u*g)+f*(a*c-u*i),p[9]=-(b*(i*o-c*g)-s*(v*o-n*g)+f*(v*c-n*i)),p[10]=b*(a*o-u*g)-t*(v*o-n*g)+f*(v*u-n*a),p[11]=-(b*(a*c-u*i)-t*(v*c-n*i)+s*(v*u-n*a)),p[12]=-(t*(i*h-l*g)-s*(a*h-r*g)+f*(a*l-r*i)),p[13]=b*(i*h-l*g)-s*(v*h-e*g)+f*(v*l-e*i),p[14]=-(b*(a*h-r*g)-t*(v*h-e*g)+f*(v*r-e*a)),p[15]=b*(a*l-r*i)-t*(v*l-e*i)+s*(v*r-e*a),p}},{}],196:[function(y,$,ee){$.exports=function(p){var m=new Float32Array(16);return m[0]=p[0],m[1]=p[1],m[2]=p[2],m[3]=p[3],m[4]=p[4],m[5]=p[5],m[6]=p[6],m[7]=p[7],m[8]=p[8],m[9]=p[9],m[10]=p[10],m[11]=p[11],m[12]=p[12],m[13]=p[13],m[14]=p[14],m[15]=p[15],m}},{}],197:[function(y,$,ee){$.exports=function(p,m){return p[0]=m[0],p[1]=m[1],p[2]=m[2],p[3]=m[3],p[4]=m[4],p[5]=m[5],p[6]=m[6],p[7]=m[7],p[8]=m[8],p[9]=m[9],p[10]=m[10],p[11]=m[11],p[12]=m[12],p[13]=m[13],p[14]=m[14],p[15]=m[15],p}},{}],198:[function(y,$,ee){$.exports=function(){var p=new Float32Array(16);return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],199:[function(y,$,ee){$.exports=function(p){var m=p[0],b=p[1],v=p[2],e=p[3],n=p[4],t=p[5],a=p[6],r=p[7],u=p[8],s=p[9],i=p[10],l=p[11],c=p[12],f=p[13],g=p[14],h=p[15];return(m*t-b*n)*(i*h-l*g)-(m*a-v*n)*(s*h-l*f)+(m*r-e*n)*(s*g-i*f)+(b*a-v*t)*(u*h-l*c)-(b*r-e*t)*(u*g-i*c)+(v*r-e*a)*(u*f-s*c)}},{}],200:[function(y,$,ee){$.exports=function(p,m){var b=m[0],v=m[1],e=m[2],n=m[3],t=b+b,a=v+v,r=e+e,u=b*t,s=v*t,i=v*a,l=e*t,c=e*a,f=e*r,g=n*t,h=n*a,o=n*r;return p[0]=1-i-f,p[1]=s+o,p[2]=l-h,p[3]=0,p[4]=s-o,p[5]=1-u-f,p[6]=c+g,p[7]=0,p[8]=l+h,p[9]=c-g,p[10]=1-u-i,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],201:[function(y,$,ee){$.exports=function(p,m,b){var v,e,n,t=b[0],a=b[1],r=b[2],u=Math.sqrt(t*t+a*a+r*r);return Math.abs(u)<1e-6?null:(t*=u=1/u,a*=u,r*=u,v=Math.sin(m),e=Math.cos(m),p[0]=t*t*(n=1-e)+e,p[1]=a*t*n+r*v,p[2]=r*t*n-a*v,p[3]=0,p[4]=t*a*n-r*v,p[5]=a*a*n+e,p[6]=r*a*n+t*v,p[7]=0,p[8]=t*r*n+a*v,p[9]=a*r*n-t*v,p[10]=r*r*n+e,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p)}},{}],202:[function(y,$,ee){$.exports=function(p,m,b){var v=m[0],e=m[1],n=m[2],t=m[3],a=v+v,r=e+e,u=n+n,s=v*a,i=v*r,l=v*u,c=e*r,f=e*u,g=n*u,h=t*a,o=t*r,x=t*u;return p[0]=1-(c+g),p[1]=i+x,p[2]=l-o,p[3]=0,p[4]=i-x,p[5]=1-(s+g),p[6]=f+h,p[7]=0,p[8]=l+o,p[9]=f-h,p[10]=1-(s+c),p[11]=0,p[12]=b[0],p[13]=b[1],p[14]=b[2],p[15]=1,p}},{}],203:[function(y,$,ee){$.exports=function(p,m){return p[0]=m[0],p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=m[1],p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=m[2],p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],204:[function(y,$,ee){$.exports=function(p,m){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=m[0],p[13]=m[1],p[14]=m[2],p[15]=1,p}},{}],205:[function(y,$,ee){$.exports=function(p,m){var b=Math.sin(m),v=Math.cos(m);return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=v,p[6]=b,p[7]=0,p[8]=0,p[9]=-b,p[10]=v,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],206:[function(y,$,ee){$.exports=function(p,m){var b=Math.sin(m),v=Math.cos(m);return p[0]=v,p[1]=0,p[2]=-b,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=b,p[9]=0,p[10]=v,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],207:[function(y,$,ee){$.exports=function(p,m){var b=Math.sin(m),v=Math.cos(m);return p[0]=v,p[1]=b,p[2]=0,p[3]=0,p[4]=-b,p[5]=v,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],208:[function(y,$,ee){$.exports=function(p,m,b,v,e,n,t){var a=1/(b-m),r=1/(e-v),u=1/(n-t);return p[0]=2*n*a,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=2*n*r,p[6]=0,p[7]=0,p[8]=(b+m)*a,p[9]=(e+v)*r,p[10]=(t+n)*u,p[11]=-1,p[12]=0,p[13]=0,p[14]=t*n*2*u,p[15]=0,p}},{}],209:[function(y,$,ee){$.exports=function(p){return p[0]=1,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=1,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=1,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=1,p}},{}],210:[function(y,$,ee){$.exports={create:y("./create"),clone:y("./clone"),copy:y("./copy"),identity:y("./identity"),transpose:y("./transpose"),invert:y("./invert"),adjoint:y("./adjoint"),determinant:y("./determinant"),multiply:y("./multiply"),translate:y("./translate"),scale:y("./scale"),rotate:y("./rotate"),rotateX:y("./rotateX"),rotateY:y("./rotateY"),rotateZ:y("./rotateZ"),fromRotation:y("./fromRotation"),fromRotationTranslation:y("./fromRotationTranslation"),fromScaling:y("./fromScaling"),fromTranslation:y("./fromTranslation"),fromXRotation:y("./fromXRotation"),fromYRotation:y("./fromYRotation"),fromZRotation:y("./fromZRotation"),fromQuat:y("./fromQuat"),frustum:y("./frustum"),perspective:y("./perspective"),perspectiveFromFieldOfView:y("./perspectiveFromFieldOfView"),ortho:y("./ortho"),lookAt:y("./lookAt"),str:y("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(y,$,ee){$.exports=function(p,m){var b=m[0],v=m[1],e=m[2],n=m[3],t=m[4],a=m[5],r=m[6],u=m[7],s=m[8],i=m[9],l=m[10],c=m[11],f=m[12],g=m[13],h=m[14],o=m[15],x=b*a-v*t,d=b*r-e*t,w=b*u-n*t,_=v*r-e*a,T=v*u-n*a,k=e*u-n*r,L=s*g-i*f,M=s*h-l*f,O=s*o-c*f,P=i*h-l*g,S=i*o-c*g,E=l*o-c*h,R=x*E-d*S+w*P+_*O-T*M+k*L;return R?(p[0]=(a*E-r*S+u*P)*(R=1/R),p[1]=(e*S-v*E-n*P)*R,p[2]=(g*k-h*T+o*_)*R,p[3]=(l*T-i*k-c*_)*R,p[4]=(r*O-t*E-u*M)*R,p[5]=(b*E-e*O+n*M)*R,p[6]=(h*w-f*k-o*d)*R,p[7]=(s*k-l*w+c*d)*R,p[8]=(t*S-a*O+u*L)*R,p[9]=(v*O-b*S-n*L)*R,p[10]=(f*T-g*w+o*x)*R,p[11]=(i*w-s*T-c*x)*R,p[12]=(a*M-t*P-r*L)*R,p[13]=(b*P-v*M+e*L)*R,p[14]=(g*d-f*_-h*x)*R,p[15]=(s*_-i*d+l*x)*R,p):null}},{}],212:[function(y,$,ee){var p=y("./identity");$.exports=function(m,b,v,e){var n,t,a,r,u,s,i,l,c,f,g=b[0],h=b[1],o=b[2],x=e[0],d=e[1],w=e[2],_=v[0],T=v[1],k=v[2];return Math.abs(g-_)<1e-6&&Math.abs(h-T)<1e-6&&Math.abs(o-k)<1e-6?p(m):(i=g-_,l=h-T,c=o-k,n=d*(c*=f=1/Math.sqrt(i*i+l*l+c*c))-w*(l*=f),t=w*(i*=f)-x*c,a=x*l-d*i,(f=Math.sqrt(n*n+t*t+a*a))?(n*=f=1/f,t*=f,a*=f):(n=0,t=0,a=0),r=l*a-c*t,u=c*n-i*a,s=i*t-l*n,(f=Math.sqrt(r*r+u*u+s*s))?(r*=f=1/f,u*=f,s*=f):(r=0,u=0,s=0),m[0]=n,m[1]=r,m[2]=i,m[3]=0,m[4]=t,m[5]=u,m[6]=l,m[7]=0,m[8]=a,m[9]=s,m[10]=c,m[11]=0,m[12]=-(n*g+t*h+a*o),m[13]=-(r*g+u*h+s*o),m[14]=-(i*g+l*h+c*o),m[15]=1,m)}},{"./identity":209}],213:[function(y,$,ee){$.exports=function(p,m,b){var v=m[0],e=m[1],n=m[2],t=m[3],a=m[4],r=m[5],u=m[6],s=m[7],i=m[8],l=m[9],c=m[10],f=m[11],g=m[12],h=m[13],o=m[14],x=m[15],d=b[0],w=b[1],_=b[2],T=b[3];return p[0]=d*v+w*a+_*i+T*g,p[1]=d*e+w*r+_*l+T*h,p[2]=d*n+w*u+_*c+T*o,p[3]=d*t+w*s+_*f+T*x,p[4]=(d=b[4])*v+(w=b[5])*a+(_=b[6])*i+(T=b[7])*g,p[5]=d*e+w*r+_*l+T*h,p[6]=d*n+w*u+_*c+T*o,p[7]=d*t+w*s+_*f+T*x,p[8]=(d=b[8])*v+(w=b[9])*a+(_=b[10])*i+(T=b[11])*g,p[9]=d*e+w*r+_*l+T*h,p[10]=d*n+w*u+_*c+T*o,p[11]=d*t+w*s+_*f+T*x,p[12]=(d=b[12])*v+(w=b[13])*a+(_=b[14])*i+(T=b[15])*g,p[13]=d*e+w*r+_*l+T*h,p[14]=d*n+w*u+_*c+T*o,p[15]=d*t+w*s+_*f+T*x,p}},{}],214:[function(y,$,ee){$.exports=function(p,m,b,v,e,n,t){var a=1/(m-b),r=1/(v-e),u=1/(n-t);return p[0]=-2*a,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=-2*r,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=2*u,p[11]=0,p[12]=(m+b)*a,p[13]=(e+v)*r,p[14]=(t+n)*u,p[15]=1,p}},{}],215:[function(y,$,ee){$.exports=function(p,m,b,v,e){var n=1/Math.tan(m/2),t=1/(v-e);return p[0]=n/b,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=n,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=(e+v)*t,p[11]=-1,p[12]=0,p[13]=0,p[14]=2*e*v*t,p[15]=0,p}},{}],216:[function(y,$,ee){$.exports=function(p,m,b,v){var e=Math.tan(m.upDegrees*Math.PI/180),n=Math.tan(m.downDegrees*Math.PI/180),t=Math.tan(m.leftDegrees*Math.PI/180),a=Math.tan(m.rightDegrees*Math.PI/180),r=2/(t+a),u=2/(e+n);return p[0]=r,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=u,p[6]=0,p[7]=0,p[8]=-(t-a)*r*.5,p[9]=(e-n)*u*.5,p[10]=v/(b-v),p[11]=-1,p[12]=0,p[13]=0,p[14]=v*b/(b-v),p[15]=0,p}},{}],217:[function(y,$,ee){$.exports=function(p,m,b,v){var e,n,t,a,r,u,s,i,l,c,f,g,h,o,x,d,w,_,T,k,L,M,O,P,S=v[0],E=v[1],R=v[2],B=Math.sqrt(S*S+E*E+R*R);return Math.abs(B)<1e-6?null:(S*=B=1/B,E*=B,R*=B,e=Math.sin(b),n=Math.cos(b),r=m[1],u=m[2],s=m[3],l=m[5],c=m[6],f=m[7],h=m[9],o=m[10],x=m[11],T=S*E*(t=1-n)-R*e,k=E*E*t+n,L=R*E*t+S*e,M=S*R*t+E*e,O=E*R*t-S*e,P=R*R*t+n,p[0]=(a=m[0])*(d=S*S*t+n)+(i=m[4])*(w=E*S*t+R*e)+(g=m[8])*(_=R*S*t-E*e),p[1]=r*d+l*w+h*_,p[2]=u*d+c*w+o*_,p[3]=s*d+f*w+x*_,p[4]=a*T+i*k+g*L,p[5]=r*T+l*k+h*L,p[6]=u*T+c*k+o*L,p[7]=s*T+f*k+x*L,p[8]=a*M+i*O+g*P,p[9]=r*M+l*O+h*P,p[10]=u*M+c*O+o*P,p[11]=s*M+f*O+x*P,m!==p&&(p[12]=m[12],p[13]=m[13],p[14]=m[14],p[15]=m[15]),p)}},{}],218:[function(y,$,ee){$.exports=function(p,m,b){var v=Math.sin(b),e=Math.cos(b),n=m[4],t=m[5],a=m[6],r=m[7],u=m[8],s=m[9],i=m[10],l=m[11];return m!==p&&(p[0]=m[0],p[1]=m[1],p[2]=m[2],p[3]=m[3],p[12]=m[12],p[13]=m[13],p[14]=m[14],p[15]=m[15]),p[4]=n*e+u*v,p[5]=t*e+s*v,p[6]=a*e+i*v,p[7]=r*e+l*v,p[8]=u*e-n*v,p[9]=s*e-t*v,p[10]=i*e-a*v,p[11]=l*e-r*v,p}},{}],219:[function(y,$,ee){$.exports=function(p,m,b){var v=Math.sin(b),e=Math.cos(b),n=m[0],t=m[1],a=m[2],r=m[3],u=m[8],s=m[9],i=m[10],l=m[11];return m!==p&&(p[4]=m[4],p[5]=m[5],p[6]=m[6],p[7]=m[7],p[12]=m[12],p[13]=m[13],p[14]=m[14],p[15]=m[15]),p[0]=n*e-u*v,p[1]=t*e-s*v,p[2]=a*e-i*v,p[3]=r*e-l*v,p[8]=n*v+u*e,p[9]=t*v+s*e,p[10]=a*v+i*e,p[11]=r*v+l*e,p}},{}],220:[function(y,$,ee){$.exports=function(p,m,b){var v=Math.sin(b),e=Math.cos(b),n=m[0],t=m[1],a=m[2],r=m[3],u=m[4],s=m[5],i=m[6],l=m[7];return m!==p&&(p[8]=m[8],p[9]=m[9],p[10]=m[10],p[11]=m[11],p[12]=m[12],p[13]=m[13],p[14]=m[14],p[15]=m[15]),p[0]=n*e+u*v,p[1]=t*e+s*v,p[2]=a*e+i*v,p[3]=r*e+l*v,p[4]=u*e-n*v,p[5]=s*e-t*v,p[6]=i*e-a*v,p[7]=l*e-r*v,p}},{}],221:[function(y,$,ee){$.exports=function(p,m,b){var v=b[0],e=b[1],n=b[2];return p[0]=m[0]*v,p[1]=m[1]*v,p[2]=m[2]*v,p[3]=m[3]*v,p[4]=m[4]*e,p[5]=m[5]*e,p[6]=m[6]*e,p[7]=m[7]*e,p[8]=m[8]*n,p[9]=m[9]*n,p[10]=m[10]*n,p[11]=m[11]*n,p[12]=m[12],p[13]=m[13],p[14]=m[14],p[15]=m[15],p}},{}],222:[function(y,$,ee){$.exports=function(p){return"mat4("+p[0]+", "+p[1]+", "+p[2]+", "+p[3]+", "+p[4]+", "+p[5]+", "+p[6]+", "+p[7]+", "+p[8]+", "+p[9]+", "+p[10]+", "+p[11]+", "+p[12]+", "+p[13]+", "+p[14]+", "+p[15]+")"}},{}],223:[function(y,$,ee){$.exports=function(p,m,b){var v,e,n,t,a,r,u,s,i,l,c,f,g=b[0],h=b[1],o=b[2];return m===p?(p[12]=m[0]*g+m[4]*h+m[8]*o+m[12],p[13]=m[1]*g+m[5]*h+m[9]*o+m[13],p[14]=m[2]*g+m[6]*h+m[10]*o+m[14],p[15]=m[3]*g+m[7]*h+m[11]*o+m[15]):(e=m[1],n=m[2],t=m[3],a=m[4],r=m[5],u=m[6],s=m[7],i=m[8],l=m[9],c=m[10],f=m[11],p[0]=v=m[0],p[1]=e,p[2]=n,p[3]=t,p[4]=a,p[5]=r,p[6]=u,p[7]=s,p[8]=i,p[9]=l,p[10]=c,p[11]=f,p[12]=v*g+a*h+i*o+m[12],p[13]=e*g+r*h+l*o+m[13],p[14]=n*g+u*h+c*o+m[14],p[15]=t*g+s*h+f*o+m[15]),p}},{}],224:[function(y,$,ee){$.exports=function(p,m){if(p===m){var b=m[1],v=m[2],e=m[3],n=m[6],t=m[7],a=m[11];p[1]=m[4],p[2]=m[8],p[3]=m[12],p[4]=b,p[6]=m[9],p[7]=m[13],p[8]=v,p[9]=n,p[11]=m[14],p[12]=e,p[13]=t,p[14]=a}else p[0]=m[0],p[1]=m[4],p[2]=m[8],p[3]=m[12],p[4]=m[1],p[5]=m[5],p[6]=m[9],p[7]=m[13],p[8]=m[2],p[9]=m[6],p[10]=m[10],p[11]=m[14],p[12]=m[3],p[13]=m[7],p[14]=m[11],p[15]=m[15];return p}},{}],225:[function(y,$,ee){"use strict";var p=y("css-font"),m=y("pick-by-alias"),b=y("regl"),v=y("gl-util/context"),e=y("es6-weak-map"),n=y("color-normalize"),t=y("font-atlas"),a=y("typedarray-pool"),r=y("parse-rect"),u=y("is-plain-obj"),s=y("parse-unit"),i=y("to-px"),l=y("detect-kerning"),c=y("object-assign"),f=y("font-measure"),g=y("flatten-vertex-data"),h=y("bit-twiddle").nextPow2,o=new e,x=!1;if(document.body){var d=document.body.appendChild(document.createElement("div"));d.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(d).fontStretch&&(x=!0),document.body.removeChild(d)}var w=function(_){var T;this.gl="function"==typeof(T=_)&&T._gl&&T.prop&&T.texture&&T.buffer?(_={regl:_}).regl._gl:v(_),this.shader=o.get(this.gl),this.regl=this.shader?this.shader.regl:_.regl||b({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),o.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(u(_)?_:{})};w.prototype.createShader=function(){var _=this.regl,T=_({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:_.prop("count"),offset:_.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:_.this("sizeBuffer")},width:{offset:0,stride:8,buffer:_.this("sizeBuffer")},char:_.this("charBuffer"),position:_.this("position")},uniforms:{atlasSize:function(k,L){return[L.atlas.width,L.atlas.height]},atlasDim:function(k,L){return[L.atlas.cols,L.atlas.rows]},atlas:function(k,L){return L.atlas.texture},charStep:function(k,L){return L.atlas.step},em:function(k,L){return L.atlas.em},color:_.prop("color"),opacity:_.prop("opacity"),viewport:_.this("viewportArray"),scale:_.this("scale"),align:_.prop("align"),baseline:_.prop("baseline"),translate:_.this("translate"),positionOffset:_.prop("positionOffset")},primitive:"points",viewport:_.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:_,draw:T,atlas:{}}},w.prototype.update=function(_){var T=this;if("string"==typeof _)_={text:_};else if(!_)return;null!=(_=m(_,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(_.opacity)?_.opacity.map(function(me){return parseFloat(me)}):parseFloat(_.opacity)),null!=_.viewport&&(this.viewport=r(_.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=_.kerning&&(this.kerning=_.kerning),null!=_.offset&&("number"==typeof _.offset&&(_.offset=[_.offset,0]),this.positionOffset=g(_.offset)),_.direction&&(this.direction=_.direction),_.range&&(this.range=_.range,this.scale=[1/(_.range[2]-_.range[0]),1/(_.range[3]-_.range[1])],this.translate=[-_.range[0],-_.range[1]]),_.scale&&(this.scale=_.scale),_.translate&&(this.translate=_.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||_.font||(_.font=w.baseFontSize+"px sans-serif");var k,L=!1,M=!1;if(_.font&&(Array.isArray(_.font)?_.font:[_.font]).forEach(function(me,Te){if("string"==typeof me)try{me=p.parse(me)}catch(Je){me=p.parse(w.baseFontSize+"px "+me)}else me=p.parse(p.stringify(me));var _e=p.stringify({size:w.baseFontSize,family:me.family,stretch:x?me.stretch:void 0,variant:me.variant,weight:me.weight,style:me.style}),Me=s(me.size),Ie=Math.round(Me[0]*i(Me[1]));if(Ie!==T.fontSize[Te]&&(M=!0,T.fontSize[Te]=Ie),!(T.font[Te]&&_e==T.font[Te].baseString||(L=!0,T.font[Te]=w.fonts[_e],T.font[Te]))){var ze=me.family.join(", "),Ve=[me.style];me.style!=me.variant&&Ve.push(me.variant),me.variant!=me.weight&&Ve.push(me.weight),x&&me.weight!=me.stretch&&Ve.push(me.stretch),T.font[Te]={baseString:_e,family:ze,weight:me.weight,stretch:me.stretch,style:me.style,variant:me.variant,width:{},kerning:{},metrics:f(ze,{origin:"top",fontSize:w.baseFontSize,fontStyle:Ve.join(" ")})},w.fonts[_e]=T.font[Te]}}),(L||M)&&this.font.forEach(function(me,Te){var _e=p.stringify({size:T.fontSize[Te],family:me.family,stretch:x?me.stretch:void 0,variant:me.variant,weight:me.weight,style:me.style});T.fontAtlas[Te]=T.shader.atlas[_e],T.fontAtlas[Te]||(T.shader.atlas[_e]=T.fontAtlas[Te]={fontString:_e,step:2*Math.ceil(T.fontSize[Te]*me.metrics.bottom*.5),em:T.fontSize[Te],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:T.regl.texture()}),null==_.text&&(_.text=T.text)}),"string"==typeof _.text&&_.position&&_.position.length>2){for(var O=Array(.5*_.position.length),P=0;P<O.length;P++)O[P]=_.text;_.text=O}if(null!=_.text||L){if(this.textOffsets=[0],Array.isArray(_.text)){this.count=_.text[0].length,this.counts=[this.count];for(var S=1;S<_.text.length;S++)this.textOffsets[S]=this.textOffsets[S-1]+_.text[S-1].length,this.count+=_.text[S].length,this.counts.push(_.text[S].length);this.text=_.text.join("")}else this.text=_.text,this.count=this.text.length,this.counts=[this.count];k=[],this.font.forEach(function(me,Te){w.atlasContext.font=me.baseString;for(var _e=T.fontAtlas[Te],Me=0;Me<T.text.length;Me++){var Ie=T.text.charAt(Me);if(null==_e.ids[Ie]&&(_e.ids[Ie]=_e.chars.length,_e.chars.push(Ie),k.push(Ie)),null==me.width[Ie]&&(me.width[Ie]=w.atlasContext.measureText(Ie).width/w.baseFontSize,T.kerning)){var ze=[];for(var Ve in me.width)ze.push(Ve+Ie,Ie+Ve);c(me.kerning,l(me.family,{pairs:ze}))}}})}if(_.position)if(_.position.length>2){for(var E=!_.position[0].length,R=a.mallocFloat(2*this.count),B=0,H=0;B<this.counts.length;B++){var V=this.counts[B];if(E)for(var Z=0;Z<V;Z++)R[H++]=_.position[2*B],R[H++]=_.position[2*B+1];else for(var W=0;W<V;W++)R[H++]=_.position[B][0],R[H++]=_.position[B][1]}this.position.call?this.position({type:"float",data:R}):this.position=this.regl.buffer({type:"float",data:R}),a.freeFloat(R)}else this.position.destroy&&this.position.destroy(),this.position={constant:_.position};if(_.text||L){var G=a.mallocUint8(this.count),X=a.mallocFloat(2*this.count);this.textWidth=[];for(var te=0,D=0;te<this.counts.length;te++){for(var N=this.counts[te],U=this.font[te]||this.font[0],Q=this.fontAtlas[te]||this.fontAtlas[0],j=0;j<N;j++){var J=this.text.charAt(D),K=this.text.charAt(D-1);if(G[D]=Q.ids[J],X[2*D]=U.width[J],j){var se=X[2*D-1]+.5*X[2*D-2]+.5*X[2*D];if(this.kerning){var oe=U.kerning[K+J];oe&&(se+=.001*oe)}X[2*D+1]=se}else X[2*D+1]=.5*X[2*D];D++}this.textWidth.push(X.length?.5*X[2*D-2]+X[2*D-1]:0)}_.align||(_.align=this.align),this.charBuffer({data:G,type:"uint8",usage:"stream"}),this.sizeBuffer({data:X,type:"float",usage:"stream"}),a.freeUint8(G),a.freeFloat(X),k.length&&this.font.forEach(function(me,Te){var _e=T.fontAtlas[Te],Me=_e.step,Ie=Math.floor(w.maxAtlasSize/Me),ze=Math.min(Ie,_e.chars.length),Ve=Math.ceil(_e.chars.length/ze),Je=h(ze*Me),De=h(Ve*Me);_e.width=Je,_e.height=De,_e.rows=Ve,_e.cols=ze,_e.em&&_e.texture({data:t({canvas:w.atlasCanvas,font:_e.fontString,chars:_e.chars,shape:[Je,De],step:[Me,Me]})})})}if(_.align&&(this.align=_.align,this.alignOffset=this.textWidth.map(function(me,Te){var _e=Array.isArray(T.align)?T.align.length>1?T.align[Te]:T.align[0]:T.align;if("number"==typeof _e)return _e;switch(_e){case"right":case"end":return-me;case"center":case"centre":case"middle":return.5*-me}return 0})),null==this.baseline&&null==_.baseline&&(_.baseline=0),null!=_.baseline&&(this.baseline=_.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(me,Te){var _e=(T.font[Te]||T.font[0]).metrics,Me=0;return-1*((Me+=.5*_e.bottom)+("number"==typeof me?me-_e.baseline:-_e[me]))})),null!=_.color)if(_.color||(_.color="transparent"),"string"!=typeof _.color&&isNaN(_.color)){var pe;if("number"==typeof _.color[0]&&_.color.length>this.counts.length){var ce=_.color.length;pe=a.mallocUint8(ce);for(var ge=(_.color.subarray||_.color.slice).bind(_.color),xe=0;xe<ce;xe+=4)pe.set(n(ge(xe,xe+4),"uint8"),xe)}else{var we=_.color.length;pe=a.mallocUint8(4*we);for(var be=0;be<we;be++)pe.set(n(_.color[be]||0,"uint8"),4*be)}this.color=pe}else this.color=n(_.color,"uint8");if(_.position||_.text||_.color||_.baseline||_.align||_.font||_.offset||_.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Se=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Se);for(var fe=0;fe<this.batch.length;fe++)this.batch[fe]={count:this.counts.length>1?this.counts[fe]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[fe]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*fe,4*fe+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[fe]:this.opacity,baseline:null!=this.baselineOffset[fe]?this.baselineOffset[fe]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[fe]?this.alignOffset[fe]:this.alignOffset[0]:0,atlas:this.fontAtlas[fe]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*fe,2*fe+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},w.prototype.destroy=function(){},w.prototype.kerning=!0,w.prototype.position={constant:new Float32Array(2)},w.prototype.translate=null,w.prototype.scale=null,w.prototype.font=null,w.prototype.text="",w.prototype.positionOffset=[0,0],w.prototype.opacity=1,w.prototype.color=new Uint8Array([0,0,0,255]),w.prototype.alignOffset=[0,0],w.maxAtlasSize=1024,w.atlasCanvas=document.createElement("canvas"),w.atlasContext=w.atlasCanvas.getContext("2d",{alpha:!1}),w.baseFontSize=64,w.fonts={},$.exports=w},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(y,$,ee){(function(p){(function(){"use strict";var m=y("pick-by-alias");function b(n){if(n.container)if(n.container==document.body)document.body.style.width||(n.canvas.width=n.width||n.pixelRatio*p.innerWidth),document.body.style.height||(n.canvas.height=n.height||n.pixelRatio*p.innerHeight);else{var t=n.container.getBoundingClientRect();n.canvas.width=n.width||t.right-t.left,n.canvas.height=n.height||t.bottom-t.top}}function v(n){return"function"==typeof n.getContext&&"width"in n&&"height"in n}function e(){var n=document.createElement("canvas");return n.style.position="absolute",n.style.top=0,n.style.left=0,n}$.exports=function(n){var t,r;if(n?"string"==typeof n&&(n={container:n}):n={},(n=v(n)||"string"==typeof(t=n).nodeName&&"function"==typeof t.appendChild&&"function"==typeof t.getBoundingClientRect?{container:n}:"function"==typeof(r=n).drawArrays||"function"==typeof r.drawElements?{gl:n}:m(n,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(n.pixelRatio=p.pixelRatio||1),n.gl)return n.gl;if(n.canvas&&(n.container=n.canvas.parentNode),n.container){if("string"==typeof n.container){var a=document.querySelector(n.container);if(!a)throw Error("Element "+n.container+" is not found");n.container=a}v(n.container)?(n.canvas=n.container,n.container=n.canvas.parentNode):n.canvas||(n.canvas=e(),n.container.appendChild(n.canvas),b(n))}else if(!n.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");n.container=document.body||document.documentElement,n.canvas=e(),n.container.appendChild(n.canvas),b(n)}return n.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(r){try{n.gl=n.canvas.getContext(r,n.attrs)}catch(u){}return n.gl}),n.gl}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pick-by-alias":253}],227:[function(y,$,ee){$.exports=function(p){"string"==typeof p&&(p=[p]);for(var m=[].slice.call(arguments,1),b=[],v=0;v<p.length-1;v++)b.push(p[v],m[v]||"");return b.push(p[v]),b.join("")}},{}],228:[function(y,$,ee){(function(p){(function(){"use strict";var m,b=y("is-browser");m="function"==typeof p.matchMedia?!p.matchMedia("(hover: none)").matches:b,$.exports=m}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":232}],229:[function(y,$,ee){"use strict";var p=y("is-browser");$.exports=p&&function(){var m=!1;try{var b=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,b),window.removeEventListener("test",null,b)}catch(v){m=!1}return m}()},{"is-browser":232}],230:[function(y,$,ee){ee.read=function(p,m,b,v,e){var n,t,a=8*e-v-1,r=(1<<a)-1,u=r>>1,s=-7,i=b?e-1:0,l=b?-1:1,c=p[m+i];for(i+=l,n=c&(1<<-s)-1,c>>=-s,s+=a;s>0;n=256*n+p[m+i],i+=l,s-=8);for(t=n&(1<<-s)-1,n>>=-s,s+=v;s>0;t=256*t+p[m+i],i+=l,s-=8);if(0===n)n=1-u;else{if(n===r)return t?NaN:1/0*(c?-1:1);t+=Math.pow(2,v),n-=u}return(c?-1:1)*t*Math.pow(2,n-v)},ee.write=function(p,m,b,v,e,n){var t,a,r,u=8*n-e-1,s=(1<<u)-1,i=s>>1,l=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,c=v?0:n-1,f=v?1:-1,g=m<0||0===m&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(a=isNaN(m)?1:0,t=s):(t=Math.floor(Math.log(m)/Math.LN2),m*(r=Math.pow(2,-t))<1&&(t--,r*=2),(m+=t+i>=1?l/r:l*Math.pow(2,1-i))*r>=2&&(t++,r/=2),t+i>=s?(a=0,t=s):t+i>=1?(a=(m*r-1)*Math.pow(2,e),t+=i):(a=m*Math.pow(2,i-1)*Math.pow(2,e),t=0));e>=8;p[b+c]=255&a,c+=f,a/=256,e-=8);for(t=t<<e|a,u+=e;u>0;p[b+c]=255&t,c+=f,t/=256,u-=8);p[b+c-f]|=128*g}},{}],231:[function(y,$,ee){$.exports="function"==typeof Object.create?function(p,m){m&&(p.super_=m,p.prototype=Object.create(m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}))}:function(p,m){if(m){p.super_=m;var b=function(){};b.prototype=m.prototype,p.prototype=new b,p.prototype.constructor=p}}},{}],232:[function(y,$,ee){$.exports=!0},{}],233:[function(y,$,ee){"use strict";$.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(y,$,ee){"use strict";$.exports=b,$.exports.isMobile=b,$.exports.default=b;var p=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function b(v){v||(v={});var e=v.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var n=v.tablet?m.test(e):p.test(e);return!n&&v.tablet&&v.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(n=!0),n}},{}],235:[function(y,$,ee){"use strict";$.exports=function(p){var m=typeof p;return null!==p&&("object"===m||"function"===m)}},{}],236:[function(y,$,ee){"use strict";var p=Object.prototype.toString;$.exports=function(m){var b;return"[object Object]"===p.call(m)&&(null===(b=Object.getPrototypeOf(m))||b===Object.getPrototypeOf({}))}},{}],237:[function(y,$,ee){"use strict";$.exports=function(p){for(var m,b=p.length,v=0;v<b;v++)if(((m=p.charCodeAt(v))<9||m>13)&&32!==m&&133!==m&&160!==m&&5760!==m&&6158!==m&&(m<8192||m>8205)&&8232!==m&&8233!==m&&8239!==m&&8287!==m&&8288!==m&&12288!==m&&65279!==m)return!1;return!0}},{}],238:[function(y,$,ee){"use strict";$.exports=function(p){return"string"==typeof p&&(p=p.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(p)&&/[\dz]$/i.test(p)&&p.length>4))}},{}],239:[function(y,$,ee){var p,m;p=this,m=function(){"use strict";var p,m,b;function v(e,n){if(p)if(m){var t="var sharedChunk = {}; ("+p+")(sharedChunk); ("+m+")(sharedChunk);",a={};p(a),(b=n(a)).workerUrl=window.URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}else m=n;else p=n}return v(0,function(e){function n(A,I){return A(I={exports:{}},I.exports),I.exports}var t=a;function a(A,I,Y,ie){this.cx=3*A,this.bx=3*(Y-A)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*I,this.by=3*(ie-I)-this.cy,this.ay=1-this.cy-this.by,this.p1x=A,this.p1y=ie,this.p2x=Y,this.p2y=ie}a.prototype.sampleCurveX=function(A){return((this.ax*A+this.bx)*A+this.cx)*A},a.prototype.sampleCurveY=function(A){return((this.ay*A+this.by)*A+this.cy)*A},a.prototype.sampleCurveDerivativeX=function(A){return(3*this.ax*A+2*this.bx)*A+this.cx},a.prototype.solveCurveX=function(A,I){var Y,ie,he,ve,Ee;for(void 0===I&&(I=1e-6),he=A,Ee=0;Ee<8;Ee++){if(ve=this.sampleCurveX(he)-A,Math.abs(ve)<I)return he;var Ne=this.sampleCurveDerivativeX(he);if(Math.abs(Ne)<1e-6)break;he-=ve/Ne}if((he=A)<(Y=0))return Y;if(he>(ie=1))return ie;for(;Y<ie;){if(ve=this.sampleCurveX(he),Math.abs(ve-A)<I)return he;A>ve?Y=he:ie=he,he=.5*(ie-Y)+Y}return he},a.prototype.solve=function(A,I){return this.sampleCurveY(this.solveCurveX(A,I))};var r=u;function u(A,I){this.x=A,this.y=I}function s(A,I,Y,ie){var he=new t(A,I,Y,ie);return function(ve){return he.solve(ve)}}u.prototype={clone:function(){return new u(this.x,this.y)},add:function(A){return this.clone()._add(A)},sub:function(A){return this.clone()._sub(A)},multByPoint:function(A){return this.clone()._multByPoint(A)},divByPoint:function(A){return this.clone()._divByPoint(A)},mult:function(A){return this.clone()._mult(A)},div:function(A){return this.clone()._div(A)},rotate:function(A){return this.clone()._rotate(A)},rotateAround:function(A,I){return this.clone()._rotateAround(A,I)},matMult:function(A){return this.clone()._matMult(A)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(A){return this.x===A.x&&this.y===A.y},dist:function(A){return Math.sqrt(this.distSqr(A))},distSqr:function(A){var I=A.x-this.x,Y=A.y-this.y;return I*I+Y*Y},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(A){return Math.atan2(this.y-A.y,this.x-A.x)},angleWith:function(A){return this.angleWithSep(A.x,A.y)},angleWithSep:function(A,I){return Math.atan2(this.x*I-this.y*A,this.x*A+this.y*I)},_matMult:function(A){var Y=A[2]*this.x+A[3]*this.y;return this.x=A[0]*this.x+A[1]*this.y,this.y=Y,this},_add:function(A){return this.x+=A.x,this.y+=A.y,this},_sub:function(A){return this.x-=A.x,this.y-=A.y,this},_mult:function(A){return this.x*=A,this.y*=A,this},_div:function(A){return this.x/=A,this.y/=A,this},_multByPoint:function(A){return this.x*=A.x,this.y*=A.y,this},_divByPoint:function(A){return this.x/=A.x,this.y/=A.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var A=this.y;return this.y=this.x,this.x=-A,this},_rotate:function(A){var I=Math.cos(A),Y=Math.sin(A),he=Y*this.x+I*this.y;return this.x=I*this.x-Y*this.y,this.y=he,this},_rotateAround:function(A,I){var Y=Math.cos(A),ie=Math.sin(A),ve=I.y+ie*(this.x-I.x)+Y*(this.y-I.y);return this.x=I.x+Y*(this.x-I.x)-ie*(this.y-I.y),this.y=ve,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(A){return A instanceof u?A:Array.isArray(A)?new u(A[0],A[1]):A};var i=s(.25,.1,.25,1);function l(A,I,Y){return Math.min(Y,Math.max(I,A))}function c(A,I,Y){var ie=Y-I,he=((A-I)%ie+ie)%ie+I;return he===I?Y:he}function f(A){for(var I=[],Y=arguments.length-1;Y-- >0;)I[Y]=arguments[Y+1];for(var ie=0,he=I;ie<he.length;ie+=1){var ve=he[ie];for(var Ee in ve)A[Ee]=ve[Ee]}return A}var g=1;function h(){return g++}function o(){return function A(I){return I?(I^16*Math.random()>>I/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,A)}()}function x(A){return!!A&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(A)}function d(A,I){A.forEach(function(Y){I[Y]&&(I[Y]=I[Y].bind(I))})}function w(A,I){return-1!==A.indexOf(I,A.length-I.length)}function _(A,I,Y){var ie={};for(var he in A)ie[he]=I.call(Y||this,A[he],he,A);return ie}function T(A,I,Y){var ie={};for(var he in A)I.call(Y||this,A[he],he,A)&&(ie[he]=A[he]);return ie}function k(A){return Array.isArray(A)?A.map(k):"object"==typeof A&&A?_(A,k):A}var L={};function M(A){L[A]||("undefined"!=typeof console&&console.warn(A),L[A]=!0)}function O(A,I,Y){return(Y.y-A.y)*(I.x-A.x)>(I.y-A.y)*(Y.x-A.x)}function P(A){for(var I=0,Y=0,ie=A.length,he=ie-1,ve=void 0,Ee=void 0;Y<ie;he=Y++)I+=((Ee=A[he]).x-(ve=A[Y]).x)*(ve.y+Ee.y);return I}function S(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function E(A){var I={};if(A.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ie,he,ve,Ee){var Ne=ve||Ee;return I[he]=!Ne||Ne.toLowerCase(),""}),I["max-age"]){var Y=parseInt(I["max-age"],10);isNaN(Y)?delete I["max-age"]:I["max-age"]=Y}return I}var R=null;function B(A){if(null==R){var I=A.navigator?A.navigator.userAgent:null;R=!!A.safari||!(!I||!(/\b(iPad|iPhone|iPod)\b/.test(I)||I.match("Safari")&&!I.match("Chrome")))}return R}function H(A){try{var I=self[A];return I.setItem("_mapbox_test_",1),I.removeItem("_mapbox_test_"),!0}catch(Y){return!1}}var V,Z,W,G,X=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),te=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,D=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,N={now:X,frame:function(A){var I=te(A);return{cancel:function(){return D(I)}}},getImageData:function(A,I){void 0===I&&(I=0);var Y=self.document.createElement("canvas"),ie=Y.getContext("2d");if(!ie)throw new Error("failed to create canvas 2d context");return Y.width=A.width,Y.height=A.height,ie.drawImage(A,0,0,A.width,A.height),ie.getImageData(-I,-I,A.width+2*I,A.height+2*I)},resolveURL:function(A){return V||(V=self.document.createElement("a")),V.href=A,V.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==Z&&(Z=self.matchMedia("(prefers-reduced-motion: reduce)")),Z.matches)}},U={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Q={supported:!1,testSupport:function(A){j||!G||(J?K(A):W=A)}},j=!1,J=!1;function K(A){var I=A.createTexture();A.bindTexture(A.TEXTURE_2D,I);try{if(A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,G),A.isContextLost())return;Q.supported=!0}catch(Y){}A.deleteTexture(I),j=!0}self.document&&((G=self.document.createElement("img")).onload=function(){W&&K(W),W=null,J=!0},G.onerror=function(){j=!0,W=null},G.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var re="01",ne=function(A,I){this._transformRequestFn=A,this._customAccessToken=I,this._createSkuToken()};function se(A){return 0===A.indexOf("mapbox:")}ne.prototype._createSkuToken=function(){var A=function(){for(var I="",Y=0;Y<10;Y++)I+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",re,I].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=A.token,this._skuTokenExpiresAt=A.tokenExpiresAt},ne.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ne.prototype.transformRequest=function(A,I){return this._transformRequestFn&&this._transformRequestFn(A,I)||{url:A}},ne.prototype.normalizeStyleURL=function(A,I){if(!se(A))return A;var Y=ge(A);return Y.path="/styles/v1"+Y.path,this._makeAPIURL(Y,this._customAccessToken||I)},ne.prototype.normalizeGlyphsURL=function(A,I){if(!se(A))return A;var Y=ge(A);return Y.path="/fonts/v1"+Y.path,this._makeAPIURL(Y,this._customAccessToken||I)},ne.prototype.normalizeSourceURL=function(A,I){if(!se(A))return A;var Y=ge(A);return Y.path="/v4/"+Y.authority+".json",Y.params.push("secure"),this._makeAPIURL(Y,this._customAccessToken||I)},ne.prototype.normalizeSpriteURL=function(A,I,Y,ie){var he=ge(A);return se(A)?(he.path="/styles/v1"+he.path+"/sprite"+I+Y,this._makeAPIURL(he,this._customAccessToken||ie)):(he.path+=""+I+Y,xe(he))},ne.prototype.normalizeTileURL=function(A,I){if(this._isSkuTokenExpired()&&this._createSkuToken(),A&&!se(A))return A;var Y=ge(A);Y.path=Y.path.replace(/(\.(png|jpg)\d*)(?=$)/,(N.devicePixelRatio>=2||512===I?"@2x":"")+(Q.supported?".webp":"$1")),Y.path=Y.path.replace(/^.+\/v4\//,"/"),Y.path="/v4"+Y.path;var ve=this._customAccessToken||function(Ee){for(var Ne=0,We=Ee;Ne<We.length;Ne+=1){var ct=We[Ne].match(/^access_token=(.*)$/);if(ct)return ct[1]}return null}(Y.params)||U.ACCESS_TOKEN;return U.REQUIRE_ACCESS_TOKEN&&ve&&this._skuToken&&Y.params.push("sku="+this._skuToken),this._makeAPIURL(Y,ve)},ne.prototype.canonicalizeTileURL=function(A,I){var Y=ge(A);if(!Y.path.match(/(^\/v4\/)/)||!Y.path.match(/\.[\w]+$/))return A;var ie="mapbox://tiles/";ie+=Y.path.replace("/v4/","");var he=Y.params;return I&&(he=he.filter(function(ve){return!ve.match(/^access_token=/)})),he.length&&(ie+="?"+he.join("&")),ie},ne.prototype.canonicalizeTileset=function(A,I){for(var Y=!!I&&se(I),ie=[],he=0,ve=A.tiles||[];he<ve.length;he+=1){var Ee=ve[he];pe(Ee)?ie.push(this.canonicalizeTileURL(Ee,Y)):ie.push(Ee)}return ie},ne.prototype._makeAPIURL=function(A,I){var Y="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ie=ge(U.API_URL);if(A.protocol=ie.protocol,A.authority=ie.authority,"/"!==ie.path&&(A.path=""+ie.path+A.path),!U.REQUIRE_ACCESS_TOKEN)return xe(A);if(!(I=I||U.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Y);if("s"===I[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Y);return A.params=A.params.filter(function(he){return-1===he.indexOf("access_token")}),A.params.push("access_token="+I),xe(A)};var oe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function pe(A){return oe.test(A)}var ce=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ge(A){var I=A.match(ce);if(!I)throw new Error("Unable to parse URL object");return{protocol:I[1],authority:I[2],path:I[3]||"/",params:I[4]?I[4].split("&"):[]}}function xe(A){var I=A.params.length?"?"+A.params.join("&"):"";return A.protocol+"://"+A.authority+A.path+I}function we(A){if(!A)return null;var Y=A.split(".");if(!Y||3!==Y.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(Y[1]).split("").map(function(ie){return"%"+("00"+ie.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(ie){return null}}var be=function(A){this.type=A,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};be.prototype.getStorageKey=function(A){var ie,Y=we(U.ACCESS_TOKEN);return ie=Y&&Y.u?self.btoa(encodeURIComponent(Y.u).replace(/%([0-9A-F]{2})/g,function(he,ve){return String.fromCharCode(Number("0x"+ve))})):U.ACCESS_TOKEN||"",A?"mapbox.eventData."+A+":"+ie:"mapbox.eventData:"+ie},be.prototype.fetchEventData=function(){var A=H("localStorage"),I=this.getStorageKey(),Y=this.getStorageKey("uuid");if(A)try{var ie=self.localStorage.getItem(I);ie&&(this.eventData=JSON.parse(ie));var he=self.localStorage.getItem(Y);he&&(this.anonId=he)}catch(ve){M("Unable to read from LocalStorage")}},be.prototype.saveEventData=function(){var A=H("localStorage"),I=this.getStorageKey(),Y=this.getStorageKey("uuid");if(A)try{self.localStorage.setItem(Y,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(I,JSON.stringify(this.eventData))}catch(ie){M("Unable to write to LocalStorage")}},be.prototype.processRequests=function(A){},be.prototype.postEvent=function(A,I,Y,ie){var he=this;if(U.EVENTS_URL){var ve=ge(U.EVENTS_URL);ve.params.push("access_token="+(ie||U.ACCESS_TOKEN||""));var Ee={event:this.type,created:new Date(A).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:re,userId:this.anonId},Ne=I?f(Ee,I):Ee,We={url:xe(ve),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Ne])};this.pendingRequest=Rt(We,function(ct){he.pendingRequest=null,Y(ct),he.saveEventData(),he.processRequests(ie)})}},be.prototype.queueRequest=function(A,I){this.queue.push(A),this.processRequests(I)};var Se,fe,me=function(A){function I(){A.call(this,"map.load"),this.success={},this.skuToken=""}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.postMapLoadEvent=function(Y,ie,he,ve){this.skuToken=he,(U.EVENTS_URL&&ve||U.ACCESS_TOKEN&&Array.isArray(Y)&&Y.some(function(Ee){return se(Ee)||pe(Ee)}))&&this.queueRequest({id:ie,timestamp:Date.now()},ve)},I.prototype.processRequests=function(Y){var ie=this;if(!this.pendingRequest&&0!==this.queue.length){var he=this.queue.shift(),ve=he.id,Ee=he.timestamp;ve&&this.success[ve]||(this.anonId||this.fetchEventData(),x(this.anonId)||(this.anonId=o()),this.postEvent(Ee,{skuToken:this.skuToken},function(Ne){Ne||ve&&(ie.success[ve]=!0)},Y))}},I}(be),Te=new(function(A){function I(Y){A.call(this,"appUserTurnstile"),this._customAccessToken=Y}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.postTurnstileEvent=function(Y,ie){U.EVENTS_URL&&U.ACCESS_TOKEN&&Array.isArray(Y)&&Y.some(function(he){return se(he)||pe(he)})&&this.queueRequest(Date.now(),ie)},I.prototype.processRequests=function(Y){var ie=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var he=we(U.ACCESS_TOKEN),ve=he?he.u:U.ACCESS_TOKEN,Ee=ve!==this.eventData.tokenU;x(this.anonId)||(this.anonId=o(),Ee=!0);var Ne=this.queue.shift();if(this.eventData.lastSuccess){var We=new Date(this.eventData.lastSuccess),ct=new Date(Ne),dt=(Ne-this.eventData.lastSuccess)/864e5;Ee=Ee||dt>=1||dt<-1||We.getDate()!==ct.getDate()}else Ee=!0;if(!Ee)return this.processRequests();this.postEvent(Ne,{"enabled.telemetry":!1},function(Bt){Bt||(ie.eventData.lastSuccess=Ne,ie.eventData.tokenU=ve)},Y)}},I}(be)),_e=Te.postTurnstileEvent.bind(Te),Me=new me,Ie=Me.postMapLoadEvent.bind(Me),ze=500,Ve=50;function Je(){self.caches&&!Se&&(Se=self.caches.open("mapbox-tiles"))}function Be(A){var I=A.indexOf("?");return I<0?A:A.slice(0,I)}var Ye,tt=1/0;function st(){return null==Ye&&(Ye=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),Ye}var vt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(vt);var Pt=function(A){function I(Y,ie,he){401===ie&&pe(he)&&(Y+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),A.call(this,Y),this.status=ie,this.url=he,this.name=this.constructor.name,this.message=Y}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},I}(Error),Mt=S()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};var Yt,Fe,et=function(A,I){if(!(/^file:/.test(Y=A.url)||/^file:/.test(Mt())&&!/^\w+:/.test(Y))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(A,I){var Y,ie=new self.AbortController,he=new self.Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,referrer:Mt(),signal:ie.signal}),ve=!1,Ee=!1,Ne=(Y=he.url).indexOf("sku=")>0&&pe(Y);"json"===A.type&&he.headers.set("Accept","application/json");var We=function(dt,Bt,Xt){if(!Ee){if(dt&&"SecurityError"!==dt.message&&M(dt),Bt&&Xt)return ct(Bt);var qt=Date.now();self.fetch(he).then(function(rr){if(rr.ok){var pr=Ne?rr.clone():null;return ct(rr,pr,qt)}return I(new Pt(rr.statusText,rr.status,A.url))}).catch(function(rr){20!==rr.code&&I(new Error(rr.message))})}},ct=function(dt,Bt,Xt){("arrayBuffer"===A.type?dt.arrayBuffer():"json"===A.type?dt.json():dt.text()).then(function(qt){Ee||(Bt&&Xt&&function(A,I,Y){if(Je(),Se){var ie={status:I.status,statusText:I.statusText,headers:new self.Headers};I.headers.forEach(function(ve,Ee){return ie.headers.set(Ee,ve)});var he=E(I.headers.get("Cache-Control")||"");he["no-store"]||(he["max-age"]&&ie.headers.set("Expires",new Date(Y+1e3*he["max-age"]).toUTCString()),new Date(ie.headers.get("Expires")).getTime()-Y<42e4||function(ve,Ee){if(void 0===fe)try{new Response(new ReadableStream),fe=!0}catch(Ne){fe=!1}fe?Ee(ve.body):ve.blob().then(Ee)}(I,function(ve){var Ee=new self.Response(ve,ie);Je(),Se&&Se.then(function(Ne){return Ne.put(Be(A.url),Ee)}).catch(function(Ne){return M(Ne.message)})}))}}(he,Bt,Xt),ve=!0,I(null,qt,dt.headers.get("Cache-Control"),dt.headers.get("Expires")))}).catch(function(qt){Ee||I(new Error(qt.message))})};return Ne?function(A,I){if(Je(),!Se)return I(null);var Y=Be(A.url);Se.then(function(ie){ie.match(Y).then(function(he){var ve=function(Ee){if(!Ee)return!1;var Ne=new Date(Ee.headers.get("Expires")||0),We=E(Ee.headers.get("Cache-Control")||"");return Ne>Date.now()&&!We["no-cache"]}(he);ie.delete(Y),ve&&ie.put(Y,he.clone()),I(null,he,ve)}).catch(I)}).catch(I)}(he,We):We(null,null),{cancel:function(){Ee=!0,ve||ie.abort()}}}(A,I);if(S()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",A,I,void 0,!0)}var Y;return function(ie,he){var ve=new self.XMLHttpRequest;for(var Ee in ve.open(ie.method||"GET",ie.url,!0),"arrayBuffer"===ie.type&&(ve.responseType="arraybuffer"),ie.headers)ve.setRequestHeader(Ee,ie.headers[Ee]);return"json"===ie.type&&(ve.responseType="text",ve.setRequestHeader("Accept","application/json")),ve.withCredentials="include"===ie.credentials,ve.onerror=function(){he(new Error(ve.statusText))},ve.onload=function(){if((ve.status>=200&&ve.status<300||0===ve.status)&&null!==ve.response){var Ne=ve.response;if("json"===ie.type)try{Ne=JSON.parse(ve.response)}catch(We){return he(We)}he(null,Ne,ve.getResponseHeader("Cache-Control"),ve.getResponseHeader("Expires"))}else he(new Pt(ve.statusText,ve.status,ie.url))},ve.send(ie.body),{cancel:function(){return ve.abort()}}}(A,I)},bt=function(A,I){return et(f(A,{type:"arrayBuffer"}),I)},Rt=function(A,I){return et(f(A,{method:"POST"}),I)};Yt=[],Fe=0;var He=function(A,I){if(Q.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),Fe>=U.MAX_PARALLEL_IMAGE_REQUESTS){var Y={requestParameters:A,callback:I,cancelled:!1,cancel:function(){this.cancelled=!0}};return Yt.push(Y),Y}Fe++;var ie=!1,he=function(){if(!ie)for(ie=!0,Fe--;Yt.length&&Fe<U.MAX_PARALLEL_IMAGE_REQUESTS;){var Ee=Yt.shift();Ee.cancelled||(Ee.cancel=He(Ee.requestParameters,Ee.callback).cancel)}},ve=bt(A,function(Ee,Ne,We,ct){var Bt,Xt;he(),Ee?I(Ee):Ne&&(st()?(Bt=I,Xt=new self.Blob([new Uint8Array(Ne)],{type:"image/png"}),self.createImageBitmap(Xt).then(function(qt){Bt(null,qt)}).catch(function(qt){Bt(new Error("Could not load image because of "+qt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(dt,Bt,Xt,qt){var rr=new self.Image,pr=self.URL;rr.onload=function(){Bt(null,rr),pr.revokeObjectURL(rr.src)},rr.onerror=function(){return Bt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Sr=new self.Blob([new Uint8Array(dt)],{type:"image/png"});rr.cacheControl=Xt,rr.expires=qt,rr.src=dt.byteLength?pr.createObjectURL(Sr):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(Ne,I,We,ct))});return{cancel:function(){ve.cancel(),he()}}};function Oe(A,I,Y){Y[A]&&-1!==Y[A].indexOf(I)||(Y[A]=Y[A]||[],Y[A].push(I))}function $e(A,I,Y){if(Y&&Y[A]){var ie=Y[A].indexOf(I);-1!==ie&&Y[A].splice(ie,1)}}var ke=function(A,I){void 0===I&&(I={}),f(this,I),this.type=A},Le=function(A){function I(Y,ie){void 0===ie&&(ie={}),A.call(this,"error",f({error:Y},ie))}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I}(ke),Pe=function(){};Pe.prototype.on=function(A,I){return this._listeners=this._listeners||{},Oe(A,I,this._listeners),this},Pe.prototype.off=function(A,I){return $e(A,I,this._listeners),$e(A,I,this._oneTimeListeners),this},Pe.prototype.once=function(A,I){return this._oneTimeListeners=this._oneTimeListeners||{},Oe(A,I,this._oneTimeListeners),this},Pe.prototype.fire=function(A,I){"string"==typeof A&&(A=new ke(A,I||{}));var Y=A.type;if(this.listens(Y)){A.target=this;for(var ie=0,he=this._listeners&&this._listeners[Y]?this._listeners[Y].slice():[];ie<he.length;ie+=1)he[ie].call(this,A);for(var ve=0,Ee=this._oneTimeListeners&&this._oneTimeListeners[Y]?this._oneTimeListeners[Y].slice():[];ve<Ee.length;ve+=1){var Ne=Ee[ve];$e(Y,Ne,this._oneTimeListeners),Ne.call(this,A)}var We=this._eventedParent;We&&(f(A,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),We.fire(A))}else A instanceof Le&&console.error(A.error);return this},Pe.prototype.listens=function(A){return this._listeners&&this._listeners[A]&&this._listeners[A].length>0||this._oneTimeListeners&&this._oneTimeListeners[A]&&this._oneTimeListeners[A].length>0||this._eventedParent&&this._eventedParent.listens(A)},Pe.prototype.setEventedParent=function(A,I){return this._eventedParent=A,this._eventedParentData=I,this};var Ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Xe=function(A,I,Y,ie){this.message=(A?A+": ":"")+Y,ie&&(this.identifier=ie),null!=I&&I.__line__&&(this.line=I.__line__)};function at(A){var Y=A.value;return Y?[new Xe(A.key,Y,"constants have been deprecated as of v8")]:[]}function pt(A){for(var I=[],Y=arguments.length-1;Y-- >0;)I[Y]=arguments[Y+1];for(var ie=0,he=I;ie<he.length;ie+=1){var ve=he[ie];for(var Ee in ve)A[Ee]=ve[Ee]}return A}function ut(A){return A instanceof Number||A instanceof String||A instanceof Boolean?A.valueOf():A}function St(A){if(Array.isArray(A))return A.map(St);if(A instanceof Object&&!(A instanceof Number||A instanceof String||A instanceof Boolean)){var I={};for(var Y in A)I[Y]=St(A[Y]);return I}return ut(A)}var ot=function(A){function I(Y,ie){A.call(this,ie),this.message=ie,this.key=Y}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I}(Error),Et=function(A,I){void 0===I&&(I=[]),this.parent=A,this.bindings={};for(var Y=0,ie=I;Y<ie.length;Y+=1){var he=ie[Y];this.bindings[he[0]]=he[1]}};Et.prototype.concat=function(A){return new Et(this,A)},Et.prototype.get=function(A){if(this.bindings[A])return this.bindings[A];if(this.parent)return this.parent.get(A);throw new Error(A+" not found in scope.")},Et.prototype.has=function(A){return!!this.bindings[A]||!!this.parent&&this.parent.has(A)};var Lt={kind:"null"},Qe={kind:"number"},mt={kind:"string"},It={kind:"boolean"},jt={kind:"color"},Zt={kind:"object"},Re={kind:"value"},lt={kind:"collator"},_t={kind:"formatted"},Dt={kind:"resolvedImage"};function Vt(A,I){return{kind:"array",itemType:A,N:I}}function nr(A){if("array"===A.kind){var I=nr(A.itemType);return"number"==typeof A.N?"array<"+I+", "+A.N+">":"value"===A.itemType.kind?"array":"array<"+I+">"}return A.kind}var Gt=[Lt,Qe,mt,It,jt,_t,Zt,Vt(Re),Dt];function Kt(A,I){if("error"===I.kind)return null;if("array"===A.kind){if("array"===I.kind&&(0===I.N&&"value"===I.itemType.kind||!Kt(A.itemType,I.itemType))&&("number"!=typeof A.N||A.N===I.N))return null}else{if(A.kind===I.kind)return null;if("value"===A.kind)for(var Y=0,ie=Gt;Y<ie.length;Y+=1)if(!Kt(ie[Y],I))return null}return"Expected "+nr(A)+" but found "+nr(I)+" instead."}function ir(A,I){return I.some(function(Y){return Y.kind===A.kind})}function dr(A,I){return I.some(function(Y){return"null"===Y?null===A:"array"===Y?Array.isArray(A):"object"===Y?A&&!Array.isArray(A)&&"object"==typeof A:Y===typeof A})}var hr=n(function(A,I){var Y={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ie(We){return(We=Math.round(We))<0?0:We>255?255:We}function ve(We){return ie("%"===We[We.length-1]?parseFloat(We)/100*255:parseInt(We))}function Ee(We){return function(We){return We<0?0:We>1?1:We}("%"===We[We.length-1]?parseFloat(We)/100:parseFloat(We))}function Ne(We,ct,dt){return dt<0?dt+=1:dt>1&&(dt-=1),6*dt<1?We+(ct-We)*dt*6:2*dt<1?ct:3*dt<2?We+(ct-We)*(2/3-dt)*6:We}try{I.parseCSSColor=function(We){var ct,dt=We.replace(/ /g,"").toLowerCase();if(dt in Y)return Y[dt].slice();if("#"===dt[0])return 4===dt.length?(ct=parseInt(dt.substr(1),16))>=0&&ct<=4095?[(3840&ct)>>4|(3840&ct)>>8,240&ct|(240&ct)>>4,15&ct|(15&ct)<<4,1]:null:7===dt.length&&(ct=parseInt(dt.substr(1),16))>=0&&ct<=16777215?[(16711680&ct)>>16,(65280&ct)>>8,255&ct,1]:null;var Bt=dt.indexOf("("),Xt=dt.indexOf(")");if(-1!==Bt&&Xt+1===dt.length){var qt=dt.substr(0,Bt),rr=dt.substr(Bt+1,Xt-(Bt+1)).split(","),pr=1;switch(qt){case"rgba":if(4!==rr.length)return null;pr=Ee(rr.pop());case"rgb":return 3!==rr.length?null:[ve(rr[0]),ve(rr[1]),ve(rr[2]),pr];case"hsla":if(4!==rr.length)return null;pr=Ee(rr.pop());case"hsl":if(3!==rr.length)return null;var Sr=(parseFloat(rr[0])%360+360)%360/360,Mr=Ee(rr[1]),Dr=Ee(rr[2]),Fr=Dr<=.5?Dr*(Mr+1):Dr+Mr-Dr*Mr,Hr=2*Dr-Fr;return[ie(255*Ne(Hr,Fr,Sr+1/3)),ie(255*Ne(Hr,Fr,Sr)),ie(255*Ne(Hr,Fr,Sr-1/3)),pr];default:return null}}return null}}catch(We){}}).parseCSSColor,cr=function(A,I,Y,ie){void 0===ie&&(ie=1),this.r=A,this.g=I,this.b=Y,this.a=ie};cr.parse=function(A){if(A){if(A instanceof cr)return A;if("string"==typeof A){var I=hr(A);if(I)return new cr(I[0]/255*I[3],I[1]/255*I[3],I[2]/255*I[3],I[3])}}},cr.prototype.toString=function(){var A=this.toArray(),Y=A[1],ie=A[2],he=A[3];return"rgba("+Math.round(A[0])+","+Math.round(Y)+","+Math.round(ie)+","+he+")"},cr.prototype.toArray=function(){var ie=this.a;return 0===ie?[0,0,0,0]:[255*this.r/ie,255*this.g/ie,255*this.b/ie,ie]},cr.black=new cr(0,0,0,1),cr.white=new cr(1,1,1,1),cr.transparent=new cr(0,0,0,0),cr.red=new cr(1,0,0,1);var sr=function(A,I,Y){this.sensitivity=A?I?"variant":"case":I?"accent":"base",this.locale=Y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};sr.prototype.compare=function(A,I){return this.collator.compare(A,I)},sr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var mr=function(A,I,Y,ie,he){this.text=A,this.image=I,this.scale=Y,this.fontStack=ie,this.textColor=he},Ir=function(A){this.sections=A};Ir.fromString=function(A){return new Ir([new mr(A,null,null,null,null)])},Ir.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(A){return 0!==A.text.length||A.image&&0!==A.image.name.length})},Ir.factory=function(A){return A instanceof Ir?A:Ir.fromString(A)},Ir.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(A){return A.text}).join("")},Ir.prototype.serialize=function(){for(var A=["format"],I=0,Y=this.sections;I<Y.length;I+=1){var ie=Y[I];if(ie.image)A.push(["image",ie.image.name]);else{A.push(ie.text);var he={};ie.fontStack&&(he["text-font"]=["literal",ie.fontStack.split(",")]),ie.scale&&(he["font-scale"]=ie.scale),ie.textColor&&(he["text-color"]=["rgba"].concat(ie.textColor.toArray())),A.push(he)}}return A};var vr=function(A){this.name=A.name,this.available=A.available};function Br(A,I,Y,ie){return"number"==typeof A&&A>=0&&A<=255&&"number"==typeof I&&I>=0&&I<=255&&"number"==typeof Y&&Y>=0&&Y<=255?void 0===ie||"number"==typeof ie&&ie>=0&&ie<=1?null:"Invalid rgba value ["+[A,I,Y,ie].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof ie?[A,I,Y,ie]:[A,I,Y]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Jr(A){if(null===A||"string"==typeof A||"boolean"==typeof A||"number"==typeof A||A instanceof cr||A instanceof sr||A instanceof Ir||A instanceof vr)return!0;if(Array.isArray(A)){for(var I=0,Y=A;I<Y.length;I+=1)if(!Jr(Y[I]))return!1;return!0}if("object"==typeof A){for(var ie in A)if(!Jr(A[ie]))return!1;return!0}return!1}function ln(A){if(null===A)return Lt;if("string"==typeof A)return mt;if("boolean"==typeof A)return It;if("number"==typeof A)return Qe;if(A instanceof cr)return jt;if(A instanceof sr)return lt;if(A instanceof Ir)return _t;if(A instanceof vr)return Dt;if(Array.isArray(A)){for(var I,Y=A.length,ie=0,he=A;ie<he.length;ie+=1){var ve=ln(he[ie]);if(I){if(I===ve)continue;I=Re;break}I=ve}return Vt(I||Re,Y)}return Zt}function En(A){var I=typeof A;return null===A?"":"string"===I||"number"===I||"boolean"===I?String(A):A instanceof cr||A instanceof Ir||A instanceof vr?A.toString():JSON.stringify(A)}vr.prototype.toString=function(){return this.name},vr.fromString=function(A){return A?new vr({name:A,available:!1}):null},vr.prototype.serialize=function(){return["image",this.name]};var Cn=function(A,I){this.type=A,this.value=I};Cn.parse=function(A,I){if(2!==A.length)return I.error("'literal' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(!Jr(A[1]))return I.error("invalid value");var Y=A[1],ie=ln(Y),he=I.expectedType;return"array"!==ie.kind||0!==ie.N||!he||"array"!==he.kind||"number"==typeof he.N&&0!==he.N||(ie=he),new Cn(ie,Y)},Cn.prototype.evaluate=function(){return this.value},Cn.prototype.eachChild=function(){},Cn.prototype.outputDefined=function(){return!0},Cn.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof cr?["rgba"].concat(this.value.toArray()):this.value instanceof Ir?this.value.serialize():this.value};var An=function(A){this.name="ExpressionEvaluationError",this.message=A};An.prototype.toJSON=function(){return this.message};var $r={string:mt,number:Qe,boolean:It,object:Zt},Rr=function(A,I){this.type=A,this.args=I};Rr.parse=function(A,I){if(A.length<2)return I.error("Expected at least one argument.");var Y,ie=1,he=A[0];if("array"===he){var ve,Ee;if(A.length>2){var Ne=A[1];if("string"!=typeof Ne||!(Ne in $r)||"object"===Ne)return I.error('The item type argument of "array" must be one of string, number, boolean',1);ve=$r[Ne],ie++}else ve=Re;if(A.length>3){if(null!==A[2]&&("number"!=typeof A[2]||A[2]<0||A[2]!==Math.floor(A[2])))return I.error('The length argument to "array" must be a positive integer literal',2);Ee=A[2],ie++}Y=Vt(ve,Ee)}else Y=$r[he];for(var We=[];ie<A.length;ie++){var ct=I.parse(A[ie],ie,Re);if(!ct)return null;We.push(ct)}return new Rr(Y,We)},Rr.prototype.evaluate=function(A){for(var I=0;I<this.args.length;I++){var Y=this.args[I].evaluate(A);if(!Kt(this.type,ln(Y)))return Y;if(I===this.args.length-1)throw new An("Expected value to be of type "+nr(this.type)+", but found "+nr(ln(Y))+" instead.")}return null},Rr.prototype.eachChild=function(A){this.args.forEach(A)},Rr.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},Rr.prototype.serialize=function(){var A=this.type,I=[A.kind];if("array"===A.kind){var Y=A.itemType;if("string"===Y.kind||"number"===Y.kind||"boolean"===Y.kind){I.push(Y.kind);var ie=A.N;("number"==typeof ie||this.args.length>1)&&I.push(ie)}}return I.concat(this.args.map(function(he){return he.serialize()}))};var Lr=function(A){this.type=_t,this.sections=A};Lr.parse=function(A,I){if(A.length<2)return I.error("Expected at least one argument.");var Y=A[1];if(!Array.isArray(Y)&&"object"==typeof Y)return I.error("First argument must be an image or text section.");for(var ie=[],he=!1,ve=1;ve<=A.length-1;++ve){var Ee=A[ve];if(he&&"object"==typeof Ee&&!Array.isArray(Ee)){he=!1;var Ne=null;if(Ee["font-scale"]&&!(Ne=I.parse(Ee["font-scale"],1,Qe)))return null;var We=null;if(Ee["text-font"]&&!(We=I.parse(Ee["text-font"],1,Vt(mt))))return null;var ct=null;if(Ee["text-color"]&&!(ct=I.parse(Ee["text-color"],1,jt)))return null;var dt=ie[ie.length-1];dt.scale=Ne,dt.font=We,dt.textColor=ct}else{var Bt=I.parse(A[ve],1,Re);if(!Bt)return null;var Xt=Bt.type.kind;if("string"!==Xt&&"value"!==Xt&&"null"!==Xt&&"resolvedImage"!==Xt)return I.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");he=!0,ie.push({content:Bt,scale:null,font:null,textColor:null})}}return new Lr(ie)},Lr.prototype.evaluate=function(A){return new Ir(this.sections.map(function(I){var Y=I.content.evaluate(A);return ln(Y)===Dt?new mr("",Y,null,null,null):new mr(En(Y),null,I.scale?I.scale.evaluate(A):null,I.font?I.font.evaluate(A).join(","):null,I.textColor?I.textColor.evaluate(A):null)}))},Lr.prototype.eachChild=function(A){for(var I=0,Y=this.sections;I<Y.length;I+=1){var ie=Y[I];A(ie.content),ie.scale&&A(ie.scale),ie.font&&A(ie.font),ie.textColor&&A(ie.textColor)}},Lr.prototype.outputDefined=function(){return!1},Lr.prototype.serialize=function(){for(var A=["format"],I=0,Y=this.sections;I<Y.length;I+=1){var ie=Y[I];A.push(ie.content.serialize());var he={};ie.scale&&(he["font-scale"]=ie.scale.serialize()),ie.font&&(he["text-font"]=ie.font.serialize()),ie.textColor&&(he["text-color"]=ie.textColor.serialize()),A.push(he)}return A};var Qr=function(A){this.type=Dt,this.input=A};Qr.parse=function(A,I){if(2!==A.length)return I.error("Expected two arguments.");var Y=I.parse(A[1],1,mt);return Y?new Qr(Y):I.error("No image name provided.")},Qr.prototype.evaluate=function(A){var I=this.input.evaluate(A),Y=vr.fromString(I);return Y&&A.availableImages&&(Y.available=A.availableImages.indexOf(I)>-1),Y},Qr.prototype.eachChild=function(A){A(this.input)},Qr.prototype.outputDefined=function(){return!1},Qr.prototype.serialize=function(){return["image",this.input.serialize()]};var On={"to-boolean":It,"to-color":jt,"to-number":Qe,"to-string":mt},zr=function(A,I){this.type=A,this.args=I};zr.parse=function(A,I){if(A.length<2)return I.error("Expected at least one argument.");var Y=A[0];if(("to-boolean"===Y||"to-string"===Y)&&2!==A.length)return I.error("Expected one argument.");for(var ie=On[Y],he=[],ve=1;ve<A.length;ve++){var Ee=I.parse(A[ve],ve,Re);if(!Ee)return null;he.push(Ee)}return new zr(ie,he)},zr.prototype.evaluate=function(A){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(A));if("color"===this.type.kind){for(var I,Y,ie=0,he=this.args;ie<he.length;ie+=1){if(Y=null,(I=he[ie].evaluate(A))instanceof cr)return I;if("string"==typeof I){var ve=A.parseColor(I);if(ve)return ve}else if(Array.isArray(I)&&!(Y=I.length<3||I.length>4?"Invalid rbga value "+JSON.stringify(I)+": expected an array containing either three or four numeric values.":Br(I[0],I[1],I[2],I[3])))return new cr(I[0]/255,I[1]/255,I[2]/255,I[3])}throw new An(Y||"Could not parse color from value '"+("string"==typeof I?I:String(JSON.stringify(I)))+"'")}if("number"===this.type.kind){for(var Ee=null,Ne=0,We=this.args;Ne<We.length;Ne+=1){if(null===(Ee=We[Ne].evaluate(A)))return 0;var ct=Number(Ee);if(!isNaN(ct))return ct}throw new An("Could not convert "+JSON.stringify(Ee)+" to number.")}return"formatted"===this.type.kind?Ir.fromString(En(this.args[0].evaluate(A))):"resolvedImage"===this.type.kind?vr.fromString(En(this.args[0].evaluate(A))):En(this.args[0].evaluate(A))},zr.prototype.eachChild=function(A){this.args.forEach(A)},zr.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},zr.prototype.serialize=function(){if("formatted"===this.type.kind)return new Lr([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Qr(this.args[0]).serialize();var A=["to-"+this.type.kind];return this.eachChild(function(I){A.push(I.serialize())}),A};var sn=["Unknown","Point","LineString","Polygon"],Mn=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Mn.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Mn.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?sn[this.feature.type]:this.feature.type:null},Mn.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Mn.prototype.canonicalID=function(){return this.canonical},Mn.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Mn.prototype.parseColor=function(A){var I=this._parseColorCache[A];return I||(I=this._parseColorCache[A]=cr.parse(A)),I};var Tn=function(A,I,Y,ie){this.name=A,this.type=I,this._evaluate=Y,this.args=ie};Tn.prototype.evaluate=function(A){return this._evaluate(A,this.args)},Tn.prototype.eachChild=function(A){this.args.forEach(A)},Tn.prototype.outputDefined=function(){return!1},Tn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(A){return A.serialize()}))},Tn.parse=function(A,I){var Y,ie=A[0],he=Tn.definitions[ie];if(!he)return I.error('Unknown expression "'+ie+'". If you wanted a literal array, use ["literal", [...]].',0);for(var ve=Array.isArray(he)?he[0]:he.type,Ee=Array.isArray(he)?[[he[1],he[2]]]:he.overloads,Ne=Ee.filter(function(ri){var Wn=ri[0];return!Array.isArray(Wn)||Wn.length===A.length-1}),We=null,ct=0,dt=Ne;ct<dt.length;ct+=1){var Bt=dt[ct],Xt=Bt[0],qt=Bt[1];We=new dn(I.registry,I.path,null,I.scope);for(var rr=[],pr=!1,Sr=1;Sr<A.length;Sr++){var Mr=A[Sr],Dr=Array.isArray(Xt)?Xt[Sr-1]:Xt.type,Fr=We.parse(Mr,1+rr.length,Dr);if(!Fr){pr=!0;break}rr.push(Fr)}if(!pr)if(Array.isArray(Xt)&&Xt.length!==rr.length)We.error("Expected "+Xt.length+" arguments, but found "+rr.length+" instead.");else{for(var Hr=0;Hr<rr.length;Hr++){var un=Array.isArray(Xt)?Xt[Hr]:Xt.type,vn=rr[Hr];We.concat(Hr+1).checkSubtype(un,vn.type)}if(0===We.errors.length)return new Tn(ie,ve,qt,rr)}}if(1===Ne.length)(Y=I.errors).push.apply(Y,We.errors);else{for(var Fn=(Ne.length?Ne:Ee).map(function(ri){var Wn;return Wn=ri[0],Array.isArray(Wn)?"("+Wn.map(nr).join(", ")+")":"("+nr(Wn.type)+"...)"}).join(" | "),Dn=[],Hn=1;Hn<A.length;Hn++){var ti=I.parse(A[Hn],1+Dn.length);if(!ti)return null;Dn.push(nr(ti.type))}I.error("Expected arguments of type "+Fn+", but found ("+Dn.join(", ")+") instead.")}return null},Tn.register=function(A,I){for(var Y in Tn.definitions=I,I)A[Y]=Tn};var Rn=function(A,I,Y){this.type=lt,this.locale=Y,this.caseSensitive=A,this.diacriticSensitive=I};function $t(A,I){A[0]=Math.min(A[0],I[0]),A[1]=Math.min(A[1],I[1]),A[2]=Math.max(A[2],I[0]),A[3]=Math.max(A[3],I[1])}function Ct(A,I){return!(A[0]<=I[0]||A[2]>=I[2]||A[1]<=I[1]||A[3]>=I[3])}function Ut(A,I){var ie=(180+A[0])/360,he=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A[1]*Math.PI/360)))/360,ve=Math.pow(2,I.z);return[Math.round(ie*ve*8192),Math.round(he*ve*8192)]}function lr(A,I,Y){return I[1]>A[1]!=Y[1]>A[1]&&A[0]<(Y[0]-I[0])*(A[1]-I[1])/(Y[1]-I[1])+I[0]}function _r(A,I){for(var Y,ie,he,ve,Ee,Ne,We,ct=!1,dt=0,Bt=I.length;dt<Bt;dt++)for(var Xt=I[dt],qt=0,rr=Xt.length;qt<rr-1;qt++){if((ve=(Y=A)[0]-(ie=Xt[qt])[0])*(We=Y[1]-(he=Xt[qt+1])[1])-(Ne=Y[0]-he[0])*(Ee=Y[1]-ie[1])==0&&ve*Ne<=0&&Ee*We<=0)return!1;lr(A,Xt[qt],Xt[qt+1])&&(ct=!ct)}return ct}function qr(A,I){for(var Y=0;Y<I.length;Y++)if(_r(A,I[Y]))return!0;return!1}function Vr(A,I,Y,ie){var We=ie[0]-Y[0],ct=ie[1]-Y[1],dt=(A[0]-Y[0])*ct-We*(A[1]-Y[1]),Bt=(I[0]-Y[0])*ct-We*(I[1]-Y[1]);return dt>0&&Bt<0||dt<0&&Bt>0}function br(A,I,Y){for(var ie=0,he=Y;ie<he.length;ie+=1)for(var ve=he[ie],Ee=0;Ee<ve.length-1;++Ee)if((Bt=[(dt=ve[Ee+1])[0]-(ct=ve[Ee])[0],dt[1]-ct[1]])[0]*(Xt=[(We=I)[0]-(Ne=A)[0],We[1]-Ne[1]])[1]-Bt[1]*Xt[0]!=0&&Vr(Ne,We,ct,dt)&&Vr(ct,dt,Ne,We))return!0;var Ne,We,ct,dt,Bt,Xt;return!1}function yr(A,I){for(var Y=0;Y<A.length;++Y)if(!_r(A[Y],I))return!1;for(var ie=0;ie<A.length-1;++ie)if(br(A[ie],A[ie+1],I))return!1;return!0}function kr(A,I){for(var Y=0;Y<I.length;Y++)if(yr(A,I[Y]))return!0;return!1}function Cr(A,I,Y){for(var ie=[],he=0;he<A.length;he++){for(var ve=[],Ee=0;Ee<A[he].length;Ee++){var Ne=Ut(A[he][Ee],Y);$t(I,Ne),ve.push(Ne)}ie.push(ve)}return ie}function Ar(A,I,Y){for(var ie=[],he=0;he<A.length;he++){var ve=Cr(A[he],I,Y);ie.push(ve)}return ie}function Yr(A,I,Y,ie){if(A[0]<Y[0]||A[0]>Y[2]){var he=.5*ie,ve=A[0]-Y[0]>he?-ie:Y[0]-A[0]>he?ie:0;0===ve&&(ve=A[0]-Y[2]>he?-ie:Y[2]-A[0]>he?ie:0),A[0]+=ve}$t(I,A)}function cn(A,I,Y,ie){for(var he=8192*Math.pow(2,ie.z),ve=[8192*ie.x,8192*ie.y],Ee=[],Ne=0,We=A;Ne<We.length;Ne+=1)for(var ct=0,dt=We[Ne];ct<dt.length;ct+=1){var Bt=dt[ct],Xt=[Bt.x+ve[0],Bt.y+ve[1]];Yr(Xt,I,Y,he),Ee.push(Xt)}return Ee}function yn(A,I,Y,ie){for(var he,ve=8192*Math.pow(2,ie.z),Ee=[8192*ie.x,8192*ie.y],Ne=[],We=0,ct=A;We<ct.length;We+=1){for(var dt=[],Bt=0,Xt=ct[We];Bt<Xt.length;Bt+=1){var qt=Xt[Bt],rr=[qt.x+Ee[0],qt.y+Ee[1]];$t(I,rr),dt.push(rr)}Ne.push(dt)}if(I[2]-I[0]<=ve/2){(he=I)[0]=he[1]=1/0,he[2]=he[3]=-1/0;for(var pr=0,Sr=Ne;pr<Sr.length;pr+=1)for(var Mr=0,Dr=Sr[pr];Mr<Dr.length;Mr+=1)Yr(Dr[Mr],I,Y,ve)}return Ne}Rn.parse=function(A,I){if(2!==A.length)return I.error("Expected one argument.");var Y=A[1];if("object"!=typeof Y||Array.isArray(Y))return I.error("Collator options argument must be an object.");var ie=I.parse(void 0!==Y["case-sensitive"]&&Y["case-sensitive"],1,It);if(!ie)return null;var he=I.parse(void 0!==Y["diacritic-sensitive"]&&Y["diacritic-sensitive"],1,It);if(!he)return null;var ve=null;return Y.locale&&!(ve=I.parse(Y.locale,1,mt))?null:new Rn(ie,he,ve)},Rn.prototype.evaluate=function(A){return new sr(this.caseSensitive.evaluate(A),this.diacriticSensitive.evaluate(A),this.locale?this.locale.evaluate(A):null)},Rn.prototype.eachChild=function(A){A(this.caseSensitive),A(this.diacriticSensitive),this.locale&&A(this.locale)},Rn.prototype.outputDefined=function(){return!1},Rn.prototype.serialize=function(){var A={};return A["case-sensitive"]=this.caseSensitive.serialize(),A["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(A.locale=this.locale.serialize()),["collator",A]};var Kr=function(A,I){this.type=It,this.geojson=A,this.geometries=I};function mn(A){if(A instanceof Tn&&("get"===A.name&&1===A.args.length||"feature-state"===A.name||"has"===A.name&&1===A.args.length||"properties"===A.name||"geometry-type"===A.name||"id"===A.name||/^filter-/.test(A.name))||A instanceof Kr)return!1;var I=!0;return A.eachChild(function(Y){I&&!mn(Y)&&(I=!1)}),I}function jr(A){if(A instanceof Tn&&"feature-state"===A.name)return!1;var I=!0;return A.eachChild(function(Y){I&&!jr(Y)&&(I=!1)}),I}function Nr(A,I){if(A instanceof Tn&&I.indexOf(A.name)>=0)return!1;var Y=!0;return A.eachChild(function(ie){Y&&!Nr(ie,I)&&(Y=!1)}),Y}Kr.parse=function(A,I){if(2!==A.length)return I.error("'within' expression requires exactly one argument, but found "+(A.length-1)+" instead.");if(Jr(A[1])){var Y=A[1];if("FeatureCollection"===Y.type)for(var ie=0;ie<Y.features.length;++ie){var he=Y.features[ie].geometry.type;if("Polygon"===he||"MultiPolygon"===he)return new Kr(Y,Y.features[ie].geometry)}else if("Feature"===Y.type){var ve=Y.geometry.type;if("Polygon"===ve||"MultiPolygon"===ve)return new Kr(Y,Y.geometry)}else if("Polygon"===Y.type||"MultiPolygon"===Y.type)return new Kr(Y,Y)}return I.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Kr.prototype.evaluate=function(A){if(null!=A.geometry()&&null!=A.canonicalID()){if("Point"===A.geometryType())return function(I,Y){var ie=[1/0,1/0,-1/0,-1/0],he=[1/0,1/0,-1/0,-1/0],ve=I.canonicalID();if("Polygon"===Y.type){var Ee=Cr(Y.coordinates,he,ve),Ne=cn(I.geometry(),ie,he,ve);if(!Ct(ie,he))return!1;for(var We=0,ct=Ne;We<ct.length;We+=1)if(!_r(ct[We],Ee))return!1}if("MultiPolygon"===Y.type){var dt=Ar(Y.coordinates,he,ve),Bt=cn(I.geometry(),ie,he,ve);if(!Ct(ie,he))return!1;for(var Xt=0,qt=Bt;Xt<qt.length;Xt+=1)if(!qr(qt[Xt],dt))return!1}return!0}(A,this.geometries);if("LineString"===A.geometryType())return function(I,Y){var ie=[1/0,1/0,-1/0,-1/0],he=[1/0,1/0,-1/0,-1/0],ve=I.canonicalID();if("Polygon"===Y.type){var Ee=Cr(Y.coordinates,he,ve),Ne=yn(I.geometry(),ie,he,ve);if(!Ct(ie,he))return!1;for(var We=0,ct=Ne;We<ct.length;We+=1)if(!yr(ct[We],Ee))return!1}if("MultiPolygon"===Y.type){var dt=Ar(Y.coordinates,he,ve),Bt=yn(I.geometry(),ie,he,ve);if(!Ct(ie,he))return!1;for(var Xt=0,qt=Bt;Xt<qt.length;Xt+=1)if(!kr(qt[Xt],dt))return!1}return!0}(A,this.geometries)}return!1},Kr.prototype.eachChild=function(){},Kr.prototype.outputDefined=function(){return!0},Kr.prototype.serialize=function(){return["within",this.geojson]};var nn=function(A,I){this.type=I.type,this.name=A,this.boundExpression=I};nn.parse=function(A,I){if(2!==A.length||"string"!=typeof A[1])return I.error("'var' expression requires exactly one string literal argument.");var Y=A[1];return I.scope.has(Y)?new nn(Y,I.scope.get(Y)):I.error('Unknown variable "'+Y+'". Make sure "'+Y+'" has been bound in an enclosing "let" expression before using it.',1)},nn.prototype.evaluate=function(A){return this.boundExpression.evaluate(A)},nn.prototype.eachChild=function(){},nn.prototype.outputDefined=function(){return!1},nn.prototype.serialize=function(){return["var",this.name]};var dn=function(A,I,Y,ie,he){void 0===I&&(I=[]),void 0===ie&&(ie=new Et),void 0===he&&(he=[]),this.registry=A,this.path=I,this.key=I.map(function(ve){return"["+ve+"]"}).join(""),this.scope=ie,this.errors=he,this.expectedType=Y};function wn(A,I){for(var Y,he=A.length-1,ve=0,Ee=he,Ne=0;ve<=Ee;)if((Y=A[Ne=Math.floor((ve+Ee)/2)])<=I){if(Ne===he||I<A[Ne+1])return Ne;ve=Ne+1}else{if(!(Y>I))throw new An("Input is not a number.");Ee=Ne-1}return 0}dn.prototype.parse=function(A,I,Y,ie,he){return void 0===he&&(he={}),I?this.concat(I,Y,ie)._parse(A,he):this._parse(A,he)},dn.prototype._parse=function(A,I){function Y(ct,dt,Bt){return"assert"===Bt?new Rr(dt,[ct]):"coerce"===Bt?new zr(dt,[ct]):ct}if(null!==A&&"string"!=typeof A&&"boolean"!=typeof A&&"number"!=typeof A||(A=["literal",A]),Array.isArray(A)){if(0===A.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ie=A[0];if("string"!=typeof ie)return this.error("Expression name must be a string, but found "+typeof ie+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var he=this.registry[ie];if(he){var ve=he.parse(A,this);if(!ve)return null;if(this.expectedType){var Ee=this.expectedType,Ne=ve.type;if("string"!==Ee.kind&&"number"!==Ee.kind&&"boolean"!==Ee.kind&&"object"!==Ee.kind&&"array"!==Ee.kind||"value"!==Ne.kind)if("color"!==Ee.kind&&"formatted"!==Ee.kind&&"resolvedImage"!==Ee.kind||"value"!==Ne.kind&&"string"!==Ne.kind){if(this.checkSubtype(Ee,Ne))return null}else ve=Y(ve,Ee,I.typeAnnotation||"coerce");else ve=Y(ve,Ee,I.typeAnnotation||"assert")}if(!(ve instanceof Cn)&&"resolvedImage"!==ve.type.kind&&function ct(dt){if(dt instanceof nn)return ct(dt.boundExpression);if(dt instanceof Tn&&"error"===dt.name||dt instanceof Rn||dt instanceof Kr)return!1;var Bt=dt instanceof zr||dt instanceof Rr,Xt=!0;return dt.eachChild(function(qt){Xt=Bt?Xt&&ct(qt):Xt&&qt instanceof Cn}),!!Xt&&mn(dt)&&Nr(dt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(ve)){var We=new Mn;try{ve=new Cn(ve.type,ve.evaluate(We))}catch(ct){return this.error(ct.message),null}}return ve}return this.error('Unknown expression "'+ie+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===A?"'undefined' value invalid. Use null instead.":"object"==typeof A?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof A+" instead.")},dn.prototype.concat=function(A,I,Y){var ie="number"==typeof A?this.path.concat(A):this.path,he=Y?this.scope.concat(Y):this.scope;return new dn(this.registry,ie,I||null,he,this.errors)},dn.prototype.error=function(A){for(var I=[],Y=arguments.length-1;Y-- >0;)I[Y]=arguments[Y+1];var ie=""+this.key+I.map(function(he){return"["+he+"]"}).join("");this.errors.push(new ot(ie,A))},dn.prototype.checkSubtype=function(A,I){var Y=Kt(A,I);return Y&&this.error(Y),Y};var ii=function(A,I,Y){this.type=A,this.input=I,this.labels=[],this.outputs=[];for(var ie=0,he=Y;ie<he.length;ie+=1){var ve=he[ie],Ne=ve[1];this.labels.push(ve[0]),this.outputs.push(Ne)}};function qn(A,I,Y){return A*(1-Y)+I*Y}ii.parse=function(A,I){if(A.length-1<4)return I.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return I.error("Expected an even number of arguments.");var Y=I.parse(A[1],1,Qe);if(!Y)return null;var ie=[],he=null;I.expectedType&&"value"!==I.expectedType.kind&&(he=I.expectedType);for(var ve=1;ve<A.length;ve+=2){var Ee=1===ve?-1/0:A[ve],Ne=A[ve+1],We=ve,ct=ve+1;if("number"!=typeof Ee)return I.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',We);if(ie.length&&ie[ie.length-1][0]>=Ee)return I.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',We);var dt=I.parse(Ne,ct,he);if(!dt)return null;he=he||dt.type,ie.push([Ee,dt])}return new ii(he,Y,ie)},ii.prototype.evaluate=function(A){var I=this.labels,Y=this.outputs;if(1===I.length)return Y[0].evaluate(A);var ie=this.input.evaluate(A);if(ie<=I[0])return Y[0].evaluate(A);var he=I.length;return ie>=I[he-1]?Y[he-1].evaluate(A):Y[wn(I,ie)].evaluate(A)},ii.prototype.eachChild=function(A){A(this.input);for(var I=0,Y=this.outputs;I<Y.length;I+=1)A(Y[I])},ii.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},ii.prototype.serialize=function(){for(var A=["step",this.input.serialize()],I=0;I<this.labels.length;I++)I>0&&A.push(this.labels[I]),A.push(this.outputs[I].serialize());return A};var gn=Object.freeze({__proto__:null,number:qn,color:function(A,I,Y){return new cr(qn(A.r,I.r,Y),qn(A.g,I.g,Y),qn(A.b,I.b,Y),qn(A.a,I.a,Y))},array:function(A,I,Y){return A.map(function(ie,he){return qn(ie,I[he],Y)})}}),ei=6/29,ui=3*ei*ei,Yi=Math.PI/180,Ea=180/Math.PI;function ea(A){return A>.008856451679035631?Math.pow(A,1/3):A/ui+4/29}function ga(A){return A>ei?A*A*A:ui*(A-4/29)}function ki(A){return 255*(A<=.0031308?12.92*A:1.055*Math.pow(A,1/2.4)-.055)}function Fi(A){return(A/=255)<=.04045?A/12.92:Math.pow((A+.055)/1.055,2.4)}function oo(A){var I=Fi(A.r),Y=Fi(A.g),ie=Fi(A.b),he=ea((.4124564*I+.3575761*Y+.1804375*ie)/.95047),ve=ea((.2126729*I+.7151522*Y+.072175*ie)/1);return{l:116*ve-16,a:500*(he-ve),b:200*(ve-ea((.0193339*I+.119192*Y+.9503041*ie)/1.08883)),alpha:A.a}}function zo(A){var I=(A.l+16)/116,Y=isNaN(A.a)?I:I+A.a/500,ie=isNaN(A.b)?I:I-A.b/200;return I=1*ga(I),Y=.95047*ga(Y),ie=1.08883*ga(ie),new cr(ki(3.2404542*Y-1.5371385*I-.4985314*ie),ki(-.969266*Y+1.8760108*I+.041556*ie),ki(.0556434*Y-.2040259*I+1.0572252*ie),A.alpha)}function Ho(A,I,Y){var ie=I-A;return A+Y*(ie>180||ie<-180?ie-360*Math.round(ie/360):ie)}var Ua={forward:oo,reverse:zo,interpolate:function(A,I,Y){return{l:qn(A.l,I.l,Y),a:qn(A.a,I.a,Y),b:qn(A.b,I.b,Y),alpha:qn(A.alpha,I.alpha,Y)}}},qa={forward:function(A){var I=oo(A),Y=I.l,ie=I.a,he=I.b,ve=Math.atan2(he,ie)*Ea;return{h:ve<0?ve+360:ve,c:Math.sqrt(ie*ie+he*he),l:Y,alpha:A.a}},reverse:function(A){var I=A.h*Yi,Y=A.c;return zo({l:A.l,a:Math.cos(I)*Y,b:Math.sin(I)*Y,alpha:A.alpha})},interpolate:function(A,I,Y){return{h:Ho(A.h,I.h,Y),c:qn(A.c,I.c,Y),l:qn(A.l,I.l,Y),alpha:qn(A.alpha,I.alpha,Y)}}},Do=Object.freeze({__proto__:null,lab:Ua,hcl:qa}),ji=function(A,I,Y,ie,he){this.type=A,this.operator=I,this.interpolation=Y,this.input=ie,this.labels=[],this.outputs=[];for(var ve=0,Ee=he;ve<Ee.length;ve+=1){var Ne=Ee[ve],ct=Ne[1];this.labels.push(Ne[0]),this.outputs.push(ct)}};function _o(A,I,Y,ie){var he=ie-Y,ve=A-Y;return 0===he?0:1===I?ve/he:(Math.pow(I,ve)-1)/(Math.pow(I,he)-1)}ji.interpolationFactor=function(A,I,Y,ie){var he=0;if("exponential"===A.name)he=_o(I,A.base,Y,ie);else if("linear"===A.name)he=_o(I,1,Y,ie);else if("cubic-bezier"===A.name){var ve=A.controlPoints;he=new t(ve[0],ve[1],ve[2],ve[3]).solve(_o(I,1,Y,ie))}return he},ji.parse=function(A,I){var Y=A[0],ie=A[1],he=A[2],ve=A.slice(3);if(!Array.isArray(ie)||0===ie.length)return I.error("Expected an interpolation type expression.",1);if("linear"===ie[0])ie={name:"linear"};else if("exponential"===ie[0]){var Ee=ie[1];if("number"!=typeof Ee)return I.error("Exponential interpolation requires a numeric base.",1,1);ie={name:"exponential",base:Ee}}else{if("cubic-bezier"!==ie[0])return I.error("Unknown interpolation type "+String(ie[0]),1,0);var Ne=ie.slice(1);if(4!==Ne.length||Ne.some(function(Sr){return"number"!=typeof Sr||Sr<0||Sr>1}))return I.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ie={name:"cubic-bezier",controlPoints:Ne}}if(A.length-1<4)return I.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if((A.length-1)%2!=0)return I.error("Expected an even number of arguments.");if(!(he=I.parse(he,2,Qe)))return null;var We=[],ct=null;"interpolate-hcl"===Y||"interpolate-lab"===Y?ct=jt:I.expectedType&&"value"!==I.expectedType.kind&&(ct=I.expectedType);for(var dt=0;dt<ve.length;dt+=2){var Bt=ve[dt],Xt=ve[dt+1],qt=dt+3,rr=dt+4;if("number"!=typeof Bt)return I.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',qt);if(We.length&&We[We.length-1][0]>=Bt)return I.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',qt);var pr=I.parse(Xt,rr,ct);if(!pr)return null;ct=ct||pr.type,We.push([Bt,pr])}return"number"===ct.kind||"color"===ct.kind||"array"===ct.kind&&"number"===ct.itemType.kind&&"number"==typeof ct.N?new ji(ct,Y,ie,he,We):I.error("Type "+nr(ct)+" is not interpolatable.")},ji.prototype.evaluate=function(A){var I=this.labels,Y=this.outputs;if(1===I.length)return Y[0].evaluate(A);var ie=this.input.evaluate(A);if(ie<=I[0])return Y[0].evaluate(A);var he=I.length;if(ie>=I[he-1])return Y[he-1].evaluate(A);var ve=wn(I,ie),We=ji.interpolationFactor(this.interpolation,ie,I[ve],I[ve+1]),ct=Y[ve].evaluate(A),dt=Y[ve+1].evaluate(A);return"interpolate"===this.operator?gn[this.type.kind.toLowerCase()](ct,dt,We):"interpolate-hcl"===this.operator?qa.reverse(qa.interpolate(qa.forward(ct),qa.forward(dt),We)):Ua.reverse(Ua.interpolate(Ua.forward(ct),Ua.forward(dt),We))},ji.prototype.eachChild=function(A){A(this.input);for(var I=0,Y=this.outputs;I<Y.length;I+=1)A(Y[I])},ji.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})},ji.prototype.serialize=function(){var A;A="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var I=[this.operator,A,this.input.serialize()],Y=0;Y<this.labels.length;Y++)I.push(this.labels[Y],this.outputs[Y].serialize());return I};var so=function(A,I){this.type=A,this.args=I};so.parse=function(A,I){if(A.length<2)return I.error("Expectected at least one argument.");var Y=null,ie=I.expectedType;ie&&"value"!==ie.kind&&(Y=ie);for(var he=[],ve=0,Ee=A.slice(1);ve<Ee.length;ve+=1){var We=I.parse(Ee[ve],1+he.length,Y,void 0,{typeAnnotation:"omit"});if(!We)return null;Y=Y||We.type,he.push(We)}var ct=ie&&he.some(function(dt){return Kt(ie,dt.type)});return new so(ct?Re:Y,he)},so.prototype.evaluate=function(A){for(var I,Y=null,ie=0,he=0,ve=this.args;he<ve.length&&(ie++,(Y=ve[he].evaluate(A))&&Y instanceof vr&&!Y.available&&(I||(I=Y.name),Y=null,ie===this.args.length&&(Y=I)),null===Y);he+=1);return Y},so.prototype.eachChild=function(A){this.args.forEach(A)},so.prototype.outputDefined=function(){return this.args.every(function(A){return A.outputDefined()})},so.prototype.serialize=function(){var A=["coalesce"];return this.eachChild(function(I){A.push(I.serialize())}),A};var ma=function(A,I){this.type=I.type,this.bindings=[].concat(A),this.result=I};ma.prototype.evaluate=function(A){return this.result.evaluate(A)},ma.prototype.eachChild=function(A){for(var I=0,Y=this.bindings;I<Y.length;I+=1)A(Y[I][1]);A(this.result)},ma.parse=function(A,I){if(A.length<4)return I.error("Expected at least 3 arguments, but found "+(A.length-1)+" instead.");for(var Y=[],ie=1;ie<A.length-1;ie+=2){var he=A[ie];if("string"!=typeof he)return I.error("Expected string, but found "+typeof he+" instead.",ie);if(/[^a-zA-Z0-9_]/.test(he))return I.error("Variable names must contain only alphanumeric characters or '_'.",ie);var ve=I.parse(A[ie+1],ie+1);if(!ve)return null;Y.push([he,ve])}var Ee=I.parse(A[A.length-1],A.length-1,I.expectedType,Y);return Ee?new ma(Y,Ee):null},ma.prototype.outputDefined=function(){return this.result.outputDefined()},ma.prototype.serialize=function(){for(var A=["let"],I=0,Y=this.bindings;I<Y.length;I+=1){var ie=Y[I];A.push(ie[0],ie[1].serialize())}return A.push(this.result.serialize()),A};var Ga=function(A,I,Y){this.type=A,this.index=I,this.input=Y};Ga.parse=function(A,I){if(3!==A.length)return I.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1,Qe),ie=I.parse(A[2],2,Vt(I.expectedType||Re));return Y&&ie?new Ga(ie.type.itemType,Y,ie):null},Ga.prototype.evaluate=function(A){var I=this.index.evaluate(A),Y=this.input.evaluate(A);if(I<0)throw new An("Array index out of bounds: "+I+" < 0.");if(I>=Y.length)throw new An("Array index out of bounds: "+I+" > "+(Y.length-1)+".");if(I!==Math.floor(I))throw new An("Array index must be an integer, but found "+I+" instead.");return Y[I]},Ga.prototype.eachChild=function(A){A(this.index),A(this.input)},Ga.prototype.outputDefined=function(){return!1},Ga.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var lo=function(A,I){this.type=It,this.needle=A,this.haystack=I};lo.parse=function(A,I){if(3!==A.length)return I.error("Expected 2 arguments, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1,Re),ie=I.parse(A[2],2,Re);return Y&&ie?ir(Y.type,[It,mt,Qe,Lt,Re])?new lo(Y,ie):I.error("Expected first argument to be of type boolean, string, number or null, but found "+nr(Y.type)+" instead"):null},lo.prototype.evaluate=function(A){var I=this.needle.evaluate(A),Y=this.haystack.evaluate(A);if(!Y)return!1;if(!dr(I,["boolean","string","number","null"]))throw new An("Expected first argument to be of type boolean, string, number or null, but found "+nr(ln(I))+" instead.");if(!dr(Y,["string","array"]))throw new An("Expected second argument to be of type array or string, but found "+nr(ln(Y))+" instead.");return Y.indexOf(I)>=0},lo.prototype.eachChild=function(A){A(this.needle),A(this.haystack)},lo.prototype.outputDefined=function(){return!0},lo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var yo=function(A,I,Y){this.type=Qe,this.needle=A,this.haystack=I,this.fromIndex=Y};yo.parse=function(A,I){if(A.length<=2||A.length>=5)return I.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1,Re),ie=I.parse(A[2],2,Re);if(!Y||!ie)return null;if(!ir(Y.type,[It,mt,Qe,Lt,Re]))return I.error("Expected first argument to be of type boolean, string, number or null, but found "+nr(Y.type)+" instead");if(4===A.length){var he=I.parse(A[3],3,Qe);return he?new yo(Y,ie,he):null}return new yo(Y,ie)},yo.prototype.evaluate=function(A){var I=this.needle.evaluate(A),Y=this.haystack.evaluate(A);if(!dr(I,["boolean","string","number","null"]))throw new An("Expected first argument to be of type boolean, string, number or null, but found "+nr(ln(I))+" instead.");if(!dr(Y,["string","array"]))throw new An("Expected second argument to be of type array or string, but found "+nr(ln(Y))+" instead.");if(this.fromIndex){var ie=this.fromIndex.evaluate(A);return Y.indexOf(I,ie)}return Y.indexOf(I)},yo.prototype.eachChild=function(A){A(this.needle),A(this.haystack),this.fromIndex&&A(this.fromIndex)},yo.prototype.outputDefined=function(){return!1},yo.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var A=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),A]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ia=function(A,I,Y,ie,he,ve){this.inputType=A,this.type=I,this.input=Y,this.cases=ie,this.outputs=he,this.otherwise=ve};Ia.parse=function(A,I){if(A.length<5)return I.error("Expected at least 4 arguments, but found only "+(A.length-1)+".");if(A.length%2!=1)return I.error("Expected an even number of arguments.");var Y,ie;I.expectedType&&"value"!==I.expectedType.kind&&(ie=I.expectedType);for(var he={},ve=[],Ee=2;Ee<A.length-1;Ee+=2){var Ne=A[Ee],We=A[Ee+1];Array.isArray(Ne)||(Ne=[Ne]);var ct=I.concat(Ee);if(0===Ne.length)return ct.error("Expected at least one branch label.");for(var dt=0,Bt=Ne;dt<Bt.length;dt+=1){var Xt=Bt[dt];if("number"!=typeof Xt&&"string"!=typeof Xt)return ct.error("Branch labels must be numbers or strings.");if("number"==typeof Xt&&Math.abs(Xt)>Number.MAX_SAFE_INTEGER)return ct.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof Xt&&Math.floor(Xt)!==Xt)return ct.error("Numeric branch labels must be integer values.");if(Y){if(ct.checkSubtype(Y,ln(Xt)))return null}else Y=ln(Xt);if(void 0!==he[String(Xt)])return ct.error("Branch labels must be unique.");he[String(Xt)]=ve.length}var qt=I.parse(We,Ee,ie);if(!qt)return null;ie=ie||qt.type,ve.push(qt)}var rr=I.parse(A[1],1,Re);if(!rr)return null;var pr=I.parse(A[A.length-1],A.length-1,ie);return pr?"value"!==rr.type.kind&&I.concat(1).checkSubtype(Y,rr.type)?null:new Ia(Y,ie,rr,he,ve,pr):null},Ia.prototype.evaluate=function(A){var I=this.input.evaluate(A);return(ln(I)===this.inputType&&this.outputs[this.cases[I]]||this.otherwise).evaluate(A)},Ia.prototype.eachChild=function(A){A(this.input),this.outputs.forEach(A),A(this.otherwise)},Ia.prototype.outputDefined=function(){return this.outputs.every(function(A){return A.outputDefined()})&&this.otherwise.outputDefined()},Ia.prototype.serialize=function(){for(var A=this,I=["match",this.input.serialize()],Y=[],ie={},he=0,ve=Object.keys(this.cases).sort();he<ve.length;he+=1){var Ee=ve[he];void 0===(Bt=ie[this.cases[Ee]])?(ie[this.cases[Ee]]=Y.length,Y.push([this.cases[Ee],[Ee]])):Y[Bt][1].push(Ee)}for(var Ne=function(qt){return"number"===A.inputType.kind?Number(qt):qt},We=0,ct=Y;We<ct.length;We+=1){var dt=ct[We],Bt=dt[0],Xt=dt[1];I.push(1===Xt.length?Ne(Xt[0]):Xt.map(Ne)),I.push(this.outputs[outputIndex$1].serialize())}return I.push(this.otherwise.serialize()),I};var la=function(A,I,Y){this.type=A,this.branches=I,this.otherwise=Y};la.parse=function(A,I){if(A.length<4)return I.error("Expected at least 3 arguments, but found only "+(A.length-1)+".");if(A.length%2!=0)return I.error("Expected an odd number of arguments.");var Y;I.expectedType&&"value"!==I.expectedType.kind&&(Y=I.expectedType);for(var ie=[],he=1;he<A.length-1;he+=2){var ve=I.parse(A[he],he,It);if(!ve)return null;var Ee=I.parse(A[he+1],he+1,Y);if(!Ee)return null;ie.push([ve,Ee]),Y=Y||Ee.type}var Ne=I.parse(A[A.length-1],A.length-1,Y);return Ne?new la(Y,ie,Ne):null},la.prototype.evaluate=function(A){for(var I=0,Y=this.branches;I<Y.length;I+=1){var ie=Y[I],ve=ie[1];if(ie[0].evaluate(A))return ve.evaluate(A)}return this.otherwise.evaluate(A)},la.prototype.eachChild=function(A){for(var I=0,Y=this.branches;I<Y.length;I+=1){var ie=Y[I],ve=ie[1];A(ie[0]),A(ve)}A(this.otherwise)},la.prototype.outputDefined=function(){return this.branches.every(function(A){return A[1].outputDefined()})&&this.otherwise.outputDefined()},la.prototype.serialize=function(){var A=["case"];return this.eachChild(function(I){A.push(I.serialize())}),A};var Va=function(A,I,Y,ie){this.type=A,this.input=I,this.beginIndex=Y,this.endIndex=ie};function ps(A,I){return"=="===A||"!="===A?"boolean"===I.kind||"string"===I.kind||"number"===I.kind||"null"===I.kind||"value"===I.kind:"string"===I.kind||"number"===I.kind||"value"===I.kind}function vs(A,I,Y,ie){return 0===ie.compare(I,Y)}function Ui(A,I,Y){var ie="=="!==A&&"!="!==A;return function(){function he(ve,Ee,Ne){this.type=It,this.lhs=ve,this.rhs=Ee,this.collator=Ne,this.hasUntypedArgument="value"===ve.type.kind||"value"===Ee.type.kind}return he.parse=function(ve,Ee){if(3!==ve.length&&4!==ve.length)return Ee.error("Expected two or three arguments.");var Ne=ve[0],We=Ee.parse(ve[1],1,Re);if(!We)return null;if(!ps(Ne,We.type))return Ee.concat(1).error('"'+Ne+"\" comparisons are not supported for type '"+nr(We.type)+"'.");var ct=Ee.parse(ve[2],2,Re);if(!ct)return null;if(!ps(Ne,ct.type))return Ee.concat(2).error('"'+Ne+"\" comparisons are not supported for type '"+nr(ct.type)+"'.");if(We.type.kind!==ct.type.kind&&"value"!==We.type.kind&&"value"!==ct.type.kind)return Ee.error("Cannot compare types '"+nr(We.type)+"' and '"+nr(ct.type)+"'.");ie&&("value"===We.type.kind&&"value"!==ct.type.kind?We=new Rr(ct.type,[We]):"value"!==We.type.kind&&"value"===ct.type.kind&&(ct=new Rr(We.type,[ct])));var dt=null;if(4===ve.length){if("string"!==We.type.kind&&"string"!==ct.type.kind&&"value"!==We.type.kind&&"value"!==ct.type.kind)return Ee.error("Cannot use collator to compare non-string types.");if(!(dt=Ee.parse(ve[3],3,lt)))return null}return new he(We,ct,dt)},he.prototype.evaluate=function(ve){var Ee=this.lhs.evaluate(ve),Ne=this.rhs.evaluate(ve);if(ie&&this.hasUntypedArgument){var We=ln(Ee),ct=ln(Ne);if(We.kind!==ct.kind||"string"!==We.kind&&"number"!==We.kind)throw new An('Expected arguments for "'+A+'" to be (string, string) or (number, number), but found ('+We.kind+", "+ct.kind+") instead.")}if(this.collator&&!ie&&this.hasUntypedArgument){var dt=ln(Ee),Bt=ln(Ne);if("string"!==dt.kind||"string"!==Bt.kind)return I(ve,Ee,Ne)}return this.collator?Y(ve,Ee,Ne,this.collator.evaluate(ve)):I(ve,Ee,Ne)},he.prototype.eachChild=function(ve){ve(this.lhs),ve(this.rhs),this.collator&&ve(this.collator)},he.prototype.outputDefined=function(){return!0},he.prototype.serialize=function(){var ve=[A];return this.eachChild(function(Ee){ve.push(Ee.serialize())}),ve},he}()}Va.parse=function(A,I){if(A.length<=2||A.length>=5)return I.error("Expected 3 or 4 arguments, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1,Re),ie=I.parse(A[2],2,Qe);if(!Y||!ie)return null;if(!ir(Y.type,[Vt(Re),mt,Re]))return I.error("Expected first argument to be of type array or string, but found "+nr(Y.type)+" instead");if(4===A.length){var he=I.parse(A[3],3,Qe);return he?new Va(Y.type,Y,ie,he):null}return new Va(Y.type,Y,ie)},Va.prototype.evaluate=function(A){var I=this.input.evaluate(A),Y=this.beginIndex.evaluate(A);if(!dr(I,["string","array"]))throw new An("Expected first argument to be of type array or string, but found "+nr(ln(I))+" instead.");if(this.endIndex){var ie=this.endIndex.evaluate(A);return I.slice(Y,ie)}return I.slice(Y)},Va.prototype.eachChild=function(A){A(this.input),A(this.beginIndex),this.endIndex&&A(this.endIndex)},Va.prototype.outputDefined=function(){return!1},Va.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var A=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),A]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var ss=Ui("==",function(A,I,Y){return I===Y},vs),Xo=Ui("!=",function(A,I,Y){return I!==Y},function(A,I,Y,ie){return!vs(0,I,Y,ie)}),ys=Ui("<",function(A,I,Y){return I<Y},function(A,I,Y,ie){return ie.compare(I,Y)<0}),xs=Ui(">",function(A,I,Y){return I>Y},function(A,I,Y,ie){return ie.compare(I,Y)>0}),ds=Ui("<=",function(A,I,Y){return I<=Y},function(A,I,Y,ie){return ie.compare(I,Y)<=0}),bs=Ui(">=",function(A,I,Y){return I>=Y},function(A,I,Y,ie){return ie.compare(I,Y)>=0}),wo=function(A,I,Y,ie,he){this.type=mt,this.number=A,this.locale=I,this.currency=Y,this.minFractionDigits=ie,this.maxFractionDigits=he};wo.parse=function(A,I){if(3!==A.length)return I.error("Expected two arguments.");var Y=I.parse(A[1],1,Qe);if(!Y)return null;var ie=A[2];if("object"!=typeof ie||Array.isArray(ie))return I.error("NumberFormat options argument must be an object.");var he=null;if(ie.locale&&!(he=I.parse(ie.locale,1,mt)))return null;var ve=null;if(ie.currency&&!(ve=I.parse(ie.currency,1,mt)))return null;var Ee=null;if(ie["min-fraction-digits"]&&!(Ee=I.parse(ie["min-fraction-digits"],1,Qe)))return null;var Ne=null;return ie["max-fraction-digits"]&&!(Ne=I.parse(ie["max-fraction-digits"],1,Qe))?null:new wo(Y,he,ve,Ee,Ne)},wo.prototype.evaluate=function(A){return new Intl.NumberFormat(this.locale?this.locale.evaluate(A):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(A):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(A):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(A):void 0}).format(this.number.evaluate(A))},wo.prototype.eachChild=function(A){A(this.number),this.locale&&A(this.locale),this.currency&&A(this.currency),this.minFractionDigits&&A(this.minFractionDigits),this.maxFractionDigits&&A(this.maxFractionDigits)},wo.prototype.outputDefined=function(){return!1},wo.prototype.serialize=function(){var A={};return this.locale&&(A.locale=this.locale.serialize()),this.currency&&(A.currency=this.currency.serialize()),this.minFractionDigits&&(A["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(A["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),A]};var To=function(A){this.type=Qe,this.input=A};To.parse=function(A,I){if(2!==A.length)return I.error("Expected 1 argument, but found "+(A.length-1)+" instead.");var Y=I.parse(A[1],1);return Y?"array"!==Y.type.kind&&"string"!==Y.type.kind&&"value"!==Y.type.kind?I.error("Expected argument of type string or array, but found "+nr(Y.type)+" instead."):new To(Y):null},To.prototype.evaluate=function(A){var I=this.input.evaluate(A);if("string"==typeof I||Array.isArray(I))return I.length;throw new An("Expected value to be of type string or array, but found "+nr(ln(I))+" instead.")},To.prototype.eachChild=function(A){A(this.input)},To.prototype.outputDefined=function(){return!1},To.prototype.serialize=function(){var A=["length"];return this.eachChild(function(I){A.push(I.serialize())}),A};var Ro={"==":ss,"!=":Xo,">":xs,"<":ys,">=":bs,"<=":ds,array:Rr,at:Ga,boolean:Rr,case:la,coalesce:so,collator:Rn,format:Lr,image:Qr,in:lo,"index-of":yo,interpolate:ji,"interpolate-hcl":ji,"interpolate-lab":ji,length:To,let:ma,literal:Cn,match:Ia,number:Rr,"number-format":wo,object:Rr,slice:Va,step:ii,string:Rr,"to-boolean":zr,"to-color":zr,"to-number":zr,"to-string":zr,var:nn,within:Kr};function Fo(A,I){var Y=I[0],ie=I[1],he=I[2],ve=I[3];Y=Y.evaluate(A),ie=ie.evaluate(A),he=he.evaluate(A);var Ee=ve?ve.evaluate(A):1,Ne=Br(Y,ie,he,Ee);if(Ne)throw new An(Ne);return new cr(Y/255*Ee,ie/255*Ee,he/255*Ee,Ee)}function Bo(A,I){return A in I}function Zo(A,I){var Y=I[A];return void 0===Y?null:Y}function co(A){return{type:A}}function ls(A){return{result:"success",value:A}}function no(A){return{result:"error",value:A}}function No(A){return"data-driven"===A["property-type"]||"cross-faded-data-driven"===A["property-type"]}function cs(A){return!!A.expression&&A.expression.parameters.indexOf("zoom")>-1}function ko(A){return!!A.expression&&A.expression.interpolated}function Bi(A){return A instanceof Number?"number":A instanceof String?"string":A instanceof Boolean?"boolean":Array.isArray(A)?"array":null===A?"null":typeof A}function je(A){return"object"==typeof A&&null!==A&&!Array.isArray(A)}function qe(A){return A}function Ke(A,I,Y){return void 0!==A?A:void 0!==I?I:void 0!==Y?Y:void 0}function it(A,I,Y,ie,he){return Ke(typeof Y===he?ie[Y]:void 0,A.default,I.default)}function gt(A,I,Y){if("number"!==Bi(Y))return Ke(A.default,I.default);var ie=A.stops.length;if(1===ie||Y<=A.stops[0][0])return A.stops[0][1];if(Y>=A.stops[ie-1][0])return A.stops[ie-1][1];var he=wn(A.stops.map(function(ve){return ve[0]}),Y);return A.stops[he][1]}function ht(A,I,Y){var ie=void 0!==A.base?A.base:1;if("number"!==Bi(Y))return Ke(A.default,I.default);var he=A.stops.length;if(1===he||Y<=A.stops[0][0])return A.stops[0][1];if(Y>=A.stops[he-1][0])return A.stops[he-1][1];var Xt,qt,pr,Sr,ve=wn(A.stops.map(function(Bt){return Bt[0]}),Y),Ee=(Xt=ie,Sr=Y-(qt=A.stops[ve][0]),0==(pr=A.stops[ve+1][0]-qt)?0:1===Xt?Sr/pr:(Math.pow(Xt,Sr)-1)/(Math.pow(Xt,pr)-1)),Ne=A.stops[ve][1],We=A.stops[ve+1][1],ct=gn[I.type]||qe;if(A.colorSpace&&"rgb"!==A.colorSpace){var dt=Do[A.colorSpace];ct=function(Bt,Xt){return dt.reverse(dt.interpolate(dt.forward(Bt),dt.forward(Xt),Ee))}}return"function"==typeof Ne.evaluate?{evaluate:function(){for(var Bt=[],Xt=arguments.length;Xt--;)Bt[Xt]=arguments[Xt];var qt=Ne.evaluate.apply(void 0,Bt),rr=We.evaluate.apply(void 0,Bt);if(void 0!==qt&&void 0!==rr)return ct(qt,rr,Ee)}}:ct(Ne,We,Ee)}function kt(A,I,Y){return"color"===I.type?Y=cr.parse(Y):"formatted"===I.type?Y=Ir.fromString(Y.toString()):"resolvedImage"===I.type?Y=vr.fromString(Y.toString()):Bi(Y)===I.type||"enum"===I.type&&I.values[Y]||(Y=void 0),Ke(Y,A.default,I.default)}Tn.register(Ro,{error:[{kind:"error"},[mt],function(A,I){throw new An(I[0].evaluate(A))}],typeof:[mt,[Re],function(A,I){return nr(ln(I[0].evaluate(A)))}],"to-rgba":[Vt(Qe,4),[jt],function(A,I){return I[0].evaluate(A).toArray()}],rgb:[jt,[Qe,Qe,Qe],Fo],rgba:[jt,[Qe,Qe,Qe,Qe],Fo],has:{type:It,overloads:[[[mt],function(A,I){return Bo(I[0].evaluate(A),A.properties())}],[[mt,Zt],function(A,I){var ie=I[1];return Bo(I[0].evaluate(A),ie.evaluate(A))}]]},get:{type:Re,overloads:[[[mt],function(A,I){return Zo(I[0].evaluate(A),A.properties())}],[[mt,Zt],function(A,I){var ie=I[1];return Zo(I[0].evaluate(A),ie.evaluate(A))}]]},"feature-state":[Re,[mt],function(A,I){return Zo(I[0].evaluate(A),A.featureState||{})}],properties:[Zt,[],function(A){return A.properties()}],"geometry-type":[mt,[],function(A){return A.geometryType()}],id:[Re,[],function(A){return A.id()}],zoom:[Qe,[],function(A){return A.globals.zoom}],"heatmap-density":[Qe,[],function(A){return A.globals.heatmapDensity||0}],"line-progress":[Qe,[],function(A){return A.globals.lineProgress||0}],accumulated:[Re,[],function(A){return void 0===A.globals.accumulated?null:A.globals.accumulated}],"+":[Qe,co(Qe),function(A,I){for(var Y=0,ie=0,he=I;ie<he.length;ie+=1)Y+=he[ie].evaluate(A);return Y}],"*":[Qe,co(Qe),function(A,I){for(var Y=1,ie=0,he=I;ie<he.length;ie+=1)Y*=he[ie].evaluate(A);return Y}],"-":{type:Qe,overloads:[[[Qe,Qe],function(A,I){var ie=I[1];return I[0].evaluate(A)-ie.evaluate(A)}],[[Qe],function(A,I){return-I[0].evaluate(A)}]]},"/":[Qe,[Qe,Qe],function(A,I){var ie=I[1];return I[0].evaluate(A)/ie.evaluate(A)}],"%":[Qe,[Qe,Qe],function(A,I){var ie=I[1];return I[0].evaluate(A)%ie.evaluate(A)}],ln2:[Qe,[],function(){return Math.LN2}],pi:[Qe,[],function(){return Math.PI}],e:[Qe,[],function(){return Math.E}],"^":[Qe,[Qe,Qe],function(A,I){var ie=I[1];return Math.pow(I[0].evaluate(A),ie.evaluate(A))}],sqrt:[Qe,[Qe],function(A,I){return Math.sqrt(I[0].evaluate(A))}],log10:[Qe,[Qe],function(A,I){return Math.log(I[0].evaluate(A))/Math.LN10}],ln:[Qe,[Qe],function(A,I){return Math.log(I[0].evaluate(A))}],log2:[Qe,[Qe],function(A,I){return Math.log(I[0].evaluate(A))/Math.LN2}],sin:[Qe,[Qe],function(A,I){return Math.sin(I[0].evaluate(A))}],cos:[Qe,[Qe],function(A,I){return Math.cos(I[0].evaluate(A))}],tan:[Qe,[Qe],function(A,I){return Math.tan(I[0].evaluate(A))}],asin:[Qe,[Qe],function(A,I){return Math.asin(I[0].evaluate(A))}],acos:[Qe,[Qe],function(A,I){return Math.acos(I[0].evaluate(A))}],atan:[Qe,[Qe],function(A,I){return Math.atan(I[0].evaluate(A))}],min:[Qe,co(Qe),function(A,I){return Math.min.apply(Math,I.map(function(Y){return Y.evaluate(A)}))}],max:[Qe,co(Qe),function(A,I){return Math.max.apply(Math,I.map(function(Y){return Y.evaluate(A)}))}],abs:[Qe,[Qe],function(A,I){return Math.abs(I[0].evaluate(A))}],round:[Qe,[Qe],function(A,I){var Y=I[0].evaluate(A);return Y<0?-Math.round(-Y):Math.round(Y)}],floor:[Qe,[Qe],function(A,I){return Math.floor(I[0].evaluate(A))}],ceil:[Qe,[Qe],function(A,I){return Math.ceil(I[0].evaluate(A))}],"filter-==":[It,[mt,Re],function(A,I){var Y=I[0],ie=I[1];return A.properties()[Y.value]===ie.value}],"filter-id-==":[It,[Re],function(A,I){var Y=I[0];return A.id()===Y.value}],"filter-type-==":[It,[mt],function(A,I){var Y=I[0];return A.geometryType()===Y.value}],"filter-<":[It,[mt,Re],function(A,I){var Y=I[0],ie=I[1],he=A.properties()[Y.value],ve=ie.value;return typeof he==typeof ve&&he<ve}],"filter-id-<":[It,[Re],function(A,I){var Y=I[0],ie=A.id(),he=Y.value;return typeof ie==typeof he&&ie<he}],"filter->":[It,[mt,Re],function(A,I){var Y=I[0],ie=I[1],he=A.properties()[Y.value],ve=ie.value;return typeof he==typeof ve&&he>ve}],"filter-id->":[It,[Re],function(A,I){var Y=I[0],ie=A.id(),he=Y.value;return typeof ie==typeof he&&ie>he}],"filter-<=":[It,[mt,Re],function(A,I){var Y=I[0],ie=I[1],he=A.properties()[Y.value],ve=ie.value;return typeof he==typeof ve&&he<=ve}],"filter-id-<=":[It,[Re],function(A,I){var Y=I[0],ie=A.id(),he=Y.value;return typeof ie==typeof he&&ie<=he}],"filter->=":[It,[mt,Re],function(A,I){var Y=I[0],ie=I[1],he=A.properties()[Y.value],ve=ie.value;return typeof he==typeof ve&&he>=ve}],"filter-id->=":[It,[Re],function(A,I){var Y=I[0],ie=A.id(),he=Y.value;return typeof ie==typeof he&&ie>=he}],"filter-has":[It,[Re],function(A,I){return I[0].value in A.properties()}],"filter-has-id":[It,[],function(A){return null!==A.id()&&void 0!==A.id()}],"filter-type-in":[It,[Vt(mt)],function(A,I){return I[0].value.indexOf(A.geometryType())>=0}],"filter-id-in":[It,[Vt(Re)],function(A,I){return I[0].value.indexOf(A.id())>=0}],"filter-in-small":[It,[mt,Vt(Re)],function(A,I){var Y=I[0];return I[1].value.indexOf(A.properties()[Y.value])>=0}],"filter-in-large":[It,[mt,Vt(Re)],function(A,I){var Y=I[0],ie=I[1];return function(he,ve,Ee,Ne){for(;Ee<=Ne;){var We=Ee+Ne>>1;if(ve[We]===he)return!0;ve[We]>he?Ne=We-1:Ee=We+1}return!1}(A.properties()[Y.value],ie.value,0,ie.value.length-1)}],all:{type:It,overloads:[[[It,It],function(A,I){var ie=I[1];return I[0].evaluate(A)&&ie.evaluate(A)}],[co(It),function(A,I){for(var Y=0,ie=I;Y<ie.length;Y+=1)if(!ie[Y].evaluate(A))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],function(A,I){var ie=I[1];return I[0].evaluate(A)||ie.evaluate(A)}],[co(It),function(A,I){for(var Y=0,ie=I;Y<ie.length;Y+=1)if(ie[Y].evaluate(A))return!0;return!1}]]},"!":[It,[It],function(A,I){return!I[0].evaluate(A)}],"is-supported-script":[It,[mt],function(A,I){var ie=A.globals&&A.globals.isSupportedScript;return!ie||ie(I[0].evaluate(A))}],upcase:[mt,[mt],function(A,I){return I[0].evaluate(A).toUpperCase()}],downcase:[mt,[mt],function(A,I){return I[0].evaluate(A).toLowerCase()}],concat:[mt,co(Re),function(A,I){return I.map(function(Y){return En(Y.evaluate(A))}).join("")}],"resolved-locale":[mt,[lt],function(A,I){return I[0].evaluate(A).resolvedLocale()}]});var Jt=function(A,I){var Y;this.expression=A,this._warningHistory={},this._evaluator=new Mn,this._defaultValue=I?"color"===(Y=I).type&&je(Y.default)?new cr(0,0,0,0):"color"===Y.type?cr.parse(Y.default)||null:void 0===Y.default?null:Y.default:null,this._enumValues=I&&"enum"===I.type?I.values:null};function Qt(A){return Array.isArray(A)&&A.length>0&&"string"==typeof A[0]&&A[0]in Ro}function Wt(A,I){var he,ve,Y=new dn(Ro,[],I?(ve={color:jt,string:mt,number:Qe,enum:mt,boolean:It,formatted:_t,resolvedImage:Dt},"array"===(he=I).type?Vt(ve[he.value]||Re,he.length):ve[he.type]):void 0),ie=Y.parse(A,void 0,void 0,void 0,I&&"string"===I.type?{typeAnnotation:"coerce"}:void 0);return ie?ls(new Jt(ie,I)):no(Y.errors)}Jt.prototype.evaluateWithoutErrorHandling=function(A,I,Y,ie,he,ve){return this._evaluator.globals=A,this._evaluator.feature=I,this._evaluator.featureState=Y,this._evaluator.canonical=ie,this._evaluator.availableImages=he||null,this._evaluator.formattedSection=ve,this.expression.evaluate(this._evaluator)},Jt.prototype.evaluate=function(A,I,Y,ie,he,ve){this._evaluator.globals=A,this._evaluator.feature=I||null,this._evaluator.featureState=Y||null,this._evaluator.canonical=ie,this._evaluator.availableImages=he||null,this._evaluator.formattedSection=ve||null;try{var Ee=this.expression.evaluate(this._evaluator);if(null==Ee||"number"==typeof Ee&&Ee!=Ee)return this._defaultValue;if(this._enumValues&&!(Ee in this._enumValues))throw new An("Expected value to be one of "+Object.keys(this._enumValues).map(function(Ne){return JSON.stringify(Ne)}).join(", ")+", but found "+JSON.stringify(Ee)+" instead.");return Ee}catch(Ne){return this._warningHistory[Ne.message]||(this._warningHistory[Ne.message]=!0,"undefined"!=typeof console&&console.warn(Ne.message)),this._defaultValue}};var tr=function(A,I){this.kind=A,this._styleExpression=I,this.isStateDependent="constant"!==A&&!jr(I.expression)};tr.prototype.evaluateWithoutErrorHandling=function(A,I,Y,ie,he,ve){return this._styleExpression.evaluateWithoutErrorHandling(A,I,Y,ie,he,ve)},tr.prototype.evaluate=function(A,I,Y,ie,he,ve){return this._styleExpression.evaluate(A,I,Y,ie,he,ve)};var ur=function(A,I,Y,ie){this.kind=A,this.zoomStops=Y,this._styleExpression=I,this.isStateDependent="camera"!==A&&!jr(I.expression),this.interpolationType=ie};function gr(A,I){if("error"===(A=Wt(A,I)).result)return A;var Y=A.value.expression,ie=mn(Y);if(!ie&&!No(I))return no([new ot("","data expressions not supported")]);var he=Nr(Y,["zoom"]);if(!he&&!cs(I))return no([new ot("","zoom expressions not supported")]);var ve=function Ne(We){var ct=null;if(We instanceof ma)ct=Ne(We.result);else if(We instanceof so)for(var dt=0,Bt=We.args;dt<Bt.length&&!(ct=Ne(Bt[dt]));dt+=1);else(We instanceof ii||We instanceof ji)&&We.input instanceof Tn&&"zoom"===We.input.name&&(ct=We);return ct instanceof ot||We.eachChild(function(qt){var rr=Ne(qt);rr instanceof ot?ct=rr:!ct&&rr?ct=new ot("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):ct&&rr&&ct!==rr&&(ct=new ot("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),ct}(Y);return ve||he?ve instanceof ot?no([ve]):ve instanceof ji&&!ko(I)?no([new ot("",'"interpolate" expressions cannot be used with this property')]):ls(ve?new ur(ie?"camera":"composite",A.value,ve.labels,ve instanceof ji?ve.interpolation:void 0):new tr(ie?"constant":"source",A.value)):no([new ot("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}ur.prototype.evaluateWithoutErrorHandling=function(A,I,Y,ie,he,ve){return this._styleExpression.evaluateWithoutErrorHandling(A,I,Y,ie,he,ve)},ur.prototype.evaluate=function(A,I,Y,ie,he,ve){return this._styleExpression.evaluate(A,I,Y,ie,he,ve)},ur.prototype.interpolationFactor=function(A,I,Y){return this.interpolationType?ji.interpolationFactor(this.interpolationType,A,I,Y):0};var xr=function(A,I){this._parameters=A,this._specification=I,pt(this,function Y(ie,he){var ve,Ee,Ne,We="color"===he.type,ct=ie.stops&&"object"==typeof ie.stops[0][0],Bt=ct||!(ct||void 0!==ie.property),Xt=ie.type||(ko(he)?"exponential":"interval");if(We&&((ie=pt({},ie)).stops&&(ie.stops=ie.stops.map(function(ri){return[ri[0],cr.parse(ri[1])]})),ie.default=cr.parse(ie.default?ie.default:he.default)),ie.colorSpace&&"rgb"!==ie.colorSpace&&!Do[ie.colorSpace])throw new Error("Unknown color space: "+ie.colorSpace);if("exponential"===Xt)ve=ht;else if("interval"===Xt)ve=gt;else if("categorical"===Xt){ve=it,Ee=Object.create(null);for(var qt=0,rr=ie.stops;qt<rr.length;qt+=1){var pr=rr[qt];Ee[pr[0]]=pr[1]}Ne=typeof ie.stops[0][0]}else{if("identity"!==Xt)throw new Error('Unknown function type "'+Xt+'"');ve=kt}if(ct){for(var Sr={},Mr=[],Dr=0;Dr<ie.stops.length;Dr++){var Fr=ie.stops[Dr],Hr=Fr[0].zoom;void 0===Sr[Hr]&&(Sr[Hr]={zoom:Hr,type:ie.type,property:ie.property,default:ie.default,stops:[]},Mr.push(Hr)),Sr[Hr].stops.push([Fr[0].value,Fr[1]])}for(var un=[],vn=0,Fn=Mr;vn<Fn.length;vn+=1){var Dn=Fn[vn];un.push([Sr[Dn].zoom,Y(Sr[Dn],he)])}var Hn={name:"linear"};return{kind:"composite",interpolationType:Hn,interpolationFactor:ji.interpolationFactor.bind(void 0,Hn),zoomStops:un.map(function(ri){return ri[0]}),evaluate:function(ri,Wn){var ci=ri.zoom;return ht({stops:un,base:ie.base},he,ci).evaluate(ci,Wn)}}}if(Bt){var ti="exponential"===Xt?{name:"exponential",base:void 0!==ie.base?ie.base:1}:null;return{kind:"camera",interpolationType:ti,interpolationFactor:ji.interpolationFactor.bind(void 0,ti),zoomStops:ie.stops.map(function(ri){return ri[0]}),evaluate:function(ri){return ve(ie,he,ri.zoom,Ee,Ne)}}}return{kind:"source",evaluate:function(ri,Wn){var ci=Wn&&Wn.properties?Wn.properties[ie.property]:void 0;return void 0===ci?Ke(ie.default,he.default):ve(ie,he,ci,Ee,Ne)}}}(this._parameters,this._specification))};function Pr(A){var I=A.key,Y=A.value,ie=A.valueSpec||{},he=A.objectElementValidators||{},ve=A.style,Ee=A.styleSpec,Ne=[],We=Bi(Y);if("object"!==We)return[new Xe(I,Y,"object expected, "+We+" found")];for(var ct in Y){var dt=ct.split(".")[0],Bt=ie[dt]||ie["*"],Xt=void 0;if(he[dt])Xt=he[dt];else if(ie[dt])Xt=ar;else if(he["*"])Xt=he["*"];else{if(!ie["*"]){Ne.push(new Xe(I,Y[ct],'unknown property "'+ct+'"'));continue}Xt=ar}Ne=Ne.concat(Xt({key:(I&&I+".")+ct,value:Y[ct],valueSpec:Bt,style:ve,styleSpec:Ee,object:Y,objectKey:ct},Y))}for(var qt in ie)he[qt]||ie[qt].required&&void 0===ie[qt].default&&void 0===Y[qt]&&Ne.push(new Xe(I,Y,'missing required property "'+qt+'"'));return Ne}function en(A){var I=A.value,Y=A.valueSpec,ie=A.style,he=A.styleSpec,ve=A.key,Ee=A.arrayElementValidator||ar;if("array"!==Bi(I))return[new Xe(ve,I,"array expected, "+Bi(I)+" found")];if(Y.length&&I.length!==Y.length)return[new Xe(ve,I,"array length "+Y.length+" expected, length "+I.length+" found")];if(Y["min-length"]&&I.length<Y["min-length"])return[new Xe(ve,I,"array length at least "+Y["min-length"]+" expected, length "+I.length+" found")];var Ne={type:Y.value,values:Y.values};he.$version<7&&(Ne.function=Y.function),"object"===Bi(Y.value)&&(Ne=Y.value);for(var We=[],ct=0;ct<I.length;ct++)We=We.concat(Ee({array:I,arrayIndex:ct,value:I[ct],valueSpec:Ne,style:ie,styleSpec:he,key:ve+"["+ct+"]"}));return We}function hn(A){var I=A.key,Y=A.value,ie=A.valueSpec,he=Bi(Y);return"number"===he&&Y!=Y&&(he="NaN"),"number"!==he?[new Xe(I,Y,"number expected, "+he+" found")]:"minimum"in ie&&Y<ie.minimum?[new Xe(I,Y,Y+" is less than the minimum value "+ie.minimum)]:"maximum"in ie&&Y>ie.maximum?[new Xe(I,Y,Y+" is greater than the maximum value "+ie.maximum)]:[]}function Sn(A){var I,Y,ie,he=A.valueSpec,ve=ut(A.value.type),Ee={},Ne="categorical"!==ve&&void 0===A.value.property,We=!Ne,ct="array"===Bi(A.value.stops)&&"array"===Bi(A.value.stops[0])&&"object"===Bi(A.value.stops[0][0]),dt=Pr({key:A.key,value:A.value,valueSpec:A.styleSpec.function,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{stops:function(qt){if("identity"===ve)return[new Xe(qt.key,qt.value,'identity function may not have a "stops" property')];var rr=[],pr=qt.value;return rr=rr.concat(en({key:qt.key,value:pr,valueSpec:qt.valueSpec,style:qt.style,styleSpec:qt.styleSpec,arrayElementValidator:Bt})),"array"===Bi(pr)&&0===pr.length&&rr.push(new Xe(qt.key,pr,"array must have at least one stop")),rr},default:function(qt){return ar({key:qt.key,value:qt.value,valueSpec:he,style:qt.style,styleSpec:qt.styleSpec})}}});return"identity"===ve&&Ne&&dt.push(new Xe(A.key,A.value,'missing required property "property"')),"identity"===ve||A.value.stops||dt.push(new Xe(A.key,A.value,'missing required property "stops"')),"exponential"===ve&&A.valueSpec.expression&&!ko(A.valueSpec)&&dt.push(new Xe(A.key,A.value,"exponential functions not supported")),A.styleSpec.$version>=8&&(We&&!No(A.valueSpec)?dt.push(new Xe(A.key,A.value,"property functions not supported")):Ne&&!cs(A.valueSpec)&&dt.push(new Xe(A.key,A.value,"zoom functions not supported"))),"categorical"!==ve&&!ct||void 0!==A.value.property||dt.push(new Xe(A.key,A.value,'"property" property is required')),dt;function Bt(qt){var rr=[],pr=qt.value,Sr=qt.key;if("array"!==Bi(pr))return[new Xe(Sr,pr,"array expected, "+Bi(pr)+" found")];if(2!==pr.length)return[new Xe(Sr,pr,"array length 2 expected, length "+pr.length+" found")];if(ct){if("object"!==Bi(pr[0]))return[new Xe(Sr,pr,"object expected, "+Bi(pr[0])+" found")];if(void 0===pr[0].zoom)return[new Xe(Sr,pr,"object stop key must have zoom")];if(void 0===pr[0].value)return[new Xe(Sr,pr,"object stop key must have value")];if(ie&&ie>ut(pr[0].zoom))return[new Xe(Sr,pr[0].zoom,"stop zoom values must appear in ascending order")];ut(pr[0].zoom)!==ie&&(ie=ut(pr[0].zoom),Y=void 0,Ee={}),rr=rr.concat(Pr({key:Sr+"[0]",value:pr[0],valueSpec:{zoom:{}},style:qt.style,styleSpec:qt.styleSpec,objectElementValidators:{zoom:hn,value:Xt}}))}else rr=rr.concat(Xt({key:Sr+"[0]",value:pr[0],valueSpec:{},style:qt.style,styleSpec:qt.styleSpec},pr));return Qt(St(pr[1]))?rr.concat([new Xe(Sr+"[1]",pr[1],"expressions are not allowed in function stops.")]):rr.concat(ar({key:Sr+"[1]",value:pr[1],valueSpec:he,style:qt.style,styleSpec:qt.styleSpec}))}function Xt(qt,rr){var pr=Bi(qt.value),Sr=ut(qt.value),Mr=null!==qt.value?qt.value:rr;if(I){if(pr!==I)return[new Xe(qt.key,Mr,pr+" stop domain type must match previous stop domain type "+I)]}else I=pr;if("number"!==pr&&"string"!==pr&&"boolean"!==pr)return[new Xe(qt.key,Mr,"stop domain value must be a number, string, or boolean")];if("number"!==pr&&"categorical"!==ve){var Dr="number expected, "+pr+" found";return No(he)&&void 0===ve&&(Dr+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Xe(qt.key,Mr,Dr)]}return"categorical"!==ve||"number"!==pr||isFinite(Sr)&&Math.floor(Sr)===Sr?"categorical"!==ve&&"number"===pr&&void 0!==Y&&Sr<Y?[new Xe(qt.key,Mr,"stop domain values must appear in ascending order")]:(Y=Sr,"categorical"===ve&&Sr in Ee?[new Xe(qt.key,Mr,"stop domain values must be unique")]:(Ee[Sr]=!0,[])):[new Xe(qt.key,Mr,"integer expected, found "+Sr)]}}function Pn(A){var I=("property"===A.expressionContext?gr:Wt)(St(A.value),A.valueSpec);if("error"===I.result)return I.value.map(function(ie){return new Xe(""+A.key+ie.key,A.value,ie.message)});var Y=I.value.expression||I.value._styleExpression.expression;if("property"===A.expressionContext&&"text-font"===A.propertyKey&&!Y.outputDefined())return[new Xe(A.key,A.value,'Invalid data expression for "'+A.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===A.expressionContext&&"layout"===A.propertyType&&!jr(Y))return[new Xe(A.key,A.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===A.expressionContext&&!jr(Y))return[new Xe(A.key,A.value,'"feature-state" data expressions are not supported with filters.')];if(A.expressionContext&&0===A.expressionContext.indexOf("cluster")){if(!Nr(Y,["zoom","feature-state"]))return[new Xe(A.key,A.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===A.expressionContext&&!mn(Y))return[new Xe(A.key,A.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Un(A){var I=A.key,Y=A.value,ie=A.valueSpec,he=[];return Array.isArray(ie.values)?-1===ie.values.indexOf(ut(Y))&&he.push(new Xe(I,Y,"expected one of ["+ie.values.join(", ")+"], "+JSON.stringify(Y)+" found")):-1===Object.keys(ie.values).indexOf(ut(Y))&&he.push(new Xe(I,Y,"expected one of ["+Object.keys(ie.values).join(", ")+"], "+JSON.stringify(Y)+" found")),he}function In(A){if(!0===A||!1===A)return!0;if(!Array.isArray(A)||0===A.length)return!1;switch(A[0]){case"has":return A.length>=2&&"$id"!==A[1]&&"$type"!==A[1];case"in":return A.length>=3&&("string"!=typeof A[1]||Array.isArray(A[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==A.length||Array.isArray(A[1])||Array.isArray(A[2]);case"any":case"all":for(var I=0,Y=A.slice(1);I<Y.length;I+=1){var ie=Y[I];if(!In(ie)&&"boolean"!=typeof ie)return!1}return!0;default:return!0}}xr.deserialize=function(A){return new xr(A._parameters,A._specification)},xr.serialize=function(A){return{_parameters:A._parameters,_specification:A._specification}};var hi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function bi(A){if(null==A)return{filter:function(){return!0},needGeometry:!1};In(A)||(A=Ii(A));var I=Wt(A,hi);if("error"===I.result)throw new Error(I.value.map(function(Y){return Y.key+": "+Y.message}).join(", "));return{filter:function(Y,ie,he){return I.value.evaluate(Y,ie,{},he)},needGeometry:function Y(ie){if(!Array.isArray(ie))return!1;if("within"===ie[0])return!0;for(var he=1;he<ie.length;he++)if(Y(ie[he]))return!0;return!1}(A)}}function Oi(A,I){return A<I?-1:A>I?1:0}function Ii(A){if(!A)return!0;var I,Y=A[0];return A.length<=1?"any"!==Y:"=="===Y?zi(A[1],A[2],"=="):"!="===Y?ta(zi(A[1],A[2],"==")):"<"===Y||">"===Y||"<="===Y||">="===Y?zi(A[1],A[2],Y):"any"===Y?(I=A.slice(1),["any"].concat(I.map(Ii))):"all"===Y?["all"].concat(A.slice(1).map(Ii)):"none"===Y?["all"].concat(A.slice(1).map(Ii).map(ta)):"in"===Y?va(A[1],A.slice(2)):"!in"===Y?ta(va(A[1],A.slice(2))):"has"===Y?pa(A[1]):"!has"===Y?ta(pa(A[1])):"within"!==Y||A}function zi(A,I,Y){switch(A){case"$type":return["filter-type-"+Y,I];case"$id":return["filter-id-"+Y,I];default:return["filter-"+Y,A,I]}}function va(A,I){if(0===I.length)return!1;switch(A){case"$type":return["filter-type-in",["literal",I]];case"$id":return["filter-id-in",["literal",I]];default:return I.length>200&&!I.some(function(Y){return typeof Y!=typeof I[0]})?["filter-in-large",A,["literal",I.sort(Oi)]]:["filter-in-small",A,["literal",I]]}}function pa(A){switch(A){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",A]}}function ta(A){return["!",A]}function ra(A){return In(St(A.value))?Pn(pt({},A,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function I(Y){var ie=Y.value,he=Y.key;if("array"!==Bi(ie))return[new Xe(he,ie,"array expected, "+Bi(ie)+" found")];var ve,Ee=Y.styleSpec,Ne=[];if(ie.length<1)return[new Xe(he,ie,"filter array must have at least 1 element")];switch(Ne=Ne.concat(Un({key:he+"[0]",value:ie[0],valueSpec:Ee.filter_operator,style:Y.style,styleSpec:Y.styleSpec})),ut(ie[0])){case"<":case"<=":case">":case">=":ie.length>=2&&"$type"===ut(ie[1])&&Ne.push(new Xe(he,ie,'"$type" cannot be use with operator "'+ie[0]+'"'));case"==":case"!=":3!==ie.length&&Ne.push(new Xe(he,ie,'filter array for operator "'+ie[0]+'" must have 3 elements'));case"in":case"!in":ie.length>=2&&"string"!==(ve=Bi(ie[1]))&&Ne.push(new Xe(he+"[1]",ie[1],"string expected, "+ve+" found"));for(var We=2;We<ie.length;We++)ve=Bi(ie[We]),"$type"===ut(ie[1])?Ne=Ne.concat(Un({key:he+"["+We+"]",value:ie[We],valueSpec:Ee.geometry_type,style:Y.style,styleSpec:Y.styleSpec})):"string"!==ve&&"number"!==ve&&"boolean"!==ve&&Ne.push(new Xe(he+"["+We+"]",ie[We],"string, number, or boolean expected, "+ve+" found"));break;case"any":case"all":case"none":for(var ct=1;ct<ie.length;ct++)Ne=Ne.concat(I({key:he+"["+ct+"]",value:ie[ct],style:Y.style,styleSpec:Y.styleSpec}));break;case"has":case"!has":ve=Bi(ie[1]),2!==ie.length?Ne.push(new Xe(he,ie,'filter array for "'+ie[0]+'" operator must have 2 elements')):"string"!==ve&&Ne.push(new Xe(he+"[1]",ie[1],"string expected, "+ve+" found"));break;case"within":ve=Bi(ie[1]),2!==ie.length?Ne.push(new Xe(he,ie,'filter array for "'+ie[0]+'" operator must have 2 elements')):"object"!==ve&&Ne.push(new Xe(he+"[1]",ie[1],"object expected, "+ve+" found"))}return Ne}(A)}function da(A,I){var Y=A.key,ie=A.style,he=A.styleSpec,ve=A.value,Ee=A.objectKey,Ne=he[I+"_"+A.layerType];if(!Ne)return[];var We=Ee.match(/^(.*)-transition$/);if("paint"===I&&We&&Ne[We[1]]&&Ne[We[1]].transition)return ar({key:Y,value:ve,valueSpec:he.transition,style:ie,styleSpec:he});var ct,dt=A.valueSpec||Ne[Ee];if(!dt)return[new Xe(Y,ve,'unknown property "'+Ee+'"')];if("string"===Bi(ve)&&No(dt)&&!dt.tokens&&(ct=/^{([^}]+)}$/.exec(ve)))return[new Xe(Y,ve,'"'+Ee+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(ct[1])+" }`.")];var Bt=[];return"symbol"===A.layerType&&("text-field"===Ee&&ie&&!ie.glyphs&&Bt.push(new Xe(Y,ve,'use of "text-field" requires a style "glyphs" property')),"text-font"===Ee&&je(St(ve))&&"identity"===ut(ve.type)&&Bt.push(new Xe(Y,ve,'"text-font" does not support identity functions'))),Bt.concat(ar({key:A.key,value:ve,valueSpec:dt,style:ie,styleSpec:he,expressionContext:"property",propertyType:I,propertyKey:Ee}))}function Oa(A){return da(A,"paint")}function Ya(A){return da(A,"layout")}function Wa(A){var I=[],Y=A.value,ie=A.key,he=A.style,ve=A.styleSpec;Y.type||Y.ref||I.push(new Xe(ie,Y,'either "type" or "ref" is required'));var Ee,Ne=ut(Y.type),We=ut(Y.ref);if(Y.id)for(var ct=ut(Y.id),dt=0;dt<A.arrayIndex;dt++){var Bt=he.layers[dt];ut(Bt.id)===ct&&I.push(new Xe(ie,Y.id,'duplicate layer id "'+Y.id+'", previously used at line '+Bt.id.__line__))}if("ref"in Y)["type","source","source-layer","filter","layout"].forEach(function(rr){rr in Y&&I.push(new Xe(ie,Y[rr],'"'+rr+'" is prohibited for ref layers'))}),he.layers.forEach(function(rr){ut(rr.id)===We&&(Ee=rr)}),Ee?Ee.ref?I.push(new Xe(ie,Y.ref,"ref cannot reference another ref layer")):Ne=ut(Ee.type):I.push(new Xe(ie,Y.ref,'ref layer "'+We+'" not found'));else if("background"!==Ne)if(Y.source){var Xt=he.sources&&he.sources[Y.source],qt=Xt&&ut(Xt.type);Xt?"vector"===qt&&"raster"===Ne?I.push(new Xe(ie,Y.source,'layer "'+Y.id+'" requires a raster source')):"raster"===qt&&"raster"!==Ne?I.push(new Xe(ie,Y.source,'layer "'+Y.id+'" requires a vector source')):"vector"!==qt||Y["source-layer"]?"raster-dem"===qt&&"hillshade"!==Ne?I.push(new Xe(ie,Y.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==Ne||!Y.paint||!Y.paint["line-gradient"]||"geojson"===qt&&Xt.lineMetrics||I.push(new Xe(ie,Y,'layer "'+Y.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):I.push(new Xe(ie,Y,'layer "'+Y.id+'" must specify a "source-layer"')):I.push(new Xe(ie,Y.source,'source "'+Y.source+'" not found'))}else I.push(new Xe(ie,Y,'missing required property "source"'));return I=I.concat(Pr({key:ie,value:Y,valueSpec:ve.layer,style:A.style,styleSpec:A.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ar({key:ie+".type",value:Y.type,valueSpec:ve.layer.type,style:A.style,styleSpec:A.styleSpec,object:Y,objectKey:"type"})},filter:ra,layout:function(rr){return Pr({layer:Y,key:rr.key,value:rr.value,style:rr.style,styleSpec:rr.styleSpec,objectElementValidators:{"*":function(pr){return Ya(pt({layerType:Ne},pr))}}})},paint:function(rr){return Pr({layer:Y,key:rr.key,value:rr.value,style:rr.style,styleSpec:rr.styleSpec,objectElementValidators:{"*":function(pr){return Oa(pt({layerType:Ne},pr))}}})}}}))}function Xa(A){var I=A.value,Y=A.key,ie=Bi(I);return"string"!==ie?[new Xe(Y,I,"string expected, "+ie+" found")]:[]}var Za={promoteId:function(A){var I=A.key,Y=A.value;if("string"===Bi(Y))return Xa({key:I,value:Y});var ie=[];for(var he in Y)ie.push.apply(ie,Xa({key:I+"."+he,value:Y[he]}));return ie}};function Ei(A){var I=A.value,Y=A.key,ie=A.styleSpec,he=A.style;if(!I.type)return[new Xe(Y,I,'"type" is required')];var ve,Ee=ut(I.type);switch(Ee){case"vector":case"raster":case"raster-dem":return Pr({key:Y,value:I,valueSpec:ie["source_"+Ee.replace("-","_")],style:A.style,styleSpec:ie,objectElementValidators:Za});case"geojson":if(ve=Pr({key:Y,value:I,valueSpec:ie.source_geojson,style:he,styleSpec:ie,objectElementValidators:Za}),I.cluster)for(var Ne in I.clusterProperties){var We=I.clusterProperties[Ne],ct=We[0],Bt="string"==typeof ct?[ct,["accumulated"],["get",Ne]]:ct;ve.push.apply(ve,Pn({key:Y+"."+Ne+".map",value:We[1],expressionContext:"cluster-map"})),ve.push.apply(ve,Pn({key:Y+"."+Ne+".reduce",value:Bt,expressionContext:"cluster-reduce"}))}return ve;case"video":return Pr({key:Y,value:I,valueSpec:ie.source_video,style:he,styleSpec:ie});case"image":return Pr({key:Y,value:I,valueSpec:ie.source_image,style:he,styleSpec:ie});case"canvas":return[new Xe(Y,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Un({key:Y+".type",value:I.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:he,styleSpec:ie})}}function ft(A){var I=A.value,Y=A.styleSpec,ie=Y.light,he=A.style,ve=[],Ee=Bi(I);if(void 0===I)return ve;if("object"!==Ee)return ve.concat([new Xe("light",I,"object expected, "+Ee+" found")]);for(var Ne in I){var We=Ne.match(/^(.*)-transition$/);ve=ve.concat(We&&ie[We[1]]&&ie[We[1]].transition?ar({key:Ne,value:I[Ne],valueSpec:Y.transition,style:he,styleSpec:Y}):ie[Ne]?ar({key:Ne,value:I[Ne],valueSpec:ie[Ne],style:he,styleSpec:Y}):[new Xe(Ne,I[Ne],'unknown property "'+Ne+'"')])}return ve}var zt={"*":function(){return[]},array:en,boolean:function(A){var I=A.value,Y=A.key,ie=Bi(I);return"boolean"!==ie?[new Xe(Y,I,"boolean expected, "+ie+" found")]:[]},number:hn,color:function(A){var I=A.key,Y=A.value,ie=Bi(Y);return"string"!==ie?[new Xe(I,Y,"color expected, "+ie+" found")]:null===hr(Y)?[new Xe(I,Y,'color expected, "'+Y+'" found')]:[]},constants:at,enum:Un,filter:ra,function:Sn,layer:Wa,object:Pr,source:Ei,light:ft,string:Xa,formatted:function(A){return 0===Xa(A).length?[]:Pn(A)},resolvedImage:function(A){return 0===Xa(A).length?[]:Pn(A)}};function ar(A){var I=A.value,Y=A.valueSpec,ie=A.styleSpec;return Y.expression&&je(ut(I))?Sn(A):Y.expression&&Qt(St(I))?Pn(A):Y.type&&zt[Y.type]?zt[Y.type](A):Pr(pt({},A,{valueSpec:Y.type?ie[Y.type]:Y}))}function Ht(A){var I=A.value,Y=A.key,ie=Xa(A);return ie.length||(-1===I.indexOf("{fontstack}")&&ie.push(new Xe(Y,I,'"glyphs" url must include a "{fontstack}" token')),-1===I.indexOf("{range}")&&ie.push(new Xe(Y,I,'"glyphs" url must include a "{range}" token'))),ie}function or(A,I){void 0===I&&(I=Ce);var Y=[];return Y=Y.concat(ar({key:"",value:A,valueSpec:I.$root,styleSpec:I,style:A,objectElementValidators:{glyphs:Ht,"*":function(){return[]}}})),A.constants&&(Y=Y.concat(at({key:"constants",value:A.constants,style:A,styleSpec:I}))),Er(Y)}function Er(A){return[].concat(A).sort(function(I,Y){return I.line-Y.line})}function Or(A){return function(){for(var I=[],Y=arguments.length;Y--;)I[Y]=arguments[Y];return Er(A.apply(this,I))}}or.source=Or(Ei),or.light=Or(ft),or.layer=Or(Wa),or.filter=Or(ra),or.paintProperty=Or(Oa),or.layoutProperty=Or(Ya);var Gr=or,an=Gr.light,tn=Gr.paintProperty,pn=Gr.layoutProperty;function xn(A,I){var Y=!1;if(I&&I.length)for(var ie=0,he=I;ie<he.length;ie+=1)A.fire(new Le(new Error(he[ie].message))),Y=!0;return Y}var on=bn;function bn(A,I,Y){var ie=this.cells=[];if(A instanceof ArrayBuffer){this.arrayBuffer=A;var he=new Int32Array(this.arrayBuffer);A=he[0],this.d=(I=he[1])+2*(Y=he[2]);for(var ve=0;ve<this.d*this.d;ve++){var Ee=he[3+ve],Ne=he[3+ve+1];ie.push(Ee===Ne?null:he.subarray(Ee,Ne))}var ct=he[3+ie.length+1];this.keys=he.subarray(he[3+ie.length],ct),this.bboxes=he.subarray(ct),this.insert=this._insertReadonly}else{this.d=I+2*Y;for(var dt=0;dt<this.d*this.d;dt++)ie.push([]);this.keys=[],this.bboxes=[]}this.n=I,this.extent=A,this.padding=Y,this.scale=I/A,this.uid=0;var Bt=Y/I*A;this.min=-Bt,this.max=A+Bt}bn.prototype.insert=function(A,I,Y,ie,he){this._forEachCell(I,Y,ie,he,this._insertCell,this.uid++),this.keys.push(A),this.bboxes.push(I),this.bboxes.push(Y),this.bboxes.push(ie),this.bboxes.push(he)},bn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},bn.prototype._insertCell=function(A,I,Y,ie,he,ve){this.cells[he].push(ve)},bn.prototype.query=function(A,I,Y,ie,he){var ve=this.min,Ee=this.max;if(A<=ve&&I<=ve&&Ee<=Y&&Ee<=ie&&!he)return Array.prototype.slice.call(this.keys);var Ne=[];return this._forEachCell(A,I,Y,ie,this._queryCell,Ne,{},he),Ne},bn.prototype._queryCell=function(A,I,Y,ie,he,ve,Ee,Ne){var We=this.cells[he];if(null!==We)for(var ct=this.keys,dt=this.bboxes,Bt=0;Bt<We.length;Bt++){var Xt=We[Bt];if(void 0===Ee[Xt]){var qt=4*Xt;(Ne?Ne(dt[qt+0],dt[qt+1],dt[qt+2],dt[qt+3]):A<=dt[qt+2]&&I<=dt[qt+3]&&Y>=dt[qt+0]&&ie>=dt[qt+1])?(Ee[Xt]=!0,ve.push(ct[Xt])):Ee[Xt]=!1}}},bn.prototype._forEachCell=function(A,I,Y,ie,he,ve,Ee,Ne){for(var We=this._convertToCellCoord(A),ct=this._convertToCellCoord(I),dt=this._convertToCellCoord(Y),Bt=this._convertToCellCoord(ie),Xt=We;Xt<=dt;Xt++)for(var qt=ct;qt<=Bt;qt++){var rr=this.d*qt+Xt;if((!Ne||Ne(this._convertFromCellCoord(Xt),this._convertFromCellCoord(qt),this._convertFromCellCoord(Xt+1),this._convertFromCellCoord(qt+1)))&&he.call(this,A,I,Y,ie,rr,ve,Ee,Ne))return}},bn.prototype._convertFromCellCoord=function(A){return(A-this.padding)/this.scale},bn.prototype._convertToCellCoord=function(A){return Math.max(0,Math.min(this.d-1,Math.floor(A*this.scale)+this.padding))},bn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var A=this.cells,I=3+this.cells.length+1+1,Y=0,ie=0;ie<this.cells.length;ie++)Y+=this.cells[ie].length;var he=new Int32Array(I+Y+this.keys.length+this.bboxes.length);he[0]=this.extent,he[1]=this.n,he[2]=this.padding;for(var ve=I,Ee=0;Ee<A.length;Ee++){var Ne=A[Ee];he[3+Ee]=ve,he.set(Ne,ve),ve+=Ne.length}return he[3+A.length]=ve,he.set(this.keys,ve),he[3+A.length+1]=ve+=this.keys.length,he.set(this.bboxes,ve),ve+=this.bboxes.length,he.buffer};var zn=self.ImageData,jn=self.ImageBitmap,$n={};function Wr(A,I,Y){void 0===Y&&(Y={}),Object.defineProperty(I,"_classRegistryKey",{value:A,writeable:!1}),$n[A]={klass:I,omit:Y.omit||[],shallow:Y.shallow||[]}}for(var Jn in Wr("Object",Object),on.serialize=function(A,I){var Y=A.toArrayBuffer();return I&&I.push(Y),{buffer:Y}},on.deserialize=function(A){return new on(A.buffer)},Wr("Grid",on),Wr("Color",cr),Wr("Error",Error),Wr("ResolvedImage",vr),Wr("StylePropertyFunction",xr),Wr("StyleExpression",Jt,{omit:["_evaluator"]}),Wr("ZoomDependentExpression",ur),Wr("ZoomConstantExpression",tr),Wr("CompoundExpression",Tn,{omit:["_evaluate"]}),Ro)Ro[Jn]._classRegistryKey||Wr("Expression_"+Jn,Ro[Jn]);function Ln(A){return A&&"undefined"!=typeof ArrayBuffer&&(A instanceof ArrayBuffer||A.constructor&&"ArrayBuffer"===A.constructor.name)}function Bn(A){return jn&&A instanceof jn}function Zn(A,I){if(null==A||"boolean"==typeof A||"number"==typeof A||"string"==typeof A||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp)return A;if(Ln(A)||Bn(A))return I&&I.push(A),A;if(ArrayBuffer.isView(A)){var Y=A;return I&&I.push(Y.buffer),Y}if(A instanceof zn)return I&&I.push(A.data.buffer),A;if(Array.isArray(A)){for(var ie=[],he=0,ve=A;he<ve.length;he+=1)ie.push(Zn(ve[he],I));return ie}if("object"==typeof A){var Ne=A.constructor,We=Ne._classRegistryKey;if(!We)throw new Error("can't serialize object of unregistered class");var ct=Ne.serialize?Ne.serialize(A,I):{};if(!Ne.serialize){for(var dt in A)if(A.hasOwnProperty(dt)&&!($n[We].omit.indexOf(dt)>=0)){var Bt=A[dt];ct[dt]=$n[We].shallow.indexOf(dt)>=0?Bt:Zn(Bt,I)}A instanceof Error&&(ct.message=A.message)}if(ct.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==We&&(ct.$name=We),ct}throw new Error("can't serialize object of type "+typeof A)}function xi(A){if(null==A||"boolean"==typeof A||"number"==typeof A||"string"==typeof A||A instanceof Boolean||A instanceof Number||A instanceof String||A instanceof Date||A instanceof RegExp||Ln(A)||Bn(A)||ArrayBuffer.isView(A)||A instanceof zn)return A;if(Array.isArray(A))return A.map(xi);if("object"==typeof A){var I=A.$name||"Object",Y=$n[I].klass;if(!Y)throw new Error("can't deserialize unregistered class "+I);if(Y.deserialize)return Y.deserialize(A);for(var ie=Object.create(Y.prototype),he=0,ve=Object.keys(A);he<ve.length;he+=1){var Ee=ve[he];if("$name"!==Ee){var Ne=A[Ee];ie[Ee]=$n[I].shallow.indexOf(Ee)>=0?Ne:xi(Ne)}}return ie}throw new Error("can't deserialize object of type "+typeof A)}var Ai=function(){this.first=!0};Ai.prototype.update=function(A,I){var Y=Math.floor(A);return this.first?(this.first=!1,this.lastIntegerZoom=Y,this.lastIntegerZoomTime=0,this.lastZoom=A,this.lastFloorZoom=Y,!0):(this.lastFloorZoom>Y?(this.lastIntegerZoom=Y+1,this.lastIntegerZoomTime=I):this.lastFloorZoom<Y&&(this.lastIntegerZoom=Y,this.lastIntegerZoomTime=I),A!==this.lastZoom&&(this.lastZoom=A,this.lastFloorZoom=Y,!0))};var kn={"Latin-1 Supplement":function(A){return A>=128&&A<=255},Arabic:function(A){return A>=1536&&A<=1791},"Arabic Supplement":function(A){return A>=1872&&A<=1919},"Arabic Extended-A":function(A){return A>=2208&&A<=2303},"Hangul Jamo":function(A){return A>=4352&&A<=4607},"Unified Canadian Aboriginal Syllabics":function(A){return A>=5120&&A<=5759},Khmer:function(A){return A>=6016&&A<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(A){return A>=6320&&A<=6399},"General Punctuation":function(A){return A>=8192&&A<=8303},"Letterlike Symbols":function(A){return A>=8448&&A<=8527},"Number Forms":function(A){return A>=8528&&A<=8591},"Miscellaneous Technical":function(A){return A>=8960&&A<=9215},"Control Pictures":function(A){return A>=9216&&A<=9279},"Optical Character Recognition":function(A){return A>=9280&&A<=9311},"Enclosed Alphanumerics":function(A){return A>=9312&&A<=9471},"Geometric Shapes":function(A){return A>=9632&&A<=9727},"Miscellaneous Symbols":function(A){return A>=9728&&A<=9983},"Miscellaneous Symbols and Arrows":function(A){return A>=11008&&A<=11263},"CJK Radicals Supplement":function(A){return A>=11904&&A<=12031},"Kangxi Radicals":function(A){return A>=12032&&A<=12255},"Ideographic Description Characters":function(A){return A>=12272&&A<=12287},"CJK Symbols and Punctuation":function(A){return A>=12288&&A<=12351},Hiragana:function(A){return A>=12352&&A<=12447},Katakana:function(A){return A>=12448&&A<=12543},Bopomofo:function(A){return A>=12544&&A<=12591},"Hangul Compatibility Jamo":function(A){return A>=12592&&A<=12687},Kanbun:function(A){return A>=12688&&A<=12703},"Bopomofo Extended":function(A){return A>=12704&&A<=12735},"CJK Strokes":function(A){return A>=12736&&A<=12783},"Katakana Phonetic Extensions":function(A){return A>=12784&&A<=12799},"Enclosed CJK Letters and Months":function(A){return A>=12800&&A<=13055},"CJK Compatibility":function(A){return A>=13056&&A<=13311},"CJK Unified Ideographs Extension A":function(A){return A>=13312&&A<=19903},"Yijing Hexagram Symbols":function(A){return A>=19904&&A<=19967},"CJK Unified Ideographs":function(A){return A>=19968&&A<=40959},"Yi Syllables":function(A){return A>=40960&&A<=42127},"Yi Radicals":function(A){return A>=42128&&A<=42191},"Hangul Jamo Extended-A":function(A){return A>=43360&&A<=43391},"Hangul Syllables":function(A){return A>=44032&&A<=55215},"Hangul Jamo Extended-B":function(A){return A>=55216&&A<=55295},"Private Use Area":function(A){return A>=57344&&A<=63743},"CJK Compatibility Ideographs":function(A){return A>=63744&&A<=64255},"Arabic Presentation Forms-A":function(A){return A>=64336&&A<=65023},"Vertical Forms":function(A){return A>=65040&&A<=65055},"CJK Compatibility Forms":function(A){return A>=65072&&A<=65103},"Small Form Variants":function(A){return A>=65104&&A<=65135},"Arabic Presentation Forms-B":function(A){return A>=65136&&A<=65279},"Halfwidth and Fullwidth Forms":function(A){return A>=65280&&A<=65519}};function Li(A){for(var I=0,Y=A;I<Y.length;I+=1)if(fi(Y[I].charCodeAt(0)))return!0;return!1}function Ti(A){return!(kn.Arabic(A)||kn["Arabic Supplement"](A)||kn["Arabic Extended-A"](A)||kn["Arabic Presentation Forms-A"](A)||kn["Arabic Presentation Forms-B"](A))}function fi(A){return!(746!==A&&747!==A&&(A<4352||!(kn["Bopomofo Extended"](A)||kn.Bopomofo(A)||kn["CJK Compatibility Forms"](A)&&!(A>=65097&&A<=65103)||kn["CJK Compatibility Ideographs"](A)||kn["CJK Compatibility"](A)||kn["CJK Radicals Supplement"](A)||kn["CJK Strokes"](A)||!(!kn["CJK Symbols and Punctuation"](A)||A>=12296&&A<=12305||A>=12308&&A<=12319||12336===A)||kn["CJK Unified Ideographs Extension A"](A)||kn["CJK Unified Ideographs"](A)||kn["Enclosed CJK Letters and Months"](A)||kn["Hangul Compatibility Jamo"](A)||kn["Hangul Jamo Extended-A"](A)||kn["Hangul Jamo Extended-B"](A)||kn["Hangul Jamo"](A)||kn["Hangul Syllables"](A)||kn.Hiragana(A)||kn["Ideographic Description Characters"](A)||kn.Kanbun(A)||kn["Kangxi Radicals"](A)||kn["Katakana Phonetic Extensions"](A)||kn.Katakana(A)&&12540!==A||!(!kn["Halfwidth and Fullwidth Forms"](A)||65288===A||65289===A||65293===A||A>=65306&&A<=65310||65339===A||65341===A||65343===A||A>=65371&&A<=65503||65507===A||A>=65512&&A<=65519)||!(!kn["Small Form Variants"](A)||A>=65112&&A<=65118||A>=65123&&A<=65126)||kn["Unified Canadian Aboriginal Syllabics"](A)||kn["Unified Canadian Aboriginal Syllabics Extended"](A)||kn["Vertical Forms"](A)||kn["Yijing Hexagram Symbols"](A)||kn["Yi Syllables"](A)||kn["Yi Radicals"](A))))}function Ci(A){return!(fi(A)||(I=A,kn["Latin-1 Supplement"](I)&&(167===I||169===I||174===I||177===I||188===I||189===I||190===I||215===I||247===I)||kn["General Punctuation"](I)&&(8214===I||8224===I||8225===I||8240===I||8241===I||8251===I||8252===I||8258===I||8263===I||8264===I||8265===I||8273===I)||kn["Letterlike Symbols"](I)||kn["Number Forms"](I)||kn["Miscellaneous Technical"](I)&&(I>=8960&&I<=8967||I>=8972&&I<=8991||I>=8996&&I<=9e3||9003===I||I>=9085&&I<=9114||I>=9150&&I<=9165||9167===I||I>=9169&&I<=9179||I>=9186&&I<=9215)||kn["Control Pictures"](I)&&9251!==I||kn["Optical Character Recognition"](I)||kn["Enclosed Alphanumerics"](I)||kn["Geometric Shapes"](I)||kn["Miscellaneous Symbols"](I)&&!(I>=9754&&I<=9759)||kn["Miscellaneous Symbols and Arrows"](I)&&(I>=11026&&I<=11055||I>=11088&&I<=11097||I>=11192&&I<=11243)||kn["CJK Symbols and Punctuation"](I)||kn.Katakana(I)||kn["Private Use Area"](I)||kn["CJK Compatibility Forms"](I)||kn["Small Form Variants"](I)||kn["Halfwidth and Fullwidth Forms"](I)||8734===I||8756===I||8757===I||I>=9984&&I<=10087||I>=10102&&I<=10131||65532===I||65533===I));var I}function _i(A){return A>=1424&&A<=2303||kn["Arabic Presentation Forms-A"](A)||kn["Arabic Presentation Forms-B"](A)}function Xi(A,I){return!(!I&&_i(A)||A>=2304&&A<=3583||A>=3840&&A<=4255||kn.Khmer(A))}function Kn(A){for(var I=0,Y=A;I<Y.length;I+=1)if(_i(Y[I].charCodeAt(0)))return!0;return!1}var Vi="deferred",za="loading",qo="loaded",uo=null,di="unavailable",ca=null,fo=function(A){A&&"string"==typeof A&&A.indexOf("NetworkError")>-1&&(di="error"),uo&&uo(A)};function Hi(){ya.fire(new ke("pluginStateChange",{pluginStatus:di,pluginURL:ca}))}var ya=new Pe,Ba=function(){return di},Ji=function(){if(di!==Vi||!ca)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");di=za,Hi(),ca&&bt({url:ca},function(A){A?fo(A):(di=qo,Hi())})},io={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return di===qo||null!=io.applyArabicShaping},isLoading:function(){return di===za},setState:function(A){di=A.pluginStatus,ca=A.pluginURL},isParsed:function(){return null!=io.applyArabicShaping&&null!=io.processBidirectionalText&&null!=io.processStyledBidirectionalText},getPluginURL:function(){return ca}},Ki=function(A,I){this.zoom=A,I?(this.now=I.now,this.fadeDuration=I.fadeDuration,this.zoomHistory=I.zoomHistory,this.transition=I.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ai,this.transition={})};Ki.prototype.isSupportedScript=function(A){return function(I,Y){for(var ie=0,he=I;ie<he.length;ie+=1)if(!Xi(he[ie].charCodeAt(0),Y))return!1;return!0}(A,io.isLoaded())},Ki.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ki.prototype.getCrossfadeParameters=function(){var A=this.zoom,I=A-Math.floor(A),Y=this.crossFadingFactor();return A>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:I+(1-I)*Y}:{fromScale:.5,toScale:1,t:1-(1-Y)*I}};var Ja=function(A,I){this.property=A,this.value=I,this.expression=function(Y,ie){if(je(Y))return new xr(Y,ie);if(Qt(Y)){var he=gr(Y,ie);if("error"===he.result)throw new Error(he.value.map(function(Ee){return Ee.key+": "+Ee.message}).join(", "));return he.value}var ve=Y;return"string"==typeof Y&&"color"===ie.type&&(ve=cr.parse(Y)),{kind:"constant",evaluate:function(){return ve}}}(void 0===I?A.specification.default:I,A.specification)};Ja.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Ja.prototype.possiblyEvaluate=function(A,I,Y){return this.property.possiblyEvaluate(this,A,I,Y)};var rs=function(A){this.property=A,this.value=new Ja(A,void 0)};rs.prototype.transitioned=function(A,I){return new Is(this.property,this.value,I,f({},A.transition,this.transition),A.now)},rs.prototype.untransitioned=function(){return new Is(this.property,this.value,null,{},0)};var Jo=function(A){this._properties=A,this._values=Object.create(A.defaultTransitionablePropertyValues)};Jo.prototype.getValue=function(A){return k(this._values[A].value.value)},Jo.prototype.setValue=function(A,I){this._values.hasOwnProperty(A)||(this._values[A]=new rs(this._values[A].property)),this._values[A].value=new Ja(this._values[A].property,null===I?void 0:k(I))},Jo.prototype.getTransition=function(A){return k(this._values[A].transition)},Jo.prototype.setTransition=function(A,I){this._values.hasOwnProperty(A)||(this._values[A]=new rs(this._values[A].property)),this._values[A].transition=k(I)||void 0},Jo.prototype.serialize=function(){for(var A={},I=0,Y=Object.keys(this._values);I<Y.length;I+=1){var ie=Y[I],he=this.getValue(ie);void 0!==he&&(A[ie]=he);var ve=this.getTransition(ie);void 0!==ve&&(A[ie+"-transition"]=ve)}return A},Jo.prototype.transitioned=function(A,I){for(var Y=new La(this._properties),ie=0,he=Object.keys(this._values);ie<he.length;ie+=1){var ve=he[ie];Y._values[ve]=this._values[ve].transitioned(A,I._values[ve])}return Y},Jo.prototype.untransitioned=function(){for(var A=new La(this._properties),I=0,Y=Object.keys(this._values);I<Y.length;I+=1){var ie=Y[I];A._values[ie]=this._values[ie].untransitioned()}return A};var Is=function(A,I,Y,ie,he){this.property=A,this.value=I,this.begin=he+ie.delay||0,this.end=this.begin+ie.duration||0,A.specification.transition&&(ie.delay||ie.duration)&&(this.prior=Y)};Is.prototype.possiblyEvaluate=function(A,I,Y){var ie=A.now||0,he=this.value.possiblyEvaluate(A,I,Y),ve=this.prior;if(ve){if(ie>this.end)return this.prior=null,he;if(this.value.isDataDriven())return this.prior=null,he;if(ie<this.begin)return ve.possiblyEvaluate(A,I,Y);var Ee=(ie-this.begin)/(this.end-this.begin);return this.property.interpolate(ve.possiblyEvaluate(A,I,Y),he,function(Ne){if(Ne<=0)return 0;if(Ne>=1)return 1;var We=Ne*Ne,ct=We*Ne;return 4*(Ne<.5?ct:3*(Ne-We)+ct-.75)}(Ee))}return he};var La=function(A){this._properties=A,this._values=Object.create(A.defaultTransitioningPropertyValues)};La.prototype.possiblyEvaluate=function(A,I,Y){for(var ie=new Ko(this._properties),he=0,ve=Object.keys(this._values);he<ve.length;he+=1){var Ee=ve[he];ie._values[Ee]=this._values[Ee].possiblyEvaluate(A,I,Y)}return ie},La.prototype.hasTransition=function(){for(var A=0,I=Object.keys(this._values);A<I.length;A+=1)if(this._values[I[A]].prior)return!0;return!1};var Os=function(A){this._properties=A,this._values=Object.create(A.defaultPropertyValues)};Os.prototype.getValue=function(A){return k(this._values[A].value)},Os.prototype.setValue=function(A,I){this._values[A]=new Ja(this._values[A].property,null===I?void 0:k(I))},Os.prototype.serialize=function(){for(var A={},I=0,Y=Object.keys(this._values);I<Y.length;I+=1){var ie=Y[I],he=this.getValue(ie);void 0!==he&&(A[ie]=he)}return A},Os.prototype.possiblyEvaluate=function(A,I,Y){for(var ie=new Ko(this._properties),he=0,ve=Object.keys(this._values);he<ve.length;he+=1){var Ee=ve[he];ie._values[Ee]=this._values[Ee].possiblyEvaluate(A,I,Y)}return ie};var Ca=function(A,I,Y){this.property=A,this.value=I,this.parameters=Y};Ca.prototype.isConstant=function(){return"constant"===this.value.kind},Ca.prototype.constantOr=function(A){return"constant"===this.value.kind?this.value.value:A},Ca.prototype.evaluate=function(A,I,Y,ie){return this.property.evaluate(this.value,this.parameters,A,I,Y,ie)};var Ko=function(A){this._properties=A,this._values=Object.create(A.defaultPossiblyEvaluatedValues)};Ko.prototype.get=function(A){return this._values[A]};var ai=function(A){this.specification=A};ai.prototype.possiblyEvaluate=function(A,I){return A.expression.evaluate(I)},ai.prototype.interpolate=function(A,I,Y){var ie=gn[this.specification.type];return ie?ie(A,I,Y):A};var gi=function(A,I){this.specification=A,this.overrides=I};gi.prototype.possiblyEvaluate=function(A,I,Y,ie){return new Ca(this,"constant"===A.expression.kind||"camera"===A.expression.kind?{kind:"constant",value:A.expression.evaluate(I,null,{},Y,ie)}:A.expression,I)},gi.prototype.interpolate=function(A,I,Y){if("constant"!==A.value.kind||"constant"!==I.value.kind)return A;if(void 0===A.value.value||void 0===I.value.value)return new Ca(this,{kind:"constant",value:void 0},A.parameters);var ie=gn[this.specification.type];return ie?new Ca(this,{kind:"constant",value:ie(A.value.value,I.value.value,Y)},A.parameters):A},gi.prototype.evaluate=function(A,I,Y,ie,he,ve){return"constant"===A.kind?A.value:A.evaluate(I,Y,ie,he,ve)};var zs=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.possiblyEvaluate=function(Y,ie,he,ve){if(void 0===Y.value)return new Ca(this,{kind:"constant",value:void 0},ie);if("constant"===Y.expression.kind){var Ee=Y.expression.evaluate(ie,null,{},he,ve),Ne="resolvedImage"===Y.property.specification.type&&"string"!=typeof Ee?Ee.name:Ee,We=this._calculate(Ne,Ne,Ne,ie);return new Ca(this,{kind:"constant",value:We},ie)}if("camera"===Y.expression.kind){var ct=this._calculate(Y.expression.evaluate({zoom:ie.zoom-1}),Y.expression.evaluate({zoom:ie.zoom}),Y.expression.evaluate({zoom:ie.zoom+1}),ie);return new Ca(this,{kind:"constant",value:ct},ie)}return new Ca(this,Y.expression,ie)},I.prototype.evaluate=function(Y,ie,he,ve,Ee,Ne){if("source"===Y.kind){var We=Y.evaluate(ie,he,ve,Ee,Ne);return this._calculate(We,We,We,ie)}return"composite"===Y.kind?this._calculate(Y.evaluate({zoom:Math.floor(ie.zoom)-1},he,ve),Y.evaluate({zoom:Math.floor(ie.zoom)},he,ve),Y.evaluate({zoom:Math.floor(ie.zoom)+1},he,ve),ie):Y.value},I.prototype._calculate=function(Y,ie,he,ve){return ve.zoom>ve.zoomHistory.lastIntegerZoom?{from:Y,to:ie}:{from:he,to:ie}},I.prototype.interpolate=function(Y){return Y},I}(gi),Ds=function(A){this.specification=A};Ds.prototype.possiblyEvaluate=function(A,I,Y,ie){if(void 0!==A.value){if("constant"===A.expression.kind){var he=A.expression.evaluate(I,null,{},Y,ie);return this._calculate(he,he,he,I)}return this._calculate(A.expression.evaluate(new Ki(Math.floor(I.zoom-1),I)),A.expression.evaluate(new Ki(Math.floor(I.zoom),I)),A.expression.evaluate(new Ki(Math.floor(I.zoom+1),I)),I)}},Ds.prototype._calculate=function(A,I,Y,ie){return ie.zoom>ie.zoomHistory.lastIntegerZoom?{from:A,to:I}:{from:Y,to:I}},Ds.prototype.interpolate=function(A){return A};var Qo=function(A){this.specification=A};Qo.prototype.possiblyEvaluate=function(A,I,Y,ie){return!!A.expression.evaluate(I,null,{},Y,ie)},Qo.prototype.interpolate=function(){return!1};var Ao=function(A){for(var I in this.properties=A,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],A){var Y=A[I];Y.specification.overridable&&this.overridableProperties.push(I);var ie=this.defaultPropertyValues[I]=new Ja(Y,void 0),he=this.defaultTransitionablePropertyValues[I]=new rs(Y);this.defaultTransitioningPropertyValues[I]=he.untransitioned(),this.defaultPossiblyEvaluatedValues[I]=ie.possiblyEvaluate({})}};Wr("DataDrivenProperty",gi),Wr("DataConstantProperty",ai),Wr("CrossFadedDataDrivenProperty",zs),Wr("CrossFadedProperty",Ds),Wr("ColorRampProperty",Qo);var jo=function(A){function I(Y,ie){if(A.call(this),this.id=Y.id,this.type=Y.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==Y.type&&(this.metadata=(Y=Y).metadata,this.minzoom=Y.minzoom,this.maxzoom=Y.maxzoom,"background"!==Y.type&&(this.source=Y.source,this.sourceLayer=Y["source-layer"],this.filter=Y.filter),ie.layout&&(this._unevaluatedLayout=new Os(ie.layout)),ie.paint)){for(var he in this._transitionablePaint=new Jo(ie.paint),Y.paint)this.setPaintProperty(he,Y.paint[he],{validate:!1});for(var ve in Y.layout)this.setLayoutProperty(ve,Y.layout[ve],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ko(ie.paint)}}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},I.prototype.getLayoutProperty=function(Y){return"visibility"===Y?this.visibility:this._unevaluatedLayout.getValue(Y)},I.prototype.setLayoutProperty=function(Y,ie,he){void 0===he&&(he={}),null!=ie&&this._validate(pn,"layers."+this.id+".layout."+Y,Y,ie,he)||("visibility"!==Y?this._unevaluatedLayout.setValue(Y,ie):this.visibility=ie)},I.prototype.getPaintProperty=function(Y){return w(Y,"-transition")?this._transitionablePaint.getTransition(Y.slice(0,-"-transition".length)):this._transitionablePaint.getValue(Y)},I.prototype.setPaintProperty=function(Y,ie,he){if(void 0===he&&(he={}),null!=ie&&this._validate(tn,"layers."+this.id+".paint."+Y,Y,ie,he))return!1;if(w(Y,"-transition"))return this._transitionablePaint.setTransition(Y.slice(0,-"-transition".length),ie||void 0),!1;var Ee=this._transitionablePaint._values[Y],Ne="cross-faded-data-driven"===Ee.property.specification["property-type"],We=Ee.value.isDataDriven(),ct=Ee.value;this._transitionablePaint.setValue(Y,ie),this._handleSpecialPaintPropertyUpdate(Y);var dt=this._transitionablePaint._values[Y].value;return dt.isDataDriven()||We||Ne||this._handleOverridablePaintPropertyUpdate(Y,ct,dt)},I.prototype._handleSpecialPaintPropertyUpdate=function(Y){},I.prototype._handleOverridablePaintPropertyUpdate=function(Y,ie,he){return!1},I.prototype.isHidden=function(Y){return!!(this.minzoom&&Y<this.minzoom)||!!(this.maxzoom&&Y>=this.maxzoom)||"none"===this.visibility},I.prototype.updateTransitions=function(Y){this._transitioningPaint=this._transitionablePaint.transitioned(Y,this._transitioningPaint)},I.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},I.prototype.recalculate=function(Y,ie){Y.getCrossfadeParameters&&(this._crossfadeParameters=Y.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Y,void 0,ie)),this.paint=this._transitioningPaint.possiblyEvaluate(Y,void 0,ie)},I.prototype.serialize=function(){var Y={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Y.layout=Y.layout||{},Y.layout.visibility=this.visibility),T(Y,function(ie,he){return!(void 0===ie||"layout"===he&&!Object.keys(ie).length||"paint"===he&&!Object.keys(ie).length)})},I.prototype._validate=function(Y,ie,he,ve,Ee){return void 0===Ee&&(Ee={}),(!Ee||!1!==Ee.validate)&&xn(this,Y.call(Gr,{key:ie,layerType:this.type,objectKey:he,value:ve,styleSpec:Ce,style:{glyphs:!0,sprite:!0}}))},I.prototype.is3D=function(){return!1},I.prototype.isTileClipped=function(){return!1},I.prototype.hasOffscreenPass=function(){return!1},I.prototype.resize=function(){},I.prototype.isStateDependent=function(){for(var Y in this.paint._values){var ie=this.paint.get(Y);if(ie instanceof Ca&&No(ie.property.specification)&&("source"===ie.value.kind||"composite"===ie.value.kind)&&ie.value.isStateDependent)return!0}return!1},I}(Pe),Ws={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},_s=function(A,I){this._structArray=A,this._pos1=I*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},qi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Qi(A,I){void 0===I&&(I=1);var Y=0,ie=0;return{members:A.map(function(he){var Ee=Ws[he.type].BYTES_PER_ELEMENT,Ne=Y=us(Y,Math.max(I,Ee)),We=he.components||1;return ie=Math.max(ie,Ee),Y+=Ee*We,{name:he.name,type:he.type,components:We,offset:Ne}}),size:us(Y,Math.max(ie,I)),alignment:I}}function us(A,I){return Math.ceil(A/I)*I}qi.serialize=function(A,I){return A._trim(),I&&(A.isTransferred=!0,I.push(A.arrayBuffer)),{length:A.length,arrayBuffer:A.arrayBuffer}},qi.deserialize=function(A){var I=Object.create(this.prototype);return I.arrayBuffer=A.arrayBuffer,I.length=A.length,I.capacity=A.arrayBuffer.byteLength/I.bytesPerElement,I._refreshViews(),I},qi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},qi.prototype.clear=function(){this.length=0},qi.prototype.resize=function(A){this.reserve(A),this.length=A},qi.prototype.reserve=function(A){if(A>this.capacity){this.capacity=Math.max(A,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var I=this.uint8;this._refreshViews(),I&&this.uint8.set(I)}},qi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ns=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie){var he=this.length;return this.resize(he+1),this.emplace(he,Y,ie)},I.prototype.emplace=function(Y,ie,he){var ve=2*Y;return this.int16[ve+0]=ie,this.int16[ve+1]=he,Y},I}(qi);ns.prototype.bytesPerElement=4,Wr("StructArrayLayout2i4",ns);var Aa=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he,ve){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Y,ie,he,ve)},I.prototype.emplace=function(Y,ie,he,ve,Ee){var Ne=4*Y;return this.int16[Ne+0]=ie,this.int16[Ne+1]=he,this.int16[Ne+2]=ve,this.int16[Ne+3]=Ee,Y},I}(qi);Aa.prototype.bytesPerElement=8,Wr("StructArrayLayout4i8",Aa);var fs=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he,ve,Ee,Ne){var We=this.length;return this.resize(We+1),this.emplace(We,Y,ie,he,ve,Ee,Ne)},I.prototype.emplace=function(Y,ie,he,ve,Ee,Ne,We){var ct=6*Y;return this.int16[ct+0]=ie,this.int16[ct+1]=he,this.int16[ct+2]=ve,this.int16[ct+3]=Ee,this.int16[ct+4]=Ne,this.int16[ct+5]=We,Y},I}(qi);fs.prototype.bytesPerElement=12,Wr("StructArrayLayout2i4i12",fs);var ws=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he,ve,Ee,Ne){var We=this.length;return this.resize(We+1),this.emplace(We,Y,ie,he,ve,Ee,Ne)},I.prototype.emplace=function(Y,ie,he,ve,Ee,Ne,We){var ct=4*Y,dt=8*Y;return this.int16[ct+0]=ie,this.int16[ct+1]=he,this.uint8[dt+4]=ve,this.uint8[dt+5]=Ee,this.uint8[dt+6]=Ne,this.uint8[dt+7]=We,Y},I}(qi);ws.prototype.bytesPerElement=8,Wr("StructArrayLayout2i4ub8",ws);var gs=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt){var Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt)},I.prototype.emplace=function(Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt,Xt){var qt=9*Y,rr=18*Y;return this.uint16[qt+0]=ie,this.uint16[qt+1]=he,this.uint16[qt+2]=ve,this.uint16[qt+3]=Ee,this.uint16[qt+4]=Ne,this.uint16[qt+5]=We,this.uint16[qt+6]=ct,this.uint16[qt+7]=dt,this.uint8[rr+16]=Bt,this.uint8[rr+17]=Xt,Y},I}(qi);gs.prototype.bytesPerElement=18,Wr("StructArrayLayout8ui2ub18",gs);var Ts=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt,Xt,qt){var rr=this.length;return this.resize(rr+1),this.emplace(rr,Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt,Xt,qt)},I.prototype.emplace=function(Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt,Xt,qt,rr){var pr=12*Y;return this.int16[pr+0]=ie,this.int16[pr+1]=he,this.int16[pr+2]=ve,this.int16[pr+3]=Ee,this.uint16[pr+4]=Ne,this.uint16[pr+5]=We,this.uint16[pr+6]=ct,this.uint16[pr+7]=dt,this.int16[pr+8]=Bt,this.int16[pr+9]=Xt,this.int16[pr+10]=qt,this.int16[pr+11]=rr,Y},I}(qi);Ts.prototype.bytesPerElement=24,Wr("StructArrayLayout4i4ui4i24",Ts);var is=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he){var ve=this.length;return this.resize(ve+1),this.emplace(ve,Y,ie,he)},I.prototype.emplace=function(Y,ie,he,ve){var Ee=3*Y;return this.float32[Ee+0]=ie,this.float32[Ee+1]=he,this.float32[Ee+2]=ve,Y},I}(qi);is.prototype.bytesPerElement=12,Wr("StructArrayLayout3f12",is);var Xs=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y){var ie=this.length;return this.resize(ie+1),this.emplace(ie,Y)},I.prototype.emplace=function(Y,ie){return this.uint32[1*Y+0]=ie,Y},I}(qi);Xs.prototype.bytesPerElement=4,Wr("StructArrayLayout1ul4",Xs);var il=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he,ve,Ee,Ne,We,ct,dt){var Bt=this.length;return this.resize(Bt+1),this.emplace(Bt,Y,ie,he,ve,Ee,Ne,We,ct,dt)},I.prototype.emplace=function(Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt){var Xt=10*Y,qt=5*Y;return this.int16[Xt+0]=ie,this.int16[Xt+1]=he,this.int16[Xt+2]=ve,this.int16[Xt+3]=Ee,this.int16[Xt+4]=Ne,this.int16[Xt+5]=We,this.uint32[qt+3]=ct,this.uint16[Xt+8]=dt,this.uint16[Xt+9]=Bt,Y},I}(qi);il.prototype.bytesPerElement=20,Wr("StructArrayLayout6i1ul2ui20",il);var hs=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he,ve,Ee,Ne){var We=this.length;return this.resize(We+1),this.emplace(We,Y,ie,he,ve,Ee,Ne)},I.prototype.emplace=function(Y,ie,he,ve,Ee,Ne,We){var ct=6*Y;return this.int16[ct+0]=ie,this.int16[ct+1]=he,this.int16[ct+2]=ve,this.int16[ct+3]=Ee,this.int16[ct+4]=Ne,this.int16[ct+5]=We,Y},I}(qi);hs.prototype.bytesPerElement=12,Wr("StructArrayLayout2i2i2i12",hs);var Zs=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he,ve,Ee){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,Y,ie,he,ve,Ee)},I.prototype.emplace=function(Y,ie,he,ve,Ee,Ne){var We=4*Y,ct=8*Y;return this.float32[We+0]=ie,this.float32[We+1]=he,this.float32[We+2]=ve,this.int16[ct+6]=Ee,this.int16[ct+7]=Ne,Y},I}(qi);Zs.prototype.bytesPerElement=16,Wr("StructArrayLayout2f1f2i16",Zs);var ks=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he,ve){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Y,ie,he,ve)},I.prototype.emplace=function(Y,ie,he,ve,Ee){var Ne=12*Y,We=3*Y;return this.uint8[Ne+0]=ie,this.uint8[Ne+1]=he,this.float32[We+1]=ve,this.float32[We+2]=Ee,Y},I}(qi);ks.prototype.bytesPerElement=12,Wr("StructArrayLayout2ub2f12",ks);var Ka=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he){var ve=this.length;return this.resize(ve+1),this.emplace(ve,Y,ie,he)},I.prototype.emplace=function(Y,ie,he,ve){var Ee=3*Y;return this.uint16[Ee+0]=ie,this.uint16[Ee+1]=he,this.uint16[Ee+2]=ve,Y},I}(qi);Ka.prototype.bytesPerElement=6,Wr("StructArrayLayout3ui6",Ka);var al=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt,Xt,qt,rr,pr,Sr,Mr,Dr){var Fr=this.length;return this.resize(Fr+1),this.emplace(Fr,Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt,Xt,qt,rr,pr,Sr,Mr,Dr)},I.prototype.emplace=function(Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt,Xt,qt,rr,pr,Sr,Mr,Dr,Fr){var Hr=24*Y,un=12*Y,vn=48*Y;return this.int16[Hr+0]=ie,this.int16[Hr+1]=he,this.uint16[Hr+2]=ve,this.uint16[Hr+3]=Ee,this.uint32[un+2]=Ne,this.uint32[un+3]=We,this.uint32[un+4]=ct,this.uint16[Hr+10]=dt,this.uint16[Hr+11]=Bt,this.uint16[Hr+12]=Xt,this.float32[un+7]=qt,this.float32[un+8]=rr,this.uint8[vn+36]=pr,this.uint8[vn+37]=Sr,this.uint8[vn+38]=Mr,this.uint32[un+10]=Dr,this.int16[Hr+22]=Fr,Y},I}(qi);al.prototype.bytesPerElement=48,Wr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",al);var ol=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt,Xt,qt,rr,pr,Sr,Mr,Dr,Fr,Hr,un,vn,Fn,Dn,Hn,ti,ri,Wn,ci){var si=this.length;return this.resize(si+1),this.emplace(si,Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt,Xt,qt,rr,pr,Sr,Mr,Dr,Fr,Hr,un,vn,Fn,Dn,Hn,ti,ri,Wn,ci)},I.prototype.emplace=function(Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt,Xt,qt,rr,pr,Sr,Mr,Dr,Fr,Hr,un,vn,Fn,Dn,Hn,ti,ri,Wn,ci,si){var ni=34*Y,Gi=17*Y;return this.int16[ni+0]=ie,this.int16[ni+1]=he,this.int16[ni+2]=ve,this.int16[ni+3]=Ee,this.int16[ni+4]=Ne,this.int16[ni+5]=We,this.int16[ni+6]=ct,this.int16[ni+7]=dt,this.uint16[ni+8]=Bt,this.uint16[ni+9]=Xt,this.uint16[ni+10]=qt,this.uint16[ni+11]=rr,this.uint16[ni+12]=pr,this.uint16[ni+13]=Sr,this.uint16[ni+14]=Mr,this.uint16[ni+15]=Dr,this.uint16[ni+16]=Fr,this.uint16[ni+17]=Hr,this.uint16[ni+18]=un,this.uint16[ni+19]=vn,this.uint16[ni+20]=Fn,this.uint16[ni+21]=Dn,this.uint16[ni+22]=Hn,this.uint32[Gi+12]=ti,this.float32[Gi+13]=ri,this.float32[Gi+14]=Wn,this.float32[Gi+15]=ci,this.float32[Gi+16]=si,Y},I}(qi);ol.prototype.bytesPerElement=68,Wr("StructArrayLayout8i15ui1ul4f68",ol);var le=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y){var ie=this.length;return this.resize(ie+1),this.emplace(ie,Y)},I.prototype.emplace=function(Y,ie){return this.float32[1*Y+0]=ie,Y},I}(qi);le.prototype.bytesPerElement=4,Wr("StructArrayLayout1f4",le);var C=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he){var ve=this.length;return this.resize(ve+1),this.emplace(ve,Y,ie,he)},I.prototype.emplace=function(Y,ie,he,ve){var Ee=3*Y;return this.int16[Ee+0]=ie,this.int16[Ee+1]=he,this.int16[Ee+2]=ve,Y},I}(qi);C.prototype.bytesPerElement=6,Wr("StructArrayLayout3i6",C);var z=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he){var ve=this.length;return this.resize(ve+1),this.emplace(ve,Y,ie,he)},I.prototype.emplace=function(Y,ie,he,ve){var Ne=4*Y;return this.uint32[2*Y+0]=ie,this.uint16[Ne+2]=he,this.uint16[Ne+3]=ve,Y},I}(qi);z.prototype.bytesPerElement=8,Wr("StructArrayLayout1ul2ui8",z);var F=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie){var he=this.length;return this.resize(he+1),this.emplace(he,Y,ie)},I.prototype.emplace=function(Y,ie,he){var ve=2*Y;return this.uint16[ve+0]=ie,this.uint16[ve+1]=he,Y},I}(qi);F.prototype.bytesPerElement=4,Wr("StructArrayLayout2ui4",F);var q=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y){var ie=this.length;return this.resize(ie+1),this.emplace(ie,Y)},I.prototype.emplace=function(Y,ie){return this.uint16[1*Y+0]=ie,Y},I}(qi);q.prototype.bytesPerElement=2,Wr("StructArrayLayout1ui2",q);var ae=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie){var he=this.length;return this.resize(he+1),this.emplace(he,Y,ie)},I.prototype.emplace=function(Y,ie,he){var ve=2*Y;return this.float32[ve+0]=ie,this.float32[ve+1]=he,Y},I}(qi);ae.prototype.bytesPerElement=8,Wr("StructArrayLayout2f8",ae);var ue=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},I.prototype.emplaceBack=function(Y,ie,he,ve){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Y,ie,he,ve)},I.prototype.emplace=function(Y,ie,he,ve,Ee){var Ne=4*Y;return this.float32[Ne+0]=ie,this.float32[Ne+1]=he,this.float32[Ne+2]=ve,this.float32[Ne+3]=Ee,Y},I}(qi);ue.prototype.bytesPerElement=16,Wr("StructArrayLayout4f16",ue);var de=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I;var Y={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Y.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Y.x1.get=function(){return this._structArray.int16[this._pos2+2]},Y.y1.get=function(){return this._structArray.int16[this._pos2+3]},Y.x2.get=function(){return this._structArray.int16[this._pos2+4]},Y.y2.get=function(){return this._structArray.int16[this._pos2+5]},Y.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Y.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Y.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Y.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(I.prototype,Y),I}(_s);de.prototype.size=20;var ye=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.get=function(Y){return new de(this,Y)},I}(il);Wr("CollisionBoxArray",ye);var Ae=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I;var Y={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Y.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Y.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Y.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Y.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Y.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Y.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Y.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Y.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Y.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Y.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Y.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Y.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Y.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Y.placedOrientation.set=function(ie){this._structArray.uint8[this._pos1+37]=ie},Y.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Y.hidden.set=function(ie){this._structArray.uint8[this._pos1+38]=ie},Y.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Y.crossTileID.set=function(ie){this._structArray.uint32[this._pos4+10]=ie},Y.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(I.prototype,Y),I}(_s);Ae.prototype.size=48;var Ue=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.get=function(Y){return new Ae(this,Y)},I}(al);Wr("PlacedSymbolArray",Ue);var Ge=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I;var Y={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Y.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Y.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Y.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Y.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Y.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Y.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Y.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Y.key.get=function(){return this._structArray.uint16[this._pos2+8]},Y.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Y.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Y.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Y.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Y.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Y.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Y.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Y.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Y.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Y.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Y.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Y.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Y.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Y.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Y.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Y.crossTileID.set=function(ie){this._structArray.uint32[this._pos4+12]=ie},Y.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Y.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Y.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Y.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(I.prototype,Y),I}(_s);Ge.prototype.size=68;var nt=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.get=function(Y){return new Ge(this,Y)},I}(ol);Wr("SymbolInstanceArray",nt);var xt=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.getoffsetX=function(Y){return this.float32[1*Y+0]},I}(le);Wr("GlyphOffsetArray",xt);var At=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.getx=function(Y){return this.int16[3*Y+0]},I.prototype.gety=function(Y){return this.int16[3*Y+1]},I.prototype.gettileUnitDistanceFromAnchor=function(Y){return this.int16[3*Y+2]},I}(C);Wr("SymbolLineVertexArray",At);var wt=function(A){function I(){A.apply(this,arguments)}A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I;var Y={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Y.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Y.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Y.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(I.prototype,Y),I}(_s);wt.prototype.size=8;var Tt=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.get=function(Y){return new wt(this,Y)},I}(z);Wr("FeatureIndexArray",Tt);var yt=Qi([{name:"a_pos",components:2,type:"Int16"}],4).members,Ft=function(A){void 0===A&&(A=[]),this.segments=A};function Ot(A,I){return 256*(A=l(Math.floor(A),0,255))+l(Math.floor(I),0,255)}Ft.prototype.prepareSegment=function(A,I,Y,ie){var he=this.segments[this.segments.length-1];return A>Ft.MAX_VERTEX_ARRAY_LENGTH&&M("Max vertices per segment is "+Ft.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+A),(!he||he.vertexLength+A>Ft.MAX_VERTEX_ARRAY_LENGTH||he.sortKey!==ie)&&(he={vertexOffset:I.length,primitiveOffset:Y.length,vertexLength:0,primitiveLength:0},void 0!==ie&&(he.sortKey=ie),this.segments.push(he)),he},Ft.prototype.get=function(){return this.segments},Ft.prototype.destroy=function(){for(var A=0,I=this.segments;A<I.length;A+=1){var Y=I[A];for(var ie in Y.vaos)Y.vaos[ie].destroy()}},Ft.simpleSegment=function(A,I,Y,ie){return new Ft([{vertexOffset:A,primitiveOffset:I,vertexLength:Y,primitiveLength:ie,vaos:{},sortKey:0}])},Ft.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Wr("SegmentVector",Ft);var Nt=Qi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),er=n(function(A){A.exports=function(I,Y){var ie,he,ve,Ee,Ne,We,ct,dt;for(he=I.length-(ie=3&I.length),ve=Y,Ne=3432918353,We=461845907,dt=0;dt<he;)ct=255&I.charCodeAt(dt)|(255&I.charCodeAt(++dt))<<8|(255&I.charCodeAt(++dt))<<16|(255&I.charCodeAt(++dt))<<24,++dt,ve=27492+(65535&(Ee=5*(65535&(ve=(ve^=ct=(65535&(ct=(ct=(65535&ct)*Ne+(((ct>>>16)*Ne&65535)<<16)&4294967295)<<15|ct>>>17))*We+(((ct>>>16)*We&65535)<<16)&4294967295)<<13|ve>>>19))+((5*(ve>>>16)&65535)<<16)&4294967295))+((58964+(Ee>>>16)&65535)<<16);switch(ct=0,ie){case 3:ct^=(255&I.charCodeAt(dt+2))<<16;case 2:ct^=(255&I.charCodeAt(dt+1))<<8;case 1:ve^=ct=(65535&(ct=(ct=(65535&(ct^=255&I.charCodeAt(dt)))*Ne+(((ct>>>16)*Ne&65535)<<16)&4294967295)<<15|ct>>>17))*We+(((ct>>>16)*We&65535)<<16)&4294967295}return ve^=I.length,ve=2246822507*(65535&(ve^=ve>>>16))+((2246822507*(ve>>>16)&65535)<<16)&4294967295,ve=3266489909*(65535&(ve^=ve>>>13))+((3266489909*(ve>>>16)&65535)<<16)&4294967295,(ve^=ve>>>16)>>>0}}),fr=n(function(A){A.exports=function(I,Y){for(var ie,he=I.length,ve=Y^he,Ee=0;he>=4;)ie=1540483477*(65535&(ie=255&I.charCodeAt(Ee)|(255&I.charCodeAt(++Ee))<<8|(255&I.charCodeAt(++Ee))<<16|(255&I.charCodeAt(++Ee))<<24))+((1540483477*(ie>>>16)&65535)<<16),ve=1540483477*(65535&ve)+((1540483477*(ve>>>16)&65535)<<16)^(ie=1540483477*(65535&(ie^=ie>>>24))+((1540483477*(ie>>>16)&65535)<<16)),he-=4,++Ee;switch(he){case 3:ve^=(255&I.charCodeAt(Ee+2))<<16;case 2:ve^=(255&I.charCodeAt(Ee+1))<<8;case 1:ve=1540483477*(65535&(ve^=255&I.charCodeAt(Ee)))+((1540483477*(ve>>>16)&65535)<<16)}return ve=1540483477*(65535&(ve^=ve>>>13))+((1540483477*(ve>>>16)&65535)<<16),(ve^=ve>>>15)>>>0}}),Tr=er,Zr=fr;Tr.murmur3=er,Tr.murmur2=Zr;var Xr=function(){this.ids=[],this.positions=[],this.indexed=!1};Xr.prototype.add=function(A,I,Y,ie){this.ids.push(rn(A)),this.positions.push(I,Y,ie)},Xr.prototype.getPositions=function(A){for(var I=rn(A),Y=0,ie=this.ids.length-1;Y<ie;){var he=Y+ie>>1;this.ids[he]>=I?ie=he:Y=he+1}for(var ve=[];this.ids[Y]===I;)ve.push({index:this.positions[3*Y],start:this.positions[3*Y+1],end:this.positions[3*Y+2]}),Y++;return ve},Xr.serialize=function(A,I){var Y=new Float64Array(A.ids),ie=new Uint32Array(A.positions);return function he(ve,Ee,Ne,We){for(;Ne<We;){for(var ct=ve[Ne+We>>1],dt=Ne-1,Bt=We+1;;){do{dt++}while(ve[dt]<ct);do{Bt--}while(ve[Bt]>ct);if(dt>=Bt)break;Nn(ve,dt,Bt),Nn(Ee,3*dt,3*Bt),Nn(Ee,3*dt+1,3*Bt+1),Nn(Ee,3*dt+2,3*Bt+2)}Bt-Ne<We-Bt?(he(ve,Ee,Ne,Bt),Ne=Bt+1):(he(ve,Ee,Bt+1,We),We=Bt)}}(Y,ie,0,Y.length-1),I&&I.push(Y.buffer,ie.buffer),{ids:Y,positions:ie}},Xr.deserialize=function(A){var I=new Xr;return I.ids=A.ids,I.positions=A.positions,I.indexed=!0,I};var fn=Math.pow(2,53)-1;function rn(A){var I=+A;return!isNaN(I)&&I<=fn?I:Tr(String(A))}function Nn(A,I,Y){var ie=A[I];A[I]=A[Y],A[Y]=ie}Wr("FeaturePositionMap",Xr);var Gn=function(A,I){this.gl=A.gl,this.location=I},oi=function(A){function I(Y,ie){A.call(this,Y,ie),this.current=0}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.set=function(Y){this.current!==Y&&(this.current=Y,this.gl.uniform1i(this.location,Y))},I}(Gn),Ur=function(A){function I(Y,ie){A.call(this,Y,ie),this.current=0}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.set=function(Y){this.current!==Y&&(this.current=Y,this.gl.uniform1f(this.location,Y))},I}(Gn),_n=function(A){function I(Y,ie){A.call(this,Y,ie),this.current=[0,0]}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]||(this.current=Y,this.gl.uniform2f(this.location,Y[0],Y[1]))},I}(Gn),Yn=function(A){function I(Y,ie){A.call(this,Y,ie),this.current=[0,0,0]}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]&&Y[2]===this.current[2]||(this.current=Y,this.gl.uniform3f(this.location,Y[0],Y[1],Y[2]))},I}(Gn),Vn=function(A){function I(Y,ie){A.call(this,Y,ie),this.current=[0,0,0,0]}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]&&Y[2]===this.current[2]&&Y[3]===this.current[3]||(this.current=Y,this.gl.uniform4f(this.location,Y[0],Y[1],Y[2],Y[3]))},I}(Gn),Qn=function(A){function I(Y,ie){A.call(this,Y,ie),this.current=cr.transparent}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.set=function(Y){Y.r===this.current.r&&Y.g===this.current.g&&Y.b===this.current.b&&Y.a===this.current.a||(this.current=Y,this.gl.uniform4f(this.location,Y.r,Y.g,Y.b,Y.a))},I}(Gn),li=new Float32Array(16),wi=function(A){function I(Y,ie){A.call(this,Y,ie),this.current=li}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.set=function(Y){if(Y[12]!==this.current[12]||Y[0]!==this.current[0])return this.current=Y,void this.gl.uniformMatrix4fv(this.location,!1,Y);for(var ie=1;ie<16;ie++)if(Y[ie]!==this.current[ie]){this.current=Y,this.gl.uniformMatrix4fv(this.location,!1,Y);break}},I}(Gn);function Xn(A){return[Ot(255*A.r,255*A.g),Ot(255*A.b,255*A.a)]}var mi=function(A,I,Y){this.value=A,this.uniformNames=I.map(function(ie){return"u_"+ie}),this.type=Y};mi.prototype.setUniform=function(A,I,Y){A.set(Y.constantOr(this.value))},mi.prototype.getBinding=function(A,I,Y){return"color"===this.type?new Qn(A,I):new Ur(A,I)};var pi=function(A,I){this.uniformNames=I.map(function(Y){return"u_"+Y}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};pi.prototype.setConstantPatternPositions=function(A,I){this.pixelRatioFrom=I.pixelRatio,this.pixelRatioTo=A.pixelRatio,this.patternFrom=I.tlbr,this.patternTo=A.tlbr},pi.prototype.setUniform=function(A,I,Y,ie){var he="u_pattern_to"===ie?this.patternTo:"u_pattern_from"===ie?this.patternFrom:"u_pixel_ratio_to"===ie?this.pixelRatioTo:"u_pixel_ratio_from"===ie?this.pixelRatioFrom:null;he&&A.set(he)},pi.prototype.getBinding=function(A,I,Y){return"u_pattern"===Y.substr(0,9)?new Vn(A,I):new Ur(A,I)};var Mi=function(A,I,Y,ie){this.expression=A,this.type=Y,this.maxValue=0,this.paintVertexAttributes=I.map(function(he){return{name:"a_"+he,type:"Float32",components:"color"===Y?2:1,offset:0}}),this.paintVertexArray=new ie};Mi.prototype.populatePaintArray=function(A,I,Y,ie,he){var ve=this.paintVertexArray.length,Ee=this.expression.evaluate(new Ki(0),I,{},ie,[],he);this.paintVertexArray.resize(A),this._setPaintValue(ve,A,Ee)},Mi.prototype.updatePaintArray=function(A,I,Y,ie){var he=this.expression.evaluate({zoom:0},Y,ie);this._setPaintValue(A,I,he)},Mi.prototype._setPaintValue=function(A,I,Y){if("color"===this.type)for(var ie=Xn(Y),he=A;he<I;he++)this.paintVertexArray.emplace(he,ie[0],ie[1]);else{for(var ve=A;ve<I;ve++)this.paintVertexArray.emplace(ve,Y);this.maxValue=Math.max(this.maxValue,Math.abs(Y))}},Mi.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Mi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var vi=function(A,I,Y,ie,he,ve){this.expression=A,this.uniformNames=I.map(function(Ee){return"u_"+Ee+"_t"}),this.type=Y,this.useIntegerZoom=ie,this.zoom=he,this.maxValue=0,this.paintVertexAttributes=I.map(function(Ee){return{name:"a_"+Ee,type:"Float32",components:"color"===Y?4:2,offset:0}}),this.paintVertexArray=new ve};vi.prototype.populatePaintArray=function(A,I,Y,ie,he){var ve=this.expression.evaluate(new Ki(this.zoom),I,{},ie,[],he),Ee=this.expression.evaluate(new Ki(this.zoom+1),I,{},ie,[],he),Ne=this.paintVertexArray.length;this.paintVertexArray.resize(A),this._setPaintValue(Ne,A,ve,Ee)},vi.prototype.updatePaintArray=function(A,I,Y,ie){var he=this.expression.evaluate({zoom:this.zoom},Y,ie),ve=this.expression.evaluate({zoom:this.zoom+1},Y,ie);this._setPaintValue(A,I,he,ve)},vi.prototype._setPaintValue=function(A,I,Y,ie){if("color"===this.type)for(var he=Xn(Y),ve=Xn(ie),Ee=A;Ee<I;Ee++)this.paintVertexArray.emplace(Ee,he[0],he[1],ve[0],ve[1]);else{for(var Ne=A;Ne<I;Ne++)this.paintVertexArray.emplace(Ne,Y,ie);this.maxValue=Math.max(this.maxValue,Math.abs(Y),Math.abs(ie))}},vi.prototype.upload=function(A){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=A.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},vi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},vi.prototype.setUniform=function(A,I){var Y=this.useIntegerZoom?Math.floor(I.zoom):I.zoom,ie=l(this.expression.interpolationFactor(Y,this.zoom,this.zoom+1),0,1);A.set(ie)},vi.prototype.getBinding=function(A,I,Y){return new Ur(A,I)};var Si=function(A,I,Y,ie,he,ve){this.expression=A,this.type=I,this.useIntegerZoom=Y,this.zoom=ie,this.layerId=ve,this.zoomInPaintVertexArray=new he,this.zoomOutPaintVertexArray=new he};Si.prototype.populatePaintArray=function(A,I,Y){var ie=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(A),this.zoomOutPaintVertexArray.resize(A),this._setPaintValues(ie,A,I.patterns&&I.patterns[this.layerId],Y)},Si.prototype.updatePaintArray=function(A,I,Y,ie,he){this._setPaintValues(A,I,Y.patterns&&Y.patterns[this.layerId],he)},Si.prototype._setPaintValues=function(A,I,Y,ie){if(ie&&Y){var Ne=ie[Y.min],We=ie[Y.mid],ct=ie[Y.max];if(Ne&&We&&ct)for(var dt=A;dt<I;dt++)this.zoomInPaintVertexArray.emplace(dt,We.tl[0],We.tl[1],We.br[0],We.br[1],Ne.tl[0],Ne.tl[1],Ne.br[0],Ne.br[1],We.pixelRatio,Ne.pixelRatio),this.zoomOutPaintVertexArray.emplace(dt,We.tl[0],We.tl[1],We.br[0],We.br[1],ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],We.pixelRatio,ct.pixelRatio)}},Si.prototype.upload=function(A){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=A.createVertexBuffer(this.zoomInPaintVertexArray,Nt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=A.createVertexBuffer(this.zoomOutPaintVertexArray,Nt.members,this.expression.isStateDependent))},Si.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Di=function(A,I,Y,ie){this.binders={},this.layoutAttributes=ie,this._buffers=[];var he=[];for(var ve in A.paint._values)if(Y(ve)){var Ee=A.paint.get(ve);if(Ee instanceof Ca&&No(Ee.property.specification)){var Ne=Ma(ve,A.type),We=Ee.value,ct=Ee.property.specification.type,dt=Ee.property.useIntegerZoom,Bt=Ee.property.specification["property-type"],Xt="cross-faded"===Bt||"cross-faded-data-driven"===Bt;if("constant"===We.kind)this.binders[ve]=Xt?new pi(We.value,Ne):new mi(We.value,Ne,ct),he.push("/u_"+ve);else if("source"===We.kind||Xt){var qt=Sa(ve,ct,"source");this.binders[ve]=Xt?new Si(We,ct,dt,I,qt,A.id):new Mi(We,Ne,ct,qt),he.push("/a_"+ve)}else{var rr=Sa(ve,ct,"composite");this.binders[ve]=new vi(We,Ne,ct,dt,I,rr),he.push("/z_"+ve)}}}this.cacheKey=he.sort().join("")};Di.prototype.getMaxValue=function(A){var I=this.binders[A];return I instanceof Mi||I instanceof vi?I.maxValue:0},Di.prototype.populatePaintArrays=function(A,I,Y,ie,he){for(var ve in this.binders){var Ee=this.binders[ve];(Ee instanceof Mi||Ee instanceof vi||Ee instanceof Si)&&Ee.populatePaintArray(A,I,Y,ie,he)}},Di.prototype.setConstantPatternPositions=function(A,I){for(var Y in this.binders){var ie=this.binders[Y];ie instanceof pi&&ie.setConstantPatternPositions(A,I)}},Di.prototype.updatePaintArrays=function(A,I,Y,ie,he){var ve=!1;for(var Ee in A)for(var Ne=0,We=I.getPositions(Ee);Ne<We.length;Ne+=1){var ct=We[Ne],dt=Y.feature(ct.index);for(var Bt in this.binders){var Xt=this.binders[Bt];if((Xt instanceof Mi||Xt instanceof vi||Xt instanceof Si)&&!0===Xt.expression.isStateDependent){var qt=ie.paint.get(Bt);Xt.expression=qt.value,Xt.updatePaintArray(ct.start,ct.end,dt,A[Ee],he),ve=!0}}}return ve},Di.prototype.defines=function(){var A=[];for(var I in this.binders){var Y=this.binders[I];(Y instanceof mi||Y instanceof pi)&&A.push.apply(A,Y.uniformNames.map(function(ie){return"#define HAS_UNIFORM_"+ie}))}return A},Di.prototype.getPaintVertexBuffers=function(){return this._buffers},Di.prototype.getUniforms=function(A,I){var Y=[];for(var ie in this.binders){var he=this.binders[ie];if(he instanceof mi||he instanceof pi||he instanceof vi)for(var ve=0,Ee=he.uniformNames;ve<Ee.length;ve+=1){var Ne=Ee[ve];if(I[Ne]){var We=he.getBinding(A,I[Ne],Ne);Y.push({name:Ne,property:ie,binding:We})}}}return Y},Di.prototype.setUniforms=function(A,I,Y,ie){for(var he=0,ve=I;he<ve.length;he+=1){var Ee=ve[he],Ne=Ee.name,We=Ee.property;this.binders[We].setUniform(Ee.binding,ie,Y.get(We),Ne)}},Di.prototype.updatePaintBuffers=function(A){for(var I in this._buffers=[],this.binders){var Y=this.binders[I];if(A&&Y instanceof Si){var ie=2===A.fromScale?Y.zoomInPaintVertexBuffer:Y.zoomOutPaintVertexBuffer;ie&&this._buffers.push(ie)}else(Y instanceof Mi||Y instanceof vi)&&Y.paintVertexBuffer&&this._buffers.push(Y.paintVertexBuffer)}},Di.prototype.upload=function(A){for(var I in this.binders){var Y=this.binders[I];(Y instanceof Mi||Y instanceof vi||Y instanceof Si)&&Y.upload(A)}this.updatePaintBuffers()},Di.prototype.destroy=function(){for(var A in this.binders){var I=this.binders[A];(I instanceof Mi||I instanceof vi||I instanceof Si)&&I.destroy()}};var aa=function(A,I,Y,ie){void 0===ie&&(ie=function(){return!0}),this.programConfigurations={};for(var he=0,ve=I;he<ve.length;he+=1){var Ee=ve[he];this.programConfigurations[Ee.id]=new Di(Ee,Y,ie,A)}this.needsUpload=!1,this._featureMap=new Xr,this._bufferOffset=0};function Ma(A,I){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[A]||[A.replace(I+"-","").replace(/-/g,"_")]}function Sa(A,I,Y){var he={"line-pattern":{source:gs,composite:gs},"fill-pattern":{source:gs,composite:gs},"fill-extrusion-pattern":{source:gs,composite:gs}}[A];return he&&he[Y]||{color:{source:ae,composite:ue},number:{source:le,composite:ae}}[I][Y]}aa.prototype.populatePaintArrays=function(A,I,Y,ie,he,ve){for(var Ee in this.programConfigurations)this.programConfigurations[Ee].populatePaintArrays(A,I,ie,he,ve);void 0!==I.id&&this._featureMap.add(I.id,Y,this._bufferOffset,A),this._bufferOffset=A,this.needsUpload=!0},aa.prototype.updatePaintArrays=function(A,I,Y,ie){for(var he=0,ve=Y;he<ve.length;he+=1){var Ee=ve[he];this.needsUpload=this.programConfigurations[Ee.id].updatePaintArrays(A,this._featureMap,I,Ee,ie)||this.needsUpload}},aa.prototype.get=function(A){return this.programConfigurations[A]},aa.prototype.upload=function(A){if(this.needsUpload){for(var I in this.programConfigurations)this.programConfigurations[I].upload(A);this.needsUpload=!1}},aa.prototype.destroy=function(){for(var A in this.programConfigurations)this.programConfigurations[A].destroy()},Wr("ConstantBinder",mi),Wr("CrossFadedConstantBinder",pi),Wr("SourceExpressionBinder",Mi),Wr("CrossFadedCompositeBinder",Si),Wr("CompositeExpressionBinder",vi),Wr("ProgramConfiguration",Di,{omit:["_buffers"]}),Wr("ProgramConfigurationSet",aa);var xa={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1};function ua(A){for(var I=8192/A.extent,Y=A.loadGeometry(),ie=0;ie<Y.length;ie++)for(var he=Y[ie],ve=0;ve<he.length;ve++){var Ee=he[ve];Ee.x=Math.round(Ee.x*I),Ee.y=Math.round(Ee.y*I),(Ee.x<xa.min||Ee.x>xa.max||Ee.y<xa.min||Ee.y>xa.max)&&(M("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Ee.x=l(Ee.x,xa.min,xa.max),Ee.y=l(Ee.y,xa.min,xa.max))}return Y}function ho(A,I,Y,ie,he){A.emplaceBack(2*I+(ie+1)/2,2*Y+(he+1)/2)}var Na=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new ns,this.indexArray=new Ka,this.segments=new Ft,this.programConfigurations=new aa(yt,A.layers,A.zoom),this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};function Co(A,I){for(var Y=0;Y<A.length;Y++)if($o(I,A[Y]))return!0;for(var ie=0;ie<I.length;ie++)if($o(A,I[ie]))return!0;return!!Js(A,I)}function ms(A,I,Y){return!!$o(A,I)||!!po(I,A,Y)}function Rs(A,I){if(1===A.length)return ll(I,A[0]);for(var Y=0;Y<I.length;Y++)for(var ie=I[Y],he=0;he<ie.length;he++)if($o(A,ie[he]))return!0;for(var ve=0;ve<A.length;ve++)if(ll(I,A[ve]))return!0;for(var Ee=0;Ee<I.length;Ee++)if(Js(A,I[Ee]))return!0;return!1}function sl(A,I,Y){if(A.length>1){if(Js(A,I))return!0;for(var ie=0;ie<I.length;ie++)if(po(I[ie],A,Y))return!0}for(var he=0;he<A.length;he++)if(po(A[he],I,Y))return!0;return!1}function Js(A,I){if(0===A.length||0===I.length)return!1;for(var Y=0;Y<A.length-1;Y++)for(var ie=A[Y],he=A[Y+1],ve=0;ve<I.length-1;ve++)if(Ks(ie,he,I[ve],I[ve+1]))return!0;return!1}function Ks(A,I,Y,ie){return O(A,Y,ie)!==O(I,Y,ie)&&O(A,I,Y)!==O(A,I,ie)}function po(A,I,Y){var ie=Y*Y;if(1===I.length)return A.distSqr(I[0])<ie;for(var he=1;he<I.length;he++)if(Us(A,I[he-1],I[he])<ie)return!0;return!1}function Us(A,I,Y){var ie=I.distSqr(Y);if(0===ie)return A.distSqr(I);var he=((A.x-I.x)*(Y.x-I.x)+(A.y-I.y)*(Y.y-I.y))/ie;return A.distSqr(he<0?I:he>1?Y:Y.sub(I)._mult(he)._add(I))}function ll(A,I){for(var Y,ie,he,ve=!1,Ee=0;Ee<A.length;Ee++)for(var Ne=0,We=(Y=A[Ee]).length-1;Ne<Y.length;We=Ne++)(ie=Y[Ne]).y>I.y!=(he=Y[We]).y>I.y&&I.x<(he.x-ie.x)*(I.y-ie.y)/(he.y-ie.y)+ie.x&&(ve=!ve);return ve}function $o(A,I){for(var Y=!1,ie=0,he=A.length-1;ie<A.length;he=ie++){var ve=A[ie],Ee=A[he];ve.y>I.y!=Ee.y>I.y&&I.x<(Ee.x-ve.x)*(I.y-ve.y)/(Ee.y-ve.y)+ve.x&&(Y=!Y)}return Y}function cl(A,I,Y){var ie=Y[0],he=Y[2];if(A.x<ie.x&&I.x<ie.x||A.x>he.x&&I.x>he.x||A.y<ie.y&&I.y<ie.y||A.y>he.y&&I.y>he.y)return!1;var ve=O(A,I,Y[0]);return ve!==O(A,I,Y[1])||ve!==O(A,I,Y[2])||ve!==O(A,I,Y[3])}function ba(A,I,Y){var ie=I.paint.get(A).value;return"constant"===ie.kind?ie.value:Y.programConfigurations.get(I.id).getMaxValue(A)}function Mo(A){return Math.sqrt(A[0]*A[0]+A[1]*A[1])}function So(A,I,Y,ie,he){if(!I[0]&&!I[1])return A;var ve=r.convert(I)._mult(he);"viewport"===Y&&ve._rotate(-ie);for(var Ee=[],Ne=0;Ne<A.length;Ne++)Ee.push(A[Ne].sub(ve));return Ee}Na.prototype.populate=function(A,I,Y){var ie=this.layers[0],he=[],ve=null;"circle"===ie.type&&(ve=ie.layout.get("circle-sort-key"));for(var Ee=0,Ne=A;Ee<Ne.length;Ee+=1){var We=Ne[Ee],ct=We.feature,dt=We.id,Bt=We.index,Xt=We.sourceLayerIndex,qt=this.layers[0]._featureFilter.needGeometry,rr={type:ct.type,id:dt,properties:ct.properties,geometry:qt?ua(ct):[]};if(this.layers[0]._featureFilter.filter(new Ki(this.zoom),rr,Y)){qt||(rr.geometry=ua(ct));var pr=ve?ve.evaluate(rr,{},Y):void 0;he.push({id:dt,properties:ct.properties,type:ct.type,sourceLayerIndex:Xt,index:Bt,geometry:rr.geometry,patterns:{},sortKey:pr})}}ve&&he.sort(function(Hn,ti){return Hn.sortKey-ti.sortKey});for(var Mr=0,Dr=he;Mr<Dr.length;Mr+=1){var Fr=Dr[Mr],un=Fr.geometry,vn=Fr.index,Fn=Fr.sourceLayerIndex,Dn=A[vn].feature;this.addFeature(Fr,un,vn,Y),I.featureIndex.insert(Dn,un,vn,Fn,this.index)}},Na.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Y)},Na.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Na.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Na.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,yt),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Na.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Na.prototype.addFeature=function(A,I,Y,ie){for(var he=0,ve=I;he<ve.length;he+=1)for(var Ee=0,Ne=ve[he];Ee<Ne.length;Ee+=1){var We=Ne[Ee],ct=We.x,dt=We.y;if(!(ct<0||ct>=8192||dt<0||dt>=8192)){var Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,A.sortKey),Xt=Bt.vertexLength;ho(this.layoutVertexArray,ct,dt,-1,-1),ho(this.layoutVertexArray,ct,dt,1,-1),ho(this.layoutVertexArray,ct,dt,1,1),ho(this.layoutVertexArray,ct,dt,-1,1),this.indexArray.emplaceBack(Xt,Xt+1,Xt+2),this.indexArray.emplaceBack(Xt,Xt+3,Xt+2),Bt.vertexLength+=4,Bt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,{},ie)},Wr("CircleBucket",Na,{omit:["layers"]});var yl=new Ao({"circle-sort-key":new gi(Ce.layout_circle["circle-sort-key"])}),Zc={paint:new Ao({"circle-radius":new gi(Ce.paint_circle["circle-radius"]),"circle-color":new gi(Ce.paint_circle["circle-color"]),"circle-blur":new gi(Ce.paint_circle["circle-blur"]),"circle-opacity":new gi(Ce.paint_circle["circle-opacity"]),"circle-translate":new ai(Ce.paint_circle["circle-translate"]),"circle-translate-anchor":new ai(Ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ai(Ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ai(Ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new gi(Ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new gi(Ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new gi(Ce.paint_circle["circle-stroke-opacity"])}),layout:yl},Go="undefined"!=typeof Float32Array?Float32Array:Array;function ql(A){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function ul(A,I,Y){var ie=I[0],he=I[1],ve=I[2],Ee=I[3],Ne=I[4],We=I[5],ct=I[6],dt=I[7],Bt=I[8],Xt=I[9],qt=I[10],rr=I[11],pr=I[12],Sr=I[13],Mr=I[14],Dr=I[15],Fr=Y[0],Hr=Y[1],un=Y[2],vn=Y[3];return A[0]=Fr*ie+Hr*Ne+un*Bt+vn*pr,A[1]=Fr*he+Hr*We+un*Xt+vn*Sr,A[2]=Fr*ve+Hr*ct+un*qt+vn*Mr,A[3]=Fr*Ee+Hr*dt+un*rr+vn*Dr,A[4]=(Fr=Y[4])*ie+(Hr=Y[5])*Ne+(un=Y[6])*Bt+(vn=Y[7])*pr,A[5]=Fr*he+Hr*We+un*Xt+vn*Sr,A[6]=Fr*ve+Hr*ct+un*qt+vn*Mr,A[7]=Fr*Ee+Hr*dt+un*rr+vn*Dr,A[8]=(Fr=Y[8])*ie+(Hr=Y[9])*Ne+(un=Y[10])*Bt+(vn=Y[11])*pr,A[9]=Fr*he+Hr*We+un*Xt+vn*Sr,A[10]=Fr*ve+Hr*ct+un*qt+vn*Mr,A[11]=Fr*Ee+Hr*dt+un*rr+vn*Dr,A[12]=(Fr=Y[12])*ie+(Hr=Y[13])*Ne+(un=Y[14])*Bt+(vn=Y[15])*pr,A[13]=Fr*he+Hr*We+un*Xt+vn*Sr,A[14]=Fr*ve+Hr*ct+un*qt+vn*Mr,A[15]=Fr*Ee+Hr*dt+un*rr+vn*Dr,A}Math.hypot||(Math.hypot=function(){for(var A=arguments,I=0,Y=arguments.length;Y--;)I+=A[Y]*A[Y];return Math.sqrt(I)});var Fs,I,Jc=ul;function Qs(A,I,Y){var ie=I[0],he=I[1],ve=I[2],Ee=I[3];return A[0]=Y[0]*ie+Y[4]*he+Y[8]*ve+Y[12]*Ee,A[1]=Y[1]*ie+Y[5]*he+Y[9]*ve+Y[13]*Ee,A[2]=Y[2]*ie+Y[6]*he+Y[10]*ve+Y[14]*Ee,A[3]=Y[3]*ie+Y[7]*he+Y[11]*ve+Y[15]*Ee,A}Fs=new Go(3),Go!=Float32Array&&(Fs[0]=0,Fs[1]=0,Fs[2]=0),I=new Go(4),Go!=Float32Array&&(I[0]=0,I[1]=0,I[2]=0,I[3]=0);var lh=(function(){var I=new Go(2);Go!=Float32Array&&(I[0]=0,I[1]=0)}(),function(A){function I(Y){A.call(this,Y,Zc)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.createBucket=function(Y){return new Na(Y)},I.prototype.queryRadius=function(Y){var ie=Y;return ba("circle-radius",this,ie)+ba("circle-stroke-width",this,ie)+Mo(this.paint.get("circle-translate"))},I.prototype.queryIntersectsFeature=function(Y,ie,he,ve,Ee,Ne,We,ct){for(var dt=So(Y,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),Ne.angle,We),Bt=this.paint.get("circle-radius").evaluate(ie,he)+this.paint.get("circle-stroke-width").evaluate(ie,he),Xt="map"===this.paint.get("circle-pitch-alignment"),qt=Xt?dt:function(Fn,Dn){return Fn.map(function(Hn){return zu(Hn,Dn)})}(dt,ct),rr=Xt?Bt*We:Bt,pr=0,Sr=ve;pr<Sr.length;pr+=1)for(var Mr=0,Dr=Sr[pr];Mr<Dr.length;Mr+=1){var Fr=Dr[Mr],Hr=Xt?Fr:zu(Fr,ct),un=rr,vn=Qs([],[Fr.x,Fr.y,0,1],ct);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?un*=vn[3]/Ne.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(un*=Ne.cameraToCenterDistance/vn[3]),ms(qt,Hr,un))return!0}return!1},I}(jo));function zu(A,I){var Y=Qs([],[A.x,A.y,0,1],I);return new r(Y[0]/Y[3],Y[1]/Y[3])}var Du=function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I}(Na);function $c(A,I,Y,ie){var he=I.width,ve=I.height;if(ie){if(ie instanceof Uint8ClampedArray)ie=new Uint8Array(ie.buffer);else if(ie.length!==he*ve*Y)throw new RangeError("mismatched image size")}else ie=new Uint8Array(he*ve*Y);return A.width=he,A.height=ve,A.data=ie,A}function Ru(A,I,Y){var ie=I.width,he=I.height;if(ie!==A.width||he!==A.height){var ve=$c({},{width:ie,height:he},Y);eu(A,ve,{x:0,y:0},{x:0,y:0},{width:Math.min(A.width,ie),height:Math.min(A.height,he)},Y),A.width=ie,A.height=he,A.data=ve.data}}function eu(A,I,Y,ie,he,ve){if(0===he.width||0===he.height)return I;if(he.width>A.width||he.height>A.height||Y.x>A.width-he.width||Y.y>A.height-he.height)throw new RangeError("out of range source coordinates for image copy");if(he.width>I.width||he.height>I.height||ie.x>I.width-he.width||ie.y>I.height-he.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ee=A.data,Ne=I.data,We=0;We<he.height;We++)for(var ct=((Y.y+We)*A.width+Y.x)*ve,dt=((ie.y+We)*I.width+ie.x)*ve,Bt=0;Bt<he.width*ve;Bt++)Ne[dt+Bt]=Ee[ct+Bt];return I}Wr("HeatmapBucket",Du,{omit:["layers"]});var fl=function(A,I){$c(this,A,1,I)};fl.prototype.resize=function(A){Ru(this,A,1)},fl.prototype.clone=function(){return new fl({width:this.width,height:this.height},new Uint8Array(this.data))},fl.copy=function(A,I,Y,ie,he){eu(A,I,Y,ie,he,1)};var Yo=function(A,I){$c(this,A,4,I)};Yo.prototype.resize=function(A){Ru(this,A,4)},Yo.prototype.replace=function(A,I){I?this.data.set(A):this.data=A instanceof Uint8ClampedArray?new Uint8Array(A.buffer):A},Yo.prototype.clone=function(){return new Yo({width:this.width,height:this.height},new Uint8Array(this.data))},Yo.copy=function(A,I,Y,ie,he){eu(A,I,Y,ie,he,4)},Wr("AlphaImage",fl),Wr("RGBAImage",Yo);var ch={paint:new Ao({"heatmap-radius":new gi(Ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new gi(Ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ai(Ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Qo(Ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ai(Ce.paint_heatmap["heatmap-opacity"])})};function Fu(A,I){for(var Y=new Uint8Array(1024),ie={},he=0,ve=0;he<256;he++,ve+=4){ie[I]=he/255;var Ee=A.evaluate(ie);Y[ve+0]=Math.floor(255*Ee.r/Ee.a),Y[ve+1]=Math.floor(255*Ee.g/Ee.a),Y[ve+2]=Math.floor(255*Ee.b/Ee.a),Y[ve+3]=Math.floor(255*Ee.a)}return new Yo({width:256,height:1},Y)}var uh=function(A){function I(Y){A.call(this,Y,ch),this._updateColorRamp()}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.createBucket=function(Y){return new Du(Y)},I.prototype._handleSpecialPaintPropertyUpdate=function(Y){"heatmap-color"===Y&&this._updateColorRamp()},I.prototype._updateColorRamp=function(){this.colorRamp=Fu(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},I.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},I}(jo),fh={paint:new Ao({"hillshade-illumination-direction":new ai(Ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ai(Ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ai(Ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ai(Ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ai(Ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ai(Ce.paint_hillshade["hillshade-accent-color"])})},hh=function(A){function I(Y){A.call(this,Y,fh)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},I}(jo),Bu=Qi([{name:"a_pos",components:2,type:"Int16"}],4).members,tu=hc,ph=hc;function hc(A,I,Y){Y=Y||2;var ie,he,ve,Ee,Ne,We,ct,dt=I&&I.length,Bt=dt?I[0]*Y:A.length,Xt=Nu(A,0,Bt,Y,!0),qt=[];if(!Xt||Xt.next===Xt.prev)return qt;if(dt&&(Xt=function(pr,Sr,Mr,Dr){var Fr,Hr,Fn,Dn=[];for(Fr=0,Hr=Sr.length;Fr<Hr;Fr++)(Fn=Nu(pr,Sr[Fr]*Dr,Fr<Hr-1?Sr[Fr+1]*Dr:pr.length,Dr,!1))===Fn.next&&(Fn.steiner=!0),Dn.push(_h(Fn));for(Dn.sort(yh),Fr=0;Fr<Dn.length;Fr++)xh(Dn[Fr],Mr),Mr=$s(Mr,Mr.next);return Mr}(A,I,Xt,Y)),A.length>80*Y){ie=ve=A[0],he=Ee=A[1];for(var rr=Y;rr<Bt;rr+=Y)(Ne=A[rr])<ie&&(ie=Ne),(We=A[rr+1])<he&&(he=We),Ne>ve&&(ve=Ne),We>Ee&&(Ee=We);ct=0!==(ct=Math.max(ve-ie,Ee-he))?1/ct:0}return Gl(Xt,qt,Y,ie,he,ct),qt}function Nu(A,I,Y,ie,he){var ve,Ee;if(he===iu(A,I,Y,ie)>0)for(ve=I;ve<Y;ve+=ie)Ee=Vu(ve,A[ve],A[ve+1],Ee);else for(ve=Y-ie;ve>=I;ve-=ie)Ee=Vu(ve,A[ve],A[ve+1],Ee);return Ee&&pc(Ee,Ee.next)&&(Wl(Ee),Ee=Ee.next),Ee}function $s(A,I){if(!A)return A;I||(I=A);var Y,ie=A;do{if(Y=!1,ie.steiner||!pc(ie,ie.next)&&0!==Qa(ie.prev,ie,ie.next))ie=ie.next;else{if(Wl(ie),(ie=I=ie.prev)===ie.next)break;Y=!0}}while(Y||ie!==I);return I}function Gl(A,I,Y,ie,he,ve,Ee){if(A){!Ee&&ve&&function(dt,Bt,Xt,qt){var rr=dt;do{null===rr.z&&(rr.z=ru(rr.x,rr.y,Bt,Xt,qt)),rr.prevZ=rr.prev,rr.nextZ=rr.next,rr=rr.next}while(rr!==dt);rr.prevZ.nextZ=null,rr.prevZ=null,function(pr){var Sr,Mr,Dr,Fr,Hr,un,vn,Fn,Dn=1;do{for(Mr=pr,pr=null,Hr=null,un=0;Mr;){for(un++,Dr=Mr,vn=0,Sr=0;Sr<Dn&&(vn++,Dr=Dr.nextZ);Sr++);for(Fn=Dn;vn>0||Fn>0&&Dr;)0!==vn&&(0===Fn||!Dr||Mr.z<=Dr.z)?(Fr=Mr,Mr=Mr.nextZ,vn--):(Fr=Dr,Dr=Dr.nextZ,Fn--),Hr?Hr.nextZ=Fr:pr=Fr,Fr.prevZ=Hr,Hr=Fr;Mr=Dr}Hr.nextZ=null,Dn*=2}while(un>1)}(rr)}(A,ie,he,ve);for(var Ne,We,ct=A;A.prev!==A.next;)if(Ne=A.prev,We=A.next,ve?gh(A,ie,he,ve):dh(A))I.push(Ne.i/Y),I.push(A.i/Y),I.push(We.i/Y),Wl(A),A=We.next,ct=We.next;else if((A=We)===ct){Ee?1===Ee?Gl(A=mh($s(A),I,Y),I,Y,ie,he,ve,2):2===Ee&&vh(A,I,Y,ie,he,ve):Gl($s(A),I,Y,ie,he,ve,1);break}}}function dh(A){var I=A.prev,Y=A,ie=A.next;if(Qa(I,Y,ie)>=0)return!1;for(var he=A.next.next;he!==A.prev;){if(xl(I.x,I.y,Y.x,Y.y,ie.x,ie.y,he.x,he.y)&&Qa(he.prev,he,he.next)>=0)return!1;he=he.next}return!0}function gh(A,I,Y,ie){var he=A.prev,ve=A,Ee=A.next;if(Qa(he,ve,Ee)>=0)return!1;for(var ct=he.x>ve.x?he.x>Ee.x?he.x:Ee.x:ve.x>Ee.x?ve.x:Ee.x,dt=he.y>ve.y?he.y>Ee.y?he.y:Ee.y:ve.y>Ee.y?ve.y:Ee.y,Bt=ru(he.x<ve.x?he.x<Ee.x?he.x:Ee.x:ve.x<Ee.x?ve.x:Ee.x,he.y<ve.y?he.y<Ee.y?he.y:Ee.y:ve.y<Ee.y?ve.y:Ee.y,I,Y,ie),Xt=ru(ct,dt,I,Y,ie),qt=A.prevZ,rr=A.nextZ;qt&&qt.z>=Bt&&rr&&rr.z<=Xt;){if(qt!==A.prev&&qt!==A.next&&xl(he.x,he.y,ve.x,ve.y,Ee.x,Ee.y,qt.x,qt.y)&&Qa(qt.prev,qt,qt.next)>=0||(qt=qt.prevZ,rr!==A.prev&&rr!==A.next&&xl(he.x,he.y,ve.x,ve.y,Ee.x,Ee.y,rr.x,rr.y)&&Qa(rr.prev,rr,rr.next)>=0))return!1;rr=rr.nextZ}for(;qt&&qt.z>=Bt;){if(qt!==A.prev&&qt!==A.next&&xl(he.x,he.y,ve.x,ve.y,Ee.x,Ee.y,qt.x,qt.y)&&Qa(qt.prev,qt,qt.next)>=0)return!1;qt=qt.prevZ}for(;rr&&rr.z<=Xt;){if(rr!==A.prev&&rr!==A.next&&xl(he.x,he.y,ve.x,ve.y,Ee.x,Ee.y,rr.x,rr.y)&&Qa(rr.prev,rr,rr.next)>=0)return!1;rr=rr.nextZ}return!0}function mh(A,I,Y){var ie=A;do{var he=ie.prev,ve=ie.next.next;!pc(he,ve)&&ju(he,ie,ie.next,ve)&&Yl(he,ve)&&Yl(ve,he)&&(I.push(he.i/Y),I.push(ie.i/Y),I.push(ve.i/Y),Wl(ie),Wl(ie.next),ie=A=ve),ie=ie.next}while(ie!==A);return $s(ie)}function vh(A,I,Y,ie,he,ve){var Ee=A;do{for(var Ne=Ee.next.next;Ne!==Ee.prev;){if(Ee.i!==Ne.i&&wh(Ee,Ne)){var We=Uu(Ee,Ne);return Ee=$s(Ee,Ee.next),We=$s(We,We.next),Gl(Ee,I,Y,ie,he,ve),void Gl(We,I,Y,ie,he,ve)}Ne=Ne.next}Ee=Ee.next}while(Ee!==A)}function yh(A,I){return A.x-I.x}function xh(A,I){if(I=function(ie,he){var ve,Ee=he,Ne=ie.x,We=ie.y,ct=-1/0;do{if(We<=Ee.y&&We>=Ee.next.y&&Ee.next.y!==Ee.y){var dt=Ee.x+(We-Ee.y)*(Ee.next.x-Ee.x)/(Ee.next.y-Ee.y);if(dt<=Ne&&dt>ct){if(ct=dt,dt===Ne){if(We===Ee.y)return Ee;if(We===Ee.next.y)return Ee.next}ve=Ee.x<Ee.next.x?Ee:Ee.next}}Ee=Ee.next}while(Ee!==he);if(!ve)return null;if(Ne===ct)return ve;var Bt,Xt=ve,qt=ve.x,rr=ve.y,pr=1/0;Ee=ve;do{Ne>=Ee.x&&Ee.x>=qt&&Ne!==Ee.x&&xl(We<rr?Ne:ct,We,qt,rr,We<rr?ct:Ne,We,Ee.x,Ee.y)&&(Bt=Math.abs(We-Ee.y)/(Ne-Ee.x),Yl(Ee,ie)&&(Bt<pr||Bt===pr&&(Ee.x>ve.x||Ee.x===ve.x&&bh(ve,Ee)))&&(ve=Ee,pr=Bt)),Ee=Ee.next}while(Ee!==Xt);return ve}(A,I)){var Y=Uu(I,A);$s(I,I.next),$s(Y,Y.next)}}function bh(A,I){return Qa(A.prev,A,I.prev)<0&&Qa(I.next,A,A.next)<0}function ru(A,I,Y,ie,he){return(A=1431655765&((A=858993459&((A=252645135&((A=16711935&((A=32767*(A-Y)*he)|A<<8))|A<<4))|A<<2))|A<<1))|(I=1431655765&((I=858993459&((I=252645135&((I=16711935&((I=32767*(I-ie)*he)|I<<8))|I<<4))|I<<2))|I<<1))<<1}function _h(A){var I=A,Y=A;do{(I.x<Y.x||I.x===Y.x&&I.y<Y.y)&&(Y=I),I=I.next}while(I!==A);return Y}function xl(A,I,Y,ie,he,ve,Ee,Ne){return(he-Ee)*(I-Ne)-(A-Ee)*(ve-Ne)>=0&&(A-Ee)*(ie-Ne)-(Y-Ee)*(I-Ne)>=0&&(Y-Ee)*(ve-Ne)-(he-Ee)*(ie-Ne)>=0}function wh(A,I){return A.next.i!==I.i&&A.prev.i!==I.i&&!function(Y,ie){var he=Y;do{if(he.i!==Y.i&&he.next.i!==Y.i&&he.i!==ie.i&&he.next.i!==ie.i&&ju(he,he.next,Y,ie))return!0;he=he.next}while(he!==Y);return!1}(A,I)&&(Yl(A,I)&&Yl(I,A)&&function(Y,ie){var he=Y,ve=!1,Ee=(Y.x+ie.x)/2,Ne=(Y.y+ie.y)/2;do{he.y>Ne!=he.next.y>Ne&&he.next.y!==he.y&&Ee<(he.next.x-he.x)*(Ne-he.y)/(he.next.y-he.y)+he.x&&(ve=!ve),he=he.next}while(he!==Y);return ve}(A,I)&&(Qa(A.prev,A,I.prev)||Qa(A,I.prev,I))||pc(A,I)&&Qa(A.prev,A,A.next)>0&&Qa(I.prev,I,I.next)>0)}function Qa(A,I,Y){return(I.y-A.y)*(Y.x-I.x)-(I.x-A.x)*(Y.y-I.y)}function pc(A,I){return A.x===I.x&&A.y===I.y}function ju(A,I,Y,ie){var he=gc(Qa(A,I,Y)),ve=gc(Qa(A,I,ie)),Ee=gc(Qa(Y,ie,A)),Ne=gc(Qa(Y,ie,I));return he!==ve&&Ee!==Ne||!(0!==he||!dc(A,Y,I))||!(0!==ve||!dc(A,ie,I))||!(0!==Ee||!dc(Y,A,ie))||!(0!==Ne||!dc(Y,I,ie))}function dc(A,I,Y){return I.x<=Math.max(A.x,Y.x)&&I.x>=Math.min(A.x,Y.x)&&I.y<=Math.max(A.y,Y.y)&&I.y>=Math.min(A.y,Y.y)}function gc(A){return A>0?1:A<0?-1:0}function Yl(A,I){return Qa(A.prev,A,A.next)<0?Qa(A,I,A.next)>=0&&Qa(A,A.prev,I)>=0:Qa(A,I,A.prev)<0||Qa(A,A.next,I)<0}function Uu(A,I){var Y=new nu(A.i,A.x,A.y),ie=new nu(I.i,I.x,I.y),he=A.next,ve=I.prev;return A.next=I,I.prev=A,Y.next=he,he.prev=Y,ie.next=Y,Y.prev=ie,ve.next=ie,ie.prev=ve,ie}function Vu(A,I,Y,ie){var he=new nu(A,I,Y);return ie?(he.next=ie.next,he.prev=ie,ie.next.prev=he,ie.next=he):(he.prev=he,he.next=he),he}function Wl(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function nu(A,I,Y){this.i=A,this.x=I,this.y=Y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function iu(A,I,Y,ie){for(var he=0,ve=I,Ee=Y-ie;ve<Y;ve+=ie)he+=(A[Ee]-A[ve])*(A[ve+1]+A[Ee+1]),Ee=ve;return he}function Th(A,I,Y,ie,he){!function ve(Ee,Ne,We,ct,dt){for(;ct>We;){if(ct-We>600){var Bt=ct-We+1,Xt=Ne-We+1,qt=Math.log(Bt),rr=.5*Math.exp(2*qt/3),pr=.5*Math.sqrt(qt*rr*(Bt-rr)/Bt)*(Xt-Bt/2<0?-1:1);ve(Ee,Ne,Math.max(We,Math.floor(Ne-Xt*rr/Bt+pr)),Math.min(ct,Math.floor(Ne+(Bt-Xt)*rr/Bt+pr)),dt)}var Dr=Ee[Ne],Fr=We,Hr=ct;for(Xl(Ee,We,Ne),dt(Ee[ct],Dr)>0&&Xl(Ee,We,ct);Fr<Hr;){for(Xl(Ee,Fr,Hr),Fr++,Hr--;dt(Ee[Fr],Dr)<0;)Fr++;for(;dt(Ee[Hr],Dr)>0;)Hr--}0===dt(Ee[We],Dr)?Xl(Ee,We,Hr):Xl(Ee,++Hr,ct),Hr<=Ne&&(We=Hr+1),Ne<=Hr&&(ct=Hr-1)}}(A,I,Y||0,ie||A.length-1,he||kh)}function Xl(A,I,Y){var ie=A[I];A[I]=A[Y],A[Y]=ie}function kh(A,I){return A<I?-1:A>I?1:0}function au(A,I){var Y=A.length;if(Y<=1)return[A];for(var ie,he,ve=[],Ee=0;Ee<Y;Ee++){var Ne=P(A[Ee]);0!==Ne&&(A[Ee].area=Math.abs(Ne),void 0===he&&(he=Ne<0),he===Ne<0?(ie&&ve.push(ie),ie=[A[Ee]]):ie.push(A[Ee]))}if(ie&&ve.push(ie),I>1)for(var We=0;We<ve.length;We++)ve[We].length<=I||(Th(ve[We],I,1,ve[We].length-1,Ah),ve[We]=ve[We].slice(0,I));return ve}function Ah(A,I){return I.area-A.area}function ou(A,I,Y){for(var ie=Y.patternDependencies,he=!1,ve=0,Ee=I;ve<Ee.length;ve+=1){var Ne=Ee[ve].paint.get(A+"-pattern");Ne.isConstant()||(he=!0);var We=Ne.constantOr(null);We&&(he=!0,ie[We.to]=!0,ie[We.from]=!0)}return he}function su(A,I,Y,ie,he){for(var ve=he.patternDependencies,Ee=0,Ne=I;Ee<Ne.length;Ee+=1){var We=Ne[Ee],ct=We.paint.get(A+"-pattern").value;if("constant"!==ct.kind){var dt=ct.evaluate({zoom:ie-1},Y,{},he.availableImages),Bt=ct.evaluate({zoom:ie},Y,{},he.availableImages),Xt=ct.evaluate({zoom:ie+1},Y,{},he.availableImages);Bt=Bt&&Bt.name?Bt.name:Bt,Xt=Xt&&Xt.name?Xt.name:Xt,ve[dt=dt&&dt.name?dt.name:dt]=!0,ve[Bt]=!0,ve[Xt]=!0,Y.patterns[We.id]={min:dt,mid:Bt,max:Xt}}}return Y}hc.deviation=function(A,I,Y,ie){var he=I&&I.length,Ee=Math.abs(iu(A,0,he?I[0]*Y:A.length,Y));if(he)for(var Ne=0,We=I.length;Ne<We;Ne++)Ee-=Math.abs(iu(A,I[Ne]*Y,Ne<We-1?I[Ne+1]*Y:A.length,Y));var Bt=0;for(Ne=0;Ne<ie.length;Ne+=3){var Xt=ie[Ne]*Y,qt=ie[Ne+1]*Y,rr=ie[Ne+2]*Y;Bt+=Math.abs((A[Xt]-A[rr])*(A[qt+1]-A[Xt+1])-(A[Xt]-A[qt])*(A[rr+1]-A[Xt+1]))}return 0===Ee&&0===Bt?0:Math.abs((Bt-Ee)/Ee)},hc.flatten=function(A){for(var I=A[0][0].length,Y={vertices:[],holes:[],dimensions:I},ie=0,he=0;he<A.length;he++){for(var ve=0;ve<A[he].length;ve++)for(var Ee=0;Ee<I;Ee++)Y.vertices.push(A[he][ve][Ee]);he>0&&Y.holes.push(ie+=A[he-1].length)}return Y},tu.default=ph;var As=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ns,this.indexArray=new Ka,this.indexArray2=new F,this.programConfigurations=new aa(Bu,A.layers,A.zoom),this.segments=new Ft,this.segments2=new Ft,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};As.prototype.populate=function(A,I,Y){this.hasPattern=ou("fill",this.layers,I);for(var ie=this.layers[0].layout.get("fill-sort-key"),he=[],ve=0,Ee=A;ve<Ee.length;ve+=1){var Ne=Ee[ve],We=Ne.feature,ct=Ne.id,dt=Ne.index,Bt=Ne.sourceLayerIndex,Xt=this.layers[0]._featureFilter.needGeometry,qt={type:We.type,id:ct,properties:We.properties,geometry:Xt?ua(We):[]};if(this.layers[0]._featureFilter.filter(new Ki(this.zoom),qt,Y)){Xt||(qt.geometry=ua(We));var rr=ie?ie.evaluate(qt,{},Y,I.availableImages):void 0;he.push({id:ct,properties:We.properties,type:We.type,sourceLayerIndex:Bt,index:dt,geometry:qt.geometry,patterns:{},sortKey:rr})}}ie&&he.sort(function(Hn,ti){return Hn.sortKey-ti.sortKey});for(var Sr=0,Mr=he;Sr<Mr.length;Sr+=1){var Dr=Mr[Sr],Hr=Dr.geometry,un=Dr.index,vn=Dr.sourceLayerIndex;if(this.hasPattern){var Fn=su("fill",this.layers,Dr,this.zoom,I);this.patternFeatures.push(Fn)}else this.addFeature(Dr,Hr,un,Y,{});I.featureIndex.insert(A[un].feature,Hr,un,vn,this.index)}},As.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Y)},As.prototype.addFeatures=function(A,I,Y){for(var ie=0,he=this.patternFeatures;ie<he.length;ie+=1){var ve=he[ie];this.addFeature(ve,ve.geometry,ve.index,I,Y)}},As.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},As.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},As.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Bu),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.indexBuffer2=A.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(A),this.uploaded=!0},As.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},As.prototype.addFeature=function(A,I,Y,ie,he){for(var ve=0,Ee=au(I,500);ve<Ee.length;ve+=1){for(var Ne=Ee[ve],We=0,ct=0,dt=Ne;ct<dt.length;ct+=1)We+=dt[ct].length;for(var Bt=this.segments.prepareSegment(We,this.layoutVertexArray,this.indexArray),Xt=Bt.vertexLength,qt=[],rr=[],pr=0,Sr=Ne;pr<Sr.length;pr+=1){var Mr=Sr[pr];if(0!==Mr.length){Mr!==Ne[0]&&rr.push(qt.length/2);var Dr=this.segments2.prepareSegment(Mr.length,this.layoutVertexArray,this.indexArray2),Fr=Dr.vertexLength;this.layoutVertexArray.emplaceBack(Mr[0].x,Mr[0].y),this.indexArray2.emplaceBack(Fr+Mr.length-1,Fr),qt.push(Mr[0].x),qt.push(Mr[0].y);for(var Hr=1;Hr<Mr.length;Hr++)this.layoutVertexArray.emplaceBack(Mr[Hr].x,Mr[Hr].y),this.indexArray2.emplaceBack(Fr+Hr-1,Fr+Hr),qt.push(Mr[Hr].x),qt.push(Mr[Hr].y);Dr.vertexLength+=Mr.length,Dr.primitiveLength+=Mr.length}}for(var un=tu(qt,rr),vn=0;vn<un.length;vn+=3)this.indexArray.emplaceBack(Xt+un[vn],Xt+un[vn+1],Xt+un[vn+2]);Bt.vertexLength+=We,Bt.primitiveLength+=un.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,he,ie)},Wr("FillBucket",As,{omit:["layers","patternFeatures"]});var Mh=new Ao({"fill-sort-key":new gi(Ce.layout_fill["fill-sort-key"])}),Sh={paint:new Ao({"fill-antialias":new ai(Ce.paint_fill["fill-antialias"]),"fill-opacity":new gi(Ce.paint_fill["fill-opacity"]),"fill-color":new gi(Ce.paint_fill["fill-color"]),"fill-outline-color":new gi(Ce.paint_fill["fill-outline-color"]),"fill-translate":new ai(Ce.paint_fill["fill-translate"]),"fill-translate-anchor":new ai(Ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new zs(Ce.paint_fill["fill-pattern"])}),layout:Mh},Eh=function(A){function I(Y){A.call(this,Y,Sh)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.recalculate=function(Y,ie){A.prototype.recalculate.call(this,Y,ie);var he=this.paint._values["fill-outline-color"];"constant"===he.value.kind&&void 0===he.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},I.prototype.createBucket=function(Y){return new As(Y)},I.prototype.queryRadius=function(){return Mo(this.paint.get("fill-translate"))},I.prototype.queryIntersectsFeature=function(Y,ie,he,ve,Ee,Ne,We){return Rs(So(Y,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),Ne.angle,We),ve)},I.prototype.isTileClipped=function(){return!0},I}(jo),Hu=Qi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,qu=bl;function bl(A,I,Y,ie,he){this.properties={},this.extent=Y,this.type=0,this._pbf=A,this._geometry=-1,this._keys=ie,this._values=he,A.readFields(Lh,this,I)}function Lh(A,I,Y){1==A?I.id=Y.readVarint():2==A?function(ie,he){for(var ve=ie.readVarint()+ie.pos;ie.pos<ve;){var Ee=he._keys[ie.readVarint()],Ne=he._values[ie.readVarint()];he.properties[Ee]=Ne}}(Y,I):3==A?I.type=Y.readVarint():4==A&&(I._geometry=Y.pos)}function Ch(A){for(var I,Y,ie=0,he=0,ve=A.length,Ee=ve-1;he<ve;Ee=he++)ie+=((Y=A[Ee]).x-(I=A[he]).x)*(I.y+Y.y);return ie}bl.types=["Unknown","Point","LineString","Polygon"],bl.prototype.loadGeometry=function(){var A=this._pbf;A.pos=this._geometry;for(var I,Y=A.readVarint()+A.pos,ie=1,he=0,ve=0,Ee=0,Ne=[];A.pos<Y;){if(he<=0){var We=A.readVarint();ie=7&We,he=We>>3}if(he--,1===ie||2===ie)ve+=A.readSVarint(),Ee+=A.readSVarint(),1===ie&&(I&&Ne.push(I),I=[]),I.push(new r(ve,Ee));else{if(7!==ie)throw new Error("unknown command "+ie);I&&I.push(I[0].clone())}}return I&&Ne.push(I),Ne},bl.prototype.bbox=function(){var A=this._pbf;A.pos=this._geometry;for(var I=A.readVarint()+A.pos,Y=1,ie=0,he=0,ve=0,Ee=1/0,Ne=-1/0,We=1/0,ct=-1/0;A.pos<I;){if(ie<=0){var dt=A.readVarint();Y=7&dt,ie=dt>>3}if(ie--,1===Y||2===Y)(he+=A.readSVarint())<Ee&&(Ee=he),he>Ne&&(Ne=he),(ve+=A.readSVarint())<We&&(We=ve),ve>ct&&(ct=ve);else if(7!==Y)throw new Error("unknown command "+Y)}return[Ee,We,Ne,ct]},bl.prototype.toGeoJSON=function(A,I,Y){var ie,he,ve=this.extent*Math.pow(2,Y),Ee=this.extent*A,Ne=this.extent*I,We=this.loadGeometry(),ct=bl.types[this.type];function dt(qt){for(var rr=0;rr<qt.length;rr++){var pr=qt[rr];qt[rr]=[360*(pr.x+Ee)/ve-180,360/Math.PI*Math.atan(Math.exp((180-360*(pr.y+Ne)/ve)*Math.PI/180))-90]}}switch(this.type){case 1:var Bt=[];for(ie=0;ie<We.length;ie++)Bt[ie]=We[ie][0];dt(We=Bt);break;case 2:for(ie=0;ie<We.length;ie++)dt(We[ie]);break;case 3:for(We=function(qt){var rr=qt.length;if(rr<=1)return[qt];for(var pr,Sr,Mr=[],Dr=0;Dr<rr;Dr++){var Fr=Ch(qt[Dr]);0!==Fr&&(void 0===Sr&&(Sr=Fr<0),Sr===Fr<0?(pr&&Mr.push(pr),pr=[qt[Dr]]):pr.push(qt[Dr]))}return pr&&Mr.push(pr),Mr}(We),ie=0;ie<We.length;ie++)for(he=0;he<We[ie].length;he++)dt(We[ie][he])}1===We.length?We=We[0]:ct="Multi"+ct;var Xt={type:"Feature",geometry:{type:ct,coordinates:We},properties:this.properties};return"id"in this&&(Xt.id=this.id),Xt};var Gu=Yu;function Yu(A,I){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=A,this._keys=[],this._values=[],this._features=[],A.readFields(Ph,this,I),this.length=this._features.length}function Ph(A,I,Y){15===A?I.version=Y.readVarint():1===A?I.name=Y.readString():5===A?I.extent=Y.readVarint():2===A?I._features.push(Y.pos):3===A?I._keys.push(Y.readString()):4===A&&I._values.push(function(ie){for(var he=null,ve=ie.readVarint()+ie.pos;ie.pos<ve;){var Ee=ie.readVarint()>>3;he=1===Ee?ie.readString():2===Ee?ie.readFloat():3===Ee?ie.readDouble():4===Ee?ie.readVarint64():5===Ee?ie.readVarint():6===Ee?ie.readSVarint():7===Ee?ie.readBoolean():null}return he}(Y))}function Ih(A,I,Y){if(3===A){var ie=new Gu(Y,Y.readVarint()+Y.pos);ie.length&&(I[ie.name]=ie)}}Yu.prototype.feature=function(A){if(A<0||A>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[A];var I=this._pbf.readVarint()+this._pbf.pos;return new qu(this._pbf,I,this.extent,this._keys,this._values)};var _l={VectorTile:function(A,I){this.layers=A.readFields(Ih,{},I)},VectorTileFeature:qu,VectorTileLayer:Gu},Oh=_l.VectorTileFeature.types,lu=Math.pow(2,13);function Zl(A,I,Y,ie,he,ve,Ee,Ne){A.emplaceBack(I,Y,2*Math.floor(ie*lu)+Ee,he*lu*2,ve*lu*2,Math.round(Ne))}var Ms=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=A.index,this.hasPattern=!1,this.layoutVertexArray=new fs,this.indexArray=new Ka,this.programConfigurations=new aa(Hu,A.layers,A.zoom),this.segments=new Ft,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};function zh(A,I){return A.x===I.x&&(A.x<0||A.x>8192)||A.y===I.y&&(A.y<0||A.y>8192)}function Dh(A){return A.every(function(I){return I.x<0})||A.every(function(I){return I.x>8192})||A.every(function(I){return I.y<0})||A.every(function(I){return I.y>8192})}Ms.prototype.populate=function(A,I,Y){this.features=[],this.hasPattern=ou("fill-extrusion",this.layers,I);for(var ie=0,he=A;ie<he.length;ie+=1){var ve=he[ie],Ee=ve.feature,Ne=ve.id,We=ve.index,ct=ve.sourceLayerIndex,dt=this.layers[0]._featureFilter.needGeometry,Bt={type:Ee.type,id:Ne,properties:Ee.properties,geometry:dt?ua(Ee):[]};if(this.layers[0]._featureFilter.filter(new Ki(this.zoom),Bt,Y)){var Xt={id:Ne,sourceLayerIndex:ct,index:We,geometry:dt?Bt.geometry:ua(Ee),properties:Ee.properties,type:Ee.type,patterns:{}};void 0!==Ee.id&&(Xt.id=Ee.id),this.hasPattern?this.features.push(su("fill-extrusion",this.layers,Xt,this.zoom,I)):this.addFeature(Xt,Xt.geometry,We,Y,{}),I.featureIndex.insert(Ee,Xt.geometry,We,ct,this.index,!0)}}},Ms.prototype.addFeatures=function(A,I,Y){for(var ie=0,he=this.features;ie<he.length;ie+=1){var ve=he[ie];this.addFeature(ve,ve.geometry,ve.index,I,Y)}},Ms.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Y)},Ms.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ms.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ms.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Hu),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Ms.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ms.prototype.addFeature=function(A,I,Y,ie,he){for(var ve=0,Ee=au(I,500);ve<Ee.length;ve+=1){for(var Ne=Ee[ve],We=0,ct=0,dt=Ne;ct<dt.length;ct+=1)We+=dt[ct].length;for(var Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Xt=0,qt=Ne;Xt<qt.length;Xt+=1){var rr=qt[Xt];if(0!==rr.length&&!Dh(rr))for(var pr=0,Sr=0;Sr<rr.length;Sr++){var Mr=rr[Sr];if(Sr>=1){var Dr=rr[Sr-1];if(!zh(Mr,Dr)){Bt.vertexLength+4>Ft.MAX_VERTEX_ARRAY_LENGTH&&(Bt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Fr=Mr.sub(Dr)._perp()._unit(),Hr=Dr.dist(Mr);pr+Hr>32768&&(pr=0),Zl(this.layoutVertexArray,Mr.x,Mr.y,Fr.x,Fr.y,0,0,pr),Zl(this.layoutVertexArray,Mr.x,Mr.y,Fr.x,Fr.y,0,1,pr),Zl(this.layoutVertexArray,Dr.x,Dr.y,Fr.x,Fr.y,0,0,pr+=Hr),Zl(this.layoutVertexArray,Dr.x,Dr.y,Fr.x,Fr.y,0,1,pr);var un=Bt.vertexLength;this.indexArray.emplaceBack(un,un+2,un+1),this.indexArray.emplaceBack(un+1,un+2,un+3),Bt.vertexLength+=4,Bt.primitiveLength+=2}}}}if(Bt.vertexLength+We>Ft.MAX_VERTEX_ARRAY_LENGTH&&(Bt=this.segments.prepareSegment(We,this.layoutVertexArray,this.indexArray)),"Polygon"===Oh[A.type]){for(var vn=[],Fn=[],Dn=Bt.vertexLength,Hn=0,ti=Ne;Hn<ti.length;Hn+=1){var ri=ti[Hn];if(0!==ri.length){ri!==Ne[0]&&Fn.push(vn.length/2);for(var Wn=0;Wn<ri.length;Wn++){var ci=ri[Wn];Zl(this.layoutVertexArray,ci.x,ci.y,0,0,1,1,0),vn.push(ci.x),vn.push(ci.y)}}}for(var si=tu(vn,Fn),ni=0;ni<si.length;ni+=3)this.indexArray.emplaceBack(Dn+si[ni],Dn+si[ni+2],Dn+si[ni+1]);Bt.primitiveLength+=si.length/3,Bt.vertexLength+=We}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,he,ie)},Wr("FillExtrusionBucket",Ms,{omit:["layers","features"]});var Rh={paint:new Ao({"fill-extrusion-opacity":new ai(Ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new gi(Ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ai(Ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ai(Ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new zs(Ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new gi(Ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new gi(Ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ai(Ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Fh=function(A){function I(Y){A.call(this,Y,Rh)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.createBucket=function(Y){return new Ms(Y)},I.prototype.queryRadius=function(){return Mo(this.paint.get("fill-extrusion-translate"))},I.prototype.is3D=function(){return!0},I.prototype.queryIntersectsFeature=function(Y,ie,he,ve,Ee,Ne,We,ct){var dt=So(Y,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),Ne.angle,We),Bt=this.paint.get("fill-extrusion-height").evaluate(ie,he),Xt=this.paint.get("fill-extrusion-base").evaluate(ie,he),qt=function(pr,Sr,Mr,Dr){for(var Fr=[],Hr=0,un=pr;Hr<un.length;Hr+=1){var vn=un[Hr],Fn=[vn.x,vn.y,0,1];Qs(Fn,Fn,Sr),Fr.push(new r(Fn[0]/Fn[3],Fn[1]/Fn[3]))}return Fr}(dt,ct),rr=function(pr,Sr,Mr,Dr){for(var Fr=[],Hr=[],un=Dr[8]*Sr,vn=Dr[9]*Sr,Fn=Dr[10]*Sr,Dn=Dr[11]*Sr,Hn=Dr[8]*Mr,ti=Dr[9]*Mr,ri=Dr[10]*Mr,Wn=Dr[11]*Mr,ci=0,si=pr;ci<si.length;ci+=1){for(var Gi=[],Ri=[],Zi=0,yi=si[ci];Zi<yi.length;Zi+=1){var Ni=yi[Zi],ha=Ni.x,oa=Ni.y,wa=Dr[0]*ha+Dr[4]*oa+Dr[12],sa=Dr[1]*ha+Dr[5]*oa+Dr[13],to=Dr[2]*ha+Dr[6]*oa+Dr[14],Ta=Dr[3]*ha+Dr[7]*oa+Dr[15],Eo=to+Fn,mo=Ta+Dn,xo=wa+Hn,Uo=sa+ti,Io=to+ri,ro=Ta+Wn,bo=new r((wa+un)/mo,(sa+vn)/mo);bo.z=Eo/mo,Gi.push(bo);var Ha=new r(xo/ro,Uo/ro);Ha.z=Io/ro,Ri.push(Ha)}Fr.push(Gi),Hr.push(Ri)}return[Fr,Hr]}(ve,Xt,Bt,ct);return function(pr,Sr,Mr){var Dr=1/0;Rs(Mr,Sr)&&(Dr=Wu(Mr,Sr[0]));for(var Fr=0;Fr<Sr.length;Fr++)for(var Hr=Sr[Fr],un=pr[Fr],vn=0;vn<Hr.length-1;vn++){var Fn=Hr[vn],ri=[Fn,Hr[vn+1],un[vn+1],un[vn],Fn];Co(Mr,ri)&&(Dr=Math.min(Dr,Wu(Mr,ri)))}return Dr!==1/0&&Dr}(rr[0],rr[1],qt)},I}(jo);function Jl(A,I){return A.x*I.x+A.y*I.y}function Wu(A,I){if(1===A.length){for(var Y,ie=0,he=I[ie++];!Y||he.equals(Y);)if(!(Y=I[ie++]))return 1/0;for(;ie<I.length;ie++){var ve=I[ie],Ee=A[0],Ne=Y.sub(he),We=ve.sub(he),ct=Ee.sub(he),dt=Jl(Ne,Ne),Bt=Jl(Ne,We),Xt=Jl(We,We),qt=Jl(ct,Ne),rr=Jl(ct,We),pr=dt*Xt-Bt*Bt,Sr=(Xt*qt-Bt*rr)/pr,Mr=(dt*rr-Bt*qt)/pr,Fr=he.z*(1-Sr-Mr)+Y.z*Sr+ve.z*Mr;if(isFinite(Fr))return Fr}return 1/0}for(var Hr=1/0,un=0,vn=I;un<vn.length;un+=1)Hr=Math.min(Hr,vn[un].z);return Hr}var Xu=Qi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Bh=_l.VectorTileFeature.types,Nh=Math.cos(Math.PI/180*37.5),Zu=Math.pow(2,14)/.5,Wo=function(A){this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(I){return I.id}),this.index=A.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ws,this.indexArray=new Ka,this.programConfigurations=new aa(Xu,A.layers,A.zoom),this.segments=new Ft,this.stateDependentLayerIds=this.layers.filter(function(I){return I.isStateDependent()}).map(function(I){return I.id})};Wo.prototype.populate=function(A,I,Y){this.hasPattern=ou("line",this.layers,I);for(var ie=this.layers[0].layout.get("line-sort-key"),he=[],ve=0,Ee=A;ve<Ee.length;ve+=1){var Ne=Ee[ve],We=Ne.feature,ct=Ne.id,dt=Ne.index,Bt=Ne.sourceLayerIndex,Xt=this.layers[0]._featureFilter.needGeometry,qt={type:We.type,id:ct,properties:We.properties,geometry:Xt?ua(We):[]};if(this.layers[0]._featureFilter.filter(new Ki(this.zoom),qt,Y)){Xt||(qt.geometry=ua(We));var rr=ie?ie.evaluate(qt,{},Y):void 0;he.push({id:ct,properties:We.properties,type:We.type,sourceLayerIndex:Bt,index:dt,geometry:qt.geometry,patterns:{},sortKey:rr})}}ie&&he.sort(function(Hn,ti){return Hn.sortKey-ti.sortKey});for(var Sr=0,Mr=he;Sr<Mr.length;Sr+=1){var Dr=Mr[Sr],Hr=Dr.geometry,un=Dr.index,vn=Dr.sourceLayerIndex;if(this.hasPattern){var Fn=su("line",this.layers,Dr,this.zoom,I);this.patternFeatures.push(Fn)}else this.addFeature(Dr,Hr,un,Y,{});I.featureIndex.insert(A[un].feature,Hr,un,vn,this.index)}},Wo.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(A,I,this.stateDependentLayers,Y)},Wo.prototype.addFeatures=function(A,I,Y){for(var ie=0,he=this.patternFeatures;ie<he.length;ie+=1){var ve=he[ie];this.addFeature(ve,ve.geometry,ve.index,I,Y)}},Wo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Wo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Wo.prototype.upload=function(A){this.uploaded||(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,Xu),this.indexBuffer=A.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(A),this.uploaded=!0},Wo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Wo.prototype.addFeature=function(A,I,Y,ie,he){for(var ve=this.layers[0].layout,Ee=ve.get("line-join").evaluate(A,{}),Ne=ve.get("line-cap"),We=ve.get("line-miter-limit"),ct=ve.get("line-round-limit"),dt=0,Bt=I;dt<Bt.length;dt+=1)this.addLine(Bt[dt],A,Ee,Ne,We,ct);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,A,Y,he,ie)},Wo.prototype.addLine=function(A,I,Y,ie,he,ve){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,I.properties&&I.properties.hasOwnProperty("mapbox_clip_start")&&I.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+I.properties.mapbox_clip_start,this.clipEnd=+I.properties.mapbox_clip_end;for(var Ee=0;Ee<A.length-1;Ee++)this.totalDistance+=A[Ee].dist(A[Ee+1]);this.updateScaledDistance()}for(var Ne="Polygon"===Bh[I.type],We=A.length;We>=2&&A[We-1].equals(A[We-2]);)We--;for(var ct=0;ct<We-1&&A[ct].equals(A[ct+1]);)ct++;if(!(We<(Ne?3:2))){"bevel"===Y&&(he=1.05);var dt,Bt=this.overscaling<=16?122880/(512*this.overscaling):0,Xt=this.segments.prepareSegment(10*We,this.layoutVertexArray,this.indexArray),qt=void 0,rr=void 0,pr=void 0,Sr=void 0;this.e1=this.e2=-1,Ne&&(Sr=A[ct].sub(dt=A[We-2])._unit()._perp());for(var Mr=ct;Mr<We;Mr++)if(!(rr=Mr===We-1?Ne?A[ct+1]:void 0:A[Mr+1])||!A[Mr].equals(rr)){Sr&&(pr=Sr),dt&&(qt=dt),dt=A[Mr],Sr=rr?rr.sub(dt)._unit()._perp():pr;var Dr=(pr=pr||Sr).add(Sr);0===Dr.x&&0===Dr.y||Dr._unit();var Fr=pr.x*Sr.x+pr.y*Sr.y,Hr=Dr.x*Sr.x+Dr.y*Sr.y,un=0!==Hr?1/Hr:1/0,vn=2*Math.sqrt(2-2*Hr),Fn=Hr<Nh&&qt&&rr,Dn=pr.x*Sr.y-pr.y*Sr.x>0;if(Fn&&Mr>ct){var Hn=dt.dist(qt);if(Hn>2*Bt){var ti=dt.sub(dt.sub(qt)._mult(Bt/Hn)._round());this.updateDistance(qt,ti),this.addCurrentVertex(ti,pr,0,0,Xt),qt=ti}}var ri=qt&&rr,Wn=ri?Y:Ne?"butt":ie;if(ri&&"round"===Wn&&(un<ve?Wn="miter":un<=2&&(Wn="fakeround")),"miter"===Wn&&un>he&&(Wn="bevel"),"bevel"===Wn&&(un>2&&(Wn="flipbevel"),un<he&&(Wn="miter")),qt&&this.updateDistance(qt,dt),"miter"===Wn)Dr._mult(un),this.addCurrentVertex(dt,Dr,0,0,Xt);else if("flipbevel"===Wn){if(un>100)Dr=Sr.mult(-1);else{var ci=un*pr.add(Sr).mag()/pr.sub(Sr).mag();Dr._perp()._mult(ci*(Dn?-1:1))}this.addCurrentVertex(dt,Dr,0,0,Xt),this.addCurrentVertex(dt,Dr.mult(-1),0,0,Xt)}else if("bevel"===Wn||"fakeround"===Wn){var si=-Math.sqrt(un*un-1),ni=Dn?si:0,Gi=Dn?0:si;if(qt&&this.addCurrentVertex(dt,pr,ni,Gi,Xt),"fakeround"===Wn)for(var Ri=Math.round(180*vn/Math.PI/20),Zi=1;Zi<Ri;Zi++){var yi=Zi/Ri;if(.5!==yi){var Ni=yi-.5;yi+=yi*Ni*(yi-1)*((1.0904+Fr*(Fr*(3.55645-1.43519*Fr)-3.2452))*Ni*Ni+(.848013+Fr*(.215638*Fr-1.06021)))}var ha=Sr.sub(pr)._mult(yi)._add(pr)._unit()._mult(Dn?-1:1);this.addHalfVertex(dt,ha.x,ha.y,!1,Dn,0,Xt)}rr&&this.addCurrentVertex(dt,Sr,-ni,-Gi,Xt)}else if("butt"===Wn)this.addCurrentVertex(dt,Dr,0,0,Xt);else if("square"===Wn){var oa=qt?1:-1;this.addCurrentVertex(dt,Dr,oa,oa,Xt)}else"round"===Wn&&(qt&&(this.addCurrentVertex(dt,pr,0,0,Xt),this.addCurrentVertex(dt,pr,1,1,Xt,!0)),rr&&(this.addCurrentVertex(dt,Sr,-1,-1,Xt,!0),this.addCurrentVertex(dt,Sr,0,0,Xt)));if(Fn&&Mr<We-1){var wa=dt.dist(rr);if(wa>2*Bt){var sa=dt.add(rr.sub(dt)._mult(Bt/wa)._round());this.updateDistance(dt,sa),this.addCurrentVertex(sa,Sr,0,0,Xt),dt=sa}}}}},Wo.prototype.addCurrentVertex=function(A,I,Y,ie,he,ve){void 0===ve&&(ve=!1);var We=I.y*ie-I.x,ct=-I.y-I.x*ie;this.addHalfVertex(A,I.x+I.y*Y,I.y-I.x*Y,ve,!1,Y,he),this.addHalfVertex(A,We,ct,ve,!0,-ie,he),this.distance>Zu/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(A,I,Y,ie,he,ve))},Wo.prototype.addHalfVertex=function(A,I,Y,ie,he,ve,Ee){var ct=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((A.x<<1)+(ie?1:0),(A.y<<1)+(he?1:0),Math.round(63*I)+128,Math.round(63*Y)+128,1+(0===ve?0:ve<0?-1:1)|(63&ct)<<2,ct>>6);var dt=Ee.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,dt),Ee.primitiveLength++),he?this.e2=dt:this.e1=dt},Wo.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Zu-1):this.distance},Wo.prototype.updateDistance=function(A,I){this.distance+=A.dist(I),this.updateScaledDistance()},Wr("LineBucket",Wo,{omit:["layers","patternFeatures"]});var jh=new Ao({"line-cap":new ai(Ce.layout_line["line-cap"]),"line-join":new gi(Ce.layout_line["line-join"]),"line-miter-limit":new ai(Ce.layout_line["line-miter-limit"]),"line-round-limit":new ai(Ce.layout_line["line-round-limit"]),"line-sort-key":new gi(Ce.layout_line["line-sort-key"])}),Ju={paint:new Ao({"line-opacity":new gi(Ce.paint_line["line-opacity"]),"line-color":new gi(Ce.paint_line["line-color"]),"line-translate":new ai(Ce.paint_line["line-translate"]),"line-translate-anchor":new ai(Ce.paint_line["line-translate-anchor"]),"line-width":new gi(Ce.paint_line["line-width"]),"line-gap-width":new gi(Ce.paint_line["line-gap-width"]),"line-offset":new gi(Ce.paint_line["line-offset"]),"line-blur":new gi(Ce.paint_line["line-blur"]),"line-dasharray":new Ds(Ce.paint_line["line-dasharray"]),"line-pattern":new zs(Ce.paint_line["line-pattern"]),"line-gradient":new Qo(Ce.paint_line["line-gradient"])}),layout:jh},Ku=new(function(A){function I(){A.apply(this,arguments)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.possiblyEvaluate=function(Y,ie){return ie=new Ki(Math.floor(ie.zoom),{now:ie.now,fadeDuration:ie.fadeDuration,zoomHistory:ie.zoomHistory,transition:ie.transition}),A.prototype.possiblyEvaluate.call(this,Y,ie)},I.prototype.evaluate=function(Y,ie,he,ve){return ie=f({},ie,{zoom:Math.floor(ie.zoom)}),A.prototype.evaluate.call(this,Y,ie,he,ve)},I}(gi))(Ju.paint.properties["line-width"].specification);Ku.useIntegerZoom=!0;var Uh=function(A){function I(Y){A.call(this,Y,Ju)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype._handleSpecialPaintPropertyUpdate=function(Y){"line-gradient"===Y&&this._updateGradient()},I.prototype._updateGradient=function(){this.gradient=Fu(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},I.prototype.recalculate=function(Y,ie){A.prototype.recalculate.call(this,Y,ie),this.paint._values["line-floorwidth"]=Ku.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Y)},I.prototype.createBucket=function(Y){return new Wo(Y)},I.prototype.queryRadius=function(Y){var ie=Y,he=Qu(ba("line-width",this,ie),ba("line-gap-width",this,ie)),ve=ba("line-offset",this,ie);return he/2+Math.abs(ve)+Mo(this.paint.get("line-translate"))},I.prototype.queryIntersectsFeature=function(Y,ie,he,ve,Ee,Ne,We){var ct=So(Y,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),Ne.angle,We),dt=We/2*Qu(this.paint.get("line-width").evaluate(ie,he),this.paint.get("line-gap-width").evaluate(ie,he)),Bt=this.paint.get("line-offset").evaluate(ie,he);return Bt&&(ve=function(Xt,qt){for(var rr=[],pr=new r(0,0),Sr=0;Sr<Xt.length;Sr++){for(var Mr=Xt[Sr],Dr=[],Fr=0;Fr<Mr.length;Fr++){var un=Mr[Fr],vn=Mr[Fr+1],Fn=0===Fr?pr:un.sub(Mr[Fr-1])._unit()._perp(),Dn=Fr===Mr.length-1?pr:vn.sub(un)._unit()._perp(),Hn=Fn._add(Dn)._unit();Hn._mult(1/(Hn.x*Dn.x+Hn.y*Dn.y)),Dr.push(Hn._mult(qt)._add(un))}rr.push(Dr)}return rr}(ve,Bt*We)),function(Xt,qt,rr){for(var pr=0;pr<qt.length;pr++){var Sr=qt[pr];if(Xt.length>=3)for(var Mr=0;Mr<Sr.length;Mr++)if($o(Xt,Sr[Mr]))return!0;if(sl(Xt,Sr,rr))return!0}return!1}(ct,ve,dt)},I.prototype.isTileClipped=function(){return!0},I}(jo);function Qu(A,I){return I>0?I+2*A:A}var cu=Qi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Vh=Qi([{name:"a_projected_pos",components:3,type:"Float32"}],4),Hh=(Qi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Qi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),$u=(Qi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Qi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),qh=Qi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Gh(A,I,Y){return A.sections.forEach(function(ie){var he,Ee,Ne;ie.text=(he=ie.text,Ee=Y,"uppercase"===(Ne=I.layout.get("text-transform").evaluate(Ee,{}))?he=he.toLocaleUpperCase():"lowercase"===Ne&&(he=he.toLocaleLowerCase()),io.applyArabicShaping&&(he=io.applyArabicShaping(he)),he)}),A}Qi([{name:"triangle",components:3,type:"Uint16"}]),Qi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Qi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Qi([{type:"Float32",name:"offsetX"}]),Qi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Kl={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},ef=function(A,I,Y,ie,he){var ve,Ee,Ne=8*he-ie-1,We=(1<<Ne)-1,ct=We>>1,dt=-7,Bt=Y?he-1:0,Xt=Y?-1:1,qt=A[I+Bt];for(Bt+=Xt,ve=qt&(1<<-dt)-1,qt>>=-dt,dt+=Ne;dt>0;ve=256*ve+A[I+Bt],Bt+=Xt,dt-=8);for(Ee=ve&(1<<-dt)-1,ve>>=-dt,dt+=ie;dt>0;Ee=256*Ee+A[I+Bt],Bt+=Xt,dt-=8);if(0===ve)ve=1-ct;else{if(ve===We)return Ee?NaN:1/0*(qt?-1:1);Ee+=Math.pow(2,ie),ve-=ct}return(qt?-1:1)*Ee*Math.pow(2,ve-ie)},tf=function(A,I,Y,ie,he,ve){var Ee,Ne,We,ct=8*ve-he-1,dt=(1<<ct)-1,Bt=dt>>1,Xt=23===he?Math.pow(2,-24)-Math.pow(2,-77):0,qt=ie?0:ve-1,rr=ie?1:-1,pr=I<0||0===I&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(Ne=isNaN(I)?1:0,Ee=dt):(Ee=Math.floor(Math.log(I)/Math.LN2),I*(We=Math.pow(2,-Ee))<1&&(Ee--,We*=2),(I+=Ee+Bt>=1?Xt/We:Xt*Math.pow(2,1-Bt))*We>=2&&(Ee++,We/=2),Ee+Bt>=dt?(Ne=0,Ee=dt):Ee+Bt>=1?(Ne=(I*We-1)*Math.pow(2,he),Ee+=Bt):(Ne=I*Math.pow(2,Bt-1)*Math.pow(2,he),Ee=0));he>=8;A[Y+qt]=255&Ne,qt+=rr,Ne/=256,he-=8);for(Ee=Ee<<he|Ne,ct+=he;ct>0;A[Y+qt]=255&Ee,qt+=rr,Ee/=256,ct-=8);A[Y+qt-rr]|=128*pr},mc=fa;function fa(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}fa.Varint=0,fa.Fixed64=1,fa.Bytes=2,fa.Fixed32=5;var rf="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Vs(A){return A.type===fa.Bytes?A.readVarint()+A.pos:A.pos+1}function nf(A,I,Y){var ie=I<=16383?1:I<=2097151?2:I<=268435455?3:Math.floor(Math.log(I)/(7*Math.LN2));Y.realloc(ie);for(var he=Y.pos-1;he>=A;he--)Y.buf[he+ie]=Y.buf[he]}function Yh(A,I){for(var Y=0;Y<A.length;Y++)I.writeVarint(A[Y])}function Wh(A,I){for(var Y=0;Y<A.length;Y++)I.writeSVarint(A[Y])}function Xh(A,I){for(var Y=0;Y<A.length;Y++)I.writeFloat(A[Y])}function Zh(A,I){for(var Y=0;Y<A.length;Y++)I.writeDouble(A[Y])}function Jh(A,I){for(var Y=0;Y<A.length;Y++)I.writeBoolean(A[Y])}function Kh(A,I){for(var Y=0;Y<A.length;Y++)I.writeFixed32(A[Y])}function Qh(A,I){for(var Y=0;Y<A.length;Y++)I.writeSFixed32(A[Y])}function $h(A,I){for(var Y=0;Y<A.length;Y++)I.writeFixed64(A[Y])}function ep(A,I){for(var Y=0;Y<A.length;Y++)I.writeSFixed64(A[Y])}function vc(A,I){return(A[I]|A[I+1]<<8|A[I+2]<<16)+16777216*A[I+3]}function Tl(A,I,Y){A[Y]=I,A[Y+1]=I>>>8,A[Y+2]=I>>>16,A[Y+3]=I>>>24}function af(A,I){return(A[I]|A[I+1]<<8|A[I+2]<<16)+(A[I+3]<<24)}function tp(A,I,Y){1===A&&Y.readMessage(rp,I)}function rp(A,I,Y){if(3===A){var ie=Y.readMessage(np,{}),Ee=ie.width,Ne=ie.height,We=ie.left,ct=ie.top,dt=ie.advance;I.push({id:ie.id,bitmap:new fl({width:Ee+6,height:Ne+6},ie.bitmap),metrics:{width:Ee,height:Ne,left:We,top:ct,advance:dt}})}}function np(A,I,Y){1===A?I.id=Y.readVarint():2===A?I.bitmap=Y.readBytes():3===A?I.width=Y.readVarint():4===A?I.height=Y.readVarint():5===A?I.left=Y.readSVarint():6===A?I.top=Y.readSVarint():7===A&&(I.advance=Y.readVarint())}function of(A){for(var I=0,Y=0,ie=0,he=A;ie<he.length;ie+=1){var ve=he[ie];I+=ve.w*ve.h,Y=Math.max(Y,ve.w)}A.sort(function(pr,Sr){return Sr.h-pr.h});for(var Ee=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(I/.95)),Y),h:1/0}],Ne=0,We=0,ct=0,dt=A;ct<dt.length;ct+=1)for(var Bt=dt[ct],Xt=Ee.length-1;Xt>=0;Xt--){var qt=Ee[Xt];if(!(Bt.w>qt.w||Bt.h>qt.h)){if(Bt.x=qt.x,Bt.y=qt.y,We=Math.max(We,Bt.y+Bt.h),Ne=Math.max(Ne,Bt.x+Bt.w),Bt.w===qt.w&&Bt.h===qt.h){var rr=Ee.pop();Xt<Ee.length&&(Ee[Xt]=rr)}else Bt.h===qt.h?(qt.x+=Bt.w,qt.w-=Bt.w):Bt.w===qt.w?(qt.y+=Bt.h,qt.h-=Bt.h):(Ee.push({x:qt.x+Bt.w,y:qt.y,w:qt.w-Bt.w,h:Bt.h}),qt.y+=Bt.h,qt.h-=Bt.h);break}}return{w:Ne,h:We,fill:I/(Ne*We)||0}}fa.prototype={destroy:function(){this.buf=null},readFields:function(A,I,Y){for(Y=Y||this.length;this.pos<Y;){var ie=this.readVarint(),he=ie>>3,ve=this.pos;this.type=7&ie,A(he,I,this),this.pos===ve&&this.skip(ie)}return I},readMessage:function(A,I){return this.readFields(A,I,this.readVarint()+this.pos)},readFixed32:function(){var A=vc(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=af(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=vc(this.buf,this.pos)+4294967296*vc(this.buf,this.pos+4);return this.pos+=8,A},readSFixed64:function(){var A=vc(this.buf,this.pos)+4294967296*af(this.buf,this.pos+4);return this.pos+=8,A},readFloat:function(){var A=ef(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=ef(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var I,Y,ie=this.buf;return I=127&(Y=ie[this.pos++]),Y<128?I:(I|=(127&(Y=ie[this.pos++]))<<7,Y<128?I:(I|=(127&(Y=ie[this.pos++]))<<14,Y<128?I:(I|=(127&(Y=ie[this.pos++]))<<21,Y<128?I:function(he,ve,Ee){var Ne,We,ct=Ee.buf;if(Ne=(112&(We=ct[Ee.pos++]))>>4,We<128||(Ne|=(127&(We=ct[Ee.pos++]))<<3,We<128)||(Ne|=(127&(We=ct[Ee.pos++]))<<10,We<128)||(Ne|=(127&(We=ct[Ee.pos++]))<<17,We<128)||(Ne|=(127&(We=ct[Ee.pos++]))<<24,We<128)||(Ne|=(1&(We=ct[Ee.pos++]))<<31,We<128))return function(A,I,Y){return Y?4294967296*I+(A>>>0):4294967296*(I>>>0)+(A>>>0)}(he,Ne,ve);throw new Error("Expected varint not more than 10 bytes")}(I|=(15&(Y=ie[this.pos]))<<28,A,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var A=this.readVarint()+this.pos,I=this.pos;return this.pos=A,A-I>=12&&rf?rf.decode(this.buf.subarray(I,A)):function(Y,ie,he){for(var ve="",Ee=ie;Ee<he;){var Ne,We,ct,dt=Y[Ee],Bt=null,Xt=dt>239?4:dt>223?3:dt>191?2:1;if(Ee+Xt>he)break;1===Xt?dt<128&&(Bt=dt):2===Xt?128==(192&(Ne=Y[Ee+1]))&&(Bt=(31&dt)<<6|63&Ne)<=127&&(Bt=null):3===Xt?(We=Y[Ee+2],128==(192&(Ne=Y[Ee+1]))&&128==(192&We)&&((Bt=(15&dt)<<12|(63&Ne)<<6|63&We)<=2047||Bt>=55296&&Bt<=57343)&&(Bt=null)):4===Xt&&(We=Y[Ee+2],ct=Y[Ee+3],128==(192&(Ne=Y[Ee+1]))&&128==(192&We)&&128==(192&ct)&&((Bt=(15&dt)<<18|(63&Ne)<<12|(63&We)<<6|63&ct)<=65535||Bt>=1114112)&&(Bt=null)),null===Bt?(Bt=65533,Xt=1):Bt>65535&&(Bt-=65536,ve+=String.fromCharCode(Bt>>>10&1023|55296),Bt=56320|1023&Bt),ve+=String.fromCharCode(Bt),Ee+=Xt}return ve}(this.buf,I,A)},readBytes:function(){var A=this.readVarint()+this.pos,I=this.buf.subarray(this.pos,A);return this.pos=A,I},readPackedVarint:function(A,I){if(this.type!==fa.Bytes)return A.push(this.readVarint(I));var Y=Vs(this);for(A=A||[];this.pos<Y;)A.push(this.readVarint(I));return A},readPackedSVarint:function(A){if(this.type!==fa.Bytes)return A.push(this.readSVarint());var I=Vs(this);for(A=A||[];this.pos<I;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==fa.Bytes)return A.push(this.readBoolean());var I=Vs(this);for(A=A||[];this.pos<I;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==fa.Bytes)return A.push(this.readFloat());var I=Vs(this);for(A=A||[];this.pos<I;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==fa.Bytes)return A.push(this.readDouble());var I=Vs(this);for(A=A||[];this.pos<I;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==fa.Bytes)return A.push(this.readFixed32());var I=Vs(this);for(A=A||[];this.pos<I;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==fa.Bytes)return A.push(this.readSFixed32());var I=Vs(this);for(A=A||[];this.pos<I;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==fa.Bytes)return A.push(this.readFixed64());var I=Vs(this);for(A=A||[];this.pos<I;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==fa.Bytes)return A.push(this.readSFixed64());var I=Vs(this);for(A=A||[];this.pos<I;)A.push(this.readSFixed64());return A},skip:function(A){var I=7&A;if(I===fa.Varint)for(;this.buf[this.pos++]>127;);else if(I===fa.Bytes)this.pos=this.readVarint()+this.pos;else if(I===fa.Fixed32)this.pos+=4;else{if(I!==fa.Fixed64)throw new Error("Unimplemented type: "+I);this.pos+=8}},writeTag:function(A,I){this.writeVarint(A<<3|I)},realloc:function(A){for(var I=this.length||16;I<this.pos+A;)I*=2;if(I!==this.length){var Y=new Uint8Array(I);Y.set(this.buf),this.buf=Y,this.length=I}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),Tl(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),Tl(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),Tl(this.buf,-1&A,this.pos),Tl(this.buf,Math.floor(A*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),Tl(this.buf,-1&A,this.pos),Tl(this.buf,Math.floor(A*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function(I,Y){var ie,he,ve,Ne;if(I>=0?(ie=I%4294967296|0,he=I/4294967296|0):(he=~(-I/4294967296),4294967295^(ie=~(-I%4294967296))?ie=ie+1|0:(ie=0,he=he+1|0)),I>=0x10000000000000000||I<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");Y.realloc(10),ve=ie,(Ne=Y).buf[Ne.pos++]=127&ve|128,ve>>>=7,Ne.buf[Ne.pos++]=127&ve|128,ve>>>=7,Ne.buf[Ne.pos++]=127&ve|128,ve>>>=7,Ne.buf[Ne.pos++]=127&ve|128,Ne.buf[Ne.pos]=127&(ve>>>=7),function(ve,Ee){var Ne=(7&ve)<<4;Ee.buf[Ee.pos++]|=Ne|((ve>>>=3)?128:0),ve&&(Ee.buf[Ee.pos++]=127&ve|((ve>>>=7)?128:0),ve&&(Ee.buf[Ee.pos++]=127&ve|((ve>>>=7)?128:0),ve&&(Ee.buf[Ee.pos++]=127&ve|((ve>>>=7)?128:0),ve&&(Ee.buf[Ee.pos++]=127&ve|((ve>>>=7)?128:0),ve&&(Ee.buf[Ee.pos++]=127&ve)))))}(he,Y)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),A<=127||(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(Boolean(A))},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var I=this.pos;this.pos=function(ie,he,ve){for(var Ee,Ne,We=0;We<he.length;We++){if((Ee=he.charCodeAt(We))>55295&&Ee<57344){if(!Ne){Ee>56319||We+1===he.length?(ie[ve++]=239,ie[ve++]=191,ie[ve++]=189):Ne=Ee;continue}if(Ee<56320){ie[ve++]=239,ie[ve++]=191,ie[ve++]=189,Ne=Ee;continue}Ee=Ne-55296<<10|Ee-56320|65536,Ne=null}else Ne&&(ie[ve++]=239,ie[ve++]=191,ie[ve++]=189,Ne=null);Ee<128?ie[ve++]=Ee:(Ee<2048?ie[ve++]=Ee>>6|192:(Ee<65536?ie[ve++]=Ee>>12|224:(ie[ve++]=Ee>>18|240,ie[ve++]=Ee>>12&63|128),ie[ve++]=Ee>>6&63|128),ie[ve++]=63&Ee|128)}return ve}(this.buf,A,this.pos);var Y=this.pos-I;Y>=128&&nf(I,Y,this),this.pos=I-1,this.writeVarint(Y),this.pos+=Y},writeFloat:function(A){this.realloc(4),tf(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),tf(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var I=A.length;this.writeVarint(I),this.realloc(I);for(var Y=0;Y<I;Y++)this.buf[this.pos++]=A[Y]},writeRawMessage:function(A,I){this.pos++;var Y=this.pos;A(I,this);var ie=this.pos-Y;ie>=128&&nf(Y,ie,this),this.pos=Y-1,this.writeVarint(ie),this.pos+=ie},writeMessage:function(A,I,Y){this.writeTag(A,fa.Bytes),this.writeRawMessage(I,Y)},writePackedVarint:function(A,I){I.length&&this.writeMessage(A,Yh,I)},writePackedSVarint:function(A,I){I.length&&this.writeMessage(A,Wh,I)},writePackedBoolean:function(A,I){I.length&&this.writeMessage(A,Jh,I)},writePackedFloat:function(A,I){I.length&&this.writeMessage(A,Xh,I)},writePackedDouble:function(A,I){I.length&&this.writeMessage(A,Zh,I)},writePackedFixed32:function(A,I){I.length&&this.writeMessage(A,Kh,I)},writePackedSFixed32:function(A,I){I.length&&this.writeMessage(A,Qh,I)},writePackedFixed64:function(A,I){I.length&&this.writeMessage(A,$h,I)},writePackedSFixed64:function(A,I){I.length&&this.writeMessage(A,ep,I)},writeBytesField:function(A,I){this.writeTag(A,fa.Bytes),this.writeBytes(I)},writeFixed32Field:function(A,I){this.writeTag(A,fa.Fixed32),this.writeFixed32(I)},writeSFixed32Field:function(A,I){this.writeTag(A,fa.Fixed32),this.writeSFixed32(I)},writeFixed64Field:function(A,I){this.writeTag(A,fa.Fixed64),this.writeFixed64(I)},writeSFixed64Field:function(A,I){this.writeTag(A,fa.Fixed64),this.writeSFixed64(I)},writeVarintField:function(A,I){this.writeTag(A,fa.Varint),this.writeVarint(I)},writeSVarintField:function(A,I){this.writeTag(A,fa.Varint),this.writeSVarint(I)},writeStringField:function(A,I){this.writeTag(A,fa.Bytes),this.writeString(I)},writeFloatField:function(A,I){this.writeTag(A,fa.Fixed32),this.writeFloat(I)},writeDoubleField:function(A,I){this.writeTag(A,fa.Fixed64),this.writeDouble(I)},writeBooleanField:function(A,I){this.writeVarintField(A,Boolean(I))}};var yc=function(A,I){var Y=I.pixelRatio,ie=I.version,he=I.stretchX,ve=I.stretchY,Ee=I.content;this.paddedRect=A,this.pixelRatio=Y,this.stretchX=he,this.stretchY=ve,this.content=Ee,this.version=ie},Ql={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ql.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Ql.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Ql.tlbr.get=function(){return this.tl.concat(this.br)},Ql.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(yc.prototype,Ql);var $l=function(A,I){var Y={},ie={};this.haveRenderCallbacks=[];var he=[];this.addImages(A,Y,he),this.addImages(I,ie,he);var ve=of(he),We=new Yo({width:ve.w||1,height:ve.h||1});for(var ct in A){var dt=A[ct],Bt=Y[ct].paddedRect;Yo.copy(dt.data,We,{x:0,y:0},{x:Bt.x+1,y:Bt.y+1},dt.data)}for(var Xt in I){var qt=I[Xt],rr=ie[Xt].paddedRect,pr=rr.x+1,Sr=rr.y+1,Mr=qt.data.width,Dr=qt.data.height;Yo.copy(qt.data,We,{x:0,y:0},{x:pr,y:Sr},qt.data),Yo.copy(qt.data,We,{x:0,y:Dr-1},{x:pr,y:Sr-1},{width:Mr,height:1}),Yo.copy(qt.data,We,{x:0,y:0},{x:pr,y:Sr+Dr},{width:Mr,height:1}),Yo.copy(qt.data,We,{x:Mr-1,y:0},{x:pr-1,y:Sr},{width:1,height:Dr}),Yo.copy(qt.data,We,{x:0,y:0},{x:pr+Mr,y:Sr},{width:1,height:Dr})}this.image=We,this.iconPositions=Y,this.patternPositions=ie};$l.prototype.addImages=function(A,I,Y){for(var ie in A){var he=A[ie],ve={x:0,y:0,w:he.data.width+2,h:he.data.height+2};Y.push(ve),I[ie]=new yc(ve,he),he.hasRenderCallback&&this.haveRenderCallbacks.push(ie)}},$l.prototype.patchUpdatedImages=function(A,I){for(var Y in A.dispatchRenderCallbacks(this.haveRenderCallbacks),A.updatedImages)this.patchUpdatedImage(this.iconPositions[Y],A.getImage(Y),I),this.patchUpdatedImage(this.patternPositions[Y],A.getImage(Y),I)},$l.prototype.patchUpdatedImage=function(A,I,Y){if(A&&I&&A.version!==I.version){A.version=I.version;var ie=A.tl;Y.update(I.data,void 0,{x:ie[0],y:ie[1]})}},Wr("ImagePosition",yc),Wr("ImageAtlas",$l);var as={horizontal:1,vertical:2,horizontalOnly:3},kl=function(){this.scale=1,this.fontStack="",this.imageName=null};kl.forText=function(A,I){var Y=new kl;return Y.scale=A||1,Y.fontStack=I,Y},kl.forImage=function(A){var I=new kl;return I.imageName=A,I};var Po=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function xc(A,I,Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt,Xt,qt,rr,pr){var Sr,Mr=Po.fromFeature(A,he);Bt===as.vertical&&Mr.verticalizePunctuation();var Dr=io.processBidirectionalText,Fr=io.processStyledBidirectionalText;if(Dr&&1===Mr.sections.length){Sr=[];for(var Hr=0,un=Dr(Mr.toString(),uu(Mr,ct,ve,I,ie,qt,rr));Hr<un.length;Hr+=1){var vn=un[Hr],Fn=new Po;Fn.text=vn,Fn.sections=Mr.sections;for(var Dn=0;Dn<vn.length;Dn++)Fn.sectionIndex.push(0);Sr.push(Fn)}}else if(Fr){Sr=[];for(var Hn=0,ti=Fr(Mr.text,Mr.sectionIndex,uu(Mr,ct,ve,I,ie,qt,rr));Hn<ti.length;Hn+=1){var ri=ti[Hn],Wn=new Po;Wn.text=ri[0],Wn.sectionIndex=ri[1],Wn.sections=Mr.sections,Sr.push(Wn)}}else Sr=function(ni,Gi){for(var Ri=[],Zi=ni.text,yi=0,Ni=0,ha=Gi;Ni<ha.length;Ni+=1){var oa=ha[Ni];Ri.push(ni.substring(yi,oa)),yi=oa}return yi<Zi.length&&Ri.push(ni.substring(yi,Zi.length)),Ri}(Mr,uu(Mr,ct,ve,I,ie,qt,rr));var ci=[],si={positionedLines:ci,text:Mr.toString(),top:dt[1],bottom:dt[1],left:dt[0],right:dt[0],writingMode:Bt,iconsInText:!1,verticalizable:!1};return function(ni,Gi,Ri,Zi,yi,Ni,ha,oa,wa,sa,to,Ta){for(var Eo=0,mo=-17,xo=0,Uo=0,Io="right"===oa?1:"left"===oa?0:.5,ro=0,bo=0,Ha=yi;bo<Ha.length;bo+=1){var ao=Ha[bo];ao.trim();var Pi=ao.getMaxScale(),Wi=24*(Pi-1),Da={positionedGlyphs:[],lineOffset:0};ni.positionedLines[ro]=Da;var Ra=Da.positionedGlyphs,Pa=0;if(ao.length()){for(var ka=0;ka<ao.length();ka++){var $i=ao.getSection(ka),Fa=ao.getSectionIndex(ka),Vo=ao.getCharCode(ka),ts=0,Oo=null,Ss=null,Gs=null,vo=24,Es=!(wa===as.horizontal||!to&&!fi(Vo)||to&&(bc[Vo]||(tl=Vo,kn.Arabic(tl)||kn["Arabic Supplement"](tl)||kn["Arabic Extended-A"](tl)||kn["Arabic Presentation Forms-A"](tl)||kn["Arabic Presentation Forms-B"](tl))));if($i.imageName){var Ls=Zi[$i.imageName];if(!Ls)continue;Gs=$i.imageName,ni.iconsInText=ni.iconsInText||!0,Ss=Ls.paddedRect;var Cs=Ls.displaySize;$i.scale=24*$i.scale/Ta,ts=Wi+(24-Cs[1]*$i.scale),vo=(Oo={width:Cs[0],height:Cs[1],left:1,top:-3,advance:Es?Cs[1]:Cs[0]}).advance;var Il=Es?Cs[0]*$i.scale-24*Pi:Cs[1]*$i.scale-24*Pi;Il>0&&Il>Pa&&(Pa=Il)}else{var Lc=Ri[$i.fontStack],ml=Lc&&Lc[Vo];if(ml&&ml.rect)Ss=ml.rect,Oo=ml.metrics;else{var Cc=Gi[$i.fontStack],Pc=Cc&&Cc[Vo];if(!Pc)continue;Oo=Pc.metrics}ts=24*(Pi-$i.scale)}Es?(ni.verticalizable=!0,Ra.push({glyph:Vo,imageName:Gs,x:Eo,y:mo+ts,vertical:Es,scale:$i.scale,fontStack:$i.fontStack,sectionIndex:Fa,metrics:Oo,rect:Ss}),Eo+=vo*$i.scale+sa):(Ra.push({glyph:Vo,imageName:Gs,x:Eo,y:mo+ts,vertical:Es,scale:$i.scale,fontStack:$i.fontStack,sectionIndex:Fa,metrics:Oo,rect:Ss}),Eo+=Oo.advance*$i.scale+sa)}0!==Ra.length&&(xo=Math.max(Eo-sa,xo),ap(Ra,0,Ra.length-1,Io,Pa)),Eo=0;var Oc=Ni*Pi+Pa;Da.lineOffset=Math.max(Pa,Wi),mo+=Oc,Uo=Math.max(Oc,Uo),++ro}else mo+=Ni,++ro}var tl,Ol=mo- -17,zc=fu(ha),zl=zc.horizontalAlign,rl=zc.verticalAlign;(function(rc,Dc,Rc,Fc,nc,Bc,ic,Nc,ac){var Dl,jc=(Dc-Rc)*nc;Dl=Bc!==ic?-Nc*Fc- -17:(-Fc*ac+.5)*ic;for(var Rl=0,Fl=rc;Rl<Fl.length;Rl+=1)for(var Bl=0,oc=Fl[Rl].positionedGlyphs;Bl<oc.length;Bl+=1){var Nl=oc[Bl];Nl.x+=jc,Nl.y+=Dl}})(ni.positionedLines,Io,zl,rl,xo,Uo,Ni,Ol,yi.length),ni.top+=-rl*Ol,ni.bottom=ni.top+Ol,ni.left+=-zl*xo,ni.right=ni.left+xo}(si,I,Y,ie,Sr,Ee,Ne,We,Bt,ct,Xt,pr),!function(ni){for(var Gi=0,Ri=ni;Gi<Ri.length;Gi+=1)if(0!==Ri[Gi].positionedGlyphs.length)return!1;return!0}(ci)&&si}Po.fromFeature=function(A,I){for(var Y=new Po,ie=0;ie<A.sections.length;ie++){var he=A.sections[ie];he.image?Y.addImageSection(he):Y.addTextSection(he,I)}return Y},Po.prototype.length=function(){return this.text.length},Po.prototype.getSection=function(A){return this.sections[this.sectionIndex[A]]},Po.prototype.getSectionIndex=function(A){return this.sectionIndex[A]},Po.prototype.getCharCode=function(A){return this.text.charCodeAt(A)},Po.prototype.verticalizePunctuation=function(){this.text=function(A){for(var I="",Y=0;Y<A.length;Y++){var ie=A.charCodeAt(Y+1)||null,he=A.charCodeAt(Y-1)||null;ie&&Ci(ie)&&!Kl[A[Y+1]]||he&&Ci(he)&&!Kl[A[Y-1]]||!Kl[A[Y]]?I+=A[Y]:I+=Kl[A[Y]]}return I}(this.text)},Po.prototype.trim=function(){for(var A=0,I=0;I<this.text.length&&bc[this.text.charCodeAt(I)];I++)A++;for(var Y=this.text.length,ie=this.text.length-1;ie>=0&&ie>=A&&bc[this.text.charCodeAt(ie)];ie--)Y--;this.text=this.text.substring(A,Y),this.sectionIndex=this.sectionIndex.slice(A,Y)},Po.prototype.substring=function(A,I){var Y=new Po;return Y.text=this.text.substring(A,I),Y.sectionIndex=this.sectionIndex.slice(A,I),Y.sections=this.sections,Y},Po.prototype.toString=function(){return this.text},Po.prototype.getMaxScale=function(){var A=this;return this.sectionIndex.reduce(function(I,Y){return Math.max(I,A.sections[Y].scale)},0)},Po.prototype.addTextSection=function(A,I){this.text+=A.text,this.sections.push(kl.forText(A.scale,A.fontStack||I));for(var Y=this.sections.length-1,ie=0;ie<A.text.length;++ie)this.sectionIndex.push(Y)},Po.prototype.addImageSection=function(A){var I=A.image?A.image.name:"";if(0!==I.length){var Y=this.getNextImageSectionCharCode();Y?(this.text+=String.fromCharCode(Y),this.sections.push(kl.forImage(I)),this.sectionIndex.push(this.sections.length-1)):M("Reached maximum number of images 6401")}else M("Can't add FormattedSection with an empty image.")},Po.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var bc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},es={};function sf(A,I,Y,ie,he,ve){if(I.imageName){var Ee=ie[I.imageName];return Ee?Ee.displaySize[0]*I.scale*24/ve+he:0}var Ne=Y[I.fontStack],We=Ne&&Ne[A];return We?We.metrics.advance*I.scale+he:0}function lf(A,I,Y,ie){var he=Math.pow(A-I,2);return ie?A<I?he/2:2*he:he+Math.abs(Y)*Y}function ip(A,I,Y){var ie=0;return 10===A&&(ie-=1e4),Y&&(ie+=150),40!==A&&65288!==A||(ie+=50),41!==I&&65289!==I||(ie+=50),ie}function cf(A,I,Y,ie,he,ve){for(var Ee=null,Ne=lf(I,Y,he,ve),We=0,ct=ie;We<ct.length;We+=1){var dt=ct[We],Bt=lf(I-dt.x,Y,he,ve)+dt.badness;Bt<=Ne&&(Ee=dt,Ne=Bt)}return{index:A,x:I,priorBreak:Ee,badness:Ne}}function uu(A,I,Y,ie,he,ve,Ee){if("point"!==ve)return[];if(!A)return[];for(var Ne,We=[],ct=function(Sr,Mr,Dr,Fr,Hr,un){for(var vn=0,Fn=0;Fn<Sr.length();Fn++){var Dn=Sr.getSection(Fn);vn+=sf(Sr.getCharCode(Fn),Dn,Fr,Hr,Mr,un)}return vn/Math.max(1,Math.ceil(vn/Dr))}(A,I,Y,ie,he,Ee),dt=A.text.indexOf("\u200b")>=0,Bt=0,Xt=0;Xt<A.length();Xt++){var qt=A.getSection(Xt),rr=A.getCharCode(Xt);if(bc[rr]||(Bt+=sf(rr,qt,ie,he,I,Ee)),Xt<A.length()-1){var pr=!((Ne=rr)<11904||!(kn["Bopomofo Extended"](Ne)||kn.Bopomofo(Ne)||kn["CJK Compatibility Forms"](Ne)||kn["CJK Compatibility Ideographs"](Ne)||kn["CJK Compatibility"](Ne)||kn["CJK Radicals Supplement"](Ne)||kn["CJK Strokes"](Ne)||kn["CJK Symbols and Punctuation"](Ne)||kn["CJK Unified Ideographs Extension A"](Ne)||kn["CJK Unified Ideographs"](Ne)||kn["Enclosed CJK Letters and Months"](Ne)||kn["Halfwidth and Fullwidth Forms"](Ne)||kn.Hiragana(Ne)||kn["Ideographic Description Characters"](Ne)||kn["Kangxi Radicals"](Ne)||kn["Katakana Phonetic Extensions"](Ne)||kn.Katakana(Ne)||kn["Vertical Forms"](Ne)||kn["Yi Radicals"](Ne)||kn["Yi Syllables"](Ne)));(es[rr]||pr||qt.imageName)&&We.push(cf(Xt+1,Bt,ct,We,ip(rr,A.getCharCode(Xt+1),pr&&dt),!1))}}return function Sr(Mr){return Mr?Sr(Mr.priorBreak).concat(Mr.index):[]}(cf(A.length(),Bt,ct,We,0,!0))}function fu(A){var I=.5,Y=.5;switch(A){case"right":case"top-right":case"bottom-right":I=1;break;case"left":case"top-left":case"bottom-left":I=0}switch(A){case"bottom":case"bottom-right":case"bottom-left":Y=1;break;case"top":case"top-right":case"top-left":Y=0}return{horizontalAlign:I,verticalAlign:Y}}function ap(A,I,Y,ie,he){if(ie||he)for(var ve=A[Y],Ne=(A[Y].x+ve.metrics.advance*ve.scale)*ie,We=I;We<=Y;We++)A[We].x-=Ne,A[We].y+=he}function uf(A,I,Y,ie,he,ve){var Ee,Ne=A.image;if(Ne.content){var We=Ne.content,ct=Ne.pixelRatio||1;Ee=[We[0]/ct,We[1]/ct,Ne.displaySize[0]-We[2]/ct,Ne.displaySize[1]-We[3]/ct]}var dt,Bt,Xt,qt,rr=I.left*ve,pr=I.right*ve;"width"===Y||"both"===Y?(qt=he[0]+rr-ie[3],Bt=he[0]+pr+ie[1]):Bt=(qt=he[0]+(rr+pr-Ne.displaySize[0])/2)+Ne.displaySize[0];var Sr=I.top*ve,Mr=I.bottom*ve;return"height"===Y||"both"===Y?(dt=he[1]+Sr-ie[0],Xt=he[1]+Mr+ie[2]):Xt=(dt=he[1]+(Sr+Mr-Ne.displaySize[1])/2)+Ne.displaySize[1],{image:Ne,top:dt,right:Bt,bottom:Xt,left:qt,collisionPadding:Ee}}es[10]=!0,es[32]=!0,es[38]=!0,es[40]=!0,es[41]=!0,es[43]=!0,es[45]=!0,es[47]=!0,es[173]=!0,es[183]=!0,es[8203]=!0,es[8208]=!0,es[8211]=!0,es[8231]=!0;var Al=function(A){function I(Y,ie,he,ve){A.call(this,Y,ie),this.angle=he,void 0!==ve&&(this.segment=ve)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.clone=function(){return new I(this.x,this.y,this.angle,this.segment)},I}(r);function hu(A,I){var Y=I.expression;if("constant"===Y.kind)return{kind:"constant",layoutSize:Y.evaluate(new Ki(A+1))};if("source"===Y.kind)return{kind:"source"};for(var ie=Y.zoomStops,he=Y.interpolationType,ve=0;ve<ie.length&&ie[ve]<=A;)ve++;for(var Ee=ve=Math.max(0,ve-1);Ee<ie.length&&ie[Ee]<A+1;)Ee++;Ee=Math.min(ie.length-1,Ee);var Ne=ie[ve],We=ie[Ee];return"composite"===Y.kind?{kind:"composite",minZoom:Ne,maxZoom:We,interpolationType:he}:{kind:"camera",minZoom:Ne,maxZoom:We,minSize:Y.evaluate(new Ki(Ne)),maxSize:Y.evaluate(new Ki(We)),interpolationType:he}}function ff(A,I,Y){var ie=I.uSize,ve=Y.lowerSize;return"source"===A.kind?ve/128:"composite"===A.kind?qn(ve/128,Y.upperSize/128,I.uSizeT):ie}function hf(A,I){var Y=0,ie=0;if("constant"===A.kind)ie=A.layoutSize;else if("source"!==A.kind){var he=A.interpolationType,Ne=he?l(ji.interpolationFactor(he,I,A.minZoom,A.maxZoom),0,1):0;"camera"===A.kind?ie=qn(A.minSize,A.maxSize,Ne):Y=Ne}return{uSizeT:Y,uSize:ie}}Wr("Anchor",Al);var op=Object.freeze({__proto__:null,getSizeData:hu,evaluateSizeForFeature:ff,evaluateSizeForZoom:hf,SIZE_PACK_FACTOR:128});function pf(A,I,Y,ie,he){if(void 0===I.segment)return!0;for(var ve=I,Ee=I.segment+1,Ne=0;Ne>-Y/2;){if(--Ee<0)return!1;Ne-=A[Ee].dist(ve),ve=A[Ee]}Ne+=A[Ee].dist(A[Ee+1]),Ee++;for(var We=[],ct=0;Ne<Y/2;){var Bt=A[Ee],Xt=A[Ee+1];if(!Xt)return!1;var qt=A[Ee-1].angleTo(Bt)-Bt.angleTo(Xt);for(qt=Math.abs((qt+3*Math.PI)%(2*Math.PI)-Math.PI),We.push({distance:Ne,angleDelta:qt}),ct+=qt;Ne-We[0].distance>ie;)ct-=We.shift().angleDelta;if(ct>he)return!1;Ee++,Ne+=Bt.dist(Xt)}return!0}function df(A){for(var I=0,Y=0;Y<A.length-1;Y++)I+=A[Y].dist(A[Y+1]);return I}function gf(A,I,Y){return A?.6*I*Y:0}function mf(A,I){return Math.max(A?A.right-A.left:0,I?I.right-I.left:0)}function sp(A,I,Y,ie,he,ve){for(var Ee=gf(Y,he,ve),Ne=mf(Y,ie)*ve,We=0,ct=df(A)/2,dt=0;dt<A.length-1;dt++){var Bt=A[dt],Xt=A[dt+1],qt=Bt.dist(Xt);if(We+qt>ct){var rr=(ct-We)/qt,pr=qn(Bt.x,Xt.x,rr),Sr=qn(Bt.y,Xt.y,rr),Mr=new Al(pr,Sr,Xt.angleTo(Bt),dt);return Mr._round(),!Ee||pf(A,Mr,Ne,Ee,I)?Mr:void 0}We+=qt}}function lp(A,I,Y,ie,he,ve,Ee,Ne,We){var ct=gf(ie,ve,Ee),dt=mf(ie,he),Bt=dt*Ee,Xt=0===A[0].x||A[0].x===We||0===A[0].y||A[0].y===We;return I-Bt<I/4&&(I=Bt+I/4),function qt(rr,pr,Sr,Mr,Dr,Fr,Hr,un,vn){for(var Fn=Fr/2,Dn=df(rr),Hn=0,ti=pr-Sr,ri=[],Wn=0;Wn<rr.length-1;Wn++){for(var ci=rr[Wn],si=rr[Wn+1],ni=ci.dist(si),Gi=si.angleTo(ci);ti+Sr<Hn+ni;){var Ri=((ti+=Sr)-Hn)/ni,Zi=qn(ci.x,si.x,Ri),yi=qn(ci.y,si.y,Ri);if(Zi>=0&&Zi<vn&&yi>=0&&yi<vn&&ti-Fn>=0&&ti+Fn<=Dn){var Ni=new Al(Zi,yi,Gi,Wn);Ni._round(),Mr&&!pf(rr,Ni,Fr,Mr,Dr)||ri.push(Ni)}}Hn+=ni}return un||ri.length||Hr||(ri=qt(rr,Hn/2,Sr,Mr,Dr,Fr,Hr,!0,vn)),ri}(A,Xt?I/2*Ne%I:(dt/2+2*ve)*Ee*Ne%I,I,ct,Y,Bt,Xt,!1,We)}function vf(A,I,Y,ie,he){for(var ve=[],Ee=0;Ee<A.length;Ee++)for(var Ne=A[Ee],We=void 0,ct=0;ct<Ne.length-1;ct++){var dt=Ne[ct],Bt=Ne[ct+1];dt.x<I&&Bt.x<I||(dt.x<I?dt=new r(I,dt.y+(I-dt.x)/(Bt.x-dt.x)*(Bt.y-dt.y))._round():Bt.x<I&&(Bt=new r(I,dt.y+(I-dt.x)/(Bt.x-dt.x)*(Bt.y-dt.y))._round()),dt.y<Y&&Bt.y<Y||(dt.y<Y?dt=new r(dt.x+(Y-dt.y)/(Bt.y-dt.y)*(Bt.x-dt.x),Y)._round():Bt.y<Y&&(Bt=new r(dt.x+(Y-dt.y)/(Bt.y-dt.y)*(Bt.x-dt.x),Y)._round()),dt.x>=ie&&Bt.x>=ie||(dt.x>=ie?dt=new r(ie,dt.y+(ie-dt.x)/(Bt.x-dt.x)*(Bt.y-dt.y))._round():Bt.x>=ie&&(Bt=new r(ie,dt.y+(ie-dt.x)/(Bt.x-dt.x)*(Bt.y-dt.y))._round()),dt.y>=he&&Bt.y>=he||(dt.y>=he?dt=new r(dt.x+(he-dt.y)/(Bt.y-dt.y)*(Bt.x-dt.x),he)._round():Bt.y>=he&&(Bt=new r(dt.x+(he-dt.y)/(Bt.y-dt.y)*(Bt.x-dt.x),he)._round()),We&&dt.equals(We[We.length-1])||ve.push(We=[dt]),We.push(Bt)))))}return ve}function yf(A,I,Y,ie){var he=[],ve=A.image,Ee=ve.pixelRatio,Ne=ve.paddedRect.w-2,We=ve.paddedRect.h-2,ct=A.right-A.left,dt=A.bottom-A.top,Bt=ve.stretchX||[[0,Ne]],Xt=ve.stretchY||[[0,We]],qt=function(Ni,ha){return Ni+ha[1]-ha[0]},rr=Bt.reduce(qt,0),pr=Xt.reduce(qt,0),Sr=Ne-rr,Mr=We-pr,Dr=0,Fr=rr,Hr=0,un=pr,vn=0,Fn=Sr,Dn=0,Hn=Mr;if(ve.content&&ie){var ti=ve.content;Dr=_c(Bt,0,ti[0]),Hr=_c(Xt,0,ti[1]),Fr=_c(Bt,ti[0],ti[2]),un=_c(Xt,ti[1],ti[3]),vn=ti[0]-Dr,Dn=ti[1]-Hr,Fn=ti[2]-ti[0]-Fr,Hn=ti[3]-ti[1]-un}var ri=function(Ni,ha,oa,wa){var sa=wc(Ni.stretch-Dr,Fr,ct,A.left),to=Tc(Ni.fixed-vn,Fn,Ni.stretch,rr),Ta=wc(ha.stretch-Hr,un,dt,A.top),Eo=Tc(ha.fixed-Dn,Hn,ha.stretch,pr),mo=wc(oa.stretch-Dr,Fr,ct,A.left),xo=Tc(oa.fixed-vn,Fn,oa.stretch,rr),Uo=wc(wa.stretch-Hr,un,dt,A.top),Io=Tc(wa.fixed-Dn,Hn,wa.stretch,pr),ro=new r(sa,Ta),bo=new r(mo,Ta),Ha=new r(mo,Uo),ao=new r(sa,Uo),Pi=new r(to/Ee,Eo/Ee),Wi=new r(xo/Ee,Io/Ee),Da=I*Math.PI/180;if(Da){var Ra=Math.sin(Da),Pa=Math.cos(Da),ka=[Pa,-Ra,Ra,Pa];ro._matMult(ka),bo._matMult(ka),ao._matMult(ka),Ha._matMult(ka)}var $i=Ni.stretch+Ni.fixed,Vo=ha.stretch+ha.fixed;return{tl:ro,tr:bo,bl:ao,br:Ha,tex:{x:ve.paddedRect.x+1+$i,y:ve.paddedRect.y+1+Vo,w:oa.stretch+oa.fixed-$i,h:wa.stretch+wa.fixed-Vo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Pi,pixelOffsetBR:Wi,minFontScaleX:Fn/Ee/ct,minFontScaleY:Hn/Ee/dt,isSDF:Y}};if(ie&&(ve.stretchX||ve.stretchY))for(var Wn=xf(Bt,Sr,rr),ci=xf(Xt,Mr,pr),si=0;si<Wn.length-1;si++)for(var ni=Wn[si],Gi=Wn[si+1],Ri=0;Ri<ci.length-1;Ri++)he.push(ri(ni,ci[Ri],Gi,ci[Ri+1]));else he.push(ri({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ne+1},{fixed:0,stretch:We+1}));return he}function _c(A,I,Y){for(var ie=0,he=0,ve=A;he<ve.length;he+=1){var Ee=ve[he];ie+=Math.max(I,Math.min(Y,Ee[1]))-Math.max(I,Math.min(Y,Ee[0]))}return ie}function xf(A,I,Y){for(var ie=[{fixed:-1,stretch:0}],he=0,ve=A;he<ve.length;he+=1){var Ee=ve[he],Ne=Ee[0],We=Ee[1],ct=ie[ie.length-1];ie.push({fixed:Ne-ct.stretch,stretch:ct.stretch}),ie.push({fixed:Ne-ct.stretch,stretch:ct.stretch+(We-Ne)})}return ie.push({fixed:I+1,stretch:Y}),ie}function wc(A,I,Y,ie){return A/I*Y+ie}function Tc(A,I,Y,ie){return A-I*Y/ie}var kc=function(A,I,Y,ie,he,ve,Ee,Ne,We,ct){if(this.boxStartIndex=A.length,We){var dt=ve.top,Bt=ve.bottom,Xt=ve.collisionPadding;Xt&&(dt-=Xt[1],Bt+=Xt[3]);var qt=Bt-dt;qt>0&&(qt=Math.max(10,qt),this.circleDiameter=qt)}else{var rr=ve.top*Ee-Ne,pr=ve.bottom*Ee+Ne,Sr=ve.left*Ee-Ne,Mr=ve.right*Ee+Ne,Dr=ve.collisionPadding;if(Dr&&(Sr-=Dr[0]*Ee,rr-=Dr[1]*Ee,Mr+=Dr[2]*Ee,pr+=Dr[3]*Ee),ct){var Fr=new r(Sr,rr),Hr=new r(Mr,rr),un=new r(Sr,pr),vn=new r(Mr,pr),Fn=ct*Math.PI/180;Fr._rotate(Fn),Hr._rotate(Fn),un._rotate(Fn),vn._rotate(Fn),Sr=Math.min(Fr.x,Hr.x,un.x,vn.x),Mr=Math.max(Fr.x,Hr.x,un.x,vn.x),rr=Math.min(Fr.y,Hr.y,un.y,vn.y),pr=Math.max(Fr.y,Hr.y,un.y,vn.y)}A.emplaceBack(I.x,I.y,Sr,rr,Mr,pr,Y,ie,he)}this.boxEndIndex=A.length},Ml=function(A,I){if(void 0===A&&(A=[]),void 0===I&&(I=cp),this.data=A,this.length=this.data.length,this.compare=I,this.length>0)for(var Y=(this.length>>1)-1;Y>=0;Y--)this._down(Y)};function cp(A,I){return A<I?-1:A>I?1:0}function up(A,I,Y){void 0===I&&(I=1),void 0===Y&&(Y=!1);for(var ie=1/0,he=1/0,ve=-1/0,Ee=-1/0,Ne=A[0],We=0;We<Ne.length;We++){var ct=Ne[We];(!We||ct.x<ie)&&(ie=ct.x),(!We||ct.y<he)&&(he=ct.y),(!We||ct.x>ve)&&(ve=ct.x),(!We||ct.y>Ee)&&(Ee=ct.y)}var Xt=Math.min(ve-ie,Ee-he),qt=Xt/2,rr=new Ml([],fp);if(0===Xt)return new r(ie,he);for(var pr=ie;pr<ve;pr+=Xt)for(var Sr=he;Sr<Ee;Sr+=Xt)rr.push(new Sl(pr+qt,Sr+qt,qt,A));for(var Mr=function(Hr){for(var un=0,vn=0,Fn=0,Dn=Hr[0],Hn=0,ti=Dn.length,ri=ti-1;Hn<ti;ri=Hn++){var Wn=Dn[Hn],ci=Dn[ri],si=Wn.x*ci.y-ci.x*Wn.y;vn+=(Wn.x+ci.x)*si,Fn+=(Wn.y+ci.y)*si,un+=3*si}return new Sl(vn/un,Fn/un,0,Hr)}(A),Dr=rr.length;rr.length;){var Fr=rr.pop();(Fr.d>Mr.d||!Mr.d)&&(Mr=Fr,Y&&console.log("found best %d after %d probes",Math.round(1e4*Fr.d)/1e4,Dr)),Fr.max-Mr.d<=I||(rr.push(new Sl(Fr.p.x-(qt=Fr.h/2),Fr.p.y-qt,qt,A)),rr.push(new Sl(Fr.p.x+qt,Fr.p.y-qt,qt,A)),rr.push(new Sl(Fr.p.x-qt,Fr.p.y+qt,qt,A)),rr.push(new Sl(Fr.p.x+qt,Fr.p.y+qt,qt,A)),Dr+=4)}return Y&&(console.log("num probes: "+Dr),console.log("best distance: "+Mr.d)),Mr.p}function fp(A,I){return I.max-A.max}function Sl(A,I,Y,ie){this.p=new r(A,I),this.h=Y,this.d=function(he,ve){for(var Ee=!1,Ne=1/0,We=0;We<ve.length;We++)for(var ct=ve[We],dt=0,Bt=ct.length,Xt=Bt-1;dt<Bt;Xt=dt++){var qt=ct[dt],rr=ct[Xt];qt.y>he.y!=rr.y>he.y&&he.x<(rr.x-qt.x)*(he.y-qt.y)/(rr.y-qt.y)+qt.x&&(Ee=!Ee),Ne=Math.min(Ne,Us(he,qt,rr))}return(Ee?1:-1)*Math.sqrt(Ne)}(this.p,ie),this.max=this.d+this.h*Math.SQRT2}Ml.prototype.push=function(A){this.data.push(A),this.length++,this._up(this.length-1)},Ml.prototype.pop=function(){if(0!==this.length){var A=this.data[0],I=this.data.pop();return this.length--,this.length>0&&(this.data[0]=I,this._down(0)),A}},Ml.prototype.peek=function(){return this.data[0]},Ml.prototype._up=function(A){for(var I=this.data,Y=this.compare,ie=I[A];A>0;){var he=A-1>>1,ve=I[he];if(Y(ie,ve)>=0)break;I[A]=ve,A=he}I[A]=ie},Ml.prototype._down=function(A){for(var I=this.data,Y=this.compare,ie=this.length>>1,he=I[A];A<ie;){var ve=1+(A<<1),Ee=I[ve],Ne=ve+1;if(Ne<this.length&&Y(I[Ne],Ee)<0&&(ve=Ne,Ee=I[Ne]),Y(Ee,he)>=0)break;I[A]=Ee,A=ve}I[A]=he};var pu=Number.POSITIVE_INFINITY;function bf(A,I){return I[1]!==pu?function(Y,ie,he){var ve=0,Ee=0;switch(ie=Math.abs(ie),he=Math.abs(he),Y){case"top-right":case"top-left":case"top":Ee=he-7;break;case"bottom-right":case"bottom-left":case"bottom":Ee=7-he}switch(Y){case"top-right":case"bottom-right":case"right":ve=-ie;break;case"top-left":case"bottom-left":case"left":ve=ie}return[ve,Ee]}(A,I[0],I[1]):function(Y,ie){var he=0,ve=0;ie<0&&(ie=0);var Ee=ie/Math.sqrt(2);switch(Y){case"top-right":case"top-left":ve=Ee-7;break;case"bottom-right":case"bottom-left":ve=7-Ee;break;case"bottom":ve=7-ie;break;case"top":ve=ie-7}switch(Y){case"top-right":case"bottom-right":he=-Ee;break;case"top-left":case"bottom-left":he=Ee;break;case"left":he=ie;break;case"right":he=-ie}return[he,ve]}(A,I[0])}function du(A){switch(A){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function _f(A,I,Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt,Xt,qt,rr){var pr=function(Hr,un,vn,Fn,Dn,Hn,ti,ri){for(var Wn=Fn.layout.get("text-rotate").evaluate(Hn,{})*Math.PI/180,ci=[],si=0,ni=un.positionedLines;si<ni.length;si+=1)for(var Gi=ni[si],Ri=0,Zi=Gi.positionedGlyphs;Ri<Zi.length;Ri+=1){var yi=Zi[Ri];if(yi.rect){var Ni=yi.rect||{},ha=4,oa=!0,wa=1,sa=0,to=(Dn||ri)&&yi.vertical,Ta=yi.metrics.advance*yi.scale/2;if(ri&&un.verticalizable&&(sa=Gi.lineOffset/2-(yi.imageName?-(24-yi.metrics.width*yi.scale)/2:24*(yi.scale-1))),yi.imageName){var xo=ti[yi.imageName];oa=xo.sdf,ha=1/(wa=xo.pixelRatio)}var Uo=Dn?[yi.x+Ta,yi.y]:[0,0],Io=Dn?[0,0]:[yi.x+Ta+vn[0],yi.y+vn[1]-sa],ro=[0,0];to&&(ro=Io,Io=[0,0]);var bo=(yi.metrics.left-ha)*yi.scale-Ta+Io[0],Ha=(-yi.metrics.top-ha)*yi.scale+Io[1],ao=bo+Ni.w*yi.scale/wa,Pi=Ha+Ni.h*yi.scale/wa,Wi=new r(bo,Ha),Da=new r(ao,Ha),Ra=new r(bo,Pi),Pa=new r(ao,Pi);if(to){var ka=new r(-Ta,Ta- -17),$i=-Math.PI/2,Fa=12-Ta,ts=new r(22-Fa,-(yi.imageName?Fa:0)),Oo=new(Function.prototype.bind.apply(r,[null].concat(ro)));Wi._rotateAround($i,ka)._add(ts)._add(Oo),Da._rotateAround($i,ka)._add(ts)._add(Oo),Ra._rotateAround($i,ka)._add(ts)._add(Oo),Pa._rotateAround($i,ka)._add(ts)._add(Oo)}if(Wn){var Ss=Math.sin(Wn),Gs=Math.cos(Wn),vo=[Gs,-Ss,Ss,Gs];Wi._matMult(vo),Da._matMult(vo),Ra._matMult(vo),Pa._matMult(vo)}var Es=new r(0,0),Ls=new r(0,0);ci.push({tl:Wi,tr:Da,bl:Ra,br:Pa,tex:Ni,writingMode:un.writingMode,glyphOffset:Uo,sectionIndex:yi.sectionIndex,isSDF:oa,pixelOffsetTL:Es,pixelOffsetBR:Ls,minFontScaleX:0,minFontScaleY:0})}}return ci}(0,Y,Ne,he,ve,Ee,ie,A.allowVerticalPlacement),Sr=A.textSizeData,Mr=null;"source"===Sr.kind?(Mr=[128*he.layout.get("text-size").evaluate(Ee,{})])[0]>32640&&M(A.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Sr.kind&&((Mr=[128*qt.compositeTextSizes[0].evaluate(Ee,{},rr),128*qt.compositeTextSizes[1].evaluate(Ee,{},rr)])[0]>32640||Mr[1]>32640)&&M(A.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),A.addSymbols(A.text,pr,Mr,Ne,ve,Ee,ct,I,We.lineStartIndex,We.lineLength,Xt,rr);for(var Dr=0,Fr=dt;Dr<Fr.length;Dr+=1)Bt[Fr[Dr]]=A.text.placedSymbolArray.length-1;return 4*pr.length}function wf(A){for(var I in A)return A[I];return null}function hp(A,I,Y,ie){var he=A.compareText;if(I in he){for(var ve=he[I],Ee=ve.length-1;Ee>=0;Ee--)if(ie.dist(ve[Ee])<Y)return!0}else he[I]=[];return he[I].push(ie),!1}var pp=_l.VectorTileFeature.types,dp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ac(A,I,Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt,Xt){var qt=Ne?Math.min(32640,Math.round(Ne[0])):0,rr=Ne?Math.min(32640,Math.round(Ne[1])):0;A.emplaceBack(I,Y,Math.round(32*ie),Math.round(32*he),ve,Ee,(qt<<1)+(We?1:0),rr,16*ct,16*dt,256*Bt,256*Xt)}function gu(A,I,Y){A.emplaceBack(I.x,I.y,Y),A.emplaceBack(I.x,I.y,Y),A.emplaceBack(I.x,I.y,Y),A.emplaceBack(I.x,I.y,Y)}function gp(A){for(var I=0,Y=A.sections;I<Y.length;I+=1)if(Kn(Y[I].text))return!0;return!1}var El=function(A){this.layoutVertexArray=new Ts,this.indexArray=new Ka,this.programConfigurations=A,this.segments=new Ft,this.dynamicLayoutVertexArray=new is,this.opacityVertexArray=new Xs,this.placedSymbolArray=new Ue};El.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},El.prototype.upload=function(A,I,Y,ie){this.isEmpty()||(Y&&(this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,cu.members),this.indexBuffer=A.createIndexBuffer(this.indexArray,I),this.dynamicLayoutVertexBuffer=A.createVertexBuffer(this.dynamicLayoutVertexArray,Vh.members,!0),this.opacityVertexBuffer=A.createVertexBuffer(this.opacityVertexArray,dp,!0),this.opacityVertexBuffer.itemSize=1),(Y||ie)&&this.programConfigurations.upload(A))},El.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Wr("SymbolBuffers",El);var ec=function(A,I,Y){this.layoutVertexArray=new A,this.layoutAttributes=I,this.indexArray=new Y,this.segments=new Ft,this.collisionVertexArray=new ks};ec.prototype.upload=function(A){this.layoutVertexBuffer=A.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=A.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=A.createVertexBuffer(this.collisionVertexArray,Hh.members,!0)},ec.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Wr("CollisionBuffers",ec);var na=function(A){this.collisionBoxArray=A.collisionBoxArray,this.zoom=A.zoom,this.overscaling=A.overscaling,this.layers=A.layers,this.layerIds=this.layers.map(function(Ee){return Ee.id}),this.index=A.index,this.pixelRatio=A.pixelRatio,this.sourceLayerIndex=A.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ql([]),this.placementViewportMatrix=ql([]);var I=this.layers[0]._unevaluatedLayout._values;this.textSizeData=hu(this.zoom,I["text-size"]),this.iconSizeData=hu(this.zoom,I["icon-size"]);var Y=this.layers[0].layout,ie=Y.get("symbol-sort-key"),he=Y.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==he&&void 0!==ie.constantOr(1),this.sortFeaturesByY=("viewport-y"===he||"auto"===he&&!this.sortFeaturesByKey)&&(Y.get("text-allow-overlap")||Y.get("icon-allow-overlap")||Y.get("text-ignore-placement")||Y.get("icon-ignore-placement")),"point"===Y.get("symbol-placement")&&(this.writingModes=Y.get("text-writing-mode").map(function(Ee){return as[Ee]})),this.stateDependentLayerIds=this.layers.filter(function(Ee){return Ee.isStateDependent()}).map(function(Ee){return Ee.id}),this.sourceID=A.sourceID};na.prototype.createArrays=function(){this.text=new El(new aa(cu.members,this.layers,this.zoom,function(A){return/^text/.test(A)})),this.icon=new El(new aa(cu.members,this.layers,this.zoom,function(A){return/^icon/.test(A)})),this.glyphOffsetArray=new xt,this.lineVertexArray=new At,this.symbolInstances=new nt},na.prototype.calculateGlyphDependencies=function(A,I,Y,ie,he){for(var ve=0;ve<A.length;ve++)if(I[A.charCodeAt(ve)]=!0,(Y||ie)&&he){var Ee=Kl[A.charAt(ve)];Ee&&(I[Ee.charCodeAt(0)]=!0)}},na.prototype.populate=function(A,I,Y){var ie=this.layers[0],he=ie.layout,ve=he.get("text-font"),Ee=he.get("text-field"),Ne=he.get("icon-image"),We=("constant"!==Ee.value.kind||Ee.value.value instanceof Ir&&!Ee.value.value.isEmpty()||Ee.value.value.toString().length>0)&&("constant"!==ve.value.kind||ve.value.value.length>0),ct="constant"!==Ne.value.kind||!!Ne.value.value||Object.keys(Ne.parameters).length>0,dt=he.get("symbol-sort-key");if(this.features=[],We||ct){for(var Bt=I.iconDependencies,Xt=I.glyphDependencies,qt=I.availableImages,rr=new Ki(this.zoom),pr=0,Sr=A;pr<Sr.length;pr+=1){var Mr=Sr[pr],Dr=Mr.feature,Fr=Mr.id,Hr=Mr.index,un=Mr.sourceLayerIndex,vn=ie._featureFilter.needGeometry,Fn={type:Dr.type,id:Fr,properties:Dr.properties,geometry:vn?ua(Dr):[]};if(ie._featureFilter.filter(rr,Fn,Y)){vn||(Fn.geometry=ua(Dr));var Dn=void 0;if(We){var Hn=ie.getValueAndResolveTokens("text-field",Fn,Y,qt),ti=Ir.factory(Hn);gp(ti)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ba()||this.hasRTLText&&io.isParsed())&&(Dn=Gh(ti,ie,Fn))}var ri=void 0;if(ct){var Wn=ie.getValueAndResolveTokens("icon-image",Fn,Y,qt);ri=Wn instanceof vr?Wn:vr.fromString(Wn)}if(Dn||ri){var ci=this.sortFeaturesByKey?dt.evaluate(Fn,{},Y):void 0,si={id:Fr,text:Dn,icon:ri,index:Hr,sourceLayerIndex:un,geometry:ua(Dr),properties:Dr.properties,type:pp[Dr.type],sortKey:ci};if(this.features.push(si),ri&&(Bt[ri.name]=!0),Dn){var ni=ve.evaluate(Fn,{},Y).join(","),Gi="map"===he.get("text-rotation-alignment")&&"point"!==he.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(as.vertical)>=0;for(var Ri=0,Zi=Dn.sections;Ri<Zi.length;Ri+=1){var yi=Zi[Ri];if(yi.image)Bt[yi.image.name]=!0;else{var Ni=Li(Dn.toString()),ha=yi.fontStack||ni,oa=Xt[ha]=Xt[ha]||{};this.calculateGlyphDependencies(yi.text,oa,Gi,this.allowVerticalPlacement,Ni)}}}}}}"line"===he.get("symbol-placement")&&(this.features=function(wa){var sa={},to={},Ta=[],Eo=0;function mo(Pa){Ta.push(wa[Pa]),Eo++}function xo(Pa,ka,$i){var Fa=to[Pa];return delete to[Pa],to[ka]=Fa,Ta[Fa].geometry[0].pop(),Ta[Fa].geometry[0]=Ta[Fa].geometry[0].concat($i[0]),Fa}function Uo(Pa,ka,$i){var Fa=sa[ka];return delete sa[ka],sa[Pa]=Fa,Ta[Fa].geometry[0].shift(),Ta[Fa].geometry[0]=$i[0].concat(Ta[Fa].geometry[0]),Fa}function Io(Pa,ka,$i){var Fa=$i?ka[0][ka[0].length-1]:ka[0][0];return Pa+":"+Fa.x+":"+Fa.y}for(var ro=0;ro<wa.length;ro++){var bo=wa[ro],Ha=bo.geometry,ao=bo.text?bo.text.toString():null;if(ao){var Pi=Io(ao,Ha),Wi=Io(ao,Ha,!0);if(Pi in to&&Wi in sa&&to[Pi]!==sa[Wi]){var Da=Uo(Pi,Wi,Ha),Ra=xo(Pi,Wi,Ta[Da].geometry);delete sa[Pi],delete to[Wi],to[Io(ao,Ta[Ra].geometry,!0)]=Ra,Ta[Da].geometry=null}else Pi in to?xo(Pi,Wi,Ha):Wi in sa?Uo(Pi,Wi,Ha):(mo(ro),sa[Pi]=Eo-1,to[Wi]=Eo-1)}else mo(ro)}return Ta.filter(function(Pa){return Pa.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(wa,sa){return wa.sortKey-sa.sortKey})}},na.prototype.update=function(A,I,Y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(A,I,this.layers,Y),this.icon.programConfigurations.updatePaintArrays(A,I,this.layers,Y))},na.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},na.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},na.prototype.upload=function(A){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(A),this.iconCollisionBox.upload(A)),this.text.upload(A,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(A,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},na.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},na.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},na.prototype.addToLineVertexArray=function(A,I){var Y=this.lineVertexArray.length;if(void 0!==A.segment){for(var ie=A.dist(I[A.segment+1]),he=A.dist(I[A.segment]),ve={},Ee=A.segment+1;Ee<I.length;Ee++)ve[Ee]={x:I[Ee].x,y:I[Ee].y,tileUnitDistanceFromAnchor:ie},Ee<I.length-1&&(ie+=I[Ee+1].dist(I[Ee]));for(var Ne=A.segment||0;Ne>=0;Ne--)ve[Ne]={x:I[Ne].x,y:I[Ne].y,tileUnitDistanceFromAnchor:he},Ne>0&&(he+=I[Ne-1].dist(I[Ne]));for(var We=0;We<I.length;We++){var ct=ve[We];this.lineVertexArray.emplaceBack(ct.x,ct.y,ct.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Y,lineLength:this.lineVertexArray.length-Y}},na.prototype.addSymbols=function(A,I,Y,ie,he,ve,Ee,Ne,We,ct,dt,Bt){for(var Xt=A.indexArray,qt=A.layoutVertexArray,rr=A.segments.prepareSegment(4*I.length,qt,Xt,ve.sortKey),pr=this.glyphOffsetArray.length,Sr=rr.vertexLength,Mr=this.allowVerticalPlacement&&Ee===as.vertical?Math.PI/2:0,Dr=ve.text&&ve.text.sections,Fr=0;Fr<I.length;Fr++){var Hr=I[Fr],un=Hr.tl,vn=Hr.tr,Fn=Hr.bl,Dn=Hr.br,Hn=Hr.tex,ti=Hr.pixelOffsetTL,ri=Hr.pixelOffsetBR,Wn=Hr.minFontScaleX,ci=Hr.minFontScaleY,si=Hr.glyphOffset,ni=Hr.isSDF,Gi=Hr.sectionIndex,Ri=rr.vertexLength,Zi=si[1];Ac(qt,Ne.x,Ne.y,un.x,Zi+un.y,Hn.x,Hn.y,Y,ni,ti.x,ti.y,Wn,ci),Ac(qt,Ne.x,Ne.y,vn.x,Zi+vn.y,Hn.x+Hn.w,Hn.y,Y,ni,ri.x,ti.y,Wn,ci),Ac(qt,Ne.x,Ne.y,Fn.x,Zi+Fn.y,Hn.x,Hn.y+Hn.h,Y,ni,ti.x,ri.y,Wn,ci),Ac(qt,Ne.x,Ne.y,Dn.x,Zi+Dn.y,Hn.x+Hn.w,Hn.y+Hn.h,Y,ni,ri.x,ri.y,Wn,ci),gu(A.dynamicLayoutVertexArray,Ne,Mr),Xt.emplaceBack(Ri,Ri+1,Ri+2),Xt.emplaceBack(Ri+1,Ri+2,Ri+3),rr.vertexLength+=4,rr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(si[0]),Fr!==I.length-1&&Gi===I[Fr+1].sectionIndex||A.programConfigurations.populatePaintArrays(qt.length,ve,ve.index,{},Bt,Dr&&Dr[Gi])}A.placedSymbolArray.emplaceBack(Ne.x,Ne.y,pr,this.glyphOffsetArray.length-pr,Sr,We,ct,Ne.segment,Y?Y[0]:0,Y?Y[1]:0,ie[0],ie[1],Ee,0,!1,0,dt)},na.prototype._addCollisionDebugVertex=function(A,I,Y,ie,he,ve){return I.emplaceBack(0,0),A.emplaceBack(Y.x,Y.y,ie,he,Math.round(ve.x),Math.round(ve.y))},na.prototype.addCollisionDebugVertices=function(A,I,Y,ie,he,ve,Ee){var Ne=he.segments.prepareSegment(4,he.layoutVertexArray,he.indexArray),We=Ne.vertexLength,ct=he.layoutVertexArray,dt=he.collisionVertexArray,Bt=Ee.anchorX,Xt=Ee.anchorY;this._addCollisionDebugVertex(ct,dt,ve,Bt,Xt,new r(A,I)),this._addCollisionDebugVertex(ct,dt,ve,Bt,Xt,new r(Y,I)),this._addCollisionDebugVertex(ct,dt,ve,Bt,Xt,new r(Y,ie)),this._addCollisionDebugVertex(ct,dt,ve,Bt,Xt,new r(A,ie)),Ne.vertexLength+=4;var qt=he.indexArray;qt.emplaceBack(We,We+1),qt.emplaceBack(We+1,We+2),qt.emplaceBack(We+2,We+3),qt.emplaceBack(We+3,We),Ne.primitiveLength+=4},na.prototype.addDebugCollisionBoxes=function(A,I,Y,ie){for(var he=A;he<I;he++){var ve=this.collisionBoxArray.get(he);this.addCollisionDebugVertices(ve.x1,ve.y1,ve.x2,ve.y2,ie?this.textCollisionBox:this.iconCollisionBox,ve.anchorPoint,Y)}},na.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new ec(hs,$u.members,F),this.iconCollisionBox=new ec(hs,$u.members,F);for(var A=0;A<this.symbolInstances.length;A++){var I=this.symbolInstances.get(A);this.addDebugCollisionBoxes(I.textBoxStartIndex,I.textBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.verticalTextBoxStartIndex,I.verticalTextBoxEndIndex,I,!0),this.addDebugCollisionBoxes(I.iconBoxStartIndex,I.iconBoxEndIndex,I,!1),this.addDebugCollisionBoxes(I.verticalIconBoxStartIndex,I.verticalIconBoxEndIndex,I,!1)}},na.prototype._deserializeCollisionBoxesForSymbol=function(A,I,Y,ie,he,ve,Ee,Ne,We){for(var ct={},dt=I;dt<Y;dt++){var Bt=A.get(dt);ct.textBox={x1:Bt.x1,y1:Bt.y1,x2:Bt.x2,y2:Bt.y2,anchorPointX:Bt.anchorPointX,anchorPointY:Bt.anchorPointY},ct.textFeatureIndex=Bt.featureIndex;break}for(var Xt=ie;Xt<he;Xt++){var qt=A.get(Xt);ct.verticalTextBox={x1:qt.x1,y1:qt.y1,x2:qt.x2,y2:qt.y2,anchorPointX:qt.anchorPointX,anchorPointY:qt.anchorPointY},ct.verticalTextFeatureIndex=qt.featureIndex;break}for(var rr=ve;rr<Ee;rr++){var pr=A.get(rr);ct.iconBox={x1:pr.x1,y1:pr.y1,x2:pr.x2,y2:pr.y2,anchorPointX:pr.anchorPointX,anchorPointY:pr.anchorPointY},ct.iconFeatureIndex=pr.featureIndex;break}for(var Sr=Ne;Sr<We;Sr++){var Mr=A.get(Sr);ct.verticalIconBox={x1:Mr.x1,y1:Mr.y1,x2:Mr.x2,y2:Mr.y2,anchorPointX:Mr.anchorPointX,anchorPointY:Mr.anchorPointY},ct.verticalIconFeatureIndex=Mr.featureIndex;break}return ct},na.prototype.deserializeCollisionBoxes=function(A){this.collisionArrays=[];for(var I=0;I<this.symbolInstances.length;I++){var Y=this.symbolInstances.get(I);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(A,Y.textBoxStartIndex,Y.textBoxEndIndex,Y.verticalTextBoxStartIndex,Y.verticalTextBoxEndIndex,Y.iconBoxStartIndex,Y.iconBoxEndIndex,Y.verticalIconBoxStartIndex,Y.verticalIconBoxEndIndex))}},na.prototype.hasTextData=function(){return this.text.segments.get().length>0},na.prototype.hasIconData=function(){return this.icon.segments.get().length>0},na.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},na.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},na.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},na.prototype.addIndicesForPlacedSymbol=function(A,I){for(var Y=A.placedSymbolArray.get(I),ie=Y.vertexStartIndex+4*Y.numGlyphs,he=Y.vertexStartIndex;he<ie;he+=4)A.indexArray.emplaceBack(he,he+1,he+2),A.indexArray.emplaceBack(he+1,he+2,he+3)},na.prototype.getSortedSymbolIndexes=function(A){if(this.sortedAngle===A&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var I=Math.sin(A),Y=Math.cos(A),ie=[],he=[],ve=[],Ee=0;Ee<this.symbolInstances.length;++Ee){ve.push(Ee);var Ne=this.symbolInstances.get(Ee);ie.push(0|Math.round(I*Ne.anchorX+Y*Ne.anchorY)),he.push(Ne.featureIndex)}return ve.sort(function(We,ct){return ie[We]-ie[ct]||he[ct]-he[We]}),ve},na.prototype.addToSortKeyRanges=function(A,I){var Y=this.sortKeyRanges[this.sortKeyRanges.length-1];Y&&Y.sortKey===I?Y.symbolInstanceEnd=A+1:this.sortKeyRanges.push({sortKey:I,symbolInstanceStart:A,symbolInstanceEnd:A+1})},na.prototype.sortFeatures=function(A){var I=this;if(this.sortFeaturesByY&&this.sortedAngle!==A&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(A),this.sortedAngle=A,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Y=0,ie=this.symbolInstanceIndexes;Y<ie.length;Y+=1){var ve=this.symbolInstances.get(ie[Y]);this.featureSortOrder.push(ve.featureIndex),[ve.rightJustifiedTextSymbolIndex,ve.centerJustifiedTextSymbolIndex,ve.leftJustifiedTextSymbolIndex].forEach(function(Ee,Ne,We){Ee>=0&&We.indexOf(Ee)===Ne&&I.addIndicesForPlacedSymbol(I.text,Ee)}),ve.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,ve.verticalPlacedTextSymbolIndex),ve.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ve.placedIconSymbolIndex),ve.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,ve.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Wr("SymbolBucket",na,{omit:["layers","collisionBoxArray","features","compareText"]}),na.MAX_GLYPHS=65535,na.addDynamicAttributes=gu;var mp=new Ao({"symbol-placement":new ai(Ce.layout_symbol["symbol-placement"]),"symbol-spacing":new ai(Ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ai(Ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new gi(Ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ai(Ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ai(Ce.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ai(Ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new ai(Ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ai(Ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new gi(Ce.layout_symbol["icon-size"]),"icon-text-fit":new ai(Ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ai(Ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new gi(Ce.layout_symbol["icon-image"]),"icon-rotate":new gi(Ce.layout_symbol["icon-rotate"]),"icon-padding":new ai(Ce.layout_symbol["icon-padding"]),"icon-keep-upright":new ai(Ce.layout_symbol["icon-keep-upright"]),"icon-offset":new gi(Ce.layout_symbol["icon-offset"]),"icon-anchor":new gi(Ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ai(Ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ai(Ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ai(Ce.layout_symbol["text-rotation-alignment"]),"text-field":new gi(Ce.layout_symbol["text-field"]),"text-font":new gi(Ce.layout_symbol["text-font"]),"text-size":new gi(Ce.layout_symbol["text-size"]),"text-max-width":new gi(Ce.layout_symbol["text-max-width"]),"text-line-height":new ai(Ce.layout_symbol["text-line-height"]),"text-letter-spacing":new gi(Ce.layout_symbol["text-letter-spacing"]),"text-justify":new gi(Ce.layout_symbol["text-justify"]),"text-radial-offset":new gi(Ce.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ai(Ce.layout_symbol["text-variable-anchor"]),"text-anchor":new gi(Ce.layout_symbol["text-anchor"]),"text-max-angle":new ai(Ce.layout_symbol["text-max-angle"]),"text-writing-mode":new ai(Ce.layout_symbol["text-writing-mode"]),"text-rotate":new gi(Ce.layout_symbol["text-rotate"]),"text-padding":new ai(Ce.layout_symbol["text-padding"]),"text-keep-upright":new ai(Ce.layout_symbol["text-keep-upright"]),"text-transform":new gi(Ce.layout_symbol["text-transform"]),"text-offset":new gi(Ce.layout_symbol["text-offset"]),"text-allow-overlap":new ai(Ce.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ai(Ce.layout_symbol["text-ignore-placement"]),"text-optional":new ai(Ce.layout_symbol["text-optional"])}),mu={paint:new Ao({"icon-opacity":new gi(Ce.paint_symbol["icon-opacity"]),"icon-color":new gi(Ce.paint_symbol["icon-color"]),"icon-halo-color":new gi(Ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new gi(Ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new gi(Ce.paint_symbol["icon-halo-blur"]),"icon-translate":new ai(Ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new ai(Ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new gi(Ce.paint_symbol["text-opacity"]),"text-color":new gi(Ce.paint_symbol["text-color"],{runtimeType:jt,getOverride:function(A){return A.textColor},hasOverride:function(A){return!!A.textColor}}),"text-halo-color":new gi(Ce.paint_symbol["text-halo-color"]),"text-halo-width":new gi(Ce.paint_symbol["text-halo-width"]),"text-halo-blur":new gi(Ce.paint_symbol["text-halo-blur"]),"text-translate":new ai(Ce.paint_symbol["text-translate"]),"text-translate-anchor":new ai(Ce.paint_symbol["text-translate-anchor"])}),layout:mp},Ll=function(A){this.type=A.property.overrides?A.property.overrides.runtimeType:Lt,this.defaultValue=A};Ll.prototype.evaluate=function(A){if(A.formattedSection){var I=this.defaultValue.property.overrides;if(I&&I.hasOverride(A.formattedSection))return I.getOverride(A.formattedSection)}return A.feature&&A.featureState?this.defaultValue.evaluate(A.feature,A.featureState):this.defaultValue.property.specification.default},Ll.prototype.eachChild=function(A){this.defaultValue.isConstant()||A(this.defaultValue.value._styleExpression.expression)},Ll.prototype.outputDefined=function(){return!1},Ll.prototype.serialize=function(){return null},Wr("FormatSectionOverride",Ll,{omit:["defaultValue"]});var vp=function(A){function I(Y){A.call(this,Y,mu)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.recalculate=function(Y,ie){if(A.prototype.recalculate.call(this,Y,ie),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var he=this.layout.get("text-writing-mode");if(he){for(var ve=[],Ee=0,Ne=he;Ee<Ne.length;Ee+=1){var We=Ne[Ee];ve.indexOf(We)<0&&ve.push(We)}this.layout._values["text-writing-mode"]=ve}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},I.prototype.getValueAndResolveTokens=function(Y,ie,he,ve){var We,Ee=this.layout.get(Y).evaluate(ie,{},he,ve),Ne=this._unevaluatedLayout._values[Y];return Ne.isDataDriven()||Qt(Ne.value)||!Ee?Ee:(We=ie.properties,Ee.replace(/{([^{}]+)}/g,function(dt,Bt){return Bt in We?String(We[Bt]):""}))},I.prototype.createBucket=function(Y){return new na(Y)},I.prototype.queryRadius=function(){return 0},I.prototype.queryIntersectsFeature=function(){return!1},I.prototype._setPaintOverrides=function(){for(var Y=0,ie=mu.paint.overridableProperties;Y<ie.length;Y+=1){var he=ie[Y];if(I.hasPaintOverride(this.layout,he)){var We,ve=this.paint.get(he),Ee=new Ll(ve),Ne=new Jt(Ee,ve.property.specification);We="constant"===ve.value.kind||"source"===ve.value.kind?new tr("source",Ne):new ur("composite",Ne,ve.value.zoomStops,ve.value._interpolationType),this.paint._values[he]=new Ca(ve.property,We,ve.parameters)}}},I.prototype._handleOverridablePaintPropertyUpdate=function(Y,ie,he){return!(!this.layout||ie.isDataDriven()||he.isDataDriven())&&I.hasPaintOverride(this.layout,Y)},I.hasPaintOverride=function(Y,ie){var he=Y.get("text-field"),ve=mu.paint.properties[ie],Ee=!1,Ne=function(dt){for(var Bt=0,Xt=dt;Bt<Xt.length;Bt+=1)if(ve.overrides&&ve.overrides.hasOverride(Xt[Bt]))return void(Ee=!0)};if("constant"===he.value.kind&&he.value.value instanceof Ir)Ne(he.value.value.sections);else if("source"===he.value.kind){var We=function(dt){Ee||(dt instanceof Cn&&ln(dt.value)===_t?Ne(dt.value.sections):dt instanceof Lr?Ne(dt.sections):dt.eachChild(We))},ct=he.value;ct._styleExpression&&We(ct._styleExpression.expression)}return Ee},I}(jo),yp={paint:new Ao({"background-color":new ai(Ce.paint_background["background-color"]),"background-pattern":new Ds(Ce.paint_background["background-pattern"]),"background-opacity":new ai(Ce.paint_background["background-opacity"])})},xp=function(A){function I(Y){A.call(this,Y,yp)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I}(jo),bp={paint:new Ao({"raster-opacity":new ai(Ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new ai(Ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ai(Ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ai(Ce.paint_raster["raster-brightness-max"]),"raster-saturation":new ai(Ce.paint_raster["raster-saturation"]),"raster-contrast":new ai(Ce.paint_raster["raster-contrast"]),"raster-resampling":new ai(Ce.paint_raster["raster-resampling"]),"raster-fade-duration":new ai(Ce.paint_raster["raster-fade-duration"])})},_p=function(A){function I(Y){A.call(this,Y,bp)}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I}(jo),wp=function(A){function I(Y){A.call(this,Y,{}),this.implementation=Y}return A&&(I.__proto__=A),(I.prototype=Object.create(A&&A.prototype)).constructor=I,I.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},I.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},I.prototype.recalculate=function(){},I.prototype.updateTransitions=function(){},I.prototype.hasTransition=function(){},I.prototype.serialize=function(){},I.prototype.onAdd=function(Y){this.implementation.onAdd&&this.implementation.onAdd(Y,Y.painter.context.gl)},I.prototype.onRemove=function(Y){this.implementation.onRemove&&this.implementation.onRemove(Y,Y.painter.context.gl)},I}(jo),Tp={circle:lh,heatmap:uh,hillshade:hh,fill:Eh,"fill-extrusion":Fh,line:Uh,symbol:vp,background:xp,raster:_p},Tf=self.HTMLImageElement,kf=self.HTMLCanvasElement,Af=self.HTMLVideoElement,Mf=self.ImageData,Mc=self.ImageBitmap,hl=function(A,I,Y,ie){this.context=A,this.format=Y,this.texture=A.gl.createTexture(),this.update(I,ie)};hl.prototype.update=function(A,I,Y){var ie=A.width,he=A.height,ve=!(this.size&&this.size[0]===ie&&this.size[1]===he||Y),Ee=this.context,Ne=Ee.gl;if(this.useMipmap=Boolean(I&&I.useMipmap),Ne.bindTexture(Ne.TEXTURE_2D,this.texture),Ee.pixelStoreUnpackFlipY.set(!1),Ee.pixelStoreUnpack.set(1),Ee.pixelStoreUnpackPremultiplyAlpha.set(this.format===Ne.RGBA&&(!I||!1!==I.premultiply)),ve)this.size=[ie,he],A instanceof Tf||A instanceof kf||A instanceof Af||A instanceof Mf||Mc&&A instanceof Mc?Ne.texImage2D(Ne.TEXTURE_2D,0,this.format,this.format,Ne.UNSIGNED_BYTE,A):Ne.texImage2D(Ne.TEXTURE_2D,0,this.format,ie,he,0,this.format,Ne.UNSIGNED_BYTE,A.data);else{var We=Y||{x:0,y:0},ct=We.x,dt=We.y;A instanceof Tf||A instanceof kf||A instanceof Af||A instanceof Mf||Mc&&A instanceof Mc?Ne.texSubImage2D(Ne.TEXTURE_2D,0,ct,dt,Ne.RGBA,Ne.UNSIGNED_BYTE,A):Ne.texSubImage2D(Ne.TEXTURE_2D,0,ct,dt,ie,he,Ne.RGBA,Ne.UNSIGNED_BYTE,A.data)}this.useMipmap&&this.isSizePowerOfTwo()&&Ne.generateMipmap(Ne.TEXTURE_2D)},hl.prototype.bind=function(A,I,Y){var ie=this.context.gl;ie.bindTexture(ie.TEXTURE_2D,this.texture),Y!==ie.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Y=ie.LINEAR),A!==this.filter&&(ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MAG_FILTER,A),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_MIN_FILTER,Y||A),this.filter=A),I!==this.wrap&&(ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_S,I),ie.texParameteri(ie.TEXTURE_2D,ie.TEXTURE_WRAP_T,I),this.wrap=I)},hl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},hl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var vu=function(A){var I=this;this._callback=A,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){I._triggered=!1,I._callback()})};vu.prototype.trigger=function(){var A=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){A._triggered=!1,A._callback()},0))},vu.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Cl=function(A,I,Y){this.target=A,this.parent=I,this.mapId=Y,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},d(["receive","process"],this),this.invoker=new vu(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=S()?A:self};function Sf(A,I,Y){var ie=2*Math.PI*6378137/256/Math.pow(2,Y);return[A*ie-2*Math.PI*6378137/2,I*ie-2*Math.PI*6378137/2]}Cl.prototype.send=function(A,I,Y,ie,he){var ve=this;void 0===he&&(he=!1);var Ee=Math.round(1e18*Math.random()).toString(36).substring(0,10);Y&&(this.callbacks[Ee]=Y);var Ne=B(this.globalScope)?void 0:[];return this.target.postMessage({id:Ee,type:A,hasCallback:!!Y,targetMapId:ie,mustQueue:he,sourceMapId:this.mapId,data:Zn(I,Ne)},Ne),{cancel:function(){Y&&delete ve.callbacks[Ee],ve.target.postMessage({id:Ee,type:"<cancel>",targetMapId:ie,sourceMapId:ve.mapId})}}},Cl.prototype.receive=function(A){var I=A.data,Y=I.id;if(Y&&(!I.targetMapId||this.mapId===I.targetMapId))if("<cancel>"===I.type){delete this.tasks[Y];var ie=this.cancelCallbacks[Y];delete this.cancelCallbacks[Y],ie&&ie()}else S()||I.mustQueue?(this.tasks[Y]=I,this.taskQueue.push(Y),this.invoker.trigger()):this.processTask(Y,I)},Cl.prototype.process=function(){if(this.taskQueue.length){var A=this.taskQueue.shift(),I=this.tasks[A];delete this.tasks[A],this.taskQueue.length&&this.invoker.trigger(),I&&this.processTask(A,I)}},Cl.prototype.processTask=function(A,I){var Y=this;if("<response>"===I.type){var ie=this.callbacks[A];delete this.callbacks[A],ie&&(I.error?ie(xi(I.error)):ie(null,xi(I.data)))}else{var he=!1,ve=B(this.globalScope)?void 0:[],Ee=I.hasCallback?function(dt,Bt){he=!0,delete Y.cancelCallbacks[A],Y.target.postMessage({id:A,type:"<response>",sourceMapId:Y.mapId,error:dt?Zn(dt):null,data:Zn(Bt,ve)},ve)}:function(dt){he=!0},Ne=null,We=xi(I.data);if(this.parent[I.type])Ne=this.parent[I.type](I.sourceMapId,We,Ee);else if(this.parent.getWorkerSource){var ct=I.type.split(".");Ne=this.parent.getWorkerSource(I.sourceMapId,ct[0],We.source)[ct[1]](We,Ee)}else Ee(new Error("Could not find function "+I.type));!he&&Ne&&Ne.cancel&&(this.cancelCallbacks[A]=Ne.cancel)}},Cl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var $a=function(A,I){A&&(I?this.setSouthWest(A).setNorthEast(I):4===A.length?this.setSouthWest([A[0],A[1]]).setNorthEast([A[2],A[3]]):this.setSouthWest(A[0]).setNorthEast(A[1]))};$a.prototype.setNorthEast=function(A){return this._ne=A instanceof _a?new _a(A.lng,A.lat):_a.convert(A),this},$a.prototype.setSouthWest=function(A){return this._sw=A instanceof _a?new _a(A.lng,A.lat):_a.convert(A),this},$a.prototype.extend=function(A){var I,Y,ie=this._sw,he=this._ne;if(A instanceof _a)I=A,Y=A;else{if(!(A instanceof $a))return Array.isArray(A)?4===A.length||A.every(Array.isArray)?this.extend($a.convert(A)):this.extend(_a.convert(A)):this;if(Y=A._ne,!(I=A._sw)||!Y)return this}return ie||he?(ie.lng=Math.min(I.lng,ie.lng),ie.lat=Math.min(I.lat,ie.lat),he.lng=Math.max(Y.lng,he.lng),he.lat=Math.max(Y.lat,he.lat)):(this._sw=new _a(I.lng,I.lat),this._ne=new _a(Y.lng,Y.lat)),this},$a.prototype.getCenter=function(){return new _a((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},$a.prototype.getSouthWest=function(){return this._sw},$a.prototype.getNorthEast=function(){return this._ne},$a.prototype.getNorthWest=function(){return new _a(this.getWest(),this.getNorth())},$a.prototype.getSouthEast=function(){return new _a(this.getEast(),this.getSouth())},$a.prototype.getWest=function(){return this._sw.lng},$a.prototype.getSouth=function(){return this._sw.lat},$a.prototype.getEast=function(){return this._ne.lng},$a.prototype.getNorth=function(){return this._ne.lat},$a.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},$a.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},$a.prototype.isEmpty=function(){return!(this._sw&&this._ne)},$a.prototype.contains=function(A){var I=_a.convert(A),Y=I.lng,ie=I.lat,ve=this._sw.lng<=Y&&Y<=this._ne.lng;return this._sw.lng>this._ne.lng&&(ve=this._sw.lng>=Y&&Y>=this._ne.lng),this._sw.lat<=ie&&ie<=this._ne.lat&&ve},$a.convert=function(A){return!A||A instanceof $a?A:new $a(A)};var _a=function(A,I){if(isNaN(A)||isNaN(I))throw new Error("Invalid LngLat object: ("+A+", "+I+")");if(this.lng=+A,this.lat=+I,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};_a.prototype.wrap=function(){return new _a(c(this.lng,-180,180),this.lat)},_a.prototype.toArray=function(){return[this.lng,this.lat]},_a.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},_a.prototype.distanceTo=function(A){var I=Math.PI/180,Y=this.lat*I,ie=A.lat*I,he=Math.sin(Y)*Math.sin(ie)+Math.cos(Y)*Math.cos(ie)*Math.cos((A.lng-this.lng)*I);return 6371008.8*Math.acos(Math.min(he,1))},_a.prototype.toBounds=function(A){void 0===A&&(A=0);var I=360*A/40075017,Y=I/Math.cos(Math.PI/180*this.lat);return new $a(new _a(this.lng-Y,this.lat-I),new _a(this.lng+Y,this.lat+I))},_a.convert=function(A){if(A instanceof _a)return A;if(Array.isArray(A)&&(2===A.length||3===A.length))return new _a(Number(A[0]),Number(A[1]));if(!Array.isArray(A)&&"object"==typeof A&&null!==A)return new _a(Number("lng"in A?A.lng:A.lon),Number(A.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ef=2*Math.PI*6371008.8;function Lf(A){return Ef*Math.cos(A*Math.PI/180)}function Cf(A){return(180+A)/360}function Pf(A){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+A*Math.PI/360)))/360}function If(A,I){return A/Lf(I)}function yu(A){return 360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90}var pl=function(A,I,Y){void 0===Y&&(Y=0),this.x=+A,this.y=+I,this.z=+Y};pl.fromLngLat=function(A,I){void 0===I&&(I=0);var Y=_a.convert(A);return new pl(Cf(Y.lng),Pf(Y.lat),If(I,Y.lat))},pl.prototype.toLngLat=function(){return new _a(360*this.x-180,yu(this.y))},pl.prototype.toAltitude=function(){return this.z*Lf(yu(this.y))},pl.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ef*(A=yu(this.y),1/Math.cos(A*Math.PI/180));var A};var dl=function(A,I,Y){this.z=A,this.x=I,this.y=Y,this.key=tc(0,A,A,I,Y)};dl.prototype.equals=function(A){return this.z===A.z&&this.x===A.x&&this.y===A.y},dl.prototype.url=function(A,I){var Y,ie,he,ve,Ee,Ne=(ie=this.y,he=this.z,ve=Sf(256*(Y=this.x),256*(ie=Math.pow(2,he)-ie-1),he),Ee=Sf(256*(Y+1),256*(ie+1),he),ve[0]+","+ve[1]+","+Ee[0]+","+Ee[1]),We=function(ct,dt,Bt){for(var Xt,qt="",rr=ct;rr>0;rr--)qt+=(dt&(Xt=1<<rr-1)?1:0)+(Bt&Xt?2:0);return qt}(this.z,this.x,this.y);return A[(this.x+this.y)%A.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===I?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",We).replace("{bbox-epsg-3857}",Ne)},dl.prototype.getTilePoint=function(A){var I=Math.pow(2,this.z);return new r(8192*(A.x*I-this.x),8192*(A.y*I-this.y))},dl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Of=function(A,I){this.wrap=A,this.canonical=I,this.key=tc(A,I.z,I.z,I.x,I.y)},eo=function(A,I,Y,ie,he){this.overscaledZ=A,this.wrap=I,this.canonical=new dl(Y,+ie,+he),this.key=tc(I,A,Y,ie,he)};function tc(A,I,Y,ie,he){(A*=2)<0&&(A=-1*A-1);var ve=1<<Y;return(ve*ve*A+ve*he+ie).toString(36)+Y.toString(36)+I.toString(36)}eo.prototype.equals=function(A){return this.overscaledZ===A.overscaledZ&&this.wrap===A.wrap&&this.canonical.equals(A.canonical)},eo.prototype.scaledTo=function(A){var I=this.canonical.z-A;return A>this.canonical.z?new eo(A,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new eo(A,this.wrap,A,this.canonical.x>>I,this.canonical.y>>I)},eo.prototype.calculateScaledKey=function(A,I){var Y=this.canonical.z-A;return A>this.canonical.z?tc(this.wrap*+I,A,this.canonical.z,this.canonical.x,this.canonical.y):tc(this.wrap*+I,A,A,this.canonical.x>>Y,this.canonical.y>>Y)},eo.prototype.isChildOf=function(A){if(A.wrap!==this.wrap)return!1;var I=this.canonical.z-A.canonical.z;return 0===A.overscaledZ||A.overscaledZ<this.overscaledZ&&A.canonical.x===this.canonical.x>>I&&A.canonical.y===this.canonical.y>>I},eo.prototype.children=function(A){if(this.overscaledZ>=A)return[new eo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var I=this.canonical.z+1,Y=2*this.canonical.x,ie=2*this.canonical.y;return[new eo(I,this.wrap,I,Y,ie),new eo(I,this.wrap,I,Y+1,ie),new eo(I,this.wrap,I,Y,ie+1),new eo(I,this.wrap,I,Y+1,ie+1)]},eo.prototype.isLessThan=function(A){return this.wrap<A.wrap||!(this.wrap>A.wrap)&&(this.overscaledZ<A.overscaledZ||!(this.overscaledZ>A.overscaledZ)&&(this.canonical.x<A.canonical.x||!(this.canonical.x>A.canonical.x)&&this.canonical.y<A.canonical.y))},eo.prototype.wrapped=function(){return new eo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},eo.prototype.unwrapTo=function(A){return new eo(this.overscaledZ,A,this.canonical.z,this.canonical.x,this.canonical.y)},eo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},eo.prototype.toUnwrapped=function(){return new Of(this.wrap,this.canonical)},eo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},eo.prototype.getTilePoint=function(A){return this.canonical.getTilePoint(new pl(A.x-this.wrap,A.y))},Wr("CanonicalTileID",dl),Wr("OverscaledTileID",eo,{omit:["posMatrix"]});var Hs=function(A,I,Y){if(this.uid=A,I.height!==I.width)throw new RangeError("DEM tiles must be square");if(Y&&"mapbox"!==Y&&"terrarium"!==Y)return M('"'+Y+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=I.height;var ie=this.dim=I.height-2;this.data=new Uint32Array(I.data.buffer),this.encoding=Y||"mapbox";for(var he=0;he<ie;he++)this.data[this._idx(-1,he)]=this.data[this._idx(0,he)],this.data[this._idx(ie,he)]=this.data[this._idx(ie-1,he)],this.data[this._idx(he,-1)]=this.data[this._idx(he,0)],this.data[this._idx(he,ie)]=this.data[this._idx(he,ie-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ie,-1)]=this.data[this._idx(ie-1,0)],this.data[this._idx(-1,ie)]=this.data[this._idx(0,ie-1)],this.data[this._idx(ie,ie)]=this.data[this._idx(ie-1,ie-1)]};Hs.prototype.get=function(A,I){var Y=new Uint8Array(this.data.buffer),ie=4*this._idx(A,I);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(Y[ie],Y[ie+1],Y[ie+2])},Hs.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Hs.prototype._idx=function(A,I){if(A<-1||A>=this.dim+1||I<-1||I>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(I+1)*this.stride+(A+1)},Hs.prototype._unpackMapbox=function(A,I,Y){return(256*A*256+256*I+Y)/10-1e4},Hs.prototype._unpackTerrarium=function(A,I,Y){return 256*A+I+Y/256-32768},Hs.prototype.getPixels=function(){return new Yo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Hs.prototype.backfillBorder=function(A,I,Y){if(this.dim!==A.dim)throw new Error("dem dimension mismatch");var ie=I*this.dim,he=I*this.dim+this.dim,ve=Y*this.dim,Ee=Y*this.dim+this.dim;switch(I){case-1:ie=he-1;break;case 1:he=ie+1}switch(Y){case-1:ve=Ee-1;break;case 1:Ee=ve+1}for(var Ne=-I*this.dim,We=-Y*this.dim,ct=ve;ct<Ee;ct++)for(var dt=ie;dt<he;dt++)this.data[this._idx(dt,ct)]=A.data[this._idx(dt+Ne,ct+We)]},Wr("DEMData",Hs);var Sc=function(A){this._stringToNumber={},this._numberToString=[];for(var I=0;I<A.length;I++){var Y=A[I];this._stringToNumber[Y]=I,this._numberToString[I]=Y}};Sc.prototype.encode=function(A){return this._stringToNumber[A]},Sc.prototype.decode=function(A){return this._numberToString[A]};var Ec=function(A,I,Y,ie,he){this.type="Feature",this._vectorTileFeature=A,A._z=I,A._x=Y,A._y=ie,this.properties=A.properties,this.id=he},xu={geometry:{configurable:!0}};xu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},xu.geometry.set=function(A){this._geometry=A},Ec.prototype.toJSON=function(){var A={geometry:this.geometry};for(var I in this)"_geometry"!==I&&"_vectorTileFeature"!==I&&(A[I]=this[I]);return A},Object.defineProperties(Ec.prototype,xu);var Pl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Pl.prototype.updateState=function(A,I,Y){var ie=String(I);if(this.stateChanges[A]=this.stateChanges[A]||{},this.stateChanges[A][ie]=this.stateChanges[A][ie]||{},f(this.stateChanges[A][ie],Y),null===this.deletedStates[A])for(var he in this.deletedStates[A]={},this.state[A])he!==ie&&(this.deletedStates[A][he]=null);else if(this.deletedStates[A]&&null===this.deletedStates[A][ie])for(var ve in this.deletedStates[A][ie]={},this.state[A][ie])Y[ve]||(this.deletedStates[A][ie][ve]=null);else for(var Ee in Y)this.deletedStates[A]&&this.deletedStates[A][ie]&&null===this.deletedStates[A][ie][Ee]&&delete this.deletedStates[A][ie][Ee]},Pl.prototype.removeFeatureState=function(A,I,Y){if(null!==this.deletedStates[A]){var ie=String(I);if(this.deletedStates[A]=this.deletedStates[A]||{},Y&&void 0!==I)null!==this.deletedStates[A][ie]&&(this.deletedStates[A][ie]=this.deletedStates[A][ie]||{},this.deletedStates[A][ie][Y]=null);else if(void 0!==I)if(this.stateChanges[A]&&this.stateChanges[A][ie])for(Y in this.deletedStates[A][ie]={},this.stateChanges[A][ie])this.deletedStates[A][ie][Y]=null;else this.deletedStates[A][ie]=null;else this.deletedStates[A]=null}},Pl.prototype.getState=function(A,I){var Y=String(I),ve=f({},(this.state[A]||{})[Y],(this.stateChanges[A]||{})[Y]);if(null===this.deletedStates[A])return{};if(this.deletedStates[A]){var Ee=this.deletedStates[A][I];if(null===Ee)return{};for(var Ne in Ee)delete ve[Ne]}return ve},Pl.prototype.initializeTileState=function(A,I){A.setFeatureState(this.state,I)},Pl.prototype.coalesceChanges=function(A,I){var Y={};for(var ie in this.stateChanges){this.state[ie]=this.state[ie]||{};var he={};for(var ve in this.stateChanges[ie])this.state[ie][ve]||(this.state[ie][ve]={}),f(this.state[ie][ve],this.stateChanges[ie][ve]),he[ve]=this.state[ie][ve];Y[ie]=he}for(var Ee in this.deletedStates){this.state[Ee]=this.state[Ee]||{};var Ne={};if(null===this.deletedStates[Ee])for(var We in this.state[Ee])Ne[We]={},this.state[Ee][We]={};else for(var ct in this.deletedStates[Ee]){if(null===this.deletedStates[Ee][ct])this.state[Ee][ct]={};else for(var dt=0,Bt=Object.keys(this.deletedStates[Ee][ct]);dt<Bt.length;dt+=1)delete this.state[Ee][ct][Bt[dt]];Ne[ct]=this.state[Ee][ct]}Y[Ee]=Y[Ee]||{},f(Y[Ee],Ne)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(Y).length)for(var qt in A)A[qt].setFeatureState(Y,I)};var qs=function(A,I){this.tileID=A,this.x=A.canonical.x,this.y=A.canonical.y,this.z=A.canonical.z,this.grid=new on(8192,16,0),this.grid3D=new on(8192,16,0),this.featureIndexArray=new Tt,this.promoteId=I};function zf(A,I,Y,ie,he){return _(A,function(ve,Ee){var Ne=I instanceof Ko?I.get(Ee):null;return Ne&&Ne.evaluate?Ne.evaluate(Y,ie,he):Ne})}function Df(A){for(var I=1/0,Y=1/0,ie=-1/0,he=-1/0,ve=0,Ee=A;ve<Ee.length;ve+=1){var Ne=Ee[ve];I=Math.min(I,Ne.x),Y=Math.min(Y,Ne.y),ie=Math.max(ie,Ne.x),he=Math.max(he,Ne.y)}return{minX:I,minY:Y,maxX:ie,maxY:he}}function kp(A,I){return I-A}qs.prototype.insert=function(A,I,Y,ie,he,ve){var Ee=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Y,ie,he);for(var Ne=ve?this.grid3D:this.grid,We=0;We<I.length;We++){for(var ct=I[We],dt=[1/0,1/0,-1/0,-1/0],Bt=0;Bt<ct.length;Bt++){var Xt=ct[Bt];dt[0]=Math.min(dt[0],Xt.x),dt[1]=Math.min(dt[1],Xt.y),dt[2]=Math.max(dt[2],Xt.x),dt[3]=Math.max(dt[3],Xt.y)}dt[0]<8192&&dt[1]<8192&&dt[2]>=0&&dt[3]>=0&&Ne.insert(Ee,dt[0],dt[1],dt[2],dt[3])}},qs.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new _l.VectorTile(new mc(this.rawTileData)).layers,this.sourceLayerCoder=new Sc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},qs.prototype.query=function(A,I,Y,ie){var he=this;this.loadVTLayers();for(var ve=A.params||{},Ee=8192/A.tileSize/A.scale,Ne=bi(ve.filter),We=A.queryGeometry,ct=A.queryPadding*Ee,dt=Df(We),Bt=this.grid.query(dt.minX-ct,dt.minY-ct,dt.maxX+ct,dt.maxY+ct),Xt=Df(A.cameraQueryGeometry),rr=0,pr=this.grid3D.query(Xt.minX-ct,Xt.minY-ct,Xt.maxX+ct,Xt.maxY+ct,function(un,vn,Fn,Dn){return function(Hn,ti,ri,Wn,ci){for(var si=0,ni=Hn;si<ni.length;si+=1){var Gi=ni[si];if(ti<=Gi.x&&ri<=Gi.y&&Wn>=Gi.x&&ci>=Gi.y)return!0}var Ri=[new r(ti,ri),new r(ti,ci),new r(Wn,ci),new r(Wn,ri)];if(Hn.length>2)for(var Zi=0,yi=Ri;Zi<yi.length;Zi+=1)if($o(Hn,yi[Zi]))return!0;for(var Ni=0;Ni<Hn.length-1;Ni++)if(cl(Hn[Ni],Hn[Ni+1],Ri))return!0;return!1}(A.cameraQueryGeometry,un-ct,vn-ct,Fn+ct,Dn+ct)});rr<pr.length;rr+=1)Bt.push(pr[rr]);Bt.sort(kp);for(var Mr,Dr={},Fr=function(un){var vn=Bt[un];if(vn!==Mr){Mr=vn;var Fn=he.featureIndexArray.get(vn),Dn=null;he.loadMatchingFeature(Dr,Fn.bucketIndex,Fn.sourceLayerIndex,Fn.featureIndex,Ne,ve.layers,ve.availableImages,I,Y,ie,function(Hn,ti,ri){return Dn||(Dn=ua(Hn)),ti.queryIntersectsFeature(We,Hn,ri,Dn,he.z,A.transform,Ee,A.pixelPosMatrix)})}},Hr=0;Hr<Bt.length;Hr++)Fr(Hr);return Dr},qs.prototype.loadMatchingFeature=function(A,I,Y,ie,he,ve,Ee,Ne,We,ct,dt){var Bt=this.bucketLayerIDs[I];if(!ve||function(Fn,Dn){for(var Hn=0;Hn<Fn.length;Hn++)if(Dn.indexOf(Fn[Hn])>=0)return!0;return!1}(ve,Bt)){var Xt=this.sourceLayerCoder.decode(Y),qt=this.vtLayers[Xt].feature(ie);if(he.filter(new Ki(this.tileID.overscaledZ),qt))for(var rr=this.getId(qt,Xt),pr=0;pr<Bt.length;pr++){var Sr=Bt[pr];if(!(ve&&ve.indexOf(Sr)<0)){var Mr=Ne[Sr];if(Mr){var Dr={};void 0!==rr&&ct&&(Dr=ct.getState(Mr.sourceLayer||"_geojsonTileLayer",rr));var Fr=We[Sr];Fr.paint=zf(Fr.paint,Mr.paint,qt,Dr,Ee),Fr.layout=zf(Fr.layout,Mr.layout,qt,Dr,Ee);var Hr=!dt||dt(qt,Mr,Dr);if(Hr){var un=new Ec(qt,this.z,this.x,this.y,rr);un.layer=Fr;var vn=A[Sr];void 0===vn&&(vn=A[Sr]=[]),vn.push({featureIndex:ie,feature:un,intersectionZ:Hr})}}}}}},qs.prototype.lookupSymbolFeatures=function(A,I,Y,ie,he,ve,Ee,Ne){var We={};this.loadVTLayers();for(var ct=bi(he),dt=0,Bt=A;dt<Bt.length;dt+=1)this.loadMatchingFeature(We,Y,ie,Bt[dt],ct,ve,Ee,Ne,I);return We},qs.prototype.hasLayer=function(A){for(var I=0,Y=this.bucketLayerIDs;I<Y.length;I+=1)for(var ie=0,he=Y[I];ie<he.length;ie+=1)if(A===he[ie])return!0;return!1},qs.prototype.getId=function(A,I){var Y=A.id;return this.promoteId&&"boolean"==typeof(Y=A.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[I]])&&(Y=Number(Y)),Y},Wr("FeatureIndex",qs,{omit:["rawTileData","sourceLayerCoder"]});var go=function(A,I){this.tileID=A,this.uid=h(),this.uses=0,this.tileSize=I,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};go.prototype.registerFadeDuration=function(A){var I=A+this.timeAdded;I<N.now()||this.fadeEndTime&&I<this.fadeEndTime||(this.fadeEndTime=I)},go.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},go.prototype.loadVectorData=function(A,I,Y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",A){for(var ie in A.featureIndex&&(this.latestFeatureIndex=A.featureIndex,A.rawTileData?(this.latestRawTileData=A.rawTileData,this.latestFeatureIndex.rawTileData=A.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=A.collisionBoxArray,this.buckets=function(ct,dt){var Bt={};if(!dt)return Bt;for(var Xt=function(){var pr=rr[qt],Sr=pr.layerIds.map(function(Hr){return dt.getLayer(Hr)}).filter(Boolean);if(0!==Sr.length){pr.layers=Sr,pr.stateDependentLayerIds&&(pr.stateDependentLayers=pr.stateDependentLayerIds.map(function(Hr){return Sr.filter(function(un){return un.id===Hr})[0]}));for(var Mr=0,Dr=Sr;Mr<Dr.length;Mr+=1)Bt[Dr[Mr].id]=pr}},qt=0,rr=ct;qt<rr.length;qt+=1)Xt();return Bt}(A.buckets,I.style),this.hasSymbolBuckets=!1,this.buckets){var he=this.buckets[ie];if(he instanceof na){if(this.hasSymbolBuckets=!0,!Y)break;he.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var ve in this.buckets){var Ee=this.buckets[ve];if(Ee instanceof na&&Ee.hasRTLText){this.hasRTLText=!0,io.isLoading()||io.isLoaded()||"deferred"!==Ba()||Ji();break}}for(var Ne in this.queryPadding=0,this.buckets){var We=this.buckets[Ne];this.queryPadding=Math.max(this.queryPadding,I.style.getLayer(Ne).queryRadius(We))}A.imageAtlas&&(this.imageAtlas=A.imageAtlas),A.glyphAtlasImage&&(this.glyphAtlasImage=A.glyphAtlasImage)}else this.collisionBoxArray=new ye},go.prototype.unloadVectorData=function(){for(var A in this.buckets)this.buckets[A].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},go.prototype.getBucket=function(A){return this.buckets[A.id]},go.prototype.upload=function(A){for(var I in this.buckets){var Y=this.buckets[I];Y.uploadPending()&&Y.upload(A)}var ie=A.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new hl(A,this.imageAtlas.image,ie.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new hl(A,this.glyphAtlasImage,ie.ALPHA),this.glyphAtlasImage=null)},go.prototype.prepare=function(A){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(A,this.imageAtlasTexture)},go.prototype.queryRenderedFeatures=function(A,I,Y,ie,he,ve,Ee,Ne,We,ct){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ie,cameraQueryGeometry:he,scale:ve,tileSize:this.tileSize,pixelPosMatrix:ct,transform:Ne,params:Ee,queryPadding:this.queryPadding*We},A,I,Y):{}},go.prototype.querySourceFeatures=function(A,I){var Y=this.latestFeatureIndex;if(Y&&Y.rawTileData){var ie=Y.loadVTLayers(),he=I?I.sourceLayer:"",ve=ie._geojsonTileLayer||ie[he];if(ve)for(var Ee=bi(I&&I.filter),Ne=this.tileID.canonical,We=Ne.z,ct=Ne.x,dt=Ne.y,Bt={z:We,x:ct,y:dt},Xt=0;Xt<ve.length;Xt++){var qt=ve.feature(Xt);if(Ee.filter(new Ki(this.tileID.overscaledZ),qt)){var rr=Y.getId(qt,he),pr=new Ec(qt,We,ct,dt,rr);pr.tile=Bt,A.push(pr)}}}},go.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},go.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},go.prototype.setExpiryData=function(A){var I=this.expirationTime;if(A.cacheControl){var Y=E(A.cacheControl);Y["max-age"]&&(this.expirationTime=Date.now()+1e3*Y["max-age"])}else A.expires&&(this.expirationTime=new Date(A.expires).getTime());if(this.expirationTime){var ie=Date.now(),he=!1;if(this.expirationTime>ie)he=!1;else if(I)if(this.expirationTime<I)he=!0;else{var ve=this.expirationTime-I;ve?this.expirationTime=ie+Math.max(ve,3e4):he=!0}else he=!0;he?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},go.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},go.prototype.setFeatureState=function(A,I){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(A).length){var Y=this.latestFeatureIndex.loadVTLayers();for(var ie in this.buckets)if(I.style.hasLayer(ie)){var he=this.buckets[ie],ve=he.layers[0].sourceLayer||"_geojsonTileLayer",Ee=Y[ve],Ne=A[ve];if(Ee&&Ne&&0!==Object.keys(Ne).length){he.update(Ne,Ee,this.imageAtlas&&this.imageAtlas.patternPositions||{});var We=I&&I.style&&I.style.getLayer(ie);We&&(this.queryPadding=Math.max(this.queryPadding,We.queryRadius(he)))}}}},go.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},go.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<N.now()},go.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},go.prototype.setHoldDuration=function(A){this.symbolFadeHoldUntil=N.now()+A},go.prototype.setDependencies=function(A,I){for(var Y={},ie=0,he=I;ie<he.length;ie+=1)Y[he[ie]]=!0;this.dependencies[A]=Y},go.prototype.hasDependency=function(A,I){for(var Y=0,ie=A;Y<ie.length;Y+=1){var ve=this.dependencies[ie[Y]];if(ve)for(var Ee=0,Ne=I;Ee<Ne.length;Ee+=1)if(ve[Ne[Ee]])return!0}return!1};var el=self.performance,Rf=function(A){this._marks={start:[A.url,"start"].join("#"),end:[A.url,"end"].join("#"),measure:A.url.toString()},el.mark(this._marks.start)};Rf.prototype.finish=function(){el.mark(this._marks.end);var A=el.getEntriesByName(this._marks.measure);return 0===A.length&&(el.measure(this._marks.measure,this._marks.start,this._marks.end),A=el.getEntriesByName(this._marks.measure),el.clearMarks(this._marks.start),el.clearMarks(this._marks.end),el.clearMeasures(this._marks.measure)),A},e.Actor=Cl,e.AlphaImage=fl,e.CanonicalTileID=dl,e.CollisionBoxArray=ye,e.Color=cr,e.DEMData=Hs,e.DataConstantProperty=ai,e.DictionaryCoder=Sc,e.EXTENT=8192,e.ErrorEvent=Le,e.EvaluationParameters=Ki,e.Event=ke,e.Evented=Pe,e.FeatureIndex=qs,e.FillBucket=As,e.FillExtrusionBucket=Ms,e.ImageAtlas=$l,e.ImagePosition=yc,e.LineBucket=Wo,e.LngLat=_a,e.LngLatBounds=$a,e.MercatorCoordinate=pl,e.ONE_EM=24,e.OverscaledTileID=eo,e.Point=r,e.Point$1=r,e.Properties=Ao,e.Protobuf=mc,e.RGBAImage=Yo,e.RequestManager=ne,e.RequestPerformance=Rf,e.ResourceType=vt,e.SegmentVector=Ft,e.SourceFeatureState=Pl,e.StructArrayLayout1ui2=q,e.StructArrayLayout2f1f2i16=Zs,e.StructArrayLayout2i4=ns,e.StructArrayLayout3ui6=Ka,e.StructArrayLayout4i8=Aa,e.SymbolBucket=na,e.Texture=hl,e.Tile=go,e.Transitionable=Jo,e.Uniform1f=Ur,e.Uniform1i=oi,e.Uniform2f=_n,e.Uniform3f=Yn,e.Uniform4f=Vn,e.UniformColor=Qn,e.UniformMatrix4f=wi,e.UnwrappedTileID=Of,e.ValidationError=Xe,e.WritingMode=as,e.ZoomHistory=Ai,e.add=function(A,I,Y){return A[0]=I[0]+Y[0],A[1]=I[1]+Y[1],A[2]=I[2]+Y[2],A},e.addDynamicAttributes=gu,e.asyncAll=function(A,I,Y){if(!A.length)return Y(null,[]);var ie=A.length,he=new Array(A.length),ve=null;A.forEach(function(Ee,Ne){I(Ee,function(We,ct){We&&(ve=We),he[Ne]=ct,0==--ie&&Y(ve,he)})})},e.bezier=s,e.bindAll=d,e.browser=N,e.cacheEntryPossiblyAdded=function(A){++tt>Ve&&(A.getActor().send("enforceCacheSizeLimit",ze),tt=0)},e.clamp=l,e.clearTileCache=function(A){var I=self.caches.delete("mapbox-tiles");A&&I.catch(A).then(function(){return A()})},e.clipLine=vf,e.clone=function(A){var I=new Go(16);return I[0]=A[0],I[1]=A[1],I[2]=A[2],I[3]=A[3],I[4]=A[4],I[5]=A[5],I[6]=A[6],I[7]=A[7],I[8]=A[8],I[9]=A[9],I[10]=A[10],I[11]=A[11],I[12]=A[12],I[13]=A[13],I[14]=A[14],I[15]=A[15],I},e.clone$1=k,e.clone$2=function(A){var I=new Go(3);return I[0]=A[0],I[1]=A[1],I[2]=A[2],I},e.collisionCircleLayout=qh,e.config=U,e.create=function(){var A=new Go(16);return Go!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A},e.create$1=function(){var A=new Go(9);return Go!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A},e.create$2=function(){var A=new Go(4);return Go!=Float32Array&&(A[1]=0,A[2]=0),A[0]=1,A[3]=1,A},e.createCommonjsModule=n,e.createExpression=Wt,e.createLayout=Qi,e.createStyleLayer=function(A){return"custom"===A.type?new wp(A):new Tp[A.type](A)},e.cross=function(A,I,Y){var ie=I[0],he=I[1],ve=I[2],Ee=Y[0],Ne=Y[1],We=Y[2];return A[0]=he*We-ve*Ne,A[1]=ve*Ee-ie*We,A[2]=ie*Ne-he*Ee,A},e.deepEqual=function A(I,Y){if(Array.isArray(I)){if(!Array.isArray(Y)||I.length!==Y.length)return!1;for(var ie=0;ie<I.length;ie++)if(!A(I[ie],Y[ie]))return!1;return!0}if("object"==typeof I&&null!==I&&null!==Y){if("object"!=typeof Y||Object.keys(I).length!==Object.keys(Y).length)return!1;for(var he in I)if(!A(I[he],Y[he]))return!1;return!0}return I===Y},e.dot=function(A,I){return A[0]*I[0]+A[1]*I[1]+A[2]*I[2]},e.dot$1=function(A,I){return A[0]*I[0]+A[1]*I[1]+A[2]*I[2]+A[3]*I[3]},e.ease=i,e.emitValidationErrors=xn,e.endsWith=w,e.enforceCacheSizeLimit=function(A){Je(),Se&&Se.then(function(I){I.keys().then(function(Y){for(var ie=0;ie<Y.length-A;ie++)I.delete(Y[ie])})})},e.evaluateSizeForFeature=ff,e.evaluateSizeForZoom=hf,e.evaluateVariableOffset=bf,e.evented=ya,e.extend=f,e.featureFilter=bi,e.filterObject=T,e.fromRotation=function(A,I){var Y=Math.sin(I),ie=Math.cos(I);return A[0]=ie,A[1]=Y,A[2]=0,A[3]=-Y,A[4]=ie,A[5]=0,A[6]=0,A[7]=0,A[8]=1,A},e.getAnchorAlignment=fu,e.getAnchorJustification=du,e.getArrayBuffer=bt,e.getImage=He,e.getJSON=function(A,I){return et(f(A,{type:"json"}),I)},e.getRTLTextPluginStatus=Ba,e.getReferrer=Mt,e.getVideo=function(A,I){var Y,ie,he=self.document.createElement("video");he.muted=!0,he.onloadstart=function(){I(null,he)};for(var ve=0;ve<A.length;ve++){var Ee=self.document.createElement("source");Y=A[ve],ie=void 0,(ie=self.document.createElement("a")).href=Y,(ie.protocol!==self.document.location.protocol||ie.host!==self.document.location.host)&&(he.crossOrigin="Anonymous"),Ee.src=A[ve],he.appendChild(Ee)}return{cancel:function(){}}},e.identity=ql,e.invert=function(A,I){var Y=I[0],ie=I[1],he=I[2],ve=I[3],Ee=I[4],Ne=I[5],We=I[6],ct=I[7],dt=I[8],Bt=I[9],Xt=I[10],qt=I[11],rr=I[12],pr=I[13],Sr=I[14],Mr=I[15],Dr=Y*Ne-ie*Ee,Fr=Y*We-he*Ee,Hr=Y*ct-ve*Ee,un=ie*We-he*Ne,vn=ie*ct-ve*Ne,Fn=he*ct-ve*We,Dn=dt*pr-Bt*rr,Hn=dt*Sr-Xt*rr,ti=dt*Mr-qt*rr,ri=Bt*Sr-Xt*pr,Wn=Bt*Mr-qt*pr,ci=Xt*Mr-qt*Sr,si=Dr*ci-Fr*Wn+Hr*ri+un*ti-vn*Hn+Fn*Dn;return si?(A[0]=(Ne*ci-We*Wn+ct*ri)*(si=1/si),A[1]=(he*Wn-ie*ci-ve*ri)*si,A[2]=(pr*Fn-Sr*vn+Mr*un)*si,A[3]=(Xt*vn-Bt*Fn-qt*un)*si,A[4]=(We*ti-Ee*ci-ct*Hn)*si,A[5]=(Y*ci-he*ti+ve*Hn)*si,A[6]=(Sr*Hr-rr*Fn-Mr*Fr)*si,A[7]=(dt*Fn-Xt*Hr+qt*Fr)*si,A[8]=(Ee*Wn-Ne*ti+ct*Dn)*si,A[9]=(ie*ti-Y*Wn-ve*Dn)*si,A[10]=(rr*vn-pr*Hr+Mr*Dr)*si,A[11]=(Bt*Hr-dt*vn-qt*Dr)*si,A[12]=(Ne*Hn-Ee*ri-We*Dn)*si,A[13]=(Y*ri-ie*Hn+he*Dn)*si,A[14]=(pr*Fr-rr*un-Sr*Dr)*si,A[15]=(dt*un-Bt*Fr+Xt*Dr)*si,A):null},e.isChar=kn,e.isMapboxURL=se,e.keysDifference=function(A,I){var Y=[];for(var ie in A)ie in I||Y.push(ie);return Y},e.makeRequest=et,e.mapObject=_,e.mercatorXfromLng=Cf,e.mercatorYfromLat=Pf,e.mercatorZfromAltitude=If,e.mul=Jc,e.multiply=ul,e.mvt=_l,e.normalize=function(A,I){var Y=I[0],ie=I[1],he=I[2],ve=Y*Y+ie*ie+he*he;return ve>0&&(ve=1/Math.sqrt(ve)),A[0]=I[0]*ve,A[1]=I[1]*ve,A[2]=I[2]*ve,A},e.number=qn,e.offscreenCanvasSupported=st,e.ortho=function(A,I,Y,ie,he,ve,Ee){var Ne=1/(I-Y),We=1/(ie-he),ct=1/(ve-Ee);return A[0]=-2*Ne,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=-2*We,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=2*ct,A[11]=0,A[12]=(I+Y)*Ne,A[13]=(he+ie)*We,A[14]=(Ee+ve)*ct,A[15]=1,A},e.parseGlyphPBF=function(A){return new mc(A).readFields(tp,[])},e.pbf=mc,e.performSymbolLayout=function(A,I,Y,ie,he,ve,Ee){A.createArrays(),A.tilePixelRatio=8192/(512*A.overscaling),A.compareText={},A.iconsNeedLinear=!1;var We=A.layers[0].layout,ct=A.layers[0]._unevaluatedLayout._values,dt={};if("composite"===A.textSizeData.kind){var Bt=A.textSizeData,qt=Bt.maxZoom;dt.compositeTextSizes=[ct["text-size"].possiblyEvaluate(new Ki(Bt.minZoom),Ee),ct["text-size"].possiblyEvaluate(new Ki(qt),Ee)]}if("composite"===A.iconSizeData.kind){var rr=A.iconSizeData,Sr=rr.maxZoom;dt.compositeIconSizes=[ct["icon-size"].possiblyEvaluate(new Ki(rr.minZoom),Ee),ct["icon-size"].possiblyEvaluate(new Ki(Sr),Ee)]}dt.layoutTextSize=ct["text-size"].possiblyEvaluate(new Ki(A.zoom+1),Ee),dt.layoutIconSize=ct["icon-size"].possiblyEvaluate(new Ki(A.zoom+1),Ee),dt.textMaxSize=ct["text-size"].possiblyEvaluate(new Ki(18));for(var Mr=24*We.get("text-line-height"),Dr="map"===We.get("text-rotation-alignment")&&"point"!==We.get("symbol-placement"),Fr=We.get("text-keep-upright"),Hr=We.get("text-size"),un=function(){var Dn=Fn[vn],Hn=We.get("text-font").evaluate(Dn,{},Ee).join(","),ti=Hr.evaluate(Dn,{},Ee),ri=dt.layoutTextSize.evaluate(Dn,{},Ee),Wn=dt.layoutIconSize.evaluate(Dn,{},Ee),ci={horizontal:{},vertical:void 0},si=Dn.text,ni=[0,0];if(si){var Gi=si.toString(),Ri=24*We.get("text-letter-spacing").evaluate(Dn,{},Ee),Zi=function(Pi){for(var Wi=0,Da=Pi;Wi<Da.length;Wi+=1)if(!Ti(Da[Wi].charCodeAt(0)))return!1;return!0}(Gi)?Ri:0,yi=We.get("text-anchor").evaluate(Dn,{},Ee),Ni=We.get("text-variable-anchor");if(!Ni){var ha=We.get("text-radial-offset").evaluate(Dn,{},Ee);ni=ha?bf(yi,[24*ha,pu]):We.get("text-offset").evaluate(Dn,{},Ee).map(function(Pi){return 24*Pi})}var oa=Dr?"center":We.get("text-justify").evaluate(Dn,{},Ee),wa=We.get("symbol-placement"),sa="point"===wa?24*We.get("text-max-width").evaluate(Dn,{},Ee):0,to=function(){A.allowVerticalPlacement&&Li(Gi)&&(ci.vertical=xc(si,I,Y,he,Hn,sa,Mr,yi,"left",Zi,ni,as.vertical,!0,wa,ri,ti))};if(!Dr&&Ni){for(var Ta="auto"===oa?Ni.map(function(Pi){return du(Pi)}):[oa],Eo=!1,mo=0;mo<Ta.length;mo++){var xo=Ta[mo];if(!ci.horizontal[xo])if(Eo)ci.horizontal[xo]=ci.horizontal[0];else{var Uo=xc(si,I,Y,he,Hn,sa,Mr,"center",xo,Zi,ni,as.horizontal,!1,wa,ri,ti);Uo&&(ci.horizontal[xo]=Uo,Eo=1===Uo.positionedLines.length)}}to()}else{"auto"===oa&&(oa=du(yi));var Io=xc(si,I,Y,he,Hn,sa,Mr,yi,oa,Zi,ni,as.horizontal,!1,wa,ri,ti);Io&&(ci.horizontal[oa]=Io),to(),Li(Gi)&&Dr&&Fr&&(ci.vertical=xc(si,I,Y,he,Hn,sa,Mr,yi,oa,Zi,ni,as.vertical,!1,wa,ri,ti))}}var Pi,Wi,Ra,Vo,Oo,ro=void 0,bo=!1;if(Dn.icon&&Dn.icon.name){var Ha=ie[Dn.icon.name];Ha&&(Pi=he[Dn.icon.name],Wi=We.get("icon-offset").evaluate(Dn,{},Ee),Ra=fu(We.get("icon-anchor").evaluate(Dn,{},Ee)),ro={image:Pi,top:Oo=Wi[1]-Pi.displaySize[1]*Ra.verticalAlign,bottom:Oo+Pi.displaySize[1],left:Vo=Wi[0]-Pi.displaySize[0]*Ra.horizontalAlign,right:Vo+Pi.displaySize[0]},bo=Ha.sdf,void 0===A.sdfIcons?A.sdfIcons=Ha.sdf:A.sdfIcons!==Ha.sdf&&M("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ha.pixelRatio!==A.pixelRatio||0!==We.get("icon-rotate").constantOr(1))&&(A.iconsNeedLinear=!0))}var ao=wf(ci.horizontal)||ci.vertical;A.iconsInText=!!ao&&ao.iconsInText,(ao||ro)&&function(Pi,Wi,Da,Ra,Pa,ka,$i,Fa,Vo,ts,Oo){var Ss=ka.textMaxSize.evaluate(Wi,{});void 0===Ss&&(Ss=$i);var Gs,vo=Pi.layers[0].layout,Es=vo.get("icon-offset").evaluate(Wi,{},Oo),Ls=wf(Da.horizontal),Cs=$i/24,bu=Pi.tilePixelRatio*Cs,Il=Pi.tilePixelRatio*Ss/24,Lc=Pi.tilePixelRatio*Fa,ml=Pi.tilePixelRatio*vo.get("symbol-spacing"),Cc=vo.get("text-padding")*Pi.tilePixelRatio,Pc=vo.get("icon-padding")*Pi.tilePixelRatio,Ic=vo.get("text-max-angle")/180*Math.PI,Oc="map"===vo.get("text-rotation-alignment")&&"point"!==vo.get("symbol-placement"),tl="map"===vo.get("icon-rotation-alignment")&&"point"!==vo.get("symbol-placement"),Ol=vo.get("symbol-placement"),zc=ml/2,zl=vo.get("icon-text-fit");Ra&&"none"!==zl&&(Pi.allowVerticalPlacement&&Da.vertical&&(Gs=uf(Ra,Da.vertical,zl,vo.get("icon-text-fit-padding"),Es,Cs)),Ls&&(Ra=uf(Ra,Ls,zl,vo.get("icon-text-fit-padding"),Es,Cs)));var rl=function(Mp,sc){sc.x<0||sc.x>=8192||sc.y<0||sc.y>=8192||function(ja,Ps,Sp,nl,Au,jf,Vc,Bs,Hc,lc,qc,Gc,Mu,Uf,cc,Vf,Hf,qf,Gf,Yf,os,Yc,Wf,Ns,Ep){var Su,vl,jl,Ul,Vl,Hl=ja.addToLineVertexArray(Ps,Sp),Xf=0,Zf=0,Jf=0,Kf=0,Eu=-1,Lu=-1,Ys={},Qf=Tr(""),Cu=0,Pu=0;if(void 0===Bs._unevaluatedLayout.getValue("text-radial-offset")?(Cu=(Su=Bs.layout.get("text-offset").evaluate(os,{},Ns).map(function(fc){return 24*fc}))[0],Pu=Su[1]):(Cu=24*Bs.layout.get("text-radial-offset").evaluate(os,{},Ns),Pu=pu),ja.allowVerticalPlacement&&nl.vertical){var $f=Bs.layout.get("text-rotate").evaluate(os,{},Ns)+90;Ul=new kc(Hc,Ps,lc,qc,Gc,nl.vertical,Mu,Uf,cc,$f),Vc&&(Vl=new kc(Hc,Ps,lc,qc,Gc,Vc,Hf,qf,cc,$f))}if(Au){var Iu=Bs.layout.get("icon-rotate").evaluate(os,{}),eh="none"!==Bs.layout.get("icon-text-fit"),th=yf(Au,Iu,Wf,eh),Ou=Vc?yf(Vc,Iu,Wf,eh):void 0;jl=new kc(Hc,Ps,lc,qc,Gc,Au,Hf,qf,!1,Iu),Xf=4*th.length;var rh=ja.iconSizeData,uc=null;"source"===rh.kind?(uc=[128*Bs.layout.get("icon-size").evaluate(os,{})])[0]>32640&&M(ja.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===rh.kind&&((uc=[128*Yc.compositeIconSizes[0].evaluate(os,{},Ns),128*Yc.compositeIconSizes[1].evaluate(os,{},Ns)])[0]>32640||uc[1]>32640)&&M(ja.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),ja.addSymbols(ja.icon,th,uc,Yf,Gf,os,!1,Ps,Hl.lineStartIndex,Hl.lineLength,-1,Ns),Eu=ja.icon.placedSymbolArray.length-1,Ou&&(Zf=4*Ou.length,ja.addSymbols(ja.icon,Ou,uc,Yf,Gf,os,as.vertical,Ps,Hl.lineStartIndex,Hl.lineLength,-1,Ns),Lu=ja.icon.placedSymbolArray.length-1)}for(var nh in nl.horizontal){var Wc=nl.horizontal[nh];if(!vl){Qf=Tr(Wc.text);var Cp=Bs.layout.get("text-rotate").evaluate(os,{},Ns);vl=new kc(Hc,Ps,lc,qc,Gc,Wc,Mu,Uf,cc,Cp)}var ih=1===Wc.positionedLines.length;if(Jf+=_f(ja,Ps,Wc,jf,Bs,cc,os,Vf,Hl,nl.vertical?as.horizontal:as.horizontalOnly,ih?Object.keys(nl.horizontal):[nh],Ys,Eu,Yc,Ns),ih)break}nl.vertical&&(Kf+=_f(ja,Ps,nl.vertical,jf,Bs,cc,os,Vf,Hl,as.vertical,["vertical"],Ys,Lu,Yc,Ns));var Pp=vl?vl.boxStartIndex:ja.collisionBoxArray.length,Ip=vl?vl.boxEndIndex:ja.collisionBoxArray.length,Op=Ul?Ul.boxStartIndex:ja.collisionBoxArray.length,zp=Ul?Ul.boxEndIndex:ja.collisionBoxArray.length,Dp=jl?jl.boxStartIndex:ja.collisionBoxArray.length,Rp=jl?jl.boxEndIndex:ja.collisionBoxArray.length,Fp=Vl?Vl.boxStartIndex:ja.collisionBoxArray.length,Bp=Vl?Vl.boxEndIndex:ja.collisionBoxArray.length,js=-1,Xc=function(fc,oh){return fc&&fc.circleDiameter?Math.max(fc.circleDiameter,oh):oh};js=Xc(vl,js),js=Xc(Ul,js),js=Xc(jl,js);var ah=(js=Xc(Vl,js))>-1?1:0;ah&&(js*=Ep/24),ja.glyphOffsetArray.length>=na.MAX_GLYPHS&&M("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==os.sortKey&&ja.addToSortKeyRanges(ja.symbolInstances.length,os.sortKey),ja.symbolInstances.emplaceBack(Ps.x,Ps.y,Ys.right>=0?Ys.right:-1,Ys.center>=0?Ys.center:-1,Ys.left>=0?Ys.left:-1,Ys.vertical||-1,Eu,Lu,Qf,Pp,Ip,Op,zp,Dp,Rp,Fp,Bp,lc,Jf,Kf,Xf,Zf,ah,0,Mu,Cu,Pu,js)}(Pi,sc,Mp,Da,Ra,Pa,Gs,Pi.layers[0],Pi.collisionBoxArray,Wi.index,Wi.sourceLayerIndex,Pi.index,bu,Cc,Oc,Vo,Lc,Pc,tl,Es,Wi,ka,ts,Oo,$i)};if("line"===Ol)for(var rc=0,Dc=vf(Wi.geometry,0,0,8192,8192);rc<Dc.length;rc+=1)for(var Rc=Dc[rc],nc=0,Bc=lp(Rc,ml,Ic,Da.vertical||Ls,Ra,24,Il,Pi.overscaling,8192);nc<Bc.length;nc+=1){var ic=Bc[nc];Ls&&hp(Pi,Ls.text,zc,ic)||rl(Rc,ic)}else if("line-center"===Ol)for(var ac=0,jc=Wi.geometry;ac<jc.length;ac+=1){var Dl=jc[ac];if(Dl.length>1){var Rl=sp(Dl,Ic,Da.vertical||Ls,Ra,24,Il);Rl&&rl(Dl,Rl)}}else if("Polygon"===Wi.type)for(var Fl=0,Uc=au(Wi.geometry,0);Fl<Uc.length;Fl+=1){var Bl=Uc[Fl],oc=up(Bl,16);rl(Bl[0],new Al(oc.x,oc.y,0))}else if("LineString"===Wi.type)for(var Nl=0,Ff=Wi.geometry;Nl<Ff.length;Nl+=1){var _u=Ff[Nl];rl(_u,new Al(_u[0].x,_u[0].y,0))}else if("Point"===Wi.type)for(var wu=0,Bf=Wi.geometry;wu<Bf.length;wu+=1)for(var Tu=0,Nf=Bf[wu];Tu<Nf.length;Tu+=1){var ku=Nf[Tu];rl([ku],new Al(ku.x,ku.y,0))}}(A,Dn,ci,ro,ie,dt,ri,Wn,ni,bo,Ee)},vn=0,Fn=A.features;vn<Fn.length;vn+=1)un();ve&&A.generateCollisionDebugBuffers()},e.perspective=function(A,I,Y,ie,he){var ve,Ee=1/Math.tan(I/2);return A[0]=Ee/Y,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=Ee,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=-1,A[12]=0,A[13]=0,A[15]=0,null!=he&&he!==1/0?(A[10]=(he+ie)*(ve=1/(ie-he)),A[14]=2*he*ie*ve):(A[10]=-1,A[14]=-2*ie),A},e.pick=function(A,I){for(var Y={},ie=0;ie<I.length;ie++){var he=I[ie];he in A&&(Y[he]=A[he])}return Y},e.plugin=io,e.polygonIntersectsPolygon=Co,e.postMapLoadEvent=Ie,e.postTurnstileEvent=_e,e.potpack=of,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=Wr,e.registerForPluginStateChange=function(A){return A({pluginStatus:di,pluginURL:ca}),ya.on("pluginStateChange",A),A},e.rotate=function(A,I,Y){var ie=I[0],he=I[1],ve=I[2],Ee=I[3],Ne=Math.sin(Y),We=Math.cos(Y);return A[0]=ie*We+ve*Ne,A[1]=he*We+Ee*Ne,A[2]=ie*-Ne+ve*We,A[3]=he*-Ne+Ee*We,A},e.rotateX=function(A,I,Y){var ie=Math.sin(Y),he=Math.cos(Y),ve=I[4],Ee=I[5],Ne=I[6],We=I[7],ct=I[8],dt=I[9],Bt=I[10],Xt=I[11];return I!==A&&(A[0]=I[0],A[1]=I[1],A[2]=I[2],A[3]=I[3],A[12]=I[12],A[13]=I[13],A[14]=I[14],A[15]=I[15]),A[4]=ve*he+ct*ie,A[5]=Ee*he+dt*ie,A[6]=Ne*he+Bt*ie,A[7]=We*he+Xt*ie,A[8]=ct*he-ve*ie,A[9]=dt*he-Ee*ie,A[10]=Bt*he-Ne*ie,A[11]=Xt*he-We*ie,A},e.rotateZ=function(A,I,Y){var ie=Math.sin(Y),he=Math.cos(Y),ve=I[0],Ee=I[1],Ne=I[2],We=I[3],ct=I[4],dt=I[5],Bt=I[6],Xt=I[7];return I!==A&&(A[8]=I[8],A[9]=I[9],A[10]=I[10],A[11]=I[11],A[12]=I[12],A[13]=I[13],A[14]=I[14],A[15]=I[15]),A[0]=ve*he+ct*ie,A[1]=Ee*he+dt*ie,A[2]=Ne*he+Bt*ie,A[3]=We*he+Xt*ie,A[4]=ct*he-ve*ie,A[5]=dt*he-Ee*ie,A[6]=Bt*he-Ne*ie,A[7]=Xt*he-We*ie,A},e.scale=function(A,I,Y){var ie=Y[0],he=Y[1],ve=Y[2];return A[0]=I[0]*ie,A[1]=I[1]*ie,A[2]=I[2]*ie,A[3]=I[3]*ie,A[4]=I[4]*he,A[5]=I[5]*he,A[6]=I[6]*he,A[7]=I[7]*he,A[8]=I[8]*ve,A[9]=I[9]*ve,A[10]=I[10]*ve,A[11]=I[11]*ve,A[12]=I[12],A[13]=I[13],A[14]=I[14],A[15]=I[15],A},e.scale$1=function(A,I,Y){return A[0]=I[0]*Y,A[1]=I[1]*Y,A[2]=I[2]*Y,A[3]=I[3]*Y,A},e.scale$2=function(A,I,Y){return A[0]=I[0]*Y,A[1]=I[1]*Y,A[2]=I[2]*Y,A},e.setCacheLimits=function(A,I){ze=A,Ve=I},e.setRTLTextPlugin=function(A,I,Y){if(void 0===Y&&(Y=!1),di===Vi||di===za||di===qo)throw new Error("setRTLTextPlugin cannot be called multiple times.");ca=N.resolveURL(A),di=Vi,uo=I,Hi(),Y||Ji()},e.sphericalToCartesian=function(A){var I=A[0],Y=A[1],ie=A[2];return Y+=90,Y*=Math.PI/180,ie*=Math.PI/180,{x:I*Math.cos(Y)*Math.sin(ie),y:I*Math.sin(Y)*Math.sin(ie),z:I*Math.cos(ie)}},e.sqrLen=function(A){var I=A[0],Y=A[1];return I*I+Y*Y},e.styleSpec=Ce,e.sub=function(A,I,Y){return A[0]=I[0]-Y[0],A[1]=I[1]-Y[1],A[2]=I[2]-Y[2],A},e.symbolSize=op,e.transformMat3=function(A,I,Y){var ie=I[0],he=I[1],ve=I[2];return A[0]=ie*Y[0]+he*Y[3]+ve*Y[6],A[1]=ie*Y[1]+he*Y[4]+ve*Y[7],A[2]=ie*Y[2]+he*Y[5]+ve*Y[8],A},e.transformMat4=Qs,e.translate=function(A,I,Y){var ie,he,ve,Ee,Ne,We,ct,dt,Bt,Xt,qt,rr,pr=Y[0],Sr=Y[1],Mr=Y[2];return I===A?(A[12]=I[0]*pr+I[4]*Sr+I[8]*Mr+I[12],A[13]=I[1]*pr+I[5]*Sr+I[9]*Mr+I[13],A[14]=I[2]*pr+I[6]*Sr+I[10]*Mr+I[14],A[15]=I[3]*pr+I[7]*Sr+I[11]*Mr+I[15]):(he=I[1],ve=I[2],Ee=I[3],Ne=I[4],We=I[5],ct=I[6],dt=I[7],Bt=I[8],Xt=I[9],qt=I[10],rr=I[11],A[0]=ie=I[0],A[1]=he,A[2]=ve,A[3]=Ee,A[4]=Ne,A[5]=We,A[6]=ct,A[7]=dt,A[8]=Bt,A[9]=Xt,A[10]=qt,A[11]=rr,A[12]=ie*pr+Ne*Sr+Bt*Mr+I[12],A[13]=he*pr+We*Sr+Xt*Mr+I[13],A[14]=ve*pr+ct*Sr+qt*Mr+I[14],A[15]=Ee*pr+dt*Sr+rr*Mr+I[15]),A},e.triggerPluginCompletionEvent=fo,e.uniqueId=h,e.validateCustomStyleLayer=function(A){var I=[],Y=A.id;return void 0===Y&&I.push({message:"layers."+Y+': missing required property "id"'}),void 0===A.render&&I.push({message:"layers."+Y+': missing required method "render"'}),A.renderingMode&&"2d"!==A.renderingMode&&"3d"!==A.renderingMode&&I.push({message:"layers."+Y+': property "renderingMode" must be either "2d" or "3d"'}),I},e.validateLight=an,e.validateStyle=Gr,e.values=function(A){var I=[];for(var Y in A)I.push(A[Y]);return I},e.vectorTile=_l,e.version="1.10.1",e.warnOnce=M,e.webpSupported=Q,e.window=self,e.wrap=c}),v(0,function(e){function n(ke){var Le=typeof ke;if("number"===Le||"boolean"===Le||"string"===Le||null==ke)return JSON.stringify(ke);if(Array.isArray(ke)){for(var Pe="[",Ce=0,Xe=ke;Ce<Xe.length;Ce+=1)Pe+=n(Xe[Ce])+",";return Pe+"]"}for(var at=Object.keys(ke).sort(),pt="{",ut=0;ut<at.length;ut++)pt+=JSON.stringify(at[ut])+":"+n(ke[at[ut]])+",";return pt+"}"}function t(ke){for(var Le="",Pe=0,Ce=e.refProperties;Pe<Ce.length;Pe+=1)Le+="/"+n(ke[Ce[Pe]]);return Le}var a=function(ke){this.keyCache={},ke&&this.replace(ke)};a.prototype.replace=function(ke){this._layerConfigs={},this._layers={},this.update(ke,[])},a.prototype.update=function(ke,Le){for(var Pe=this,Ce=0,Xe=ke;Ce<Xe.length;Ce+=1){var at=Xe[Ce];this._layerConfigs[at.id]=at;var pt=this._layers[at.id]=e.createStyleLayer(at);pt._featureFilter=e.featureFilter(pt.filter),this.keyCache[at.id]&&delete this.keyCache[at.id]}for(var ut=0,St=Le;ut<St.length;ut+=1){var ot=St[ut];delete this.keyCache[ot],delete this._layerConfigs[ot],delete this._layers[ot]}this.familiesBySource={};for(var Et=0,Lt=function(lt,_t){for(var Dt={},Vt=0;Vt<lt.length;Vt++){var nr=_t&&_t[lt[Vt].id]||t(lt[Vt]);_t&&(_t[lt[Vt].id]=nr);var Gt=Dt[nr];Gt||(Gt=Dt[nr]=[]),Gt.push(lt[Vt])}var Kt=[];for(var ir in Dt)Kt.push(Dt[ir]);return Kt}(e.values(this._layerConfigs),this.keyCache);Et<Lt.length;Et+=1){var Qe=Lt[Et].map(function(lt){return Pe._layers[lt.id]}),mt=Qe[0];if("none"!==mt.visibility){var It=mt.source||"",jt=this.familiesBySource[It];jt||(jt=this.familiesBySource[It]={});var Zt=mt.sourceLayer||"_geojsonTileLayer",Re=jt[Zt];Re||(Re=jt[Zt]=[]),Re.push(Qe)}}};var r=function(ke){var Le={},Pe=[];for(var Ce in ke){var Xe=ke[Ce],at=Le[Ce]={};for(var pt in Xe){var ut=Xe[+pt];if(ut&&0!==ut.bitmap.width&&0!==ut.bitmap.height){var St={x:0,y:0,w:ut.bitmap.width+2,h:ut.bitmap.height+2};Pe.push(St),at[pt]={rect:St,metrics:ut.metrics}}}}var ot=e.potpack(Pe),Qe=new e.AlphaImage({width:ot.w||1,height:ot.h||1});for(var mt in ke){var It=ke[mt];for(var jt in It){var Zt=It[+jt];if(Zt&&0!==Zt.bitmap.width&&0!==Zt.bitmap.height){var Re=Le[mt][jt].rect;e.AlphaImage.copy(Zt.bitmap,Qe,{x:0,y:0},{x:Re.x+1,y:Re.y+1},Zt.bitmap)}}}this.image=Qe,this.positions=Le};e.register("GlyphAtlas",r);var u=function(ke){this.tileID=new e.OverscaledTileID(ke.tileID.overscaledZ,ke.tileID.wrap,ke.tileID.canonical.z,ke.tileID.canonical.x,ke.tileID.canonical.y),this.uid=ke.uid,this.zoom=ke.zoom,this.pixelRatio=ke.pixelRatio,this.tileSize=ke.tileSize,this.source=ke.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ke.showCollisionBoxes,this.collectResourceTiming=!!ke.collectResourceTiming,this.returnDependencies=!!ke.returnDependencies,this.promoteId=ke.promoteId};function s(ke,Le,Pe){for(var Ce=new e.EvaluationParameters(Le),Xe=0,at=ke;Xe<at.length;Xe+=1)at[Xe].recalculate(Ce,Pe)}function i(ke,Le){var Pe=e.getArrayBuffer(ke.request,function(Ce,Xe,at,pt){Ce?Le(Ce):Xe&&Le(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Xe)),rawData:Xe,cacheControl:at,expires:pt})});return function(){Pe.cancel(),Le()}}u.prototype.parse=function(ke,Le,Pe,Ce,Xe){var at=this;this.status="parsing",this.data=ke,this.collisionBoxArray=new e.CollisionBoxArray;var pt=new e.DictionaryCoder(Object.keys(ke.layers).sort()),ut=new e.FeatureIndex(this.tileID,this.promoteId);ut.bucketLayerIDs=[];var St,ot,Et,Lt,Qe={},mt={featureIndex:ut,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Pe},It=Le.familiesBySource[this.source];for(var jt in It){var Zt=ke.layers[jt];if(Zt){1===Zt.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+jt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Re=pt.encode(jt),lt=[],_t=0;_t<Zt.length;_t++){var Dt=Zt.feature(_t),Vt=ut.getId(Dt,jt);lt.push({feature:Dt,id:Vt,index:_t,sourceLayerIndex:Re})}for(var nr=0,Gt=It[jt];nr<Gt.length;nr+=1){var Kt=Gt[nr],ir=Kt[0];ir.minzoom&&this.zoom<Math.floor(ir.minzoom)||ir.maxzoom&&this.zoom>=ir.maxzoom||"none"!==ir.visibility&&(s(Kt,this.zoom,Pe),(Qe[ir.id]=ir.createBucket({index:ut.bucketLayerIDs.length,layers:Kt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Re,sourceID:this.source})).populate(lt,mt,this.tileID.canonical),ut.bucketLayerIDs.push(Kt.map(function(mr){return mr.id})))}}}var dr=e.mapObject(mt.glyphDependencies,function(mr){return Object.keys(mr).map(Number)});Object.keys(dr).length?Ce.send("getGlyphs",{uid:this.uid,stacks:dr},function(mr,Ir){St||(St=mr,ot=Ir,sr.call(at))}):ot={};var hr=Object.keys(mt.iconDependencies);hr.length?Ce.send("getImages",{icons:hr,source:this.source,tileID:this.tileID,type:"icons"},function(mr,Ir){St||(St=mr,Et=Ir,sr.call(at))}):Et={};var cr=Object.keys(mt.patternDependencies);function sr(){if(St)return Xe(St);if(ot&&Et&&Lt){var mr=new r(ot),Ir=new e.ImageAtlas(Et,Lt);for(var vr in Qe){var Br=Qe[vr];Br instanceof e.SymbolBucket?(s(Br.layers,this.zoom,Pe),e.performSymbolLayout(Br,ot,mr.positions,Et,Ir.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Br.hasPattern&&(Br instanceof e.LineBucket||Br instanceof e.FillBucket||Br instanceof e.FillExtrusionBucket)&&(s(Br.layers,this.zoom,Pe),Br.addFeatures(mt,this.tileID.canonical,Ir.patternPositions))}this.status="done",Xe(null,{buckets:e.values(Qe).filter(function(Jr){return!Jr.isEmpty()}),featureIndex:ut,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mr.image,imageAtlas:Ir,glyphMap:this.returnDependencies?ot:null,iconMap:this.returnDependencies?Et:null,glyphPositions:this.returnDependencies?mr.positions:null})}}cr.length?Ce.send("getImages",{icons:cr,source:this.source,tileID:this.tileID,type:"patterns"},function(mr,Ir){St||(St=mr,Lt=Ir,sr.call(at))}):Lt={},sr.call(this)};var l=function(ke,Le,Pe,Ce){this.actor=ke,this.layerIndex=Le,this.availableImages=Pe,this.loadVectorData=Ce||i,this.loading={},this.loaded={}};l.prototype.loadTile=function(ke,Le){var Pe=this,Ce=ke.uid;this.loading||(this.loading={});var Xe=!!(ke&&ke.request&&ke.request.collectResourceTiming)&&new e.RequestPerformance(ke.request),at=this.loading[Ce]=new u(ke);at.abort=this.loadVectorData(ke,function(pt,ut){if(delete Pe.loading[Ce],pt||!ut)return at.status="done",Pe.loaded[Ce]=at,Le(pt);var St=ut.rawData,ot={};ut.expires&&(ot.expires=ut.expires),ut.cacheControl&&(ot.cacheControl=ut.cacheControl);var Et={};if(Xe){var Lt=Xe.finish();Lt&&(Et.resourceTiming=JSON.parse(JSON.stringify(Lt)))}at.vectorTile=ut.vectorTile,at.parse(ut.vectorTile,Pe.layerIndex,Pe.availableImages,Pe.actor,function(Qe,mt){if(Qe||!mt)return Le(Qe);Le(null,e.extend({rawTileData:St.slice(0)},mt,ot,Et))}),Pe.loaded=Pe.loaded||{},Pe.loaded[Ce]=at})},l.prototype.reloadTile=function(ke,Le){var Pe=this,Ce=this.loaded,Xe=ke.uid,at=this;if(Ce&&Ce[Xe]){var pt=Ce[Xe];pt.showCollisionBoxes=ke.showCollisionBoxes;var ut=function(St,ot){var Et=pt.reloadCallback;Et&&(delete pt.reloadCallback,pt.parse(pt.vectorTile,at.layerIndex,Pe.availableImages,at.actor,Et)),Le(St,ot)};"parsing"===pt.status?pt.reloadCallback=ut:"done"===pt.status&&(pt.vectorTile?pt.parse(pt.vectorTile,this.layerIndex,this.availableImages,this.actor,ut):ut())}},l.prototype.abortTile=function(ke,Le){var Pe=this.loading,Ce=ke.uid;Pe&&Pe[Ce]&&Pe[Ce].abort&&(Pe[Ce].abort(),delete Pe[Ce]),Le()},l.prototype.removeTile=function(ke,Le){var Pe=this.loaded,Ce=ke.uid;Pe&&Pe[Ce]&&delete Pe[Ce],Le()};var c=e.window.ImageBitmap,f=function(){this.loaded={}};f.prototype.loadTile=function(ke,Le){var Pe=ke.uid,Ce=ke.encoding,Xe=ke.rawImageData,at=c&&Xe instanceof c?this.getImageData(Xe):Xe,pt=new e.DEMData(Pe,at,Ce);this.loaded=this.loaded||{},this.loaded[Pe]=pt,Le(null,pt)},f.prototype.getImageData=function(ke){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ke.width,ke.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ke.width,this.offscreenCanvas.height=ke.height,this.offscreenCanvasContext.drawImage(ke,0,0,ke.width,ke.height);var Le=this.offscreenCanvasContext.getImageData(-1,-1,ke.width+2,ke.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:Le.width,height:Le.height},Le.data)},f.prototype.removeTile=function(ke){var Le=this.loaded,Pe=ke.uid;Le&&Le[Pe]&&delete Le[Pe]};var g=function ke(Le,Pe){var Ce,Xe=Le&&Le.type;if("FeatureCollection"===Xe)for(Ce=0;Ce<Le.features.length;Ce++)ke(Le.features[Ce],Pe);else if("GeometryCollection"===Xe)for(Ce=0;Ce<Le.geometries.length;Ce++)ke(Le.geometries[Ce],Pe);else if("Feature"===Xe)ke(Le.geometry,Pe);else if("Polygon"===Xe)h(Le.coordinates,Pe);else if("MultiPolygon"===Xe)for(Ce=0;Ce<Le.coordinates.length;Ce++)h(Le.coordinates[Ce],Pe);return Le};function h(ke,Le){if(0!==ke.length){o(ke[0],Le);for(var Pe=1;Pe<ke.length;Pe++)o(ke[Pe],!Le)}}function o(ke,Le){for(var Pe=0,Ce=0,Xe=ke.length,at=Xe-1;Ce<Xe;at=Ce++)Pe+=(ke[Ce][0]-ke[at][0])*(ke[at][1]+ke[Ce][1]);Pe>=0!=!!Le&&ke.reverse()}var x=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,d=function(ke){this._feature=ke,this.extent=e.EXTENT,this.type=ke.type,this.properties=ke.tags,"id"in ke&&!isNaN(ke.id)&&(this.id=parseInt(ke.id,10))};d.prototype.loadGeometry=function(){if(1===this._feature.type){for(var ke=[],Le=0,Pe=this._feature.geometry;Le<Pe.length;Le+=1){var Ce=Pe[Le];ke.push([new e.Point$1(Ce[0],Ce[1])])}return ke}for(var Xe=[],at=0,pt=this._feature.geometry;at<pt.length;at+=1){for(var ut=[],St=0,ot=pt[at];St<ot.length;St+=1){var Et=ot[St];ut.push(new e.Point$1(Et[0],Et[1]))}Xe.push(ut)}return Xe},d.prototype.toGeoJSON=function(ke,Le,Pe){return x.call(this,ke,Le,Pe)};var w=function(ke){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=ke.length,this._features=ke};w.prototype.feature=function(ke){return new d(this._features[ke])};var _=e.vectorTile.VectorTileFeature,T=k;function k(ke,Le){this.options=Le||{},this.features=ke,this.length=ke.length}function L(ke,Le){this.id="number"==typeof ke.id?ke.id:void 0,this.type=ke.type,this.rawGeometry=1===ke.type?[ke.geometry]:ke.geometry,this.properties=ke.tags,this.extent=Le||4096}k.prototype.feature=function(ke){return new L(this.features[ke],this.options.extent)},L.prototype.loadGeometry=function(){var ke=this.rawGeometry;this.geometry=[];for(var Le=0;Le<ke.length;Le++){for(var Pe=ke[Le],Ce=[],Xe=0;Xe<Pe.length;Xe++)Ce.push(new e.Point$1(Pe[Xe][0],Pe[Xe][1]));this.geometry.push(Ce)}return this.geometry},L.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ke=this.geometry,Le=1/0,Pe=-1/0,Ce=1/0,Xe=-1/0,at=0;at<ke.length;at++)for(var pt=ke[at],ut=0;ut<pt.length;ut++){var St=pt[ut];Le=Math.min(Le,St.x),Pe=Math.max(Pe,St.x),Ce=Math.min(Ce,St.y),Xe=Math.max(Xe,St.y)}return[Le,Ce,Pe,Xe]},L.prototype.toGeoJSON=_.prototype.toGeoJSON;var M=E,S=T;function E(ke){var Le=new e.pbf;return function(Pe,Ce){for(var Xe in Pe.layers)Ce.writeMessage(3,R,Pe.layers[Xe])}(ke,Le),Le.finish()}function R(ke,Le){var Pe;Le.writeVarintField(15,ke.version||1),Le.writeStringField(1,ke.name||""),Le.writeVarintField(5,ke.extent||4096);var Ce={keys:[],values:[],keycache:{},valuecache:{}};for(Pe=0;Pe<ke.length;Pe++)Ce.feature=ke.feature(Pe),Le.writeMessage(2,B,Ce);var Xe=Ce.keys;for(Pe=0;Pe<Xe.length;Pe++)Le.writeStringField(3,Xe[Pe]);var at=Ce.values;for(Pe=0;Pe<at.length;Pe++)Le.writeMessage(4,G,at[Pe])}function B(ke,Le){var Pe=ke.feature;void 0!==Pe.id&&Le.writeVarintField(1,Pe.id),Le.writeMessage(2,H,ke),Le.writeVarintField(3,Pe.type),Le.writeMessage(4,W,Pe)}function H(ke,Le){var Pe=ke.feature,Ce=ke.keys,Xe=ke.values,at=ke.keycache,pt=ke.valuecache;for(var ut in Pe.properties){var St=at[ut];void 0===St&&(Ce.push(ut),at[ut]=St=Ce.length-1),Le.writeVarint(St);var ot=Pe.properties[ut],Et=typeof ot;"string"!==Et&&"boolean"!==Et&&"number"!==Et&&(ot=JSON.stringify(ot));var Lt=Et+":"+ot,Qe=pt[Lt];void 0===Qe&&(Xe.push(ot),pt[Lt]=Qe=Xe.length-1),Le.writeVarint(Qe)}}function V(ke,Le){return(Le<<3)+(7&ke)}function Z(ke){return ke<<1^ke>>31}function W(ke,Le){for(var Pe=ke.loadGeometry(),Ce=ke.type,Xe=0,at=0,pt=Pe.length,ut=0;ut<pt;ut++){var St=Pe[ut],ot=1;1===Ce&&(ot=St.length),Le.writeVarint(V(1,ot));for(var Et=3===Ce?St.length-1:St.length,Lt=0;Lt<Et;Lt++){1===Lt&&1!==Ce&&Le.writeVarint(V(2,Et-1));var Qe=St[Lt].x-Xe,mt=St[Lt].y-at;Le.writeVarint(Z(Qe)),Le.writeVarint(Z(mt)),Xe+=Qe,at+=mt}3===Ce&&Le.writeVarint(V(7,1))}}function G(ke,Le){var Pe=typeof ke;"string"===Pe?Le.writeStringField(1,ke):"boolean"===Pe?Le.writeBooleanField(7,ke):"number"===Pe&&(ke%1!=0?Le.writeDoubleField(3,ke):ke<0?Le.writeSVarintField(6,ke):Le.writeVarintField(5,ke))}function X(ke,Le,Pe,Ce,Xe,at){if(!(Xe-Ce<=Pe)){var pt=Ce+Xe>>1;(function ut(St,ot,Et,Lt,Qe,mt){for(;Qe>Lt;){if(Qe-Lt>600){var It=Qe-Lt+1,jt=Et-Lt+1,Zt=Math.log(It),Re=.5*Math.exp(2*Zt/3),lt=.5*Math.sqrt(Zt*Re*(It-Re)/It)*(jt-It/2<0?-1:1);ut(St,ot,Et,Math.max(Lt,Math.floor(Et-jt*Re/It+lt)),Math.min(Qe,Math.floor(Et+(It-jt)*Re/It+lt)),mt)}var Vt=ot[2*Et+mt],nr=Lt,Gt=Qe;for(te(St,ot,Lt,Et),ot[2*Qe+mt]>Vt&&te(St,ot,Lt,Qe);nr<Gt;){for(te(St,ot,nr,Gt),nr++,Gt--;ot[2*nr+mt]<Vt;)nr++;for(;ot[2*Gt+mt]>Vt;)Gt--}ot[2*Lt+mt]===Vt?te(St,ot,Lt,Gt):te(St,ot,++Gt,Qe),Gt<=Et&&(Lt=Gt+1),Et<=Gt&&(Qe=Gt-1)}})(ke,Le,pt,Ce,Xe,at%2),X(ke,Le,Pe,Ce,pt-1,at+1),X(ke,Le,Pe,pt+1,Xe,at+1)}}function te(ke,Le,Pe,Ce){D(ke,Pe,Ce),D(Le,2*Pe,2*Ce),D(Le,2*Pe+1,2*Ce+1)}function D(ke,Le,Pe){var Ce=ke[Le];ke[Le]=ke[Pe],ke[Pe]=Ce}function N(ke,Le,Pe,Ce){var Xe=ke-Pe,at=Le-Ce;return Xe*Xe+at*at}M.fromVectorTileJs=E,M.fromGeojsonVt=function(ke,Le){Le=Le||{};var Pe={};for(var Ce in ke)Pe[Ce]=new T(ke[Ce].features,Le),Pe[Ce].name=Ce,Pe[Ce].version=Le.version,Pe[Ce].extent=Le.extent;return E({layers:Pe})},M.GeoJSONWrapper=S;var U=function(ke){return ke[0]},Q=function(ke){return ke[1]},j=function(ke,Le,Pe,Ce,Xe){void 0===Le&&(Le=U),void 0===Pe&&(Pe=Q),void 0===Ce&&(Ce=64),void 0===Xe&&(Xe=Float64Array),this.nodeSize=Ce,this.points=ke;for(var at=ke.length<65536?Uint16Array:Uint32Array,pt=this.ids=new at(ke.length),ut=this.coords=new Xe(2*ke.length),St=0;St<ke.length;St++)pt[St]=St,ut[2*St]=Le(ke[St]),ut[2*St+1]=Pe(ke[St]);X(pt,ut,Ce,0,pt.length-1,0)};j.prototype.range=function(ke,Le,Pe,Ce){return function(Xe,at,pt,ut,St,ot,Et){for(var Lt,Qe,mt=[0,Xe.length-1,0],It=[];mt.length;){var jt=mt.pop(),Zt=mt.pop(),Re=mt.pop();if(Zt-Re<=Et)for(var lt=Re;lt<=Zt;lt++)Qe=at[2*lt+1],(Lt=at[2*lt])>=pt&&Lt<=St&&Qe>=ut&&Qe<=ot&&It.push(Xe[lt]);else{var _t=Math.floor((Re+Zt)/2);Qe=at[2*_t+1],(Lt=at[2*_t])>=pt&&Lt<=St&&Qe>=ut&&Qe<=ot&&It.push(Xe[_t]);var Dt=(jt+1)%2;(0===jt?pt<=Lt:ut<=Qe)&&(mt.push(Re),mt.push(_t-1),mt.push(Dt)),(0===jt?St>=Lt:ot>=Qe)&&(mt.push(_t+1),mt.push(Zt),mt.push(Dt))}}return It}(this.ids,this.coords,ke,Le,Pe,Ce,this.nodeSize)},j.prototype.within=function(ke,Le,Pe){return function(Ce,Xe,at,pt,ut,St){for(var ot=[0,Ce.length-1,0],Et=[],Lt=ut*ut;ot.length;){var Qe=ot.pop(),mt=ot.pop(),It=ot.pop();if(mt-It<=St)for(var jt=It;jt<=mt;jt++)N(Xe[2*jt],Xe[2*jt+1],at,pt)<=Lt&&Et.push(Ce[jt]);else{var Zt=Math.floor((It+mt)/2),Re=Xe[2*Zt],lt=Xe[2*Zt+1];N(Re,lt,at,pt)<=Lt&&Et.push(Ce[Zt]);var _t=(Qe+1)%2;(0===Qe?at-ut<=Re:pt-ut<=lt)&&(ot.push(It),ot.push(Zt-1),ot.push(_t)),(0===Qe?at+ut>=Re:pt+ut>=lt)&&(ot.push(Zt+1),ot.push(mt),ot.push(_t))}}return Et}(this.ids,this.coords,ke,Le,Pe,this.nodeSize)};var J={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ke){return ke}},K=function(ke){this.options=ge(Object.create(J),ke),this.trees=new Array(this.options.maxZoom+1)};function re(ke,Le,Pe,Ce,Xe){return{x:ke,y:Le,zoom:1/0,id:Pe,parentId:-1,numPoints:Ce,properties:Xe}}function ne(ke,Le){var Pe=ke.geometry.coordinates,Xe=Pe[1];return{x:pe(Pe[0]),y:ce(Xe),zoom:1/0,index:Le,parentId:-1}}function se(ke){return{type:"Feature",id:ke.id,properties:oe(ke),geometry:{type:"Point",coordinates:[(Ce=ke.x,360*(Ce-.5)),(Le=ke.y,Pe=(180-360*Le)*Math.PI/180,360*Math.atan(Math.exp(Pe))/Math.PI-90)]}};var Le,Pe,Ce}function oe(ke){var Le=ke.numPoints,Pe=Le>=1e4?Math.round(Le/1e3)+"k":Le>=1e3?Math.round(Le/100)/10+"k":Le;return ge(ge({},ke.properties),{cluster:!0,cluster_id:ke.id,point_count:Le,point_count_abbreviated:Pe})}function pe(ke){return ke/360+.5}function ce(ke){var Le=Math.sin(ke*Math.PI/180),Pe=.5-.25*Math.log((1+Le)/(1-Le))/Math.PI;return Pe<0?0:Pe>1?1:Pe}function ge(ke,Le){for(var Pe in Le)ke[Pe]=Le[Pe];return ke}function xe(ke){return ke.x}function we(ke){return ke.y}function be(ke,Le,Pe,Ce,Xe,at){var pt=Xe-Pe,ut=at-Ce;if(0!==pt||0!==ut){var St=((ke-Pe)*pt+(Le-Ce)*ut)/(pt*pt+ut*ut);St>1?(Pe=Xe,Ce=at):St>0&&(Pe+=pt*St,Ce+=ut*St)}return(pt=ke-Pe)*pt+(ut=Le-Ce)*ut}function Se(ke,Le,Pe,Ce){var Xe={id:void 0===ke?null:ke,type:Le,geometry:Pe,tags:Ce,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(at){var pt=at.geometry,ut=at.type;if("Point"===ut||"MultiPoint"===ut||"LineString"===ut)fe(at,pt);else if("Polygon"===ut||"MultiLineString"===ut)for(var St=0;St<pt.length;St++)fe(at,pt[St]);else if("MultiPolygon"===ut)for(St=0;St<pt.length;St++)for(var ot=0;ot<pt[St].length;ot++)fe(at,pt[St][ot])}(Xe),Xe}function fe(ke,Le){for(var Pe=0;Pe<Le.length;Pe+=3)ke.minX=Math.min(ke.minX,Le[Pe]),ke.minY=Math.min(ke.minY,Le[Pe+1]),ke.maxX=Math.max(ke.maxX,Le[Pe]),ke.maxY=Math.max(ke.maxY,Le[Pe+1])}function me(ke,Le,Pe,Ce){if(Le.geometry){var Xe=Le.geometry.coordinates,at=Le.geometry.type,pt=Math.pow(Pe.tolerance/((1<<Pe.maxZoom)*Pe.extent),2),ut=[],St=Le.id;if(Pe.promoteId?St=Le.properties[Pe.promoteId]:Pe.generateId&&(St=Ce||0),"Point"===at)Te(Xe,ut);else if("MultiPoint"===at)for(var ot=0;ot<Xe.length;ot++)Te(Xe[ot],ut);else if("LineString"===at)_e(Xe,ut,pt,!1);else if("MultiLineString"===at){if(Pe.lineMetrics){for(ot=0;ot<Xe.length;ot++)_e(Xe[ot],ut=[],pt,!1),ke.push(Se(St,"LineString",ut,Le.properties));return}Me(Xe,ut,pt,!1)}else if("Polygon"===at)Me(Xe,ut,pt,!0);else{if("MultiPolygon"!==at){if("GeometryCollection"===at){for(ot=0;ot<Le.geometry.geometries.length;ot++)me(ke,{id:St,geometry:Le.geometry.geometries[ot],properties:Le.properties},Pe,Ce);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ot=0;ot<Xe.length;ot++){var Et=[];Me(Xe[ot],Et,pt,!0),ut.push(Et)}}ke.push(Se(St,at,ut,Le.properties))}}function Te(ke,Le){Le.push(Ie(ke[0])),Le.push(ze(ke[1])),Le.push(0)}function _e(ke,Le,Pe,Ce){for(var Xe,at,pt=0,ut=0;ut<ke.length;ut++){var St=Ie(ke[ut][0]),ot=ze(ke[ut][1]);Le.push(St),Le.push(ot),Le.push(0),ut>0&&(pt+=Ce?(Xe*ot-St*at)/2:Math.sqrt(Math.pow(St-Xe,2)+Math.pow(ot-at,2))),Xe=St,at=ot}var Et=Le.length-3;Le[2]=1,function Lt(Qe,mt,It,jt){for(var Zt,Re=jt,lt=It-mt>>1,_t=It-mt,Dt=Qe[mt],Vt=Qe[mt+1],nr=Qe[It],Gt=Qe[It+1],Kt=mt+3;Kt<It;Kt+=3){var ir=be(Qe[Kt],Qe[Kt+1],Dt,Vt,nr,Gt);if(ir>Re)Zt=Kt,Re=ir;else if(ir===Re){var dr=Math.abs(Kt-lt);dr<_t&&(Zt=Kt,_t=dr)}}Re>jt&&(Zt-mt>3&&Lt(Qe,mt,Zt,jt),Qe[Zt+2]=Re,It-Zt>3&&Lt(Qe,Zt,It,jt))}(Le,0,Et,Pe),Le[Et+2]=1,Le.size=Math.abs(pt),Le.start=0,Le.end=Le.size}function Me(ke,Le,Pe,Ce){for(var Xe=0;Xe<ke.length;Xe++){var at=[];_e(ke[Xe],at,Pe,Ce),Le.push(at)}}function Ie(ke){return ke/360+.5}function ze(ke){var Le=Math.sin(ke*Math.PI/180),Pe=.5-.25*Math.log((1+Le)/(1-Le))/Math.PI;return Pe<0?0:Pe>1?1:Pe}function Ve(ke,Le,Pe,Ce,Xe,at,pt,ut){if(Ce/=Le,at>=(Pe/=Le)&&pt<Ce)return ke;if(pt<Pe||at>=Ce)return null;for(var St=[],ot=0;ot<ke.length;ot++){var Et=ke[ot],Lt=Et.geometry,Qe=Et.type,mt=0===Xe?Et.minX:Et.minY,It=0===Xe?Et.maxX:Et.maxY;if(mt>=Pe&&It<Ce)St.push(Et);else if(!(It<Pe||mt>=Ce)){var jt=[];if("Point"===Qe||"MultiPoint"===Qe)Je(Lt,jt,Pe,Ce,Xe);else if("LineString"===Qe)De(Lt,jt,Pe,Ce,Xe,!1,ut.lineMetrics);else if("MultiLineString"===Qe)Ze(Lt,jt,Pe,Ce,Xe,!1);else if("Polygon"===Qe)Ze(Lt,jt,Pe,Ce,Xe,!0);else if("MultiPolygon"===Qe)for(var Zt=0;Zt<Lt.length;Zt++){var Re=[];Ze(Lt[Zt],Re,Pe,Ce,Xe,!0),Re.length&&jt.push(Re)}if(jt.length){if(ut.lineMetrics&&"LineString"===Qe){for(Zt=0;Zt<jt.length;Zt++)St.push(Se(Et.id,Qe,jt[Zt],Et.tags));continue}"LineString"!==Qe&&"MultiLineString"!==Qe||(1===jt.length?(Qe="LineString",jt=jt[0]):Qe="MultiLineString"),"Point"!==Qe&&"MultiPoint"!==Qe||(Qe=3===jt.length?"Point":"MultiPoint"),St.push(Se(Et.id,Qe,jt,Et.tags))}}}return St.length?St:null}function Je(ke,Le,Pe,Ce,Xe){for(var at=0;at<ke.length;at+=3){var pt=ke[at+Xe];pt>=Pe&&pt<=Ce&&(Le.push(ke[at]),Le.push(ke[at+1]),Le.push(ke[at+2]))}}function De(ke,Le,Pe,Ce,Xe,at,pt){for(var ut,St,ot=Be(ke),Et=0===Xe?tt:st,Lt=ke.start,Qe=0;Qe<ke.length-3;Qe+=3){var mt=ke[Qe],It=ke[Qe+1],jt=ke[Qe+2],Zt=ke[Qe+3],Re=ke[Qe+4],lt=0===Xe?mt:It,_t=0===Xe?Zt:Re,Dt=!1;pt&&(ut=Math.sqrt(Math.pow(mt-Zt,2)+Math.pow(It-Re,2))),lt<Pe?_t>Pe&&(St=Et(ot,mt,It,Zt,Re,Pe),pt&&(ot.start=Lt+ut*St)):lt>Ce?_t<Ce&&(St=Et(ot,mt,It,Zt,Re,Ce),pt&&(ot.start=Lt+ut*St)):Ye(ot,mt,It,jt),_t<Pe&&lt>=Pe&&(St=Et(ot,mt,It,Zt,Re,Pe),Dt=!0),_t>Ce&&lt<=Ce&&(St=Et(ot,mt,It,Zt,Re,Ce),Dt=!0),!at&&Dt&&(pt&&(ot.end=Lt+ut*St),Le.push(ot),ot=Be(ke)),pt&&(Lt+=ut)}var Vt=ke.length-3;mt=ke[Vt],It=ke[Vt+1],jt=ke[Vt+2],(lt=0===Xe?mt:It)>=Pe&&lt<=Ce&&Ye(ot,mt,It,jt),Vt=ot.length-3,at&&Vt>=3&&(ot[Vt]!==ot[0]||ot[Vt+1]!==ot[1])&&Ye(ot,ot[0],ot[1],ot[2]),ot.length&&Le.push(ot)}function Be(ke){var Le=[];return Le.size=ke.size,Le.start=ke.start,Le.end=ke.end,Le}function Ze(ke,Le,Pe,Ce,Xe,at){for(var pt=0;pt<ke.length;pt++)De(ke[pt],Le,Pe,Ce,Xe,at,!1)}function Ye(ke,Le,Pe,Ce){ke.push(Le),ke.push(Pe),ke.push(Ce)}function tt(ke,Le,Pe,Ce,Xe,at){var pt=(at-Le)/(Ce-Le);return ke.push(at),ke.push(Pe+(Xe-Pe)*pt),ke.push(1),pt}function st(ke,Le,Pe,Ce,Xe,at){var pt=(at-Pe)/(Xe-Pe);return ke.push(Le+(Ce-Le)*pt),ke.push(at),ke.push(1),pt}function vt(ke,Le){for(var Pe=[],Ce=0;Ce<ke.length;Ce++){var Xe,at=ke[Ce],pt=at.type;if("Point"===pt||"MultiPoint"===pt||"LineString"===pt)Xe=Pt(at.geometry,Le);else if("MultiLineString"===pt||"Polygon"===pt){Xe=[];for(var ut=0;ut<at.geometry.length;ut++)Xe.push(Pt(at.geometry[ut],Le))}else if("MultiPolygon"===pt)for(Xe=[],ut=0;ut<at.geometry.length;ut++){for(var St=[],ot=0;ot<at.geometry[ut].length;ot++)St.push(Pt(at.geometry[ut][ot],Le));Xe.push(St)}Pe.push(Se(at.id,pt,Xe,at.tags))}return Pe}function Pt(ke,Le){var Pe=[];Pe.size=ke.size,void 0!==ke.start&&(Pe.start=ke.start,Pe.end=ke.end);for(var Ce=0;Ce<ke.length;Ce+=3)Pe.push(ke[Ce]+Le,ke[Ce+1],ke[Ce+2]);return Pe}function Mt(ke,Le){if(ke.transformed)return ke;var Pe,Ce,Xe,at=1<<ke.z,pt=ke.x,ut=ke.y;for(Pe=0;Pe<ke.features.length;Pe++){var St=ke.features[Pe],ot=St.geometry,Et=St.type;if(St.geometry=[],1===Et)for(Ce=0;Ce<ot.length;Ce+=2)St.geometry.push(rt(ot[Ce],ot[Ce+1],Le,at,pt,ut));else for(Ce=0;Ce<ot.length;Ce++){var Lt=[];for(Xe=0;Xe<ot[Ce].length;Xe+=2)Lt.push(rt(ot[Ce][Xe],ot[Ce][Xe+1],Le,at,pt,ut));St.geometry.push(Lt)}}return ke.transformed=!0,ke}function rt(ke,Le,Pe,Ce,Xe,at){return[Math.round(Pe*(ke*Ce-Xe)),Math.round(Pe*(Le*Ce-at))]}function et(ke,Le,Pe,Ce,Xe){for(var at=Le===Xe.maxZoom?0:Xe.tolerance/((1<<Le)*Xe.extent),pt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Pe,y:Ce,z:Le,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ut=0;ut<ke.length;ut++){pt.numFeatures++,bt(pt,ke[ut],at,Xe);var St=ke[ut].minX,ot=ke[ut].minY,Et=ke[ut].maxX,Lt=ke[ut].maxY;St<pt.minX&&(pt.minX=St),ot<pt.minY&&(pt.minY=ot),Et>pt.maxX&&(pt.maxX=Et),Lt>pt.maxY&&(pt.maxY=Lt)}return pt}function bt(ke,Le,Pe,Ce){var Xe=Le.geometry,at=Le.type,pt=[];if("Point"===at||"MultiPoint"===at)for(var ut=0;ut<Xe.length;ut+=3)pt.push(Xe[ut]),pt.push(Xe[ut+1]),ke.numPoints++,ke.numSimplified++;else if("LineString"===at)Rt(pt,Xe,ke,Pe,!1,!1);else if("MultiLineString"===at||"Polygon"===at)for(ut=0;ut<Xe.length;ut++)Rt(pt,Xe[ut],ke,Pe,"Polygon"===at,0===ut);else if("MultiPolygon"===at)for(var St=0;St<Xe.length;St++){var ot=Xe[St];for(ut=0;ut<ot.length;ut++)Rt(pt,ot[ut],ke,Pe,!0,0===ut)}if(pt.length){var Et=Le.tags||null;if("LineString"===at&&Ce.lineMetrics){for(var Lt in Et={},Le.tags)Et[Lt]=Le.tags[Lt];Et.mapbox_clip_start=Xe.start/Xe.size,Et.mapbox_clip_end=Xe.end/Xe.size}var Qe={geometry:pt,type:"Polygon"===at||"MultiPolygon"===at?3:"LineString"===at||"MultiLineString"===at?2:1,tags:Et};null!==Le.id&&(Qe.id=Le.id),ke.features.push(Qe)}}function Rt(ke,Le,Pe,Ce,Xe,at){var pt=Ce*Ce;if(Ce>0&&Le.size<(Xe?pt:Ce))Pe.numPoints+=Le.length/3;else{for(var ut=[],St=0;St<Le.length;St+=3)(0===Ce||Le[St+2]>pt)&&(Pe.numSimplified++,ut.push(Le[St]),ut.push(Le[St+1])),Pe.numPoints++;Xe&&function(ot,Et){for(var Lt=0,Qe=0,mt=ot.length,It=mt-2;Qe<mt;It=Qe,Qe+=2)Lt+=(ot[Qe]-ot[It])*(ot[Qe+1]+ot[It+1]);if(Lt>0===Et)for(Qe=0,mt=ot.length;Qe<mt/2;Qe+=2){var jt=ot[Qe],Zt=ot[Qe+1];ot[Qe]=ot[mt-2-Qe],ot[Qe+1]=ot[mt-1-Qe],ot[mt-2-Qe]=jt,ot[mt-1-Qe]=Zt}}(ut,at),ke.push(ut)}}function Yt(ke,Le){var Pe=(Le=this.options=function(Xe,at){for(var pt in at)Xe[pt]=at[pt];return Xe}(Object.create(this.options),Le)).debug;if(Pe&&console.time("preprocess data"),Le.maxZoom<0||Le.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Le.promoteId&&Le.generateId)throw new Error("promoteId and generateId cannot be used together.");var Xe,at,pt,ut,St,ot,Ce=function(Xe,at){var pt=[];if("FeatureCollection"===Xe.type)for(var ut=0;ut<Xe.features.length;ut++)me(pt,Xe.features[ut],at,ut);else me(pt,"Feature"===Xe.type?Xe:{geometry:Xe},at);return pt}(ke,Le);this.tiles={},this.tileCoords=[],Pe&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Le.indexMaxZoom,Le.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Xe=Ce,at=Le,pt=at.buffer/at.extent,ut=Xe,St=Ve(Xe,1,-1-pt,pt,0,-1,2,at),ot=Ve(Xe,1,1-pt,2+pt,0,-1,2,at),(St||ot)&&(ut=Ve(Xe,1,-pt,1+pt,0,-1,2,at)||[],St&&(ut=vt(St,1).concat(ut)),ot&&(ut=ut.concat(vt(ot,-1)))),Ce=ut).length&&this.splitTile(Ce,0,0,0),Pe&&(Ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Fe(ke,Le,Pe){return 32*((1<<ke)*Pe+Le)+ke}function He(ke,Le){var Pe=ke.tileID.canonical;if(!this._geoJSONIndex)return Le(null,null);var Ce=this._geoJSONIndex.getTile(Pe.z,Pe.x,Pe.y);if(!Ce)return Le(null,null);var Xe=new w(Ce.features),at=M(Xe);0===at.byteOffset&&at.byteLength===at.buffer.byteLength||(at=new Uint8Array(at)),Le(null,{vectorTile:Xe,rawData:at.buffer})}K.prototype.load=function(ke){var Le=this.options,Pe=Le.log,Ce=Le.minZoom,Xe=Le.maxZoom,at=Le.nodeSize;Pe&&console.time("total time");var pt="prepare "+ke.length+" points";Pe&&console.time(pt),this.points=ke;for(var ut=[],St=0;St<ke.length;St++)ke[St].geometry&&ut.push(ne(ke[St],St));this.trees[Xe+1]=new j(ut,xe,we,at,Float32Array),Pe&&console.timeEnd(pt);for(var ot=Xe;ot>=Ce;ot--){var Et=+Date.now();ut=this._cluster(ut,ot),this.trees[ot]=new j(ut,xe,we,at,Float32Array),Pe&&console.log("z%d: %d clusters in %dms",ot,ut.length,+Date.now()-Et)}return Pe&&console.timeEnd("total time"),this},K.prototype.getClusters=function(ke,Le){var Pe=((ke[0]+180)%360+360)%360-180,Ce=Math.max(-90,Math.min(90,ke[1])),Xe=180===ke[2]?180:((ke[2]+180)%360+360)%360-180,at=Math.max(-90,Math.min(90,ke[3]));if(ke[2]-ke[0]>=360)Pe=-180,Xe=180;else if(Pe>Xe){var pt=this.getClusters([Pe,Ce,180,at],Le),ut=this.getClusters([-180,Ce,Xe,at],Le);return pt.concat(ut)}for(var St=this.trees[this._limitZoom(Le)],ot=[],Et=0,Lt=St.range(pe(Pe),ce(at),pe(Xe),ce(Ce));Et<Lt.length;Et+=1){var mt=St.points[Lt[Et]];ot.push(mt.numPoints?se(mt):this.points[mt.index])}return ot},K.prototype.getChildren=function(ke){var Le=this._getOriginId(ke),Pe=this._getOriginZoom(ke),Ce="No cluster with the specified id.",Xe=this.trees[Pe];if(!Xe)throw new Error(Ce);var at=Xe.points[Le];if(!at)throw new Error(Ce);for(var pt=this.options.radius/(this.options.extent*Math.pow(2,Pe-1)),ut=[],St=0,ot=Xe.within(at.x,at.y,pt);St<ot.length;St+=1){var Lt=Xe.points[ot[St]];Lt.parentId===ke&&ut.push(Lt.numPoints?se(Lt):this.points[Lt.index])}if(0===ut.length)throw new Error(Ce);return ut},K.prototype.getLeaves=function(ke,Le,Pe){var Ce=[];return this._appendLeaves(Ce,ke,Le=Le||10,Pe=Pe||0,0),Ce},K.prototype.getTile=function(ke,Le,Pe){var Ce=this.trees[this._limitZoom(ke)],Xe=Math.pow(2,ke),at=this.options,ut=at.radius/at.extent,St=(Pe-ut)/Xe,ot=(Pe+1+ut)/Xe,Et={features:[]};return this._addTileFeatures(Ce.range((Le-ut)/Xe,St,(Le+1+ut)/Xe,ot),Ce.points,Le,Pe,Xe,Et),0===Le&&this._addTileFeatures(Ce.range(1-ut/Xe,St,1,ot),Ce.points,Xe,Pe,Xe,Et),Le===Xe-1&&this._addTileFeatures(Ce.range(0,St,ut/Xe,ot),Ce.points,-1,Pe,Xe,Et),Et.features.length?Et:null},K.prototype.getClusterExpansionZoom=function(ke){for(var Le=this._getOriginZoom(ke)-1;Le<=this.options.maxZoom;){var Pe=this.getChildren(ke);if(Le++,1!==Pe.length)break;ke=Pe[0].properties.cluster_id}return Le},K.prototype._appendLeaves=function(ke,Le,Pe,Ce,Xe){for(var at=0,pt=this.getChildren(Le);at<pt.length;at+=1){var ut=pt[at],St=ut.properties;if(St&&St.cluster?Xe+St.point_count<=Ce?Xe+=St.point_count:Xe=this._appendLeaves(ke,St.cluster_id,Pe,Ce,Xe):Xe<Ce?Xe++:ke.push(ut),ke.length===Pe)break}return Xe},K.prototype._addTileFeatures=function(ke,Le,Pe,Ce,Xe,at){for(var pt=0,ut=ke;pt<ut.length;pt+=1){var St=Le[ut[pt]],ot=St.numPoints,Et={type:1,geometry:[[Math.round(this.options.extent*(St.x*Xe-Pe)),Math.round(this.options.extent*(St.y*Xe-Ce))]],tags:ot?oe(St):this.points[St.index].properties},Lt=void 0;ot?Lt=St.id:this.options.generateId?Lt=St.index:this.points[St.index].id&&(Lt=this.points[St.index].id),void 0!==Lt&&(Et.id=Lt),at.features.push(Et)}},K.prototype._limitZoom=function(ke){return Math.max(this.options.minZoom,Math.min(ke,this.options.maxZoom+1))},K.prototype._cluster=function(ke,Le){for(var Pe=[],Ce=this.options,pt=Ce.reduce,ut=Ce.radius/(Ce.extent*Math.pow(2,Le)),St=0;St<ke.length;St++){var ot=ke[St];if(!(ot.zoom<=Le)){ot.zoom=Le;for(var Et=this.trees[Le+1],Lt=Et.within(ot.x,ot.y,ut),Qe=ot.numPoints||1,mt=ot.x*Qe,It=ot.y*Qe,jt=pt&&Qe>1?this._map(ot,!0):null,Zt=(St<<5)+(Le+1)+this.points.length,Re=0,lt=Lt;Re<lt.length;Re+=1){var Dt=Et.points[lt[Re]];if(!(Dt.zoom<=Le)){Dt.zoom=Le;var Vt=Dt.numPoints||1;mt+=Dt.x*Vt,It+=Dt.y*Vt,Qe+=Vt,Dt.parentId=Zt,pt&&(jt||(jt=this._map(ot,!0)),pt(jt,this._map(Dt)))}}1===Qe?Pe.push(ot):(ot.parentId=Zt,Pe.push(re(mt/Qe,It/Qe,Zt,Qe,jt)))}}return Pe},K.prototype._getOriginId=function(ke){return ke-this.points.length>>5},K.prototype._getOriginZoom=function(ke){return(ke-this.points.length)%32},K.prototype._map=function(ke,Le){if(ke.numPoints)return Le?ge({},ke.properties):ke.properties;var Pe=this.points[ke.index].properties,Ce=this.options.map(Pe);return Le&&Ce===Pe?ge({},Ce):Ce},Yt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Yt.prototype.splitTile=function(ke,Le,Pe,Ce,Xe,at,pt){for(var ut=[ke,Le,Pe,Ce],St=this.options,ot=St.debug;ut.length;){Ce=ut.pop(),Pe=ut.pop(),Le=ut.pop(),ke=ut.pop();var Et=1<<Le,Lt=Fe(Le,Pe,Ce),Qe=this.tiles[Lt];if(!Qe&&(ot>1&&console.time("creation"),Qe=this.tiles[Lt]=et(ke,Le,Pe,Ce,St),this.tileCoords.push({z:Le,x:Pe,y:Ce}),ot)){ot>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Le,Pe,Ce,Qe.numFeatures,Qe.numPoints,Qe.numSimplified),console.timeEnd("creation"));var mt="z"+Le;this.stats[mt]=(this.stats[mt]||0)+1,this.total++}if(Qe.source=ke,Xe){if(Le===St.maxZoom||Le===Xe)continue;var It=1<<Xe-Le;if(Pe!==Math.floor(at/It)||Ce!==Math.floor(pt/It))continue}else if(Le===St.indexMaxZoom||Qe.numPoints<=St.indexMaxPoints)continue;if(Qe.source=null,0!==ke.length){ot>1&&console.time("clipping");var jt,Zt,Re,lt,_t,Dt,Vt=.5*St.buffer/St.extent,nr=.5-Vt,Gt=.5+Vt,Kt=1+Vt;jt=Zt=Re=lt=null,_t=Ve(ke,Et,Pe-Vt,Pe+Gt,0,Qe.minX,Qe.maxX,St),Dt=Ve(ke,Et,Pe+nr,Pe+Kt,0,Qe.minX,Qe.maxX,St),ke=null,_t&&(jt=Ve(_t,Et,Ce-Vt,Ce+Gt,1,Qe.minY,Qe.maxY,St),Zt=Ve(_t,Et,Ce+nr,Ce+Kt,1,Qe.minY,Qe.maxY,St),_t=null),Dt&&(Re=Ve(Dt,Et,Ce-Vt,Ce+Gt,1,Qe.minY,Qe.maxY,St),lt=Ve(Dt,Et,Ce+nr,Ce+Kt,1,Qe.minY,Qe.maxY,St),Dt=null),ot>1&&console.timeEnd("clipping"),ut.push(jt||[],Le+1,2*Pe,2*Ce),ut.push(Zt||[],Le+1,2*Pe,2*Ce+1),ut.push(Re||[],Le+1,2*Pe+1,2*Ce),ut.push(lt||[],Le+1,2*Pe+1,2*Ce+1)}}},Yt.prototype.getTile=function(ke,Le,Pe){var Ce=this.options,Xe=Ce.extent,at=Ce.debug;if(ke<0||ke>24)return null;var pt=1<<ke,ut=Fe(ke,Le=(Le%pt+pt)%pt,Pe);if(this.tiles[ut])return Mt(this.tiles[ut],Xe);at>1&&console.log("drilling down to z%d-%d-%d",ke,Le,Pe);for(var St,ot=ke,Et=Le,Lt=Pe;!St&&ot>0;)ot--,Et=Math.floor(Et/2),Lt=Math.floor(Lt/2),St=this.tiles[Fe(ot,Et,Lt)];return St&&St.source?(at>1&&console.log("found parent tile z%d-%d-%d",ot,Et,Lt),at>1&&console.time("drilling down"),this.splitTile(St.source,ot,Et,Lt,ke,Le,Pe),at>1&&console.timeEnd("drilling down"),this.tiles[ut]?Mt(this.tiles[ut],Xe):null):null};var Oe=function(ke){function Le(Pe,Ce,Xe,at){ke.call(this,Pe,Ce,Xe,He),at&&(this.loadGeoJSON=at)}return ke&&(Le.__proto__=ke),(Le.prototype=Object.create(ke&&ke.prototype)).constructor=Le,Le.prototype.loadData=function(Pe,Ce){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ce,this._pendingLoadDataParams=Pe,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Le.prototype._loadData=function(){var Pe=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ce=this._pendingCallback,Xe=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var at=!!(Xe&&Xe.request&&Xe.request.collectResourceTiming)&&new e.RequestPerformance(Xe.request);this.loadGeoJSON(Xe,function(pt,ut){if(pt||!ut)return Ce(pt);if("object"!=typeof ut)return Ce(new Error("Input data given to '"+Xe.source+"' is not a valid GeoJSON object."));g(ut,!0);try{Pe._geoJSONIndex=Xe.cluster?new K(function(Et){var Lt=Et.superclusterOptions,Qe=Et.clusterProperties;if(!Qe||!Lt)return Lt;for(var mt={},It={},jt={accumulated:null,zoom:0},Zt={properties:null},Re=Object.keys(Qe),lt=0,_t=Re;lt<_t.length;lt+=1){var Dt=_t[lt],Vt=Qe[Dt],nr=Vt[0],Kt=e.createExpression(Vt[1]),ir=e.createExpression("string"==typeof nr?[nr,["accumulated"],["get",Dt]]:nr);mt[Dt]=Kt.value,It[Dt]=ir.value}return Lt.map=function(dr){Zt.properties=dr;for(var hr={},cr=0,sr=Re;cr<sr.length;cr+=1){var mr=sr[cr];hr[mr]=mt[mr].evaluate(jt,Zt)}return hr},Lt.reduce=function(dr,hr){Zt.properties=hr;for(var cr=0,sr=Re;cr<sr.length;cr+=1){var mr=sr[cr];jt.accumulated=dr[mr],dr[mr]=It[mr].evaluate(jt,Zt)}},Lt}(Xe)).load(ut.features):new Yt(Et=ut,Xe.geojsonVtOptions)}catch(Et){return Ce(Et)}var Et;Pe.loaded={};var St={};if(at){var ot=at.finish();ot&&(St.resourceTiming={},St.resourceTiming[Xe.source]=JSON.parse(JSON.stringify(ot)))}Ce(null,St)})}},Le.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Le.prototype.reloadTile=function(Pe,Ce){var Xe=this.loaded;return Xe&&Xe[Pe.uid]?ke.prototype.reloadTile.call(this,Pe,Ce):this.loadTile(Pe,Ce)},Le.prototype.loadGeoJSON=function(Pe,Ce){if(Pe.request)e.getJSON(Pe.request,Ce);else{if("string"!=typeof Pe.data)return Ce(new Error("Input data given to '"+Pe.source+"' is not a valid GeoJSON object."));try{return Ce(null,JSON.parse(Pe.data))}catch(Xe){return Ce(new Error("Input data given to '"+Pe.source+"' is not a valid GeoJSON object."))}}},Le.prototype.removeSource=function(Pe,Ce){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ce()},Le.prototype.getClusterExpansionZoom=function(Pe,Ce){try{Ce(null,this._geoJSONIndex.getClusterExpansionZoom(Pe.clusterId))}catch(Xe){Ce(Xe)}},Le.prototype.getClusterChildren=function(Pe,Ce){try{Ce(null,this._geoJSONIndex.getChildren(Pe.clusterId))}catch(Xe){Ce(Xe)}},Le.prototype.getClusterLeaves=function(Pe,Ce){try{Ce(null,this._geoJSONIndex.getLeaves(Pe.clusterId,Pe.limit,Pe.offset))}catch(Xe){Ce(Xe)}},Le}(l),$e=function(ke){var Le=this;this.self=ke,this.actor=new e.Actor(ke,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:Oe},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Pe,Ce){if(Le.workerSourceTypes[Pe])throw new Error('Worker source with name "'+Pe+'" already registered.');Le.workerSourceTypes[Pe]=Ce},this.self.registerRTLTextPlugin=function(Pe){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=Pe.applyArabicShaping,e.plugin.processBidirectionalText=Pe.processBidirectionalText,e.plugin.processStyledBidirectionalText=Pe.processStyledBidirectionalText}};return $e.prototype.setReferrer=function(ke,Le){this.referrer=Le},$e.prototype.setImages=function(ke,Le,Pe){for(var Ce in this.availableImages[ke]=Le,this.workerSources[ke]){var Xe=this.workerSources[ke][Ce];for(var at in Xe)Xe[at].availableImages=Le}Pe()},$e.prototype.setLayers=function(ke,Le,Pe){this.getLayerIndex(ke).replace(Le),Pe()},$e.prototype.updateLayers=function(ke,Le,Pe){this.getLayerIndex(ke).update(Le.layers,Le.removedIds),Pe()},$e.prototype.loadTile=function(ke,Le,Pe){this.getWorkerSource(ke,Le.type,Le.source).loadTile(Le,Pe)},$e.prototype.loadDEMTile=function(ke,Le,Pe){this.getDEMWorkerSource(ke,Le.source).loadTile(Le,Pe)},$e.prototype.reloadTile=function(ke,Le,Pe){this.getWorkerSource(ke,Le.type,Le.source).reloadTile(Le,Pe)},$e.prototype.abortTile=function(ke,Le,Pe){this.getWorkerSource(ke,Le.type,Le.source).abortTile(Le,Pe)},$e.prototype.removeTile=function(ke,Le,Pe){this.getWorkerSource(ke,Le.type,Le.source).removeTile(Le,Pe)},$e.prototype.removeDEMTile=function(ke,Le){this.getDEMWorkerSource(ke,Le.source).removeTile(Le)},$e.prototype.removeSource=function(ke,Le,Pe){if(this.workerSources[ke]&&this.workerSources[ke][Le.type]&&this.workerSources[ke][Le.type][Le.source]){var Ce=this.workerSources[ke][Le.type][Le.source];delete this.workerSources[ke][Le.type][Le.source],void 0!==Ce.removeSource?Ce.removeSource(Le,Pe):Pe()}},$e.prototype.loadWorkerSource=function(ke,Le,Pe){try{this.self.importScripts(Le.url),Pe()}catch(Ce){Pe(Ce.toString())}},$e.prototype.syncRTLPluginState=function(ke,Le,Pe){try{e.plugin.setState(Le);var Ce=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=Ce){this.self.importScripts(Ce);var Xe=e.plugin.isParsed();Pe(Xe?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ce),Xe)}}catch(at){Pe(at.toString())}},$e.prototype.getAvailableImages=function(ke){var Le=this.availableImages[ke];return Le||(Le=[]),Le},$e.prototype.getLayerIndex=function(ke){var Le=this.layerIndexes[ke];return Le||(Le=this.layerIndexes[ke]=new a),Le},$e.prototype.getWorkerSource=function(ke,Le,Pe){var Ce=this;return this.workerSources[ke]||(this.workerSources[ke]={}),this.workerSources[ke][Le]||(this.workerSources[ke][Le]={}),this.workerSources[ke][Le][Pe]||(this.workerSources[ke][Le][Pe]=new this.workerSourceTypes[Le]({send:function(at,pt,ut){Ce.actor.send(at,pt,ut,ke)}},this.getLayerIndex(ke),this.getAvailableImages(ke))),this.workerSources[ke][Le][Pe]},$e.prototype.getDEMWorkerSource=function(ke,Le){return this.demWorkerSources[ke]||(this.demWorkerSources[ke]={}),this.demWorkerSources[ke][Le]||(this.demWorkerSources[ke][Le]=new f),this.demWorkerSources[ke][Le]},$e.prototype.enforceCacheSizeLimit=function(ke,Le){e.enforceCacheSizeLimit(Le)},"undefined"!=typeof WorkerGlobalScope&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new $e(e.window)),$e}),v(0,function(e){var n=e.createCommonjsModule(function(C){function z(ae){return!F(ae)}function F(ae){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ue,de,ye=new Blob([""],{type:"text/javascript"}),Ae=URL.createObjectURL(ye);try{de=new Worker(Ae),ue=!0}catch(Ue){ue=!1}return de&&de.terminate(),URL.revokeObjectURL(Ae),ue}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ue=document.createElement("canvas");ue.width=ue.height=1;var de=ue.getContext("2d");if(!de)return!1;var ye=de.getImageData(0,0,1,1);return ye&&ye.width===ue.width}()?(void 0===q[ue=ae&&ae.failIfMajorPerformanceCaveat]&&(q[ue]=function(de){var Ue,Ge,nt,ye=(Ue=de,Ge=document.createElement("canvas"),(nt=Object.create(z.webGLContextAttributes)).failIfMajorPerformanceCaveat=Ue,Ge.probablySupportsContext?Ge.probablySupportsContext("webgl",nt)||Ge.probablySupportsContext("experimental-webgl",nt):Ge.supportsContext?Ge.supportsContext("webgl",nt)||Ge.supportsContext("experimental-webgl",nt):Ge.getContext("webgl",nt)||Ge.getContext("experimental-webgl",nt));if(!ye)return!1;var Ae=ye.createShader(ye.VERTEX_SHADER);return!(!Ae||ye.isContextLost())&&(ye.shaderSource(Ae,"void main() {}"),ye.compileShader(Ae),!0===ye.getShaderParameter(Ae,ye.COMPILE_STATUS))}(ue)),q[ue]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var ue}C.exports?C.exports=z:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=z,window.mapboxgl.notSupportedReason=F);var q={};z.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),t={create:function(C,z,F){var q=e.window.document.createElement(C);return void 0!==z&&(q.className=z),F&&F.appendChild(q),q},createNS:function(C,z){return e.window.document.createElementNS(C,z)}},a=e.window.document.documentElement.style;function r(C){if(!a)return C[0];for(var z=0;z<C.length;z++)if(C[z]in a)return C[z];return C[0]}var u,s=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);t.disableDrag=function(){a&&s&&(u=a[s],a[s]="none")},t.enableDrag=function(){a&&s&&(a[s]=u)};var i=r(["transform","WebkitTransform"]);t.setTransform=function(C,z){C.style[i]=z};var l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0}});e.window.addEventListener("test",c,c),e.window.removeEventListener("test",c,c)}catch(C){l=!1}t.addEventListener=function(C,z,F,q){void 0===q&&(q={}),C.addEventListener(z,F,"passive"in q&&l?q:q.capture)},t.removeEventListener=function(C,z,F,q){void 0===q&&(q={}),C.removeEventListener(z,F,"passive"in q&&l?q:q.capture)};var f=function(C){C.preventDefault(),C.stopPropagation(),e.window.removeEventListener("click",f,!0)};function g(C){var z=C.userImage;return!!(z&&z.render&&z.render())&&(C.data.replace(new Uint8Array(z.data.buffer)),!0)}t.suppressClick=function(){e.window.addEventListener("click",f,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",f,!0)},0)},t.mousePos=function(C,z){var F=C.getBoundingClientRect();return new e.Point(z.clientX-F.left-C.clientLeft,z.clientY-F.top-C.clientTop)},t.touchPos=function(C,z){for(var F=C.getBoundingClientRect(),q=[],ae=0;ae<z.length;ae++)q.push(new e.Point(z[ae].clientX-F.left-C.clientLeft,z[ae].clientY-F.top-C.clientTop));return q},t.mouseButton=function(C){return void 0!==e.window.InstallTrigger&&2===C.button&&C.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:C.button},t.remove=function(C){C.parentNode&&C.parentNode.removeChild(C)};var h=function(C){function z(){C.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.isLoaded=function(){return this.loaded},z.prototype.setLoaded=function(F){if(this.loaded!==F&&(this.loaded=F,F)){for(var q=0,ae=this.requestors;q<ae.length;q+=1){var ue=ae[q];this._notify(ue.ids,ue.callback)}this.requestors=[]}},z.prototype.getImage=function(F){return this.images[F]},z.prototype.addImage=function(F,q){this._validate(F,q)&&(this.images[F]=q)},z.prototype._validate=function(F,q){var ae=!0;return this._validateStretch(q.stretchX,q.data&&q.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "stretchX" value'))),ae=!1),this._validateStretch(q.stretchY,q.data&&q.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "stretchY" value'))),ae=!1),this._validateContent(q.content,q)||(this.fire(new e.ErrorEvent(new Error('Image "'+F+'" has invalid "content" value'))),ae=!1),ae},z.prototype._validateStretch=function(F,q){if(!F)return!0;for(var ae=0,ue=0,de=F;ue<de.length;ue+=1){var ye=de[ue];if(ye[0]<ae||ye[1]<ye[0]||q<ye[1])return!1;ae=ye[1]}return!0},z.prototype._validateContent=function(F,q){return!(F&&(4!==F.length||F[0]<0||q.data.width<F[0]||F[1]<0||q.data.height<F[1]||F[2]<0||q.data.width<F[2]||F[3]<0||q.data.height<F[3]||F[2]<F[0]||F[3]<F[1]))},z.prototype.updateImage=function(F,q){q.version=this.images[F].version+1,this.images[F]=q,this.updatedImages[F]=!0},z.prototype.removeImage=function(F){var q=this.images[F];delete this.images[F],delete this.patterns[F],q.userImage&&q.userImage.onRemove&&q.userImage.onRemove()},z.prototype.listImages=function(){return Object.keys(this.images)},z.prototype.getImages=function(F,q){var ae=!0;if(!this.isLoaded())for(var ue=0,de=F;ue<de.length;ue+=1)this.images[de[ue]]||(ae=!1);this.isLoaded()||ae?this._notify(F,q):this.requestors.push({ids:F,callback:q})},z.prototype._notify=function(F,q){for(var ae={},ue=0,de=F;ue<de.length;ue+=1){var ye=de[ue];this.images[ye]||this.fire(new e.Event("styleimagemissing",{id:ye}));var Ae=this.images[ye];Ae?ae[ye]={data:Ae.data.clone(),pixelRatio:Ae.pixelRatio,sdf:Ae.sdf,version:Ae.version,stretchX:Ae.stretchX,stretchY:Ae.stretchY,content:Ae.content,hasRenderCallback:Boolean(Ae.userImage&&Ae.userImage.render)}:e.warnOnce('Image "'+ye+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}q(null,ae)},z.prototype.getPixelSize=function(){var F=this.atlasImage;return{width:F.width,height:F.height}},z.prototype.getPattern=function(F){var q=this.patterns[F],ae=this.getImage(F);if(!ae)return null;if(q&&q.position.version===ae.version)return q.position;if(q)q.position.version=ae.version;else{var ue={w:ae.data.width+2,h:ae.data.height+2,x:0,y:0},de=new e.ImagePosition(ue,ae);this.patterns[F]={bin:ue,position:de}}return this._updatePatternAtlas(),this.patterns[F].position},z.prototype.bind=function(F){var q=F.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(F,this.atlasImage,q.RGBA),this.atlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE)},z.prototype._updatePatternAtlas=function(){var F=[];for(var q in this.patterns)F.push(this.patterns[q].bin);var ae=e.potpack(F),ue=ae.w,de=ae.h,ye=this.atlasImage;for(var Ae in ye.resize({width:ue||1,height:de||1}),this.patterns){var Ue=this.patterns[Ae].bin,Ge=Ue.x+1,nt=Ue.y+1,xt=this.images[Ae].data,At=xt.width,wt=xt.height;e.RGBAImage.copy(xt,ye,{x:0,y:0},{x:Ge,y:nt},{width:At,height:wt}),e.RGBAImage.copy(xt,ye,{x:0,y:wt-1},{x:Ge,y:nt-1},{width:At,height:1}),e.RGBAImage.copy(xt,ye,{x:0,y:0},{x:Ge,y:nt+wt},{width:At,height:1}),e.RGBAImage.copy(xt,ye,{x:At-1,y:0},{x:Ge-1,y:nt},{width:1,height:wt}),e.RGBAImage.copy(xt,ye,{x:0,y:0},{x:Ge+At,y:nt},{width:1,height:wt})}this.dirty=!0},z.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},z.prototype.dispatchRenderCallbacks=function(F){for(var q=0,ae=F;q<ae.length;q+=1){var ue=ae[q];if(!this.callbackDispatchedThisFrame[ue]){this.callbackDispatchedThisFrame[ue]=!0;var de=this.images[ue];g(de)&&this.updateImage(ue,de)}}},z}(e.Evented),o=w,x=w,d=1e20;function w(C,z,F,q,ae,ue){this.fontSize=C||24,this.buffer=void 0===z?3:z,this.cutoff=q||.25,this.fontFamily=ae||"sans-serif",this.fontWeight=ue||"normal",this.radius=F||8;var de=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=de,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(de*de),this.gridInner=new Float64Array(de*de),this.f=new Float64Array(de),this.d=new Float64Array(de),this.z=new Float64Array(de+1),this.v=new Int16Array(de),this.middle=Math.round(de/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function _(C,z,F,q,ae,ue,de){for(var ye=0;ye<z;ye++){for(var Ae=0;Ae<F;Ae++)q[Ae]=C[Ae*z+ye];for(T(q,ae,ue,de,F),Ae=0;Ae<F;Ae++)C[Ae*z+ye]=ae[Ae]}for(Ae=0;Ae<F;Ae++){for(ye=0;ye<z;ye++)q[ye]=C[Ae*z+ye];for(T(q,ae,ue,de,z),ye=0;ye<z;ye++)C[Ae*z+ye]=Math.sqrt(ae[ye])}}function T(C,z,F,q,ae){F[0]=0,q[0]=-d,q[1]=+d;for(var ue=1,de=0;ue<ae;ue++){for(var ye=(C[ue]+ue*ue-(C[F[de]]+F[de]*F[de]))/(2*ue-2*F[de]);ye<=q[de];)de--,ye=(C[ue]+ue*ue-(C[F[de]]+F[de]*F[de]))/(2*ue-2*F[de]);F[++de]=ue,q[de]=ye,q[de+1]=+d}for(ue=0,de=0;ue<ae;ue++){for(;q[de+1]<ue;)de++;z[ue]=(ue-F[de])*(ue-F[de])+C[F[de]]}}w.prototype.draw=function(C){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(C,this.buffer,this.middle);for(var z=this.ctx.getImageData(0,0,this.size,this.size),F=new Uint8ClampedArray(this.size*this.size),q=0;q<this.size*this.size;q++){var ae=z.data[4*q+3]/255;this.gridOuter[q]=1===ae?0:0===ae?d:Math.pow(Math.max(0,.5-ae),2),this.gridInner[q]=1===ae?d:0===ae?0:Math.pow(Math.max(0,ae-.5),2)}for(_(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),_(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),q=0;q<this.size*this.size;q++)F[q]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[q]-this.gridInner[q])/this.radius+this.cutoff))));return F},o.default=x;var k=function(C,z){this.requestManager=C,this.localIdeographFontFamily=z,this.entries={}};k.prototype.setURL=function(C){this.url=C},k.prototype.getGlyphs=function(C,z){var F=this,q=[];for(var ae in C)for(var ue=0,de=C[ae];ue<de.length;ue+=1)q.push({stack:ae,id:de[ue]});e.asyncAll(q,function(Ae,Ue){var Ge=Ae.stack,nt=Ae.id,xt=F.entries[Ge];xt||(xt=F.entries[Ge]={glyphs:{},requests:{},ranges:{}});var At=xt.glyphs[nt];if(void 0===At){if(At=F._tinySDF(xt,Ge,nt))return xt.glyphs[nt]=At,void Ue(null,{stack:Ge,id:nt,glyph:At});var wt=Math.floor(nt/256);if(256*wt>65535)Ue(new Error("glyphs > 65535 not supported"));else if(xt.ranges[wt])Ue(null,{stack:Ge,id:nt,glyph:At});else{var Tt=xt.requests[wt];Tt||(Tt=xt.requests[wt]=[],k.loadGlyphRange(Ge,wt,F.url,F.requestManager,function(yt,Ft){if(Ft){for(var Ot in Ft)F._doesCharSupportLocalGlyph(+Ot)||(xt.glyphs[+Ot]=Ft[+Ot]);xt.ranges[wt]=!0}for(var Nt=0,er=Tt;Nt<er.length;Nt+=1)(0,er[Nt])(yt,Ft);delete xt.requests[wt]})),Tt.push(function(yt,Ft){yt?Ue(yt):Ft&&Ue(null,{stack:Ge,id:nt,glyph:Ft[nt]||null})})}}else Ue(null,{stack:Ge,id:nt,glyph:At})},function(Ae,Ue){if(Ae)z(Ae);else if(Ue){for(var Ge={},nt=0,xt=Ue;nt<xt.length;nt+=1){var At=xt[nt],wt=At.stack,Tt=At.id,yt=At.glyph;(Ge[wt]||(Ge[wt]={}))[Tt]=yt&&{id:yt.id,bitmap:yt.bitmap.clone(),metrics:yt.metrics}}z(null,Ge)}})},k.prototype._doesCharSupportLocalGlyph=function(C){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](C)||e.isChar["Hangul Syllables"](C)||e.isChar.Hiragana(C)||e.isChar.Katakana(C))},k.prototype._tinySDF=function(C,z,F){var q=this.localIdeographFontFamily;if(q&&this._doesCharSupportLocalGlyph(F)){var ae=C.tinySDF;if(!ae){var ue="400";/bold/i.test(z)?ue="900":/medium/i.test(z)?ue="500":/light/i.test(z)&&(ue="200"),ae=C.tinySDF=new k.TinySDF(24,3,8,.25,q,ue)}return{id:F,bitmap:new e.AlphaImage({width:30,height:30},ae.draw(String.fromCharCode(F))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},k.loadGlyphRange=function(C,z,F,q,ae){var ue=256*z,de=ue+255,ye=q.transformRequest(q.normalizeGlyphsURL(F).replace("{fontstack}",C).replace("{range}",ue+"-"+de),e.ResourceType.Glyphs);e.getArrayBuffer(ye,function(Ae,Ue){if(Ae)ae(Ae);else if(Ue){for(var Ge={},nt=0,xt=e.parseGlyphPBF(Ue);nt<xt.length;nt+=1){var At=xt[nt];Ge[At.id]=At}ae(null,Ge)}})},k.TinySDF=o;var L=function(){this.specification=e.styleSpec.light.position};L.prototype.possiblyEvaluate=function(C,z){return e.sphericalToCartesian(C.expression.evaluate(z))},L.prototype.interpolate=function(C,z,F){return{x:e.number(C.x,z.x,F),y:e.number(C.y,z.y,F),z:e.number(C.z,z.z,F)}};var M=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new L,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),O=function(C){function z(F){C.call(this),this._transitionable=new e.Transitionable(M),this.setLight(F),this._transitioning=this._transitionable.untransitioned()}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getLight=function(){return this._transitionable.serialize()},z.prototype.setLight=function(F,q){if(void 0===q&&(q={}),!this._validate(e.validateLight,F,q))for(var ae in F){var ue=F[ae];e.endsWith(ae,"-transition")?this._transitionable.setTransition(ae.slice(0,-"-transition".length),ue):this._transitionable.setValue(ae,ue)}},z.prototype.updateTransitions=function(F){this._transitioning=this._transitionable.transitioned(F,this._transitioning)},z.prototype.hasTransition=function(){return this._transitioning.hasTransition()},z.prototype.recalculate=function(F){this.properties=this._transitioning.possiblyEvaluate(F)},z.prototype._validate=function(F,q,ae){return(!ae||!1!==ae.validate)&&e.emitValidationErrors(this,F.call(e.validateStyle,e.extend({value:q,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},z}(e.Evented),P=function(C,z){this.width=C,this.height=z,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};P.prototype.getDash=function(C,z){var F=C.join(",")+String(z);return this.dashEntry[F]||(this.dashEntry[F]=this.addDash(C,z)),this.dashEntry[F]},P.prototype.getDashRanges=function(C,z,F){var q=[],ae=C.length%2==1?-C[C.length-1]*F:0,ue=C[0]*F,de=!0;q.push({left:ae,right:ue,isDash:de,zeroLength:0===C[0]});for(var ye=C[0],Ae=1;Ae<C.length;Ae++){var Ue=C[Ae];ae=ye*F,ue=(ye+=Ue)*F,q.push({left:ae,right:ue,isDash:de=!de,zeroLength:0===Ue})}return q},P.prototype.addRoundDash=function(C,z,F){for(var q=z/2,ae=-F;ae<=F;ae++)for(var de=this.width*(this.nextRow+F+ae),ye=0,Ae=C[ye],Ue=0;Ue<this.width;Ue++){Ue/Ae.right>1&&(Ae=C[++ye]);var Ge=Math.abs(Ue-Ae.left),nt=Math.abs(Ue-Ae.right),xt=Math.min(Ge,nt),At=void 0,wt=ae/F*(q+1);if(Ae.isDash){var Tt=q-Math.abs(wt);At=Math.sqrt(xt*xt+Tt*Tt)}else At=q-Math.sqrt(xt*xt+wt*wt);this.data[de+Ue]=Math.max(0,Math.min(255,At+128))}},P.prototype.addRegularDash=function(C){for(var z=C.length-1;z>=0;--z){var F=C[z],q=C[z+1];F.zeroLength?C.splice(z,1):q&&q.isDash===F.isDash&&(q.left=F.left,C.splice(z,1))}var ae=C[0],ue=C[C.length-1];ae.isDash===ue.isDash&&(ae.left=ue.left-this.width,ue.right=ae.right+this.width);for(var de=this.width*this.nextRow,ye=0,Ae=C[ye],Ue=0;Ue<this.width;Ue++){Ue/Ae.right>1&&(Ae=C[++ye]);var Ge=Math.abs(Ue-Ae.left),nt=Math.abs(Ue-Ae.right),xt=Math.min(Ge,nt);this.data[de+Ue]=Math.max(0,Math.min(255,(Ae.isDash?xt:-xt)+128))}},P.prototype.addDash=function(C,z){var F=z?7:0,q=2*F+1;if(this.nextRow+q>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var ae=0,ue=0;ue<C.length;ue++)ae+=C[ue];if(0!==ae){var de=this.width/ae,ye=this.getDashRanges(C,this.width,de);z?this.addRoundDash(ye,de,F):this.addRegularDash(ye)}var Ae={y:(this.nextRow+F+.5)/this.height,height:2*F/this.height,width:ae};return this.nextRow+=q,this.dirty=!0,Ae},P.prototype.bind=function(C){var z=C.gl;this.texture?(z.bindTexture(z.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,z.texSubImage2D(z.TEXTURE_2D,0,0,0,this.width,this.height,z.ALPHA,z.UNSIGNED_BYTE,this.data))):(this.texture=z.createTexture(),z.bindTexture(z.TEXTURE_2D,this.texture),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_S,z.REPEAT),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_WRAP_T,z.REPEAT),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MIN_FILTER,z.LINEAR),z.texParameteri(z.TEXTURE_2D,z.TEXTURE_MAG_FILTER,z.LINEAR),z.texImage2D(z.TEXTURE_2D,0,z.ALPHA,this.width,this.height,0,z.ALPHA,z.UNSIGNED_BYTE,this.data))};var S=function C(z,F){this.workerPool=z,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var q=this.workerPool.acquire(this.id),ae=0;ae<q.length;ae++){var de=new C.Actor(q[ae],F,this.id);de.name="Worker "+ae,this.actors.push(de)}};function E(C,z,F){var q=function(ae,ue){if(ae)return F(ae);if(ue){var de=e.pick(e.extend(ue,C),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ue.vector_layers&&(de.vectorLayers=ue.vector_layers,de.vectorLayerIds=de.vectorLayers.map(function(ye){return ye.id})),de.tiles=z.canonicalizeTileset(de,C.url),F(null,de)}};return C.url?e.getJSON(z.transformRequest(z.normalizeSourceURL(C.url),e.ResourceType.Source),q):e.browser.frame(function(){return q(null,C)})}S.prototype.broadcast=function(C,z,F){e.asyncAll(this.actors,function(q,ae){q.send(C,z,ae)},F=F||function(){})},S.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},S.prototype.remove=function(){this.actors.forEach(function(C){C.remove()}),this.actors=[],this.workerPool.release(this.id)},S.Actor=e.Actor;var R=function(C,z,F){this.bounds=e.LngLatBounds.convert(this.validateBounds(C)),this.minzoom=z||0,this.maxzoom=F||24};R.prototype.validateBounds=function(C){return Array.isArray(C)&&4===C.length?[Math.max(-180,C[0]),Math.max(-90,C[1]),Math.min(180,C[2]),Math.min(90,C[3])]:[-180,-90,180,90]},R.prototype.contains=function(C){var z=Math.pow(2,C.z),F=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*z),q=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*z),ae=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*z),ue=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*z);return C.x>=F&&C.x<ae&&C.y>=q&&C.y<ue};var B=function(C){function z(F,q,ae,ue){if(C.call(this),this.id=F,this.dispatcher=ae,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(q,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},q),this._collectResourceTiming=q.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ue)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.load=function(){var F=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,function(q,ae){F._tileJSONRequest=null,F._loaded=!0,q?F.fire(new e.ErrorEvent(q)):ae&&(e.extend(F,ae),ae.bounds&&(F.tileBounds=new R(ae.bounds,F.minzoom,F.maxzoom)),e.postTurnstileEvent(ae.tiles,F.map._requestManager._customAccessToken),e.postMapLoadEvent(ae.tiles,F.map._getMapId(),F.map._requestManager._skuToken,F.map._requestManager._customAccessToken),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},z.prototype.loaded=function(){return this._loaded},z.prototype.hasTile=function(F){return!this.tileBounds||this.tileBounds.contains(F.canonical)},z.prototype.onAdd=function(F){this.map=F,this.load()},z.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},z.prototype.serialize=function(){return e.extend({},this._options)},z.prototype.loadTile=function(F,q){var ae=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme)),ue={request:this.map._requestManager.transformRequest(ae,e.ResourceType.Tile),uid:F.uid,tileID:F.tileID,zoom:F.tileID.overscaledZ,tileSize:this.tileSize*F.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function de(ye,Ae){return delete F.request,F.aborted?q(null):ye&&404!==ye.status?q(ye):(Ae&&Ae.resourceTiming&&(F.resourceTiming=Ae.resourceTiming),this.map._refreshExpiredTiles&&Ae&&F.setExpiryData(Ae),F.loadVectorData(Ae,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),q(null),void(F.reloadCallback&&(this.loadTile(F,F.reloadCallback),F.reloadCallback=null)))}ue.request.collectResourceTiming=this._collectResourceTiming,F.actor&&"expired"!==F.state?"loading"===F.state?F.reloadCallback=q:F.request=F.actor.send("reloadTile",ue,de.bind(this)):(F.actor=this.dispatcher.getActor(),F.request=F.actor.send("loadTile",ue,de.bind(this)))},z.prototype.abortTile=function(F){F.request&&(F.request.cancel(),delete F.request),F.actor&&F.actor.send("abortTile",{uid:F.uid,type:this.type,source:this.id},void 0)},z.prototype.unloadTile=function(F){F.unloadVectorData(),F.actor&&F.actor.send("removeTile",{uid:F.uid,type:this.type,source:this.id},void 0)},z.prototype.hasTransition=function(){return!1},z}(e.Evented),H=function(C){function z(F,q,ae,ue){C.call(this),this.id=F,this.dispatcher=ae,this.setEventedParent(ue),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},q),e.extend(this,e.pick(q,["url","scheme","tileSize"]))}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.load=function(){var F=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,function(q,ae){F._tileJSONRequest=null,F._loaded=!0,q?F.fire(new e.ErrorEvent(q)):ae&&(e.extend(F,ae),ae.bounds&&(F.tileBounds=new R(ae.bounds,F.minzoom,F.maxzoom)),e.postTurnstileEvent(ae.tiles),e.postMapLoadEvent(ae.tiles,F.map._getMapId(),F.map._requestManager._skuToken),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),F.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},z.prototype.loaded=function(){return this._loaded},z.prototype.onAdd=function(F){this.map=F,this.load()},z.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},z.prototype.serialize=function(){return e.extend({},this._options)},z.prototype.hasTile=function(F){return!this.tileBounds||this.tileBounds.contains(F.canonical)},z.prototype.loadTile=function(F,q){var ae=this,ue=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);F.request=e.getImage(this.map._requestManager.transformRequest(ue,e.ResourceType.Tile),function(de,ye){if(delete F.request,F.aborted)F.state="unloaded",q(null);else if(de)F.state="errored",q(de);else if(ye){ae.map._refreshExpiredTiles&&F.setExpiryData(ye),delete ye.cacheControl,delete ye.expires;var Ae=ae.map.painter.context,Ue=Ae.gl;F.texture=ae.map.painter.getTileTexture(ye.width),F.texture?F.texture.update(ye,{useMipmap:!0}):(F.texture=new e.Texture(Ae,ye,Ue.RGBA,{useMipmap:!0}),F.texture.bind(Ue.LINEAR,Ue.CLAMP_TO_EDGE,Ue.LINEAR_MIPMAP_NEAREST),Ae.extTextureFilterAnisotropic&&Ue.texParameterf(Ue.TEXTURE_2D,Ae.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ae.extTextureFilterAnisotropicMax)),F.state="loaded",e.cacheEntryPossiblyAdded(ae.dispatcher),q(null)}})},z.prototype.abortTile=function(F,q){F.request&&(F.request.cancel(),delete F.request),q()},z.prototype.unloadTile=function(F,q){F.texture&&this.map.painter.saveTileTexture(F.texture),q()},z.prototype.hasTransition=function(){return!1},z}(e.Evented),V=function(C){function z(F,q,ae,ue){C.call(this,F,q,ae,ue),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},q),this.encoding=q.encoding||"mapbox"}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},z.prototype.loadTile=function(F,q){var ae=this.map._requestManager.normalizeTileURL(F.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function ue(de,ye){de&&(F.state="errored",q(de)),ye&&(F.dem=ye,F.needsHillshadePrepare=!0,F.state="loaded",q(null))}F.request=e.getImage(this.map._requestManager.transformRequest(ae,e.ResourceType.Tile),function(de,ye){if(delete F.request,F.aborted)F.state="unloaded",q(null);else if(de)F.state="errored",q(de);else if(ye){this.map._refreshExpiredTiles&&F.setExpiryData(ye),delete ye.cacheControl,delete ye.expires;var Ae=e.window.ImageBitmap&&ye instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?ye:e.browser.getImageData(ye,1),Ue={uid:F.uid,coord:F.tileID,source:this.id,rawImageData:Ae,encoding:this.encoding};F.actor&&"expired"!==F.state||(F.actor=this.dispatcher.getActor(),F.actor.send("loadDEMTile",Ue,ue.bind(this)))}}.bind(this)),F.neighboringTiles=this._getNeighboringTiles(F.tileID)},z.prototype._getNeighboringTiles=function(F){var q=F.canonical,ae=Math.pow(2,q.z),ue=(q.x-1+ae)%ae,de=0===q.x?F.wrap-1:F.wrap,ye=(q.x+1+ae)%ae,Ae=q.x+1===ae?F.wrap+1:F.wrap,Ue={};return Ue[new e.OverscaledTileID(F.overscaledZ,de,q.z,ue,q.y).key]={backfilled:!1},Ue[new e.OverscaledTileID(F.overscaledZ,Ae,q.z,ye,q.y).key]={backfilled:!1},q.y>0&&(Ue[new e.OverscaledTileID(F.overscaledZ,de,q.z,ue,q.y-1).key]={backfilled:!1},Ue[new e.OverscaledTileID(F.overscaledZ,F.wrap,q.z,q.x,q.y-1).key]={backfilled:!1},Ue[new e.OverscaledTileID(F.overscaledZ,Ae,q.z,ye,q.y-1).key]={backfilled:!1}),q.y+1<ae&&(Ue[new e.OverscaledTileID(F.overscaledZ,de,q.z,ue,q.y+1).key]={backfilled:!1},Ue[new e.OverscaledTileID(F.overscaledZ,F.wrap,q.z,q.x,q.y+1).key]={backfilled:!1},Ue[new e.OverscaledTileID(F.overscaledZ,Ae,q.z,ye,q.y+1).key]={backfilled:!1}),Ue},z.prototype.unloadTile=function(F){F.demTexture&&this.map.painter.saveTileTexture(F.demTexture),F.fbo&&(F.fbo.destroy(),delete F.fbo),F.dem&&delete F.dem,delete F.neighboringTiles,F.state="unloaded",F.actor&&F.actor.send("removeDEMTile",{uid:F.uid,source:this.id})},z}(H),Z=function(C){function z(F,q,ae,ue){C.call(this),this.id=F,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ae.getActor(),this.setEventedParent(ue),this._data=q.data,this._options=e.extend({},q),this._collectResourceTiming=q.collectResourceTiming,this._resourceTiming=[],void 0!==q.maxzoom&&(this.maxzoom=q.maxzoom),q.type&&(this.type=q.type),q.attribution&&(this.attribution=q.attribution),this.promoteId=q.promoteId;var de=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:q.cluster||!1,geojsonVtOptions:{buffer:(void 0!==q.buffer?q.buffer:128)*de,tolerance:(void 0!==q.tolerance?q.tolerance:.375)*de,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:q.lineMetrics||!1,generateId:q.generateId||!1},superclusterOptions:{maxZoom:void 0!==q.clusterMaxZoom?Math.min(q.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(q.clusterRadius||50)*de,log:!1,generateId:q.generateId||!1},clusterProperties:q.clusterProperties},q.workerOptions)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.load=function(){var F=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(q){if(q)F.fire(new e.ErrorEvent(q));else{var ae={dataType:"source",sourceDataType:"metadata"};F._collectResourceTiming&&F._resourceTiming&&F._resourceTiming.length>0&&(ae.resourceTiming=F._resourceTiming,F._resourceTiming=[]),F.fire(new e.Event("data",ae))}})},z.prototype.onAdd=function(F){this.map=F,this.load()},z.prototype.setData=function(F){var q=this;return this._data=F,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ae){if(ae)q.fire(new e.ErrorEvent(ae));else{var ue={dataType:"source",sourceDataType:"content"};q._collectResourceTiming&&q._resourceTiming&&q._resourceTiming.length>0&&(ue.resourceTiming=q._resourceTiming,q._resourceTiming=[]),q.fire(new e.Event("data",ue))}}),this},z.prototype.getClusterExpansionZoom=function(F,q){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:F,source:this.id},q),this},z.prototype.getClusterChildren=function(F,q){return this.actor.send("geojson.getClusterChildren",{clusterId:F,source:this.id},q),this},z.prototype.getClusterLeaves=function(F,q,ae,ue){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:F,limit:q,offset:ae},ue),this},z.prototype._updateWorkerData=function(F){var q=this;this._loaded=!1;var ae=e.extend({},this.workerOptions),ue=this._data;"string"==typeof ue?(ae.request=this.map._requestManager.transformRequest(e.browser.resolveURL(ue),e.ResourceType.Source),ae.request.collectResourceTiming=this._collectResourceTiming):ae.data=JSON.stringify(ue),this.actor.send(this.type+".loadData",ae,function(de,ye){q._removed||ye&&ye.abandoned||(q._loaded=!0,ye&&ye.resourceTiming&&ye.resourceTiming[q.id]&&(q._resourceTiming=ye.resourceTiming[q.id].slice(0)),q.actor.send(q.type+".coalesce",{source:ae.source},null),F(de))})},z.prototype.loaded=function(){return this._loaded},z.prototype.loadTile=function(F,q){var ae=this,ue=F.actor?"reloadTile":"loadTile";F.actor=this.actor,F.request=this.actor.send(ue,{type:this.type,uid:F.uid,tileID:F.tileID,zoom:F.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(ye,Ae){return delete F.request,F.unloadVectorData(),F.aborted?q(null):ye?q(ye):(F.loadVectorData(Ae,ae.map.painter,"reloadTile"===ue),q(null))})},z.prototype.abortTile=function(F){F.request&&(F.request.cancel(),delete F.request),F.aborted=!0},z.prototype.unloadTile=function(F){F.unloadVectorData(),this.actor.send("removeTile",{uid:F.uid,type:this.type,source:this.id})},z.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},z.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},z.prototype.hasTransition=function(){return!1},z}(e.Evented),W=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),G=function(C){function z(F,q,ae,ue){C.call(this),this.id=F,this.dispatcher=ae,this.coordinates=q.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ue),this.options=q}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.load=function(F,q){var ae=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(ue,de){ae._loaded=!0,ue?ae.fire(new e.ErrorEvent(ue)):de&&(ae.image=de,F&&(ae.coordinates=F),q&&q(),ae._finishLoading())})},z.prototype.loaded=function(){return this._loaded},z.prototype.updateImage=function(F){var q=this;return this.image&&F.url?(this.options.url=F.url,this.load(F.coordinates,function(){q.texture=null}),this):this},z.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},z.prototype.onAdd=function(F){this.map=F,this.load()},z.prototype.setCoordinates=function(F){var q=this;this.coordinates=F;var ae=F.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(de){for(var ye=1/0,Ae=1/0,Ue=-1/0,Ge=-1/0,nt=0,xt=de;nt<xt.length;nt+=1){var At=xt[nt];ye=Math.min(ye,At.x),Ae=Math.min(Ae,At.y),Ue=Math.max(Ue,At.x),Ge=Math.max(Ge,At.y)}var yt=Math.max(Ue-ye,Ge-Ae),Ft=Math.max(0,Math.floor(-Math.log(yt)/Math.LN2)),Ot=Math.pow(2,Ft);return new e.CanonicalTileID(Ft,Math.floor((ye+Ue)/2*Ot),Math.floor((Ae+Ge)/2*Ot))}(ae),this.minzoom=this.maxzoom=this.tileID.z;var ue=ae.map(function(de){return q.tileID.getTilePoint(de)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(ue[0].x,ue[0].y,0,0),this._boundsArray.emplaceBack(ue[1].x,ue[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(ue[3].x,ue[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(ue[2].x,ue[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},z.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var F=this.map.painter.context,q=F.gl;for(var ae in this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(F,this.image,q.RGBA),this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE)),this.tiles){var ue=this.tiles[ae];"loaded"!==ue.state&&(ue.state="loaded",ue.texture=this.texture)}}},z.prototype.loadTile=function(F,q){this.tileID&&this.tileID.equals(F.tileID.canonical)?(this.tiles[String(F.tileID.wrap)]=F,F.buckets={},q(null)):(F.state="errored",q(null))},z.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},z.prototype.hasTransition=function(){return!1},z}(e.Evented),X=function(C){function z(F,q,ae,ue){C.call(this,F,q,ae,ue),this.roundZoom=!0,this.type="video",this.options=q}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.load=function(){var F=this;this._loaded=!1;var q=this.options;this.urls=[];for(var ae=0,ue=q.urls;ae<ue.length;ae+=1)this.urls.push(this.map._requestManager.transformRequest(ue[ae],e.ResourceType.Source).url);e.getVideo(this.urls,function(ye,Ae){F._loaded=!0,ye?F.fire(new e.ErrorEvent(ye)):Ae&&(F.video=Ae,F.video.loop=!0,F.video.addEventListener("playing",function(){F.map.triggerRepaint()}),F.map&&F.video.play(),F._finishLoading())})},z.prototype.pause=function(){this.video&&this.video.pause()},z.prototype.play=function(){this.video&&this.video.play()},z.prototype.seek=function(F){if(this.video){var q=this.video.seekable;F<q.start(0)||F>q.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+q.start(0)+" and "+q.end(0)+"-second mark."))):this.video.currentTime=F}},z.prototype.getVideo=function(){return this.video},z.prototype.onAdd=function(F){this.map||(this.map=F,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},z.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var F=this.map.painter.context,q=F.gl;for(var ae in this.boundsBuffer||(this.boundsBuffer=F.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE),q.texSubImage2D(q.TEXTURE_2D,0,0,0,q.RGBA,q.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(F,this.video,q.RGBA),this.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE)),this.tiles){var ue=this.tiles[ae];"loaded"!==ue.state&&(ue.state="loaded",ue.texture=this.texture)}}},z.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},z.prototype.hasTransition=function(){return this.video&&!this.video.paused},z}(G),te=function(C){function z(F,q,ae,ue){C.call(this,F,q,ae,ue),q.coordinates?Array.isArray(q.coordinates)&&4===q.coordinates.length&&!q.coordinates.some(function(de){return!Array.isArray(de)||2!==de.length||de.some(function(ye){return"number"!=typeof ye})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'missing required property "coordinates"'))),q.animate&&"boolean"!=typeof q.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'optional "animate" property must be a boolean value'))),q.canvas?"string"==typeof q.canvas||q.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+F,null,'missing required property "canvas"'))),this.options=q,this.animate=void 0===q.animate||q.animate}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},z.prototype.getCanvas=function(){return this.canvas},z.prototype.onAdd=function(F){this.map=F,this.load(),this.canvas&&this.animate&&this.play()},z.prototype.onRemove=function(){this.pause()},z.prototype.prepare=function(){var F=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,F=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,F=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var q=this.map.painter.context,ae=q.gl;for(var ue in this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(F||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(q,this.canvas,ae.RGBA,{premultiply:!0}),this.tiles){var de=this.tiles[ue];"loaded"!==de.state&&(de.state="loaded",de.texture=this.texture)}}},z.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},z.prototype.hasTransition=function(){return this._playing},z.prototype._hasInvalidDimensions=function(){for(var F=0,q=[this.canvas.width,this.canvas.height];F<q.length;F+=1){var ae=q[F];if(isNaN(ae)||ae<=0)return!0}return!1},z}(G),D={vector:B,raster:H,"raster-dem":V,geojson:Z,video:X,image:G,canvas:te};function N(C,z){var F=e.identity([]);return e.translate(F,F,[1,1,0]),e.scale(F,F,[.5*C.width,.5*C.height,1]),e.multiply(F,F,C.calculatePosMatrix(z.toUnwrapped()))}function U(C,z,F,q,ae,ue){var de=function(Tt,yt,Ft){if(Tt)for(var Ot=0,Nt=Tt;Ot<Nt.length;Ot+=1){var er=yt[Nt[Ot]];if(er&&er.source===Ft&&"fill-extrusion"===er.type)return!0}else for(var fr in yt){var Tr=yt[fr];if(Tr.source===Ft&&"fill-extrusion"===Tr.type)return!0}return!1}(ae&&ae.layers,z,C.id),ye=ue.maxPitchScaleFactor(),Ae=C.tilesIn(q,ye,de);Ae.sort(Q);for(var Ue=[],Ge=0,nt=Ae;Ge<nt.length;Ge+=1){var xt=nt[Ge];Ue.push({wrappedTileID:xt.tileID.wrapped().key,queryResults:xt.tile.queryRenderedFeatures(z,F,C._state,xt.queryGeometry,xt.cameraQueryGeometry,xt.scale,ae,ue,ye,N(C.transform,xt.tileID))})}var At=function(Tt){for(var yt={},Ft={},Ot=0,Nt=Tt;Ot<Nt.length;Ot+=1){var er=Nt[Ot],fr=er.queryResults,Tr=er.wrappedTileID,wr=Ft[Tr]=Ft[Tr]||{};for(var Zr in fr)for(var Xr=fr[Zr],fn=wr[Zr]=wr[Zr]||{},rn=yt[Zr]=yt[Zr]||[],Nn=0,Gn=Xr;Nn<Gn.length;Nn+=1){var oi=Gn[Nn];fn[oi.featureIndex]||(fn[oi.featureIndex]=!0,rn.push(oi))}}return yt}(Ue);for(var wt in At)At[wt].forEach(function(Tt){var yt=Tt.feature,Ft=C.getFeatureState(yt.layer["source-layer"],yt.id);yt.source=yt.layer.source,yt.layer["source-layer"]&&(yt.sourceLayer=yt.layer["source-layer"]),yt.state=Ft});return At}function Q(C,z){var F=C.tileID,q=z.tileID;return F.overscaledZ-q.overscaledZ||F.canonical.y-q.canonical.y||F.wrap-q.wrap||F.canonical.x-q.canonical.x}var j=function(C,z){this.max=C,this.onRemove=z,this.reset()};j.prototype.reset=function(){for(var C in this.data)for(var z=0,F=this.data[C];z<F.length;z+=1){var q=F[z];q.timeout&&clearTimeout(q.timeout),this.onRemove(q.value)}return this.data={},this.order=[],this},j.prototype.add=function(C,z,F){var q=this,ae=C.wrapped().key;void 0===this.data[ae]&&(this.data[ae]=[]);var ue={value:z,timeout:void 0};if(void 0!==F&&(ue.timeout=setTimeout(function(){q.remove(C,ue)},F)),this.data[ae].push(ue),this.order.push(ae),this.order.length>this.max){var de=this._getAndRemoveByKey(this.order[0]);de&&this.onRemove(de)}return this},j.prototype.has=function(C){return C.wrapped().key in this.data},j.prototype.getAndRemove=function(C){return this.has(C)?this._getAndRemoveByKey(C.wrapped().key):null},j.prototype._getAndRemoveByKey=function(C){var z=this.data[C].shift();return z.timeout&&clearTimeout(z.timeout),0===this.data[C].length&&delete this.data[C],this.order.splice(this.order.indexOf(C),1),z.value},j.prototype.getByKey=function(C){var z=this.data[C];return z?z[0].value:null},j.prototype.get=function(C){return this.has(C)?this.data[C.wrapped().key][0].value:null},j.prototype.remove=function(C,z){if(!this.has(C))return this;var F=C.wrapped().key,q=void 0===z?0:this.data[F].indexOf(z),ae=this.data[F][q];return this.data[F].splice(q,1),ae.timeout&&clearTimeout(ae.timeout),0===this.data[F].length&&delete this.data[F],this.onRemove(ae.value),this.order.splice(this.order.indexOf(F),1),this},j.prototype.setMaxSize=function(C){for(this.max=C;this.order.length>this.max;){var z=this._getAndRemoveByKey(this.order[0]);z&&this.onRemove(z)}return this},j.prototype.filter=function(C){var z=[];for(var F in this.data)for(var q=0,ae=this.data[F];q<ae.length;q+=1){var ue=ae[q];C(ue.value)||z.push(ue)}for(var de=0,ye=z;de<ye.length;de+=1){var Ae=ye[de];this.remove(Ae.value.tileID,Ae)}};var J=function(C,z,F){this.context=C;var q=C.gl;this.buffer=q.createBuffer(),this.dynamicDraw=Boolean(F),this.context.unbindVAO(),C.bindElementBuffer.set(this.buffer),q.bufferData(q.ELEMENT_ARRAY_BUFFER,z.arrayBuffer,this.dynamicDraw?q.DYNAMIC_DRAW:q.STATIC_DRAW),this.dynamicDraw||delete z.arrayBuffer};J.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},J.prototype.updateData=function(C){var z=this.context.gl;this.context.unbindVAO(),this.bind(),z.bufferSubData(z.ELEMENT_ARRAY_BUFFER,0,C.arrayBuffer)},J.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var K={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},re=function(C,z,F,q){this.length=z.length,this.attributes=F,this.itemSize=z.bytesPerElement,this.dynamicDraw=q,this.context=C;var ae=C.gl;this.buffer=ae.createBuffer(),C.bindVertexBuffer.set(this.buffer),ae.bufferData(ae.ARRAY_BUFFER,z.arrayBuffer,this.dynamicDraw?ae.DYNAMIC_DRAW:ae.STATIC_DRAW),this.dynamicDraw||delete z.arrayBuffer};re.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},re.prototype.updateData=function(C){var z=this.context.gl;this.bind(),z.bufferSubData(z.ARRAY_BUFFER,0,C.arrayBuffer)},re.prototype.enableAttributes=function(C,z){for(var F=0;F<this.attributes.length;F++){var ae=z.attributes[this.attributes[F].name];void 0!==ae&&C.enableVertexAttribArray(ae)}},re.prototype.setVertexAttribPointers=function(C,z,F){for(var q=0;q<this.attributes.length;q++){var ae=this.attributes[q],ue=z.attributes[ae.name];void 0!==ue&&C.vertexAttribPointer(ue,ae.components,C[K[ae.type]],!1,this.itemSize,ae.offset+this.itemSize*(F||0))}},re.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ne=function(C){this.gl=C.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ne.prototype.get=function(){return this.current},ne.prototype.set=function(C){},ne.prototype.getDefault=function(){return this.default},ne.prototype.setDefault=function(){this.set(this.default)};var se=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return e.Color.transparent},z.prototype.set=function(F){var q=this.current;(F.r!==q.r||F.g!==q.g||F.b!==q.b||F.a!==q.a||this.dirty)&&(this.gl.clearColor(F.r,F.g,F.b,F.a),this.current=F,this.dirty=!1)},z}(ne),oe=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return 1},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.clearDepth(F),this.current=F,this.dirty=!1)},z}(ne),pe=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return 0},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.clearStencil(F),this.current=F,this.dirty=!1)},z}(ne),ce=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return[!0,!0,!0,!0]},z.prototype.set=function(F){var q=this.current;(F[0]!==q[0]||F[1]!==q[1]||F[2]!==q[2]||F[3]!==q[3]||this.dirty)&&(this.gl.colorMask(F[0],F[1],F[2],F[3]),this.current=F,this.dirty=!1)},z}(ne),ge=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return!0},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.depthMask(F),this.current=F,this.dirty=!1)},z}(ne),xe=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return 255},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.stencilMask(F),this.current=F,this.dirty=!1)},z}(ne),we=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},z.prototype.set=function(F){var q=this.current;(F.func!==q.func||F.ref!==q.ref||F.mask!==q.mask||this.dirty)&&(this.gl.stencilFunc(F.func,F.ref,F.mask),this.current=F,this.dirty=!1)},z}(ne),be=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){var F=this.gl;return[F.KEEP,F.KEEP,F.KEEP]},z.prototype.set=function(F){var q=this.current;(F[0]!==q[0]||F[1]!==q[1]||F[2]!==q[2]||this.dirty)&&(this.gl.stencilOp(F[0],F[1],F[2]),this.current=F,this.dirty=!1)},z}(ne),Se=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;F?q.enable(q.STENCIL_TEST):q.disable(q.STENCIL_TEST),this.current=F,this.dirty=!1}},z}(ne),fe=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return[0,1]},z.prototype.set=function(F){var q=this.current;(F[0]!==q[0]||F[1]!==q[1]||this.dirty)&&(this.gl.depthRange(F[0],F[1]),this.current=F,this.dirty=!1)},z}(ne),me=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;F?q.enable(q.DEPTH_TEST):q.disable(q.DEPTH_TEST),this.current=F,this.dirty=!1}},z}(ne),Te=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.LESS},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.depthFunc(F),this.current=F,this.dirty=!1)},z}(ne),_e=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;F?q.enable(q.BLEND):q.disable(q.BLEND),this.current=F,this.dirty=!1}},z}(ne),Me=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){var F=this.gl;return[F.ONE,F.ZERO]},z.prototype.set=function(F){var q=this.current;(F[0]!==q[0]||F[1]!==q[1]||this.dirty)&&(this.gl.blendFunc(F[0],F[1]),this.current=F,this.dirty=!1)},z}(ne),Ie=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return e.Color.transparent},z.prototype.set=function(F){var q=this.current;(F.r!==q.r||F.g!==q.g||F.b!==q.b||F.a!==q.a||this.dirty)&&(this.gl.blendColor(F.r,F.g,F.b,F.a),this.current=F,this.dirty=!1)},z}(ne),ze=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.FUNC_ADD},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.blendEquation(F),this.current=F,this.dirty=!1)},z}(ne),Ve=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;F?q.enable(q.CULL_FACE):q.disable(q.CULL_FACE),this.current=F,this.dirty=!1}},z}(ne),Je=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.BACK},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.cullFace(F),this.current=F,this.dirty=!1)},z}(ne),De=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.CCW},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.frontFace(F),this.current=F,this.dirty=!1)},z}(ne),Be=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.useProgram(F),this.current=F,this.dirty=!1)},z}(ne),Ze=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return this.gl.TEXTURE0},z.prototype.set=function(F){(F!==this.current||this.dirty)&&(this.gl.activeTexture(F),this.current=F,this.dirty=!1)},z}(ne),Ye=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){var F=this.gl;return[0,0,F.drawingBufferWidth,F.drawingBufferHeight]},z.prototype.set=function(F){var q=this.current;(F[0]!==q[0]||F[1]!==q[1]||F[2]!==q[2]||F[3]!==q[3]||this.dirty)&&(this.gl.viewport(F[0],F[1],F[2],F[3]),this.current=F,this.dirty=!1)},z}(ne),tt=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;q.bindFramebuffer(q.FRAMEBUFFER,F),this.current=F,this.dirty=!1}},z}(ne),st=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;q.bindRenderbuffer(q.RENDERBUFFER,F),this.current=F,this.dirty=!1}},z}(ne),vt=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;q.bindTexture(q.TEXTURE_2D,F),this.current=F,this.dirty=!1}},z}(ne),Pt=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;q.bindBuffer(q.ARRAY_BUFFER,F),this.current=F,this.dirty=!1}},z}(ne),Mt=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(F){var q=this.gl;q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,F),this.current=F,this.dirty=!1},z}(ne),rt=function(C){function z(F){C.call(this,F),this.vao=F.extVertexArrayObject}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z.prototype.set=function(F){this.vao&&(F!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(F),this.current=F,this.dirty=!1)},z}(ne),et=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return 4},z.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;q.pixelStorei(q.UNPACK_ALIGNMENT,F),this.current=F,this.dirty=!1}},z}(ne),bt=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;q.pixelStorei(q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,F),this.current=F,this.dirty=!1}},z}(ne),Rt=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return!1},z.prototype.set=function(F){if(F!==this.current||this.dirty){var q=this.gl;q.pixelStorei(q.UNPACK_FLIP_Y_WEBGL,F),this.current=F,this.dirty=!1}},z}(ne),Yt=function(C){function z(F,q){C.call(this,F),this.context=F,this.parent=q}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getDefault=function(){return null},z}(ne),Fe=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.setDirty=function(){this.dirty=!0},z.prototype.set=function(F){if(F!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var q=this.gl;q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,F,0),this.current=F,this.dirty=!1}},z}(Yt),He=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.set=function(F){if(F!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var q=this.gl;q.framebufferRenderbuffer(q.FRAMEBUFFER,q.DEPTH_ATTACHMENT,q.RENDERBUFFER,F),this.current=F,this.dirty=!1}},z}(Yt),Oe=function(C,z,F,q){this.context=C,this.width=z,this.height=F;var ue=this.framebuffer=C.gl.createFramebuffer();this.colorAttachment=new Fe(C,ue),q&&(this.depthAttachment=new He(C,ue))};Oe.prototype.destroy=function(){var C=this.context.gl,z=this.colorAttachment.get();if(z&&C.deleteTexture(z),this.depthAttachment){var F=this.depthAttachment.get();F&&C.deleteRenderbuffer(F)}C.deleteFramebuffer(this.framebuffer)};var $e=function(C,z,F){this.func=C,this.mask=z,this.range=F};$e.ReadOnly=!1,$e.ReadWrite=!0,$e.disabled=new $e(519,$e.ReadOnly,[0,1]);var ke=function(C,z,F,q,ae,ue){this.test=C,this.ref=z,this.mask=F,this.fail=q,this.depthFail=ae,this.pass=ue};ke.disabled=new ke({func:519,mask:0},0,0,7680,7680,7680);var Le=function(C,z,F){this.blendFunction=C,this.blendColor=z,this.mask=F};Le.disabled=new Le(Le.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),Le.unblended=new Le(Le.Replace,e.Color.transparent,[!0,!0,!0,!0]),Le.alphaBlended=new Le([1,771],e.Color.transparent,[!0,!0,!0,!0]);var Pe=function(C,z,F){this.enable=C,this.mode=z,this.frontFace=F};Pe.disabled=new Pe(!1,1029,2305),Pe.backCCW=new Pe(!0,1029,2305);var Ce=function(C){this.gl=C,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new se(this),this.clearDepth=new oe(this),this.clearStencil=new pe(this),this.colorMask=new ce(this),this.depthMask=new ge(this),this.stencilMask=new xe(this),this.stencilFunc=new we(this),this.stencilOp=new be(this),this.stencilTest=new Se(this),this.depthRange=new fe(this),this.depthTest=new me(this),this.depthFunc=new Te(this),this.blend=new _e(this),this.blendFunc=new Me(this),this.blendColor=new Ie(this),this.blendEquation=new ze(this),this.cullFace=new Ve(this),this.cullFaceSide=new Je(this),this.frontFace=new De(this),this.program=new Be(this),this.activeTexture=new Ze(this),this.viewport=new Ye(this),this.bindFramebuffer=new tt(this),this.bindRenderbuffer=new st(this),this.bindTexture=new vt(this),this.bindVertexBuffer=new Pt(this),this.bindElementBuffer=new Mt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new rt(this),this.pixelStoreUnpack=new et(this),this.pixelStoreUnpackPremultiplyAlpha=new bt(this),this.pixelStoreUnpackFlipY=new Rt(this),this.extTextureFilterAnisotropic=C.getExtension("EXT_texture_filter_anisotropic")||C.getExtension("MOZ_EXT_texture_filter_anisotropic")||C.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=C.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=C.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(C.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=C.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=C.getExtension("EXT_disjoint_timer_query")};Ce.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ce.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ce.prototype.createIndexBuffer=function(C,z){return new J(this,C,z)},Ce.prototype.createVertexBuffer=function(C,z,F){return new re(this,C,z,F)},Ce.prototype.createRenderbuffer=function(C,z,F){var q=this.gl,ae=q.createRenderbuffer();return this.bindRenderbuffer.set(ae),q.renderbufferStorage(q.RENDERBUFFER,C,z,F),this.bindRenderbuffer.set(null),ae},Ce.prototype.createFramebuffer=function(C,z,F){return new Oe(this,C,z,F)},Ce.prototype.clear=function(C){var z=C.color,F=C.depth,q=this.gl,ae=0;z&&(ae|=q.COLOR_BUFFER_BIT,this.clearColor.set(z),this.colorMask.set([!0,!0,!0,!0])),void 0!==F&&(ae|=q.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(F),this.depthMask.set(!0)),q.clear(ae)},Ce.prototype.setCullFace=function(C){!1===C.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(C.mode),this.frontFace.set(C.frontFace))},Ce.prototype.setDepthMode=function(C){C.func!==this.gl.ALWAYS||C.mask?(this.depthTest.set(!0),this.depthFunc.set(C.func),this.depthMask.set(C.mask),this.depthRange.set(C.range)):this.depthTest.set(!1)},Ce.prototype.setStencilMode=function(C){C.test.func!==this.gl.ALWAYS||C.mask?(this.stencilTest.set(!0),this.stencilMask.set(C.mask),this.stencilOp.set([C.fail,C.depthFail,C.pass]),this.stencilFunc.set({func:C.test.func,ref:C.ref,mask:C.test.mask})):this.stencilTest.set(!1)},Ce.prototype.setColorMode=function(C){e.deepEqual(C.blendFunction,Le.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(C.blendFunction),this.blendColor.set(C.blendColor)),this.colorMask.set(C.mask)},Ce.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Xe=function(C){function z(F,q,ae){var ue=this;C.call(this),this.id=F,this.dispatcher=ae,this.on("data",function(de){"source"===de.dataType&&"metadata"===de.sourceDataType&&(ue._sourceLoaded=!0),ue._sourceLoaded&&!ue._paused&&"source"===de.dataType&&"content"===de.sourceDataType&&(ue.reload(),ue.transform&&ue.update(ue.transform))}),this.on("error",function(){ue._sourceErrored=!0}),this._source=function(de,ye,Ae,Ue){var Ge=new D[ye.type](de,ye,Ae,Ue);if(Ge.id!==de)throw new Error("Expected Source id to be "+de+" instead of "+Ge.id);return e.bindAll(["load","abort","unload","serialize","prepare"],Ge),Ge}(F,q,ae,this),this._tiles={},this._cache=new j(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.onAdd=function(F){this.map=F,this._maxTileCacheSize=F?F._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(F)},z.prototype.onRemove=function(F){this._source&&this._source.onRemove&&this._source.onRemove(F)},z.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var F in this._tiles){var q=this._tiles[F];if("loaded"!==q.state&&"errored"!==q.state)return!1}return!0},z.prototype.getSource=function(){return this._source},z.prototype.pause=function(){this._paused=!0},z.prototype.resume=function(){if(this._paused){var F=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,F&&this.reload(),this.transform&&this.update(this.transform)}},z.prototype._loadTile=function(F,q){return this._source.loadTile(F,q)},z.prototype._unloadTile=function(F){if(this._source.unloadTile)return this._source.unloadTile(F,function(){})},z.prototype._abortTile=function(F){if(this._source.abortTile)return this._source.abortTile(F,function(){})},z.prototype.serialize=function(){return this._source.serialize()},z.prototype.prepare=function(F){for(var q in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var ae=this._tiles[q];ae.upload(F),ae.prepare(this.map.style.imageManager)}},z.prototype.getIds=function(){return e.values(this._tiles).map(function(F){return F.tileID}).sort(at).map(function(F){return F.key})},z.prototype.getRenderableIds=function(F){var q=this,ae=[];for(var ue in this._tiles)this._isIdRenderable(ue,F)&&ae.push(this._tiles[ue]);return F?ae.sort(function(de,ye){var Ae=de.tileID,Ue=ye.tileID,Ge=new e.Point(Ae.canonical.x,Ae.canonical.y)._rotate(q.transform.angle),nt=new e.Point(Ue.canonical.x,Ue.canonical.y)._rotate(q.transform.angle);return Ae.overscaledZ-Ue.overscaledZ||nt.y-Ge.y||nt.x-Ge.x}).map(function(de){return de.tileID.key}):ae.map(function(de){return de.tileID}).sort(at).map(function(de){return de.key})},z.prototype.hasRenderableParent=function(F){var q=this.findLoadedParent(F,0);return!!q&&this._isIdRenderable(q.tileID.key)},z.prototype._isIdRenderable=function(F,q){return this._tiles[F]&&this._tiles[F].hasData()&&!this._coveredTiles[F]&&(q||!this._tiles[F].holdingForFade())},z.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var F in this._cache.reset(),this._tiles)"errored"!==this._tiles[F].state&&this._reloadTile(F,"reloading")},z.prototype._reloadTile=function(F,q){var ae=this._tiles[F];ae&&("loading"!==ae.state&&(ae.state=q),this._loadTile(ae,this._tileLoaded.bind(this,ae,F,q)))},z.prototype._tileLoaded=function(F,q,ae,ue){if(ue)return F.state="errored",void(404!==ue.status?this._source.fire(new e.ErrorEvent(ue,{tile:F})):this.update(this.transform));F.timeAdded=e.browser.now(),"expired"===ae&&(F.refreshedUponExpiration=!0),this._setTileReloadTimer(q,F),"raster-dem"===this.getSource().type&&F.dem&&this._backfillDEM(F),this._state.initializeTileState(F,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:F,coord:F.tileID}))},z.prototype._backfillDEM=function(F){for(var q=this.getRenderableIds(),ae=0;ae<q.length;ae++){var ue=q[ae];if(F.neighboringTiles&&F.neighboringTiles[ue]){var de=this.getTileByID(ue);ye(F,de),ye(de,F)}}function ye(Ae,Ue){Ae.needsHillshadePrepare=!0;var Ge=Ue.tileID.canonical.x-Ae.tileID.canonical.x,nt=Ue.tileID.canonical.y-Ae.tileID.canonical.y,xt=Math.pow(2,Ae.tileID.canonical.z),At=Ue.tileID.key;0===Ge&&0===nt||Math.abs(nt)>1||(Math.abs(Ge)>1&&(1===Math.abs(Ge+xt)?Ge+=xt:1===Math.abs(Ge-xt)&&(Ge-=xt)),Ue.dem&&Ae.dem&&(Ae.dem.backfillBorder(Ue.dem,Ge,nt),Ae.neighboringTiles&&Ae.neighboringTiles[At]&&(Ae.neighboringTiles[At].backfilled=!0)))}},z.prototype.getTile=function(F){return this.getTileByID(F.key)},z.prototype.getTileByID=function(F){return this._tiles[F]},z.prototype._retainLoadedChildren=function(F,q,ae,ue){for(var de in this._tiles){var ye=this._tiles[de];if(!(ue[de]||!ye.hasData()||ye.tileID.overscaledZ<=q||ye.tileID.overscaledZ>ae)){for(var Ae=ye.tileID;ye&&ye.tileID.overscaledZ>q+1;){var Ue=ye.tileID.scaledTo(ye.tileID.overscaledZ-1);(ye=this._tiles[Ue.key])&&ye.hasData()&&(Ae=Ue)}for(var Ge=Ae;Ge.overscaledZ>q;)if(F[(Ge=Ge.scaledTo(Ge.overscaledZ-1)).key]){ue[Ae.key]=Ae;break}}}},z.prototype.findLoadedParent=function(F,q){if(F.key in this._loadedParentTiles){var ae=this._loadedParentTiles[F.key];return ae&&ae.tileID.overscaledZ>=q?ae:null}for(var ue=F.overscaledZ-1;ue>=q;ue--){var de=F.scaledTo(ue),ye=this._getLoadedTile(de);if(ye)return ye}},z.prototype._getLoadedTile=function(F){var q=this._tiles[F.key];return q&&q.hasData()?q:this._cache.getByKey(F.wrapped().key)},z.prototype.updateCacheSize=function(F){var q=(Math.ceil(F.width/this._source.tileSize)+1)*(Math.ceil(F.height/this._source.tileSize)+1),ae=Math.floor(5*q),ue="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,ae):ae;this._cache.setMaxSize(ue)},z.prototype.handleWrapJump=function(F){var ae=Math.round((F-(void 0===this._prevLng?F:this._prevLng))/360);if(this._prevLng=F,ae){var ue={};for(var de in this._tiles){var ye=this._tiles[de];ye.tileID=ye.tileID.unwrapTo(ye.tileID.wrap+ae),ue[ye.tileID.key]=ye}for(var Ae in this._tiles=ue,this._timers)clearTimeout(this._timers[Ae]),delete this._timers[Ae];for(var Ue in this._tiles)this._setTileReloadTimer(Ue,this._tiles[Ue])}},z.prototype.update=function(F){var q=this;if(this.transform=F,this._sourceLoaded&&!this._paused){var ae;this.updateCacheSize(F),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?ae=F.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(wr){return new e.OverscaledTileID(wr.canonical.z,wr.wrap,wr.canonical.z,wr.canonical.x,wr.canonical.y)}):(ae=F.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(ae=ae.filter(function(wr){return q._source.hasTile(wr)}))):ae=[];var ue=F.coveringZoomLevel(this._source),de=Math.max(ue-z.maxOverzooming,this._source.minzoom),ye=Math.max(ue+z.maxUnderzooming,this._source.minzoom),Ae=this._updateRetainedTiles(ae,ue);if(pt(this._source.type)){for(var Ue={},Ge={},nt=0,xt=Object.keys(Ae);nt<xt.length;nt+=1){var At=xt[nt],wt=Ae[At],Tt=this._tiles[At];if(Tt&&!(Tt.fadeEndTime&&Tt.fadeEndTime<=e.browser.now())){var yt=this.findLoadedParent(wt,de);yt&&(this._addTile(yt.tileID),Ue[yt.tileID.key]=yt.tileID),Ge[At]=wt}}for(var Ft in this._retainLoadedChildren(Ge,ue,ye,Ae),Ue)Ae[Ft]||(this._coveredTiles[Ft]=!0,Ae[Ft]=Ue[Ft])}for(var Ot in Ae)this._tiles[Ot].clearFadeHold();for(var Nt=0,er=e.keysDifference(this._tiles,Ae);Nt<er.length;Nt+=1){var fr=er[Nt],Tr=this._tiles[fr];Tr.hasSymbolBuckets&&!Tr.holdingForFade()?Tr.setHoldDuration(this.map._fadeDuration):Tr.hasSymbolBuckets&&!Tr.symbolFadeFinished()||this._removeTile(fr)}this._updateLoadedParentTileCache()}},z.prototype.releaseSymbolFadeTiles=function(){for(var F in this._tiles)this._tiles[F].holdingForFade()&&this._removeTile(F)},z.prototype._updateRetainedTiles=function(F,q){for(var ae={},ue={},de=Math.max(q-z.maxOverzooming,this._source.minzoom),ye=Math.max(q+z.maxUnderzooming,this._source.minzoom),Ae={},Ue=0,Ge=F;Ue<Ge.length;Ue+=1){var nt=Ge[Ue],xt=this._addTile(nt);ae[nt.key]=nt,xt.hasData()||q<this._source.maxzoom&&(Ae[nt.key]=nt)}this._retainLoadedChildren(Ae,q,ye,ae);for(var At=0,wt=F;At<wt.length;At+=1){var Tt=wt[At],yt=this._tiles[Tt.key];if(!yt.hasData()){if(q+1>this._source.maxzoom){var Ft=Tt.children(this._source.maxzoom)[0],Ot=this.getTile(Ft);if(Ot&&Ot.hasData()){ae[Ft.key]=Ft;continue}}else{var Nt=Tt.children(this._source.maxzoom);if(ae[Nt[0].key]&&ae[Nt[1].key]&&ae[Nt[2].key]&&ae[Nt[3].key])continue}for(var er=yt.wasRequested(),fr=Tt.overscaledZ-1;fr>=de;--fr){var Tr=Tt.scaledTo(fr);if(ue[Tr.key]||(ue[Tr.key]=!0,!(yt=this.getTile(Tr))&&er&&(yt=this._addTile(Tr)),yt&&(ae[Tr.key]=Tr,er=yt.wasRequested(),yt.hasData())))break}}}return ae},z.prototype._updateLoadedParentTileCache=function(){for(var F in this._loadedParentTiles={},this._tiles){for(var q=[],ae=void 0,ue=this._tiles[F].tileID;ue.overscaledZ>0;){if(ue.key in this._loadedParentTiles){ae=this._loadedParentTiles[ue.key];break}q.push(ue.key);var de=ue.scaledTo(ue.overscaledZ-1);if(ae=this._getLoadedTile(de))break;ue=de}for(var ye=0,Ae=q;ye<Ae.length;ye+=1)this._loadedParentTiles[Ae[ye]]=ae}},z.prototype._addTile=function(F){var q=this._tiles[F.key];if(q)return q;(q=this._cache.getAndRemove(F))&&(this._setTileReloadTimer(F.key,q),q.tileID=F,this._state.initializeTileState(q,this.map?this.map.painter:null),this._cacheTimers[F.key]&&(clearTimeout(this._cacheTimers[F.key]),delete this._cacheTimers[F.key],this._setTileReloadTimer(F.key,q)));var ae=Boolean(q);return ae||(q=new e.Tile(F,this._source.tileSize*F.overscaleFactor()),this._loadTile(q,this._tileLoaded.bind(this,q,F.key,q.state))),q?(q.uses++,this._tiles[F.key]=q,ae||this._source.fire(new e.Event("dataloading",{tile:q,coord:q.tileID,dataType:"source"})),q):null},z.prototype._setTileReloadTimer=function(F,q){var ae=this;F in this._timers&&(clearTimeout(this._timers[F]),delete this._timers[F]);var ue=q.getExpiryTimeout();ue&&(this._timers[F]=setTimeout(function(){ae._reloadTile(F,"expired"),delete ae._timers[F]},ue))},z.prototype._removeTile=function(F){var q=this._tiles[F];q&&(q.uses--,delete this._tiles[F],this._timers[F]&&(clearTimeout(this._timers[F]),delete this._timers[F]),q.uses>0||(q.hasData()&&"reloading"!==q.state?this._cache.add(q.tileID,q,q.getExpiryTimeout()):(q.aborted=!0,this._abortTile(q),this._unloadTile(q))))},z.prototype.clearTiles=function(){for(var F in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(F);this._cache.reset()},z.prototype.tilesIn=function(F,q,ae){var ue=this,de=[],ye=this.transform;if(!ye)return de;for(var Ae=ae?ye.getCameraQueryGeometry(F):F,Ue=F.map(function(fr){return ye.pointCoordinate(fr)}),Ge=Ae.map(function(fr){return ye.pointCoordinate(fr)}),nt=this.getIds(),xt=1/0,At=1/0,wt=-1/0,Tt=-1/0,yt=0,Ft=Ge;yt<Ft.length;yt+=1){var Ot=Ft[yt];xt=Math.min(xt,Ot.x),At=Math.min(At,Ot.y),wt=Math.max(wt,Ot.x),Tt=Math.max(Tt,Ot.y)}for(var Nt=function(fr){var Tr=ue._tiles[nt[fr]];if(!Tr.holdingForFade()){var wr=Tr.tileID,Zr=Math.pow(2,ye.zoom-Tr.tileID.overscaledZ),Xr=q*Tr.queryPadding*e.EXTENT/Tr.tileSize/Zr,fn=[wr.getTilePoint(new e.MercatorCoordinate(xt,At)),wr.getTilePoint(new e.MercatorCoordinate(wt,Tt))];if(fn[0].x-Xr<e.EXTENT&&fn[0].y-Xr<e.EXTENT&&fn[1].x+Xr>=0&&fn[1].y+Xr>=0){var rn=Ue.map(function(Gn){return wr.getTilePoint(Gn)}),Nn=Ge.map(function(Gn){return wr.getTilePoint(Gn)});de.push({tile:Tr,tileID:wr,queryGeometry:rn,cameraQueryGeometry:Nn,scale:Zr})}}},er=0;er<nt.length;er++)Nt(er);return de},z.prototype.getVisibleCoordinates=function(F){for(var q=this,ae=this.getRenderableIds(F).map(function(Ae){return q._tiles[Ae].tileID}),ue=0,de=ae;ue<de.length;ue+=1){var ye=de[ue];ye.posMatrix=this.transform.calculatePosMatrix(ye.toUnwrapped())}return ae},z.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(pt(this._source.type))for(var F in this._tiles){var q=this._tiles[F];if(void 0!==q.fadeEndTime&&q.fadeEndTime>=e.browser.now())return!0}return!1},z.prototype.setFeatureState=function(F,q,ae){this._state.updateState(F=F||"_geojsonTileLayer",q,ae)},z.prototype.removeFeatureState=function(F,q,ae){this._state.removeFeatureState(F=F||"_geojsonTileLayer",q,ae)},z.prototype.getFeatureState=function(F,q){return this._state.getState(F=F||"_geojsonTileLayer",q)},z.prototype.setDependencies=function(F,q,ae){var ue=this._tiles[F];ue&&ue.setDependencies(q,ae)},z.prototype.reloadTilesForDependencies=function(F,q){for(var ae in this._tiles)this._tiles[ae].hasDependency(F,q)&&this._reloadTile(ae,"reloading");this._cache.filter(function(ue){return!ue.hasDependency(F,q)})},z}(e.Evented);function at(C,z){var F=Math.abs(2*C.wrap)-+(C.wrap<0),q=Math.abs(2*z.wrap)-+(z.wrap<0);return C.overscaledZ-z.overscaledZ||q-F||z.canonical.y-C.canonical.y||z.canonical.x-C.canonical.x}function pt(C){return"raster"===C||"image"===C||"video"===C}function ut(){return new e.window.Worker(le.workerUrl)}Xe.maxOverzooming=10,Xe.maxUnderzooming=3;var St="mapboxgl_preloaded_worker_pool",ot=function(){this.active={}};ot.prototype.acquire=function(C){if(!this.workers)for(this.workers=[];this.workers.length<ot.workerCount;)this.workers.push(new ut);return this.active[C]=!0,this.workers.slice()},ot.prototype.release=function(C){delete this.active[C],0===this.numActive()&&(this.workers.forEach(function(z){z.terminate()}),this.workers=null)},ot.prototype.isPreloaded=function(){return!!this.active[St]},ot.prototype.numActive=function(){return Object.keys(this.active).length};var Et,Lt=Math.floor(e.browser.hardwareConcurrency/2);function Qe(){return Et||(Et=new ot),Et}function mt(C,z){var F={};for(var q in C)"ref"!==q&&(F[q]=C[q]);return e.refProperties.forEach(function(ae){ae in z&&(F[ae]=z[ae])}),F}function It(C){C=C.slice();for(var z=Object.create(null),F=0;F<C.length;F++)z[C[F].id]=C[F];for(var q=0;q<C.length;q++)"ref"in C[q]&&(C[q]=mt(C[q],z[C[q].ref]));return C}ot.workerCount=Math.max(Math.min(Lt,6),1);var jt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Zt(C,z,F){F.push({command:jt.addSource,args:[C,z[C]]})}function Re(C,z,F){z.push({command:jt.removeSource,args:[C]}),F[C]=!0}function lt(C,z,F,q){Re(C,F,q),Zt(C,z,F)}function _t(C,z,F){var q;for(q in C[F])if(C[F].hasOwnProperty(q)&&"data"!==q&&!e.deepEqual(C[F][q],z[F][q]))return!1;for(q in z[F])if(z[F].hasOwnProperty(q)&&"data"!==q&&!e.deepEqual(C[F][q],z[F][q]))return!1;return!0}function Dt(C,z,F,q,ae,ue){var de;for(de in z=z||{},C=C||{})C.hasOwnProperty(de)&&(e.deepEqual(C[de],z[de])||F.push({command:ue,args:[q,de,z[de],ae]}));for(de in z)z.hasOwnProperty(de)&&!C.hasOwnProperty(de)&&(e.deepEqual(C[de],z[de])||F.push({command:ue,args:[q,de,z[de],ae]}))}function Vt(C){return C.id}function nr(C,z){return C[z.id]=z,C}var Kt=function(C,z){this.reset(C,z)};Kt.prototype.reset=function(C,z){this.points=C||[],this._distances=[0];for(var F=1;F<this.points.length;F++)this._distances[F]=this._distances[F-1]+this.points[F].dist(this.points[F-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(z||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Kt.prototype.lerp=function(C){if(1===this.points.length)return this.points[0];C=e.clamp(C,0,1);for(var z=1,F=this._distances[z],q=C*this.paddedLength+this.padding;F<q&&z<this._distances.length;)F=this._distances[++z];var ae=z-1,ue=this._distances[ae],de=F-ue,ye=de>0?(q-ue)/de:0;return this.points[ae].mult(1-ye).add(this.points[z].mult(ye))};var ir=function(C,z,F){var q=this.boxCells=[],ae=this.circleCells=[];this.xCellCount=Math.ceil(C/F),this.yCellCount=Math.ceil(z/F);for(var ue=0;ue<this.xCellCount*this.yCellCount;ue++)q.push([]),ae.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=C,this.height=z,this.xScale=this.xCellCount/C,this.yScale=this.yCellCount/z,this.boxUid=0,this.circleUid=0};function dr(C,z,F,q,ae){var ue=e.create();return z?(e.scale(ue,ue,[1/ae,1/ae,1]),F||e.rotateZ(ue,ue,q.angle)):e.multiply(ue,q.labelPlaneMatrix,C),ue}function hr(C,z,F,q,ae){if(z){var ue=e.clone(C);return e.scale(ue,ue,[ae,ae,1]),F||e.rotateZ(ue,ue,-q.angle),ue}return q.glCoordMatrix}function cr(C,z){var F=[C.x,C.y,0,1];$r(F,F,z);var q=F[3];return{point:new e.Point(F[0]/q,F[1]/q),signedDistanceFromCamera:q}}function sr(C,z){return.5+C/z*.5}function mr(C,z){var F=C[0]/C[3],q=C[1]/C[3];return F>=-z[0]&&F<=z[0]&&q>=-z[1]&&q<=z[1]}function Ir(C,z,F,q,ae,ue,de,ye){var Ae=q?C.textSizeData:C.iconSizeData,Ue=e.evaluateSizeForZoom(Ae,F.transform.zoom),Ge=[256/F.width*2+1,256/F.height*2+1],nt=q?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;nt.clear();for(var xt=C.lineVertexArray,At=q?C.text.placedSymbolArray:C.icon.placedSymbolArray,wt=F.transform.width/F.transform.height,Tt=!1,yt=0;yt<At.length;yt++){var Ft=At.get(yt);if(Ft.hidden||Ft.writingMode===e.WritingMode.vertical&&!Tt)An(Ft.numGlyphs,nt);else{Tt=!1;var Ot=[Ft.anchorX,Ft.anchorY,0,1];if(e.transformMat4(Ot,Ot,z),mr(Ot,Ge)){var er=sr(F.transform.cameraToCenterDistance,Ot[3]),fr=e.evaluateSizeForFeature(Ae,Ue,Ft),Tr=de?fr/er:fr*er,wr=new e.Point(Ft.anchorX,Ft.anchorY),Zr=cr(wr,ae).point,Xr={},fn=Jr(Ft,Tr,!1,ye,z,ae,ue,C.glyphOffsetArray,xt,nt,Zr,wr,Xr,wt);Tt=fn.useVertical,(fn.notEnoughRoom||Tt||fn.needsFlipping&&Jr(Ft,Tr,!0,ye,z,ae,ue,C.glyphOffsetArray,xt,nt,Zr,wr,Xr,wt).notEnoughRoom)&&An(Ft.numGlyphs,nt)}else An(Ft.numGlyphs,nt)}}q?C.text.dynamicLayoutVertexBuffer.updateData(nt):C.icon.dynamicLayoutVertexBuffer.updateData(nt)}function vr(C,z,F,q,ae,ue,de,ye,Ae,Ue,Ge){var nt=ye.glyphStartIndex+ye.numGlyphs,xt=ye.lineStartIndex,At=ye.lineStartIndex+ye.lineLength,wt=z.getoffsetX(ye.glyphStartIndex),Tt=z.getoffsetX(nt-1),yt=En(C*wt,F,q,ae,ue,de,ye.segment,xt,At,Ae,Ue,Ge);if(!yt)return null;var Ft=En(C*Tt,F,q,ae,ue,de,ye.segment,xt,At,Ae,Ue,Ge);return Ft?{first:yt,last:Ft}:null}function Br(C,z,F,q){return C===e.WritingMode.horizontal&&Math.abs(F.y-z.y)>Math.abs(F.x-z.x)*q?{useVertical:!0}:(C===e.WritingMode.vertical?z.y<F.y:z.x>F.x)?{needsFlipping:!0}:null}function Jr(C,z,F,q,ae,ue,de,ye,Ae,Ue,Ge,nt,xt,At){var wt,Tt=z/24,yt=C.lineOffsetX*Tt,Ft=C.lineOffsetY*Tt;if(C.numGlyphs>1){var Ot=C.glyphStartIndex+C.numGlyphs,Nt=C.lineStartIndex,er=C.lineStartIndex+C.lineLength,fr=vr(Tt,ye,yt,Ft,F,Ge,nt,C,Ae,ue,xt);if(!fr)return{notEnoughRoom:!0};var Tr=cr(fr.first.point,de).point,wr=cr(fr.last.point,de).point;if(q&&!F){var Zr=Br(C.writingMode,Tr,wr,At);if(Zr)return Zr}wt=[fr.first];for(var Xr=C.glyphStartIndex+1;Xr<Ot-1;Xr++)wt.push(En(Tt*ye.getoffsetX(Xr),yt,Ft,F,Ge,nt,C.segment,Nt,er,Ae,ue,xt));wt.push(fr.last)}else{if(q&&!F){var fn=cr(nt,ae).point,rn=C.lineStartIndex+C.segment+1,Nn=new e.Point(Ae.getx(rn),Ae.gety(rn)),Gn=cr(Nn,ae),oi=Gn.signedDistanceFromCamera>0?Gn.point:ln(nt,Nn,fn,1,ae),Ur=Br(C.writingMode,fn,oi,At);if(Ur)return Ur}var _n=En(Tt*ye.getoffsetX(C.glyphStartIndex),yt,Ft,F,Ge,nt,C.segment,C.lineStartIndex,C.lineStartIndex+C.lineLength,Ae,ue,xt);if(!_n)return{notEnoughRoom:!0};wt=[_n]}for(var Yn=0,Vn=wt;Yn<Vn.length;Yn+=1){var Qn=Vn[Yn];e.addDynamicAttributes(Ue,Qn.point,Qn.angle)}return{}}function ln(C,z,F,q,ae){var ue=cr(C.add(C.sub(z)._unit()),ae).point,de=F.sub(ue);return F.add(de._mult(q/de.mag()))}function En(C,z,F,q,ae,ue,de,ye,Ae,Ue,Ge,nt){var xt=q?C-z:C+z,At=xt>0?1:-1,wt=0;q&&(At*=-1,wt=Math.PI),At<0&&(wt+=Math.PI);for(var Tt=At>0?ye+de:ye+de+1,yt=ae,Ft=ae,Ot=0,Nt=0,er=Math.abs(xt),fr=[];Ot+Nt<=er;){if((Tt+=At)<ye||Tt>=Ae)return null;if(Ft=yt,fr.push(yt),void 0===(yt=nt[Tt])){var Tr=new e.Point(Ue.getx(Tt),Ue.gety(Tt)),wr=cr(Tr,Ge);if(wr.signedDistanceFromCamera>0)yt=nt[Tt]=wr.point;else{var Zr=Tt-At;yt=ln(0===Ot?ue:new e.Point(Ue.getx(Zr),Ue.gety(Zr)),Tr,Ft,er-Ot+1,Ge)}}Ot+=Nt,Nt=Ft.dist(yt)}var Xr=(er-Ot)/Nt,fn=yt.sub(Ft),rn=fn.mult(Xr)._add(Ft);rn._add(fn._unit()._perp()._mult(F*At));var Nn=wt+Math.atan2(yt.y-Ft.y,yt.x-Ft.x);return fr.push(rn),{point:rn,angle:Nn,path:fr}}ir.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},ir.prototype.insert=function(C,z,F,q,ae){this._forEachCell(z,F,q,ae,this._insertBoxCell,this.boxUid++),this.boxKeys.push(C),this.bboxes.push(z),this.bboxes.push(F),this.bboxes.push(q),this.bboxes.push(ae)},ir.prototype.insertCircle=function(C,z,F,q){this._forEachCell(z-q,F-q,z+q,F+q,this._insertCircleCell,this.circleUid++),this.circleKeys.push(C),this.circles.push(z),this.circles.push(F),this.circles.push(q)},ir.prototype._insertBoxCell=function(C,z,F,q,ae,ue){this.boxCells[ae].push(ue)},ir.prototype._insertCircleCell=function(C,z,F,q,ae,ue){this.circleCells[ae].push(ue)},ir.prototype._query=function(C,z,F,q,ae,ue){if(F<0||C>this.width||q<0||z>this.height)return!ae&&[];var de=[];if(C<=0&&z<=0&&this.width<=F&&this.height<=q){if(ae)return!0;for(var ye=0;ye<this.boxKeys.length;ye++)de.push({key:this.boxKeys[ye],x1:this.bboxes[4*ye],y1:this.bboxes[4*ye+1],x2:this.bboxes[4*ye+2],y2:this.bboxes[4*ye+3]});for(var Ae=0;Ae<this.circleKeys.length;Ae++){var Ue=this.circles[3*Ae],Ge=this.circles[3*Ae+1],nt=this.circles[3*Ae+2];de.push({key:this.circleKeys[Ae],x1:Ue-nt,y1:Ge-nt,x2:Ue+nt,y2:Ge+nt})}return ue?de.filter(ue):de}return this._forEachCell(C,z,F,q,this._queryCell,de,{hitTest:ae,seenUids:{box:{},circle:{}}},ue),ae?de.length>0:de},ir.prototype._queryCircle=function(C,z,F,q,ae){var ue=C-F,de=C+F,ye=z-F,Ae=z+F;if(de<0||ue>this.width||Ae<0||ye>this.height)return!q&&[];var Ue=[];return this._forEachCell(ue,ye,de,Ae,this._queryCellCircle,Ue,{hitTest:q,circle:{x:C,y:z,radius:F},seenUids:{box:{},circle:{}}},ae),q?Ue.length>0:Ue},ir.prototype.query=function(C,z,F,q,ae){return this._query(C,z,F,q,!1,ae)},ir.prototype.hitTest=function(C,z,F,q,ae){return this._query(C,z,F,q,!0,ae)},ir.prototype.hitTestCircle=function(C,z,F,q){return this._queryCircle(C,z,F,!0,q)},ir.prototype._queryCell=function(C,z,F,q,ae,ue,de,ye){var Ae=de.seenUids,Ue=this.boxCells[ae];if(null!==Ue)for(var Ge=this.bboxes,nt=0,xt=Ue;nt<xt.length;nt+=1){var At=xt[nt];if(!Ae.box[At]){Ae.box[At]=!0;var wt=4*At;if(C<=Ge[wt+2]&&z<=Ge[wt+3]&&F>=Ge[wt+0]&&q>=Ge[wt+1]&&(!ye||ye(this.boxKeys[At]))){if(de.hitTest)return ue.push(!0),!0;ue.push({key:this.boxKeys[At],x1:Ge[wt],y1:Ge[wt+1],x2:Ge[wt+2],y2:Ge[wt+3]})}}}var Tt=this.circleCells[ae];if(null!==Tt)for(var yt=this.circles,Ft=0,Ot=Tt;Ft<Ot.length;Ft+=1){var Nt=Ot[Ft];if(!Ae.circle[Nt]){Ae.circle[Nt]=!0;var er=3*Nt;if(this._circleAndRectCollide(yt[er],yt[er+1],yt[er+2],C,z,F,q)&&(!ye||ye(this.circleKeys[Nt]))){if(de.hitTest)return ue.push(!0),!0;var fr=yt[er],Tr=yt[er+1],wr=yt[er+2];ue.push({key:this.circleKeys[Nt],x1:fr-wr,y1:Tr-wr,x2:fr+wr,y2:Tr+wr})}}}},ir.prototype._queryCellCircle=function(C,z,F,q,ae,ue,de,ye){var Ae=de.circle,Ue=de.seenUids,Ge=this.boxCells[ae];if(null!==Ge)for(var nt=this.bboxes,xt=0,At=Ge;xt<At.length;xt+=1){var wt=At[xt];if(!Ue.box[wt]){Ue.box[wt]=!0;var Tt=4*wt;if(this._circleAndRectCollide(Ae.x,Ae.y,Ae.radius,nt[Tt+0],nt[Tt+1],nt[Tt+2],nt[Tt+3])&&(!ye||ye(this.boxKeys[wt])))return ue.push(!0),!0}}var yt=this.circleCells[ae];if(null!==yt)for(var Ft=this.circles,Ot=0,Nt=yt;Ot<Nt.length;Ot+=1){var er=Nt[Ot];if(!Ue.circle[er]){Ue.circle[er]=!0;var fr=3*er;if(this._circlesCollide(Ft[fr],Ft[fr+1],Ft[fr+2],Ae.x,Ae.y,Ae.radius)&&(!ye||ye(this.circleKeys[er])))return ue.push(!0),!0}}},ir.prototype._forEachCell=function(C,z,F,q,ae,ue,de,ye){for(var Ae=this._convertToXCellCoord(C),Ue=this._convertToYCellCoord(z),Ge=this._convertToXCellCoord(F),nt=this._convertToYCellCoord(q),xt=Ae;xt<=Ge;xt++)for(var At=Ue;At<=nt;At++)if(ae.call(this,C,z,F,q,this.xCellCount*At+xt,ue,de,ye))return},ir.prototype._convertToXCellCoord=function(C){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(C*this.xScale)))},ir.prototype._convertToYCellCoord=function(C){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(C*this.yScale)))},ir.prototype._circlesCollide=function(C,z,F,q,ae,ue){var de=q-C,ye=ae-z,Ae=F+ue;return Ae*Ae>de*de+ye*ye},ir.prototype._circleAndRectCollide=function(C,z,F,q,ae,ue,de){var ye=(ue-q)/2,Ae=Math.abs(C-(q+ye));if(Ae>ye+F)return!1;var Ue=(de-ae)/2,Ge=Math.abs(z-(ae+Ue));if(Ge>Ue+F)return!1;if(Ae<=ye||Ge<=Ue)return!0;var nt=Ae-ye,xt=Ge-Ue;return nt*nt+xt*xt<=F*F};var Cn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function An(C,z){for(var F=0;F<C;F++){var q=z.length;z.resize(q+4),z.float32.set(Cn,3*q)}}function $r(C,z,F){var q=z[0],ae=z[1];return C[0]=F[0]*q+F[4]*ae+F[12],C[1]=F[1]*q+F[5]*ae+F[13],C[3]=F[3]*q+F[7]*ae+F[15],C}var Rr=function(C,z,F){void 0===z&&(z=new ir(C.width+200,C.height+200,25)),void 0===F&&(F=new ir(C.width+200,C.height+200,25)),this.transform=C,this.grid=z,this.ignoredGrid=F,this.pitchfactor=Math.cos(C._pitch)*C.cameraToCenterDistance,this.screenRightBoundary=C.width+100,this.screenBottomBoundary=C.height+100,this.gridRightBoundary=C.width+200,this.gridBottomBoundary=C.height+200};function Lr(C,z,F){return z*(e.EXTENT/(C.tileSize*Math.pow(2,F-C.tileID.overscaledZ)))}Rr.prototype.placeCollisionBox=function(C,z,F,q,ae){var ue=this.projectAndGetPerspectiveRatio(q,C.anchorPointX,C.anchorPointY),de=F*ue.perspectiveRatio,ye=C.x1*de+ue.point.x,Ae=C.y1*de+ue.point.y,Ue=C.x2*de+ue.point.x,Ge=C.y2*de+ue.point.y;return!this.isInsideGrid(ye,Ae,Ue,Ge)||!z&&this.grid.hitTest(ye,Ae,Ue,Ge,ae)?{box:[],offscreen:!1}:{box:[ye,Ae,Ue,Ge],offscreen:this.isOffscreen(ye,Ae,Ue,Ge)}},Rr.prototype.placeCollisionCircles=function(C,z,F,q,ae,ue,de,ye,Ae,Ue,Ge,nt,xt){var At=[],wt=new e.Point(z.anchorX,z.anchorY),Tt=cr(wt,ue),yt=sr(this.transform.cameraToCenterDistance,Tt.signedDistanceFromCamera),Ft=(Ue?ae/yt:ae*yt)/e.ONE_EM,Ot=cr(wt,de).point,Nt=vr(Ft,q,z.lineOffsetX*Ft,z.lineOffsetY*Ft,!1,Ot,wt,z,F,de,{}),er=!1,fr=!1,Tr=!0;if(Nt){for(var wr=.5*nt*yt+xt,Zr=new e.Point(-100,-100),Xr=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),fn=new Kt,rn=Nt.first,Nn=Nt.last,Gn=[],oi=rn.path.length-1;oi>=1;oi--)Gn.push(rn.path[oi]);for(var Ur=1;Ur<Nn.path.length;Ur++)Gn.push(Nn.path[Ur]);var _n=2.5*wr;if(ye){var Yn=Gn.map(function(ho){return cr(ho,ye)});Gn=Yn.some(function(ho){return ho.signedDistanceFromCamera<=0})?[]:Yn.map(function(ho){return ho.point})}var Vn=[];if(Gn.length>0){for(var Qn=Gn[0].clone(),li=Gn[0].clone(),wi=1;wi<Gn.length;wi++)Qn.x=Math.min(Qn.x,Gn[wi].x),Qn.y=Math.min(Qn.y,Gn[wi].y),li.x=Math.max(li.x,Gn[wi].x),li.y=Math.max(li.y,Gn[wi].y);Vn=Qn.x>=Zr.x&&li.x<=Xr.x&&Qn.y>=Zr.y&&li.y<=Xr.y?[Gn]:li.x<Zr.x||Qn.x>Xr.x||li.y<Zr.y||Qn.y>Xr.y?[]:e.clipLine([Gn],Zr.x,Zr.y,Xr.x,Xr.y)}for(var Xn=0,mi=Vn;Xn<mi.length;Xn+=1){var Mi;fn.reset(mi[Xn],.25*wr),Mi=fn.length<=.5*wr?1:Math.ceil(fn.paddedLength/_n)+1;for(var vi=0;vi<Mi;vi++){var Si=vi/Math.max(Mi-1,1),Di=fn.lerp(Si),aa=Di.x+100,Ma=Di.y+100;At.push(aa,Ma,wr,0);var Sa=aa-wr,ia=Ma-wr,xa=aa+wr,ua=Ma+wr;if(Tr=Tr&&this.isOffscreen(Sa,ia,xa,ua),fr=fr||this.isInsideGrid(Sa,ia,xa,ua),!C&&this.grid.hitTestCircle(aa,Ma,wr,Ge)&&(er=!0,!Ae))return{circles:[],offscreen:!1,collisionDetected:er}}}}return{circles:!Ae&&er||!fr?[]:At,offscreen:Tr,collisionDetected:er}},Rr.prototype.queryRenderedSymbols=function(C){if(0===C.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var z=[],F=1/0,q=1/0,ae=-1/0,ue=-1/0,de=0,ye=C;de<ye.length;de+=1){var Ae=ye[de],Ue=new e.Point(Ae.x+100,Ae.y+100);F=Math.min(F,Ue.x),q=Math.min(q,Ue.y),ae=Math.max(ae,Ue.x),ue=Math.max(ue,Ue.y),z.push(Ue)}for(var Ge={},nt={},xt=0,At=this.grid.query(F,q,ae,ue).concat(this.ignoredGrid.query(F,q,ae,ue));xt<At.length;xt+=1){var wt=At[xt],Tt=wt.key;if(void 0===Ge[Tt.bucketInstanceId]&&(Ge[Tt.bucketInstanceId]={}),!Ge[Tt.bucketInstanceId][Tt.featureIndex]){var yt=[new e.Point(wt.x1,wt.y1),new e.Point(wt.x2,wt.y1),new e.Point(wt.x2,wt.y2),new e.Point(wt.x1,wt.y2)];e.polygonIntersectsPolygon(z,yt)&&(Ge[Tt.bucketInstanceId][Tt.featureIndex]=!0,void 0===nt[Tt.bucketInstanceId]&&(nt[Tt.bucketInstanceId]=[]),nt[Tt.bucketInstanceId].push(Tt.featureIndex))}}return nt},Rr.prototype.insertCollisionBox=function(C,z,F,q,ae){(z?this.ignoredGrid:this.grid).insert({bucketInstanceId:F,featureIndex:q,collisionGroupID:ae},C[0],C[1],C[2],C[3])},Rr.prototype.insertCollisionCircles=function(C,z,F,q,ae){for(var ue=z?this.ignoredGrid:this.grid,de={bucketInstanceId:F,featureIndex:q,collisionGroupID:ae},ye=0;ye<C.length;ye+=4)ue.insertCircle(de,C[ye],C[ye+1],C[ye+2])},Rr.prototype.projectAndGetPerspectiveRatio=function(C,z,F){var q=[z,F,0,1];return $r(q,q,C),{point:new e.Point((q[0]/q[3]+1)/2*this.transform.width+100,(-q[1]/q[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/q[3]*.5}},Rr.prototype.isOffscreen=function(C,z,F,q){return F<100||C>=this.screenRightBoundary||q<100||z>this.screenBottomBoundary},Rr.prototype.isInsideGrid=function(C,z,F,q){return F>=0&&C<this.gridRightBoundary&&q>=0&&z<this.gridBottomBoundary},Rr.prototype.getViewportMatrix=function(){var C=e.identity([]);return e.translate(C,C,[-100,-100,0]),C};var Qr=function(C,z,F,q){this.opacity=C?Math.max(0,Math.min(1,C.opacity+(C.placed?z:-z))):q&&F?1:0,this.placed=F};Qr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var On=function(C,z,F,q,ae){this.text=new Qr(C?C.text:null,z,F,ae),this.icon=new Qr(C?C.icon:null,z,q,ae)};On.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var zr=function(C,z,F){this.text=C,this.icon=z,this.skipFade=F},sn=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Mn=function(C,z,F,q,ae){this.bucketInstanceId=C,this.featureIndex=z,this.sourceLayerIndex=F,this.bucketIndex=q,this.tileID=ae},Tn=function(C){this.crossSourceCollisions=C,this.maxGroupID=0,this.collisionGroups={}};function Rn(C,z,F,q,ae){var ue=e.getAnchorAlignment(C),de=-(ue.horizontalAlign-.5)*z,ye=-(ue.verticalAlign-.5)*F,Ae=e.evaluateVariableOffset(C,q);return new e.Point(de+Ae[0]*ae,ye+Ae[1]*ae)}function $t(C,z,F,q,ae,ue){var de=C.x1,ye=C.x2,Ae=C.y1,Ue=C.y2,Ge=C.anchorPointX,nt=C.anchorPointY,xt=new e.Point(z,F);return q&&xt._rotate(ae?ue:-ue),{x1:de+xt.x,y1:Ae+xt.y,x2:ye+xt.x,y2:Ue+xt.y,anchorPointX:Ge,anchorPointY:nt}}Tn.prototype.get=function(C){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[C]){var z=++this.maxGroupID;this.collisionGroups[C]={ID:z,predicate:function(F){return F.collisionGroupID===z}}}return this.collisionGroups[C]};var Ct=function(C,z,F,q){this.transform=C.clone(),this.collisionIndex=new Rr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=z,this.retainedQueryData={},this.collisionGroups=new Tn(F),this.collisionCircleArrays={},this.prevPlacement=q,q&&(q.prevPlacement=void 0),this.placedOrientations={}};function Ut(C,z,F,q,ae){C.emplaceBack(z?1:0,F?1:0,q||0,ae||0),C.emplaceBack(z?1:0,F?1:0,q||0,ae||0),C.emplaceBack(z?1:0,F?1:0,q||0,ae||0),C.emplaceBack(z?1:0,F?1:0,q||0,ae||0)}Ct.prototype.getBucketParts=function(C,z,F,q){var ae=F.getBucket(z),ue=F.latestFeatureIndex;if(ae&&ue&&z.id===ae.layerIds[0]){var de=F.collisionBoxArray,ye=ae.layers[0].layout,Ae=Math.pow(2,this.transform.zoom-F.tileID.overscaledZ),Ue=F.tileSize/e.EXTENT,Ge=this.transform.calculatePosMatrix(F.tileID.toUnwrapped()),nt="map"===ye.get("text-pitch-alignment"),xt="map"===ye.get("text-rotation-alignment"),At=Lr(F,1,this.transform.zoom),wt=dr(Ge,nt,xt,this.transform,At),Tt=null;if(nt){var yt=hr(Ge,nt,xt,this.transform,At);Tt=e.multiply([],this.transform.labelPlaneMatrix,yt)}this.retainedQueryData[ae.bucketInstanceId]=new Mn(ae.bucketInstanceId,ue,ae.sourceLayerIndex,ae.index,F.tileID);var Ft={bucket:ae,layout:ye,posMatrix:Ge,textLabelPlaneMatrix:wt,labelToScreenMatrix:Tt,scale:Ae,textPixelRatio:Ue,holdingForFade:F.holdingForFade(),collisionBoxArray:de,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(ae.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(ae.sourceID)};if(q)for(var Ot=0,Nt=ae.sortKeyRanges;Ot<Nt.length;Ot+=1){var er=Nt[Ot];C.push({sortKey:er.sortKey,symbolInstanceStart:er.symbolInstanceStart,symbolInstanceEnd:er.symbolInstanceEnd,parameters:Ft})}else C.push({symbolInstanceStart:0,symbolInstanceEnd:ae.symbolInstances.length,parameters:Ft})}},Ct.prototype.attemptAnchorPlacement=function(C,z,F,q,ae,ue,de,ye,Ae,Ue,Ge,nt,xt,At,wt){var Tt,yt=[nt.textOffset0,nt.textOffset1],Ft=Rn(C,F,q,yt,ae),Ot=this.collisionIndex.placeCollisionBox($t(z,Ft.x,Ft.y,ue,de,this.transform.angle),Ge,ye,Ae,Ue.predicate);if((!wt||0!==this.collisionIndex.placeCollisionBox($t(wt,Ft.x,Ft.y,ue,de,this.transform.angle),Ge,ye,Ae,Ue.predicate).box.length)&&Ot.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[nt.crossTileID]&&this.prevPlacement.placements[nt.crossTileID]&&this.prevPlacement.placements[nt.crossTileID].text&&(Tt=this.prevPlacement.variableOffsets[nt.crossTileID].anchor),this.variableOffsets[nt.crossTileID]={textOffset:yt,width:F,height:q,anchor:C,textBoxScale:ae,prevAnchor:Tt},this.markUsedJustification(xt,C,nt,At),xt.allowVerticalPlacement&&(this.markUsedOrientation(xt,At,nt),this.placedOrientations[nt.crossTileID]=At),{shift:Ft,placedGlyphBoxes:Ot}},Ct.prototype.placeLayerBucketPart=function(C,z,F){var q=this,ae=C.parameters,ue=ae.bucket,de=ae.layout,ye=ae.posMatrix,Ae=ae.textLabelPlaneMatrix,Ue=ae.labelToScreenMatrix,Ge=ae.textPixelRatio,nt=ae.holdingForFade,xt=ae.collisionBoxArray,At=ae.partiallyEvaluatedTextSize,wt=ae.collisionGroup,Tt=de.get("text-optional"),yt=de.get("icon-optional"),Ft=de.get("text-allow-overlap"),Ot=de.get("icon-allow-overlap"),Nt="map"===de.get("text-rotation-alignment"),er="map"===de.get("text-pitch-alignment"),fr="none"!==de.get("icon-text-fit"),Tr="viewport-y"===de.get("symbol-z-order"),wr=Ft&&(Ot||!ue.hasIconData()||yt),Zr=Ot&&(Ft||!ue.hasTextData()||Tt);!ue.collisionArrays&&xt&&ue.deserializeCollisionBoxes(xt);var Xr=function(Ur,_n){if(!z[Ur.crossTileID])if(nt)q.placements[Ur.crossTileID]=new zr(!1,!1,!1);else{var Yn,Vn=!1,Qn=!1,li=!0,wi=null,Xn={box:null,offscreen:null},mi={box:null,offscreen:null},pi=null,Mi=null,vi=0,Si=0,Di=0;_n.textFeatureIndex?vi=_n.textFeatureIndex:Ur.useRuntimeCollisionCircles&&(vi=Ur.featureIndex),_n.verticalTextFeatureIndex&&(Si=_n.verticalTextFeatureIndex);var aa=_n.textBox;if(aa){var Ma=function(ba){var Mo=e.WritingMode.horizontal;if(ue.allowVerticalPlacement&&!ba&&q.prevPlacement){var So=q.prevPlacement.placedOrientations[Ur.crossTileID];So&&(q.placedOrientations[Ur.crossTileID]=So,q.markUsedOrientation(ue,Mo=So,Ur))}return Mo},Sa=function(ba,Mo){if(ue.allowVerticalPlacement&&Ur.numVerticalGlyphVertices>0&&_n.verticalTextBox)for(var So=0,yl=ue.writingModes;So<yl.length&&(yl[So]===e.WritingMode.vertical?(Xn=Mo(),mi=Xn):Xn=ba(),!(Xn&&Xn.box&&Xn.box.length));So+=1);else Xn=ba()};if(de.get("text-variable-anchor")){var ia=de.get("text-variable-anchor");if(q.prevPlacement&&q.prevPlacement.variableOffsets[Ur.crossTileID]){var xa=q.prevPlacement.variableOffsets[Ur.crossTileID];ia.indexOf(xa.anchor)>0&&(ia=ia.filter(function(ba){return ba!==xa.anchor})).unshift(xa.anchor)}var ua=function(ba,Mo,So){for(var yl=ba.x2-ba.x1,Zc=ba.y2-ba.y1,Go=Ur.textBoxScale,ql=fr&&!Ot?Mo:null,ul={box:[],offscreen:!1},Jc=Ft?2*ia.length:ia.length,Fs=0;Fs<Jc;++Fs){var Qs=q.attemptAnchorPlacement(ia[Fs%ia.length],ba,yl,Zc,Go,Nt,er,Ge,ye,wt,Fs>=ia.length,Ur,ue,So,ql);if(Qs&&(ul=Qs.placedGlyphBoxes)&&ul.box&&ul.box.length){Vn=!0,wi=Qs.shift;break}}return ul};Sa(function(){return ua(aa,_n.iconBox,e.WritingMode.horizontal)},function(){var ba=_n.verticalTextBox;return ue.allowVerticalPlacement&&!(Xn&&Xn.box&&Xn.box.length)&&Ur.numVerticalGlyphVertices>0&&ba?ua(ba,_n.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),Xn&&(Vn=Xn.box,li=Xn.offscreen);var ho=Ma(Xn&&Xn.box);if(!Vn&&q.prevPlacement){var Na=q.prevPlacement.variableOffsets[Ur.crossTileID];Na&&(q.variableOffsets[Ur.crossTileID]=Na,q.markUsedJustification(ue,Na.anchor,Ur,ho))}}else{var Co=function(ba,Mo){var So=q.collisionIndex.placeCollisionBox(ba,Ft,Ge,ye,wt.predicate);return So&&So.box&&So.box.length&&(q.markUsedOrientation(ue,Mo,Ur),q.placedOrientations[Ur.crossTileID]=Mo),So};Sa(function(){return Co(aa,e.WritingMode.horizontal)},function(){var ba=_n.verticalTextBox;return ue.allowVerticalPlacement&&Ur.numVerticalGlyphVertices>0&&ba?Co(ba,e.WritingMode.vertical):{box:null,offscreen:null}}),Ma(Xn&&Xn.box&&Xn.box.length)}}if(Vn=(Yn=Xn)&&Yn.box&&Yn.box.length>0,li=Yn&&Yn.offscreen,Ur.useRuntimeCollisionCircles){var ms=ue.text.placedSymbolArray.get(Ur.centerJustifiedTextSymbolIndex),Rs=e.evaluateSizeForFeature(ue.textSizeData,At,ms),sl=de.get("text-padding");pi=q.collisionIndex.placeCollisionCircles(Ft,ms,ue.lineVertexArray,ue.glyphOffsetArray,Rs,ye,Ae,Ue,F,er,wt.predicate,Ur.collisionCircleDiameter,sl),Vn=Ft||pi.circles.length>0&&!pi.collisionDetected,li=li&&pi.offscreen}if(_n.iconFeatureIndex&&(Di=_n.iconFeatureIndex),_n.iconBox){var Ks=function(ba){var Mo=fr&&wi?$t(ba,wi.x,wi.y,Nt,er,q.transform.angle):ba;return q.collisionIndex.placeCollisionBox(Mo,Ot,Ge,ye,wt.predicate)};Qn=mi&&mi.box&&mi.box.length&&_n.verticalIconBox?(Mi=Ks(_n.verticalIconBox)).box.length>0:(Mi=Ks(_n.iconBox)).box.length>0,li=li&&Mi.offscreen}var po=Tt||0===Ur.numHorizontalGlyphVertices&&0===Ur.numVerticalGlyphVertices,Us=yt||0===Ur.numIconVertices;if(po||Us?Us?po||(Qn=Qn&&Vn):Vn=Qn&&Vn:Qn=Vn=Qn&&Vn,Vn&&Yn&&Yn.box&&q.collisionIndex.insertCollisionBox(Yn.box,de.get("text-ignore-placement"),ue.bucketInstanceId,mi&&mi.box&&Si?Si:vi,wt.ID),Qn&&Mi&&q.collisionIndex.insertCollisionBox(Mi.box,de.get("icon-ignore-placement"),ue.bucketInstanceId,Di,wt.ID),pi&&(Vn&&q.collisionIndex.insertCollisionCircles(pi.circles,de.get("text-ignore-placement"),ue.bucketInstanceId,vi,wt.ID),F)){var ll=ue.bucketInstanceId,$o=q.collisionCircleArrays[ll];void 0===$o&&($o=q.collisionCircleArrays[ll]=new sn);for(var cl=0;cl<pi.circles.length;cl+=4)$o.circles.push(pi.circles[cl+0]),$o.circles.push(pi.circles[cl+1]),$o.circles.push(pi.circles[cl+2]),$o.circles.push(pi.collisionDetected?1:0)}q.placements[Ur.crossTileID]=new zr(Vn||wr,Qn||Zr,li||ue.justReloaded),z[Ur.crossTileID]=!0}};if(Tr)for(var fn=ue.getSortedSymbolIndexes(this.transform.angle),rn=fn.length-1;rn>=0;--rn){var Nn=fn[rn];Xr(ue.symbolInstances.get(Nn),ue.collisionArrays[Nn])}else for(var Gn=C.symbolInstanceStart;Gn<C.symbolInstanceEnd;Gn++)Xr(ue.symbolInstances.get(Gn),ue.collisionArrays[Gn]);if(F&&ue.bucketInstanceId in this.collisionCircleArrays){var oi=this.collisionCircleArrays[ue.bucketInstanceId];e.invert(oi.invProjMatrix,ye),oi.viewportMatrix=this.collisionIndex.getViewportMatrix()}ue.justReloaded=!1},Ct.prototype.markUsedJustification=function(C,z,F,q){var ae;ae=q===e.WritingMode.vertical?F.verticalPlacedTextSymbolIndex:{left:F.leftJustifiedTextSymbolIndex,center:F.centerJustifiedTextSymbolIndex,right:F.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(z)];for(var de=0,ye=[F.leftJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.rightJustifiedTextSymbolIndex,F.verticalPlacedTextSymbolIndex];de<ye.length;de+=1){var Ae=ye[de];Ae>=0&&(C.text.placedSymbolArray.get(Ae).crossTileID=ae>=0&&Ae!==ae?0:F.crossTileID)}},Ct.prototype.markUsedOrientation=function(C,z,F){for(var q=z===e.WritingMode.horizontal||z===e.WritingMode.horizontalOnly?z:0,ae=z===e.WritingMode.vertical?z:0,ue=0,de=[F.leftJustifiedTextSymbolIndex,F.centerJustifiedTextSymbolIndex,F.rightJustifiedTextSymbolIndex];ue<de.length;ue+=1)C.text.placedSymbolArray.get(de[ue]).placedOrientation=q;F.verticalPlacedTextSymbolIndex&&(C.text.placedSymbolArray.get(F.verticalPlacedTextSymbolIndex).placedOrientation=ae)},Ct.prototype.commit=function(C){this.commitTime=C,this.zoomAtLastRecencyCheck=this.transform.zoom;var z=this.prevPlacement,F=!1;this.prevZoomAdjustment=z?z.zoomAdjustment(this.transform.zoom):0;var q=z?z.symbolFadeChange(C):1,ae=z?z.opacities:{},ue=z?z.variableOffsets:{},de=z?z.placedOrientations:{};for(var ye in this.placements){var Ae=this.placements[ye],Ue=ae[ye];Ue?(this.opacities[ye]=new On(Ue,q,Ae.text,Ae.icon),F=F||Ae.text!==Ue.text.placed||Ae.icon!==Ue.icon.placed):(this.opacities[ye]=new On(null,q,Ae.text,Ae.icon,Ae.skipFade),F=F||Ae.text||Ae.icon)}for(var Ge in ae){var nt=ae[Ge];if(!this.opacities[Ge]){var xt=new On(nt,q,!1,!1);xt.isHidden()||(this.opacities[Ge]=xt,F=F||nt.text.placed||nt.icon.placed)}}for(var At in ue)this.variableOffsets[At]||!this.opacities[At]||this.opacities[At].isHidden()||(this.variableOffsets[At]=ue[At]);for(var wt in de)this.placedOrientations[wt]||!this.opacities[wt]||this.opacities[wt].isHidden()||(this.placedOrientations[wt]=de[wt]);F?this.lastPlacementChangeTime=C:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=z?z.lastPlacementChangeTime:C)},Ct.prototype.updateLayerOpacities=function(C,z){for(var F={},q=0,ae=z;q<ae.length;q+=1){var ue=ae[q],de=ue.getBucket(C);de&&ue.latestFeatureIndex&&C.id===de.layerIds[0]&&this.updateBucketOpacities(de,F,ue.collisionBoxArray)}},Ct.prototype.updateBucketOpacities=function(C,z,F){var q=this;C.hasTextData()&&C.text.opacityVertexArray.clear(),C.hasIconData()&&C.icon.opacityVertexArray.clear(),C.hasIconCollisionBoxData()&&C.iconCollisionBox.collisionVertexArray.clear(),C.hasTextCollisionBoxData()&&C.textCollisionBox.collisionVertexArray.clear();var ae=C.layers[0].layout,ue=new On(null,0,!1,!1,!0),de=ae.get("text-allow-overlap"),ye=ae.get("icon-allow-overlap"),Ae=ae.get("text-variable-anchor"),Ue="map"===ae.get("text-rotation-alignment"),Ge="map"===ae.get("text-pitch-alignment"),nt="none"!==ae.get("icon-text-fit"),xt=new On(null,0,de&&(ye||!C.hasIconData()||ae.get("icon-optional")),ye&&(de||!C.hasTextData()||ae.get("text-optional")),!0);!C.collisionArrays&&F&&(C.hasIconCollisionBoxData()||C.hasTextCollisionBoxData())&&C.deserializeCollisionBoxes(F);for(var At=function(Ft,Ot,Nt){for(var er=0;er<Ot/4;er++)Ft.opacityVertexArray.emplaceBack(Nt)},wt=function(Ft){var Ot=C.symbolInstances.get(Ft),Nt=Ot.numHorizontalGlyphVertices,er=Ot.numVerticalGlyphVertices,fr=Ot.crossTileID,wr=q.opacities[fr];z[fr]?wr=ue:wr||(q.opacities[fr]=wr=xt),z[fr]=!0;var Xr=Ot.numIconVertices>0,fn=q.placedOrientations[Ot.crossTileID],rn=fn===e.WritingMode.vertical,Nn=fn===e.WritingMode.horizontal||fn===e.WritingMode.horizontalOnly;if(Nt>0||er>0){var Gn=Cr(wr.text);At(C.text,Nt,rn?Ar:Gn),At(C.text,er,Nn?Ar:Gn);var _n=wr.text.isHidden();[Ot.rightJustifiedTextSymbolIndex,Ot.centerJustifiedTextSymbolIndex,Ot.leftJustifiedTextSymbolIndex].forEach(function(Di){Di>=0&&(C.text.placedSymbolArray.get(Di).hidden=_n||rn?1:0)}),Ot.verticalPlacedTextSymbolIndex>=0&&(C.text.placedSymbolArray.get(Ot.verticalPlacedTextSymbolIndex).hidden=_n||Nn?1:0);var Yn=q.variableOffsets[Ot.crossTileID];Yn&&q.markUsedJustification(C,Yn.anchor,Ot,fn);var Vn=q.placedOrientations[Ot.crossTileID];Vn&&(q.markUsedJustification(C,"left",Ot,Vn),q.markUsedOrientation(C,Vn,Ot))}if(Xr){var Qn=Cr(wr.icon),li=!(nt&&Ot.verticalPlacedIconSymbolIndex&&rn);Ot.placedIconSymbolIndex>=0&&(At(C.icon,Ot.numIconVertices,li?Qn:Ar),C.icon.placedSymbolArray.get(Ot.placedIconSymbolIndex).hidden=wr.icon.isHidden()),Ot.verticalPlacedIconSymbolIndex>=0&&(At(C.icon,Ot.numVerticalIconVertices,li?Ar:Qn),C.icon.placedSymbolArray.get(Ot.verticalPlacedIconSymbolIndex).hidden=wr.icon.isHidden())}if(C.hasIconCollisionBoxData()||C.hasTextCollisionBoxData()){var mi=C.collisionArrays[Ft];if(mi){var pi=new e.Point(0,0);if(mi.textBox||mi.verticalTextBox){var Mi=!0;if(Ae){var vi=q.variableOffsets[fr];vi?(pi=Rn(vi.anchor,vi.width,vi.height,vi.textOffset,vi.textBoxScale),Ue&&pi._rotate(Ge?q.transform.angle:-q.transform.angle)):Mi=!1}mi.textBox&&Ut(C.textCollisionBox.collisionVertexArray,wr.text.placed,!Mi||rn,pi.x,pi.y),mi.verticalTextBox&&Ut(C.textCollisionBox.collisionVertexArray,wr.text.placed,!Mi||Nn,pi.x,pi.y)}var Si=Boolean(!Nn&&mi.verticalIconBox);mi.iconBox&&Ut(C.iconCollisionBox.collisionVertexArray,wr.icon.placed,Si,nt?pi.x:0,nt?pi.y:0),mi.verticalIconBox&&Ut(C.iconCollisionBox.collisionVertexArray,wr.icon.placed,!Si,nt?pi.x:0,nt?pi.y:0)}}},Tt=0;Tt<C.symbolInstances.length;Tt++)wt(Tt);if(C.sortFeatures(this.transform.angle),this.retainedQueryData[C.bucketInstanceId]&&(this.retainedQueryData[C.bucketInstanceId].featureSortOrder=C.featureSortOrder),C.hasTextData()&&C.text.opacityVertexBuffer&&C.text.opacityVertexBuffer.updateData(C.text.opacityVertexArray),C.hasIconData()&&C.icon.opacityVertexBuffer&&C.icon.opacityVertexBuffer.updateData(C.icon.opacityVertexArray),C.hasIconCollisionBoxData()&&C.iconCollisionBox.collisionVertexBuffer&&C.iconCollisionBox.collisionVertexBuffer.updateData(C.iconCollisionBox.collisionVertexArray),C.hasTextCollisionBoxData()&&C.textCollisionBox.collisionVertexBuffer&&C.textCollisionBox.collisionVertexBuffer.updateData(C.textCollisionBox.collisionVertexArray),C.bucketInstanceId in this.collisionCircleArrays){var yt=this.collisionCircleArrays[C.bucketInstanceId];C.placementInvProjMatrix=yt.invProjMatrix,C.placementViewportMatrix=yt.viewportMatrix,C.collisionCircleArray=yt.circles,delete this.collisionCircleArrays[C.bucketInstanceId]}},Ct.prototype.symbolFadeChange=function(C){return 0===this.fadeDuration?1:(C-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Ct.prototype.zoomAdjustment=function(C){return Math.max(0,(this.transform.zoom-C)/1.5)},Ct.prototype.hasTransitions=function(C){return this.stale||C-this.lastPlacementChangeTime<this.fadeDuration},Ct.prototype.stillRecent=function(C,z){var F=this.zoomAtLastRecencyCheck===z?1-this.zoomAdjustment(z):1;return this.zoomAtLastRecencyCheck=z,this.commitTime+this.fadeDuration*F>C},Ct.prototype.setStale=function(){this.stale=!0};var lr=Math.pow(2,25),_r=Math.pow(2,24),qr=Math.pow(2,17),Vr=Math.pow(2,16),br=Math.pow(2,9),yr=Math.pow(2,8),kr=Math.pow(2,1);function Cr(C){if(0===C.opacity&&!C.placed)return 0;if(1===C.opacity&&C.placed)return 4294967295;var z=C.placed?1:0,F=Math.floor(127*C.opacity);return F*lr+z*_r+F*qr+z*Vr+F*br+z*yr+F*kr+z}var Ar=0,Yr=function(C){this._sortAcrossTiles="viewport-y"!==C.layout.get("symbol-z-order")&&void 0!==C.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Yr.prototype.continuePlacement=function(C,z,F,q,ae){for(var ue=this._bucketParts;this._currentTileIndex<C.length;)if(z.getBucketParts(ue,q,C[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,ae())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ue.sort(function(Ae,Ue){return Ae.sortKey-Ue.sortKey}));this._currentPartIndex<ue.length;)if(z.placeLayerBucketPart(ue[this._currentPartIndex],this._seenCrossTileIDs,F),this._currentPartIndex++,ae())return!0;return!1};var cn=function(C,z,F,q,ae,ue,de){this.placement=new Ct(C,ae,ue,de),this._currentPlacementIndex=z.length-1,this._forceFullPlacement=F,this._showCollisionBoxes=q,this._done=!1};cn.prototype.isDone=function(){return this._done},cn.prototype.continuePlacement=function(C,z,F){for(var q=this,ae=e.browser.now(),ue=function(){var Ae=e.browser.now()-ae;return!q._forceFullPlacement&&Ae>2};this._currentPlacementIndex>=0;){var de=z[C[this._currentPlacementIndex]],ye=this.placement.collisionIndex.transform.zoom;if("symbol"===de.type&&(!de.minzoom||de.minzoom<=ye)&&(!de.maxzoom||de.maxzoom>ye)){if(this._inProgressLayer||(this._inProgressLayer=new Yr(de)),this._inProgressLayer.continuePlacement(F[de.source],this.placement,this._showCollisionBoxes,de,ue))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},cn.prototype.commit=function(C){return this.placement.commit(C),this.placement};var yn=512/e.EXTENT/2,Kr=function(C,z,F){this.tileID=C,this.indexedSymbolInstances={},this.bucketInstanceId=F;for(var q=0;q<z.length;q++){var ae=z.get(q),ue=ae.key;this.indexedSymbolInstances[ue]||(this.indexedSymbolInstances[ue]=[]),this.indexedSymbolInstances[ue].push({crossTileID:ae.crossTileID,coord:this.getScaledCoordinates(ae,C)})}};Kr.prototype.getScaledCoordinates=function(C,z){var q=yn/Math.pow(2,z.canonical.z-this.tileID.canonical.z);return{x:Math.floor((z.canonical.x*e.EXTENT+C.anchorX)*q),y:Math.floor((z.canonical.y*e.EXTENT+C.anchorY)*q)}},Kr.prototype.findMatches=function(C,z,F){for(var q=this.tileID.canonical.z<z.canonical.z?1:Math.pow(2,this.tileID.canonical.z-z.canonical.z),ae=0;ae<C.length;ae++){var ue=C.get(ae);if(!ue.crossTileID){var de=this.indexedSymbolInstances[ue.key];if(de)for(var ye=this.getScaledCoordinates(ue,z),Ae=0,Ue=de;Ae<Ue.length;Ae+=1){var Ge=Ue[Ae];if(Math.abs(Ge.coord.x-ye.x)<=q&&Math.abs(Ge.coord.y-ye.y)<=q&&!F[Ge.crossTileID]){F[Ge.crossTileID]=!0,ue.crossTileID=Ge.crossTileID;break}}}}};var mn=function(){this.maxCrossTileID=0};mn.prototype.generate=function(){return++this.maxCrossTileID};var jr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};jr.prototype.handleWrapJump=function(C){var z=Math.round((C-this.lng)/360);if(0!==z)for(var F in this.indexes){var q=this.indexes[F],ae={};for(var ue in q){var de=q[ue];de.tileID=de.tileID.unwrapTo(de.tileID.wrap+z),ae[de.tileID.key]=de}this.indexes[F]=ae}this.lng=C},jr.prototype.addBucket=function(C,z,F){if(this.indexes[C.overscaledZ]&&this.indexes[C.overscaledZ][C.key]){if(this.indexes[C.overscaledZ][C.key].bucketInstanceId===z.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(C.overscaledZ,this.indexes[C.overscaledZ][C.key])}for(var q=0;q<z.symbolInstances.length;q++)z.symbolInstances.get(q).crossTileID=0;this.usedCrossTileIDs[C.overscaledZ]||(this.usedCrossTileIDs[C.overscaledZ]={});var ae=this.usedCrossTileIDs[C.overscaledZ];for(var ue in this.indexes){var de=this.indexes[ue];if(Number(ue)>C.overscaledZ)for(var ye in de){var Ae=de[ye];Ae.tileID.isChildOf(C)&&Ae.findMatches(z.symbolInstances,C,ae)}else{var Ue=de[C.scaledTo(Number(ue)).key];Ue&&Ue.findMatches(z.symbolInstances,C,ae)}}for(var Ge=0;Ge<z.symbolInstances.length;Ge++){var nt=z.symbolInstances.get(Ge);nt.crossTileID||(nt.crossTileID=F.generate(),ae[nt.crossTileID]=!0)}return void 0===this.indexes[C.overscaledZ]&&(this.indexes[C.overscaledZ]={}),this.indexes[C.overscaledZ][C.key]=new Kr(C,z.symbolInstances,z.bucketInstanceId),!0},jr.prototype.removeBucketCrossTileIDs=function(C,z){for(var F in z.indexedSymbolInstances)for(var q=0,ae=z.indexedSymbolInstances[F];q<ae.length;q+=1)delete this.usedCrossTileIDs[C][ae[q].crossTileID]},jr.prototype.removeStaleBuckets=function(C){var z=!1;for(var F in this.indexes){var q=this.indexes[F];for(var ae in q)C[q[ae].bucketInstanceId]||(this.removeBucketCrossTileIDs(F,q[ae]),delete q[ae],z=!0)}return z};var Nr=function(){this.layerIndexes={},this.crossTileIDs=new mn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Nr.prototype.addLayer=function(C,z,F){var q=this.layerIndexes[C.id];void 0===q&&(q=this.layerIndexes[C.id]=new jr);var ae=!1,ue={};q.handleWrapJump(F);for(var de=0,ye=z;de<ye.length;de+=1){var Ae=ye[de],Ue=Ae.getBucket(C);Ue&&C.id===Ue.layerIds[0]&&(Ue.bucketInstanceId||(Ue.bucketInstanceId=++this.maxBucketInstanceId),q.addBucket(Ae.tileID,Ue,this.crossTileIDs)&&(ae=!0),ue[Ue.bucketInstanceId]=!0)}return q.removeStaleBuckets(ue)&&(ae=!0),ae},Nr.prototype.pruneUnusedLayers=function(C){var z={};for(var F in C.forEach(function(q){z[q]=!0}),this.layerIndexes)z[F]||delete this.layerIndexes[F]};var nn=function(C,z){return e.emitValidationErrors(C,z&&z.filter(function(F){return"source.canvas"!==F.identifier}))},dn=e.pick(jt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),wn=e.pick(jt,["setCenter","setZoom","setBearing","setPitch"]),ii=function(){var C={},z=e.styleSpec.$version;for(var F in e.styleSpec.$root){var ae,q=e.styleSpec.$root[F];q.required&&null!=(ae="version"===F?z:"array"===q.type?[]:{})&&(C[F]=ae)}return C}(),qn=function(C){function z(F,q){var ae=this;void 0===q&&(q={}),C.call(this),this.map=F,this.dispatcher=new S(Qe(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new k(F._requestManager,q.localIdeographFontFamily),this.lineAtlas=new P(256,512),this.crossTileSymbolIndex=new Nr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var ue=this;this._rtlTextPluginCallback=z.registerForPluginStateChange(function(de){ue.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:de.pluginStatus,pluginURL:de.pluginURL},function(Ae,Ue){if(e.triggerPluginCompletionEvent(Ae),Ue&&Ue.every(function(nt){return nt}))for(var Ge in ue.sourceCaches)ue.sourceCaches[Ge].reload()})}),this.on("data",function(de){if("source"===de.dataType&&"metadata"===de.sourceDataType){var ye=ae.sourceCaches[de.sourceId];if(ye){var Ae=ye.getSource();if(Ae&&Ae.vectorLayerIds)for(var Ue in ae._layers){var Ge=ae._layers[Ue];Ge.source===Ae.id&&ae._validateLayer(Ge)}}}})}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.loadURL=function(F,q){var ae=this;void 0===q&&(q={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var ue="boolean"==typeof q.validate?q.validate:!e.isMapboxURL(F);F=this.map._requestManager.normalizeStyleURL(F,q.accessToken);var de=this.map._requestManager.transformRequest(F,e.ResourceType.Style);this._request=e.getJSON(de,function(ye,Ae){ae._request=null,ye?ae.fire(new e.ErrorEvent(ye)):Ae&&ae._load(Ae,ue)})},z.prototype.loadJSON=function(F,q){var ae=this;void 0===q&&(q={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){ae._request=null,ae._load(F,!1!==q.validate)})},z.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(ii,!1)},z.prototype._load=function(F,q){if(!q||!nn(this,e.validateStyle(F))){for(var ae in this._loaded=!0,this.stylesheet=F,F.sources)this.addSource(ae,F.sources[ae],{validate:!1});F.sprite?this._loadSprite(F.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(F.glyphs);var ue=It(this.stylesheet.layers);this._order=ue.map(function(Ue){return Ue.id}),this._layers={},this._serializedLayers={};for(var de=0,ye=ue;de<ye.length;de+=1){var Ae=ye[de];(Ae=e.createStyleLayer(Ae)).setEventedParent(this,{layer:{id:Ae.id}}),this._layers[Ae.id]=Ae,this._serializedLayers[Ae.id]=Ae.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new O(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},z.prototype._loadSprite=function(F){var q=this;this._spriteRequest=function(ae,ue,de){var ye,Ae,Ue,Ge=e.browser.devicePixelRatio>1?"@2x":"",nt=e.getJSON(ue.transformRequest(ue.normalizeSpriteURL(ae,Ge,".json"),e.ResourceType.SpriteJSON),function(wt,Tt){nt=null,Ue||(Ue=wt,ye=Tt,At())}),xt=e.getImage(ue.transformRequest(ue.normalizeSpriteURL(ae,Ge,".png"),e.ResourceType.SpriteImage),function(wt,Tt){xt=null,Ue||(Ue=wt,Ae=Tt,At())});function At(){if(Ue)de(Ue);else if(ye&&Ae){var wt=e.browser.getImageData(Ae),Tt={};for(var yt in ye){var Ft=ye[yt],Ot=Ft.width,Nt=Ft.height,er=Ft.x,fr=Ft.y,Tr=Ft.sdf,wr=Ft.pixelRatio,Zr=Ft.stretchX,Xr=Ft.stretchY,fn=Ft.content,rn=new e.RGBAImage({width:Ot,height:Nt});e.RGBAImage.copy(wt,rn,{x:er,y:fr},{x:0,y:0},{width:Ot,height:Nt}),Tt[yt]={data:rn,pixelRatio:wr,sdf:Tr,stretchX:Zr,stretchY:Xr,content:fn}}de(null,Tt)}}return{cancel:function(){nt&&(nt.cancel(),nt=null),xt&&(xt.cancel(),xt=null)}}}(F,this.map._requestManager,function(ae,ue){if(q._spriteRequest=null,ae)q.fire(new e.ErrorEvent(ae));else if(ue)for(var de in ue)q.imageManager.addImage(de,ue[de]);q.imageManager.setLoaded(!0),q._availableImages=q.imageManager.listImages(),q.dispatcher.broadcast("setImages",q._availableImages),q.fire(new e.Event("data",{dataType:"style"}))})},z.prototype._validateLayer=function(F){var q=this.sourceCaches[F.source];if(q){var ae=F.sourceLayer;if(ae){var ue=q.getSource();("geojson"===ue.type||ue.vectorLayerIds&&-1===ue.vectorLayerIds.indexOf(ae))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+ae+'" does not exist on source "'+ue.id+'" as specified by style layer "'+F.id+'"')))}}},z.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var F in this.sourceCaches)if(!this.sourceCaches[F].loaded())return!1;return!!this.imageManager.isLoaded()},z.prototype._serializeLayers=function(F){for(var q=[],ae=0,ue=F;ae<ue.length;ae+=1){var ye=this._layers[ue[ae]];"custom"!==ye.type&&q.push(ye.serialize())}return q},z.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var F in this.sourceCaches)if(this.sourceCaches[F].hasTransition())return!0;for(var q in this._layers)if(this._layers[q].hasTransition())return!0;return!1},z.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},z.prototype.update=function(F){if(this._loaded){var q=this._changed;if(this._changed){var ae=Object.keys(this._updatedLayers),ue=Object.keys(this._removedLayers);for(var de in(ae.length||ue.length)&&this._updateWorkerLayers(ae,ue),this._updatedSources){var ye=this._updatedSources[de];"reload"===ye?this._reloadSource(de):"clear"===ye&&this._clearSource(de)}for(var Ae in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Ae].updateTransitions(F);this.light.updateTransitions(F),this._resetUpdates()}for(var Ue in this.sourceCaches)this.sourceCaches[Ue].used=!1;for(var Ge=0,nt=this._order;Ge<nt.length;Ge+=1){var At=this._layers[nt[Ge]];At.recalculate(F,this._availableImages),!At.isHidden(F.zoom)&&At.source&&(this.sourceCaches[At.source].used=!0)}this.light.recalculate(F),this.z=F.zoom,q&&this.fire(new e.Event("data",{dataType:"style"}))}},z.prototype._updateTilesForChangedImages=function(){var F=Object.keys(this._changedImages);if(F.length){for(var q in this.sourceCaches)this.sourceCaches[q].reloadTilesForDependencies(["icons","patterns"],F);this._changedImages={}}},z.prototype._updateWorkerLayers=function(F,q){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(F),removedIds:q})},z.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},z.prototype.setState=function(F){var q=this;if(this._checkLoaded(),nn(this,e.validateStyle(F)))return!1;(F=e.clone$1(F)).layers=It(F.layers);var ae=function(C,z){if(!C)return[{command:jt.setStyle,args:[z]}];var F=[];try{if(!e.deepEqual(C.version,z.version))return[{command:jt.setStyle,args:[z]}];e.deepEqual(C.center,z.center)||F.push({command:jt.setCenter,args:[z.center]}),e.deepEqual(C.zoom,z.zoom)||F.push({command:jt.setZoom,args:[z.zoom]}),e.deepEqual(C.bearing,z.bearing)||F.push({command:jt.setBearing,args:[z.bearing]}),e.deepEqual(C.pitch,z.pitch)||F.push({command:jt.setPitch,args:[z.pitch]}),e.deepEqual(C.sprite,z.sprite)||F.push({command:jt.setSprite,args:[z.sprite]}),e.deepEqual(C.glyphs,z.glyphs)||F.push({command:jt.setGlyphs,args:[z.glyphs]}),e.deepEqual(C.transition,z.transition)||F.push({command:jt.setTransition,args:[z.transition]}),e.deepEqual(C.light,z.light)||F.push({command:jt.setLight,args:[z.light]});var q={},ae=[];!function(de,ye,Ae,Ue){var Ge;for(Ge in ye=ye||{},de=de||{})de.hasOwnProperty(Ge)&&(ye.hasOwnProperty(Ge)||Re(Ge,Ae,Ue));for(Ge in ye)ye.hasOwnProperty(Ge)&&(de.hasOwnProperty(Ge)?e.deepEqual(de[Ge],ye[Ge])||("geojson"===de[Ge].type&&"geojson"===ye[Ge].type&&_t(de,ye,Ge)?Ae.push({command:jt.setGeoJSONSourceData,args:[Ge,ye[Ge].data]}):lt(Ge,ye,Ae,Ue)):Zt(Ge,ye,Ae))}(C.sources,z.sources,ae,q);var ue=[];C.layers&&C.layers.forEach(function(de){q[de.source]?F.push({command:jt.removeLayer,args:[de.id]}):ue.push(de)}),F=F.concat(ae),function(de,ye,Ae){ye=ye||[];var Ue,Ge,nt,xt,At,wt,Tt,yt=(de=de||[]).map(Vt),Ft=ye.map(Vt),Ot=de.reduce(nr,{}),Nt=ye.reduce(nr,{}),er=yt.slice(),fr=Object.create(null);for(Ue=0,Ge=0;Ue<yt.length;Ue++)Nt.hasOwnProperty(nt=yt[Ue])?Ge++:(Ae.push({command:jt.removeLayer,args:[nt]}),er.splice(er.indexOf(nt,Ge),1));for(Ue=0,Ge=0;Ue<Ft.length;Ue++)er[er.length-1-Ue]!==(nt=Ft[Ft.length-1-Ue])&&(Ot.hasOwnProperty(nt)?(Ae.push({command:jt.removeLayer,args:[nt]}),er.splice(er.lastIndexOf(nt,er.length-Ge),1)):Ge++,Ae.push({command:jt.addLayer,args:[Nt[nt],wt=er[er.length-Ue]]}),er.splice(er.length-Ue,0,nt),fr[nt]=!0);for(Ue=0;Ue<Ft.length;Ue++)if(xt=Ot[nt=Ft[Ue]],At=Nt[nt],!fr[nt]&&!e.deepEqual(xt,At))if(e.deepEqual(xt.source,At.source)&&e.deepEqual(xt["source-layer"],At["source-layer"])&&e.deepEqual(xt.type,At.type)){for(Tt in Dt(xt.layout,At.layout,Ae,nt,null,jt.setLayoutProperty),Dt(xt.paint,At.paint,Ae,nt,null,jt.setPaintProperty),e.deepEqual(xt.filter,At.filter)||Ae.push({command:jt.setFilter,args:[nt,At.filter]}),e.deepEqual(xt.minzoom,At.minzoom)&&e.deepEqual(xt.maxzoom,At.maxzoom)||Ae.push({command:jt.setLayerZoomRange,args:[nt,At.minzoom,At.maxzoom]}),xt)xt.hasOwnProperty(Tt)&&"layout"!==Tt&&"paint"!==Tt&&"filter"!==Tt&&"metadata"!==Tt&&"minzoom"!==Tt&&"maxzoom"!==Tt&&(0===Tt.indexOf("paint.")?Dt(xt[Tt],At[Tt],Ae,nt,Tt.slice(6),jt.setPaintProperty):e.deepEqual(xt[Tt],At[Tt])||Ae.push({command:jt.setLayerProperty,args:[nt,Tt,At[Tt]]}));for(Tt in At)At.hasOwnProperty(Tt)&&!xt.hasOwnProperty(Tt)&&"layout"!==Tt&&"paint"!==Tt&&"filter"!==Tt&&"metadata"!==Tt&&"minzoom"!==Tt&&"maxzoom"!==Tt&&(0===Tt.indexOf("paint.")?Dt(xt[Tt],At[Tt],Ae,nt,Tt.slice(6),jt.setPaintProperty):e.deepEqual(xt[Tt],At[Tt])||Ae.push({command:jt.setLayerProperty,args:[nt,Tt,At[Tt]]}))}else Ae.push({command:jt.removeLayer,args:[nt]}),wt=er[er.lastIndexOf(nt)+1],Ae.push({command:jt.addLayer,args:[At,wt]})}(ue,z.layers,F)}catch(de){console.warn("Unable to compute style diff:",de),F=[{command:jt.setStyle,args:[z]}]}return F}(this.serialize(),F).filter(function(de){return!(de.command in wn)});if(0===ae.length)return!1;var ue=ae.filter(function(de){return!(de.command in dn)});if(ue.length>0)throw new Error("Unimplemented: "+ue.map(function(de){return de.command}).join(", ")+".");return ae.forEach(function(de){"setTransition"!==de.command&&q[de.command].apply(q,de.args)}),this.stylesheet=F,!0},z.prototype.addImage=function(F,q){if(this.getImage(F))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(F,q),this._availableImages=this.imageManager.listImages(),this._changedImages[F]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},z.prototype.updateImage=function(F,q){this.imageManager.updateImage(F,q)},z.prototype.getImage=function(F){return this.imageManager.getImage(F)},z.prototype.removeImage=function(F){if(!this.getImage(F))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(F),this._availableImages=this.imageManager.listImages(),this._changedImages[F]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},z.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},z.prototype.addSource=function(F,q,ae){var ue=this;if(void 0===ae&&(ae={}),this._checkLoaded(),void 0!==this.sourceCaches[F])throw new Error("There is already a source with this ID");if(!q.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(q).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(q.type)>=0&&this._validate(e.validateStyle.source,"sources."+F,q,null,ae))){this.map&&this.map._collectResourceTiming&&(q.collectResourceTiming=!0);var de=this.sourceCaches[F]=new Xe(F,q,this.dispatcher);de.style=this,de.setEventedParent(this,function(){return{isSourceLoaded:ue.loaded(),source:de.serialize(),sourceId:F}}),de.onAdd(this.map),this._changed=!0}},z.prototype.removeSource=function(F){if(this._checkLoaded(),void 0===this.sourceCaches[F])throw new Error("There is no source with this ID");for(var q in this._layers)if(this._layers[q].source===F)return this.fire(new e.ErrorEvent(new Error('Source "'+F+'" cannot be removed while layer "'+q+'" is using it.')));var ae=this.sourceCaches[F];delete this.sourceCaches[F],delete this._updatedSources[F],ae.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:F})),ae.setEventedParent(null),ae.clearTiles(),ae.onRemove&&ae.onRemove(this.map),this._changed=!0},z.prototype.setGeoJSONSourceData=function(F,q){this._checkLoaded(),this.sourceCaches[F].getSource().setData(q),this._changed=!0},z.prototype.getSource=function(F){return this.sourceCaches[F]&&this.sourceCaches[F].getSource()},z.prototype.addLayer=function(F,q,ae){void 0===ae&&(ae={}),this._checkLoaded();var ue=F.id;if(this.getLayer(ue))this.fire(new e.ErrorEvent(new Error('Layer with id "'+ue+'" already exists on this map')));else{var de;if("custom"===F.type){if(nn(this,e.validateCustomStyleLayer(F)))return;de=e.createStyleLayer(F)}else{if("object"==typeof F.source&&(this.addSource(ue,F.source),F=e.clone$1(F),F=e.extend(F,{source:ue})),this._validate(e.validateStyle.layer,"layers."+ue,F,{arrayIndex:-1},ae))return;de=e.createStyleLayer(F),this._validateLayer(de),de.setEventedParent(this,{layer:{id:ue}}),this._serializedLayers[de.id]=de.serialize()}var ye=q?this._order.indexOf(q):this._order.length;if(q&&-1===ye)this.fire(new e.ErrorEvent(new Error('Layer with id "'+q+'" does not exist on this map.')));else{if(this._order.splice(ye,0,ue),this._layerOrderChanged=!0,this._layers[ue]=de,this._removedLayers[ue]&&de.source&&"custom"!==de.type){var Ae=this._removedLayers[ue];delete this._removedLayers[ue],Ae.type!==de.type?this._updatedSources[de.source]="clear":(this._updatedSources[de.source]="reload",this.sourceCaches[de.source].pause())}this._updateLayer(de),de.onAdd&&de.onAdd(this.map)}}},z.prototype.moveLayer=function(F,q){if(this._checkLoaded(),this._changed=!0,this._layers[F]){if(F!==q){var ae=this._order.indexOf(F);this._order.splice(ae,1);var ue=q?this._order.indexOf(q):this._order.length;q&&-1===ue?this.fire(new e.ErrorEvent(new Error('Layer with id "'+q+'" does not exist on this map.'))):(this._order.splice(ue,0,F),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be moved.")))},z.prototype.removeLayer=function(F){this._checkLoaded();var q=this._layers[F];if(q){q.setEventedParent(null);var ae=this._order.indexOf(F);this._order.splice(ae,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[F]=q,delete this._layers[F],delete this._serializedLayers[F],delete this._updatedLayers[F],delete this._updatedPaintProps[F],q.onRemove&&q.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be removed.")))},z.prototype.getLayer=function(F){return this._layers[F]},z.prototype.hasLayer=function(F){return F in this._layers},z.prototype.setLayerZoomRange=function(F,q,ae){this._checkLoaded();var ue=this.getLayer(F);ue?ue.minzoom===q&&ue.maxzoom===ae||(null!=q&&(ue.minzoom=q),null!=ae&&(ue.maxzoom=ae),this._updateLayer(ue)):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot have zoom extent.")))},z.prototype.setFilter=function(F,q,ae){void 0===ae&&(ae={}),this._checkLoaded();var ue=this.getLayer(F);if(ue){if(!e.deepEqual(ue.filter,q))return null==q?(ue.filter=void 0,void this._updateLayer(ue)):void(this._validate(e.validateStyle.filter,"layers."+ue.id+".filter",q,null,ae)||(ue.filter=e.clone$1(q),this._updateLayer(ue)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be filtered.")))},z.prototype.getFilter=function(F){return e.clone$1(this.getLayer(F).filter)},z.prototype.setLayoutProperty=function(F,q,ae,ue){void 0===ue&&(ue={}),this._checkLoaded();var de=this.getLayer(F);de?e.deepEqual(de.getLayoutProperty(q),ae)||(de.setLayoutProperty(q,ae,ue),this._updateLayer(de)):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be styled.")))},z.prototype.getLayoutProperty=function(F,q){var ae=this.getLayer(F);if(ae)return ae.getLayoutProperty(q);this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style.")))},z.prototype.setPaintProperty=function(F,q,ae,ue){void 0===ue&&(ue={}),this._checkLoaded();var de=this.getLayer(F);de?e.deepEqual(de.getPaintProperty(q),ae)||(de.setPaintProperty(q,ae,ue)&&this._updateLayer(de),this._changed=!0,this._updatedPaintProps[F]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be styled.")))},z.prototype.getPaintProperty=function(F,q){return this.getLayer(F).getPaintProperty(q)},z.prototype.setFeatureState=function(F,q){this._checkLoaded();var ae=F.source,ue=F.sourceLayer,de=this.sourceCaches[ae];if(void 0!==de){var ye=de.getSource().type;"geojson"===ye&&ue?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==ye||ue?(void 0===F.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),de.setFeatureState(ue,F.id,q)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ae+"' does not exist in the map's style.")))},z.prototype.removeFeatureState=function(F,q){this._checkLoaded();var ae=F.source,ue=this.sourceCaches[ae];if(void 0!==ue){var de=ue.getSource().type,ye="vector"===de?F.sourceLayer:void 0;"vector"!==de||ye?q&&"string"!=typeof F.id&&"number"!=typeof F.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):ue.removeFeatureState(ye,F.id,q):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+ae+"' does not exist in the map's style.")))},z.prototype.getFeatureState=function(F){this._checkLoaded();var q=F.source,ae=F.sourceLayer,ue=this.sourceCaches[q];if(void 0!==ue){if("vector"!==ue.getSource().type||ae)return void 0===F.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),ue.getFeatureState(ae,F.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+q+"' does not exist in the map's style.")))},z.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},z.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(F){return F.serialize()}),layers:this._serializeLayers(this._order)},function(F){return void 0!==F})},z.prototype._updateLayer=function(F){this._updatedLayers[F.id]=!0,F.source&&!this._updatedSources[F.source]&&"raster"!==this.sourceCaches[F.source].getSource().type&&(this._updatedSources[F.source]="reload",this.sourceCaches[F.source].pause()),this._changed=!0},z.prototype._flattenAndSortRenderedFeatures=function(F){for(var q=this,ae=function(fn){return"fill-extrusion"===q._layers[fn].type},ue={},de=[],ye=this._order.length-1;ye>=0;ye--){var Ae=this._order[ye];if(ae(Ae)){ue[Ae]=ye;for(var Ue=0,Ge=F;Ue<Ge.length;Ue+=1){var nt=Ge[Ue][Ae];if(nt)for(var xt=0,At=nt;xt<At.length;xt+=1)de.push(At[xt])}}}de.sort(function(fn,rn){return rn.intersectionZ-fn.intersectionZ});for(var Tt=[],yt=this._order.length-1;yt>=0;yt--){var Ft=this._order[yt];if(ae(Ft))for(var Ot=de.length-1;Ot>=0;Ot--){var Nt=de[Ot].feature;if(ue[Nt.layer.id]<yt)break;Tt.push(Nt),de.pop()}else for(var er=0,fr=F;er<fr.length;er+=1){var Tr=fr[er][Ft];if(Tr)for(var wr=0,Zr=Tr;wr<Zr.length;wr+=1)Tt.push(Zr[wr].feature)}}return Tt},z.prototype.queryRenderedFeatures=function(F,q,ae){q&&q.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",q.filter,null,q);var ue={};if(q&&q.layers){if(!Array.isArray(q.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var de=0,ye=q.layers;de<ye.length;de+=1){var Ae=ye[de],Ue=this._layers[Ae];if(!Ue)return this.fire(new e.ErrorEvent(new Error("The layer '"+Ae+"' does not exist in the map's style and cannot be queried for features."))),[];ue[Ue.source]=!0}}var Ge=[];for(var nt in q.availableImages=this._availableImages,this.sourceCaches)q.layers&&!ue[nt]||Ge.push(U(this.sourceCaches[nt],this._layers,this._serializedLayers,F,q,ae));return this.placement&&Ge.push(function(xt,At,wt,Tt,yt,Ft,Ot){for(var Nt={},er=Ft.queryRenderedSymbols(Tt),fr=[],Tr=0,wr=Object.keys(er).map(Number);Tr<wr.length;Tr+=1)fr.push(Ot[wr[Tr]]);fr.sort(Q);for(var Xr=function(){var oi=rn[fn],Ur=oi.featureIndex.lookupSymbolFeatures(er[oi.bucketInstanceId],At,oi.bucketIndex,oi.sourceLayerIndex,yt.filter,yt.layers,yt.availableImages,xt);for(var _n in Ur){var Yn=Nt[_n]=Nt[_n]||[],Vn=Ur[_n];Vn.sort(function(Xn,mi){var pi=oi.featureSortOrder;if(pi){var Mi=pi.indexOf(Xn.featureIndex);return pi.indexOf(mi.featureIndex)-Mi}return mi.featureIndex-Xn.featureIndex});for(var Qn=0,li=Vn;Qn<li.length;Qn+=1)Yn.push(li[Qn])}},fn=0,rn=fr;fn<rn.length;fn+=1)Xr();var Nn=function(oi){Nt[oi].forEach(function(Ur){var _n=Ur.feature,Vn=wt[xt[oi].source].getFeatureState(_n.layer["source-layer"],_n.id);_n.source=_n.layer.source,_n.layer["source-layer"]&&(_n.sourceLayer=_n.layer["source-layer"]),_n.state=Vn})};for(var Gn in Nt)Nn(Gn);return Nt}(this._layers,this._serializedLayers,this.sourceCaches,F,q,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Ge)},z.prototype.querySourceFeatures=function(F,q){q&&q.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",q.filter,null,q);var ae=this.sourceCaches[F];return ae?function(ue,de){for(var ye=ue.getRenderableIds().map(function(At){return ue.getTileByID(At)}),Ae=[],Ue={},Ge=0;Ge<ye.length;Ge++){var nt=ye[Ge],xt=nt.tileID.canonical.key;Ue[xt]||(Ue[xt]=!0,nt.querySourceFeatures(Ae,de))}return Ae}(ae,q):[]},z.prototype.addSourceType=function(F,q,ae){return z.getSourceType(F)?ae(new Error('A source type called "'+F+'" already exists.')):(z.setSourceType(F,q),q.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:F,url:q.workerSourceURL},ae):ae(null,null))},z.prototype.getLight=function(){return this.light.getLight()},z.prototype.setLight=function(F,q){void 0===q&&(q={}),this._checkLoaded();var ae=this.light.getLight(),ue=!1;for(var de in F)if(!e.deepEqual(F[de],ae[de])){ue=!0;break}if(ue){var ye={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(F,q),this.light.updateTransitions(ye)}},z.prototype._validate=function(F,q,ae,ue,de){return void 0===de&&(de={}),(!de||!1!==de.validate)&&nn(this,F.call(e.validateStyle,e.extend({key:q,style:this.serialize(),value:ae,styleSpec:e.styleSpec},ue)))},z.prototype._remove=function(){for(var F in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[F].setEventedParent(null);for(var q in this.sourceCaches)this.sourceCaches[q].clearTiles(),this.sourceCaches[q].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},z.prototype._clearSource=function(F){this.sourceCaches[F].clearTiles()},z.prototype._reloadSource=function(F){this.sourceCaches[F].resume(),this.sourceCaches[F].reload()},z.prototype._updateSources=function(F){for(var q in this.sourceCaches)this.sourceCaches[q].update(F)},z.prototype._generateCollisionBoxes=function(){for(var F in this.sourceCaches)this._reloadSource(F)},z.prototype._updatePlacement=function(F,q,ae,ue,de){void 0===de&&(de=!1);for(var ye=!1,Ae=!1,Ue={},Ge=0,nt=this._order;Ge<nt.length;Ge+=1){var At=this._layers[nt[Ge]];if("symbol"===At.type){if(!Ue[At.source]){var wt=this.sourceCaches[At.source];Ue[At.source]=wt.getRenderableIds(!0).map(function(er){return wt.getTileByID(er)}).sort(function(er,fr){return fr.tileID.overscaledZ-er.tileID.overscaledZ||(er.tileID.isLessThan(fr.tileID)?-1:1)})}var Tt=this.crossTileSymbolIndex.addLayer(At,Ue[At.source],F.center.lng);ye=ye||Tt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((de=de||this._layerOrderChanged||0===ae)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),F.zoom))&&(this.pauseablePlacement=new cn(F,this._order,de,q,ae,ue,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ue),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Ae=!0),ye&&this.pauseablePlacement.placement.setStale()),Ae||ye)for(var yt=0,Ft=this._order;yt<Ft.length;yt+=1){var Nt=this._layers[Ft[yt]];"symbol"===Nt.type&&this.placement.updateLayerOpacities(Nt,Ue[Nt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},z.prototype._releaseSymbolFadeTiles=function(){for(var F in this.sourceCaches)this.sourceCaches[F].releaseSymbolFadeTiles()},z.prototype.getImages=function(F,q,ae){this.imageManager.getImages(q.icons,ae),this._updateTilesForChangedImages();var ue=this.sourceCaches[q.source];ue&&ue.setDependencies(q.tileID.key,q.type,q.icons)},z.prototype.getGlyphs=function(F,q,ae){this.glyphManager.getGlyphs(q.stacks,ae)},z.prototype.getResource=function(F,q,ae){return e.makeRequest(q,ae)},z}(e.Evented);qn.getSourceType=function(C){return D[C]},qn.setSourceType=function(C,z){D[C]=z},qn.registerForPluginStateChange=e.registerForPluginStateChange;var gn=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),ei=Ui("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),ui=Ui("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Yi=Ui("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ea=Ui("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),ea=Ui("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ga=Ui("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),ki=Ui("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Fi=Ui("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),oo=Ui("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),zo=Ui("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ho=Ui("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Ua=Ui("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),qa=Ui("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Do=Ui("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ji=Ui("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),_o=Ui("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),so=Ui("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),ma=Ui("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ga=Ui("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),lo=Ui("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),yo=Ui("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Ia=Ui("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),la=Ui("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Va=Ui("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),ps=Ui("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),vs=Ui("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function Ui(C,z){var F=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,q={};return{fragmentSource:C=C.replace(F,function(ae,ue,de,ye,Ae){return q[Ae]=!0,"define"===ue?"\n#ifndef HAS_UNIFORM_u_"+Ae+"\nvarying "+de+" "+ye+" "+Ae+";\n#else\nuniform "+de+" "+ye+" u_"+Ae+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Ae+"\n    "+de+" "+ye+" "+Ae+" = u_"+Ae+";\n#endif\n"}),vertexSource:z=z.replace(F,function(ae,ue,de,ye,Ae){var Ue="float"===ye?"vec2":"vec4",Ge=Ae.match(/color/)?"color":Ue;return q[Ae]?"define"===ue?"\n#ifndef HAS_UNIFORM_u_"+Ae+"\nuniform lowp float u_"+Ae+"_t;\nattribute "+de+" "+Ue+" a_"+Ae+";\nvarying "+de+" "+ye+" "+Ae+";\n#else\nuniform "+de+" "+ye+" u_"+Ae+";\n#endif\n":"vec4"===Ge?"\n#ifndef HAS_UNIFORM_u_"+Ae+"\n    "+Ae+" = a_"+Ae+";\n#else\n    "+de+" "+ye+" "+Ae+" = u_"+Ae+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Ae+"\n    "+Ae+" = unpack_mix_"+Ge+"(a_"+Ae+", u_"+Ae+"_t);\n#else\n    "+de+" "+ye+" "+Ae+" = u_"+Ae+";\n#endif\n":"define"===ue?"\n#ifndef HAS_UNIFORM_u_"+Ae+"\nuniform lowp float u_"+Ae+"_t;\nattribute "+de+" "+Ue+" a_"+Ae+";\n#else\nuniform "+de+" "+ye+" u_"+Ae+";\n#endif\n":"vec4"===Ge?"\n#ifndef HAS_UNIFORM_u_"+Ae+"\n    "+de+" "+ye+" "+Ae+" = a_"+Ae+";\n#else\n    "+de+" "+ye+" "+Ae+" = u_"+Ae+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Ae+"\n    "+de+" "+ye+" "+Ae+" = unpack_mix_"+Ge+"(a_"+Ae+", u_"+Ae+"_t);\n#else\n    "+de+" "+ye+" "+Ae+" = u_"+Ae+";\n#endif\n"})}}var ss=Object.freeze({__proto__:null,prelude:ei,background:ui,backgroundPattern:Yi,circle:Ea,clippingMask:ea,heatmap:ga,heatmapTexture:ki,collisionBox:Fi,collisionCircle:oo,debug:zo,fill:Ho,fillOutline:Ua,fillOutlinePattern:qa,fillPattern:Do,fillExtrusion:ji,fillExtrusionPattern:_o,hillshadePrepare:so,hillshade:ma,line:Ga,lineGradient:lo,linePattern:yo,lineSDF:Ia,raster:la,symbolIcon:Va,symbolSDF:ps,symbolTextAndIcon:vs}),Xo=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Xo.prototype.bind=function(C,z,F,q,ae,ue,de,ye){this.context=C;for(var Ae=this.boundPaintVertexBuffers.length!==q.length,Ue=0;!Ae&&Ue<q.length;Ue++)this.boundPaintVertexBuffers[Ue]!==q[Ue]&&(Ae=!0);C.extVertexArrayObject&&this.vao&&this.boundProgram===z&&this.boundLayoutVertexBuffer===F&&!Ae&&this.boundIndexBuffer===ae&&this.boundVertexOffset===ue&&this.boundDynamicVertexBuffer===de&&this.boundDynamicVertexBuffer2===ye?(C.bindVertexArrayOES.set(this.vao),de&&de.bind(),ae&&ae.dynamicDraw&&ae.bind(),ye&&ye.bind()):this.freshBind(z,F,q,ae,ue,de,ye)},Xo.prototype.freshBind=function(C,z,F,q,ae,ue,de){var ye,Ae=C.numAttributes,Ue=this.context,Ge=Ue.gl;if(Ue.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ue.extVertexArrayObject.createVertexArrayOES(),Ue.bindVertexArrayOES.set(this.vao),ye=0,this.boundProgram=C,this.boundLayoutVertexBuffer=z,this.boundPaintVertexBuffers=F,this.boundIndexBuffer=q,this.boundVertexOffset=ae,this.boundDynamicVertexBuffer=ue,this.boundDynamicVertexBuffer2=de;else{ye=Ue.currentNumAttributes||0;for(var nt=Ae;nt<ye;nt++)Ge.disableVertexAttribArray(nt)}z.enableAttributes(Ge,C);for(var xt=0,At=F;xt<At.length;xt+=1)At[xt].enableAttributes(Ge,C);ue&&ue.enableAttributes(Ge,C),de&&de.enableAttributes(Ge,C),z.bind(),z.setVertexAttribPointers(Ge,C,ae);for(var wt=0,Tt=F;wt<Tt.length;wt+=1){var yt=Tt[wt];yt.bind(),yt.setVertexAttribPointers(Ge,C,ae)}ue&&(ue.bind(),ue.setVertexAttribPointers(Ge,C,ae)),q&&q.bind(),de&&(de.bind(),de.setVertexAttribPointers(Ge,C,ae)),Ue.currentNumAttributes=Ae},Xo.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ys=function(C,z,F,q,ae){var ue=C.gl;this.program=ue.createProgram();var de=F?F.defines():[];ae&&de.push("#define OVERDRAW_INSPECTOR;");var ye=de.concat(ei.fragmentSource,z.fragmentSource).join("\n"),Ae=de.concat(ei.vertexSource,z.vertexSource).join("\n"),Ue=ue.createShader(ue.FRAGMENT_SHADER);if(ue.isContextLost())this.failedToCreate=!0;else{ue.shaderSource(Ue,ye),ue.compileShader(Ue),ue.attachShader(this.program,Ue);var Ge=ue.createShader(ue.VERTEX_SHADER);if(ue.isContextLost())this.failedToCreate=!0;else{ue.shaderSource(Ge,Ae),ue.compileShader(Ge),ue.attachShader(this.program,Ge);for(var nt=F?F.layoutAttributes:[],xt=0;xt<nt.length;xt++)ue.bindAttribLocation(this.program,xt,nt[xt].name);ue.linkProgram(this.program),ue.deleteShader(Ge),ue.deleteShader(Ue),this.numAttributes=ue.getProgramParameter(this.program,ue.ACTIVE_ATTRIBUTES),this.attributes={};for(var At={},wt=0;wt<this.numAttributes;wt++){var Tt=ue.getActiveAttrib(this.program,wt);Tt&&(this.attributes[Tt.name]=ue.getAttribLocation(this.program,Tt.name))}for(var yt=ue.getProgramParameter(this.program,ue.ACTIVE_UNIFORMS),Ft=0;Ft<yt;Ft++){var Ot=ue.getActiveUniform(this.program,Ft);Ot&&(At[Ot.name]=ue.getUniformLocation(this.program,Ot.name))}this.fixedUniforms=q(C,At),this.binderUniforms=F?F.getUniforms(C,At):[]}}};function xs(C,z,F){var q=1/Lr(F,1,z.transform.tileZoom),ae=Math.pow(2,F.tileID.overscaledZ),ue=F.tileSize*Math.pow(2,z.transform.tileZoom)/ae,de=ue*(F.tileID.canonical.x+F.tileID.wrap*ae),ye=ue*F.tileID.canonical.y;return{u_image:0,u_texsize:F.imageAtlasTexture.size,u_scale:[q,C.fromScale,C.toScale],u_fade:C.t,u_pixel_coord_upper:[de>>16,ye>>16],u_pixel_coord_lower:[65535&de,65535&ye]}}ys.prototype.draw=function(C,z,F,q,ae,ue,de,ye,Ae,Ue,Ge,nt,xt,At,wt,Tt){var yt,Ft=C.gl;if(!this.failedToCreate){for(var Ot in C.program.set(this.program),C.setDepthMode(F),C.setStencilMode(q),C.setColorMode(ae),C.setCullFace(ue),this.fixedUniforms)this.fixedUniforms[Ot].set(de[Ot]);At&&At.setUniforms(C,this.binderUniforms,nt,{zoom:xt});for(var Nt=(yt={},yt[Ft.LINES]=2,yt[Ft.TRIANGLES]=3,yt[Ft.LINE_STRIP]=1,yt)[z],er=0,fr=Ge.get();er<fr.length;er+=1){var Tr=fr[er],wr=Tr.vaos||(Tr.vaos={});(wr[ye]||(wr[ye]=new Xo)).bind(C,this,Ae,At?At.getPaintVertexBuffers():[],Ue,Tr.vertexOffset,wt,Tt),Ft.drawElements(z,Tr.primitiveLength*Nt,Ft.UNSIGNED_SHORT,Tr.primitiveOffset*Nt*2)}}};var ds=function(C,z,F,q){var ae=z.style.light,ue=ae.properties.get("position"),de=[ue.x,ue.y,ue.z],ye=e.create$1();"viewport"===ae.properties.get("anchor")&&e.fromRotation(ye,-z.transform.angle),e.transformMat3(de,de,ye);var Ae=ae.properties.get("color");return{u_matrix:C,u_lightpos:de,u_lightintensity:ae.properties.get("intensity"),u_lightcolor:[Ae.r,Ae.g,Ae.b],u_vertical_gradient:+F,u_opacity:q}},bs=function(C,z,F,q,ae,ue,de){return e.extend(ds(C,z,F,q),xs(ue,z,de),{u_height_factor:-Math.pow(2,ae.overscaledZ)/de.tileSize/8})},wo=function(C){return{u_matrix:C}},To=function(C,z,F,q){return e.extend(wo(C),xs(F,z,q))},Ro=function(C,z){return{u_matrix:C,u_world:z}},Fo=function(C,z,F,q,ae){return e.extend(To(C,z,F,q),{u_world:ae})},Bo=function(C,z,F,q){var ae,ue,de=C.transform;if("map"===q.paint.get("circle-pitch-alignment")){var ye=Lr(F,1,de.zoom);ae=!0,ue=[ye,ye]}else ae=!1,ue=de.pixelsToGLUnits;return{u_camera_to_center_distance:de.cameraToCenterDistance,u_scale_with_map:+("map"===q.paint.get("circle-pitch-scale")),u_matrix:C.translatePosMatrix(z.posMatrix,F,q.paint.get("circle-translate"),q.paint.get("circle-translate-anchor")),u_pitch_with_map:+ae,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:ue}},Zo=function(C,z,F){var q=Lr(F,1,z.zoom),ae=Math.pow(2,z.zoom-F.tileID.overscaledZ),ue=F.tileID.overscaleFactor();return{u_matrix:C,u_camera_to_center_distance:z.cameraToCenterDistance,u_pixels_to_tile_units:q,u_extrude_scale:[z.pixelsToGLUnits[0]/(q*ae),z.pixelsToGLUnits[1]/(q*ae)],u_overscale_factor:ue}},co=function(C,z,F){return{u_matrix:C,u_inv_matrix:z,u_camera_to_center_distance:F.cameraToCenterDistance,u_viewport_size:[F.width,F.height]}},ls=function(C,z,F){return void 0===F&&(F=1),{u_matrix:C,u_color:z,u_overlay:0,u_overlay_scale:F}},no=function(C){return{u_matrix:C}},No=function(C,z,F,q){return{u_matrix:C,u_extrude_scale:Lr(z,1,F),u_intensity:q}};function cs(C,z){var F=Math.pow(2,z.canonical.z),q=z.canonical.y;return[new e.MercatorCoordinate(0,q/F).toLngLat().lat,new e.MercatorCoordinate(0,(q+1)/F).toLngLat().lat]}var ko=function(C,z,F){var q=C.transform;return{u_matrix:it(C,z,F),u_ratio:1/Lr(z,1,q.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/q.pixelsToGLUnits[0],1/q.pixelsToGLUnits[1]]}},Bi=function(C,z,F){return e.extend(ko(C,z,F),{u_image:0})},je=function(C,z,F,q){var ae=C.transform,ue=Ke(z,ae);return{u_matrix:it(C,z,F),u_texsize:z.imageAtlasTexture.size,u_ratio:1/Lr(z,1,ae.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[ue,q.fromScale,q.toScale],u_fade:q.t,u_units_to_pixels:[1/ae.pixelsToGLUnits[0],1/ae.pixelsToGLUnits[1]]}},qe=function(C,z,F,q,ae){var de=C.lineAtlas,ye=Ke(z,C.transform),Ae="round"===F.layout.get("line-cap"),Ue=de.getDash(q.from,Ae),Ge=de.getDash(q.to,Ae),nt=Ue.width*ae.fromScale,xt=Ge.width*ae.toScale;return e.extend(ko(C,z,F),{u_patternscale_a:[ye/nt,-Ue.height/2],u_patternscale_b:[ye/xt,-Ge.height/2],u_sdfgamma:de.width/(256*Math.min(nt,xt)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ue.y,u_tex_y_b:Ge.y,u_mix:ae.t})};function Ke(C,z){return 1/Lr(C,1,z.tileZoom)}function it(C,z,F){return C.translatePosMatrix(z.tileID.posMatrix,z,F.paint.get("line-translate"),F.paint.get("line-translate-anchor"))}var gt=function(C,z,F,q,ae){return{u_matrix:C,u_tl_parent:z,u_scale_parent:F,u_buffer_scale:1,u_fade_t:q.mix,u_opacity:q.opacity*ae.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ae.paint.get("raster-brightness-min"),u_brightness_high:ae.paint.get("raster-brightness-max"),u_saturation_factor:(de=ae.paint.get("raster-saturation"),de>0?1-1/(1.001-de):-de),u_contrast_factor:(ue=ae.paint.get("raster-contrast"),ue>0?1/(1-ue):1+ue),u_spin_weights:ht(ae.paint.get("raster-hue-rotate"))};var ue,de};function ht(C){C*=Math.PI/180;var z=Math.sin(C),F=Math.cos(C);return[(2*F+1)/3,(-Math.sqrt(3)*z-F+1)/3,(Math.sqrt(3)*z-F+1)/3]}var kt,Jt=function(C,z,F,q,ae,ue,de,ye,Ae,Ue){var Ge=ae.transform;return{u_is_size_zoom_constant:+("constant"===C||"source"===C),u_is_size_feature_constant:+("constant"===C||"camera"===C),u_size_t:z?z.uSizeT:0,u_size:z?z.uSize:0,u_camera_to_center_distance:Ge.cameraToCenterDistance,u_pitch:Ge.pitch/360*2*Math.PI,u_rotate_symbol:+F,u_aspect_ratio:Ge.width/Ge.height,u_fade_change:ae.options.fadeDuration?ae.symbolFadeChange:1,u_matrix:ue,u_label_plane_matrix:de,u_coord_matrix:ye,u_is_text:+Ae,u_pitch_with_map:+q,u_texsize:Ue,u_texture:0}},Qt=function(C,z,F,q,ae,ue,de,ye,Ae,Ue,Ge){var nt=ae.transform;return e.extend(Jt(C,z,F,q,ae,ue,de,ye,Ae,Ue),{u_gamma_scale:q?Math.cos(nt._pitch)*nt.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+Ge})},Wt=function(C,z,F,q,ae,ue,de,ye,Ae,Ue){return e.extend(Qt(C,z,F,q,ae,ue,de,ye,!0,Ae,!0),{u_texsize_icon:Ue,u_texture_icon:1})},tr=function(C,z,F){return{u_matrix:C,u_opacity:z,u_color:F}},ur=function(C,z,F,q,ae,ue){return e.extend((ye=ue,Ue=ae,Ge=(Ae=F).imageManager.getPattern((de=q).from.toString()),nt=Ae.imageManager.getPattern(de.to.toString()),At=(xt=Ae.imageManager.getPixelSize()).width,wt=xt.height,Tt=Math.pow(2,Ue.tileID.overscaledZ),Ft=(yt=Ue.tileSize*Math.pow(2,Ae.transform.tileZoom)/Tt)*(Ue.tileID.canonical.x+Ue.tileID.wrap*Tt),Ot=yt*Ue.tileID.canonical.y,{u_image:0,u_pattern_tl_a:Ge.tl,u_pattern_br_a:Ge.br,u_pattern_tl_b:nt.tl,u_pattern_br_b:nt.br,u_texsize:[At,wt],u_mix:ye.t,u_pattern_size_a:Ge.displaySize,u_pattern_size_b:nt.displaySize,u_scale_a:ye.fromScale,u_scale_b:ye.toScale,u_tile_units_to_pixels:1/Lr(Ue,1,Ae.transform.tileZoom),u_pixel_coord_upper:[Ft>>16,Ot>>16],u_pixel_coord_lower:[65535&Ft,65535&Ot]}),{u_matrix:C,u_opacity:z});var de,ye,Ae,Ue,Ge,nt,xt,At,wt,Tt,yt,Ft,Ot},gr={fillExtrusion:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_lightpos:new e.Uniform3f(C,z.u_lightpos),u_lightintensity:new e.Uniform1f(C,z.u_lightintensity),u_lightcolor:new e.Uniform3f(C,z.u_lightcolor),u_vertical_gradient:new e.Uniform1f(C,z.u_vertical_gradient),u_opacity:new e.Uniform1f(C,z.u_opacity)}},fillExtrusionPattern:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_lightpos:new e.Uniform3f(C,z.u_lightpos),u_lightintensity:new e.Uniform1f(C,z.u_lightintensity),u_lightcolor:new e.Uniform3f(C,z.u_lightcolor),u_vertical_gradient:new e.Uniform1f(C,z.u_vertical_gradient),u_height_factor:new e.Uniform1f(C,z.u_height_factor),u_image:new e.Uniform1i(C,z.u_image),u_texsize:new e.Uniform2f(C,z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(C,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(C,z.u_pixel_coord_lower),u_scale:new e.Uniform3f(C,z.u_scale),u_fade:new e.Uniform1f(C,z.u_fade),u_opacity:new e.Uniform1f(C,z.u_opacity)}},fill:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix)}},fillPattern:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_image:new e.Uniform1i(C,z.u_image),u_texsize:new e.Uniform2f(C,z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(C,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(C,z.u_pixel_coord_lower),u_scale:new e.Uniform3f(C,z.u_scale),u_fade:new e.Uniform1f(C,z.u_fade)}},fillOutline:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_world:new e.Uniform2f(C,z.u_world)}},fillOutlinePattern:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_world:new e.Uniform2f(C,z.u_world),u_image:new e.Uniform1i(C,z.u_image),u_texsize:new e.Uniform2f(C,z.u_texsize),u_pixel_coord_upper:new e.Uniform2f(C,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(C,z.u_pixel_coord_lower),u_scale:new e.Uniform3f(C,z.u_scale),u_fade:new e.Uniform1f(C,z.u_fade)}},circle:function(C,z){return{u_camera_to_center_distance:new e.Uniform1f(C,z.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(C,z.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(C,z.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(C,z.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(C,z.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(C,z.u_matrix)}},collisionBox:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_camera_to_center_distance:new e.Uniform1f(C,z.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(C,z.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(C,z.u_extrude_scale),u_overscale_factor:new e.Uniform1f(C,z.u_overscale_factor)}},collisionCircle:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_inv_matrix:new e.UniformMatrix4f(C,z.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(C,z.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(C,z.u_viewport_size)}},debug:function(C,z){return{u_color:new e.UniformColor(C,z.u_color),u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_overlay:new e.Uniform1i(C,z.u_overlay),u_overlay_scale:new e.Uniform1f(C,z.u_overlay_scale)}},clippingMask:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix)}},heatmap:function(C,z){return{u_extrude_scale:new e.Uniform1f(C,z.u_extrude_scale),u_intensity:new e.Uniform1f(C,z.u_intensity),u_matrix:new e.UniformMatrix4f(C,z.u_matrix)}},heatmapTexture:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_world:new e.Uniform2f(C,z.u_world),u_image:new e.Uniform1i(C,z.u_image),u_color_ramp:new e.Uniform1i(C,z.u_color_ramp),u_opacity:new e.Uniform1f(C,z.u_opacity)}},hillshade:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_image:new e.Uniform1i(C,z.u_image),u_latrange:new e.Uniform2f(C,z.u_latrange),u_light:new e.Uniform2f(C,z.u_light),u_shadow:new e.UniformColor(C,z.u_shadow),u_highlight:new e.UniformColor(C,z.u_highlight),u_accent:new e.UniformColor(C,z.u_accent)}},hillshadePrepare:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_image:new e.Uniform1i(C,z.u_image),u_dimension:new e.Uniform2f(C,z.u_dimension),u_zoom:new e.Uniform1f(C,z.u_zoom),u_maxzoom:new e.Uniform1f(C,z.u_maxzoom),u_unpack:new e.Uniform4f(C,z.u_unpack)}},line:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_ratio:new e.Uniform1f(C,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(C,z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(C,z.u_units_to_pixels)}},lineGradient:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_ratio:new e.Uniform1f(C,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(C,z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(C,z.u_units_to_pixels),u_image:new e.Uniform1i(C,z.u_image)}},linePattern:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_texsize:new e.Uniform2f(C,z.u_texsize),u_ratio:new e.Uniform1f(C,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(C,z.u_device_pixel_ratio),u_image:new e.Uniform1i(C,z.u_image),u_units_to_pixels:new e.Uniform2f(C,z.u_units_to_pixels),u_scale:new e.Uniform3f(C,z.u_scale),u_fade:new e.Uniform1f(C,z.u_fade)}},lineSDF:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_ratio:new e.Uniform1f(C,z.u_ratio),u_device_pixel_ratio:new e.Uniform1f(C,z.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(C,z.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(C,z.u_patternscale_a),u_patternscale_b:new e.Uniform2f(C,z.u_patternscale_b),u_sdfgamma:new e.Uniform1f(C,z.u_sdfgamma),u_image:new e.Uniform1i(C,z.u_image),u_tex_y_a:new e.Uniform1f(C,z.u_tex_y_a),u_tex_y_b:new e.Uniform1f(C,z.u_tex_y_b),u_mix:new e.Uniform1f(C,z.u_mix)}},raster:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_tl_parent:new e.Uniform2f(C,z.u_tl_parent),u_scale_parent:new e.Uniform1f(C,z.u_scale_parent),u_buffer_scale:new e.Uniform1f(C,z.u_buffer_scale),u_fade_t:new e.Uniform1f(C,z.u_fade_t),u_opacity:new e.Uniform1f(C,z.u_opacity),u_image0:new e.Uniform1i(C,z.u_image0),u_image1:new e.Uniform1i(C,z.u_image1),u_brightness_low:new e.Uniform1f(C,z.u_brightness_low),u_brightness_high:new e.Uniform1f(C,z.u_brightness_high),u_saturation_factor:new e.Uniform1f(C,z.u_saturation_factor),u_contrast_factor:new e.Uniform1f(C,z.u_contrast_factor),u_spin_weights:new e.Uniform3f(C,z.u_spin_weights)}},symbolIcon:function(C,z){return{u_is_size_zoom_constant:new e.Uniform1i(C,z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(C,z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(C,z.u_size_t),u_size:new e.Uniform1f(C,z.u_size),u_camera_to_center_distance:new e.Uniform1f(C,z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(C,z.u_pitch),u_rotate_symbol:new e.Uniform1i(C,z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(C,z.u_aspect_ratio),u_fade_change:new e.Uniform1f(C,z.u_fade_change),u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(C,z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(C,z.u_coord_matrix),u_is_text:new e.Uniform1i(C,z.u_is_text),u_pitch_with_map:new e.Uniform1i(C,z.u_pitch_with_map),u_texsize:new e.Uniform2f(C,z.u_texsize),u_texture:new e.Uniform1i(C,z.u_texture)}},symbolSDF:function(C,z){return{u_is_size_zoom_constant:new e.Uniform1i(C,z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(C,z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(C,z.u_size_t),u_size:new e.Uniform1f(C,z.u_size),u_camera_to_center_distance:new e.Uniform1f(C,z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(C,z.u_pitch),u_rotate_symbol:new e.Uniform1i(C,z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(C,z.u_aspect_ratio),u_fade_change:new e.Uniform1f(C,z.u_fade_change),u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(C,z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(C,z.u_coord_matrix),u_is_text:new e.Uniform1i(C,z.u_is_text),u_pitch_with_map:new e.Uniform1i(C,z.u_pitch_with_map),u_texsize:new e.Uniform2f(C,z.u_texsize),u_texture:new e.Uniform1i(C,z.u_texture),u_gamma_scale:new e.Uniform1f(C,z.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(C,z.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(C,z.u_is_halo)}},symbolTextAndIcon:function(C,z){return{u_is_size_zoom_constant:new e.Uniform1i(C,z.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(C,z.u_is_size_feature_constant),u_size_t:new e.Uniform1f(C,z.u_size_t),u_size:new e.Uniform1f(C,z.u_size),u_camera_to_center_distance:new e.Uniform1f(C,z.u_camera_to_center_distance),u_pitch:new e.Uniform1f(C,z.u_pitch),u_rotate_symbol:new e.Uniform1i(C,z.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(C,z.u_aspect_ratio),u_fade_change:new e.Uniform1f(C,z.u_fade_change),u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(C,z.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(C,z.u_coord_matrix),u_is_text:new e.Uniform1i(C,z.u_is_text),u_pitch_with_map:new e.Uniform1i(C,z.u_pitch_with_map),u_texsize:new e.Uniform2f(C,z.u_texsize),u_texsize_icon:new e.Uniform2f(C,z.u_texsize_icon),u_texture:new e.Uniform1i(C,z.u_texture),u_texture_icon:new e.Uniform1i(C,z.u_texture_icon),u_gamma_scale:new e.Uniform1f(C,z.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(C,z.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(C,z.u_is_halo)}},background:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_opacity:new e.Uniform1f(C,z.u_opacity),u_color:new e.UniformColor(C,z.u_color)}},backgroundPattern:function(C,z){return{u_matrix:new e.UniformMatrix4f(C,z.u_matrix),u_opacity:new e.Uniform1f(C,z.u_opacity),u_image:new e.Uniform1i(C,z.u_image),u_pattern_tl_a:new e.Uniform2f(C,z.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(C,z.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(C,z.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(C,z.u_pattern_br_b),u_texsize:new e.Uniform2f(C,z.u_texsize),u_mix:new e.Uniform1f(C,z.u_mix),u_pattern_size_a:new e.Uniform2f(C,z.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(C,z.u_pattern_size_b),u_scale_a:new e.Uniform1f(C,z.u_scale_a),u_scale_b:new e.Uniform1f(C,z.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(C,z.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(C,z.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(C,z.u_tile_units_to_pixels)}}};function xr(C,z,F,q,ae,ue,de){for(var ye=C.context,Ae=ye.gl,Ue=C.useProgram("collisionBox"),Ge=[],nt=0,xt=0,At=0;At<q.length;At++){var wt=q[At],Tt=z.getTile(wt),yt=Tt.getBucket(F);if(yt){var Ft=wt.posMatrix;0===ae[0]&&0===ae[1]||(Ft=C.translatePosMatrix(wt.posMatrix,Tt,ae,ue));var Ot=de?yt.textCollisionBox:yt.iconCollisionBox,Nt=yt.collisionCircleArray;if(Nt.length>0){var er=e.create(),fr=Ft;e.mul(er,yt.placementInvProjMatrix,C.transform.glCoordMatrix),e.mul(er,er,yt.placementViewportMatrix),Ge.push({circleArray:Nt,circleOffset:xt,transform:fr,invTransform:er}),xt=nt+=Nt.length/4}Ot&&Ue.draw(ye,Ae.LINES,$e.disabled,ke.disabled,C.colorModeForRenderPass(),Pe.disabled,Zo(Ft,C.transform,Tt),F.id,Ot.layoutVertexBuffer,Ot.indexBuffer,Ot.segments,null,C.transform.zoom,null,null,Ot.collisionVertexBuffer)}}if(de&&Ge.length){var Tr=C.useProgram("collisionCircle"),wr=new e.StructArrayLayout2f1f2i16;wr.resize(4*nt),wr._trim();for(var Zr=0,Xr=0,fn=Ge;Xr<fn.length;Xr+=1)for(var rn=fn[Xr],Nn=0;Nn<rn.circleArray.length/4;Nn++){var Gn=4*Nn,oi=rn.circleArray[Gn+0],Ur=rn.circleArray[Gn+1],_n=rn.circleArray[Gn+2],Yn=rn.circleArray[Gn+3];wr.emplace(Zr++,oi,Ur,_n,Yn,0),wr.emplace(Zr++,oi,Ur,_n,Yn,1),wr.emplace(Zr++,oi,Ur,_n,Yn,2),wr.emplace(Zr++,oi,Ur,_n,Yn,3)}(!kt||kt.length<2*nt)&&(kt=function(pi){var Mi=2*pi,vi=new e.StructArrayLayout3ui6;vi.resize(Mi),vi._trim();for(var Si=0;Si<Mi;Si++){var Di=6*Si;vi.uint16[Di+0]=4*Si+0,vi.uint16[Di+1]=4*Si+1,vi.uint16[Di+2]=4*Si+2,vi.uint16[Di+3]=4*Si+2,vi.uint16[Di+4]=4*Si+3,vi.uint16[Di+5]=4*Si+0}return vi}(nt));for(var Vn=ye.createIndexBuffer(kt,!0),Qn=ye.createVertexBuffer(wr,e.collisionCircleLayout.members,!0),li=0,wi=Ge;li<wi.length;li+=1){var Xn=wi[li],mi=co(Xn.transform,Xn.invTransform,C.transform);Tr.draw(ye,Ae.TRIANGLES,$e.disabled,ke.disabled,C.colorModeForRenderPass(),Pe.disabled,mi,F.id,Qn,Vn,e.SegmentVector.simpleSegment(0,2*Xn.circleOffset,Xn.circleArray.length,Xn.circleArray.length/2),null,C.transform.zoom,null,null,null)}Qn.destroy(),Vn.destroy()}}var Pr=e.identity(new Float32Array(16));function en(C,z,F,q,ae,ue){var de=e.getAnchorAlignment(C),ye=-(de.horizontalAlign-.5)*z,Ae=-(de.verticalAlign-.5)*F,Ue=e.evaluateVariableOffset(C,q);return new e.Point((ye/ae+Ue[0])*ue,(Ae/ae+Ue[1])*ue)}function hn(C,z,F,q,ae,ue,de,ye,Ae,Ue,Ge){var nt=C.text.placedSymbolArray,xt=C.text.dynamicLayoutVertexArray,At=C.icon.dynamicLayoutVertexArray,wt={};xt.clear();for(var Tt=0;Tt<nt.length;Tt++){var yt=nt.get(Tt),Ot=yt.hidden||!yt.crossTileID||C.allowVerticalPlacement&&!yt.placedOrientation?null:q[yt.crossTileID];if(Ot){var Nt=new e.Point(yt.anchorX,yt.anchorY),er=cr(Nt,F?ye:de),fr=sr(ue.cameraToCenterDistance,er.signedDistanceFromCamera),Tr=ae.evaluateSizeForFeature(C.textSizeData,Ue,yt)*fr/e.ONE_EM;F&&(Tr*=C.tilePixelRatio/Ae);for(var Xr=en(Ot.anchor,Ot.width,Ot.height,Ot.textOffset,Ot.textBoxScale,Tr),fn=F?cr(Nt.add(Xr),de).point:er.point.add(z?Xr.rotate(-ue.angle):Xr),rn=C.allowVerticalPlacement&&yt.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Nn=0;Nn<yt.numGlyphs;Nn++)e.addDynamicAttributes(xt,fn,rn);Ge&&yt.associatedIconIndex>=0&&(wt[yt.associatedIconIndex]={shiftedAnchor:fn,angle:rn})}else An(yt.numGlyphs,xt)}if(Ge){At.clear();for(var Gn=C.icon.placedSymbolArray,oi=0;oi<Gn.length;oi++){var Ur=Gn.get(oi);if(Ur.hidden)An(Ur.numGlyphs,At);else{var _n=wt[oi];if(_n)for(var Yn=0;Yn<Ur.numGlyphs;Yn++)e.addDynamicAttributes(At,_n.shiftedAnchor,_n.angle);else An(Ur.numGlyphs,At)}}C.icon.dynamicLayoutVertexBuffer.updateData(At)}C.text.dynamicLayoutVertexBuffer.updateData(xt)}function Sn(C,z,F){return F.iconsInText&&z?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function Pn(C,z,F,q,ae,ue,de,ye,Ae,Ue,Ge,nt){for(var xt=C.context,At=xt.gl,wt=C.transform,Tt="map"===ye,yt="map"===Ae,Ft=Tt&&"point"!==F.layout.get("symbol-placement"),Ot=Tt&&!yt&&!Ft,Nt=void 0!==F.layout.get("symbol-sort-key").constantOr(1),er=C.depthModeForSublayer(0,$e.ReadOnly),fr=F.layout.get("text-variable-anchor"),Tr=[],wr=0,Zr=q;wr<Zr.length;wr+=1){var Xr=Zr[wr],fn=z.getTile(Xr),rn=fn.getBucket(F);if(rn){var Nn=ae?rn.text:rn.icon;if(Nn&&Nn.segments.get().length){var Gn=Nn.programConfigurations.get(F.id),oi=ae||rn.sdfIcons,Ur=ae?rn.textSizeData:rn.iconSizeData,_n=yt||0!==wt.pitch,Yn=C.useProgram(Sn(oi,ae,rn),Gn),Vn=e.evaluateSizeForZoom(Ur,wt.zoom),Qn=void 0,li=[0,0],wi=void 0,Xn=void 0,mi=null,pi=void 0;if(ae)wi=fn.glyphAtlasTexture,Xn=At.LINEAR,Qn=fn.glyphAtlasTexture.size,rn.iconsInText&&(li=fn.imageAtlasTexture.size,mi=fn.imageAtlasTexture,pi=_n||C.options.rotating||C.options.zooming||"composite"===Ur.kind||"camera"===Ur.kind?At.LINEAR:At.NEAREST);else{var vi=1!==F.layout.get("icon-size").constantOr(0)||rn.iconsNeedLinear;wi=fn.imageAtlasTexture,Xn=oi||C.options.rotating||C.options.zooming||vi||_n?At.LINEAR:At.NEAREST,Qn=fn.imageAtlasTexture.size}var Si=Lr(fn,1,C.transform.zoom),Di=dr(Xr.posMatrix,yt,Tt,C.transform,Si),aa=hr(Xr.posMatrix,yt,Tt,C.transform,Si),Ma=fr&&rn.hasTextData(),Sa="none"!==F.layout.get("icon-text-fit")&&Ma&&rn.hasIconData();Ft&&Ir(rn,Xr.posMatrix,C,ae,Di,aa,yt,Ue);var ia=C.translatePosMatrix(Xr.posMatrix,fn,ue,de),xa=Ft||ae&&fr||Sa?Pr:Di,ua=C.translatePosMatrix(aa,fn,ue,de,!0),ho=oi&&0!==F.paint.get(ae?"text-halo-width":"icon-halo-width").constantOr(1),Na={program:Yn,buffers:Nn,uniformValues:oi?rn.iconsInText?Wt(Ur.kind,Vn,Ot,yt,C,ia,xa,ua,Qn,li):Qt(Ur.kind,Vn,Ot,yt,C,ia,xa,ua,ae,Qn,!0):Jt(Ur.kind,Vn,Ot,yt,C,ia,xa,ua,ae,Qn),atlasTexture:wi,atlasTextureIcon:mi,atlasInterpolation:Xn,atlasInterpolationIcon:pi,isSDF:oi,hasHalo:ho};if(Nt)for(var Co=0,ms=Nn.segments.get();Co<ms.length;Co+=1){var Rs=ms[Co];Tr.push({segments:new e.SegmentVector([Rs]),sortKey:Rs.sortKey,state:Na})}else Tr.push({segments:Nn.segments,sortKey:0,state:Na})}}}Nt&&Tr.sort(function(ll,$o){return ll.sortKey-$o.sortKey});for(var sl=0,Js=Tr;sl<Js.length;sl+=1){var Ks=Js[sl],po=Ks.state;if(xt.activeTexture.set(At.TEXTURE0),po.atlasTexture.bind(po.atlasInterpolation,At.CLAMP_TO_EDGE),po.atlasTextureIcon&&(xt.activeTexture.set(At.TEXTURE1),po.atlasTextureIcon&&po.atlasTextureIcon.bind(po.atlasInterpolationIcon,At.CLAMP_TO_EDGE)),po.isSDF){var Us=po.uniformValues;po.hasHalo&&(Us.u_is_halo=1,Un(po.buffers,Ks.segments,F,C,po.program,er,Ge,nt,Us)),Us.u_is_halo=0}Un(po.buffers,Ks.segments,F,C,po.program,er,Ge,nt,po.uniformValues)}}function Un(C,z,F,q,ae,ue,de,ye,Ae){var Ue=q.context;ae.draw(Ue,Ue.gl.TRIANGLES,ue,de,ye,Pe.disabled,Ae,F.id,C.layoutVertexBuffer,C.indexBuffer,z,F.paint,q.transform.zoom,C.programConfigurations.get(F.id),C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer)}function In(C,z,F,q,ae,ue,de){var ye,Ae,Ue,Ge,nt,xt=C.context.gl,At=F.paint.get("fill-pattern"),wt=At&&At.constantOr(1),Tt=F.getCrossfadeParameters();de?(Ae=wt&&!F.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ye=xt.LINES):(Ae=wt?"fillPattern":"fill",ye=xt.TRIANGLES);for(var yt=0,Ft=q;yt<Ft.length;yt+=1){var Ot=Ft[yt],Nt=z.getTile(Ot);if(!wt||Nt.patternsLoaded()){var er=Nt.getBucket(F);if(er){var fr=er.programConfigurations.get(F.id),Tr=C.useProgram(Ae,fr);wt&&(C.context.activeTexture.set(xt.TEXTURE0),Nt.imageAtlasTexture.bind(xt.LINEAR,xt.CLAMP_TO_EDGE),fr.updatePaintBuffers(Tt));var wr=At.constantOr(null);if(wr&&Nt.imageAtlas){var Zr=Nt.imageAtlas,Xr=Zr.patternPositions[wr.to.toString()],fn=Zr.patternPositions[wr.from.toString()];Xr&&fn&&fr.setConstantPatternPositions(Xr,fn)}var rn=C.translatePosMatrix(Ot.posMatrix,Nt,F.paint.get("fill-translate"),F.paint.get("fill-translate-anchor"));if(de){Ge=er.indexBuffer2,nt=er.segments2;var Nn=[xt.drawingBufferWidth,xt.drawingBufferHeight];Ue="fillOutlinePattern"===Ae&&wt?Fo(rn,C,Tt,Nt,Nn):Ro(rn,Nn)}else Ge=er.indexBuffer,nt=er.segments,Ue=wt?To(rn,C,Tt,Nt):wo(rn);Tr.draw(C.context,ye,ae,C.stencilModeForClipping(Ot),ue,Pe.disabled,Ue,F.id,er.layoutVertexBuffer,Ge,nt,F.paint,C.transform.zoom,fr)}}}}function hi(C,z,F,q,ae,ue,de){for(var ye=C.context,Ae=ye.gl,Ue=F.paint.get("fill-extrusion-pattern"),Ge=Ue.constantOr(1),nt=F.getCrossfadeParameters(),xt=F.paint.get("fill-extrusion-opacity"),At=0,wt=q;At<wt.length;At+=1){var Tt=wt[At],yt=z.getTile(Tt),Ft=yt.getBucket(F);if(Ft){var Ot=Ft.programConfigurations.get(F.id),Nt=C.useProgram(Ge?"fillExtrusionPattern":"fillExtrusion",Ot);Ge&&(C.context.activeTexture.set(Ae.TEXTURE0),yt.imageAtlasTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),Ot.updatePaintBuffers(nt));var er=Ue.constantOr(null);if(er&&yt.imageAtlas){var fr=yt.imageAtlas,Tr=fr.patternPositions[er.to.toString()],wr=fr.patternPositions[er.from.toString()];Tr&&wr&&Ot.setConstantPatternPositions(Tr,wr)}var Zr=C.translatePosMatrix(Tt.posMatrix,yt,F.paint.get("fill-extrusion-translate"),F.paint.get("fill-extrusion-translate-anchor")),Xr=F.paint.get("fill-extrusion-vertical-gradient"),fn=Ge?bs(Zr,C,Xr,xt,Tt,nt,yt):ds(Zr,C,Xr,xt);Nt.draw(ye,ye.gl.TRIANGLES,ae,ue,de,Pe.backCCW,fn,F.id,Ft.layoutVertexBuffer,Ft.indexBuffer,Ft.segments,F.paint,C.transform.zoom,Ot)}}}function bi(C,z,F,q,ae,ue){var de=C.context,ye=de.gl,Ae=z.fbo;if(Ae){var Ue=C.useProgram("hillshade");de.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,Ae.colorAttachment.get());var Ge=function(nt,xt,At){var wt=At.paint.get("hillshade-shadow-color"),Tt=At.paint.get("hillshade-highlight-color"),yt=At.paint.get("hillshade-accent-color"),Ft=At.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===At.paint.get("hillshade-illumination-anchor")&&(Ft-=nt.transform.angle);var Ot=!nt.options.moving;return{u_matrix:nt.transform.calculatePosMatrix(xt.tileID.toUnwrapped(),Ot),u_image:0,u_latrange:cs(0,xt.tileID),u_light:[At.paint.get("hillshade-exaggeration"),Ft],u_shadow:wt,u_highlight:Tt,u_accent:yt}}(C,z,F);Ue.draw(de,ye.TRIANGLES,q,ae,ue,Pe.disabled,Ge,F.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}}function Oi(C,z,F,q,ae,ue,de){var yt,Ft,Ot,Nt,er,ye=C.context,Ae=ye.gl,Ue=z.dem;if(Ue&&Ue.data){var Ge=Ue.dim,nt=Ue.stride,xt=Ue.getPixels();if(ye.activeTexture.set(Ae.TEXTURE1),ye.pixelStoreUnpackPremultiplyAlpha.set(!1),z.demTexture=z.demTexture||C.getTileTexture(nt),z.demTexture){var At=z.demTexture;At.update(xt,{premultiply:!1}),At.bind(Ae.NEAREST,Ae.CLAMP_TO_EDGE)}else z.demTexture=new e.Texture(ye,xt,Ae.RGBA,{premultiply:!1}),z.demTexture.bind(Ae.NEAREST,Ae.CLAMP_TO_EDGE);ye.activeTexture.set(Ae.TEXTURE0);var wt=z.fbo;if(!wt){var Tt=new e.Texture(ye,{width:Ge,height:Ge,data:null},Ae.RGBA);Tt.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),(wt=z.fbo=ye.createFramebuffer(Ge,Ge,!0)).colorAttachment.set(Tt.texture)}ye.bindFramebuffer.set(wt.framebuffer),ye.viewport.set([0,0,Ge,Ge]),C.useProgram("hillshadePrepare").draw(ye,Ae.TRIANGLES,ae,ue,de,Pe.disabled,(yt=z.tileID,Ot=q,Nt=(Ft=Ue).stride,er=e.create(),e.ortho(er,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(er,er,[0,-e.EXTENT,0]),{u_matrix:er,u_image:1,u_dimension:[Nt,Nt],u_zoom:yt.overscaledZ,u_maxzoom:Ot,u_unpack:Ft.getUnpackVector()}),F.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments),z.needsHillshadePrepare=!1}}function Ii(C,z,F,q,ae){var ue=q.paint.get("raster-fade-duration");if(ue>0){var de=e.browser.now(),ye=(de-C.timeAdded)/ue,Ae=z?(de-z.timeAdded)/ue:-1,Ue=F.getSource(),Ge=ae.coveringZoomLevel({tileSize:Ue.tileSize,roundZoom:Ue.roundZoom}),nt=!z||Math.abs(z.tileID.overscaledZ-Ge)>Math.abs(C.tileID.overscaledZ-Ge),xt=nt&&C.refreshedUponExpiration?1:e.clamp(nt?ye:1-Ae,0,1);return C.refreshedUponExpiration&&ye>=1&&(C.refreshedUponExpiration=!1),z?{opacity:1,mix:1-xt}:{opacity:xt,mix:0}}return{opacity:1,mix:0}}var zi=new e.Color(1,0,0,1),va=new e.Color(0,1,0,1),pa=new e.Color(0,0,1,1),ta=new e.Color(1,0,1,1),ra=new e.Color(0,1,1,1);function Oa(C,z,F,q){Wa(C,0,z+F/2,C.transform.width,F,q)}function Ya(C,z,F,q){Wa(C,z-F/2,0,F,C.transform.height,q)}function Wa(C,z,F,q,ae,ue){var de=C.context,ye=de.gl;ye.enable(ye.SCISSOR_TEST),ye.scissor(z*e.browser.devicePixelRatio,F*e.browser.devicePixelRatio,q*e.browser.devicePixelRatio,ae*e.browser.devicePixelRatio),de.clear({color:ue}),ye.disable(ye.SCISSOR_TEST)}function Xa(C,z,F){var q=C.context,ae=q.gl,ue=F.posMatrix,de=C.useProgram("debug"),ye=$e.disabled,Ae=ke.disabled,Ue=C.colorModeForRenderPass();q.activeTexture.set(ae.TEXTURE0),C.emptyTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),de.draw(q,ae.LINE_STRIP,ye,Ae,Ue,Pe.disabled,ls(ue,e.Color.red),"$debug",C.debugBuffer,C.tileBorderIndexBuffer,C.debugSegments);var Ge=z.getTileByID(F.key).latestRawTileData,xt=Math.floor((Ge&&Ge.byteLength||0)/1024),At=z.getTile(F).tileSize,wt=512/Math.min(At,512)*(F.overscaledZ/C.transform.zoom)*.5,Tt=F.canonical.toString();F.overscaledZ!==F.canonical.z&&(Tt+=" => "+F.overscaledZ),function(yt,Ft){yt.initDebugOverlayCanvas();var Ot=yt.debugOverlayCanvas,Nt=yt.context.gl,er=yt.debugOverlayCanvas.getContext("2d");er.clearRect(0,0,Ot.width,Ot.height),er.shadowColor="white",er.shadowBlur=2,er.lineWidth=1.5,er.strokeStyle="white",er.textBaseline="top",er.font="bold 36px Open Sans, sans-serif",er.fillText(Ft,5,5),er.strokeText(Ft,5,5),yt.debugOverlayTexture.update(Ot),yt.debugOverlayTexture.bind(Nt.LINEAR,Nt.CLAMP_TO_EDGE)}(C,Tt+" "+xt+"kb"),de.draw(q,ae.TRIANGLES,ye,Ae,Le.alphaBlended,Pe.disabled,ls(ue,e.Color.transparent,wt),"$debug",C.debugBuffer,C.quadTriangleIndexBuffer,C.debugSegments)}var Za={symbol:function(C,z,F,q,ae){if("translucent"===C.renderPass){var ue=ke.disabled,de=C.colorModeForRenderPass();F.layout.get("text-variable-anchor")&&function(ye,Ae,Ue,Ge,nt,xt,At){for(var wt=Ae.transform,Tt="map"===nt,yt="map"===xt,Ft=0,Ot=ye;Ft<Ot.length;Ft+=1){var Nt=Ot[Ft],er=Ge.getTile(Nt),fr=er.getBucket(Ue);if(fr&&fr.text&&fr.text.segments.get().length){var wr=e.evaluateSizeForZoom(fr.textSizeData,wt.zoom),Zr=Lr(er,1,Ae.transform.zoom),Xr=dr(Nt.posMatrix,yt,Tt,Ae.transform,Zr),fn="none"!==Ue.layout.get("icon-text-fit")&&fr.hasIconData();if(wr){var rn=Math.pow(2,wt.zoom-er.tileID.overscaledZ);hn(fr,Tt,yt,At,e.symbolSize,wt,Xr,Nt.posMatrix,rn,wr,fn)}}}}(q,C,F,z,F.layout.get("text-rotation-alignment"),F.layout.get("text-pitch-alignment"),ae),0!==F.paint.get("icon-opacity").constantOr(1)&&Pn(C,z,F,q,!1,F.paint.get("icon-translate"),F.paint.get("icon-translate-anchor"),F.layout.get("icon-rotation-alignment"),F.layout.get("icon-pitch-alignment"),F.layout.get("icon-keep-upright"),ue,de),0!==F.paint.get("text-opacity").constantOr(1)&&Pn(C,z,F,q,!0,F.paint.get("text-translate"),F.paint.get("text-translate-anchor"),F.layout.get("text-rotation-alignment"),F.layout.get("text-pitch-alignment"),F.layout.get("text-keep-upright"),ue,de),z.map.showCollisionBoxes&&(xr(C,z,F,q,F.paint.get("text-translate"),F.paint.get("text-translate-anchor"),!0),xr(C,z,F,q,F.paint.get("icon-translate"),F.paint.get("icon-translate-anchor"),!1))}},circle:function(C,z,F,q){if("translucent"===C.renderPass){var ae=F.paint.get("circle-opacity"),ue=F.paint.get("circle-stroke-width"),de=F.paint.get("circle-stroke-opacity"),ye=void 0!==F.layout.get("circle-sort-key").constantOr(1);if(0!==ae.constantOr(1)||0!==ue.constantOr(1)&&0!==de.constantOr(1)){for(var Ae=C.context,Ue=Ae.gl,Ge=C.depthModeForSublayer(0,$e.ReadOnly),nt=ke.disabled,xt=C.colorModeForRenderPass(),At=[],wt=0;wt<q.length;wt++){var Tt=q[wt],yt=z.getTile(Tt),Ft=yt.getBucket(F);if(Ft){var Ot=Ft.programConfigurations.get(F.id),Nt={programConfiguration:Ot,program:C.useProgram("circle",Ot),layoutVertexBuffer:Ft.layoutVertexBuffer,indexBuffer:Ft.indexBuffer,uniformValues:Bo(C,Tt,yt,F)};if(ye)for(var er=0,fr=Ft.segments.get();er<fr.length;er+=1){var Tr=fr[er];At.push({segments:new e.SegmentVector([Tr]),sortKey:Tr.sortKey,state:Nt})}else At.push({segments:Ft.segments,sortKey:0,state:Nt})}}ye&&At.sort(function(Yn,Vn){return Yn.sortKey-Vn.sortKey});for(var wr=0,Zr=At;wr<Zr.length;wr+=1){var Xr=Zr[wr],fn=Xr.state;fn.program.draw(Ae,Ue.TRIANGLES,Ge,nt,xt,Pe.disabled,fn.uniformValues,F.id,fn.layoutVertexBuffer,fn.indexBuffer,Xr.segments,F.paint,C.transform.zoom,fn.programConfiguration)}}}},heatmap:function(C,z,F,q){if(0!==F.paint.get("heatmap-opacity"))if("offscreen"===C.renderPass){var ae=C.context,ue=ae.gl,de=ke.disabled,ye=new Le([ue.ONE,ue.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(Tt,yt,Ft){var Ot=Tt.gl;Tt.activeTexture.set(Ot.TEXTURE1),Tt.viewport.set([0,0,yt.width/4,yt.height/4]);var fr,Tr,wr,Zr,Xr,Nt=Ft.heatmapFbo;if(Nt)Ot.bindTexture(Ot.TEXTURE_2D,Nt.colorAttachment.get()),Tt.bindFramebuffer.set(Nt.framebuffer);else{var er=Ot.createTexture();Ot.bindTexture(Ot.TEXTURE_2D,er),Ot.texParameteri(Ot.TEXTURE_2D,Ot.TEXTURE_WRAP_S,Ot.CLAMP_TO_EDGE),Ot.texParameteri(Ot.TEXTURE_2D,Ot.TEXTURE_WRAP_T,Ot.CLAMP_TO_EDGE),Ot.texParameteri(Ot.TEXTURE_2D,Ot.TEXTURE_MIN_FILTER,Ot.LINEAR),Ot.texParameteri(Ot.TEXTURE_2D,Ot.TEXTURE_MAG_FILTER,Ot.LINEAR),wr=er,Zr=Nt=Ft.heatmapFbo=Tt.createFramebuffer(yt.width/4,yt.height/4,!1),(Xr=(fr=Tt).gl).texImage2D(Xr.TEXTURE_2D,0,Xr.RGBA,(Tr=yt).width/4,Tr.height/4,0,Xr.RGBA,fr.extRenderToTextureHalfFloat?fr.extTextureHalfFloat.HALF_FLOAT_OES:Xr.UNSIGNED_BYTE,null),Zr.colorAttachment.set(wr)}})(ae,C,F),ae.clear({color:e.Color.transparent});for(var Ae=0;Ae<q.length;Ae++){var Ue=q[Ae];if(!z.hasRenderableParent(Ue)){var Ge=z.getTile(Ue),nt=Ge.getBucket(F);if(nt){var xt=nt.programConfigurations.get(F.id);C.useProgram("heatmap",xt).draw(ae,ue.TRIANGLES,$e.disabled,de,ye,Pe.disabled,No(Ue.posMatrix,Ge,C.transform.zoom,F.paint.get("heatmap-intensity")),F.id,nt.layoutVertexBuffer,nt.indexBuffer,nt.segments,F.paint,C.transform.zoom,xt)}}}ae.viewport.set([0,0,C.width,C.height])}else"translucent"===C.renderPass&&(C.context.setColorMode(C.colorModeForRenderPass()),function(Tt,yt){var Ft=Tt.context,Ot=Ft.gl,Nt=yt.heatmapFbo;if(Nt){Ft.activeTexture.set(Ot.TEXTURE0),Ot.bindTexture(Ot.TEXTURE_2D,Nt.colorAttachment.get()),Ft.activeTexture.set(Ot.TEXTURE1);var er=yt.colorRampTexture;er||(er=yt.colorRampTexture=new e.Texture(Ft,yt.colorRamp,Ot.RGBA)),er.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE),Tt.useProgram("heatmapTexture").draw(Ft,Ot.TRIANGLES,$e.disabled,ke.disabled,Tt.colorModeForRenderPass(),Pe.disabled,function(fr,Tr,wr,Zr){var Xr=e.create();e.ortho(Xr,0,fr.width,fr.height,0,0,1);var fn=fr.context.gl;return{u_matrix:Xr,u_world:[fn.drawingBufferWidth,fn.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Tr.paint.get("heatmap-opacity")}}(Tt,yt),yt.id,Tt.viewportBuffer,Tt.quadTriangleIndexBuffer,Tt.viewportSegments,yt.paint,Tt.transform.zoom)}}(C,F))},line:function(C,z,F,q){if("translucent"===C.renderPass){var ae=F.paint.get("line-opacity"),ue=F.paint.get("line-width");if(0!==ae.constantOr(1)&&0!==ue.constantOr(1)){var de=C.depthModeForSublayer(0,$e.ReadOnly),ye=C.colorModeForRenderPass(),Ae=F.paint.get("line-dasharray"),Ue=F.paint.get("line-pattern"),Ge=Ue.constantOr(1),nt=F.paint.get("line-gradient"),xt=F.getCrossfadeParameters(),At=Ge?"linePattern":Ae?"lineSDF":nt?"lineGradient":"line",wt=C.context,Tt=wt.gl,yt=!0;if(nt){wt.activeTexture.set(Tt.TEXTURE0);var Ft=F.gradientTexture;if(!F.gradient)return;Ft||(Ft=F.gradientTexture=new e.Texture(wt,F.gradient,Tt.RGBA)),Ft.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE)}for(var Ot=0,Nt=q;Ot<Nt.length;Ot+=1){var er=Nt[Ot],fr=z.getTile(er);if(!Ge||fr.patternsLoaded()){var Tr=fr.getBucket(F);if(Tr){var wr=Tr.programConfigurations.get(F.id),Zr=C.context.program.get(),Xr=C.useProgram(At,wr),fn=yt||Xr.program!==Zr,rn=Ue.constantOr(null);if(rn&&fr.imageAtlas){var Nn=fr.imageAtlas,Gn=Nn.patternPositions[rn.to.toString()],oi=Nn.patternPositions[rn.from.toString()];Gn&&oi&&wr.setConstantPatternPositions(Gn,oi)}var Ur=Ge?je(C,fr,F,xt):Ae?qe(C,fr,F,Ae,xt):nt?Bi(C,fr,F):ko(C,fr,F);Ge?(wt.activeTexture.set(Tt.TEXTURE0),fr.imageAtlasTexture.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE),wr.updatePaintBuffers(xt)):Ae&&(fn||C.lineAtlas.dirty)&&(wt.activeTexture.set(Tt.TEXTURE0),C.lineAtlas.bind(wt)),Xr.draw(wt,Tt.TRIANGLES,de,C.stencilModeForClipping(er),ye,Pe.disabled,Ur,F.id,Tr.layoutVertexBuffer,Tr.indexBuffer,Tr.segments,F.paint,C.transform.zoom,wr),yt=!1}}}}}},fill:function(C,z,F,q){var ae=F.paint.get("fill-color"),ue=F.paint.get("fill-opacity");if(0!==ue.constantOr(1)){var de=C.colorModeForRenderPass(),ye=F.paint.get("fill-pattern"),Ae=C.opaquePassEnabledForLayer()&&!ye.constantOr(1)&&1===ae.constantOr(e.Color.transparent).a&&1===ue.constantOr(0)?"opaque":"translucent";if(C.renderPass===Ae){var Ue=C.depthModeForSublayer(1,"opaque"===C.renderPass?$e.ReadWrite:$e.ReadOnly);In(C,z,F,q,Ue,de,!1)}if("translucent"===C.renderPass&&F.paint.get("fill-antialias")){var Ge=C.depthModeForSublayer(F.getPaintProperty("fill-outline-color")?2:0,$e.ReadOnly);In(C,z,F,q,Ge,de,!0)}}},"fill-extrusion":function(C,z,F,q){var ae=F.paint.get("fill-extrusion-opacity");if(0!==ae&&"translucent"===C.renderPass){var ue=new $e(C.context.gl.LEQUAL,$e.ReadWrite,C.depthRangeFor3D);if(1!==ae||F.paint.get("fill-extrusion-pattern").constantOr(1))hi(C,z,F,q,ue,ke.disabled,Le.disabled),hi(C,z,F,q,ue,C.stencilModeFor3D(),C.colorModeForRenderPass());else{var de=C.colorModeForRenderPass();hi(C,z,F,q,ue,ke.disabled,de)}}},hillshade:function(C,z,F,q){if("offscreen"===C.renderPass||"translucent"===C.renderPass){for(var ae=C.context,ue=z.getSource().maxzoom,de=C.depthModeForSublayer(0,$e.ReadOnly),ye=C.colorModeForRenderPass(),Ae="translucent"===C.renderPass?C.stencilConfigForOverlap(q):[{},q],Ue=Ae[0],Ge=0,nt=Ae[1];Ge<nt.length;Ge+=1){var xt=nt[Ge],At=z.getTile(xt);At.needsHillshadePrepare&&"offscreen"===C.renderPass?Oi(C,At,F,ue,de,ke.disabled,ye):"translucent"===C.renderPass&&bi(C,At,F,de,Ue[xt.overscaledZ],ye)}ae.viewport.set([0,0,C.width,C.height])}},raster:function(C,z,F,q){if("translucent"===C.renderPass&&0!==F.paint.get("raster-opacity")&&q.length)for(var ae=C.context,ue=ae.gl,de=z.getSource(),ye=C.useProgram("raster"),Ae=C.colorModeForRenderPass(),Ue=de instanceof G?[{},q]:C.stencilConfigForOverlap(q),Ge=Ue[0],nt=Ue[1],xt=nt[nt.length-1].overscaledZ,At=!C.options.moving,wt=0,Tt=nt;wt<Tt.length;wt+=1){var yt=Tt[wt],Ft=C.depthModeForSublayer(yt.overscaledZ-xt,1===F.paint.get("raster-opacity")?$e.ReadWrite:$e.ReadOnly,ue.LESS),Ot=z.getTile(yt),Nt=C.transform.calculatePosMatrix(yt.toUnwrapped(),At);Ot.registerFadeDuration(F.paint.get("raster-fade-duration"));var er=z.findLoadedParent(yt,0),fr=Ii(Ot,er,z,F,C.transform),Tr=void 0,wr=void 0,Zr="nearest"===F.paint.get("raster-resampling")?ue.NEAREST:ue.LINEAR;ae.activeTexture.set(ue.TEXTURE0),Ot.texture.bind(Zr,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST),ae.activeTexture.set(ue.TEXTURE1),er?(er.texture.bind(Zr,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST),Tr=Math.pow(2,er.tileID.overscaledZ-Ot.tileID.overscaledZ),wr=[Ot.tileID.canonical.x*Tr%1,Ot.tileID.canonical.y*Tr%1]):Ot.texture.bind(Zr,ue.CLAMP_TO_EDGE,ue.LINEAR_MIPMAP_NEAREST);var Xr=gt(Nt,wr||[0,0],Tr||1,fr,F);de instanceof G?ye.draw(ae,ue.TRIANGLES,Ft,ke.disabled,Ae,Pe.disabled,Xr,F.id,de.boundsBuffer,C.quadTriangleIndexBuffer,de.boundsSegments):ye.draw(ae,ue.TRIANGLES,Ft,Ge[yt.overscaledZ],Ae,Pe.disabled,Xr,F.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments)}},background:function(C,z,F){var q=F.paint.get("background-color"),ae=F.paint.get("background-opacity");if(0!==ae){var ue=C.context,de=ue.gl,ye=C.transform,Ae=ye.tileSize,Ue=F.paint.get("background-pattern");if(!C.isPatternMissing(Ue)){var Ge=!Ue&&1===q.a&&1===ae&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass===Ge){var nt=ke.disabled,xt=C.depthModeForSublayer(0,"opaque"===Ge?$e.ReadWrite:$e.ReadOnly),At=C.colorModeForRenderPass(),wt=C.useProgram(Ue?"backgroundPattern":"background"),Tt=ye.coveringTiles({tileSize:Ae});Ue&&(ue.activeTexture.set(de.TEXTURE0),C.imageManager.bind(C.context));for(var yt=F.getCrossfadeParameters(),Ft=0,Ot=Tt;Ft<Ot.length;Ft+=1){var Nt=Ot[Ft],er=C.transform.calculatePosMatrix(Nt.toUnwrapped()),fr=Ue?ur(er,ae,C,Ue,{tileID:Nt,tileSize:Ae},yt):tr(er,ae,q);wt.draw(ue,de.TRIANGLES,xt,nt,At,Pe.disabled,fr,F.id,C.tileExtentBuffer,C.quadTriangleIndexBuffer,C.tileExtentSegments)}}}}},debug:function(C,z,F){for(var q=0;q<F.length;q++)Xa(C,z,F[q])},custom:function(C,z,F){var q=C.context,ae=F.implementation;if("offscreen"===C.renderPass){var ue=ae.prerender;ue&&(C.setCustomLayerDefaults(),q.setColorMode(C.colorModeForRenderPass()),ue.call(ae,q.gl,C.transform.customLayerMatrix()),q.setDirty(),C.setBaseState())}else if("translucent"===C.renderPass){C.setCustomLayerDefaults(),q.setColorMode(C.colorModeForRenderPass()),q.setStencilMode(ke.disabled);var de="3d"===ae.renderingMode?new $e(C.context.gl.LEQUAL,$e.ReadWrite,C.depthRangeFor3D):C.depthModeForSublayer(0,$e.ReadOnly);q.setDepthMode(de),ae.render(q.gl,C.transform.customLayerMatrix()),q.setDirty(),C.setBaseState(),q.bindFramebuffer.set(null)}}},Ei=function(C,z){this.context=new Ce(C),this.transform=z,this._tileTextures={},this.setup(),this.numSublayers=Xe.maxUnderzooming+Xe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Nr,this.gpuTimers={}};Ei.prototype.resize=function(C,z){if(this.width=C*e.browser.devicePixelRatio,this.height=z*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var F=0,q=this.style._order;F<q.length;F+=1)this.style._layers[q[F]].resize()},Ei.prototype.setup=function(){var C=this.context,z=new e.StructArrayLayout2i4;z.emplaceBack(0,0),z.emplaceBack(e.EXTENT,0),z.emplaceBack(0,e.EXTENT),z.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=C.createVertexBuffer(z,gn.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var F=new e.StructArrayLayout2i4;F.emplaceBack(0,0),F.emplaceBack(e.EXTENT,0),F.emplaceBack(0,e.EXTENT),F.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=C.createVertexBuffer(F,gn.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var q=new e.StructArrayLayout4i8;q.emplaceBack(0,0,0,0),q.emplaceBack(e.EXTENT,0,e.EXTENT,0),q.emplaceBack(0,e.EXTENT,0,e.EXTENT),q.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=C.createVertexBuffer(q,W.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ae=new e.StructArrayLayout2i4;ae.emplaceBack(0,0),ae.emplaceBack(1,0),ae.emplaceBack(0,1),ae.emplaceBack(1,1),this.viewportBuffer=C.createVertexBuffer(ae,gn.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ue=new e.StructArrayLayout1ui2;ue.emplaceBack(0),ue.emplaceBack(1),ue.emplaceBack(3),ue.emplaceBack(2),ue.emplaceBack(0),this.tileBorderIndexBuffer=C.createIndexBuffer(ue);var de=new e.StructArrayLayout3ui6;de.emplaceBack(0,1,2),de.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=C.createIndexBuffer(de),this.emptyTexture=new e.Texture(C,{width:1,height:1,data:new Uint8Array([0,0,0,0])},C.gl.RGBA);var ye=this.context.gl;this.stencilClearMode=new ke({func:ye.ALWAYS,mask:0},0,255,ye.ZERO,ye.ZERO,ye.ZERO)},Ei.prototype.clearStencil=function(){var C=this.context,z=C.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var F=e.create();e.ortho(F,0,this.width,this.height,0,0,1),e.scale(F,F,[z.drawingBufferWidth,z.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(C,z.TRIANGLES,$e.disabled,this.stencilClearMode,Le.disabled,Pe.disabled,no(F),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Ei.prototype._renderTileClippingMasks=function(C,z){if(this.currentStencilSource!==C.source&&C.isTileClipped()&&z&&z.length){this.currentStencilSource=C.source;var F=this.context,q=F.gl;this.nextStencilID+z.length>256&&this.clearStencil(),F.setColorMode(Le.disabled),F.setDepthMode($e.disabled);var ae=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ue=0,de=z;ue<de.length;ue+=1){var ye=de[ue],Ae=this._tileClippingMaskIDs[ye.key]=this.nextStencilID++;ae.draw(F,q.TRIANGLES,$e.disabled,new ke({func:q.ALWAYS,mask:0},Ae,255,q.KEEP,q.KEEP,q.REPLACE),Le.disabled,Pe.disabled,no(ye.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Ei.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var C=this.nextStencilID++,z=this.context.gl;return new ke({func:z.NOTEQUAL,mask:255},C,255,z.KEEP,z.KEEP,z.REPLACE)},Ei.prototype.stencilModeForClipping=function(C){var z=this.context.gl;return new ke({func:z.EQUAL,mask:255},this._tileClippingMaskIDs[C.key],0,z.KEEP,z.KEEP,z.REPLACE)},Ei.prototype.stencilConfigForOverlap=function(C){var z,F=this.context.gl,q=C.sort(function(Ae,Ue){return Ue.overscaledZ-Ae.overscaledZ}),ae=q[q.length-1].overscaledZ,ue=q[0].overscaledZ-ae+1;if(ue>1){this.currentStencilSource=void 0,this.nextStencilID+ue>256&&this.clearStencil();for(var de={},ye=0;ye<ue;ye++)de[ye+ae]=new ke({func:F.GEQUAL,mask:255},ye+this.nextStencilID,255,F.KEEP,F.KEEP,F.REPLACE);return this.nextStencilID+=ue,[de,q]}return[(z={},z[ae]=ke.disabled,z),q]},Ei.prototype.colorModeForRenderPass=function(){var C=this.context.gl;return this._showOverdrawInspector?new Le([C.CONSTANT_COLOR,C.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Le.unblended:Le.alphaBlended},Ei.prototype.depthModeForSublayer=function(C,z,F){if(!this.opaquePassEnabledForLayer())return $e.disabled;var q=1-((1+this.currentLayer)*this.numSublayers+C)*this.depthEpsilon;return new $e(F||this.context.gl.LEQUAL,z,[q,q])},Ei.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Ei.prototype.render=function(C,z){var F=this;this.style=C,this.options=z,this.lineAtlas=C.lineAtlas,this.imageManager=C.imageManager,this.glyphManager=C.glyphManager,this.symbolFadeChange=C.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var q=this.style._order,ae=this.style.sourceCaches;for(var ue in ae){var de=ae[ue];de.used&&de.prepare(this.context)}var ye,Ae,Ue={},Ge={},nt={};for(var xt in ae){var At=ae[xt];Ue[xt]=At.getVisibleCoordinates(),Ge[xt]=Ue[xt].slice().reverse(),nt[xt]=At.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var wt=0;wt<q.length;wt++)if(this.style._layers[q[wt]].is3D()){this.opaquePassCutoff=wt;break}this.renderPass="offscreen";for(var yt=0,Ft=q;yt<Ft.length;yt+=1){var Nt=this.style._layers[Ft[yt]];if(Nt.hasOffscreenPass()&&!Nt.isHidden(this.transform.zoom)){var er=Ge[Nt.source];("custom"===Nt.type||er.length)&&this.renderLayer(this,ae[Nt.source],Nt,er)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:z.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=z.showOverdrawInspector,this.depthRangeFor3D=[0,1-(C._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=q.length-1;this.currentLayer>=0;this.currentLayer--){var fr=this.style._layers[q[this.currentLayer]],Tr=ae[fr.source],wr=Ue[fr.source];this._renderTileClippingMasks(fr,wr),this.renderLayer(this,Tr,fr,wr)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<q.length;this.currentLayer++){var Zr=this.style._layers[q[this.currentLayer]],Xr=ae[Zr.source],fn=("symbol"===Zr.type?nt:Ge)[Zr.source];this._renderTileClippingMasks(Zr,Ue[Zr.source]),this.renderLayer(this,Xr,Zr,fn)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(rn){rn.source&&!rn.isHidden(F.transform.zoom)&&(rn.source!==(Ae&&Ae.id)&&(Ae=F.style.sourceCaches[rn.source]),(!ye||ye.getSource().maxzoom<Ae.getSource().maxzoom)&&(ye=Ae))}),ye&&Za.debug(this,ye,ye.getVisibleCoordinates())),this.options.showPadding&&function(C){var z=C.transform.padding;Oa(C,C.transform.height-(z.top||0),3,zi),Oa(C,z.bottom||0,3,va),Ya(C,z.left||0,3,pa),Ya(C,C.transform.width-(z.right||0),3,ta);var q,ae,ue,de,F=C.transform.centerPoint;Wa(q=C,(ae=F.x)-1,(ue=C.transform.height-F.y)-10,2,20,de=ra),Wa(q,ae-10,ue-1,20,2,de)}(this),this.context.setDefault()},Ei.prototype.renderLayer=function(C,z,F,q){F.isHidden(this.transform.zoom)||("background"===F.type||"custom"===F.type||q.length)&&(this.id=F.id,this.gpuTimingStart(F),Za[F.type](C,z,F,q,this.style.placement.variableOffsets),this.gpuTimingEnd())},Ei.prototype.gpuTimingStart=function(C){if(this.options.gpuTiming){var z=this.context.extTimerQuery,F=this.gpuTimers[C.id];F||(F=this.gpuTimers[C.id]={calls:0,cpuTime:0,query:z.createQueryEXT()}),F.calls++,z.beginQueryEXT(z.TIME_ELAPSED_EXT,F.query)}},Ei.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var C=this.context.extTimerQuery;C.endQueryEXT(C.TIME_ELAPSED_EXT)}},Ei.prototype.collectGpuTimers=function(){var C=this.gpuTimers;return this.gpuTimers={},C},Ei.prototype.queryGpuTimers=function(C){var z={};for(var F in C){var q=C[F],ae=this.context.extTimerQuery,ue=ae.getQueryObjectEXT(q.query,ae.QUERY_RESULT_EXT)/1e6;ae.deleteQueryEXT(q.query),z[F]=ue}return z},Ei.prototype.translatePosMatrix=function(C,z,F,q,ae){if(!F[0]&&!F[1])return C;var ue=ae?"map"===q?this.transform.angle:0:"viewport"===q?-this.transform.angle:0;if(ue){var de=Math.sin(ue),ye=Math.cos(ue);F=[F[0]*ye-F[1]*de,F[0]*de+F[1]*ye]}var Ae=[ae?F[0]:Lr(z,F[0],this.transform.zoom),ae?F[1]:Lr(z,F[1],this.transform.zoom),0],Ue=new Float32Array(16);return e.translate(Ue,C,Ae),Ue},Ei.prototype.saveTileTexture=function(C){var z=this._tileTextures[C.size[0]];z?z.push(C):this._tileTextures[C.size[0]]=[C]},Ei.prototype.getTileTexture=function(C){var z=this._tileTextures[C];return z&&z.length>0?z.pop():null},Ei.prototype.isPatternMissing=function(C){if(!C)return!1;if(!C.from||!C.to)return!0;var z=this.imageManager.getPattern(C.from.toString()),F=this.imageManager.getPattern(C.to.toString());return!z||!F},Ei.prototype.useProgram=function(C,z){this.cache=this.cache||{};var F=""+C+(z?z.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[F]||(this.cache[F]=new ys(this.context,ss[C],z,gr[C],this._showOverdrawInspector)),this.cache[F]},Ei.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Ei.prototype.setBaseState=function(){var C=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(C.FUNC_ADD)},Ei.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},Ei.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ft=function(C,z){this.points=C,this.planes=z};ft.fromInvProjectionMatrix=function(C,z,F){var q=Math.pow(2,F),ae=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(de){return e.transformMat4([],de,C)}).map(function(de){return e.scale$1([],de,1/de[3]/z*q)}),ue=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(de){var ye=e.sub([],ae[de[0]],ae[de[1]]),Ae=e.sub([],ae[de[2]],ae[de[1]]),Ue=e.normalize([],e.cross([],ye,Ae)),Ge=-e.dot(Ue,ae[de[1]]);return Ue.concat(Ge)});return new ft(ae,ue)};var zt=function(C,z){this.min=C,this.max=z,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};zt.prototype.quadrant=function(C){for(var z=[C%2==0,C<2],F=e.clone$2(this.min),q=e.clone$2(this.max),ae=0;ae<z.length;ae++)F[ae]=z[ae]?this.min[ae]:this.center[ae],q[ae]=z[ae]?this.center[ae]:this.max[ae];return q[2]=this.max[2],new zt(F,q)},zt.prototype.distanceX=function(C){return Math.max(Math.min(this.max[0],C[0]),this.min[0])-C[0]},zt.prototype.distanceY=function(C){return Math.max(Math.min(this.max[1],C[1]),this.min[1])-C[1]},zt.prototype.intersects=function(C){for(var z=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],F=!0,q=0;q<C.planes.length;q++){for(var ae=C.planes[q],ue=0,de=0;de<z.length;de++)ue+=e.dot$1(ae,z[de])>=0;if(0===ue)return 0;ue!==z.length&&(F=!1)}if(F)return 2;for(var ye=0;ye<3;ye++){for(var Ae=Number.MAX_VALUE,Ue=-Number.MAX_VALUE,Ge=0;Ge<C.points.length;Ge++){var nt=C.points[Ge][ye]-this.min[ye];Ae=Math.min(Ae,nt),Ue=Math.max(Ue,nt)}if(Ue<0||Ae>this.max[ye]-this.min[ye])return 0}return 1};var ar=function(C,z,F,q){if(void 0===C&&(C=0),void 0===z&&(z=0),void 0===F&&(F=0),void 0===q&&(q=0),isNaN(C)||C<0||isNaN(z)||z<0||isNaN(F)||F<0||isNaN(q)||q<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=C,this.bottom=z,this.left=F,this.right=q};ar.prototype.interpolate=function(C,z,F){return null!=z.top&&null!=C.top&&(this.top=e.number(C.top,z.top,F)),null!=z.bottom&&null!=C.bottom&&(this.bottom=e.number(C.bottom,z.bottom,F)),null!=z.left&&null!=C.left&&(this.left=e.number(C.left,z.left,F)),null!=z.right&&null!=C.right&&(this.right=e.number(C.right,z.right,F)),this},ar.prototype.getCenter=function(C,z){var F=e.clamp((this.left+C-this.right)/2,0,C),q=e.clamp((this.top+z-this.bottom)/2,0,z);return new e.Point(F,q)},ar.prototype.equals=function(C){return this.top===C.top&&this.bottom===C.bottom&&this.left===C.left&&this.right===C.right},ar.prototype.clone=function(){return new ar(this.top,this.bottom,this.left,this.right)},ar.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Ht=function(C,z,F,q,ae){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===ae||ae,this._minZoom=C||0,this._maxZoom=z||22,this._minPitch=null==F?0:F,this._maxPitch=null==q?60:q,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ar,this._posMatrixCache={},this._alignedPosMatrixCache={}},or={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Ht.prototype.clone=function(){var C=new Ht(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return C.tileSize=this.tileSize,C.latRange=this.latRange,C.width=this.width,C.height=this.height,C._center=this._center,C.zoom=this.zoom,C.angle=this.angle,C._fov=this._fov,C._pitch=this._pitch,C._unmodified=this._unmodified,C._edgeInsets=this._edgeInsets.clone(),C._calcMatrices(),C},or.minZoom.get=function(){return this._minZoom},or.minZoom.set=function(C){this._minZoom!==C&&(this._minZoom=C,this.zoom=Math.max(this.zoom,C))},or.maxZoom.get=function(){return this._maxZoom},or.maxZoom.set=function(C){this._maxZoom!==C&&(this._maxZoom=C,this.zoom=Math.min(this.zoom,C))},or.minPitch.get=function(){return this._minPitch},or.minPitch.set=function(C){this._minPitch!==C&&(this._minPitch=C,this.pitch=Math.max(this.pitch,C))},or.maxPitch.get=function(){return this._maxPitch},or.maxPitch.set=function(C){this._maxPitch!==C&&(this._maxPitch=C,this.pitch=Math.min(this.pitch,C))},or.renderWorldCopies.get=function(){return this._renderWorldCopies},or.renderWorldCopies.set=function(C){void 0===C?C=!0:null===C&&(C=!1),this._renderWorldCopies=C},or.worldSize.get=function(){return this.tileSize*this.scale},or.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},or.size.get=function(){return new e.Point(this.width,this.height)},or.bearing.get=function(){return-this.angle/Math.PI*180},or.bearing.set=function(C){var z=-e.wrap(C,-180,180)*Math.PI/180;this.angle!==z&&(this._unmodified=!1,this.angle=z,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},or.pitch.get=function(){return this._pitch/Math.PI*180},or.pitch.set=function(C){var z=e.clamp(C,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==z&&(this._unmodified=!1,this._pitch=z,this._calcMatrices())},or.fov.get=function(){return this._fov/Math.PI*180},or.fov.set=function(C){C=Math.max(.01,Math.min(60,C)),this._fov!==C&&(this._unmodified=!1,this._fov=C/180*Math.PI,this._calcMatrices())},or.zoom.get=function(){return this._zoom},or.zoom.set=function(C){var z=Math.min(Math.max(C,this.minZoom),this.maxZoom);this._zoom!==z&&(this._unmodified=!1,this._zoom=z,this.scale=this.zoomScale(z),this.tileZoom=Math.floor(z),this.zoomFraction=z-this.tileZoom,this._constrain(),this._calcMatrices())},or.center.get=function(){return this._center},or.center.set=function(C){C.lat===this._center.lat&&C.lng===this._center.lng||(this._unmodified=!1,this._center=C,this._constrain(),this._calcMatrices())},or.padding.get=function(){return this._edgeInsets.toJSON()},or.padding.set=function(C){this._edgeInsets.equals(C)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,C,1),this._calcMatrices())},or.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Ht.prototype.isPaddingEqual=function(C){return this._edgeInsets.equals(C)},Ht.prototype.interpolatePadding=function(C,z,F){this._unmodified=!1,this._edgeInsets.interpolate(C,z,F),this._constrain(),this._calcMatrices()},Ht.prototype.coveringZoomLevel=function(C){var z=(C.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/C.tileSize));return Math.max(0,z)},Ht.prototype.getVisibleUnwrappedCoordinates=function(C){var z=[new e.UnwrappedTileID(0,C)];if(this._renderWorldCopies)for(var F=this.pointCoordinate(new e.Point(0,0)),q=this.pointCoordinate(new e.Point(this.width,0)),ae=this.pointCoordinate(new e.Point(this.width,this.height)),ue=this.pointCoordinate(new e.Point(0,this.height)),de=Math.floor(Math.min(F.x,q.x,ae.x,ue.x)),ye=Math.floor(Math.max(F.x,q.x,ae.x,ue.x)),Ae=de-1;Ae<=ye+1;Ae++)0!==Ae&&z.push(new e.UnwrappedTileID(Ae,C));return z},Ht.prototype.coveringTiles=function(C){var z=this.coveringZoomLevel(C),F=z;if(void 0!==C.minzoom&&z<C.minzoom)return[];void 0!==C.maxzoom&&z>C.maxzoom&&(z=C.maxzoom);var q=e.MercatorCoordinate.fromLngLat(this.center),ae=Math.pow(2,z),ue=[ae*q.x,ae*q.y,0],de=ft.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,z),ye=C.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ye=z);var Ae=function(fn){return{aabb:new zt([fn*ae,0,0],[(fn+1)*ae,ae,0]),zoom:0,x:0,y:0,wrap:fn,fullyVisible:!1}},Ue=[],Ge=[],nt=z,xt=C.reparseOverscaled?F:z;if(this._renderWorldCopies)for(var At=1;At<=3;At++)Ue.push(Ae(-At)),Ue.push(Ae(At));for(Ue.push(Ae(0));Ue.length>0;){var wt=Ue.pop(),Tt=wt.x,yt=wt.y,Ft=wt.fullyVisible;if(!Ft){var Ot=wt.aabb.intersects(de);if(0===Ot)continue;Ft=2===Ot}var Nt=wt.aabb.distanceX(ue),er=wt.aabb.distanceY(ue),fr=Math.max(Math.abs(Nt),Math.abs(er));if(wt.zoom===nt||fr>3+(1<<nt-wt.zoom)-2&&wt.zoom>=ye)Ge.push({tileID:new e.OverscaledTileID(wt.zoom===nt?xt:wt.zoom,wt.wrap,wt.zoom,Tt,yt),distanceSq:e.sqrLen([ue[0]-.5-Tt,ue[1]-.5-yt])});else for(var wr=0;wr<4;wr++){var Zr=(Tt<<1)+wr%2,Xr=(yt<<1)+(wr>>1);Ue.push({aabb:wt.aabb.quadrant(wr),zoom:wt.zoom+1,x:Zr,y:Xr,wrap:wt.wrap,fullyVisible:Ft})}}return Ge.sort(function(fn,rn){return fn.distanceSq-rn.distanceSq}).map(function(fn){return fn.tileID})},Ht.prototype.resize=function(C,z){this.width=C,this.height=z,this.pixelsToGLUnits=[2/C,-2/z],this._constrain(),this._calcMatrices()},or.unmodified.get=function(){return this._unmodified},Ht.prototype.zoomScale=function(C){return Math.pow(2,C)},Ht.prototype.scaleZoom=function(C){return Math.log(C)/Math.LN2},Ht.prototype.project=function(C){var z=e.clamp(C.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(C.lng)*this.worldSize,e.mercatorYfromLat(z)*this.worldSize)},Ht.prototype.unproject=function(C){return new e.MercatorCoordinate(C.x/this.worldSize,C.y/this.worldSize).toLngLat()},or.point.get=function(){return this.project(this.center)},Ht.prototype.setLocationAtPoint=function(C,z){var F=this.pointCoordinate(z),q=this.pointCoordinate(this.centerPoint),ae=this.locationCoordinate(C),ue=new e.MercatorCoordinate(ae.x-(F.x-q.x),ae.y-(F.y-q.y));this.center=this.coordinateLocation(ue),this._renderWorldCopies&&(this.center=this.center.wrap())},Ht.prototype.locationPoint=function(C){return this.coordinatePoint(this.locationCoordinate(C))},Ht.prototype.pointLocation=function(C){return this.coordinateLocation(this.pointCoordinate(C))},Ht.prototype.locationCoordinate=function(C){return e.MercatorCoordinate.fromLngLat(C)},Ht.prototype.coordinateLocation=function(C){return C.toLngLat()},Ht.prototype.pointCoordinate=function(C){var z=[C.x,C.y,0,1],F=[C.x,C.y,1,1];e.transformMat4(z,z,this.pixelMatrixInverse),e.transformMat4(F,F,this.pixelMatrixInverse);var q=z[3],ae=F[3],ye=z[1]/q,Ae=F[1]/ae,Ue=z[2]/q,Ge=F[2]/ae,nt=Ue===Ge?0:(0-Ue)/(Ge-Ue);return new e.MercatorCoordinate(e.number(z[0]/q,F[0]/ae,nt)/this.worldSize,e.number(ye,Ae,nt)/this.worldSize)},Ht.prototype.coordinatePoint=function(C){var z=[C.x*this.worldSize,C.y*this.worldSize,0,1];return e.transformMat4(z,z,this.pixelMatrix),new e.Point(z[0]/z[3],z[1]/z[3])},Ht.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Ht.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Ht.prototype.setMaxBounds=function(C){C?(this.lngRange=[C.getWest(),C.getEast()],this.latRange=[C.getSouth(),C.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Ht.prototype.calculatePosMatrix=function(C,z){void 0===z&&(z=!1);var F=C.key,q=z?this._alignedPosMatrixCache:this._posMatrixCache;if(q[F])return q[F];var ae=C.canonical,ue=this.worldSize/this.zoomScale(ae.z),de=ae.x+Math.pow(2,ae.z)*C.wrap,ye=e.identity(new Float64Array(16));return e.translate(ye,ye,[de*ue,ae.y*ue,0]),e.scale(ye,ye,[ue/e.EXTENT,ue/e.EXTENT,1]),e.multiply(ye,z?this.alignedProjMatrix:this.projMatrix,ye),q[F]=new Float32Array(ye),q[F]},Ht.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Ht.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var C,z,F,q,ae=-90,ue=90,de=-180,ye=180,Ae=this.size,Ue=this._unmodified;if(this.latRange){var Ge=this.latRange;ae=e.mercatorYfromLat(Ge[1])*this.worldSize,C=(ue=e.mercatorYfromLat(Ge[0])*this.worldSize)-ae<Ae.y?Ae.y/(ue-ae):0}if(this.lngRange){var nt=this.lngRange;de=e.mercatorXfromLng(nt[0])*this.worldSize,z=(ye=e.mercatorXfromLng(nt[1])*this.worldSize)-de<Ae.x?Ae.x/(ye-de):0}var xt=this.point,At=Math.max(z||0,C||0);if(At)return this.center=this.unproject(new e.Point(z?(ye+de)/2:xt.x,C?(ue+ae)/2:xt.y)),this.zoom+=this.scaleZoom(At),this._unmodified=Ue,void(this._constraining=!1);if(this.latRange){var wt=xt.y,Tt=Ae.y/2;wt-Tt<ae&&(q=ae+Tt),wt+Tt>ue&&(q=ue-Tt)}if(this.lngRange){var yt=xt.x,Ft=Ae.x/2;yt-Ft<de&&(F=de+Ft),yt+Ft>ye&&(F=ye-Ft)}void 0===F&&void 0===q||(this.center=this.unproject(new e.Point(void 0!==F?F:xt.x,void 0!==q?q:xt.y))),this._unmodified=Ue,this._constraining=!1}},Ht.prototype._calcMatrices=function(){if(this.height){var z=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var F=Math.PI/2+this._pitch,q=this._fov*(.5+z.y/this.height),ae=Math.sin(q)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-F-q,.01,Math.PI-.01)),ue=this.point,de=ue.x,ye=ue.y,Ae=1.01*(Math.cos(Math.PI/2-this._pitch)*ae+this.cameraToCenterDistance),Ue=this.height/50,Ge=new Float64Array(16);e.perspective(Ge,this._fov,this.width/this.height,Ue,Ae),Ge[8]=2*-z.x/this.width,Ge[9]=2*z.y/this.height,e.scale(Ge,Ge,[1,-1,1]),e.translate(Ge,Ge,[0,0,-this.cameraToCenterDistance]),e.rotateX(Ge,Ge,this._pitch),e.rotateZ(Ge,Ge,this.angle),e.translate(Ge,Ge,[-de,-ye,0]),this.mercatorMatrix=e.scale([],Ge,[this.worldSize,this.worldSize,this.worldSize]),e.scale(Ge,Ge,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=Ge,this.invProjMatrix=e.invert([],this.projMatrix);var nt=this.width%2/2,xt=this.height%2/2,At=Math.cos(this.angle),wt=Math.sin(this.angle),Tt=de-Math.round(de)+At*nt+wt*xt,yt=ye-Math.round(ye)+At*xt+wt*nt,Ft=new Float64Array(Ge);if(e.translate(Ft,Ft,[Tt>.5?Tt-1:Tt,yt>.5?yt-1:yt,0]),this.alignedProjMatrix=Ft,Ge=e.create(),e.scale(Ge,Ge,[this.width/2,-this.height/2,1]),e.translate(Ge,Ge,[1,-1,0]),this.labelPlaneMatrix=Ge,Ge=e.create(),e.scale(Ge,Ge,[1,-1,1]),e.translate(Ge,Ge,[-1,-1,0]),e.scale(Ge,Ge,[2/this.width,2/this.height,1]),this.glCoordMatrix=Ge,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(Ge=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=Ge,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Ht.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var C=this.pointCoordinate(new e.Point(0,0)),z=[C.x*this.worldSize,C.y*this.worldSize,0,1];return e.transformMat4(z,z,this.pixelMatrix)[3]/this.cameraToCenterDistance},Ht.prototype.getCameraPoint=function(){var z=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,z))},Ht.prototype.getCameraQueryGeometry=function(C){var z=this.getCameraPoint();if(1===C.length)return[C[0],z];for(var F=z.x,q=z.y,ae=z.x,ue=z.y,de=0,ye=C;de<ye.length;de+=1){var Ae=ye[de];F=Math.min(F,Ae.x),q=Math.min(q,Ae.y),ae=Math.max(ae,Ae.x),ue=Math.max(ue,Ae.y)}return[new e.Point(F,q),new e.Point(ae,q),new e.Point(ae,ue),new e.Point(F,ue),new e.Point(F,q)]},Object.defineProperties(Ht.prototype,or);var Er=function(C){var z,q,ae,ue;this._hashName=C&&encodeURIComponent(C),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(z=this._updateHashUnthrottled.bind(this),q=!1,ae=null,ue=function(){ae=null,q&&(z(),ae=setTimeout(ue,300),q=!1)},function(){return q=!0,ae||ue(),ae})};Er.prototype.addTo=function(C){return this._map=C,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Er.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Er.prototype.getHashString=function(C){var z=this._map.getCenter(),F=Math.round(100*this._map.getZoom())/100,q=Math.ceil((F*Math.LN2+Math.log(512/360/.5))/Math.LN10),ae=Math.pow(10,q),ue=Math.round(z.lng*ae)/ae,de=Math.round(z.lat*ae)/ae,ye=this._map.getBearing(),Ae=this._map.getPitch(),Ue="";if(Ue+=C?"/"+ue+"/"+de+"/"+F:F+"/"+de+"/"+ue,(ye||Ae)&&(Ue+="/"+Math.round(10*ye)/10),Ae&&(Ue+="/"+Math.round(Ae)),this._hashName){var Ge=this._hashName,nt=!1,xt=e.window.location.hash.slice(1).split("&").map(function(At){var wt=At.split("=")[0];return wt===Ge?(nt=!0,wt+"="+Ue):At}).filter(function(At){return At});return nt||xt.push(Ge+"="+Ue),"#"+xt.join("&")}return"#"+Ue},Er.prototype._getCurrentHash=function(){var C,z=this,F=e.window.location.hash.replace("#","");return this._hashName?(F.split("&").map(function(q){return q.split("=")}).forEach(function(q){q[0]===z._hashName&&(C=q)}),(C&&C[1]||"").split("/")):F.split("/")},Er.prototype._onHashChange=function(){var C=this._getCurrentHash();if(C.length>=3&&!C.some(function(F){return isNaN(F)})){var z=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(C[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+C[2],+C[1]],zoom:+C[0],bearing:z,pitch:+(C[4]||0)}),!0}return!1},Er.prototype._updateHashUnthrottled=function(){var C=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",C)}catch(z){}};var Or={linearity:.3,easing:e.bezier(0,0,.3,1)},Gr=e.extend({deceleration:2500,maxSpeed:1400},Or),an=e.extend({deceleration:20,maxSpeed:1400},Or),tn=e.extend({deceleration:1e3,maxSpeed:360},Or),pn=e.extend({deceleration:1e3,maxSpeed:90},Or),xn=function(C){this._map=C,this.clear()};function on(C,z){(!C.duration||C.duration<z.duration)&&(C.duration=z.duration,C.easing=z.easing)}function bn(C,z,F){var q=F.maxSpeed,ae=F.linearity,ue=F.deceleration,de=e.clamp(C*ae/(z/1e3),-q,q),ye=Math.abs(de)/(ue*ae);return{easing:F.easing,duration:1e3*ye,amount:de*(ye/2)}}xn.prototype.clear=function(){this._inertiaBuffer=[]},xn.prototype.record=function(C){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:C})},xn.prototype._drainInertiaBuffer=function(){for(var C=this._inertiaBuffer,z=e.browser.now();C.length>0&&z-C[0].time>160;)C.shift()},xn.prototype._onMoveEnd=function(C){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var z={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},F=0,q=this._inertiaBuffer;F<q.length;F+=1){var ae=q[F].settings;z.zoom+=ae.zoomDelta||0,z.bearing+=ae.bearingDelta||0,z.pitch+=ae.pitchDelta||0,ae.panDelta&&z.pan._add(ae.panDelta),ae.around&&(z.around=ae.around),ae.pinchAround&&(z.pinchAround=ae.pinchAround)}var ue=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,de={};if(z.pan.mag()){var ye=bn(z.pan.mag(),ue,e.extend({},Gr,C||{}));de.offset=z.pan.mult(ye.amount/z.pan.mag()),de.center=this._map.transform.center,on(de,ye)}if(z.zoom){var Ae=bn(z.zoom,ue,an);de.zoom=this._map.transform.zoom+Ae.amount,on(de,Ae)}if(z.bearing){var Ue=bn(z.bearing,ue,tn);de.bearing=this._map.transform.bearing+e.clamp(Ue.amount,-179,179),on(de,Ue)}if(z.pitch){var Ge=bn(z.pitch,ue,pn);de.pitch=this._map.transform.pitch+Ge.amount,on(de,Ge)}if(de.zoom||de.bearing){var nt=void 0===z.pinchAround?z.around:z.pinchAround;de.around=nt?this._map.unproject(nt):this._map.getCenter()}return this.clear(),e.extend(de,{noMoveStart:!0})}};var zn=function(C){function z(q,ae,ue,de){void 0===de&&(de={});var ye=t.mousePos(ae.getCanvasContainer(),ue),Ae=ae.unproject(ye);C.call(this,q,e.extend({point:ye,lngLat:Ae,originalEvent:ue},de)),this._defaultPrevented=!1,this.target=ae}C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z;var F={defaultPrevented:{configurable:!0}};return z.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(z.prototype,F),z}(e.Event),jn=function(C){function z(q,ae,ue){var de="touchend"===q?ue.changedTouches:ue.touches,ye=t.touchPos(ae.getCanvasContainer(),de),Ae=ye.map(function(nt){return ae.unproject(nt)}),Ue=ye.reduce(function(nt,xt,At,wt){return nt.add(xt.div(wt.length))},new e.Point(0,0)),Ge=ae.unproject(Ue);C.call(this,q,{points:ye,point:Ue,lngLats:Ae,lngLat:Ge,originalEvent:ue}),this._defaultPrevented=!1}C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z;var F={defaultPrevented:{configurable:!0}};return z.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(z.prototype,F),z}(e.Event),$n=function(C){function z(q,ae,ue){C.call(this,q,{originalEvent:ue}),this._defaultPrevented=!1}C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z;var F={defaultPrevented:{configurable:!0}};return z.prototype.preventDefault=function(){this._defaultPrevented=!0},F.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(z.prototype,F),z}(e.Event),Wr=function(C,z){this._map=C,this._clickTolerance=z.clickTolerance};Wr.prototype.reset=function(){delete this._mousedownPos},Wr.prototype.wheel=function(C){return this._firePreventable(new $n(C.type,this._map,C))},Wr.prototype.mousedown=function(C,z){return this._mousedownPos=z,this._firePreventable(new zn(C.type,this._map,C))},Wr.prototype.mouseup=function(C){this._map.fire(new zn(C.type,this._map,C))},Wr.prototype.click=function(C,z){this._mousedownPos&&this._mousedownPos.dist(z)>=this._clickTolerance||this._map.fire(new zn(C.type,this._map,C))},Wr.prototype.dblclick=function(C){return this._firePreventable(new zn(C.type,this._map,C))},Wr.prototype.mouseover=function(C){this._map.fire(new zn(C.type,this._map,C))},Wr.prototype.mouseout=function(C){this._map.fire(new zn(C.type,this._map,C))},Wr.prototype.touchstart=function(C){return this._firePreventable(new jn(C.type,this._map,C))},Wr.prototype.touchmove=function(C){this._map.fire(new jn(C.type,this._map,C))},Wr.prototype.touchend=function(C){this._map.fire(new jn(C.type,this._map,C))},Wr.prototype.touchcancel=function(C){this._map.fire(new jn(C.type,this._map,C))},Wr.prototype._firePreventable=function(C){if(this._map.fire(C),C.defaultPrevented)return{}},Wr.prototype.isEnabled=function(){return!0},Wr.prototype.isActive=function(){return!1},Wr.prototype.enable=function(){},Wr.prototype.disable=function(){};var Jn=function(C){this._map=C};Jn.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Jn.prototype.mousemove=function(C){this._map.fire(new zn(C.type,this._map,C))},Jn.prototype.mousedown=function(){this._delayContextMenu=!0},Jn.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new zn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Jn.prototype.contextmenu=function(C){this._delayContextMenu?this._contextMenuEvent=C:this._map.fire(new zn(C.type,this._map,C)),this._map.listens("contextmenu")&&C.preventDefault()},Jn.prototype.isEnabled=function(){return!0},Jn.prototype.isActive=function(){return!1},Jn.prototype.enable=function(){},Jn.prototype.disable=function(){};var Ln=function(C,z){this._map=C,this._el=C.getCanvasContainer(),this._container=C.getContainer(),this._clickTolerance=z.clickTolerance||1};function Bn(C,z){for(var F={},q=0;q<C.length;q++)F[C[q].identifier]=z[q];return F}Ln.prototype.isEnabled=function(){return!!this._enabled},Ln.prototype.isActive=function(){return!!this._active},Ln.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ln.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ln.prototype.mousedown=function(C,z){this.isEnabled()&&C.shiftKey&&0===C.button&&(t.disableDrag(),this._startPos=this._lastPos=z,this._active=!0)},Ln.prototype.mousemoveWindow=function(C,z){if(this._active){var F=z;if(!(this._lastPos.equals(F)||!this._box&&F.dist(this._startPos)<this._clickTolerance)){var q=this._startPos;this._lastPos=F,this._box||(this._box=t.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",C));var ae=Math.min(q.x,F.x),ue=Math.max(q.x,F.x),de=Math.min(q.y,F.y),ye=Math.max(q.y,F.y);t.setTransform(this._box,"translate("+ae+"px,"+de+"px)"),this._box.style.width=ue-ae+"px",this._box.style.height=ye-de+"px"}}},Ln.prototype.mouseupWindow=function(C,z){var F=this;if(this._active&&0===C.button){var q=this._startPos,ae=z;if(this.reset(),t.suppressClick(),q.x!==ae.x||q.y!==ae.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:C})),{cameraAnimation:function(ue){return ue.fitScreenCoordinates(q,ae,F._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",C)}},Ln.prototype.keydown=function(C){this._active&&27===C.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",C))},Ln.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(t.remove(this._box),this._box=null),t.enableDrag(),delete this._startPos,delete this._lastPos},Ln.prototype._fireEvent=function(C,z){return this._map.fire(new e.Event(C,{originalEvent:z}))};var Zn=function(C){this.reset(),this.numTouches=C.numTouches};Zn.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Zn.prototype.touchstart=function(C,z,F){(this.centroid||F.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=C.timeStamp),F.length===this.numTouches&&(this.centroid=function(q){for(var ae=new e.Point(0,0),ue=0,de=q;ue<de.length;ue+=1)ae._add(de[ue]);return ae.div(q.length)}(z),this.touches=Bn(F,z)))},Zn.prototype.touchmove=function(C,z,F){if(!this.aborted&&this.centroid){var q=Bn(F,z);for(var ae in this.touches){var de=q[ae];(!de||de.dist(this.touches[ae])>30)&&(this.aborted=!0)}}},Zn.prototype.touchend=function(C,z,F){if((!this.centroid||C.timeStamp-this.startTime>500)&&(this.aborted=!0),0===F.length){var q=!this.aborted&&this.centroid;if(this.reset(),q)return q}};var xi=function(C){this.singleTap=new Zn(C),this.numTaps=C.numTaps,this.reset()};xi.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},xi.prototype.touchstart=function(C,z,F){this.singleTap.touchstart(C,z,F)},xi.prototype.touchmove=function(C,z,F){this.singleTap.touchmove(C,z,F)},xi.prototype.touchend=function(C,z,F){var q=this.singleTap.touchend(C,z,F);if(q){var ae=C.timeStamp-this.lastTime<500,ue=!this.lastTap||this.lastTap.dist(q)<30;if(ae&&ue||this.reset(),this.count++,this.lastTime=C.timeStamp,this.lastTap=q,this.count===this.numTaps)return this.reset(),q}};var Ai=function(){this._zoomIn=new xi({numTouches:1,numTaps:2}),this._zoomOut=new xi({numTouches:2,numTaps:1}),this.reset()};Ai.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Ai.prototype.touchstart=function(C,z,F){this._zoomIn.touchstart(C,z,F),this._zoomOut.touchstart(C,z,F)},Ai.prototype.touchmove=function(C,z,F){this._zoomIn.touchmove(C,z,F),this._zoomOut.touchmove(C,z,F)},Ai.prototype.touchend=function(C,z,F){var q=this,ae=this._zoomIn.touchend(C,z,F),ue=this._zoomOut.touchend(C,z,F);return ae?(this._active=!0,C.preventDefault(),setTimeout(function(){return q.reset()},0),{cameraAnimation:function(de){return de.easeTo({duration:300,zoom:de.getZoom()+1,around:de.unproject(ae)},{originalEvent:C})}}):ue?(this._active=!0,C.preventDefault(),setTimeout(function(){return q.reset()},0),{cameraAnimation:function(de){return de.easeTo({duration:300,zoom:de.getZoom()-1,around:de.unproject(ue)},{originalEvent:C})}}):void 0},Ai.prototype.touchcancel=function(){this.reset()},Ai.prototype.enable=function(){this._enabled=!0},Ai.prototype.disable=function(){this._enabled=!1,this.reset()},Ai.prototype.isEnabled=function(){return this._enabled},Ai.prototype.isActive=function(){return this._active};var kn=function(C){this.reset(),this._clickTolerance=C.clickTolerance||1};kn.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},kn.prototype._correctButton=function(C,z){return!1},kn.prototype._move=function(C,z){return{}},kn.prototype.mousedown=function(C,z){if(!this._lastPoint){var F=t.mouseButton(C);this._correctButton(C,F)&&(this._lastPoint=z,this._eventButton=F)}},kn.prototype.mousemoveWindow=function(C,z){var F=this._lastPoint;if(F&&(C.preventDefault(),this._moved||!(z.dist(F)<this._clickTolerance)))return this._moved=!0,this._lastPoint=z,this._move(F,z)},kn.prototype.mouseupWindow=function(C){t.mouseButton(C)===this._eventButton&&(this._moved&&t.suppressClick(),this.reset())},kn.prototype.enable=function(){this._enabled=!0},kn.prototype.disable=function(){this._enabled=!1,this.reset()},kn.prototype.isEnabled=function(){return this._enabled},kn.prototype.isActive=function(){return this._active};var Li=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.mousedown=function(F,q){C.prototype.mousedown.call(this,F,q),this._lastPoint&&(this._active=!0)},z.prototype._correctButton=function(F,q){return 0===q&&!F.ctrlKey},z.prototype._move=function(F,q){return{around:q,panDelta:q.sub(F)}},z}(kn),Ti=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._correctButton=function(F,q){return 0===q&&F.ctrlKey||2===q},z.prototype._move=function(F,q){var ae=.8*(q.x-F.x);if(ae)return this._active=!0,{bearingDelta:ae}},z.prototype.contextmenu=function(F){F.preventDefault()},z}(kn),fi=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype._correctButton=function(F,q){return 0===q&&F.ctrlKey||2===q},z.prototype._move=function(F,q){var ae=-.5*(q.y-F.y);if(ae)return this._active=!0,{pitchDelta:ae}},z.prototype.contextmenu=function(F){F.preventDefault()},z}(kn),Ci=function(C){this._minTouches=1,this._clickTolerance=C.clickTolerance||1,this.reset()};Ci.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Ci.prototype.touchstart=function(C,z,F){return this._calculateTransform(C,z,F)},Ci.prototype.touchmove=function(C,z,F){if(this._active)return C.preventDefault(),this._calculateTransform(C,z,F)},Ci.prototype.touchend=function(C,z,F){this._calculateTransform(C,z,F),this._active&&F.length<this._minTouches&&this.reset()},Ci.prototype.touchcancel=function(){this.reset()},Ci.prototype._calculateTransform=function(C,z,F){F.length>0&&(this._active=!0);var q=Bn(F,z),ae=new e.Point(0,0),ue=new e.Point(0,0),de=0;for(var ye in q){var Ae=q[ye],Ue=this._touches[ye];Ue&&(ae._add(Ae),ue._add(Ae.sub(Ue)),de++,q[ye]=Ae)}if(this._touches=q,!(de<this._minTouches)&&ue.mag()){var Ge=ue.div(de);if(this._sum._add(Ge),!(this._sum.mag()<this._clickTolerance))return{around:ae.div(de),panDelta:Ge}}},Ci.prototype.enable=function(){this._enabled=!0},Ci.prototype.disable=function(){this._enabled=!1,this.reset()},Ci.prototype.isEnabled=function(){return this._enabled},Ci.prototype.isActive=function(){return this._active};var _i=function(){this.reset()};function Xi(C,z,F){for(var q=0;q<C.length;q++)if(C[q].identifier===F)return z[q]}function Kn(C,z){return Math.log(C/z)/Math.LN2}_i.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},_i.prototype._start=function(C){},_i.prototype._move=function(C,z,F){return{}},_i.prototype.touchstart=function(C,z,F){this._firstTwoTouches||F.length<2||(this._firstTwoTouches=[F[0].identifier,F[1].identifier],this._start([z[0],z[1]]))},_i.prototype.touchmove=function(C,z,F){if(this._firstTwoTouches){C.preventDefault();var q=this._firstTwoTouches,ue=q[1],de=Xi(F,z,q[0]),ye=Xi(F,z,ue);if(de&&ye){var Ae=this._aroundCenter?null:de.add(ye).div(2);return this._move([de,ye],Ae,C)}}},_i.prototype.touchend=function(C,z,F){if(this._firstTwoTouches){var q=this._firstTwoTouches,ue=q[1],de=Xi(F,z,q[0]),ye=Xi(F,z,ue);de&&ye||(this._active&&t.suppressClick(),this.reset())}},_i.prototype.touchcancel=function(){this.reset()},_i.prototype.enable=function(C){this._enabled=!0,this._aroundCenter=!!C&&"center"===C.around},_i.prototype.disable=function(){this._enabled=!1,this.reset()},_i.prototype.isEnabled=function(){return this._enabled},_i.prototype.isActive=function(){return this._active};var Vi=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.reset=function(){C.prototype.reset.call(this),delete this._distance,delete this._startDistance},z.prototype._start=function(F){this._startDistance=this._distance=F[0].dist(F[1])},z.prototype._move=function(F,q){var ae=this._distance;if(this._distance=F[0].dist(F[1]),this._active||!(Math.abs(Kn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Kn(this._distance,ae),pinchAround:q}},z}(_i);function za(C,z){return 180*C.angleWith(z)/Math.PI}var qo=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.reset=function(){C.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},z.prototype._start=function(F){this._startVector=this._vector=F[0].sub(F[1]),this._minDiameter=F[0].dist(F[1])},z.prototype._move=function(F,q){var ae=this._vector;if(this._vector=F[0].sub(F[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:za(this._vector,ae),pinchAround:q}},z.prototype._isBelowThreshold=function(F){this._minDiameter=Math.min(this._minDiameter,F.mag());var q=25/(Math.PI*this._minDiameter)*360,ae=za(F,this._startVector);return Math.abs(ae)<q},z}(_i);function Lo(C){return Math.abs(C.y)>Math.abs(C.x)}var uo=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.reset=function(){C.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},z.prototype._start=function(F){this._lastPoints=F,Lo(F[0].sub(F[1]))&&(this._valid=!1)},z.prototype._move=function(F,q,ae){var ue=F[0].sub(this._lastPoints[0]),de=F[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ue,de,ae.timeStamp),this._valid)return this._lastPoints=F,this._active=!0,{pitchDelta:(ue.y+de.y)/2*-.5}},z.prototype.gestureBeginsVertically=function(F,q,ae){if(void 0!==this._valid)return this._valid;var ue=F.mag()>=2,de=q.mag()>=2;if(ue||de){if(!ue||!de)return void 0===this._firstMove&&(this._firstMove=ae),ae-this._firstMove<100&&void 0;var ye=F.y>0==q.y>0;return Lo(F)&&Lo(q)&&ye}},z}(_i),di={panStep:100,bearingStep:15,pitchStep:10},ca=function(){var C=di;this._panStep=C.panStep,this._bearingStep=C.bearingStep,this._pitchStep=C.pitchStep};function fo(C){return C*(2-C)}ca.prototype.reset=function(){this._active=!1},ca.prototype.keydown=function(C){var z=this;if(!(C.altKey||C.ctrlKey||C.metaKey)){var F=0,q=0,ae=0,ue=0,de=0;switch(C.keyCode){case 61:case 107:case 171:case 187:F=1;break;case 189:case 109:case 173:F=-1;break;case 37:C.shiftKey?q=-1:(C.preventDefault(),ue=-1);break;case 39:C.shiftKey?q=1:(C.preventDefault(),ue=1);break;case 38:C.shiftKey?ae=1:(C.preventDefault(),de=-1);break;case 40:C.shiftKey?ae=-1:(C.preventDefault(),de=1);break;default:return}return{cameraAnimation:function(ye){var Ae=ye.getZoom();ye.easeTo({duration:300,easeId:"keyboardHandler",easing:fo,zoom:F?Math.round(Ae)+F*(C.shiftKey?2:1):Ae,bearing:ye.getBearing()+q*z._bearingStep,pitch:ye.getPitch()+ae*z._pitchStep,offset:[-ue*z._panStep,-de*z._panStep],center:ye.getCenter()},{originalEvent:C})}}}},ca.prototype.enable=function(){this._enabled=!0},ca.prototype.disable=function(){this._enabled=!1,this.reset()},ca.prototype.isEnabled=function(){return this._enabled},ca.prototype.isActive=function(){return this._active};var Hi=function(C,z){this._map=C,this._el=C.getCanvasContainer(),this._handler=z,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Hi.prototype.setZoomRate=function(C){this._defaultZoomRate=C},Hi.prototype.setWheelZoomRate=function(C){this._wheelZoomRate=C},Hi.prototype.isEnabled=function(){return!!this._enabled},Hi.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Hi.prototype.isZooming=function(){return!!this._zooming},Hi.prototype.enable=function(C){this.isEnabled()||(this._enabled=!0,this._aroundCenter=C&&"center"===C.around)},Hi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Hi.prototype.wheel=function(C){if(this.isEnabled()){var z=C.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*C.deltaY:C.deltaY,F=e.browser.now(),q=F-(this._lastWheelEventTime||0);this._lastWheelEventTime=F,0!==z&&z%4.000244140625==0?this._type="wheel":0!==z&&Math.abs(z)<4?this._type="trackpad":q>400?(this._type=null,this._lastValue=z,this._timeout=setTimeout(this._onTimeout,40,C)):this._type||(this._type=Math.abs(q*z)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,z+=this._lastValue)),C.shiftKey&&z&&(z/=4),this._type&&(this._lastWheelEvent=C,this._delta-=z,this._active||this._start(C)),C.preventDefault()}},Hi.prototype._onTimeout=function(C){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(C)},Hi.prototype._start=function(C){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var z=t.mousePos(this._el,C);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(z)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Hi.prototype.renderFrame=function(){return this._onScrollFrame()},Hi.prototype._onScrollFrame=function(){var C=this;if(this._frameId&&(this._frameId=null,this.isActive())){var z=this._map.transform;if(0!==this._delta){var F="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,q=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&0!==q&&(q=1/q);var ae="number"==typeof this._targetZoom?z.zoomScale(this._targetZoom):z.scale;this._targetZoom=Math.min(z.maxZoom,Math.max(z.minZoom,z.scaleZoom(ae*q))),"wheel"===this._type&&(this._startZoom=z.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ue,de="number"==typeof this._targetZoom?this._targetZoom:z.zoom,ye=this._startZoom,Ae=this._easing,Ue=!1;if("wheel"===this._type&&ye&&Ae){var Ge=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),nt=Ae(Ge);ue=e.number(ye,de,nt),Ge<1?this._frameId||(this._frameId=!0):Ue=!0}else ue=de,Ue=!0;return this._active=!0,Ue&&(this._active=!1,this._finishTimeout=setTimeout(function(){C._zooming=!1,C._handler._triggerRenderFrame(),delete C._targetZoom,delete C._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ue,zoomDelta:ue-z.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Hi.prototype._smoothOutEasing=function(C){var z=e.ease;if(this._prevEase){var F=this._prevEase,q=(e.browser.now()-F.start)/F.duration,ae=F.easing(q+.01)-F.easing(q),ue=.27/Math.sqrt(ae*ae+1e-4)*.01,de=Math.sqrt(.0729-ue*ue);z=e.bezier(ue,de,.25,1)}return this._prevEase={start:e.browser.now(),duration:C,easing:z},z},Hi.prototype.reset=function(){this._active=!1};var ya=function(C,z){this._clickZoom=C,this._tapZoom=z};ya.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ya.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ya.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ya.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ba=function(){this.reset()};Ba.prototype.reset=function(){this._active=!1},Ba.prototype.dblclick=function(C,z){return C.preventDefault(),{cameraAnimation:function(F){F.easeTo({duration:300,zoom:F.getZoom()+(C.shiftKey?-1:1),around:F.unproject(z)},{originalEvent:C})}}},Ba.prototype.enable=function(){this._enabled=!0},Ba.prototype.disable=function(){this._enabled=!1,this.reset()},Ba.prototype.isEnabled=function(){return this._enabled},Ba.prototype.isActive=function(){return this._active};var Ji=function(){this._tap=new xi({numTouches:1,numTaps:1}),this.reset()};Ji.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ji.prototype.touchstart=function(C,z,F){this._swipePoint||(this._tapTime&&C.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?F.length>0&&(this._swipePoint=z[0],this._swipeTouch=F[0].identifier):this._tap.touchstart(C,z,F))},Ji.prototype.touchmove=function(C,z,F){if(this._tapTime){if(this._swipePoint){if(F[0].identifier!==this._swipeTouch)return;var q=z[0],ae=q.y-this._swipePoint.y;return this._swipePoint=q,C.preventDefault(),this._active=!0,{zoomDelta:ae/128}}}else this._tap.touchmove(C,z,F)},Ji.prototype.touchend=function(C,z,F){this._tapTime?this._swipePoint&&0===F.length&&this.reset():this._tap.touchend(C,z,F)&&(this._tapTime=C.timeStamp)},Ji.prototype.touchcancel=function(){this.reset()},Ji.prototype.enable=function(){this._enabled=!0},Ji.prototype.disable=function(){this._enabled=!1,this.reset()},Ji.prototype.isEnabled=function(){return this._enabled},Ji.prototype.isActive=function(){return this._active};var io=function(C,z,F){this._el=C,this._mousePan=z,this._touchPan=F};io.prototype.enable=function(C){this._inertiaOptions=C||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},io.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},io.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},io.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ki=function(C,z,F){this._pitchWithRotate=C.pitchWithRotate,this._mouseRotate=z,this._mousePitch=F};Ki.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ki.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ki.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ki.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ja=function(C,z,F,q){this._el=C,this._touchZoom=z,this._touchRotate=F,this._tapDragZoom=q,this._rotationDisabled=!1,this._enabled=!0};Ja.prototype.enable=function(C){this._touchZoom.enable(C),this._rotationDisabled||this._touchRotate.enable(C),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ja.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ja.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ja.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ja.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ja.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var rs=function(C){return C.zoom||C.drag||C.pitch||C.rotate},Jo=function(C){function z(){C.apply(this,arguments)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z}(e.Event);function Is(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta}var La=function(C,z){this._map=C,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new xn(C),this._bearingSnap=z.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(z),e.bindAll(["handleEvent","handleWindowEvent"],this);var F=this._el;this._listeners=[[F,"touchstart",{passive:!1}],[F,"touchmove",{passive:!1}],[F,"touchend",void 0],[F,"touchcancel",void 0],[F,"mousedown",void 0],[F,"mousemove",void 0],[F,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[F,"mouseover",void 0],[F,"mouseout",void 0],[F,"dblclick",void 0],[F,"click",void 0],[F,"keydown",{capture:!1}],[F,"keyup",void 0],[F,"wheel",{passive:!1}],[F,"contextmenu",void 0],[e.window,"blur",void 0]];for(var q=0,ae=this._listeners;q<ae.length;q+=1){var ue=ae[q],de=ue[0];t.addEventListener(de,ue[1],de===e.window.document?this.handleWindowEvent:this.handleEvent,ue[2])}};La.prototype.destroy=function(){for(var C=0,z=this._listeners;C<z.length;C+=1){var F=z[C],q=F[0];t.removeEventListener(q,F[1],q===e.window.document?this.handleWindowEvent:this.handleEvent,F[2])}},La.prototype._addDefaultHandlers=function(C){var z=this._map,F=z.getCanvasContainer();this._add("mapEvent",new Wr(z,C));var q=z.boxZoom=new Ln(z,C);this._add("boxZoom",q);var ae=new Ai,ue=new Ba;z.doubleClickZoom=new ya(ue,ae),this._add("tapZoom",ae),this._add("clickZoom",ue);var de=new Ji;this._add("tapDragZoom",de);var ye=z.touchPitch=new uo;this._add("touchPitch",ye);var Ae=new Ti(C),Ue=new fi(C);z.dragRotate=new Ki(C,Ae,Ue),this._add("mouseRotate",Ae,["mousePitch"]),this._add("mousePitch",Ue,["mouseRotate"]);var Ge=new Li(C),nt=new Ci(C);z.dragPan=new io(F,Ge,nt),this._add("mousePan",Ge),this._add("touchPan",nt,["touchZoom","touchRotate"]);var xt=new qo,At=new Vi;z.touchZoomRotate=new Ja(F,At,xt,de),this._add("touchRotate",xt,["touchPan","touchZoom"]),this._add("touchZoom",At,["touchPan","touchRotate"]);var wt=z.scrollZoom=new Hi(z,this);this._add("scrollZoom",wt,["mousePan"]);var Tt=z.keyboard=new ca;this._add("keyboard",Tt),this._add("blockableMapEvent",new Jn(z));for(var yt=0,Ft=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];yt<Ft.length;yt+=1){var Ot=Ft[yt];C.interactive&&C[Ot]&&z[Ot].enable(C[Ot])}},La.prototype._add=function(C,z,F){this._handlers.push({handlerName:C,handler:z,allowed:F}),this._handlersById[C]=z},La.prototype.stop=function(){if(!this._updatingCamera){for(var C=0,z=this._handlers;C<z.length;C+=1)z[C].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},La.prototype.isActive=function(){for(var C=0,z=this._handlers;C<z.length;C+=1)if(z[C].handler.isActive())return!0;return!1},La.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},La.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},La.prototype.isMoving=function(){return Boolean(rs(this._eventsInProgress))||this.isZooming()},La.prototype._blockedByActive=function(C,z,F){for(var q in C)if(q!==F&&(!z||z.indexOf(q)<0))return!0;return!1},La.prototype.handleWindowEvent=function(C){this.handleEvent(C,C.type+"Window")},La.prototype._getMapTouches=function(C){for(var z=[],F=0,q=C;F<q.length;F+=1){var ae=q[F];this._el.contains(ae.target)&&z.push(ae)}return z},La.prototype.handleEvent=function(C,z){if("blur"!==C.type){this._updatingCamera=!0;for(var F="renderFrame"===C.type?void 0:C,q={needsRenderFrame:!1},ae={},ue={},de=C.touches?this._getMapTouches(C.touches):void 0,ye=de?t.touchPos(this._el,de):t.mousePos(this._el,C),Ae=0,Ue=this._handlers;Ae<Ue.length;Ae+=1){var Ge=Ue[Ae],nt=Ge.handlerName,xt=Ge.handler,At=Ge.allowed;if(xt.isEnabled()){var wt=void 0;this._blockedByActive(ue,At,nt)?xt.reset():xt[z||C.type]&&(wt=xt[z||C.type](C,ye,de),this.mergeHandlerResult(q,ae,wt,nt,F),wt&&wt.needsRenderFrame&&this._triggerRenderFrame()),(wt||xt.isActive())&&(ue[nt]=xt)}}var Tt={};for(var yt in this._previousActiveHandlers)ue[yt]||(Tt[yt]=F);this._previousActiveHandlers=ue,(Object.keys(Tt).length||Is(q))&&(this._changes.push([q,ae,Tt]),this._triggerRenderFrame()),(Object.keys(ue).length||Is(q))&&this._map._stop(!0),this._updatingCamera=!1;var Ft=q.cameraAnimation;Ft&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Ft(this._map))}else this.stop()},La.prototype.mergeHandlerResult=function(C,z,F,q,ae){if(F){e.extend(C,F);var ue={handlerName:q,originalEvent:F.originalEvent||ae};void 0!==F.zoomDelta&&(z.zoom=ue),void 0!==F.panDelta&&(z.drag=ue),void 0!==F.pitchDelta&&(z.pitch=ue),void 0!==F.bearingDelta&&(z.rotate=ue)}},La.prototype._applyChanges=function(){for(var C={},z={},F={},q=0,ae=this._changes;q<ae.length;q+=1){var ue=ae[q],de=ue[0],ye=ue[1],Ae=ue[2];de.panDelta&&(C.panDelta=(C.panDelta||new e.Point(0,0))._add(de.panDelta)),de.zoomDelta&&(C.zoomDelta=(C.zoomDelta||0)+de.zoomDelta),de.bearingDelta&&(C.bearingDelta=(C.bearingDelta||0)+de.bearingDelta),de.pitchDelta&&(C.pitchDelta=(C.pitchDelta||0)+de.pitchDelta),void 0!==de.around&&(C.around=de.around),void 0!==de.pinchAround&&(C.pinchAround=de.pinchAround),de.noInertia&&(C.noInertia=de.noInertia),e.extend(z,ye),e.extend(F,Ae)}this._updateMapTransform(C,z,F),this._changes=[]},La.prototype._updateMapTransform=function(C,z,F){var q=this._map,ae=q.transform;if(!Is(C))return this._fireEvents(z,F);var ue=C.panDelta,de=C.zoomDelta,ye=C.bearingDelta,Ae=C.pitchDelta,Ue=C.around,Ge=C.pinchAround;void 0!==Ge&&(Ue=Ge),q._stop(!0),Ue=Ue||q.transform.centerPoint;var nt=ae.pointLocation(ue?Ue.sub(ue):Ue);ye&&(ae.bearing+=ye),Ae&&(ae.pitch+=Ae),de&&(ae.zoom+=de),ae.setLocationAtPoint(nt,Ue),this._map._update(),C.noInertia||this._inertia.record(C),this._fireEvents(z,F)},La.prototype._fireEvents=function(C,z){var F=this,q=rs(this._eventsInProgress),ae=rs(C),ue={};for(var de in C)this._eventsInProgress[de]||(ue[de+"start"]=C[de].originalEvent),this._eventsInProgress[de]=C[de];for(var Ae in!q&&ae&&this._fireEvent("movestart",ae.originalEvent),ue)this._fireEvent(Ae,ue[Ae]);for(var Ue in C.rotate&&(this._bearingChanged=!0),ae&&this._fireEvent("move",ae.originalEvent),C)this._fireEvent(Ue,C[Ue].originalEvent);var nt,xt={};for(var At in this._eventsInProgress){var wt=this._eventsInProgress[At],Tt=wt.handlerName,yt=wt.originalEvent;this._handlersById[Tt].isActive()||(delete this._eventsInProgress[At],xt[At+"end"]=nt=z[Tt]||yt)}for(var Ft in xt)this._fireEvent(Ft,xt[Ft]);var Ot=rs(this._eventsInProgress);if((q||ae)&&!Ot){this._updatingCamera=!0;var Nt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),er=function(fr){return 0!==fr&&-F._bearingSnap<fr&&fr<F._bearingSnap};Nt?(er(Nt.bearing||this._map.getBearing())&&(Nt.bearing=0),this._map.easeTo(Nt,{originalEvent:nt})):(this._map.fire(new e.Event("moveend",{originalEvent:nt})),er(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},La.prototype._fireEvent=function(C,z){this._map.fire(new e.Event(C,z?{originalEvent:z}:{}))},La.prototype._triggerRenderFrame=function(){var C=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(z){delete C._frameId,C.handleEvent(new Jo("renderFrame",{timeStamp:z})),C._applyChanges()}))};var Os=function(C){function z(F,q){C.call(this),this._moving=!1,this._zooming=!1,this.transform=F,this._bearingSnap=q.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},z.prototype.setCenter=function(F,q){return this.jumpTo({center:F},q)},z.prototype.panBy=function(F,q,ae){return F=e.Point.convert(F).mult(-1),this.panTo(this.transform.center,e.extend({offset:F},q),ae)},z.prototype.panTo=function(F,q,ae){return this.easeTo(e.extend({center:F},q),ae)},z.prototype.getZoom=function(){return this.transform.zoom},z.prototype.setZoom=function(F,q){return this.jumpTo({zoom:F},q),this},z.prototype.zoomTo=function(F,q,ae){return this.easeTo(e.extend({zoom:F},q),ae)},z.prototype.zoomIn=function(F,q){return this.zoomTo(this.getZoom()+1,F,q),this},z.prototype.zoomOut=function(F,q){return this.zoomTo(this.getZoom()-1,F,q),this},z.prototype.getBearing=function(){return this.transform.bearing},z.prototype.setBearing=function(F,q){return this.jumpTo({bearing:F},q),this},z.prototype.getPadding=function(){return this.transform.padding},z.prototype.setPadding=function(F,q){return this.jumpTo({padding:F},q),this},z.prototype.rotateTo=function(F,q,ae){return this.easeTo(e.extend({bearing:F},q),ae)},z.prototype.resetNorth=function(F,q){return this.rotateTo(0,e.extend({duration:1e3},F),q),this},z.prototype.resetNorthPitch=function(F,q){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},F),q),this},z.prototype.snapToNorth=function(F,q){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(F,q):this},z.prototype.getPitch=function(){return this.transform.pitch},z.prototype.setPitch=function(F,q){return this.jumpTo({pitch:F},q),this},z.prototype.cameraForBounds=function(F,q){return F=e.LngLatBounds.convert(F),this._cameraForBoxAndBearing(F.getNorthWest(),F.getSouthEast(),0,q)},z.prototype._cameraForBoxAndBearing=function(F,q,ae,ue){var de={top:0,bottom:0,right:0,left:0};if("number"==typeof(ue=e.extend({padding:de,offset:[0,0],maxZoom:this.transform.maxZoom},ue)).padding){var ye=ue.padding;ue.padding={top:ye,bottom:ye,right:ye,left:ye}}ue.padding=e.extend(de,ue.padding);var Ae=this.transform,Ue=Ae.padding,Ge=Ae.project(e.LngLat.convert(F)),nt=Ae.project(e.LngLat.convert(q)),xt=Ge.rotate(-ae*Math.PI/180),At=nt.rotate(-ae*Math.PI/180),wt=new e.Point(Math.max(xt.x,At.x),Math.max(xt.y,At.y)),Tt=new e.Point(Math.min(xt.x,At.x),Math.min(xt.y,At.y)),yt=wt.sub(Tt),Ft=(Ae.width-(Ue.left+Ue.right+ue.padding.left+ue.padding.right))/yt.x,Ot=(Ae.height-(Ue.top+Ue.bottom+ue.padding.top+ue.padding.bottom))/yt.y;if(!(Ot<0||Ft<0)){var Nt=Math.min(Ae.scaleZoom(Ae.scale*Math.min(Ft,Ot)),ue.maxZoom),er=e.Point.convert(ue.offset),wr=new e.Point(er.x+(ue.padding.left-ue.padding.right)/2,er.y+(ue.padding.top-ue.padding.bottom)/2).mult(Ae.scale/Ae.zoomScale(Nt));return{center:Ae.unproject(Ge.add(nt).div(2).sub(wr)),zoom:Nt,bearing:ae}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},z.prototype.fitBounds=function(F,q,ae){return this._fitInternal(this.cameraForBounds(F,q),q,ae)},z.prototype.fitScreenCoordinates=function(F,q,ae,ue,de){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(F)),this.transform.pointLocation(e.Point.convert(q)),ae,ue),ue,de)},z.prototype._fitInternal=function(F,q,ae){return F?(delete(q=e.extend(F,q)).padding,q.linear?this.easeTo(q,ae):this.flyTo(q,ae)):this},z.prototype.jumpTo=function(F,q){this.stop();var ae=this.transform,ue=!1,de=!1,ye=!1;return"zoom"in F&&ae.zoom!==+F.zoom&&(ue=!0,ae.zoom=+F.zoom),void 0!==F.center&&(ae.center=e.LngLat.convert(F.center)),"bearing"in F&&ae.bearing!==+F.bearing&&(de=!0,ae.bearing=+F.bearing),"pitch"in F&&ae.pitch!==+F.pitch&&(ye=!0,ae.pitch=+F.pitch),null==F.padding||ae.isPaddingEqual(F.padding)||(ae.padding=F.padding),this.fire(new e.Event("movestart",q)).fire(new e.Event("move",q)),ue&&this.fire(new e.Event("zoomstart",q)).fire(new e.Event("zoom",q)).fire(new e.Event("zoomend",q)),de&&this.fire(new e.Event("rotatestart",q)).fire(new e.Event("rotate",q)).fire(new e.Event("rotateend",q)),ye&&this.fire(new e.Event("pitchstart",q)).fire(new e.Event("pitch",q)).fire(new e.Event("pitchend",q)),this.fire(new e.Event("moveend",q))},z.prototype.easeTo=function(F,q){var ae=this;this._stop(!1,F.easeId),(!1===(F=e.extend({offset:[0,0],duration:500,easing:e.ease},F)).animate||!F.essential&&e.browser.prefersReducedMotion)&&(F.duration=0);var ue=this.transform,de=this.getZoom(),ye=this.getBearing(),Ae=this.getPitch(),Ue=this.getPadding(),Ge="zoom"in F?+F.zoom:de,nt="bearing"in F?this._normalizeBearing(F.bearing,ye):ye,xt="pitch"in F?+F.pitch:Ae,At="padding"in F?F.padding:ue.padding,wt=e.Point.convert(F.offset),Tt=ue.centerPoint.add(wt),yt=ue.pointLocation(Tt),Ft=e.LngLat.convert(F.center||yt);this._normalizeCenter(Ft);var Ot,Nt,er=ue.project(yt),fr=ue.project(Ft).sub(er),Tr=ue.zoomScale(Ge-de);F.around&&(Ot=e.LngLat.convert(F.around),Nt=ue.locationPoint(Ot));var wr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||Ge!==de,this._rotating=this._rotating||ye!==nt,this._pitching=this._pitching||xt!==Ae,this._padding=!ue.isPaddingEqual(At),this._easeId=F.easeId,this._prepareEase(q,F.noMoveStart,wr),clearTimeout(this._easeEndTimeoutID),this._ease(function(Zr){if(ae._zooming&&(ue.zoom=e.number(de,Ge,Zr)),ae._rotating&&(ue.bearing=e.number(ye,nt,Zr)),ae._pitching&&(ue.pitch=e.number(Ae,xt,Zr)),ae._padding&&(ue.interpolatePadding(Ue,At,Zr),Tt=ue.centerPoint.add(wt)),Ot)ue.setLocationAtPoint(Ot,Nt);else{var Xr=ue.zoomScale(ue.zoom-de),fn=Ge>de?Math.min(2,Tr):Math.max(.5,Tr),rn=Math.pow(fn,1-Zr),Nn=ue.unproject(er.add(fr.mult(Zr*rn)).mult(Xr));ue.setLocationAtPoint(ue.renderWorldCopies?Nn.wrap():Nn,Tt)}ae._fireMoveEvents(q)},function(Zr){ae._afterEase(q,Zr)},F),this},z.prototype._prepareEase=function(F,q,ae){void 0===ae&&(ae={}),this._moving=!0,q||ae.moving||this.fire(new e.Event("movestart",F)),this._zooming&&!ae.zooming&&this.fire(new e.Event("zoomstart",F)),this._rotating&&!ae.rotating&&this.fire(new e.Event("rotatestart",F)),this._pitching&&!ae.pitching&&this.fire(new e.Event("pitchstart",F))},z.prototype._fireMoveEvents=function(F){this.fire(new e.Event("move",F)),this._zooming&&this.fire(new e.Event("zoom",F)),this._rotating&&this.fire(new e.Event("rotate",F)),this._pitching&&this.fire(new e.Event("pitch",F))},z.prototype._afterEase=function(F,q){if(!this._easeId||!q||this._easeId!==q){delete this._easeId;var ae=this._zooming,ue=this._rotating,de=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,ae&&this.fire(new e.Event("zoomend",F)),ue&&this.fire(new e.Event("rotateend",F)),de&&this.fire(new e.Event("pitchend",F)),this.fire(new e.Event("moveend",F))}},z.prototype.flyTo=function(F,q){var ae=this;if(!F.essential&&e.browser.prefersReducedMotion){var ue=e.pick(F,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ue,q)}this.stop(),F=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},F);var de=this.transform,ye=this.getZoom(),Ae=this.getBearing(),Ue=this.getPitch(),Ge=this.getPadding(),nt="zoom"in F?e.clamp(+F.zoom,de.minZoom,de.maxZoom):ye,xt="bearing"in F?this._normalizeBearing(F.bearing,Ae):Ae,At="pitch"in F?+F.pitch:Ue,wt="padding"in F?F.padding:de.padding,Tt=de.zoomScale(nt-ye),yt=e.Point.convert(F.offset),Ft=de.centerPoint.add(yt),Ot=de.pointLocation(Ft),Nt=e.LngLat.convert(F.center||Ot);this._normalizeCenter(Nt);var er=de.project(Ot),fr=de.project(Nt).sub(er),Tr=F.curve,wr=Math.max(de.width,de.height),Zr=wr/Tt,Xr=fr.mag();if("minZoom"in F){var fn=e.clamp(Math.min(F.minZoom,ye,nt),de.minZoom,de.maxZoom),rn=wr/de.zoomScale(fn-ye);Tr=Math.sqrt(rn/Xr*2)}var Nn=Tr*Tr;function Gn(Xn){var mi=(Zr*Zr-wr*wr+(Xn?-1:1)*Nn*Nn*Xr*Xr)/(2*(Xn?Zr:wr)*Nn*Xr);return Math.log(Math.sqrt(mi*mi+1)-mi)}function oi(Xn){return(Math.exp(Xn)-Math.exp(-Xn))/2}function Ur(Xn){return(Math.exp(Xn)+Math.exp(-Xn))/2}var _n=Gn(0),Yn=function(Xn){return Ur(_n)/Ur(_n+Tr*Xn)},Vn=function(Xn){return wr*((Ur(_n)*(oi(mi=_n+Tr*Xn)/Ur(mi))-oi(_n))/Nn)/Xr;var mi},Qn=(Gn(1)-_n)/Tr;if(Math.abs(Xr)<1e-6||!isFinite(Qn)){if(Math.abs(wr-Zr)<1e-6)return this.easeTo(F,q);var li=Zr<wr?-1:1;Qn=Math.abs(Math.log(Zr/wr))/Tr,Vn=function(){return 0},Yn=function(Xn){return Math.exp(li*Tr*Xn)}}return F.duration="duration"in F?+F.duration:1e3*Qn/("screenSpeed"in F?+F.screenSpeed/Tr:+F.speed),F.maxDuration&&F.duration>F.maxDuration&&(F.duration=0),this._zooming=!0,this._rotating=Ae!==xt,this._pitching=At!==Ue,this._padding=!de.isPaddingEqual(wt),this._prepareEase(q,!1),this._ease(function(Xn){var mi=Xn*Qn,pi=1/Yn(mi);de.zoom=1===Xn?nt:ye+de.scaleZoom(pi),ae._rotating&&(de.bearing=e.number(Ae,xt,Xn)),ae._pitching&&(de.pitch=e.number(Ue,At,Xn)),ae._padding&&(de.interpolatePadding(Ge,wt,Xn),Ft=de.centerPoint.add(yt));var Mi=1===Xn?Nt:de.unproject(er.add(fr.mult(Vn(mi))).mult(pi));de.setLocationAtPoint(de.renderWorldCopies?Mi.wrap():Mi,Ft),ae._fireMoveEvents(q)},function(){return ae._afterEase(q)},F),this},z.prototype.isEasing=function(){return!!this._easeFrameId},z.prototype.stop=function(){return this._stop()},z.prototype._stop=function(F,q){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var ae=this._onEaseEnd;delete this._onEaseEnd,ae.call(this,q)}if(!F){var ue=this.handlers;ue&&ue.stop()}return this},z.prototype._ease=function(F,q,ae){!1===ae.animate||0===ae.duration?(F(1),q()):(this._easeStart=e.browser.now(),this._easeOptions=ae,this._onEaseFrame=F,this._onEaseEnd=q,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},z.prototype._renderFrameCallback=function(){var F=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(F)),F<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},z.prototype._normalizeBearing=function(F,q){F=e.wrap(F,-180,180);var ae=Math.abs(F-q);return Math.abs(F-360-q)<ae&&(F-=360),Math.abs(F+360-q)<ae&&(F+=360),F},z.prototype._normalizeCenter=function(F){var q=this.transform;if(q.renderWorldCopies&&!q.lngRange){var ae=F.lng-q.center.lng;F.lng+=ae>180?-360:ae<-180?360:0}},z}(e.Evented),Ca=function(C){void 0===C&&(C={}),this.options=C,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Ca.prototype.getDefaultPosition=function(){return"bottom-right"},Ca.prototype.onAdd=function(C){var z=this.options&&this.options.compact;return this._map=C,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=t.create("div","mapboxgl-ctrl-attrib-inner",this._container),z&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===z&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ca.prototype.onRemove=function(){t.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ca.prototype._updateEditLink=function(){var C=this._editLink;C||(C=this._editLink=this._container.querySelector(".mapbox-improve-map"));var z=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(C){var F=z.reduce(function(q,ae,ue){return ae.value&&(q+=ae.key+"="+ae.value+(ue<z.length-1?"&":"")),q},"?");C.href=e.config.FEEDBACK_URL+"/"+F+(this._map._hash?this._map._hash.getHashString(!0):""),C.rel="noopener nofollow"}},Ca.prototype._updateData=function(C){!C||"metadata"!==C.sourceDataType&&"style"!==C.dataType||(this._updateAttributions(),this._updateEditLink())},Ca.prototype._updateAttributions=function(){if(this._map.style){var C=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?C=C.concat(this.options.customAttribution.map(function(ye){return"string"!=typeof ye?"":ye})):"string"==typeof this.options.customAttribution&&C.push(this.options.customAttribution)),this._map.style.stylesheet){var z=this._map.style.stylesheet;this.styleOwner=z.owner,this.styleId=z.id}var F=this._map.style.sourceCaches;for(var q in F){var ae=F[q];if(ae.used){var ue=ae.getSource();ue.attribution&&C.indexOf(ue.attribution)<0&&C.push(ue.attribution)}}C.sort(function(ye,Ae){return ye.length-Ae.length});var de=(C=C.filter(function(ye,Ae){for(var Ue=Ae+1;Ue<C.length;Ue++)if(C[Ue].indexOf(ye)>=0)return!1;return!0})).join(" | ");de!==this._attribHTML&&(this._attribHTML=de,C.length?(this._innerContainer.innerHTML=de,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ca.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Ko=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};Ko.prototype.onAdd=function(C){this._map=C,this._container=t.create("div","mapboxgl-ctrl");var z=t.create("a","mapboxgl-ctrl-logo");return z.target="_blank",z.rel="noopener nofollow",z.href="https://www.mapbox.com/",z.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),z.setAttribute("rel","noopener nofollow"),this._container.appendChild(z),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ko.prototype.onRemove=function(){t.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ko.prototype.getDefaultPosition=function(){return"bottom-left"},Ko.prototype._updateLogo=function(C){C&&"metadata"!==C.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Ko.prototype._logoRequired=function(){if(this._map.style){var C=this._map.style.sourceCaches;for(var z in C)if(C[z].getSource().mapbox_logo)return!0;return!1}},Ko.prototype._updateCompact=function(){var C=this._container.children;if(C.length){var z=C[0];this._map.getCanvasContainer().offsetWidth<250?z.classList.add("mapboxgl-compact"):z.classList.remove("mapboxgl-compact")}};var ai=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ai.prototype.add=function(C){var z=++this._id;return this._queue.push({callback:C,id:z,cancelled:!1}),z},ai.prototype.remove=function(C){for(var z=this._currentlyRunning,F=0,q=z?this._queue.concat(z):this._queue;F<q.length;F+=1){var ae=q[F];if(ae.id===C)return void(ae.cancelled=!0)}},ai.prototype.run=function(C){void 0===C&&(C=0);var z=this._currentlyRunning=this._queue;this._queue=[];for(var F=0,q=z;F<q.length;F+=1){var ae=q[F];if(!ae.cancelled&&(ae.callback(C),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ai.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var gi={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},zs=e.window.HTMLImageElement,Ds=e.window.HTMLElement,Qo=e.window.ImageBitmap,Ao={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},jo=function(C){function z(q){var ae=this;if(null!=(q=e.extend({},Ao,q)).minZoom&&null!=q.maxZoom&&q.minZoom>q.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=q.minPitch&&null!=q.maxPitch&&q.minPitch>q.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=q.minPitch&&q.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=q.maxPitch&&q.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var ue=new Ht(q.minZoom,q.maxZoom,q.minPitch,q.maxPitch,q.renderWorldCopies);if(C.call(this,ue,q),this._interactive=q.interactive,this._maxTileCacheSize=q.maxTileCacheSize,this._failIfMajorPerformanceCaveat=q.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=q.preserveDrawingBuffer,this._antialias=q.antialias,this._trackResize=q.trackResize,this._bearingSnap=q.bearingSnap,this._refreshExpiredTiles=q.refreshExpiredTiles,this._fadeDuration=q.fadeDuration,this._crossSourceCollisions=q.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=q.collectResourceTiming,this._renderTaskQueue=new ai,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},gi,q.locale),this._requestManager=new e.RequestManager(q.transformRequest,q.accessToken),"string"==typeof q.container){if(this._container=e.window.document.getElementById(q.container),!this._container)throw new Error("Container '"+q.container+"' not found.")}else{if(!(q.container instanceof Ds))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=q.container}if(q.maxBounds&&this.setMaxBounds(q.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ae._update(!1)}),this.on("moveend",function(){return ae._update(!1)}),this.on("zoom",function(){return ae._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new La(this,q),this._hash=q.hash&&new Er("string"==typeof q.hash&&q.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:q.center,zoom:q.zoom,bearing:q.bearing,pitch:q.pitch}),q.bounds&&(this.resize(),this.fitBounds(q.bounds,e.extend({},q.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=q.localIdeographFontFamily,q.style&&this.setStyle(q.style,{localIdeographFontFamily:q.localIdeographFontFamily}),q.attributionControl&&this.addControl(new Ca({customAttribution:q.customAttribution})),this.addControl(new Ko,q.logoPosition),this.on("style.load",function(){ae.transform.unmodified&&ae.jumpTo(ae.style.stylesheet)}),this.on("data",function(ye){ae._update("style"===ye.dataType),ae.fire(new e.Event(ye.dataType+"data",ye))}),this.on("dataloading",function(ye){ae.fire(new e.Event(ye.dataType+"dataloading",ye))})}C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z;var F={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return z.prototype._getMapId=function(){return this._mapId},z.prototype.addControl=function(q,ae){if(void 0===ae&&q.getDefaultPosition&&(ae=q.getDefaultPosition()),void 0===ae&&(ae="top-right"),!q||!q.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ue=q.onAdd(this);this._controls.push(q);var de=this._controlPositions[ae];return-1!==ae.indexOf("bottom")?de.insertBefore(ue,de.firstChild):de.appendChild(ue),this},z.prototype.removeControl=function(q){if(!q||!q.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var ae=this._controls.indexOf(q);return ae>-1&&this._controls.splice(ae,1),q.onRemove(this),this},z.prototype.resize=function(q){var ae=this._containerDimensions(),ue=ae[0],de=ae[1];this._resizeCanvas(ue,de),this.transform.resize(ue,de),this.painter.resize(ue,de);var ye=!this._moving;return ye&&(this.stop(),this.fire(new e.Event("movestart",q)).fire(new e.Event("move",q))),this.fire(new e.Event("resize",q)),ye&&this.fire(new e.Event("moveend",q)),this},z.prototype.getBounds=function(){return this.transform.getBounds()},z.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},z.prototype.setMaxBounds=function(q){return this.transform.setMaxBounds(e.LngLatBounds.convert(q)),this._update()},z.prototype.setMinZoom=function(q){if((q=null==q?-2:q)>=-2&&q<=this.transform.maxZoom)return this.transform.minZoom=q,this._update(),this.getZoom()<q&&this.setZoom(q),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},z.prototype.getMinZoom=function(){return this.transform.minZoom},z.prototype.setMaxZoom=function(q){if((q=null==q?22:q)>=this.transform.minZoom)return this.transform.maxZoom=q,this._update(),this.getZoom()>q&&this.setZoom(q),this;throw new Error("maxZoom must be greater than the current minZoom")},z.prototype.getMaxZoom=function(){return this.transform.maxZoom},z.prototype.setMinPitch=function(q){if((q=null==q?0:q)<0)throw new Error("minPitch must be greater than or equal to 0");if(q>=0&&q<=this.transform.maxPitch)return this.transform.minPitch=q,this._update(),this.getPitch()<q&&this.setPitch(q),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},z.prototype.getMinPitch=function(){return this.transform.minPitch},z.prototype.setMaxPitch=function(q){if((q=null==q?60:q)>60)throw new Error("maxPitch must be less than or equal to 60");if(q>=this.transform.minPitch)return this.transform.maxPitch=q,this._update(),this.getPitch()>q&&this.setPitch(q),this;throw new Error("maxPitch must be greater than the current minPitch")},z.prototype.getMaxPitch=function(){return this.transform.maxPitch},z.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},z.prototype.setRenderWorldCopies=function(q){return this.transform.renderWorldCopies=q,this._update()},z.prototype.project=function(q){return this.transform.locationPoint(e.LngLat.convert(q))},z.prototype.unproject=function(q){return this.transform.pointLocation(e.Point.convert(q))},z.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},z.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},z.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},z.prototype._createDelegatedListener=function(q,ae,ue){var de,ye=this;if("mouseenter"===q||"mouseover"===q){var Ae=!1;return{layer:ae,listener:ue,delegates:{mousemove:function(Ge){var nt=ye.getLayer(ae)?ye.queryRenderedFeatures(Ge.point,{layers:[ae]}):[];nt.length?Ae||(Ae=!0,ue.call(ye,new zn(q,ye,Ge.originalEvent,{features:nt}))):Ae=!1},mouseout:function(){Ae=!1}}}}if("mouseleave"===q||"mouseout"===q){var Ue=!1;return{layer:ae,listener:ue,delegates:{mousemove:function(Ge){(ye.getLayer(ae)?ye.queryRenderedFeatures(Ge.point,{layers:[ae]}):[]).length?Ue=!0:Ue&&(Ue=!1,ue.call(ye,new zn(q,ye,Ge.originalEvent)))},mouseout:function(Ge){Ue&&(Ue=!1,ue.call(ye,new zn(q,ye,Ge.originalEvent)))}}}}return{layer:ae,listener:ue,delegates:(de={},de[q]=function(Ge){var nt=ye.getLayer(ae)?ye.queryRenderedFeatures(Ge.point,{layers:[ae]}):[];nt.length&&(Ge.features=nt,ue.call(ye,Ge),delete Ge.features)},de)}},z.prototype.on=function(q,ae,ue){if(void 0===ue)return C.prototype.on.call(this,q,ae);var de=this._createDelegatedListener(q,ae,ue);for(var ye in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[q]=this._delegatedListeners[q]||[],this._delegatedListeners[q].push(de),de.delegates)this.on(ye,de.delegates[ye]);return this},z.prototype.once=function(q,ae,ue){if(void 0===ue)return C.prototype.once.call(this,q,ae);var de=this._createDelegatedListener(q,ae,ue);for(var ye in de.delegates)this.once(ye,de.delegates[ye]);return this},z.prototype.off=function(q,ae,ue){var de=this;return void 0===ue?C.prototype.off.call(this,q,ae):(this._delegatedListeners&&this._delegatedListeners[q]&&function(ye){for(var Ae=ye[q],Ue=0;Ue<Ae.length;Ue++){var Ge=Ae[Ue];if(Ge.layer===ae&&Ge.listener===ue){for(var nt in Ge.delegates)de.off(nt,Ge.delegates[nt]);return Ae.splice(Ue,1),de}}}(this._delegatedListeners),this)},z.prototype.queryRenderedFeatures=function(q,ae){if(!this.style)return[];var ue;if(void 0!==ae||void 0===q||q instanceof e.Point||Array.isArray(q)||(ae=q,q=void 0),ae=ae||{},(q=q||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof q[0])ue=[e.Point.convert(q)];else{var de=e.Point.convert(q[0]),ye=e.Point.convert(q[1]);ue=[de,new e.Point(ye.x,de.y),ye,new e.Point(de.x,ye.y),de]}return this.style.queryRenderedFeatures(ue,ae,this.transform)},z.prototype.querySourceFeatures=function(q,ae){return this.style.querySourceFeatures(q,ae)},z.prototype.setStyle=function(q,ae){return!1!==(ae=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},ae)).diff&&ae.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&q?(this._diffStyle(q,ae),this):(this._localIdeographFontFamily=ae.localIdeographFontFamily,this._updateStyle(q,ae))},z.prototype._getUIString=function(q){var ae=this._locale[q];if(null==ae)throw new Error("Missing UI string '"+q+"'");return ae},z.prototype._updateStyle=function(q,ae){return this.style&&(this.style.setEventedParent(null),this.style._remove()),q?(this.style=new qn(this,ae||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof q?this.style.loadURL(q):this.style.loadJSON(q),this):(delete this.style,this)},z.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new qn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},z.prototype._diffStyle=function(q,ae){var ue=this;if("string"==typeof q){var de=this._requestManager.normalizeStyleURL(q),ye=this._requestManager.transformRequest(de,e.ResourceType.Style);e.getJSON(ye,function(Ae,Ue){Ae?ue.fire(new e.ErrorEvent(Ae)):Ue&&ue._updateDiff(Ue,ae)})}else"object"==typeof q&&this._updateDiff(q,ae)},z.prototype._updateDiff=function(q,ae){try{this.style.setState(q)&&this._update(!0)}catch(ue){e.warnOnce("Unable to perform style diff: "+(ue.message||ue.error||ue)+".  Rebuilding the style from scratch."),this._updateStyle(q,ae)}},z.prototype.getStyle=function(){if(this.style)return this.style.serialize()},z.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},z.prototype.addSource=function(q,ae){return this._lazyInitEmptyStyle(),this.style.addSource(q,ae),this._update(!0)},z.prototype.isSourceLoaded=function(q){var ae=this.style&&this.style.sourceCaches[q];if(void 0!==ae)return ae.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+q+"'")))},z.prototype.areTilesLoaded=function(){var q=this.style&&this.style.sourceCaches;for(var ae in q){var ue=q[ae]._tiles;for(var de in ue){var ye=ue[de];if("loaded"!==ye.state&&"errored"!==ye.state)return!1}}return!0},z.prototype.addSourceType=function(q,ae,ue){return this._lazyInitEmptyStyle(),this.style.addSourceType(q,ae,ue)},z.prototype.removeSource=function(q){return this.style.removeSource(q),this._update(!0)},z.prototype.getSource=function(q){return this.style.getSource(q)},z.prototype.addImage=function(q,ae,ue){void 0===ue&&(ue={});var de=ue.pixelRatio;void 0===de&&(de=1);var ye=ue.sdf;void 0===ye&&(ye=!1);var Ae=ue.stretchX,Ue=ue.stretchY,Ge=ue.content;if(this._lazyInitEmptyStyle(),ae instanceof zs||Qo&&ae instanceof Qo){var nt=e.browser.getImageData(ae);this.style.addImage(q,{data:new e.RGBAImage({width:nt.width,height:nt.height},nt.data),pixelRatio:de,stretchX:Ae,stretchY:Ue,content:Ge,sdf:ye,version:0})}else{if(void 0===ae.width||void 0===ae.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Ot=ae;this.style.addImage(q,{data:new e.RGBAImage({width:ae.width,height:ae.height},new Uint8Array(ae.data)),pixelRatio:de,stretchX:Ae,stretchY:Ue,content:Ge,sdf:ye,version:0,userImage:Ot}),Ot.onAdd&&Ot.onAdd(this,q)}},z.prototype.updateImage=function(q,ae){var ue=this.style.getImage(q);if(!ue)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var de=ae instanceof zs||Qo&&ae instanceof Qo?e.browser.getImageData(ae):ae,ye=de.width,Ae=de.height,Ue=de.data;return void 0===ye||void 0===Ae?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ye!==ue.data.width||Ae!==ue.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(ue.data.replace(Ue,!(ae instanceof zs||Qo&&ae instanceof Qo)),void this.style.updateImage(q,ue))},z.prototype.hasImage=function(q){return q?!!this.style.getImage(q):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},z.prototype.removeImage=function(q){this.style.removeImage(q)},z.prototype.loadImage=function(q,ae){e.getImage(this._requestManager.transformRequest(q,e.ResourceType.Image),ae)},z.prototype.listImages=function(){return this.style.listImages()},z.prototype.addLayer=function(q,ae){return this._lazyInitEmptyStyle(),this.style.addLayer(q,ae),this._update(!0)},z.prototype.moveLayer=function(q,ae){return this.style.moveLayer(q,ae),this._update(!0)},z.prototype.removeLayer=function(q){return this.style.removeLayer(q),this._update(!0)},z.prototype.getLayer=function(q){return this.style.getLayer(q)},z.prototype.setLayerZoomRange=function(q,ae,ue){return this.style.setLayerZoomRange(q,ae,ue),this._update(!0)},z.prototype.setFilter=function(q,ae,ue){return void 0===ue&&(ue={}),this.style.setFilter(q,ae,ue),this._update(!0)},z.prototype.getFilter=function(q){return this.style.getFilter(q)},z.prototype.setPaintProperty=function(q,ae,ue,de){return void 0===de&&(de={}),this.style.setPaintProperty(q,ae,ue,de),this._update(!0)},z.prototype.getPaintProperty=function(q,ae){return this.style.getPaintProperty(q,ae)},z.prototype.setLayoutProperty=function(q,ae,ue,de){return void 0===de&&(de={}),this.style.setLayoutProperty(q,ae,ue,de),this._update(!0)},z.prototype.getLayoutProperty=function(q,ae){return this.style.getLayoutProperty(q,ae)},z.prototype.setLight=function(q,ae){return void 0===ae&&(ae={}),this._lazyInitEmptyStyle(),this.style.setLight(q,ae),this._update(!0)},z.prototype.getLight=function(){return this.style.getLight()},z.prototype.setFeatureState=function(q,ae){return this.style.setFeatureState(q,ae),this._update()},z.prototype.removeFeatureState=function(q,ae){return this.style.removeFeatureState(q,ae),this._update()},z.prototype.getFeatureState=function(q){return this.style.getFeatureState(q)},z.prototype.getContainer=function(){return this._container},z.prototype.getCanvasContainer=function(){return this._canvasContainer},z.prototype.getCanvas=function(){return this._canvas},z.prototype._containerDimensions=function(){var q=0,ae=0;return this._container&&(q=this._container.clientWidth||400,ae=this._container.clientHeight||300),[q,ae]},z.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},z.prototype._setupContainer=function(){var q=this._container;q.classList.add("mapboxgl-map"),(this._missingCSSCanary=t.create("div","mapboxgl-canary",q)).style.visibility="hidden",this._detectMissingCSS();var ae=this._canvasContainer=t.create("div","mapboxgl-canvas-container",q);this._interactive&&ae.classList.add("mapboxgl-interactive"),this._canvas=t.create("canvas","mapboxgl-canvas",ae),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var ue=this._containerDimensions();this._resizeCanvas(ue[0],ue[1]);var de=this._controlContainer=t.create("div","mapboxgl-control-container",q),ye=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ae){ye[Ae]=t.create("div","mapboxgl-ctrl-"+Ae,de)})},z.prototype._resizeCanvas=function(q,ae){var ue=e.browser.devicePixelRatio||1;this._canvas.width=ue*q,this._canvas.height=ue*ae,this._canvas.style.width=q+"px",this._canvas.style.height=ae+"px"},z.prototype._setupPainter=function(){var q=e.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ae=this._canvas.getContext("webgl",q)||this._canvas.getContext("experimental-webgl",q);ae?(this.painter=new Ei(ae,this.transform),e.webpSupported.testSupport(ae)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},z.prototype._contextLost=function(q){q.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:q}))},z.prototype._contextRestored=function(q){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:q}))},z.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},z.prototype._update=function(q){return this.style?(this._styleDirty=this._styleDirty||q,this._sourcesDirty=!0,this.triggerRepaint(),this):this},z.prototype._requestRenderFrame=function(q){return this._update(),this._renderTaskQueue.add(q)},z.prototype._cancelRenderFrame=function(q){this._renderTaskQueue.remove(q)},z.prototype._render=function(q){var ae,ue=this,de=0,ye=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(ae=ye.createQueryEXT(),ye.beginQueryEXT(ye.TIME_ELAPSED_EXT,ae),de=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(q),!this._removed){var Ae=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ue=this.transform.zoom,Ge=e.browser.now();this.style.zoomHistory.update(Ue,Ge);var nt=new e.EvaluationParameters(Ue,{now:Ge,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),xt=nt.crossFadingFactor();1===xt&&xt===this._crossFadingFactor||(Ae=!0,this._crossFadingFactor=xt),this.style.update(nt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Ae)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var At=e.browser.now()-de;ye.endQueryEXT(ye.TIME_ELAPSED_EXT,ae),setTimeout(function(){var Tt=ye.getQueryObjectEXT(ae,ye.QUERY_RESULT_EXT)/1e6;ye.deleteQueryEXT(ae),ue.fire(new e.Event("gpu-timing-frame",{cpuTime:At,gpuTime:Tt}))},50)}if(this.listens("gpu-timing-layer")){var wt=this.painter.collectGpuTimers();setTimeout(function(){var Tt=ue.painter.queryGpuTimers(wt);ue.fire(new e.Event("gpu-timing-layer",{layerTimes:Tt}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},z.prototype.remove=function(){this._hash&&this._hash.remove();for(var q=0,ae=this._controls;q<ae.length;q+=1)ae[q].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var ue=this.painter.context.gl.getExtension("WEBGL_lose_context");ue&&ue.loseContext(),Ws(this._canvasContainer),Ws(this._controlContainer),Ws(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},z.prototype.triggerRepaint=function(){var q=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(ae){q._frame=null,q._render(ae)}))},z.prototype._onWindowOnline=function(){this._update()},z.prototype._onWindowResize=function(q){this._trackResize&&this.resize({originalEvent:q})._update()},F.showTileBoundaries.get=function(){return!!this._showTileBoundaries},F.showTileBoundaries.set=function(q){this._showTileBoundaries!==q&&(this._showTileBoundaries=q,this._update())},F.showPadding.get=function(){return!!this._showPadding},F.showPadding.set=function(q){this._showPadding!==q&&(this._showPadding=q,this._update())},F.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},F.showCollisionBoxes.set=function(q){this._showCollisionBoxes!==q&&(this._showCollisionBoxes=q,q?this.style._generateCollisionBoxes():this._update())},F.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},F.showOverdrawInspector.set=function(q){this._showOverdrawInspector!==q&&(this._showOverdrawInspector=q,this._update())},F.repaint.get=function(){return!!this._repaint},F.repaint.set=function(q){this._repaint!==q&&(this._repaint=q,this.triggerRepaint())},F.vertices.get=function(){return!!this._vertices},F.vertices.set=function(q){this._vertices=q,this._update()},z.prototype._setCacheLimits=function(q,ae){e.setCacheLimits(q,ae)},F.version.get=function(){return e.version},Object.defineProperties(z.prototype,F),z}(Os);function Ws(C){C.parentNode&&C.parentNode.removeChild(C)}var _s={showCompass:!0,showZoom:!0,visualizePitch:!1},qi=function(C){var z=this;this.options=e.extend({},_s,C),this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(F){return F.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(F){return z._map.zoomIn({},{originalEvent:F})}),t.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(F){return z._map.zoomOut({},{originalEvent:F})}),t.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(F){z.options.visualizePitch?z._map.resetNorthPitch({},{originalEvent:F}):z._map.resetNorth({},{originalEvent:F})}),this._compassIcon=t.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};qi.prototype._updateZoomButtons=function(){var C=this._map.getZoom();this._zoomInButton.disabled=C===this._map.getMaxZoom(),this._zoomOutButton.disabled=C===this._map.getMinZoom()},qi.prototype._rotateCompassArrow=function(){var C=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=C},qi.prototype.onAdd=function(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Qi(this._map,this._compass,this.options.visualizePitch)),this._container},qi.prototype.onRemove=function(){t.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},qi.prototype._createButton=function(C,z){var F=t.create("button",C,this._container);return F.type="button",F.addEventListener("click",z),F},qi.prototype._setButtonTitle=function(C,z){var F=this._map._getUIString("NavigationControl."+z);C.title=F,C.setAttribute("aria-label",F)};var Qi=function(C,z,F){void 0===F&&(F=!1),this._clickTolerance=10,this.element=z,this.mouseRotate=new Ti({clickTolerance:C.dragRotate._mouseRotate._clickTolerance}),this.map=C,F&&(this.mousePitch=new fi({clickTolerance:C.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),t.addEventListener(z,"mousedown",this.mousedown),t.addEventListener(z,"touchstart",this.touchstart,{passive:!1}),t.addEventListener(z,"touchmove",this.touchmove),t.addEventListener(z,"touchend",this.touchend),t.addEventListener(z,"touchcancel",this.reset)};function us(C,z,F){if(C=new e.LngLat(C.lng,C.lat),z){var q=new e.LngLat(C.lng-360,C.lat),ae=new e.LngLat(C.lng+360,C.lat),ue=F.locationPoint(C).distSqr(z);F.locationPoint(q).distSqr(z)<ue?C=q:F.locationPoint(ae).distSqr(z)<ue&&(C=ae)}for(;Math.abs(C.lng-F.center.lng)>180;){var de=F.locationPoint(C);if(de.x>=0&&de.y>=0&&de.x<=F.width&&de.y<=F.height)break;C.lng>F.center.lng?C.lng-=360:C.lng+=360}return C}Qi.prototype.down=function(C,z){this.mouseRotate.mousedown(C,z),this.mousePitch&&this.mousePitch.mousedown(C,z),t.disableDrag()},Qi.prototype.move=function(C,z){var F=this.map,q=this.mouseRotate.mousemoveWindow(C,z);if(q&&q.bearingDelta&&F.setBearing(F.getBearing()+q.bearingDelta),this.mousePitch){var ae=this.mousePitch.mousemoveWindow(C,z);ae&&ae.pitchDelta&&F.setPitch(F.getPitch()+ae.pitchDelta)}},Qi.prototype.off=function(){var C=this.element;t.removeEventListener(C,"mousedown",this.mousedown),t.removeEventListener(C,"touchstart",this.touchstart,{passive:!1}),t.removeEventListener(C,"touchmove",this.touchmove),t.removeEventListener(C,"touchend",this.touchend),t.removeEventListener(C,"touchcancel",this.reset),this.offTemp()},Qi.prototype.offTemp=function(){t.enableDrag(),t.removeEventListener(e.window,"mousemove",this.mousemove),t.removeEventListener(e.window,"mouseup",this.mouseup)},Qi.prototype.mousedown=function(C){this.down(e.extend({},C,{ctrlKey:!0,preventDefault:function(){return C.preventDefault()}}),t.mousePos(this.element,C)),t.addEventListener(e.window,"mousemove",this.mousemove),t.addEventListener(e.window,"mouseup",this.mouseup)},Qi.prototype.mousemove=function(C){this.move(C,t.mousePos(this.element,C))},Qi.prototype.mouseup=function(C){this.mouseRotate.mouseupWindow(C),this.mousePitch&&this.mousePitch.mouseupWindow(C),this.offTemp()},Qi.prototype.touchstart=function(C){1!==C.targetTouches.length?this.reset():(this._startPos=this._lastPos=t.touchPos(this.element,C.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return C.preventDefault()}},this._startPos))},Qi.prototype.touchmove=function(C){1!==C.targetTouches.length?this.reset():(this._lastPos=t.touchPos(this.element,C.targetTouches)[0],this.move({preventDefault:function(){return C.preventDefault()}},this._lastPos))},Qi.prototype.touchend=function(C){0===C.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Qi.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ns={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Aa(C,z,F){var q=C.classList;for(var ae in ns)q.remove("mapboxgl-"+F+"-anchor-"+ae);q.add("mapboxgl-"+F+"-anchor-"+z)}var fs,ws=function(C){function z(F,q){var ae=this;if(C.call(this),(F instanceof e.window.HTMLElement||q)&&(F=e.extend({element:F},q)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=F&&F.anchor||"center",this._color=F&&F.color||"#3FB1CE",this._draggable=F&&F.draggable||!1,this._state="inactive",this._rotation=F&&F.rotation||0,this._rotationAlignment=F&&F.rotationAlignment||"auto",this._pitchAlignment=F&&F.pitchAlignment&&"auto"!==F.pitchAlignment?F.pitchAlignment:this._rotationAlignment,F&&F.element)this._element=F.element,this._offset=e.Point.convert(F&&F.offset||[0,0]);else{this._defaultMarker=!0,this._element=t.create("div"),this._element.setAttribute("aria-label","Map marker");var ue=t.createNS("http://www.w3.org/2000/svg","svg");ue.setAttributeNS(null,"display","block"),ue.setAttributeNS(null,"height","41px"),ue.setAttributeNS(null,"width","27px"),ue.setAttributeNS(null,"viewBox","0 0 27 41");var de=t.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"stroke","none"),de.setAttributeNS(null,"stroke-width","1"),de.setAttributeNS(null,"fill","none"),de.setAttributeNS(null,"fill-rule","evenodd");var ye=t.createNS("http://www.w3.org/2000/svg","g");ye.setAttributeNS(null,"fill-rule","nonzero");var Ae=t.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Ae.setAttributeNS(null,"fill","#000000");for(var Ue=0,Ge=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ue<Ge.length;Ue+=1){var nt=Ge[Ue],xt=t.createNS("http://www.w3.org/2000/svg","ellipse");xt.setAttributeNS(null,"opacity","0.04"),xt.setAttributeNS(null,"cx","10.5"),xt.setAttributeNS(null,"cy","5.80029008"),xt.setAttributeNS(null,"rx",nt.rx),xt.setAttributeNS(null,"ry",nt.ry),Ae.appendChild(xt)}var At=t.createNS("http://www.w3.org/2000/svg","g");At.setAttributeNS(null,"fill",this._color);var wt=t.createNS("http://www.w3.org/2000/svg","path");wt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),At.appendChild(wt);var Tt=t.createNS("http://www.w3.org/2000/svg","g");Tt.setAttributeNS(null,"opacity","0.25"),Tt.setAttributeNS(null,"fill","#000000");var yt=t.createNS("http://www.w3.org/2000/svg","path");yt.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Tt.appendChild(yt);var Ft=t.createNS("http://www.w3.org/2000/svg","g");Ft.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ft.setAttributeNS(null,"fill","#FFFFFF");var Ot=t.createNS("http://www.w3.org/2000/svg","g");Ot.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Nt=t.createNS("http://www.w3.org/2000/svg","circle");Nt.setAttributeNS(null,"fill","#000000"),Nt.setAttributeNS(null,"opacity","0.25"),Nt.setAttributeNS(null,"cx","5.5"),Nt.setAttributeNS(null,"cy","5.5"),Nt.setAttributeNS(null,"r","5.4999962");var er=t.createNS("http://www.w3.org/2000/svg","circle");er.setAttributeNS(null,"fill","#FFFFFF"),er.setAttributeNS(null,"cx","5.5"),er.setAttributeNS(null,"cy","5.5"),er.setAttributeNS(null,"r","5.4999962"),Ot.appendChild(Nt),Ot.appendChild(er),ye.appendChild(Ae),ye.appendChild(At),ye.appendChild(Tt),ye.appendChild(Ft),ye.appendChild(Ot),ue.appendChild(ye),this._element.appendChild(ue),this._offset=e.Point.convert(F&&F.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(fr){fr.preventDefault()}),this._element.addEventListener("mousedown",function(fr){fr.preventDefault()}),this._element.addEventListener("focus",function(){var fr=ae._map.getContainer();fr.scrollTop=0,fr.scrollLeft=0}),Aa(this._element,this._anchor,"marker"),this._popup=null}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.addTo=function(F){return this.remove(),this._map=F,F.getCanvasContainer().appendChild(this._element),F.on("move",this._update),F.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},z.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),t.remove(this._element),this._popup&&this._popup.remove(),this},z.prototype.getLngLat=function(){return this._lngLat},z.prototype.setLngLat=function(F){return this._lngLat=e.LngLat.convert(F),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},z.prototype.getElement=function(){return this._element},z.prototype.setPopup=function(F){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),F){if(!("offset"in F.options)){var q=Math.sqrt(Math.pow(13.5,2)/2);F.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[q,-1*(24.6+q)],"bottom-right":[-q,-1*(24.6+q)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=F,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},z.prototype._onKeyPress=function(F){var q=F.code,ae=F.charCode||F.keyCode;"Space"!==q&&"Enter"!==q&&32!==ae&&13!==ae||this.togglePopup()},z.prototype._onMapClick=function(F){var q=F.originalEvent.target,ae=this._element;this._popup&&(q===ae||ae.contains(q))&&this.togglePopup()},z.prototype.getPopup=function(){return this._popup},z.prototype.togglePopup=function(){var F=this._popup;return F?(F.isOpen()?F.remove():F.addTo(this._map),this):this},z.prototype._update=function(F){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=us(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var q="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?q="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(q="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var ae="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?ae="rotateX(0deg)":"map"===this._pitchAlignment&&(ae="rotateX("+this._map.getPitch()+"deg)"),F&&"moveend"!==F.type||(this._pos=this._pos.round()),t.setTransform(this._element,ns[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+ae+" "+q)}},z.prototype.getOffset=function(){return this._offset},z.prototype.setOffset=function(F){return this._offset=e.Point.convert(F),this._update(),this},z.prototype._onMove=function(F){this._pos=F.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},z.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},z.prototype._addDragHandler=function(F){this._element.contains(F.originalEvent.target)&&(F.preventDefault(),this._positionDelta=F.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},z.prototype.setDraggable=function(F){return this._draggable=!!F,this._map&&(F?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},z.prototype.isDraggable=function(){return this._draggable},z.prototype.setRotation=function(F){return this._rotation=F||0,this._update(),this},z.prototype.getRotation=function(){return this._rotation},z.prototype.setRotationAlignment=function(F){return this._rotationAlignment=F||"auto",this._update(),this},z.prototype.getRotationAlignment=function(){return this._rotationAlignment},z.prototype.setPitchAlignment=function(F){return this._pitchAlignment=F&&"auto"!==F?F:this._rotationAlignment,this._update(),this},z.prototype.getPitchAlignment=function(){return this._pitchAlignment},z}(e.Evented),gs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ts=0,is=!1,Xs=function(C){function z(F){C.call(this),this.options=e.extend({},gs,F),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.onAdd=function(F){var q;return this._map=F,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),q=this._setupUI,void 0!==fs?q(fs):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(ae){q(fs="denied"!==ae.state)}):q(fs=!!e.window.navigator.geolocation),this._container},z.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),t.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ts=0,is=!1},z.prototype._isOutOfMapMaxBounds=function(F){var q=this._map.getMaxBounds(),ae=F.coords;return q&&(ae.longitude<q.getWest()||ae.longitude>q.getEast()||ae.latitude<q.getSouth()||ae.latitude>q.getNorth())},z.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},z.prototype._onSuccess=function(F){if(this._map){if(this._isOutOfMapMaxBounds(F))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",F)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=F,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(F),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(F),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",F)),this._finish()}},z.prototype._updateCamera=function(F){var q=new e.LngLat(F.coords.longitude,F.coords.latitude),ae=F.coords.accuracy,ue=this._map.getBearing(),de=e.extend({bearing:ue},this.options.fitBoundsOptions);this._map.fitBounds(q.toBounds(ae),de,{geolocateSource:!0})},z.prototype._updateMarker=function(F){if(F){var q=new e.LngLat(F.coords.longitude,F.coords.latitude);this._accuracyCircleMarker.setLngLat(q).addTo(this._map),this._userLocationDotMarker.setLngLat(q).addTo(this._map),this._accuracy=F.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},z.prototype._updateCircleRadius=function(){var F=this._map._container.clientHeight/2,q=this._map.unproject([0,F]),ae=this._map.unproject([1,F]),ue=q.distanceTo(ae),de=Math.ceil(2*this._accuracy/ue);this._circleElement.style.width=de+"px",this._circleElement.style.height=de+"px"},z.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},z.prototype._onError=function(F){if(this._map){if(this.options.trackUserLocation)if(1===F.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var q=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=q,this._geolocateButton.setAttribute("aria-label",q),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===F.code&&is)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",F)),this._finish()}},z.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},z.prototype._setupUI=function(F){var q=this;if(this._container.addEventListener("contextmenu",function(de){return de.preventDefault()}),this._geolocateButton=t.create("button","mapboxgl-ctrl-geolocate",this._container),t.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===F){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var ae=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=ae,this._geolocateButton.setAttribute("aria-label",ae)}else{var ue=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ue,this._geolocateButton.setAttribute("aria-label",ue)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=t.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ws(this._dotElement),this._circleElement=t.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ws({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(de){de.geolocateSource||"ACTIVE_LOCK"!==q._watchState||de.originalEvent&&"resize"===de.originalEvent.type||(q._watchState="BACKGROUND",q._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),q._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),q.fire(new e.Event("trackuserlocationend")))})},z.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ts--,is=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var F;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ts>1?(F={maximumAge:6e5,timeout:0},is=!0):(F=this.options.positionOptions,is=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,F)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},z.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},z}(e.Evented),il={maxWidth:100,unit:"metric"},hs=function(C){this.options=e.extend({},il,C),e.bindAll(["_onMove","setUnit"],this)};function Zs(C,z,F){var q=F&&F.maxWidth||100,ae=C._container.clientHeight/2,ue=C.unproject([0,ae]),de=C.unproject([q,ae]),ye=ue.distanceTo(de);if(F&&"imperial"===F.unit){var Ae=3.2808*ye;Ae>5280?ks(z,q,Ae/5280,C._getUIString("ScaleControl.Miles")):ks(z,q,Ae,C._getUIString("ScaleControl.Feet"))}else F&&"nautical"===F.unit?ks(z,q,ye/1852,C._getUIString("ScaleControl.NauticalMiles")):ye>=1e3?ks(z,q,ye/1e3,C._getUIString("ScaleControl.Kilometers")):ks(z,q,ye,C._getUIString("ScaleControl.Meters"))}function ks(C,z,F,q){var ae,ue,de,Ue,Ge,ye=(ae=F,(ue=Math.pow(10,(""+Math.floor(ae)).length-1))*(de=(de=ae/ue)>=10?10:de>=5?5:de>=3?3:de>=2?2:de>=1?1:(Ue=de,Ge=Math.pow(10,Math.ceil(-Math.log(Ue)/Math.LN10)),Math.round(Ue*Ge)/Ge)));C.style.width=z*(ye/F)+"px",C.innerHTML=ye+"&nbsp;"+q}hs.prototype.getDefaultPosition=function(){return"bottom-left"},hs.prototype._onMove=function(){Zs(this._map,this._container,this.options)},hs.prototype.onAdd=function(C){return this._map=C,this._container=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",C.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},hs.prototype.onRemove=function(){t.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},hs.prototype.setUnit=function(C){this.options.unit=C,Zs(this._map,this._container,this.options)};var Ka=function(C){this._fullscreen=!1,C&&C.container&&(C.container instanceof e.window.HTMLElement?this._container=C.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ka.prototype.onAdd=function(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=t.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ka.prototype.onRemove=function(){t.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ka.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Ka.prototype._setupUI=function(){var C=this._fullscreenButton=t.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);t.create("span","mapboxgl-ctrl-icon",C).setAttribute("aria-hidden",!0),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ka.prototype._updateTitle=function(){var C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.title=C},Ka.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ka.prototype._isFullscreen=function(){return this._fullscreen},Ka.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ka.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var al={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},ol=function(C){function z(F){C.call(this),this.options=e.extend(Object.create(al),F),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return C&&(z.__proto__=C),(z.prototype=Object.create(C&&C.prototype)).constructor=z,z.prototype.addTo=function(F){return this._map&&this.remove(),this._map=F,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},z.prototype.isOpen=function(){return!!this._map},z.prototype.remove=function(){return this._content&&t.remove(this._content),this._container&&(t.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},z.prototype.getLngLat=function(){return this._lngLat},z.prototype.setLngLat=function(F){return this._lngLat=e.LngLat.convert(F),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},z.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},z.prototype.getElement=function(){return this._container},z.prototype.setText=function(F){return this.setDOMContent(e.window.document.createTextNode(F))},z.prototype.setHTML=function(F){var q,ae=e.window.document.createDocumentFragment(),ue=e.window.document.createElement("body");for(ue.innerHTML=F;q=ue.firstChild;)ae.appendChild(q);return this.setDOMContent(ae)},z.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},z.prototype.setMaxWidth=function(F){return this.options.maxWidth=F,this._update(),this},z.prototype.setDOMContent=function(F){return this._createContent(),this._content.appendChild(F),this._update(),this},z.prototype.addClassName=function(F){this._container&&this._container.classList.add(F)},z.prototype.removeClassName=function(F){this._container&&this._container.classList.remove(F)},z.prototype.toggleClassName=function(F){if(this._container)return this._container.classList.toggle(F)},z.prototype._createContent=function(){this._content&&t.remove(this._content),this._content=t.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=t.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},z.prototype._onMouseUp=function(F){this._update(F.point)},z.prototype._onMouseMove=function(F){this._update(F.point)},z.prototype._onDrag=function(F){this._update(F.point)},z.prototype._update=function(F){var q=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=t.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=t.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(xt){return q._container.classList.add(xt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=us(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||F)){var ue=this._pos=this._trackPointer&&F?F:this._map.project(this._lngLat),de=this.options.anchor,ye=function xt(At){if(At){if("number"==typeof At){var wt=Math.round(Math.sqrt(.5*Math.pow(At,2)));return{center:new e.Point(0,0),top:new e.Point(0,At),"top-left":new e.Point(wt,wt),"top-right":new e.Point(-wt,wt),bottom:new e.Point(0,-At),"bottom-left":new e.Point(wt,-wt),"bottom-right":new e.Point(-wt,-wt),left:new e.Point(At,0),right:new e.Point(-At,0)}}if(At instanceof e.Point||Array.isArray(At)){var Tt=e.Point.convert(At);return{center:Tt,top:Tt,"top-left":Tt,"top-right":Tt,bottom:Tt,"bottom-left":Tt,"bottom-right":Tt,left:Tt,right:Tt}}return{center:e.Point.convert(At.center||[0,0]),top:e.Point.convert(At.top||[0,0]),"top-left":e.Point.convert(At["top-left"]||[0,0]),"top-right":e.Point.convert(At["top-right"]||[0,0]),bottom:e.Point.convert(At.bottom||[0,0]),"bottom-left":e.Point.convert(At["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(At["bottom-right"]||[0,0]),left:e.Point.convert(At.left||[0,0]),right:e.Point.convert(At.right||[0,0])}}return xt(new e.Point(0,0))}(this.options.offset);if(!de){var Ae,Ue=this._container.offsetWidth,Ge=this._container.offsetHeight;Ae=ue.y+ye.bottom.y<Ge?["top"]:ue.y>this._map.transform.height-Ge?["bottom"]:[],ue.x<Ue/2?Ae.push("left"):ue.x>this._map.transform.width-Ue/2&&Ae.push("right"),de=0===Ae.length?"bottom":Ae.join("-")}var nt=ue.add(ye[de]).round();t.setTransform(this._container,ns[de]+" translate("+nt.x+"px,"+nt.y+"px)"),Aa(this._container,de,"popup")}},z.prototype._onClose=function(){this.remove()},z}(e.Evented),le={version:e.version,supported:n,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:jo,NavigationControl:qi,GeolocateControl:Xs,AttributionControl:Ca,ScaleControl:hs,FullscreenControl:Ka,Popup:ol,Marker:ws,Style:qn,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){Qe().acquire(St)},clearPrewarmedResources:function(){var C=Et;C&&(C.isPreloaded()&&1===C.numActive()?(C.release(St),Et=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(C){e.config.ACCESS_TOKEN=C},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(C){e.config.API_URL=C},get workerCount(){return ot.workerCount},set workerCount(C){ot.workerCount=C},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(C){e.config.MAX_PARALLEL_IMAGE_REQUESTS=C},clearStorage:function(C){e.clearTileCache(C)},workerUrl:""};return le}),b},"object"==typeof ee&&void 0!==$?$.exports=m():(p=p||self).mapboxgl=m()},{}],240:[function(y,$,ee){"use strict";$.exports=Math.log2||function(p){return Math.log(p)*Math.LOG2E}},{}],241:[function(y,$,ee){"use strict";$.exports=function(m,b){b||(b=m,m=window);var v=0,e=0,n=0,t={shift:!1,alt:!1,control:!1,meta:!1},a=!1;function r(x){var d=!1;return"altKey"in x&&(d=d||x.altKey!==t.alt,t.alt=!!x.altKey),"shiftKey"in x&&(d=d||x.shiftKey!==t.shift,t.shift=!!x.shiftKey),"ctrlKey"in x&&(d=d||x.ctrlKey!==t.control,t.control=!!x.ctrlKey),"metaKey"in x&&(d=d||x.metaKey!==t.meta,t.meta=!!x.metaKey),d}function u(x,d){var w=p.x(d),_=p.y(d);"buttons"in d&&(x=0|d.buttons),(x!==v||w!==e||_!==n||r(d))&&(v=0|x,e=w||0,n=_||0,b&&b(v,e,n,t))}function s(x){u(0,x)}function i(){(v||e||n||t.shift||t.alt||t.meta||t.control)&&(e=n=0,v=0,t.shift=t.alt=t.control=t.meta=!1,b&&b(0,0,0,t))}function l(x){r(x)&&b&&b(v,e,n,t)}function c(x){0===p.buttons(x)?u(0,x):u(v,x)}function f(x){u(v|p.buttons(x),x)}function g(x){u(v&~p.buttons(x),x)}function h(){a||(a=!0,m.addEventListener("mousemove",c),m.addEventListener("mousedown",f),m.addEventListener("mouseup",g),m.addEventListener("mouseleave",s),m.addEventListener("mouseenter",s),m.addEventListener("mouseout",s),m.addEventListener("mouseover",s),m.addEventListener("blur",i),m.addEventListener("keyup",l),m.addEventListener("keydown",l),m.addEventListener("keypress",l),m!==window&&(window.addEventListener("blur",i),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}h();var o={element:m};return Object.defineProperties(o,{enabled:{get:function(){return a},set:function(x){x?h():!a||(a=!1,m.removeEventListener("mousemove",c),m.removeEventListener("mousedown",f),m.removeEventListener("mouseup",g),m.removeEventListener("mouseleave",s),m.removeEventListener("mouseenter",s),m.removeEventListener("mouseout",s),m.removeEventListener("mouseover",s),m.removeEventListener("blur",i),m.removeEventListener("keyup",l),m.removeEventListener("keydown",l),m.removeEventListener("keypress",l),m!==window&&(window.removeEventListener("blur",i),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))},enumerable:!0},buttons:{get:function(){return v},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return t},enumerable:!0}}),o};var p=y("mouse-event")},{"mouse-event":243}],242:[function(y,$,ee){var p={left:0,top:0};$.exports=function(m,b,v){b=b||m.currentTarget||m.srcElement,Array.isArray(v)||(v=[0,0]);var a,e=m.clientX||0,n=m.clientY||0,t=(a=b)===window||a===document||a===document.body?p:a.getBoundingClientRect();return v[0]=e-t.left,v[1]=n-t.top,v}},{}],243:[function(y,$,ee){"use strict";function p(m){return m.target||m.srcElement||window}ee.buttons=function(m){if("object"==typeof m){if("buttons"in m)return m.buttons;if("which"in m){if(2===(b=m.which))return 4;if(3===b)return 2;if(b>0)return 1<<b-1}else if("button"in m){var b;if(1===(b=m.button))return 4;if(2===b)return 2;if(b>=0)return 1<<b}}return 0},ee.element=p,ee.x=function(m){if("object"==typeof m){if("offsetX"in m)return m.offsetX;var b=p(m).getBoundingClientRect();return m.clientX-b.left}return 0},ee.y=function(m){if("object"==typeof m){if("offsetY"in m)return m.offsetY;var b=p(m).getBoundingClientRect();return m.clientY-b.top}return 0}},{}],244:[function(y,$,ee){"use strict";var p=y("to-px");$.exports=function(m,b,v){"function"==typeof m&&(v=!!b,b=m,m=window);var e=p("ex",m),n=function(t){v&&t.preventDefault();var a=t.deltaX||0,r=t.deltaY||0,u=t.deltaZ||0,s=1;switch(t.deltaMode){case 1:s=e;break;case 2:s=window.innerHeight}if(r*=s,u*=s,(a*=s)||r||u)return b(a,r,u,t)};return m.addEventListener("wheel",n),n}},{"to-px":314}],245:[function(y,$,ee){(function(p,m){(function(){var b,v;(v=void 0!==p?p:this)[b="Promise"]=v[b]||function(){"use strict";var b,v,e,n=Object.prototype.toString,t=void 0!==m?function(x){return m(x)}:setTimeout;try{Object.defineProperty({},"x",{}),b=function(x,d,w,_){return Object.defineProperty(x,d,{value:w,writable:!0,configurable:!1!==_})}}catch(x){b=function(d,w,_){return d[w]=_,d}}function a(x,d){e.add(x,d),v||(v=t(e.drain))}function r(x){var d,w=typeof x;return null==x||"object"!=w&&"function"!=w||(d=x.then),"function"==typeof d&&d}function u(){for(var x=0;x<this.chain.length;x++)s(this,1===this.state?this.chain[x].success:this.chain[x].failure,this.chain[x]);this.chain.length=0}function s(x,d,w){var _,T;try{!1===d?w.reject(x.msg):(_=!0===d?x.msg:d.call(void 0,x.msg))===w.promise?w.reject(TypeError("Promise-chain cycle")):(T=r(_))?T.call(_,w.resolve,w.reject):w.resolve(_)}catch(k){w.reject(k)}}function i(x){var d,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(d=r(x))?a(function(){var _=new f(w);try{d.call(x,function(){i.apply(_,arguments)},function(){l.apply(_,arguments)})}catch(T){l.call(_,T)}}):(w.msg=x,w.state=1,w.chain.length>0&&a(u,w))}catch(_){l.call(new f(w),_)}}}function l(x){var d=this;d.triggered||(d.triggered=!0,d.def&&(d=d.def),d.msg=x,d.state=2,d.chain.length>0&&a(u,d))}function c(x,d,w,_){for(var T=0;T<d.length;T++)!function(k){x.resolve(d[k]).then(function(L){w(k,L)},_)}(T)}function f(x){this.def=x,this.triggered=!1}function g(x){this.promise=x,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function h(x){if("function"!=typeof x)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var d=new g(this);this.then=function(w,_){var T={success:"function"!=typeof w||w,failure:"function"==typeof _&&_};return T.promise=new this.constructor(function(k,L){if("function"!=typeof k||"function"!=typeof L)throw TypeError("Not a function");T.resolve=k,T.reject=L}),d.chain.push(T),0!==d.state&&a(u,d),T.promise},this.catch=function(w){return this.then(void 0,w)};try{x.call(void 0,function(w){i.call(d,w)},function(w){l.call(d,w)})}catch(w){l.call(d,w)}}e=function(){var x,d,w;function _(T,k){this.fn=T,this.self=k,this.next=void 0}return{add:function(T,k){w=new _(T,k),d?d.next=w:x=w,d=w,w=void 0},drain:function(){var T=x;for(x=d=v=void 0;T;)T.fn.call(T.self),T=T.next}}}();var o=b({},"constructor",h,!1);return h.prototype=o,b(o,"__NPO__",0,!1),b(h,"resolve",function(x){return x&&"object"==typeof x&&1===x.__NPO__?x:new this(function(d,w){if("function"!=typeof d||"function"!=typeof w)throw TypeError("Not a function");d(x)})}),b(h,"reject",function(x){return new this(function(d,w){if("function"!=typeof d||"function"!=typeof w)throw TypeError("Not a function");w(x)})}),b(h,"all",function(x){var d=this;return"[object Array]"!=n.call(x)?d.reject(TypeError("Not an array")):0===x.length?d.resolve([]):new d(function(w,_){if("function"!=typeof w||"function"!=typeof _)throw TypeError("Not a function");var T=x.length,k=Array(T),L=0;c(d,x,function(M,O){k[M]=O,++L===T&&w(k)},_)})}),b(h,"race",function(x){var d=this;return"[object Array]"!=n.call(x)?d.reject(TypeError("Not an array")):new d(function(w,_){if("function"!=typeof w||"function"!=typeof _)throw TypeError("Not a function");c(d,x,function(T,k){w(k)},_)})}),h}(),void 0!==$&&$.exports&&($.exports=v[b])}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},y("timers").setImmediate)},{timers:311}],246:[function(y,$,ee){var p=Math.PI,m=t(120);function b(a,r,u,s){return["C",a,r,u,s,u,s]}function v(a,r,u,s,i,l){return["C",a/3+2/3*u,r/3+2/3*s,i/3+2/3*u,l/3+2/3*s,i,l]}function e(a,r,u,s,i,l,c,f,g,h){if(h)O=h[0],P=h[1],L=h[2],M=h[3];else{var o=n(a,r,-i);r=o.y;var x=((a=o.x)-(f=(o=n(f,g,-i)).x))/2,d=(r-(g=o.y))/2,w=x*x/(u*u)+d*d/(s*s);w>1&&(u*=w=Math.sqrt(w),s*=w);var _=u*u,T=s*s,k=(l==c?-1:1)*Math.sqrt(Math.abs((_*T-_*d*d-T*x*x)/(_*d*d+T*x*x)));k==1/0&&(k=1);var L=k*u*d/s+(a+f)/2,M=k*-s*x/u+(r+g)/2,O=Math.asin(((r-M)/s).toFixed(9)),P=Math.asin(((g-M)/s).toFixed(9));(O=a<L?p-O:O)<0&&(O=2*p+O),(P=f<L?p-P:P)<0&&(P=2*p+P),c&&O>P&&(O-=2*p),!c&&P>O&&(P-=2*p)}if(Math.abs(P-O)>m){var S=P,E=f,R=g;P=O+m*(c&&P>O?1:-1);var B=e(f=L+u*Math.cos(P),g=M+s*Math.sin(P),u,s,i,0,c,E,R,[P,S,L,M])}var H=Math.tan((P-O)/4),V=4/3*u*H,Z=4/3*s*H,W=[2*a-(a+V*Math.sin(O)),2*r-(r-Z*Math.cos(O)),f+V*Math.sin(P),g-Z*Math.cos(P),f,g];if(h)return W;B&&(W=W.concat(B));for(var G=0;G<W.length;){var X=n(W[G],W[G+1],i);W[G++]=X.x,W[G++]=X.y}return W}function n(a,r,u){return{x:a*Math.cos(u)-r*Math.sin(u),y:a*Math.sin(u)+r*Math.cos(u)}}function t(a){return a*(p/180)}$.exports=function(a){for(var r,u=[],s=0,i=0,l=0,c=0,f=null,g=null,h=0,o=0,x=0,d=a.length;x<d;x++){var w=a[x],_=w[0];switch(_){case"M":l=w[1],c=w[2];break;case"A":(w=e(h,o,w[1],w[2],t(w[3]),w[4],w[5],w[6],w[7])).unshift("C"),w.length>7&&(u.push(w.splice(0,7)),w.unshift("C"));break;case"S":var T=h,k=o;"C"!=r&&"S"!=r||(T+=T-s,k+=k-i),w=["C",T,k,w[1],w[2],w[3],w[4]];break;case"T":"Q"==r||"T"==r?(f=2*h-f,g=2*o-g):(f=h,g=o),w=v(h,o,f,g,w[1],w[2]);break;case"Q":f=w[1],g=w[2],w=v(h,o,w[1],w[2],w[3],w[4]);break;case"L":w=b(h,o,w[1],w[2]);break;case"H":w=b(h,o,w[1],o);break;case"V":w=b(h,o,h,w[1]);break;case"Z":w=b(h,o,l,c)}r=_,h=w[w.length-2],o=w[w.length-1],w.length>4?(s=w[w.length-4],i=w[w.length-3]):(s=h,i=o),u.push(w)}return u}},{}],247:[function(y,$,ee){"use strict";var p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;function v(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}$.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(n).map(function(r){return n[r]}).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(r){a[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(r){return!1}}()?Object.assign:function(e,n){for(var t,a,r=v(e),u=1;u<arguments.length;u++){for(var s in t=Object(arguments[u]))m.call(t,s)&&(r[s]=t[s]);if(p){a=p(t);for(var i=0;i<a.length;i++)b.call(t,a[i])&&(r[a[i]]=t[a[i]])}}return r}},{}],248:[function(y,$,ee){"use strict";function p(v,e){if("string"!=typeof v)return[v];var n=[v];"string"==typeof e||Array.isArray(e)?e={brackets:e}:e||(e={});var t=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],a=e.escape||"___",r=!!e.flat;t.forEach(function(s){var i=new RegExp(["\\",s[0],"[^\\",s[0],"\\",s[1],"]*\\",s[1]].join("")),l=[];function c(f,g,h){var o=n.push(f.slice(s[0].length,-s[1].length))-1;return l.push(o),a+o+a}n.forEach(function(f,g){for(var h,o=0;f!=h;)if(h=f,f=f.replace(i,c),o++>1e4)throw Error("References have circular dependency. Please, check them.");n[g]=f}),l=l.reverse(),n=n.map(function(f){return l.forEach(function(g){f=f.replace(new RegExp("(\\"+a+g+"\\"+a+")","g"),s[0]+"$1"+s[1])}),f})});var u=new RegExp("\\"+a+"([0-9]+)\\"+a);return r?n:function s(i,l,c){for(var f,g=[],h=0;f=u.exec(i);){if(h++>1e4)throw Error("Circular references in parenthesis");g.push(i.slice(0,f.index)),g.push(s(l[f[1]],l)),i=i.slice(f.index+f[0].length)}return g.push(i),g}(n[0],n)}function m(v,e){if(e&&e.flat){var n,t=e&&e.escape||"___",a=v[0];if(!a)return"";for(var r=new RegExp("\\"+t+"([0-9]+)\\"+t),u=0;a!=n;){if(u++>1e4)throw Error("Circular references in "+v);n=a,a=a.replace(r,s)}return a}return v.reduce(function i(l,c){return Array.isArray(c)&&(c=c.reduce(i,"")),l+c},"");function s(i,l){if(null==v[l])throw Error("Reference "+l+"is undefined");return v[l]}}function b(v,e){return Array.isArray(v)?m(v,e):p(v,e)}b.parse=p,b.stringify=m,$.exports=b},{}],249:[function(y,$,ee){"use strict";var p=y("pick-by-alias");$.exports=function(m){var b;return arguments.length>1&&(m=arguments),"string"==typeof m?m=m.split(/\s/).map(parseFloat):"number"==typeof m&&(m=[m]),m.length&&"number"==typeof m[0]?b=1===m.length?{width:m[0],height:m[0],x:0,y:0}:2===m.length?{width:m[0],height:m[1],x:0,y:0}:{x:m[0],y:m[1],width:m[2]-m[0]||0,height:m[3]-m[1]||0}:m&&((b={x:(m=p(m,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:m.top||0}).width=null==m.width?m.right?m.right-b.x:0:m.width,b.height=null==m.height?m.bottom?m.bottom-b.y:0:m.height),b}},{"pick-by-alias":253}],250:[function(y,$,ee){$.exports=function(v){var e=[];return v.replace(m,function(n,t,a){var s,r=t.toLowerCase();for(s=void 0,a=(s=a.match(b))?s.map(Number):[],"m"==r&&a.length>2&&(e.push([t].concat(a.splice(0,2))),r="l",t="m"==t?"l":"L");;){if(a.length==p[r])return a.unshift(t),e.push(a);if(a.length<p[r])throw new Error("malformed path data");e.push([t].concat(a.splice(0,p[r])))}}),e};var p={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},m=/([astvzqmhlc])([^astvzqmhlc]*)/gi,b=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(y,$,ee){$.exports=function(p,m){m||(m=[0,""]),p=String(p);var b=parseFloat(p,10);return m[0]=b,m[1]=p.match(/[\d.\-\+]*\s*(.*)/)[1]||"",m}},{}],252:[function(y,$,ee){(function(p){(function(){(function(){var m,b,v,e,n,t;"undefined"!=typeof performance&&null!==performance&&performance.now?$.exports=function(){return performance.now()}:null!=p&&p.hrtime?($.exports=function(){return(m()-n)/1e6},b=p.hrtime,e=(m=function(){var a;return 1e9*(a=b())[0]+a[1]})(),t=1e9*p.uptime(),n=e-t):Date.now?($.exports=function(){return Date.now()-v},v=Date.now()):($.exports=function(){return(new Date).getTime()-v},v=(new Date).getTime())}).call(this)}).call(this)}).call(this,y("_process"))},{_process:277}],253:[function(y,$,ee){"use strict";$.exports=function(b,v,e){var n,t,a={};if("string"==typeof v&&(v=m(v)),Array.isArray(v)){var r={};for(t=0;t<v.length;t++)r[v[t]]=!0;v=r}for(n in v)v[n]=m(v[n]);var u={};for(n in v){var s=v[n];if(Array.isArray(s))for(t=0;t<s.length;t++){var i=s[t];if(e&&(u[i]=!0),i in b){if(a[n]=b[i],e)for(var l=t;l<s.length;l++)u[s[l]]=!0;break}}else n in b&&(v[n]&&(a[n]=b[n]),e&&(u[n]=!0))}if(e)for(n in b)u[n]||(a[n]=b[n]);return a};var p={};function m(b){return p[b]?p[b]:("string"==typeof b&&(b=p[b]=b.split(/\s*,\s*|\s+/)),b)}},{}],254:[function(y,$,ee){var p,m=y("./lib/build-log"),b=y("./lib/epsilon"),v=y("./lib/intersecter"),e=y("./lib/segment-chainer"),n=y("./lib/segment-selector"),t=y("./lib/geojson"),a=!1,r=b();function u(s,i,l){var c=p.segments(s),f=p.segments(i),g=l(p.combine(c,f));return p.polygon(g)}p={buildLog:function(s){return!0===s?a=m():!1===s&&(a=!1),!1!==a&&a.list},epsilon:function(s){return r.epsilon(s)},segments:function(s){var i=v(!0,r,a);return s.regions.forEach(i.addRegion),{segments:i.calculate(s.inverted),inverted:s.inverted}},combine:function(s,i){return{combined:v(!1,r,a).calculate(s.segments,s.inverted,i.segments,i.inverted),inverted1:s.inverted,inverted2:i.inverted}},selectUnion:function(s){return{segments:n.union(s.combined,a),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:n.intersect(s.combined,a),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:n.difference(s.combined,a),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:n.differenceRev(s.combined,a),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:n.xor(s.combined,a),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:e(s.segments,r,a),inverted:s.inverted}},polygonFromGeoJSON:function(s){return t.toPolygon(p,s)},polygonToGeoJSON:function(s){return t.fromPolygon(p,r,s)},union:function(s,i){return u(s,i,p.selectUnion)},intersect:function(s,i){return u(s,i,p.selectIntersect)},difference:function(s,i){return u(s,i,p.selectDifference)},differenceRev:function(s,i){return u(s,i,p.selectDifferenceRev)},xor:function(s,i){return u(s,i,p.selectXor)}},"object"==typeof window&&(window.PolyBool=p),$.exports=p},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(y,$,ee){$.exports=function(){var p,m=0,b=!1;function v(e,n){return p.list.push({type:e,data:n?JSON.parse(JSON.stringify(n)):void 0}),p}return p={list:[],segmentId:function(){return m++},checkIntersection:function(e,n){return v("check",{seg1:e,seg2:n})},segmentChop:function(e,n){return v("div_seg",{seg:e,pt:n}),v("chop",{seg:e,pt:n})},statusRemove:function(e){return v("pop_seg",{seg:e})},segmentUpdate:function(e){return v("seg_update",{seg:e})},segmentNew:function(e,n){return v("new_seg",{seg:e,primary:n})},segmentRemove:function(e){return v("rem_seg",{seg:e})},tempStatus:function(e,n,t){return v("temp_status",{seg:e,above:n,below:t})},rewind:function(e){return v("rewind",{seg:e})},status:function(e,n,t){return v("status",{seg:e,above:n,below:t})},vert:function(e){return e===b?p:(b=e,v("vert",{x:e}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),v("log",{txt:e})},reset:function(){return v("reset")},selected:function(e){return v("selected",{segs:e})},chainStart:function(e){return v("chain_start",{seg:e})},chainRemoveHead:function(e,n){return v("chain_rem_head",{index:e,pt:n})},chainRemoveTail:function(e,n){return v("chain_rem_tail",{index:e,pt:n})},chainNew:function(e,n){return v("chain_new",{pt1:e,pt2:n})},chainMatch:function(e){return v("chain_match",{index:e})},chainClose:function(e){return v("chain_close",{index:e})},chainAddHead:function(e,n){return v("chain_add_head",{index:e,pt:n})},chainAddTail:function(e,n){return v("chain_add_tail",{index:e,pt:n})},chainConnect:function(e,n){return v("chain_con",{index1:e,index2:n})},chainReverse:function(e){return v("chain_rev",{index:e})},chainJoin:function(e,n){return v("chain_join",{index1:e,index2:n})},done:function(){return v("done")}}}},{}],256:[function(y,$,ee){$.exports=function(p){"number"!=typeof p&&(p=1e-10);var m={epsilon:function(b){return"number"==typeof b&&(p=b),p},pointAboveOrOnLine:function(b,v,e){var n=v[0],t=v[1];return(e[0]-n)*(b[1]-t)-(e[1]-t)*(b[0]-n)>=-p},pointBetween:function(b,v,e){var t=e[0]-v[0],r=e[1]-v[1],u=(b[0]-v[0])*t+(b[1]-v[1])*r;return!(u<p||u-(t*t+r*r)>-p)},pointsSameX:function(b,v){return Math.abs(b[0]-v[0])<p},pointsSameY:function(b,v){return Math.abs(b[1]-v[1])<p},pointsSame:function(b,v){return m.pointsSameX(b,v)&&m.pointsSameY(b,v)},pointsCompare:function(b,v){return m.pointsSameX(b,v)?m.pointsSameY(b,v)?0:b[1]<v[1]?-1:1:b[0]<v[0]?-1:1},pointsCollinear:function(b,v,e){return Math.abs((b[0]-v[0])*(v[1]-e[1])-(v[0]-e[0])*(b[1]-v[1]))<p},linesIntersect:function(b,v,e,n){var t=v[0]-b[0],a=v[1]-b[1],r=n[0]-e[0],u=n[1]-e[1],s=t*u-a*r;if(Math.abs(s)<p)return!1;var i=b[0]-e[0],l=b[1]-e[1],c=(r*l-u*i)/s,f=(t*l-a*i)/s,g={alongA:0,alongB:0,pt:[b[0]+c*t,b[1]+c*a]};return g.alongA=c<=-p?-2:c<p?-1:c-1<=-p?0:c-1<p?1:2,g.alongB=f<=-p?-2:f<p?-1:f-1<=-p?0:f-1<p?1:2,g},pointInsideRegion:function(b,v){for(var e=b[0],n=b[1],t=v[v.length-1][0],a=v[v.length-1][1],r=!1,u=0;u<v.length;u++){var s=v[u][0],i=v[u][1];i-n>p!=a-n>p&&(t-s)*(n-i)/(a-i)+s-e>p&&(r=!r),t=s,a=i}return r}};return m}},{}],257:[function(y,$,ee){$.exports={toPolygon:function(m,b){function v(t){if(t.length<=0)return m.segments({inverted:!1,regions:[]});function a(s){var i=s.slice(0,s.length-1);return m.segments({inverted:!1,regions:[i]})}for(var r=a(t[0]),u=1;u<t.length;u++)r=m.selectDifference(m.combine(r,a(t[u])));return r}if("Polygon"===b.type)return m.polygon(v(b.coordinates));if("MultiPolygon"===b.type){for(var e=m.segments({inverted:!1,regions:[]}),n=0;n<b.coordinates.length;n++)e=m.selectUnion(m.combine(e,v(b.coordinates[n])));return m.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(m,b,v){function e(f,g){return b.pointInsideRegion([.5*(f[0][0]+f[1][0]),.5*(f[0][1]+f[1][1])],g)}function n(f){return{region:f,children:[]}}v=m.polygon(m.segments(v));var t=n(null);function a(f,g){for(var h=0;h<f.children.length;h++)if(e(g,(x=f.children[h]).region))return void a(x,g);var o=n(g);for(h=0;h<f.children.length;h++){var x;e((x=f.children[h]).region,g)&&(o.children.push(x),f.children.splice(h,1),h--)}f.children.push(o)}for(var r=0;r<v.regions.length;r++){var u=v.regions[r];u.length<3||a(t,u)}function s(f,g){for(var h=0,o=f[f.length-1][0],x=f[f.length-1][1],d=[],w=0;w<f.length;w++){var _=f[w][0],T=f[w][1];d.push([_,T]),h+=T*o-_*x,o=_,x=T}return h<0!==g&&d.reverse(),d.push([d[0][0],d[0][1]]),d}var i=[];function l(f){var g=[s(f.region,!1)];i.push(g);for(var h=0;h<f.children.length;h++)g.push(c(f.children[h]))}function c(f){for(var g=0;g<f.children.length;g++)l(f.children[g]);return s(f.region,!0)}for(r=0;r<t.children.length;r++)l(t.children[r]);return i.length<=0?{type:"Polygon",coordinates:[]}:1==i.length?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}}},{}],258:[function(y,$,ee){var p=y("./linked-list");$.exports=function(m,b,v){function e(s,i,l){return{id:v?v.segmentId():-1,start:s,end:i,myFill:{above:l.myFill.above,below:l.myFill.below},otherFill:null}}var n=p.create();function t(s,i){n.insertBefore(s,function(l){return c=s.isStart,g=i,h=l.isStart,x=l.other.pt,(0!==(d=b.pointsCompare(s.pt,o=l.pt))?d:b.pointsSame(g,x)?0:c!==h?c?1:-1:b.pointAboveOrOnLine(g,h?o:x,h?x:o)?1:-1)<0;var c,g,h,o,x,d})}function a(s,i){var c,g,l=(t(g=p.node({isStart:!0,pt:(c=s).start,seg:c,primary:i,other:null,status:null}),c.end),g);return function(c,f,g){var h=p.node({isStart:!1,pt:f.end,seg:f,primary:g,other:c,status:null});c.other=h,t(h,c.pt)}(l,s,i),l}function r(s,i){var c,f,l=e(i,s.seg.end,s.seg);return c=s,f=i,v&&v.segmentChop(c.seg,f),c.other.remove(),c.seg.end=f,c.other.pt=f,t(c.other,c.pt),a(l,s.primary)}function u(s,i){var l=p.create();function c(O){return l.findTransition(function(P){var S,E,R,B,H,V;return B=(S=O).seg.end,(b.pointsCollinear(R=S.seg.start,H=(E=P.ev).seg.start,V=E.seg.end)?b.pointsCollinear(B,H,V)||b.pointAboveOrOnLine(B,H,V)?1:-1:b.pointAboveOrOnLine(R,H,V)?1:-1)>0})}function f(O,P){var S=O.seg,E=P.seg,R=S.start,B=S.end,H=E.start,V=E.end;v&&v.checkIntersection(S,E);var Z=b.linesIntersect(R,B,H,V);if(!1===Z){if(!b.pointsCollinear(R,B,H)||b.pointsSame(R,V)||b.pointsSame(B,H))return!1;var W=b.pointsSame(R,H),G=b.pointsSame(B,V);if(W&&G)return P;var X=!W&&b.pointBetween(R,H,V),te=!G&&b.pointBetween(B,H,V);if(W)return te?r(P,B):r(O,V),P;X&&(G||(te?r(P,B):r(O,V)),r(P,R))}else 0===Z.alongA&&(-1===Z.alongB?r(O,H):0===Z.alongB?r(O,Z.pt):1===Z.alongB&&r(O,V)),0===Z.alongB&&(-1===Z.alongA?r(P,R):0===Z.alongA?r(P,Z.pt):1===Z.alongA&&r(P,B));return!1}for(var g=[];!n.isEmpty();){var h=n.getHead();if(v&&v.vert(h.pt[0]),h.isStart){let O=function(){if(x){var P=f(h,x);if(P)return P}return!!d&&f(h,d)};v&&v.segmentNew(h.seg,h.primary);var o=c(h),x=o.before?o.before.ev:null,d=o.after?o.after.ev:null;v&&v.tempStatus(h.seg,!!x&&x.seg,!!d&&d.seg);var w,T,_=O();if(_&&(m?(T=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below)&&(_.seg.myFill.above=!_.seg.myFill.above):_.seg.otherFill=h.seg.myFill,v&&v.segmentUpdate(_.seg),h.other.remove(),h.remove()),n.getHead()!==h){v&&v.rewind(h.seg);continue}m?(T=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below,h.seg.myFill.below=d?d.seg.myFill.above:s,h.seg.myFill.above=T?!h.seg.myFill.below:h.seg.myFill.below):null===h.seg.otherFill&&(h.seg.otherFill={above:w=d?h.primary===d.primary?d.seg.otherFill.above:d.seg.myFill.above:h.primary?i:s,below:w}),v&&v.status(h.seg,!!x&&x.seg,!!d&&d.seg),h.other.status=o.insert(p.node({ev:h}))}else{var k=h.status;if(null===k)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(l.exists(k.prev)&&l.exists(k.next)&&f(k.prev.ev,k.next.ev),v&&v.statusRemove(k.ev.seg),k.remove(),!h.primary){var L=h.seg.myFill;h.seg.myFill=h.seg.otherFill,h.seg.otherFill=L}g.push(h.seg)}n.getHead().remove()}return v&&v.done(),g}return m?{addRegion:function(s){for(var i,l,c,f=s[s.length-1],g=0;g<s.length;g++){var h=b.pointsCompare(i=f,f=s[g]);0!==h&&a((l=h<0?i:f,c=h<0?f:i,{id:v?v.segmentId():-1,start:l,end:c,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(s){return u(s,!1)}}:{calculate:function(s,i,l,c){return s.forEach(function(f){a(e(f.start,f.end,f),!0)}),l.forEach(function(f){a(e(f.start,f.end,f),!1)}),u(i,c)}}}},{"./linked-list":259}],259:[function(y,$,ee){$.exports={create:function(){var p={root:{root:!0,next:null},exists:function(m){return null!==m&&m!==p.root},isEmpty:function(){return null===p.root.next},getHead:function(){return p.root.next},insertBefore:function(m,b){for(var v=p.root,e=p.root.next;null!==e;){if(b(e))return m.prev=e.prev,m.next=e,e.prev.next=m,void(e.prev=m);v=e,e=e.next}v.next=m,m.prev=v,m.next=null},findTransition:function(m){for(var b=p.root,v=p.root.next;null!==v&&!m(v);)b=v,v=v.next;return{before:b===p.root?null:b,after:v,insert:function(e){return e.prev=b,e.next=v,b.next=e,null!==v&&(v.prev=e),e}}}};return p},node:function(p){return p.prev=null,p.next=null,p.remove=function(){p.prev.next=p.next,p.next&&(p.next.prev=p.prev),p.prev=null,p.next=null},p}}},{}],260:[function(y,$,ee){$.exports=function(p,m,b){var v=[],e=[];return p.forEach(function(n){var t=n.start,a=n.end;if(m.pointsSame(t,a))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{b&&b.chainStart(n);for(var r={index:0,matches_head:!1,matches_pt1:!1},u={index:0,matches_head:!1,matches_pt1:!1},s=r,i=0;i<v.length;i++){var l=(o=v[i])[0],c=o[o.length-1];if(m.pointsSame(l,t)){if(M(i,!0,!0))break}else if(m.pointsSame(l,a)){if(M(i,!0,!1))break}else if(m.pointsSame(c,t)){if(M(i,!1,!0))break}else if(m.pointsSame(c,a)&&M(i,!1,!1))break}if(s===r)return v.push([t,a]),void(b&&b.chainNew(t,a));if(s===u){b&&b.chainMatch(r.index);var f=r.index,g=r.matches_pt1?a:t,h=r.matches_head,o=v[f],x=h?o[0]:o[o.length-1],d=h?o[1]:o[o.length-2],w=h?o[o.length-1]:o[0],_=h?o[o.length-2]:o[1];return m.pointsCollinear(d,x,g)&&(h?(b&&b.chainRemoveHead(r.index,g),o.shift()):(b&&b.chainRemoveTail(r.index,g),o.pop()),x=d),m.pointsSame(w,g)?(v.splice(f,1),m.pointsCollinear(_,w,x)&&(h?(b&&b.chainRemoveTail(r.index,x),o.pop()):(b&&b.chainRemoveHead(r.index,x),o.shift())),b&&b.chainClose(r.index),void e.push(o)):void(h?(b&&b.chainAddHead(r.index,g),o.unshift(g)):(b&&b.chainAddTail(r.index,g),o.push(g)))}var T=r.index,k=u.index;b&&b.chainConnect(T,k);var L=v[T].length<v[k].length;r.matches_head?u.matches_head?L?(O(T),P(T,k)):(O(k),P(k,T)):P(k,T):u.matches_head?P(T,k):L?(O(T),P(k,T)):(O(k),P(T,k))}function M(S,E,R){return s.index=S,s.matches_head=E,s.matches_pt1=R,s===r?(s=u,!1):(s=null,!0)}function O(S){b&&b.chainReverse(S),v[S].reverse()}function P(S,E){var R=v[S],B=v[E],H=R[R.length-1],V=R[R.length-2],Z=B[0],W=B[1];m.pointsCollinear(V,H,Z)&&(b&&b.chainRemoveTail(S,H),R.pop(),H=V),m.pointsCollinear(H,Z,W)&&(b&&b.chainRemoveHead(E,Z),B.shift()),b&&b.chainJoin(S,E),v[S]=R.concat(B),v.splice(E,1)}}),e}},{}],261:[function(y,$,ee){function p(b,v,e){var n=[];return b.forEach(function(t){var a=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==v[a]&&n.push({id:e?e.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===v[a],below:2===v[a]},otherFill:null})}),e&&e.selected(n),n}$.exports={union:function(b,v){return p(b,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],v)},intersect:function(b,v){return p(b,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],v)},difference:function(b,v){return p(b,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],v)},differenceRev:function(b,v){return p(b,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],v)},xor:function(b,v){return p(b,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],v)}}},{}],262:[function(y,$,ee){"use strict";var p=y("stream").Transform,m=y("stream-parser");function b(){p.call(this,{readableObjectMode:!0})}function v(e,n,t){Error.call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=e,n&&(this.code=n),t&&(this.statusCode=t)}(b.prototype=Object.create(p.prototype)).constructor=b,m(b.prototype),ee.ParserStream=b,ee.sliceEq=function(e,n,t){for(var a=n,r=0;r<t.length;)if(e[a++]!==t[r++])return!1;return!0},ee.str2arr=function(e,n){var t=[],a=0;if(n&&"hex"===n)for(;a<e.length;)t.push(parseInt(e.slice(a,a+2),16)),a+=2;else for(;a<e.length;a++)t.push(255&e.charCodeAt(a));return t},ee.readUInt16LE=function(e,n){return e[n]|e[n+1]<<8},ee.readUInt16BE=function(e,n){return e[n+1]|e[n]<<8},ee.readUInt32LE=function(e,n){return e[n]|e[n+1]<<8|e[n+2]<<16|16777216*e[n+3]},ee.readUInt32BE=function(e,n){return e[n+3]|e[n+2]<<8|e[n+1]<<16|16777216*e[n]},(v.prototype=Object.create(Error.prototype)).constructor=v,ee.ProbeError=v},{stream:285,"stream-parser":301}],263:[function(y,$,ee){"use strict";function p(v,e){var n=new Error(v);return n.code=e,n}function m(v){try{return decodeURIComponent(escape(v))}catch(e){return v}}function b(v,e,n){this.input=v.subarray(e,n),this.start=e;var t=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==t&&"MM\0*"!==t)throw p("invalid TIFF signature","EBADDATA");this.big_endian="M"===t[0]}b.prototype.each=function(v){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var n=this.ifds_to_read.shift();n.offset&&this.scan_ifd(n.id,n.offset,v)}},b.prototype.read_uint16=function(v){var e=this.input;if(v+2>e.length)throw p("unexpected EOF","EBADDATA");return this.big_endian?256*e[v]+e[v+1]:e[v]+256*e[v+1]},b.prototype.read_uint32=function(v){var e=this.input;if(v+4>e.length)throw p("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[v]+65536*e[v+1]+256*e[v+2]+e[v+3]:e[v]+256*e[v+1]+65536*e[v+2]+16777216*e[v+3]},b.prototype.is_subifd_link=function(v,e){return 0===v&&34665===e||0===v&&34853===e||34665===v&&40965===e},b.prototype.exif_format_length=function(v){switch(v){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},b.prototype.exif_format_read=function(v,e){var n;switch(v){case 1:case 2:return this.input[e];case 6:return(n=this.input[e])|33554430*(128&n);case 3:return this.read_uint16(e);case 8:return(n=this.read_uint16(e))|131070*(32768&n);case 4:return this.read_uint32(e);case 9:return 0|this.read_uint32(e);default:return null}},b.prototype.scan_ifd=function(v,e,n){var t=this.read_uint16(e);e+=2;for(var a=0;a<t;a++){var r=this.read_uint16(e),u=this.read_uint16(e+2),s=this.read_uint32(e+4),i=this.exif_format_length(u),l=s*i,c=l<=4?e+8:this.read_uint32(e+8),f=!1;if(c+l>this.input.length)throw p("unexpected EOF","EBADDATA");for(var g=[],h=c,o=0;o<s;o++,h+=i){var x=this.exif_format_read(u,h);if(null===x){g=null;break}g.push(x)}if(Array.isArray(g)&&2===u&&(g=m(String.fromCharCode.apply(null,g)))&&"\0"===g[g.length-1]&&(g=g.slice(0,-1)),this.is_subifd_link(v,r)&&Array.isArray(g)&&Number.isInteger(g[0])&&g[0]>0&&(this.ifds_to_read.push({id:r,offset:g[0]}),f=!0),!1===n({is_big_endian:this.big_endian,ifd:v,tag:r,format:u,count:s,entry_offset:e+this.start,data_length:l,data_offset:c+this.start,value:g,is_subifd_link:f}))return void(this.aborted=!0);e+=12}0===v&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},$.exports.ExifParser=b,$.exports.get_orientation=function(v){var e=0;try{return new b(v,0,v.length).each(function(n){if(0===n.ifd&&274===n.tag&&Array.isArray(n.value))return e=n.value[0],!1}),e}catch(n){return-1}}},{}],264:[function(y,$,ee){"use strict";var p=y("./common").readUInt16BE,m=y("./common").readUInt32BE;function b(r,u){if(r.length<4+u)return null;var s=m(r,u);return r.length<s+u||s<8?null:{boxtype:String.fromCharCode.apply(null,r.slice(u+4,u+8)),data:r.slice(u+8,u+s),end:u+s}}function v(r,u){for(var s=0;;){var i=b(r,s);if(!i)break;switch(i.boxtype){case"ispe":u.sizes.push({width:m(i.data,4),height:m(i.data,8)});break;case"irot":u.transforms.push({type:"irot",value:3&i.data[0]});break;case"imir":u.transforms.push({type:"imir",value:1&i.data[0]})}s=i.end}}function e(r,u,s){for(var i=0,l=0;l<s;l++)i=256*i+(r[u+l]||0);return i}function n(r,u){for(var s=r[4]>>4&15,i=15&r[4],l=r[5]>>4&15,c=p(r,6),f=8,g=0;g<c;g++){var h=p(r,f),o=p(r,f+=2),x=e(r,f+=2,l),d=p(r,f+=l);if(f+=2,0===o&&1===d){var w=e(r,f,s),_=e(r,f+s,i);u.item_loc[h]={length:_,offset:w+x}}f+=d*(s+i)}}function t(r,u){for(var s=p(r,4),i=6,l=0;l<s;l++){var c=b(r,i);if(!c)break;if("infe"===c.boxtype){for(var f=p(c.data,4),g="",h=8;h<c.data.length&&c.data[h];h++)g+=String.fromCharCode(c.data[h]);u.item_inf[g]=f}i=c.end}}function a(r,u){for(var s=0;;){var i=b(r,s);if(!i)break;"ipco"===i.boxtype&&v(i.data,u),s=i.end}}$.exports.unbox=b,$.exports.readSizeFromMeta=function(r){var u={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(h,o){for(var x=4;;){var d=b(h,x);if(!d)break;"iprp"===d.boxtype&&a(d.data,o),"iloc"===d.boxtype&&n(d.data,o),"iinf"===d.boxtype&&t(d.data,o),x=d.end}}(r,u),u.sizes.length){var s,i,l,c=(i=(s=u.sizes).reduce(function(h,o){return h.width>o.width||h.width===o.width&&h.height>o.height?h:o}),l=s.reduce(function(h,o){return h.height>o.height||h.height===o.height&&h.width>o.width?h:o}),i.width>l.height||i.width===l.height&&i.height>l.width?i:l),f=1;u.transforms.forEach(function(h){var o={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},x={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===h.type&&(f=0===h.value?x[f]:o[f=o[f=x[f]]]),"irot"===h.type)for(var d=0;d<h.value;d++)f=o[f]});var g=null;return u.item_inf.Exif&&(g=u.item_loc[u.item_inf.Exif]),{width:c.width,height:c.height,orientation:u.transforms.length?f:null,variants:u.sizes,exif_location:g}}},$.exports.getMimeType=function(r){var u=String.fromCharCode.apply(null,r.slice(0,4)),s={};s[u]=!0;for(var i=8;i<r.length;i+=4)s[String.fromCharCode.apply(null,r.slice(i,i+4))]=!0;if(s.mif1||s.msf1||s.miaf)return"avif"===u||"avis"===u||"avio"===u?{type:"avif",mime:"image/avif"}:"heic"===u||"heix"===u?{type:"heic",mime:"image/heic"}:"hevc"===u||"hevx"===u?{type:"heic",mime:"image/heic-sequence"}:s.avif||s.avis?{type:"avif",mime:"image/avif"}:s.heic||s.heix||s.hevc||s.hevx||s.heis?s.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(y,$,ee){"use strict";var p=y("../common").str2arr,m=y("../common").sliceEq,b=y("../common").readUInt32BE,v=y("../miaf_utils"),e=y("../exif_utils"),n=p("ftyp");$.exports=function(t){if(m(t,4,n)){var a=v.unbox(t,0);if(a){var r=v.getMimeType(a.data);if(r){for(var u,s=a.end;;){var i=v.unbox(t,s);if(!i)break;if(s=i.end,"mdat"===i.boxtype)return;if("meta"===i.boxtype){u=i.data;break}}if(u){var l=v.readSizeFromMeta(u);if(l){var c={width:l.width,height:l.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(l.variants.length>1&&(c.variants=l.variants),l.orientation&&(c.orientation=l.orientation),l.exif_location&&l.exif_location.offset+l.exif_location.length<=t.length){var f=b(t,l.exif_location.offset),g=t.slice(l.exif_location.offset+f+4,l.exif_location.offset+l.exif_location.length),h=e.get_orientation(g);h>0&&(c.orientation=h)}return c}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(y,$,ee){"use strict";var p=y("../common").str2arr,m=y("../common").sliceEq,b=y("../common").readUInt16LE,v=p("BM");$.exports=function(e){if(!(e.length<26)&&m(e,0,v))return{width:b(e,18),height:b(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(y,$,ee){"use strict";var p=y("../common").str2arr,m=y("../common").sliceEq,b=y("../common").readUInt16LE,v=p("GIF87a"),e=p("GIF89a");$.exports=function(n){if(!(n.length<10)&&(m(n,0,v)||m(n,0,e)))return{width:b(n,6),height:b(n,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(y,$,ee){"use strict";var p=y("../common").readUInt16LE;$.exports=function(m){var b=p(m,0),v=p(m,2),e=p(m,4);if(0===b&&1===v&&e){for(var n=[],t={width:0,height:0},a=0;a<e;a++){var r=m[6+16*a]||256,u=m[6+16*a+1]||256,s={width:r,height:u};n.push(s),(r>t.width||u>t.height)&&(t=s)}return{width:t.width,height:t.height,variants:n,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(y,$,ee){"use strict";var p=y("../common").readUInt16BE,m=y("../common").str2arr,b=y("../common").sliceEq,v=y("../exif_utils"),e=m("Exif\0\0");$.exports=function(n){if(!(n.length<2)&&255===n[0]&&216===n[1]&&255===n[2])for(var t=2;;){for(;;){if(n.length-t<2)return;if(255===n[t++])break}for(var a,r,u=n[t++];255===u;)u=n[t++];if(208<=u&&u<=217||1===u)a=0;else{if(!(192<=u&&u<=254)||n.length-t<2)return;a=p(n,t)-2,t+=2}if(217===u||218===u)return;if(225===u&&a>=10&&b(n,t,e)&&(r=v.get_orientation(n.slice(t+6,t+a))),a>=5&&192<=u&&u<=207&&196!==u&&200!==u&&204!==u){if(n.length-t<a)return;var s={width:p(n,t+3),height:p(n,t+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return r>0&&(s.orientation=r),s}t+=a}}},{"../common":262,"../exif_utils":263}],270:[function(y,$,ee){"use strict";var p=y("../common").str2arr,m=y("../common").sliceEq,b=y("../common").readUInt32BE,v=p("\x89PNG\r\n\x1a\n"),e=p("IHDR");$.exports=function(n){if(!(n.length<24)&&m(n,0,v)&&m(n,12,e))return{width:b(n,16),height:b(n,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(y,$,ee){"use strict";var p=y("../common").str2arr,m=y("../common").sliceEq,b=y("../common").readUInt32BE,v=p("8BPS\0\x01");$.exports=function(e){if(!(e.length<22)&&m(e,0,v))return{width:b(e,18),height:b(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(y,$,ee){"use strict";function p(r){return"number"==typeof r&&isFinite(r)&&r>0}var m=/<[-_.:a-zA-Z0-9][^>]*>/,b=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,v=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,n=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,t=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function a(r){return t.test(r)?r.match(t)[0]:"px"}$.exports=function(r){if(function(w){var _,T=0,k=w.length;for(239===w[0]&&187===w[1]&&191===w[2]&&(T=3);T<k&&(32===(_=w[T])||9===_||13===_||10===_);)T++;return T!==k&&60===w[T]}(r)){for(var u="",s=0;s<r.length;s++)u+=String.fromCharCode(r[s]);var i=(u.match(m)||[""])[0];if(b.test(i)){var l=(_=(w=i).match(v),T=w.match(e),k=w.match(n),{width:_&&(_[1]||_[2]),height:T&&(T[1]||T[2]),viewbox:k&&(k[1]||k[2])}),c=parseFloat(l.width),f=parseFloat(l.height);if(l.width&&l.height)return p(c)&&p(f)?{width:c,height:f,type:"svg",mime:"image/svg+xml",wUnits:a(l.width),hUnits:a(l.height)}:void 0;var g=(l.viewbox||"").split(" "),h={width:g[2],height:g[3]},o=parseFloat(h.width),x=parseFloat(h.height);if(p(o)&&p(x)&&a(h.width)===a(h.height)){var d=o/x;return l.width?p(c)?{width:c,height:c/d,type:"svg",mime:"image/svg+xml",wUnits:a(l.width),hUnits:a(l.width)}:void 0:l.height?p(f)?{width:f*d,height:f,type:"svg",mime:"image/svg+xml",wUnits:a(l.height),hUnits:a(l.height)}:void 0:{width:o,height:x,type:"svg",mime:"image/svg+xml",wUnits:a(h.width),hUnits:a(h.height)}}}}var w,_,T,k}},{}],273:[function(y,$,ee){"use strict";var p=y("../common").str2arr,m=y("../common").sliceEq,b=y("../common").readUInt16LE,v=y("../common").readUInt16BE,e=y("../common").readUInt32LE,n=y("../common").readUInt32BE,t=p("II*\0"),a=p("MM\0*");function r(i,l,c){return c?v(i,l):b(i,l)}function u(i,l,c){return c?n(i,l):e(i,l)}function s(i,l,c){var f=r(i,l+2,c);return 1!==u(i,l+4,c)||3!==f&&4!==f?null:3===f?r(i,l+8,c):u(i,l+8,c)}$.exports=function(i){if(!(i.length<8)&&(m(i,0,t)||m(i,0,a))){var l=77===i[0],c=u(i,4,l)-8;if(!(c<0)){var f=c+8;if(!(i.length-f<2)){var g=12*r(i,f+0,l);if(!(g<=0||(f+=2,i.length-f<g))){var h,o,x,d;for(h=0;h<g;h+=12)256===(d=r(i,f+h,l))?o=s(i,f+h,l):257===d&&(x=s(i,f+h,l));return o&&x?{width:o,height:x,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":262}],274:[function(y,$,ee){"use strict";var p=y("../common").str2arr,m=y("../common").sliceEq,b=y("../common").readUInt16LE,v=y("../common").readUInt32LE,e=y("../exif_utils"),n=p("RIFF"),t=p("WEBP");function a(s,i){if(157===s[i+3]&&1===s[i+4]&&42===s[i+5])return{width:16383&b(s,i+6),height:16383&b(s,i+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(s,i){if(47===s[i]){var l=v(s,i+1);return{width:1+(16383&l),height:1+(l>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function u(s,i){return{width:1+(s[i+6]<<16|s[i+5]<<8|s[i+4]),height:1+(s[i+9]<<i|s[i+8]<<8|s[i+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}$.exports=function(s){if(!(s.length<16)&&(m(s,0,n)||m(s,8,t))){var i=12,l=null,c=0,f=v(s,4)+8;if(!(f>s.length)){for(;i+8<f;)if(0!==s[i]){var g=String.fromCharCode.apply(null,s.slice(i,i+4)),h=v(s,i+4);"VP8 "===g&&h>=10?l=l||a(s,i+8):"VP8L"===g&&h>=9?l=l||r(s,i+8):"VP8X"===g&&h>=10?l=l||u(s,i+8):"EXIF"===g&&(c=e.get_orientation(s.slice(i+8,i+8+h)),i=1/0),i+=8+h}else i++;if(l)return c>0&&(l.orientation=c),l}}}},{"../common":262,"../exif_utils":263}],275:[function(y,$,ee){"use strict";$.exports={avif:y("./parse_sync/avif"),bmp:y("./parse_sync/bmp"),gif:y("./parse_sync/gif"),ico:y("./parse_sync/ico"),jpeg:y("./parse_sync/jpeg"),png:y("./parse_sync/png"),psd:y("./parse_sync/psd"),svg:y("./parse_sync/svg"),tiff:y("./parse_sync/tiff"),webp:y("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(y,$,ee){"use strict";var p=y("./lib/parsers_sync");$.exports=function(m){return function(b){for(var v=Object.keys(p),e=0;e<v.length;e++){var n=p[v[e]](b);if(n)return n}return null}(m)},$.exports.parsers=p},{"./lib/parsers_sync":275}],277:[function(y,$,ee){var p,m,b=$.exports={};function v(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function n(f){if(p===setTimeout)return setTimeout(f,0);if((p===v||!p)&&setTimeout)return p=setTimeout,setTimeout(f,0);try{return p(f,0)}catch(g){try{return p.call(null,f,0)}catch(h){return p.call(this,f,0)}}}!function(){try{p="function"==typeof setTimeout?setTimeout:v}catch(f){p=v}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(f){m=e}}();var t,a=[],r=!1,u=-1;function s(){r&&t&&(r=!1,t.length?a=t.concat(a):u=-1,a.length&&i())}function i(){if(!r){var f=n(s);r=!0;for(var g=a.length;g;){for(t=a,a=[];++u<g;)t&&t[u].run();u=-1,g=a.length}t=null,r=!1,function(h){if(m===clearTimeout)return clearTimeout(h);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(h);try{m(h)}catch(o){try{return m.call(null,h)}catch(x){return m.call(this,h)}}}(f)}}function l(f,g){this.fun=f,this.array=g}function c(){}b.nextTick=function(f){var g=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)g[h-1]=arguments[h];a.push(new l(f,g)),1!==a.length||r||n(i)},l.prototype.run=function(){this.fun.apply(null,this.array)},b.title="browser",b.browser=!0,b.env={},b.argv=[],b.version="",b.versions={},b.on=c,b.addListener=c,b.once=c,b.off=c,b.removeListener=c,b.removeAllListeners=c,b.emit=c,b.prependListener=c,b.prependOnceListener=c,b.listeners=function(f){return[]},b.binding=function(f){throw new Error("process.binding is not supported")},b.cwd=function(){return"/"},b.chdir=function(f){throw new Error("process.chdir is not supported")},b.umask=function(){return 0}},{}],278:[function(y,$,ee){(function(p){(function(){for(var m=y("performance-now"),b="undefined"==typeof window?p:window,v=["moz","webkit"],e="AnimationFrame",n=b["request"+e],t=b["cancel"+e]||b["cancelRequest"+e],a=0;!n&&a<v.length;a++)n=b[v[a]+"Request"+e],t=b[v[a]+"Cancel"+e]||b[v[a]+"CancelRequest"+e];if(!n||!t){var r=0,u=0,s=[];n=function(i){if(0===s.length){var l=m(),c=Math.max(0,1e3/60-(l-r));r=c+l,setTimeout(function(){var f=s.slice(0);s.length=0;for(var g=0;g<f.length;g++)if(!f[g].cancelled)try{f[g].callback(r)}catch(h){setTimeout(function(){throw h},0)}},Math.round(c))}return s.push({handle:++u,callback:i,cancelled:!1}),u},t=function(i){for(var l=0;l<s.length;l++)s[l].handle===i&&(s[l].cancelled=!0)}}$.exports=function(i){return n.call(b,i)},$.exports.cancel=function(){t.apply(b,arguments)},$.exports.polyfill=function(i){i||(i=b),i.requestAnimationFrame=n,i.cancelAnimationFrame=t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":252}],279:[function(y,$,ee){"use strict";var p=y("array-bounds"),m=y("color-normalize"),b=y("update-diff"),v=y("pick-by-alias"),e=y("object-assign"),n=y("flatten-vertex-data"),t=y("to-float32"),a=t.float32,r=t.fract32;$.exports=function(s,i){if("function"==typeof s?(i||(i={}),i.regl=s):i=s,i.length&&(i.positions=i),!(s=i.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var l,c,f,g,h,o,x=s._gl,d={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},w=[];return g=s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),f=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),h=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),o=s.buffer({usage:"static",type:"float",data:u}),L(i),l=s({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:s.prop("range"),lineWidth:s.prop("lineWidth"),capSize:s.prop("capSize"),opacity:s.prop("opacity"),scale:s.prop("scale"),translate:s.prop("translate"),scaleFract:s.prop("scaleFract"),translateFract:s.prop("translateFract"),viewport:function(O,P){return[P.viewport.x,P.viewport.y,O.viewportWidth,O.viewportHeight]}},attributes:{color:{buffer:g,offset:function(O,P){return 4*P.offset},divisor:1},position:{buffer:c,offset:function(O,P){return 8*P.offset},divisor:1},positionFract:{buffer:f,offset:function(O,P){return 8*P.offset},divisor:1},error:{buffer:h,offset:function(O,P){return 16*P.offset},divisor:1},direction:{buffer:o,stride:24,offset:0},lineOffset:{buffer:o,stride:24,offset:8},capOffset:{buffer:o,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:!1,instances:s.prop("count"),count:u.length}),e(_,{update:L,draw:T,destroy:M,regl:s,gl:x,canvas:x.canvas,groups:w}),_;function _(O){O?L(O):null===O&&M(),T()}function T(O){if("number"==typeof O)return k(O);O&&!Array.isArray(O)&&(O=[O]),s._refresh(),w.forEach(function(P,S){P&&(O&&(P.draw=!!O[S]),P.draw?k(S):P.draw=!0)})}function k(O){"number"==typeof O&&(O=w[O]),null!=O&&O&&O.count&&O.color&&O.opacity&&O.positions&&O.positions.length>1&&(O.scaleRatio=[O.scale[0]*O.viewport.width,O.scale[1]*O.viewport.height],l(O),O.after&&O.after(O))}function L(O){if(O){null!=O.length?"number"==typeof O[0]&&(O=[{positions:O}]):Array.isArray(O)||(O=[O]);var P=0,S=0;if(_.groups=w=O.map(function(W,G){var X=w[G];return W&&("function"==typeof W?W={after:W}:"number"==typeof W[0]&&(W={positions:W}),W=v(W,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),X||(w[G]=X={id:G,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},W=e({},d,W)),b(X,W,[{lineWidth:function(te){return.5*+te},capSize:function(te){return.5*+te},opacity:parseFloat,errors:function(te){return te=n(te),S+=te.length,te},positions:function(te,D){return te=n(te,"float64"),D.count=Math.floor(te.length/2),D.bounds=p(te,2),D.offset=P,P+=D.count,te}},{color:function(te,D){var N=D.count;if(te||(te="transparent"),!Array.isArray(te)||"number"==typeof te[0]){var U=te;te=Array(N);for(var Q=0;Q<N;Q++)te[Q]=U}if(te.length<N)throw Error("Not enough colors");for(var j=new Uint8Array(4*N),J=0;J<N;J++){var K=m(te[J],"uint8");j.set(K,4*J)}return j},range:function(te,D,N){return te||(te=D.bounds),D.scale=[1/(te[2]-te[0]),1/(te[3]-te[1])],D.translate=[-te[0],-te[1]],D.scaleFract=r(D.scale),D.translateFract=r(D.translate),te},viewport:function(te){var D;return Array.isArray(te)?D={x:te[0],y:te[1],width:te[2]-te[0],height:te[3]-te[1]}:te?((D={x:te.x||te.left||0,y:te.y||te.top||0}).width=te.right?te.right-D.x:te.w||te.width||0,D.height=te.bottom?te.bottom-D.y:te.h||te.height||0):D={x:0,y:0,width:x.drawingBufferWidth,height:x.drawingBufferHeight},D}}])),X}),P||S){var E=w.reduce(function(W,G,X){return W+(G?G.count:0)},0),R=new Float64Array(2*E),B=new Uint8Array(4*E),H=new Float32Array(4*E);w.forEach(function(W,G){if(W){var X=W.positions,D=W.offset,U=W.errors;W.count&&(B.set(W.color,4*D),H.set(U,4*D),R.set(X,2*D))}});var V=a(R);c(V);var Z=r(R,V);f(Z),g(B),h(H)}}}function M(){c.destroy(),f.destroy(),g.destroy(),h.destroy(),o.destroy()}};var u=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(y,$,ee){"use strict";var p=y("color-normalize"),m=y("array-bounds"),b=y("object-assign"),v=y("glslify"),e=y("pick-by-alias"),n=y("flatten-vertex-data"),t=y("earcut"),a=y("array-normalize"),r=y("to-float32"),u=r.float32,s=r.fract32,i=y("es6-weak-map"),l=y("parse-rect"),c=y("array-find-index");function f(g,h){if(!(this instanceof f))return new f(g,h);if("function"==typeof g?(h||(h={}),h.regl=g):h=g,h.length&&(h.positions=h),!(g=h.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=g._gl,this.regl=g,this.passes=[],this.shaders=f.shaders.has(g)?f.shaders.get(g):f.shaders.set(g,f.createShaders(g)).get(g),this.update(h)}$.exports=f,f.dashMult=2,f.maxPatternLength=256,f.precisionThreshold=3e6,f.maxPoints=1e4,f.maxLines=2048,f.shaders=new i,f.createShaders=function(g){var h,o=g.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),x={primitive:"triangle strip",instances:g.prop("count"),count:4,offset:0,uniforms:{miterMode:function(w,_){return"round"===_.join?2:1},miterLimit:g.prop("miterLimit"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translateFract:g.prop("translateFract"),translate:g.prop("translate"),thickness:g.prop("thickness"),dashTexture:g.prop("dashTexture"),opacity:g.prop("opacity"),pixelRatio:g.context("pixelRatio"),id:g.prop("id"),dashLength:g.prop("dashLength"),viewport:function(w,_){return[_.viewport.x,_.viewport.y,w.viewportWidth,w.viewportHeight]},depth:g.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(w,_){return!_.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport")},d=g(b({vert:v(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:v(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:o,divisor:0,stride:8,offset:0},lineTop:{buffer:o,divisor:0,stride:8,offset:4},aCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:g.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},x));try{h=g(b({cull:{enable:!0,face:"back"},vert:v(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:v(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:o,divisor:0,stride:8,offset:0},lineTop:{buffer:o,divisor:0,stride:8,offset:4},aColor:{buffer:g.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:g.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},x))}catch(w){h=d}return{fill:g({primitive:"triangle",elements:function(w,_){return _.triangles},offset:0,vert:v(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:v(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:g.prop("scale"),color:g.prop("fill"),scaleFract:g.prop("scaleFract"),translateFract:g.prop("translateFract"),translate:g.prop("translate"),opacity:g.prop("opacity"),pixelRatio:g.context("pixelRatio"),id:g.prop("id"),viewport:function(w,_){return[_.viewport.x,_.viewport.y,w.viewportWidth,w.viewportHeight]}},attributes:{position:{buffer:g.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:8}},blend:x.blend,depth:{enable:!1},scissor:x.scissor,stencil:x.stencil,viewport:x.viewport}),rect:d,miter:h}},f.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},f.prototype.render=function(){for(var g,h=[],o=arguments.length;o--;)h[o]=arguments[o];h.length&&(g=this).update.apply(g,h),this.draw()},f.prototype.draw=function(){for(var g=this,h=[],o=arguments.length;o--;)h[o]=arguments[o];return(h.length?h:this.passes).forEach(function(x,d){var w;if(x&&Array.isArray(x))return(w=g).draw.apply(w,x);"number"==typeof x&&(x=g.passes[x]),x&&x.count>1&&x.opacity&&(g.regl._refresh(),x.fill&&x.triangles&&x.triangles.length>2&&g.shaders.fill(x),x.thickness&&(x.scale[0]*x.viewport.width>f.precisionThreshold||x.scale[1]*x.viewport.height>f.precisionThreshold||"rect"===x.join||!x.join&&(x.thickness<=2||x.count>=f.maxPoints)?g.shaders.rect(x):g.shaders.miter(x)))}),this},f.prototype.update=function(g){var h=this;if(g){null!=g.length?"number"==typeof g[0]&&(g=[{positions:g}]):Array.isArray(g)||(g=[g]);var o=this.regl,x=this.gl;if(g.forEach(function(k,L){var M=h.passes[L];if(void 0!==k)if(null!==k){if("number"==typeof k[0]&&(k={positions:k}),k=e(k,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),M||(h.passes[L]=M={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:o.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:o.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},k=b({},f.defaults,k)),null!=k.thickness&&(M.thickness=parseFloat(k.thickness)),null!=k.opacity&&(M.opacity=parseFloat(k.opacity)),null!=k.miterLimit&&(M.miterLimit=parseFloat(k.miterLimit)),null!=k.overlay&&(M.overlay=!!k.overlay,L<f.maxLines&&(M.depth=2*(f.maxLines-1-L%f.maxLines)/f.maxLines-1)),null!=k.join&&(M.join=k.join),null!=k.hole&&(M.hole=k.hole),null!=k.fill&&(M.fill=k.fill?p(k.fill,"uint8"):null),null!=k.viewport&&(M.viewport=l(k.viewport)),M.viewport||(M.viewport=l([x.drawingBufferWidth,x.drawingBufferHeight])),null!=k.close&&(M.close=k.close),null===k.positions&&(k.positions=[]),k.positions){var O,P;if(k.positions.x&&k.positions.y){var S=k.positions.x,E=k.positions.y;P=M.count=Math.max(S.length,E.length),O=new Float64Array(2*P);for(var R=0;R<P;R++)O[2*R]=S[R],O[2*R+1]=E[R]}else O=n(k.positions,"float64"),P=M.count=Math.floor(O.length/2);var B=M.bounds=m(O,2);if(M.fill){for(var H=[],V={},Z=0,W=0,G=0,X=M.count;W<X;W++){var te=O[2*W],D=O[2*W+1];isNaN(te)||isNaN(D)||null==te||null==D?(te=O[2*Z],D=O[2*Z+1],V[W]=Z):Z=W,H[G++]=te,H[G++]=D}if(k.splitNull){M.count-1 in V||(V[M.count]=M.count-1);var N=Object.keys(V).map(Number).sort(function(bt,Rt){return bt-Rt}),U=[],Q=0,j=null!=M.hole?M.hole[0]:null;if(null!=j){var J=c(N,function(bt){return bt>=j});(N=N.slice(0,J)).push(j)}for(var K=function(bt){var Rt=H.slice(2*Q,2*N[bt]).concat(j?H.slice(2*j):[]),Yt=(M.hole||[]).map(function(He){return He-j+(N[bt]-Q)}),Fe=t(Rt,Yt);Fe=Fe.map(function(He){return He+Q+(He+Q<N[bt]?0:j-N[bt])}),U.push.apply(U,Fe),Q=N[bt]+1},re=0;re<N.length;re++)K(re);for(var ne=0,se=U.length;ne<se;ne++)null!=V[U[ne]]&&(U[ne]=V[U[ne]]);M.triangles=U}else{for(var oe=t(H,M.hole||[]),pe=0,ce=oe.length;pe<ce;pe++)null!=V[oe[pe]]&&(oe[pe]=V[oe[pe]]);M.triangles=oe}}var ge=new Float64Array(O);a(ge,2,B);var xe=new Float64Array(2*P+6);M.close?O[0]===O[2*P-2]&&O[1]===O[2*P-1]?(xe[0]=ge[2*P-4],xe[1]=ge[2*P-3]):(xe[0]=ge[2*P-2],xe[1]=ge[2*P-1]):(xe[0]=ge[0],xe[1]=ge[1]),xe.set(ge,2),M.close?O[0]===O[2*P-2]&&O[1]===O[2*P-1]?(xe[2*P+2]=ge[2],xe[2*P+3]=ge[3],M.count-=1):(xe[2*P+2]=ge[0],xe[2*P+3]=ge[1],xe[2*P+4]=ge[2],xe[2*P+5]=ge[3]):(xe[2*P+2]=ge[2*P-2],xe[2*P+3]=ge[2*P-1],xe[2*P+4]=ge[2*P-2],xe[2*P+5]=ge[2*P-1]);var we=u(xe);M.positionBuffer(we);var be=s(xe,we);M.positionFractBuffer(be)}if(k.range?M.range=k.range:M.range||(M.range=M.bounds),(k.range||k.positions)&&M.count){var Se=M.bounds,Te=M.range[2]-M.range[0],_e=M.range[3]-M.range[1];M.scale=[(Se[2]-Se[0])/Te,(Se[3]-Se[1])/_e],M.translate=[-M.range[0]/Te+Se[0]/Te||0,-M.range[1]/_e+Se[1]/_e||0],M.scaleFract=s(M.scale),M.translateFract=s(M.translate)}if(k.dashes){var Me,Ie=0;if(!k.dashes||k.dashes.length<2)Ie=1,Me=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ie=0;for(var ze=0;ze<k.dashes.length;++ze)Ie+=k.dashes[ze];Me=new Uint8Array(Ie*f.dashMult);for(var Ve=0,Je=255,De=0;De<2;De++)for(var Be=0;Be<k.dashes.length;++Be){for(var Ze=0,Ye=k.dashes[Be]*f.dashMult*.5;Ze<Ye;++Ze)Me[Ve++]=Je;Je^=255}}M.dashLength=Ie,M.dashTexture({channels:1,data:Me,width:Me.length,height:1,mag:"linear",min:"linear"},0,0)}if(k.color){var tt=M.count,st=k.color;st||(st="transparent");var vt=new Uint8Array(4*tt+4);if(Array.isArray(st)&&"number"!=typeof st[0]){for(var Pt=0;Pt<tt;Pt++){var Mt=p(st[Pt],"uint8");vt.set(Mt,4*Pt)}vt.set(p(st[0],"uint8"),4*tt)}else for(var rt=p(st,"uint8"),et=0;et<tt+1;et++)vt.set(rt,4*et);M.colorBuffer({usage:"dynamic",type:"uint8",data:vt})}}else h.passes[L]=null}),g.length<this.passes.length){for(var d=g.length;d<this.passes.length;d++){var w=this.passes[d];w&&(w.colorBuffer.destroy(),w.positionBuffer.destroy(),w.dashTexture.destroy())}this.passes.length=g.length}for(var _=[],T=0;T<this.passes.length;T++)null!==this.passes[T]&&_.push(this.passes[T]);return this.passes=_,this}},f.prototype.destroy=function(){return this.passes.forEach(function(g){g.colorBuffer.destroy(),g.positionBuffer.destroy(),g.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(y,$,ee){"use strict";function p(d,w){return function(_){if(Array.isArray(_))return _}(d)||function(_,T){var k=null==_?null:"undefined"!=typeof Symbol&&_[Symbol.iterator]||_["@@iterator"];if(null!=k){var L,M,O=[],P=!0,S=!1;try{for(k=k.call(_);!(P=(L=k.next()).done)&&(O.push(L.value),!T||O.length!==T);P=!0);}catch(E){S=!0,M=E}finally{try{P||null==k.return||k.return()}finally{if(S)throw M}}return O}}(d,w)||b(d,w)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(d){return function(w){if(Array.isArray(w))return v(w)}(d)||function(w){if("undefined"!=typeof Symbol&&null!=w[Symbol.iterator]||null!=w["@@iterator"])return Array.from(w)}(d)||b(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(d,w){if(d){if("string"==typeof d)return v(d,w);var _=Object.prototype.toString.call(d).slice(8,-1);return"Object"===_&&d.constructor&&(_=d.constructor.name),"Map"===_||"Set"===_?Array.from(d):"Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_)?v(d,w):void 0}}function v(d,w){(null==w||w>d.length)&&(w=d.length);for(var _=0,T=new Array(w);_<w;_++)T[_]=d[_];return T}var e=y("color-normalize"),n=y("array-bounds"),t=y("color-id"),a=y("@plotly/point-cluster"),r=y("object-assign"),u=y("glslify"),s=y("pick-by-alias"),i=y("update-diff"),l=y("flatten-vertex-data"),c=y("is-iexplorer"),f=y("to-float32"),g=y("parse-rect"),h=o;function o(d,w){var _=this;if(!(this instanceof o))return new o(d,w);"function"==typeof d?(w||(w={}),w.regl=d):(w=d,d=null),w&&w.length&&(w.positions=w);var T,k=(d=w.regl)._gl,L=[];this.tooManyColors=c,T=d.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),r(this,{regl:d,gl:k,groups:[],markerCache:[null],markerTextures:[null],palette:L,paletteIds:{},paletteTexture:T,maxColors:255,maxSize:100,canvas:k.canvas}),this.update(w);var M={uniforms:{constPointSize:!!w.constPointSize,opacity:d.prop("opacity"),paletteSize:function(S,E){return[_.tooManyColors?0:255,T.height]},pixelRatio:d.context("pixelRatio"),scale:d.prop("scale"),scaleFract:d.prop("scaleFract"),translate:d.prop("translate"),translateFract:d.prop("translateFract"),markerTexture:d.prop("markerTexture"),paletteTexture:T},attributes:{x:function(S,E){return E.xAttr||{buffer:E.positionBuffer,stride:8,offset:0}},y:function(S,E){return E.yAttr||{buffer:E.positionBuffer,stride:8,offset:4}},xFract:function(S,E){return E.xAttr?{constant:[0,0]}:{buffer:E.positionFractBuffer,stride:8,offset:0}},yFract:function(S,E){return E.yAttr?{constant:[0,0]}:{buffer:E.positionFractBuffer,stride:8,offset:4}},size:function(S,E){return E.size.length?{buffer:E.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*E.size/_.maxSize)]}},borderSize:function(S,E){return E.borderSize.length?{buffer:E.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*E.borderSize/_.maxSize)]}},colorId:function(S,E){return E.color.length?{buffer:E.colorBuffer,stride:_.tooManyColors?8:4,offset:0}:{constant:_.tooManyColors?L.slice(4*E.color,4*E.color+4):[E.color]}},borderColorId:function(S,E){return E.borderColor.length?{buffer:E.colorBuffer,stride:_.tooManyColors?8:4,offset:_.tooManyColors?4:2}:{constant:_.tooManyColors?L.slice(4*E.borderColor,4*E.borderColor+4):[E.borderColor]}},isActive:function(S,E){return!0===E.activation?{constant:[1]}:E.activation?E.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:d.prop("viewport")},viewport:d.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:d.prop("elements"),count:d.prop("count"),offset:d.prop("offset"),primitive:"points"},O=r({},M);O.frag=u(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),O.vert=u(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=d(O);var P=r({},M);P.frag=u(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),P.vert=u(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),c&&(P.frag=P.frag.replace("smoothstep","smoothStep"),O.frag=O.frag.replace("smoothstep","smoothStep")),this.drawCircle=d(P)}o.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},o.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},o.prototype.draw=function(){for(var d=this,w=arguments.length,_=new Array(w),T=0;T<w;T++)_[T]=arguments[T];var k=this.groups;if(1===_.length&&Array.isArray(_[0])&&(null===_[0][0]||Array.isArray(_[0][0]))&&(_=_[0]),this.regl._refresh(),_.length)for(var L=0;L<_.length;L++)this.drawItem(L,_[L]);else k.forEach(function(M,O){d.drawItem(O)});return this},o.prototype.drawItem=function(d,w){var _=this.groups,T=_[d];if("number"==typeof w&&(d=w,T=_[w],w=null),T&&T.count&&T.opacity){T.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,T,w));for(var k=[],L=1;L<T.activation.length;L++)T.activation[L]&&(!0===T.activation[L]||T.activation[L].data.length)&&k.push.apply(k,m(this.getMarkerDrawOptions(L,T,w)));k.length&&this.drawMarker(k)}},o.prototype.getMarkerDrawOptions=function(d,w,_){var T=w.range,k=w.tree,L=w.viewport,M=w.activation,O=w.selectionBuffer,P=w.count;if(!k)return _?[r({},w,{markerTexture:this.markerTextures[d],activation:M[d],count:_.length,elements:_,offset:0})]:[r({},w,{markerTexture:this.markerTextures[d],activation:M[d],offset:0})];var S=[],E=k.range(T,{lod:!0,px:[(T[2]-T[0])/L.width,(T[3]-T[1])/L.height]});if(_){for(var R=M[d].data,B=new Uint8Array(P),H=0;H<_.length;H++){var V=_[H];B[V]=R?R[V]:1}O.subdata(B)}for(var Z=E.length;Z--;){var W=p(E[Z],2),G=W[0];S.push(r({},w,{markerTexture:this.markerTextures[d],activation:_?O:M[d],offset:G,count:W[1]-G}))}return S},o.prototype.update=function(){for(var d=this,w=arguments.length,_=new Array(w),T=0;T<w;T++)_[T]=arguments[T];if(_.length){1===_.length&&Array.isArray(_[0])&&(_=_[0]);var k=this.groups,L=this.gl,M=this.regl,O=this.maxSize,P=this.maxColors,S=this.palette;this.groups=k=_.map(function(E,R){var B=k[R];if(void 0===E)return B;null===E?E={positions:null}:"function"==typeof E?E={ondraw:E}:"number"==typeof E[0]&&(E={positions:E}),null===(E=s(E,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(E.positions=[]),null!=E.tooManyColors&&(d.tooManyColors=E.tooManyColors),B||(k[R]=B={id:R,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:M.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:M.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},E=r({},o.defaults,E)),E.positions&&!("marker"in E)&&(E.marker=B.marker,delete B.marker),E.marker&&!("positions"in E)&&(E.positions=B.positions,delete B.positions);var H=0,V=0;if(i(B,E,[{snap:!0,size:function(ce,ge){return null==ce&&(ce=o.defaults.size),H+=ce&&ce.length?1:0,ce},borderSize:function(ce,ge){return null==ce&&(ce=o.defaults.borderSize),H+=ce&&ce.length?1:0,ce},opacity:parseFloat,color:function(ce,ge){return null==ce&&(ce=o.defaults.color),ce=d.updateColor(ce),V++,ce},borderColor:function(ce,ge){return null==ce&&(ce=o.defaults.borderColor),ce=d.updateColor(ce),V++,ce},bounds:function(ce,ge,xe){return"range"in xe||(xe.range=null),ce},positions:function(ce,ge,xe){var we=ge.snap,be=ge.positionBuffer,Se=ge.positionFractBuffer,fe=ge.selectionBuffer;if(ce.x||ce.y)return ge.xAttr=ce.x.length?{buffer:M.buffer(ce.x),offset:0,stride:4,count:ce.x.length}:{buffer:ce.x.buffer,offset:4*ce.x.offset||0,stride:4*(ce.x.stride||1),count:ce.x.count},ge.yAttr=ce.y.length?{buffer:M.buffer(ce.y),offset:0,stride:4,count:ce.y.length}:{buffer:ce.y.buffer,offset:4*ce.y.offset||0,stride:4*(ce.y.stride||1),count:ce.y.count},ge.count=Math.max(ge.xAttr.count,ge.yAttr.count),ce;ce=l(ce,"float64");var me=ge.count=Math.floor(ce.length/2),Te=ge.bounds=me?n(ce,2):null;if(xe.range||ge.range||(delete ge.range,xe.range=Te),xe.marker||ge.marker||(delete ge.marker,xe.marker=null),we&&(!0===we||me>we)?ge.tree=a(ce,{bounds:Te}):we&&we.length&&(ge.tree=we),ge.tree){var _e={primitive:"points",usage:"static",data:ge.tree,type:"uint32"};ge.elements?ge.elements(_e):ge.elements=M.elements(_e)}var Me=f.float32(ce);return be({data:Me,usage:"dynamic"}),Se({data:f.fract32(ce,Me),usage:"dynamic"}),fe({data:new Uint8Array(me),type:"uint8",usage:"stream"}),ce}},{marker:function(ce,ge,xe){var we=ge.activation;if(we.forEach(function(Me){return Me&&Me.destroy&&Me.destroy()}),we.length=0,ce&&"number"!=typeof ce[0]){for(var be=[],Se=0,fe=Math.min(ce.length,ge.count);Se<fe;Se++){var me=d.addMarker(ce[Se]);be[me]||(be[me]=new Uint8Array(ge.count)),be[me][Se]=1}for(var Te=0;Te<be.length;Te++)if(be[Te]){var _e={data:be[Te],type:"uint8",usage:"static"};we[Te]?we[Te](_e):we[Te]=M.buffer(_e),we[Te].data=be[Te]}}else we[d.addMarker(ce)]=!0;return ce},range:function(ce,ge,xe){var we=ge.bounds;if(we)return ce||(ce=we),ge.scale=[1/(ce[2]-ce[0]),1/(ce[3]-ce[1])],ge.translate=[-ce[0],-ce[1]],ge.scaleFract=f.fract(ge.scale),ge.translateFract=f.fract(ge.translate),ce},viewport:function(ce){return g(ce||[L.drawingBufferWidth,L.drawingBufferHeight])}}]),H){var W=B.count,G=B.size,X=B.borderSize,te=B.sizeBuffer,D=new Uint8Array(2*W);if(G.length||X.length)for(var N=0;N<W;N++)D[2*N]=Math.round(255*(null==G[N]?G:G[N])/O),D[2*N+1]=Math.round(255*(null==X[N]?X:X[N])/O);te({data:D,usage:"dynamic"})}if(V){var U,j=B.count,J=B.color,K=B.borderColor,re=B.colorBuffer;if(d.tooManyColors){if(J.length||K.length){U=new Uint8Array(8*j);for(var ne=0;ne<j;ne++){var se=J[ne];U[8*ne]=S[4*se],U[8*ne+1]=S[4*se+1],U[8*ne+2]=S[4*se+2],U[8*ne+3]=S[4*se+3];var oe=K[ne];U[8*ne+4]=S[4*oe],U[8*ne+5]=S[4*oe+1],U[8*ne+6]=S[4*oe+2],U[8*ne+7]=S[4*oe+3]}}}else if(J.length||K.length){U=new Uint8Array(4*j+2);for(var pe=0;pe<j;pe++)null!=J[pe]&&(U[4*pe]=J[pe]%P,U[4*pe+1]=Math.floor(J[pe]/P)),null!=K[pe]&&(U[4*pe+2]=K[pe]%P,U[4*pe+3]=Math.floor(K[pe]/P))}re({data:U||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return B})}},o.prototype.addMarker=function(d){var w,_=this.markerTextures,T=this.regl,k=this.markerCache,L=null==d?0:k.indexOf(d);if(L>=0)return L;if(d instanceof Uint8Array||d instanceof Uint8ClampedArray)w=d;else{w=new Uint8Array(d.length);for(var M=0,O=d.length;M<O;M++)w[M]=255*d[M]}var P=Math.floor(Math.sqrt(w.length));return L=_.length,k.push(d),_.push(T.texture({channels:1,data:w,radius:P,mag:"linear",min:"linear"})),L},o.prototype.updateColor=function(d){var w=this.paletteIds,_=this.palette,T=this.maxColors;Array.isArray(d)||(d=[d]);var k=[];if("number"==typeof d[0]){var L=[];if(Array.isArray(d))for(var M=0;M<d.length;M+=4)L.push(d.slice(M,M+4));else for(var O=0;O<d.length;O+=4)L.push(d.subarray(O,O+4));d=L}for(var P=0;P<d.length;P++){var S=d[P];S=e(S,"uint8");var E=t(S,!1);if(null==w[E]){var R=_.length;w[E]=Math.floor(R/4),_[R]=S[0],_[R+1]=S[1],_[R+2]=S[2],_[R+3]=S[3]}k[P]=w[E]}return!this.tooManyColors&&_.length>4*T&&(this.tooManyColors=!0),this.updatePalette(_),1===k.length?k[0]:k},o.prototype.updatePalette=function(d){if(!this.tooManyColors){var w=this.maxColors,_=this.paletteTexture,T=Math.ceil(.25*d.length/w);if(T>1)for(var k=.25*(d=d.slice()).length%w;k<T*w;k++)d.push(0,0,0,0);_.height<T&&_.resize(w,T),_.subimage({width:Math.min(.25*d.length,w),height:T,data:d},0,0)}},o.prototype.destroy=function(){return this.groups.forEach(function(d){d.sizeBuffer.destroy(),d.positionBuffer.destroy(),d.positionFractBuffer.destroy(),d.colorBuffer.destroy(),d.activation.forEach(function(w){return w&&w.destroy&&w.destroy()}),d.selectionBuffer.destroy(),d.elements&&d.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(d){return d&&d.destroy&&d.destroy()}),this};var x=y("object-assign");$.exports=function(d,w){var _=new h(d,w),T=_.render.bind(_);return x(T,{render:T,update:_.update.bind(_),draw:_.draw.bind(_),destroy:_.destroy.bind(_),regl:_.regl,gl:_.gl,canvas:_.gl.canvas,groups:_.groups,markers:_.markerCache,palette:_.palette}),T}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(y,$,ee){"use strict";var p=y("regl-scatter2d"),m=y("pick-by-alias"),b=y("array-bounds"),v=y("raf"),e=y("array-range"),n=y("parse-rect"),t=y("flatten-vertex-data");function a(i,l){if(!(this instanceof a))return new a(i,l);this.traces=[],this.passes={},this.regl=i,this.scatter=p(i),this.canvas=this.scatter.canvas}function r(i,l,c){return(null!=i.id?i.id:i)<<16|(255&l)<<8|255&c}function u(i,l,c){var f,g,h,o,x=i[l],d=i[c];return x.length>2?(f=x[1],g=x[3]):x.length?(f=x[0],g=x[1]):(f=x.y,g=x.y+x.height),d.length>2?(h=d[0],o=d[2]):d.length?(h=d[0],o=d[1]):(h=d.x,o=d.x+d.width),[h,f,o,g]}function s(i){if("number"==typeof i)return[i,i,i,i];if(2===i.length)return[i[0],i[1],i[0],i[1]];var l=n(i);return[l.x,l.y,l.x+l.width,l.y+l.height]}$.exports=a,a.prototype.render=function(){for(var i,l=this,c=[],f=arguments.length;f--;)c[f]=arguments[f];return c.length&&(i=this).update.apply(i,c),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=v(function(){l.draw(),l.dirty=!0,l.planned=null})):(this.draw(),this.dirty=!0,v(function(){l.dirty=!1})),this)},a.prototype.update=function(){for(var i,l=[],c=arguments.length;c--;)l[c]=arguments[c];if(l.length){for(var f=0;f<l.length;f++)this.updateItem(f,l[f]);this.traces=this.traces.filter(Boolean);for(var g=[],h=0,o=0;o<this.traces.length;o++){for(var x=this.traces[o],d=this.traces[o].passes,w=0;w<d.length;w++)g.push(this.passes[d[w]]);x.passOffset=h,h+=x.passes.length}return(i=this.scatter).update.apply(i,g),this}},a.prototype.updateItem=function(i,l){var c=this.regl;if(null===l)return this.traces[i]=null,this;if(!l)return this;var f,g=m(l,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),h=this.traces[i]||(this.traces[i]={id:i,buffer:c.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:n([c._gl.drawingBufferWidth,c._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=g.color&&(h.color=g.color),null!=g.size&&(h.size=g.size),null!=g.marker&&(h.marker=g.marker),null!=g.borderColor&&(h.borderColor=g.borderColor),null!=g.borderSize&&(h.borderSize=g.borderSize),null!=g.opacity&&(h.opacity=g.opacity),g.viewport&&(h.viewport=n(g.viewport)),null!=g.diagonal&&(h.diagonal=g.diagonal),null!=g.upper&&(h.upper=g.upper),null!=g.lower&&(h.lower=g.lower),g.data){h.buffer(t(g.data)),h.columns=g.data.length,h.count=g.data[0].length,h.bounds=[];for(var o=0;o<h.columns;o++)h.bounds[o]=b(g.data[o],1)}g.range&&(h.range=g.range,f=h.range&&"number"!=typeof h.range[0]),g.domain&&(h.domain=g.domain);var x=!1;null!=g.padding&&(Array.isArray(g.padding)&&g.padding.length===h.columns&&"number"==typeof g.padding[g.padding.length-1]?(h.padding=g.padding.map(s),x=!0):h.padding=s(g.padding));var d=h.columns,w=h.count,_=h.viewport.width,T=h.viewport.height,k=h.viewport.x,L=h.viewport.y,M=_/d,O=T/d;h.passes=[];for(var P=0;P<d;P++)for(var S=0;S<d;S++)if((h.diagonal||S!==P)&&(h.upper||!(P>S))&&(h.lower||!(P<S))){var E=r(h.id,P,S),R=this.passes[E]||(this.passes[E]={});if(g.data&&(R.positions=g.transpose?{x:{buffer:h.buffer,offset:S,count:w,stride:d},y:{buffer:h.buffer,offset:P,count:w,stride:d}}:{x:{buffer:h.buffer,offset:S*w,count:w},y:{buffer:h.buffer,offset:P*w,count:w}},R.bounds=u(h.bounds,P,S)),g.domain||g.viewport||g.data){var B=x?u(h.padding,P,S):h.padding;if(h.domain){var H=u(h.domain,P,S);R.viewport=[k+H[0]*_+B[0],L+H[1]*T+B[1],k+H[2]*_-B[2],L+H[3]*T-B[3]]}else R.viewport=[k+S*M+M*B[0],L+P*O+O*B[1],k+(S+1)*M-M*B[2],L+(P+1)*O-O*B[3]]}g.color&&(R.color=h.color),g.size&&(R.size=h.size),g.marker&&(R.marker=h.marker),g.borderSize&&(R.borderSize=h.borderSize),g.borderColor&&(R.borderColor=h.borderColor),g.opacity&&(R.opacity=h.opacity),g.range&&(R.range=f?u(h.range,P,S):h.range||R.bounds),h.passes.push(E)}return this},a.prototype.draw=function(){for(var i,l=[],c=arguments.length;c--;)l[c]=arguments[c];if(l.length){for(var f=[],g=0;g<l.length;g++)if("number"==typeof l[g]){var h=this.traces[l[g]],o=h.passes,x=h.passOffset;f.push.apply(f,e(x,x+o.length))}else if(l[g].length){var d=l[g],w=this.traces[g],_=w.passes,T=w.passOffset;_=_.map(function(k,L){f[T+L]=d})}(i=this.scatter).draw.apply(i,f)}else this.scatter.draw();return this},a.prototype.destroy=function(){return this.traces.forEach(function(i){i.buffer&&i.buffer.destroy&&i.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(y,$,ee){var m;m=function(){function p(Oe,$e){this.id=U++,this.type=Oe,this.data=$e}function m(Oe){return"["+function $e(ke){if(0===ke.length)return[];var Le=ke.charAt(0),Pe=ke.charAt(ke.length-1);if(1<ke.length&&Le===Pe&&('"'===Le||"'"===Le))return['"'+ke.substr(1,ke.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Le=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ke))return $e(ke.substr(0,Le.index)).concat($e(Le[1])).concat($e(ke.substr(Le.index+Le[0].length)));if(1===(Le=ke.split(".")).length)return['"'+ke.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(ke=[],Pe=0;Pe<Le.length;++Pe)ke=ke.concat($e(Le[Pe]));return ke}(Oe).join("][")+"]"}function b(Oe){return"string"==typeof Oe?Oe.split():Oe}function v(Oe){return"string"==typeof Oe?document.querySelector(Oe):Oe}function n(Oe,$e){for(var ke=Array(Oe),Le=0;Le<Oe;++Le)ke[Le]=$e(Le);return ke}function t(Oe){var $e,ke;return $e=(65535<Oe)<<4,$e|=ke=(255<(Oe>>>=$e))<<3,($e|=ke=(15<(Oe>>>=ke))<<2)|(ke=(3<(Oe>>>=ke))<<1)|Oe>>>ke>>1}function a(){function Oe(Le){e:{for(var Pe=16;268435456>=Pe;Pe*=16)if(Le<=Pe){Le=Pe;break e}Le=0}return 0<(Pe=ke[t(Le)>>2]).length?Pe.pop():new ArrayBuffer(Le)}function $e(Le){ke[t(Le.byteLength)>>2].push(Le)}var ke=n(8,function(){return[]});return{alloc:Oe,free:$e,allocType:function(Le,Pe){var Ce=null;switch(Le){case 5120:Ce=new Int8Array(Oe(Pe),0,Pe);break;case 5121:Ce=new Uint8Array(Oe(Pe),0,Pe);break;case 5122:Ce=new Int16Array(Oe(2*Pe),0,Pe);break;case 5123:Ce=new Uint16Array(Oe(2*Pe),0,Pe);break;case 5124:Ce=new Int32Array(Oe(4*Pe),0,Pe);break;case 5125:Ce=new Uint32Array(Oe(4*Pe),0,Pe);break;case 5126:Ce=new Float32Array(Oe(4*Pe),0,Pe);break;default:return null}return Ce.length!==Pe?Ce.subarray(0,Pe):Ce},freeType:function(Le){$e(Le.buffer)}}}function r(Oe){return!!Oe&&"object"==typeof Oe&&Array.isArray(Oe.shape)&&Array.isArray(Oe.stride)&&"number"==typeof Oe.offset&&Oe.shape.length===Oe.stride.length&&(Array.isArray(Oe.data)||ne(Oe.data))}function u(Oe,$e,ke,Le,Pe,Ce){for(var Xe=0;Xe<$e;++Xe)for(var at=Oe[Xe],pt=0;pt<ke;++pt)for(var ut=at[pt],St=0;St<Le;++St)Pe[Ce++]=ut[St]}function s(Oe){return 0|pe[Object.prototype.toString.call(Oe)]}function i(Oe,$e){for(var ke=0;ke<$e.length;++ke)Oe[ke]=$e[ke]}function l(Oe,$e,ke,Le,Pe,Ce,Xe){for(var at=0,pt=0;pt<ke;++pt)for(var ut=0;ut<Le;++ut)Oe[at++]=$e[Pe*pt+Ce*ut+Xe]}function g(Oe){for(var $e=K.allocType(5123,Oe.length),ke=0;ke<Oe.length;++ke)if(isNaN(Oe[ke]))$e[ke]=65535;else if(1/0===Oe[ke])$e[ke]=31744;else if(-1/0===Oe[ke])$e[ke]=64512;else{fe[0]=Oe[ke];var Le=(Ce=me[0])>>>31<<15,Pe=(Ce<<1>>>24)-127,Ce=Ce>>13&1023;$e[ke]=-24>Pe?Le:-14>Pe?Le+(Ce+1024>>-14-Pe):15<Pe?Le+31744:Le+(Pe+15<<10)+Ce}return $e}function h(Oe){return Array.isArray(Oe)||ne(Oe)}function o(Oe){return"[object "+Oe+"]"}function x(Oe){return Array.isArray(Oe)&&(0===Oe.length||"number"==typeof Oe[0])}function d(Oe){return!(!Array.isArray(Oe)||0===Oe.length||!h(Oe[0]))}function w(Oe){return Object.prototype.toString.call(Oe)}function _(Oe){if(!Oe)return!1;var $e=w(Oe);return 0<=Ze.indexOf($e)||x(Oe)||d(Oe)||r(Oe)}function T(Oe,$e){36193===Oe.type?(Oe.data=g($e),K.freeType($e)):Oe.data=$e}function k(Oe,$e,ke,Le,Pe,Ce){if(Oe=void 0!==tt[Oe]?tt[Oe]:Me[Oe]*Ye[$e],Ce&&(Oe*=6),Pe){for(Le=0;1<=ke;)Le+=Oe*ke*ke,ke/=2;return Le}return Oe*ke*Le}function O(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function R(Oe){return Array.prototype.slice.call(Oe)}function B(Oe){return R(Oe).join("")}function H(Oe){return Array.isArray(Oe)||ne(Oe)||r(Oe)}function V(Oe){return Oe.sort(function($e,ke){return"viewport"===$e?-1:"viewport"===ke?1:$e<ke?-1:1})}function Z(Oe,$e,ke,Le){this.thisDep=Oe,this.contextDep=$e,this.propDep=ke,this.append=Le}function W(Oe){return Oe&&!(Oe.thisDep||Oe.contextDep||Oe.propDep)}function G(Oe){return new Z(!1,!1,!1,Oe)}function X(Oe,$e){var ke=Oe.type;if(0===ke)return new Z(!0,1<=(ke=Oe.data.length),2<=ke,$e);if(4===ke)return new Z((ke=Oe.data).thisDep,ke.contextDep,ke.propDep,$e);if(5===ke)return new Z(!1,!1,!1,$e);if(6===ke){for(var Le=ke=!1,Pe=!1,Ce=0;Ce<Oe.data.length;++Ce){var Xe=Oe.data[Ce];1===Xe.type?Pe=!0:2===Xe.type?Le=!0:3===Xe.type?ke=!0:0===Xe.type?(ke=!0,1<=(Xe=Xe.data)&&(Le=!0),2<=Xe&&(Pe=!0)):4===Xe.type&&(ke=ke||Xe.data.thisDep,Le=Le||Xe.data.contextDep,Pe=Pe||Xe.data.propDep)}return new Z(ke,Le,Pe,$e)}return new Z(3===ke,2===ke,1===ke,$e)}function te(Oe,$e,ke,Le,Pe,Ce,Xe,at,pt,ut,St,ot,Et,Lt,Qe){function mt(Ct){return Ct.replace(".","_")}function It(Ct,Ut,lr){var _r=mt(Ct);zr.push(Ct),On[_r]=Qr[_r]=!!lr,sn[_r]=Ut}function jt(Ct,Ut,lr){var _r=mt(Ct);zr.push(Ct),Array.isArray(lr)?(Qr[_r]=lr.slice(),On[_r]=lr.slice()):Qr[_r]=On[_r]=lr,Mn[_r]=Ut}function Zt(){var Ct=function(){function Cr(){var jr=[],Nr=[];return N(function(){jr.push.apply(jr,R(arguments))},{def:function(){var nn="v"+Yr++;return Nr.push(nn),0<arguments.length&&(jr.push(nn,"="),jr.push.apply(jr,R(arguments)),jr.push(";")),nn},toString:function(){return B([0<Nr.length?"var "+Nr.join(",")+";":"",B(jr)])}})}function Ar(){function jr(ii,qn){nn(ii,qn,"=",Nr.def(ii,qn),";")}var Nr=Cr(),nn=Cr(),dn=Nr.toString,wn=nn.toString;return N(function(){Nr.apply(Nr,R(arguments))},{def:Nr.def,entry:Nr,exit:nn,save:jr,set:function(ii,qn,gn){jr(ii,qn),Nr(ii,qn,"=",gn,";")},toString:function(){return dn()+wn()}})}var Yr=0,cn=[],yn=[],Kr=Cr(),mn={};return{global:Kr,link:function(jr){for(var Nr=0;Nr<yn.length;++Nr)if(yn[Nr]===jr)return cn[Nr];return Nr="g"+Yr++,cn.push(Nr),yn.push(jr),Nr},block:Cr,proc:function(jr,Nr){function nn(){var qn="a"+dn.length;return dn.push(qn),qn}var dn=[];Nr=Nr||0;for(var wn=0;wn<Nr;++wn)nn();var ii=(wn=Ar()).toString;return mn[jr]=N(wn,{arg:nn,toString:function(){return B(["function(",dn.join(),"){",ii(),"}"])}})},scope:Ar,cond:function(){var jr=B(arguments),Nr=Ar(),nn=Ar(),dn=Nr.toString,wn=nn.toString;return N(Nr,{then:function(){return Nr.apply(Nr,R(arguments)),this},else:function(){return nn.apply(nn,R(arguments)),this},toString:function(){var ii=wn();return ii&&(ii="else{"+ii+"}"),B(["if(",jr,"){",dn(),"}",ii])}})},compile:function(){var jr=['"use strict";',Kr,"return {"];Object.keys(mn).forEach(function(nn){jr.push('"',nn,'":',mn[nn].toString(),",")}),jr.push("}");var Nr=B(jr).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,cn.concat(Nr)).apply(null,yn)}}}(),Ut=Ct.link,lr=Ct.global;Ct.id=$t++,Ct.batchId="0";var _r=Ut(Tn),qr=Ct.shared={props:"a0"};Object.keys(Tn).forEach(function(Cr){qr[Cr]=lr.def(_r,".",Cr)});var Vr=Ct.next={},br=Ct.current={};Object.keys(Mn).forEach(function(Cr){Array.isArray(Qr[Cr])&&(Vr[Cr]=lr.def(qr.next,".",Cr),br[Cr]=lr.def(qr.current,".",Cr))});var yr=Ct.constants={};Object.keys(Rn).forEach(function(Cr){yr[Cr]=lr.def(JSON.stringify(Rn[Cr]))}),Ct.invoke=function(Cr,Ar){switch(Ar.type){case 0:var Yr=["this",qr.context,qr.props,Ct.batchId];return Cr.def(Ut(Ar.data),".call(",Yr.slice(0,Math.max(Ar.data.length+1,4)),")");case 1:return Cr.def(qr.props,Ar.data);case 2:return Cr.def(qr.context,Ar.data);case 3:return Cr.def("this",Ar.data);case 4:return Ar.data.append(Ct,Cr),Ar.data.ref;case 5:return Ar.data.toString();case 6:return Ar.data.map(function(cn){return Ct.invoke(Cr,cn)})}},Ct.attribCache={};var kr={};return Ct.scopeAttrib=function(Cr){if((Cr=$e.id(Cr))in kr)return kr[Cr];var Ar=ut.scope[Cr];return Ar||(Ar=ut.scope[Cr]=new Cn),kr[Cr]=Ut(Ar)},Ct}function nr(Ct,Ut,lr){var _r=Ct.shared.context,qr=Ct.scope();Object.keys(lr).forEach(function(Vr){Ut.save(_r,"."+Vr);var br=lr[Vr].append(Ct,Ut);Array.isArray(br)?qr(_r,".",Vr,"=[",br.join(),"];"):qr(_r,".",Vr,"=",br,";")}),Ut(qr)}function Gt(Ct,Ut,lr,_r){var qr,Vr=(yr=Ct.shared).gl,br=yr.framebuffer;Rr&&(qr=Ut.def(yr.extensions,".webgl_draw_buffers"));var yr=(kr=Ct.constants).drawBuffer,kr=kr.backBuffer;Ct=lr?lr.append(Ct,Ut):Ut.def(br,".next"),_r||Ut("if(",Ct,"!==",br,".cur){"),Ut("if(",Ct,"){",Vr,".bindFramebuffer(",36160,",",Ct,".framebuffer);"),Rr&&Ut(qr,".drawBuffersWEBGL(",yr,"[",Ct,".colorAttachments.length]);"),Ut("}else{",Vr,".bindFramebuffer(",36160,",null);"),Rr&&Ut(qr,".drawBuffersWEBGL(",kr,");"),Ut("}",br,".cur=",Ct,";"),_r||Ut("}")}function Kt(Ct,Ut,lr){var _r=Ct.shared,qr=_r.gl,Vr=Ct.current,br=Ct.next,yr=_r.current,kr=_r.next,Cr=Ct.cond(yr,".dirty");zr.forEach(function(Ar){var Yr,cn;if(!((Ar=mt(Ar))in lr.state))if(Ar in br){Yr=br[Ar],cn=Vr[Ar];var yn=n(Qr[Ar].length,function(Kr){return Cr.def(Yr,"[",Kr,"]")});Cr(Ct.cond(yn.map(function(Kr,mn){return Kr+"!=="+cn+"["+mn+"]"}).join("||")).then(qr,".",Mn[Ar],"(",yn,");",yn.map(function(Kr,mn){return cn+"["+mn+"]="+Kr}).join(";"),";"))}else Yr=Cr.def(kr,".",Ar),yn=Ct.cond(Yr,"!==",yr,".",Ar),Cr(yn),Ar in sn?yn(Ct.cond(Yr).then(qr,".enable(",sn[Ar],");").else(qr,".disable(",sn[Ar],");"),yr,".",Ar,"=",Yr,";"):yn(qr,".",Mn[Ar],"(",Yr,");",yr,".",Ar,"=",Yr,";")}),0===Object.keys(lr.state).length&&Cr(yr,".dirty=false;"),Ut(Cr)}function ir(Ct,Ut,lr,_r){var qr=Ct.shared,Vr=Ct.current,br=qr.current,yr=qr.gl;V(Object.keys(lr)).forEach(function(kr){var Cr=lr[kr];if(!_r||_r(Cr)){var Ar=Cr.append(Ct,Ut);if(sn[kr]){var Yr=sn[kr];W(Cr)?Ut(yr,Ar?".enable(":".disable(",Yr,");"):Ut(Ct.cond(Ar).then(yr,".enable(",Yr,");").else(yr,".disable(",Yr,");")),Ut(br,".",kr,"=",Ar,";")}else if(h(Ar)){var cn=Vr[kr];Ut(yr,".",Mn[kr],"(",Ar,");",Ar.map(function(yn,Kr){return cn+"["+Kr+"]="+yn}).join(";"),";")}else Ut(yr,".",Mn[kr],"(",Ar,");",br,".",kr,"=",Ar,";")}})}function dr(Ct,Ut){$r&&(Ct.instancing=Ut.def(Ct.shared.extensions,".angle_instanced_arrays"))}function hr(Ct,Ut,lr,_r,qr){function Vr(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function br(mn){mn(Cr=Ut.def(),"=",Vr(),";"),"string"==typeof qr?mn(cn,".count+=",qr,";"):mn(cn,".count++;"),Lt&&(_r?mn(Ar=Ut.def(),"=",Kr,".getNumPendingQueries();"):mn(Kr,".beginQuery(",cn,");"))}function yr(mn){mn(cn,".cpuTime+=",Vr(),"-",Cr,";"),Lt&&(_r?mn(Kr,".pushScopeStats(",Ar,",",Kr,".getNumPendingQueries(),",cn,");"):mn(Kr,".endQuery();"))}function kr(mn){var jr=Ut.def(yn,".profile");Ut(yn,".profile=",mn,";"),Ut.exit(yn,".profile=",jr,";")}var Cr,Ar,Yr=Ct.shared,cn=Ct.stats,yn=Yr.current,Kr=Yr.timer;if(lr=lr.profile){if(W(lr))return void(lr.enable?(br(Ut),yr(Ut.exit),kr("true")):kr("false"));kr(lr=lr.append(Ct,Ut))}else lr=Ut.def(yn,".profile");br(Yr=Ct.block()),Ut("if(",lr,"){",Yr,"}"),yr(Ct=Ct.block()),Ut.exit("if(",lr,"){",Ct,"}")}function cr(Ct,Ut,lr,_r,qr){var br=Ct.shared;_r.forEach(function(yr){var kr,Cr=yr.name,Ar=lr.attributes[Cr];if(Ar){if(!qr(Ar))return;kr=Ar.append(Ct,Ut)}else{if(!qr(He))return;var Yr=Ct.scopeAttrib(Cr);kr={},Object.keys(new Cn).forEach(function(cn){kr[cn]=Ut.def(Yr,".",cn)})}!function(yr,kr,Cr){function Ar(){Ut("if(!",Kr,".buffer){",cn,".enableVertexAttribArray(",yn,");}");var nn,dn=Cr.type;nn=Cr.size?Ut.def(Cr.size,"||",kr):kr,Ut("if(",Kr,".type!==",dn,"||",Kr,".size!==",nn,"||",Nr.map(function(wn){return Kr+"."+wn+"!=="+Cr[wn]}).join("||"),"){",cn,".bindBuffer(",34962,",",mn,".buffer);",cn,".vertexAttribPointer(",[yn,nn,dn,Cr.normalized,Cr.stride,Cr.offset],");",Kr,".type=",dn,";",Kr,".size=",nn,";",Nr.map(function(wn){return Kr+"."+wn+"="+Cr[wn]+";"}).join(""),"}"),$r&&Ut("if(",Kr,".divisor!==",dn=Cr.divisor,"){",Ct.instancing,".vertexAttribDivisorANGLE(",[yn,dn],");",Kr,".divisor=",dn,";}")}function Yr(){Ut("if(",Kr,".buffer){",cn,".disableVertexAttribArray(",yn,");",Kr,".buffer=null;","}if(",rt.map(function(nn,dn){return Kr+"."+nn+"!=="+jr[dn]}).join("||"),"){",cn,".vertexAttrib4f(",yn,",",jr,");",rt.map(function(nn,dn){return Kr+"."+nn+"="+jr[dn]+";"}).join(""),"}")}var cn=br.gl,yn=Ut.def(yr,".location"),Kr=Ut.def(br.attributes,"[",yn,"]"),mn=Cr.buffer,jr=[Cr.x,Cr.y,Cr.z,Cr.w],Nr=["buffer","normalized","offset","stride"];1===(yr=Cr.state)?Ar():2===yr?Yr():(Ut("if(",yr,"===",1,"){"),Ar(),Ut("}else{"),Yr(),Ut("}"))}(Ct.link(yr),function(cn){switch(cn){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(yr.info.type),kr)})}function sr(Ct,Ut,lr,_r,qr,Vr){for(var br,yr=Ct.shared,kr=yr.gl,Cr={},Ar=0;Ar<_r.length;++Ar){var Yr=(Nr=_r[Ar]).name,cn=Nr.info.type,yn=Nr.info.size,Kr=lr.uniforms[Yr];if(1<yn){if(!Kr)continue;var mn=Yr.replace("[0]","");if(Cr[mn])continue;Cr[mn]=1}var jr,Nr=Ct.link(Nr)+".location";if(Kr){if(!qr(Kr))continue;if(W(Kr)){if(Yr=Kr.value,35678===cn||35680===cn)Ut(kr,".uniform1i(",Nr,",",(cn=Ct.link(Yr._texture||Yr.color[0]._texture))+".bind());"),Ut.exit(cn,".unbind();");else if(35674===cn||35675===cn||35676===cn)yn=Ct.global.def("new Float32Array(["+Array.prototype.slice.call(Yr)+"])"),Yr=2,35675===cn?Yr=3:35676===cn&&(Yr=4),Ut(kr,".uniformMatrix",Yr,"fv(",Nr,",false,",yn,");");else{switch(cn){case 5126:br="1f";break;case 35664:br="2f";break;case 35665:br="3f";break;case 35666:br="4f";break;case 35670:case 5124:br="1i";break;case 35671:case 35667:br="2i";break;case 35672:case 35668:br="3i";break;case 35673:case 35669:br="4i"}1<yn?(br+="v",Yr=Ct.global.def("["+Array.prototype.slice.call(Yr)+"]")):Yr=h(Yr)?Array.prototype.slice.call(Yr):Yr,Ut(kr,".uniform",br,"(",Nr,",",Yr,");")}continue}jr=Kr.append(Ct,Ut)}else{if(!qr(He))continue;jr=Ut.def(yr.uniforms,"[",$e.id(Yr),"]")}switch(35678===cn?Ut("if(",jr,"&&",jr,'._reglType==="framebuffer"){',jr,"=",jr,".color[0];","}"):35680===cn&&Ut("if(",jr,"&&",jr,'._reglType==="framebufferCube"){',jr,"=",jr,".color[0];","}"),Yr=1,cn){case 35678:case 35680:cn=Ut.def(jr,"._texture"),Ut(kr,".uniform1i(",Nr,",",cn,".bind());"),Ut.exit(cn,".unbind();");continue;case 5124:case 35670:br="1i";break;case 35667:case 35671:br="2i",Yr=2;break;case 35668:case 35672:br="3i",Yr=3;break;case 35669:case 35673:br="4i",Yr=4;break;case 5126:br="1f";break;case 35664:br="2f",Yr=2;break;case 35665:br="3f",Yr=3;break;case 35666:br="4f",Yr=4;break;case 35674:br="Matrix2fv";break;case 35675:br="Matrix3fv";break;case 35676:br="Matrix4fv"}if(-1===br.indexOf("Matrix")&&1<yn&&(br+="v",Yr=1),"M"===br.charAt(0)){Ut(kr,".uniform",br,"(",Nr,","),Nr=Math.pow(cn-35674+2,2);var nn=Ct.global.def("new Float32Array(",Nr,")");Array.isArray(jr)?Ut("false,(",n(Nr,function(wn){return nn+"["+wn+"]="+jr[wn]}),",",nn,")"):Ut("false,(Array.isArray(",jr,")||",jr," instanceof Float32Array)?",jr,":(",n(Nr,function(wn){return nn+"["+wn+"]="+jr+"["+wn+"]"}),",",nn,")"),Ut(");")}else{if(1<Yr){cn=[];var dn=[];for(yn=0;yn<Yr;++yn)Array.isArray(jr)?dn.push(jr[yn]):dn.push(Ut.def(jr+"["+yn+"]")),Vr&&cn.push(Ut.def());Vr&&Ut("if(!",Ct.batchId,"||",cn.map(function(wn,ii){return wn+"!=="+dn[ii]}).join("||"),"){",cn.map(function(wn,ii){return wn+"="+dn[ii]+";"}).join("")),Ut(kr,".uniform",br,"(",Nr,",",dn.join(","),");")}else Vr&&(cn=Ut.def(),Ut("if(!",Ct.batchId,"||",cn,"!==",jr,"){",cn,"=",jr,";")),Ut(kr,".uniform",br,"(",Nr,",",jr,");");Vr&&Ut("}")}}}function mr(Ct,Ut,lr,_r){function qr(dn){var wn=cn[dn];return wn?wn.append(Ct,wn.contextDep&&_r.contextDynamic||wn.propDep?lr:Ut):Ut.def(Yr,".",dn)}function Vr(){function dn(){lr(kr,".drawElementsInstancedANGLE(",[Kr,jr,Nr,mn+"<<(("+Nr+"-5121)>>1)",yr],");")}function wn(){lr(kr,".drawArraysInstancedANGLE(",[Kr,mn,jr,yr],");")}yn&&"null"!==yn?nn?dn():(lr("if(",yn,"){"),dn(),lr("}else{"),wn(),lr("}")):wn()}function br(){function dn(){lr(Ar+".drawElements("+[Kr,jr,Nr,mn+"<<(("+Nr+"-5121)>>1)"]+");")}function wn(){lr(Ar+".drawArrays("+[Kr,mn,jr]+");")}yn&&"null"!==yn?nn?dn():(lr("if(",yn,"){"),dn(),lr("}else{"),wn(),lr("}")):wn()}var yr,kr,dn,wn,Cr=Ct.shared,Ar=Cr.gl,Yr=Cr.draw,cn=_r.draw,yn=(wn=Ut,(dn=cn.elements)?((dn.contextDep&&_r.contextDynamic||dn.propDep)&&(wn=lr),dn=dn.append(Ct,wn),cn.elementsActive&&wn("if("+dn+")"+Ar+".bindBuffer(34963,"+dn+".buffer.buffer);")):(dn=wn.def(),wn(dn,"=",Yr,".","elements",";","if(",dn,"){",Ar,".bindBuffer(",34963,",",dn,".buffer.buffer);}","else if(",Cr.vao,".currentVAO){",dn,"=",Ct.shared.elements+".getElements("+Cr.vao,".currentVAO.elements);",Lr?"":"if("+dn+")"+Ar+".bindBuffer(34963,"+dn+".buffer.buffer);","}")),dn),Kr=qr("primitive"),mn=qr("offset"),jr=function(){var dn=cn.count,wn=Ut;return dn?((dn.contextDep&&_r.contextDynamic||dn.propDep)&&(wn=lr),dn=dn.append(Ct,wn)):dn=wn.def(Yr,".","count"),dn}();if("number"==typeof jr){if(0===jr)return}else lr("if(",jr,"){"),lr.exit("}");$r&&(yr=qr("instances"),kr=Ct.instancing);var Nr=yn+".type",nn=cn.elements&&W(cn.elements)&&!cn.vaoActive;$r&&("number"!=typeof yr||0<=yr)?"string"==typeof yr?(lr("if(",yr,">0){"),Vr(),lr("}else if(",yr,"<0){"),br(),lr("}")):Vr():br()}function Ir(Ct,Ut,lr,_r,qr){return qr=(Ut=Zt()).proc("body",qr),$r&&(Ut.instancing=qr.def(Ut.shared.extensions,".angle_instanced_arrays")),Ct(Ut,qr,lr,_r),Ut.compile().body}function vr(Ct,Ut,lr,_r){dr(Ct,Ut),lr.useVAO?lr.drawVAO?Ut(Ct.shared.vao,".setVAO(",lr.drawVAO.append(Ct,Ut),");"):Ut(Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"):(Ut(Ct.shared.vao,".setVAO(null);"),cr(Ct,Ut,lr,_r.attributes,function(){return!0})),sr(Ct,Ut,lr,_r.uniforms,function(){return!0},!1),mr(Ct,Ut,Ut,lr)}function Br(Ct,Ut,lr,_r){function qr(){return!0}Ct.batchId="a1",dr(Ct,Ut),cr(Ct,Ut,lr,_r.attributes,qr),sr(Ct,Ut,lr,_r.uniforms,qr,!1),mr(Ct,Ut,Ut,lr)}function Jr(Ct,Ut,lr,_r){function qr(Yr){return Yr.contextDep&&br||Yr.propDep}function Vr(Yr){return!qr(Yr)}dr(Ct,Ut);var br=lr.contextDep,yr=Ut.def(),kr=Ut.def();Ct.shared.props=kr,Ct.batchId=yr;var Cr=Ct.scope(),Ar=Ct.scope();Ut(Cr.entry,"for(",yr,"=0;",yr,"<","a1",";++",yr,"){",kr,"=","a0","[",yr,"];",Ar,"}",Cr.exit),lr.needsContext&&nr(Ct,Ar,lr.context),lr.needsFramebuffer&&Gt(Ct,Ar,lr.framebuffer),ir(Ct,Ar,lr.state,qr),lr.profile&&qr(lr.profile)&&hr(Ct,Ar,lr,!1,!0),_r?(lr.useVAO?lr.drawVAO?qr(lr.drawVAO)?Ar(Ct.shared.vao,".setVAO(",lr.drawVAO.append(Ct,Ar),");"):Cr(Ct.shared.vao,".setVAO(",lr.drawVAO.append(Ct,Cr),");"):Cr(Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"):(Cr(Ct.shared.vao,".setVAO(null);"),cr(Ct,Cr,lr,_r.attributes,Vr),cr(Ct,Ar,lr,_r.attributes,qr)),sr(Ct,Cr,lr,_r.uniforms,Vr,!1),sr(Ct,Ar,lr,_r.uniforms,qr,!0),mr(Ct,Cr,Ar,lr)):(Ut=Ct.global.def("{}"),_r=lr.shader.progVar.append(Ct,Ar),kr=Ar.def(_r,".id"),Cr=Ar.def(Ut,"[",kr,"]"),Ar(Ct.shared.gl,".useProgram(",_r,".program);","if(!",Cr,"){",Cr,"=",Ut,"[",kr,"]=",Ct.link(function(Yr){return Ir(Br,Ct,lr,Yr,2)}),"(",_r,");}",Cr,".call(this,a0[",yr,"],",yr,");"))}function En(Ct,Ut,lr){var _r=Ut.static[lr];if(_r&&function(Ar){if("object"==typeof Ar&&!h(Ar)){for(var Yr=Object.keys(Ar),cn=0;cn<Yr.length;++cn)if(Q.isDynamic(Ar[Yr[cn]]))return!0;return!1}}(_r)){var qr=Ct.global,Vr=Object.keys(_r),br=!1,yr=!1,kr=!1,Cr=Ct.global.def("{}");Vr.forEach(function(Ar){var Yr=_r[Ar];if(Q.isDynamic(Yr))"function"==typeof Yr&&(Yr=_r[Ar]=Q.unbox(Yr)),Ar=X(Yr,null),br=br||Ar.thisDep,kr=kr||Ar.propDep,yr=yr||Ar.contextDep;else{switch(qr(Cr,".",Ar,"="),typeof Yr){case"number":qr(Yr);break;case"string":qr('"',Yr,'"');break;case"object":Array.isArray(Yr)&&qr("[",Yr.join(),"]");break;default:qr(Ct.link(Yr))}qr(";")}}),Ut.dynamic[lr]=new Q.DynamicVariable(4,{thisDep:br,contextDep:yr,propDep:kr,ref:Cr,append:function(Ar,Yr){Vr.forEach(function(cn){var yn=_r[cn];Q.isDynamic(yn)&&(yn=Ar.invoke(Yr,yn),Yr(Cr,".",cn,"=",yn,";"))})}}),delete Ut.static[lr]}}var Cn=ut.Record,An={add:32774,subtract:32778,"reverse subtract":32779};ke.ext_blend_minmax&&(An.min=32775,An.max=32776);var $r=ke.angle_instanced_arrays,Rr=ke.webgl_draw_buffers,Lr=ke.oes_vertex_array_object,Qr={dirty:!0,profile:Qe.profile},On={},zr=[],sn={},Mn={};It("dither",3024),It("blend.enable",3042),jt("blend.color","blendColor",[0,0,0,0]),jt("blend.equation","blendEquationSeparate",[32774,32774]),jt("blend.func","blendFuncSeparate",[1,0,1,0]),It("depth.enable",2929,!0),jt("depth.func","depthFunc",513),jt("depth.range","depthRange",[0,1]),jt("depth.mask","depthMask",!0),jt("colorMask","colorMask",[!0,!0,!0,!0]),It("cull.enable",2884),jt("cull.face","cullFace",1029),jt("frontFace","frontFace",2305),jt("lineWidth","lineWidth",1),It("polygonOffset.enable",32823),jt("polygonOffset.offset","polygonOffset",[0,0]),It("sample.alpha",32926),It("sample.enable",32928),jt("sample.coverage","sampleCoverage",[1,!1]),It("stencil.enable",2960),jt("stencil.mask","stencilMask",-1),jt("stencil.func","stencilFunc",[519,0,-1]),jt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),jt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),It("scissor.enable",3089),jt("scissor.box","scissor",[0,0,Oe.drawingBufferWidth,Oe.drawingBufferHeight]),jt("viewport","viewport",[0,0,Oe.drawingBufferWidth,Oe.drawingBufferHeight]);var Tn={gl:Oe,context:Et,strings:$e,next:On,current:Qr,draw:ot,elements:Ce,buffer:Pe,shader:St,attributes:ut.state,vao:ut,uniforms:pt,framebuffer:at,extensions:ke,timer:Lt,isBufferArgs:H},Rn={primTypes:Se,compareFuncs:Rt,blendFuncs:bt,blendEquations:An,stencilOps:Yt,glTypes:ce,orientationType:Fe};Rr&&(Rn.backBuffer=[1029],Rn.drawBuffer=n(Le.maxDrawbuffers,function(Ct){return 0===Ct?[0]:n(Ct,function(Ut){return 36064+Ut})}));var $t=0;return{next:On,current:Qr,procs:function(){var Ct=Zt(),Ut=Ct.proc("poll"),lr=Ct.proc("refresh"),_r=Ct.block();Ut(_r),lr(_r);var qr,Vr=Ct.shared,br=Vr.gl,yr=Vr.next,kr=Vr.current;_r(kr,".dirty=false;"),Gt(Ct,Ut),Gt(Ct,lr,null,!0),$r&&(qr=Ct.link($r)),ke.oes_vertex_array_object&&lr(Ct.link(ke.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Cr=0;Cr<Le.maxAttributes;++Cr){var Ar=lr.def(Vr.attributes,"[",Cr,"]"),Yr=Ct.cond(Ar,".buffer");Yr.then(br,".enableVertexAttribArray(",Cr,");",br,".bindBuffer(",34962,",",Ar,".buffer.buffer);",br,".vertexAttribPointer(",Cr,",",Ar,".size,",Ar,".type,",Ar,".normalized,",Ar,".stride,",Ar,".offset);").else(br,".disableVertexAttribArray(",Cr,");",br,".vertexAttrib4f(",Cr,",",Ar,".x,",Ar,".y,",Ar,".z,",Ar,".w);",Ar,".buffer=null;"),lr(Yr),$r&&lr(qr,".vertexAttribDivisorANGLE(",Cr,",",Ar,".divisor);")}return lr(Ct.shared.vao,".currentVAO=null;",Ct.shared.vao,".setVAO(",Ct.shared.vao,".targetVAO);"),Object.keys(sn).forEach(function(cn){var yn=sn[cn],Kr=_r.def(yr,".",cn),mn=Ct.block();mn("if(",Kr,"){",br,".enable(",yn,")}else{",br,".disable(",yn,")}",kr,".",cn,"=",Kr,";"),lr(mn),Ut("if(",Kr,"!==",kr,".",cn,"){",mn,"}")}),Object.keys(Mn).forEach(function(cn){var yn,Kr,mn=Mn[cn],jr=Qr[cn],Nr=Ct.block();Nr(br,".",mn,"("),h(jr)?(mn=jr.length,yn=Ct.global.def(yr,".",cn),Kr=Ct.global.def(kr,".",cn),Nr(n(mn,function(nn){return yn+"["+nn+"]"}),");",n(mn,function(nn){return Kr+"["+nn+"]="+yn+"["+nn+"];"}).join("")),Ut("if(",n(mn,function(nn){return yn+"["+nn+"]!=="+Kr+"["+nn+"]"}).join("||"),"){",Nr,"}")):(yn=_r.def(yr,".",cn),Kr=_r.def(kr,".",cn),Nr(yn,");",kr,".",cn,"=",yn,";"),Ut("if(",yn,"!==",Kr,"){",Nr,"}")),lr(Nr)}),Ct.compile()}(),compile:function(Ct,Ut,lr,_r,qr){var Vr=Zt();Vr.stats=Vr.link(qr),Object.keys(Ut.static).forEach(function(yr){En(Vr,Ut,yr)}),et.forEach(function(yr){En(Vr,Ct,yr)});var br=function(Ct,Ut,lr,_r,qr){function Vr(mn){var jr=yr[mn];jr&&(Cr[mn]=jr)}var mn,Nr,nn,dn,br=function(mn,jr){if("string"==typeof(Nr=mn.static).frag&&"string"==typeof Nr.vert){if(0<Object.keys(jr.dynamic).length)return null;var Nr=jr.static,nn=Object.keys(Nr);if(0<nn.length&&"number"==typeof Nr[nn[0]]){for(var dn=[],wn=0;wn<nn.length;++wn)dn.push([0|Nr[nn[wn]],nn[wn]]);return dn}}return null}(Ct,Ut),yr=function(mn,jr,Nr){function nn(qn){if(qn in dn){var gn=dn[qn];qn=!0;var ei,ui,Yi=0|gn.x,Ea=0|gn.y;return"width"in gn?ei=0|gn.width:qn=!1,"height"in gn?ui=0|gn.height:qn=!1,new Z(!qn&&jr&&jr.thisDep,!qn&&jr&&jr.contextDep,!qn&&jr&&jr.propDep,function(ga,ki){var Fi=ga.shared.context,oo=ei;"width"in gn||(oo=ki.def(Fi,".","framebufferWidth","-",Yi));var zo=ui;return"height"in gn||(zo=ki.def(Fi,".","framebufferHeight","-",Ea)),[Yi,Ea,oo,zo]})}if(qn in wn){var ea=wn[qn];return qn=X(ea,function(ga,ki){var Fi=ga.invoke(ki,ea),oo=ga.shared.context,zo=ki.def(Fi,".x|0"),Ho=ki.def(Fi,".y|0");return[zo,Ho,ki.def('"width" in ',Fi,"?",Fi,".width|0:","(",oo,".","framebufferWidth","-",zo,")"),Fi=ki.def('"height" in ',Fi,"?",Fi,".height|0:","(",oo,".","framebufferHeight","-",Ho,")")]}),jr&&(qn.thisDep=qn.thisDep||jr.thisDep,qn.contextDep=qn.contextDep||jr.contextDep,qn.propDep=qn.propDep||jr.propDep),qn}return jr?new Z(jr.thisDep,jr.contextDep,jr.propDep,function(ga,ki){var Fi=ga.shared.context;return[0,0,ki.def(Fi,".","framebufferWidth"),ki.def(Fi,".","framebufferHeight")]}):null}var dn=mn.static,wn=mn.dynamic;if(mn=nn("viewport")){var ii=mn;mn=new Z(mn.thisDep,mn.contextDep,mn.propDep,function(qn,gn){var ei=ii.append(qn,gn),ui=qn.shared.context;return gn.set(ui,".viewportWidth",ei[2]),gn.set(ui,".viewportHeight",ei[3]),ei})}return{viewport:mn,scissor_box:nn("scissor.box")}}(Ct,Yr=function(Ct,Ut){var lr=Ct.static,_r=Ct.dynamic;if("framebuffer"in lr){var qr=lr.framebuffer;return qr?(qr=at.getFramebuffer(qr),G(function(br,yr){var kr=br.link(qr),Cr=br.shared;return yr.set(Cr.framebuffer,".next",kr),yr.set(Cr=Cr.context,".framebufferWidth",kr+".width"),yr.set(Cr,".framebufferHeight",kr+".height"),kr})):G(function(br,yr){var kr=br.shared;return yr.set(kr.framebuffer,".next","null"),yr.set(kr=kr.context,".framebufferWidth",kr+".drawingBufferWidth"),yr.set(kr,".framebufferHeight",kr+".drawingBufferHeight"),"null"})}if("framebuffer"in _r){var Vr=_r.framebuffer;return X(Vr,function(br,yr){var kr=br.invoke(yr,Vr),Cr=br.shared,Ar=Cr.framebuffer;return kr=yr.def(Ar,".getFramebuffer(",kr,")"),yr.set(Ar,".next",kr),yr.set(Cr=Cr.context,".framebufferWidth",kr+"?"+kr+".width:"+Cr+".drawingBufferWidth"),yr.set(Cr,".framebufferHeight",kr+"?"+kr+".height:"+Cr+".drawingBufferHeight"),kr})}return null}(Ct)),kr=function(Ct,Ut){function lr(Kr,mn){if(Kr in _r){var jr=0|_r[Kr];return mn?Vr.offset=jr:Vr.instances=jr,G(function(nn,dn){return mn&&(nn.OFFSET=jr),jr})}if(Kr in qr){var Nr=qr[Kr];return X(Nr,function(nn,dn){var wn=nn.invoke(dn,Nr);return mn&&(nn.OFFSET=wn),wn})}if(mn){if(kr)return G(function(nn,dn){return nn.OFFSET=0});if(br)return new Z(yr.thisDep,yr.contextDep,yr.propDep,function(nn,dn){return dn.def(nn.shared.vao+".currentVAO?"+nn.shared.vao+".currentVAO.offset:0")})}else if(br)return new Z(yr.thisDep,yr.contextDep,yr.propDep,function(nn,dn){return dn.def(nn.shared.vao+".currentVAO?"+nn.shared.vao+".currentVAO.instances:-1")});return null}var _r=Ct.static,qr=Ct.dynamic,Vr={},br=!1,yr=function(){if("vao"in _r){var Kr=_r.vao;return null!==Kr&&null===ut.getVAO(Kr)&&(Kr=ut.createVAO(Kr)),br=!0,Vr.vao=Kr,G(function(jr){var Nr=ut.getVAO(Kr);return Nr?jr.link(Nr):"null"})}if("vao"in qr){br=!0;var mn=qr.vao;return X(mn,function(jr,Nr){var nn=jr.invoke(Nr,mn);return Nr.def(jr.shared.vao+".getVAO("+nn+")")})}return null}(),kr=!1,Cr=function(){if("elements"in _r){var Kr=_r.elements;if(Vr.elements=Kr,H(Kr)){var mn=Vr.elements=Ce.create(Kr,!0);Kr=Ce.getElements(mn),kr=!0}else Kr&&(Kr=Ce.getElements(Kr),kr=!0);return(mn=G(function(Nr,nn){if(Kr){var dn=Nr.link(Kr);return Nr.ELEMENTS=dn}return Nr.ELEMENTS=null})).value=Kr,mn}if("elements"in qr){kr=!0;var jr=qr.elements;return X(jr,function(Nr,nn){var dn=(wn=Nr.shared).isBufferArgs,wn=wn.elements,ii=Nr.invoke(nn,jr),qn=nn.def("null");return dn=nn.def(dn,"(",ii,")"),ii=Nr.cond(dn).then(qn,"=",wn,".createStream(",ii,");").else(qn,"=",wn,".getElements(",ii,");"),nn.entry(ii),nn.exit(Nr.cond(dn).then(wn,".destroyStream(",qn,");")),Nr.ELEMENTS=qn})}return br?new Z(yr.thisDep,yr.contextDep,yr.propDep,function(Nr,nn){return nn.def(Nr.shared.vao+".currentVAO?"+Nr.shared.elements+".getElements("+Nr.shared.vao+".currentVAO.elements):null")}):null}(),Ar=lr("offset",!0),Yr=function(){if("primitive"in _r){var Kr=_r.primitive;return Vr.primitive=Kr,G(function(jr,Nr){return Se[Kr]})}if("primitive"in qr){var mn=qr.primitive;return X(mn,function(jr,Nr){var nn=jr.constants.primTypes,dn=jr.invoke(Nr,mn);return Nr.def(nn,"[",dn,"]")})}return kr?W(Cr)?G(Cr.value?function(jr,Nr){return Nr.def(jr.ELEMENTS,".primType")}:function(){return 4}):new Z(Cr.thisDep,Cr.contextDep,Cr.propDep,function(jr,Nr){var nn=jr.ELEMENTS;return Nr.def(nn,"?",nn,".primType:",4)}):br?new Z(yr.thisDep,yr.contextDep,yr.propDep,function(jr,Nr){return Nr.def(jr.shared.vao+".currentVAO?"+jr.shared.vao+".currentVAO.primitive:4")}):null}(),cn=function(){if("count"in _r){var Kr=0|_r.count;return Vr.count=Kr,G(function(){return Kr})}if("count"in qr){var mn=qr.count;return X(mn,function(jr,Nr){return jr.invoke(Nr,mn)})}return kr?W(Cr)?Cr?Ar?new Z(Ar.thisDep,Ar.contextDep,Ar.propDep,function(jr,Nr){return Nr.def(jr.ELEMENTS,".vertCount-",jr.OFFSET)}):G(function(jr,Nr){return Nr.def(jr.ELEMENTS,".vertCount")}):G(function(){return-1}):new Z(Cr.thisDep||Ar.thisDep,Cr.contextDep||Ar.contextDep,Cr.propDep||Ar.propDep,function(jr,Nr){var nn=jr.ELEMENTS;return jr.OFFSET?Nr.def(nn,"?",nn,".vertCount-",jr.OFFSET,":-1"):Nr.def(nn,"?",nn,".vertCount:-1")}):br?new Z(yr.thisDep,yr.contextDep,yr.propDep,function(jr,Nr){return Nr.def(jr.shared.vao,".currentVAO?",jr.shared.vao,".currentVAO.count:-1")}):null}(),yn=lr("instances",!1);return{elements:Cr,primitive:Yr,count:cn,instances:yn,offset:Ar,vao:yr,vaoActive:br,elementsActive:kr,static:Vr}}(Ct),Cr=(Nr=(mn=Ct).static,nn=mn.dynamic,dn={},zr.forEach(function(wn){function ii(gn,ei){if(wn in Nr){var ui=gn(Nr[wn]);dn[qn]=G(function(){return ui})}else if(wn in nn){var Yi=nn[wn];dn[qn]=X(Yi,function(Ea,ea){return ei(Ea,ea,Ea.invoke(ea,Yi))})}}var qn=mt(wn);switch(wn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return ii(function(gn){return gn},function(gn,ei,ui){return ui});case"depth.func":return ii(function(gn){return Rt[gn]},function(gn,ei,ui){return ei.def(gn.constants.compareFuncs,"[",ui,"]")});case"depth.range":return ii(function(gn){return gn},function(gn,ei,ui){return[ei.def("+",ui,"[0]"),ei=ei.def("+",ui,"[1]")]});case"blend.func":return ii(function(gn){return[bt["srcRGB"in gn?gn.srcRGB:gn.src],bt["dstRGB"in gn?gn.dstRGB:gn.dst],bt["srcAlpha"in gn?gn.srcAlpha:gn.src],bt["dstAlpha"in gn?gn.dstAlpha:gn.dst]]},function(gn,ei,ui){function Yi(ki,Fi){return ei.def('"',ki,Fi,'" in ',ui,"?",ui,".",ki,Fi,":",ui,".",ki)}gn=gn.constants.blendFuncs;var Ea=Yi("src","RGB"),ea=Yi("dst","RGB"),ga=(Ea=ei.def(gn,"[",Ea,"]"),ei.def(gn,"[",Yi("src","Alpha"),"]"));return[Ea,ea=ei.def(gn,"[",ea,"]"),ga,gn=ei.def(gn,"[",Yi("dst","Alpha"),"]")]});case"blend.equation":return ii(function(gn){return"string"==typeof gn?[An[gn],An[gn]]:"object"==typeof gn?[An[gn.rgb],An[gn.alpha]]:void 0},function(gn,ei,ui){var Yi=gn.constants.blendEquations,Ea=ei.def(),ea=ei.def();return(gn=gn.cond("typeof ",ui,'==="string"')).then(Ea,"=",ea,"=",Yi,"[",ui,"];"),gn.else(Ea,"=",Yi,"[",ui,".rgb];",ea,"=",Yi,"[",ui,".alpha];"),ei(gn),[Ea,ea]});case"blend.color":return ii(function(gn){return n(4,function(ei){return+gn[ei]})},function(gn,ei,ui){return n(4,function(Yi){return ei.def("+",ui,"[",Yi,"]")})});case"stencil.mask":return ii(function(gn){return 0|gn},function(gn,ei,ui){return ei.def(ui,"|0")});case"stencil.func":return ii(function(gn){return[Rt[gn.cmp||"keep"],gn.ref||0,"mask"in gn?gn.mask:-1]},function(gn,ei,ui){return[gn=ei.def('"cmp" in ',ui,"?",gn.constants.compareFuncs,"[",ui,".cmp]",":",7680),ei.def(ui,".ref|0"),ei=ei.def('"mask" in ',ui,"?",ui,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return ii(function(gn){return["stencil.opBack"===wn?1029:1028,Yt[gn.fail||"keep"],Yt[gn.zfail||"keep"],Yt[gn.zpass||"keep"]]},function(gn,ei,ui){function Yi(ea){return ei.def('"',ea,'" in ',ui,"?",Ea,"[",ui,".",ea,"]:",7680)}var Ea=gn.constants.stencilOps;return["stencil.opBack"===wn?1029:1028,Yi("fail"),Yi("zfail"),Yi("zpass")]});case"polygonOffset.offset":return ii(function(gn){return[0|gn.factor,0|gn.units]},function(gn,ei,ui){return[ei.def(ui,".factor|0"),ei=ei.def(ui,".units|0")]});case"cull.face":return ii(function(gn){var ei=0;return"front"===gn?ei=1028:"back"===gn&&(ei=1029),ei},function(gn,ei,ui){return ei.def(ui,'==="front"?',1028,":",1029)});case"frontFace":return ii(function(gn){return Fe[gn]},function(gn,ei,ui){return ei.def(ui+'==="cw"?2304:2305')});case"colorMask":return ii(function(gn){return gn.map(function(ei){return!!ei})},function(gn,ei,ui){return n(4,function(Yi){return"!!"+ui+"["+Yi+"]"})});case"sample.coverage":return ii(function(gn){return["value"in gn?gn.value:1,!!gn.invert]},function(gn,ei,ui){return[ei.def('"value" in ',ui,"?+",ui,".value:1"),ei=ei.def("!!",ui,".invert")]})}}),dn),Ar=function(Ct,Ut,lr){function _r(Cr){if(Cr in qr){var Ar=$e.id(qr[Cr]);return(Cr=G(function(){return Ar})).id=Ar,Cr}if(Cr in Vr){var Yr=Vr[Cr];return X(Yr,function(cn,yn){var Kr=cn.invoke(yn,Yr);return yn.def(cn.shared.strings,".id(",Kr,")")})}return null}var qr=Ct.static,Vr=Ct.dynamic,br=_r("frag"),yr=_r("vert"),kr=null;return W(br)&&W(yr)?(kr=St.program(yr.id,br.id,null,lr),Ct=G(function(Cr,Ar){return Cr.link(kr)})):Ct=new Z(br&&br.thisDep||yr&&yr.thisDep,br&&br.contextDep||yr&&yr.contextDep,br&&br.propDep||yr&&yr.propDep,function(Cr,Ar){var Yr,cn,yn=Cr.shared.shader;return Yr=br?br.append(Cr,Ar):Ar.def(yn,".","frag"),cn=yr?yr.append(Cr,Ar):Ar.def(yn,".","vert"),Ar.def(yn+".program("+cn+","+Yr+")")}),{frag:br,vert:yr,progVar:Ct,program:kr}}(Ct,0,br);Vr("viewport"),Vr(mt("scissor.box"));var Yr,cn=0<Object.keys(Cr).length;if((Yr={framebuffer:Yr,draw:kr,shader:Ar,state:Cr,dirty:cn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(mn){var jr,Nr=mn.static;if(mn=mn.dynamic,"profile"in Nr){var nn=!!Nr.profile;(jr=G(function(wn,ii){return nn})).enable=nn}else if("profile"in mn){var dn=mn.profile;jr=X(dn,function(wn,ii){return wn.invoke(ii,dn)})}return jr}(Ct),Yr.uniforms=function(mn,jr){var Nr=mn.static,nn=mn.dynamic,dn={};return Object.keys(Nr).forEach(function(wn){var ii,qn=Nr[wn];if("number"==typeof qn||"boolean"==typeof qn)ii=G(function(){return qn});else if("function"==typeof qn){var gn=qn._reglType;"texture2d"===gn||"textureCube"===gn?ii=G(function(ei){return ei.link(qn)}):"framebuffer"!==gn&&"framebufferCube"!==gn||(ii=G(function(ei){return ei.link(qn.color[0])}))}else h(qn)&&(ii=G(function(ei){return ei.global.def("[",n(qn.length,function(ui){return qn[ui]}),"]")}));ii.value=qn,dn[wn]=ii}),Object.keys(nn).forEach(function(wn){var ii=nn[wn];dn[wn]=X(ii,function(qn,gn){return qn.invoke(gn,ii)})}),dn}(lr),Yr.drawVAO=Yr.scopeVAO=kr.vao,!Yr.drawVAO&&Ar.program&&!br&&ke.angle_instanced_arrays&&kr.static.elements){var yn=!0;if(Ct=Ar.program.attributes.map(function(mn){return mn=Ut.static[mn],yn=yn&&!!mn,mn}),yn&&0<Ct.length){var Kr=ut.getVAO(ut.createVAO({attributes:Ct,elements:kr.static.elements}));Yr.drawVAO=new Z(null,null,null,function(mn,jr){return mn.link(Kr)}),Yr.useVAO=!0}}return br?Yr.useVAO=!0:Yr.attributes=function(Ct,Ut){var lr=Ct.static,_r=Ct.dynamic,qr={};return Object.keys(lr).forEach(function(Vr){var br=lr[Vr],yr=$e.id(Vr),kr=new Cn;if(H(br))kr.state=1,kr.buffer=Pe.getBuffer(Pe.create(br,34962,!1,!0)),kr.type=0;else if(Ar=Pe.getBuffer(br))kr.state=1,kr.buffer=Ar,kr.type=0;else if("constant"in br){var Cr=br.constant;kr.buffer="null",kr.state=2,"number"==typeof Cr?kr.x=Cr:rt.forEach(function(jr,Nr){Nr<Cr.length&&(kr[jr]=Cr[Nr])})}else{var Ar=H(br.buffer)?Pe.getBuffer(Pe.create(br.buffer,34962,!1,!0)):Pe.getBuffer(br.buffer),Yr=0|br.offset,cn=0|br.stride,yn=0|br.size,Kr=!!br.normalized,mn=0;"type"in br&&(mn=ce[br.type]),br=0|br.divisor,kr.buffer=Ar,kr.state=1,kr.size=yn,kr.normalized=Kr,kr.type=mn||Ar.dtype,kr.offset=Yr,kr.stride=cn,kr.divisor=br}qr[Vr]=G(function(jr,Nr){var nn=jr.attribCache;if(yr in nn)return nn[yr];var dn={isStream:!1};return Object.keys(kr).forEach(function(wn){dn[wn]=kr[wn]}),kr.buffer&&(dn.buffer=jr.link(kr.buffer),dn.type=dn.type||dn.buffer+".dtype"),nn[yr]=dn})}),Object.keys(_r).forEach(function(Vr){var br=_r[Vr];qr[Vr]=X(br,function(yr,kr){function Cr(nn){kr(Kr[nn],"=",Ar,".",nn,"|0;")}var Ar=yr.invoke(kr,br),Yr=yr.shared,cn=yr.constants,yn=Yr.isBufferArgs,Kr=(Yr=Yr.buffer,{isStream:kr.def(!1)}),mn=new Cn;mn.state=1,Object.keys(mn).forEach(function(nn){Kr[nn]=kr.def(""+mn[nn])});var jr=Kr.buffer,Nr=Kr.type;return kr("if(",yn,"(",Ar,")){",Kr.isStream,"=true;",jr,"=",Yr,".createStream(",34962,",",Ar,");",Nr,"=",jr,".dtype;","}else{",jr,"=",Yr,".getBuffer(",Ar,");","if(",jr,"){",Nr,"=",jr,".dtype;",'}else if("constant" in ',Ar,"){",Kr.state,"=",2,";","if(typeof "+Ar+'.constant === "number"){',Kr[rt[0]],"=",Ar,".constant;",rt.slice(1).map(function(nn){return Kr[nn]}).join("="),"=0;","}else{",rt.map(function(nn,dn){return Kr[nn]+"="+Ar+".constant.length>"+dn+"?"+Ar+".constant["+dn+"]:0;"}).join(""),"}}else{","if(",yn,"(",Ar,".buffer)){",jr,"=",Yr,".createStream(",34962,",",Ar,".buffer);","}else{",jr,"=",Yr,".getBuffer(",Ar,".buffer);","}",Nr,'="type" in ',Ar,"?",cn.glTypes,"[",Ar,".type]:",jr,".dtype;",Kr.normalized,"=!!",Ar,".normalized;"),Cr("size"),Cr("offset"),Cr("stride"),Cr("divisor"),kr("}}"),kr.exit("if(",Kr.isStream,"){",Yr,".destroyStream(",jr,");","}"),Kr})}),qr}(Ut),Yr.context=function(mn){var jr=mn.static,Nr=mn.dynamic,nn={};return Object.keys(jr).forEach(function(dn){var wn=jr[dn];nn[dn]=G(function(ii,qn){return"number"==typeof wn||"boolean"==typeof wn?""+wn:ii.link(wn)})}),Object.keys(Nr).forEach(function(dn){var wn=Nr[dn];nn[dn]=X(wn,function(ii,qn){return ii.invoke(qn,wn)})}),nn}(_r),Yr}(Ct,Ut,lr,_r);return function(yr,kr){var Cr=yr.proc("draw",1);dr(yr,Cr),nr(yr,Cr,kr.context),Gt(yr,Cr,kr.framebuffer),Kt(yr,Cr,kr),ir(yr,Cr,kr.state),hr(yr,Cr,kr,!1,!0);var Ar=kr.shader.progVar.append(yr,Cr);if(Cr(yr.shared.gl,".useProgram(",Ar,".program);"),kr.shader.program)vr(yr,Cr,kr,kr.shader.program);else{Cr(yr.shared.vao,".setVAO(null);");var Yr=yr.global.def("{}"),cn=Cr.def(Ar,".id"),yn=Cr.def(Yr,"[",cn,"]");Cr(yr.cond(yn).then(yn,".call(this,a0);").else(yn,"=",Yr,"[",cn,"]=",yr.link(function(Kr){return Ir(vr,yr,kr,Kr,1)}),"(",Ar,");",yn,".call(this,a0);"))}0<Object.keys(kr.state).length&&Cr(yr.shared.current,".dirty=true;"),yr.shared.vao&&Cr(yr.shared.vao,".setVAO(null);")}(Vr,br),function(Ct,Ut){function lr(br){var yr=Ut.shader[br];yr&&_r.set(qr.shader,"."+br,yr.append(Ct,_r))}var _r=Ct.proc("scope",3);Ct.batchId="a2";var qr=Ct.shared,Vr=qr.current;nr(Ct,_r,Ut.context),Ut.framebuffer&&Ut.framebuffer.append(Ct,_r),V(Object.keys(Ut.state)).forEach(function(br){var yr=Ut.state[br].append(Ct,_r);h(yr)?yr.forEach(function(kr,Cr){_r.set(Ct.next[br],"["+Cr+"]",kr)}):_r.set(qr.next,"."+br,yr)}),hr(Ct,_r,Ut,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(br){var yr=Ut.draw[br];yr&&_r.set(qr.draw,"."+br,""+yr.append(Ct,_r))}),Object.keys(Ut.uniforms).forEach(function(br){var yr=Ut.uniforms[br].append(Ct,_r);Array.isArray(yr)&&(yr="["+yr.join()+"]"),_r.set(qr.uniforms,"["+$e.id(br)+"]",yr)}),Object.keys(Ut.attributes).forEach(function(br){var yr=Ut.attributes[br].append(Ct,_r),kr=Ct.scopeAttrib(br);Object.keys(new Cn).forEach(function(Cr){_r.set(kr,"."+Cr,yr[Cr])})}),Ut.scopeVAO&&_r.set(qr.vao,".targetVAO",Ut.scopeVAO.append(Ct,_r)),lr("vert"),lr("frag"),0<Object.keys(Ut.state).length&&(_r(Vr,".dirty=true;"),_r.exit(Vr,".dirty=true;")),_r("a1(",Ct.shared.context,",a0,",Ct.batchId,");")}(Vr,br),function(yr,kr){function Cr(jr){return jr.contextDep&&Yr||jr.propDep}var Ar=yr.proc("batch",2);yr.batchId="0",dr(yr,Ar);var Yr=!1,cn=!0;Object.keys(kr.context).forEach(function(jr){Yr=Yr||kr.context[jr].propDep}),Yr||(nr(yr,Ar,kr.context),cn=!1);var yn=!1;if((Kr=kr.framebuffer)?(Kr.propDep?Yr=yn=!0:Kr.contextDep&&Yr&&(yn=!0),yn||Gt(yr,Ar,Kr)):Gt(yr,Ar,null),kr.state.viewport&&kr.state.viewport.propDep&&(Yr=!0),Kt(yr,Ar,kr),ir(yr,Ar,kr.state,function(jr){return!Cr(jr)}),kr.profile&&Cr(kr.profile)||hr(yr,Ar,kr,!1,"a1"),kr.contextDep=Yr,kr.needsContext=cn,kr.needsFramebuffer=yn,(cn=kr.shader.progVar).contextDep&&Yr||cn.propDep)Jr(yr,Ar,kr,null);else if(cn=cn.append(yr,Ar),Ar(yr.shared.gl,".useProgram(",cn,".program);"),kr.shader.program)Jr(yr,Ar,kr,kr.shader.program);else{Ar(yr.shared.vao,".setVAO(null);");var Kr=yr.global.def("{}"),mn=(yn=Ar.def(cn,".id"),Ar.def(Kr,"[",yn,"]"));Ar(yr.cond(mn).then(mn,".call(this,a0,a1);").else(mn,"=",Kr,"[",yn,"]=",yr.link(function(jr){return Ir(Jr,yr,kr,jr,2)}),"(",cn,");",mn,".call(this,a0,a1);"))}0<Object.keys(kr.state).length&&Ar(yr.shared.current,".dirty=true;"),yr.shared.vao&&Ar(yr.shared.vao,".setVAO(null);")}(Vr,br),N(Vr.compile(),{destroy:function(){br.shader.program.destroy()}})}}}function D(Oe,$e){for(var ke=0;ke<Oe.length;++ke)if(Oe[ke]===$e)return ke;return-1}var N=function(Oe,$e){for(var ke=Object.keys($e),Le=0;Le<ke.length;++Le)Oe[ke[Le]]=$e[ke[Le]];return Oe},U=0,Q={DynamicVariable:p,define:function(Oe,$e){return new p(Oe,m($e+""))},isDynamic:function(Oe){return"function"==typeof Oe&&!Oe._reglType||Oe instanceof p},unbox:function Oe($e,ke){return"function"==typeof $e?new p(0,$e):"number"==typeof $e||"boolean"==typeof $e?new p(5,$e):Array.isArray($e)?new p(6,$e.map(function(Le,Pe){return Oe(Le,ke+"["+Pe+"]")})):$e instanceof p?$e:void 0},accessor:m},j={next:"function"==typeof requestAnimationFrame?function(Oe){return requestAnimationFrame(Oe)}:function(Oe){return setTimeout(Oe,16)},cancel:"function"==typeof cancelAnimationFrame?function(Oe){return cancelAnimationFrame(Oe)}:clearTimeout},J="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},K=a();K.zero=a();var ne=function(Oe){return Oe instanceof Uint8Array||Oe instanceof Uint16Array||Oe instanceof Uint32Array||Oe instanceof Int8Array||Oe instanceof Int16Array||Oe instanceof Int32Array||Oe instanceof Float32Array||Oe instanceof Float64Array||Oe instanceof Uint8ClampedArray},se=function(Oe){return Object.keys(Oe).map(function($e){return Oe[$e]})},oe_shape=function(Oe){for(var $e=[];Oe.length;Oe=Oe[0])$e.push(Oe.length);return $e},oe_flatten=function(Oe,$e,ke,Le){var Pe=1;if($e.length)for(var Ce=0;Ce<$e.length;++Ce)Pe*=$e[Ce];else Pe=0;switch(ke=Le||K.allocType(ke,Pe),$e.length){case 0:break;case 1:for(Le=$e[0],$e=0;$e<Le;++$e)ke[$e]=Oe[$e];break;case 2:for(Le=$e[0],$e=$e[1],Ce=Pe=0;Ce<Le;++Ce)for(var Xe=Oe[Ce],at=0;at<$e;++at)ke[Pe++]=Xe[at];break;case 3:u(Oe,$e[0],$e[1],$e[2],ke,0);break;default:!function pt(ut,St,ot,Et,Lt){for(var Qe=1,mt=ot+1;mt<St.length;++mt)Qe*=St[mt];var It=St[ot];if(St.length-ot==4){var jt=St[ot+1],Zt=St[ot+2];for(St=St[ot+3],mt=0;mt<It;++mt)u(ut[mt],jt,Zt,St,Et,Lt),Lt+=Qe}else for(mt=0;mt<It;++mt)pt(ut[mt],St,ot+1,Et,Lt),Lt+=Qe}(Oe,$e,0,ke,0)}return ke},pe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ce={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},ge={dynamic:35048,stream:35040,static:35044},xe=oe_flatten,we=oe_shape,be=[];be[5120]=1,be[5122]=2,be[5124]=4,be[5121]=1,be[5123]=2,be[5125]=4,be[5126]=4;var Se={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},fe=new Float32Array(1),me=new Uint32Array(fe.buffer),Te=[9984,9986,9985,9987],_e=[0,6409,6410,6407,6408],Me={};Me[6409]=Me[6406]=Me[6402]=1,Me[34041]=Me[6410]=2,Me[6407]=Me[35904]=3,Me[6408]=Me[35906]=4;var Ie=o("HTMLCanvasElement"),ze=o("OffscreenCanvas"),Ve=o("CanvasRenderingContext2D"),Je=o("ImageBitmap"),De=o("HTMLImageElement"),Be=o("HTMLVideoElement"),Ze=Object.keys(pe).concat([Ie,ze,Ve,Je,De,Be]),Ye=[];Ye[5121]=1,Ye[5126]=4,Ye[36193]=2,Ye[5123]=2,Ye[5125]=4;var tt=[];tt[32854]=2,tt[32855]=2,tt[36194]=2,tt[34041]=4,tt[33776]=.5,tt[33777]=.5,tt[33778]=1,tt[33779]=1,tt[35986]=.5,tt[35987]=1,tt[34798]=1,tt[35840]=.5,tt[35841]=.25,tt[35842]=.5,tt[35843]=.25,tt[36196]=.5;var st=[];st[32854]=2,st[32855]=2,st[36194]=2,st[33189]=2,st[36168]=1,st[34041]=4,st[35907]=4,st[34836]=16,st[34842]=8,st[34843]=6;var Pt=[];Pt[6408]=4,Pt[6407]=3;var Mt=[];Mt[5121]=1,Mt[5126]=4,Mt[36193]=2;var rt=["x","y","z","w"],et="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),bt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Rt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Yt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Fe={cw:2304,ccw:2305},He=new Z(!1,!1,!1,function(){});return function(Oe){function $e(){if(0===Br.length)Re&&Re.update(),Cn=null;else{Cn=j.next($e),St();for(var $r=Br.length-1;0<=$r;--$r){var Rr=Br[$r];Rr&&Rr(Vt,null,0)}Lt.flush(),Re&&Re.update()}}function ke(){!Cn&&0<Br.length&&(Cn=j.next($e))}function Le(){Cn&&(j.cancel($e),Cn=null)}function Pe($r){$r.preventDefault(),Le(),Jr.forEach(function(Rr){Rr()})}function Ce($r){Lt.getError(),mt.restore(),dr.restore(),Gt.restore(),hr.restore(),cr.restore(),sr.restore(),ir.restore(),Re&&Re.restore(),mr.procs.refresh(),ke(),ln.forEach(function(Rr){Rr()})}function Xe($r){function Rr(Ct,Ut){var lr={},_r={};return Object.keys(Ct).forEach(function(qr){var Vr=Ct[qr];if(Q.isDynamic(Vr))_r[qr]=Q.unbox(Vr,qr);else{if(Ut&&Array.isArray(Vr))for(var br=0;br<Vr.length;++br)if(Q.isDynamic(Vr[br]))return void(_r[qr]=Q.unbox(Vr,qr));lr[qr]=Vr}}),{dynamic:_r,static:lr}}var Lr=Rr($r.context||{},!0),Qr=Rr($r.uniforms||{},!0),On=Rr($r.attributes||{},!1);$r=Rr(function(Ct){function Ut(_r){if(_r in lr){var qr=lr[_r];delete lr[_r],Object.keys(qr).forEach(function(Vr){lr[_r+"."+Vr]=qr[Vr]})}}var lr=N({},Ct);return delete lr.uniforms,delete lr.attributes,delete lr.context,delete lr.vao,"stencil"in lr&&lr.stencil.op&&(lr.stencil.opBack=lr.stencil.opFront=lr.stencil.op,delete lr.stencil.op),Ut("blend"),Ut("depth"),Ut("cull"),Ut("stencil"),Ut("polygonOffset"),Ut("scissor"),Ut("sample"),"vao"in Ct&&(lr.vao=Ct.vao),lr}($r),!1);var zr={gpuTime:0,cpuTime:0,count:0},sn=mr.compile($r,On,Qr,Lr,zr),Mn=sn.draw,Tn=sn.batch,Rn=sn.scope,$t=[];return N(function(Ct,Ut){var lr;if("function"==typeof Ct)return Rn.call(this,null,Ct,0);if("function"==typeof Ut)if("number"==typeof Ct)for(lr=0;lr<Ct;++lr)Rn.call(this,null,Ut,lr);else{if(!Array.isArray(Ct))return Rn.call(this,Ct,Ut,0);for(lr=0;lr<Ct.length;++lr)Rn.call(this,Ct[lr],Ut,lr)}else if("number"==typeof Ct){if(0<Ct)return Tn.call(this,function(_r){for(;$t.length<_r;)$t.push(null);return $t}(0|Ct),0|Ct)}else{if(!Array.isArray(Ct))return Mn.call(this,Ct);if(Ct.length)return Tn.call(this,Ct,Ct.length)}},{stats:zr,destroy:function(){sn.destroy()}})}function at($r,Rr){var Lr=0;mr.procs.poll();var Qr=Rr.color;Qr&&(Lt.clearColor(+Qr[0]||0,+Qr[1]||0,+Qr[2]||0,+Qr[3]||0),Lr|=16384),"depth"in Rr&&(Lt.clearDepth(+Rr.depth),Lr|=256),"stencil"in Rr&&(Lt.clearStencil(0|Rr.stencil),Lr|=1024),Lt.clear(Lr)}function pt($r){return Br.push($r),ke(),{cancel:function(){var Rr=D(Br,$r);Br[Rr]=function Lr(){var Qr=D(Br,Lr);Br[Qr]=Br[Br.length-1],--Br.length,0>=Br.length&&Le()}}}}function ut(){var $r=Ir.viewport,Rr=Ir.scissor_box;$r[0]=$r[1]=Rr[0]=Rr[1]=0,Vt.viewportWidth=Vt.framebufferWidth=Vt.drawingBufferWidth=$r[2]=Rr[2]=Lt.drawingBufferWidth,Vt.viewportHeight=Vt.framebufferHeight=Vt.drawingBufferHeight=$r[3]=Rr[3]=Lt.drawingBufferHeight}function St(){Vt.tick+=1,Vt.time=Et(),ut(),mr.procs.poll()}function ot(){hr.refresh(),ut(),mr.procs.refresh(),Re&&Re.update()}function Et(){return(J()-lt)/1e3}if(!(Oe=function(Oe){var $e,ke,Le,Pe,Ce=Oe||{};Oe={};var Xe=[],at=[],pt="undefined"==typeof window?1:window.devicePixelRatio,ut=!1,St=function(Et){},ot=function(){};if("string"==typeof Ce?$e=document.querySelector(Ce):"object"==typeof Ce&&("string"==typeof Ce.nodeName&&"function"==typeof Ce.appendChild&&"function"==typeof Ce.getBoundingClientRect?$e=Ce:"function"==typeof Ce.drawArrays||"function"==typeof Ce.drawElements?Le=(Pe=Ce).canvas:("gl"in Ce?Pe=Ce.gl:"canvas"in Ce?Le=v(Ce.canvas):"container"in Ce&&(ke=v(Ce.container)),"attributes"in Ce&&(Oe=Ce.attributes),"extensions"in Ce&&(Xe=b(Ce.extensions)),"optionalExtensions"in Ce&&(at=b(Ce.optionalExtensions)),"onDone"in Ce&&(St=Ce.onDone),"profile"in Ce&&(ut=!!Ce.profile),"pixelRatio"in Ce&&(pt=+Ce.pixelRatio))),$e&&("canvas"===$e.nodeName.toLowerCase()?Le=$e:ke=$e),!Pe){if(!Le){if(!($e=function(Et,Lt,Qe){function mt(){var Zt=window.innerWidth,Re=window.innerHeight;Et!==document.body&&(Zt=(Re=jt.getBoundingClientRect()).right-Re.left,Re=Re.bottom-Re.top),jt.width=Qe*Zt,jt.height=Qe*Re}var It,jt=document.createElement("canvas");return N(jt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Et.appendChild(jt),Et===document.body&&(jt.style.position="absolute",N(Et.style,{margin:0,padding:0})),Et!==document.body&&"function"==typeof ResizeObserver?(It=new ResizeObserver(function(){setTimeout(mt)})).observe(Et):window.addEventListener("resize",mt,!1),mt(),{canvas:jt,onDestroy:function(){It?It.disconnect():window.removeEventListener("resize",mt),Et.removeChild(jt)}}}(ke||document.body,0,pt)))return null;Le=$e.canvas,ot=$e.onDestroy}void 0===Oe.premultipliedAlpha&&(Oe.premultipliedAlpha=!0),Pe=function(Et,Lt){function Qe(mt){try{return Et.getContext(mt,Lt)}catch(It){return null}}return Qe("webgl")||Qe("experimental-webgl")||Qe("webgl-experimental")}(Le,Oe)}return Pe?{gl:Pe,canvas:Le,container:ke,extensions:Xe,optionalExtensions:at,pixelRatio:pt,profile:ut,onDone:St,onDestroy:ot}:(ot(),St("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(Oe)))return null;var Lt=Oe.gl,Qe=Lt.getContextAttributes();Lt.isContextLost();var mt=function($r,Rr){function Lr(sn){var Mn;sn=sn.toLowerCase();try{Mn=Qr[sn]=$r.getExtension(sn)}catch(Tn){}return!!Mn}for(var Qr={},On=0;On<Rr.extensions.length;++On){var zr=Rr.extensions[On];if(!Lr(zr))return Rr.onDestroy(),Rr.onDone('"'+zr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Rr.optionalExtensions.forEach(Lr),{extensions:Qr,restore:function(){Object.keys(Qr).forEach(function(sn){if(Qr[sn]&&!Lr(sn))throw Error("(regl): error restoring extension "+sn)})}}}(Lt,Oe);if(!mt)return null;var $r,Rr,It=($r={"":0},Rr=[""],{id:function(Lr){var Qr=$r[Lr];return Qr||(Qr=$r[Lr]=Rr.length,Rr.push(Lr),Qr)},str:function(Lr){return Rr[Lr]}}),jt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Zt=mt.extensions,Re=function($r,Rr){function Lr(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Qr($t,Ct,Ut){var lr=sn.pop()||new Lr;lr.startQueryIndex=$t,lr.endQueryIndex=Ct,lr.sum=0,lr.stats=Ut,Mn.push(lr)}if(!Rr.ext_disjoint_timer_query)return null;var On=[],zr=[],sn=[],Mn=[],Tn=[],Rn=[];return{beginQuery:function($t){var Ct=On.pop()||Rr.ext_disjoint_timer_query.createQueryEXT();Rr.ext_disjoint_timer_query.beginQueryEXT(35007,Ct),zr.push(Ct),Qr(zr.length-1,zr.length,$t)},endQuery:function(){Rr.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Qr,update:function(){var $t,Ct;if(0!==($t=zr.length)){Rn.length=Math.max(Rn.length,$t+1),Tn.length=Math.max(Tn.length,$t+1),Tn[0]=0;var Ut=Rn[0]=0;for(Ct=$t=0;Ct<zr.length;++Ct){var lr=zr[Ct];Rr.ext_disjoint_timer_query.getQueryObjectEXT(lr,34919)?(Ut+=Rr.ext_disjoint_timer_query.getQueryObjectEXT(lr,34918),On.push(lr)):zr[$t++]=lr,Tn[Ct+1]=Ut,Rn[Ct+1]=$t}for(zr.length=$t,Ct=$t=0;Ct<Mn.length;++Ct){var _r=(Ut=Mn[Ct]).startQueryIndex;Ut.sum+=Tn[lr=Ut.endQueryIndex]-Tn[_r],(lr=Rn[lr])===(_r=Rn[_r])?(Ut.stats.gpuTime+=Ut.sum/1e6,sn.push(Ut)):(Ut.startQueryIndex=_r,Ut.endQueryIndex=lr,Mn[$t++]=Ut)}Mn.length=$t}},getNumPendingQueries:function(){return zr.length},clear:function(){On.push.apply(On,zr);for(var $t=0;$t<On.length;$t++)Rr.ext_disjoint_timer_query.deleteQueryEXT(On[$t]);zr.length=0,On.length=0},restore:function(){zr.length=0,On.length=0}}}(0,Zt),lt=J(),_t=Lt.drawingBufferWidth,Dt=Lt.drawingBufferHeight,Vt={tick:0,time:0,viewportWidth:_t,viewportHeight:Dt,framebufferWidth:_t,framebufferHeight:Dt,drawingBufferWidth:_t,drawingBufferHeight:Dt,pixelRatio:Oe.pixelRatio},nr=(_t={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(Oe,$e){var ke=1;$e.ext_texture_filter_anisotropic&&(ke=Oe.getParameter(34047));var Le=1,Pe=1;$e.webgl_draw_buffers&&(Le=Oe.getParameter(34852),Pe=Oe.getParameter(36063));var Ce=!!$e.oes_texture_float;if(Ce){Ce=Oe.createTexture(),Oe.bindTexture(3553,Ce),Oe.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var Xe=Oe.createFramebuffer();if(Oe.bindFramebuffer(36160,Xe),Oe.framebufferTexture2D(36160,36064,3553,Ce,0),Oe.bindTexture(3553,null),36053!==Oe.checkFramebufferStatus(36160))Ce=!1;else{Oe.viewport(0,0,1,1),Oe.clearColor(1,0,0,1),Oe.clear(16384);var at=K.allocType(5126,4);Oe.readPixels(0,0,1,1,6408,5126,at),Oe.getError()?Ce=!1:(Oe.deleteFramebuffer(Xe),Oe.deleteTexture(Ce),Ce=1===at[0]),K.freeType(at)}}return at=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(at=Oe.createTexture(),Xe=K.allocType(5121,36),Oe.activeTexture(33984),Oe.bindTexture(34067,at),Oe.texImage2D(34069,0,6408,3,3,0,6408,5121,Xe),K.freeType(Xe),Oe.bindTexture(34067,null),Oe.deleteTexture(at),at=!Oe.getError()),{colorBits:[Oe.getParameter(3410),Oe.getParameter(3411),Oe.getParameter(3412),Oe.getParameter(3413)],depthBits:Oe.getParameter(3414),stencilBits:Oe.getParameter(3415),subpixelBits:Oe.getParameter(3408),extensions:Object.keys($e).filter(function(pt){return!!$e[pt]}),maxAnisotropic:ke,maxDrawbuffers:Le,maxColorAttachments:Pe,pointSizeDims:Oe.getParameter(33901),lineWidthDims:Oe.getParameter(33902),maxViewportDims:Oe.getParameter(3386),maxCombinedTextureUnits:Oe.getParameter(35661),maxCubeMapSize:Oe.getParameter(34076),maxRenderbufferSize:Oe.getParameter(34024),maxTextureUnits:Oe.getParameter(34930),maxTextureSize:Oe.getParameter(3379),maxAttributes:Oe.getParameter(34921),maxVertexUniforms:Oe.getParameter(36347),maxVertexTextureUnits:Oe.getParameter(35660),maxVaryingVectors:Oe.getParameter(36348),maxFragmentUniforms:Oe.getParameter(36349),glsl:Oe.getParameter(35724),renderer:Oe.getParameter(7937),vendor:Oe.getParameter(7936),version:Oe.getParameter(7938),readFloat:Ce,npotTextureCube:at}}(Lt,Zt)),Gt=function(Oe,$e,ke,Le){function Pe(ot){this.id=pt++,this.buffer=Oe.createBuffer(),this.type=ot,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,ke.profile&&(this.stats={size:0})}function Ce(ot,Et,Lt){ot.byteLength=Et.byteLength,Oe.bufferData(ot.type,Et,Lt)}function Xe(ot,Et,Lt,Qe,mt,It){if(ot.usage=Lt,Array.isArray(Et)){if(ot.dtype=Qe||5126,0<Et.length)if(Array.isArray(Et[0])){mt=we(Et);for(var jt=Qe=1;jt<mt.length;++jt)Qe*=mt[jt];ot.dimension=Qe,Ce(ot,Et=xe(Et,mt,ot.dtype),Lt),It?ot.persistentData=Et:K.freeType(Et)}else"number"==typeof Et[0]?(ot.dimension=mt,i(mt=K.allocType(ot.dtype,Et.length),Et),Ce(ot,mt,Lt),It?ot.persistentData=mt:K.freeType(mt)):ne(Et[0])&&(ot.dimension=Et[0].length,ot.dtype=Qe||s(Et[0])||5126,Ce(ot,Et=xe(Et,[Et.length,Et[0].length],ot.dtype),Lt),It?ot.persistentData=Et:K.freeType(Et))}else if(ne(Et))ot.dtype=Qe||s(Et),ot.dimension=mt,Ce(ot,Et,Lt),It&&(ot.persistentData=new Uint8Array(new Uint8Array(Et.buffer)));else if(r(Et)){var Zt=Et.stride,Re=(jt=Et.offset,0),lt=0,_t=0,Dt=0;1===(mt=Et.shape).length?(Re=mt[0],lt=1,_t=Zt[0],Dt=0):2===mt.length&&(Re=mt[0],lt=mt[1],_t=Zt[0],Dt=Zt[1]),ot.dtype=Qe||s(Et.data)||5126,ot.dimension=lt,l(mt=K.allocType(ot.dtype,Re*lt),Et.data,Re,lt,_t,Dt,jt),Ce(ot,mt,Lt),It?ot.persistentData=mt:K.freeType(mt)}else Et instanceof ArrayBuffer&&(ot.dtype=5121,ot.dimension=mt,Ce(ot,Et,Lt),It&&(ot.persistentData=new Uint8Array(new Uint8Array(Et))))}function at(ot){$e.bufferCount--,function($r){ir.destroyBuffer($r)}(ot),Oe.deleteBuffer(ot.buffer),ot.buffer=null,delete ut[ot.id]}var pt=0,ut={};Pe.prototype.bind=function(){Oe.bindBuffer(this.type,this.buffer)},Pe.prototype.destroy=function(){at(this)};var St=[];return ke.profile&&($e.getTotalBufferSize=function(){var ot=0;return Object.keys(ut).forEach(function(Et){ot+=ut[Et].stats.size}),ot}),{create:function(ot,Et,Lt,Qe){function mt(jt){var Zt=35044,Re=null,lt=0,_t=0,Dt=1;return Array.isArray(jt)||ne(jt)||r(jt)||jt instanceof ArrayBuffer?Re=jt:"number"==typeof jt?lt=0|jt:jt&&("data"in jt&&(Re=jt.data),"usage"in jt&&(Zt=ge[jt.usage]),"type"in jt&&(_t=ce[jt.type]),"dimension"in jt&&(Dt=0|jt.dimension),"length"in jt&&(lt=0|jt.length)),It.bind(),Re?Xe(It,Re,Zt,_t,Dt,Qe):(lt&&Oe.bufferData(It.type,lt,Zt),It.dtype=_t||5121,It.usage=Zt,It.dimension=Dt,It.byteLength=lt),ke.profile&&(It.stats.size=It.byteLength*be[It.dtype]),mt}$e.bufferCount++;var It=new Pe(Et);return ut[It.id]=It,Lt||mt(ot),mt._reglType="buffer",mt._buffer=It,mt.subdata=function(jt,Zt){var Re,lt=0|(Zt||0);if(It.bind(),ne(jt)||jt instanceof ArrayBuffer)Oe.bufferSubData(It.type,lt,jt);else if(Array.isArray(jt)){if(0<jt.length)if("number"==typeof jt[0]){var _t=K.allocType(It.dtype,jt.length);i(_t,jt),Oe.bufferSubData(It.type,lt,_t),K.freeType(_t)}else(Array.isArray(jt[0])||ne(jt[0]))&&(Re=we(jt),_t=xe(jt,Re,It.dtype),Oe.bufferSubData(It.type,lt,_t),K.freeType(_t))}else if(r(jt)){var Dt=jt.stride,Vt=_t=0,nr=0,Gt=0;1===(Re=jt.shape).length?(_t=Re[0],Vt=1,nr=Dt[0],Gt=0):2===Re.length&&(_t=Re[0],Vt=Re[1],nr=Dt[0],Gt=Dt[1]),Re=Array.isArray(jt.data)?It.dtype:s(jt.data),l(Re=K.allocType(Re,_t*Vt),jt.data,_t,Vt,nr,Gt,jt.offset),Oe.bufferSubData(It.type,lt,Re),K.freeType(Re)}return mt},ke.profile&&(mt.stats=It.stats),mt.destroy=function(){at(It)},mt},createStream:function(ot,Et){var Lt=St.pop();return Lt||(Lt=new Pe(ot)),Lt.bind(),Xe(Lt,Et,35040,0,1,!1),Lt},destroyStream:function(ot){St.push(ot)},clear:function(){se(ut).forEach(at),St.forEach(at)},getBuffer:function(ot){return ot&&ot._buffer instanceof Pe?ot._buffer:null},restore:function(){se(ut).forEach(function(ot){ot.buffer=Oe.createBuffer(),Oe.bindBuffer(ot.type,ot.buffer),Oe.bufferData(ot.type,ot.persistentData||ot.byteLength,ot.usage)})},_initBuffer:Xe}}(Lt,jt,Oe),Kt=function(Oe,$e,ke,Le){function Pe(ot){this.id=pt++,at[this.id]=this,this.buffer=ot,this.primType=4,this.type=this.vertCount=0}function Ce(ot,Et,Lt,Qe,mt,It,jt){var Zt;if(ot.buffer.bind(),Et?((Zt=jt)||ne(Et)&&(!r(Et)||ne(Et.data))||(Zt=$e.oes_element_index_uint?5125:5123),ke._initBuffer(ot.buffer,Et,Lt,Zt,3)):(Oe.bufferData(34963,It,Lt),ot.buffer.dtype=Zt||5121,ot.buffer.usage=Lt,ot.buffer.dimension=3,ot.buffer.byteLength=It),Zt=jt,!jt){switch(ot.buffer.dtype){case 5121:case 5120:Zt=5121;break;case 5123:case 5122:Zt=5123;break;case 5125:case 5124:Zt=5125}ot.buffer.dtype=Zt}ot.type=Zt,0>(Et=mt)&&(Et=ot.buffer.byteLength,5123===Zt?Et>>=1:5125===Zt&&(Et>>=2)),ot.vertCount=Et,Et=Qe,0>Qe&&(Et=4,1===(Qe=ot.buffer.dimension)&&(Et=0),2===Qe&&(Et=1),3===Qe&&(Et=4)),ot.primType=Et}function Xe(ot){Le.elementsCount--,delete at[ot.id],ot.buffer.destroy(),ot.buffer=null}var at={},pt=0,ut={uint8:5121,uint16:5123};$e.oes_element_index_uint&&(ut.uint32=5125),Pe.prototype.bind=function(){this.buffer.bind()};var St=[];return{create:function(ot,Et){function Lt(It){if(It)if("number"==typeof It)Qe(It),mt.primType=4,mt.vertCount=0|It,mt.type=5121;else{var jt=null,Zt=35044,Re=-1,lt=-1,_t=0,Dt=0;Array.isArray(It)||ne(It)||r(It)?jt=It:("data"in It&&(jt=It.data),"usage"in It&&(Zt=ge[It.usage]),"primitive"in It&&(Re=Se[It.primitive]),"count"in It&&(lt=0|It.count),"type"in It&&(Dt=ut[It.type]),"length"in It?_t=0|It.length:(_t=lt,5123===Dt||5122===Dt?_t*=2:5125!==Dt&&5124!==Dt||(_t*=4))),Ce(mt,jt,Zt,Re,lt,_t,Dt)}else Qe(),mt.primType=4,mt.vertCount=0,mt.type=5121;return Lt}var Qe=ke.create(null,34963,!0),mt=new Pe(Qe._buffer);return Le.elementsCount++,Lt(ot),Lt._reglType="elements",Lt._elements=mt,Lt.subdata=function(It,jt){return Qe.subdata(It,jt),Lt},Lt.destroy=function(){Xe(mt)},Lt},createStream:function(ot){var Et=St.pop();return Et||(Et=new Pe(ke.create(null,34963,!0,!1)._buffer)),Ce(Et,ot,35040,-1,-1,0,0),Et},destroyStream:function(ot){St.push(ot)},getElements:function(ot){return"function"==typeof ot&&ot._elements instanceof Pe?ot._elements:null},clear:function(){se(at).forEach(Xe)}}}(Lt,Zt,Gt,jt),ir=function(Oe,$e,ke,Le,Pe,Ce,Xe){function at(){this.id=++St,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Lt=$e.oes_vertex_array_object;this.vao=Lt?Lt.createVertexArrayOES():null,ot[this.id]=this,this.buffers=[]}var pt=ke.maxAttributes,ut=Array(pt);for(ke=0;ke<pt;++ke)ut[ke]=new O;var St=0,ot={},Et={Record:O,scope:{},state:ut,currentVAO:null,targetVAO:null,restore:$e.oes_vertex_array_object?function(){$e.oes_vertex_array_object&&se(ot).forEach(function(Lt){Lt.refresh()})}:function(){},createVAO:function(Lt){function Qe(It){var jt;Array.isArray(It)?(jt=It,mt.elements&&mt.ownsElements&&mt.elements.destroy(),mt.elements=null,mt.ownsElements=!1,mt.offset=0,mt.count=0,mt.instances=-1,mt.primitive=4):(It.elements?(jt=It.elements,mt.ownsElements?("function"==typeof jt&&"elements"===jt._reglType?mt.elements.destroy():mt.elements(jt),mt.ownsElements=!1):Ce.getElements(It.elements)?(mt.elements=It.elements,mt.ownsElements=!1):(mt.elements=Ce.create(It.elements),mt.ownsElements=!0)):(mt.elements=null,mt.ownsElements=!1),jt=It.attributes,mt.offset=0,mt.count=-1,mt.instances=-1,mt.primitive=4,mt.elements&&(mt.count=mt.elements._elements.vertCount,mt.primitive=mt.elements._elements.primType),"offset"in It&&(mt.offset=0|It.offset),"count"in It&&(mt.count=0|It.count),"instances"in It&&(mt.instances=0|It.instances),"primitive"in It&&(mt.primitive=Se[It.primitive])),It={};var Zt=mt.attributes;Zt.length=jt.length;for(var Re=0;Re<jt.length;++Re){var lt,_t=jt[Re],Dt=Zt[Re]=new O,Vt=_t.data||_t;Array.isArray(Vt)||ne(Vt)||r(Vt)?(mt.buffers[Re]&&(lt=mt.buffers[Re],ne(Vt)&&lt._buffer.byteLength>=Vt.byteLength?lt.subdata(Vt):(lt.destroy(),mt.buffers[Re]=null)),mt.buffers[Re]||(lt=mt.buffers[Re]=Pe.create(_t,34962,!1,!0)),Dt.buffer=Pe.getBuffer(lt),Dt.size=0|Dt.buffer.dimension,Dt.normalized=!1,Dt.type=Dt.buffer.dtype,Dt.offset=0,Dt.stride=0,Dt.divisor=0,Dt.state=1,It[Re]=1):Pe.getBuffer(_t)?(Dt.buffer=Pe.getBuffer(_t),Dt.size=0|Dt.buffer.dimension,Dt.normalized=!1,Dt.type=Dt.buffer.dtype,Dt.offset=0,Dt.stride=0,Dt.divisor=0,Dt.state=1):Pe.getBuffer(_t.buffer)?(Dt.buffer=Pe.getBuffer(_t.buffer),Dt.size=0|(+_t.size||Dt.buffer.dimension),Dt.normalized=!!_t.normalized||!1,Dt.type="type"in _t?ce[_t.type]:Dt.buffer.dtype,Dt.offset=0|(_t.offset||0),Dt.stride=0|(_t.stride||0),Dt.divisor=0|(_t.divisor||0),Dt.state=1):"x"in _t&&(Dt.x=+_t.x||0,Dt.y=+_t.y||0,Dt.z=+_t.z||0,Dt.w=+_t.w||0,Dt.state=2)}for(lt=0;lt<mt.buffers.length;++lt)!It[lt]&&mt.buffers[lt]&&(mt.buffers[lt].destroy(),mt.buffers[lt]=null);return mt.refresh(),Qe}var mt=new at;return Le.vaoCount+=1,Qe.destroy=function(){for(var It=0;It<mt.buffers.length;++It)mt.buffers[It]&&mt.buffers[It].destroy();mt.buffers.length=0,mt.ownsElements&&(mt.elements.destroy(),mt.elements=null,mt.ownsElements=!1),mt.destroy()},Qe._vao=mt,Qe._reglType="vao",Qe(Lt)},getVAO:function(Lt){return"function"==typeof Lt&&Lt._vao?Lt._vao:null},destroyBuffer:function(Lt){for(var Qe=0;Qe<ut.length;++Qe){var mt=ut[Qe];mt.buffer===Lt&&(Oe.disableVertexAttribArray(Qe),mt.buffer=null)}},setVAO:$e.oes_vertex_array_object?function(Lt){Lt!==Et.currentVAO&&($e.oes_vertex_array_object.bindVertexArrayOES(Lt?Lt.vao:null),Et.currentVAO=Lt)}:function(Lt){if(Lt!==Et.currentVAO){if(Lt)Lt.bindAttrs();else{for(var Qe=$e.angle_instanced_arrays,mt=0;mt<ut.length;++mt){var It=ut[mt];It.buffer?(Oe.enableVertexAttribArray(mt),It.buffer.bind(),Oe.vertexAttribPointer(mt,It.size,It.type,It.normalized,It.stride,It.offfset),Qe&&It.divisor&&Qe.vertexAttribDivisorANGLE(mt,It.divisor)):(Oe.disableVertexAttribArray(mt),Oe.vertexAttrib4f(mt,It.x,It.y,It.z,It.w))}Oe.bindBuffer(34963,Xe.elements?Xe.elements.buffer.buffer:null)}Et.currentVAO=Lt}},clear:$e.oes_vertex_array_object?function(){se(ot).forEach(function(Lt){Lt.destroy()})}:function(){}};return at.prototype.bindAttrs=function(){for(var Lt=$e.angle_instanced_arrays,Qe=this.attributes,mt=0;mt<Qe.length;++mt){var It=Qe[mt];It.buffer?(Oe.enableVertexAttribArray(mt),Oe.bindBuffer(34962,It.buffer.buffer),Oe.vertexAttribPointer(mt,It.size,It.type,It.normalized,It.stride,It.offset),Lt&&It.divisor&&Lt.vertexAttribDivisorANGLE(mt,It.divisor)):(Oe.disableVertexAttribArray(mt),Oe.vertexAttrib4f(mt,It.x,It.y,It.z,It.w))}for(Lt=Qe.length;Lt<pt;++Lt)Oe.disableVertexAttribArray(Lt);(Lt=Ce.getElements(this.elements))?Oe.bindBuffer(34963,Lt.buffer.buffer):Oe.bindBuffer(34963,null)},at.prototype.refresh=function(){var Lt=$e.oes_vertex_array_object;Lt&&(Lt.bindVertexArrayOES(this.vao),this.bindAttrs(),Et.currentVAO=null,Lt.bindVertexArrayOES(null))},at.prototype.destroy=function(){if(this.vao){var Lt=$e.oes_vertex_array_object;this===Et.currentVAO&&(Et.currentVAO=null,Lt.bindVertexArrayOES(null)),Lt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ot[this.id]&&(delete ot[this.id],--Le.vaoCount)},Et}(Lt,Zt,nr,jt,Gt,Kt,_t),dr=function(Oe,$e,ke,Le){function Pe(Qe,mt,It,jt){this.name=Qe,this.id=mt,this.location=It,this.info=jt}function Ce(Qe,mt){for(var It=0;It<Qe.length;++It)if(Qe[It].id===mt.id)return void(Qe[It].location=mt.location);Qe.push(mt)}function Xe(Qe,mt,It){if(!(Zt=(It=35632===Qe?ut:St)[mt])){var jt=$e.str(mt),Zt=Oe.createShader(Qe);Oe.shaderSource(Zt,jt),Oe.compileShader(Zt),It[mt]=Zt}return Zt}function at(Qe,mt){this.id=Lt++,this.fragId=Qe,this.vertId=mt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Le.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function pt(Qe,mt,It){var jt;jt=Xe(35632,Qe.fragId);var Zt=Xe(35633,Qe.vertId);if(mt=Qe.program=Oe.createProgram(),Oe.attachShader(mt,jt),Oe.attachShader(mt,Zt),It)for(jt=0;jt<It.length;++jt)Oe.bindAttribLocation(mt,(Zt=It[jt])[0],Zt[1]);Oe.linkProgram(mt),Zt=Oe.getProgramParameter(mt,35718),Le.profile&&(Qe.stats.uniformsCount=Zt);var Re=Qe.uniforms;for(jt=0;jt<Zt;++jt)if(It=Oe.getActiveUniform(mt,jt)){if(1<It.size)for(var lt=0;lt<It.size;++lt){var _t=It.name.replace("[0]","["+lt+"]");Ce(Re,new Pe(_t,$e.id(_t),Oe.getUniformLocation(mt,_t),It))}lt=It.name,1<It.size&&(lt=lt.replace("[0]","")),Ce(Re,new Pe(lt,$e.id(lt),Oe.getUniformLocation(mt,lt),It))}for(Zt=Oe.getProgramParameter(mt,35721),Le.profile&&(Qe.stats.attributesCount=Zt),Qe=Qe.attributes,jt=0;jt<Zt;++jt)(It=Oe.getActiveAttrib(mt,jt))&&Ce(Qe,new Pe(It.name,$e.id(It.name),Oe.getAttribLocation(mt,It.name),It))}var ut={},St={},ot={},Et=[],Lt=0;return Le.profile&&(ke.getMaxUniformsCount=function(){var Qe=0;return Et.forEach(function(mt){mt.stats.uniformsCount>Qe&&(Qe=mt.stats.uniformsCount)}),Qe},ke.getMaxAttributesCount=function(){var Qe=0;return Et.forEach(function(mt){mt.stats.attributesCount>Qe&&(Qe=mt.stats.attributesCount)}),Qe}),{clear:function(){var Qe=Oe.deleteShader.bind(Oe);se(ut).forEach(Qe),ut={},se(St).forEach(Qe),St={},Et.forEach(function(mt){Oe.deleteProgram(mt.program)}),Et.length=0,ot={},ke.shaderCount=0},program:function(Qe,mt,It,jt){var Zt=ot[mt];Zt||(Zt=ot[mt]={});var Re=Zt[Qe];if(Re&&(Re.refCount++,!jt))return Re;var lt=new at(mt,Qe);return ke.shaderCount++,pt(lt,It,jt),Re||(Zt[Qe]=lt),Et.push(lt),N(lt,{destroy:function(){if(lt.refCount--,0>=lt.refCount){Oe.deleteProgram(lt.program);var _t=Et.indexOf(lt);Et.splice(_t,1),ke.shaderCount--}0>=Zt[lt.vertId].refCount&&(Oe.deleteShader(St[lt.vertId]),delete St[lt.vertId],delete ot[lt.fragId][lt.vertId]),Object.keys(ot[lt.fragId]).length||(Oe.deleteShader(ut[lt.fragId]),delete ut[lt.fragId],delete ot[lt.fragId])}})},restore:function(){ut={},St={};for(var Qe=0;Qe<Et.length;++Qe)pt(Et[Qe],null,Et[Qe].attributes.map(function(mt){return[mt.location,mt.name]}))},shader:Xe,frag:-1,vert:-1}}(Lt,It,jt,Oe),hr=function(Oe,$e,ke,Le,Pe,Ce,Xe){function at(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function pt($t,Ct){$t.internalformat=Ct.internalformat,$t.format=Ct.format,$t.type=Ct.type,$t.compressed=Ct.compressed,$t.premultiplyAlpha=Ct.premultiplyAlpha,$t.flipY=Ct.flipY,$t.unpackAlignment=Ct.unpackAlignment,$t.colorSpace=Ct.colorSpace,$t.width=Ct.width,$t.height=Ct.height,$t.channels=Ct.channels}function ut($t,Ct){if("object"==typeof Ct&&Ct){"premultiplyAlpha"in Ct&&($t.premultiplyAlpha=Ct.premultiplyAlpha),"flipY"in Ct&&($t.flipY=Ct.flipY),"alignment"in Ct&&($t.unpackAlignment=Ct.alignment),"colorSpace"in Ct&&($t.colorSpace=Ir[Ct.colorSpace]),"type"in Ct&&($t.type=vr[Ct.type]);var Ut=$t.width,lr=$t.height,_r=$t.channels,qr=!1;"shape"in Ct?(Ut=Ct.shape[0],lr=Ct.shape[1],3===Ct.shape.length&&(_r=Ct.shape[2],qr=!0)):("radius"in Ct&&(Ut=lr=Ct.radius),"width"in Ct&&(Ut=Ct.width),"height"in Ct&&(lr=Ct.height),"channels"in Ct&&(_r=Ct.channels,qr=!0)),$t.width=0|Ut,$t.height=0|lr,$t.channels=0|_r,Ut=!1,"format"in Ct&&(lr=$t.internalformat=Br[Ut=Ct.format],$t.format=Qr[lr],Ut in vr&&!("type"in Ct)&&($t.type=vr[Ut]),Ut in Jr&&($t.compressed=!0),Ut=!0),!qr&&Ut?$t.channels=Me[$t.format]:qr&&!Ut&&$t.channels!==_e[$t.format]&&($t.format=$t.internalformat=_e[$t.channels])}}function St($t){Oe.pixelStorei(37440,$t.flipY),Oe.pixelStorei(37441,$t.premultiplyAlpha),Oe.pixelStorei(37443,$t.colorSpace),Oe.pixelStorei(3317,$t.unpackAlignment)}function ot(){at.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Et($t,Ct){var Ut=null;if(_(Ct)?Ut=Ct:Ct&&(ut($t,Ct),"x"in Ct&&($t.xOffset=0|Ct.x),"y"in Ct&&($t.yOffset=0|Ct.y),_(Ct.data)&&(Ut=Ct.data)),Ct.copy){var lr=Pe.viewportWidth,_r=Pe.viewportHeight;$t.width=$t.width||lr-$t.xOffset,$t.height=$t.height||_r-$t.yOffset,$t.needsCopy=!0}else if(Ut){if(ne(Ut))$t.channels=$t.channels||4,$t.data=Ut,"type"in Ct||5121!==$t.type||($t.type=0|pe[Object.prototype.toString.call(Ut)]);else if(x(Ut)){switch($t.channels=$t.channels||4,_r=(lr=Ut).length,$t.type){case 5121:case 5123:case 5125:case 5126:(_r=K.allocType($t.type,_r)).set(lr),$t.data=_r;break;case 36193:$t.data=g(lr)}$t.alignment=1,$t.needsFree=!0}else if(r(Ut)){lr=Ut.data,Array.isArray(lr)||5121!==$t.type||($t.type=0|pe[Object.prototype.toString.call(lr)]);var qr,Vr,br,yr,kr=Ut.stride;3===(_r=Ut.shape).length?(br=_r[2],yr=kr[2]):yr=br=1,qr=_r[0],Vr=_r[1],_r=kr[0],kr=kr[1],$t.alignment=1,$t.width=qr,$t.height=Vr,$t.channels=br,$t.format=$t.internalformat=_e[br],$t.needsFree=!0,qr=yr,Ut=Ut.offset;for(var Cr=K.allocType(36193===$t.type?5126:$t.type,(br=$t.width)*(yr=$t.height)*(Vr=$t.channels)),Ar=0,Yr=0;Yr<yr;++Yr)for(var cn=0;cn<br;++cn)for(var yn=0;yn<Vr;++yn)Cr[Ar++]=lr[_r*cn+kr*Yr+qr*yn+Ut];T($t,Cr)}else if(w(Ut)===Ie||w(Ut)===ze||w(Ut)===Ve)$t.element=w(Ut)===Ie||w(Ut)===ze?Ut:Ut.canvas,$t.width=$t.element.width,$t.height=$t.element.height,$t.channels=4;else if(w(Ut)===Je)$t.element=Ut,$t.width=Ut.width,$t.height=Ut.height,$t.channels=4;else if(w(Ut)===De)$t.element=Ut,$t.width=Ut.naturalWidth,$t.height=Ut.naturalHeight,$t.channels=4;else if(w(Ut)===Be)$t.element=Ut,$t.width=Ut.videoWidth,$t.height=Ut.videoHeight,$t.channels=4;else if(d(Ut)){for(lr=$t.width||Ut[0].length,_r=$t.height||Ut.length,kr=$t.channels,kr=h(Ut[0][0])?kr||Ut[0][0].length:kr||1,qr=oe_shape(Ut),br=1,yr=0;yr<qr.length;++yr)br*=qr[yr];br=K.allocType(36193===$t.type?5126:$t.type,br),oe_flatten(Ut,qr,"",br),T($t,br),$t.alignment=1,$t.width=lr,$t.height=_r,$t.channels=kr,$t.format=$t.internalformat=_e[kr],$t.needsFree=!0}}else $t.width=$t.width||1,$t.height=$t.height||1,$t.channels=$t.channels||4}function Lt($t,Ct,Ut,lr,_r){var qr=$t.element,Vr=$t.data,br=$t.internalformat,yr=$t.format,kr=$t.type,Cr=$t.width,Ar=$t.height;St($t),qr?Oe.texSubImage2D(Ct,_r,Ut,lr,yr,kr,qr):$t.compressed?Oe.compressedTexSubImage2D(Ct,_r,Ut,lr,br,Cr,Ar,Vr):$t.needsCopy?(Le(),Oe.copyTexSubImage2D(Ct,_r,Ut,lr,$t.xOffset,$t.yOffset,Cr,Ar)):Oe.texSubImage2D(Ct,_r,Ut,lr,Cr,Ar,yr,kr,Vr)}function Qe(){return On.pop()||new ot}function mt($t){$t.needsFree&&K.freeType($t.data),ot.call($t),On.push($t)}function It(){at.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function jt($t,Ct,Ut){var lr=$t.images[0]=Qe();$t.mipmask=1,lr.width=$t.width=Ct,lr.height=$t.height=Ut,lr.channels=$t.channels=4}function Zt($t,Ct){var Ut=null;if(_(Ct))pt(Ut=$t.images[0]=Qe(),$t),Et(Ut,Ct),$t.mipmask=1;else if(ut($t,Ct),Array.isArray(Ct.mipmap))for(var lr=Ct.mipmap,_r=0;_r<lr.length;++_r)pt(Ut=$t.images[_r]=Qe(),$t),Ut.width>>=_r,Ut.height>>=_r,Et(Ut,lr[_r]),$t.mipmask|=1<<_r;else pt(Ut=$t.images[0]=Qe(),$t),Et(Ut,Ct),$t.mipmask=1;pt($t,$t.images[0])}function Re($t,Ct){for(var Ut=$t.images,lr=0;lr<Ut.length&&Ut[lr];++lr){var _r=Ut[lr],qr=Ct,Vr=lr,br=_r.element,yr=_r.data,kr=_r.internalformat,Cr=_r.format,Ar=_r.type,Yr=_r.width,cn=_r.height;St(_r),br?Oe.texImage2D(qr,Vr,Cr,Cr,Ar,br):_r.compressed?Oe.compressedTexImage2D(qr,Vr,kr,Yr,cn,0,yr):_r.needsCopy?(Le(),Oe.copyTexImage2D(qr,Vr,Cr,_r.xOffset,_r.yOffset,Yr,cn,0)):Oe.texImage2D(qr,Vr,Cr,Yr,cn,0,Cr,Ar,yr||null)}}function lt(){var $t=zr.pop()||new It;at.call($t);for(var Ct=$t.mipmask=0;16>Ct;++Ct)$t.images[Ct]=null;return $t}function _t($t){for(var Ct=$t.images,Ut=0;Ut<Ct.length;++Ut)Ct[Ut]&&mt(Ct[Ut]),Ct[Ut]=null;zr.push($t)}function Dt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Vt($t,Ct){"min"in Ct&&($t.minFilter=mr[Ct.min],0<=Te.indexOf($t.minFilter)&&!("faces"in Ct)&&($t.genMipmaps=!0)),"mag"in Ct&&($t.magFilter=sr[Ct.mag]);var Ut=$t.wrapS,lr=$t.wrapT;if("wrap"in Ct){var _r=Ct.wrap;"string"==typeof _r?Ut=lr=cr[_r]:Array.isArray(_r)&&(Ut=cr[_r[0]],lr=cr[_r[1]])}else"wrapS"in Ct&&(Ut=cr[Ct.wrapS]),"wrapT"in Ct&&(lr=cr[Ct.wrapT]);if($t.wrapS=Ut,$t.wrapT=lr,"anisotropic"in Ct&&($t.anisotropic=Ct.anisotropic),"mipmap"in Ct){switch(Ut=!1,typeof Ct.mipmap){case"string":$t.mipmapHint=hr[Ct.mipmap],Ut=$t.genMipmaps=!0;break;case"boolean":Ut=$t.genMipmaps=Ct.mipmap;break;case"object":$t.genMipmaps=!1,Ut=!0}!Ut||"min"in Ct||($t.minFilter=9984)}}function nr($t,Ct){Oe.texParameteri(Ct,10241,$t.minFilter),Oe.texParameteri(Ct,10240,$t.magFilter),Oe.texParameteri(Ct,10242,$t.wrapS),Oe.texParameteri(Ct,10243,$t.wrapT),$e.ext_texture_filter_anisotropic&&Oe.texParameteri(Ct,34046,$t.anisotropic),$t.genMipmaps&&(Oe.hint(33170,$t.mipmapHint),Oe.generateMipmap(Ct))}function Gt($t){at.call(this),this.mipmask=0,this.internalformat=6408,this.id=sn++,this.refCount=1,this.target=$t,this.texture=Oe.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Dt,Xe.profile&&(this.stats={size:0})}function Kt($t){Oe.activeTexture(33984),Oe.bindTexture($t.target,$t.texture)}function ir(){var $t=Rn[0];$t?Oe.bindTexture($t.target,$t.texture):Oe.bindTexture(3553,null)}function dr($t){var Ct=$t.texture,Ut=$t.unit,lr=$t.target;0<=Ut&&(Oe.activeTexture(33984+Ut),Oe.bindTexture(lr,null),Rn[Ut]=null),Oe.deleteTexture(Ct),$t.texture=null,$t.params=null,$t.pixels=null,$t.refCount=0,delete Mn[$t.id],Ce.textureCount--}var hr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},cr={repeat:10497,clamp:33071,mirror:33648},sr={nearest:9728,linear:9729},mr=N({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},sr),Ir={none:0,browser:37444},vr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Br={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Jr={};$e.ext_srgb&&(Br.srgb=35904,Br.srgba=35906),$e.oes_texture_float&&(vr.float32=vr.float=5126),$e.oes_texture_half_float&&(vr.float16=vr["half float"]=36193),$e.webgl_depth_texture&&(N(Br,{depth:6402,"depth stencil":34041}),N(vr,{uint16:5123,uint32:5125,"depth stencil":34042})),$e.webgl_compressed_texture_s3tc&&N(Jr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),$e.webgl_compressed_texture_atc&&N(Jr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),$e.webgl_compressed_texture_pvrtc&&N(Jr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),$e.webgl_compressed_texture_etc1&&(Jr["rgb etc1"]=36196);var ln=Array.prototype.slice.call(Oe.getParameter(34467));Object.keys(Jr).forEach(function($t){var Ct=Jr[$t];0<=ln.indexOf(Ct)&&(Br[$t]=Ct)});var En=Object.keys(Br);ke.textureFormats=En;var Cn=[];Object.keys(Br).forEach(function($t){Cn[Br[$t]]=$t});var An=[];Object.keys(vr).forEach(function($t){An[vr[$t]]=$t});var $r=[];Object.keys(sr).forEach(function($t){$r[sr[$t]]=$t});var Rr=[];Object.keys(mr).forEach(function($t){Rr[mr[$t]]=$t});var Lr=[];Object.keys(cr).forEach(function($t){Lr[cr[$t]]=$t});var Qr=En.reduce(function($t,Ct){var Ut=Br[Ct];return $t[Ut]=6409===Ut||6406===Ut||6409===Ut||6410===Ut||6402===Ut||34041===Ut||$e.ext_srgb&&(35904===Ut||35906===Ut)?Ut:32855===Ut||0<=Ct.indexOf("rgba")?6408:6407,$t},{}),On=[],zr=[],sn=0,Mn={},Tn=ke.maxTextureUnits,Rn=Array(Tn).map(function(){return null});return N(Gt.prototype,{bind:function(){this.bindCount+=1;var $t=this.unit;if(0>$t){for(var Ct=0;Ct<Tn;++Ct){var Ut=Rn[Ct];if(Ut){if(0<Ut.bindCount)continue;Ut.unit=-1}Rn[Ct]=this,$t=Ct;break}Xe.profile&&Ce.maxTextureUnits<$t+1&&(Ce.maxTextureUnits=$t+1),this.unit=$t,Oe.activeTexture(33984+$t),Oe.bindTexture(this.target,this.texture)}return $t},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&dr(this)}}),Xe.profile&&(Ce.getTotalTextureSize=function(){var $t=0;return Object.keys(Mn).forEach(function(Ct){$t+=Mn[Ct].stats.size}),$t}),{create2D:function($t,Ct){function Ut(_r,qr){var Vr=lr.texInfo;Dt.call(Vr);var br=lt();return"number"==typeof _r?jt(br,0|_r,"number"==typeof qr?0|qr:0|_r):_r?(Vt(Vr,_r),Zt(br,_r)):jt(br,1,1),Vr.genMipmaps&&(br.mipmask=(br.width<<1)-1),lr.mipmask=br.mipmask,pt(lr,br),lr.internalformat=br.internalformat,Ut.width=br.width,Ut.height=br.height,Kt(lr),Re(br,3553),nr(Vr,3553),ir(),_t(br),Xe.profile&&(lr.stats.size=k(lr.internalformat,lr.type,br.width,br.height,Vr.genMipmaps,!1)),Ut.format=Cn[lr.internalformat],Ut.type=An[lr.type],Ut.mag=$r[Vr.magFilter],Ut.min=Rr[Vr.minFilter],Ut.wrapS=Lr[Vr.wrapS],Ut.wrapT=Lr[Vr.wrapT],Ut}var lr=new Gt(3553);return Mn[lr.id]=lr,Ce.textureCount++,Ut($t,Ct),Ut.subimage=function(_r,qr,Vr,br){qr|=0,Vr|=0,br|=0;var yr=Qe();return pt(yr,lr),yr.width=0,yr.height=0,Et(yr,_r),yr.width=yr.width||(lr.width>>br)-qr,yr.height=yr.height||(lr.height>>br)-Vr,Kt(lr),Lt(yr,3553,qr,Vr,br),ir(),mt(yr),Ut},Ut.resize=function(_r,qr){var Vr=0|_r,br=0|qr||Vr;if(Vr===lr.width&&br===lr.height)return Ut;Ut.width=lr.width=Vr,Ut.height=lr.height=br,Kt(lr);for(var yr=0;lr.mipmask>>yr;++yr){var kr=Vr>>yr,Cr=br>>yr;if(!kr||!Cr)break;Oe.texImage2D(3553,yr,lr.format,kr,Cr,0,lr.format,lr.type,null)}return ir(),Xe.profile&&(lr.stats.size=k(lr.internalformat,lr.type,Vr,br,!1,!1)),Ut},Ut._reglType="texture2d",Ut._texture=lr,Xe.profile&&(Ut.stats=lr.stats),Ut.destroy=function(){lr.decRef()},Ut},createCube:function($t,Ct,Ut,lr,_r,qr){function Vr(kr,Cr,Ar,Yr,cn,yn){var Kr,mn=br.texInfo;for(Dt.call(mn),Kr=0;6>Kr;++Kr)yr[Kr]=lt();if("number"!=typeof kr&&kr){if("object"==typeof kr)if(Cr)Zt(yr[0],kr),Zt(yr[1],Cr),Zt(yr[2],Ar),Zt(yr[3],Yr),Zt(yr[4],cn),Zt(yr[5],yn);else if(Vt(mn,kr),ut(br,kr),"faces"in kr)for(kr=kr.faces,Kr=0;6>Kr;++Kr)pt(yr[Kr],br),Zt(yr[Kr],kr[Kr]);else for(Kr=0;6>Kr;++Kr)Zt(yr[Kr],kr)}else for(kr=0|kr||1,Kr=0;6>Kr;++Kr)jt(yr[Kr],kr,kr);for(pt(br,yr[0]),br.mipmask=mn.genMipmaps?(yr[0].width<<1)-1:yr[0].mipmask,br.internalformat=yr[0].internalformat,Vr.width=yr[0].width,Vr.height=yr[0].height,Kt(br),Kr=0;6>Kr;++Kr)Re(yr[Kr],34069+Kr);for(nr(mn,34067),ir(),Xe.profile&&(br.stats.size=k(br.internalformat,br.type,Vr.width,Vr.height,mn.genMipmaps,!0)),Vr.format=Cn[br.internalformat],Vr.type=An[br.type],Vr.mag=$r[mn.magFilter],Vr.min=Rr[mn.minFilter],Vr.wrapS=Lr[mn.wrapS],Vr.wrapT=Lr[mn.wrapT],Kr=0;6>Kr;++Kr)_t(yr[Kr]);return Vr}var br=new Gt(34067);Mn[br.id]=br,Ce.cubeCount++;var yr=Array(6);return Vr($t,Ct,Ut,lr,_r,qr),Vr.subimage=function(kr,Cr,Ar,Yr,cn){Ar|=0,Yr|=0,cn|=0;var yn=Qe();return pt(yn,br),yn.width=0,yn.height=0,Et(yn,Cr),yn.width=yn.width||(br.width>>cn)-Ar,yn.height=yn.height||(br.height>>cn)-Yr,Kt(br),Lt(yn,34069+kr,Ar,Yr,cn),ir(),mt(yn),Vr},Vr.resize=function(kr){if((kr|=0)!==br.width){Vr.width=br.width=kr,Vr.height=br.height=kr,Kt(br);for(var Cr=0;6>Cr;++Cr)for(var Ar=0;br.mipmask>>Ar;++Ar)Oe.texImage2D(34069+Cr,Ar,br.format,kr>>Ar,kr>>Ar,0,br.format,br.type,null);return ir(),Xe.profile&&(br.stats.size=k(br.internalformat,br.type,Vr.width,Vr.height,!1,!0)),Vr}},Vr._reglType="textureCube",Vr._texture=br,Xe.profile&&(Vr.stats=br.stats),Vr.destroy=function(){br.decRef()},Vr},clear:function(){for(var $t=0;$t<Tn;++$t)Oe.activeTexture(33984+$t),Oe.bindTexture(3553,null),Rn[$t]=null;se(Mn).forEach(dr),Ce.cubeCount=0,Ce.textureCount=0},getTexture:function($t){return null},restore:function(){for(var $t=0;$t<Tn;++$t){var Ct=Rn[$t];Ct&&(Ct.bindCount=0,Ct.unit=-1,Rn[$t]=null)}se(Mn).forEach(function(Ut){Ut.texture=Oe.createTexture(),Oe.bindTexture(Ut.target,Ut.texture);for(var lr=0;32>lr;++lr)if(0!=(Ut.mipmask&1<<lr))if(3553===Ut.target)Oe.texImage2D(3553,lr,Ut.internalformat,Ut.width>>lr,Ut.height>>lr,0,Ut.internalformat,Ut.type,null);else for(var _r=0;6>_r;++_r)Oe.texImage2D(34069+_r,lr,Ut.internalformat,Ut.width>>lr,Ut.height>>lr,0,Ut.internalformat,Ut.type,null);nr(Ut.texInfo,Ut.target)})},refresh:function(){for(var $t=0;$t<Tn;++$t){var Ct=Rn[$t];Ct&&(Ct.bindCount=0,Ct.unit=-1,Rn[$t]=null),Oe.activeTexture(33984+$t),Oe.bindTexture(3553,null),Oe.bindTexture(34067,null)}}}}(Lt,Zt,nr,function(){mr.procs.poll()},Vt,jt,Oe),cr=function(Oe,$e,ke,Le,Pe){function Ce(ot){this.id=ut++,this.refCount=1,this.renderbuffer=ot,this.format=32854,this.height=this.width=0,Pe.profile&&(this.stats={size:0})}function Xe(ot){var Et=ot.renderbuffer;Oe.bindRenderbuffer(36161,null),Oe.deleteRenderbuffer(Et),ot.renderbuffer=null,ot.refCount=0,delete St[ot.id],Le.renderbufferCount--}var at={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};$e.ext_srgb&&(at.srgba=35907),$e.ext_color_buffer_half_float&&(at.rgba16f=34842,at.rgb16f=34843),$e.webgl_color_buffer_float&&(at.rgba32f=34836);var pt=[];Object.keys(at).forEach(function(ot){pt[at[ot]]=ot});var ut=0,St={};return Ce.prototype.decRef=function(){0>=--this.refCount&&Xe(this)},Pe.profile&&(Le.getTotalRenderbufferSize=function(){var ot=0;return Object.keys(St).forEach(function(Et){ot+=St[Et].stats.size}),ot}),{create:function(ot,Et){function Lt(mt,It){var jt=0,Zt=0,Re=32854;if("object"==typeof mt&&mt?("shape"in mt?(jt=0|(Zt=mt.shape)[0],Zt=0|Zt[1]):("radius"in mt&&(jt=Zt=0|mt.radius),"width"in mt&&(jt=0|mt.width),"height"in mt&&(Zt=0|mt.height)),"format"in mt&&(Re=at[mt.format])):"number"==typeof mt?(jt=0|mt,Zt="number"==typeof It?0|It:jt):mt||(jt=Zt=1),jt!==Qe.width||Zt!==Qe.height||Re!==Qe.format)return Lt.width=Qe.width=jt,Lt.height=Qe.height=Zt,Qe.format=Re,Oe.bindRenderbuffer(36161,Qe.renderbuffer),Oe.renderbufferStorage(36161,Re,jt,Zt),Pe.profile&&(Qe.stats.size=st[Qe.format]*Qe.width*Qe.height),Lt.format=pt[Qe.format],Lt}var Qe=new Ce(Oe.createRenderbuffer());return St[Qe.id]=Qe,Le.renderbufferCount++,Lt(ot,Et),Lt.resize=function(mt,It){var jt=0|mt,Zt=0|It||jt;return jt===Qe.width&&Zt===Qe.height||(Lt.width=Qe.width=jt,Lt.height=Qe.height=Zt,Oe.bindRenderbuffer(36161,Qe.renderbuffer),Oe.renderbufferStorage(36161,Qe.format,jt,Zt),Pe.profile&&(Qe.stats.size=st[Qe.format]*Qe.width*Qe.height)),Lt},Lt._reglType="renderbuffer",Lt._renderbuffer=Qe,Pe.profile&&(Lt.stats=Qe.stats),Lt.destroy=function(){Qe.decRef()},Lt},clear:function(){se(St).forEach(Xe)},restore:function(){se(St).forEach(function(ot){ot.renderbuffer=Oe.createRenderbuffer(),Oe.bindRenderbuffer(36161,ot.renderbuffer),Oe.renderbufferStorage(36161,ot.format,ot.width,ot.height)}),Oe.bindRenderbuffer(36161,null)}}}(Lt,Zt,0,jt,Oe),sr=function(Oe,$e,ke,Le,Pe,Ce){function Xe(Gt,Kt,ir){this.target=Gt,this.texture=Kt,this.renderbuffer=ir;var dr=Gt=0;Kt?(Gt=Kt.width,dr=Kt.height):ir&&(Gt=ir.width,dr=ir.height),this.width=Gt,this.height=dr}function at(Gt){Gt&&(Gt.texture&&Gt.texture._texture.decRef(),Gt.renderbuffer&&Gt.renderbuffer._renderbuffer.decRef())}function pt(Gt,Kt,ir){Gt&&(Gt.texture?Gt.texture._texture.refCount+=1:Gt.renderbuffer._renderbuffer.refCount+=1)}function ut(Gt,Kt){Kt&&(Kt.texture?Oe.framebufferTexture2D(36160,Gt,Kt.target,Kt.texture._texture.texture,0):Oe.framebufferRenderbuffer(36160,Gt,36161,Kt.renderbuffer._renderbuffer.renderbuffer))}function St(Gt){var Kt=3553,ir=null,dr=null,hr=Gt;return"object"==typeof Gt&&(hr=Gt.data,"target"in Gt&&(Kt=0|Gt.target)),"texture2d"===(Gt=hr._reglType)||"textureCube"===Gt?ir=hr:"renderbuffer"===Gt&&(dr=hr,Kt=36161),new Xe(Kt,ir,dr)}function ot(Gt,Kt,ir,dr,hr){return ir?((Gt=Le.create2D({width:Gt,height:Kt,format:dr,type:hr}))._texture.refCount=0,new Xe(3553,Gt,null)):((Gt=Pe.create({width:Gt,height:Kt,format:dr}))._renderbuffer.refCount=0,new Xe(36161,null,Gt))}function Et(Gt){return Gt&&(Gt.texture||Gt.renderbuffer)}function Lt(Gt,Kt,ir){Gt&&(Gt.texture?Gt.texture.resize(Kt,ir):Gt.renderbuffer&&Gt.renderbuffer.resize(Kt,ir),Gt.width=Kt,Gt.height=ir)}function Qe(){this.id=Vt++,nr[this.id]=this,this.framebuffer=Oe.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function mt(Gt){Gt.colorAttachments.forEach(at),at(Gt.depthAttachment),at(Gt.stencilAttachment),at(Gt.depthStencilAttachment)}function It(Gt){Oe.deleteFramebuffer(Gt.framebuffer),Gt.framebuffer=null,Ce.framebufferCount--,delete nr[Gt.id]}function jt(Gt){var Kt;Oe.bindFramebuffer(36160,Gt.framebuffer);var ir=Gt.colorAttachments;for(Kt=0;Kt<ir.length;++Kt)ut(36064+Kt,ir[Kt]);for(Kt=ir.length;Kt<ke.maxColorAttachments;++Kt)Oe.framebufferTexture2D(36160,36064+Kt,3553,null,0);Oe.framebufferTexture2D(36160,33306,3553,null,0),Oe.framebufferTexture2D(36160,36096,3553,null,0),Oe.framebufferTexture2D(36160,36128,3553,null,0),ut(36096,Gt.depthAttachment),ut(36128,Gt.stencilAttachment),ut(33306,Gt.depthStencilAttachment),Oe.checkFramebufferStatus(36160),Oe.isContextLost(),Oe.bindFramebuffer(36160,Re.next?Re.next.framebuffer:null),Re.cur=Re.next,Oe.getError()}function Zt(Gt,Kt){function ir(hr,cr){var sr,mr=0,Ir=0,vr=!0,Br=!0;sr=null;var Jr=!0,ln="rgba",En="uint8",Cn=1,An=null,$r=null,Rr=null,Lr=!1;"number"==typeof hr?(mr=0|hr,Ir=0|cr||mr):hr?("shape"in hr?(mr=(Ir=hr.shape)[0],Ir=Ir[1]):("radius"in hr&&(mr=Ir=hr.radius),"width"in hr&&(mr=hr.width),"height"in hr&&(Ir=hr.height)),("color"in hr||"colors"in hr)&&(sr=hr.color||hr.colors,Array.isArray(sr)),sr||("colorCount"in hr&&(Cn=0|hr.colorCount),"colorTexture"in hr&&(Jr=!!hr.colorTexture,ln="rgba4"),"colorType"in hr&&(En=hr.colorType,!Jr)&&("half float"===En||"float16"===En?ln="rgba16f":"float"!==En&&"float32"!==En||(ln="rgba32f")),"colorFormat"in hr&&(0<=lt.indexOf(ln=hr.colorFormat)?Jr=!0:0<=_t.indexOf(ln)&&(Jr=!1))),("depthTexture"in hr||"depthStencilTexture"in hr)&&(Lr=!(!hr.depthTexture&&!hr.depthStencilTexture)),"depth"in hr&&("boolean"==typeof hr.depth?vr=hr.depth:(An=hr.depth,Br=!1)),"stencil"in hr&&("boolean"==typeof hr.stencil?Br=hr.stencil:($r=hr.stencil,vr=!1)),"depthStencil"in hr&&("boolean"==typeof hr.depthStencil?vr=Br=hr.depthStencil:(Rr=hr.depthStencil,Br=vr=!1))):mr=Ir=1;var Qr=null,On=null,zr=null,sn=null;if(Array.isArray(sr))Qr=sr.map(St);else if(sr)Qr=[St(sr)];else for(Qr=Array(Cn),sr=0;sr<Cn;++sr)Qr[sr]=ot(mr,Ir,Jr,ln,En);for(mr=mr||Qr[0].width,Ir=Ir||Qr[0].height,An?On=St(An):vr&&!Br&&(On=ot(mr,Ir,Lr,"depth","uint32")),$r?zr=St($r):Br&&!vr&&(zr=ot(mr,Ir,!1,"stencil","uint8")),Rr?sn=St(Rr):!An&&!$r&&Br&&vr&&(sn=ot(mr,Ir,Lr,"depth stencil","depth stencil")),vr=null,sr=0;sr<Qr.length;++sr)pt(Qr[sr]),Qr[sr]&&Qr[sr].texture&&(Br=Pt[Qr[sr].texture._texture.format]*Mt[Qr[sr].texture._texture.type],null===vr&&(vr=Br));return pt(On),pt(zr),pt(sn),mt(dr),dr.width=mr,dr.height=Ir,dr.colorAttachments=Qr,dr.depthAttachment=On,dr.stencilAttachment=zr,dr.depthStencilAttachment=sn,ir.color=Qr.map(Et),ir.depth=Et(On),ir.stencil=Et(zr),ir.depthStencil=Et(sn),ir.width=dr.width,ir.height=dr.height,jt(dr),ir}var dr=new Qe;return Ce.framebufferCount++,ir(Gt,Kt),N(ir,{resize:function(hr,cr){var sr=Math.max(0|hr,1),mr=Math.max(0|cr||sr,1);if(sr===dr.width&&mr===dr.height)return ir;for(var Ir=dr.colorAttachments,vr=0;vr<Ir.length;++vr)Lt(Ir[vr],sr,mr);return Lt(dr.depthAttachment,sr,mr),Lt(dr.stencilAttachment,sr,mr),Lt(dr.depthStencilAttachment,sr,mr),dr.width=ir.width=sr,dr.height=ir.height=mr,jt(dr),ir},_reglType:"framebuffer",_framebuffer:dr,destroy:function(){It(dr),mt(dr)},use:function(hr){Re.setFBO({framebuffer:ir},hr)}})}var Re={cur:null,next:null,dirty:!1,setFBO:null},lt=["rgba"],_t=["rgba4","rgb565","rgb5 a1"];$e.ext_srgb&&_t.push("srgba"),$e.ext_color_buffer_half_float&&_t.push("rgba16f","rgb16f"),$e.webgl_color_buffer_float&&_t.push("rgba32f");var Dt=["uint8"];$e.oes_texture_half_float&&Dt.push("half float","float16"),$e.oes_texture_float&&Dt.push("float","float32");var Vt=0,nr={};return N(Re,{getFramebuffer:function(Gt){return"function"==typeof Gt&&"framebuffer"===Gt._reglType&&(Gt=Gt._framebuffer)instanceof Qe?Gt:null},create:Zt,createCube:function(Gt){function Kt(dr){var hr,cr={color:null},sr=0,mr=null;hr="rgba";var Ir="uint8",vr=1;if("number"==typeof dr?sr=0|dr:dr?("shape"in dr?sr=dr.shape[0]:("radius"in dr&&(sr=0|dr.radius),"width"in dr?sr=0|dr.width:"height"in dr&&(sr=0|dr.height)),("color"in dr||"colors"in dr)&&(mr=dr.color||dr.colors,Array.isArray(mr)),mr||("colorCount"in dr&&(vr=0|dr.colorCount),"colorType"in dr&&(Ir=dr.colorType),"colorFormat"in dr&&(hr=dr.colorFormat)),"depth"in dr&&(cr.depth=dr.depth),"stencil"in dr&&(cr.stencil=dr.stencil),"depthStencil"in dr&&(cr.depthStencil=dr.depthStencil)):sr=1,mr)if(Array.isArray(mr))for(dr=[],hr=0;hr<mr.length;++hr)dr[hr]=mr[hr];else dr=[mr];else for(dr=Array(vr),mr={radius:sr,format:hr,type:Ir},hr=0;hr<vr;++hr)dr[hr]=Le.createCube(mr);for(cr.color=Array(dr.length),hr=0;hr<dr.length;++hr)vr=dr[hr],sr=sr||vr.width,cr.color[hr]={target:34069,data:dr[hr]};for(hr=0;6>hr;++hr){for(vr=0;vr<dr.length;++vr)cr.color[vr].target=34069+hr;0<hr&&(cr.depth=ir[0].depth,cr.stencil=ir[0].stencil,cr.depthStencil=ir[0].depthStencil),ir[hr]?ir[hr](cr):ir[hr]=Zt(cr)}return N(Kt,{width:sr,height:sr,color:dr})}var ir=Array(6);return Kt(Gt),N(Kt,{faces:ir,resize:function(dr){var hr=0|dr;if(hr===Kt.width)return Kt;var cr=Kt.color;for(dr=0;dr<cr.length;++dr)cr[dr].resize(hr);for(dr=0;6>dr;++dr)ir[dr].resize(hr);return Kt.width=Kt.height=hr,Kt},_reglType:"framebufferCube",destroy:function(){ir.forEach(function(dr){dr.destroy()})}})},clear:function(){se(nr).forEach(It)},restore:function(){Re.cur=null,Re.next=null,Re.dirty=!0,se(nr).forEach(function(Gt){Gt.framebuffer=Oe.createFramebuffer(),jt(Gt)})}})}(Lt,Zt,nr,hr,cr,jt),mr=te(Lt,It,Zt,nr,Gt,Kt,0,sr,{},ir,dr,_t,Vt,Re,Oe),Ir=(It=function(Oe,$e,ke,Le,Pe,Ce,Xe){function at(pt){var ut;ut=null===$e.next?5121:$e.next.colorAttachments[0].texture._texture.type;var St=0,ot=0,Et=Le.framebufferWidth,Lt=Le.framebufferHeight,Qe=null;return ne(pt)?Qe=pt:pt&&(St=0|pt.x,ot=0|pt.y,Et=0|(pt.width||Le.framebufferWidth-St),Lt=0|(pt.height||Le.framebufferHeight-ot),Qe=pt.data||null),ke(),pt=Et*Lt*4,Qe||(5121===ut?Qe=new Uint8Array(pt):5126===ut&&(Qe=Qe||new Float32Array(pt))),Oe.pixelStorei(3333,4),Oe.readPixels(St,ot,Et,Lt,6408,ut,Qe),Qe}return function(pt){return pt&&"framebuffer"in pt?($e.setFBO({framebuffer:(ut=pt).framebuffer},function(){St=at(ut)}),St):at(pt);var ut,St}}(Lt,sr,mr.procs.poll,Vt),mr.next),vr=Lt.canvas,Br=[],Jr=[],ln=[],En=[Oe.onDestroy],Cn=null;vr&&(vr.addEventListener("webglcontextlost",Pe,!1),vr.addEventListener("webglcontextrestored",Ce,!1));var An=sr.setFBO=Xe({framebuffer:Q.define.call(null,1,"framebuffer")});return ot(),Qe=N(Xe,{clear:function($r){if("framebuffer"in $r)if($r.framebuffer&&"framebufferCube"===$r.framebuffer_reglType)for(var Rr=0;6>Rr;++Rr)An(N({framebuffer:$r.framebuffer.faces[Rr]},$r),at);else An($r,at);else at(0,$r)},prop:Q.define.bind(null,1),context:Q.define.bind(null,2),this:Q.define.bind(null,3),draw:Xe({}),buffer:function($r){return Gt.create($r,34962,!1,!1)},elements:function($r){return Kt.create($r,!1)},texture:hr.create2D,cube:hr.createCube,renderbuffer:cr.create,framebuffer:sr.create,framebufferCube:sr.createCube,vao:ir.createVAO,attributes:Qe,frame:pt,on:function($r,Rr){var Lr;switch($r){case"frame":return pt(Rr);case"lost":Lr=Jr;break;case"restore":Lr=ln;break;case"destroy":Lr=En}return Lr.push(Rr),{cancel:function(){for(var Qr=0;Qr<Lr.length;++Qr)if(Lr[Qr]===Rr){Lr[Qr]=Lr[Lr.length-1],Lr.pop();break}}}},limits:nr,hasExtension:function($r){return 0<=nr.extensions.indexOf($r.toLowerCase())},read:It,destroy:function(){Br.length=0,Le(),vr&&(vr.removeEventListener("webglcontextlost",Pe),vr.removeEventListener("webglcontextrestored",Ce)),dr.clear(),sr.clear(),cr.clear(),ir.clear(),hr.clear(),Kt.clear(),Gt.clear(),Re&&Re.clear(),En.forEach(function($r){$r()})},_gl:Lt,_refresh:ot,poll:function(){St(),Re&&Re.update()},now:Et,stats:jt}),Oe.onDone(null,Qe),Qe}},"object"==typeof ee&&void 0!==$?$.exports=m():this.createREGL=m()},{}],284:[function(y,$,ee){var p=y("buffer"),m=p.Buffer;function b(e,n){for(var t in e)n[t]=e[t]}function v(e,n,t){return m(e,n,t)}m.from&&m.alloc&&m.allocUnsafe&&m.allocUnsafeSlow?$.exports=p:(b(p,ee),ee.Buffer=v),v.prototype=Object.create(m.prototype),b(m,v),v.from=function(e,n,t){if("number"==typeof e)throw new TypeError("Argument must not be a number");return m(e,n,t)},v.alloc=function(e,n,t){if("number"!=typeof e)throw new TypeError("Argument must be a number");var a=m(e);return void 0!==n?"string"==typeof t?a.fill(n,t):a.fill(n):a.fill(0),a},v.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return m(e)},v.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return p.SlowBuffer(e)}},{buffer:85}],285:[function(y,$,ee){$.exports=m;var p=y("events").EventEmitter;function m(){p.call(this)}y("inherits")(m,p),m.Readable=y("readable-stream/lib/_stream_readable.js"),m.Writable=y("readable-stream/lib/_stream_writable.js"),m.Duplex=y("readable-stream/lib/_stream_duplex.js"),m.Transform=y("readable-stream/lib/_stream_transform.js"),m.PassThrough=y("readable-stream/lib/_stream_passthrough.js"),m.finished=y("readable-stream/lib/internal/streams/end-of-stream.js"),m.pipeline=y("readable-stream/lib/internal/streams/pipeline.js"),m.Stream=m,m.prototype.pipe=function(b,v){var e=this;function n(l){b.writable&&!1===b.write(l)&&e.pause&&e.pause()}function t(){e.readable&&e.resume&&e.resume()}e.on("data",n),b.on("drain",t),b._isStdio||v&&!1===v.end||(e.on("end",r),e.on("close",u));var a=!1;function r(){a||(a=!0,b.end())}function u(){a||(a=!0,"function"==typeof b.destroy&&b.destroy())}function s(l){if(i(),0===p.listenerCount(this,"error"))throw l}function i(){e.removeListener("data",n),b.removeListener("drain",t),e.removeListener("end",r),e.removeListener("close",u),e.removeListener("error",s),b.removeListener("error",s),e.removeListener("end",i),e.removeListener("close",i),b.removeListener("close",i)}return e.on("error",s),b.on("error",s),e.on("end",i),e.on("close",i),b.on("close",i),b.emit("pipe",e),b}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(y,$,ee){"use strict";var p={};function m(v,e,n){n||(n=Error);var t=function(a){var r,u;function s(i,l,c){return a.call(this,"string"==typeof e?e:e(i,l,c))||this}return u=a,(r=s).prototype=Object.create(u.prototype),r.prototype.constructor=r,r.__proto__=u,s}(n);t.prototype.name=n.name,t.prototype.code=v,p[v]=t}function b(v,e){if(Array.isArray(v)){var n=v.length;return v=v.map(function(t){return String(t)}),n>2?"one of ".concat(e," ").concat(v.slice(0,n-1).join(", "),", or ")+v[n-1]:2===n?"one of ".concat(e," ").concat(v[0]," or ").concat(v[1]):"of ".concat(e," ").concat(v[0])}return"of ".concat(e," ").concat(String(v))}m("ERR_INVALID_OPT_VALUE",function(v,e){return'The value "'+e+'" is invalid for option "'+v+'"'},TypeError),m("ERR_INVALID_ARG_TYPE",function(v,e,n){var t,u,i,c;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(t="must not be",e=e.replace(/^not /,"")):t="must be",i=v,(void 0===c||c>i.length)&&(c=i.length)," argument"===i.substring(c-" argument".length,c))u="The ".concat(v," ").concat(t," ").concat(b(e,"type"));else{var s=function(i,l,c){return"number"!=typeof c&&(c=0),!(c+".".length>i.length)&&-1!==i.indexOf(".",c)}(v)?"property":"argument";u='The "'.concat(v,'" ').concat(s," ").concat(t," ").concat(b(e,"type"))}return u+". Received type ".concat(typeof n)},TypeError),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),m("ERR_METHOD_NOT_IMPLEMENTED",function(v){return"The "+v+" method is not implemented"}),m("ERR_STREAM_PREMATURE_CLOSE","Premature close"),m("ERR_STREAM_DESTROYED",function(v){return"Cannot call "+v+" after a stream was destroyed"}),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),m("ERR_STREAM_WRITE_AFTER_END","write after end"),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_UNKNOWN_ENCODING",function(v){return"Unknown encoding: "+v},TypeError),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),$.exports.codes=p},{}],287:[function(y,$,ee){(function(p){(function(){"use strict";var m=Object.keys||function(s){var i=[];for(var l in s)i.push(l);return i};$.exports=a;var b=y("./_stream_readable"),v=y("./_stream_writable");y("inherits")(a,b);for(var e=m(v.prototype),n=0;n<e.length;n++){var t=e[n];a.prototype[t]||(a.prototype[t]=v.prototype[t])}function a(s){if(!(this instanceof a))return new a(s);b.call(this,s),v.call(this,s),this.allowHalfOpen=!0,s&&(!1===s.readable&&(this.readable=!1),!1===s.writable&&(this.writable=!1),!1===s.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",r)))}function r(){this._writableState.ended||p.nextTick(u,this)}function u(s){s.end()}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(s){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=s,this._writableState.destroyed=s)}})}).call(this)}).call(this,y("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(y,$,ee){"use strict";$.exports=m;var p=y("./_stream_transform");function m(b){if(!(this instanceof m))return new m(b);p.call(this,b)}y("inherits")(m,p),m.prototype._transform=function(b,v,e){e(null,b)}},{"./_stream_transform":290,inherits:231}],289:[function(y,$,ee){(function(p,m){(function(){"use strict";var b;$.exports=k,k.ReadableState=T,y("events");var a,v=function(D,N){return D.listeners(N).length},e=y("./internal/streams/stream"),n=y("buffer").Buffer,t=m.Uint8Array||function(){},r=y("util");a=r&&r.debuglog?r.debuglog("stream"):function(){};var u,s,i,l=y("./internal/streams/buffer_list"),c=y("./internal/streams/destroy"),f=y("./internal/streams/state").getHighWaterMark,g=y("../errors").codes,h=g.ERR_INVALID_ARG_TYPE,o=g.ERR_STREAM_PUSH_AFTER_EOF,x=g.ERR_METHOD_NOT_IMPLEMENTED,d=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;y("inherits")(k,e);var w=c.errorOrDestroy,_=["error","close","destroy","pause","resume"];function T(D,N,U){b=b||y("./_stream_duplex"),"boolean"!=typeof U&&(U=N instanceof b),this.objectMode=!!(D=D||{}).objectMode,U&&(this.objectMode=this.objectMode||!!D.readableObjectMode),this.highWaterMark=f(this,D,"readableHighWaterMark",U),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==D.emitClose,this.autoDestroy=!!D.autoDestroy,this.destroyed=!1,this.defaultEncoding=D.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,D.encoding&&(u||(u=y("string_decoder/").StringDecoder),this.decoder=new u(D.encoding),this.encoding=D.encoding)}function k(D){if(b=b||y("./_stream_duplex"),!(this instanceof k))return new k(D);this._readableState=new T(D,this,this instanceof b),this.readable=!0,D&&("function"==typeof D.read&&(this._read=D.read),"function"==typeof D.destroy&&(this._destroy=D.destroy)),e.call(this)}function L(D,N,U,Q,j){a("readableAddChunk",N);var J,re,ne,se,oe,K=D._readableState;if(null===N)K.reading=!1,function(re,ne){if(a("onEofChunk"),!ne.ended){if(ne.decoder){var se=ne.decoder.end();se&&se.length&&(ne.buffer.push(se),ne.length+=ne.objectMode?1:se.length)}ne.ended=!0,ne.sync?P(re):(ne.needReadable=!1,ne.emittedReadable||(ne.emittedReadable=!0,S(re)))}}(D,K);else if(j||(re=K,n.isBuffer(oe=ne=N)||oe instanceof t||"string"==typeof ne||void 0===ne||re.objectMode||(se=new h("chunk",["string","Buffer","Uint8Array"],ne)),J=se),J)w(D,J);else if(K.objectMode||N&&N.length>0)if("string"==typeof N||K.objectMode||Object.getPrototypeOf(N)===n.prototype||(N=function(re){return n.from(re)}(N)),Q)K.endEmitted?w(D,new d):M(D,K,N,!0);else if(K.ended)w(D,new o);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!U?(N=K.decoder.write(N),K.objectMode||0!==N.length?M(D,K,N,!1):E(D,K)):M(D,K,N,!1)}else Q||(K.reading=!1,E(D,K));return!K.ended&&(K.length<K.highWaterMark||0===K.length)}function M(D,N,U,Q){N.flowing&&0===N.length&&!N.sync?(N.awaitDrain=0,D.emit("data",U)):(N.length+=N.objectMode?1:U.length,Q?N.buffer.unshift(U):N.buffer.push(U),N.needReadable&&P(D)),E(D,N)}function O(D,N){return D<=0||0===N.length&&N.ended?0:N.objectMode?1:D!=D?N.flowing&&N.length?N.buffer.head.data.length:N.length:(D>N.highWaterMark&&(N.highWaterMark=((U=D)>=1073741824?U=1073741824:(U--,U|=U>>>1,U|=U>>>2,U|=U>>>4,U|=U>>>8,U|=U>>>16,U++),U)),D<=N.length?D:N.ended?N.length:(N.needReadable=!0,0));var U}function P(D){var N=D._readableState;a("emitReadable",N.needReadable,N.emittedReadable),N.needReadable=!1,N.emittedReadable||(a("emitReadable",N.flowing),N.emittedReadable=!0,p.nextTick(S,D))}function S(D){var N=D._readableState;a("emitReadable_",N.destroyed,N.length,N.ended),N.destroyed||!N.length&&!N.ended||(D.emit("readable"),N.emittedReadable=!1),N.needReadable=!N.flowing&&!N.ended&&N.length<=N.highWaterMark,Z(D)}function E(D,N){N.readingMore||(N.readingMore=!0,p.nextTick(R,D,N))}function R(D,N){for(;!N.reading&&!N.ended&&(N.length<N.highWaterMark||N.flowing&&0===N.length);){var U=N.length;if(a("maybeReadMore read 0"),D.read(0),U===N.length)break}N.readingMore=!1}function B(D){var N=D._readableState;N.readableListening=D.listenerCount("readable")>0,N.resumeScheduled&&!N.paused?N.flowing=!0:D.listenerCount("data")>0&&D.resume()}function H(D){a("readable nexttick read 0"),D.read(0)}function V(D,N){a("resume",N.reading),N.reading||D.read(0),N.resumeScheduled=!1,D.emit("resume"),Z(D),N.flowing&&!N.reading&&D.read(0)}function Z(D){var N=D._readableState;for(a("flow",N.flowing);N.flowing&&null!==D.read(););}function W(D,N){return 0===N.length?null:(N.objectMode?U=N.buffer.shift():!D||D>=N.length?(U=N.decoder?N.buffer.join(""):1===N.buffer.length?N.buffer.first():N.buffer.concat(N.length),N.buffer.clear()):U=N.buffer.consume(D,N.decoder),U);var U}function G(D){var N=D._readableState;a("endReadable",N.endEmitted),N.endEmitted||(N.ended=!0,p.nextTick(X,N,D))}function X(D,N){if(a("endReadableNT",D.endEmitted,D.length),!D.endEmitted&&0===D.length&&(D.endEmitted=!0,N.readable=!1,N.emit("end"),D.autoDestroy)){var U=N._writableState;(!U||U.autoDestroy&&U.finished)&&N.destroy()}}function te(D,N){for(var U=0,Q=D.length;U<Q;U++)if(D[U]===N)return U;return-1}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(D){this._readableState&&(this._readableState.destroyed=D)}}),k.prototype.destroy=c.destroy,k.prototype._undestroy=c.undestroy,k.prototype._destroy=function(D,N){N(D)},k.prototype.push=function(D,N){var U,Q=this._readableState;return Q.objectMode?U=!0:"string"==typeof D&&((N=N||Q.defaultEncoding)!==Q.encoding&&(D=n.from(D,N),N=""),U=!0),L(this,D,N,!1,U)},k.prototype.unshift=function(D){return L(this,D,null,!0,!1)},k.prototype.isPaused=function(){return!1===this._readableState.flowing},k.prototype.setEncoding=function(D){u||(u=y("string_decoder/").StringDecoder);var N=new u(D);this._readableState.decoder=N,this._readableState.encoding=this._readableState.decoder.encoding;for(var U=this._readableState.buffer.head,Q="";null!==U;)Q+=N.write(U.data),U=U.next;return this._readableState.buffer.clear(),""!==Q&&this._readableState.buffer.push(Q),this._readableState.length=Q.length,this},k.prototype.read=function(D){a("read",D),D=parseInt(D,10);var N=this._readableState,U=D;if(0!==D&&(N.emittedReadable=!1),0===D&&N.needReadable&&((0!==N.highWaterMark?N.length>=N.highWaterMark:N.length>0)||N.ended))return a("read: emitReadable",N.length,N.ended),0===N.length&&N.ended?G(this):P(this),null;if(0===(D=O(D,N))&&N.ended)return 0===N.length&&G(this),null;var Q,j=N.needReadable;return a("need readable",j),(0===N.length||N.length-D<N.highWaterMark)&&a("length less than watermark",j=!0),N.ended||N.reading?a("reading or ended",j=!1):j&&(a("do read"),N.reading=!0,N.sync=!0,0===N.length&&(N.needReadable=!0),this._read(N.highWaterMark),N.sync=!1,N.reading||(D=O(U,N))),null===(Q=D>0?W(D,N):null)?(N.needReadable=N.length<=N.highWaterMark,D=0):(N.length-=D,N.awaitDrain=0),0===N.length&&(N.ended||(N.needReadable=!0),U!==D&&N.ended&&G(this)),null!==Q&&this.emit("data",Q),Q},k.prototype._read=function(D){w(this,new x("_read()"))},k.prototype.pipe=function(D,N){var U=this,Q=this._readableState;switch(Q.pipesCount){case 0:Q.pipes=D;break;case 1:Q.pipes=[Q.pipes,D];break;default:Q.pipes.push(D)}Q.pipesCount+=1,a("pipe count=%d opts=%j",Q.pipesCount,N);var j=N&&!1===N.end||D===p.stdout||D===p.stderr?ge:K;function K(){a("onend"),D.end()}Q.endEmitted?p.nextTick(j):U.once("end",j),D.on("unpipe",function J(xe,we){a("onunpipe"),xe===U&&we&&!1===we.hasUnpiped&&(we.hasUnpiped=!0,a("cleanup"),D.removeListener("close",pe),D.removeListener("finish",ce),D.removeListener("drain",re),D.removeListener("error",oe),D.removeListener("unpipe",J),U.removeListener("end",K),U.removeListener("end",ge),U.removeListener("data",se),ne=!0,!Q.awaitDrain||D._writableState&&!D._writableState.needDrain||re())});var xe,re=(xe=U,function(){var we=xe._readableState;a("pipeOnDrain",we.awaitDrain),we.awaitDrain&&we.awaitDrain--,0===we.awaitDrain&&v(xe,"data")&&(we.flowing=!0,Z(xe))});D.on("drain",re);var ne=!1;function se(xe){a("ondata");var we=D.write(xe);a("dest.write",we),!1===we&&((1===Q.pipesCount&&Q.pipes===D||Q.pipesCount>1&&-1!==te(Q.pipes,D))&&!ne&&(a("false write response, pause",Q.awaitDrain),Q.awaitDrain++),U.pause())}function oe(xe){a("onerror",xe),ge(),D.removeListener("error",oe),0===v(D,"error")&&w(D,xe)}function pe(){D.removeListener("finish",ce),ge()}function ce(){a("onfinish"),D.removeListener("close",pe),ge()}function ge(){a("unpipe"),U.unpipe(D)}return U.on("data",se),function(xe,we,be){if("function"==typeof xe.prependListener)return xe.prependListener(we,be);xe._events&&xe._events[we]?Array.isArray(xe._events[we])?xe._events[we].unshift(be):xe._events[we]=[be,xe._events[we]]:xe.on(we,be)}(D,"error",oe),D.once("close",pe),D.once("finish",ce),D.emit("pipe",U),Q.flowing||(a("pipe resume"),U.resume()),D},k.prototype.unpipe=function(D){var N=this._readableState,U={hasUnpiped:!1};if(0===N.pipesCount)return this;if(1===N.pipesCount)return D&&D!==N.pipes||(D||(D=N.pipes),N.pipes=null,N.pipesCount=0,N.flowing=!1,D&&D.emit("unpipe",this,U)),this;if(!D){var Q=N.pipes,j=N.pipesCount;N.pipes=null,N.pipesCount=0,N.flowing=!1;for(var J=0;J<j;J++)Q[J].emit("unpipe",this,{hasUnpiped:!1});return this}var K=te(N.pipes,D);return-1===K||(N.pipes.splice(K,1),N.pipesCount-=1,1===N.pipesCount&&(N.pipes=N.pipes[0]),D.emit("unpipe",this,U)),this},k.prototype.addListener=k.prototype.on=function(D,N){var U=e.prototype.on.call(this,D,N),Q=this._readableState;return"data"===D?(Q.readableListening=this.listenerCount("readable")>0,!1!==Q.flowing&&this.resume()):"readable"===D&&(Q.endEmitted||Q.readableListening||(Q.readableListening=Q.needReadable=!0,Q.flowing=!1,Q.emittedReadable=!1,a("on readable",Q.length,Q.reading),Q.length?P(this):Q.reading||p.nextTick(H,this))),U},k.prototype.removeListener=function(D,N){var U=e.prototype.removeListener.call(this,D,N);return"readable"===D&&p.nextTick(B,this),U},k.prototype.removeAllListeners=function(D){var N=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==D&&void 0!==D||p.nextTick(B,this),N},k.prototype.resume=function(){var U,D=this._readableState;return D.flowing||(a("resume"),D.flowing=!D.readableListening,this,(U=D).resumeScheduled||(U.resumeScheduled=!0,p.nextTick(V,this,U))),D.paused=!1,this},k.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},k.prototype.wrap=function(D){var N=this,U=this._readableState,Q=!1;for(var j in D.on("end",function(){if(a("wrapped end"),U.decoder&&!U.ended){var K=U.decoder.end();K&&K.length&&N.push(K)}N.push(null)}),D.on("data",function(K){a("wrapped data"),U.decoder&&(K=U.decoder.write(K)),U.objectMode&&null==K||(U.objectMode||K&&K.length)&&(N.push(K)||(Q=!0,D.pause()))}),D)void 0===this[j]&&"function"==typeof D[j]&&(this[j]=function(K){return function(){return D[K].apply(D,arguments)}}(j));for(var J=0;J<_.length;J++)D.on(_[J],this.emit.bind(this,_[J]));return this._read=function(K){a("wrapped _read",K),Q&&(Q=!1,D.resume())},this},"function"==typeof Symbol&&(k.prototype[Symbol.asyncIterator]=function(){return void 0===s&&(s=y("./internal/streams/async_iterator")),s(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(D){this._readableState&&(this._readableState.flowing=D)}}),k._fromList=W,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(k.from=function(D,N){return void 0===i&&(i=y("./internal/streams/from")),i(k,D,N)})}).call(this)}).call(this,y("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(y,$,ee){"use strict";$.exports=a;var p=y("../errors").codes,m=p.ERR_METHOD_NOT_IMPLEMENTED,b=p.ERR_MULTIPLE_CALLBACK,v=p.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=p.ERR_TRANSFORM_WITH_LENGTH_0,n=y("./_stream_duplex");function t(s,i){var l=this._transformState;l.transforming=!1;var c=l.writecb;if(null===c)return this.emit("error",new b);l.writechunk=null,l.writecb=null,null!=i&&this.push(i),c(s);var f=this._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function a(s){if(!(this instanceof a))return new a(s);n.call(this,s),this._transformState={afterTransform:t.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&("function"==typeof s.transform&&(this._transform=s.transform),"function"==typeof s.flush&&(this._flush=s.flush)),this.on("prefinish",r)}function r(){var s=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush(function(i,l){u(s,i,l)})}function u(s,i,l){if(i)return s.emit("error",i);if(null!=l&&s.push(l),s._writableState.length)throw new e;if(s._transformState.transforming)throw new v;return s.push(null)}y("inherits")(a,n),a.prototype.push=function(s,i){return this._transformState.needTransform=!1,n.prototype.push.call(this,s,i)},a.prototype._transform=function(s,i,l){l(new m("_transform()"))},a.prototype._write=function(s,i,l){var c=this._transformState;if(c.writecb=l,c.writechunk=s,c.writeencoding=i,!c.transforming){var f=this._readableState;(c.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}},a.prototype._read=function(s){var i=this._transformState;null===i.writechunk||i.transforming?i.needTransform=!0:(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform))},a.prototype._destroy=function(s,i){n.prototype._destroy.call(this,s,function(l){i(l)})}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(y,$,ee){(function(p,m){(function(){"use strict";function b(R){var B=this;this.next=null,this.entry=null,this.finish=function(){!function(H,V,Z){var W=H.entry;for(H.entry=null;W;){var G=W.callback;V.pendingcb--,G(void 0),W=W.next}V.corkedRequestsFree.next=H}(B,R)}}var v;$.exports=k,k.WritableState=T;var r,e={deprecate:y("util-deprecate")},n=y("./internal/streams/stream"),t=y("buffer").Buffer,a=m.Uint8Array||function(){},u=y("./internal/streams/destroy"),s=y("./internal/streams/state").getHighWaterMark,i=y("../errors").codes,l=i.ERR_INVALID_ARG_TYPE,c=i.ERR_METHOD_NOT_IMPLEMENTED,f=i.ERR_MULTIPLE_CALLBACK,g=i.ERR_STREAM_CANNOT_PIPE,h=i.ERR_STREAM_DESTROYED,o=i.ERR_STREAM_NULL_VALUES,x=i.ERR_STREAM_WRITE_AFTER_END,d=i.ERR_UNKNOWN_ENCODING,w=u.errorOrDestroy;function _(){}function T(R,B,H){v=v||y("./_stream_duplex"),"boolean"!=typeof H&&(H=B instanceof v),this.objectMode=!!(R=R||{}).objectMode,H&&(this.objectMode=this.objectMode||!!R.writableObjectMode),this.highWaterMark=s(this,R,"writableHighWaterMark",H),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===R.decodeStrings),this.defaultEncoding=R.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Z){!function(W,G){var U,X=W._writableState,te=X.sync,D=X.writecb;if("function"!=typeof D)throw new f;if((U=X).writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0,G)!function(U,Q,j,J,K){--Q.pendingcb,j?(p.nextTick(K,J),p.nextTick(E,U,Q),U._writableState.errorEmitted=!0,w(U,J)):(K(J),U._writableState.errorEmitted=!0,w(U,J),E(U,Q))}(W,X,te,G,D);else{var N=P(X)||W.destroyed;N||X.corked||X.bufferProcessing||!X.bufferedRequest||O(W,X),te?p.nextTick(M,W,X,N,D):M(W,X,N,D)}}(B,Z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==R.emitClose,this.autoDestroy=!!R.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new b(this)}function k(R){var B=this instanceof(v=v||y("./_stream_duplex"));if(!B&&!r.call(k,this))return new k(R);this._writableState=new T(R,this,B),this.writable=!0,R&&("function"==typeof R.write&&(this._write=R.write),"function"==typeof R.writev&&(this._writev=R.writev),"function"==typeof R.destroy&&(this._destroy=R.destroy),"function"==typeof R.final&&(this._final=R.final)),n.call(this)}function L(R,B,H,V,Z,W,G){B.writelen=V,B.writecb=G,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new h("write")):H?R._writev(Z,B.onwrite):R._write(Z,W,B.onwrite),B.sync=!1}function M(R,B,H,V){var Z,W;H||(Z=R,0===(W=B).length&&W.needDrain&&(W.needDrain=!1,Z.emit("drain"))),B.pendingcb--,V(),E(R,B)}function O(R,B){B.bufferProcessing=!0;var H=B.bufferedRequest;if(R._writev&&H&&H.next){var Z=new Array(B.bufferedRequestCount),W=B.corkedRequestsFree;W.entry=H;for(var G=0,X=!0;H;)Z[G]=H,H.isBuf||(X=!1),H=H.next,G+=1;Z.allBuffers=X,L(R,B,!0,B.length,Z,"",W.finish),B.pendingcb++,B.lastBufferedRequest=null,W.next?(B.corkedRequestsFree=W.next,W.next=null):B.corkedRequestsFree=new b(B),B.bufferedRequestCount=0}else{for(;H;){var te=H.chunk;if(L(R,B,!1,B.objectMode?1:te.length,te,H.encoding,H.callback),H=H.next,B.bufferedRequestCount--,B.writing)break}null===H&&(B.lastBufferedRequest=null)}B.bufferedRequest=H,B.bufferProcessing=!1}function P(R){return R.ending&&0===R.length&&null===R.bufferedRequest&&!R.finished&&!R.writing}function S(R,B){R._final(function(H){B.pendingcb--,H&&w(R,H),B.prefinished=!0,R.emit("prefinish"),E(R,B)})}function E(R,B){var Z,W,H=P(B);if(H&&(Z=R,(W=B).prefinished||W.finalCalled||("function"!=typeof Z._final||W.destroyed?(W.prefinished=!0,Z.emit("prefinish")):(W.pendingcb++,W.finalCalled=!0,p.nextTick(S,Z,W))),0===B.pendingcb&&(B.finished=!0,R.emit("finish"),B.autoDestroy))){var V=R._readableState;(!V||V.autoDestroy&&V.endEmitted)&&R.destroy()}return H}y("inherits")(k,n),T.prototype.getBuffer=function(){for(var R=this.bufferedRequest,B=[];R;)B.push(R),R=R.next;return B},function(){try{Object.defineProperty(T.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(R){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(r=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(R){return!!r.call(this,R)||this===k&&R&&R._writableState instanceof T}})):r=function(R){return R instanceof this},k.prototype.pipe=function(){w(this,new g)},k.prototype.write=function(R,B,H){var V,X,te,D,Z=this._writableState,W=!1,G=!Z.objectMode&&(t.isBuffer(V=R)||V instanceof a);return G&&!t.isBuffer(R)&&(R=t.from(R)),"function"==typeof B&&(H=B,B=null),G?B="buffer":B||(B=Z.defaultEncoding),"function"!=typeof H&&(H=_),Z.ending?(X=this,te=H,D=new x,w(X,D),p.nextTick(te,D)):(G||function(X,te,D,N){var U;return null===D?U=new o:"string"==typeof D||te.objectMode||(U=new l("chunk",["string","Buffer"],D)),!U||(w(X,U),p.nextTick(N,U),!1)}(this,Z,R,H))&&(Z.pendingcb++,W=function(X,te,D,N,U,Q){if(!D){var j=(se=N,(ne=te).objectMode||!1===ne.decodeStrings||"string"!=typeof se||(se=t.from(se,U)),se);N!==j&&(D=!0,U="buffer",N=j)}var ne,se,J=te.objectMode?1:N.length;te.length+=J;var K=te.length<te.highWaterMark;if(K||(te.needDrain=!0),te.writing||te.corked){var re=te.lastBufferedRequest;te.lastBufferedRequest={chunk:N,encoding:U,isBuf:D,callback:Q,next:null},re?re.next=te.lastBufferedRequest:te.bufferedRequest=te.lastBufferedRequest,te.bufferedRequestCount+=1}else L(X,te,!1,J,N,U,Q);return K}(this,Z,G,R,B,H)),W},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var R=this._writableState;R.corked&&(R.corked--,R.writing||R.corked||R.bufferProcessing||!R.bufferedRequest||O(this,R))},k.prototype.setDefaultEncoding=function(R){if("string"==typeof R&&(R=R.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((R+"").toLowerCase())>-1))throw new d(R);return this._writableState.defaultEncoding=R,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),k.prototype._write=function(R,B,H){H(new c("_write()"))},k.prototype._writev=null,k.prototype.end=function(R,B,H){var Z,W,G,V=this._writableState;return"function"==typeof R?(H=R,R=null,B=null):"function"==typeof B&&(H=B,B=null),null!=R&&this.write(R,B),V.corked&&(V.corked=1,this.uncork()),V.ending||(Z=this,G=H,(W=V).ending=!0,E(Z,W),G&&(W.finished?p.nextTick(G):Z.once("finish",G)),W.ended=!0,Z.writable=!1),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=R)}}),k.prototype.destroy=u.destroy,k.prototype._undestroy=u.undestroy,k.prototype._destroy=function(R,B){B(R)}}).call(this)}).call(this,y("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(y,$,ee){(function(p){(function(){"use strict";var m;function b(h,o,x){return o in h?Object.defineProperty(h,o,{value:x,enumerable:!0,configurable:!0,writable:!0}):h[o]=x,h}var v=y("./end-of-stream"),e=Symbol("lastResolve"),n=Symbol("lastReject"),t=Symbol("error"),a=Symbol("ended"),r=Symbol("lastPromise"),u=Symbol("handlePromise"),s=Symbol("stream");function i(h,o){return{value:h,done:o}}function l(h){var o=h[e];if(null!==o){var x=h[s].read();null!==x&&(h[r]=null,h[e]=null,h[n]=null,o(i(x,!1)))}}function c(h){p.nextTick(l,h)}var f=Object.getPrototypeOf(function(){}),g=Object.setPrototypeOf((b(m={get stream(){return this[s]},next:function(){var h=this,o=this[t];if(null!==o)return Promise.reject(o);if(this[a])return Promise.resolve(i(void 0,!0));if(this[s].destroyed)return new Promise(function(_,T){p.nextTick(function(){h[t]?T(h[t]):_(i(void 0,!0))})});var x,_,T,d=this[r];if(d)x=new Promise((_=d,T=this,function(k,L){_.then(function(){T[a]?k(i(void 0,!0)):T[u](k,L)},L)}));else{var w=this[s].read();if(null!==w)return Promise.resolve(i(w,!1));x=new Promise(this[u])}return this[r]=x,x}},Symbol.asyncIterator,function(){return this}),b(m,"return",function(){var h=this;return new Promise(function(o,x){h[s].destroy(null,function(d){d?x(d):o(i(void 0,!0))})})}),m),f);$.exports=function(h){var o,x=Object.create(g,(b(o={},s,{value:h,writable:!0}),b(o,e,{value:null,writable:!0}),b(o,n,{value:null,writable:!0}),b(o,t,{value:null,writable:!0}),b(o,a,{value:h._readableState.endEmitted,writable:!0}),b(o,u,{value:function(d,w){var _=x[s].read();_?(x[r]=null,x[e]=null,x[n]=null,d(i(_,!1))):(x[e]=d,x[n]=w)},writable:!0}),o));return x[r]=null,v(h,function(d){if(d&&"ERR_STREAM_PREMATURE_CLOSE"!==d.code){var w=x[n];return null!==w&&(x[r]=null,x[e]=null,x[n]=null,w(d)),void(x[t]=d)}var _=x[e];null!==_&&(x[r]=null,x[e]=null,x[n]=null,_(i(void 0,!0))),x[a]=!0}),h.on("readable",c.bind(null,x)),x}}).call(this)}).call(this,y("_process"))},{"./end-of-stream":295,_process:277}],293:[function(y,$,ee){"use strict";function p(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);a&&(u=u.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,u)}return r}function m(t,a,r){return a in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}var v=y("buffer").Buffer,e=y("util").inspect,n=e&&e.custom||"inspect";$.exports=function(){function t(){(function(s,i){if(!(s instanceof i))throw new TypeError("Cannot call a class as a function")})(this,t),this.head=null,this.tail=null,this.length=0}var r;return(r=[{key:"push",value:function(s){var i={data:s,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(s){var i={data:s,next:this.head};0===this.length&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(0!==this.length){var s=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,s}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(s){if(0===this.length)return"";for(var i=this.head,l=""+i.data;i=i.next;)l+=s+i.data;return l}},{key:"concat",value:function(s){if(0===this.length)return v.alloc(0);for(var f=v.allocUnsafe(s>>>0),g=this.head,h=0;g;)v.prototype.copy.call(g.data,f,h),h+=g.data.length,g=g.next;return f}},{key:"consume",value:function(s,i){var l;return s<this.head.data.length?(l=this.head.data.slice(0,s),this.head.data=this.head.data.slice(s)):l=s===this.head.data.length?this.shift():i?this._getString(s):this._getBuffer(s),l}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(s){var i=this.head,l=1,c=i.data;for(s-=c.length;i=i.next;){var f=i.data,g=s>f.length?f.length:s;if(c+=g===f.length?f:f.slice(0,s),0==(s-=g)){g===f.length?(++l,this.head=i.next?i.next:this.tail=null):(this.head=i,i.data=f.slice(g));break}++l}return this.length-=l,c}},{key:"_getBuffer",value:function(s){var i=v.allocUnsafe(s),l=this.head,c=1;for(l.data.copy(i),s-=l.data.length;l=l.next;){var f=l.data,g=s>f.length?f.length:s;if(f.copy(i,i.length-s,0,g),0==(s-=g)){g===f.length?(++c,this.head=l.next?l.next:this.tail=null):(this.head=l,l.data=f.slice(g));break}++c}return this.length-=c,i}},{key:n,value:function(s,i){return e(this,function(l){for(var c=1;c<arguments.length;c++){var f=null!=arguments[c]?arguments[c]:{};c%2?p(Object(f),!0).forEach(function(g){m(l,g,f[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(f)):p(Object(f)).forEach(function(g){Object.defineProperty(l,g,Object.getOwnPropertyDescriptor(f,g))})}return l}({},i,{depth:0,customInspect:!1}))}}])&&function(t,a){for(var r=0;r<a.length;r++){var u=a[r];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}(t.prototype,r),t}()},{buffer:85,util:83}],294:[function(y,$,ee){(function(p){(function(){"use strict";function m(e,n){v(e,n),b(e)}function b(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function v(e,n){e.emit("error",n)}$.exports={destroy:function(e,n){var t=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(n?n(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,p.nextTick(v,this,e)):p.nextTick(v,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(u){!n&&u?t._writableState?t._writableState.errorEmitted?p.nextTick(b,t):(t._writableState.errorEmitted=!0,p.nextTick(m,t,u)):p.nextTick(m,t,u):n?(p.nextTick(b,t),n(u)):p.nextTick(b,t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,n){var t=e._readableState,a=e._writableState;t&&t.autoDestroy||a&&a.autoDestroy?e.destroy(n):e.emit("error",n)}}}).call(this)}).call(this,y("_process"))},{_process:277}],295:[function(y,$,ee){"use strict";var p=y("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function m(){}$.exports=function b(v,e,n){if("function"==typeof e)return b(v,null,e);var h,o;e||(e={}),h=n||m,o=!1,n=function(){if(!o){o=!0;for(var x=arguments.length,d=new Array(x),w=0;w<x;w++)d[w]=arguments[w];h.apply(this,d)}};var t=e.readable||!1!==e.readable&&v.readable,a=e.writable||!1!==e.writable&&v.writable,r=function(){v.writable||s()},u=v._writableState&&v._writableState.finished,s=function(){a=!1,u=!0,t||n.call(v)},i=v._readableState&&v._readableState.endEmitted,l=function(){t=!1,i=!0,a||n.call(v)},c=function(h){n.call(v,h)},f=function(){var h;return t&&!i?(v._readableState&&v._readableState.ended||(h=new p),n.call(v,h)):a&&!u?(v._writableState&&v._writableState.ended||(h=new p),n.call(v,h)):void 0},g=function(){v.req.on("finish",s)};return function(h){return h.setHeader&&"function"==typeof h.abort}(v)?(v.on("complete",s),v.on("abort",f),v.req?g():v.on("request",g)):a&&!v._writableState&&(v.on("end",r),v.on("close",r)),v.on("end",l),v.on("finish",s),!1!==e.error&&v.on("error",c),v.on("close",f),function(){v.removeListener("complete",s),v.removeListener("abort",f),v.removeListener("request",g),v.req&&v.req.removeListener("finish",s),v.removeListener("end",r),v.removeListener("close",r),v.removeListener("finish",s),v.removeListener("end",l),v.removeListener("error",c),v.removeListener("close",f)}}},{"../../../errors":286}],296:[function(y,$,ee){$.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(y,$,ee){"use strict";var p,m=y("../../../errors").codes,b=m.ERR_MISSING_ARGS,v=m.ERR_STREAM_DESTROYED;function e(u){if(u)throw u}function n(u,s,i,l){var g,h;g=l,h=!1,l=function(){h||(h=!0,g.apply(void 0,arguments))};var c=!1;u.on("close",function(){c=!0}),void 0===p&&(p=y("./end-of-stream")),p(u,{readable:s,writable:i},function(g){if(g)return l(g);c=!0,l()});var f=!1;return function(g){if(!c&&!f)return f=!0,function(h){return h.setHeader&&"function"==typeof h.abort}(u)?u.abort():"function"==typeof u.destroy?u.destroy():void l(g||new v("pipe"))}}function t(u){u()}function a(u,s){return u.pipe(s)}function r(u){return u.length?"function"!=typeof u[u.length-1]?e:u.pop():e}$.exports=function(){for(var u=arguments.length,s=new Array(u),i=0;i<u;i++)s[i]=arguments[i];var l,c=r(s);if(Array.isArray(s[0])&&(s=s[0]),s.length<2)throw new b("streams");var f=s.map(function(g,h){var o=h<s.length-1;return n(g,o,h>0,function(x){l||(l=x),x&&f.forEach(t),o||(f.forEach(t),c(l))})});return s.reduce(a)}},{"../../../errors":286,"./end-of-stream":295}],298:[function(y,$,ee){"use strict";var p=y("../../../errors").codes.ERR_INVALID_OPT_VALUE;$.exports={getHighWaterMark:function(m,b,v,e){var t,n=null!=(t=b).highWaterMark?t.highWaterMark:e?t[v]:null;if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new p(e?v:"highWaterMark",n);return Math.floor(n)}return m.objectMode?16:16384}}},{"../../../errors":286}],299:[function(y,$,ee){$.exports=y("events").EventEmitter},{events:84}],300:[function(y,$,ee){"use strict";var p=y("safe-buffer").Buffer,m=p.isEncoding||function(i){switch((i=""+i)&&i.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function b(i){var l;switch(this.encoding=function(c){var f=function(g){if(!g)return"utf8";for(var h;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(h)return;g=(""+g).toLowerCase(),h=!0}}(c);if("string"!=typeof f&&(p.isEncoding===m||!m(c)))throw new Error("Unknown encoding: "+c);return f||c}(i),this.encoding){case"utf16le":this.text=n,this.end=t,l=4;break;case"utf8":this.fillLast=e,l=4;break;case"base64":this.text=a,this.end=r,l=3;break;default:return this.write=u,void(this.end=s)}this.lastNeed=0,this.lastTotal=0,this.lastChar=p.allocUnsafe(l)}function v(i){return i<=127?0:i>>5==6?2:i>>4==14?3:i>>3==30?4:i>>6==2?-1:-2}function e(i){var l=this.lastTotal-this.lastNeed,c=function(f,g,h){if(128!=(192&g[0]))return f.lastNeed=0,"\ufffd";if(f.lastNeed>1&&g.length>1){if(128!=(192&g[1]))return f.lastNeed=1,"\ufffd";if(f.lastNeed>2&&g.length>2&&128!=(192&g[2]))return f.lastNeed=2,"\ufffd"}}(this,i);return void 0!==c?c:this.lastNeed<=i.length?(i.copy(this.lastChar,l,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(i.copy(this.lastChar,l,0,i.length),void(this.lastNeed-=i.length))}function n(i,l){if((i.length-l)%2==0){var c=i.toString("utf16le",l);if(c){var f=c.charCodeAt(c.length-1);if(f>=55296&&f<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=i[i.length-1],i.toString("utf16le",l,i.length-1)}function t(i){var l=i&&i.length?this.write(i):"";return this.lastNeed?l+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):l}function a(i,l){var c=(i.length-l)%3;return 0===c?i.toString("base64",l):(this.lastNeed=3-c,this.lastTotal=3,1===c?this.lastChar[0]=i[i.length-1]:(this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1]),i.toString("base64",l,i.length-c))}function r(i){var l=i&&i.length?this.write(i):"";return this.lastNeed?l+this.lastChar.toString("base64",0,3-this.lastNeed):l}function u(i){return i.toString(this.encoding)}function s(i){return i&&i.length?this.write(i):""}ee.StringDecoder=b,b.prototype.write=function(i){if(0===i.length)return"";var l,c;if(this.lastNeed){if(void 0===(l=this.fillLast(i)))return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<i.length?l?l+this.text(i,c):this.text(i,c):l||""},b.prototype.end=function(i){var l=i&&i.length?this.write(i):"";return this.lastNeed?l+"\ufffd":l},b.prototype.text=function(i,l){var c=function(g,h,o){var x=h.length-1;if(x<o)return 0;var d=v(h[x]);return d>=0?(d>0&&(g.lastNeed=d-1),d):--x<o||-2===d?0:(d=v(h[x]))>=0?(d>0&&(g.lastNeed=d-2),d):--x<o||-2===d?0:(d=v(h[x]))>=0?(d>0&&(2===d?d=0:g.lastNeed=d-3),d):0}(this,i,l);if(!this.lastNeed)return i.toString("utf8",l);this.lastTotal=c;var f=i.length-(c-this.lastNeed);return i.copy(this.lastChar,0,f),i.toString("utf8",l,f)},b.prototype.fillLast=function(i){if(this.lastNeed<=i.length)return i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,i.length),this.lastNeed-=i.length}},{"safe-buffer":284}],301:[function(y,$,ee){(function(p,m){(function(){var b=y("assert"),v=y("debug")("stream-parser");function e(c){v("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=-1,c._parserCallback=null,"function"==typeof c.push&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function n(c,f){b(!this._parserCallback,'there is already a "callback" set!'),b(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||e(this),v("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=f,this._parserState=0}function t(c,f){b(!this._parserCallback,'there is already a "callback" set!'),b(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||e(this),v("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=f,this._parserState=1}function a(c,f){b(!this._parserCallback,'There is already a "callback" set!'),b(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||e(this),v("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=f,this._parserState=2}function r(c,f,g){this._parserInit||e(this),v("write(%o bytes)",c.length),"function"==typeof f&&(g=f),i(this,c,null,g)}function u(c,f,g){this._parserInit||e(this),v("transform(%o bytes)",c.length),"function"!=typeof f&&(f=this._parserOutput),i(this,c,f,g)}function s(c,f,g,h){if(c._parserBytesLeft-=f.length,v("%o bytes left for stream piece",c._parserBytesLeft),0===c._parserState?(c._parserBuffers.push(f),c._parserBuffered+=f.length):2===c._parserState&&g(f),0!==c._parserBytesLeft)return h;var o=c._parserCallback;if(o&&0===c._parserState&&c._parserBuffers.length>1&&(f=m.concat(c._parserBuffers,c._parserBuffered)),0!==c._parserState&&(f=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=-1,c._parserBuffers.splice(0),o){var x=[];f&&x.push(f),g&&x.push(g);var d=o.length>x.length;d&&x.push(l(h));var w=o.apply(c,x);if(!d||h===w)return h}}$.exports=function(c){var f=c&&"function"==typeof c._transform;if(!(f||c&&"function"==typeof c._write))throw new Error("must pass a Writable or Transform stream in");v("extending Parser into stream"),c._bytes=n,c._skipBytes=t,f&&(c._passthrough=a),f?c._transform=u:c._write=r};var i=l(function c(f,g,h,o){return f._parserBytesLeft<=0?o(new Error("got data but not currently parsing anything")):g.length<=f._parserBytesLeft?function(){return s(f,g,h,o)}:function(){var x=g.slice(0,f._parserBytesLeft);return s(f,x,h,function(d){return d?o(d):g.length>x.length?function(){return c(f,g.slice(x.length),h,o)}:void 0})}});function l(c){return function(){for(var f=c.apply(this,arguments);"function"==typeof f;)f=f();return f}}}).call(this)}).call(this,y("_process"),y("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(y,$,ee){(function(p){(function(){function m(){var b;try{b=ee.storage.debug}catch(v){}return!b&&void 0!==p&&"env"in p&&(b=p.env.DEBUG),b}(ee=$.exports=y("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},ee.formatArgs=function(b){var v=this.useColors;if(b[0]=(v?"%c":"")+this.namespace+(v?" %c":" ")+b[0]+(v?"%c ":" ")+"+"+ee.humanize(this.diff),v){var e="color: "+this.color;b.splice(1,0,e,"color: inherit");var n=0,t=0;b[0].replace(/%[a-zA-Z%]/g,function(a){"%%"!==a&&(n++,"%c"===a&&(t=n))}),b.splice(t,0,e)}},ee.save=function(b){try{null==b?ee.storage.removeItem("debug"):ee.storage.debug=b}catch(v){}},ee.load=m,ee.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},ee.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(b){}}(),ee.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],ee.formatters.j=function(b){try{return JSON.stringify(b)}catch(v){return"[UnexpectedJSONParseError]: "+v.message}},ee.enable(m())}).call(this)}).call(this,y("_process"))},{"./debug":303,_process:277}],303:[function(y,$,ee){var p;function m(b){function v(){if(v.enabled){var e=v,n=+new Date,t=n-(p||n);e.diff=t,e.prev=p,e.curr=n,p=n;for(var a=new Array(arguments.length),r=0;r<a.length;r++)a[r]=arguments[r];a[0]=ee.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(i,l){if("%%"===i)return i;u++;var c=ee.formatters[l];return"function"==typeof c&&(i=c.call(e,a[u]),a.splice(u,1),u--),i}),ee.formatArgs.call(e,a);var s=v.log||ee.log||console.log.bind(console);s.apply(e,a)}}return v.namespace=b,v.enabled=ee.enabled(b),v.useColors=ee.useColors(),v.color=function(e){var n,t=0;for(n in e)t=(t<<5)-t+e.charCodeAt(n),t|=0;return ee.colors[Math.abs(t)%ee.colors.length]}(b),"function"==typeof ee.init&&ee.init(v),v}(ee=$.exports=m.debug=m.default=m).coerce=function(b){return b instanceof Error?b.stack||b.message:b},ee.disable=function(){ee.enable("")},ee.enable=function(b){ee.save(b),ee.names=[],ee.skips=[];for(var v=("string"==typeof b?b:"").split(/[\s,]+/),e=v.length,n=0;n<e;n++)v[n]&&("-"===(b=v[n].replace(/\*/g,".*?"))[0]?ee.skips.push(new RegExp("^"+b.substr(1)+"$")):ee.names.push(new RegExp("^"+b+"$")))},ee.enabled=function(b){var v,e;for(v=0,e=ee.skips.length;v<e;v++)if(ee.skips[v].test(b))return!1;for(v=0,e=ee.names.length;v<e;v++)if(ee.names[v].test(b))return!0;return!1},ee.humanize=y("ms"),ee.names=[],ee.skips=[],ee.formatters={}},{ms:304}],304:[function(y,$,ee){var p=1e3,m=6e4,b=60*m,v=24*b;function e(n,t,a){if(!(n<t))return n<1.5*t?Math.floor(n/t)+" "+a:Math.ceil(n/t)+" "+a+"s"}$.exports=function(n,t){t=t||{};var a,u,r=typeof n;if("string"===r&&n.length>0)return function(u){if(!((u=String(u)).length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(u);if(s){var i=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return i*v;case"hours":case"hour":case"hrs":case"hr":case"h":return i*b;case"minutes":case"minute":case"mins":case"min":case"m":return i*m;case"seconds":case"second":case"secs":case"sec":case"s":return i*p;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(n);if("number"===r&&!1===isNaN(n))return t.long?e(a=n,v,"day")||e(a,b,"hour")||e(a,m,"minute")||e(a,p,"second")||a+" ms":(u=n)>=v?Math.round(u/v)+"d":u>=b?Math.round(u/b)+"h":u>=m?Math.round(u/m)+"m":u>=p?Math.round(u/p)+"s":u+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))}},{}],305:[function(y,$,ee){"use strict";var p=y("parenthesis");$.exports=function(m,b,v){if(null==m)throw Error("First argument should be a string");if(null==b)throw Error("Separator should be a string or a RegExp");v?("string"==typeof v||Array.isArray(v))&&(v={ignore:v}):v={},null==v.escape&&(v.escape=!0),null==v.ignore?v.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof v.ignore&&(v.ignore=[v.ignore]),v.ignore=v.ignore.map(function(s){return 1===s.length&&(s+=s),s}));var e=p.parse(m,{flat:!0,brackets:v.ignore}),n=e[0].split(b);if(v.escape){for(var t=[],a=0;a<n.length;a++){var r=n[a];"\\"===r[r.length-1]&&"\\"!==r[r.length-2]?(t.push(r+b+n[a+1]),a++):t.push(r)}n=t}for(a=0;a<n.length;a++)e[0]=n[a],n[a]=p.stringify(e,{flat:!0});return n}},{parenthesis:248}],306:[function(y,$,ee){"use strict";$.exports=function(p){for(var m=p.length,b=new Array(m),v=new Array(m),e=new Array(m),n=new Array(m),t=new Array(m),a=new Array(m),r=0;r<m;++r)b[r]=-1,v[r]=0,e[r]=!1,n[r]=0,t[r]=-1,a[r]=[];var u,s=0,i=[],l=[];function c(h){var o=[h],x=[h];for(b[h]=v[h]=s,e[h]=!0,s+=1;x.length>0;){var d=p[h=x[x.length-1]];if(n[h]<d.length){for(var w=n[h];w<d.length;++w){var _=d[w];if(b[_]<0){b[_]=v[_]=s,e[_]=!0,s+=1,o.push(_),x.push(_);break}e[_]&&(v[h]=0|Math.min(v[h],v[_])),t[_]>=0&&a[h].push(t[_])}n[h]=w}else{if(v[h]===b[h]){var T=[],k=[],L=0;for(w=o.length-1;w>=0;--w){var M=o[w];if(e[M]=!1,T.push(M),k.push(a[M]),L+=a[M].length,t[M]=i.length,M===h){o.length=w;break}}i.push(T);var O=new Array(L);for(w=0;w<k.length;w++)for(var P=0;P<k[w].length;P++)O[--L]=k[w][P];l.push(O)}x.pop()}}}for(r=0;r<m;++r)b[r]<0&&c(r);for(r=0;r<l.length;r++){var f=l[r];if(0!==f.length){f.sort(function(h,o){return h-o}),u=[f[0]];for(var g=1;g<f.length;g++)f[g]!==f[g-1]&&u.push(f[g]);l[r]=u}}return{components:i,adjacencyList:l}}},{}],307:[function(y,$,ee){"use strict";Object.defineProperty(ee,"__esModule",{value:!0});var m=2*Math.PI,b=function(n,t,a,r,u,s,i){var l=n.x,c=n.y;return{x:r*(l*=t)-u*(c*=a)+s,y:u*l+r*c+i}},v=function(n,t){var a=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:4/3*Math.tan(t/4),r=Math.cos(n),u=Math.sin(n),s=Math.cos(n+t),i=Math.sin(n+t);return[{x:r-u*a,y:u+r*a},{x:s+i*a,y:i-s*a},{x:s,y:i}]},e=function(n,t,a,r){var u=n*a+t*r;return u>1&&(u=1),u<-1&&(u=-1),(n*r-t*a<0?-1:1)*Math.acos(u)};ee.default=function(n){var t=n.px,a=n.py,r=n.cx,u=n.cy,s=n.rx,i=n.ry,l=n.xAxisRotation,c=void 0===l?0:l,f=n.largeArcFlag,g=void 0===f?0:f,h=n.sweepFlag,o=void 0===h?0:h,x=[];if(0===s||0===i)return[];var d=Math.sin(c*m/360),w=Math.cos(c*m/360),_=w*(t-r)/2+d*(a-u)/2,T=-d*(t-r)/2+w*(a-u)/2;if(0===_&&0===T)return[];s=Math.abs(s),i=Math.abs(i);var k=Math.pow(_,2)/Math.pow(s,2)+Math.pow(T,2)/Math.pow(i,2);k>1&&(s*=Math.sqrt(k),i*=Math.sqrt(k));var M=function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return function(a,r){var u=[],s=!0,i=!1,l=void 0;try{for(var c,f=a[Symbol.iterator]();!(s=(c=f.next()).done)&&(u.push(c.value),4!==u.length);s=!0);}catch(g){i=!0,l=g}finally{try{!s&&f.return&&f.return()}finally{if(i)throw l}}return u}(n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(V,Z,W,G,X,te,D,N,U,Q,j,J){var K=Math.pow(X,2),re=Math.pow(te,2),ne=Math.pow(j,2),se=Math.pow(J,2),oe=K*re-K*se-re*ne;oe<0&&(oe=0),oe/=K*se+re*ne;var pe=(oe=Math.sqrt(oe)*(D===N?-1:1))*X/te*J,ce=oe*-te/X*j,ge=Q*pe-U*ce+(V+W)/2,xe=U*pe+Q*ce+(Z+G)/2,we=(j-pe)/X,be=(J-ce)/te,Se=(-j-pe)/X,fe=(-J-ce)/te,me=e(1,0,we,be),Te=e(we,be,Se,fe);return 0===N&&Te>0&&(Te-=m),1===N&&Te<0&&(Te+=m),[ge,xe,me,Te]}(t,a,r,u,s,i,g,o,d,w,_,T)),O=M[0],P=M[1],S=M[2],E=M[3],R=Math.abs(E)/(m/4);Math.abs(1-R)<1e-7&&(R=1);var B=Math.max(Math.ceil(R),1);E/=B;for(var H=0;H<B;H++)x.push(v(S,E)),S+=E;return x.map(function(V){var Z=b(V[0],s,i,w,d,O,P),W=Z.x,G=Z.y,X=b(V[1],s,i,w,d,O,P),te=X.x,D=X.y,N=b(V[2],s,i,w,d,O,P);return{x1:W,y1:G,x2:te,y2:D,x:N.x,y:N.y}})},$.exports=ee.default},{}],308:[function(y,$,ee){"use strict";var p=y("parse-svg-path"),m=y("abs-svg-path"),b=y("normalize-svg-path"),v=y("is-svg-path"),e=y("assert");$.exports=function(n){if(Array.isArray(n)&&1===n.length&&"string"==typeof n[0]&&(n=n[0]),"string"==typeof n&&(e(v(n),"String is not an SVG path."),n=p(n)),e(Array.isArray(n),"Argument should be a string or an array of path segments."),n=m(n),!(n=b(n)).length)return[0,0,0,0];for(var t=[1/0,1/0,-1/0,-1/0],a=0,r=n.length;a<r;a++)for(var u=n[a].slice(1),s=0;s<u.length;s+=2)u[s+0]<t[0]&&(t[0]=u[s+0]),u[s+1]<t[1]&&(t[1]=u[s+1]),u[s+0]>t[2]&&(t[2]=u[s+0]),u[s+1]>t[3]&&(t[3]=u[s+1]);return t}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(y,$,ee){"use strict";$.exports=function(v){for(var e,n=[],t=0,a=0,r=0,u=0,s=null,i=null,l=0,c=0,f=0,g=v.length;f<g;f++){var h=v[f],o=h[0];switch(o){case"M":r=h[1],u=h[2];break;case"A":var x=p({px:l,py:c,cx:h[6],cy:h[7],rx:h[1],ry:h[2],xAxisRotation:h[3],largeArcFlag:h[4],sweepFlag:h[5]});if(!x.length)continue;for(var d,w=0;w<x.length;w++)h=["C",(d=x[w]).x1,d.y1,d.x2,d.y2,d.x,d.y],w<x.length-1&&n.push(h);break;case"S":var _=l,T=c;"C"!=e&&"S"!=e||(_+=_-t,T+=T-a),h=["C",_,T,h[1],h[2],h[3],h[4]];break;case"T":"Q"==e||"T"==e?(s=2*l-s,i=2*c-i):(s=l,i=c),h=b(l,c,s,i,h[1],h[2]);break;case"Q":s=h[1],i=h[2],h=b(l,c,h[1],h[2],h[3],h[4]);break;case"L":h=m(l,c,h[1],h[2]);break;case"H":h=m(l,c,h[1],c);break;case"V":h=m(l,c,l,h[1]);break;case"Z":h=m(l,c,r,u)}e=o,l=h[h.length-2],c=h[h.length-1],h.length>4?(t=h[h.length-4],a=h[h.length-3]):(t=l,a=c),n.push(h)}return n};var p=y("svg-arc-to-cubic-bezier");function m(v,e,n,t){return["C",v,e,n,t,n,t]}function b(v,e,n,t,a,r){return["C",v/3+2/3*n,e/3+2/3*t,a/3+2/3*n,r/3+2/3*t,a,r]}},{"svg-arc-to-cubic-bezier":307}],310:[function(y,$,ee){"use strict";var p,m=y("svg-path-bounds"),b=y("parse-svg-path"),v=y("draw-svg-path"),e=y("is-svg-path"),n=y("bitmap-sdf"),t=document.createElement("canvas"),a=t.getContext("2d");$.exports=function(r,u){if(!e(r))throw Error("Argument should be valid svg path string");var s,i;u||(u={}),u.shape?(s=u.shape[0],i=u.shape[1]):(s=t.width=u.w||u.width||200,i=t.height=u.h||u.height||200);var l=Math.min(s,i),c=u.stroke||0,f=u.viewbox||u.viewBox||m(r),g=[s/(f[2]-f[0]),i/(f[3]-f[1])],h=Math.min(g[0]||0,g[1]||0)/2;if(a.fillStyle="black",a.fillRect(0,0,s,i),a.fillStyle="white",c&&("number"!=typeof c&&(c=1),a.strokeStyle=c>0?"white":"black",a.lineWidth=Math.abs(c)),a.translate(.5*s,.5*i),a.scale(h,h),function(){if(null!=p)return p;var d=document.createElement("canvas").getContext("2d");if(d.canvas.width=d.canvas.height=1,!window.Path2D)return p=!1;var w=new Path2D("M0,0h1v1h-1v-1Z");d.fillStyle="black",d.fill(w);var _=d.getImageData(0,0,1,1);return p=_&&_.data&&255===_.data[3]}()){var o=new Path2D(r);a.fill(o),c&&a.stroke(o)}else{var x=b(r);v(a,x),a.fill(),c&&a.stroke()}return a.setTransform(1,0,0,1,0,0),n(a,{cutoff:null!=u.cutoff?u.cutoff:.5,radius:null!=u.radius?u.radius:.5*l})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(y,$,ee){(function(p,m){(function(){var b=y("process/browser.js").nextTick,v=Function.prototype.apply,e=Array.prototype.slice,n={},t=0;function a(r,u){this._id=r,this._clearFn=u}ee.setTimeout=function(){return new a(v.call(setTimeout,window,arguments),clearTimeout)},ee.setInterval=function(){return new a(v.call(setInterval,window,arguments),clearInterval)},ee.clearTimeout=ee.clearInterval=function(r){r.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},ee.enroll=function(r,u){clearTimeout(r._idleTimeoutId),r._idleTimeout=u},ee.unenroll=function(r){clearTimeout(r._idleTimeoutId),r._idleTimeout=-1},ee._unrefActive=ee.active=function(r){clearTimeout(r._idleTimeoutId);var u=r._idleTimeout;u>=0&&(r._idleTimeoutId=setTimeout(function(){r._onTimeout&&r._onTimeout()},u))},ee.setImmediate="function"==typeof p?p:function(r){var u=t++,s=!(arguments.length<2)&&e.call(arguments,1);return n[u]=!0,b(function(){n[u]&&(s?r.apply(null,s):r.call(null),ee.clearImmediate(u))}),u},ee.clearImmediate="function"==typeof m?m:function(r){delete n[r]}}).call(this)}).call(this,y("timers").setImmediate,y("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(y,$,ee){!function(p){var m=/^\s+/,b=/\s+$/,v=0,e=p.round,n=p.min,t=p.max,a=p.random;function r(U,Q){if(Q=Q||{},(U=U||"")instanceof r)return U;if(!(this instanceof r))return new r(U,Q);var J,xe,we,K,re,ne,se,oe,pe,ce,j=(K={r:0,g:0,b:0},re=1,ne=null,se=null,oe=null,pe=!1,ce=!1,"string"==typeof(J=U)&&(J=function(be){be=be.replace(m,"").replace(b,"").toLowerCase();var Se,fe=!1;if(O[be])be=O[be],fe=!0;else if("transparent"==be)return{r:0,g:0,b:0,a:0,format:"name"};return(Se=D.rgb.exec(be))?{r:Se[1],g:Se[2],b:Se[3]}:(Se=D.rgba.exec(be))?{r:Se[1],g:Se[2],b:Se[3],a:Se[4]}:(Se=D.hsl.exec(be))?{h:Se[1],s:Se[2],l:Se[3]}:(Se=D.hsla.exec(be))?{h:Se[1],s:Se[2],l:Se[3],a:Se[4]}:(Se=D.hsv.exec(be))?{h:Se[1],s:Se[2],v:Se[3]}:(Se=D.hsva.exec(be))?{h:Se[1],s:Se[2],v:Se[3],a:Se[4]}:(Se=D.hex8.exec(be))?{r:B(Se[1]),g:B(Se[2]),b:B(Se[3]),a:W(Se[4]),format:fe?"name":"hex8"}:(Se=D.hex6.exec(be))?{r:B(Se[1]),g:B(Se[2]),b:B(Se[3]),format:fe?"name":"hex"}:(Se=D.hex4.exec(be))?{r:B(Se[1]+""+Se[1]),g:B(Se[2]+""+Se[2]),b:B(Se[3]+""+Se[3]),a:W(Se[4]+""+Se[4]),format:fe?"name":"hex8"}:!!(Se=D.hex3.exec(be))&&{r:B(Se[1]+""+Se[1]),g:B(Se[2]+""+Se[2]),b:B(Se[3]+""+Se[3]),format:fe?"name":"hex"}}(J)),"object"==typeof J&&(N(J.r)&&N(J.g)&&N(J.b)?(xe=J.g,we=J.b,K={r:255*E(J.r,255),g:255*E(xe,255),b:255*E(we,255)},pe=!0,ce="%"===String(J.r).substr(-1)?"prgb":"rgb"):N(J.h)&&N(J.s)&&N(J.v)?(ne=V(J.s),se=V(J.v),K=function(be,Se,fe){be=6*E(be,360),Se=E(Se,100),fe=E(fe,100);var me=p.floor(be),Te=be-me,_e=fe*(1-Se),Me=fe*(1-Te*Se),Ie=fe*(1-(1-Te)*Se),ze=me%6;return{r:255*[fe,Me,_e,_e,Ie,fe][ze],g:255*[Ie,fe,fe,Me,_e,_e][ze],b:255*[_e,_e,Ie,fe,fe,Me][ze]}}(J.h,ne,se),pe=!0,ce="hsv"):N(J.h)&&N(J.s)&&N(J.l)&&(ne=V(J.s),oe=V(J.l),K=function(be,Se,fe){var me,Te,_e;function Me(Ve,Je,De){return De<0&&(De+=1),De>1&&(De-=1),De<1/6?Ve+6*(Je-Ve)*De:De<.5?Je:De<2/3?Ve+(Je-Ve)*(2/3-De)*6:Ve}if(be=E(be,360),Se=E(Se,100),fe=E(fe,100),0===Se)me=Te=_e=fe;else{var Ie=fe<.5?fe*(1+Se):fe+Se-fe*Se,ze=2*fe-Ie;me=Me(ze,Ie,be+1/3),Te=Me(ze,Ie,be),_e=Me(ze,Ie,be-1/3)}return{r:255*me,g:255*Te,b:255*_e}}(J.h,ne,oe),pe=!0,ce="hsl"),J.hasOwnProperty("a")&&(re=J.a)),re=S(re),{ok:pe,format:J.format||ce,r:n(255,t(K.r,0)),g:n(255,t(K.g,0)),b:n(255,t(K.b,0)),a:re});this._originalInput=U,this._r=j.r,this._g=j.g,this._b=j.b,this._a=j.a,this._roundA=e(100*this._a)/100,this._format=Q.format||j.format,this._gradientType=Q.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=j.ok,this._tc_id=v++}function u(U,Q,j){U=E(U,255),Q=E(Q,255),j=E(j,255);var J,K,re=t(U,Q,j),ne=n(U,Q,j),se=(re+ne)/2;if(re==ne)J=K=0;else{var oe=re-ne;switch(K=se>.5?oe/(2-re-ne):oe/(re+ne),re){case U:J=(Q-j)/oe+(Q<j?6:0);break;case Q:J=(j-U)/oe+2;break;case j:J=(U-Q)/oe+4}J/=6}return{h:J,s:K,l:se}}function s(U,Q,j){U=E(U,255),Q=E(Q,255),j=E(j,255);var J,K,re=t(U,Q,j),ne=n(U,Q,j),se=re,oe=re-ne;if(K=0===re?0:oe/re,re==ne)J=0;else{switch(re){case U:J=(Q-j)/oe+(Q<j?6:0);break;case Q:J=(j-U)/oe+2;break;case j:J=(U-Q)/oe+4}J/=6}return{h:J,s:K,v:se}}function i(U,Q,j,J){var K=[H(e(U).toString(16)),H(e(Q).toString(16)),H(e(j).toString(16))];return J&&K[0].charAt(0)==K[0].charAt(1)&&K[1].charAt(0)==K[1].charAt(1)&&K[2].charAt(0)==K[2].charAt(1)?K[0].charAt(0)+K[1].charAt(0)+K[2].charAt(0):K.join("")}function l(U,Q,j,J){return[H(Z(J)),H(e(U).toString(16)),H(e(Q).toString(16)),H(e(j).toString(16))].join("")}function c(U,Q){Q=0===Q?0:Q||10;var j=r(U).toHsl();return j.s-=Q/100,j.s=R(j.s),r(j)}function f(U,Q){Q=0===Q?0:Q||10;var j=r(U).toHsl();return j.s+=Q/100,j.s=R(j.s),r(j)}function g(U){return r(U).desaturate(100)}function h(U,Q){Q=0===Q?0:Q||10;var j=r(U).toHsl();return j.l+=Q/100,j.l=R(j.l),r(j)}function o(U,Q){Q=0===Q?0:Q||10;var j=r(U).toRgb();return j.r=t(0,n(255,j.r-e(-Q/100*255))),j.g=t(0,n(255,j.g-e(-Q/100*255))),j.b=t(0,n(255,j.b-e(-Q/100*255))),r(j)}function x(U,Q){Q=0===Q?0:Q||10;var j=r(U).toHsl();return j.l-=Q/100,j.l=R(j.l),r(j)}function d(U,Q){var j=r(U).toHsl(),J=(j.h+Q)%360;return j.h=J<0?360+J:J,r(j)}function w(U){var Q=r(U).toHsl();return Q.h=(Q.h+180)%360,r(Q)}function _(U){var Q=r(U).toHsl(),j=Q.h;return[r(U),r({h:(j+120)%360,s:Q.s,l:Q.l}),r({h:(j+240)%360,s:Q.s,l:Q.l})]}function T(U){var Q=r(U).toHsl(),j=Q.h;return[r(U),r({h:(j+90)%360,s:Q.s,l:Q.l}),r({h:(j+180)%360,s:Q.s,l:Q.l}),r({h:(j+270)%360,s:Q.s,l:Q.l})]}function k(U){var Q=r(U).toHsl(),j=Q.h;return[r(U),r({h:(j+72)%360,s:Q.s,l:Q.l}),r({h:(j+216)%360,s:Q.s,l:Q.l})]}function L(U,Q,j){Q=Q||6,j=j||30;var J=r(U).toHsl(),K=360/j,re=[r(U)];for(J.h=(J.h-(K*Q>>1)+720)%360;--Q;)J.h=(J.h+K)%360,re.push(r(J));return re}function M(U,Q){Q=Q||6;for(var j=r(U).toHsv(),J=j.h,K=j.s,re=j.v,ne=[],se=1/Q;Q--;)ne.push(r({h:J,s:K,v:re})),re=(re+se)%1;return ne}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var U=this.toRgb();return(299*U.r+587*U.g+114*U.b)/1e3},getLuminance:function(){var U,Q,j,J=this.toRgb();return Q=J.g/255,j=J.b/255,.2126*((U=J.r/255)<=.03928?U/12.92:p.pow((U+.055)/1.055,2.4))+.7152*(Q<=.03928?Q/12.92:p.pow((Q+.055)/1.055,2.4))+.0722*(j<=.03928?j/12.92:p.pow((j+.055)/1.055,2.4))},setAlpha:function(U){return this._a=S(U),this._roundA=e(100*this._a)/100,this},toHsv:function(){var U=s(this._r,this._g,this._b);return{h:360*U.h,s:U.s,v:U.v,a:this._a}},toHsvString:function(){var U=s(this._r,this._g,this._b),Q=e(360*U.h),j=e(100*U.s),J=e(100*U.v);return 1==this._a?"hsv("+Q+", "+j+"%, "+J+"%)":"hsva("+Q+", "+j+"%, "+J+"%, "+this._roundA+")"},toHsl:function(){var U=u(this._r,this._g,this._b);return{h:360*U.h,s:U.s,l:U.l,a:this._a}},toHslString:function(){var U=u(this._r,this._g,this._b),Q=e(360*U.h),j=e(100*U.s),J=e(100*U.l);return 1==this._a?"hsl("+Q+", "+j+"%, "+J+"%)":"hsla("+Q+", "+j+"%, "+J+"%, "+this._roundA+")"},toHex:function(U){return i(this._r,this._g,this._b,U)},toHexString:function(U){return"#"+this.toHex(U)},toHex8:function(U){return j=this._g,J=this._b,K=this._a,re=U,ne=[H(e(this._r).toString(16)),H(e(j).toString(16)),H(e(J).toString(16)),H(Z(K))],re&&ne[0].charAt(0)==ne[0].charAt(1)&&ne[1].charAt(0)==ne[1].charAt(1)&&ne[2].charAt(0)==ne[2].charAt(1)&&ne[3].charAt(0)==ne[3].charAt(1)?ne[0].charAt(0)+ne[1].charAt(0)+ne[2].charAt(0)+ne[3].charAt(0):ne.join("");var j,J,K,re,ne},toHex8String:function(U){return"#"+this.toHex8(U)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*E(this._r,255))+"%",g:e(100*E(this._g,255))+"%",b:e(100*E(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+e(100*E(this._r,255))+"%, "+e(100*E(this._g,255))+"%, "+e(100*E(this._b,255))+"%)":"rgba("+e(100*E(this._r,255))+"%, "+e(100*E(this._g,255))+"%, "+e(100*E(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(P[i(this._r,this._g,this._b,!0)]||!1)},toFilter:function(U){var Q="#"+l(this._r,this._g,this._b,this._a),j=Q,J=this._gradientType?"GradientType = 1, ":"";if(U){var K=r(U);j="#"+l(K._r,K._g,K._b,K._a)}return"progid:DXImageTransform.Microsoft.gradient("+J+"startColorstr="+Q+",endColorstr="+j+")"},toString:function(U){var Q=!!U;U=U||this._format;var j=!1;return Q||!(this._a<1&&this._a>=0)||"hex"!==U&&"hex6"!==U&&"hex3"!==U&&"hex4"!==U&&"hex8"!==U&&"name"!==U?("rgb"===U&&(j=this.toRgbString()),"prgb"===U&&(j=this.toPercentageRgbString()),"hex"!==U&&"hex6"!==U||(j=this.toHexString()),"hex3"===U&&(j=this.toHexString(!0)),"hex4"===U&&(j=this.toHex8String(!0)),"hex8"===U&&(j=this.toHex8String()),"name"===U&&(j=this.toName()),"hsl"===U&&(j=this.toHslString()),"hsv"===U&&(j=this.toHsvString()),j||this.toHexString()):"name"===U&&0===this._a?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(U,Q){var j=U.apply(null,[this].concat([].slice.call(Q)));return this._r=j._r,this._g=j._g,this._b=j._b,this.setAlpha(j._a),this},lighten:function(){return this._applyModification(h,arguments)},brighten:function(){return this._applyModification(o,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(d,arguments)},_applyCombination:function(U,Q){return U.apply(null,[this].concat([].slice.call(Q)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(w,arguments)},monochromatic:function(){return this._applyCombination(M,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(T,arguments)}},r.fromRatio=function(U,Q){if("object"==typeof U){var j={};for(var J in U)U.hasOwnProperty(J)&&(j[J]="a"===J?U[J]:V(U[J]));U=j}return r(U,Q)},r.equals=function(U,Q){return!(!U||!Q)&&r(U).toRgbString()==r(Q).toRgbString()},r.random=function(){return r.fromRatio({r:a(),g:a(),b:a()})},r.mix=function(U,Q,j){j=0===j?0:j||50;var J=r(U).toRgb(),K=r(Q).toRgb(),re=j/100;return r({r:(K.r-J.r)*re+J.r,g:(K.g-J.g)*re+J.g,b:(K.b-J.b)*re+J.b,a:(K.a-J.a)*re+J.a})},r.readability=function(U,Q){var j=r(U),J=r(Q);return(p.max(j.getLuminance(),J.getLuminance())+.05)/(p.min(j.getLuminance(),J.getLuminance())+.05)},r.isReadable=function(U,Q,j){var J,K,ne,se,oe,re=r.readability(U,Q);switch(K=!1,(ne=j,"AA"!==(se=((ne=ne||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==se&&(se="AA"),"small"!==(oe=(ne.size||"small").toLowerCase())&&"large"!==oe&&(oe="small"),J={level:se,size:oe}).level+J.size){case"AAsmall":case"AAAlarge":K=re>=4.5;break;case"AAlarge":K=re>=3;break;case"AAAsmall":K=re>=7}return K},r.mostReadable=function(U,Q,j){var J,K,re,ne,se=null,oe=0;K=(j=j||{}).includeFallbackColors,re=j.level,ne=j.size;for(var pe=0;pe<Q.length;pe++)(J=r.readability(U,Q[pe]))>oe&&(oe=J,se=r(Q[pe]));return r.isReadable(U,se,{level:re,size:ne})||!K?se:(j.includeFallbackColors=!1,r.mostReadable(U,["#fff","#000"],j))};var O=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=r.hexNames=function(U){var Q={};for(var j in U)U.hasOwnProperty(j)&&(Q[U[j]]=j);return Q}(O);function S(U){return U=parseFloat(U),(isNaN(U)||U<0||U>1)&&(U=1),U}function E(U,Q){var J;"string"==typeof(J=U)&&-1!=J.indexOf(".")&&1===parseFloat(J)&&(U="100%");var j=function(J){return"string"==typeof J&&-1!=J.indexOf("%")}(U);return U=n(Q,t(0,parseFloat(U))),j&&(U=parseInt(U*Q,10)/100),p.abs(U-Q)<1e-6?1:U%Q/parseFloat(Q)}function R(U){return n(1,t(0,U))}function B(U){return parseInt(U,16)}function H(U){return 1==U.length?"0"+U:""+U}function V(U){return U<=1&&(U=100*U+"%"),U}function Z(U){return p.round(255*parseFloat(U)).toString(16)}function W(U){return B(U)/255}var G,X,te,D=(X="[\\s|\\(]+("+(G="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+G+")[,|\\s]+("+G+")\\s*\\)?",te="[\\s|\\(]+("+G+")[,|\\s]+("+G+")[,|\\s]+("+G+")[,|\\s]+("+G+")\\s*\\)?",{CSS_UNIT:new RegExp(G),rgb:new RegExp("rgb"+X),rgba:new RegExp("rgba"+te),hsl:new RegExp("hsl"+X),hsla:new RegExp("hsla"+te),hsv:new RegExp("hsv"+X),hsva:new RegExp("hsva"+te),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function N(U){return!!D.CSS_UNIT.exec(U)}void 0!==$&&$.exports?$.exports=r:window.tinycolor=r}(Math)},{}],313:[function(y,$,ee){"use strict";$.exports=m,$.exports.float32=$.exports.float=m,$.exports.fract32=$.exports.fract=function(b,v){if(b.length){if(b instanceof Float32Array)return new Float32Array(b.length);v instanceof Float32Array||(v=m(b));for(var e=0,n=v.length;e<n;e++)v[e]=b[e]-v[e];return v}return m(b-m(b))};var p=new Float32Array(1);function m(b){return b.length?b instanceof Float32Array?b:new Float32Array(b):(p[0]=b,p[0])}},{}],314:[function(y,$,ee){"use strict";var p=y("parse-unit");function m(v,e){var n=p(getComputedStyle(v).getPropertyValue(e));return n[0]*b(n[1],v)}function b(v,e){switch(e=e||document.body,v=(v||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),v){case"%":return e.clientHeight/100;case"ch":case"ex":return function(n,t){var a=document.createElement("div");a.style["font-size"]="128"+n,t.appendChild(a);var r=m(a,"font-size")/128;return t.removeChild(a),r}(v,e);case"em":return m(e,"font-size");case"rem":return m(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}$.exports=b},{"parse-unit":251}],315:[function(y,$,ee){var p;p=this,function(p){"use strict";function m(l){return l}function b(l){if(null==l)return m;var c,f,g=l.scale[0],h=l.scale[1],o=l.translate[0],x=l.translate[1];return function(d,w){w||(c=f=0);var _=2,T=d.length,k=new Array(T);for(k[0]=(c+=d[0])*g+o,k[1]=(f+=d[1])*h+x;_<T;)k[_]=d[_],++_;return k}}function v(l){var c,f=b(l.transform),g=1/0,h=g,o=-g,x=-g;function d(_){(_=f(_))[0]<g&&(g=_[0]),_[0]>o&&(o=_[0]),_[1]<h&&(h=_[1]),_[1]>x&&(x=_[1])}function w(_){switch(_.type){case"GeometryCollection":_.geometries.forEach(w);break;case"Point":d(_.coordinates);break;case"MultiPoint":_.coordinates.forEach(d)}}for(c in l.arcs.forEach(function(_){for(var T,k=-1,L=_.length;++k<L;)(T=f(_[k],k))[0]<g&&(g=T[0]),T[0]>o&&(o=T[0]),T[1]<h&&(h=T[1]),T[1]>x&&(x=T[1])}),l.objects)w(l.objects[c]);return[g,h,o,x]}function e(l,c){var f=c.id,g=c.bbox,h=null==c.properties?{}:c.properties,o=n(l,c);return null==f&&null==g?{type:"Feature",properties:h,geometry:o}:null==g?{type:"Feature",id:f,properties:h,geometry:o}:{type:"Feature",id:f,bbox:g,properties:h,geometry:o}}function n(l,c){var f=b(l.transform),g=l.arcs;function h(_,T){T.length&&T.pop();for(var k=g[_<0?~_:_],L=0,M=k.length;L<M;++L)T.push(f(k[L],L));_<0&&function(O,P){for(var S,E=O.length,R=E-P;R<--E;)S=O[R],O[R++]=O[E],O[E]=S}(T,M)}function o(_){return f(_)}function x(_){for(var T=[],k=0,L=_.length;k<L;++k)h(_[k],T);return T.length<2&&T.push(T[0]),T}function d(_){for(var T=x(_);T.length<4;)T.push(T[0]);return T}function w(_){return _.map(d)}return function _(T){var k,L=T.type;switch(L){case"GeometryCollection":return{type:L,geometries:T.geometries.map(_)};case"Point":k=o(T.coordinates);break;case"MultiPoint":k=T.coordinates.map(o);break;case"LineString":k=x(T.arcs);break;case"MultiLineString":k=T.arcs.map(x);break;case"Polygon":k=w(T.arcs);break;case"MultiPolygon":k=T.arcs.map(w);break;default:return null}return{type:L,coordinates:k}}(c)}function t(l,c){var f={},g={},h={},o=[],x=-1;function d(w,_){for(var T in w){var k=w[T];delete _[k.start],delete k.start,delete k.end,k.forEach(function(L){f[L<0?~L:L]=1}),o.push(k)}}return c.forEach(function(w,_){var T,k=l.arcs[w<0?~w:w];k.length<3&&!k[1][0]&&!k[1][1]&&(T=c[++x],c[x]=w,c[_]=T)}),c.forEach(function(w){var _,T,S,E,R,B,k=(B=(R=l.arcs[(S=w)<0?~S:S])[0],l.transform?(E=[0,0],R.forEach(function(H){E[0]+=H[0],E[1]+=H[1]})):E=R[R.length-1],S<0?[E,B]:[B,E]),L=k[0],M=k[1];if(_=h[L])if(delete h[_.end],_.push(w),_.end=M,T=g[M]){delete g[T.start];var O=T===_?_:_.concat(T);g[O.start=_.start]=h[O.end=T.end]=O}else g[_.start]=h[_.end]=_;else if(_=g[M])if(delete g[_.start],_.unshift(w),_.start=L,T=h[L]){delete h[T.end];var P=T===_?_:T.concat(_);g[P.start=T.start]=h[P.end=_.end]=P}else g[_.start]=h[_.end]=_;else g[(_=[w]).start=L]=h[_.end=M]=_}),d(h,g),d(g,h),c.forEach(function(w){f[w<0?~w:w]||o.push([w])}),o}function a(l,c,f){var g,h,o;if(arguments.length>1)g=r(0,c,f);else for(h=0,g=new Array(o=l.arcs.length);h<o;++h)g[h]=h;return{type:"MultiLineString",arcs:t(l,g)}}function r(l,c,f){var g,h=[],o=[];function x(_){var T=_<0?~_:_;(o[T]||(o[T]=[])).push({i:_,g})}function d(_){_.forEach(x)}function w(_){_.forEach(d)}return function _(T){switch(g=T,T.type){case"GeometryCollection":T.geometries.forEach(_);break;case"LineString":d(T.arcs);break;case"MultiLineString":case"Polygon":w(T.arcs);break;case"MultiPolygon":T.arcs.forEach(w)}}(c),o.forEach(null==f?function(_){h.push(_[0].i)}:function(_){f(_[0].g,_[_.length-1].g)&&h.push(_[0].i)}),h}function u(l,c){var f={},g=[],h=[];function o(d){d.forEach(function(w){w.forEach(function(_){(f[_=_<0?~_:_]||(f[_]=[])).push(d)})}),g.push(d)}function x(d){return function(w){for(var _,T=-1,k=w.length,L=w[k-1],M=0;++T<k;)M+=(_=L)[0]*(L=w[T])[1]-_[1]*L[0];return Math.abs(M)}(n(l,{type:"Polygon",arcs:[d]}).coordinates[0])}return c.forEach(function d(w){switch(w.type){case"GeometryCollection":w.geometries.forEach(d);break;case"Polygon":o(w.arcs);break;case"MultiPolygon":w.arcs.forEach(o)}}),g.forEach(function(d){if(!d._){var w=[],_=[d];for(d._=1,h.push(w);d=_.pop();)w.push(d),d.forEach(function(T){T.forEach(function(k){f[k<0?~k:k].forEach(function(L){L._||(L._=1,_.push(L))})})})}}),g.forEach(function(d){delete d._}),{type:"MultiPolygon",arcs:h.map(function(d){var w,_=[];if(d.forEach(function(O){O.forEach(function(P){P.forEach(function(S){f[S<0?~S:S].length<2&&_.push(S)})})}),(w=(_=t(l,_)).length)>1)for(var T,k,L=1,M=x(_[0]);L<w;++L)(T=x(_[L]))>M&&(k=_[0],_[0]=_[L],_[L]=k,M=T);return _}).filter(function(d){return d.length>0})}}function s(l,c){for(var f=0,g=l.length;f<g;){var h=f+g>>>1;l[h]<c?f=h+1:g=h}return f}function i(l){if(null==l)return m;var c,f,g=l.scale[0],h=l.scale[1],o=l.translate[0],x=l.translate[1];return function(d,w){w||(c=f=0);var _=2,T=d.length,k=new Array(T),L=Math.round((d[0]-o)/g),M=Math.round((d[1]-x)/h);for(k[0]=L-c,c=L,k[1]=M-f,f=M;_<T;)k[_]=d[_],++_;return k}}p.bbox=v,p.feature=function(l,c){return"string"==typeof c&&(c=l.objects[c]),"GeometryCollection"===c.type?{type:"FeatureCollection",features:c.geometries.map(function(f){return e(l,f)})}:e(l,c)},p.merge=function(l){return n(l,u.apply(this,arguments))},p.mergeArcs=u,p.mesh=function(l){return n(l,a.apply(this,arguments))},p.meshArcs=a,p.neighbors=function(l){var c={},f=l.map(function(){return[]});function g(O,P){O.forEach(function(S){S<0&&(S=~S);var E=c[S];E?E.push(P):c[S]=[P]})}function h(O,P){O.forEach(function(S){g(S,P)})}var o={LineString:g,MultiLineString:h,Polygon:h,MultiPolygon:function(O,P){O.forEach(function(S){h(S,P)})}};for(var x in l.forEach(function O(P,S){"GeometryCollection"===P.type?P.geometries.forEach(function(E){O(E,S)}):P.type in o&&o[P.type](P.arcs,S)}),c)for(var d=c[x],w=d.length,_=0;_<w;++_)for(var T=_+1;T<w;++T){var k,L=d[_],M=d[T];(k=f[L])[x=s(k,M)]!==M&&k.splice(x,0,M),(k=f[M])[x=s(k,L)]!==L&&k.splice(x,0,L)}return f},p.quantize=function(l,c){if(l.transform)throw new Error("already quantized");if(c&&c.scale)d=l.bbox;else{if(!((f=Math.floor(c))>=2))throw new Error("n must be \u22652");var f,g=(d=l.bbox||v(l))[0],h=d[1],o=d[2],x=d[3];c={scale:[o-g?(o-g)/(f-1):1,x-h?(x-h)/(f-1):1],translate:[g,h]}}var d,w,_=i(c),T=l.objects,k={};function L(O){return _(O)}function M(O){var P;switch(O.type){case"GeometryCollection":P={type:"GeometryCollection",geometries:O.geometries.map(M)};break;case"Point":P={type:"Point",coordinates:L(O.coordinates)};break;case"MultiPoint":P={type:"MultiPoint",coordinates:O.coordinates.map(L)};break;default:return O}return null!=O.id&&(P.id=O.id),null!=O.bbox&&(P.bbox=O.bbox),null!=O.properties&&(P.properties=O.properties),P}for(w in T)k[w]=M(T[w]);return{type:"Topology",bbox:d,transform:c,objects:k,arcs:l.arcs.map(function(O){var P,S=0,E=1,R=O.length,B=new Array(R);for(B[0]=_(O[0],0);++S<R;)((P=_(O[S],S))[0]||P[1])&&(B[E++]=P);return 1===E&&(B[E++]=[0,0]),B.length=E,B})}},p.transform=b,p.untransform=i,Object.defineProperty(p,"__esModule",{value:!0})}("object"==typeof ee&&void 0!==$?ee:(p=p||self).topojson=p.topojson||{})},{}],316:[function(y,$,ee){"use strict";var p=y("../prototype/is");$.exports=function(m){if("function"!=typeof m||!hasOwnProperty.call(m,"length"))return!1;try{if("number"!=typeof m.length||"function"!=typeof m.call||"function"!=typeof m.apply)return!1}catch(b){return!1}return!p(m)}},{"../prototype/is":323}],317:[function(y,$,ee){"use strict";var p=y("../value/is"),m=y("../object/is"),b=y("../string/coerce"),v=y("./to-short-string"),e=function(n,t){return n.replace("%v",v(t))};$.exports=function(n,t,a){if(!m(a))throw new TypeError(e(t,n));if(!p(n)){if("default"in a)return a.default;if(a.isOptional)return null}var r=b(a.errorMessage);throw p(r)||(r=t),new TypeError(e(r,n))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(y,$,ee){"use strict";$.exports=function(p){try{return p.toString()}catch(m){try{return String(p)}catch(b){return null}}}},{}],319:[function(y,$,ee){"use strict";var p=y("./safe-to-string"),m=/[\n\r\u2028\u2029]/g;$.exports=function(b){var v=p(b);return null===v?"<Non-coercible to string value>":(v.length>100&&(v=v.slice(0,99)+"\u2026"),v=v.replace(m,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":318}],320:[function(y,$,ee){"use strict";var p=y("../value/is"),m={object:!0,function:!0,undefined:!0};$.exports=function(b){return!!p(b)&&hasOwnProperty.call(m,typeof b)}},{"../value/is":326}],321:[function(y,$,ee){"use strict";var p=y("../lib/resolve-exception"),m=y("./is");$.exports=function(b){return m(b)?b:p(b,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(y,$,ee){"use strict";var p=y("../function/is"),m=/^\s*class[\s{/}]/,b=Function.prototype.toString;$.exports=function(v){return!!p(v)&&!m.test(b.call(v))}},{"../function/is":316}],323:[function(y,$,ee){"use strict";var p=y("../object/is");$.exports=function(m){if(!p(m))return!1;try{return!!m.constructor&&m.constructor.prototype===m}catch(b){return!1}}},{"../object/is":320}],324:[function(y,$,ee){"use strict";var p=y("../value/is"),m=y("../object/is"),b=Object.prototype.toString;$.exports=function(v){if(!p(v))return null;if(m(v)){var e=v.toString;if("function"!=typeof e||e===b)return null}try{return""+v}catch(n){return null}}},{"../object/is":320,"../value/is":326}],325:[function(y,$,ee){"use strict";var p=y("../lib/resolve-exception"),m=y("./is");$.exports=function(b){return m(b)?b:p(b,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(y,$,ee){"use strict";$.exports=function(p){return null!=p}},{}],327:[function(y,$,ee){(function(p){(function(){"use strict";var m=y("bit-twiddle"),b=y("dup"),v=y("buffer").Buffer;p.__TYPEDARRAY_POOL||(p.__TYPEDARRAY_POOL={UINT8:b([32,0]),UINT16:b([32,0]),UINT32:b([32,0]),BIGUINT64:b([32,0]),INT8:b([32,0]),INT16:b([32,0]),INT32:b([32,0]),BIGINT64:b([32,0]),FLOAT:b([32,0]),DOUBLE:b([32,0]),DATA:b([32,0]),UINT8C:b([32,0]),BUFFER:b([32,0])});var e="undefined"!=typeof Uint8ClampedArray,n="undefined"!=typeof BigUint64Array,t="undefined"!=typeof BigInt64Array,a=p.__TYPEDARRAY_POOL;a.UINT8C||(a.UINT8C=b([32,0])),a.BIGUINT64||(a.BIGUINT64=b([32,0])),a.BIGINT64||(a.BIGINT64=b([32,0])),a.BUFFER||(a.BUFFER=b([32,0]));var r=a.DATA,u=a.BUFFER;function s(M){if(M){var P=m.log2(M.length||M.byteLength);r[P].push(M)}}function i(M){M=m.nextPow2(M);var O=m.log2(M),P=r[O];return P.length>0?P.pop():new ArrayBuffer(M)}function l(M){return new Uint8Array(i(M),0,M)}function c(M){return new Uint16Array(i(2*M),0,M)}function f(M){return new Uint32Array(i(4*M),0,M)}function g(M){return new Int8Array(i(M),0,M)}function h(M){return new Int16Array(i(2*M),0,M)}function o(M){return new Int32Array(i(4*M),0,M)}function x(M){return new Float32Array(i(4*M),0,M)}function d(M){return new Float64Array(i(8*M),0,M)}function w(M){return e?new Uint8ClampedArray(i(M),0,M):l(M)}function _(M){return n?new BigUint64Array(i(8*M),0,M):null}function T(M){return t?new BigInt64Array(i(8*M),0,M):null}function k(M){return new DataView(i(M),0,M)}function L(M){M=m.nextPow2(M);var O=m.log2(M),P=u[O];return P.length>0?P.pop():new v(M)}ee.free=function(M){if(v.isBuffer(M))u[m.log2(M.length)].push(M);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(M)&&(M=M.buffer),!M)return;var P=0|m.log2(M.length||M.byteLength);r[P].push(M)}},ee.freeUint8=ee.freeUint16=ee.freeUint32=ee.freeBigUint64=ee.freeInt8=ee.freeInt16=ee.freeInt32=ee.freeBigInt64=ee.freeFloat32=ee.freeFloat=ee.freeFloat64=ee.freeDouble=ee.freeUint8Clamped=ee.freeDataView=function(M){s(M.buffer)},ee.freeArrayBuffer=s,ee.freeBuffer=function(M){u[m.log2(M.length)].push(M)},ee.malloc=function(M,O){if(void 0===O||"arraybuffer"===O)return i(M);switch(O){case"uint8":return l(M);case"uint16":return c(M);case"uint32":return f(M);case"int8":return g(M);case"int16":return h(M);case"int32":return o(M);case"float":case"float32":return x(M);case"double":case"float64":return d(M);case"uint8_clamped":return w(M);case"bigint64":return T(M);case"biguint64":return _(M);case"buffer":return L(M);case"data":case"dataview":return k(M);default:return null}return null},ee.mallocArrayBuffer=i,ee.mallocUint8=l,ee.mallocUint16=c,ee.mallocUint32=f,ee.mallocInt8=g,ee.mallocInt16=h,ee.mallocInt32=o,ee.mallocFloat32=ee.mallocFloat=x,ee.mallocFloat64=ee.mallocDouble=d,ee.mallocUint8Clamped=w,ee.mallocBigUint64=_,ee.mallocBigInt64=T,ee.mallocDataView=k,ee.mallocBuffer=L,ee.clearCache=function(){for(var M=0;M<32;++M)a.UINT8[M].length=0,a.UINT16[M].length=0,a.UINT32[M].length=0,a.INT8[M].length=0,a.INT16[M].length=0,a.INT32[M].length=0,a.FLOAT[M].length=0,a.DOUBLE[M].length=0,a.BIGUINT64[M].length=0,a.BIGINT64[M].length=0,a.UINT8C[M].length=0,r[M].length=0,u[M].length=0}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(y,$,ee){var p=/[\'\"]/;$.exports=function(m){return m?(p.test(m.charAt(0))&&(m=m.substr(1)),p.test(m.charAt(m.length-1))&&(m=m.substr(0,m.length-1)),m):""}},{}],329:[function(y,$,ee){"use strict";$.exports=function(p,m,b){Array.isArray(b)||(b=[].slice.call(arguments,2));for(var v=0,e=b.length;v<e;v++){var n=b[v];for(var t in n)if((void 0===m[t]||Array.isArray(m[t])||p[t]!==m[t])&&t in m){var a;if(!0===n[t])a=m[t];else if(!1===n[t]||"function"==typeof n[t]&&void 0===(a=n[t](m[t],p,m)))continue;p[t]=a}}return p}},{}],330:[function(y,$,ee){(function(p){(function(){function m(b){try{if(!p.localStorage)return!1}catch(e){return!1}var v=p.localStorage[b];return null!=v&&"true"===String(v).toLowerCase()}$.exports=function(b,v){if(m("noDeprecation"))return b;var e=!1;return function(){if(!e){if(m("throwDeprecation"))throw new Error(v);m("traceDeprecation")?console.trace(v):console.warn(v),e=!0}return b.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],331:[function(y,$,ee){var p=y("get-canvas-context");$.exports=function(m){return p("webgl",m)}},{"get-canvas-context":194}],332:[function(y,$,ee){var p=y("../main"),m=y("object-assign"),b=p.instance();function v(s){this.local=this.regionalOptions[s||""]||this.regionalOptions[""]}m(v.prototype=new p.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(s,i){if("string"==typeof s){var l=s.match(n);return l?l[0]:""}var c=this._validateYear(s),f=s.month(),g=""+this.toChineseMonth(c,f);return i&&g.length<2&&(g="0"+g),this.isIntercalaryMonth(c,f)&&(g+="i"),g},monthNames:function(s){if("string"==typeof s){var i=s.match(t);return i?i[0]:""}var l=this._validateYear(s),c=s.month(),f=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(l,c)-1];return this.isIntercalaryMonth(l,c)&&(f="\u95f0"+f),f},monthNamesShort:function(s){if("string"==typeof s){var i=s.match(a);return i?i[0]:""}var l=this._validateYear(s),c=s.month(),f=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(l,c)-1];return this.isIntercalaryMonth(l,c)&&(f="\u95f0"+f),f},parseMonth:function(s,i){s=this._validateYear(s);var l,c=parseInt(i);if(isNaN(c))"\u95f0"===i[0]&&(l=!0,i=i.substring(1)),"\u6708"===i[i.length-1]&&(i=i.substring(0,i.length-1)),c=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(i);else{var f=i[i.length-1];l="i"===f||"I"===f}return this.toMonthIndex(s,c,l)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(s,i){if(s.year&&(s=s.year()),"number"!=typeof s||s<1888||s>2111)throw i.replace(/\{0\}/,this.local.name);return s},toMonthIndex:function(s,i,l){var c=this.intercalaryMonth(s);if(l&&i!==c||i<1||i>12)throw p.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?!l&&i<=c?i-1:i:i-1},toChineseMonth:function(s,i){s.year&&(i=(s=s.year()).month());var l=this.intercalaryMonth(s);if(i<0||i>(l?12:11))throw p.local.invalidMonth.replace(/\{0\}/,this.local.name);return l?i<l?i+1:i:i+1},intercalaryMonth:function(s){return s=this._validateYear(s),r[s-r[0]]>>13},isIntercalaryMonth:function(s,i){s.year&&(i=(s=s.year()).month());var l=this.intercalaryMonth(s);return!!l&&l===i},leapYear:function(s){return 0!==this.intercalaryMonth(s)},weekOfYear:function(s,i,l){var c,f=this._validateYear(s,p.local.invalidyear),g=u[f-u[0]];(c=b.newDate(g>>9&4095,g>>5&15,31&g)).add(4-(c.dayOfWeek()||7),"d");var d=this.toJD(s,i,l)-c.toJD();return 1+Math.floor(d/7)},monthsInYear:function(s){return this.leapYear(s)?13:12},daysInMonth:function(s,i){s.year&&(i=s.month(),s=s.year()),s=this._validateYear(s);var l=r[s-r[0]];if(i>(l>>13?12:11))throw p.local.invalidMonth.replace(/\{0\}/,this.local.name);return l&1<<12-i?30:29},weekDay:function(s,i,l){return(this.dayOfWeek(s,i,l)||7)<6},toJD:function(s,i,l){var c=this._validate(s,g,l,p.local.invalidDate);s=this._validateYear(c.year()),i=c.month(),l=c.day();var f=this.isIntercalaryMonth(s,i),g=this.toChineseMonth(s,i),h=function(o,x,d,w,_){var T,k,L;if("object"==typeof o)k=o,T=x||{};else{var M;if(!("number"==typeof o&&o>=1888&&o<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof x&&x>=1&&x<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof d&&d>=1&&d<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof w?(M=!1,T=w):(M=!!w,T={}),k={year:o,month:x,day:d,isIntercalary:M}}L=k.day-1;var O,P=r[k.year-r[0]],S=P>>13;O=S&&(k.month>S||k.isIntercalary)?k.month:k.month-1;for(var E=0;E<O;E++)L+=P&1<<12-E?30:29;var R=u[k.year-u[0]],B=new Date(R>>9&4095,(R>>5&15)-1,(31&R)+L);return T.year=B.getFullYear(),T.month=1+B.getMonth(),T.day=B.getDate(),T}(s,g,l,f);return b.toJD(h.year,h.month,h.day)},fromJD:function(s){var i=b.fromJD(s),l=function(f,g,h,o){var x,d;if("object"==typeof f)x=f,d=g||{};else{if(!("number"==typeof f&&f>=1888&&f<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof g&&g>=1&&g<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof h&&h>=1&&h<=31))throw new Error("Solar day outside range 1 - 31");x={year:f,month:g,day:h},d={}}var w=u[x.year-u[0]];d.year=(x.year<<9|x.month<<5|x.day)>=w?x.year:x.year-1,w=u[d.year-u[0]];var T,k=new Date(w>>9&4095,(w>>5&15)-1,31&w),L=new Date(x.year,x.month-1,x.day);T=Math.round((L-k)/864e5);var M,O=r[d.year-r[0]];for(M=0;M<13;M++){var P=O&1<<12-M?30:29;if(T<P)break;T-=P}var S=O>>13;return!S||M<S?(d.isIntercalary=!1,d.month=1+M):M===S?(d.isIntercalary=!0,d.month=M):(d.isIntercalary=!1,d.month=M),d.day=1+T,d}(i.year(),i.month(),i.day()),c=this.toMonthIndex(l.year,l.month,l.isIntercalary);return this.newDate(l.year,c,l.day)},fromString:function(s){var i=s.match(e),l=this._validateYear(+i[1]),g=this.toMonthIndex(l,+i[2],!!i[3]);return this.newDate(l,g,+i[4])},add:function(s,i,l){var c=s.year(),f=s.month(),g=this.isIntercalaryMonth(c,f),h=this.toChineseMonth(c,f),o=Object.getPrototypeOf(v.prototype).add.call(this,s,i,l);if("y"===l){var x=o.year(),d=o.month(),w=this.isIntercalaryMonth(x,h),_=this.toMonthIndex(x,h,!(!g||!w));_!==d&&o.month(_)}return o}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,n=/^\d?\d[iI]?/m,t=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,a=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;p.calendars.chinese=v;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],u=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":346,"object-assign":247}],333:[function(y,$,ee){var p=y("../main");function b(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}y("object-assign")(b.prototype=new p.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var e=this._validate(v,this.minMonth,this.minDay,p.local.invalidYear);return(v=e.year()+(e.year()<0?1:0))%4==3||v%4==-1},monthsInYear:function(v){return this._validate(v,this.minMonth,this.minDay,p.local.invalidYear||p.regionalOptions[""].invalidYear),13},weekOfYear:function(v,e,n){var t=this.newDate(v,e,n);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(v,e){var n=this._validate(v,e,this.minDay,p.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(v,e,n){return(this.dayOfWeek(v,e,n)||7)<6},toJD:function(v,e,n){var t=this._validate(v,e,n,p.local.invalidDate);return(v=t.year())<0&&v++,t.day()+30*(t.month()-1)+365*(v-1)+Math.floor(v/4)+this.jdEpoch-1},fromJD:function(v){var e=Math.floor(v)+.5-this.jdEpoch,n=Math.floor((e-Math.floor((e+366)/1461))/365)+1;n<=0&&n--,e=Math.floor(v)+.5-this.newDate(n,1,1).toJD();var t=Math.floor(e/30)+1;return this.newDate(n,t,e-30*(t-1)+1)}}),p.calendars.coptic=b},{"../main":346,"object-assign":247}],334:[function(y,$,ee){var p=y("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}y("object-assign")(b.prototype=new p.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,p.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,p.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,p.local.invalidYear),400},weekOfYear:function(e,n,t){var a=this.newDate(e,n,t);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/8)+1},daysInMonth:function(e,n){var t=this._validate(e,n,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,n,t){return(this._validate(e,n,t,p.local.invalidDate).day()+1)%8},weekDay:function(e,n,t){var a=this.dayOfWeek(e,n,t);return a>=2&&a<=6},extraInfo:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate);return{century:v[Math.floor((a.year()-1)/100)+1]||""}},toJD:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate);return e=a.year()+(a.year()<0?1:0),n=a.month(),(t=a.day())+(n>1?16:0)+(n>2?32*(n-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var n=Math.floor(e/400)+1;e-=400*(n-1),e+=e>15?16:0;var t=Math.floor(e/32)+1;return this.newDate(n<=0?n-1:n,t,e-32*(t-1)+1)}});var v={20:"Fruitbat",21:"Anchovy"};p.calendars.discworld=b},{"../main":346,"object-assign":247}],335:[function(y,$,ee){var p=y("../main");function b(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}y("object-assign")(b.prototype=new p.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var e=this._validate(v,this.minMonth,this.minDay,p.local.invalidYear);return(v=e.year()+(e.year()<0?1:0))%4==3||v%4==-1},monthsInYear:function(v){return this._validate(v,this.minMonth,this.minDay,p.local.invalidYear||p.regionalOptions[""].invalidYear),13},weekOfYear:function(v,e,n){var t=this.newDate(v,e,n);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(v,e){var n=this._validate(v,e,this.minDay,p.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(v,e,n){return(this.dayOfWeek(v,e,n)||7)<6},toJD:function(v,e,n){var t=this._validate(v,e,n,p.local.invalidDate);return(v=t.year())<0&&v++,t.day()+30*(t.month()-1)+365*(v-1)+Math.floor(v/4)+this.jdEpoch-1},fromJD:function(v){var e=Math.floor(v)+.5-this.jdEpoch,n=Math.floor((e-Math.floor((e+366)/1461))/365)+1;n<=0&&n--,e=Math.floor(v)+.5-this.newDate(n,1,1).toJD();var t=Math.floor(e/30)+1;return this.newDate(n,t,e-30*(t-1)+1)}}),p.calendars.ethiopian=b},{"../main":346,"object-assign":247}],336:[function(y,$,ee){var p=y("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function v(e,n){return e-n*Math.floor(e/n)}y("object-assign")(b.prototype=new p.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return this._leapYear(n.year())},_leapYear:function(e){return v(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,p.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,n,t){var a=this.newDate(e,n,t);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,n){return e.year&&(n=e.month(),e=e.year()),this._validate(e,n,this.minDay,p.local.invalidMonth),12===n&&this.leapYear(e)||8===n&&5===v(this.daysInYear(e),10)?30:9===n&&3===v(this.daysInYear(e),10)?29:this.daysPerMonth[n-1]},weekDay:function(e,n,t){return 6!==this.dayOfWeek(e,n,t)},extraInfo:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate);return{yearType:(this.leapYear(a)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(a)%10-3]}},toJD:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate);e=a.year(),n=a.month(),t=a.day();var r=e<=0?e+1:e,u=this.jdEpoch+this._delay1(r)+this._delay2(r)+t+1;if(n<7){for(var s=7;s<=this.monthsInYear(e);s++)u+=this.daysInMonth(e,s);for(s=1;s<n;s++)u+=this.daysInMonth(e,s)}else for(s=7;s<n;s++)u+=this.daysInMonth(e,s);return u},_delay1:function(e){var n=Math.floor((235*e-234)/19),a=29*n+Math.floor((12084+13753*n)/25920);return v(3*(a+1),7)<3&&a++,a},_delay2:function(e){var n=this._delay1(e-1),t=this._delay1(e);return this._delay1(e+1)-t==356?2:t-n==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var n=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===n?1:n+1,7,1);)n++;for(var t=e<this.toJD(n,1,1)?7:1;e>this.toJD(n,t,this.daysInMonth(n,t));)t++;var a=e-this.toJD(n,t,1)+1;return this.newDate(n,t,a)}}),p.calendars.hebrew=b},{"../main":346,"object-assign":247}],337:[function(y,$,ee){var p=y("../main");function b(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}y("object-assign")(b.prototype=new p.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(v){return(11*this._validate(v,this.minMonth,this.minDay,p.local.invalidYear).year()+14)%30<11},weekOfYear:function(v,e,n){var t=this.newDate(v,e,n);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(v){return this.leapYear(v)?355:354},daysInMonth:function(v,e){var n=this._validate(v,e,this.minDay,p.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(v,e,n){return 5!==this.dayOfWeek(v,e,n)},toJD:function(v,e,n){var t=this._validate(v,e,n,p.local.invalidDate);return v=t.year(),e=t.month(),v=v<=0?v+1:v,(n=t.day())+Math.ceil(29.5*(e-1))+354*(v-1)+Math.floor((3+11*v)/30)+this.jdEpoch-1},fromJD:function(v){v=Math.floor(v)+.5;var e=Math.floor((30*(v-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var n=Math.min(12,Math.ceil((v-29-this.toJD(e,1,1))/29.5)+1),t=v-this.toJD(e,n,1)+1;return this.newDate(e,n,t)}}),p.calendars.islamic=b},{"../main":346,"object-assign":247}],338:[function(y,$,ee){var p=y("../main");function b(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}y("object-assign")(b.prototype=new p.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var e=this._validate(v,this.minMonth,this.minDay,p.local.invalidYear);return(v=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(v,e,n){var t=this.newDate(v,e,n);return t.add(4-(t.dayOfWeek()||7),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInMonth:function(v,e){var n=this._validate(v,e,this.minDay,p.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(v,e,n){return(this.dayOfWeek(v,e,n)||7)<6},toJD:function(v,e,n){var t=this._validate(v,e,n,p.local.invalidDate);return v=t.year(),e=t.month(),n=t.day(),v<0&&v++,e<=2&&(v--,e+=12),Math.floor(365.25*(v+4716))+Math.floor(30.6001*(e+1))+n-1524.5},fromJD:function(v){var e=Math.floor(v+.5)+1524,n=Math.floor((e-122.1)/365.25),t=Math.floor(365.25*n),a=Math.floor((e-t)/30.6001),r=a-Math.floor(a<14?1:13),u=n-Math.floor(r>2?4716:4715),s=e-t-Math.floor(30.6001*a);return u<=0&&u--,this.newDate(u,r,s)}}),p.calendars.julian=b},{"../main":346,"object-assign":247}],339:[function(y,$,ee){var p=y("../main");function b(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}function v(n,t){return n-t*Math.floor(n/t)}function e(n,t){return v(n-1,t)+1}y("object-assign")(b.prototype=new p.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(n){return this._validate(n,this.minMonth,this.minDay,p.local.invalidYear),!1},formatYear:function(n){n=this._validate(n,this.minMonth,this.minDay,p.local.invalidYear).year();var t=Math.floor(n/400);return n%=400,n+=n<0?400:0,t+"."+Math.floor(n/20)+"."+n%20},forYear:function(n){if((n=n.split(".")).length<3)throw"Invalid Mayan year";for(var t=0,a=0;a<n.length;a++){var r=parseInt(n[a],10);if(Math.abs(r)>19||a>0&&r<0)throw"Invalid Mayan year";t=20*t+r}return t},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,p.local.invalidYear),18},weekOfYear:function(n,t,a){return this._validate(n,t,a,p.local.invalidDate),0},daysInYear:function(n){return this._validate(n,this.minMonth,this.minDay,p.local.invalidYear),360},daysInMonth:function(n,t){return this._validate(n,t,this.minDay,p.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(n,t,a){return this._validate(n,t,a,p.local.invalidDate).day()},weekDay:function(n,t,a){return this._validate(n,t,a,p.local.invalidDate),!0},extraInfo:function(n,t,a){var r=this._validate(n,t,a,p.local.invalidDate).toJD(),u=this._toHaab(r),s=this._toTzolkin(r);return{haabMonthName:this.local.haabMonths[u[0]-1],haabMonth:u[0],haabDay:u[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(n){var t=v(8+(n-=this.jdEpoch)+340,365);return[Math.floor(t/20)+1,v(t,20)]},_toTzolkin:function(n){return[e(20+(n-=this.jdEpoch),20),e(n+4,13)]},toJD:function(n,t,a){var r=this._validate(n,t,a,p.local.invalidDate);return r.day()+20*r.month()+360*r.year()+this.jdEpoch},fromJD:function(n){n=Math.floor(n)+.5-this.jdEpoch;var t=Math.floor(n/360);n%=360,n+=n<0?360:0;var a=Math.floor(n/20);return this.newDate(t,a,n%20)}}),p.calendars.mayan=b},{"../main":346,"object-assign":247}],340:[function(y,$,ee){var p=y("../main"),m=y("object-assign");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b.prototype=new p.baseCalendar;var v=p.instance("gregorian");m(b.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear||p.regionalOptions[""].invalidYear);return v.leapYear(n.year()+(n.year()<1?1:0)+1469)},weekOfYear:function(e,n,t){var a=this.newDate(e,n,t);return a.add(1-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,n){var t=this._validate(e,n,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,n,t){return(this.dayOfWeek(e,n,t)||7)<6},toJD:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidMonth);(e=a.year())<0&&e++;for(var r=a.day(),u=1;u<a.month();u++)r+=this.daysPerMonth[u-1];return r+v.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var n=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(n+1,1,1);)n++;for(var t=e-Math.floor(this.toJD(n,1,1)+.5)+1,a=1;t>this.daysInMonth(n,a);)t-=this.daysInMonth(n,a),a++;return this.newDate(n,a,t)}}),p.calendars.nanakshahi=b},{"../main":346,"object-assign":247}],341:[function(y,$,ee){var p=y("../main");function b(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}y("object-assign")(b.prototype=new p.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(v){return this.daysInYear(v)!==this.daysPerYear},weekOfYear:function(v,e,n){var t=this.newDate(v,e,n);return t.add(-t.dayOfWeek(),"d"),Math.floor((t.dayOfYear()-1)/7)+1},daysInYear:function(v){if(v=this._validate(v,this.minMonth,this.minDay,p.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[v])return this.daysPerYear;for(var e=0,n=this.minMonth;n<=12;n++)e+=this.NEPALI_CALENDAR_DATA[v][n];return e},daysInMonth:function(v,e){return v.year&&(e=v.month(),v=v.year()),this._validate(v,e,this.minDay,p.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[v]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[v][e]},weekDay:function(v,e,n){return 6!==this.dayOfWeek(v,e,n)},toJD:function(v,e,n){var t=this._validate(v,e,n,p.local.invalidDate);v=t.year(),e=t.month(),n=t.day();var a=p.instance(),r=0,u=e,s=v;this._createMissingCalendarData(v);var i=v-(u>9||9===u&&n>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(9!==e&&(r=n,u--);9!==u;)u<=0&&(u=12,s--),r+=this.NEPALI_CALENDAR_DATA[s][u],u--;return 9===e?(r+=n-this.NEPALI_CALENDAR_DATA[s][0])<0&&(r+=a.daysInYear(i)):r+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],a.newDate(i,1,1).add(r,"d").toJD()},fromJD:function(v){var e=p.instance().fromJD(v),n=e.year(),t=e.dayOfYear(),a=n+56;this._createMissingCalendarData(a);for(var r=9,s=this.NEPALI_CALENDAR_DATA[a][r]-this.NEPALI_CALENDAR_DATA[a][0]+1;t>s;)++r>12&&(r=1,a++),s+=this.NEPALI_CALENDAR_DATA[a][r];return this.newDate(a,r,this.NEPALI_CALENDAR_DATA[a][r]-(s-t))},_createMissingCalendarData:function(v){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var n=v-1;n<v+2;n++)void 0===this.NEPALI_CALENDAR_DATA[n]&&(this.NEPALI_CALENDAR_DATA[n]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),p.calendars.nepali=b},{"../main":346,"object-assign":247}],342:[function(y,$,ee){var p=y("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function v(e,n){return e-n*Math.floor(e/n)}y("object-assign")(b.prototype=new p.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return 682*((n.year()-(n.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,n,t){var a=this.newDate(e,n,t);return a.add(-(a.dayOfWeek()+1)%7,"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(e,n){var t=this._validate(e,n,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(12===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,n,t){return 5!==this.dayOfWeek(e,n,t)},toJD:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate);e=a.year(),n=a.month(),t=a.day();var r=e-(e>=0?474:473),u=474+v(r,2820);return t+(n<=7?31*(n-1):30*(n-1)+6)+Math.floor((682*u-110)/2816)+365*(u-1)+1029983*Math.floor(r/2820)+this.jdEpoch-1},fromJD:function(e){var n=(e=Math.floor(e)+.5)-this.toJD(475,1,1),t=Math.floor(n/1029983),a=v(n,1029983),r=2820;if(1029982!==a){var u=Math.floor(a/366),s=v(a,366);r=Math.floor((2134*u+2816*s+2815)/1028522)+u+1}var i=r+2820*t+474,l=e-this.toJD(i=i<=0?i-1:i,1,1)+1,c=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),f=e-this.toJD(i,c,1)+1;return this.newDate(i,c,f)}}),p.calendars.persian=b,p.calendars.jalali=b},{"../main":346,"object-assign":247}],343:[function(y,$,ee){var p=y("../main"),m=y("object-assign"),b=p.instance();function v(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}m(v.prototype=new p.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return e=this._t2gYear(n.year()),b.leapYear(e)},weekOfYear:function(e,n,t){var a=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return e=this._t2gYear(a.year()),b.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,n){var t=this._validate(e,n,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,n,t){return(this.dayOfWeek(e,n,t)||7)<6},toJD:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate);return e=this._t2gYear(a.year()),b.toJD(e,a.month(),a.day())},fromJD:function(e){var n=b.fromJD(e),t=this._g2tYear(n.year());return this.newDate(t,n.month(),n.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),p.calendars.taiwan=v},{"../main":346,"object-assign":247}],344:[function(y,$,ee){var p=y("../main"),m=y("object-assign"),b=p.instance();function v(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}m(v.prototype=new p.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return e=this._t2gYear(n.year()),b.leapYear(e)},weekOfYear:function(e,n,t){var a=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return e=this._t2gYear(a.year()),b.weekOfYear(e,a.month(),a.day())},daysInMonth:function(e,n){var t=this._validate(e,n,this.minDay,p.local.invalidMonth);return this.daysPerMonth[t.month()-1]+(2===t.month()&&this.leapYear(t.year())?1:0)},weekDay:function(e,n,t){return(this.dayOfWeek(e,n,t)||7)<6},toJD:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate);return e=this._t2gYear(a.year()),b.toJD(e,a.month(),a.day())},fromJD:function(e){var n=b.fromJD(e),t=this._g2tYear(n.year());return this.newDate(t,n.month(),n.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),p.calendars.thai=v},{"../main":346,"object-assign":247}],345:[function(y,$,ee){var p=y("../main");function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}y("object-assign")(b.prototype=new p.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var n=this._validate(e,this.minMonth,this.minDay,p.local.invalidYear);return 355===this.daysInYear(n.year())},weekOfYear:function(e,n,t){var a=this.newDate(e,n,t);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var n=0,t=1;t<=12;t++)n+=this.daysInMonth(e,t);return n},daysInMonth:function(e,n){for(var t=this._validate(e,n,this.minDay,p.local.invalidMonth).toJD()-24e5+.5,a=0,r=0;r<v.length;r++){if(v[r]>t)return v[a]-v[a-1];a++}return 30},weekDay:function(e,n,t){return 5!==this.dayOfWeek(e,n,t)},toJD:function(e,n,t){var a=this._validate(e,n,t,p.local.invalidDate),r=12*(a.year()-1)+a.month()-15292;return a.day()+v[r-1]-1+24e5-.5},fromJD:function(e){for(var n=e-24e5+.5,t=0,a=0;a<v.length&&!(v[a]>n);a++)t++;var r=t+15292,u=Math.floor((r-1)/12);return this.newDate(u+1,r-12*u,n-v[t-1]+1)},isValid:function(e,n,t){var a=p.baseCalendar.prototype.isValid.apply(this,arguments);return a&&(a=(e=null!=e.year?e.year:e)>=1276&&e<=1500),a},_validate:function(e,n,t,a){var r=p.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw a.replace(/\{0\}/,this.local.name);return r}}),p.calendars.ummalqura=b;var v=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(y,$,ee){var p=y("object-assign");function m(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function b(a,r,u,s){if(this._calendar=a,this._year=r,this._month=u,this._day=s,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(t.local.invalidDate||t.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function v(a,r){return"000000".substring(0,r-(a=""+a).length)+a}function e(){this.shortYearCutoff="+10"}function n(a){this.local=this.regionalOptions[a]||this.regionalOptions[""]}p(m.prototype,{instance:function(a,r){a=(a||"gregorian").toLowerCase();var u=this._localCals[a+"-"+(r=r||"")];if(!u&&this.calendars[a]&&(u=new this.calendars[a](r),this._localCals[a+"-"+r]=u),!u)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,a);return u},newDate:function(a,r,u,s,i){return(s=(null!=a&&a.year?a.calendar():"string"==typeof s?this.instance(s,i):s)||this.instance()).newDate(a,r,u)},substituteDigits:function(a){return function(r){return(r+"").replace(/[0-9]/g,function(u){return a[u]})}},substituteChineseDigits:function(a,r){return function(u){for(var s="",i=0;u>0;){var l=u%10;s=(0===l?"":a[l]+r[i])+s,i++,u=Math.floor(u/10)}return 0===s.indexOf(a[1]+r[1])&&(s=s.substr(1)),s||a[0]}}}),p(b.prototype,{newDate:function(a,r,u){return this._calendar.newDate(null==a?this:a,r,u)},year:function(a){return 0===arguments.length?this._year:this.set(a,"y")},month:function(a){return 0===arguments.length?this._month:this.set(a,"m")},day:function(a){return 0===arguments.length?this._day:this.set(a,"d")},date:function(a,r,u){if(!this._calendar.isValid(a,r,u))throw(t.local.invalidDate||t.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=a,this._month=r,this._day=u,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(a,r){return this._calendar.add(this,a,r)},set:function(a,r){return this._calendar.set(this,a,r)},compareTo:function(a){if(this._calendar.name!==a._calendar.name)throw(t.local.differentCalendars||t.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,a._calendar.local.name);var r=this._year!==a._year?this._year-a._year:this._month!==a._month?this.monthOfYear()-a.monthOfYear():this._day-a._day;return 0===r?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(a){return this._calendar.fromJD(a)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(a){return this._calendar.fromJSDate(a)},toString:function(){return(this.year()<0?"-":"")+v(Math.abs(this.year()),4)+"-"+v(this.month(),2)+"-"+v(this.day(),2)}}),p(e.prototype,{_validateLevel:0,newDate:function(a,r,u){return null==a?this.today():(a.year&&(this._validate(a,r,u,t.local.invalidDate||t.regionalOptions[""].invalidDate),u=a.day(),r=a.month(),a=a.year()),new b(this,a,r,u))},today:function(){return this.fromJSDate(new Date)},epoch:function(a){return this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(a){var r=this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+v(Math.abs(r.year()),4)},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear),12},monthOfYear:function(a,r){var u=this._validate(a,r,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth);return(u.month()+this.monthsInYear(u)-this.firstMonth)%this.monthsInYear(u)+this.minMonth},fromMonthOfYear:function(a,r){var u=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(a)+this.minMonth;return this._validate(a,u,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth),u},daysInYear:function(a){var r=this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(a,r,u){var s=this._validate(a,r,u,t.local.invalidDate||t.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(a,r,u){var s=this._validate(a,r,u,t.local.invalidDate||t.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(a,r,u){return this._validate(a,r,u,t.local.invalidDate||t.regionalOptions[""].invalidDate),{}},add:function(a,r,u){return this._validate(a,this.minMonth,this.minDay,t.local.invalidDate||t.regionalOptions[""].invalidDate),this._correctAdd(a,this._add(a,r,u),r,u)},_add:function(a,r,u){if(this._validateLevel++,"d"===u||"w"===u){var s=a.toJD()+r*("w"===u?this.daysInWeek():1),i=a.calendar().fromJD(s);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var l=a.year()+("y"===u?r:0),c=a.monthOfYear()+("m"===u?r:0);i=a.day(),"y"===u?(a.month()!==this.fromMonthOfYear(l,c)&&(c=this.newDate(l,a.month(),this.minDay).monthOfYear()),c=Math.min(c,this.monthsInYear(l)),i=Math.min(i,this.daysInMonth(l,this.fromMonthOfYear(l,c)))):"m"===u&&(function(g){for(;c<g.minMonth;)l--,c+=g.monthsInYear(l);for(var h=g.monthsInYear(l);c>h-1+g.minMonth;)l++,c-=h,h=g.monthsInYear(l)}(this),i=Math.min(i,this.daysInMonth(l,this.fromMonthOfYear(l,c))));var f=[l,this.fromMonthOfYear(l,c),i];return this._validateLevel--,f}catch(g){throw this._validateLevel--,g}},_correctAdd:function(a,r,u,s){if(!(this.hasYearZero||"y"!==s&&"m"!==s||0!==r[0]&&a.year()>0==r[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s];r=this._add(a,u*i[0]+(u<0?-1:1)*i[1],i[2])}return a.date(r[0],r[1],r[2])},set:function(a,r,u){this._validate(a,this.minMonth,this.minDay,t.local.invalidDate||t.regionalOptions[""].invalidDate);var s="y"===u?r:a.year(),i="m"===u?r:a.month(),l="d"===u?r:a.day();return"y"!==u&&"m"!==u||(l=Math.min(l,this.daysInMonth(s,i))),a.date(s,i,l)},isValid:function(a,r,u){this._validateLevel++;var s=this.hasYearZero||0!==a;if(s){var i=this.newDate(a,r,this.minDay);s=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(i)&&u>=this.minDay&&u-this.minDay<this.daysInMonth(i)}return this._validateLevel--,s},toJSDate:function(a,r,u){var s=this._validate(a,r,u,t.local.invalidDate||t.regionalOptions[""].invalidDate);return t.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(a){return this.fromJD(t.instance().fromJSDate(a).toJD())},_validate:function(a,r,u,s){if(a.year){if(0===this._validateLevel&&this.name!==a.calendar().name)throw(t.local.differentCalendars||t.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,a.calendar().local.name);return a}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(a,r,u))throw s.replace(/\{0\}/,this.local.name);var i=this.newDate(a,r,u);return this._validateLevel--,i}catch(l){throw this._validateLevel--,l}}}),p(n.prototype=new e,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var r=this._validate(a,this.minMonth,this.minDay,t.local.invalidYear||t.regionalOptions[""].invalidYear);return(a=r.year()+(r.year()<0?1:0))%4==0&&(a%100!=0||a%400==0)},weekOfYear:function(a,r,u){var s=this.newDate(a,r,u);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(a,r){var u=this._validate(a,r,this.minDay,t.local.invalidMonth||t.regionalOptions[""].invalidMonth);return this.daysPerMonth[u.month()-1]+(2===u.month()&&this.leapYear(u.year())?1:0)},weekDay:function(a,r,u){return(this.dayOfWeek(a,r,u)||7)<6},toJD:function(a,r,u){var s=this._validate(a,r,u,t.local.invalidDate||t.regionalOptions[""].invalidDate);a=s.year(),r=s.month(),u=s.day(),a<0&&a++,r<3&&(r+=12,a--);var i=Math.floor(a/100),l=2-i+Math.floor(i/4);return Math.floor(365.25*(a+4716))+Math.floor(30.6001*(r+1))+u+l-1524.5},fromJD:function(a){var r=Math.floor(a+.5),u=Math.floor((r-1867216.25)/36524.25),s=1524+(u=r+1+u-Math.floor(u/4)),i=Math.floor((s-122.1)/365.25),l=Math.floor(365.25*i),c=Math.floor((s-l)/30.6001),f=s-l-Math.floor(30.6001*c),g=c-(c>13.5?13:1),h=i-(g>2.5?4716:4715);return h<=0&&h--,this.newDate(h,g,f)},toJSDate:function(a,r,u){var s=this._validate(a,r,u,t.local.invalidDate||t.regionalOptions[""].invalidDate),i=new Date(s.year(),s.month()-1,s.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(a){return this.newDate(a.getFullYear(),a.getMonth()+1,a.getDate())}});var t=$.exports=new m;t.cdate=b,t.baseCalendar=e,t.calendars.gregorian=n},{"object-assign":247}],347:[function(y,$,ee){var p=y("object-assign"),m=y("./main");p(m.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),m.local=m.regionalOptions[""],p(m.cdate.prototype,{formatDate:function(b,v){return"string"!=typeof b&&(v=b,b=""),this._calendar.formatDate(b||"",this,v)}}),p(m.baseCalendar.prototype,{UNIX_EPOCH:m.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:m.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(b,v,e){if("string"!=typeof b&&(e=v,v=b,b=""),!v)return"";if(v.calendar()!==this)throw m.local.invalidFormat||m.regionalOptions[""].invalidFormat;b=b||this.local.dateFormat;for(var t,a,r,u=(e=e||{}).dayNamesShort||this.local.dayNamesShort,s=e.dayNames||this.local.dayNames,i=e.monthNumbers||this.local.monthNumbers,l=e.monthNamesShort||this.local.monthNamesShort,c=e.monthNames||this.local.monthNames,f=function(L,M){for(var O=1;k+O<b.length&&b.charAt(k+O)===L;)O++;return k+=O-1,Math.floor(O/(M||1))>1},g=function(L,M,O,P){var S=""+M;if(f(L,P))for(;S.length<O;)S="0"+S;return S},h=this,x=function(L,M){return M?"function"==typeof c?c.call(h,L):c[L.month()-h.minMonth]:"function"==typeof l?l.call(h,L):l[L.month()-h.minMonth]},d=this.local.digits,w=function(L){return e.localNumbers&&d?d(L):L},_="",T=!1,k=0;k<b.length;k++)if(T)"'"!==b.charAt(k)||f("'")?_+=b.charAt(k):T=!1;else switch(b.charAt(k)){case"d":_+=w(g("d",v.day(),2));break;case"D":_+=(t=v.dayOfWeek(),a=u,r=s,f("D")?r[t]:a[t]);break;case"o":_+=g("o",v.dayOfYear(),3);break;case"w":_+=g("w",v.weekOfYear(),2);break;case"m":_+=(L=v,"function"==typeof i?i.call(h,L,f("m")):w(g("m",L.month(),2)));break;case"M":_+=x(v,f("M"));break;case"y":_+=f("y",2)?v.year():(v.year()%100<10?"0":"")+v.year()%100;break;case"Y":f("Y",2),_+=v.formatYear();break;case"J":_+=v.toJD();break;case"@":_+=(v.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":_+=(v.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":f("'")?_+="'":T=!0;break;default:_+=b.charAt(k)}var L;return _},parseDate:function(b,v,e){if(null==v)throw m.local.invalidArguments||m.regionalOptions[""].invalidArguments;if(""===(v="object"==typeof v?v.toString():v+""))return null;b=b||this.local.dateFormat;var n=(e=e||{}).shortYearCutoff||this.shortYearCutoff;n="string"!=typeof n?n:this.today().year()%100+parseInt(n,10);for(var t=e.dayNamesShort||this.local.dayNamesShort,a=e.dayNames||this.local.dayNames,r=e.parseMonth||this.local.parseMonth,u=e.monthNumbers||this.local.monthNumbers,s=e.monthNamesShort||this.local.monthNamesShort,i=e.monthNames||this.local.monthNames,l=-1,c=-1,f=-1,g=-1,h=-1,o=!1,x=!1,d=function(R,B){for(var H=1;P+H<b.length&&b.charAt(P+H)===R;)H++;return P+=H-1,Math.floor(H/(B||1))>1},w=function(R,B){var H=d(R,B),V=[2,3,H?4:2,H?4:2,10,11,20]["oyYJ@!".indexOf(R)+1],Z=new RegExp("^-?\\d{1,"+V+"}"),W=v.substring(O).match(Z);if(!W)throw(m.local.missingNumberAt||m.regionalOptions[""].missingNumberAt).replace(/\{0\}/,O);return O+=W[0].length,parseInt(W[0],10)},_=this,T=function(){if("function"==typeof u){d("m");var R=u.call(_,v.substring(O));return O+=R.length,R}return w("m")},k=function(R,B,H,V){for(var Z=d(R,V)?H:B,W=0;W<Z.length;W++)if(v.substr(O,Z[W].length).toLowerCase()===Z[W].toLowerCase())return O+=Z[W].length,W+_.minMonth;throw(m.local.unknownNameAt||m.regionalOptions[""].unknownNameAt).replace(/\{0\}/,O)},L=function(){if("function"==typeof i){var R=d("M")?i.call(_,v.substring(O)):s.call(_,v.substring(O));return O+=R.length,R}return k("M",s,i)},M=function(){if(v.charAt(O)!==b.charAt(P))throw(m.local.unexpectedLiteralAt||m.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,O);O++},O=0,P=0;P<b.length;P++)if(x)"'"!==b.charAt(P)||d("'")?M():x=!1;else switch(b.charAt(P)){case"d":g=w("d");break;case"D":k("D",t,a);break;case"o":h=w("o");break;case"w":w("w");break;case"m":f=T();break;case"M":f=L();break;case"y":var S=P;o=!d("y",2),P=S,c=w("y",2);break;case"Y":c=w("Y",2);break;case"J":l=w("J")+.5,"."===v.charAt(O)&&(O++,w("J"));break;case"@":l=w("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=w("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":O=v.length;break;case"'":d("'")?M():x=!0;break;default:M()}if(O<v.length)throw m.local.unexpectedText||m.regionalOptions[""].unexpectedText;if(-1===c?c=this.today().year():c<100&&o&&(c+=-1===n?1900:this.today().year()-this.today().year()%100-(c<=n?0:100)),"string"==typeof f&&(f=r.call(this,c,f)),h>-1){g=h;for(var E=this.daysInMonth(c,f=1);g>E;E=this.daysInMonth(c,f))f++,g-=E}return l>-1?this.fromJD(l):this.newDate(c,f,g)},determineDate:function(b,v,e,n,t){e&&"object"!=typeof e&&(t=n,n=e,e=null),"string"!=typeof n&&(t=n,n="");var a=this;return v=v?v.newDate():null,null==b?v:"string"==typeof b?function(r){try{return a.parseDate(n,r,t)}catch(l){}for(var u=((r=r.toLowerCase()).match(/^c/)&&e?e.newDate():null)||a.today(),s=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,i=s.exec(r);i;)u.add(parseInt(i[1],10),i[2]||"d"),i=s.exec(r);return u}(b):"number"==typeof b?isNaN(b)||b===1/0||b===-1/0?v:a.today().add(b,"d"):a.newDate(b)}})},{"./main":346,"object-assign":247}],348:[function(y,$,ee){"use strict";$.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(y,$,ee){"use strict";var p=y("./arrow_paths"),m=y("../../plots/font_attributes"),b=y("../../plots/cartesian/constants"),v=y("../../plot_api/plot_template").templatedArray;y("../../constants/axis_placeable_objects"),$.exports=v("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:m({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:p.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:p.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",b.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",b.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",b.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",b.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:m({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/cartesian/axes"),b=y("./draw").draw;function v(n){p.filterVisible(n._fullLayout.annotations).forEach(function(a){var r=m.getFromId(n,a.xref),u=m.getFromId(n,a.yref),s=m.getRefType(a.xref),i=m.getRefType(a.yref);a._extremes={},"range"===s&&e(a,r),"range"===i&&e(a,u)})}function e(n,t){var a,r=t._id,u=r.charAt(0),s=n[u],i=n["a"+u],f=n["_"+u+"padplus"],g=n["_"+u+"padminus"],h={x:1,y:-1}[u]*n[u+"shift"],o=3*n.arrowsize*n.arrowwidth||0,x=o+h,d=o-h,w=3*n.startarrowsize*n.arrowwidth||0,_=w+h,T=w-h;if(n["a"+u+"ref"]===n[u+"ref"]){var k=m.findExtremes(t,[t.r2c(s)],{ppadplus:x,ppadminus:d}),L=m.findExtremes(t,[t.r2c(i)],{ppadplus:Math.max(f,_),ppadminus:Math.max(g,T)});a={min:[k.min[0],L.min[0]],max:[k.max[0],L.max[0]]}}else _=i?_+i:_,T=i?T-i:T,a=m.findExtremes(t,[t.r2c(s)],{ppadplus:Math.max(f,x,_),ppadminus:Math.max(g,d,T)});n._extremes[r]=a}$.exports=function(n){if(p.filterVisible(n._fullLayout.annotations).length&&n._fullData.length)return p.syncOrAsync([b,v],n)}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../registry"),b=y("../../plot_api/plot_template").arrayEditor;function v(n,t){var a,r,u,s,i,l,c,f=n._fullLayout.annotations,g=[],h=[],o=[],x=(t||[]).length;for(a=0;a<f.length;a++)if(s=(u=f[a]).clicktoshow){for(r=0;r<x;r++)if(l=(i=t[r]).xaxis,c=i.yaxis,l._id===u.xref&&c._id===u.yref&&l.d2r(i.x)===e(u._xclick,l)&&c.d2r(i.y)===e(u._yclick,c)){(u.visible?"onout"===s?h:o:g).push(a);break}r===x&&u.visible&&"onout"===s&&h.push(a)}return{on:g,off:h,explicitOff:o}}function e(n,t){return"log"===t.type?t.l2r(n):t.d2r(n)}$.exports={hasClickToShow:function(n,t){var a=v(n,t);return a.on.length>0||a.explicitOff.length>0},onClick:function(n,t){var a,r,u=v(n,t),s=u.on,i=u.off.concat(u.explicitOff),l={},c=n._fullLayout.annotations;if(s.length||i.length){for(a=0;a<s.length;a++)(r=b(n.layout,"annotations",c[s[a]])).modifyItem("visible",!0),p.extendFlat(l,r.getUpdateObj());for(a=0;a<i.length;a++)(r=b(n.layout,"annotations",c[i[a]])).modifyItem("visible",!1),p.extendFlat(l,r.getUpdateObj());return m.call("update",n,{},l)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../color");$.exports=function(b,v,e,n){n("opacity");var t=n("bgcolor"),a=n("bordercolor"),r=m.opacity(a);n("borderpad");var u=n("borderwidth"),s=n("showarrow");if(n("text",s?" ":e._dfltTitle.annotation),n("textangle"),p.coerceFont(n,"font",e.font),n("width"),n("align"),n("height")&&n("valign"),s){var i,l,c=n("arrowside");-1!==c.indexOf("end")&&(i=n("arrowhead"),l=n("arrowsize")),-1!==c.indexOf("start")&&(n("startarrowhead",i),n("startarrowsize",l)),n("arrowcolor",r?v.bordercolor:m.defaultLine),n("arrowwidth",2*(r&&u||1)),n("standoff"),n("startstandoff")}var f=n("hovertext"),g=e.hoverlabel||{};if(f){var h=n("hoverlabel.bgcolor",g.bgcolor||(m.opacity(t)?m.rgb(t):m.defaultLine)),o=n("hoverlabel.bordercolor",g.bordercolor||m.contrast(h));p.coerceFont(n,"hoverlabel.font",{family:g.font.family,size:g.font.size,color:g.font.color||o})}n("captureevents",!!f)}},{"../../lib":503,"../color":366}],353:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib/to_log_range");$.exports=function(b,v,e,n){v=v||{};var t="log"===e&&"linear"===v.type;if(t||"linear"===e&&"log"===v.type)for(var r,u,s=b._fullLayout.annotations,i=v._id.charAt(0),l=0;l<s.length;l++)u="annotations["+l+"].",(r=s[l])[i+"ref"]===v._id&&c(i),r["a"+i+"ref"]===v._id&&c("a"+i);function c(f){var g=r[f],h=null;h=t?m(g,v.range):Math.pow(10,g),p(h)||(h=null),n(u+f,h)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/cartesian/axes"),b=y("../../plots/array_container_defaults"),v=y("./common_defaults"),e=y("./attributes");function n(t,a,r){function u(L,M){return p.coerce(t,a,e,L,M)}var s=u("visible"),i=u("clicktoshow");if(s||i){v(t,a,r,u);for(var l=a.showarrow,c=["x","y"],f=[-10,-30],g={_fullLayout:r},h=0;h<2;h++){var o=c[h],x=m.coerceRef(t,a,g,o,"","paper");if("paper"!==x&&m.getFromId(g,x)._annIndices.push(a._index),m.coercePosition(a,g,u,x,o,.5),l){var d="a"+o,w=m.coerceRef(t,a,g,d,"pixel",["pixel","paper"]);"pixel"!==w&&w!==x&&(w=a[d]="pixel"),m.coercePosition(a,g,u,w,d,"pixel"===w?f[h]:.4)}u(o+"anchor"),u(o+"shift")}if(p.noneOrAll(t,a,["x","y"]),l&&p.noneOrAll(t,a,["ax","ay"]),i){var T=u("xclick"),k=u("yclick");a._xclick=void 0===T?a.x:m.cleanPosition(T,g,a.xref),a._yclick=void 0===k?a.y:m.cleanPosition(k,g,a.yref)}}}$.exports=function(t,a){b(t,a,{name:"annotations",handleItemDefaults:n})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../registry"),b=y("../../plots/plots"),v=y("../../lib"),e=v.strTranslate,n=y("../../plots/cartesian/axes"),t=y("../color"),a=y("../drawing"),r=y("../fx"),u=y("../../lib/svg_text_utils"),s=y("../../lib/setcursor"),i=y("../dragelement"),l=y("../../plot_api/plot_template").arrayEditor,c=y("./draw_arrow_head");function f(o,x){var d=o._fullLayout.annotations[x]||{},w=n.getFromId(o,d.xref),_=n.getFromId(o,d.yref);w&&w.setScale(),_&&_.setScale(),h(o,d,x,!1,w,_)}function g(o,x,d,w,_){var T=_[d],k=_[d+"ref"],L=-1!==d.indexOf("y"),M="domain"===n.getRefType(k),O=L?w.h:w.w;return o?M?T+(L?-x:x)/o._length:o.p2r(o.r2p(T)+x):T+(L?-x:x)/O}function h(o,x,d,w,_,T){var k,L,M=o._fullLayout,O=o._fullLayout._size,P=o._context.edits;w?(k="annotation-"+w,L=w+".annotations"):(k="annotation",L="annotations");var S=l(o.layout,L,x),E=S.modifyBase,R=S.modifyItem,B=S.getUpdateObj;M._infolayer.selectAll("."+k+'[data-index="'+d+'"]').remove();var H="clip"+M._uid+"_ann"+d;if(x._input&&!1!==x.visible){var V={x:{},y:{}},Z=+x.textangle||0,W=M._infolayer.append("g").classed(k,!0).attr("data-index",String(d)).style("opacity",x.opacity),G=W.append("g").classed("annotation-text-g",!0),X=P[x.showarrow?"annotationTail":"annotationPosition"],te=x.captureevents||P.annotationText||X,D=G.append("g").style("pointer-events",te?"all":null).call(s,"pointer").on("click",function(){o._dragging=!1,o.emit("plotly_clickannotation",oe(p.event))});x.hovertext&&D.on("mouseover",function(){var ge=x.hoverlabel,xe=ge.font,we=this.getBoundingClientRect(),be=o.getBoundingClientRect();r.loneHover({x0:we.left-be.left,x1:we.right-be.left,y:(we.top+we.bottom)/2-be.top,text:x.hovertext,color:ge.bgcolor,borderColor:ge.bordercolor,fontFamily:xe.family,fontSize:xe.size,fontColor:xe.color},{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:o})}).on("mouseout",function(){r.loneUnhover(M._hoverlayer.node())});var N=x.borderwidth,Q=N+x.borderpad,j=D.append("rect").attr("class","bg").style("stroke-width",N+"px").call(t.stroke,x.bordercolor).call(t.fill,x.bgcolor),J=x.width||x.height,K=M._topclips.selectAll("#"+H).data(J?[0]:[]);K.enter().append("clipPath").classed("annclip",!0).attr("id",H).append("rect"),K.exit().remove();var re=x.font,ne=M._meta?v.templateString(x.text,M._meta):x.text,se=D.append("text").classed("annotation-text",!0).text(ne);P.annotationText?se.call(u.makeEditable,{delegate:D,gd:o}).call(pe).on("edit",function(ge){x.text=ge,this.call(pe),R("text",ge),_&&_.autorange&&E(_._name+".autorange",!0),T&&T.autorange&&E(T._name+".autorange",!0),m.call("_guiRelayout",o,B())}):se.call(pe)}else p.selectAll("#"+H).remove();function oe(ge){var xe={index:d,annotation:x._input,fullAnnotation:x,event:ge};return w&&(xe.subplotId=w),xe}function pe(ge){return ge.call(a.font,re).attr({"text-anchor":{left:"start",right:"end"}[x.align]||"middle"}),u.convertToTspans(ge,o,ce),ge}function ce(){var ge=se.selectAll("a");1===ge.size()&&ge.text()===se.text()&&D.insert("a",":first-child").attr({"xlink:xlink:href":ge.attr("xlink:href"),"xlink:xlink:show":ge.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(j.node());var xe=D.select(".annotation-text-math-group"),we=!xe.empty(),be=a.bBox((we?xe:se).node()),Se=be.width,fe=be.height,me=x.width||Se,Te=x.height||fe,_e=Math.round(me+2*Q),Me=Math.round(Te+2*Q);function Ie(Qe,mt){return"auto"===mt&&(mt=Qe<1/3?"left":Qe>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[mt]}for(var ze=!1,Ve=["x","y"],Je=0;Je<Ve.length;Je++){var De,Be,Ze,Ye,tt,st=Ve[Je],vt=x[st+"ref"]||st,Pt=x["a"+st+"ref"],Mt={x:_,y:T}[st],rt=(Z+("x"===st?0:-90))*Math.PI/180,et=_e*Math.cos(rt),bt=Me*Math.sin(rt),Rt=Math.abs(et)+Math.abs(bt),Yt=x[st+"anchor"],Fe=x[st+"shift"]*("x"===st?1:-1),He=V[st],Oe=n.getRefType(vt);if(Mt&&"domain"!==Oe){var $e=Mt.r2fraction(x[st]);($e<0||$e>1)&&(Pt===vt?(($e=Mt.r2fraction(x["a"+st]))<0||$e>1)&&(ze=!0):ze=!0),De=Mt._offset+Mt.r2p(x[st]),Ye=.5}else{var ke="domain"===Oe;"x"===st?(Ze=x[st],De=ke?Mt._offset+Mt._length*Ze:De=O.l+O.w*Ze):(Ze=1-x[st],De=ke?Mt._offset+Mt._length*Ze:De=O.t+O.h*Ze),Ye=x.showarrow?.5:Ze}if(x.showarrow){He.head=De;var Le=x["a"+st];if(tt=et*Ie(.5,x.xanchor)-bt*Ie(.5,x.yanchor),Pt===vt){var Pe=n.getRefType(Pt);"domain"===Pe?("y"===st&&(Le=1-Le),He.tail=Mt._offset+Mt._length*Le):He.tail="paper"===Pe?"y"===st?O.t+O.h*(Le=1-Le):O.l+O.w*Le:Mt._offset+Mt.r2p(Le),Be=tt}else He.tail=De+Le,Be=tt+Le;He.text=He.tail+tt;var Ce=M["x"===st?"width":"height"];if("paper"===vt&&(He.head=v.constrain(He.head,1,Ce-1)),"pixel"===Pt){var Xe=-Math.max(He.tail-3,He.text),at=Math.min(He.tail+3,He.text)-Ce;Xe>0?(He.tail+=Xe,He.text+=Xe):at>0&&(He.tail-=at,He.text-=at)}He.tail+=Fe,He.head+=Fe}else Be=tt=Rt*Ie(Ye,Yt),He.text=De+tt;He.text+=Fe,tt+=Fe,x["_"+st+"padplus"]=Rt/2+(Be+=Fe),x["_"+st+"padminus"]=Rt/2-Be,x["_"+st+"size"]=Rt,x["_"+st+"shift"]=tt}if(ze)D.remove();else{var pt=0,ut=0;"left"!==x.align&&(pt=(me-Se)*("center"===x.align?.5:1)),"top"!==x.valign&&(ut=(Te-fe)*("middle"===x.valign?.5:1)),we?xe.select("svg").attr({x:Q+pt-1,y:Q+ut}).call(a.setClipUrl,J?H:null,o):se.call(u.positionText,Q+pt-be.left,Q+ut-be.top).call(a.setClipUrl,J?H:null,o),K.select("rect").call(a.setRect,Q,Q,me,Te),j.call(a.setRect,N/2,N/2,_e-N,Me-N),D.call(a.setTranslate,Math.round(V.x.text-_e/2),Math.round(V.y.text-Me/2)),G.attr({transform:"rotate("+Z+","+V.x.text+","+V.y.text+")"});var Et,Lt=function(Qe,mt){W.selectAll(".annotation-arrow-g").remove();var It=V.x.head,jt=V.y.head,Zt=V.x.tail+Qe,Re=V.y.tail+mt,lt=V.x.text+Qe,_t=V.y.text+mt,Dt=v.rotationXYMatrix(Z,lt,_t),Vt=v.apply2DTransform(Dt),nr=v.apply2DTransform2(Dt),Gt=+j.attr("width"),Kt=+j.attr("height"),ir=lt-.5*Gt,dr=ir+Gt,hr=_t-.5*Kt,cr=hr+Kt,sr=[[ir,hr,ir,cr],[ir,cr,dr,cr],[dr,cr,dr,hr],[dr,hr,ir,hr]].map(nr);if(!sr.reduce(function(Lr,Qr){return Lr^!!v.segmentsIntersect(It,jt,It+1e6,jt+1e6,Qr[0],Qr[1],Qr[2],Qr[3])},!1)){sr.forEach(function(Lr){var Qr=v.segmentsIntersect(Zt,Re,It,jt,Lr[0],Lr[1],Lr[2],Lr[3]);Qr&&(Zt=Qr.x,Re=Qr.y)});var mr=x.arrowwidth,Ir=x.arrowcolor,vr=x.arrowside,Br=W.append("g").style({opacity:t.opacity(Ir)}).classed("annotation-arrow-g",!0),Jr=Br.append("path").attr("d","M"+Zt+","+Re+"L"+It+","+jt).style("stroke-width",mr+"px").call(t.stroke,t.rgb(Ir));if(c(Jr,vr,x),P.annotationPosition&&Jr.node().parentNode&&!w){var ln=It,En=jt;if(x.standoff){var Cn=Math.sqrt(Math.pow(It-Zt,2)+Math.pow(jt-Re,2));ln+=x.standoff*(Zt-It)/Cn,En+=x.standoff*(Re-jt)/Cn}var An,$r,Rr=Br.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Zt-ln)+","+(Re-En),transform:e(ln,En)}).style("stroke-width",mr+6+"px").call(t.stroke,"rgba(0,0,0,0)").call(t.fill,"rgba(0,0,0,0)");i.init({element:Rr.node(),gd:o,prepFn:function(){var Lr=a.getTranslate(D);An=Lr.x,$r=Lr.y,_&&_.autorange&&E(_._name+".autorange",!0),T&&T.autorange&&E(T._name+".autorange",!0)},moveFn:function(Lr,Qr){var On=Vt(An,$r),zr=On[0]+Lr,sn=On[1]+Qr;D.call(a.setTranslate,zr,sn),R("x",g(_,Lr,"x",O,x)),R("y",g(T,Qr,"y",O,x)),x.axref===x.xref&&R("ax",g(_,Lr,"ax",O,x)),x.ayref===x.yref&&R("ay",g(T,Qr,"ay",O,x)),Br.attr("transform",e(Lr,Qr)),G.attr({transform:"rotate("+Z+","+zr+","+sn+")"})},doneFn:function(){m.call("_guiRelayout",o,B());var Lr=document.querySelector(".js-notes-box-panel");Lr&&Lr.redraw(Lr.selectedObj)}})}}};x.showarrow&&Lt(0,0),X&&i.init({element:D.node(),gd:o,prepFn:function(){Et=G.attr("transform")},moveFn:function(Qe,mt){var It="pointer";if(x.showarrow)R("ax",x.axref===x.xref?g(_,Qe,"ax",O,x):x.ax+Qe),R("ay",x.ayref===x.yref?g(T,mt,"ay",O.w,x):x.ay+mt),Lt(Qe,mt);else{if(w)return;var jt,Zt;if(_)jt=g(_,Qe,"x",O,x);else{var Re=x._xsize/O.w;jt=i.align(x.x+(x._xshift-x.xshift)/O.w-Re/2+Qe/O.w,Re,0,1,x.xanchor)}if(T)Zt=g(T,mt,"y",O,x);else{var _t=x._ysize/O.h;Zt=i.align(x.y-(x._yshift+x.yshift)/O.h-_t/2-mt/O.h,_t,0,1,x.yanchor)}R("x",jt),R("y",Zt),_&&T||(It=i.getCursor(_?.5:jt,T?.5:Zt,x.xanchor,x.yanchor))}G.attr({transform:e(Qe,mt)+Et}),s(D,It)},clickFn:function(Qe,mt){x.captureevents&&o.emit("plotly_clickannotation",oe(mt))},doneFn:function(){s(D),m.call("_guiRelayout",o,B());var Qe=document.querySelector(".js-notes-box-panel");Qe&&Qe.redraw(Qe.selectedObj)}})}}}$.exports={draw:function(o){var x=o._fullLayout;x._infolayer.selectAll(".annotation").remove();for(var d=0;d<x.annotations.length;d++)x.annotations[d].visible&&f(o,d);return b.previousPromises(o)},drawOne:f,drawRaw:h}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../color"),b=y("./arrow_paths"),v=y("../../lib"),e=v.strScale,n=v.strRotate,t=v.strTranslate;$.exports=function(a,r,u){var s,i,l,c,f=a.node(),g=b[u.arrowhead||0],h=b[u.startarrowhead||0],o=(u.arrowwidth||1)*(u.arrowsize||1),x=(u.arrowwidth||1)*(u.startarrowsize||1),d=r.indexOf("start")>=0,w=r.indexOf("end")>=0,_=g.backoff*o+u.standoff,T=h.backoff*x+u.startstandoff;if("line"===f.nodeName){s={x:+a.attr("x1"),y:+a.attr("y1")},i={x:+a.attr("x2"),y:+a.attr("y2")};var k=s.x-i.x,L=s.y-i.y;if(c=(l=Math.atan2(L,k))+Math.PI,_&&T&&_+T>Math.sqrt(k*k+L*L))return void W();if(_){if(_*_>k*k+L*L)return void W();var M=_*Math.cos(l),O=_*Math.sin(l);i.x+=M,i.y+=O,a.attr({x2:i.x,y2:i.y})}if(T){if(T*T>k*k+L*L)return void W();var P=T*Math.cos(l),S=T*Math.sin(l);s.x-=P,s.y-=S,a.attr({x1:s.x,y1:s.y})}}else if("path"===f.nodeName){var E=f.getTotalLength(),R="";if(E<_+T)return void W();var B=f.getPointAtLength(0),H=f.getPointAtLength(.1);l=Math.atan2(B.y-H.y,B.x-H.x),s=f.getPointAtLength(Math.min(T,E)),R="0px,"+T+"px,";var V=f.getPointAtLength(E),Z=f.getPointAtLength(E-.1);c=Math.atan2(V.y-Z.y,V.x-Z.x),i=f.getPointAtLength(Math.max(0,E-_)),a.style("stroke-dasharray",R+=E-(R?T+_:_)+"px,"+E+"px")}function W(){a.style("stroke-dasharray","0px,100px")}function G(X,te,D,N){X.path&&(X.noRotate&&(D=0),p.select(f.parentNode).append("path").attr({class:a.attr("class"),d:X.path,transform:t(te.x,te.y)+n(180*D/Math.PI)+e(N)}).style({fill:m.rgb(u.arrowcolor),"stroke-width":0}))}d&&G(h,s,l,x),w&&G(g,i,c,o)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(y,$,ee){"use strict";var p=y("./draw"),m=y("./click");$.exports={moduleType:"component",name:"annotations",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),includeBasePlot:y("../../plots/cartesian/include_components")("annotations"),calcAutorange:y("./calc_autorange"),draw:p.draw,drawOne:p.drawOne,drawRaw:p.drawRaw,hasClickToShow:m.hasClickToShow,onClick:m.onClick,convertCoords:y("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(y,$,ee){"use strict";var p=y("../annotations/attributes"),m=y("../../plot_api/edit_types").overrideAll,b=y("../../plot_api/plot_template").templatedArray;$.exports=m(b("annotation",{visible:p.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:p.xanchor,xshift:p.xshift,yanchor:p.yanchor,yshift:p.yshift,text:p.text,textangle:p.textangle,font:p.font,width:p.width,height:p.height,opacity:p.opacity,align:p.align,valign:p.valign,bgcolor:p.bgcolor,bordercolor:p.bordercolor,borderpad:p.borderpad,borderwidth:p.borderwidth,showarrow:p.showarrow,arrowcolor:p.arrowcolor,arrowhead:p.arrowhead,startarrowhead:p.startarrowhead,arrowside:p.arrowside,arrowsize:p.arrowsize,startarrowsize:p.startarrowsize,arrowwidth:p.arrowwidth,standoff:p.standoff,startstandoff:p.startstandoff,hovertext:p.hovertext,hoverlabel:p.hoverlabel,captureevents:p.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/cartesian/axes");function b(v,e){var n=e.fullSceneLayout.domain,t=e.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};v._xa={},p.extendFlat(v._xa,a),m.setConvert(v._xa),v._xa._offset=t.l+n.x[0]*t.w,v._xa.l2p=function(){return.5*(1+v._pdata[0]/v._pdata[3])*t.w*(n.x[1]-n.x[0])},v._ya={},p.extendFlat(v._ya,a),m.setConvert(v._ya),v._ya._offset=t.t+(1-n.y[1])*t.h,v._ya.l2p=function(){return.5*(1-v._pdata[1]/v._pdata[3])*t.h*(n.y[1]-n.y[0])}}$.exports=function(v){for(var e=v.fullSceneLayout.annotations,n=0;n<e.length;n++)b(e[n],v);v.fullLayout._infolayer.selectAll(".annotation-"+v.id).remove()}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/cartesian/axes"),b=y("../../plots/array_container_defaults"),v=y("../annotations/common_defaults"),e=y("./attributes");function n(t,a,r,u){function s(l,c){return p.coerce(t,a,e,l,c)}function i(l){var c=l+"axis",f={_fullLayout:{}};return f._fullLayout[c]=r[c],m.coercePosition(a,f,s,l,l,.5)}s("visible")&&(v(t,a,u.fullLayout,s),i("x"),i("y"),i("z"),p.noneOrAll(t,a,["x","y","z"]),a.xref="x",a.yref="y",a.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),a.showarrow&&(a.axref="pixel",a.ayref="pixel",s("ax",-10),s("ay",-30),p.noneOrAll(t,a,["ax","ay"])))}$.exports=function(t,a,r){b(t,a,{name:"annotations",handleItemDefaults:n,fullLayout:r.fullLayout})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(y,$,ee){"use strict";var p=y("../annotations/draw").drawRaw,m=y("../../plots/gl3d/project"),b=["x","y","z"];$.exports=function(v){for(var e=v.fullSceneLayout,n=v.dataScale,t=e.annotations,a=0;a<t.length;a++){for(var r=t[a],u=!1,s=0;s<3;s++){var i=b[s],c=e[i+"axis"].r2fraction(r[i]);if(c<0||c>1){u=!0;break}}u?v.fullLayout._infolayer.select(".annotation-"+v.id+'[data-index="'+a+'"]').remove():(r._pdata=m(v.glplot.cameraParams,[e.xaxis.r2l(r.x)*n[0],e.yaxis.r2l(r.y)*n[1],e.zaxis.r2l(r.z)*n[2]]),p(v.graphDiv,r,a,v.id,r._xa,r._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../lib");$.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:y("./attributes")}}},layoutAttributes:y("./attributes"),handleDefaults:y("./defaults"),includeBasePlot:function(b,v){var e=p.subplotsRegistry.gl3d;if(e)for(var n=e.attrRegex,t=Object.keys(b),a=0;a<t.length;a++){var r=t[a];n.test(r)&&(b[r].annotations||[]).length&&(m.pushUnique(v._basePlotModules,e),m.pushUnique(v._subplots.gl3d,r))}},convert:y("./convert"),draw:y("./draw")}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(y,$,ee){"use strict";$.exports=y("world-calendars/dist/main"),y("world-calendars/dist/plus"),y("world-calendars/dist/calendars/chinese"),y("world-calendars/dist/calendars/coptic"),y("world-calendars/dist/calendars/discworld"),y("world-calendars/dist/calendars/ethiopian"),y("world-calendars/dist/calendars/hebrew"),y("world-calendars/dist/calendars/islamic"),y("world-calendars/dist/calendars/julian"),y("world-calendars/dist/calendars/mayan"),y("world-calendars/dist/calendars/nanakshahi"),y("world-calendars/dist/calendars/nepali"),y("world-calendars/dist/calendars/persian"),y("world-calendars/dist/calendars/taiwan"),y("world-calendars/dist/calendars/thai"),y("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(y,$,ee){"use strict";var p=y("./calendars"),m=y("../../lib"),b=y("../../constants/numerical"),v=b.EPOCHJD,e=b.ONEDAY,n={valType:"enumerated",values:m.sortObjectKeys(p.calendars),editType:"calc",dflt:"gregorian"},t=function(h,o,x,d){var w={};return w[x]=n,m.coerce(h,o,w,x,d)},a={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function u(h){return r[h]||(r[h]=p.instance(h))}function s(h){return m.extendFlat({},n,{description:h})}function i(h){return"Sets the calendar system to use with `"+h+"` date data."}var l={xcalendar:s(i("x"))},c=m.extendFlat({},l,{ycalendar:s(i("y"))}),f=m.extendFlat({},c,{zcalendar:s(i("z"))}),g=s(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));$.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:c,bar:c,box:c,heatmap:c,contour:c,histogram:c,histogram2d:c,histogram2dcontour:c,scatter3d:f,surface:f,mesh3d:f,scattergl:c,ohlc:l,candlestick:l},layout:{calendar:s(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:g},yaxis:{calendar:g},scene:{xaxis:{calendar:g},yaxis:{calendar:g},zaxis:{calendar:g}},polar:{radialaxis:{calendar:g}}},transforms:{filter:{valuecalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:n,handleDefaults:t,handleTraceDefaults:function(h,o,x,d){for(var w=0;w<x.length;w++)t(h,o,x[w]+"calendar",d.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:u,worldCalFmt:function(h,o,x){for(var d,w,_,T,k,L=Math.floor((o+.05)/e)+v,M=u(x).fromJD(L),O=0;-1!==(O=h.indexOf("%",O));)"0"===(d=h.charAt(O+1))||"-"===d||"_"===d?(_=3,w=h.charAt(O+2),"_"===d&&(d="-")):(w=d,d="0",_=2),(T=a[w])?(k="##"===T?"##":M.formatDate(T[d]),h=h.substr(0,O)+k+h.substr(O+_),O+=k.length):O+=_;return h}}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(y,$,ee){"use strict";ee.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ee.defaultLine="#444",ee.lightLine="#eee",ee.background="#fff",ee.borderLine="#BEC8D9",ee.lightFraction=1e3/11},{}],366:[function(y,$,ee){"use strict";var p=y("tinycolor2"),m=y("fast-isnumeric"),b=y("../../lib/array").isTypedArray,v=$.exports={},e=y("./attributes");v.defaults=e.defaults;var n=v.defaultLine=e.defaultLine;v.lightLine=e.lightLine;var t=v.background=e.background;function a(r){if(m(r)||"string"!=typeof r)return r;var u=r.trim();if("rgb"!==u.substr(0,3))return r;var s=u.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return r;var i=s[1].trim().split(/\s*[\s,]\s*/),l="a"===u.charAt(3)&&4===i.length;if(!l&&3!==i.length)return r;for(var c=0;c<i.length;c++){if(!(i[c].length&&(i[c]=Number(i[c]),i[c]>=0)))return r;if(3===c)i[c]>1&&(i[c]=1);else if(i[c]>=1)return r}var f=Math.round(255*i[0])+", "+Math.round(255*i[1])+", "+Math.round(255*i[2]);return l?"rgba("+f+", "+i[3]+")":"rgb("+f+")"}v.tinyRGB=function(r){var u=r.toRgb();return"rgb("+Math.round(u.r)+", "+Math.round(u.g)+", "+Math.round(u.b)+")"},v.rgb=function(r){return v.tinyRGB(p(r))},v.opacity=function(r){return r?p(r).getAlpha():0},v.addOpacity=function(r,u){var s=p(r).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+u+")"},v.combine=function(r,u){var s=p(r).toRgb();if(1===s.a)return p(r).toRgbString();var i=p(u||t).toRgb(),l=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a};return p({r:l.r*(1-s.a)+s.r*s.a,g:l.g*(1-s.a)+s.g*s.a,b:l.b*(1-s.a)+s.b*s.a}).toRgbString()},v.contrast=function(r,u,s){var i=p(r);return 1!==i.getAlpha()&&(i=p(v.combine(r,t))),(i.isDark()?u?i.lighten(u):t:s?i.darken(s):n).toString()},v.stroke=function(r,u){var s=p(u);r.style({stroke:v.tinyRGB(s),"stroke-opacity":s.getAlpha()})},v.fill=function(r,u){var s=p(u);r.style({fill:v.tinyRGB(s),"fill-opacity":s.getAlpha()})},v.clean=function(r){if(r&&"object"==typeof r){var u,s,i,l,c=Object.keys(r);for(u=0;u<c.length;u++)if(l=r[i=c[u]],"color"===i.substr(i.length-5))if(Array.isArray(l))for(s=0;s<l.length;s++)l[s]=a(l[s]);else r[i]=a(l);else if("colorscale"===i.substr(i.length-10)&&Array.isArray(l))for(s=0;s<l.length;s++)Array.isArray(l[s])&&(l[s][1]=a(l[s][1]));else if(Array.isArray(l)){var f=l[0];if(!Array.isArray(f)&&f&&"object"==typeof f)for(s=0;s<l.length;s++)v.clean(l[s])}else l&&"object"==typeof l&&!b(l)&&v.clean(l)}}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/layout_attributes"),m=y("../../plots/font_attributes"),b=y("../../lib/extend").extendFlat,v=y("../../plot_api/edit_types").overrideAll;$.exports=v({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:p.linecolor,outlinewidth:p.linewidth,bordercolor:p.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:p.tickmode,nticks:p.nticks,tick0:p.tick0,dtick:p.dtick,tickvals:p.tickvals,ticktext:p.ticktext,ticks:b({},p.ticks,{dflt:""}),ticklabeloverflow:b({},p.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside bottom","inside bottom"],dflt:"outside"},ticklen:p.ticklen,tickwidth:p.tickwidth,tickcolor:p.tickcolor,showticklabels:p.showticklabels,tickfont:m({}),tickangle:p.tickangle,tickformat:p.tickformat,tickformatstops:p.tickformatstops,tickprefix:p.tickprefix,showtickprefix:p.showtickprefix,ticksuffix:p.ticksuffix,showticksuffix:p.showticksuffix,separatethousands:p.separatethousands,exponentformat:p.exponentformat,minexponent:p.minexponent,showexponent:p.showexponent,title:{text:{valType:"string"},font:m({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:m({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(y,$,ee){"use strict";$.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plot_api/plot_template"),b=y("../../plots/cartesian/tick_value_defaults"),v=y("../../plots/cartesian/tick_mark_defaults"),e=y("../../plots/cartesian/tick_label_defaults"),n=y("../../plots/cartesian/prefix_suffix_defaults"),t=y("./attributes");$.exports=function(a,r,u){var s=m.newContainer(r,"colorbar"),i=a.colorbar||{};function l(w,_){return p.coerce(i,s,t,w,_)}var c=l("thicknessmode");l("thickness","fraction"===c?30/(u.width-u.margin.l-u.margin.r):30);var f=l("lenmode");l("len","fraction"===f?1:u.height-u.margin.t-u.margin.b),l("x"),l("xanchor"),l("xpad"),l("y"),l("yanchor"),l("ypad"),p.noneOrAll(i,s,["x","y"]),l("outlinecolor"),l("outlinewidth"),l("bordercolor"),l("borderwidth"),l("bgcolor");var g=l("ticklabelposition");l("ticklabeloverflow",-1!==g.indexOf("inside")?"hide past domain":"hide past div"),b(i,s,l,"linear");var h=u.font,o={outerTicks:!1,font:h};-1!==g.indexOf("inside")&&(o.bgColor="black"),n(i,s,l,"linear",o),e(i,s,l,"linear",o),v(i,s,l,"linear",o),l("title.text",u._dfltTitle.colorbar);var x=s.tickfont,d=p.extendFlat({},x,{color:h.color,size:p.bigFont(x.size)});p.coerceFont(l,"title.font",d),l("title.side")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("tinycolor2"),b=y("../../plots/plots"),v=y("../../registry"),e=y("../../plots/cartesian/axes"),n=y("../dragelement"),t=y("../../lib"),a=t.strTranslate,r=y("../../lib/extend").extendFlat,u=y("../../lib/setcursor"),s=y("../drawing"),i=y("../color"),l=y("../titles"),c=y("../../lib/svg_text_utils"),f=y("../colorscale/helpers").flipScale,g=y("../../plots/cartesian/axis_defaults"),h=y("../../plots/cartesian/position_defaults"),o=y("../../plots/cartesian/layout_attributes"),x=y("../../constants/alignment"),d=x.LINE_SPACING,w=x.FROM_TL,_=x.FROM_BR,T=y("./constants").cn;$.exports={draw:function(k){var L=k._fullLayout._infolayer.selectAll("g."+T.colorbar).data(function(M){var O,P,S,E,R=M._fullLayout,B=M.calcdata,H=[];function V(J){return r(J,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Z(){"function"==typeof E.calc?E.calc(M,S,O):(O._fillgradient=P.reversescale?f(P.colorscale):P.colorscale,O._zrange=[P[E.min],P[E.max]])}for(var W=0;W<B.length;W++){var X=(S=B[W][0].trace)._module.colorbar;if(!0===S.visible&&X)for(var te=Array.isArray(X),D=te?X:[X],N=0;N<D.length;N++){var U=(E=D[N]).container;(P=U?S[U]:S)&&P.showscale&&((O=V(P.colorbar))._id="cb"+S.uid+(te&&U?"-"+U:""),O._traceIndex=S.index,O._propPrefix=(U?U+".":"")+"colorbar.",O._meta=S._meta,Z(),H.push(O))}}for(var Q in R._colorAxes)if((P=R[Q]).showscale){var j=R._colorAxes[Q];(O=V(P.colorbar))._id="cb"+Q,O._propPrefix=Q+".colorbar.",O._meta=R._meta,E={min:"cmin",max:"cmax"},"heatmap"!==j[0]&&(E.calc=(S=j[1])._module.colorbar.calc),Z(),H.push(O)}return H}(k),function(M){return M._id});L.enter().append("g").attr("class",function(M){return M._id}).classed(T.colorbar,!0),L.each(function(M){var O=p.select(this);t.ensureSingle(O,"rect",T.cbbg),t.ensureSingle(O,"g",T.cbfills),t.ensureSingle(O,"g",T.cblines),t.ensureSingle(O,"g",T.cbaxis,function(S){S.classed(T.crisp,!0)}),t.ensureSingle(O,"g",T.cbtitleunshift,function(S){S.append("g").classed(T.cbtitle,!0)}),t.ensureSingle(O,"rect",T.cboutline);var S,E,R,B,H,V,Z,P=function(S,E,R){var B=E.len,H=E.lenmode,V=E.thickness,Z=E.thicknessmode,W=E.outlinewidth,G=E.borderwidth,X=E.xanchor,te=E.yanchor,D=E.xpad,N=E.ypad,U=E.x,Q=E.y,j=R._fullLayout,J=j._size,K=E._fillcolor,re=E._line,ne=E.title,se=ne.side,oe=E._zrange||p.extent(("function"==typeof K?K:re.color).domain()),pe="function"==typeof re.color?re.color:function(){return re.color},ce="function"==typeof K?K:function(){return K},ge=E._levels,xe=function(bt,Rt,Yt){var Fe,He,Oe=Rt._levels,$e=[],ke=[],Le=Oe.end+Oe.size/100,Pe=Oe.size,Ce=1.001*Yt[0]-.001*Yt[1],Xe=1.001*Yt[1]-.001*Yt[0];for(He=0;He<1e5&&(Fe=Oe.start+He*Pe,!(Pe>0?Fe>=Le:Fe<=Le));He++)Fe>Ce&&Fe<Xe&&$e.push(Fe);if(Rt._fillgradient)ke=[0];else if("function"==typeof Rt._fillcolor){var at=Rt._filllevels;if(at)for(Le=at.end+at.size/100,Pe=at.size,He=0;He<1e5&&(Fe=at.start+He*Pe,!(Pe>0?Fe>=Le:Fe<=Le));He++)Fe>Yt[0]&&Fe<Yt[1]&&ke.push(Fe);else(ke=$e.map(function(pt){return pt-Oe.size/2})).push(ke[ke.length-1]+Oe.size)}else Rt._fillcolor&&"string"==typeof Rt._fillcolor&&(ke=[0]);return Oe.size<0&&($e.reverse(),ke.reverse()),{line:$e,fill:ke}}(0,E,oe),we=xe.fill,be=xe.line,Se=Math.round(V*("fraction"===Z?J.w:1)),fe=Se/J.w,me=Math.round(B*("fraction"===H?J.h:1)),Te=me/J.h,_e=D/J.w,Me=(G+W)/2,Ie=N/J.h,ze=Math.round(U*J.w+D),Ve=U-fe*({center:.5,right:1}[X]||0),Je=Q+Te*(({top:-.5,bottom:.5}[te]||0)-.5),De=Math.round(J.h*(1-Je));E._lenFrac=Te,E._thickFrac=fe,E._uFrac=Ve,E._vFrac=Je;var Be=E._axis=function(bt,Rt,Yt){var Fe=bt._fullLayout,He={type:"linear",range:Yt,tickmode:Rt.tickmode,nticks:Rt.nticks,tick0:Rt.tick0,dtick:Rt.dtick,tickvals:Rt.tickvals,ticktext:Rt.ticktext,ticks:Rt.ticks,ticklen:Rt.ticklen,tickwidth:Rt.tickwidth,tickcolor:Rt.tickcolor,showticklabels:Rt.showticklabels,ticklabelposition:Rt.ticklabelposition,ticklabeloverflow:Rt.ticklabeloverflow,tickfont:Rt.tickfont,tickangle:Rt.tickangle,tickformat:Rt.tickformat,exponentformat:Rt.exponentformat,minexponent:Rt.minexponent,separatethousands:Rt.separatethousands,showexponent:Rt.showexponent,showtickprefix:Rt.showtickprefix,tickprefix:Rt.tickprefix,showticksuffix:Rt.showticksuffix,ticksuffix:Rt.ticksuffix,title:Rt.title,showline:!0,anchor:"free",side:"right",position:1},Oe={type:"linear",_id:"y"+Rt._id},$e={letter:"y",font:Fe.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:Fe.calendar};function ke(Le,Pe){return t.coerce(He,Oe,o,Le,Pe)}return g(He,Oe,ke,$e,Fe),h(He,Oe,ke,$e),Oe}(R,E,oe);if(Be.position=U+_e+fe,-1!==["top","bottom"].indexOf(se)&&(Be.title.side=se,Be.titlex=U+_e,Be.titley=Je+("top"===ne.side?Te-Ie:Ie)),re.color&&"auto"===E.tickmode){Be.tickmode="linear",Be.tick0=ge.start;var Ze=ge.size,Ye=t.constrain(me/50,4,15)+1,tt=(oe[1]-oe[0])/((E.nticks||Ye)*Ze);if(tt>1){var st=Math.pow(10,Math.floor(Math.log(tt)/Math.LN10));Ze*=st*t.roundUp(tt/st,[2,5,10]),(Math.abs(ge.start)/ge.size+1e-6)%1<2e-6&&(Be.tick0=0)}Be.dtick=Ze}Be.domain=[Je+Ie,Je+Te-Ie],Be.setScale(),S.attr("transform",a(Math.round(J.l),Math.round(J.t)));var vt,Pt=S.select("."+T.cbtitleunshift).attr("transform",a(-Math.round(J.l),-Math.round(J.t))),Mt=S.select("."+T.cbaxis),rt=0;function et(bt,Rt){var Yt={propContainer:Be,propName:E._propPrefix+"title",traceIndex:E._traceIndex,_meta:E._meta,placeholder:j._dfltTitle.colorbar,containerGroup:S.select("."+T.cbtitle)},Fe="h"===bt.charAt(0)?bt.substr(1):"h"+bt;S.selectAll("."+Fe+",."+Fe+"-math-group").remove(),l.draw(R,bt,r(Yt,Rt||{}))}return t.syncOrAsync([b.previousPromises,function(){if(-1!==["top","bottom"].indexOf(se)){var Yt=Be.title.font.size;et(Be._id+"title",{attributes:{x:J.l+(U+_e)*J.w,y:"top"===se?(1-(Je+Te-Ie))*J.h+J.t+3+.75*Yt:(1-(Je+Ie))*J.h+J.t-3-.25*Yt,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(se)){var bt=S.select("."+T.cbtitle),Rt=bt.select("text"),Yt=[-W/2,W/2],Fe=bt.select(".h"+Be._id+"title-math-group").node(),He=15.6;if(Rt.node()&&(He=parseInt(Rt.node().style.fontSize,10)*d),Fe?(rt=s.bBox(Fe).height)>He&&(Yt[1]-=(rt-He)/2):Rt.node()&&!Rt.classed(T.jsPlaceholder)&&(rt=s.bBox(Rt.node()).height),rt){if(rt+=5,"top"===se)Be.domain[1]-=rt/J.h,Yt[1]*=-1;else{Be.domain[0]+=rt/J.h;var Oe=c.lineCount(Rt);Yt[1]+=(1-Oe)*He}bt.attr("transform",a(Yt[0],Yt[1])),Be.setScale()}}S.selectAll("."+T.cbfills+",."+T.cblines).attr("transform",a(0,Math.round(J.h*(1-Be.domain[1])))),Mt.attr("transform",a(0,Math.round(-J.t)));var $e=S.select("."+T.cbfills).selectAll("rect."+T.cbfill).attr("style","").data(we);$e.enter().append("rect").classed(T.cbfill,!0).style("stroke","none"),$e.exit().remove();var ke=oe.map(Be.c2p).map(Math.round).sort(function(at,pt){return at-pt});$e.each(function(at,pt){var ut=[0===pt?oe[0]:(we[pt]+we[pt-1])/2,pt===we.length-1?oe[1]:(we[pt]+we[pt+1])/2].map(Be.c2p).map(Math.round);ut[1]=t.constrain(ut[1]+(ut[1]>ut[0])?1:-1,ke[0],ke[1]);var St=p.select(this).attr({x:ze,width:Math.max(Se,2),y:p.min(ut),height:Math.max(p.max(ut)-p.min(ut),2)});if(E._fillgradient)s.gradient(St,R,E._id,"vertical",E._fillgradient,"fill");else{var ot=ce(at).replace("e-","");St.attr("fill",m(ot).toHexString())}});var Le=S.select("."+T.cblines).selectAll("path."+T.cbline).data(re.color&&re.width?be:[]);Le.enter().append("path").classed(T.cbline,!0),Le.exit().remove(),Le.each(function(at){p.select(this).attr("d","M"+ze+","+(Math.round(Be.c2p(at))+re.width/2%1)+"h"+Se).call(s.lineGroupStyle,re.width,pe(at),re.dash)}),Mt.selectAll("g."+Be._id+"tick,path").remove();var Pe=ze+Se+(W||0)/2-("outside"===E.ticks?1:0),Ce=e.calcTicks(Be),Xe=e.getTickSigns(Be)[2];return e.drawTicks(R,Be,{vals:"inside"===Be.ticks?e.clipEnds(Be,Ce):Ce,layer:Mt,path:e.makeTickPath(Be,Pe,Xe),transFn:e.makeTransTickFn(Be)}),e.drawLabels(R,Be,{vals:Ce,layer:Mt,transFn:e.makeTransTickLabelFn(Be),labelFns:e.makeLabelFns(Be,Pe)})},function(){if(-1===["top","bottom"].indexOf(se)){var bt=Be.title.font.size,Rt=Be._offset+Be._length/2,Yt=J.l+(Be.position||0)*J.w+("right"===Be.side?10+bt*(Be.showticklabels?1:.5):-10-bt*(Be.showticklabels?.5:0));et("h"+Be._id+"title",{avoid:{selection:p.select(R).selectAll("g."+Be._id+"tick"),side:se,offsetLeft:J.l,offsetTop:0,maxShift:j.width},attributes:{x:Yt,y:Rt,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},b.previousPromises,function(){var bt=Se+W/2;if(-1===Be.ticklabelposition.indexOf("inside")&&(bt+=s.bBox(Mt.node()).width),(vt=Pt.select("text")).node()&&!vt.classed(T.jsPlaceholder)){var Rt,Yt=Pt.select(".h"+Be._id+"title-math-group").node();Rt=Yt&&-1!==["top","bottom"].indexOf(se)?s.bBox(Yt).width:s.bBox(Pt.node()).right-ze-J.l,bt=Math.max(bt,Rt)}var Fe=2*D+bt+G+W/2;S.select("."+T.cbbg).attr({x:ze-D-(G+W)/2,y:De-me-Me,width:Math.max(Fe,2),height:Math.max(me+2*Me,2)}).call(i.fill,E.bgcolor).call(i.stroke,E.bordercolor).style("stroke-width",G),S.selectAll("."+T.cboutline).attr({x:ze,y:De-me+N+("top"===se?rt:0),width:Math.max(Se,2),height:Math.max(me-2*N-rt,2)}).call(i.stroke,E.outlinecolor).style({fill:"none","stroke-width":W}),S.attr("transform",a(J.l-({center:.5,right:1}[X]||0)*Fe,J.t));var Oe={},$e=w[te],ke=_[te];"pixels"===H?(Oe.y=Q,Oe.t=me*$e,Oe.b=me*ke):(Oe.t=Oe.b=0,Oe.yt=Q+B*$e,Oe.yb=Q-B*ke);var Le=w[X],Pe=_[X];if("pixels"===Z)Oe.x=U,Oe.l=Fe*Le,Oe.r=Fe*Pe;else{var Ce=Fe-Se;Oe.l=Ce*Le,Oe.r=Ce*Pe,Oe.xl=U-V*Le,Oe.xr=U+V*Pe}b.autoMargin(R,E._id,Oe)}],R)}(O,M,k);P&&P.then&&(k._promises||[]).push(P),k._context.edits.colorbarPosition&&(E=M,Z=(R=k)._fullLayout._size,n.init({element:(S=O).node(),gd:R,prepFn:function(){B=S.attr("transform"),u(S)},moveFn:function(W,G){S.attr("transform",B+a(W,G)),H=n.align(E._uFrac+W/Z.w,E._thickFrac,0,1,E.xanchor),V=n.align(E._vFrac-G/Z.h,E._lenFrac,0,1,E.yanchor);var X=n.getCursor(H,V,E.xanchor,E.yanchor);u(S,X)},doneFn:function(){if(u(S),void 0!==H&&void 0!==V){var W={};W[E._propPrefix+"x"]=H,W[E._propPrefix+"y"]=V,void 0!==E._traceIndex?v.call("_guiRestyle",R,W,E._traceIndex):v.call("_guiRelayout",R,W)}}}))}),L.exit().each(function(M){b.autoMargin(k,M._id)}).remove(),L.order()}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(y,$,ee){"use strict";var p=y("../../lib");$.exports=function(m){return p.isPlainObject(m.colorbar)}},{"../../lib":503}],372:[function(y,$,ee){"use strict";$.exports={moduleType:"component",name:"colorbar",attributes:y("./attributes"),supplyDefaults:y("./defaults"),draw:y("./draw").draw,hasColorbar:y("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(y,$,ee){"use strict";var p=y("../colorbar/attributes"),m=y("../../lib/regex").counter,b=y("../../lib/sort_object_keys"),v=y("./scales.js").scales;function e(n){return"`"+n+"`"}b(v),$.exports=function(n,t){n=n||"";var a,r=(t=t||{}).cLetter||"c",u=("onlyIfNumerical"in t||Boolean(n),"noScale"in t?t.noScale:"marker.line"===n),s="showScaleDflt"in t?t.showScaleDflt:"z"===r,i="string"==typeof t.colorscaleDflt?v[t.colorscaleDflt]:null,l=t.editTypeOverride||"",c=n?n+".":"";"colorAttr"in t?a=t.colorAttr:e(c+(a={z:"z",c:"color"}[r]));var f=r+"auto",g=r+"min",h=r+"max",o=r+"mid",x=(e(c+f),e(c+g),e(c+h),{});x[g]=x[h]=void 0;var d={};d[f]=!1;var w={};return"color"===a&&(w.color={valType:"color",arrayOk:!0,editType:l||"style"},t.anim&&(w.color.anim=!0)),w[f]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:x},w[g]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:d},w[h]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:d},w[o]={valType:"number",dflt:null,editType:"calc",impliedEdits:x},w.colorscale={valType:"colorscale",editType:"calc",dflt:i,impliedEdits:{autocolorscale:!1}},w.autocolorscale={valType:"boolean",dflt:!1!==t.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},w.reversescale={valType:"boolean",dflt:!1,editType:"plot"},u||(w.showscale={valType:"boolean",dflt:s,editType:"calc"},w.colorbar=p),t.noColorAxis||(w.coloraxis={valType:"subplotid",regex:m("coloraxis"),dflt:null,editType:"calc"}),w}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib"),b=y("./helpers").extractOpts;$.exports=function(v,e,n){var a=v._fullLayout,r=n.vals,u=n.containerStr,s=u?m.nestedProperty(e,u).get():e,i=b(s),l=!1!==i.auto,c=i.min,f=i.max,g=i.mid,h=function(){return m.aggNums(Math.min,null,r)},o=function(){return m.aggNums(Math.max,null,r)};void 0===c?c=h():l&&(c=s._colorAx&&p(c)?Math.min(c,h()):h()),void 0===f?f=o():l&&(f=s._colorAx&&p(f)?Math.max(f,o()):o()),l&&void 0!==g&&(f-g>g-c?c=g-(f-g):f-g<g-c&&(f=g+(g-c))),c===f&&(c-=.5,f+=.5),i._sync("min",c),i._sync("max",f),i.autocolorscale&&i._sync("colorscale",c*f<0?a.colorscale.diverging:c>=0?a.colorscale.sequential:a.colorscale.sequentialminus)}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./helpers").hasColorscale,b=y("./helpers").extractOpts;$.exports=function(v,e){function n(l,c){var f=l["_"+c];void 0!==f&&(l[c]=f)}function t(l,c){var f=c.container?p.nestedProperty(l,c.container).get():l;if(f)if(f.coloraxis)f._colorAx=e[f.coloraxis];else{var g=b(f),h=g.auto;(h||void 0===g.min)&&n(f,c.min),(h||void 0===g.max)&&n(f,c.max),g.autocolorscale&&n(f,"colorscale")}}for(var a=0;a<v.length;a++){var r=v[a],u=r._module.colorbar;if(u)if(Array.isArray(u))for(var s=0;s<u.length;s++)t(r,u[s]);else t(r,u);m(r,"marker.line")&&t(r,{container:"marker.line",min:"cmin",max:"cmax"})}for(var i in e._colorAxes)t(e[i],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib"),b=y("../colorbar/has_colorbar"),v=y("../colorbar/defaults"),e=y("./scales").isValid,n=y("../../registry").traceIs;function t(a,r){var u=r.slice(0,r.length-1);return r?m.nestedProperty(a,u).get()||{}:a}$.exports=function a(r,u,s,i,l){var c=l.prefix,f=l.cLetter,g="_module"in u,h=t(r,c),o=t(u,c),x=t(u._template||{},c)||{},d=function(){return delete r.coloraxis,delete u.coloraxis,a(r,u,s,i,l)};if(g){var w=s._colorAxes||{},_=i(c+"coloraxis");if(_){var T=n(u,"contour")&&m.nestedProperty(u,"contours.coloring").get()||"heatmap",k=w[_];return void(k?(k[2].push(d),k[0]!==T&&(k[0]=!1,m.warn(["Ignoring coloraxis:",_,"setting","as it is linked to incompatible colorscales."].join(" ")))):w[_]=[T,u,[d]])}}var L=h[f+"min"],M=h[f+"max"],O=p(L)&&p(M)&&L<M;i(c+f+"auto",!O)?i(c+f+"mid"):(i(c+f+"min"),i(c+f+"max"));var P,S,E=h.colorscale,R=x.colorscale;void 0!==E&&(P=!e(E)),void 0!==R&&(P=!e(R)),i(c+"autocolorscale",P),i(c+"colorscale"),i(c+"reversescale"),"marker.line."!==c&&(c&&g&&(S=b(h)),i(c+"showscale",S)&&(c&&x&&(o._template=x),v(h,o,s)))}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("tinycolor2"),b=y("fast-isnumeric"),v=y("../../lib"),e=y("../color"),n=y("./scales").isValid,t=["showscale","autocolorscale","colorscale","reversescale","colorbar"],a=["min","max","mid","auto"];function r(c){var f,g,h,o=c._colorAx,x=o||c,d={};for(g=0;g<t.length;g++)d[h=t[g]]=x[h];if(o)for(f="c",g=0;g<a.length;g++)d[h=a[g]]=x["c"+h];else{var w;for(g=0;g<a.length;g++)((w="c"+(h=a[g]))in x||(w="z"+h)in x)&&(d[h]=x[w]);f=w.charAt(0)}return d._sync=function(_,T){var k=-1!==a.indexOf(_)?f+_:_;x[k]=x["_"+k]=T},d}function u(c){for(var f=r(c),g=f.min,h=f.max,o=f.reversescale?s(f.colorscale):f.colorscale,x=o.length,d=new Array(x),w=new Array(x),_=0;_<x;_++){var T=o[_];d[_]=g+T[0]*(h-g),w[_]=T[1]}return{domain:d,range:w}}function s(c){for(var f=c.length,g=new Array(f),h=f-1,o=0;h>=0;h--,o++){var x=c[h];g[o]=[1-x[0],x[1]]}return g}function i(c,f){f=f||{};for(var g=c.domain,h=c.range,o=h.length,x=new Array(o),d=0;d<o;d++){var w=m(h[d]).toRgb();x[d]=[w.r,w.g,w.b,w.a]}var _,T=p.scale.linear().domain(g).range(x).clamp(!0),k=f.noNumericCheck,L=f.returnArray;return(_=k&&L?T:k?function(M){return l(T(M))}:L?function(M){return b(M)?T(M):m(M).isValid()?M:e.defaultLine}:function(M){return b(M)?l(T(M)):m(M).isValid()?M:e.defaultLine}).domain=T.domain,_.range=function(){return h},_}function l(c){return m({r:c[0],g:c[1],b:c[2],a:c[3]}).toRgbString()}$.exports={hasColorscale:function(c,f,g){var h=f?v.nestedProperty(c,f).get()||{}:c,o=h[g||"color"],x=!1;if(v.isArrayOrTypedArray(o))for(var d=0;d<o.length;d++)if(b(o[d])){x=!0;break}return v.isPlainObject(h)&&(x||!0===h.showscale||b(h.cmin)&&b(h.cmax)||n(h.colorscale)||v.isPlainObject(h.colorbar))},extractOpts:r,extractScale:u,flipScale:s,makeColorScaleFunc:i,makeColorScaleFuncFromTrace:function(c,f){return i(u(c),f)}}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(y,$,ee){"use strict";var p=y("./scales"),m=y("./helpers");$.exports={moduleType:"component",name:"colorscale",attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyLayoutDefaults:y("./layout_defaults"),handleDefaults:y("./defaults"),crossTraceDefaults:y("./cross_trace_defaults"),calc:y("./calc"),scales:p.scales,defaultScale:p.defaultScale,getScale:p.get,isValidScale:p.isValid,hasColorscale:m.hasColorscale,extractOpts:m.extractOpts,extractScale:m.extractScale,flipScale:m.flipScale,makeColorScaleFunc:m.makeColorScaleFunc,makeColorScaleFuncFromTrace:m.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(y,$,ee){"use strict";var p=y("../../lib/extend").extendFlat,m=y("./attributes"),b=y("./scales").scales;$.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:b.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:b.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:b.RdBu,editType:"calc"}},coloraxis:p({_isSubplotObj:!0,editType:"calc"},m("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plot_api/plot_template"),b=y("./layout_attributes"),v=y("./defaults");$.exports=function(e,n){function t(f,g){return p.coerce(e,n,b,f,g)}t("colorscale.sequential"),t("colorscale.sequentialminus"),t("colorscale.diverging");var a,r,u=n._colorAxes;function s(f,g){return p.coerce(a,r,b.coloraxis,f,g)}for(var i in u){var l=u[i];if(l[0])a=e[i]||{},(r=m.newContainer(n,i,"coloraxis"))._name=i,v(a,r,n,s,{prefix:"",cLetter:"c"});else{for(var c=0;c<l[2].length;c++)l[2][c]();delete n._colorAxes[i]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(y,$,ee){"use strict";var p=y("tinycolor2"),m={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},b=m.RdBu;function v(e){var n=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var t=0;t<e.length;t++){var a=e[t];if(2!==a.length||+a[0]<n||!p(a[1]).isValid())return!1;n=+a[0]}return!0}$.exports={scales:m,defaultScale:b,get:function(e,n){if(n||(n=b),!e)return n;function t(){try{e=m[e]||JSON.parse(e)}catch(a){e=n}}return"string"==typeof e&&(t(),"string"==typeof e&&t()),v(e)?e:n},isValid:function(e){return void 0!==m[e]||v(e)}}},{tinycolor2:312}],382:[function(y,$,ee){"use strict";$.exports=function(p,m,b,v,e){var n=(p-b)/(v-b),t=n+m/(v-b),a=(n+t)/2;return"left"===e||"bottom"===e?n:"center"===e||"middle"===e?a:"right"===e||"top"===e?t:n<2/3-a?n:t>4/3-a?t:a}},{}],383:[function(y,$,ee){"use strict";var p=y("../../lib"),m=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];$.exports=function(b,v,e,n){return b="left"===e?0:"center"===e?1:"right"===e?2:p.constrain(Math.floor(3*b),0,2),v="bottom"===n?0:"middle"===n?1:"top"===n?2:p.constrain(Math.floor(3*v),0,2),m[v][b]}},{"../../lib":503}],384:[function(y,$,ee){"use strict";ee.selectMode=function(p){return"lasso"===p||"select"===p},ee.drawMode=function(p){return"drawclosedpath"===p||"drawopenpath"===p||"drawline"===p||"drawrect"===p||"drawcircle"===p},ee.openMode=function(p){return"drawline"===p||"drawopenpath"===p},ee.rectMode=function(p){return"select"===p||"drawline"===p||"drawrect"===p||"drawcircle"===p},ee.freeMode=function(p){return"lasso"===p||"drawclosedpath"===p||"drawopenpath"===p},ee.selectingOrDrawing=function(p){return ee.freeMode(p)||ee.rectMode(p)}},{}],385:[function(y,$,ee){"use strict";var p=y("mouse-event-offset"),m=y("has-hover"),b=y("has-passive-events"),v=y("../../lib").removeElement,e=y("../../plots/cartesian/constants"),n=$.exports={};n.align=y("./align"),n.getCursor=y("./cursor");var t=y("./unhover");function a(){var u=document.createElement("div");u.className="dragcover";var s=u.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(u),u}function r(u){return p(u.changedTouches?u.changedTouches[0]:u,document.body)}n.unhover=t.wrapped,n.unhoverRaw=t.raw,n.init=function(u){var s,i,l,c,f,g,h,o,x=u.gd,d=1,w=x._context.doubleClickDelay,_=u.element;x._mouseDownTime||(x._mouseDownTime=0),_.style.pointerEvents="all",_.onmousedown=k,b?(_._ontouchstart&&_.removeEventListener("touchstart",_._ontouchstart),_._ontouchstart=k,_.addEventListener("touchstart",k,{passive:!1})):_.ontouchstart=k;var T=u.clampFn||function(O,P,S){return Math.abs(O)<S&&(O=0),Math.abs(P)<S&&(P=0),[O,P]};function k(O){x._dragged=!1,x._dragging=!0;var P=r(O);s=P[0],i=P[1],h=O.target,g=O,o=2===O.buttons||O.ctrlKey,void 0===O.clientX&&void 0===O.clientY&&(O.clientX=s,O.clientY=i),(l=(new Date).getTime())-x._mouseDownTime<w?d+=1:(d=1,x._mouseDownTime=l),u.prepFn&&u.prepFn(O,s,i),m&&!o?(f=a()).style.cursor=window.getComputedStyle(_).cursor:m||(f=document,c=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(_).cursor),document.addEventListener("mouseup",M),document.addEventListener("touchend",M),!1!==u.dragmode&&(O.preventDefault(),document.addEventListener("mousemove",L),document.addEventListener("touchmove",L,{passive:!1}))}function L(O){O.preventDefault();var P=r(O),E=T(P[0]-s,P[1]-i,u.minDrag||e.MINDRAG),R=E[0],B=E[1];(R||B)&&(x._dragged=!0,n.unhover(x,O)),x._dragged&&u.moveFn&&!o&&(x._dragdata={element:_,dx:R,dy:B},u.moveFn(R,B))}function M(O){if(delete x._dragdata,!1!==u.dragmode&&(O.preventDefault(),document.removeEventListener("mousemove",L),document.removeEventListener("touchmove",L)),document.removeEventListener("mouseup",M),document.removeEventListener("touchend",M),m?v(f):c&&(f.documentElement.style.cursor=c,c=null),x._dragging){if(x._dragging=!1,(new Date).getTime()-x._mouseDownTime>w&&(d=Math.max(d-1,1)),x._dragged)u.doneFn&&u.doneFn();else if(u.clickFn&&u.clickFn(d,g),!o){var P;try{P=new MouseEvent("click",O)}catch(E){var S=r(O);(P=document.createEvent("MouseEvents")).initMouseEvent("click",O.bubbles,O.cancelable,O.view,O.detail,O.screenX,O.screenY,S[0],S[1],O.ctrlKey,O.altKey,O.shiftKey,O.metaKey,O.button,O.relatedTarget)}h.dispatchEvent(P)}x._dragging=!1,x._dragged=!1}else x._dragged=!1}},n.coverSlip=a},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(y,$,ee){"use strict";var p=y("../../lib/events"),m=y("../../lib/throttle"),b=y("../../lib/dom").getGraphDiv,v=y("../fx/constants"),e=$.exports={};e.wrapped=function(n,t,a){(n=b(n))._fullLayout&&m.clear(n._fullLayout._uid+v.HOVERID),e.raw(n,t,a)},e.raw=function(n,t){var a=n._fullLayout,r=n._hoverdata;t||(t={}),t.target&&!n._dragged&&!1===p.triggerHandler(n,"plotly_beforehover",t)||(a._hoverlayer.selectAll("g").remove(),a._hoverlayer.selectAll("line").remove(),a._hoverlayer.selectAll("circle").remove(),n._hoverdata=void 0,t.target&&r&&n.emit("plotly_unhover",{event:t,points:r}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(y,$,ee){"use strict";ee.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},ee.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=m.numberFormat,v=y("fast-isnumeric"),e=y("tinycolor2"),n=y("../../registry"),t=y("../color"),a=y("../colorscale"),r=m.strTranslate,u=y("../../lib/svg_text_utils"),s=y("../../constants/xmlns_namespaces"),i=y("../../constants/alignment").LINE_SPACING,l=y("../../constants/interactions").DESELECTDIM,c=y("../../traces/scatter/subtypes"),f=y("../../traces/scatter/make_bubble_size_func"),g=y("../../components/fx/helpers").appendArrayPointValue,h=$.exports={};h.font=function(W,G,X,te){m.isPlainObject(G)&&(te=G.color,X=G.size,G=G.family),G&&W.style("font-family",G),X+1&&W.style("font-size",X+"px"),te&&W.call(t.fill,te)},h.setPosition=function(W,G,X){W.attr("x",G).attr("y",X)},h.setSize=function(W,G,X){W.attr("width",G).attr("height",X)},h.setRect=function(W,G,X,te,D){W.call(h.setPosition,G,X).call(h.setSize,te,D)},h.translatePoint=function(W,G,X,te){var D=X.c2p(W.x),N=te.c2p(W.y);return!!(v(D)&&v(N)&&G.node())&&("text"===G.node().nodeName?G.attr("x",D).attr("y",N):G.attr("transform",r(D,N)),!0)},h.translatePoints=function(W,G,X){W.each(function(te){var D=p.select(this);h.translatePoint(te,D,G,X)})},h.hideOutsideRangePoint=function(W,G,X,te,D,N){G.attr("display",X.isPtWithinRange(W,D)&&te.isPtWithinRange(W,N)?null:"none")},h.hideOutsideRangePoints=function(W,G){if(G._hasClipOnAxisFalse){var X=G.xaxis,te=G.yaxis;W.each(function(D){var N=D[0].trace,U=N.xcalendar,Q=N.ycalendar,j=n.traceIs(N,"bar-like")?".bartext":".point,.textpoint";W.selectAll(j).each(function(J){h.hideOutsideRangePoint(J,p.select(this),X,te,U,Q)})})}},h.crispRound=function(W,G,X){return G&&v(G)?W._context.staticPlot?G:G<1?1:Math.round(G):X||0},h.singleLineStyle=function(W,G,X,te,D){G.style("fill","none");var N=(((W||[])[0]||{}).trace||{}).line||{},U=X||N.width||0,Q=D||N.dash||"";t.stroke(G,te||N.color),h.dashLine(G,Q,U)},h.lineGroupStyle=function(W,G,X,te){W.style("fill","none").each(function(D){var N=(((D||[])[0]||{}).trace||{}).line||{},U=G||N.width||0,Q=te||N.dash||"";p.select(this).call(t.stroke,X||N.color).call(h.dashLine,Q,U)})},h.dashLine=function(W,G,X){G=h.dashStyle(G,X=+X||0),W.style({"stroke-dasharray":G,"stroke-width":X+"px"})},h.dashStyle=function(W,G){G=+G||1;var X=Math.max(G,3);return"solid"===W?W="":"dot"===W?W=X+"px,"+X+"px":"dash"===W?W=3*X+"px,"+3*X+"px":"longdash"===W?W=5*X+"px,"+5*X+"px":"dashdot"===W?W=3*X+"px,"+X+"px,"+X+"px,"+X+"px":"longdashdot"===W&&(W=5*X+"px,"+2*X+"px,"+X+"px,"+2*X+"px"),W},h.singleFillStyle=function(W){var G=(((p.select(W.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;G&&W.call(t.fill,G)},h.fillGroupStyle=function(W){W.style("stroke-width",0).each(function(G){var X=p.select(this);G[0].trace&&X.call(t.fill,G[0].trace.fillcolor)})};var o=y("./symbol_defs");h.symbolNames=[],h.symbolFuncs=[],h.symbolNeedLines={},h.symbolNoDot={},h.symbolNoFill={},h.symbolList=[],Object.keys(o).forEach(function(W){var G=o[W],X=G.n;h.symbolList.push(X,String(X),W,X+100,String(X+100),W+"-open"),h.symbolNames[X]=W,h.symbolFuncs[X]=G.f,G.needLine&&(h.symbolNeedLines[X]=!0),G.noDot?h.symbolNoDot[X]=!0:h.symbolList.push(X+200,String(X+200),W+"-dot",X+300,String(X+300),W+"-open-dot"),G.noFill&&(h.symbolNoFill[X]=!0)});var x=h.symbolNames.length;function d(W,G){return h.symbolFuncs[W%100](G)+(W>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}h.symbolNumber=function(W){if(v(W))W=+W;else if("string"==typeof W){var G=0;W.indexOf("-open")>0&&(G=100,W=W.replace("-open","")),W.indexOf("-dot")>0&&(G+=200,W=W.replace("-dot","")),(W=h.symbolNames.indexOf(W))>=0&&(W+=G)}return W%100>=x||W>=400?0:Math.floor(Math.max(W,0))};var w={x1:1,x2:0,y1:0,y2:0},_={x1:0,x2:0,y1:1,y2:0},T=b("~f"),k={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:w},horizontalreversed:{node:"linearGradient",attrs:w,reversed:!0},vertical:{node:"linearGradient",attrs:_},verticalreversed:{node:"linearGradient",attrs:_,reversed:!0}};h.gradient=function(W,G,X,te,D,N){for(var U=D.length,Q=k[te],j=new Array(U),J=0;J<U;J++)Q.reversed?j[U-1-J]=[T(100*(1-D[J][0])),D[J][1]]:j[J]=[T(100*D[J][0]),D[J][1]];var K=G._fullLayout,re="g"+K._uid+"-"+X,ne=K._defs.select(".gradients").selectAll("#"+re).data([te+j.join(";")],m.identity);ne.exit().remove(),ne.enter().append(Q.node).each(function(){var pe=p.select(this);Q.attrs&&pe.attr(Q.attrs),pe.attr("id",re);var ce=pe.selectAll("stop").data(j);ce.exit().remove(),ce.enter().append("stop"),ce.each(function(ge){var xe=e(ge[1]);p.select(this).attr({offset:ge[0]+"%","stop-color":t.tinyRGB(xe),"stop-opacity":xe.getAlpha()})})}),W.style(N,H(re,G)).style(N+"-opacity",null);var se=function(pe){return"."+pe.attr("class").replace(/\s/g,".")},oe=se(p.select(W.node().parentNode))+">"+se(W);K._gradientUrlQueryParts[oe]=1},h.pattern=function(W,G,X,te,D,N,U,Q,j,J,K,re){var ne="legend"===G;Q&&("overlay"===j?K=t.contrast(J=Q):(J=void 0,K=Q));var se,oe,pe,ce,ge,xe,we,be,fe,Te=X._fullLayout,_e="p"+Te._uid+"-"+te,Me={};switch(D){case"/":se=N*Math.sqrt(2),oe=N*Math.sqrt(2),xe="path",Me={d:pe="M-"+se/4+","+oe/4+"l"+se/2+",-"+oe/2+"M0,"+oe+"L"+se+",0M"+se/4*3+","+oe/4*5+"l"+se/2+",-"+oe/2,opacity:re,stroke:K,"stroke-width":(ce=U*N)+"px"};break;case"\\":se=N*Math.sqrt(2),oe=N*Math.sqrt(2),xe="path",Me={d:pe="M"+se/4*3+",-"+oe/4+"l"+se/2+","+oe/2+"M0,0L"+se+","+oe+"M-"+se/4+","+oe/4*3+"l"+se/2+","+oe/2,opacity:re,stroke:K,"stroke-width":(ce=U*N)+"px"};break;case"x":se=N*Math.sqrt(2),oe=N*Math.sqrt(2),pe="M-"+se/4+","+oe/4+"l"+se/2+",-"+oe/2+"M0,"+oe+"L"+se+",0M"+se/4*3+","+oe/4*5+"l"+se/2+",-"+oe/2+"M"+se/4*3+",-"+oe/4+"l"+se/2+","+oe/2+"M0,0L"+se+","+oe+"M-"+se/4+","+oe/4*3+"l"+se/2+","+oe/2,ce=N-N*Math.sqrt(1-U),xe="path",Me={d:pe,opacity:re,stroke:K,"stroke-width":ce+"px"};break;case"|":xe="path",xe="path",Me={d:pe="M"+(se=N)/2+",0L"+se/2+","+(oe=N),opacity:re,stroke:K,"stroke-width":(ce=U*N)+"px"};break;case"-":xe="path",xe="path",Me={d:pe="M0,"+(oe=N)/2+"L"+(se=N)+","+oe/2,opacity:re,stroke:K,"stroke-width":(ce=U*N)+"px"};break;case"+":xe="path",pe="M"+(se=N)/2+",0L"+se/2+","+(oe=N)+"M0,"+oe/2+"L"+se+","+oe/2,ce=N-N*Math.sqrt(1-U),xe="path",Me={d:pe,opacity:re,stroke:K,"stroke-width":ce+"px"};break;case".":se=N,oe=N,U<Math.PI/4?ge=Math.sqrt(U*N*N/Math.PI):(we=U,be=Math.PI/4,ge=(fe=N/2)+(N/Math.sqrt(2)-fe)*(we-be)/(1-be)),xe="circle",Me={cx:se/2,cy:oe/2,r:ge,opacity:re,fill:K}}var Ie=[D||"noSh",J||"noBg",K||"noFg",N,U].join(";"),ze=Te._defs.select(".patterns").selectAll("#"+_e).data([Ie],m.identity);ze.exit().remove(),ze.enter().append("pattern").each(function(){var Je=p.select(this);if(Je.attr({id:_e,width:se+"px",height:oe+"px",patternUnits:"userSpaceOnUse",patternTransform:ne?"scale(0.8)":""}),J){var De=Je.selectAll("rect").data([0]);De.exit().remove(),De.enter().append("rect").attr({width:se+"px",height:oe+"px",fill:J})}var Be=Je.selectAll(xe).data([0]);Be.exit().remove(),Be.enter().append(xe).attr(Me)}),W.style("fill",H(_e,X)).style("fill-opacity",null),W.classed("pattern_filled",!0);var Ve="."+p.select(W.node().parentNode).attr("class").replace(/\s/g,".")+">.pattern_filled";Te._patternUrlQueryParts[Ve]=1},h.initGradients=function(W){var G=W._fullLayout;m.ensureSingle(G._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),G._gradientUrlQueryParts={}},h.initPatterns=function(W){var G=W._fullLayout;m.ensureSingle(G._defs,"g","patterns").selectAll("pattern").remove(),G._patternUrlQueryParts={}},h.getPatternAttr=function(W,G,X){return W&&m.isArrayOrTypedArray(W)?G<W.length?W[G]:X:W},h.pointStyle=function(W,G,X){if(W.size()){var te=h.makePointStyleFns(G);W.each(function(D){h.singlePointStyle(D,p.select(this),G,te,X)})}},h.singlePointStyle=function(W,G,X,te,D){var N=X.marker,U=N.line;if(G.style("opacity",te.selectedOpacityFn?te.selectedOpacityFn(W):void 0===W.mo?N.opacity:W.mo),te.ms2mrc){var Q;Q="various"===W.ms||"various"===N.size?3:te.ms2mrc(W.ms),W.mrc=Q,te.selectedSizeFn&&(Q=W.mrc=te.selectedSizeFn(W));var j=h.symbolNumber(W.mx||N.symbol)||0;W.om=j%200>=100,G.attr("d",d(j,Q))}var J,K,re,ne=!1;if(W.so?(re=U.outlierwidth,K=U.outliercolor,J=N.outliercolor):(re=(W.mlw+1||(U||{}).width+1||(W.trace?(W.trace.marker.line||{}).width:0)+1)-1||0,K="mlc"in W?W.mlcc=te.lineScale(W.mlc):m.isArrayOrTypedArray(U.color)?t.defaultLine:U.color,m.isArrayOrTypedArray(N.color)&&(J=t.defaultLine,ne=!0),J="mc"in W?W.mcc=te.markerScale(W.mc):N.color||"rgba(0,0,0,0)",te.selectedColorFn&&(J=te.selectedColorFn(W))),W.om)G.call(t.stroke,J).style({"stroke-width":(re||1)+"px",fill:"none"});else{G.style("stroke-width",(W.isBlank?0:re)+"px");var oe=N.gradient,pe=W.mgt;pe?ne=!0:pe=oe&&oe.type,m.isArrayOrTypedArray(pe)&&(k[pe=pe[0]]||(pe=0));var ce=N.pattern,ge=ce&&h.getPatternAttr(ce.shape,W.i,"");if(pe&&"none"!==pe){var xe=W.mgc;xe?ne=!0:xe=oe.color;var we=X.uid;ne&&(we+="-"+W.i),h.gradient(G,D,we,pe,[[0,xe],[1,J]],"fill")}else if(ge){var be=h.getPatternAttr(ce.bgcolor,W.i,null),Se=h.getPatternAttr(ce.fgcolor,W.i,null),fe=ce.fgopacity,me=h.getPatternAttr(ce.size,W.i,8),Te=h.getPatternAttr(ce.solidity,W.i,.3),_e=W.mcc||m.isArrayOrTypedArray(ce.shape)||m.isArrayOrTypedArray(ce.bgcolor)||m.isArrayOrTypedArray(ce.size)||m.isArrayOrTypedArray(ce.solidity),Me=X.uid;_e&&(Me+="-"+W.i),h.pattern(G,"point",D,Me,ge,me,Te,W.mcc,ce.fillmode,be,Se,fe)}else t.fill(G,J);re&&t.stroke(G,K)}},h.makePointStyleFns=function(W){var G={},X=W.marker;return G.markerScale=h.tryColorscale(X,""),G.lineScale=h.tryColorscale(X,"line"),n.traceIs(W,"symbols")&&(G.ms2mrc=c.isBubble(W)?f(W):function(){return(X.size||6)/2}),W.selectedpoints&&m.extendFlat(G,h.makeSelectedPointStyleFns(W)),G},h.makeSelectedPointStyleFns=function(W){var G={},D=W.marker||{},N=(W.selected||{}).marker||{},U=(W.unselected||{}).marker||{},j=N.opacity,J=U.opacity,K=void 0!==j,re=void 0!==J;(m.isArrayOrTypedArray(D.opacity)||K||re)&&(G.selectedOpacityFn=function(be){var Se=void 0===be.mo?D.opacity:be.mo;return be.selected?K?j:Se:re?J:l*Se});var ne=D.color,se=N.color,oe=U.color;(se||oe)&&(G.selectedColorFn=function(be){var Se=be.mcc||ne;return be.selected?se||Se:oe||Se});var pe=D.size,ce=N.size,ge=U.size,xe=void 0!==ce,we=void 0!==ge;return n.traceIs(W,"symbols")&&(xe||we)&&(G.selectedSizeFn=function(be){var Se=be.mrc||pe/2;return be.selected?xe?ce/2:Se:we?ge/2:Se}),G},h.makeSelectedTextStyleFns=function(W){var G={},Q=(W.textfont||{}).color,j=((W.selected||{}).textfont||{}).color,J=((W.unselected||{}).textfont||{}).color;return G.selectedTextColorFn=function(K){var re=K.tc||Q;return K.selected?j||re:J||(j?re:t.addOpacity(re,l))},G},h.selectedPointStyle=function(W,G){if(W.size()&&G.selectedpoints){var X=h.makeSelectedPointStyleFns(G),te=G.marker||{},D=[];X.selectedOpacityFn&&D.push(function(N,U){N.style("opacity",X.selectedOpacityFn(U))}),X.selectedColorFn&&D.push(function(N,U){t.fill(N,X.selectedColorFn(U))}),X.selectedSizeFn&&D.push(function(N,U){var Q=U.mx||te.symbol||0,j=X.selectedSizeFn(U);N.attr("d",d(h.symbolNumber(Q),j)),U.mrc2=j}),D.length&&W.each(function(N){for(var U=p.select(this),Q=0;Q<D.length;Q++)D[Q](U,N)})}},h.tryColorscale=function(W,G){var X=G?m.nestedProperty(W,G).get():W;return X&&(X.colorscale||X._colorAx)&&m.isArrayOrTypedArray(X.color)?a.makeColorScaleFuncFromTrace(X):m.identity};var L={start:1,end:-1,middle:0,bottom:1,top:-1};function M(W,G,X,te,D){var N=p.select(W.node().parentNode),U=-1!==G.indexOf("top")?"top":-1!==G.indexOf("bottom")?"bottom":"middle",Q=-1!==G.indexOf("left")?"end":-1!==G.indexOf("right")?"start":"middle",j=te?te/.8+1:0,J=(u.lineCount(W)-1)*i+1,K=L[Q]*j,re=.75*X+L[U]*j+(L[U]-1)*J*X/2;W.attr("text-anchor",Q),D||N.attr("transform",r(K,re))}function O(W,G){var X=W.ts||G.textfont.size;return v(X)&&X>0?X:0}function P(W,G,X,te){var D=W[0]-G[0],N=W[1]-G[1],U=X[0]-G[0],Q=X[1]-G[1],j=Math.pow(D*D+N*N,.25),J=Math.pow(U*U+Q*Q,.25),K=(J*J*D-j*j*U)*te,re=(J*J*N-j*j*Q)*te,ne=3*J*(j+J),se=3*j*(j+J);return[[p.round(G[0]+(ne&&K/ne),2),p.round(G[1]+(ne&&re/ne),2)],[p.round(G[0]-(se&&K/se),2),p.round(G[1]-(se&&re/se),2)]]}h.textPointStyle=function(W,G,X){if(W.size()){var te;if(G.selectedpoints){var D=h.makeSelectedTextStyleFns(G);te=D.selectedTextColorFn}var N=G.texttemplate,U=X._fullLayout;W.each(function(Q){var j=p.select(this),J=N?m.extractOption(Q,G,"txt","texttemplate"):m.extractOption(Q,G,"tx","text");if(J||0===J){if(N){var K=G._module.formatLabels,re=K?K(Q,G,U):{},ne={};g(ne,G,Q.i),J=m.texttemplateString(J,re,U._d3locale,ne,Q,G._meta||{})}var oe=Q.tp||G.textposition,pe=O(Q,G),ce=te?te(Q):Q.tc||G.textfont.color;j.call(h.font,Q.tf||G.textfont.family,pe,ce).text(J).call(u.convertToTspans,X).call(M,oe,pe,Q.mrc)}else j.remove()})}},h.selectedTextStyle=function(W,G){if(W.size()&&G.selectedpoints){var X=h.makeSelectedTextStyleFns(G);W.each(function(te){var D=p.select(this),N=X.selectedTextColorFn(te),U=te.tp||G.textposition,Q=O(te,G);t.fill(D,N);var j=n.traceIs(G,"bar-like");M(D,U,Q,te.mrc2||te.mrc,j)})}},h.smoothopen=function(W,G){if(W.length<3)return"M"+W.join("L");var X,te="M"+W[0],D=[];for(X=1;X<W.length-1;X++)D.push(P(W[X-1],W[X],W[X+1],G));for(te+="Q"+D[0][0]+" "+W[1],X=2;X<W.length-1;X++)te+="C"+D[X-2][1]+" "+D[X-1][0]+" "+W[X];return te+"Q"+D[W.length-3][1]+" "+W[W.length-1]},h.smoothclosed=function(W,G){if(W.length<3)return"M"+W.join("L")+"Z";var X,te="M"+W[0],D=W.length-1,N=[P(W[D],W[0],W[1],G)];for(X=1;X<D;X++)N.push(P(W[X-1],W[X],W[X+1],G));for(N.push(P(W[D-1],W[D],W[0],G)),X=1;X<=D;X++)te+="C"+N[X-1][1]+" "+N[X][0]+" "+W[X];return te+"C"+N[D][1]+" "+N[0][0]+" "+W[0]+"Z"};var S={hv:function(W,G){return"H"+p.round(G[0],2)+"V"+p.round(G[1],2)},vh:function(W,G){return"V"+p.round(G[1],2)+"H"+p.round(G[0],2)},hvh:function(W,G){return"H"+p.round((W[0]+G[0])/2,2)+"V"+p.round(G[1],2)+"H"+p.round(G[0],2)},vhv:function(W,G){return"V"+p.round((W[1]+G[1])/2,2)+"H"+p.round(G[0],2)+"V"+p.round(G[1],2)}},E=function(W,G){return"L"+p.round(G[0],2)+","+p.round(G[1],2)};h.steps=function(W){var G=S[W]||E;return function(X){for(var te="M"+p.round(X[0][0],2)+","+p.round(X[0][1],2),D=1;D<X.length;D++)te+=G(X[D-1],X[D]);return te}},h.makeTester=function(){var W=m.ensureSingleById(p.select("body"),"svg","js-plotly-tester",function(X){X.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),G=m.ensureSingle(W,"path","js-reference-point",function(X){X.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});h.tester=W,h.testref=G},h.savedBBoxes={};var R=0;function B(W){var G=W.getAttribute("data-unformatted");if(null!==G)return G+W.getAttribute("data-math")+W.getAttribute("text-anchor")+W.getAttribute("style")}function H(W,G){if(!W)return null;var X=G._context,te=X._exportedPlot?"":X._baseUrl||"";return te?"url('"+te+"#"+W+"')":"url(#"+W+")"}h.bBox=function(W,G,X){var te,D,N;if(X||(X=B(W)),X){if(te=h.savedBBoxes[X])return m.extendFlat({},te)}else if(1===W.childNodes.length){var U=W.childNodes[0];if(X=B(U)){var Q=+U.getAttribute("x")||0,j=+U.getAttribute("y")||0,J=U.getAttribute("transform");if(!J){var K=h.bBox(U,!1,X);return Q&&(K.left+=Q,K.right+=Q),j&&(K.top+=j,K.bottom+=j),K}if(te=h.savedBBoxes[X+="~"+Q+"~"+j+"~"+J])return m.extendFlat({},te)}}G?D=W:(N=h.tester.node(),D=W.cloneNode(!0),N.appendChild(D)),p.select(D).attr("transform",null).call(u.positionText,0,0);var re=D.getBoundingClientRect(),ne=h.testref.node().getBoundingClientRect();G||N.removeChild(D);var se={height:re.height,width:re.width,left:re.left-ne.left,top:re.top-ne.top,right:re.right-ne.left,bottom:re.bottom-ne.top};return R>=1e4&&(h.savedBBoxes={},R=0),X&&(h.savedBBoxes[X]=se),R++,m.extendFlat({},se)},h.setClipUrl=function(W,G,X){W.attr("clip-path",H(G,X))},h.getTranslate=function(W){var G=(W[W.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(X,te,D){return[te,D].join(" ")}).split(" ");return{x:+G[0]||0,y:+G[1]||0}},h.setTranslate=function(W,G,X){var D=W.attr?"attr":"setAttribute",N=W[W.attr?"attr":"getAttribute"]("transform")||"";return G=G||0,X=X||0,N=N.replace(/(\btranslate\(.*?\);?)/,"").trim(),N=(N+=r(G,X)).trim(),W[D]("transform",N),N},h.getScale=function(W){var G=(W[W.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(X,te,D){return[te,D].join(" ")}).split(" ");return{x:+G[0]||1,y:+G[1]||1}},h.setScale=function(W,G,X){var D=W.attr?"attr":"setAttribute",N=W[W.attr?"attr":"getAttribute"]("transform")||"";return G=G||1,X=X||1,N=N.replace(/(\bscale\(.*?\);?)/,"").trim(),N=(N+="scale("+G+","+X+")").trim(),W[D]("transform",N),N};var V=/\s*sc.*/;h.setPointGroupScale=function(W,G,X){if(G=G||1,X=X||1,W){var te=1===G&&1===X?"":"scale("+G+","+X+")";W.each(function(){var D=(this.getAttribute("transform")||"").replace(V,"");D=(D+=te).trim(),this.setAttribute("transform",D)})}};var Z=/translate\([^)]*\)\s*$/;h.setTextPointsScale=function(W,G,X){W&&W.each(function(){var te,D=p.select(this),N=D.select("text");if(N.node()){var U=parseFloat(N.attr("x")||0),Q=parseFloat(N.attr("y")||0),j=(D.attr("transform")||"").match(Z);te=1===G&&1===X?[]:[r(U,Q),"scale("+G+","+X+")",r(-U,-Q)],j&&te.push(j),D.attr("transform",te.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":942,"../../traces/scatter/subtypes":950,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(y,$,ee){"use strict";var p=y("@plotly/d3");$.exports={circle:{n:0,f:function(m){var b=p.round(m,2);return"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"}},square:{n:1,f:function(m){var b=p.round(m,2);return"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"}},diamond:{n:2,f:function(m){var b=p.round(1.3*m,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"Z"}},cross:{n:3,f:function(m){var b=p.round(.4*m,2),v=p.round(1.2*m,2);return"M"+v+","+b+"H"+b+"V"+v+"H-"+b+"V"+b+"H-"+v+"V-"+b+"H-"+b+"V-"+v+"H"+b+"V-"+b+"H"+v+"Z"}},x:{n:4,f:function(m){var b=p.round(.8*m/Math.sqrt(2),2),v="l"+b+","+b,e="l"+b+",-"+b,n="l-"+b+",-"+b,t="l-"+b+","+b;return"M0,"+b+v+e+n+e+n+t+n+t+v+t+v+"Z"}},"triangle-up":{n:5,f:function(m){var b=p.round(2*m/Math.sqrt(3),2);return"M-"+b+","+p.round(m/2,2)+"H"+b+"L0,-"+p.round(m,2)+"Z"}},"triangle-down":{n:6,f:function(m){var b=p.round(2*m/Math.sqrt(3),2);return"M-"+b+",-"+p.round(m/2,2)+"H"+b+"L0,"+p.round(m,2)+"Z"}},"triangle-left":{n:7,f:function(m){var b=p.round(2*m/Math.sqrt(3),2);return"M"+p.round(m/2,2)+",-"+b+"V"+b+"L-"+p.round(m,2)+",0Z"}},"triangle-right":{n:8,f:function(m){var b=p.round(2*m/Math.sqrt(3),2);return"M-"+p.round(m/2,2)+",-"+b+"V"+b+"L"+p.round(m,2)+",0Z"}},"triangle-ne":{n:9,f:function(m){var b=p.round(.6*m,2),v=p.round(1.2*m,2);return"M-"+v+",-"+b+"H"+b+"V"+v+"Z"}},"triangle-se":{n:10,f:function(m){var b=p.round(.6*m,2),v=p.round(1.2*m,2);return"M"+b+",-"+v+"V"+b+"H-"+v+"Z"}},"triangle-sw":{n:11,f:function(m){var b=p.round(.6*m,2),v=p.round(1.2*m,2);return"M"+v+","+b+"H-"+b+"V-"+v+"Z"}},"triangle-nw":{n:12,f:function(m){var b=p.round(.6*m,2),v=p.round(1.2*m,2);return"M-"+b+","+v+"V-"+b+"H"+v+"Z"}},pentagon:{n:13,f:function(m){var b=p.round(.951*m,2),v=p.round(.588*m,2),e=p.round(-m,2),n=p.round(-.309*m,2);return"M"+b+","+n+"L"+v+","+p.round(.809*m,2)+"H-"+v+"L-"+b+","+n+"L0,"+e+"Z"}},hexagon:{n:14,f:function(m){var b=p.round(m,2),v=p.round(m/2,2),e=p.round(m*Math.sqrt(3)/2,2);return"M"+e+",-"+v+"V"+v+"L0,"+b+"L-"+e+","+v+"V-"+v+"L0,-"+b+"Z"}},hexagon2:{n:15,f:function(m){var b=p.round(m,2),v=p.round(m/2,2),e=p.round(m*Math.sqrt(3)/2,2);return"M-"+v+","+e+"H"+v+"L"+b+",0L"+v+",-"+e+"H-"+v+"L-"+b+",0Z"}},octagon:{n:16,f:function(m){var b=p.round(.924*m,2),v=p.round(.383*m,2);return"M-"+v+",-"+b+"H"+v+"L"+b+",-"+v+"V"+v+"L"+v+","+b+"H-"+v+"L-"+b+","+v+"V-"+v+"Z"}},star:{n:17,f:function(m){var b=1.4*m,v=p.round(.225*b,2),e=p.round(.951*b,2),n=p.round(.363*b,2),t=p.round(.588*b,2),a=p.round(-b,2),r=p.round(-.309*b,2),u=p.round(.118*b,2),s=p.round(.809*b,2);return"M"+v+","+r+"H"+e+"L"+n+","+u+"L"+t+","+s+"L0,"+p.round(.382*b,2)+"L-"+t+","+s+"L-"+n+","+u+"L-"+e+","+r+"H-"+v+"L0,"+a+"Z"}},hexagram:{n:18,f:function(m){var b=p.round(.66*m,2),v=p.round(.38*m,2),e=p.round(.76*m,2);return"M-"+e+",0l-"+v+",-"+b+"h"+e+"l"+v+",-"+b+"l"+v+","+b+"h"+e+"l-"+v+","+b+"l"+v+","+b+"h-"+e+"l-"+v+","+b+"l-"+v+",-"+b+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(m){var b=p.round(m*Math.sqrt(3)*.8,2),v=p.round(.8*m,2),e=p.round(1.6*m,2),n=p.round(4*m,2),t="A "+n+","+n+" 0 0 1 ";return"M-"+b+","+v+t+b+","+v+t+"0,-"+e+t+"-"+b+","+v+"Z"}},"star-triangle-down":{n:20,f:function(m){var b=p.round(m*Math.sqrt(3)*.8,2),v=p.round(.8*m,2),e=p.round(1.6*m,2),n=p.round(4*m,2),t="A "+n+","+n+" 0 0 1 ";return"M"+b+",-"+v+t+"-"+b+",-"+v+t+"0,"+e+t+b+",-"+v+"Z"}},"star-square":{n:21,f:function(m){var b=p.round(1.1*m,2),v=p.round(2*m,2),e="A "+v+","+v+" 0 0 1 ";return"M-"+b+",-"+b+e+"-"+b+","+b+e+b+","+b+e+b+",-"+b+e+"-"+b+",-"+b+"Z"}},"star-diamond":{n:22,f:function(m){var b=p.round(1.4*m,2),v=p.round(1.9*m,2),e="A "+v+","+v+" 0 0 1 ";return"M-"+b+",0"+e+"0,"+b+e+b+",0"+e+"0,-"+b+e+"-"+b+",0Z"}},"diamond-tall":{n:23,f:function(m){var b=p.round(.7*m,2),v=p.round(1.4*m,2);return"M0,"+v+"L"+b+",0L0,-"+v+"L-"+b+",0Z"}},"diamond-wide":{n:24,f:function(m){var b=p.round(1.4*m,2),v=p.round(.7*m,2);return"M0,"+v+"L"+b+",0L0,-"+v+"L-"+b+",0Z"}},hourglass:{n:25,f:function(m){var b=p.round(m,2);return"M"+b+","+b+"H-"+b+"L"+b+",-"+b+"H-"+b+"Z"},noDot:!0},bowtie:{n:26,f:function(m){var b=p.round(m,2);return"M"+b+","+b+"V-"+b+"L-"+b+","+b+"V-"+b+"Z"},noDot:!0},"circle-cross":{n:27,f:function(m){var b=p.round(m,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(m){var b=p.round(m,2),v=p.round(m/Math.sqrt(2),2);return"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v+"M"+b+",0A"+b+","+b+" 0 1,1 0,-"+b+"A"+b+","+b+" 0 0,1 "+b+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(m){var b=p.round(m,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(m){var b=p.round(m,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+b+","+b+"H-"+b+"V-"+b+"H"+b+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(m){var b=p.round(1.3*m,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM0,-"+b+"V"+b+"M-"+b+",0H"+b},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(m){var b=p.round(1.3*m,2),v=p.round(.65*m,2);return"M"+b+",0L0,"+b+"L-"+b+",0L0,-"+b+"ZM-"+v+",-"+v+"L"+v+","+v+"M-"+v+","+v+"L"+v+",-"+v},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(m){var b=p.round(1.4*m,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(m){var b=p.round(m,2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(m){var b=p.round(1.2*m,2),v=p.round(.85*m,2);return"M0,"+b+"V-"+b+"M"+b+",0H-"+b+"M"+v+","+v+"L-"+v+",-"+v+"M"+v+",-"+v+"L-"+v+","+v},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(m){var b=p.round(m/2,2),v=p.round(m,2);return"M"+b+","+v+"V-"+v+"m-"+v+",0V"+v+"M"+v+","+b+"H-"+v+"m0,-"+v+"H"+v},needLine:!0,noFill:!0},"y-up":{n:37,f:function(m){var b=p.round(1.2*m,2),v=p.round(1.6*m,2),e=p.round(.8*m,2);return"M-"+b+","+e+"L0,0M"+b+","+e+"L0,0M0,-"+v+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(m){var b=p.round(1.2*m,2),v=p.round(1.6*m,2),e=p.round(.8*m,2);return"M-"+b+",-"+e+"L0,0M"+b+",-"+e+"L0,0M0,"+v+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(m){var b=p.round(1.2*m,2),v=p.round(1.6*m,2),e=p.round(.8*m,2);return"M"+e+","+b+"L0,0M"+e+",-"+b+"L0,0M-"+v+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(m){var b=p.round(1.2*m,2),v=p.round(1.6*m,2),e=p.round(.8*m,2);return"M-"+e+","+b+"L0,0M-"+e+",-"+b+"L0,0M"+v+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(m){var b=p.round(1.4*m,2);return"M"+b+",0H-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(m){var b=p.round(1.4*m,2);return"M0,"+b+"V-"+b},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(m){var b=p.round(m,2);return"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(m){var b=p.round(m,2);return"M"+b+","+b+"L-"+b+",-"+b},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(m){var b=p.round(m,2);return"M0,0L-"+b+","+p.round(2*m,2)+"H"+b+"Z"},noDot:!0},"arrow-down":{n:46,f:function(m){var b=p.round(m,2);return"M0,0L-"+b+",-"+p.round(2*m,2)+"H"+b+"Z"},noDot:!0},"arrow-left":{n:47,f:function(m){var b=p.round(2*m,2),v=p.round(m,2);return"M0,0L"+b+",-"+v+"V"+v+"Z"},noDot:!0},"arrow-right":{n:48,f:function(m){var b=p.round(2*m,2),v=p.round(m,2);return"M0,0L-"+b+",-"+v+"V"+v+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(m){var b=p.round(m,2);return"M-"+b+",0H"+b+"M0,0L-"+b+","+p.round(2*m,2)+"H"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(m){var b=p.round(m,2);return"M-"+b+",0H"+b+"M0,0L-"+b+",-"+p.round(2*m,2)+"H"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(m){var b=p.round(2*m,2),v=p.round(m,2);return"M0,-"+v+"V"+v+"M0,0L"+b+",-"+v+"V"+v+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(m){var b=p.round(2*m,2),v=p.round(m,2);return"M0,-"+v+"V"+v+"M0,0L-"+b+",-"+v+"V"+v+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(y,$,ee){"use strict";$.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../registry"),b=y("../../plots/cartesian/axes"),v=y("../../lib"),e=y("./compute_error");function n(t,a,r,u){var s=a["error_"+u]||{},i=[];if(s.visible&&-1!==["linear","log"].indexOf(r.type)){for(var l=e(s),c=0;c<t.length;c++){var f=t[c],g=f.i;if(void 0===g)g=c;else if(null===g)continue;var h=f[u];if(p(r.c2l(h))){var o=l(h,g);if(p(o[0])&&p(o[1])){var x=f[u+"s"]=h-o[0],d=f[u+"h"]=h+o[1];i.push(x,d)}}}var _=a._extremes[r._id],T=b.findExtremes(r,i,v.extendFlat({tozero:_.opts.tozero},{padded:!0}));_.min=_.min.concat(T.min),_.max=_.max.concat(T.max)}}$.exports=function(t){for(var a=t.calcdata,r=0;r<a.length;r++){var u=a[r],s=u[0].trace;if(!0===s.visible&&m.traceIs(s,"errorBarsOK")){var i=b.getFromId(t,s.xaxis),l=b.getFromId(t,s.yaxis);n(u,s,i,"x"),n(u,s,l,"y")}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(y,$,ee){"use strict";function p(m,b){return"percent"===m?function(v){return Math.abs(v*b/100)}:"constant"===m?function(){return Math.abs(b)}:"sqrt"===m?function(v){return Math.sqrt(Math.abs(v))}:void 0}$.exports=function(m){var b=m.type,v=m.symmetric;if("data"===b){var e=m.array||[];if(v)return function(r,u){var s=+e[u];return[s,s]};var n=m.arrayminus||[];return function(r,u){var s=+e[u],i=+n[u];return isNaN(s)&&isNaN(i)?[NaN,NaN]:[i||0,s||0]}}var t=p(b,m.value),a=p(b,m.valueminus);return v||void 0===m.valueminus?function(r){var u=t(r);return[u,u]}:function(r){return[a(r),t(r)]}}},{}],393:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../registry"),b=y("../../lib"),v=y("../../plot_api/plot_template"),e=y("./attributes");$.exports=function(n,t,a,r){var u="error_"+r.axis,s=v.newContainer(t,u),i=n[u]||{};function l(h,o){return b.coerce(i,s,e,h,o)}if(!1!==l("visible",void 0!==i.array||void 0!==i.value||"sqrt"===i.type)){var c=l("type","array"in i?"data":"percent"),f=!0;"sqrt"!==c&&(f=l("symmetric",!(("data"===c?"arrayminus":"valueminus")in i))),"data"===c?(l("array"),l("traceref"),f||(l("arrayminus"),l("tracerefminus"))):"percent"!==c&&"constant"!==c||(l("value"),f||l("valueminus"));var g="copy_"+r.inherit+"style";r.inherit&&(t["error_"+r.inherit]||{}).visible&&l(g,!(i.color||p(i.thickness)||p(i.width))),r.inherit&&s[g]||(l("color",a),l("thickness"),l("width",m.traceIs(t,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plot_api/edit_types").overrideAll,b=y("./attributes"),v={error_x:p.extendFlat({},b),error_y:p.extendFlat({},b)};delete v.error_x.copy_zstyle,delete v.error_y.copy_zstyle,delete v.error_y.copy_ystyle;var e={error_x:p.extendFlat({},b),error_y:p.extendFlat({},b),error_z:p.extendFlat({},b)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,$.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:v,bar:v,histogram:v,scatter3d:m(e,"calc","nested"),scattergl:m(v,"calc","nested")}},supplyDefaults:y("./defaults"),calc:y("./calc"),makeComputeError:y("./compute_error"),plot:y("./plot"),style:y("./style"),hoverInfo:function(n,t,a){(t.error_y||{}).visible&&(a.yerr=n.yh-n.y,t.error_y.symmetric||(a.yerrneg=n.y-n.ys)),(t.error_x||{}).visible&&(a.xerr=n.xh-n.x,t.error_x.symmetric||(a.xerrneg=n.x-n.xs))}}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("fast-isnumeric"),b=y("../drawing"),v=y("../../traces/scatter/subtypes");$.exports=function(e,n,t,a){var r=t.xaxis,u=t.yaxis,s=a&&a.duration>0;n.each(function(i){var l,c=i[0].trace,f=c.error_x||{},g=c.error_y||{};c.ids&&(l=function(d){return d.id});var h=v.hasMarkers(c)&&c.marker.maxdisplayed>0;g.visible||f.visible||(i=[]);var o=p.select(this).selectAll("g.errorbar").data(i,l);if(o.exit().remove(),i.length){f.visible||o.selectAll("path.xerror").remove(),g.visible||o.selectAll("path.yerror").remove(),o.style("opacity",1);var x=o.enter().append("g").classed("errorbar",!0);s&&x.style("opacity",0).transition().duration(a.duration).style("opacity",1),b.setClipUrl(o,t.layerClipId,e),o.each(function(d){var P,S,E,R,w=p.select(this),_=(E=u,R={x:(S=r).c2p((P=d).x),y:E.c2p(P.y)},void 0!==P.yh&&(R.yh=E.c2p(P.yh),R.ys=E.c2p(P.ys),m(R.ys)||(R.noYS=!0,R.ys=E.c2p(P.ys,!0))),void 0!==P.xh&&(R.xh=S.c2p(P.xh),R.xs=S.c2p(P.xs),m(R.xs)||(R.noXS=!0,R.xs=S.c2p(P.xs,!0))),R);if(!h||d.vis){var T,k=w.select("path.yerror");if(g.visible&&m(_.x)&&m(_.yh)&&m(_.ys)){var L=g.width;T="M"+(_.x-L)+","+_.yh+"h"+2*L+"m-"+L+",0V"+_.ys,_.noYS||(T+="m-"+L+",0h"+2*L),k.size()?s&&(k=k.transition().duration(a.duration).ease(a.easing)):k=w.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),k.attr("d",T)}else k.remove();var M=w.select("path.xerror");if(f.visible&&m(_.y)&&m(_.xh)&&m(_.xs)){var O=(f.copy_ystyle?g:f).width;T="M"+_.xh+","+(_.y-O)+"v"+2*O+"m0,-"+O+"H"+_.xs,_.noXS||(T+="m0,-"+O+"v"+2*O),M.size()?s&&(M=M.transition().duration(a.duration).ease(a.easing)):M=w.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),M.attr("d",T)}else M.remove()}})}})}},{"../../traces/scatter/subtypes":950,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../color");$.exports=function(b){b.each(function(v){var e=v[0].trace,n=e.error_y||{},t=e.error_x||{},a=p.select(this);a.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(m.stroke,n.color),t.copy_ystyle&&(t=n),a.selectAll("path.xerror").style("stroke-width",t.thickness+"px").call(m.stroke,t.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(y,$,ee){"use strict";var p=y("../../plots/font_attributes"),m=y("./layout_attributes").hoverlabel,b=y("../../lib/extend").extendFlat;$.exports={hoverlabel:{bgcolor:b({},m.bgcolor,{arrayOk:!0}),bordercolor:b({},m.bordercolor,{arrayOk:!0}),font:p({arrayOk:!0,editType:"none"}),align:b({},m.align,{arrayOk:!0}),namelength:b({},m.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../registry");function b(v,e,n,t){t=t||p.identity,Array.isArray(v)&&(e[0][n]=t(v))}$.exports=function(v){var e=v.calcdata,n=v._fullLayout;function t(i){return function(l){return p.coerceHoverinfo({hoverinfo:l},{_module:i._module},n)}}for(var a=0;a<e.length;a++){var r=e[a],u=r[0].trace;if(!m.traceIs(u,"pie-like")){var s=m.traceIs(u,"2dMap")?b:p.fillArray;s(u.hoverinfo,r,"hi",t(u)),u.hovertemplate&&s(u.hovertemplate,r,"ht"),u.hoverlabel&&(s(u.hoverlabel.bgcolor,r,"hbg"),s(u.hoverlabel.bordercolor,r,"hbc"),s(u.hoverlabel.font.size,r,"hts"),s(u.hoverlabel.font.color,r,"htc"),s(u.hoverlabel.font.family,r,"htf"),s(u.hoverlabel.namelength,r,"hnl"),s(u.hoverlabel.align,r,"hta"))}}}},{"../../lib":503,"../../registry":638}],399:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("./hover").hover;$.exports=function(b,v,e){var n=p.getComponentMethod("annotations","onClick")(b,b._hoverdata);function t(){b.emit("plotly_click",{points:b._hoverdata,event:v})}void 0!==e&&m(b,v,e,!0),b._hoverdata&&v&&v.target&&(n&&n.then?n.then(t):t(),v.stopImmediatePropagation&&v.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(y,$,ee){"use strict";$.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./attributes"),b=y("./hoverlabel_defaults");$.exports=function(v,e,n,t){var a=p.extendFlat({},t.hoverlabel);e.hovertemplate&&(a.namelength=-1),b(v,e,function(r,u){return p.coerce(v,e,m,r,u)},a)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(y,$,ee){"use strict";var p=y("../../lib");ee.getSubplot=function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},ee.isTraceInSubplots=function(t,a){if("splom"===t.type){for(var r=t.xaxes||[],u=t.yaxes||[],s=0;s<r.length;s++)for(var i=0;i<u.length;i++)if(-1!==a.indexOf(r[s]+u[i]))return!0;return!1}return-1!==a.indexOf(ee.getSubplot(t))},ee.flat=function(t,a){for(var r=new Array(t.length),u=0;u<t.length;u++)r[u]=a;return r},ee.p2c=function(t,a){for(var r=new Array(t.length),u=0;u<t.length;u++)r[u]=t[u].p2c(a);return r},ee.getDistanceFunction=function(t,a,r,u){return"closest"===t?u||ee.quadrature(a,r):"x"===t.charAt(0)?a:r},ee.getClosest=function(t,a,r){if(!1!==r.index)r.index>=0&&r.index<t.length?r.distance=0:r.index=!1;else for(var u=0;u<t.length;u++){var s=a(t[u]);s<=r.distance&&(r.index=u,r.distance=s)}return r},ee.inbox=function(t,a,r){return t*a<0||0===t?r:1/0},ee.quadrature=function(t,a){return function(r){var u=t(r),s=a(r);return Math.sqrt(u*u+s*s)}},ee.makeEventData=function(t,a,r){var u="index"in t?t.index:t.pointNumber,s={data:a._input,fullData:a,curveNumber:a.index,pointNumber:u};if(a._indexToPoints){var i=a._indexToPoints[u];1===i.length?s.pointIndex=i[0]:s.pointIndices=i}else s.pointIndex=u;return a._module.eventData?s=a._module.eventData(s,t,a,r,u):("xVal"in t?s.x=t.xVal:"x"in t&&(s.x=t.x),"yVal"in t?s.y=t.yVal:"y"in t&&(s.y=t.y),t.xa&&(s.xaxis=t.xa),t.ya&&(s.yaxis=t.ya),void 0!==t.zLabelVal&&(s.z=t.zLabelVal)),ee.appendArrayPointValue(s,a,u),s},ee.appendArrayPointValue=function(t,a,r){var u=a._arrayAttrs;if(u)for(var s=0;s<u.length;s++){var i=u[s],l=b(i);if(void 0===t[l]){var c=v(p.nestedProperty(a,i).get(),r);void 0!==c&&(t[l]=c)}}},ee.appendArrayMultiPointValues=function(t,a,r){var u=a._arrayAttrs;if(u)for(var s=0;s<u.length;s++){var i=u[s],l=b(i);if(void 0===t[l]){for(var c=p.nestedProperty(a,i).get(),f=new Array(r.length),g=0;g<r.length;g++)f[g]=v(c,r[g]);t[l]=f}}};var m={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function b(t){return m[t]||t}function v(t,a){return Array.isArray(a)?Array.isArray(t)&&Array.isArray(t[a[0]])?t[a[0]][a[1]]:void 0:t[a]}var e={x:!0,y:!0},n={"x unified":!0,"y unified":!0};ee.isUnifiedHover=function(t){return"string"==typeof t&&!!n[t]},ee.isXYhover=function(t){return"string"==typeof t&&!!e[t]}},{"../../lib":503}],403:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("fast-isnumeric"),b=y("tinycolor2"),v=y("../../lib"),e=v.strTranslate,n=v.strRotate,t=y("../../lib/events"),a=y("../../lib/svg_text_utils"),r=y("../../lib/override_cursor"),u=y("../drawing"),s=y("../color"),i=y("../dragelement"),l=y("../../plots/cartesian/axes"),c=y("../../registry"),f=y("./helpers"),g=y("./constants"),h=y("../legend/defaults"),o=y("../legend/draw"),x=g.YANGLE,d=Math.PI*x/180,w=1/Math.sin(d),_=Math.cos(d),T=Math.sin(d),k=g.HOVERARROWSIZE,L=g.HOVERTEXTPAD,M={box:!0,ohlc:!0,violin:!0,candlestick:!0},O={scatter:!0,scattergl:!0,splom:!0};function P(N){return[N.trace.index,N.index,N.x0,N.y0,N.name,N.attr,N.xa?N.xa._id:"",N.ya?N.ya._id:""].join(",")}ee.hover=function(N,U,Q,j){N=v.getGraphDiv(N);var J=U.target;v.throttle(N._fullLayout._uid+g.HOVERID,g.HOVERMINTIME,function(){!function(K,re,ne,se,oe){ne||(ne="xy");var pe=Array.isArray(ne)?ne:[ne],ce=K._fullLayout,ge=ce._plots||[],xe=ge[ne],we=ce._has("cartesian");if(xe){var be=xe.overlays.map(function(zr){return zr.id});pe=pe.concat(be)}for(var Se=pe.length,fe=new Array(Se),me=new Array(Se),Te=!1,_e=0;_e<Se;_e++){var Me=pe[_e];if(ge[Me])Te=!0,fe[_e]=ge[Me].xaxis,me[_e]=ge[Me].yaxis;else{if(!ce[Me]||!ce[Me]._subplot)return void v.warn("Unrecognized subplot: "+Me);var Ie=ce[Me]._subplot;fe[_e]=Ie.xaxis,me[_e]=Ie.yaxis}}var ze=re.hovermode||ce.hovermode;if(ze&&!Te&&(ze="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(ze)||!K.calcdata||K.querySelector(".zoombox")||K._dragging)return i.unhoverRaw(K,re);var Ve=ce.hoverdistance;-1===Ve&&(Ve=1/0);var Je=ce.spikedistance;-1===Je&&(Je=1/0);var De,Be,Ze,Ye,tt,st,vt,Pt,Mt,rt,et,bt,Rt,Yt=[],Fe=[],He={hLinePoint:null,vLinePoint:null},Oe=!1;if(Array.isArray(re))for(ze="array",Ze=0;Ze<re.length;Ze++)(tt=K.calcdata[re[Ze].curveNumber||0])&&(st=tt[0].trace,"skip"!==tt[0].trace.hoverinfo&&(Fe.push(tt),"h"===st.orientation&&(Oe=!0)));else{for(Ye=0;Ye<K.calcdata.length;Ye++)"skip"!==(st=(tt=K.calcdata[Ye])[0].trace).hoverinfo&&f.isTraceInSubplots(st,pe)&&(Fe.push(tt),"h"===st.orientation&&(Oe=!0));var $e,ke;if(oe){if(!1===t.triggerHandler(K,"plotly_beforehover",re))return;var Le=oe.getBoundingClientRect();$e=re.clientX-Le.left,ke=re.clientY-Le.top,ce._calcInverseTransform(K);var Pe=v.apply3DTransform(ce._invTransform)($e,ke);if(ke=Pe[1],($e=Pe[0])<0||$e>fe[0]._length||ke<0||ke>me[0]._length)return i.unhoverRaw(K,re)}else $e="xpx"in re?re.xpx:fe[0]._length/2,ke="ypx"in re?re.ypx:me[0]._length/2;if(re.pointerX=$e+fe[0]._offset,re.pointerY=ke+me[0]._offset,De="xval"in re?f.flat(pe,re.xval):f.p2c(fe,$e),Be="yval"in re?f.flat(pe,re.yval):f.p2c(me,ke),!m(De[0])||!m(Be[0]))return v.warn("Fx.hover failed",re,K),i.unhoverRaw(K,re)}var Ce=1/0;function Xe(zr,sn){for(Ye=0;Ye<Fe.length;Ye++)if((tt=Fe[Ye])&&tt[0]&&tt[0].trace&&!0===(st=tt[0].trace).visible&&0!==st._length&&-1===["carpet","contourcarpet"].indexOf(st._module.name)){if("splom"===st.type?vt=pe[Pt=0]:(vt=f.getSubplot(st),Pt=pe.indexOf(vt)),f.isUnifiedHover(Mt=ze)&&(Mt=Mt.charAt(0)),bt={cd:tt,trace:st,xa:fe[Pt],ya:me[Pt],maxHoverDistance:Ve,maxSpikeDistance:Je,index:!1,distance:Math.min(Ce,Ve),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:st.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ce[vt]&&(bt.subplot=ce[vt]._subplot),ce._splomScenes&&ce._splomScenes[st.uid]&&(bt.scene=ce._splomScenes[st.uid]),Rt=Yt.length,"array"===Mt){var Mn=re[Ye];"pointNumber"in Mn?(bt.index=Mn.pointNumber,Mt="closest"):(Mt="","xval"in Mn&&(rt=Mn.xval,Mt="x"),"yval"in Mn&&(et=Mn.yval,Mt=Mt?"closest":"y"))}else void 0!==zr&&void 0!==sn?(rt=zr,et=sn):(rt=De[Pt],et=Be[Pt]);if(0!==Ve)if(st._module&&st._module.hoverPoints){var Tn=st._module.hoverPoints(bt,rt,et,Mt,{finiteRange:!0,hoverLayer:ce._hoverlayer});if(Tn)for(var Rn,$t=0;$t<Tn.length;$t++)m((Rn=Tn[$t]).x0)&&m(Rn.y0)&&Yt.push(H(Rn,ze))}else v.log("Unrecognized trace type in hover:",st);if("closest"===ze&&Yt.length>Rt&&(Yt.splice(0,Rt),Ce=Yt[0].distance),we&&0!==Je&&0===Yt.length){bt.distance=Je,bt.index=!1;var Ct=st._module.hoverPoints(bt,rt,et,"closest",{hoverLayer:ce._hoverlayer});if(Ct&&(Ct=Ct.filter(function(br){return br.spikeDistance<=Je})),Ct&&Ct.length){var Ut,lr=Ct.filter(function(br){return br.xa.showspikes&&"hovered data"!==br.xa.spikesnap});if(lr.length){var _r=lr[0];m(_r.x0)&&m(_r.y0)&&(Ut=pt(_r),(!He.vLinePoint||He.vLinePoint.spikeDistance>Ut.spikeDistance)&&(He.vLinePoint=Ut))}var qr=Ct.filter(function(br){return br.ya.showspikes&&"hovered data"!==br.ya.spikesnap});if(qr.length){var Vr=qr[0];m(Vr.x0)&&m(Vr.y0)&&(Ut=pt(Vr),(!He.hLinePoint||He.hLinePoint.spikeDistance>Ut.spikeDistance)&&(He.hLinePoint=Ut))}}}}}function at(zr,sn,Mn){for(var Tn,Rn=null,$t=1/0,Ct=0;Ct<zr.length;Ct++)Tn=zr[Ct].spikeDistance,Mn&&0===Ct&&(Tn=-1/0),Tn<=$t&&Tn<=sn&&(Rn=zr[Ct],$t=Tn);return Rn}function pt(zr){return zr?{xa:zr.xa,ya:zr.ya,x:void 0!==zr.xSpike?zr.xSpike:(zr.x0+zr.x1)/2,y:void 0!==zr.ySpike?zr.ySpike:(zr.y0+zr.y1)/2,distance:zr.distance,spikeDistance:zr.spikeDistance,curveNumber:zr.trace.index,color:zr.color,pointNumber:zr.index}:null}Xe();var ut={fullLayout:ce,container:ce._hoverlayer,event:re},St=K._spikepoints;K._spikepoints={vLinePoint:He.vLinePoint,hLinePoint:He.hLinePoint};var Et=function(){Yt.sort(function(zr,sn){return zr.distance-sn.distance}),Yt=function(zr,sn){for(var Mn=sn.charAt(0),Tn=[],Rn=[],$t=[],Ct=0;Ct<zr.length;Ct++){var Ut=zr[Ct];c.traceIs(Ut.trace,"bar-like")||c.traceIs(Ut.trace,"box-violin")?$t.push(Ut):Ut.trace[Mn+"period"]?Rn.push(Ut):Tn.push(Ut)}return Tn.concat(Rn).concat($t)}(Yt,ze)};Et();var Lt=ze.charAt(0),Qe=("x"===Lt||"y"===Lt)&&Yt[0]&&O[Yt[0].trace.type];if(we&&0!==Je&&0!==Yt.length){var mt=at(Yt.filter(function(zr){return zr.ya.showspikes}),Je,Qe);He.hLinePoint=pt(mt);var It=at(Yt.filter(function(zr){return zr.xa.showspikes}),Je,Qe);He.vLinePoint=pt(It)}if(0===Yt.length){var jt=i.unhoverRaw(K,re);return!we||null===He.hLinePoint&&null===He.vLinePoint||Z(St)&&V(K,He,ut),jt}if(we&&Z(St)&&V(K,He,ut),f.isXYhover(Mt)&&0!==Yt[0].length&&"splom"!==Yt[0].trace.type){var Zt=Yt[0],Re=(Yt=M[Zt.trace.type]?Yt.filter(function(zr){return zr.trace.index===Zt.trace.index}):[Zt]).length;Xe(G("x",Zt,ce),G("y",Zt,ce));var Dt,Vt=[],nr={},Gt=0,Kt=function(zr){var sn=M[zr.trace.type]?P(zr):zr.trace.index;if(nr[sn]){var Mn=nr[sn]-1,Tn=Vt[Mn];Mn>0&&Math.abs(zr.distance)<Math.abs(Tn.distance)&&(Vt[Mn]=zr)}else Gt++,nr[sn]=Gt,Vt.push(zr)};for(Dt=0;Dt<Re;Dt++)Kt(Yt[Dt]);for(Dt=Yt.length-1;Dt>Re-1;Dt--)Kt(Yt[Dt]);Yt=Vt,Et()}var ir=K._hoverdata,dr=[],hr=X(K),cr=te(K);for(Ze=0;Ze<Yt.length;Ze++){var sr=Yt[Ze],mr=f.makeEventData(sr,sr.trace,sr.cd);if(!1!==sr.hovertemplate){var Ir=!1;sr.cd[sr.index]&&sr.cd[sr.index].ht&&(Ir=sr.cd[sr.index].ht),sr.hovertemplate=Ir||sr.trace.hovertemplate||!1}if(sr.xa&&sr.ya){var vr=sr.x0+sr.xa._offset,Br=sr.x1+sr.xa._offset,Jr=sr.y0+sr.ya._offset,ln=sr.y1+sr.ya._offset,En=Math.min(vr,Br),Cn=Math.max(vr,Br),An=Math.min(Jr,ln),$r=Math.max(Jr,ln);mr.bbox={x0:En+cr,x1:Cn+cr,y0:An+hr,y1:$r+hr}}sr.eventData=[mr],dr.push(mr)}K._hoverdata=dr;var Rr="y"===ze&&(Fe.length>1||Yt.length>1)||"closest"===ze&&Oe&&Yt.length>1,Lr=s.combine(ce.plot_bgcolor||s.background,ce.paper_bgcolor),Qr=E(Yt,{gd:K,hovermode:ze,rotateLabels:Rr,bgColor:Lr,container:ce._hoverlayer,outerContainer:ce._paper.node(),commonLabelOpts:ce.hoverlabel,hoverdistance:ce.hoverdistance});if(f.isUnifiedHover(ze)||(function(zr,sn,Mn){var Tn,Rn,$t,Ct,Ut,lr,_r,qr=0,Vr=1,br=zr.size(),yr=new Array(br),kr=0;function Cr(Nr){var nn=Nr[0],dn=Nr[Nr.length-1];if($t=dn.pos+dn.dp+dn.size-nn.pmax,(Rn=nn.pmin-nn.pos-nn.dp+nn.size)>.01){for(Ut=Nr.length-1;Ut>=0;Ut--)Nr[Ut].dp+=Rn;Tn=!1}if(!($t<.01)){if(Rn<-.01){for(Ut=Nr.length-1;Ut>=0;Ut--)Nr[Ut].dp-=$t;Tn=!1}if(Tn){var wn=0;for(Ct=0;Ct<Nr.length;Ct++)(lr=Nr[Ct]).pos+lr.dp+lr.size>nn.pmax&&wn++;for(Ct=Nr.length-1;Ct>=0&&!(wn<=0);Ct--)(lr=Nr[Ct]).pos>nn.pmax-1&&(lr.del=!0,wn--);for(Ct=0;Ct<Nr.length&&!(wn<=0);Ct++)if((lr=Nr[Ct]).pos<nn.pmin+1)for(lr.del=!0,wn--,$t=2*lr.size,Ut=Nr.length-1;Ut>=0;Ut--)Nr[Ut].dp-=$t;for(Ct=Nr.length-1;Ct>=0&&!(wn<=0);Ct--)(lr=Nr[Ct]).pos+lr.dp+lr.size>nn.pmax&&(lr.del=!0,wn--)}}}for(zr.each(function(Nr){var nn=Nr[sn],dn="x"===nn._id.charAt(0),wn=nn.range;0===kr&&wn&&wn[0]>wn[1]!==dn&&(Vr=-1),yr[kr++]=[{datum:Nr,traceIndex:Nr.trace.index,dp:0,pos:Nr.pos,posref:Nr.posref,size:Nr.by*(dn?w:1)/2,pmin:0,pmax:dn?Mn.width:Mn.height}]}),yr.sort(function(Nr,nn){return Nr[0].posref-nn[0].posref||Vr*(nn[0].traceIndex-Nr[0].traceIndex)});!Tn&&qr<=br;){for(qr++,Tn=!0,Ct=0;Ct<yr.length-1;){var Ar=yr[Ct],Yr=yr[Ct+1],cn=Ar[Ar.length-1],yn=Yr[0];if((Rn=cn.pos+cn.dp+cn.size-yn.pos-yn.dp+yn.size)>.01&&cn.pmin===yn.pmin&&cn.pmax===yn.pmax){for(Ut=Yr.length-1;Ut>=0;Ut--)Yr[Ut].dp+=Rn;for(Ar.push.apply(Ar,Yr),yr.splice(Ct+1,1),_r=0,Ut=Ar.length-1;Ut>=0;Ut--)_r+=Ar[Ut].dp;for($t=_r/Ar.length,Ut=Ar.length-1;Ut>=0;Ut--)Ar[Ut].dp-=$t;Tn=!1}else Ct++}yr.forEach(Cr)}for(Ct=yr.length-1;Ct>=0;Ct--){var Kr=yr[Ct];for(Ut=Kr.length-1;Ut>=0;Ut--){var mn=Kr[Ut],jr=mn.datum;jr.offset=mn.dp,jr.del=mn.del}}}(Qr,Rr?"xa":"ya",ce),B(Qr,Rr,ce._invScaleX,ce._invScaleY)),oe&&oe.tagName){var On=c.getComponentMethod("annotations","hasClickToShow")(K,dr);r(p.select(oe),On?"pointer":"")}!oe||se||!function(zr,sn,Mn){if(!Mn||Mn.length!==zr._hoverdata.length)return!0;for(var Tn=Mn.length-1;Tn>=0;Tn--){var Rn=Mn[Tn],$t=zr._hoverdata[Tn];if(Rn.curveNumber!==$t.curveNumber||String(Rn.pointNumber)!==String($t.pointNumber)||String(Rn.pointNumbers)!==String($t.pointNumbers))return!0}return!1}(K,0,ir)||(ir&&K.emit("plotly_unhover",{event:re,points:ir}),K.emit("plotly_hover",{event:re,points:K._hoverdata,xaxes:fe,yaxes:me,xvals:De,yvals:Be}))}(N,U,Q,j,J)})},ee.loneHover=function(N,U){var Q=!0;Array.isArray(N)||(Q=!1,N=[N]);var j=U.gd,J=X(j),K=te(j),re=E(N.map(function(oe){var pe=oe._x0||oe.x0||oe.x||0,ce=oe._x1||oe.x1||oe.x||0,ge=oe._y0||oe.y0||oe.y||0,xe=oe._y1||oe.y1||oe.y||0,we=oe.eventData;if(we){var be=Math.min(pe,ce),Se=Math.max(pe,ce),fe=Math.min(ge,xe),me=Math.max(ge,xe),Te=oe.trace;if(c.traceIs(Te,"gl3d")){var _e=j._fullLayout[Te.scene]._scene.container,Me=_e.offsetLeft,Ie=_e.offsetTop;be+=Me,Se+=Me,fe+=Ie,me+=Ie}we.bbox={x0:be+K,x1:Se+K,y0:fe+J,y1:me+J},U.inOut_bbox&&U.inOut_bbox.push(we.bbox)}else we=!1;return{color:oe.color||s.defaultLine,x0:oe.x0||oe.x||0,x1:oe.x1||oe.x||0,y0:oe.y0||oe.y||0,y1:oe.y1||oe.y||0,xLabel:oe.xLabel,yLabel:oe.yLabel,zLabel:oe.zLabel,text:oe.text,name:oe.name,idealAlign:oe.idealAlign,borderColor:oe.borderColor,fontFamily:oe.fontFamily,fontSize:oe.fontSize,fontColor:oe.fontColor,nameLength:oe.nameLength,textAlign:oe.textAlign,trace:oe.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:oe.hovertemplate||!1,hovertemplateLabels:oe.hovertemplateLabels||!1,eventData:we}}),{gd:j,hovermode:"closest",rotateLabels:!1,bgColor:U.bgColor||s.background,container:p.select(U.container),outerContainer:U.outerContainer||U.container}),ne=0,se=0;return re.sort(function(oe,pe){return oe.y0-pe.y0}).each(function(oe,pe){var ce=oe.y0-oe.by/2;oe.offset=ce-5<ne?ne-ce+5:0,ne=ce+oe.by+oe.offset,pe===U.anchorIndex&&(se=oe.offset)}).each(function(oe){oe.offset-=se}),B(re,!1,j._fullLayout._invScaleX,j._fullLayout._invScaleY),Q?re:re.node()};var S=/<extra>([\s\S]*)<\/extra>/;function E(N,U){var Q=U.gd,j=Q._fullLayout,J=U.hovermode,K=U.rotateLabels,re=U.bgColor,ne=U.container,se=U.outerContainer,oe=U.commonLabelOpts||{};if(0===N.length)return[[]];var pe=U.fontFamily||g.HOVERFONT,ce=U.fontSize||g.HOVERFONTSIZE,ge=N[0],xe=ge.xa,we=ge.ya,be=J.charAt(0),Se=ge[be+"Label"],fe=D(Q,se),me=fe.top,Te=fe.width,_e=fe.height,Me=void 0!==Se&&ge.distance<=U.hoverdistance&&("x"===J||"y"===J);if(Me){var Ie,ze,Ve=!0;for(Ie=0;Ie<N.length;Ie++)if(Ve&&void 0===N[Ie].zLabel&&(Ve=!1),ze=N[Ie].hoverinfo||N[Ie].trace.hoverinfo){var Je=Array.isArray(ze)?ze:ze.split("+");if(-1===Je.indexOf("all")&&-1===Je.indexOf(J)){Me=!1;break}}Ve&&(Me=!1)}var De=ne.selectAll("g.axistext").data(Me?[0]:[]);if(De.enter().append("g").classed("axistext",!0),De.exit().remove(),De.each(function(){var Qe=p.select(this),mt=v.ensureSingle(Qe,"path","",function(Br){Br.style({"stroke-width":"1px"})}),It=v.ensureSingle(Qe,"text","",function(Br){Br.attr("data-notex",1)}),jt=oe.bgcolor||s.defaultLine,Zt=oe.bordercolor||s.contrast(jt),Re=s.contrast(jt),lt={family:oe.font.family||pe,size:oe.font.size||ce,color:oe.font.color||Re};mt.style({fill:jt,stroke:Zt}),It.text(Se).call(u.font,lt).call(a.positionText,0,0).call(a.convertToTspans,Q),Qe.attr("transform","");var _t,Dt,Vt=D(Q,It.node());if("x"===J){var nr="top"===xe.side?"-":"";It.attr("text-anchor","middle").call(a.positionText,0,"top"===xe.side?me-Vt.bottom-k-L:me-Vt.top+k+L),Dt=we._offset+("top"===xe.side?0:we._length);var Gt=Vt.width/2+L;(_t=xe._offset+(ge.x0+ge.x1)/2)<Gt?(_t=Gt,mt.attr("d","M-"+(Gt-k)+",0L-"+(Gt-2*k)+","+nr+k+"H"+(L+Vt.width/2)+"v"+nr+(2*L+Vt.height)+"H-"+Gt+"V"+nr+k+"Z")):_t>j.width-Gt?(_t=j.width-Gt,mt.attr("d","M"+(Gt-k)+",0L"+Gt+","+nr+k+"v"+nr+(2*L+Vt.height)+"H-"+Gt+"V"+nr+k+"H"+(Gt-2*k)+"Z")):mt.attr("d","M0,0L"+k+","+nr+k+"H"+(L+Vt.width/2)+"v"+nr+(2*L+Vt.height)+"H-"+(L+Vt.width/2)+"V"+nr+k+"H-"+k+"Z")}else{var Kt,ir,dr;"right"===we.side?(Kt="start",ir=1,dr="",_t=xe._offset+xe._length):(Kt="end",ir=-1,dr="-",_t=xe._offset),Dt=we._offset+(ge.y0+ge.y1)/2,It.attr("text-anchor",Kt),mt.attr("d","M0,0L"+dr+k+","+k+"V"+(L+Vt.height/2)+"h"+dr+(2*L+Vt.width)+"V-"+(L+Vt.height/2)+"H"+dr+k+"V-"+k+"Z");var hr,cr=Vt.height/2,sr=me-Vt.top-cr,mr="clip"+j._uid+"commonlabel"+we._id;if(_t<Vt.width+2*L+k){hr="M-"+(k+L)+"-"+cr+"h-"+(Vt.width-L)+"V"+cr+"h"+(Vt.width-L)+"Z";var Ir=Vt.width-_t+L;a.positionText(It,Ir,sr),"end"===Kt&&It.selectAll("tspan").each(function(){var Br=p.select(this),Jr=u.tester.append("text").text(Br.text()).call(u.font,lt),ln=D(Q,Jr.node());Math.round(ln.width)<Math.round(Vt.width)&&Br.attr("x",Ir-ln.width),Jr.remove()})}else a.positionText(It,ir*(L+k),sr),hr=null;var vr=j._topclips.selectAll("#"+mr).data(hr?[0]:[]);vr.enter().append("clipPath").attr("id",mr).append("path"),vr.exit().remove(),vr.select("path").attr("d",hr),u.setClipUrl(It,hr?mr:null,Q)}Qe.attr("transform",e(_t,Dt))}),f.isUnifiedHover(J)){ne.selectAll("g.hovertext").remove();var Be=N.filter(function(Qe){return"none"!==Qe.hoverinfo});if(0===Be.length)return;var Ze=j.hoverlabel,Ye=Ze.font,st={};h({showlegend:!0,legend:{title:{text:Se,font:Ye},font:Ye,bgcolor:Ze.bgcolor,bordercolor:Ze.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:j.legend?j.legend.traceorder:void 0,orientation:"v"}},st,Q._fullData);var vt=st.legend;vt.entries=[];for(var Pt=0;Pt<Be.length;Pt++){var Mt=Be[Pt];if("none"!==Mt.hoverinfo){var rt=R(Mt,!0,J,j,Se),et=rt[0],bt=rt[1];Mt.name=bt,Mt.text=""!==bt?bt+" : "+et:et;var Rt=Mt.cd[Mt.index];Rt&&(Rt.mc&&(Mt.mc=Rt.mc),Rt.mcc&&(Mt.mc=Rt.mcc),Rt.mlc&&(Mt.mlc=Rt.mlc),Rt.mlcc&&(Mt.mlc=Rt.mlcc),Rt.mlw&&(Mt.mlw=Rt.mlw),Rt.mrc&&(Mt.mrc=Rt.mrc),Rt.dir&&(Mt.dir=Rt.dir)),Mt._distinct=!0,vt.entries.push([Mt])}}vt.entries.sort(function(Qe,mt){return Qe[0].trace.index-mt[0].trace.index}),vt.layer=ne,vt._inHover=!0,vt._groupTitleFont=Ye,o(Q,vt);var Yt,Fe,He,Oe,$e=ne.select("g.legend"),ke=D(Q,$e.node()),Le=ke.width+2*L,Pe=ke.height+2*L,Ce=Be[0],Xe=(Ce.x0+Ce.x1)/2,at=(Ce.y0+Ce.y1)/2,pt=!(c.traceIs(Ce.trace,"bar-like")||c.traceIs(Ce.trace,"box-violin"));"y"===be?pt?(Fe=at-L,Yt=at+L):(Fe=Math.min.apply(null,Be.map(function(Qe){return Math.min(Qe.y0,Qe.y1)})),Yt=Math.max.apply(null,Be.map(function(Qe){return Math.max(Qe.y0,Qe.y1)}))):Fe=Yt=v.mean(Be.map(function(Qe){return(Qe.y0+Qe.y1)/2}))-Pe/2,"x"===be?pt?(He=Xe+L,Oe=Xe-L):(He=Math.max.apply(null,Be.map(function(Qe){return Math.max(Qe.x0,Qe.x1)})),Oe=Math.min.apply(null,Be.map(function(Qe){return Math.min(Qe.x0,Qe.x1)}))):He=Oe=v.mean(Be.map(function(Qe){return(Qe.x0+Qe.x1)/2}))-Le/2;var ut,St,ot=xe._offset,Et=we._offset;return Oe+=ot-Le,Fe+=Et-Pe,ut=(He+=ot)+Le<Te&&He>=0?He:Oe+Le<Te&&Oe>=0?Oe:ot+Le<Te?ot:He-Xe<Xe-Oe+Le?Te-Le:0,St=(Yt+=Et)+Pe<_e&&Yt>=0?Yt:Fe+Pe<_e&&Fe>=0?Fe:Et+Pe<_e?Et:Yt-at<at-Fe+Pe?_e-Pe:0,$e.attr("transform",e((ut+=L)-1,(St+=L)-1)),$e}var Lt=ne.selectAll("g.hovertext").data(N,function(Qe){return P(Qe)});return Lt.enter().append("g").classed("hovertext",!0).each(function(){var Qe=p.select(this);Qe.append("rect").call(s.fill,s.addOpacity(re,.8)),Qe.append("text").classed("name",!0),Qe.append("path").style("stroke-width","1px"),Qe.append("text").classed("nums",!0).call(u.font,pe,ce)}),Lt.exit().remove(),Lt.each(function(Qe){var mt=p.select(this).attr("transform",""),It=Qe.color;Array.isArray(It)&&(It=It[Qe.eventData[0].pointNumber]);var jt=Qe.bgcolor||It,Zt=s.combine(s.opacity(jt)?jt:s.defaultLine,re),Re=s.combine(s.opacity(It)?It:s.defaultLine,re),lt=Qe.borderColor||s.contrast(Zt),_t=R(Qe,Me,J,j,Se,mt),Dt=_t[0],Vt=_t[1],nr=mt.select("text.nums").call(u.font,Qe.fontFamily||pe,Qe.fontSize||ce,Qe.fontColor||lt).text(Dt).attr("data-notex",1).call(a.positionText,0,0).call(a.convertToTspans,Q),Gt=mt.select("text.name"),Kt=0,ir=0;if(Vt&&Vt!==Dt){Gt.call(u.font,Qe.fontFamily||pe,Qe.fontSize||ce,Re).text(Vt).attr("data-notex",1).call(a.positionText,0,0).call(a.convertToTspans,Q);var dr=D(Q,Gt.node());Kt=dr.width+2*L,ir=dr.height+2*L}else Gt.remove(),mt.select("rect").remove();mt.select("path").style({fill:Zt,stroke:lt});var hr=Qe.xa._offset+(Qe.x0+Qe.x1)/2,cr=Qe.ya._offset+(Qe.y0+Qe.y1)/2,sr=Math.abs(Qe.x1-Qe.x0),mr=Math.abs(Qe.y1-Qe.y0),Ir=D(Q,nr.node()),vr=Ir.width/j._invScaleX,Br=Ir.height/j._invScaleY;Qe.ty0=(me-Ir.top)/j._invScaleY,Qe.bx=vr+2*L,Qe.by=Math.max(Br+2*L,ir),Qe.anchor="start",Qe.txwidth=vr,Qe.tx2width=Kt,Qe.offset=0;var Jr,ln,En=(vr+k+L+Kt)*j._invScaleX;if(K)Qe.pos=hr,Jr=cr+mr/2+En<=_e,ln=cr-mr/2-En>=0,"top"!==Qe.idealAlign&&Jr||!ln?Jr?(cr+=mr/2,Qe.anchor="start"):Qe.anchor="middle":(cr-=mr/2,Qe.anchor="end");else if(Qe.pos=cr,Jr=hr+sr/2+En<=Te,ln=hr-sr/2-En>=0,"left"!==Qe.idealAlign&&Jr||!ln)if(Jr)hr+=sr/2,Qe.anchor="start";else{Qe.anchor="middle";var Cn=En/2,An=hr+Cn-Te,$r=hr-Cn;An>0&&(hr-=An),$r<0&&(hr+=-$r)}else hr-=sr/2,Qe.anchor="end";nr.attr("text-anchor",Qe.anchor),Kt&&Gt.attr("text-anchor",Qe.anchor),mt.attr("transform",e(hr,cr)+(K?n(x):""))}),Lt}function R(N,U,Q,j,J,K){var re="",ne="";void 0!==N.nameOverride&&(N.name=N.nameOverride),N.name&&(N.trace._meta&&(N.name=v.templateString(N.name,N.trace._meta)),re=W(N.name,N.nameLength));var se=Q.charAt(0);void 0!==N.zLabel?(void 0!==N.xLabel&&(ne+="x: "+N.xLabel+"<br>"),void 0!==N.yLabel&&(ne+="y: "+N.yLabel+"<br>"),"choropleth"!==N.trace.type&&"choroplethmapbox"!==N.trace.type&&(ne+=(ne?"z: ":"")+N.zLabel)):U&&N[se+"Label"]===J?ne=N[("x"===se?"y":"x")+"Label"]||"":void 0===N.xLabel?void 0!==N.yLabel&&"scattercarpet"!==N.trace.type&&(ne=N.yLabel):ne=void 0===N.yLabel?N.xLabel:"("+N.xLabel+", "+N.yLabel+")",!N.text&&0!==N.text||Array.isArray(N.text)||(ne+=(ne?"<br>":"")+N.text),void 0!==N.extraText&&(ne+=(ne?"<br>":"")+N.extraText),K&&""===ne&&!N.hovertemplate&&(""===re&&K.remove(),ne=re);var pe=N.hovertemplate||!1;if(pe){var ce=N.hovertemplateLabels||N;N[se+"Label"]!==J&&(ce[se+"other"]=ce[se+"Val"],ce[se+"otherLabel"]=ce[se+"Label"]),ne=(ne=v.hovertemplateString(pe,ce,j._d3locale,N.eventData[0]||{},N.trace._meta)).replace(S,function(ge,xe){return re=W(xe,N.nameLength),""})}return[ne,re]}function B(N,U,Q,j){var J=function(re){return re*Q},K=function(re){return re*j};N.each(function(re){var ne=p.select(this);if(re.del)return ne.remove();var se=ne.select("text.nums"),oe=re.anchor,pe="end"===oe?-1:1,ce={start:1,end:-1,middle:0}[oe],ge=ce*(k+L),xe=ge+ce*(re.txwidth+L),we=0,be=re.offset,Se="middle"===oe;Se&&(ge-=re.tx2width/2,xe+=re.txwidth/2+L),U&&(be*=-T,we=re.offset*_),ne.select("path").attr("d",Se?"M-"+J(re.bx/2+re.tx2width/2)+","+K(be-re.by/2)+"h"+J(re.bx)+"v"+K(re.by)+"h-"+J(re.bx)+"Z":"M0,0L"+J(pe*k+we)+","+K(k+be)+"v"+K(re.by/2-k)+"h"+J(pe*re.bx)+"v-"+K(re.by)+"H"+J(pe*k+we)+"V"+K(be-k)+"Z");var fe=we+ge,me=be+re.ty0-re.by/2+L,Te=re.textAlign||"auto";"auto"!==Te&&("left"===Te&&"start"!==oe?(se.attr("text-anchor","start"),fe=Se?-re.bx/2-re.tx2width/2+L:-re.bx-L):"right"===Te&&"end"!==oe&&(se.attr("text-anchor","end"),fe=Se?re.bx/2-re.tx2width/2-L:re.bx+L)),se.call(a.positionText,J(fe),K(me)),re.tx2width&&(ne.select("text.name").call(a.positionText,J(xe+ce*L+we),K(be+re.ty0-re.by/2+L)),ne.select("rect").call(u.setRect,J(xe+(ce-1)*re.tx2width/2+we),K(be-re.by/2-1),J(re.tx2width),K(re.by+2)))})}function H(N,U){var Q=N.index,j=N.trace||{},J=N.cd[0],K=N.cd[Q]||{};function re(ge){return ge||m(ge)&&0===ge}var ne=Array.isArray(Q)?function(ge,xe){var we=v.castOption(J,Q,ge);return re(we)?we:v.extractOption({},j,"",xe)}:function(ge,xe){return v.extractOption(K,j,ge,xe)};function se(ge,xe,we){var be=ne(xe,we);re(be)&&(N[ge]=be)}if(se("hoverinfo","hi","hoverinfo"),se("bgcolor","hbg","hoverlabel.bgcolor"),se("borderColor","hbc","hoverlabel.bordercolor"),se("fontFamily","htf","hoverlabel.font.family"),se("fontSize","hts","hoverlabel.font.size"),se("fontColor","htc","hoverlabel.font.color"),se("nameLength","hnl","hoverlabel.namelength"),se("textAlign","hta","hoverlabel.align"),N.posref="y"===U||"closest"===U&&"h"===j.orientation?N.xa._offset+(N.x0+N.x1)/2:N.ya._offset+(N.y0+N.y1)/2,N.x0=v.constrain(N.x0,0,N.xa._length),N.x1=v.constrain(N.x1,0,N.xa._length),N.y0=v.constrain(N.y0,0,N.ya._length),N.y1=v.constrain(N.y1,0,N.ya._length),void 0!==N.xLabelVal&&(N.xLabel="xLabel"in N?N.xLabel:l.hoverLabelText(N.xa,N.xLabelVal,j.xhoverformat),N.xVal=N.xa.c2d(N.xLabelVal)),void 0!==N.yLabelVal&&(N.yLabel="yLabel"in N?N.yLabel:l.hoverLabelText(N.ya,N.yLabelVal,j.yhoverformat),N.yVal=N.ya.c2d(N.yLabelVal)),void 0!==N.zLabelVal&&void 0===N.zLabel&&(N.zLabel=String(N.zLabelVal)),!(isNaN(N.xerr)||"log"===N.xa.type&&N.xerr<=0)){var oe=l.tickText(N.xa,N.xa.c2l(N.xerr),"hover").text;N.xLabel+=void 0!==N.xerrneg?" +"+oe+" / -"+l.tickText(N.xa,N.xa.c2l(N.xerrneg),"hover").text:" \xb1 "+oe,"x"===U&&(N.distance+=1)}if(!(isNaN(N.yerr)||"log"===N.ya.type&&N.yerr<=0)){var pe=l.tickText(N.ya,N.ya.c2l(N.yerr),"hover").text;N.yLabel+=void 0!==N.yerrneg?" +"+pe+" / -"+l.tickText(N.ya,N.ya.c2l(N.yerrneg),"hover").text:" \xb1 "+pe,"y"===U&&(N.distance+=1)}var ce=N.hoverinfo||N.trace.hoverinfo;return ce&&"all"!==ce&&(-1===(ce=Array.isArray(ce)?ce:ce.split("+")).indexOf("x")&&(N.xLabel=void 0),-1===ce.indexOf("y")&&(N.yLabel=void 0),-1===ce.indexOf("z")&&(N.zLabel=void 0),-1===ce.indexOf("text")&&(N.text=void 0),-1===ce.indexOf("name")&&(N.name=void 0)),N}function V(N,U,Q){var j,J,K=Q.container,re=Q.fullLayout,ne=re._size,se=Q.event,oe=!!U.hLinePoint,pe=!!U.vLinePoint;if(K.selectAll(".spikeline").remove(),pe||oe){var ce=s.combine(re.plot_bgcolor,re.paper_bgcolor);if(oe){var ge,xe,we=U.hLinePoint;j=we&&we.xa,"cursor"===(J=we&&we.ya).spikesnap?(ge=se.pointerX,xe=se.pointerY):(ge=j._offset+we.x,xe=J._offset+we.y);var be,Se,fe=b.readability(we.color,ce)<1.5?s.contrast(ce):we.color,me=J.spikemode,Te=J.spikethickness,_e=J.spikecolor||fe,Me=l.getPxPosition(N,J);if(-1!==me.indexOf("toaxis")||-1!==me.indexOf("across")){if(-1!==me.indexOf("toaxis")&&(be=Me,Se=ge),-1!==me.indexOf("across")){var Ie=J._counterDomainMin,ze=J._counterDomainMax;"free"===J.anchor&&(Ie=Math.min(Ie,J.position),ze=Math.max(ze,J.position)),be=ne.l+Ie*ne.w,Se=ne.l+ze*ne.w}K.insert("line",":first-child").attr({x1:be,x2:Se,y1:xe,y2:xe,"stroke-width":Te,stroke:_e,"stroke-dasharray":u.dashStyle(J.spikedash,Te)}).classed("spikeline",!0).classed("crisp",!0),K.insert("line",":first-child").attr({x1:be,x2:Se,y1:xe,y2:xe,"stroke-width":Te+2,stroke:ce}).classed("spikeline",!0).classed("crisp",!0)}-1!==me.indexOf("marker")&&K.insert("circle",":first-child").attr({cx:Me+("right"!==J.side?Te:-Te),cy:xe,r:Te,fill:_e}).classed("spikeline",!0)}if(pe){var Ve,Je,De=U.vLinePoint;J=De&&De.ya,"cursor"===(j=De&&De.xa).spikesnap?(Ve=se.pointerX,Je=se.pointerY):(Ve=j._offset+De.x,Je=J._offset+De.y);var Be,Ze,Ye=b.readability(De.color,ce)<1.5?s.contrast(ce):De.color,tt=j.spikemode,st=j.spikethickness,vt=j.spikecolor||Ye,Pt=l.getPxPosition(N,j);if(-1!==tt.indexOf("toaxis")||-1!==tt.indexOf("across")){if(-1!==tt.indexOf("toaxis")&&(Be=Pt,Ze=Je),-1!==tt.indexOf("across")){var Mt=j._counterDomainMin,rt=j._counterDomainMax;"free"===j.anchor&&(Mt=Math.min(Mt,j.position),rt=Math.max(rt,j.position)),Be=ne.t+(1-rt)*ne.h,Ze=ne.t+(1-Mt)*ne.h}K.insert("line",":first-child").attr({x1:Ve,x2:Ve,y1:Be,y2:Ze,"stroke-width":st,stroke:vt,"stroke-dasharray":u.dashStyle(j.spikedash,st)}).classed("spikeline",!0).classed("crisp",!0),K.insert("line",":first-child").attr({x1:Ve,x2:Ve,y1:Be,y2:Ze,"stroke-width":st+2,stroke:ce}).classed("spikeline",!0).classed("crisp",!0)}-1!==tt.indexOf("marker")&&K.insert("circle",":first-child").attr({cx:Ve,cy:Pt-("top"!==j.side?st:-st),r:st,fill:vt}).classed("spikeline",!0)}}}function Z(N,U){return!U||U.vLinePoint!==N._spikepoints.vLinePoint||U.hLinePoint!==N._spikepoints.hLinePoint}function W(N,U){return a.plainText(N||"",{len:U,allowedTags:["br","sub","sup","b","i","em"]})}function G(N,U,Q){var j=U[N+"a"],J=U[N+"Val"],K=U.cd[0];if("category"===j.type)J=j._categoriesMap[J];else if("date"===j.type){var re=U.trace[N+"periodalignment"];if(re){var ne=U.cd[U.index],se=ne[N+"Start"];void 0===se&&(se=ne[N]);var oe=ne[N+"End"];void 0===oe&&(oe=ne[N]);var pe=oe-se;"end"===re?J+=pe:"middle"===re&&(J+=pe/2)}J=j.d2c(J)}return K&&K.t&&K.t.posLetter===j._id&&("group"!==Q.boxmode&&"group"!==Q.violinmode||(J+=K.t.dPos)),J}function X(N){return N.offsetTop+N.clientTop}function te(N){return N.offsetLeft+N.clientLeft}function D(N,U){var Q=N._fullLayout,j=U.getBoundingClientRect(),J=j.x,K=j.y,re=J+j.width,ne=K+j.height,se=v.apply3DTransform(Q._invTransform)(J,K),oe=v.apply3DTransform(Q._invTransform)(re,ne),pe=se[0],ce=se[1],ge=oe[0],xe=oe[1];return{x:pe,y:ce,width:ge-pe,height:xe-ce,top:Math.min(ce,xe),left:Math.min(pe,ge),right:Math.max(pe,ge),bottom:Math.max(ce,xe)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../color"),b=y("./helpers").isUnifiedHover;$.exports=function(v,e,n,t){function a(r){t.font[r]||(t.font[r]=e.legend?e.legend.font[r]:e.font[r])}t=t||{},e&&b(e.hovermode)&&(t.font||(t.font={}),a("size"),a("family"),a("color"),e.legend?(t.bgcolor||(t.bgcolor=m.combine(e.legend.bgcolor,e.paper_bgcolor)),t.bordercolor||(t.bordercolor=e.legend.bordercolor)):t.bgcolor||(t.bgcolor=e.paper_bgcolor)),n("hoverlabel.bgcolor",t.bgcolor),n("hoverlabel.bordercolor",t.bordercolor),n("hoverlabel.namelength",t.namelength),p.coerceFont(n,"hoverlabel.font",t.font),n("hoverlabel.align",t.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./layout_attributes");$.exports=function(b,v){function e(n,t){return void 0!==v[n]?v[n]:p.coerce(b,v,m,n,t)}return e("clickmode"),e("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=y("../dragelement"),v=y("./helpers"),e=y("./layout_attributes"),n=y("./hover");$.exports={moduleType:"component",name:"fx",constants:y("./constants"),schema:{layout:e},attributes:y("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:y("./layout_global_defaults"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),getDistanceFunction:v.getDistanceFunction,getClosest:v.getClosest,inbox:v.inbox,quadrature:v.quadrature,appendArrayPointValue:v.appendArrayPointValue,castHoverOption:function(t,a,r){return m.castOption(t,a,"hoverlabel."+r)},castHoverinfo:function(t,a,r){return m.castOption(t,r,"hoverinfo",function(u){return m.coerceHoverinfo({hoverinfo:u},{_module:t._module},a)})},hover:n.hover,unhover:b.unhover,loneHover:n.loneHover,loneUnhover:function(t){var a=m.isD3Selection(t)?t:p.select(t);a.selectAll("g.hovertext").remove(),a.selectAll(".spikeline").remove()},click:y("./click")}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(y,$,ee){"use strict";var p=y("./constants"),m=y("../../plots/font_attributes")({editType:"none"});m.family.dflt=p.HOVERFONT,m.size.dflt=p.HOVERFONTSIZE,$.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:m,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./layout_attributes"),b=y("./hovermode_defaults"),v=y("./hoverlabel_defaults");$.exports=function(e,n){function t(s,i){return p.coerce(e,n,m,s,i)}b(e,n)&&(t("hoverdistance"),t("spikedistance")),"select"===t("dragmode")&&t("selectdirection");var a=n._has("mapbox"),r=n._has("geo"),u=n._basePlotModules.length;"zoom"===n.dragmode&&((a||r)&&1===u||a&&r&&2===u)&&(n.dragmode="pan"),v(e,n,t)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./hoverlabel_defaults"),b=y("./layout_attributes");$.exports=function(v,e){m(v,e,function(n,t){return p.coerce(v,e,b,n,t)})}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../lib/regex").counter,b=y("../../plots/domain").attributes,v=y("../../plots/cartesian/constants").idRegex,e=y("../../plot_api/plot_template"),n={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[m("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[v.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[v.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:b({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function t(u,s,i){var l=s[i+"axes"],c=Object.keys((u._splomAxes||{})[i]||{});return Array.isArray(l)?l:c.length?c:void 0}function a(u,s,i,l,c,f){var g=s(u+"gap",i),h=s("domain."+u);s(u+"side",l);for(var o=new Array(c),x=h[0],d=(h[1]-x)/(c-g),w=d*(1-g),_=0;_<c;_++){var T=x+d*_;o[f?c-1-_:_]=[T,T+w]}return o}function r(u,s,i,l,c){var f,g=new Array(i);function h(o,x){-1!==s.indexOf(x)&&void 0===l[x]?(g[o]=x,l[x]=o):g[o]=""}if(Array.isArray(u))for(f=0;f<i;f++)h(f,u[f]);else for(h(0,c),f=1;f<i;f++)h(f,c+(f+1));return g}$.exports={moduleType:"component",name:"grid",schema:{layout:{grid:n}},layoutAttributes:n,sizeDefaults:function(u,s){var i=u.grid||{},l=t(s,i,"x"),c=t(s,i,"y");if(u.grid||l||c){var f,g,h=Array.isArray(i.subplots)&&Array.isArray(i.subplots[0]),o=Array.isArray(l),x=Array.isArray(c),d=o&&l!==i.xaxes&&x&&c!==i.yaxes;h?(f=i.subplots.length,g=i.subplots[0].length):(x&&(f=c.length),o&&(g=l.length));var w=e.newContainer(s,"grid"),_=S("rows",f),T=S("columns",g);if(_*T>1){!h&&!o&&!x&&"independent"===S("pattern")&&(h=!0),w._hasSubplotGrid=h;var k,L,M="top to bottom"===S("roworder"),P=h?.3:.1;d&&s._splomGridDflt&&(k=s._splomGridDflt.xside,L=s._splomGridDflt.yside),w._domains={x:a("x",S,h?.2:.1,k,T),y:a("y",S,P,L,_,M)}}else delete s.grid}function S(E,R){return p.coerce(i,w,n,E,R)}},contentDefaults:function(u,s){var i=s.grid;if(i&&i._domains){var l,c,f,g,h,o,x,d=u.grid||{},w=s._subplots,_=i._hasSubplotGrid,T=i.rows,k=i.columns,L="independent"===i.pattern,M=i._axisMap={};if(_){var O=d.subplots||[];o=i.subplots=new Array(T);var P=1;for(l=0;l<T;l++){var S=o[l]=new Array(k),E=O[l]||[];for(c=0;c<k;c++)if(L?(h=1===P?"xy":"x"+P+"y"+P,P++):h=E[c],S[c]="",-1!==w.cartesian.indexOf(h)){if(x=h.indexOf("y"),f=h.slice(0,x),g=h.slice(x),void 0!==M[f]&&M[f]!==c||void 0!==M[g]&&M[g]!==l)continue;S[c]=h,M[f]=c,M[g]=l}}}else{var R=t(s,d,"x"),B=t(s,d,"y");i.xaxes=r(R,w.xaxis,k,M,"x"),i.yaxes=r(B,w.yaxis,T,M,"y")}var H=i._anchors={},V="top to bottom"===i.roworder;for(var Z in M){var W,G,X,te=Z.charAt(0),D=i[te+"side"];if(D.length<8)H[Z]="free";else if("x"===te){if("t"===D.charAt(0)===V?(W=0,G=1,X=T):(W=T-1,G=-1,X=-1),_){var N=M[Z];for(l=W;l!==X;l+=G)if((h=o[l][N])&&(x=h.indexOf("y"),h.slice(0,x)===Z)){H[Z]=h.slice(x);break}}else for(l=W;l!==X;l+=G)if(-1!==w.cartesian.indexOf(Z+(g=i.yaxes[l]))){H[Z]=g;break}}else if("l"===D.charAt(0)?(W=0,G=1,X=k):(W=k-1,G=-1,X=-1),_){var U=M[Z];for(l=W;l!==X;l+=G)if((h=o[U][l])&&(x=h.indexOf("y"),h.slice(x)===Z)){H[Z]=h.slice(0,x);break}}else for(l=W;l!==X;l+=G)if(-1!==w.cartesian.indexOf((f=i.xaxes[l])+Z)){H[Z]=f;break}}}}}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/constants"),m=y("../../plot_api/plot_template").templatedArray;y("../../constants/axis_placeable_objects"),$.exports=m("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",p.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",p.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib/to_log_range");$.exports=function(b,v,e,n){v=v||{};var t="log"===e&&"linear"===v.type;if(t||"linear"===e&&"log"===v.type)for(var r,u,s=b._fullLayout.images,i=v._id.charAt(0),l=0;l<s.length;l++)if(u="images["+l+"].",(r=s[l])[i+"ref"]===v._id){var c=r[i],f=r["size"+i],g=null,h=null;if(t){g=m(c,v.range);var o=f/Math.pow(10,g)/2;h=2*Math.log(o+Math.sqrt(1+o*o))/Math.LN10}else h=(g=Math.pow(10,c))*(Math.pow(10,f/2)-Math.pow(10,-f/2));p(g)?p(h)||(h=null):(g=null,h=null),n(u+i,g),n(u+"size"+i,h)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/cartesian/axes"),b=y("../../plots/array_container_defaults"),v=y("./attributes");function e(n,t,a){function r(g,h){return p.coerce(n,t,v,g,h)}var u=r("source");if(!r("visible",!!u))return t;r("layer"),r("xanchor"),r("yanchor"),r("sizex"),r("sizey"),r("sizing"),r("opacity");for(var s={_fullLayout:a},i=["x","y"],l=0;l<2;l++){var c=i[l],f=m.coerceRef(n,t,s,c,"paper",void 0);"paper"!==f&&m.getFromId(s,f)._imgIndices.push(t._index),m.coercePosition(t,s,r,f,c,0)}return t}$.exports=function(n,t){b(n,t,{name:"images",handleItemDefaults:e})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../drawing"),b=y("../../plots/cartesian/axes"),v=y("../../plots/cartesian/axis_ids"),e=y("../../constants/xmlns_namespaces");$.exports=function(n){var t,a,r=n._fullLayout,u=[],s={},i=[];for(a=0;a<r.images.length;a++){var l=r.images[a];if(l.visible)if("below"===l.layer&&"paper"!==l.xref&&"paper"!==l.yref){t=v.ref2id(l.xref)+v.ref2id(l.yref);var c=r._plots[t];if(!c){i.push(l);continue}c.mainplot&&(t=c.mainplot.id),s[t]||(s[t]=[]),s[t].push(l)}else"above"===l.layer?u.push(l):i.push(l)}var f={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},g={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function h(k){var L=p.select(this);if(this._imgSrc!==k.source)if(L.attr("xmlns",e.svg),k.source&&"data:"===k.source.slice(0,5))L.attr("xlink:href",k.source),this._imgSrc=k.source;else{var M=new Promise(function(O){var P=new Image;function S(){L.remove(),O()}this.img=P,P.setAttribute("crossOrigin","anonymous"),P.onerror=S,P.onload=function(){var E=document.createElement("canvas");E.width=this.width,E.height=this.height,E.getContext("2d").drawImage(this,0,0);var R=E.toDataURL("image/png");L.attr("xlink:href",R),O()},L.on("error",S),P.src=k.source,this._imgSrc=k.source}.bind(this));n._promises.push(M)}}function o(k){var L,M,O=p.select(this),P=b.getFromId(n,k.xref),S=b.getFromId(n,k.yref),E="domain"===b.getRefType(k.xref),R="domain"===b.getRefType(k.yref),B=r._size;L=void 0!==P?"string"==typeof k.xref&&E?P._length*k.sizex:Math.abs(P.l2p(k.sizex)-P.l2p(0)):k.sizex*B.w,M=void 0!==S?"string"==typeof k.yref&&R?S._length*k.sizey:Math.abs(S.l2p(k.sizey)-S.l2p(0)):k.sizey*B.h;var H,V,Z=L*f[k.xanchor].offset,W=M*g[k.yanchor].offset,G=f[k.xanchor].sizing+g[k.yanchor].sizing;switch(H=void 0!==P?"string"==typeof k.xref&&E?P._length*k.x+P._offset:P.r2p(k.x)+P._offset:k.x*B.w+B.l,H+=Z,V=void 0!==S?"string"==typeof k.yref&&R?S._length*(1-k.y)+S._offset:S.r2p(k.y)+S._offset:B.h-k.y*B.h+B.t,V+=W,k.sizing){case"fill":G+=" slice";break;case"stretch":G="none"}O.attr({x:H,y:V,width:L,height:M,preserveAspectRatio:G,opacity:k.opacity});var X=(P&&"domain"!==b.getRefType(k.xref)?P._id:"")+(S&&"domain"!==b.getRefType(k.yref)?S._id:"");m.setClipUrl(O,X?"clip"+r._uid+X:null,n)}var x=r._imageLowerLayer.selectAll("image").data(i),d=r._imageUpperLayer.selectAll("image").data(u);x.enter().append("image"),d.enter().append("image"),x.exit().remove(),d.exit().remove(),x.each(function(k){h.bind(this)(k),o.bind(this)(k)}),d.each(function(k){h.bind(this)(k),o.bind(this)(k)});var w=Object.keys(r._plots);for(a=0;a<w.length;a++){var _=r._plots[t=w[a]];if(_.imagelayer){var T=_.imagelayer.selectAll("image").data(s[t]||[]);T.enter().append("image"),T.exit().remove(),T.each(function(k){h.bind(this)(k),o.bind(this)(k)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(y,$,ee){"use strict";$.exports={moduleType:"component",name:"images",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),includeBasePlot:y("../../plots/cartesian/include_components")("images"),draw:y("./draw"),convertCoords:y("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(y,$,ee){"use strict";var p=y("../../plots/font_attributes"),m=y("../color/attributes");$.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:p({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:p({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(y,$,ee){"use strict";$.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../lib"),b=y("../../plot_api/plot_template"),v=y("./attributes"),e=y("../../plots/layout_attributes"),n=y("./helpers");$.exports=function(t,a,r){for(var u=t.legend||{},s=0,i=!1,l="normal",c=0;c<r.length;c++){var f=r[c];f.visible&&((f.showlegend||f._dfltShowLegend&&!(f._module&&f._module.attributes&&f._module.attributes.showlegend&&!1===f._module.attributes.showlegend.dflt))&&(s++,f.showlegend&&(i=!0,(p.traceIs(f,"pie-like")||!0===f._input.showlegend)&&s++)),(p.traceIs(f,"bar")&&"stack"===a.barmode||-1!==["tonextx","tonexty"].indexOf(f.fill))&&(l=n.isGrouped({traceorder:l})?"grouped+reversed":"reversed"),void 0!==f.legendgroup&&""!==f.legendgroup&&(l=n.isReversed({traceorder:l})?"reversed+grouped":"grouped"))}var g=m.coerce(t,a,e,"showlegend",i&&s>1);if(!1!==g||u.uirevision){var h=b.newContainer(a,"legend");if(k("uirevision",a.uirevision),!1!==g){k("bgcolor",a.paper_bgcolor),k("bordercolor"),k("borderwidth");var o,x,d,w=m.coerceFont(k,"font",a.font),_="h"===k("orientation");if(_?(o=0,p.getComponentMethod("rangeslider","isVisible")(t.xaxis)?(x=1.1,d="bottom"):(x=-.1,d="top")):(o=1.02,x=1,d="auto"),k("traceorder",l),n.isGrouped(a.legend)&&k("tracegroupgap"),k("itemsizing"),k("itemwidth"),k("itemclick"),k("itemdoubleclick"),k("groupclick"),k("x",o),k("xanchor"),k("y",x),k("yanchor",d),k("valign"),m.noneOrAll(u,h,["x","y"]),k("title.text")){k("title.side",_?"left":"top");var T=m.extendFlat({},w,{size:m.bigFont(w.size)});m.coerceFont(k,"title.font",T)}}}function k(L,M){return m.coerce(u,h,v,L,M)}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=y("../../plots/plots"),v=y("../../registry"),e=y("../../lib/events"),n=y("../dragelement"),t=y("../drawing"),a=y("../color"),r=y("../../lib/svg_text_utils"),u=y("./handle_click"),s=y("./constants"),i=y("../../constants/alignment"),l=i.LINE_SPACING,c=i.FROM_TL,f=i.FROM_BR,g=y("./get_legend_data"),h=y("./style"),o=y("./helpers");function x(M,O,P,S,E){var R=P.data()[0][0].trace,B={event:E,node:P.node(),curveNumber:R.index,expandedIndex:R._expandedIndex,data:M.data,layout:M.layout,frames:M._transitionData._frames,config:M._context,fullData:M._fullData,fullLayout:M._fullLayout};R._group&&(B.group=R._group),v.traceIs(R,"pie-like")&&(B.label=P.datum()[0].label),!1!==e.triggerHandler(M,"plotly_legendclick",B)&&(1===S?O._clickTimeout=setTimeout(function(){M._fullLayout&&u(P,M,S)},M._context.doubleClickDelay):2===S&&(O._clickTimeout&&clearTimeout(O._clickTimeout),M._legendMouseDownTime=0,!1!==e.triggerHandler(M,"plotly_legenddoubleclick",B)&&u(P,M,S)))}function d(M,O,P){var S,E,R=M.data()[0][0],B=R.trace,H=v.traceIs(B,"pie-like"),V=!P._inHover&&O._context.edits.legendText&&!H,Z=P._maxNameLength;R.groupTitle?(S=R.groupTitle.text,E=R.groupTitle.font):(E=P.font,P.entries?S=R.text:(S=H?R.label:B.name,B._meta&&(S=m.templateString(S,B._meta))));var W=m.ensureSingle(M,"text","legendtext");W.attr("text-anchor","start").call(t.font,E).text(V?w(S,Z):S),r.positionText(W,P.itemwidth+2*s.itemGap,0),V?W.call(r.makeEditable,{gd:O,text:S}).call(T,M,O,P).on("edit",function(X){this.text(w(X,Z)).call(T,M,O,P);var te=R.trace._fullInput||{},D={};if(v.hasTransform(te,"groupby")){var N=v.getTransformIndices(te,"groupby"),Q=m.keyedContainer(te,"transforms["+N[N.length-1]+"].styles","target","value.name");Q.set(R.trace._group,X),D=Q.constructUpdate()}else D.name=X;return v.call("_guiRestyle",O,D,B.index)}):T(W,M,O,P)}function w(M,O){var P=Math.max(4,O);if(M&&M.trim().length>=P/2)return M;for(var S=P-(M=M||"").length;S>0;S--)M+=" ";return M}function _(M,O){var P,S=O._context.doubleClickDelay,E=1,R=m.ensureSingle(M,"rect","legendtoggle",function(B){O._context.staticPlot||B.style("cursor","pointer").attr("pointer-events","all"),B.call(a.fill,"rgba(0,0,0,0)")});O._context.staticPlot||(R.on("mousedown",function(){(P=(new Date).getTime())-O._legendMouseDownTime<S?E+=1:(E=1,O._legendMouseDownTime=P)}),R.on("mouseup",function(){if(!O._dragged&&!O._editing){var B=O._fullLayout.legend;(new Date).getTime()-O._legendMouseDownTime>S&&(E=Math.max(E-1,1)),x(O,B,M,E,p.event)}}))}function T(M,O,P,S,E){S._inHover&&M.attr("data-notex",!0),r.convertToTspans(M,P,function(){!function(R,B,H,V){var Z=R.data()[0][0];if(H._inHover||!Z||Z.trace.showlegend){var W=R.select("g[class*=math-group]"),G=W.node();H||(H=B._fullLayout.legend);var D,N,te=H.borderwidth,U=(1===V?H.title.font:Z.groupTitle?Z.groupTitle.font:H.font).size*l;if(G){var Q=t.bBox(G);D=Q.height,N=Q.width,1===V?t.setTranslate(W,te,te+.75*D):t.setTranslate(W,0,.25*D)}else{var j=R.select(1===V?".legendtitletext":".legendtext"),J=r.lineCount(j),K=j.node();if(D=U*J,N=K?t.bBox(K).width:0,1===V)"left"===H.title.side&&(N+=2*s.itemGap),r.positionText(j,te+s.titlePad,te+U);else{var re=2*s.itemGap+H.itemwidth;Z.groupTitle&&(re=s.itemGap,N-=H.itemwidth),r.positionText(j,re,-U*((J-1)/2-.3))}}1===V?(H._titleWidth=N,H._titleHeight=D):(Z.lineHeight=U,Z.height=Math.max(D,16)+3,Z.width=N)}else R.remove()}(O,P,S,E)})}function k(M){return m.isRightAnchor(M)?"right":m.isCenterAnchor(M)?"center":"left"}function L(M){return m.isBottomAnchor(M)?"bottom":m.isMiddleAnchor(M)?"middle":"top"}$.exports=function(M,O){return O||(O=M._fullLayout.legend||{}),function(P,S){var E,R,B=P._fullLayout,H="legend"+B._uid,V=S._inHover;if(V?(E=S.layer,H+="-hover"):E=B._infolayer,E){if(P._legendMouseDownTime||(P._legendMouseDownTime=0),V){if(!S.entries)return;R=g(S.entries,S)}else{if(!P.calcdata)return;R=B.showlegend&&g(P.calcdata,S)}var Z=B.hiddenlabels||[];if(!(V||B.showlegend&&R.length))return E.selectAll(".legend").remove(),B._topdefs.select("#"+H).remove(),b.autoMargin(P,"legend");var W=m.ensureSingle(E,"g","legend",function(J){V||J.attr("pointer-events","all")}),G=m.ensureSingleById(B._topdefs,"clipPath",H,function(J){J.append("rect")}),X=m.ensureSingle(W,"rect","bg",function(J){J.attr("shape-rendering","crispEdges")});X.call(a.stroke,S.bordercolor).call(a.fill,S.bgcolor).style("stroke-width",S.borderwidth+"px");var te=m.ensureSingle(W,"g","scrollbox"),D=S.title;if(S._titleWidth=0,S._titleHeight=0,D.text){var N=m.ensureSingle(te,"text","legendtitletext");N.attr("text-anchor","start").call(t.font,D.font).text(D.text),T(N,te,P,S,1)}else te.selectAll(".legendtitletext").remove();var U=m.ensureSingle(W,"rect","scrollbar",function(J){J.attr(s.scrollBarEnterAttrs).call(a.fill,s.scrollBarColor)}),Q=te.selectAll("g.groups").data(R);Q.enter().append("g").attr("class","groups"),Q.exit().remove();var j=Q.selectAll("g.traces").data(m.identity);j.enter().append("g").attr("class","traces"),j.exit().remove(),j.style("opacity",function(J){var K=J[0].trace;return v.traceIs(K,"pie-like")?-1!==Z.indexOf(J[0].label)?.5:1:"legendonly"===K.visible?.5:1}).each(function(){p.select(this).call(d,P,S)}).call(h,P,S).each(function(){V||p.select(this).call(_,P)}),m.syncOrAsync([b.previousPromises,function(){return function(J,K,re,ne){var se=J._fullLayout;ne||(ne=se.legend);var oe=se._size,pe=o.isVertical(ne),ce=o.isGrouped(ne),ge=ne.borderwidth,xe=2*ge,we=s.itemGap,be=ne.itemwidth+2*we,Se=2*(ge+we),fe=L(ne),me=ne.y<0||0===ne.y&&"top"===fe,Te=ne.y>1||1===ne.y&&"bottom"===fe,_e=ne.tracegroupgap;ne._maxHeight=Math.max(me||Te?se.height/2:oe.h,30);var Me=0;ne._width=0,ne._height=0;var Oe,$e,ke,Le,Ie=($e=0,ke=0,(Le=(Oe=ne).title.side)&&(-1!==Le.indexOf("left")&&($e=Oe._titleWidth),-1!==Le.indexOf("top")&&(ke=Oe._titleHeight)),[$e,ke]);if(pe)re.each(function(Oe){var $e=Oe[0].height;t.setTranslate(this,ge+Ie[0],ge+Ie[1]+ne._height+$e/2+we),ne._height+=$e,ne._width=Math.max(ne._width,Oe[0].width)}),Me=be+ne._width,ne._width+=we+be+xe,ne._height+=Se,ce&&(K.each(function(Oe,$e){t.setTranslate(this,0,$e*ne.tracegroupgap)}),ne._height+=(ne._lgroupsLength-1)*ne.tracegroupgap);else{var ze=k(ne),De=Te||me,Be=se.width/2;ne._maxWidth=Math.max(ne.x<0||0===ne.x&&"right"===ze?De&&"left"===ze?oe.l+oe.w:Be:ne.x>1||1===ne.x&&"left"===ze?De&&"right"===ze?oe.r+oe.w:Be:oe.w,2*be);var Ze=0,Ye=0;re.each(function(Oe){var $e=Oe[0].width+be;Ze=Math.max(Ze,$e),Ye+=$e}),Me=null;var tt=0;if(ce){var st=0,vt=0,Pt=0;K.each(function(){var Oe=0,$e=0;p.select(this).selectAll("g.traces").each(function(Le){var Pe=Le[0].width,Ce=Le[0].height;t.setTranslate(this,Ie[0],Ie[1]+ge+we+Ce/2+$e),$e+=Ce,Oe=Math.max(Oe,be+Pe)}),st=Math.max(st,$e);var ke=Oe+we;vt>0&&ke+ge+vt>ne._maxWidth&&(tt=Math.max(tt,vt),vt=0,Pt+=st+_e,st=$e),t.setTranslate(this,vt,Pt),vt+=ke}),ne._width=Math.max(tt,vt)+ge,ne._height=Pt+st+Se}else{var Mt=re.size(),rt=Ye+xe+(Mt-1)*we<ne._maxWidth,et=0,bt=0,Rt=0,Yt=0;re.each(function(Oe){var $e=Oe[0].height,ke=be+Oe[0].width,Le=(rt?ke:Ze)+we;Le+ge+bt-we>=ne._maxWidth&&(tt=Math.max(tt,Yt),bt=0,Rt+=et,ne._height+=et,et=0),t.setTranslate(this,Ie[0]+ge+bt,Ie[1]+ge+Rt+$e/2+we),Yt=bt+ke+we,bt+=Le,et=Math.max(et,$e)}),rt?(ne._width=bt+xe,ne._height=et+Se):(ne._width=Math.max(tt,Yt)+xe,ne._height+=et+Se)}}ne._width=Math.ceil(Math.max(ne._width+Ie[0],ne._titleWidth+2*(ge+s.titlePad))),ne._height=Math.ceil(Math.max(ne._height+Ie[1],ne._titleHeight+2*(ge+s.itemGap))),ne._effHeight=Math.min(ne._height,ne._maxHeight);var Fe=J._context.edits,He=Fe.legendText||Fe.legendPosition;re.each(function(Oe){var $e=p.select(this).select(".legendtoggle"),ke=Oe[0].height,Le=He?be:Me||be+Oe[0].width;pe||(Le+=we/2),t.setRect($e,0,-ke/2,Le,ke)})}(P,Q,j,S)},function(){var J,K,re,ne,De,Be,Ze,Ye,se=B._size,oe=S.borderwidth;if(!V){if(Ze=k(Be=(De=P)._fullLayout.legend),Ye=L(Be),b.autoMargin(De,"legend",{x:Be.x,y:Be.y,l:Be._width*c[Ze],r:Be._width*f[Ze],b:Be._effHeight*f[Ye],t:Be._effHeight*c[Ye]}))return;var pe=se.l+se.w*S.x-c[k(S)]*S._width,ce=se.t+se.h*(1-S.y)-c[L(S)]*S._effHeight;if(B.margin.autoexpand){var ge=pe,xe=ce;pe=m.constrain(pe,0,B.width-S._width),ce=m.constrain(ce,0,B.height-S._effHeight),pe!==ge&&m.log("Constrain legend.x to make legend fit inside graph"),ce!==xe&&m.log("Constrain legend.y to make legend fit inside graph")}t.setTranslate(W,pe,ce)}if(U.on(".drag",null),W.on("wheel",null),V||S._height<=S._maxHeight||P._context.staticPlot){var we=S._effHeight;V&&(we=S._height),X.attr({width:S._width-oe,height:we-oe,x:oe/2,y:oe/2}),t.setTranslate(te,0,0),G.select("rect").attr({width:S._width-2*oe,height:we-2*oe,x:oe,y:oe}),t.setClipUrl(te,H,P),t.setRect(U,0,0,0,0),delete S._scrollY}else{var be,fe,me=Math.max(s.scrollBarMinHeight,S._effHeight*S._effHeight/S._height),Te=S._effHeight-me-2*s.scrollBarMargin,_e=S._height-S._effHeight,Me=Te/_e,Ie=Math.min(S._scrollY||0,_e);X.attr({width:S._width-2*oe+s.scrollBarWidth+s.scrollBarMargin,height:S._effHeight-oe,x:oe/2,y:oe/2}),G.select("rect").attr({width:S._width-2*oe+s.scrollBarWidth+s.scrollBarMargin,height:S._effHeight-2*oe,x:oe,y:oe+Ie}),t.setClipUrl(te,H,P),Je(Ie,me,Me),W.on("wheel",function(){Je(Ie=m.constrain(S._scrollY+p.event.deltaY/Te*_e,0,_e),me,Me),0!==Ie&&Ie!==_e&&p.event.preventDefault()});var ze=p.behavior.drag().on("dragstart",function(){var De=p.event.sourceEvent;be="touchstart"===De.type?De.changedTouches[0].clientY:De.clientY,fe=Ie}).on("drag",function(){var De=p.event.sourceEvent;2===De.buttons||De.ctrlKey||Je(Ie=function(Be,Ze,Ye){return m.constrain((Ye-Ze)/Me+Be,0,_e)}(fe,be,"touchmove"===De.type?De.changedTouches[0].clientY:De.clientY),me,Me)});U.call(ze);var Ve=p.behavior.drag().on("dragstart",function(){var De=p.event.sourceEvent;"touchstart"===De.type&&(be=De.changedTouches[0].clientY,fe=Ie)}).on("drag",function(){var De=p.event.sourceEvent;"touchmove"===De.type&&Je(Ie=function(Be,Ze,Ye){return m.constrain((Ze-Ye)/Me+Be,0,_e)}(fe,be,De.changedTouches[0].clientY),me,Me)});te.call(Ve)}function Je(De,Be,Ze){S._scrollY=P._fullLayout.legend._scrollY=De,t.setTranslate(te,0,-De),t.setRect(U,S._width,s.scrollBarMargin+De*Ze,s.scrollBarWidth,Be),G.select("rect").attr("y",oe+De)}P._context.edits.legendPosition&&(W.classed("cursor-move",!0),n.init({element:W.node(),gd:P,prepFn:function(){var De=t.getTranslate(W);re=De.x,ne=De.y},moveFn:function(De,Be){var Ze=re+De,Ye=ne+Be;t.setTranslate(W,Ze,Ye),J=n.align(Ze,0,se.l,se.l+se.w,S.xanchor),K=n.align(Ye,0,se.t+se.h,se.t,S.yanchor)},doneFn:function(){void 0!==J&&void 0!==K&&v.call("_guiRelayout",P,{"legend.x":J,"legend.y":K})},clickFn:function(De,Be){var Ze=E.selectAll("g.traces").filter(function(){var Ye=this.getBoundingClientRect();return Be.clientX>=Ye.left&&Be.clientX<=Ye.right&&Be.clientY>=Ye.top&&Be.clientY<=Ye.bottom});Ze.size()>0&&x(P,W,Ze,De,Be)}}))}],P)}}(M,O)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("./helpers");$.exports=function(b,v){var e,n,t=v._inHover,a=m.isGrouped(v),r=m.isReversed(v),u={},s=[],i=!1,l={},c=0,f=0;function g(B,H){if(""!==B&&m.isGrouped(v))-1===s.indexOf(B)?(s.push(B),i=!0,u[B]=[H]):u[B].push(H);else{var V="~~i"+c;s.push(V),u[V]=[H],c++}}for(e=0;e<b.length;e++){var h=b[e],o=h[0],x=o.trace,d=x.legendgroup;if(t||x.visible&&x.showlegend)if(p.traceIs(x,"pie-like"))for(l[d]||(l[d]={}),n=0;n<h.length;n++){var w=h[n].label;l[d][w]||(g(d,{label:w,color:h[n].color,i:h[n].i,trace:x,pts:h[n].pts}),l[d][w]=!0,f=Math.max(f,(w||"").length))}else g(d,o),f=Math.max(f,(x.name||"").length)}if(!s.length)return[];var _=!i||!a,T=[];for(e=0;e<s.length;e++){var k=u[s[e]];T.push(_?k[0]:k)}for(_&&(T=[T]),e=0;e<T.length;e++){var L=1/0;for(n=0;n<T[e].length;n++){var M=T[e][n].trace.legendrank;L>M&&(L=M)}T[e][0]._groupMinRank=L,T[e][0]._preGroupSort=e}var O=function(B,H){return B.trace.legendrank-H.trace.legendrank||B._preSort-H._preSort};for(T.forEach(function(B,H){B[0]._preGroupSort=H}),T.sort(function(B,H){return B[0]._groupMinRank-H[0]._groupMinRank||B[0]._preGroupSort-H[0]._preGroupSort}),e=0;e<T.length;e++){T[e].forEach(function(B,H){B._preSort=H}),T[e].sort(O);var P=T[e][0].trace,S=null;for(n=0;n<T[e].length;n++){var E=T[e][n].trace.legendgrouptitle;if(E&&E.text){S=E,t&&(E.font=v._groupTitleFont);break}}if(r&&T[e].reverse(),S){var R=!1;for(n=0;n<T[e].length;n++)if(p.traceIs(T[e][n].trace,"pie-like")){R=!0;break}T[e].unshift({i:-1,groupTitle:S,noClick:R,trace:{showlegend:P.showlegend,legendgroup:P.legendgroup,visible:"toggleitem"===v.groupclick||P.visible}})}for(n=0;n<T[e].length;n++)T[e][n]=[T[e][n]]}return v._lgroupsLength=T.length,v._maxNameLength=f,T}},{"../../registry":638,"./helpers":422}],421:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../registry"),b=!0;$.exports=function(v,e,n){var t=e._fullLayout;if(!e._dragged&&!e._editing){var a,r=t.legend.itemclick,u=t.legend.itemdoubleclick,s=t.legend.groupclick;if(1===n&&"toggle"===r&&"toggleothers"===u&&b&&e.data&&e._context.showTips&&p.notifier(p._(e,"Double-click on legend to isolate one trace"),"long"),b=!1,1===n?a=r:2===n&&(a=u),a){var i="togglegroup"===s,l=t.hiddenlabels?t.hiddenlabels.slice():[],c=v.data()[0][0];if(!c.groupTitle||!c.noClick){var f,g,h,o,x,d=e._fullData,w=c.trace,_=w.legendgroup,T={},k=[],L=[],M=[];if(m.traceIs(w,"pie-like")){var O=c.label,P=l.indexOf(O);"toggle"===a?-1===P?l.push(O):l.splice(P,1):"toggleothers"===a&&(l=[],e.calcdata[0].forEach(function(U){O!==U.label&&l.push(U.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===l.length&&-1===P&&(l=[])),m.call("_guiRelayout",e,"hiddenlabels",l)}else{var S,E=_&&_.length,R=[];if(E)for(f=0;f<d.length;f++)(S=d[f]).visible&&S.legendgroup===_&&R.push(f);if("toggle"===a){var B;switch(w.visible){case!0:B="legendonly";break;case!1:B=!1;break;case"legendonly":B=!0}if(E)if(i)for(f=0;f<d.length;f++)!1!==d[f].visible&&d[f].legendgroup===_&&N(d[f],B);else N(w,B);else N(w,B)}else if("toggleothers"===a){var Z,G=!0;for(f=0;f<d.length;f++)if(Z=!0!==d[f].showlegend,!(d[f]===w||Z||E&&d[f].legendgroup===_||!0!==d[f].visible||m.traceIs(d[f],"notLegendIsolatable"))){G=!1;break}for(f=0;f<d.length;f++)if(!1!==d[f].visible&&!m.traceIs(d[f],"notLegendIsolatable"))switch(w.visible){case"legendonly":N(d[f],!0);break;case!0:Z=!0!==d[f].showlegend&&!d[f].legendgroup,N(d[f],!!(d[f]===w||E&&d[f].legendgroup===_||Z)||!!G||"legendonly")}}for(f=0;f<L.length;f++)if(h=L[f]){var X=h.constructUpdate(),te=Object.keys(X);for(g=0;g<te.length;g++)(T[o=te[g]]=T[o]||[])[M[f]]=X[o]}for(x=Object.keys(T),f=0;f<x.length;f++)for(o=x[f],g=0;g<k.length;g++)T[o].hasOwnProperty(g)||(T[o][g]=void 0);m.call("_guiRestyle",e,T,k)}}}}function D(U,Q,j){var J=k.indexOf(U),K=T[Q];return K||(K=T[Q]=[]),-1===k.indexOf(U)&&(k.push(U),J=k.length-1),K[J]=j,J}function N(U,Q){if(!c.groupTitle||i){var j=U._fullInput;if(m.hasTransform(j,"groupby")){var J=L[j.index];if(!J){var K=m.getTransformIndices(j,"groupby");J=p.keyedContainer(j,"transforms["+K[K.length-1]+"].styles","target","value.visible"),L[j.index]=J}var ne=J.get(U._group);void 0===ne&&(ne=!0),!1!==ne&&J.set(U._group,Q),M[j.index]=D(j.index,"visible",!1!==j.visible)}else D(j.index,"visible",!1!==j.visible&&Q)}}}},{"../../lib":503,"../../registry":638}],422:[function(y,$,ee){"use strict";ee.isGrouped=function(p){return-1!==(p.traceorder||"").indexOf("grouped")},ee.isVertical=function(p){return"h"!==p.orientation},ee.isReversed=function(p){return-1!==(p.traceorder||"").indexOf("reversed")}},{}],423:[function(y,$,ee){"use strict";$.exports={moduleType:"component",name:"legend",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),draw:y("./draw"),style:y("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../registry"),b=y("../../lib"),v=b.strTranslate,e=y("../drawing"),n=y("../color"),t=y("../colorscale/helpers").extractOpts,a=y("../../traces/scatter/subtypes"),r=y("../../traces/pie/style_one"),u=y("../../traces/pie/helpers").castOption,s=y("./constants");function i(f,g){return(g?"radial":"horizontal")+(f?"":"reversed")}function l(f){var g=f[0].trace,h=g.contours,o=a.hasLines(g),x=a.hasMarkers(g),d=g.visible&&g.fill&&"none"!==g.fill,w=!1,_=!1;if(h){var T=h.coloring;"lines"===T?w=!0:o="none"===T||"heatmap"===T||h.showlines,"constraint"===h.type?d="="!==h._operation:"fill"!==T&&"heatmap"!==T||(_=!0)}return{showMarker:x,showLine:o,showFill:d,showGradientLine:w,showGradientFill:_,anyLine:o||w,anyFill:d||_}}function c(f,g,h){return f&&b.isArrayOrTypedArray(f)?g:f>h?h:f}$.exports=function(f,g,h){h||(h=g._fullLayout.legend);var x="constant"===h.itemsizing,d=h.itemwidth,_=v((d+2*s.itemGap)/2,0),T=function(M,O,P,S){var E;if(M+1)E=M;else{if(!(O&&O.width>0))return 0;E=O.width}return x?S:Math.min(E,P)};function k(M,O,P){var S=M[0].trace,E=S.marker||{},R=E.line||{},B=P?S.visible&&S.type===P:m.traceIs(S,"bar"),H=p.select(O).select("g.legendpoints").selectAll("path.legend"+P).data(B?[M]:[]);H.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),H.exit().remove(),H.each(function(V){var Z=p.select(this),W=V[0],G=T(W.mlw,E.line,5,2);Z.style("stroke-width",G+"px");var X=W.mcc;if(!h._inHover&&"mc"in W){var te=t(E),D=te.mid;void 0===D&&(D=(te.max+te.min)/2),X=e.tryColorscale(E,"")(D)}var N=X||W.mc||E.color,U=E.pattern,Q=U&&e.getPatternAttr(U.shape,0,"");if(Q){var j=e.getPatternAttr(U.bgcolor,0,null),J=e.getPatternAttr(U.fgcolor,0,null),K=U.fgopacity,re=c(U.size,8,10),ne=c(U.solidity,.5,1);Z.call(e.pattern,"legend",g,"legend-"+S.uid,Q,re,ne,X,U.fillmode,j,J,K)}else Z.call(n.fill,N);G&&n.stroke(Z,W.mlc||R.color)})}function L(M,O,P){var S=M[0],E=S.trace,R=P?E.visible&&E.type===P:m.traceIs(E,P),B=p.select(O).select("g.legendpoints").selectAll("path.legend"+P).data(R?[M]:[]);if(B.enter().append("path").classed("legend"+P,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),B.exit().remove(),B.size()){var H=(E.marker||{}).line,V=T(u(H.width,S.pts),H,5,2),Z=b.minExtend(E,{marker:{line:{width:V}}});Z.marker.line.color=H.color;var W=b.minExtend(S,{trace:Z});r(B,W,Z)}}f.each(function(M){var O=p.select(this),P=b.ensureSingle(O,"g","layers");P.style("opacity",M[0].trace.opacity);var S=h.valign,E=M[0].lineHeight,R=M[0].height;P.attr("transform","middle"!==S&&E&&R?v(0,{top:1,bottom:-1}[S]*(.5*(E-R+3))):null),P.selectAll("g.legendfill").data([M]).enter().append("g").classed("legendfill",!0),P.selectAll("g.legendlines").data([M]).enter().append("g").classed("legendlines",!0);var H=P.selectAll("g.legendsymbols").data([M]);H.enter().append("g").classed("legendsymbols",!0),H.selectAll("g.legendpoints").data([M]).enter().append("g").classed("legendpoints",!0)}).each(function(M){var O,P=M[0].trace,S=[];if(P.visible)switch(P.type){case"histogram2d":case"heatmap":S=[["M-15,-2V4H15V-2Z"]],O=!0;break;case"choropleth":case"choroplethmapbox":S=[["M-6,-6V6H6V-6Z"]],O=!0;break;case"densitymapbox":S=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],O="radial";break;case"cone":S=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],O=!1;break;case"streamtube":S=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],O=!1;break;case"surface":S=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],O=!0;break;case"mesh3d":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],O=!1;break;case"volume":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],O=!0;break;case"isosurface":S=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],O=!1}var E=p.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(S);E.enter().append("path").classed("legend3dandfriends",!0).attr("transform",_).style("stroke-miterlimit",1),E.exit().remove(),E.each(function(R,B){var H,V=p.select(this),Z=t(P),W=Z.colorscale,G=Z.reversescale;if(W){if(!O){var X=W.length;H=0===B?W[G?X-1:0][1]:1===B?W[G?0:X-1][1]:W[Math.floor((X-1)/2)][1]}}else{var te=P.vertexcolor||P.facecolor||P.color;H=b.isArrayOrTypedArray(te)?te[B]||te[0]:te}V.attr("d",R[0]),H?V.call(n.fill,H):V.call(function(D){D.size()&&e.gradient(D,g,"legendfill-"+P.uid,i(G,"radial"===O),W,"fill")})})}).each(function(M){var O=M[0].trace,P="waterfall"===O.type;if(M[0]._distinct&&P){var S=M[0].trace[M[0].dir].marker;return M[0].mc=S.color,M[0].mlw=S.line.width,M[0].mlc=S.line.color,k(M,this,"waterfall")}var E=[];O.visible&&P&&(E=M[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var R=p.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(E);R.enter().append("path").classed("legendwaterfall",!0).attr("transform",_).style("stroke-miterlimit",1),R.exit().remove(),R.each(function(B){var H=p.select(this),V=O[B[0]].marker,Z=T(void 0,V.line,5,2);H.attr("d",B[1]).style("stroke-width",Z+"px").call(n.fill,V.color),Z&&H.call(n.stroke,V.line.color)})}).each(function(M){k(M,this,"funnel")}).each(function(M){k(M,this)}).each(function(M){var O=M[0].trace,P=p.select(this).select("g.legendpoints").selectAll("path.legendbox").data(O.visible&&m.traceIs(O,"box-violin")?[M]:[]);P.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",_),P.exit().remove(),P.each(function(){var S=p.select(this);if("all"!==O.boxpoints&&"all"!==O.points||0!==n.opacity(O.fillcolor)||0!==n.opacity((O.line||{}).color)){var E=T(void 0,O.line,5,2);S.style("stroke-width",E+"px").call(n.fill,O.fillcolor),E&&n.stroke(S,O.line.color)}else{var R=b.minExtend(O,{marker:{size:x?12:b.constrain(O.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});P.call(e.pointStyle,R,g)}})}).each(function(M){L(M,this,"funnelarea")}).each(function(M){L(M,this,"pie")}).each(function(M){var O,P,S=l(M),E=S.showFill,R=S.showLine,B=S.showGradientLine,H=S.showGradientFill,V=S.anyFill,Z=S.anyLine,W=M[0],G=W.trace,X=t(G),te=X.colorscale,D=X.reversescale,N=a.hasMarkers(G)||!V?"M5,0":Z?"M5,-2":"M5,-3",U=p.select(this),Q=U.select(".legendfill").selectAll("path").data(E||H?[M]:[]);if(Q.enter().append("path").classed("js-fill",!0),Q.exit().remove(),Q.attr("d",N+"h"+d+"v6h-"+d+"z").call(E?e.fillGroupStyle:function(K){K.size()&&e.gradient(K,g,"legendfill-"+G.uid,i(D),te,"fill")}),R||B){var j=T(void 0,G.line,10,5);P=b.minExtend(G,{line:{width:j}}),O=[b.minExtend(W,{trace:P})]}var J=U.select(".legendlines").selectAll("path").data(R||B?[O]:[]);J.enter().append("path").classed("js-line",!0),J.exit().remove(),J.attr("d",N+(B?"l"+d+",0.0001":"h"+d)).call(R?e.lineGroupStyle:function(K){if(K.size()){var re="legendline-"+G.uid;e.lineGroupStyle(K),e.gradient(K,g,re,i(D),te,"stroke")}})}).each(function(M){var O,P,S=l(M),B=S.showLine,H=S.showMarker,V=M[0],Z=V.trace,W=!H&&!S.anyLine&&!S.anyFill&&a.hasText(Z);function G(J,K,re,ne){var se=b.nestedProperty(Z,J).get(),oe=b.isArrayOrTypedArray(se)&&K?K(se):se;if(x&&oe&&void 0!==ne&&(oe=ne),re){if(oe<re[0])return re[0];if(oe>re[1])return re[1]}return oe}function X(J){return V._distinct&&V.index&&J[V.index]?J[V.index]:J[0]}if(H||W||B){var te={},D={};if(H){te.mc=G("marker.color",X),te.mx=G("marker.symbol",X),te.mo=G("marker.opacity",b.mean,[.2,1]),te.mlc=G("marker.line.color",X),te.mlw=G("marker.line.width",b.mean,[0,5],2),D.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var N=G("marker.size",b.mean,[2,16],12);te.ms=N,D.marker.size=N}B&&(D.line={width:G("line.width",X,[0,10],5)}),W&&(te.tx="Aa",te.tp=G("textposition",X),te.ts=10,te.tc=G("textfont.color",X),te.tf=G("textfont.family",X)),O=[b.minExtend(V,te)],(P=b.minExtend(Z,D)).selectedpoints=null,P.texttemplate=null}var U=p.select(this).select("g.legendpoints"),Q=U.selectAll("path.scatterpts").data(H?O:[]);Q.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",_),Q.exit().remove(),Q.call(e.pointStyle,P,g),H&&(O[0].mrc=3);var j=U.selectAll("g.pointtext").data(W?O:[]);j.enter().append("g").classed("pointtext",!0).append("text").attr("transform",_),j.exit().remove(),j.selectAll("text").call(e.textPointStyle,P,g)}).each(function(M){var O=M[0].trace,P=p.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(O.visible&&"candlestick"===O.type?[M,M]:[]);P.enter().append("path").classed("legendcandle",!0).attr("d",function(S,E){return E?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",_).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(S,E){var R=p.select(this),B=O[E?"increasing":"decreasing"],H=T(void 0,B.line,5,2);R.style("stroke-width",H+"px").call(n.fill,B.fillcolor),H&&n.stroke(R,B.line.color)})}).each(function(M){var O=M[0].trace,P=p.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(O.visible&&"ohlc"===O.type?[M,M]:[]);P.enter().append("path").classed("legendohlc",!0).attr("d",function(S,E){return E?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",_).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(S,E){var R=p.select(this),B=O[E?"increasing":"decreasing"],H=T(void 0,B.line,5,2);R.style("fill","none").call(e.dashLine,B.line.dash,H),H&&n.stroke(R,B.line.color)})})}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":904,"../../traces/pie/style_one":910,"../../traces/scatter/subtypes":950,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(y,$,ee){"use strict";y("./constants"),$.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../plots/plots"),b=y("../../plots/cartesian/axis_ids"),v=y("../../fonts/ploticon"),e=y("../shapes/draw").eraseActiveShape,n=y("../../lib"),t=n._,a=$.exports={};function r(o,x){var d,w,_=x.currentTarget,T=_.getAttribute("data-attr"),k=_.getAttribute("data-val")||!0,L=o._fullLayout,M={},O=b.list(o,null,!0),P=L._cartesianSpikesEnabled;if("zoom"===T){var S,E="in"===k?.5:2,R=(1+E)/2,B=(1-E)/2;for(w=0;w<O.length;w++)if(!(d=O[w]).fixedrange)if(S=d._name,"auto"===k)M[S+".autorange"]=!0;else if("reset"===k){if(void 0===d._rangeInitial)M[S+".autorange"]=!0;else{var H=d._rangeInitial.slice();M[S+".range[0]"]=H[0],M[S+".range[1]"]=H[1]}void 0!==d._showSpikeInitial&&(M[S+".showspikes"]=d._showSpikeInitial,"on"!==P||d._showSpikeInitial||(P="off"))}else{var V=[d.r2l(d.range[0]),d.r2l(d.range[1])],Z=[R*V[0]+B*V[1],R*V[1]+B*V[0]];M[S+".range[0]"]=d.l2r(Z[0]),M[S+".range[1]"]=d.l2r(Z[1])}}else"hovermode"!==T||"x"!==k&&"y"!==k||_.setAttribute("data-val",k=L._isHoriz?"y":"x"),M[T]=k;L._cartesianSpikesEnabled=P,p.call("_guiRelayout",o,M)}function u(o,x){for(var d=x.currentTarget,w=d.getAttribute("data-attr"),_=d.getAttribute("data-val")||!0,T=o._fullLayout._subplots.gl3d||[],k={},L=w.split("."),M=0;M<T.length;M++)k[T[M]+"."+L[1]]=_;k.dragmode="pan"===_?_:"zoom",p.call("_guiRelayout",o,k)}function s(o,x){for(var d=x.currentTarget.getAttribute("data-attr"),w="resetLastSave"===d,_="resetDefault"===d,T=o._fullLayout,k=T._subplots.gl3d||[],L={},M=0;M<k.length;M++){var O,P=k[M],S=P+".camera",E=P+".aspectratio",R=P+".aspectmode",B=T[P]._scene;w?(L[S+".up"]=B.viewInitial.up,L[S+".eye"]=B.viewInitial.eye,L[S+".center"]=B.viewInitial.center,O=!0):_&&(L[S+".up"]=null,L[S+".eye"]=null,L[S+".center"]=null,O=!0),O&&(L[E+".x"]=B.viewInitial.aspectratio.x,L[E+".y"]=B.viewInitial.aspectratio.y,L[E+".z"]=B.viewInitial.aspectratio.z,L[R]=B.viewInitial.aspectmode)}p.call("_guiRelayout",o,L)}function i(o,x){var d=x.currentTarget,w=d._previousVal,_=o._fullLayout,T=_._subplots.gl3d||[],k=["xaxis","yaxis","zaxis"],L={},M={};if(w)M=w,d._previousVal=null;else{for(var O=0;O<T.length;O++){var P=T[O],S=_[P],E=P+".hovermode";L[E]=S.hovermode,M[E]=!1;for(var R=0;R<3;R++){var B=k[R],H=P+"."+B+".showspikes";M[H]=!1,L[H]=S[B].showspikes}}d._previousVal=L}return M}function l(o,x){for(var d=x.currentTarget,w=d.getAttribute("data-attr"),_=d.getAttribute("data-val")||!0,T=o._fullLayout,k=T._subplots.geo||[],L=0;L<k.length;L++){var M=k[L];if("zoom"===w){var P=T[M].projection.scale;p.call("_guiRelayout",o,M+".projection.scale","in"===_?2*P:.5*P)}}"reset"===w&&h(o,"geo")}function c(o){var x=o._fullLayout;return!x.hovermode&&(x._has("cartesian")?x._isHoriz?"y":"x":"closest")}function f(o){var x=c(o);p.call("_guiRelayout",o,"hovermode",x)}function g(o,x){for(var d=x.currentTarget.getAttribute("data-val"),w=o._fullLayout,_=w._subplots.mapbox||[],T={},k=0;k<_.length;k++){var L=_[k],M=w[L].zoom;T[L+".zoom"]="in"===d?1.05*M:M/1.05}p.call("_guiRelayout",o,T)}function h(o,x){for(var d=o._fullLayout,w=d._subplots[x]||[],_={},T=0;T<w.length;T++)for(var k=w[T],L=d[k]._subplot.viewInitial,M=Object.keys(L),O=0;O<M.length;O++){var P=M[O];_[k+"."+P]=L[P]}p.call("_guiRelayout",o,_)}a.toImage={name:"toImage",title:function(o){return t(o,"png"===((o._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:v.camera,click:function(o){var x=o._context.toImageButtonOptions,d={format:x.format||"png"};n.notifier(t(o,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==d.format&&n.isIE()&&(n.notifier(t(o,"IE only supports svg.  Changing format to svg."),"long"),d.format="svg"),["filename","width","height","scale"].forEach(function(w){w in x&&(d[w]=x[w])}),p.call("downloadImage",o,d).then(function(w){n.notifier(t(o,"Snapshot succeeded")+" - "+w,"long")}).catch(function(){n.notifier(t(o,"Sorry, there was a problem downloading your snapshot!"),"long")})}},a.sendDataToCloud={name:"sendDataToCloud",title:function(o){return t(o,"Edit in Chart Studio")},icon:v.disk,click:function(o){m.sendDataToCloud(o)}},a.editInChartStudio={name:"editInChartStudio",title:function(o){return t(o,"Edit in Chart Studio")},icon:v.pencil,click:function(o){m.sendDataToCloud(o)}},a.zoom2d={name:"zoom2d",_cat:"zoom",title:function(o){return t(o,"Zoom")},attr:"dragmode",val:"zoom",icon:v.zoombox,click:r},a.pan2d={name:"pan2d",_cat:"pan",title:function(o){return t(o,"Pan")},attr:"dragmode",val:"pan",icon:v.pan,click:r},a.select2d={name:"select2d",_cat:"select",title:function(o){return t(o,"Box Select")},attr:"dragmode",val:"select",icon:v.selectbox,click:r},a.lasso2d={name:"lasso2d",_cat:"lasso",title:function(o){return t(o,"Lasso Select")},attr:"dragmode",val:"lasso",icon:v.lasso,click:r},a.drawclosedpath={name:"drawclosedpath",title:function(o){return t(o,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:v.drawclosedpath,click:r},a.drawopenpath={name:"drawopenpath",title:function(o){return t(o,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:v.drawopenpath,click:r},a.drawline={name:"drawline",title:function(o){return t(o,"Draw line")},attr:"dragmode",val:"drawline",icon:v.drawline,click:r},a.drawrect={name:"drawrect",title:function(o){return t(o,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:v.drawrect,click:r},a.drawcircle={name:"drawcircle",title:function(o){return t(o,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:v.drawcircle,click:r},a.eraseshape={name:"eraseshape",title:function(o){return t(o,"Erase active shape")},icon:v.eraseshape,click:e},a.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(o){return t(o,"Zoom in")},attr:"zoom",val:"in",icon:v.zoom_plus,click:r},a.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(o){return t(o,"Zoom out")},attr:"zoom",val:"out",icon:v.zoom_minus,click:r},a.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(o){return t(o,"Autoscale")},attr:"zoom",val:"auto",icon:v.autoscale,click:r},a.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(o){return t(o,"Reset axes")},attr:"zoom",val:"reset",icon:v.home,click:r},a.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(o){return t(o,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:v.tooltip_basic,gravity:"ne",click:r},a.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(o){return t(o,"Compare data on hover")},attr:"hovermode",val:function(o){return o._fullLayout._isHoriz?"y":"x"},icon:v.tooltip_compare,gravity:"ne",click:r},a.zoom3d={name:"zoom3d",_cat:"zoom",title:function(o){return t(o,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:v.zoombox,click:u},a.pan3d={name:"pan3d",_cat:"pan",title:function(o){return t(o,"Pan")},attr:"scene.dragmode",val:"pan",icon:v.pan,click:u},a.orbitRotation={name:"orbitRotation",title:function(o){return t(o,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:v["3d_rotate"],click:u},a.tableRotation={name:"tableRotation",title:function(o){return t(o,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:v["z-axis"],click:u},a.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(o){return t(o,"Reset camera to default")},attr:"resetDefault",icon:v.home,click:s},a.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(o){return t(o,"Reset camera to last save")},attr:"resetLastSave",icon:v.movie,click:s},a.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(o){return t(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:v.tooltip_basic,gravity:"ne",click:function(o,x){var d=i(o,x);p.call("_guiRelayout",o,d)}},a.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(o){return t(o,"Zoom in")},attr:"zoom",val:"in",icon:v.zoom_plus,click:l},a.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(o){return t(o,"Zoom out")},attr:"zoom",val:"out",icon:v.zoom_minus,click:l},a.resetGeo={name:"resetGeo",_cat:"reset",title:function(o){return t(o,"Reset")},attr:"reset",val:null,icon:v.autoscale,click:l},a.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(o){return t(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:v.tooltip_basic,gravity:"ne",click:f},a.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(o){return t(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:v.tooltip_basic,gravity:"ne",click:f},a.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(o){return t(o,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:v.tooltip_basic,gravity:"ne",click:f},a.resetViewSankey={name:"resetSankeyGroup",title:function(o){return t(o,"Reset view")},icon:v.home,click:function(o){for(var x={"node.groups":[],"node.x":[],"node.y":[]},d=0;d<o._fullData.length;d++){var w=o._fullData[d]._viewInitial;x["node.groups"].push(w.node.groups.slice()),x["node.x"].push(w.node.x.slice()),x["node.y"].push(w.node.y.slice())}p.call("restyle",o,x)}},a.toggleHover={name:"toggleHover",title:function(o){return t(o,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:v.tooltip_basic,gravity:"ne",click:function(o,x){var d=i(o,x);d.hovermode=c(o),p.call("_guiRelayout",o,d)}},a.resetViews={name:"resetViews",title:function(o){return t(o,"Reset views")},icon:v.home,click:function(o,x){var d=x.currentTarget;d.setAttribute("data-attr","zoom"),d.setAttribute("data-val","reset"),r(o,x),d.setAttribute("data-attr","resetLastSave"),s(o,x),h(o,"geo"),h(o,"mapbox")}},a.toggleSpikelines={name:"toggleSpikelines",title:function(o){return t(o,"Toggle Spike Lines")},icon:v.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(o){var x=o._fullLayout;x._cartesianSpikesEnabled="on"===x._cartesianSpikesEnabled?"off":"on",p.call("_guiRelayout",o,function(w){for(var _="on"===w._fullLayout._cartesianSpikesEnabled,T=b.list(w,null,!0),k={},L=0;L<T.length;L++){var M=T[L];k[M._name+".showspikes"]=!!_||M._showSpikeInitial}return k}(o))}},a.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(o){return t(o,"Reset view")},attr:"reset",icon:v.home,click:function(o){h(o,"mapbox")}},a.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(o){return t(o,"Zoom in")},attr:"zoom",val:"in",icon:v.zoom_plus,click:g},a.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(o){return t(o,"Zoom out")},attr:"zoom",val:"out",icon:v.zoom_minus,click:g}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(y,$,ee){"use strict";var p=y("./buttons"),m=Object.keys(p),b=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],v=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(b),e=[];m.forEach(function(n){!function(t){if(-1===v.indexOf(t._cat||t.name)){var a=t.name,r=(t._cat||t.name).toLowerCase();-1===e.indexOf(a)&&e.push(a),-1===e.indexOf(r)&&e.push(r)}}(p[n])}),e.sort(),$.exports={DRAW_MODES:b,backButtons:v,foreButtons:e}},{"./buttons":426}],428:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../color"),b=y("../../plot_api/plot_template"),v=y("./attributes");$.exports=function(e,n){var t=e.modebar||{},a=b.newContainer(n,"modebar");function r(s,i){return p.coerce(t,a,v,s,i)}r("orientation"),r("bgcolor",m.addOpacity(n.paper_bgcolor,.5));var u=m.contrast(m.rgb(n.modebar.bgcolor));r("color",m.addOpacity(u,.3)),r("activecolor",m.addOpacity(u,.7)),r("uirevision",n.uirevision),r("add"),r("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(y,$,ee){"use strict";$.exports={moduleType:"component",name:"modebar",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),manage:y("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axis_ids"),m=y("../../traces/scatter/subtypes"),b=y("../../registry"),v=y("../fx/helpers").isUnifiedHover,e=y("./modebar"),n=y("./buttons"),t=y("./constants").DRAW_MODES;$.exports=function(a){var r=a._fullLayout,u=a._context,s=r._modeBar;if(u.displayModeBar||u.watermark){if(!Array.isArray(u.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(u.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i,l=u.modeBarButtons;i=Array.isArray(l)&&l.length?function(c){for(var f=0;f<c.length;f++)for(var g=c[f],h=0;h<g.length;h++){var o=g[h];if("string"==typeof o){if(void 0===n[o])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));c[f][h]=n[o]}}return c}(l):!u.displayModeBar&&u.watermark?[]:function(c){var f=c._fullLayout,g=c._fullData,h=c._context;function o(ne,se){if("string"==typeof se){if(se.toLowerCase()===ne.toLowerCase())return!0}else if(se.name===ne||(se._cat||se.name)===ne.toLowerCase())return!0;return!1}var x=f.modebar.add;"string"==typeof x&&(x=[x]);var d=f.modebar.remove;"string"==typeof d&&(d=[d]);var w=h.modeBarButtonsToAdd.concat(x.filter(function(ne){for(var se=0;se<h.modeBarButtonsToRemove.length;se++)if(o(ne,h.modeBarButtonsToRemove[se]))return!1;return!0})),_=h.modeBarButtonsToRemove.concat(d.filter(function(ne){for(var se=0;se<h.modeBarButtonsToAdd.length;se++)if(o(ne,h.modeBarButtonsToAdd[se]))return!1;return!0})),T=f._has("cartesian"),k=f._has("gl3d"),L=f._has("geo"),M=f._has("pie"),O=f._has("funnelarea"),P=f._has("gl2d"),S=f._has("ternary"),E=f._has("mapbox"),R=f._has("polar"),B=f._has("smith"),H=f._has("sankey"),V=function(ne){for(var se=p.list({_fullLayout:ne},null,!0),oe=0;oe<se.length;oe++)if(!se[oe].fixedrange)return!1;return!0}(f),Z=v(f.hovermode),W=[];function G(ne){if(ne.length){for(var se=[],oe=0;oe<ne.length;oe++){for(var pe=ne[oe],ce=n[pe],ge=ce.name.toLowerCase(),xe=(ce._cat||ce.name).toLowerCase(),we=!1,be=0;be<_.length;be++){var Se=_[be].toLowerCase();if(Se===ge||Se===xe){we=!0;break}}we||se.push(n[pe])}W.push(se)}}var X=["toImage"];h.showEditInChartStudio?X.push("editInChartStudio"):h.showSendToCloud&&X.push("sendDataToCloud"),G(X);var te=[],D=[],N=[],U=[];(T||P||M||O||S)+L+k+E+R+B>1?(D=["toggleHover"],N=["resetViews"]):L?(te=["zoomInGeo","zoomOutGeo"],D=["hoverClosestGeo"],N=["resetGeo"]):k?(D=["hoverClosest3d"],N=["resetCameraDefault3d","resetCameraLastSave3d"]):E?(te=["zoomInMapbox","zoomOutMapbox"],D=["toggleHover"],N=["resetViewMapbox"]):P?D=["hoverClosestGl2d"]:M?D=["hoverClosestPie"]:H?(D=["hoverClosestCartesian","hoverCompareCartesian"],N=["resetViewSankey"]):D=["toggleHover"],T&&(D=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(ne){for(var se=0;se<ne.length;se++)if(!b.traceIs(ne[se],"noHover"))return!1;return!0}(g)||Z)&&(D=[]),!T&&!P||V||(te=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==N[0]&&(N=["resetScale2d"])),k?U=["zoom3d","pan3d","orbitRotation","tableRotation"]:(T||P)&&!V||S?U=["zoom2d","pan2d"]:E||L?U=["pan2d"]:R&&(U=["zoom2d"]),function(ne){for(var se=!1,oe=0;oe<ne.length&&!se;oe++){var pe=ne[oe];pe._module&&pe._module.selectPoints&&(b.traceIs(pe,"scatter-like")?(m.hasMarkers(pe)||m.hasText(pe))&&(se=!0):b.traceIs(pe,"box-violin")&&"all"!==pe.boxpoints&&"all"!==pe.points||(se=!0))}return se}(g)&&U.push("select2d","lasso2d");var Q=[],j=function(ne){-1===Q.indexOf(ne)&&-1!==D.indexOf(ne)&&Q.push(ne)};if(Array.isArray(w)){for(var J=[],K=0;K<w.length;K++){var re=w[K];"string"==typeof re?(re=re.toLowerCase(),-1!==t.indexOf(re)?(f._has("mapbox")||f._has("cartesian"))&&U.push(re):"togglespikelines"===re?j("toggleSpikelines"):"togglehover"===re?j("toggleHover"):"hovercompare"===re?j("hoverCompareCartesian"):"hoverclosest"===re?(j("hoverClosestCartesian"),j("hoverClosestGeo"),j("hoverClosest3d"),j("hoverClosestGl2d"),j("hoverClosestPie")):"v1hovermode"===re&&(j("toggleHover"),j("hoverClosestCartesian"),j("hoverCompareCartesian"),j("hoverClosestGeo"),j("hoverClosest3d"),j("hoverClosestGl2d"),j("hoverClosestPie"))):J.push(re)}w=J}return G(U),G(te.concat(N)),G(Q),function(ne,se){if(se.length)if(Array.isArray(se[0]))for(var oe=0;oe<se.length;oe++)ne.push(se[oe]);else ne.push(se);return ne}(W,w)}(a),s?s.update(a,i):r._modeBar=e(a,i)}else s&&(s.destroy(),delete r._modeBar)}},{"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":950,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("fast-isnumeric"),b=y("../../lib"),v=y("../../fonts/ploticon"),e=new DOMParser;function n(a){this.container=a.container,this.element=document.createElement("div"),this.update(a.graphInfo,a.buttons),this.container.appendChild(this.element)}var t=n.prototype;t.update=function(a,r){this.graphInfo=a;var u=this.graphInfo._context,s=this.graphInfo._fullLayout,i="modebar-"+s._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===u.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===s.modebar.orientation&&(this.element.className+=" vertical",r=r.reverse());var l=s.modebar,c="hover"===u.displayModeBar?".js-plotly-plot .plotly:hover ":"";b.deleteRelatedStyleRule(i),b.addRelatedStyleRule(i,c+"#"+i+" .modebar-group","background-color: "+l.bgcolor),b.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+l.color),b.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+l.activecolor),b.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+l.activecolor);var f=!this.hasButtons(r),g=this.hasLogo!==u.displaylogo,h=this.locale!==u.locale;if(this.locale=u.locale,(f||g||h)&&(this.removeAllButtons(),this.updateButtons(r),u.watermark||u.displaylogo)){var o=this.getLogo();u.watermark&&(o.className=o.className+" watermark"),"v"===s.modebar.orientation?this.element.insertBefore(o,this.element.childNodes[0]):this.element.appendChild(o),this.hasLogo=!0}this.updateActiveButton()},t.updateButtons=function(a){var r=this;this.buttons=a,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(u){var s=r.createGroup();u.forEach(function(i){var l=i.name;if(!l)throw new Error("must provide button 'name' in button config");if(-1!==r.buttonsNames.indexOf(l))throw new Error("button name '"+l+"' is taken");r.buttonsNames.push(l);var c=r.createButton(i);r.buttonElements.push(c),s.appendChild(c)}),r.element.appendChild(s)})},t.createGroup=function(){var a=document.createElement("div");return a.className="modebar-group",a},t.createButton=function(a){var r=this,u=document.createElement("a");u.setAttribute("rel","tooltip"),u.className="modebar-btn";var s=a.title;void 0===s?s=a.name:"function"==typeof s&&(s=s(this.graphInfo)),(s||0===s)&&u.setAttribute("data-title",s),void 0!==a.attr&&u.setAttribute("data-attr",a.attr);var i=a.val;if(void 0!==i&&("function"==typeof i&&(i=i(this.graphInfo)),u.setAttribute("data-val",i)),"function"!=typeof a.click)throw new Error("must provide button 'click' function in button config");u.addEventListener("click",function(c){a.click(r.graphInfo,c),r.updateActiveButton(c.currentTarget)}),u.setAttribute("data-toggle",a.toggle||!1),a.toggle&&p.select(u).classed("active",!0);var l=a.icon;return u.appendChild("function"==typeof l?l():this.createIcon(l||v.question)),u.setAttribute("data-gravity",a.gravity||"n"),u},t.createIcon=function(a){var r,u=m(a.height)?Number(a.height):a.ascent-a.descent,s="http://www.w3.org/2000/svg";if(a.path){(r=document.createElementNS(s,"svg")).setAttribute("viewBox",[0,0,a.width,u].join(" ")),r.setAttribute("class","icon");var i=document.createElementNS(s,"path");i.setAttribute("d",a.path),a.transform?i.setAttribute("transform",a.transform):void 0!==a.ascent&&i.setAttribute("transform","matrix(1 0 0 -1 0 "+a.ascent+")"),r.appendChild(i)}return a.svg&&(r=e.parseFromString(a.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},t.updateActiveButton=function(a){var r=this.graphInfo._fullLayout,u=void 0!==a?a.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var i=s.getAttribute("data-val")||!0,l=s.getAttribute("data-attr"),c="true"===s.getAttribute("data-toggle"),f=p.select(s);if(c)l===u&&f.classed("active",!f.classed("active"));else{var g=null===l?l:b.nestedProperty(r,l).get();f.classed("active",g===i)}})},t.hasButtons=function(a){var r=this.buttons;if(!r||a.length!==r.length)return!1;for(var u=0;u<a.length;++u){if(a[u].length!==r[u].length)return!1;for(var s=0;s<a[u].length;s++)if(a[u][s].name!==r[u][s].name)return!1}return!0},t.getLogo=function(){var a=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",b._(this.graphInfo,"Produced with Plotly")),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(v.newplotlylogo)),a.appendChild(r),a},t.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},t.destroy=function(){b.removeElement(this.container.querySelector(".modebar")),b.deleteRelatedStyleRule(this._uid)},$.exports=function(a,r){var u=a._fullLayout,s=new n({graphInfo:a,container:u._modebardiv.node(),buttons:r});return u._privateplot&&p.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}},{"../../fonts/ploticon":482,"../../lib":503,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(y,$,ee){"use strict";var p=y("../../plots/font_attributes"),m=y("../color/attributes"),b=(0,y("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});$.exports={visible:{valType:"boolean",editType:"plot"},buttons:b,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:p({editType:"plot"}),bgcolor:{valType:"color",dflt:m.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(y,$,ee){"use strict";$.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../color"),b=y("../../plot_api/plot_template"),v=y("../../plots/array_container_defaults"),e=y("./attributes"),n=y("./constants");function t(a,r,u,s){var i=s.calendar;function l(f,g){return p.coerce(a,r,e.buttons,f,g)}if(l("visible")){var c=l("step");"all"!==c&&(!i||"gregorian"===i||"month"!==c&&"year"!==c?l("stepmode"):r.stepmode="backward",l("count")),l("label")}}$.exports=function(a,r,u,s,i){var l=a.rangeselector||{},c=b.newContainer(r,"rangeselector");function f(o,x){return p.coerce(l,c,e,o,x)}if(f("visible",v(l,c,{name:"buttons",handleItemDefaults:t,calendar:i}).length>0)){var g=function(o,x,d){for(var w=d.filter(function(L){return x[L].anchor===o._id}),_=0,T=0;T<w.length;T++){var k=x[w[T]].domain;k&&(_=Math.max(k[1],_))}return[o.domain[0],_+n.yPad]}(r,u,s);f("x",g[0]),f("y",g[1]),p.noneOrAll(a,r,["x","y"]),f("xanchor"),f("yanchor"),p.coerceFont(f,"font",u.font);var h=f("bgcolor");f("activecolor",m.contrast(h,n.lightAmount,n.darkAmount)),f("bordercolor"),f("borderwidth")}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../registry"),b=y("../../plots/plots"),v=y("../color"),e=y("../drawing"),n=y("../../lib"),t=n.strTranslate,a=y("../../lib/svg_text_utils"),r=y("../../plots/cartesian/axis_ids"),u=y("../../constants/alignment"),s=u.LINE_SPACING,i=u.FROM_TL,l=u.FROM_BR,c=y("./constants"),f=y("./get_update_object");function g(x){return x._id}function h(x,d,w){var T,k,_=n.ensureSingle(x,"rect","selector-rect",function(T){T.attr("shape-rendering","crispEdges")});_.attr({rx:c.rx,ry:c.ry}),_.call(v.stroke,d.bordercolor).call(v.fill,(T=d,k=w,k._isActive||k._isHovered?T.activecolor:T.bgcolor)).style("stroke-width",d.borderwidth+"px")}function o(x,d,w,_){var T,k;n.ensureSingle(x,"text","selector-text",function(T){T.attr("text-anchor","middle")}).call(e.font,d.font).text((T=w,k=_._fullLayout._meta,T.label?k?n.templateString(T.label,k):T.label:"all"===T.step?"all":T.count+T.step.charAt(0))).call(function(T){a.convertToTspans(T,_)})}$.exports=function(x){var d=x._fullLayout._infolayer.selectAll(".rangeselector").data(function(w){for(var _=r.list(w,"x",!0),T=[],k=0;k<_.length;k++){var L=_[k];L.rangeselector&&L.rangeselector.visible&&T.push(L)}return T}(x),g);d.enter().append("g").classed("rangeselector",!0),d.exit().remove(),d.style({cursor:"pointer","pointer-events":"all"}),d.each(function(w){var _=p.select(this),T=w,k=T.rangeselector,L=_.selectAll("g.button").data(n.filterVisible(k.buttons));L.enter().append("g").classed("button",!0),L.exit().remove(),L.each(function(M){var O=p.select(this),P=f(T,M);M._isActive=function(S,E,R){if("all"===E.step)return!0===S.autorange;var B=Object.keys(R);return S.range[0]===R[B[0]]&&S.range[1]===R[B[1]]}(T,M,P),O.call(h,k,M),O.call(o,k,M,x),O.on("click",function(){x._dragged||m.call("_guiRelayout",x,P)}),O.on("mouseover",function(){M._isHovered=!0,O.call(h,k,M)}),O.on("mouseout",function(){M._isHovered=!1,O.call(h,k,M)})}),function(M,O,P,S,E){var R=0,B=0,H=P.borderwidth;O.each(function(){var te=p.select(this).select(".selector-text"),N=Math.max(P.font.size*s*a.lineCount(te),16)+3;B=Math.max(B,N)}),O.each(function(){var te=p.select(this),D=te.select(".selector-rect"),N=te.select(".selector-text"),U=N.node()&&e.bBox(N.node()).width,Q=P.font.size*s,j=a.lineCount(N),J=Math.max(U+10,c.minButtonWidth);te.attr("transform",t(H+R,H)),D.attr({x:0,y:0,width:J,height:B}),a.positionText(N,J/2,B/2-(j-1)*Q/2+3),R+=J+5});var V=M._fullLayout._size,Z=V.l+V.w*P.x,W=V.t+V.h*(1-P.y),G="left";n.isRightAnchor(P)&&(Z-=R,G="right"),n.isCenterAnchor(P)&&(Z-=R/2,G="center");var X="top";n.isBottomAnchor(P)&&(W-=B,X="bottom"),n.isMiddleAnchor(P)&&(W-=B/2,X="middle"),R=Math.ceil(R),B=Math.ceil(B),Z=Math.round(Z),W=Math.round(W),b.autoMargin(M,S+"-range-selector",{x:P.x,y:P.y,l:R*i[G],r:R*l[G],b:B*l[X],t:B*i[X]}),E.attr("transform",t(Z,W))}(x,L,k,T._name,_)})}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(y,$,ee){"use strict";var p=y("d3-time"),m=y("../../lib").titleCase;$.exports=function(b,v){var e=b._name,n={};if("all"===v.step)n[e+".autorange"]=!0;else{var t=function(a,r){var u,s=a.range,i=new Date(a.r2l(s[1])),c=p["utc"+m(r.step)],f=r.count;switch(r.stepmode){case"backward":u=a.l2r(+c.offset(i,-f));break;case"todate":var g=c.offset(i,-f);u=a.l2r(+c.ceil(g))}return[u,s[1]]}(b,v);n[e+".range[0]"]=t[0],n[e+".range[1]"]=t[1]}return n}},{"../../lib":503,"d3-time":122}],437:[function(y,$,ee){"use strict";$.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:y("./attributes")}}},layoutAttributes:y("./attributes"),handleDefaults:y("./defaults"),draw:y("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(y,$,ee){"use strict";var p=y("../color/attributes");$.exports={bgcolor:{valType:"color",dflt:p.background,editType:"plot"},bordercolor:{valType:"color",dflt:p.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axis_ids").list,m=y("../../plots/cartesian/autorange").getAutoRange,b=y("./constants");$.exports=function(v){for(var e=p(v,"x",!0),n=0;n<e.length;n++){var t=e[n],a=t[b.name];a&&a.visible&&a.autorange&&(a._input.autorange=!0,a._input.range=a.range=m(v,t))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(y,$,ee){"use strict";$.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plot_api/plot_template"),b=y("../../plots/cartesian/axis_ids"),v=y("./attributes"),e=y("./oppaxis_attributes");$.exports=function(n,t,a){var r=n[a],u=t[a];if(r.rangeslider||t._requestRangeslider[u._id]){p.isPlainObject(r.rangeslider)||(r.rangeslider={});var s,i,l=r.rangeslider,c=m.newContainer(u,"rangeslider");if(_("visible")){_("bgcolor",t.plot_bgcolor),_("bordercolor"),_("borderwidth"),_("thickness"),_("autorange",!u.isValidRange(l.range)),_("range");var f=t._subplots;if(f)for(var g=f.cartesian.filter(function(k){return k.substr(0,k.indexOf("y"))===b.name2id(a)}).map(function(k){return k.substr(k.indexOf("y"),k.length)}),h=p.simpleMap(g,b.id2name),o=0;o<h.length;o++){var x=h[o];s=l[x]||{},i=m.newContainer(c,x,"yaxis");var d,w=t[x];s.range&&w.isValidRange(s.range)&&(d="fixed"),"match"!==T("rangemode",d)&&T("range",w.range.slice())}c._input=l}}function _(k,L){return p.coerce(l,c,v,k,L)}function T(k,L){return p.coerce(s,i,e,k,L)}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../registry"),b=y("../../plots/plots"),v=y("../../lib"),e=v.strTranslate,n=y("../drawing"),t=y("../color"),a=y("../titles"),r=y("../../plots/cartesian"),u=y("../../plots/cartesian/axis_ids"),s=y("../dragelement"),i=y("../../lib/setcursor"),l=y("./constants");function c(d,w,_,T){var k=v.ensureSingle(d,"rect",l.bgClassName,function(P){P.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),L=T.borderwidth%2==0?T.borderwidth:T.borderwidth-1,M=-T._offsetShift,O=n.crispRound(w,T.borderwidth);k.attr({width:T._width+L,height:T._height+L,transform:e(M,M),fill:T.bgcolor,stroke:T.bordercolor,"stroke-width":O})}function f(d,w,_,T){v.ensureSingleById(w._fullLayout._topdefs,"clipPath",T._clipId,function(L){L.append("rect").attr({x:0,y:0})}).select("rect").attr({width:T._width,height:T._height})}function g(d,w,_,T){var k,L=w.calcdata,M=d.selectAll("g."+l.rangePlotClassName).data(_._subplotsWith,v.identity);M.enter().append("g").attr("class",function(O){return l.rangePlotClassName+" "+O}).call(n.setClipUrl,T._clipId,w),M.order(),M.exit().remove(),M.each(function(O,P){var S=p.select(this),E=0===P,R=u.getFromId(w,O,"y"),B=R._name,H=T[B],V={data:[],layout:{xaxis:{type:_.type,domain:[0,1],range:T.range.slice(),calendar:_.calendar},width:T._width,height:T._height,margin:{t:0,b:0,l:0,r:0}},_context:w._context};_.rangebreaks&&(V.layout.xaxis.rangebreaks=_.rangebreaks),V.layout[B]={type:R.type,domain:[0,1],range:"match"!==H.rangemode?H.range.slice():R.range.slice(),calendar:R.calendar},R.rangebreaks&&(V.layout[B].rangebreaks=R.rangebreaks),b.supplyDefaults(V);var Z=V._fullLayout.xaxis,W=V._fullLayout[B];Z.clearCalc(),Z.setScale(),W.clearCalc(),W.setScale();var G={id:O,plotgroup:S,xaxis:Z,yaxis:W,isRangePlot:!0};E?k=G:(G.mainplot="xy",G.mainplotinfo=k),r.rangePlot(w,G,function(X,te){for(var D=[],N=0;N<X.length;N++){var U=X[N],Q=U[0].trace;Q.xaxis+Q.yaxis===te&&D.push(U)}return D}(L,O))})}function h(d,w,_,T,k){v.ensureSingle(d,"rect",l.maskMinClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",T._height).call(t.fill,l.maskColor),v.ensureSingle(d,"rect",l.maskMaxClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",T._height).call(t.fill,l.maskColor),"match"!==k.rangemode&&(v.ensureSingle(d,"rect",l.maskMinOppAxisClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",T._width).call(t.fill,l.maskOppAxisColor),v.ensureSingle(d,"rect",l.maskMaxOppAxisClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",T._width).style("border-top",l.maskOppBorder).call(t.fill,l.maskOppAxisColor))}function o(d,w,_,T){w._context.staticPlot||v.ensureSingle(d,"rect",l.slideBoxClassName,function(k){k.attr({y:0,cursor:l.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:T._height,fill:l.slideBoxFill})}function x(d,w,_,T){var k=v.ensureSingle(d,"g",l.grabberMinClassName),L=v.ensureSingle(d,"g",l.grabberMaxClassName),M={x:0,width:l.handleWidth,rx:l.handleRadius,fill:t.background,stroke:t.defaultLine,"stroke-width":l.handleStrokeWidth,"shape-rendering":"crispEdges"},O={y:Math.round(T._height/4),height:Math.round(T._height/2)};v.ensureSingle(k,"rect",l.handleMinClassName,function(S){S.attr(M)}).attr(O),v.ensureSingle(L,"rect",l.handleMaxClassName,function(S){S.attr(M)}).attr(O);var P={width:l.grabAreaWidth,x:0,y:0,fill:l.grabAreaFill,cursor:w._context.staticPlot?void 0:l.grabAreaCursor};v.ensureSingle(k,"rect",l.grabAreaMinClassName,function(S){S.attr(P)}).attr("height",T._height),v.ensureSingle(L,"rect",l.grabAreaMaxClassName,function(S){S.attr(P)}).attr("height",T._height)}$.exports=function(d){for(var w=d._fullLayout,_=w._rangeSliderData,T=0;T<_.length;T++){var k=_[T][l.name];k._clipId=k._id+"-"+w._uid}var L=w._infolayer.selectAll("g."+l.containerClassName).data(_,function(M){return M._name});L.exit().each(function(M){w._topdefs.select("#"+M[l.name]._clipId).remove()}).remove(),0!==_.length&&(L.enter().append("g").classed(l.containerClassName,!0).attr("pointer-events","all"),L.each(function(M){var O=p.select(this),P=M[l.name],S=w[u.id2name(M.anchor)],E=P[u.id2name(M.anchor)];if(P.range){var R,B=v.simpleMap(P.range,M.r2l),H=v.simpleMap(M.range,M.r2l);R=H[0]<H[1]?[Math.min(B[0],H[0]),Math.max(B[1],H[1])]:[Math.max(B[0],H[0]),Math.min(B[1],H[1])],P.range=P._input.range=v.simpleMap(R,M.l2r)}M.cleanRange("rangeslider.range");var V=w._size,Z=M.domain;P._width=V.w*(Z[1]-Z[0]);var W=Math.round(V.l+V.w*Z[0]),G=Math.round(V.t+V.h*(1-M._counterDomainMin)+("bottom"===M.side?M._depth:0)+P._offsetShift+l.extraPad);O.attr("transform",e(W,G)),P._rl=v.simpleMap(P.range,M.r2l);var X=P._rl[0],te=P._rl[1],D=te-X;if(P.p2d=function(se){return se/P._width*D+X},P.d2p=function(se){return(se-X)/D*P._width},M.rangebreaks){var N=M.locateBreaks(X,te);if(N.length){var U,Q,j=0;for(U=0;U<N.length;U++)j+=(Q=N[U]).max-Q.min;var J=P._width/(te-X-j),K=[-J*X];for(U=0;U<N.length;U++)K.push(K[K.length-1]-J*((Q=N[U]).max-Q.min));for(P.d2p=function(se){for(var oe=K[0],pe=0;pe<N.length;pe++){var ce=N[pe];if(se>=ce.max)oe=K[pe+1];else if(se<ce.min)break}return oe+J*se},U=0;U<N.length;U++)(Q=N[U]).pmin=P.d2p(Q.min),Q.pmax=P.d2p(Q.max);P.p2d=function(se){for(var oe=K[0],pe=0;pe<N.length;pe++){var ce=N[pe];if(se>=ce.pmax)oe=K[pe+1];else if(se<ce.pmin)break}return(se-oe)/J}}}if("match"!==E.rangemode){var re=S.r2l(E.range[0]),ne=S.r2l(E.range[1])-re;P.d2pOppAxis=function(se){return(se-re)/ne*P._height}}O.call(c,d,M,P).call(f,d,M,P).call(g,d,M,P).call(h,d,M,P,E).call(o,d,M,P).call(x,d,M,P),function(se,oe,pe,ce){if(!oe._context.staticPlot){var ge=se.select("rect."+l.slideBoxClassName).node(),xe=se.select("rect."+l.grabAreaMinClassName).node(),we=se.select("rect."+l.grabAreaMaxClassName).node();se.on("mousedown",be),se.on("touchstart",be)}function be(){var Se=p.event,fe=Se.target,me=Se.clientX||Se.touches[0].clientX,Te=me-se.node().getBoundingClientRect().left,_e=ce.d2p(pe._rl[0]),Me=ce.d2p(pe._rl[1]),Ie=s.coverSlip();function ze(Je){var De,Be,Ze,Ye=+(Je.clientX||Je.touches[0].clientX)-me;switch(fe){case ge:Ze="ew-resize",De=_e+Ye,Be=Me+Ye;break;case xe:Ze="col-resize",De=_e+Ye,Be=Me;break;case we:Ze="col-resize",De=_e,Be=Me+Ye;break;default:Ze="ew-resize",De=Te,Be=Te+Ye}if(Be<De){var tt=Be;Be=De,De=tt}ce._pixelMin=De,ce._pixelMax=Be,i(p.select(Ie),Ze),function(st,vt,Pt,Mt){function rt(Rt){return Pt.l2r(v.constrain(Rt,Mt._rl[0],Mt._rl[1]))}var et=rt(Mt.p2d(Mt._pixelMin)),bt=rt(Mt.p2d(Mt._pixelMax));window.requestAnimationFrame(function(){m.call("_guiRelayout",vt,Pt._name+".range",[et,bt])})}(0,oe,pe,ce)}function Ve(){Ie.removeEventListener("mousemove",ze),Ie.removeEventListener("mouseup",Ve),this.removeEventListener("touchmove",ze),this.removeEventListener("touchend",Ve),v.removeElement(Ie)}this.addEventListener("touchmove",ze),this.addEventListener("touchend",Ve),Ie.addEventListener("mousemove",ze),Ie.addEventListener("mouseup",Ve)}}(O,d,M,P),function(se,oe,pe,ce,ge,xe){var we=l.handleWidth/2;function be(Ve){return v.constrain(Ve,0,ce._width)}function Se(Ve){return v.constrain(Ve,0,ce._height)}function fe(Ve){return v.constrain(Ve,-we,ce._width+we)}var me=be(ce.d2p(pe._rl[0])),Te=be(ce.d2p(pe._rl[1]));if(se.select("rect."+l.slideBoxClassName).attr("x",me).attr("width",Te-me),se.select("rect."+l.maskMinClassName).attr("width",me),se.select("rect."+l.maskMaxClassName).attr("x",Te).attr("width",ce._width-Te),"match"!==xe.rangemode){var _e=ce._height-Se(ce.d2pOppAxis(ge._rl[1])),Me=ce._height-Se(ce.d2pOppAxis(ge._rl[0]));se.select("rect."+l.maskMinOppAxisClassName).attr("x",me).attr("height",_e).attr("width",Te-me),se.select("rect."+l.maskMaxOppAxisClassName).attr("x",me).attr("y",Me).attr("height",ce._height-Me).attr("width",Te-me),se.select("rect."+l.slideBoxClassName).attr("y",_e).attr("height",Me-_e)}var Ie=Math.round(fe(me-we))-.5,ze=Math.round(fe(Te-we))+.5;se.select("g."+l.grabberMinClassName).attr("transform",e(Ie,.5)),se.select("g."+l.grabberMaxClassName).attr("transform",e(ze,.5))}(O,0,M,P,S,E),"bottom"===M.side&&a.draw(d,M._id+"title",{propContainer:M,propName:M._name+".title",placeholder:w._dfltTitle.x,attributes:{x:M._offset+M._length/2,y:G+P._height+P._offsetShift+10+1.5*M.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axis_ids"),m=y("../../lib/svg_text_utils"),b=y("./constants"),v=y("../../constants/alignment").LINE_SPACING,e=b.name;function n(t){var a=t&&t[e];return a&&a.visible}ee.isVisible=n,ee.makeData=function(t){var a=p.list({_fullLayout:t},"x",!0),r=t.margin,u=[];if(!t._has("gl2d"))for(var s=0;s<a.length;s++){var i=a[s];if(n(i)){u.push(i);var l=i[e];l._id=e+i._id,l._height=(t.height-r.b-r.t)*l.thickness,l._offsetShift=Math.floor(l.borderwidth/2)}}t._rangeSliderData=u},ee.autoMarginOpts=function(t,a){var r=t._fullLayout,u=a[e],s=a._id.charAt(0),i=0,l=0;return"bottom"===a.side&&(i=a._depth,a.title.text!==r._dfltTitle[s]&&(l=1.5*a.title.font.size+10+u._offsetShift,l+=(a.title.text.match(m.BR_TAG_ALL)||[]).length*a.title.font.size*v)),{x:0,y:a._counterDomainMin,l:0,r:0,t:0,b:u._height+i+Math.max(r.margin.b,l),pad:b.extraPad+2*u._offsetShift}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./attributes"),b=y("./oppaxis_attributes"),v=y("./helpers");$.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:p.extendFlat({},m,{yaxis:b})}}},layoutAttributes:y("./attributes"),handleDefaults:y("./defaults"),calcAutorange:y("./calc_autorange"),draw:y("./draw"),isVisible:v.isVisible,makeData:v.makeData,autoMarginOpts:v.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(y,$,ee){"use strict";$.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(y,$,ee){"use strict";var p=y("../annotations/attributes"),m=y("../../traces/scatter/attributes").line,b=y("../drawing/attributes").dash,v=y("../../lib/extend").extendFlat,e=y("../../plot_api/plot_template").templatedArray;y("../../constants/axis_placeable_objects"),$.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:v({},p.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:v({},p.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:v({},m.color,{editType:"arraydraw"}),width:v({},m.width,{editType:"calc+arraydraw"}),dash:v({},b,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":925,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/cartesian/axes"),b=y("./constants"),v=y("./helpers");function e(r){return t(r.line.width,r.xsizemode,r.x0,r.x1,r.path,!1)}function n(r){return t(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function t(r,u,s,i,l,c){var f=r/2,g=c;if("pixel"===u){var h=l?v.extractPathCoords(l,c?b.paramIsY:b.paramIsX):[s,i],o=p.aggNums(Math.max,null,h),x=p.aggNums(Math.min,null,h),d=x<0?Math.abs(x)+f:f,w=o>0?o+f:f;return{ppad:f,ppadplus:g?d:w,ppadminus:g?w:d}}return{ppad:f}}function a(r,u,s,i,l){var c="category"===r.type||"multicategory"===r.type?r.r2c:r.d2c;if(void 0!==u)return[c(u),c(s)];if(i){var f,g,h,o,x=1/0,d=-1/0,w=i.match(b.segmentRE);for("date"===r.type&&(c=v.decodeDate(c)),f=0;f<w.length;f++)void 0!==(g=l[w[f].charAt(0)].drawn)&&(!(h=w[f].substr(1).match(b.paramRE))||h.length<g||((o=c(h[g]))<x&&(x=o),o>d&&(d=o)));return d>=x?[x,d]:void 0}}$.exports=function(r){var s=p.filterVisible(r._fullLayout.shapes);if(s.length&&r._fullData.length)for(var i=0;i<s.length;i++){var l,c,f=s[i];f._extremes={};var g=m.getRefType(f.xref),h=m.getRefType(f.yref);if("paper"!==f.xref&&"domain"!==g){var o="pixel"===f.xsizemode?f.xanchor:f.x0,x="pixel"===f.xsizemode?f.xanchor:f.x1;(c=a(l=m.getFromId(r,f.xref),o,x,f.path,b.paramIsX))&&(f._extremes[l._id]=m.findExtremes(l,c,e(f)))}if("paper"!==f.yref&&"domain"!==h){var d="pixel"===f.ysizemode?f.yanchor:f.y0,w="pixel"===f.ysizemode?f.yanchor:f.y1;(c=a(l=m.getFromId(r,f.yref),d,w,f.path,b.paramIsY))&&(f._extremes[l._id]=m.findExtremes(l,c,n(f)))}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(y,$,ee){"use strict";$.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/cartesian/axes"),b=y("../../plots/array_container_defaults"),v=y("./attributes"),e=y("./helpers");function n(t,a,r){function u(E,R){return p.coerce(t,a,v,E,R)}if(u("visible")){var s=u("path"),i=u("type",s?"path":"rect");"path"!==a.type&&delete a.path,u("editable"),u("layer"),u("opacity"),u("fillcolor"),u("fillrule"),u("line.width")&&(u("line.color"),u("line.dash"));for(var l=u("xsizemode"),c=u("ysizemode"),f=["x","y"],g=0;g<2;g++){var h,o,x,d=f[g],w=d+"anchor",_="x"===d?l:c,T={_fullLayout:r},k=m.coerceRef(t,a,T,d,void 0,"paper");if("range"===m.getRefType(k)?((h=m.getFromId(T,k))._shapeIndices.push(a._index),x=e.rangeToShapePosition(h),o=e.shapePositionToRange(h)):o=x=p.identity,"path"!==i){var L=d+"0",M=d+"1",O=t[L],P=t[M];t[L]=o(t[L],!0),t[M]=o(t[M],!0),"pixel"===_?(u(L,0),u(M,10)):(m.coercePosition(a,T,u,k,L,.25),m.coercePosition(a,T,u,k,M,.75)),a[L]=x(a[L]),a[M]=x(a[M]),t[L]=O,t[M]=P}if("pixel"===_){var S=t[w];t[w]=o(t[w],!0),m.coercePosition(a,T,u,k,w,.25),a[w]=x(a[w]),t[w]=S}}"path"===i?u("path"):p.noneOrAll(t,a,["x0","x1","y0","y1"])}}$.exports=function(t,a){b(t,a,{name:"shapes",handleItemDefaults:n})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../lib"),b=y("../../plots/cartesian/axes"),v=y("./draw_newshape/helpers").readPaths,e=y("./draw_newshape/display_outlines"),n=y("../../plots/cartesian/handle_outline").clearOutlineControllers,t=y("../color"),a=y("../drawing"),r=y("../../plot_api/plot_template").arrayEditor,u=y("../dragelement"),s=y("../../lib/setcursor"),i=y("./constants"),l=y("./helpers");function c(_){var T=_._fullLayout;for(var k in T._shapeUpperLayer.selectAll("path").remove(),T._shapeLowerLayer.selectAll("path").remove(),T._plots){var L=T._plots[k].shapelayer;L&&L.selectAll("path").remove()}for(var M=0;M<T.shapes.length;M++)T.shapes[M].visible&&h(_,M)}function f(_){return!!_._fullLayout._drawing}function g(_){return!_._context.edits.shapePosition}function h(_,T){_._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+T+'"]').remove();var k=l.makeOptionsAndPlotinfo(_,T),L=k.options,M=k.plotinfo;L._input&&!1!==L.visible&&function(P){var S=x(_,L),E={"data-index":T,"fill-rule":L.fillrule,d:S},R=L.opacity,B=L.fillcolor,H=L.line.width?L.line.color:"rgba(0,0,0,0)",V=L.line.width,Z=L.line.dash;V||!0!==L.editable||(V=5,Z="solid");var W="Z"!==S[S.length-1],G=g(_)&&L.editable&&_._fullLayout._activeShapeIndex===T;G&&(B=W?"rgba(0,0,0,0)":_._fullLayout.activeshape.fillcolor,R=_._fullLayout.activeshape.opacity);var X,te=P.append("path").attr(E).style("opacity",R).call(t.stroke,H).call(t.fill,B).call(a.dashLine,Z,V);if(o(te,_,L),(G||_._context.edits.shapePosition)&&(X=r(_.layout,"shapes",L)),G){te.style({cursor:"move"});var D={element:te.node(),plotinfo:M,gd:_,editHelpers:X,isActiveShape:!0},N=v(S,_);e(N,te,D)}else _._context.edits.shapePosition?function(U,Q,j,J,K,re){var ne,se,oe,pe,ce,ge,xe,we,be,Se,fe,me,Te,_e,Me,Ie,ze="pixel"===j.xsizemode,Ve="pixel"===j.ysizemode,Je="line"===j.type,De="path"===j.type,Be=re.modifyItem,Ze=b.getFromId(U,j.xref),Ye=b.getRefType(j.xref),tt=b.getFromId(U,j.yref),st=b.getRefType(j.yref),vt=l.getDataToPixel(U,Ze,!1,Ye),Pt=l.getDataToPixel(U,tt,!0,st),Mt=l.getPixelToData(U,Ze,!1,Ye),rt=l.getPixelToData(U,tt,!0,st),et=Je?function(){var $e=Math.max(j.line.width,10),ke=K.append("g").attr("data-index",J);ke.append("path").attr("d",Q.attr("d")).style({cursor:"move","stroke-width":$e,"stroke-opacity":"0"});var Le={"fill-opacity":"0"},Pe=Math.max($e/2,10);return ke.append("circle").attr({"data-line-point":"start-point",cx:ze?vt(j.xanchor)+j.x0:vt(j.x0),cy:Ve?Pt(j.yanchor)-j.y0:Pt(j.y0),r:Pe}).style(Le).classed("cursor-grab",!0),ke.append("circle").attr({"data-line-point":"end-point",cx:ze?vt(j.xanchor)+j.x1:vt(j.x1),cy:Ve?Pt(j.yanchor)-j.y1:Pt(j.y1),r:Pe}).style(Le).classed("cursor-grab",!0),ke}():Q,bt={element:et.node(),gd:U,prepFn:function($e){var ke,Le,Pe,Ce,Xe,at,pt,ut;f(U)||(ze&&(ce=vt(j.xanchor)),Ve&&(ge=Pt(j.yanchor)),"path"===j.type?Me=j.path:(ne=ze?j.x0:vt(j.x0),se=Ve?j.y0:Pt(j.y0),oe=ze?j.x1:vt(j.x1),pe=Ve?j.y1:Pt(j.y1)),ne<oe?(be=ne,Te="x0",Se=oe,_e="x1"):(be=oe,Te="x1",Se=ne,_e="x0"),!Ve&&se<pe||Ve&&se>pe?(xe=se,fe="y0",we=pe,me="y1"):(xe=pe,fe="y1",we=se,me="y0"),Rt($e),He(K,j),ke=Q,Xe=(Le=j).yref,at=b.getFromId(Pe=U,Ce=Le.xref),pt=b.getFromId(Pe,Xe),ut="","paper"===Ce||at.autorange||(ut+=Ce),"paper"===Xe||pt.autorange||(ut+=Xe),a.setClipUrl(ke,ut?"clip"+Pe._fullLayout._uid+ut:null,Pe),bt.moveFn="move"===Ie?Yt:Fe,bt.altKey=$e.altKey)},doneFn:function(){f(U)||(s(Q),Oe(K),o(Q,U,j),p.call("_guiRelayout",U,re.getUpdateObj()))},clickFn:function(){f(U)||Oe(K)}};function Rt($e){if(f(U))Ie=null;else if(Je)Ie="path"===$e.target.tagName?"move":"start-point"===$e.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var ke=bt.element.getBoundingClientRect(),Le=ke.right-ke.left,Pe=ke.bottom-ke.top,at=!De&&Le>10&&Pe>10&&!$e.shiftKey?u.getCursor(($e.clientX-ke.left)/Le,1-($e.clientY-ke.top)/Pe):"move";s(Q,at),Ie=at.split("-")[0]}}function Yt($e,ke){if("path"===j.type){var Le=function(Xe){return Xe},Pe=Le,Ce=Le;ze?Be("xanchor",j.xanchor=Mt(ce+$e)):(Pe=function(Xe){return Mt(vt(Xe)+$e)},Ze&&"date"===Ze.type&&(Pe=l.encodeDate(Pe))),Ve?Be("yanchor",j.yanchor=rt(ge+ke)):(Ce=function(Xe){return rt(Pt(Xe)+ke)},tt&&"date"===tt.type&&(Ce=l.encodeDate(Ce))),Be("path",j.path=d(Me,Pe,Ce))}else ze?Be("xanchor",j.xanchor=Mt(ce+$e)):(Be("x0",j.x0=Mt(ne+$e)),Be("x1",j.x1=Mt(oe+$e))),Ve?Be("yanchor",j.yanchor=rt(ge+ke)):(Be("y0",j.y0=rt(se+ke)),Be("y1",j.y1=rt(pe+ke)));Q.attr("d",x(U,j)),He(K,j)}function Fe($e,ke){if(De){var Le=function(Re){return Re},Pe=Le,Ce=Le;ze?Be("xanchor",j.xanchor=Mt(ce+$e)):(Pe=function(Re){return Mt(vt(Re)+$e)},Ze&&"date"===Ze.type&&(Pe=l.encodeDate(Pe))),Ve?Be("yanchor",j.yanchor=rt(ge+ke)):(Ce=function(Re){return rt(Pt(Re)+ke)},tt&&"date"===tt.type&&(Ce=l.encodeDate(Ce))),Be("path",j.path=d(Me,Pe,Ce))}else if(Je){if("resize-over-start-point"===Ie){var Xe=ne+$e,at=Ve?se-ke:se+ke;Be("x0",j.x0=ze?Xe:Mt(Xe)),Be("y0",j.y0=Ve?at:rt(at))}else if("resize-over-end-point"===Ie){var pt=oe+$e,ut=Ve?pe-ke:pe+ke;Be("x1",j.x1=ze?pt:Mt(pt)),Be("y1",j.y1=Ve?ut:rt(ut))}}else{var St=function(Re){return-1!==Ie.indexOf(Re)},ot=St("n"),Et=St("s"),Lt=St("w"),Qe=St("e"),mt=ot?xe+ke:xe,It=Et?we+ke:we,jt=Lt?be+$e:be,Zt=Qe?Se+$e:Se;Ve&&(ot&&(mt=xe-ke),Et&&(It=we-ke)),(!Ve&&It-mt>10||Ve&&mt-It>10)&&(Be(fe,j[fe]=Ve?mt:rt(mt)),Be(me,j[me]=Ve?It:rt(It))),Zt-jt>10&&(Be(Te,j[Te]=ze?jt:Mt(jt)),Be(_e,j[_e]=ze?Zt:Mt(Zt)))}Q.attr("d",x(U,j)),He(K,j)}function He($e,ke){(ze||Ve)&&function(){var Le="path"!==ke.type,Pe=$e.selectAll(".visual-cue").data([0]);Pe.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ce=vt(ze?ke.xanchor:m.midRange(Le?[ke.x0,ke.x1]:l.extractPathCoords(ke.path,i.paramIsX))),Xe=Pt(Ve?ke.yanchor:m.midRange(Le?[ke.y0,ke.y1]:l.extractPathCoords(ke.path,i.paramIsY)));Ce=l.roundPositionForSharpStrokeRendering(Ce,1),Xe=l.roundPositionForSharpStrokeRendering(Xe,1),Pe.attr("d",ze&&Ve?"M"+(Ce-1-1)+","+(Xe-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":ze?"M"+(Ce-1-1)+","+(Xe-9-1)+"v18 h2 v-18 Z":"M"+(Ce-9-1)+","+(Xe-1-1)+"h18 v2 h-18 Z")}()}function Oe($e){$e.selectAll(".visual-cue").remove()}u.init(bt),et.node().onmousemove=Rt}(_,te,L,T,P,X):!0===L.editable&&te.style("pointer-events",W||t.opacity(B)*R<=.5?"stroke":"all");te.node().addEventListener("click",function(){return function(U,Q){if(g(U)){var j=+Q.node().getAttribute("data-index");if(j>=0){if(j===U._fullLayout._activeShapeIndex)return void w(U);U._fullLayout._activeShapeIndex=j,U._fullLayout._deactivateShape=w,c(U)}}}(_,te)})}("below"!==L.layer?_._fullLayout._shapeUpperLayer:"paper"===L.xref||"paper"===L.yref?_._fullLayout._shapeLowerLayer:M._hadPlotinfo?(M.mainplotinfo||M).shapelayer:_._fullLayout._shapeLowerLayer)}function o(_,T,k){var L=(k.xref+k.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");a.setClipUrl(_,L?"clip"+T._fullLayout._uid+L:null,T)}function x(_,T){var k,L,M,O,P,S,E,R,K,re,ne,oe,pe,ce,ge,B=T.type,H=b.getRefType(T.xref),V=b.getRefType(T.yref),Z=b.getFromId(_,T.xref),W=b.getFromId(_,T.yref),G=_._fullLayout._size;if(Z?"domain"===H?L=function(K){return Z._offset+Z._length*K}:(k=l.shapePositionToRange(Z),L=function(K){return Z._offset+Z.r2p(k(K,!0))}):L=function(K){return G.l+G.w*K},W?"domain"===V?O=function(K){return W._offset+W._length*(1-K)}:(M=l.shapePositionToRange(W),O=function(K){return W._offset+W.r2p(M(K,!0))}):O=function(K){return G.t+G.h*(1-K)},"path"===B)return Z&&"date"===Z.type&&(L=l.decodeDate(L)),W&&"date"===W.type&&(O=l.decodeDate(O)),re=L,ne=O,oe=(K=T).xsizemode,pe=K.ysizemode,ce=K.xanchor,ge=K.yanchor,K.path.replace(i.segmentRE,function(xe){var we=0,be=xe.charAt(0),Se=i.paramIsX[be],fe=i.paramIsY[be],me=i.numParams[be],Te=xe.substr(1).replace(i.paramRE,function(_e){return Se[we]?_e="pixel"===oe?re(ce)+Number(_e):re(_e):fe[we]&&(_e="pixel"===pe?ne(ge)-Number(_e):ne(_e)),++we>me&&(_e="X"),_e});return we>me&&(Te=Te.replace(/[\s,]*X.*/,""),m.log("Ignoring extra params in segment "+xe)),be+Te});if("pixel"===T.xsizemode){var X=L(T.xanchor);P=X+T.x0,S=X+T.x1}else P=L(T.x0),S=L(T.x1);if("pixel"===T.ysizemode){var te=O(T.yanchor);E=te-T.y0,R=te-T.y1}else E=O(T.y0),R=O(T.y1);if("line"===B)return"M"+P+","+E+"L"+S+","+R;if("rect"===B)return"M"+P+","+E+"H"+S+"V"+R+"H"+P+"Z";var D=(P+S)/2,N=(E+R)/2,U=Math.abs(D-P),Q=Math.abs(N-E),j="A"+U+","+Q,J=D+U+","+N;return"M"+J+j+" 0 1,1 "+D+","+(N-Q)+j+" 0 0,1 "+J+"Z"}function d(_,T,k){return _.replace(i.segmentRE,function(L){var M=0,O=L.charAt(0),P=i.paramIsX[O],S=i.paramIsY[O],E=i.numParams[O];return O+L.substr(1).replace(i.paramRE,function(R){return M>=E||(P[M]?R=T(R):S[M]&&(R=k(R)),M++),R})})}function w(_){g(_)&&_._fullLayout._activeShapeIndex>=0&&(n(_),delete _._fullLayout._activeShapeIndex,c(_))}$.exports={draw:c,drawOne:h,eraseActiveShape:function(_){if(g(_)){n(_);var T=_._fullLayout._activeShapeIndex,k=(_.layout||{}).shapes||[];if(T<k.length){for(var L=[],M=0;M<k.length;M++)M!==T&&L.push(k[M]);delete _._fullLayout._activeShapeIndex,p.call("_guiRelayout",_,{shapes:L})}}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(y,$,ee){"use strict";var p=y("../../drawing/attributes").dash,m=y("../../../lib/extend").extendFlat;$.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:m({},p,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(y,$,ee){"use strict";$.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(y,$,ee){"use strict";var p=y("../../color");$.exports=function(m,b,v){v("newshape.drawdirection"),v("newshape.layer"),v("newshape.fillcolor"),v("newshape.fillrule"),v("newshape.opacity"),v("newshape.line.width")&&(v("newshape.line.color",p.contrast((m||{}).plot_bgcolor||"#FFF")),v("newshape.line.dash")),v("activeshape.fillcolor"),v("activeshape.opacity")}},{"../../color":366}],454:[function(y,$,ee){"use strict";var p=y("../../dragelement"),m=y("../../dragelement/helpers").drawMode,b=y("../../../registry"),v=y("./constants"),e=v.i000,n=v.i090,t=v.i180,a=v.i270,r=y("../../../plots/cartesian/handle_outline").clearOutlineControllers,u=y("./helpers"),s=u.pointsShapeRectangle,i=u.pointsShapeEllipse,l=u.writePaths,c=y("./newshapes");$.exports=function f(g,h,o,x){x||(x=0);var d=o.gd;function w(){f(g,h,o,x++),i(g[0])&&_({redrawing:!0})}function _(X){o.isActiveShape=!1;var te=c(h,o);Object.keys(te).length&&b.call((X||{}).redrawing?"relayout":"_guiRelayout",d,te)}var T,k,L,M,O,P=o.isActiveShape,S=d._fullLayout._zoomlayer;function R(X){L=+X.srcElement.getAttribute("data-i"),M=+X.srcElement.getAttribute("data-j"),T[L][M].moveFn=B}function B(X,te){if(g.length){var D=O[L][M][1],N=O[L][M][2],U=g[L],Q=U.length;if(s(U)){for(var j=0;j<Q;j++)if(j!==M){var J=U[j];J[1]===U[M][1]&&(J[1]=D+X),J[2]===U[M][2]&&(J[2]=N+te)}if(U[M][1]=D+X,U[M][2]=N+te,!s(U))for(var K=0;K<Q;K++)for(var re=0;re<U[K].length;re++)U[K][re]=O[L][K][re]}else U[M][1]=D+X,U[M][2]=N+te;w()}}function H(){_()}function V(X,te){if(2===X){L=+te.srcElement.getAttribute("data-i"),M=+te.srcElement.getAttribute("data-j");var D=g[L];s(D)||i(D)||function(){if(g.length&&g[L]&&g[L].length){for(var N=[],U=0;U<g[L].length;U++)U!==M&&N.push(g[L][U]);N.length>1&&(2!==N.length||"Z"!==N[1][0])&&(0===M&&(N[0][0]="M"),g[L]=N,w(),_())}}()}}function Z(X,te){(function(D,N){if(g.length)for(var U=0;U<g.length;U++)for(var Q=0;Q<g[U].length;Q++)for(var j=0;j+2<g[U][Q].length;j+=2)g[U][Q][j+1]=O[U][Q][j+1]+D,g[U][Q][j+2]=O[U][Q][j+2]+N})(X,te),w()}m(o.dragmode)?d._fullLayout._drawing=!0:d._fullLayout._activeShapeIndex>=0&&r(d),h.attr("d",l(g)),P&&!x&&(O=function(X,te){for(var D=0;D<te.length;D++){var N=te[D];X[D]=[];for(var U=0;U<N.length;U++){X[D][U]=[];for(var Q=0;Q<N[U].length;Q++)X[D][U][Q]=N[U][Q]}}return X}([],g),function(X){T=[];for(var te=0;te<g.length;te++){var D=g[te],N=!s(D)&&i(D);T[te]=[];for(var U=0;U<D.length;U++)if("Z"!==D[U][0]&&(!N||U===e||U===n||U===t||U===a)){var Q=D[U][1],j=D[U][2],J=X.append("circle").classed("cursor-grab",!0).attr("data-i",te).attr("data-j",U).attr("cx",Q).attr("cy",j).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});T[te][U]={element:J.node(),gd:d,prepFn:R,doneFn:H,clickFn:V},p.init(T[te][U])}}}(S.append("g").attr("class","outline-controllers")),k=[],g.length&&(k[0]={element:h[0][0],gd:d,prepFn:function(X){(L=+X.srcElement.getAttribute("data-i"))||(L=0),k[L].moveFn=Z},doneFn:function(){_()}},p.init(k[0])))}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(y,$,ee){"use strict";var p=y("parse-svg-path"),m=y("./constants"),b=m.CIRCLE_SIDES,v=m.SQRT2,e=y("../../../plots/cartesian/helpers"),n=e.p2r,t=e.r2p,a=[0,3,4,5,6,1,2],r=[0,3,4,1,2];function u(i,l){return Math.abs(i-l)<=1e-6}function s(i,l){var c=l[1]-i[1],f=l[2]-i[2];return Math.sqrt(c*c+f*f)}ee.writePaths=function(i){var l=i.length;if(!l)return"M0,0Z";for(var c="",f=0;f<l;f++)for(var g=i[f].length,h=0;h<g;h++){var o=i[f][h][0];if("Z"===o)c+="Z";else for(var x=i[f][h].length,d=0;d<x;d++){var w=d;"Q"===o||"S"===o?w=r[d]:"C"===o&&(w=a[d]),c+=i[f][h][w],d>0&&d<x-1&&(c+=",")}}return c},ee.readPaths=function(i,l,c,f){var g,h,o,x=p(i),d=[],w=-1,_=0,T=0,k=function(){h=_,o=T};k();for(var L=0;L<x.length;L++){var E=[],R=x[L][0],B=R;switch(R){case"M":d[++w]=[],E.push([B,_=+x[L][1],T=+x[L][2]]),k();break;case"Q":case"S":E.push([B,_=+x[L][3],T=+x[L][4],+x[L][1],+x[L][2]]);break;case"C":E.push([B,_=+x[L][5],T=+x[L][6],+x[L][1],+x[L][2],+x[L][3],+x[L][4]]);break;case"T":case"L":E.push([B,_=+x[L][1],T=+x[L][2]]);break;case"H":E.push([B="L",_=+x[L][1],T]);break;case"V":E.push([B="L",_,T=+x[L][1]]);break;case"A":B="L";var H=+x[L][1],V=+x[L][2];+x[L][4]||(H=-H,V=-V);var Z=_-H,W=T;for(g=1;g<=b/2;g++){var G=2*Math.PI*g/b;E.push([B,Z+H*Math.cos(G),W+V*Math.sin(G)])}break;case"Z":_===h&&T===o||E.push([B,_=h,T=o])}for(var X=(c||{}).domain,te=l._fullLayout._size,D=c&&"pixel"===c.xsizemode,N=c&&"pixel"===c.ysizemode,U=!1===f,Q=0;Q<E.length;Q++){for(g=0;g+2<7;g+=2){var j=E[Q][g+1],J=E[Q][g+2];void 0!==j&&void 0!==J&&(_=j,T=J,c&&(c.xaxis&&c.xaxis.p2r?(U&&(j-=c.xaxis._offset),j=D?t(c.xaxis,c.xanchor)+j:n(c.xaxis,j)):(U&&(j-=te.l),X?j=X.x[0]+j/te.w:j/=te.w),c.yaxis&&c.yaxis.p2r?(U&&(J-=c.yaxis._offset),J=N?t(c.yaxis,c.yanchor)-J:n(c.yaxis,J)):(U&&(J-=te.t),J=X?X.y[1]-J/te.h:1-J/te.h)),E[Q][g+1]=j,E[Q][g+2]=J)}d[w].push(E[Q].slice())}}return d},ee.pointsShapeRectangle=function(i){if(5!==i.length)return!1;for(var l=1;l<3;l++)if(!u(i[0][l]-i[1][l],i[3][l]-i[2][l])||!u(i[0][l]-i[3][l],i[1][l]-i[2][l]))return!1;return!(!u(i[0][1],i[1][1])&&!u(i[0][1],i[3][1])||!(s(i[0],i[1])*s(i[0],i[3])))},ee.pointsShapeEllipse=function(i){var l=i.length;if(l!==b+1)return!1;l=b;for(var c=0;c<l;c++){var f=(2*l-c)%l,g=(l/2+f)%l;if(!u(s(i[c],i[(l/2+c)%l]),s(i[f],i[g])))return!1}return!0},ee.handleEllipse=function(i,l,c){if(!i)return[l,c];var f=ee.ellipseOver({x0:l[0],y0:l[1],x1:c[0],y1:c[1]}),g=(f.x1+f.x0)/2,h=(f.y1+f.y0)/2,o=(f.x1-f.x0)/2,x=(f.y1-f.y0)/2;o||(o=x/=v),x||(x=o/=v);for(var d=[],w=0;w<b;w++){var _=2*w*Math.PI/b;d.push([g+o*Math.cos(_),h+x*Math.sin(_)])}return d},ee.ellipseOver=function(i){var l=i.x0,c=i.y0,f=i.x1,g=i.y1,h=f-l,o=g-c,x=((l-=h)+f)/2,d=((c-=o)+g)/2;return{x0:x-(h*=v),y0:d-(o*=v),x1:x+h,y1:d+o}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(y,$,ee){"use strict";var p=y("../../dragelement/helpers"),m=p.drawMode,b=p.openMode,v=y("./constants"),e=v.i000,n=v.i090,t=v.i180,a=v.i270,r=v.cos45,u=v.sin45,s=y("../../../plots/cartesian/helpers"),i=s.p2r,l=s.r2p,c=y("../../../plots/cartesian/handle_outline").clearSelect,f=y("./helpers"),g=f.readPaths,h=f.writePaths,o=f.ellipseOver;$.exports=function(x,d){if(x.length){var w=x[0][0];if(w){var _=w.getAttribute("d"),T=d.gd,k=T._fullLayout.newshape,L=d.plotinfo,M=L.xaxis,O=L.yaxis,P=!!L.domain||!L.xaxis,S=!!L.domain||!L.yaxis,E=d.isActiveShape,R=d.dragmode,B=(T.layout||{}).shapes||[];if(!m(R)&&void 0!==E){var H=T._fullLayout._activeShapeIndex;if(H<B.length)switch(T._fullLayout.shapes[H].type){case"rect":R="drawrect";break;case"circle":R="drawcircle";break;case"line":R="drawline";break;case"path":var V=B[H].path||"";R="Z"===V[V.length-1]?"drawclosedpath":"drawopenpath"}}var Z,W=b(R),G=g(_,T,L,E),X={editable:!0,xref:P?"paper":M._id,yref:S?"paper":O._id,layer:k.layer,opacity:k.opacity,line:{color:k.line.color,width:k.line.width,dash:k.line.dash}};if(W||(X.fillcolor=k.fillcolor,X.fillrule=k.fillrule),1===G.length&&(Z=G[0]),Z&&"drawrect"===R)X.type="rect",X.x0=Z[0][1],X.y0=Z[0][2],X.x1=Z[2][1],X.y1=Z[2][2];else if(Z&&"drawline"===R)X.type="line",X.x0=Z[0][1],X.y0=Z[0][2],X.x1=Z[1][1],X.y1=Z[1][2];else if(Z&&"drawcircle"===R){X.type="circle";var te=Z[e][1],D=Z[n][1],N=Z[t][1],U=Z[a][1],Q=Z[e][2],j=Z[n][2],J=Z[t][2],K=Z[a][2],re=L.xaxis&&("date"===L.xaxis.type||"log"===L.xaxis.type),ne=L.yaxis&&("date"===L.yaxis.type||"log"===L.yaxis.type);re&&(te=l(L.xaxis,te),D=l(L.xaxis,D),N=l(L.xaxis,N),U=l(L.xaxis,U)),ne&&(Q=l(L.yaxis,Q),j=l(L.yaxis,j),J=l(L.yaxis,J),K=l(L.yaxis,K));var se=(D+U)/2,oe=(Q+J)/2,pe=o({x0:se,y0:oe,x1:se+(U-D+N-te)/2*r,y1:oe+(K-j+J-Q)/2*u});re&&(pe.x0=i(L.xaxis,pe.x0),pe.x1=i(L.xaxis,pe.x1)),ne&&(pe.y0=i(L.yaxis,pe.y0),pe.y1=i(L.yaxis,pe.y1)),X.x0=pe.x0,X.y0=pe.y0,X.x1=pe.x1,X.y1=pe.y1}else X.type="path",M&&O&&function(fe,me,Te){var _e="date"===me.type,Me="date"===Te.type;if(!_e&&!Me)return fe;for(var Ie=0;Ie<fe.length;Ie++)for(var ze=0;ze<fe[Ie].length;ze++)for(var Ve=0;Ve+2<fe[Ie][ze].length;Ve+=2)_e&&(fe[Ie][ze][Ve+1]=fe[Ie][ze][Ve+1].replace(" ","_")),Me&&(fe[Ie][ze][Ve+2]=fe[Ie][ze][Ve+2].replace(" ","_"))}(G,M,O),X.path=h(G),Z=null;c(T);for(var ce=d.editHelpers,ge=(ce||{}).modifyItem,xe=[],we=0;we<B.length;we++){var be=T._fullLayout.shapes[we];if(xe[we]=be._input,void 0!==E&&we===T._fullLayout._activeShapeIndex){var Se=X;switch(be.type){case"line":case"rect":case"circle":ge("x0",Se.x0),ge("x1",Se.x1),ge("y0",Se.y0),ge("y1",Se.y1);break;case"path":ge("path",Se.path)}}}return void 0===E?(xe.push(X),xe):ce?ce.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(y,$,ee){"use strict";var p=y("./constants"),m=y("../../lib");ee.rangeToShapePosition=function(b){return"log"===b.type?b.r2d:function(v){return v}},ee.shapePositionToRange=function(b){return"log"===b.type?b.d2r:function(v){return v}},ee.decodeDate=function(b){return function(v){return v.replace&&(v=v.replace("_"," ")),b(v)}},ee.encodeDate=function(b){return function(v){return b(v).replace(" ","_")}},ee.extractPathCoords=function(b,v){var e=[];return b.match(p.segmentRE).forEach(function(n){var t=v[n.charAt(0)].drawn;if(void 0!==t){var a=n.substr(1).match(p.paramRE);!a||a.length<t||e.push(m.cleanNumber(a[t]))}}),e},ee.getDataToPixel=function(b,v,e,n){var t,a=b._fullLayout._size;if(v)if("domain"===n)t=function(u){return v._length*(e?1-u:u)+v._offset};else{var r=ee.shapePositionToRange(v);t=function(u){return v._offset+v.r2p(r(u,!0))},"date"===v.type&&(t=ee.decodeDate(t))}else t=e?function(u){return a.t+a.h*(1-u)}:function(u){return a.l+a.w*u};return t},ee.getPixelToData=function(b,v,e,n){var t,a=b._fullLayout._size;if(v)if("domain"===n)t=function(u){var s=(u-v._offset)/v._length;return e?1-s:s};else{var r=ee.rangeToShapePosition(v);t=function(u){return r(v.p2r(u-v._offset))}}else t=e?function(u){return 1-(u-a.t)/a.h}:function(u){return(u-a.l)/a.w};return t},ee.roundPositionForSharpStrokeRendering=function(b,v){var e=1===Math.round(v%2),n=Math.round(b);return e?n+.5:n},ee.makeOptionsAndPlotinfo=function(b,v){var e=b._fullLayout.shapes[v]||{},n=b._fullLayout._plots[e.xref+e.yref];return n?n._hadPlotinfo=!0:(n={},e.xref&&"paper"!==e.xref&&(n.xaxis=b._fullLayout[e.xref+"axis"]),e.yref&&"paper"!==e.yref&&(n.yaxis=b._fullLayout[e.yref+"axis"])),n.xsizemode=e.xsizemode,n.ysizemode=e.ysizemode,n.xanchor=e.xanchor,n.yanchor=e.yanchor,{options:e,plotinfo:n}}},{"../../lib":503,"./constants":448}],458:[function(y,$,ee){"use strict";var p=y("./draw");$.exports={moduleType:"component",name:"shapes",layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),supplyDrawNewShapeDefaults:y("./draw_newshape/defaults"),includeBasePlot:y("../../plots/cartesian/include_components")("shapes"),calcAutorange:y("./calc_autorange"),draw:p.draw,drawOne:p.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(y,$,ee){"use strict";var p=y("../../plots/font_attributes"),m=y("../../plots/pad_attributes"),b=y("../../lib/extend").extendDeepAll,v=y("../../plot_api/edit_types").overrideAll,e=y("../../plots/animation_attributes"),n=y("../../plot_api/plot_template").templatedArray,t=y("./constants"),a=n("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});$.exports=v(n("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:a,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:b(m({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:p({})},font:p({}),activebgcolor:{valType:"color",dflt:t.gripBgActiveColor},bgcolor:{valType:"color",dflt:t.railBgColor},bordercolor:{valType:"color",dflt:t.railBorderColor},borderwidth:{valType:"number",min:0,dflt:t.railBorderWidth},ticklen:{valType:"number",min:0,dflt:t.tickLength},tickcolor:{valType:"color",dflt:t.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:t.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(y,$,ee){"use strict";$.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/array_container_defaults"),b=y("./attributes"),v=y("./constants").name,e=b.steps;function n(a,r,u){function s(g,h){return p.coerce(a,r,b,g,h)}for(var i=m(a,r,{name:"steps",handleItemDefaults:t}),l=0,c=0;c<i.length;c++)i[c].visible&&l++;if(l<2?r.visible=!1:s("visible")){r._stepCount=l;var f=r._visibleSteps=p.filterVisible(i);(i[s("active")]||{}).visible||(r.active=f[0]._index),s("x"),s("y"),p.noneOrAll(a,r,["x","y"]),s("xanchor"),s("yanchor"),s("len"),s("lenmode"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),p.coerceFont(s,"font",u.font),s("currentvalue.visible")&&(s("currentvalue.xanchor"),s("currentvalue.prefix"),s("currentvalue.suffix"),s("currentvalue.offset"),p.coerceFont(s,"currentvalue.font",r.font)),s("transition.duration"),s("transition.easing"),s("bgcolor"),s("activebgcolor"),s("bordercolor"),s("borderwidth"),s("ticklen"),s("tickwidth"),s("tickcolor"),s("minorticklen")}}function t(a,r){function u(i,l){return p.coerce(a,r,e,i,l)}if("skip"===a.method||Array.isArray(a.args)?u("visible"):r.visible=!1){u("method"),u("args");var s=u("label","step-"+r._index);u("value",s),u("execute")}}$.exports=function(a,r){m(a,r,{name:v,handleItemDefaults:n})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../plots/plots"),b=y("../color"),v=y("../drawing"),e=y("../../lib"),n=e.strTranslate,t=y("../../lib/svg_text_utils"),a=y("../../plot_api/plot_template").arrayEditor,r=y("./constants"),u=y("../../constants/alignment"),s=u.LINE_SPACING,i=u.FROM_TL,l=u.FROM_BR;function c(E){return r.autoMarginIdRoot+E._index}function f(E){return E._index}function g(E,R){var B=v.tester.selectAll("g."+r.labelGroupClass).data(R._visibleSteps);B.enter().append("g").classed(r.labelGroupClass,!0);var H=0,V=0;B.each(function(Q){var j=x(p.select(this),{step:Q},R).node();if(j){var J=v.bBox(j);V=Math.max(V,J.height),H=Math.max(H,J.width)}}),B.remove();var Z=R._dims={};Z.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var W=E._fullLayout._size;if(Z.lx=W.l+W.w*R.x,Z.ly=W.t+W.h*(1-R.y),Z.outerLength="fraction"===R.lenmode?Math.round(W.w*R.len):R.len,Z.inputAreaStart=0,Z.inputAreaLength=Math.round(Z.outerLength-R.pad.l-R.pad.r),Z.labelStride=Math.max(1,Math.ceil((H+r.labelPadding)/((Z.inputAreaLength-2*r.stepInset)/(R._stepCount-1)))),Z.labelHeight=V,Z.currentValueMaxWidth=0,Z.currentValueHeight=0,Z.currentValueTotalHeight=0,Z.currentValueMaxLines=1,R.currentvalue.visible){var te=v.tester.append("g");B.each(function(Q){var j=h(te,R,Q.label),J=j.node()&&v.bBox(j.node())||{width:0,height:0},K=t.lineCount(j);Z.currentValueMaxWidth=Math.max(Z.currentValueMaxWidth,Math.ceil(J.width)),Z.currentValueHeight=Math.max(Z.currentValueHeight,Math.ceil(J.height)),Z.currentValueMaxLines=Math.max(Z.currentValueMaxLines,K)}),Z.currentValueTotalHeight=Z.currentValueHeight+R.currentvalue.offset,te.remove()}Z.height=Z.currentValueTotalHeight+r.tickOffset+R.ticklen+r.labelOffset+Z.labelHeight+R.pad.t+R.pad.b;var D="left";e.isRightAnchor(R)&&(Z.lx-=Z.outerLength,D="right"),e.isCenterAnchor(R)&&(Z.lx-=Z.outerLength/2,D="center");var N="top";e.isBottomAnchor(R)&&(Z.ly-=Z.height,N="bottom"),e.isMiddleAnchor(R)&&(Z.ly-=Z.height/2,N="middle"),Z.outerLength=Math.ceil(Z.outerLength),Z.height=Math.ceil(Z.height),Z.lx=Math.round(Z.lx),Z.ly=Math.round(Z.ly);var U={y:R.y,b:Z.height*l[N],t:Z.height*i[N]};"fraction"===R.lenmode?(U.l=0,U.xl=R.x-R.len*i[D],U.r=0,U.xr=R.x+R.len*l[D]):(U.x=R.x,U.l=Z.outerLength*i[D],U.r=Z.outerLength*l[D]),m.autoMargin(E,c(R),U)}function h(E,R,B){if(R.currentvalue.visible){var H,V,Z=R._dims;switch(R.currentvalue.xanchor){case"right":H=Z.inputAreaLength-r.currentValueInset-Z.currentValueMaxWidth,V="left";break;case"center":H=.5*Z.inputAreaLength,V="middle";break;default:H=r.currentValueInset,V="left"}var W=e.ensureSingle(E,"text",r.labelClass,function(U){U.attr({"text-anchor":V,"data-notex":1})}),G=R.currentvalue.prefix?R.currentvalue.prefix:"";if("string"==typeof B)G+=B;else{var X=R.steps[R.active].label,te=R._gd._fullLayout._meta;te&&(X=e.templateString(X,te)),G+=X}R.currentvalue.suffix&&(G+=R.currentvalue.suffix),W.call(v.font,R.currentvalue.font).text(G).call(t.convertToTspans,R._gd);var D=t.lineCount(W);return t.positionText(W,H,(Z.currentValueMaxLines+1-D)*R.currentvalue.font.size*s),W}}function o(E,R,B){e.ensureSingle(E,"rect",r.gripRectClass,function(H){H.call(T,R,E,B).style("pointer-events","all")}).attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(b.stroke,B.bordercolor).call(b.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px")}function x(E,R,B){var H=e.ensureSingle(E,"text",r.labelClass,function(W){W.attr({"text-anchor":"middle","data-notex":1})}),V=R.step.label,Z=B._gd._fullLayout._meta;return Z&&(V=e.templateString(V,Z)),H.call(v.font,B.font).text(V).call(t.convertToTspans,B._gd),H}function d(E,R){var B=e.ensureSingle(E,"g",r.labelsClass),H=R._dims,V=B.selectAll("g."+r.labelGroupClass).data(H.labelSteps);V.enter().append("g").classed(r.labelGroupClass,!0),V.exit().remove(),V.each(function(Z){var W=p.select(this);W.call(x,Z,R),v.setTranslate(W,M(R,Z.fraction),r.tickOffset+R.ticklen+R.font.size*s+r.labelOffset+H.currentValueTotalHeight)})}function w(E,R,B,H,V){var Z=Math.round(H*(B._stepCount-1)),W=B._visibleSteps[Z]._index;W!==B.active&&_(E,R,B,W,!0,V)}function _(E,R,B,H,V,Z){var W=B.active;B.active=H,a(E.layout,r.name,B).applyUpdate("active",H);var G=B.steps[B.active];R.call(L,B,Z),R.call(h,B),E.emit("plotly_sliderchange",{slider:B,step:B.steps[B.active],interaction:V,previousActive:W}),G&&G.method&&V&&(R._nextMethod?(R._nextMethod.step=G,R._nextMethod.doCallback=V,R._nextMethod.doTransition=Z):(R._nextMethod={step:G,doCallback:V,doTransition:Z},R._nextMethodRaf=window.requestAnimationFrame(function(){var X=R._nextMethod.step;X.method&&(X.execute&&m.executeAPICommand(E,X.method,X.args),R._nextMethod=null,R._nextMethodRaf=null)})))}function T(E,R,B){var H=B.node(),V=p.select(R);function Z(){return B.data()[0]}function W(){var G=Z();R.emit("plotly_sliderstart",{slider:G});var X=B.select("."+r.gripRectClass);p.event.stopPropagation(),p.event.preventDefault(),X.call(b.fill,G.activebgcolor);var te=O(G,p.mouse(H)[0]);function D(){var U=Z(),Q=O(U,p.mouse(H)[0]);w(R,B,U,Q,!1)}function N(){var U=Z();U._dragging=!1,X.call(b.fill,U.bgcolor),V.on("mouseup",null),V.on("mousemove",null),V.on("touchend",null),V.on("touchmove",null),R.emit("plotly_sliderend",{slider:U,step:U.steps[U.active]})}w(R,B,G,te,!0),G._dragging=!0,V.on("mousemove",D),V.on("touchmove",D),V.on("mouseup",N),V.on("touchend",N)}E.on("mousedown",W),E.on("touchstart",W)}function k(E,R){var B=E.selectAll("rect."+r.tickRectClass).data(R._visibleSteps),H=R._dims;B.enter().append("rect").classed(r.tickRectClass,!0),B.exit().remove(),B.attr({width:R.tickwidth+"px","shape-rendering":"crispEdges"}),B.each(function(V,Z){var W=Z%H.labelStride==0,G=p.select(this);G.attr({height:W?R.ticklen:R.minorticklen}).call(b.fill,R.tickcolor),v.setTranslate(G,M(R,Z/(R._stepCount-1))-.5*R.tickwidth,(W?r.tickOffset:r.minorTickOffset)+H.currentValueTotalHeight)})}function L(E,R,B){for(var H=E.select("rect."+r.gripRectClass),V=0,Z=0;Z<R._stepCount;Z++)if(R._visibleSteps[Z]._index===R.active){V=Z;break}var W=M(R,V/(R._stepCount-1));if(!R._invokingCommand){var G=H;B&&R.transition.duration>0&&(G=G.transition().duration(R.transition.duration).ease(R.transition.easing)),G.attr("transform",n(W-.5*r.gripWidth,R._dims.currentValueTotalHeight))}}function M(E,R){var B=E._dims;return B.inputAreaStart+r.stepInset+(B.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,R))}function O(E,R){var B=E._dims;return Math.min(1,Math.max(0,(R-r.stepInset-B.inputAreaStart)/(B.inputAreaLength-2*r.stepInset-2*B.inputAreaStart)))}function P(E,R,B){var H=B._dims,V=e.ensureSingle(E,"rect",r.railTouchRectClass,function(Z){Z.call(T,R,E,B).style("pointer-events","all")});V.attr({width:H.inputAreaLength,height:Math.max(H.inputAreaWidth,r.tickOffset+B.ticklen+H.labelHeight)}).call(b.fill,B.bgcolor).attr("opacity",0),v.setTranslate(V,0,H.currentValueTotalHeight)}function S(E,R){var B=R._dims,H=B.inputAreaLength-2*r.railInset,V=e.ensureSingle(E,"rect",r.railRectClass);V.attr({width:H,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(b.stroke,R.bordercolor).call(b.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px"),v.setTranslate(V,r.railInset,.5*(B.inputAreaWidth-r.railWidth)+B.currentValueTotalHeight)}$.exports=function(E){var R=E._fullLayout,B=function(X,te){for(var D=X[r.name],N=[],U=0;U<D.length;U++){var Q=D[U];Q.visible&&(Q._gd=te,N.push(Q))}return N}(R,E),H=R._infolayer.selectAll("g."+r.containerClassName).data(B.length>0?[0]:[]);function V(X){X._commandObserver&&(X._commandObserver.remove(),delete X._commandObserver),m.autoMargin(E,c(X))}if(H.enter().append("g").classed(r.containerClassName,!0).style("cursor","ew-resize"),H.exit().each(function(){p.select(this).selectAll("g."+r.groupClassName).each(V)}).remove(),0!==B.length){var Z=H.selectAll("g."+r.groupClassName).data(B,f);Z.enter().append("g").classed(r.groupClassName,!0),Z.exit().each(V).remove();for(var W=0;W<B.length;W++)g(E,B[W]);Z.each(function(X){var te=p.select(this);(function(D){var N=D._dims;N.labelSteps=[];for(var U=D._stepCount,Q=0;Q<U;Q+=N.labelStride)N.labelSteps.push({fraction:Q/(U-1),step:D._visibleSteps[Q]})})(X),m.manageCommandObserver(E,X,X._visibleSteps,function(D){var N=te.data()[0];N.active!==D.index&&(N._dragging||_(E,te,N,D.index,!1,!0))}),function(D,N,U){(U.steps[U.active]||{}).visible||(U.active=U._visibleSteps[0]._index),N.call(h,U).call(S,U).call(d,U).call(k,U).call(P,D,U).call(o,D,U);var Q=U._dims;v.setTranslate(N,Q.lx+U.pad.l,Q.ly+U.pad.t),N.call(L,U,!1),N.call(h,U)}(E,p.select(this),X)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(y,$,ee){"use strict";var p=y("./constants");$.exports={moduleType:"component",name:p.name,layoutAttributes:y("./attributes"),supplyLayoutDefaults:y("./defaults"),draw:y("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("fast-isnumeric"),b=y("../../plots/plots"),v=y("../../registry"),e=y("../../lib"),n=e.strTranslate,t=y("../drawing"),a=y("../color"),r=y("../../lib/svg_text_utils"),u=y("../../constants/interactions"),s=y("../../constants/alignment").OPPOSITE_SIDE,i=/ [XY][0-9]* /;$.exports={draw:function(l,c,f){var g,o=f.propName,x=f.placeholder,d=f.traceIndex,w=f.avoid||{},_=f.attributes,T=f.transform,k=f.containerGroup,L=l._fullLayout,M=1,O=!1,P=f.propContainer.title,S=(P&&P.text?P.text:"").trim(),E=P&&P.font?P.font:{},R=E.family,B=E.size,H=E.color;"title.text"===o?g="titleText":-1!==o.indexOf("axis")?g="axisTitleText":o.indexOf(!0)&&(g="colorbarTitleText");var V=l._context.edits[g];""===S?M=0:S.replace(i," % ")===x.replace(i," % ")&&(M=.2,O=!0,V||(S="")),f._meta?S=e.templateString(S,f._meta):L._meta&&(S=e.templateString(S,L._meta));var Z=S||V;k||(k=e.ensureSingle(L._infolayer,"g","g-"+c));var W=k.selectAll("text").data(Z?[0]:[]);if(W.enter().append("text"),W.text(S).attr("class",c),W.exit().remove(),!Z)return k;function G(D){e.syncOrAsync([X,te],D)}function X(D){var N;return T?(N="",T.rotate&&(N+="rotate("+[T.rotate,_.x,_.y]+")"),T.offset&&(N+=n(0,T.offset))):N=null,D.attr("transform",N),D.style({"font-family":R,"font-size":p.round(B,2)+"px",fill:a.rgb(H),opacity:M*a.opacity(H),"font-weight":b.fontWeight}).attr(_).call(r.convertToTspans,l),b.previousPromises(l)}function te(D){var N=p.select(D.node().parentNode);if(w&&w.selection&&w.side&&S){N.attr("transform",null);var U=s[w.side],Q="left"===w.side||"top"===w.side?-1:1,j=m(w.pad)?w.pad:2,J=t.bBox(N.node()),re=w.maxShift||Q*({left:0,top:0,right:L.width,bottom:L.height}[w.side]-J[w.side]),ne=0;if(re<0)ne=re;else{var se=w.offsetLeft||0,oe=w.offsetTop||0;J.left-=se,J.right-=se,J.top-=oe,J.bottom-=oe,w.selection.each(function(){var ce=t.bBox(this);e.bBoxIntersect(J,ce,j)&&(ne=Math.max(ne,Q*(ce[w.side]-J[U])+j))}),ne=Math.min(re,ne)}if(ne>0||re<0){var pe={left:[-ne,0],right:[ne,0],top:[0,-ne],bottom:[0,ne]}[w.side];N.attr("transform",n(pe[0],pe[1]))}}}return W.call(G),V&&(S?W.on(".opacity",null):(M=0,O=!0,W.text(x).on("mouseover.opacity",function(){p.select(this).transition().duration(u.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){p.select(this).transition().duration(u.HIDE_PLACEHOLDER).style("opacity",0)})),W.call(r.makeEditable,{gd:l}).on("edit",function(D){void 0!==d?v.call("_guiRestyle",l,o,D,d):v.call("_guiRelayout",l,o,D)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(G)}).on("input",function(D){this.text(D||" ").call(r.positionText,_.x,_.y)})),W.classed("js-placeholder",O),k}}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(y,$,ee){"use strict";var p=y("../../plots/font_attributes"),m=y("../color/attributes"),b=y("../../lib/extend").extendFlat,v=y("../../plot_api/edit_types").overrideAll,e=y("../../plots/pad_attributes"),n=y("../../plot_api/plot_template").templatedArray,t=n("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});$.exports=v(n("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:t,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:b(e({editType:"arraydraw"}),{}),font:p({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:m.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(y,$,ee){"use strict";$.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],467:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/array_container_defaults"),b=y("./attributes"),v=y("./constants").name,e=b.buttons;function n(a,r,u){function s(i,l){return p.coerce(a,r,b,i,l)}s("visible",m(a,r,{name:"buttons",handleItemDefaults:t}).length>0)&&(s("active"),s("direction"),s("type"),s("showactive"),s("x"),s("y"),p.noneOrAll(a,r,["x","y"]),s("xanchor"),s("yanchor"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),p.coerceFont(s,"font",u.font),s("bgcolor",u.paper_bgcolor),s("bordercolor"),s("borderwidth"))}function t(a,r){function u(s,i){return p.coerce(a,r,e,s,i)}u("visible","skip"===a.method||Array.isArray(a.args))&&(u("method"),u("args"),u("args2"),u("label"),u("execute"))}$.exports=function(a,r){m(a,r,{name:v,handleItemDefaults:n})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../plots/plots"),b=y("../color"),v=y("../drawing"),e=y("../../lib"),n=y("../../lib/svg_text_utils"),t=y("../../plot_api/plot_template").arrayEditor,a=y("../../constants/alignment").LINE_SPACING,r=y("./constants"),u=y("./scrollbox");function s(M){return M._index}function i(M,O){return+M.attr(r.menuIndexAttrName)===O._index}function l(M,O,P,S,E,R,B,H){O.active=B,t(M.layout,r.name,O).applyUpdate("active",B),"buttons"===O.type?f(M,S,null,null,O):"dropdown"===O.type&&(E.attr(r.menuIndexAttrName,"-1"),c(M,S,E,R,O),H||f(M,S,E,R,O))}function c(M,O,P,S,E){var R=e.ensureSingle(O,"g",r.headerClassName,function(G){G.style("pointer-events","all")}),B=E._dims,Z={y:E.pad.t,yPad:0,x:E.pad.l,xPad:0,index:0},W={width:B.headerWidth,height:B.headerHeight};R.call(g,E,E.buttons[E.active]||r.blankHeaderOpts,M).call(k,E,Z,W),e.ensureSingle(O,"text",r.headerArrowClassName,function(G){G.attr("text-anchor","end").call(v.font,E.font).text(r.arrowSymbol[E.direction])}).attr({x:B.headerWidth-r.arrowOffsetX+E.pad.l,y:B.headerHeight/2+r.textOffsetY+E.pad.t}),R.on("click",function(){P.call(L,String(i(P,E)?-1:E._index)),f(M,O,P,S,E)}),R.on("mouseover",function(){R.call(d)}),R.on("mouseout",function(){R.call(w,E)}),v.setTranslate(O,B.lx,B.ly)}function f(M,O,P,S,E){P||(P=O).attr("pointer-events","all");var R=-1==+P.attr(r.menuIndexAttrName)&&"buttons"!==E.type?[]:E.buttons,B="dropdown"===E.type?r.dropdownButtonClassName:r.buttonClassName,H=P.selectAll("g."+B).data(e.filterVisible(R)),V=H.enter().append("g").classed(B,!0),Z=H.exit();"dropdown"===E.type?(V.attr("opacity","0").transition().attr("opacity","1"),Z.transition().attr("opacity","0").remove()):Z.remove();var W=0,G=0,X=E._dims,te=-1!==["up","down"].indexOf(E.direction);"dropdown"===E.type&&(te?G=X.headerHeight+r.gapButtonHeader:W=X.headerWidth+r.gapButtonHeader),"dropdown"===E.type&&"up"===E.direction&&(G=-r.gapButtonHeader+r.gapButton-X.openHeight),"dropdown"===E.type&&"left"===E.direction&&(W=-r.gapButtonHeader+r.gapButton-X.openWidth);var U,Q,j,D={x:X.lx+W+E.pad.l,y:X.ly+G+E.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},N={l:D.x+E.borderwidth,t:D.y+E.borderwidth};H.each(function(U,Q){var j=p.select(this);j.call(g,E,U,M).call(k,E,D),j.on("click",function(){p.event.defaultPrevented||(U.execute&&(U.args2&&E.active===Q?(l(M,E,0,O,P,S,-1),m.executeAPICommand(M,U.method,U.args2)):(l(M,E,0,O,P,S,Q),m.executeAPICommand(M,U.method,U.args))),M.emit("plotly_buttonclicked",{menu:E,button:U,active:E.active}))}),j.on("mouseover",function(){j.call(d)}),j.on("mouseout",function(){j.call(w,E),H.call(x,E)})}),H.call(x,E),te?(N.w=Math.max(X.openWidth,X.headerWidth),N.h=D.y-N.t):(N.w=D.x-N.l,N.h=Math.max(X.openHeight,X.headerHeight)),N.direction=E.direction,S&&(H.size()?function(U,Q,j,J,K,re){var ne,se,oe,pe=K.direction,ge=K._dims,xe=K.active;if("up"===pe||"down"===pe)for(se=0,oe=0;oe<xe;oe++)se+=ge.heights[oe]+r.gapButton;else for(ne=0,oe=0;oe<xe;oe++)ne+=ge.widths[oe]+r.gapButton;J.enable(re,ne,se),J.hbar&&J.hbar.attr("opacity","0").transition().attr("opacity","1"),J.vbar&&J.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,S,E,N):(j=!!(U=S).vbar,(Q=!!U.hbar)&&U.hbar.transition().attr("opacity","0").each("end",function(){Q=!1,j||U.disable()}),j&&U.vbar.transition().attr("opacity","0").each("end",function(){j=!1,Q||U.disable()})))}function g(M,O,P,S){M.call(h,O).call(o,O,P,S)}function h(M,O){e.ensureSingle(M,"rect",r.itemRectClassName,function(P){P.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})}).call(b.stroke,O.bordercolor).call(b.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px")}function o(M,O,P,S){var E=e.ensureSingle(M,"text",r.itemTextClassName,function(H){H.attr({"text-anchor":"start","data-notex":1})}),R=P.label,B=S._fullLayout._meta;B&&(R=e.templateString(R,B)),E.call(v.font,O.font).text(R).call(n.convertToTspans,S)}function x(M,O){var P=O.active;M.each(function(S,E){var R=p.select(this);E===P&&O.showactive&&R.select("rect."+r.itemRectClassName).call(b.fill,r.activeColor)})}function d(M){M.select("rect."+r.itemRectClassName).call(b.fill,r.hoverColor)}function w(M,O){M.select("rect."+r.itemRectClassName).call(b.fill,O.bgcolor)}function _(M,O){var P=O._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},S=v.tester.selectAll("g."+r.dropdownButtonClassName).data(e.filterVisible(O.buttons));S.enter().append("g").classed(r.dropdownButtonClassName,!0);var E=-1!==["up","down"].indexOf(O.direction);S.each(function(W,G){var X=p.select(this);X.call(g,O,W,M);var te=X.select("."+r.itemTextClassName),D=te.node()&&v.bBox(te.node()).width,N=Math.max(D+r.textPadX,r.minWidth),U=O.font.size*a,Q=n.lineCount(te),j=Math.max(U*Q,r.minHeight)+r.textOffsetY;j=Math.ceil(j),N=Math.ceil(N),P.widths[G]=N,P.heights[G]=j,P.height1=Math.max(P.height1,j),P.width1=Math.max(P.width1,N),E?(P.totalWidth=Math.max(P.totalWidth,N),P.openWidth=P.totalWidth,P.totalHeight+=j+r.gapButton,P.openHeight+=j+r.gapButton):(P.totalWidth+=N+r.gapButton,P.openWidth+=N+r.gapButton,P.totalHeight=Math.max(P.totalHeight,j),P.openHeight=P.totalHeight)}),E?P.totalHeight-=r.gapButton:P.totalWidth-=r.gapButton,P.headerWidth=P.width1+r.arrowPadX,P.headerHeight=P.height1,"dropdown"===O.type&&(E?(P.width1+=r.arrowPadX,P.totalHeight=P.height1):P.totalWidth=P.width1,P.totalWidth+=r.arrowPadX),S.remove();var R=P.totalWidth+O.pad.l+O.pad.r,B=P.totalHeight+O.pad.t+O.pad.b,H=M._fullLayout._size;P.lx=H.l+H.w*O.x,P.ly=H.t+H.h*(1-O.y);var V="left";e.isRightAnchor(O)&&(P.lx-=R,V="right"),e.isCenterAnchor(O)&&(P.lx-=R/2,V="center");var Z="top";e.isBottomAnchor(O)&&(P.ly-=B,Z="bottom"),e.isMiddleAnchor(O)&&(P.ly-=B/2,Z="middle"),P.totalWidth=Math.ceil(P.totalWidth),P.totalHeight=Math.ceil(P.totalHeight),P.lx=Math.round(P.lx),P.ly=Math.round(P.ly),m.autoMargin(M,T(O),{x:O.x,y:O.y,l:R*({right:1,center:.5}[V]||0),r:R*({left:1,center:.5}[V]||0),b:B*({top:1,middle:.5}[Z]||0),t:B*({bottom:1,middle:.5}[Z]||0)})}function T(M){return r.autoMarginIdRoot+M._index}function k(M,O,P,S){S=S||{};var E=M.select("."+r.itemRectClassName),R=M.select("."+r.itemTextClassName),B=O.borderwidth,H=P.index,V=O._dims;v.setTranslate(M,B+P.x,B+P.y);var Z=-1!==["up","down"].indexOf(O.direction),W=S.height||(Z?V.heights[H]:V.height1);E.attr({x:0,y:0,width:S.width||(Z?V.width1:V.widths[H]),height:W});var G=O.font.size*a,X=(n.lineCount(R)-1)*G/2;n.positionText(R,r.textOffsetX,W/2-X+r.textOffsetY),Z?P.y+=V.heights[H]+P.yPad:P.x+=V.widths[H]+P.xPad,P.index++}function L(M,O){M.attr(r.menuIndexAttrName,O||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}$.exports=function(M){var O=M._fullLayout,P=e.filterVisible(O[r.name]);function S(G){m.autoMargin(M,T(G))}var E=O._menulayer.selectAll("g."+r.containerClassName).data(P.length>0?[0]:[]);if(E.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),E.exit().each(function(){p.select(this).selectAll("g."+r.headerGroupClassName).each(S)}).remove(),0!==P.length){var R=E.selectAll("g."+r.headerGroupClassName).data(P,s);R.enter().append("g").classed(r.headerGroupClassName,!0);for(var B=e.ensureSingle(E,"g",r.dropdownButtonGroupClassName,function(G){G.style("pointer-events","all")}),H=0;H<P.length;H++)_(M,P[H]);var W=new u(M,B,"updatemenus"+O._uid);R.enter().size()&&(B.node().parentNode.appendChild(B.node()),B.call(L)),R.exit().each(function(G){B.call(L),S(G)}).remove(),R.each(function(G){var X=p.select(this),te="dropdown"===G.type?B:null;m.manageCommandObserver(M,G,G.buttons,function(D){l(M,G,0,X,te,W,D.index,!0)}),"dropdown"===G.type?(c(M,X,B,W,G),i(B,G)&&f(M,X,B,W,G)):f(M,X,null,null,G)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(y,$,ee){arguments[4][463][0].apply(ee,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(y,$,ee){"use strict";$.exports=e;var p=y("@plotly/d3"),m=y("../color"),b=y("../drawing"),v=y("../../lib");function e(n,t,a){this.gd=n,this.container=t,this.id=a,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(n,t,a){var r=this.gd._fullLayout,u=r.width,s=r.height;this.position=n;var i,l,c,f,g=this.position.l,h=this.position.w,o=this.position.t,x=this.position.h,d=this.position.direction,w="down"===d,_="left"===d,T="up"===d,k=h,L=x;w||_||"right"===d||T||(this.position.direction="down",w=!0),w||T?(l=(i=g)+k,w?(c=o,L=(f=Math.min(c+L,s))-c):L=(f=o+L)-(c=Math.max(f-L,0))):(f=(c=o)+L,_?k=(l=g+k)-(i=Math.max(l-k,0)):(i=g,k=(l=Math.min(i+k,u))-i)),this._box={l:i,t:c,w:k,h:L};var M=h>k,O=e.barLength+2*e.barPad,P=e.barWidth+2*e.barPad,S=g,E=o+x;E+P>s&&(E=s-P);var R=this.container.selectAll("rect.scrollbar-horizontal").data(M?[0]:[]);R.exit().on(".drag",null).remove(),R.enter().append("rect").classed("scrollbar-horizontal",!0).call(m.fill,e.barColor),M?(this.hbar=R.attr({rx:e.barRadius,ry:e.barRadius,x:S,y:E,width:O,height:P}),this._hbarXMin=S+O/2,this._hbarTranslateMax=k-O):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var B=x>L,H=e.barWidth+2*e.barPad,V=e.barLength+2*e.barPad,Z=g+h,W=o;Z+H>u&&(Z=u-H);var G=this.container.selectAll("rect.scrollbar-vertical").data(B?[0]:[]);G.exit().on(".drag",null).remove(),G.enter().append("rect").classed("scrollbar-vertical",!0).call(m.fill,e.barColor),B?(this.vbar=G.attr({rx:e.barRadius,ry:e.barRadius,x:Z,y:W,width:H,height:V}),this._vbarYMin=W+V/2,this._vbarTranslateMax=L-V):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var X=this.id,te=i-.5,D=B?l+H+.5:l+.5,N=c-.5,U=M?f+P+.5:f+.5,Q=r._topdefs.selectAll("#"+X).data(M||B?[0]:[]);if(Q.exit().remove(),Q.enter().append("clipPath").attr("id",X).append("rect"),M||B?(this._clipRect=Q.select("rect").attr({x:Math.floor(te),y:Math.floor(N),width:Math.ceil(D)-Math.floor(te),height:Math.ceil(U)-Math.floor(N)}),this.container.call(b.setClipUrl,X,this.gd),this.bg.attr({x:g,y:o,width:h,height:x})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(b.setClipUrl,null),delete this._clipRect),M||B){var j=p.behavior.drag().on("dragstart",function(){p.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(j);var J=p.behavior.drag().on("dragstart",function(){p.event.sourceEvent.preventDefault(),p.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));M&&this.hbar.on(".drag",null).call(J),B&&this.vbar.on(".drag",null).call(J)}this.setTranslate(t,a)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(b.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var n=this.translateX,t=this.translateY;this.hbar&&(n-=p.event.dx),this.vbar&&(t-=p.event.dy),this.setTranslate(n,t)},e.prototype._onBoxWheel=function(){var n=this.translateX,t=this.translateY;this.hbar&&(n+=p.event.deltaY),this.vbar&&(t+=p.event.deltaY),this.setTranslate(n,t)},e.prototype._onBarDrag=function(){var n=this.translateX,t=this.translateY;if(this.hbar){var a=n+this._hbarXMin,r=a+this._hbarTranslateMax;n=(v.constrain(p.event.x,a,r)-a)/(r-a)*(this.position.w-this._box.w)}if(this.vbar){var u=t+this._vbarYMin,s=u+this._vbarTranslateMax;t=(v.constrain(p.event.y,u,s)-u)/(s-u)*(this.position.h-this._box.h)}this.setTranslate(n,t)},e.prototype.setTranslate=function(n,t){var a=this.position.w-this._box.w,r=this.position.h-this._box.h;n=v.constrain(n||0,0,a),t=v.constrain(t||0,0,r),this.translateX=n,this.translateY=t,this.container.call(b.setTranslate,this._box.l-this.position.l-n,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+n-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar&&this.hbar.call(b.setTranslate,n+n/a*this._hbarTranslateMax,t),this.vbar&&this.vbar.call(b.setTranslate,n,t+t/r*this._vbarTranslateMax)}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(y,$,ee){"use strict";$.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(y,$,ee){"use strict";$.exports={axisRefDescription:function(p,m,b){return["If set to a",p,"axis id (e.g. *"+p+"* or","*"+p+"2*), the `"+p+"` position refers to a",p,"coordinate. If set to *paper*, the `"+p+"`","position refers to the distance from the",m,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",m,"("+b+"). If set to a",p,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",m,"of the domain of that axis: e.g.,","*"+p+"2 domain* refers to the domain of the second",p," axis and a",p,"position of 0.5 refers to the","point between the",m,"and the",b,"of the domain of the","second",p,"axis."].join(" ")}}},{}],473:[function(y,$,ee){"use strict";$.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],474:[function(y,$,ee){"use strict";$.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(y,$,ee){"use strict";$.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(y,$,ee){"use strict";$.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(y,$,ee){"use strict";$.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],478:[function(y,$,ee){"use strict";$.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(y,$,ee){"use strict";$.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(y,$,ee){"use strict";ee.xmlns="http://www.w3.org/2000/xmlns/",ee.svg="http://www.w3.org/2000/svg",ee.xlink="http://www.w3.org/1999/xlink",ee.svgAttrs={xmlns:ee.svg,"xmlns:xlink":ee.xlink}},{}],481:[function(y,$,ee){"use strict";ee.version=y("./version").version,y("native-promise-only"),y("../build/plotcss");for(var p=y("./registry"),m=ee.register=p.register,b=y("./plot_api"),v=Object.keys(b),e=0;e<v.length;e++){var n=v[e];"_"!==n.charAt(0)&&(ee[n]=b[n]),m({moduleType:"apiMethod",name:n,fn:b[n]})}m(y("./traces/scatter")),m([y("./components/legend"),y("./components/fx"),y("./components/annotations"),y("./components/annotations3d"),y("./components/shapes"),y("./components/images"),y("./components/updatemenus"),y("./components/sliders"),y("./components/rangeslider"),y("./components/rangeselector"),y("./components/grid"),y("./components/errorbars"),y("./components/colorscale"),y("./components/colorbar"),y("./components/modebar")]),m([y("./locale-en"),y("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(m(window.PlotlyLocales),delete window.PlotlyLocales),ee.Icons=y("./fonts/ploticon");var t=y("./components/fx"),a=y("./plots/plots");ee.Plots={resize:a.resize,graphJson:a.graphJson,sendDataToCloud:a.sendDataToCloud},ee.Fx={hover:t.hover,unhover:t.unhover,loneHover:t.loneHover,loneUnhover:t.loneUnhover},ee.Snapshot=y("./snapshot"),ee.PlotSchema=y("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":937,"./version":1118,"native-promise-only":245}],482:[function(y,$,ee){"use strict";$.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(y,$,ee){"use strict";ee.isLeftAnchor=function(p){return"left"===p.xanchor||"auto"===p.xanchor&&p.x<=1/3},ee.isCenterAnchor=function(p){return"center"===p.xanchor||"auto"===p.xanchor&&p.x>1/3&&p.x<2/3},ee.isRightAnchor=function(p){return"right"===p.xanchor||"auto"===p.xanchor&&p.x>=2/3},ee.isTopAnchor=function(p){return"top"===p.yanchor||"auto"===p.yanchor&&p.y>=2/3},ee.isMiddleAnchor=function(p){return"middle"===p.yanchor||"auto"===p.yanchor&&p.y>1/3&&p.y<2/3},ee.isBottomAnchor=function(p){return"bottom"===p.yanchor||"auto"===p.yanchor&&p.y<=1/3}},{}],484:[function(y,$,ee){"use strict";var p=y("./mod"),m=p.mod,b=p.modHalf,v=Math.PI,e=2*v;function n(u){return Math.abs(u[1]-u[0])>e-1e-14}function t(u,s){return b(s-u,e)}function a(u,s){if(n(s))return!0;var i,l;s[0]<s[1]?(i=s[0],l=s[1]):(i=s[1],l=s[0]),(i=m(i,e))>(l=m(l,e))&&(l+=e);var c=m(u,e),f=c+e;return c>=i&&c<=l||f>=i&&f<=l}function r(u,s,i,l,c,f,g){c=c||0,f=f||0;var h,o,x,d,w,_=n([i,l]);function T(O,P){return[O*Math.cos(P)+c,f-O*Math.sin(P)]}_?(h=0,o=v,x=e):i<l?(h=i,x=l):(h=l,x=i),u<s?(d=u,w=s):(d=s,w=u);var k,L=Math.abs(x-h)<=v?0:1;function M(O,P,S){return"A"+[O,O]+" "+[0,L,S]+" "+T(O,P)}return _?k=null===d?"M"+T(w,h)+M(w,o,0)+M(w,x,0)+"Z":"M"+T(d,h)+M(d,o,0)+M(d,x,0)+"ZM"+T(w,h)+M(w,o,1)+M(w,x,1)+"Z":null===d?(k="M"+T(w,h)+M(w,x,0),g&&(k+="L0,0Z")):k="M"+T(d,h)+"L"+T(w,h)+M(w,x,0)+"L"+T(d,x)+M(d,h,1)+"Z",k}$.exports={deg2rad:function(u){return u/180*v},rad2deg:function(u){return u/v*180},angleDelta:t,angleDist:function(u,s){return Math.abs(t(u,s))},isFullCircle:n,isAngleInsideSector:a,isPtInsideSector:function(u,s,i,l){return!!a(s,l)&&(i[0]<i[1]?(c=i[0],f=i[1]):(c=i[1],f=i[0]),u>=c&&u<=f);var c,f},pathArc:function(u,s,i,l,c){return r(null,u,s,i,l,c,0)},pathSector:function(u,s,i,l,c){return r(null,u,s,i,l,c,1)},pathAnnulus:function(u,s,i,l,c,f){return r(u,s,i,l,c,f,1)}}},{"./mod":510}],485:[function(y,$,ee){"use strict";var p=Array.isArray,m=ArrayBuffer,b=DataView;function v(t){return m.isView(t)&&!(t instanceof b)}function e(t){return p(t)||v(t)}function n(t,a,r){if(e(t)){if(e(t[0])){for(var u=r,s=0;s<t.length;s++)u=a(u,t[s].length);return u}return t.length}return 0}ee.isTypedArray=v,ee.isArrayOrTypedArray=e,ee.isArray1D=function(t){return!e(t[0])},ee.ensureArray=function(t,a){return p(t)||(t=[]),t.length=a,t},ee.concat=function(){var t,a,r,u,s,i,l,c,f=[],g=!0,h=0;for(r=0;r<arguments.length;r++)(i=(u=arguments[r]).length)&&(a?f.push(u):(a=u,s=i),p(u)?t=!1:(g=!1,h?t!==u.constructor&&(t=!1):t=u.constructor),h+=i);if(!h)return[];if(!f.length)return a;if(g)return a.concat.apply(a,f);if(t){for((l=new t(h)).set(a),r=0;r<f.length;r++)l.set(u=f[r],s),s+=u.length;return l}for(l=new Array(h),c=0;c<a.length;c++)l[c]=a[c];for(r=0;r<f.length;r++){for(u=f[r],c=0;c<u.length;c++)l[s+c]=u[c];s+=c}return l},ee.maxRowLength=function(t){return n(t,Math.max,0)},ee.minRowLength=function(t){return n(t,Math.min,1/0)}},{}],486:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../constants/numerical").BADNUM,b=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;$.exports=function(v){return"string"==typeof v&&(v=v.replace(b,"")),p(v)?Number(v):m}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(y,$,ee){"use strict";$.exports=function(p){var m=p._fullLayout;m._glcanvas&&m._glcanvas.size()&&m._glcanvas.each(function(b){b.regl&&b.regl.clear({color:!0,depth:!0})})}},{}],488:[function(y,$,ee){"use strict";$.exports=function(p){p._responsiveChartHandler&&(window.removeEventListener("resize",p._responsiveChartHandler),delete p._responsiveChartHandler)}},{}],489:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("tinycolor2"),b=y("../plots/attributes"),v=y("../components/colorscale/scales"),e=y("../components/color"),n=y("../constants/interactions").DESELECTDIM,t=y("./nested_property"),a=y("./regex").counter,r=y("./mod").modHalf,u=y("./array").isArrayOrTypedArray;function s(i,l){var c=ee.valObjectMeta[l.valType];if(l.arrayOk&&u(i))return!0;if(c.validateFunction)return c.validateFunction(i,l);var f={},g=f;return c.coerceFunction(i,{set:function(o){g=o}},f,l),g!==f}ee.valObjectMeta={data_array:{coerceFunction:function(i,l,c){u(i)?l.set(i):void 0!==c&&l.set(c)}},enumerated:{coerceFunction:function(i,l,c,f){f.coerceNumber&&(i=+i),-1===f.values.indexOf(i)?l.set(c):l.set(i)},validateFunction:function(i,l){l.coerceNumber&&(i=+i);for(var c=l.values,f=0;f<c.length;f++){var g=String(c[f]);if("/"===g.charAt(0)&&"/"===g.charAt(g.length-1)){if(new RegExp(g.substr(1,g.length-2)).test(i))return!0}else if(i===c[f])return!0}return!1}},boolean:{coerceFunction:function(i,l,c){l.set(!0===i||!1===i?i:c)}},number:{coerceFunction:function(i,l,c,f){!p(i)||void 0!==f.min&&i<f.min||void 0!==f.max&&i>f.max?l.set(c):l.set(+i)}},integer:{coerceFunction:function(i,l,c,f){i%1||!p(i)||void 0!==f.min&&i<f.min||void 0!==f.max&&i>f.max?l.set(c):l.set(+i)}},string:{coerceFunction:function(i,l,c,f){l.set("string"!=typeof i?!0!==f.strict&&"number"==typeof i?String(i):c:f.noBlank&&!i?c:i)}},color:{coerceFunction:function(i,l,c){m(i).isValid()?l.set(i):l.set(c)}},colorlist:{coerceFunction:function(i,l,c){Array.isArray(i)&&i.length&&i.every(function(f){return m(f).isValid()})?l.set(i):l.set(c)}},colorscale:{coerceFunction:function(i,l,c){l.set(v.get(i,c))}},angle:{coerceFunction:function(i,l,c){"auto"===i?l.set("auto"):p(i)?l.set(r(+i,360)):l.set(c)}},subplotid:{coerceFunction:function(i,l,c,f){var g=f.regex||a(c);"string"==typeof i&&g.test(i)?l.set(i):l.set(c)},validateFunction:function(i,l){var c=l.dflt;return i===c||"string"==typeof i&&!!a(c).test(i)}},flaglist:{coerceFunction:function(i,l,c,f){if("string"==typeof i)if(-1===(f.extras||[]).indexOf(i)){for(var g=i.split("+"),h=0;h<g.length;){var o=g[h];-1===f.flags.indexOf(o)||g.indexOf(o)<h?g.splice(h,1):h++}l.set(g.length?g.join("+"):c)}else l.set(i);else l.set(c)}},any:{coerceFunction:function(i,l,c){l.set(void 0===i?c:i)}},info_array:{coerceFunction:function(i,l,c,f){function g(E,R,B){var H;return void 0===B&&(B=R.dflt),ee.valObjectMeta[R.valType].coerceFunction(E,{set:function(Z){H=Z}},B,R),H}var h=2===f.dimensions||"1-2"===f.dimensions&&Array.isArray(i)&&Array.isArray(i[0]);if(Array.isArray(i)){var o,x,d,_,T,k=f.items,L=[],M=Array.isArray(k),O=M&&h&&Array.isArray(k[0]),P=h&&M&&!O,S=M&&!P?k.length:i.length;if(c=Array.isArray(c)?c:[],h)for(o=0;o<S;o++)for(L[o]=[],d=Array.isArray(i[o])?i[o]:[],_=P?k.length:M?k[o].length:d.length,x=0;x<_;x++)void 0!==(T=g(d[x],P?k[x]:M?k[o][x]:k,(c[o]||[])[x]))&&(L[o][x]=T);else for(o=0;o<S;o++)void 0!==(T=g(i[o],M?k[o]:k,c[o]))&&(L[o]=T);l.set(L)}else l.set(c)},validateFunction:function(i,l){if(!Array.isArray(i))return!1;var c=l.items,f=Array.isArray(c),g=2===l.dimensions;if(!l.freeLength&&i.length!==c.length)return!1;for(var h=0;h<i.length;h++)if(g){if(!Array.isArray(i[h])||!l.freeLength&&i[h].length!==c[h].length)return!1;for(var o=0;o<i[h].length;o++)if(!s(i[h][o],f?c[h][o]:c))return!1}else if(!s(i[h],f?c[h]:c))return!1;return!0}}},ee.coerce=function(i,l,c,f,g){var h=t(c,f).get(),o=t(i,f),x=t(l,f),d=o.get(),w=l._template;if(void 0===d&&w&&(d=t(w,f).get(),w=0),void 0===g&&(g=h.dflt),h.arrayOk&&u(d))return x.set(d),d;var _=ee.valObjectMeta[h.valType].coerceFunction;_(d,x,g,h);var T=x.get();return w&&T===g&&!s(d,h)&&(_(d=t(w,f).get(),x,g,h),T=x.get()),T},ee.coerce2=function(i,l,c,f,g){var h=t(i,f),o=ee.coerce(i,l,c,f,g);return null!=h.get()&&o},ee.coerceFont=function(i,l,c){var f={};return f.family=i(l+".family",(c=c||{}).family),f.size=i(l+".size",c.size),f.color=i(l+".color",c.color),f},ee.coercePattern=function(i,l,c,f){if(i(l+".shape")){i(l+".solidity"),i(l+".size");var g="overlay"===i(l+".fillmode");if(!f){var h=i(l+".bgcolor",g?c:void 0);i(l+".fgcolor",g?e.contrast(h):c)}i(l+".fgopacity",g?.5:1)}},ee.coerceHoverinfo=function(i,l,c){var f,g=l._module.attributes,h=g.hoverinfo?g:b,o=h.hoverinfo;if(1===c._dataLength){var x="all"===o.dflt?o.flags.slice():o.dflt.split("+");x.splice(x.indexOf("name"),1),f=x.join("+")}return ee.coerce(i,l,h,"hoverinfo",f)},ee.coerceSelectionMarkerOpacity=function(i,l){if(i.marker){var c,f,g=i.marker.opacity;void 0!==g&&(u(g)||i.selected||i.unselected||(c=g,f=n*g),l("selected.marker.opacity",c),l("unselected.marker.opacity",f))}},ee.validate=s},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(y,$,ee){"use strict";var p,m,b=y("d3-time-format").timeFormat,v=y("fast-isnumeric"),e=y("./loggers"),n=y("./mod").mod,t=y("../constants/numerical"),a=t.BADNUM,r=t.ONEDAY,u=t.ONEHOUR,s=t.ONEMIN,i=t.ONESEC,l=t.EPOCHJD,c=y("../registry"),f=y("d3-time-format").utcFormat,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,h=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,o=(new Date).getFullYear()-70;function x(R){return R&&c.componentsRegistry.calendars&&"string"==typeof R&&"gregorian"!==R}function d(R,B){return String(R+Math.pow(10,B)).substr(1)}ee.dateTick0=function(R,B){var Z,W,H=(W=!!B,x(Z=R)?W?c.getComponentMethod("calendars","CANONICAL_SUNDAY")[Z]:c.getComponentMethod("calendars","CANONICAL_TICK")[Z]:W?"2000-01-02":"2000-01-01");if(B<2)return H;var V=ee.dateTime2ms(H,R);return ee.ms2DateTime(V+=r*(B-1),0,R)},ee.dfltRange=function(R){return x(R)?c.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},ee.isJSDate=function(R){return"object"==typeof R&&null!==R&&"function"==typeof R.getTime},ee.dateTime2ms=function(R,B){if(ee.isJSDate(R)){var H=R.getTimezoneOffset()*s,V=(R.getUTCMinutes()-R.getMinutes())*s+(R.getUTCSeconds()-R.getSeconds())*i+(R.getUTCMilliseconds()-R.getMilliseconds());if(V){var Z=3*s;H=H-Z/2+n(V-H+Z/2,Z)}return(R=Number(R)-H)>=p&&R<=m?R:a}if("string"!=typeof R&&"number"!=typeof R)return a;R=String(R);var W=x(B),G=R.charAt(0);!W||"G"!==G&&"g"!==G||(R=R.substr(1),B="");var X=W&&"chinese"===B.substr(0,7),te=R.match(X?h:g);if(!te)return a;var D=te[1],N=te[3]||"1",U=Number(te[5]||1),Q=Number(te[7]||0),j=Number(te[9]||0),J=Number(te[11]||0);if(W){if(2===D.length)return a;var K;D=Number(D);try{var re=c.getComponentMethod("calendars","getCal")(B);if(X){var ne="i"===N.charAt(N.length-1);N=parseInt(N,10),K=re.newDate(D,re.toMonthIndex(D,N,ne),U)}else K=re.newDate(D,Number(N),U)}catch(oe){return a}return K?(K.toJD()-l)*r+Q*u+j*s+J*i:a}D=2===D.length?(Number(D)+2e3-o)%100+o:Number(D),N-=1;var se=new Date(Date.UTC(2e3,N,U,Q,j));return se.setUTCFullYear(D),se.getUTCMonth()!==N||se.getUTCDate()!==U?a:se.getTime()+J*i},p=ee.MIN_MS=ee.dateTime2ms("-9999"),m=ee.MAX_MS=ee.dateTime2ms("9999-12-31 23:59:59.9999"),ee.isDateTime=function(R,B){return ee.dateTime2ms(R,B)!==a};var w=90*r,_=3*u,T=5*s;function k(R,B,H,V,Z){if((B||H||V||Z)&&(R+=" "+d(B,2)+":"+d(H,2),(V||Z)&&(R+=":"+d(V,2),Z))){for(var W=4;Z%10==0;)W-=1,Z/=10;R+="."+d(Z,W)}return R}ee.ms2DateTime=function(R,B,H){if("number"!=typeof R||!(R>=p&&R<=m))return a;B||(B=0);var V,Z,W,G,X,te,D=Math.floor(10*n(R+.05,1)),N=Math.round(R-D/10);if(x(H)){var U=Math.floor(N/r)+l,Q=Math.floor(n(R,r));try{V=c.getComponentMethod("calendars","getCal")(H).fromJD(U).formatDate("yyyy-mm-dd")}catch(j){V=f("G%Y-%m-%d")(new Date(N))}if("-"===V.charAt(0))for(;V.length<11;)V="-0"+V.substr(1);else for(;V.length<10;)V="0"+V;Z=B<w?Math.floor(Q/u):0,W=B<w?Math.floor(Q%u/s):0,G=B<_?Math.floor(Q%s/i):0,X=B<T?Q%i*10+D:0}else te=new Date(N),V=f("%Y-%m-%d")(te),Z=B<w?te.getUTCHours():0,W=B<w?te.getUTCMinutes():0,G=B<_?te.getUTCSeconds():0,X=B<T?10*te.getUTCMilliseconds()+D:0;return k(V,Z,W,G,X)},ee.ms2DateTimeLocal=function(R){if(!(R>=p+r&&R<=m-r))return a;var B=Math.floor(10*n(R+.05,1)),H=new Date(Math.round(R-B/10));return k(b("%Y-%m-%d")(H),H.getHours(),H.getMinutes(),H.getSeconds(),10*H.getUTCMilliseconds()+B)},ee.cleanDate=function(R,B,H){if(R===a)return B;if(ee.isJSDate(R)||"number"==typeof R&&isFinite(R)){if(x(H))return e.error("JS Dates and milliseconds are incompatible with world calendars",R),B;if(!(R=ee.ms2DateTimeLocal(+R))&&void 0!==B)return B}else if(!ee.isDateTime(R,H))return e.error("unrecognized date",R),B;return R};var L=/%\d?f/g,M=/%h/g,O={1:"1",2:"1",3:"2",4:"2"};function P(R,B,H,V){R=R.replace(L,function(W){var G=Math.min(+W.charAt(1)||6,6);return(B/1e3%1+2).toFixed(G).substr(2).replace(/0+$/,"")||"0"});var Z=new Date(Math.floor(B+.05));if(R=R.replace(M,function(){return O[H("%q")(Z)]}),x(V))try{R=c.getComponentMethod("calendars","worldCalFmt")(R,B,V)}catch(W){return"Invalid"}return H(R)(Z)}var S=[59,59.9,59.99,59.999,59.9999];ee.formatDate=function(R,B,H,V,Z,W){if(Z=x(Z)&&Z,!B)if("y"===H)B=W.year;else if("m"===H)B=W.month;else{if("d"!==H)return function(G,X){var te=n(G+.05,r),D=d(Math.floor(te/u),2)+":"+d(n(Math.floor(te/s),60),2);if("M"!==X){v(X)||(X=0);var N=(100+Math.min(n(G/i,60),S[X])).toFixed(X).substr(1);X>0&&(N=N.replace(/0+$/,"").replace(/[\.]$/,"")),D+=":"+N}return D}(R,H)+"\n"+P(W.dayMonthYear,R,V,Z);B=W.dayMonth+"\n"+W.year}return P(B,R,V,Z)};var E=3*r;ee.incrementMonth=function(R,B,H){H=x(H)&&H;var V=n(R,r);if(R=Math.round(R-V),H)try{var Z=Math.round(R/r)+l,W=c.getComponentMethod("calendars","getCal")(H),G=W.fromJD(Z);return B%12?W.add(G,B,"m"):W.add(G,B/12,"y"),(G.toJD()-l)*r+V}catch(te){e.error("invalid ms "+R+" in calendar "+H)}var X=new Date(R+E);return X.setUTCMonth(X.getUTCMonth()+B)+V-E},ee.findExactDates=function(R,B){for(var H,V,Z=0,W=0,G=0,X=0,te=x(B)&&c.getComponentMethod("calendars","getCal")(B),D=0;D<R.length;D++)if(v(V=R[D])){if(!(V%r))if(te)try{1===(H=te.fromJD(V/r+l)).day()?1===H.month()?Z++:W++:G++}catch(U){}else 1===(H=new Date(V)).getUTCDate()?0===H.getUTCMonth()?Z++:W++:G++}else X++;G+=W+=Z;var N=R.length-X;return{exactYears:Z/N,exactMonths:W/N,exactDays:G/N}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("./loggers"),b=y("./matrix"),v=y("gl-mat4");function e(u){var s=u&&u.parentNode;s&&s.removeChild(u)}function n(u,s,i){var l="plotly.js-style-"+u,c=document.getElementById(l);c||((c=document.createElement("style")).setAttribute("id",l),c.appendChild(document.createTextNode("")),document.head.appendChild(c));var f=c.sheet;f.insertRule?f.insertRule(s+"{"+i+"}",0):f.addRule?f.addRule(s,i,0):m.warn("addStyleRule failed")}function t(u){var s=window.getComputedStyle(u,null),i=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("-moz-transform")||s.getPropertyValue("-ms-transform")||s.getPropertyValue("-o-transform")||s.getPropertyValue("transform");return"none"===i?null:i.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(l){return+l})}function a(u){for(var s=[];r(u);)s.push(u),u=u.parentNode;return s}function r(u){return u&&(u instanceof Element||u instanceof HTMLElement)}$.exports={getGraphDiv:function(u){var s;if("string"==typeof u){if(null===(s=document.getElementById(u)))throw new Error("No DOM element with id '"+u+"' exists on the page.");return s}if(null==u)throw new Error("DOM element provided is null or undefined");return u},isPlotDiv:function(u){var s=p.select(u);return s.node()instanceof HTMLElement&&s.size()&&s.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(u,s){n("global",u,s)},addRelatedStyleRule:n,deleteRelatedStyleRule:function(u){var i=document.getElementById("plotly.js-style-"+u);i&&e(i)},getFullTransformMatrix:function(u){var s=a(u),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return s.forEach(function(l){var c=t(l);if(c){var f=b.convertCssMatrix(c);i=v.multiply(i,i,f)}}),i},getElementTransformMatrix:t,getElementAndAncestors:a,equalDomRects:function(u,s){return u&&s&&u.x===s.x&&u.y===s.y&&u.top===s.top&&u.left===s.left&&u.right===s.right&&u.bottom===s.bottom}}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(y,$,ee){"use strict";var p=y("events").EventEmitter;$.exports={init:function(b){if(b._ev instanceof p)return b;var v=new p,e=new p;return b._ev=v,b._internalEv=e,b.on=v.on.bind(v),b.once=v.once.bind(v),b.removeListener=v.removeListener.bind(v),b.removeAllListeners=v.removeAllListeners.bind(v),b._internalOn=e.on.bind(e),b._internalOnce=e.once.bind(e),b._removeInternalListener=e.removeListener.bind(e),b._removeAllInternalListeners=e.removeAllListeners.bind(e),b.emit=function(n,t){"undefined"!=typeof jQuery&&jQuery(b).trigger(n,t),v.emit(n,t),e.emit(n,t)},b},triggerHandler:function(b,v,e){var n,t;"undefined"!=typeof jQuery&&(n=jQuery(b).triggerHandler(v,e));var a=b._ev;if(!a)return n;var r,u=a._events[v];if(!u)return n;function s(i){return i.listener?(a.removeListener(v,i.listener),i.fired?void 0:(i.fired=!0,i.listener.apply(a,[e]))):i.apply(a,[e])}for(u=Array.isArray(u)?u:[u],r=0;r<u.length-1;r++)s(u[r]);return t=s(u[r]),void 0!==n?n:t},purge:function(b){return delete b._ev,delete b.on,delete b.once,delete b.removeListener,delete b.removeAllListeners,delete b.emit,delete b._ev,delete b._internalEv,delete b._internalOn,delete b._internalOnce,delete b._removeInternalListener,delete b._removeAllInternalListeners,b}}},{events:84}],493:[function(y,$,ee){"use strict";var p=y("./is_plain_object.js"),m=Array.isArray;function b(v,e,n,t){var a,r,u,s,i,l,c=v[0],f=v.length;if(2===f&&m(c)&&m(v[1])&&0===c.length){if(function(h,o){var x,d;for(x=0;x<h.length;x++){if(null!==(d=h[x])&&"object"==typeof d)return!1;void 0!==d&&(o[x]=d)}return!0}(v[1],c))return c;c.splice(0,c.length)}for(var g=1;g<f;g++)for(r in a=v[g])u=c[r],s=a[r],t&&m(s)?c[r]=s:e&&s&&(p(s)||(i=m(s)))?(i?(i=!1,l=u&&m(u)?u:[]):l=u&&p(u)?u:{},c[r]=b([l,s],e,n,t)):(void 0!==s||n)&&(c[r]=s);return c}ee.extendFlat=function(){return b(arguments,!1,!1,!1)},ee.extendDeep=function(){return b(arguments,!0,!1,!1)},ee.extendDeepAll=function(){return b(arguments,!0,!0,!1)},ee.extendDeepNoArrays=function(){return b(arguments,!0,!1,!0)}},{"./is_plain_object.js":504}],494:[function(y,$,ee){"use strict";$.exports=function(p){for(var m={},b=[],v=0,e=0;e<p.length;e++){var n=p[e];1!==m[n]&&(m[n]=1,b[v++]=n)}return b}},{}],495:[function(y,$,ee){"use strict";function p(b){return!0===b.visible}function m(b){var v=b[0].trace;return!0===v.visible&&0!==v._length}$.exports=function(b){for(var v,e=(v=b,Array.isArray(v)&&Array.isArray(v[0])&&v[0][0]&&v[0][0].trace?m:p),n=[],t=0;t<b.length;t++){var a=b[t];e(a)&&n.push(a)}return n}},{}],496:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("country-regex"),b=y("@turf/area"),v=y("@turf/centroid"),e=y("@turf/bbox"),n=y("./identity"),t=y("./loggers"),a=y("./is_plain_object"),r=y("./nested_property"),u=y("./polygon"),s=Object.keys(m),i={"ISO-3":n,"USA-states":n,"country names":function(c){for(var f=0;f<s.length;f++){var g=s[f];if(new RegExp(m[g]).test(c.trim().toLowerCase()))return g}return t.log("Unrecognized country name: "+c+"."),!1}};function l(c){var f=c.geojson,g=window.PlotlyGeoAssets||{},h="string"==typeof f?g[f]:f;return a(h)?h:(t.error("Oops ... something went wrong when fetching "+f),!1)}$.exports={locationToFeature:function(c,f,g){if(!f||"string"!=typeof f)return!1;var h,o,x,d=i[c](f);if(d){if("USA-states"===c)for(h=[],x=0;x<g.length;x++)(o=g[x]).properties&&o.properties.gu&&"USA"===o.properties.gu&&h.push(o);else h=g;for(x=0;x<h.length;x++)if((o=h[x]).id===d)return o;t.log(["Location with id",d,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(c){var f,g,h,o,x=c.geometry,d=x.coordinates,w=c.id,_=[];function T(k){for(var L=0;L<k.length-1;L++)if(k[L][0]>0&&k[L+1][0]<0)return L;return null}switch(f="RUS"===w||"FJI"===w?function(k){var L;if(null===T(k))L=k;else for(L=new Array(k.length),o=0;o<k.length;o++)L[o]=[k[o][0]<0?k[o][0]+360:k[o][0],k[o][1]];_.push(u.tester(L))}:"ATA"===w?function(k){var L=T(k);if(null===L)return _.push(u.tester(k));var M=new Array(k.length+1),O=0;for(o=0;o<k.length;o++)o>L?M[O++]=[k[o][0]+360,k[o][1]]:o===L?(M[O++]=k[o],M[O++]=[k[o][0],-90]):M[O++]=k[o];var P=u.tester(M);P.pts.pop(),_.push(P)}:function(k){_.push(u.tester(k))},x.type){case"MultiPolygon":for(g=0;g<d.length;g++)for(h=0;h<d[g].length;h++)f(d[g][h]);break;case"Polygon":for(g=0;g<d.length;g++)f(d[g])}return _},getTraceGeojson:l,extractTraceFeature:function(c){var f=c[0].trace,g=l(f);if(!g)return!1;var h,o={},x=[];for(h=0;h<f._length;h++){var d=c[h];(d.loc||0===d.loc)&&(o[d.loc]=d)}function w(k){var L=r(k,f.featureidkey||"id").get(),M=o[L];if(M){var O=k.geometry;if("Polygon"===O.type||"MultiPolygon"===O.type){var P={type:"Feature",id:L,geometry:O,properties:{}};P.properties.ct=function(S){var E,R=S.geometry;if("MultiPolygon"===R.type)for(var B=R.coordinates,H=0,V=0;V<B.length;V++){var Z={type:"Polygon",coordinates:B[V]},W=b.default(Z);W>H&&(H=W,E=Z)}else E=R;return v.default(E).geometry.coordinates}(P),M.fIn=k,M.fOut=P,x.push(P)}else t.log(["Location",M.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete o[L]}switch(g.type){case"FeatureCollection":var _=g.features;for(h=0;h<_.length;h++)w(_[h]);break;case"Feature":w(g);break;default:return t.warn(["Invalid GeoJSON type",(g.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var T in o)t.log(["Location *"+T+"*","does not have a matching feature with id-key","*"+f.featureidkey+"*."].join(" "));return x},fetchTraceGeoData:function(c){var f=window.PlotlyGeoAssets||{},g=[];function h(w){return new Promise(function(_,T){p.json(w,function(k,L){return k?(delete f[w],T(new Error(404===k.status?'GeoJSON at URL "'+w+'" does not exist.':"Unexpected error while fetching from "+w))):(f[w]=L,_(L))})})}function o(w){return new Promise(function(_,T){var k=0,L=setInterval(function(){return f[w]&&"pending"!==f[w]?(clearInterval(L),_(f[w])):k>100?(clearInterval(L),T("Unexpected error while fetching from "+w)):void k++},50)})}for(var x=0;x<c.length;x++){var d=c[x][0].trace.geojson;"string"==typeof d&&(f[d]?"pending"===f[d]&&g.push(o(d)):(f[d]="pending",g.push(h(d))))}return g},computeBbox:function(c){return e.default(c)}}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(y,$,ee){"use strict";var p=y("../constants/numerical").BADNUM;ee.calcTraceToLineCoords=function(m){for(var b=m[0].trace.connectgaps,v=[],e=[],n=0;n<m.length;n++){var t=m[n].lonlat;t[0]!==p?e.push(t):!b&&e.length>0&&(v.push(e),e=[])}return e.length>0&&v.push(e),v},ee.makeLine=function(m){return 1===m.length?{type:"LineString",coordinates:m[0]}:{type:"MultiLineString",coordinates:m}},ee.makePolygon=function(m){if(1===m.length)return{type:"Polygon",coordinates:m};for(var b=new Array(m.length),v=0;v<m.length;v++)b[v]=[m[v]];return{type:"MultiPolygon",coordinates:b}},ee.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(y,$,ee){"use strict";var p,m,b,v=y("./mod").mod;function e(t,a,r,u,s,i,l,c){var f=r-t,g=s-t,h=l-s,o=u-a,x=i-a,d=c-i,w=f*d-h*o;if(0===w)return null;var _=(g*d-h*x)/w,T=(g*o-f*x)/w;return T<0||T>1||_<0||_>1?null:{x:t+f*_,y:a+o*_}}function n(t,a,r,u,s){var i=u*t+s*a;if(i<0)return u*u+s*s;if(i>r){var l=u-t,c=s-a;return l*l+c*c}var f=u*a-s*t;return f*f/r}ee.segmentsIntersect=e,ee.segmentDistance=function(t,a,r,u,s,i,l,c){if(e(t,a,r,u,s,i,l,c))return 0;var f=r-t,g=u-a,h=l-s,o=c-i,x=f*f+g*g,d=h*h+o*o,w=Math.min(n(f,g,x,s-t,i-a),n(f,g,x,l-t,c-a),n(h,o,d,t-s,a-i),n(h,o,d,r-s,u-i));return Math.sqrt(w)},ee.getTextLocation=function(t,a,r,u){if(t===m&&u===b||(p={},m=t,b=u),p[r])return p[r];var s=t.getPointAtLength(v(r-u/2,a)),i=t.getPointAtLength(v(r+u/2,a)),l=Math.atan((i.y-s.y)/(i.x-s.x)),c=t.getPointAtLength(v(r,a)),f={x:(4*c.x+s.x+i.x)/6,y:(4*c.y+s.y+i.y)/6,theta:l};return p[r]=f,f},ee.clearLocationCache=function(){m=null},ee.getVisibleSegment=function(t,a,r){var u,s,i=a.left,l=a.right,c=a.top,f=a.bottom,g=0,h=t.getTotalLength(),o=h;function x(w){var _=t.getPointAtLength(w);0===w?u=_:w===h&&(s=_);var T=_.x<i?i-_.x:_.x>l?_.x-l:0,k=_.y<c?c-_.y:_.y>f?_.y-f:0;return Math.sqrt(T*T+k*k)}for(var d=x(g);d;){if((g+=d+r)>o)return;d=x(g)}for(d=x(o);d;){if(g>(o-=d+r))return;d=x(o)}return{min:g,max:o,len:o-g,total:h,isClosed:0===g&&o===h&&Math.abs(u.x-s.x)<.1&&Math.abs(u.y-s.y)<.1}},ee.findPointOnPath=function(t,a,r,u){for(var s,i,l,c=(u=u||{}).pathLength||t.getTotalLength(),f=u.tolerance||.001,g=u.iterationLimit||30,h=t.getPointAtLength(0)[r]>t.getPointAtLength(c)[r]?-1:1,o=0,x=0,d=c;o<g;){if(l=(i=t.getPointAtLength(s=(x+d)/2))[r]-a,Math.abs(l)<f)return i;h*l>0?d=s:x=s,o++}return i}},{"./mod":510}],499:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("tinycolor2"),b=y("color-normalize"),v=y("../components/colorscale"),e=y("../components/color/attributes").defaultLine,n=y("./array").isArrayOrTypedArray,t=b(e);function a(s,i){var l=s;return l[3]*=i,l}function r(s){if(p(s))return t;var i=b(s);return i.length?i:t}function u(s){return p(s)?s:1}$.exports={formatColor:function(s,i,l){var c,f,g,h,o,x=s.color,d=n(x),w=n(i),_=v.extractOpts(s),T=[];if(c=void 0!==_.colorscale?v.makeColorScaleFuncFromTrace(s):r,f=d?function(L,M){return void 0===L[M]?t:b(c(L[M]))}:r,g=w?function(L,M){return void 0===L[M]?1:u(L[M])}:u,d||w)for(var k=0;k<l;k++)h=f(x,k),o=g(i,k),T[k]=a(h,o);else T=a(b(x),i);return T},parseColorScale:function(s){var i=v.extractOpts(s),l=i.colorscale;return i.reversescale&&(l=v.flipScale(i.colorscale)),l.map(function(c){var f=c[0],g=m(c[1]).toRgb();return{index:f,rgb:[g.r,g.g,g.b,g.a]}})}}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(y,$,ee){"use strict";var p=y("./identity");function m(b){return[b]}$.exports={keyFun:function(b){return b.key},repeat:m,descend:p,wrap:m,unwrap:function(b){return b[0]}}},{"./identity":501}],501:[function(y,$,ee){"use strict";$.exports=function(p){return p}},{}],502:[function(y,$,ee){"use strict";$.exports=function(p,m){if(!m)return p;var b=1/Math.abs(m),v=b>1?(b*p+b*m)/b:p+m,e=String(v).length;if(e>16){var n=String(m).length;if(e>=String(p).length+n){var t=parseFloat(v).toPrecision(12);-1===t.indexOf("e+")&&(v=+t)}}return v}},{}],503:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("d3-time-format").utcFormat,b=y("d3-format").format,v=y("fast-isnumeric"),e=y("../constants/numerical"),n=e.FP_SAFE,t=-n,a=e.BADNUM,r=$.exports={};r.adjustFormat=function(D){return!D||/^\d[.]\df/.test(D)||/[.]\d%/.test(D)?D:"0.f"===D?"~f":/^\d%/.test(D)?"~%":/^\ds/.test(D)?"~s":!/^[~,.0$]/.test(D)&&/[&fps]/.test(D)?"~"+D:D};var u={};r.warnBadFormat=function(D){var N=String(D);u[N]||(u[N]=1,r.warn('encountered bad format: "'+N+'"'))},r.noFormat=function(D){return String(D)},r.numberFormat=function(D){var N;try{N=b(r.adjustFormat(D))}catch(U){return r.warnBadFormat(D),r.noFormat}return N},r.nestedProperty=y("./nested_property"),r.keyedContainer=y("./keyed_container"),r.relativeAttr=y("./relative_attr"),r.isPlainObject=y("./is_plain_object"),r.toLogRange=y("./to_log_range"),r.relinkPrivateKeys=y("./relink_private");var s=y("./array");r.isTypedArray=s.isTypedArray,r.isArrayOrTypedArray=s.isArrayOrTypedArray,r.isArray1D=s.isArray1D,r.ensureArray=s.ensureArray,r.concat=s.concat,r.maxRowLength=s.maxRowLength,r.minRowLength=s.minRowLength;var i=y("./mod");r.mod=i.mod,r.modHalf=i.modHalf;var l=y("./coerce");r.valObjectMeta=l.valObjectMeta,r.coerce=l.coerce,r.coerce2=l.coerce2,r.coerceFont=l.coerceFont,r.coercePattern=l.coercePattern,r.coerceHoverinfo=l.coerceHoverinfo,r.coerceSelectionMarkerOpacity=l.coerceSelectionMarkerOpacity,r.validate=l.validate;var c=y("./dates");r.dateTime2ms=c.dateTime2ms,r.isDateTime=c.isDateTime,r.ms2DateTime=c.ms2DateTime,r.ms2DateTimeLocal=c.ms2DateTimeLocal,r.cleanDate=c.cleanDate,r.isJSDate=c.isJSDate,r.formatDate=c.formatDate,r.incrementMonth=c.incrementMonth,r.dateTick0=c.dateTick0,r.dfltRange=c.dfltRange,r.findExactDates=c.findExactDates,r.MIN_MS=c.MIN_MS,r.MAX_MS=c.MAX_MS;var f=y("./search");r.findBin=f.findBin,r.sorterAsc=f.sorterAsc,r.sorterDes=f.sorterDes,r.distinctVals=f.distinctVals,r.roundUp=f.roundUp,r.sort=f.sort,r.findIndexOfMin=f.findIndexOfMin,r.sortObjectKeys=y("./sort_object_keys");var g=y("./stats");r.aggNums=g.aggNums,r.len=g.len,r.mean=g.mean,r.median=g.median,r.midRange=g.midRange,r.variance=g.variance,r.stdev=g.stdev,r.interp=g.interp;var h=y("./matrix");r.init2dArray=h.init2dArray,r.transposeRagged=h.transposeRagged,r.dot=h.dot,r.translationMatrix=h.translationMatrix,r.rotationMatrix=h.rotationMatrix,r.rotationXYMatrix=h.rotationXYMatrix,r.apply3DTransform=h.apply3DTransform,r.apply2DTransform=h.apply2DTransform,r.apply2DTransform2=h.apply2DTransform2,r.convertCssMatrix=h.convertCssMatrix,r.inverseTransformMatrix=h.inverseTransformMatrix;var o=y("./angles");r.deg2rad=o.deg2rad,r.rad2deg=o.rad2deg,r.angleDelta=o.angleDelta,r.angleDist=o.angleDist,r.isFullCircle=o.isFullCircle,r.isAngleInsideSector=o.isAngleInsideSector,r.isPtInsideSector=o.isPtInsideSector,r.pathArc=o.pathArc,r.pathSector=o.pathSector,r.pathAnnulus=o.pathAnnulus;var x=y("./anchor_utils");r.isLeftAnchor=x.isLeftAnchor,r.isCenterAnchor=x.isCenterAnchor,r.isRightAnchor=x.isRightAnchor,r.isTopAnchor=x.isTopAnchor,r.isMiddleAnchor=x.isMiddleAnchor,r.isBottomAnchor=x.isBottomAnchor;var d=y("./geometry2d");r.segmentsIntersect=d.segmentsIntersect,r.segmentDistance=d.segmentDistance,r.getTextLocation=d.getTextLocation,r.clearLocationCache=d.clearLocationCache,r.getVisibleSegment=d.getVisibleSegment,r.findPointOnPath=d.findPointOnPath;var w=y("./extend");r.extendFlat=w.extendFlat,r.extendDeep=w.extendDeep,r.extendDeepAll=w.extendDeepAll,r.extendDeepNoArrays=w.extendDeepNoArrays;var _=y("./loggers");r.log=_.log,r.warn=_.warn,r.error=_.error;var T=y("./regex");r.counterRegex=T.counter;var k=y("./throttle");r.throttle=k.throttle,r.throttleDone=k.done,r.clearThrottle=k.clear;var L=y("./dom");function M(D){var N={};for(var U in D)for(var Q=D[U],j=0;j<Q.length;j++)N[Q[j]]=+U;return N}r.getGraphDiv=L.getGraphDiv,r.isPlotDiv=L.isPlotDiv,r.removeElement=L.removeElement,r.addStyleRule=L.addStyleRule,r.addRelatedStyleRule=L.addRelatedStyleRule,r.deleteRelatedStyleRule=L.deleteRelatedStyleRule,r.getFullTransformMatrix=L.getFullTransformMatrix,r.getElementTransformMatrix=L.getElementTransformMatrix,r.getElementAndAncestors=L.getElementAndAncestors,r.equalDomRects=L.equalDomRects,r.clearResponsive=y("./clear_responsive"),r.preserveDrawingBuffer=y("./preserve_drawing_buffer"),r.makeTraceGroups=y("./make_trace_groups"),r._=y("./localize"),r.notifier=y("./notifier"),r.filterUnique=y("./filter_unique"),r.filterVisible=y("./filter_visible"),r.pushUnique=y("./push_unique"),r.increment=y("./increment"),r.cleanNumber=y("./clean_number"),r.ensureNumber=function(D){return v(D)?(D=Number(D))>n||D<t?a:D:a},r.isIndex=function(D,N){return!(void 0!==N&&D>=N)&&v(D)&&D>=0&&D%1==0},r.noop=y("./noop"),r.identity=y("./identity"),r.repeat=function(D,N){for(var U=new Array(N),Q=0;Q<N;Q++)U[Q]=D;return U},r.swapAttrs=function(D,N,U,Q){U||(U="x"),Q||(Q="y");for(var j=0;j<N.length;j++){var J=N[j],K=r.nestedProperty(D,J.replace("?",U)),re=r.nestedProperty(D,J.replace("?",Q)),ne=K.get();K.set(re.get()),re.set(ne)}},r.raiseToTop=function(D){D.parentNode.appendChild(D)},r.cancelTransition=function(D){return D.transition().duration(0)},r.constrain=function(D,N,U){return N>U?Math.max(U,Math.min(N,D)):Math.max(N,Math.min(U,D))},r.bBoxIntersect=function(D,N,U){return D.left<=N.right+(U=U||0)&&N.left<=D.right+U&&D.top<=N.bottom+U&&N.top<=D.bottom+U},r.simpleMap=function(D,N,U,Q,j){for(var J=D.length,K=new Array(J),re=0;re<J;re++)K[re]=N(D[re],U,Q,j);return K},r.randstr=function D(N,U,Q,j){if(Q||(Q=16),void 0===U&&(U=24),U<=0)return"0";var J,K,re=Math.log(Math.pow(2,U))/Math.log(Q),ne="";for(J=2;re===1/0;J*=2)re=Math.log(Math.pow(2,U/J))/Math.log(Q)*J;var se=re-Math.floor(re);for(J=0;J<Math.floor(re);J++)ne=Math.floor(Math.random()*Q).toString(Q)+ne;se&&(K=Math.pow(Q,se),ne=Math.floor(Math.random()*K).toString(Q)+ne);var oe=parseInt(ne,Q);return N&&N[ne]||oe!==1/0&&oe>=Math.pow(2,U)?j>10?(r.warn("randstr failed uniqueness"),ne):D(N,U,Q,(j||0)+1):ne},r.OptionControl=function(D,N){D||(D={}),N||(N="opt");var U={optionList:[],_newoption:function(Q){Q[N]=D,U[Q.name]=Q,U.optionList.push(Q)}};return U["_"+N]=D,U},r.smooth=function(D,N){if((N=Math.round(N)||0)<2)return D;var U,Q,j,J,K=D.length,re=2*K,ne=2*N-1,se=new Array(ne),oe=new Array(K);for(U=0;U<ne;U++)se[U]=(1-Math.cos(Math.PI*(U+1)/N))/(2*N);for(U=0;U<K;U++){for(J=0,Q=0;Q<ne;Q++)(j=U+Q+1-N)<-K?j-=re*Math.round(j/re):j>=re&&(j-=re*Math.floor(j/re)),j<0?j=-1-j:j>=K&&(j=re-1-j),J+=D[j]*se[Q];oe[U]=J}return oe},r.syncOrAsync=function(D,N,U){var Q;function j(){return r.syncOrAsync(D,N,U)}for(;D.length;)if((Q=(0,D.splice(0,1)[0])(N))&&Q.then)return Q.then(j);return U&&U(N)},r.stripTrailingSlash=function(D){return"/"===D.substr(-1)?D.substr(0,D.length-1):D},r.noneOrAll=function(D,N,U){if(D){var Q,j=!1,J=!0;for(Q=0;Q<U.length;Q++)null!=D[U[Q]]?j=!0:J=!1;if(j&&!J)for(Q=0;Q<U.length;Q++)D[U[Q]]=N[U[Q]]}},r.mergeArray=function(D,N,U,Q){var j="function"==typeof Q;if(r.isArrayOrTypedArray(D))for(var J=Math.min(D.length,N.length),K=0;K<J;K++){var re=D[K];N[K][U]=j?Q(re):re}},r.mergeArrayCastPositive=function(D,N,U){return r.mergeArray(D,N,U,function(Q){var j=+Q;return isFinite(j)&&j>0?j:0})},r.fillArray=function(D,N,U,Q){if(Q=Q||r.identity,r.isArrayOrTypedArray(D))for(var j=0;j<N.length;j++)N[j][U]=Q(D[j])},r.castOption=function(D,N,U,Q){Q=Q||r.identity;var j=r.nestedProperty(D,U).get();return r.isArrayOrTypedArray(j)?Array.isArray(N)&&r.isArrayOrTypedArray(j[N[0]])?Q(j[N[0]][N[1]]):Q(j[N]):j},r.extractOption=function(D,N,U,Q){if(U in D)return D[U];var j=r.nestedProperty(N,Q).get();return Array.isArray(j)?void 0:j},r.tagSelected=function(D,N,U){var Q,j,J=N.selectedpoints,K=N._indexToPoints;K&&(Q=M(K));for(var re=0;re<J.length;re++){var ne=J[re];if(r.isIndex(ne)||r.isArrayOrTypedArray(ne)&&r.isIndex(ne[0])&&r.isIndex(ne[1])){var se=Q?Q[ne]:ne,oe=U?U[se]:se;void 0!==(j=oe)&&j<D.length&&(D[oe].selected=1)}}},r.selIndices2selPoints=function(D){var N=D.selectedpoints,U=D._indexToPoints;if(U){for(var Q=M(U),j=[],J=0;J<N.length;J++){var K=N[J];if(r.isIndex(K)){var re=Q[K];r.isIndex(re)&&j.push(re)}}return j}return N},r.getTargetArray=function(D,N){var U=N.target;if("string"==typeof U&&U){var Q=r.nestedProperty(D,U).get();return!!Array.isArray(Q)&&Q}return!!Array.isArray(U)&&U},r.minExtend=function(D,N){var U={};"object"!=typeof N&&(N={});var Q,j,J,K=Object.keys(D);for(Q=0;Q<K.length;Q++)J=D[j=K[Q]],"_"!==j.charAt(0)&&"function"!=typeof J&&(U[j]="module"===j?J:Array.isArray(J)?"colorscale"===j?J.slice():J.slice(0,3):r.isTypedArray(J)?J.subarray(0,3):J&&"object"==typeof J?r.minExtend(D[j],N[j]):J);for(K=Object.keys(N),Q=0;Q<K.length;Q++)"object"==typeof(J=N[j=K[Q]])&&j in U&&"object"==typeof U[j]||(U[j]=J);return U},r.titleCase=function(D){return D.charAt(0).toUpperCase()+D.substr(1)},r.containsAny=function(D,N){for(var U=0;U<N.length;U++)if(-1!==D.indexOf(N[U]))return!0;return!1},r.isIE=function(){return void 0!==window.navigator.msSaveBlob};var O=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return O.test(window.navigator.userAgent)};var P=/iPad|iPhone|iPod/;r.isIOS=function(){return P.test(window.navigator.userAgent)};var S=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var D=S.exec(window.navigator.userAgent);if(D&&2===D.length){var N=parseInt(D[1]);if(!isNaN(N))return N}return null},r.isD3Selection=function(D){return D instanceof p.selection},r.ensureSingle=function(D,N,U,Q){var j=D.select(N+(U?"."+U:""));if(j.size())return j;var J=D.append(N);return U&&J.classed(U,!0),Q&&J.call(Q),J},r.ensureSingleById=function(D,N,U,Q){var j=D.select(N+"#"+U);if(j.size())return j;var J=D.append(N).attr("id",U);return Q&&J.call(Q),J},r.objectFromPath=function(D,N){for(var U,Q=D.split("."),j=U={},J=0;J<Q.length;J++){var K=Q[J],re=null,ne=Q[J].match(/(.*)\[([0-9]+)\]/);ne?(re=ne[2],(U=U[K=ne[1]]=[])[re]=J===Q.length-1?N:{},U=U[re]):(U[K]=J===Q.length-1?N:{},U=U[K])}return j};var E=/^([^\[\.]+)\.(.+)?/,R=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;r.expandObjectPaths=function(D){var N,U,Q,j,J,K,re;if("object"==typeof D&&!Array.isArray(D))for(U in D)D.hasOwnProperty(U)&&((N=U.match(E))?(j=D[U],Q=N[1],delete D[U],D[Q]=r.extendDeepNoArrays(D[Q]||{},r.objectFromPath(U,r.expandObjectPaths(j))[Q])):(N=U.match(R))?(j=D[U],Q=N[1],J=parseInt(N[2]),delete D[U],D[Q]=D[Q]||[],"."===N[3]?(re=N[4],K=D[Q][J]=D[Q][J]||{},r.extendDeepNoArrays(K,r.objectFromPath(re,r.expandObjectPaths(j)))):D[Q][J]=r.expandObjectPaths(j)):D[U]=r.expandObjectPaths(D[U]));return D},r.numSeparate=function(D,N,U){if(U||(U=!1),"string"!=typeof N||0===N.length)throw new Error("Separator string required for formatting!");"number"==typeof D&&(D=String(D));var Q=/(\d+)(\d{3})/,j=N.charAt(0),J=N.charAt(1),K=D.split("."),re=K[0],ne=K.length>1?j+K[1]:"";if(J&&(K.length>1||re.length>4||U))for(;Q.test(re);)re=re.replace(Q,"$1"+J+"$2");return re+ne},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var B=/^\w*$/;r.templateString=function(D,N){var U={};return D.replace(r.TEMPLATE_STRING_REGEX,function(Q,j){var J;return B.test(j)?J=N[j]:(U[j]=U[j]||r.nestedProperty(N,j).get,J=U[j]()),r.isValidTextValue(J)?J:""})};var H={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return W.apply(H,arguments)};var V={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return W.apply(V,arguments)};var Z=/^[:|\|]/;function W(D,N,U){var Q=this,j=arguments;N||(N={});var J={};return D.replace(r.TEMPLATE_STRING_REGEX,function(K,re,ne){var se,oe,pe,ce="_xother"===re||"_yother"===re,ge="_xother_"===re||"_yother_"===re,xe="xother_"===re||"yother_"===re,we="xother"===re||"yother"===re||ce||xe||ge,be=re;if((ce||ge)&&(be=be.substring(1)),(xe||ge)&&(be=be.substring(0,be.length-1)),we){if(void 0===(se=N[be]))return""}else for(pe=3;pe<j.length;pe++)if(oe=j[pe]){if(oe.hasOwnProperty(be)){se=oe[be];break}if(B.test(be)||(se=r.nestedProperty(oe,be).get(),(se=J[be]||r.nestedProperty(oe,be).get())&&(J[be]=se)),void 0!==se)break}if(void 0===se&&Q)return Q.count<Q.max&&(r.warn("Variable '"+be+"' in "+Q.name+" could not be found!"),se=K),Q.count===Q.max&&r.warn("Too many "+Q.name+" warnings - additional warnings will be suppressed"),Q.count++,K;if(ne){var Se;if(":"===ne[0]&&(se=(Se=U?U.numberFormat:r.numberFormat)(ne.replace(Z,""))(se)),"|"===ne[0]){Se=U?U.timeFormat:m;var fe=r.dateTime2ms(se);se=r.formatDate(fe,ne.replace(Z,""),!1,Se)}}else{var me=be+"Label";N.hasOwnProperty(me)&&(se=N[me])}return we&&(se="("+se+")",(ce||ge)&&(se=" "+se),(xe||ge)&&(se+=" ")),se})}r.subplotSort=function(D,N){for(var U=Math.min(D.length,N.length)+1,Q=0,j=0,J=0;J<U;J++){var K=D.charCodeAt(J)||0,re=N.charCodeAt(J)||0,ne=K>=48&&K<=57,se=re>=48&&re<=57;if(ne&&(Q=10*Q+K-48),se&&(j=10*j+re-48),!ne||!se){if(Q!==j)return Q-j;if(K!==re)return K-re}}return j-Q};var G=2e9;r.seedPseudoRandom=function(){G=2e9},r.pseudoRandom=function(){var D=G;return G=(69069*G+1)%4294967296,Math.abs(G-D)<429496729?r.pseudoRandom():G/4294967296},r.fillText=function(D,N,U){var Q=Array.isArray(U)?function(K){U.push(K)}:function(K){U.text=K},j=r.extractOption(D,N,"htx","hovertext");if(r.isValidTextValue(j))return Q(j);var J=r.extractOption(D,N,"tx","text");return r.isValidTextValue(J)?Q(J):void 0},r.isValidTextValue=function(D){return D||0===D},r.formatPercent=function(D,N){N=N||0;for(var U=(Math.round(100*D*Math.pow(10,N))*Math.pow(.1,N)).toFixed(N)+"%",Q=0;Q<N;Q++)-1!==U.indexOf(".")&&(U=(U=U.replace("0%","%")).replace(".%","%"));return U},r.isHidden=function(D){var N=window.getComputedStyle(D).display;return!N||"none"===N},r.strTranslate=function(D,N){return D||N?"translate("+D+","+N+")":""},r.strRotate=function(D){return D?"rotate("+D+")":""},r.strScale=function(D){return 1!==D?"scale("+D+")":""},r.getTextTransform=function(D){var N=D.noCenter,U=D.textX,Q=D.textY,ne=D.rotate,se=D.scale;return se?se>1&&(se=1):se=0,r.strTranslate(D.targetX-se*(U+(D.anchorX||0)),D.targetY-se*(Q+(D.anchorY||0)))+r.strScale(se)+(ne?"rotate("+ne+(N?"":" "+U+" "+Q)+")":"")},r.ensureUniformFontSize=function(D,N){var U=r.extendFlat({},N);return U.size=Math.max(N.size,D._fullLayout.uniformtext.minsize||0),U},r.join2=function(D,N,U){var Q=D.length;return Q>1?D.slice(0,-1).join(N)+U+D[Q-1]:D.join(N)},r.bigFont=function(D){return Math.round(1.2*D)};var X=r.getFirefoxVersion(),te=null!==X&&X<86;r.getPositionFromD3Event=function(){return te?[p.event.layerX,p.event.layerY]:[p.event.offsetX,p.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(y,$,ee){"use strict";$.exports=function(p){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(p):"[object Object]"===Object.prototype.toString.call(p)&&Object.getPrototypeOf(p).hasOwnProperty("hasOwnProperty")}},{}],505:[function(y,$,ee){"use strict";var p=y("./nested_property"),m=/^\w*$/;$.exports=function(b,v,e,n){var t,a,r;e=e||"name",n=n||"value";var u={};v&&v.length?(r=p(b,v),a=r.get()):a=b,v=v||"";var s={};if(a)for(t=0;t<a.length;t++)s[a[t][e]]=t;var i=m.test(n),l={set:function(c,f){var g=null===f?4:0;if(!a){if(!r||4===g)return;r.set(a=[])}var h=s[c];if(void 0===h){if(4===g)return;g|=3,s[c]=h=a.length}else f!==(i?a[h][n]:p(a[h],n).get())&&(g|=2);var o=a[h]=a[h]||{};return o[e]=c,i?o[n]=f:p(o,n).set(f),null!==f&&(g&=-5),u[h]=u[h]|g,l},get:function(c){if(a){var f=s[c];return void 0===f?void 0:i?a[f][n]:p(a[f],n).get()}},rename:function(c,f){var g=s[c];return void 0===g||(u[g]=1|u[g],s[f]=g,delete s[c],a[g][e]=f),l},remove:function(c){var f=s[c];if(void 0===f)return l;var g=a[f];if(Object.keys(g).length>2)return u[f]=2|u[f],l.set(c,null);if(i){for(t=f;t<a.length;t++)u[t]=3|u[t];for(t=f;t<a.length;t++)s[a[t][e]]--;a.splice(f,1),delete s[c]}else p(g,n).set(null),u[f]=6|u[f];return l},constructUpdate:function(){for(var c,f,g={},h=Object.keys(u),o=0;o<h.length;o++)c=v+"["+(f=h[o])+"]",a[f]?(1&u[f]&&(g[c+"."+e]=a[f][e]),2&u[f]&&(g[c+"."+n]=i?4&u[f]?null:a[f][n]:4&u[f]?null:p(a[f],n).get())):g[c]=null;return g}};return l}},{"./nested_property":511}],506:[function(y,$,ee){"use strict";var p=y("../registry");$.exports=function(m,b){for(var v=m._context.locale,e=0;e<2;e++){for(var n=m._context.locales,t=0;t<2;t++){var a=(n[v]||{}).dictionary;if(a){var r=a[b];if(r)return r}n=p.localeRegistry}var u=v.split("-")[0];if(u===v)break;v=u}return b}},{"../registry":638}],507:[function(y,$,ee){"use strict";var p=y("../plot_api/plot_config").dfltConfig,m=y("./notifier"),b=$.exports={};b.log=function(){var v;if(p.logging>1){var e=["LOG:"];for(v=0;v<arguments.length;v++)e.push(arguments[v]);console.trace.apply(console,e)}if(p.notifyOnLogging>1){var n=[];for(v=0;v<arguments.length;v++)n.push(arguments[v]);m(n.join("<br>"),"long")}},b.warn=function(){var v;if(p.logging>0){var e=["WARN:"];for(v=0;v<arguments.length;v++)e.push(arguments[v]);console.trace.apply(console,e)}if(p.notifyOnLogging>0){var n=[];for(v=0;v<arguments.length;v++)n.push(arguments[v]);m(n.join("<br>"),"stick")}},b.error=function(){var v;if(p.logging>0){var e=["ERROR:"];for(v=0;v<arguments.length;v++)e.push(arguments[v]);console.error.apply(console,e)}if(p.notifyOnLogging>0){var n=[];for(v=0;v<arguments.length;v++)n.push(arguments[v]);m(n.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(y,$,ee){"use strict";var p=y("@plotly/d3");$.exports=function(m,b,v){var e=m.selectAll("g."+v.replace(/\s/g,".")).data(b,function(t){return t[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",v),e.order();var n=m.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(t){t[0][n]=p.select(this)}),e}},{"@plotly/d3":58}],509:[function(y,$,ee){"use strict";var p=y("gl-mat4");ee.init2dArray=function(m,b){for(var v=new Array(m),e=0;e<m;e++)v[e]=new Array(b);return v},ee.transposeRagged=function(m){var b,v,e=0,n=m.length;for(b=0;b<n;b++)e=Math.max(e,m[b].length);var t=new Array(e);for(b=0;b<e;b++)for(t[b]=new Array(n),v=0;v<n;v++)t[b][v]=m[v][b];return t},ee.dot=function(m,b){if(!m.length||!b.length||m.length!==b.length)return null;var v,e,n=m.length;if(m[0].length)for(v=new Array(n),e=0;e<n;e++)v[e]=ee.dot(m[e],b);else if(b[0].length){var t=ee.transposeRagged(b);for(v=new Array(t.length),e=0;e<t.length;e++)v[e]=ee.dot(m,t[e])}else for(v=0,e=0;e<n;e++)v+=m[e]*b[e];return v},ee.translationMatrix=function(m,b){return[[1,0,m],[0,1,b],[0,0,1]]},ee.rotationMatrix=function(m){var b=m*Math.PI/180;return[[Math.cos(b),-Math.sin(b),0],[Math.sin(b),Math.cos(b),0],[0,0,1]]},ee.rotationXYMatrix=function(m,b,v){return ee.dot(ee.dot(ee.translationMatrix(b,v),ee.rotationMatrix(m)),ee.translationMatrix(-b,-v))},ee.apply3DTransform=function(m){return function(){var b=arguments,v=1===arguments.length?b[0]:[b[0],b[1],b[2]||0];return ee.dot(m,[v[0],v[1],v[2],1]).slice(0,3)}},ee.apply2DTransform=function(m){return function(){var b=arguments;3===b.length&&(b=b[0]);var v=1===arguments.length?b[0]:[b[0],b[1]];return ee.dot(m,[v[0],v[1],1]).slice(0,2)}},ee.apply2DTransform2=function(m){var b=ee.apply2DTransform(m);return function(v){return b(v.slice(0,2)).concat(b(v.slice(2,4)))}},ee.convertCssMatrix=function(m){if(m){var b=m.length;if(16===b)return m;if(6===b)return[m[0],m[1],0,0,m[2],m[3],0,0,0,0,1,0,m[4],m[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ee.inverseTransformMatrix=function(m){var b=[];return p.invert(b,m),[[b[0],b[1],b[2],b[3]],[b[4],b[5],b[6],b[7]],[b[8],b[9],b[10],b[11]],[b[12],b[13],b[14],b[15]]]}},{"gl-mat4":210}],510:[function(y,$,ee){"use strict";$.exports={mod:function(p,m){var b=p%m;return b<0?b+m:b},modHalf:function(p,m){return Math.abs(p)>m/2?p-Math.round(p/m)*m:p}}},{}],511:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("./array").isArrayOrTypedArray;function b(u,s){return function(){var i,l,c,f,g,h=u;for(f=0;f<s.length-1;f++){if(-1===(i=s[f])){for(l=!0,c=[],g=0;g<h.length;g++)c[g]=b(h[g],s.slice(f+1))(),c[g]!==c[0]&&(l=!1);return l?c[0]:c}if("number"==typeof i&&!m(h)||"object"!=typeof(h=h[i])||null===h)return}if("object"==typeof h&&null!==h&&null!==(c=h[s[f]]))return c}}$.exports=function(u,s){if(p(s))s=String(s);else if("string"!=typeof s||"[-1]"===s.substr(s.length-4))throw"bad property string";for(var i,l,c,f=0,g=s.split(".");f<g.length;){if(i=String(g[f]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(i[1])g[f]=i[1];else{if(0!==f)throw"bad property string";g.splice(0,1)}for(l=i[2].substr(1,i[2].length-2).split("]["),c=0;c<l.length;c++)f++,g.splice(f,0,Number(l[c]))}f++}return"object"!=typeof u?{set:function(){throw"bad container"},get:function(){},astr:s,parts:g,obj:u}:{set:n(u,g,s),get:b(u,g),astr:s,parts:g,obj:u}};var v=/(^|\.)args\[/;function e(u,s){return void 0===u||null===u&&!s.match(v)}function n(u,s,i){return function(l){var c,f,g=u,h="",o=[[u,h]],x=e(l,i);for(f=0;f<s.length-1;f++){if("number"==typeof(c=s[f])&&!m(g))throw"array index but container is not an array";if(-1===c){if(x=!a(g,s.slice(f+1),l,i))break;return}if(!r(g,c,s[f+1],x))break;if("object"!=typeof(g=g[c])||null===g)throw"container is not an object";h=t(h,c),o.push([g,h])}if(x){if(f===s.length-1&&(delete g[s[f]],Array.isArray(g)&&+s[f]==g.length-1))for(;g.length&&void 0===g[g.length-1];)g.pop()}else g[s[f]]=l}}function t(u,s){var i=s;return p(s)?i="["+s+"]":u&&(i="."+s),u+i}function a(u,s,i,l){var c,f=m(i),g=!0,h=i,o=l.replace("-1",0),x=!f&&e(i,o),d=s[0];for(c=0;c<u.length;c++)o=l.replace("-1",c),f&&(x=e(h=i[c%i.length],o)),x&&(g=!1),r(u,c,d,x)&&n(u[c],s,l.replace("-1",c))(h);return g}function r(u,s,i,l){if(void 0===u[s]){if(l)return!1;u[s]="number"==typeof i?[]:{}}return!0}},{"./array":485,"fast-isnumeric":190}],512:[function(y,$,ee){"use strict";$.exports=function(){}},{}],513:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("fast-isnumeric"),b=[];$.exports=function(v,e){if(-1===b.indexOf(v)){b.push(v);var n=1e3;m(e)?n=e:"long"===e&&(n=3e3);var t=p.select("body").selectAll(".plotly-notifier").data([0]);t.enter().append("div").classed("plotly-notifier",!0),t.selectAll(".notifier-note").data(b).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(r){var u=p.select(this);u.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){u.transition().call(a)});for(var s=u.append("p"),i=r.split(/<br\s*\/?>/g),l=0;l<i.length;l++)l&&s.append("br"),s.append("span").text(i[l]);"stick"===e?u.transition().duration(350).style("opacity",1):u.transition().duration(700).style("opacity",1).transition().delay(n).call(a)})}function a(r){r.duration(700).style("opacity",0).each("end",function(u){var s=b.indexOf(u);-1!==s&&b.splice(s,1),p.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(y,$,ee){"use strict";var p=y("./setcursor"),m="data-savedcursor";$.exports=function(b,v){var e=b.attr(m);if(v){if(!e){for(var n=(b.attr("class")||"").split(" "),t=0;t<n.length;t++){var a=n[t];0===a.indexOf("cursor-")&&b.attr(m,a.substr(7)).classed(a,!1)}b.attr(m)||b.attr(m,"!!")}p(b,v)}else e&&(b.attr(m,null),"!!"===e?p(b):p(b,e))}},{"./setcursor":524}],515:[function(y,$,ee){"use strict";var p=y("./matrix").dot,m=y("../constants/numerical").BADNUM,b=$.exports={};b.tester=function(v){var e,n=v.slice(),t=n[0][0],a=t,r=n[0][1],u=r;for(n.push(n[0]),e=1;e<n.length;e++)t=Math.min(t,n[e][0]),a=Math.max(a,n[e][0]),r=Math.min(r,n[e][1]),u=Math.max(u,n[e][1]);var s,i=!1;5===n.length&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(i=!0,s=function(f){return f[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(i=!0,s=function(f){return f[1]===n[0][1]}));var l=!0,c=n[0];for(e=1;e<n.length;e++)if(c[0]!==n[e][0]||c[1]!==n[e][1]){l=!1;break}return{xmin:t,xmax:a,ymin:r,ymax:u,pts:n,contains:i?function(f,g){var h=f[0],o=f[1];return!(h===m||h<t||h>a||o===m||o<r||o>u||g&&s(f))}:function(f,g){var h=f[0],o=f[1];if(h===m||h<t||h>a||o===m||o<r||o>u)return!1;var x,d,w,_,T,k=n.length,L=n[0][0],M=n[0][1],O=0;for(x=1;x<k;x++)if(d=L,w=M,L=n[x][0],M=n[x][1],!(h<(_=Math.min(d,L))||h>Math.max(d,L)||o>Math.max(w,M)))if(o<Math.min(w,M))h!==_&&O++;else{if(o===(T=L===d?o:w+(h-d)*(M-w)/(L-d)))return 1!==x||!g;o<=T&&h!==_&&O++}return O%2==1},isRect:i,degenerate:l}},b.isSegmentBent=function(v,e,n,t){var a,r,u,s=v[e],i=[v[n][0]-s[0],v[n][1]-s[1]],l=p(i,i),c=Math.sqrt(l),f=[-i[1]/c,i[0]/c];for(a=e+1;a<n;a++)if((u=p(r=[v[a][0]-s[0],v[a][1]-s[1]],i))<0||u>l||Math.abs(p(r,f))>t)return!0;return!1},b.filter=function(v,e){var n=[v[0]],t=0,a=0;function r(u){v.push(u);var s=n.length,i=t;n.splice(a+1);for(var l=i+1;l<v.length;l++)(l===v.length-1||b.isSegmentBent(v,i,l+1,e))&&(n.push(v[l]),n.length<s-2&&(t=l,a=n.length-1),i=l)}return v.length>1&&r(v.pop()),{addPt:r,raw:v,filtered:n}}},{"../constants/numerical":479,"./matrix":509}],516:[function(y,$,ee){(function(p){(function(){"use strict";var m=y("./show_no_webgl_msg"),b=y("regl");$.exports=function(v,e){var n=v._fullLayout,t=!0;return n._glcanvas.each(function(a){if(!a.regl&&(!a.pick||n._has("parcoords"))){try{a.regl=b({canvas:this,attributes:{antialias:!a.pick,preserveDrawingBuffer:!0},pixelRatio:v._context.plotGlPixelRatio||p.devicePixelRatio,extensions:e||[]})}catch(r){t=!1}a.regl||(t=!1),t&&this.addEventListener("webglcontextlost",function(r){v&&v.emit&&v.emit("plotly_webglcontextlost",{event:r,layer:a.key})},!1)}}),t||m({container:n._glcontainer.node()}),t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("is-mobile");$.exports=function(b){var v,s;if("string"!=typeof(v=b&&b.hasOwnProperty("userAgent")?b.userAgent:("undefined"!=typeof navigator&&(s=navigator.userAgent),s&&s.headers&&"string"==typeof s.headers["user-agent"]&&(s=s.headers["user-agent"]),s)))return!0;var e=m({ua:{headers:{"user-agent":v}},tablet:!0,featureDetect:!1});if(!e)for(var n=v.split(" "),t=1;t<n.length;t++)if(-1!==n[t].indexOf("Safari"))for(var a=t-1;a>-1;a--){var r=n[a];if("Version/"===r.substr(0,8)){var u=r.substr(8).split(".")[0];if(p(u)&&(u=+u),u>=13)return!0}}return e}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(y,$,ee){"use strict";$.exports=function(p,m){if(m instanceof RegExp){for(var b=m.toString(),v=0;v<p.length;v++)if(p[v]instanceof RegExp&&p[v].toString()===b)return p;p.push(m)}else!m&&0!==m||-1!==p.indexOf(m)||p.push(m);return p}},{}],519:[function(y,$,ee){"use strict";var p=y("../lib"),m=y("../plot_api/plot_config").dfltConfig,b={add:function(v,e,n,t,a){var r,u;v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},u=v.undoQueue.index,v.autoplay?v.undoQueue.inSequence||(v.autoplay=!1):(!v.undoQueue.sequence||v.undoQueue.beginSequence?(v.undoQueue.queue.splice(u,v.undoQueue.queue.length-u,r={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),v.undoQueue.index+=1):r=v.undoQueue.queue[u-1],v.undoQueue.beginSequence=!1,r&&(r.undo.calls.unshift(e),r.undo.args.unshift(n),r.redo.calls.push(t),r.redo.args.push(a)),v.undoQueue.queue.length>m.queueLength&&(v.undoQueue.queue.shift(),v.undoQueue.index--))},startSequence:function(v){v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},v.undoQueue.sequence=!0,v.undoQueue.beginSequence=!0},stopSequence:function(v){v.undoQueue=v.undoQueue||{index:0,queue:[],sequence:!1},v.undoQueue.sequence=!1,v.undoQueue.beginSequence=!1},undo:function(v){var e,n;if(!(void 0===v.undoQueue||isNaN(v.undoQueue.index)||v.undoQueue.index<=0)){for(v.undoQueue.index--,e=v.undoQueue.queue[v.undoQueue.index],v.undoQueue.inSequence=!0,n=0;n<e.undo.calls.length;n++)b.plotDo(v,e.undo.calls[n],e.undo.args[n]);v.undoQueue.inSequence=!1,v.autoplay=!1}},redo:function(v){var e,n;if(!(void 0===v.undoQueue||isNaN(v.undoQueue.index)||v.undoQueue.index>=v.undoQueue.queue.length)){for(e=v.undoQueue.queue[v.undoQueue.index],v.undoQueue.inSequence=!0,n=0;n<e.redo.calls.length;n++)b.plotDo(v,e.redo.calls[n],e.redo.args[n]);v.undoQueue.inSequence=!1,v.autoplay=!1,v.undoQueue.index++}},plotDo:function(v,e,n){v.autoplay=!0,n=function(t,a){for(var r,u=[],s=0;s<a.length;s++)u[s]=(r=a[s])===t?r:"object"==typeof r?Array.isArray(r)?p.extendDeep([],r):p.extendDeepAll({},r):r;return u}(v,n),e.apply(null,n)}};$.exports=b},{"../lib":503,"../plot_api/plot_config":541}],520:[function(y,$,ee){"use strict";ee.counter=function(p,m,b,v){var e=(m||"")+(b?"":"$"),n=!1===v?"":"^";return"xy"===p?new RegExp(n+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(n+p+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(y,$,ee){"use strict";var p=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,m=/^[^\.\[\]]+$/;$.exports=function(b,v){for(;v;){var e=b.match(p);if(e)b=e[1];else{if(!b.match(m))throw new Error("bad relativeAttr call:"+[b,v]);b=""}if("^"!==v.charAt(0))break;v=v.slice(1)}return b&&"["!==v.charAt(0)?b+"."+v:b+v}},{}],522:[function(y,$,ee){"use strict";var p=y("./array").isArrayOrTypedArray,m=y("./is_plain_object");$.exports=function b(v,e){for(var n in e){var t=e[n],a=v[n];if(a!==t)if("_"===n.charAt(0)||"function"==typeof t){if(n in v)continue;v[n]=t}else if(p(t)&&p(a)&&m(t[0])){if("customdata"===n||"ids"===n)continue;for(var r=Math.min(t.length,a.length),u=0;u<r;u++)a[u]!==t[u]&&m(t[u])&&m(a[u])&&b(a[u],t[u])}else m(t)&&m(a)&&(b(a,t),Object.keys(a).length||delete v[n])}}},{"./array":485,"./is_plain_object":504}],523:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("./loggers"),b=y("./identity"),v=y("../constants/numerical").BADNUM;function e(r,u){return r<u}function n(r,u){return r<=u}function t(r,u){return r>u}function a(r,u){return r>=u}ee.findBin=function(r,u,s){if(p(u.start))return s?Math.ceil((r-u.start)/u.size-1e-9)-1:Math.floor((r-u.start)/u.size+1e-9);var i,l,c=0,f=u.length,g=0,h=f>1?(u[f-1]-u[0])/(f-1):1;for(l=h>=0?s?e:n:s?a:t,r+=1e-9*h*(s?-1:1)*(h>=0?1:-1);c<f&&g++<100;)l(u[i=Math.floor((c+f)/2)],r)?c=i+1:f=i;return g>90&&m.log("Long binary search..."),c-1},ee.sorterAsc=function(r,u){return r-u},ee.sorterDes=function(r,u){return u-r},ee.distinctVals=function(r){var u,s=r.slice();for(s.sort(ee.sorterAsc),u=s.length-1;u>-1&&s[u]===v;u--);for(var i,l=s[u]-s[0]||1,c=l/(u||1)/1e4,f=[],g=0;g<=u;g++){var h=s[g],o=h-i;void 0===i?(f.push(h),i=h):o>c&&(l=Math.min(l,o),f.push(h),i=h)}return{vals:f,minDiff:l}},ee.roundUp=function(r,u,s){for(var i,l=0,c=u.length-1,f=0,g=s?0:1,h=s?1:0,o=s?Math.ceil:Math.floor;l<c&&f++<100;)u[i=o((l+c)/2)]<=r?l=i+g:c=i-h;return u[l]},ee.sort=function(r,u){for(var s=0,i=0,l=1;l<r.length;l++){var c=u(r[l],r[l-1]);if(c<0?s=1:c>0&&(i=1),s&&i)return r.sort(u)}return i?r:r.reverse()},ee.findIndexOfMin=function(r,u){u=u||b;for(var s,i=1/0,l=0;l<r.length;l++){var c=u(r[l]);c<i&&(i=c,s=l)}return s}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(y,$,ee){"use strict";$.exports=function(p,m){(p.attr("class")||"").split(" ").forEach(function(b){0===b.indexOf("cursor-")&&p.classed(b,!1)}),m&&p.classed("cursor-"+m,!0)}},{}],525:[function(y,$,ee){"use strict";var p=y("../components/color"),m=function(){};$.exports=function(b){for(var v in b)"function"==typeof b[v]&&(b[v]=m);b.destroy=function(){b.container.parentNode.removeChild(b.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=p.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=p.lightLine,e.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",e.appendChild(n),b.container.appendChild(e),b.container.style.background="#FFFFFF",b.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(y,$,ee){"use strict";$.exports=function(p){return Object.keys(p).sort()}},{}],527:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("./array").isArrayOrTypedArray;ee.aggNums=function(b,v,e,n){var t,a;if((!n||n>e.length)&&(n=e.length),p(v)||(v=!1),m(e[0])){for(a=new Array(n),t=0;t<n;t++)a[t]=ee.aggNums(b,v,e[t]);e=a}for(t=0;t<n;t++)p(v)?p(e[t])&&(v=b(+v,+e[t])):v=e[t];return v},ee.len=function(b){return ee.aggNums(function(v){return v+1},0,b)},ee.mean=function(b,v){return v||(v=ee.len(b)),ee.aggNums(function(e,n){return e+n},0,b)/v},ee.midRange=function(b){if(void 0!==b&&0!==b.length)return(ee.aggNums(Math.max,null,b)+ee.aggNums(Math.min,null,b))/2},ee.variance=function(b,v,e){return v||(v=ee.len(b)),p(e)||(e=ee.mean(b,v)),ee.aggNums(function(n,t){return n+Math.pow(t-e,2)},0,b)/v},ee.stdev=function(b,v,e){return Math.sqrt(ee.variance(b,v,e))},ee.median=function(b){var v=b.slice().sort();return ee.interp(v,.5)},ee.interp=function(b,v){if(!p(v))throw"n should be a finite number";if((v=v*b.length-.5)<0)return b[0];if(v>b.length-1)return b[b.length-1];var e=v%1;return e*b[Math.ceil(v)]+(1-e)*b[Math.floor(v)]}},{"./array":485,"fast-isnumeric":190}],528:[function(y,$,ee){"use strict";var p=y("color-normalize");$.exports=function(m){return m?p(m):[0,0,0,1]}},{"color-normalize":89}],529:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../lib"),b=m.strTranslate,v=y("../constants/xmlns_namespaces"),e=y("../constants/alignment").LINE_SPACING,n=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;ee.convertToTspans=function(P,S,E){var R=P.text(),B=!P.attr("data-notex")&&"undefined"!=typeof MathJax&&R.match(n),H=p.select(P.node().parentNode);if(!H.empty()){var V=P.attr("class")?P.attr("class").split(" ")[0]:"text";return H.selectAll("svg."+(V+="-math")).remove(),H.selectAll("g."+V+"-group").remove(),P.style("display",null).attr({"data-unformatted":R,"data-math":"N"}),B?(S&&S._promises||[]).push(new Promise(function(W){P.style("display","none");var te,D,N,U,Q,j,J,G=parseInt(P.node().style.fontSize,10);te=B[2],D={fontSize:G},N=function(te,D,N){H.selectAll("svg."+V).remove(),H.selectAll("g."+V+"-group").remove();var U=te&&te.select("svg");if(!U||!U.node())return Z(),void W();var Q=H.append("g").classed(V+"-group",!0).attr({"pointer-events":"none","data-unformatted":R,"data-math":"Y"});Q.node().appendChild(U.node()),D&&D.node()&&U.node().insertBefore(D.node().cloneNode(!0),U.node().firstChild);var j=N.width,J=N.height;U.attr({class:V,height:J,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var K=P.node().style.fill||"black",re=U.select("g");re.attr({fill:K,stroke:K});var ne=re.node().getBoundingClientRect(),se=ne.width,oe=ne.height;(se>j||oe>J)&&(U.style("overflow","hidden"),se=(ne=U.node().getBoundingClientRect()).width,oe=ne.height);var pe=+P.attr("x"),ce=+P.attr("y"),ge=-(G||P.node().getBoundingClientRect().height)/4;if("y"===V[0])Q.attr({transform:"rotate("+[-90,pe,ce]+")"+b(-se/2,ge-oe/2)});else if("l"===V[0])ce=ge-oe/2;else if("a"===V[0]&&0!==V.indexOf("atitle"))pe=0,ce=ge;else{var xe=P.attr("text-anchor");pe-=se*("middle"===xe?.5:"end"===xe?1:0),ce=ce+ge-oe/2}U.attr({x:pe,y:ce}),E&&E.call(P,Q),W(Q)},MathJax.Hub.Queue(function(){return Q=m.extendDeepAll({},MathJax.Hub.config),j=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(U=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var K="math-output-"+m.randstr({},64);return J=p.select("body").append("div").attr({id:K}).style({visibility:"hidden",position:"absolute"}).style({"font-size":D.fontSize+"px"}).text(te.replace(t,"\\lt ").replace(a,"\\gt ")),MathJax.Hub.Typeset(J.node())},function(){var K=p.select("body").select("#MathJax_SVG_glyphs");if(J.select(".MathJax_SVG").empty()||!J.select("svg").node())m.log("There was an error in the tex syntax.",te),N();else{var re=J.select("svg").node().getBoundingClientRect();N(J.select(".MathJax_SVG"),K,re)}if(J.remove(),"SVG"!==U)return MathJax.Hub.setRenderer(U)},function(){return void 0!==j&&(MathJax.Hub.processSectionDelay=j),MathJax.Hub.Config(Q)})})):Z(),P}function Z(){H.empty()||(V=P.attr("class")+"-math",H.select("svg."+V).remove()),P.text("").style("white-space","pre"),function(W,G){G=G.replace(l," ");var X,te=!1,D=[],N=-1;function U(){N++;var Se=document.createElementNS(v.svg,"tspan");p.select(Se).attr({class:"line",dy:N*e+"em"}),W.appendChild(Se),X=Se;var fe=D;if(D=[{node:Se}],fe.length>1)for(var me=1;me<fe.length;me++)Q(fe[me])}function Q(Se){var fe,me=Se.type,Te={};if("a"===me){fe="a";var _e=Se.target,Me=Se.href,Ie=Se.popup;Me&&(Te={"xlink:xlink:show":"_blank"===_e||"_"!==_e.charAt(0)?"new":"replace",target:_e,"xlink:xlink:href":Me},Ie&&(Te.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ie+'");return false;'))}else fe="tspan";Se.style&&(Te.style=Se.style);var ze=document.createElementNS(v.svg,fe);if("sup"===me||"sub"===me){j(X,"\u200b"),X.appendChild(ze);var Ve=document.createElementNS(v.svg,"tspan");j(Ve,"\u200b"),p.select(Ve).attr("dy",s[me]),Te.dy=u[me],X.appendChild(ze),X.appendChild(Ve)}else X.appendChild(ze);p.select(ze).attr(Te),X=Se.node=ze,D.push(Se)}function j(Se,fe){Se.appendChild(document.createTextNode(fe))}function J(Se){if(1!==D.length){var fe=D.pop();Se!==fe.type&&m.log("Start tag <"+fe.type+"> doesnt match end tag <"+Se+">. Pretending it did match.",G),X=D[D.length-1].node}else m.log("Ignoring unexpected end tag </"+Se+">.",G)}g.test(G)?U():(X=W,D=[{node:W}]);for(var K=G.split(c),re=0;re<K.length;re++){var ne=K[re],se=ne.match(f),oe=se&&se[2].toLowerCase(),pe=r[oe];if("br"===oe)U();else if(void 0===pe)j(X,L(ne));else if(se[1])J(oe);else{var ce=se[4],ge={type:oe},xe=w(ce,h);if(xe?(xe=xe.replace(_,"$1 fill:"),pe&&(xe+=";"+pe)):pe&&(xe=pe),xe&&(ge.style=xe),"a"===oe){te=!0;var we=w(ce,o);if(we){var be=M(we);be&&(ge.href=be,ge.target=w(ce,x)||"_blank",ge.popup=w(ce,d))}}Q(ge)}}return te}(P.node(),R)&&P.style("pointer-events","all"),ee.positionText(P),E&&E.call(P)}};var t=/(<|&lt;|&#60;)/g,a=/(>|&gt;|&#62;)/g,r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},u={sub:"0.3em",sup:"-0.6em"},s={sub:"-0.21em",sup:"0.42em"},i=["http:","https:","mailto:","",void 0,":"],l=ee.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,f=/<(\/?)([^ >]*)(\s+(.*))?>/i,g=/<br(\s+.*)?>/i;ee.BR_TAG_ALL=/<br(\s+.*)?>/gi;var h=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,o=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,x=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,d=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function w(P,S){if(!P)return null;var E=P.match(S),R=E&&(E[3]||E[4]);return R&&L(R)}var _=/(^|;)\s*color:/;ee.plainText=function(P,S){for(var E=void 0!==(S=S||{}).len&&-1!==S.len?S.len:1/0,R=void 0!==S.allowedTags?S.allowedTags:["br"],B="...".length,H=P.split(c),V=[],Z="",W=0,G=0;G<H.length;G++){var X=H[G],te=X.match(f),D=te&&te[2].toLowerCase();if(D)-1!==R.indexOf(D)&&(V.push(X),Z=D);else{var N=X.length;if(W+N<E)V.push(X),W+=N;else if(W<E){var U=E-W;Z&&("br"!==Z||U<=B||N<=B)&&V.pop(),V.push(E>B?X.substr(0,U-B)+"...":X.substr(0,U));break}Z=""}}return V.join("")};var T={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},k=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function L(P){return P.replace(k,function(S,E){return("#"===E.charAt(0)?function(R){if(!(R>1114111)){var B=String.fromCodePoint;if(B)return B(R);var H=String.fromCharCode;return R<=65535?H(R):H(55232+(R>>10),R%1024+56320)}}("x"===E.charAt(1)?parseInt(E.substr(2),16):parseInt(E.substr(1),10)):T[E])||S})}function M(P){var S=encodeURI(decodeURI(P)),E=document.createElement("a"),R=document.createElement("a");E.href=P,R.href=S;var H=R.protocol;return-1!==i.indexOf(E.protocol)&&-1!==i.indexOf(H)?S:""}function O(P,S,E){var R,B,H,V=E.horizontalAlign,Z=E.verticalAlign||"top",W=P.node().getBoundingClientRect(),G=S.node().getBoundingClientRect();return B="bottom"===Z?function(){return W.bottom-R.height}:"middle"===Z?function(){return W.top+(W.height-R.height)/2}:function(){return W.top},H="right"===V?function(){return W.right-R.width}:"center"===V?function(){return W.left+(W.width-R.width)/2}:function(){return W.left},function(){R=this.node().getBoundingClientRect();var X=H()-G.left,te=B()-G.top,D=E.gd||{};if(E.gd){D._fullLayout._calcInverseTransform(D);var N=m.apply3DTransform(D._fullLayout._invTransform)(X,te);X=N[0],te=N[1]}return this.style({top:te+"px",left:X+"px","z-index":1e3}),this}}ee.convertEntities=L,ee.sanitizeHTML=function(P){P=P.replace(l," ");for(var S=document.createElement("p"),E=S,R=[],B=P.split(c),H=0;H<B.length;H++){var V=B[H],Z=V.match(f),W=Z&&Z[2].toLowerCase();if(W in r)if(Z[1])R.length&&(E=R.pop());else{var G=Z[4],X=w(G,h),te=X?{style:X}:{};if("a"===W){var D=w(G,o);if(D){var N=M(D);if(N){te.href=N;var U=w(G,x);U&&(te.target=U)}}}var Q=document.createElement(W);E.appendChild(Q),p.select(Q).attr(te),E=Q,R.push(Q)}else E.appendChild(document.createTextNode(L(V)))}return S.innerHTML},ee.lineCount=function(P){return P.selectAll("tspan.line").size()||1},ee.positionText=function(P,S,E){return P.each(function(){var R=p.select(this);function B(Z,W){return void 0===W?null===(W=R.attr(Z))&&(R.attr(Z,0),W=0):R.attr(Z,W),W}var H=B("x",S),V=B("y",E);"text"===this.nodeName&&R.selectAll("tspan.line").attr({x:H,y:V})})},ee.makeTextShadow=function(P){var S="1px ",E="1px ",R="1px ";return S+E+R+P+", -"+S+"-"+E+R+P+", "+S+"-"+E+R+P+", -"+S+E+R+P},ee.makeEditable=function(P,S){var E=S.gd,R=S.delegate,B=p.dispatch("edit","input","cancel"),H=R||P;if(P.style({"pointer-events":R?"none":"all"}),1!==P.size())throw new Error("boo");function V(){var X,te,D,N,U;X=p.select(E).select(".svg-container"),te=X.append("div"),D=P.node().style,N=parseFloat(D.fontSize||12),void 0===(U=S.text)&&(U=P.attr("data-unformatted")),te.classed("plugin-editable editable",!0).style({position:"absolute","font-family":D.fontFamily||"Arial","font-size":N,color:S.fill||D.fill||"black",opacity:1,"background-color":S.background||"transparent",outline:"#ffffff33 1px solid",margin:[-N/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(U).call(O(P,X,S)).on("blur",function(){E._editing=!1,P.text(this.textContent).style({opacity:1});var Q,j=p.select(this).attr("class");(Q=j?"."+j.split(" ")[0]+"-math-group":"[class*=-math-group]")&&p.select(P.node().parentNode).select(Q).style({opacity:0});var J=this.textContent;p.select(this).transition().duration(0).remove(),p.select(document).on("mouseup",null),B.edit.call(P,J)}).on("focus",function(){var Q=this;E._editing=!0,p.select(document).on("mouseup",function(){if(p.event.target===Q)return!1;document.activeElement===te.node()&&te.node().blur()})}).on("keyup",function(){27===p.event.which?(E._editing=!1,P.style({opacity:1}),p.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),B.cancel.call(P,this.textContent)):(B.input.call(P,this.textContent),p.select(this).call(O(P,X,S)))}).on("keydown",function(){13===p.event.which&&this.blur()}).call(Z),P.style({opacity:0});var W,G=H.attr("class");(W=G?"."+G.split(" ")[0]+"-math-group":"[class*=-math-group]")&&p.select(P.node().parentNode).select(W).style({opacity:0})}function Z(W){var G=W.node(),X=document.createRange();X.selectNodeContents(G);var te=window.getSelection();te.removeAllRanges(),te.addRange(X),G.focus()}return S.immediate?V():H.on("click",V),p.rebind(P,B,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(y,$,ee){"use strict";var p={};function m(b){b&&null!==b.timer&&(clearTimeout(b.timer),b.timer=null)}ee.throttle=function(b,v,e){var n=p[b],t=Date.now();if(!n){for(var a in p)p[a].ts<t-6e4&&delete p[a];n=p[b]={ts:0,timer:null}}function r(){e(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}m(n),t>n.ts+v?r():n.timer=setTimeout(function(){r(),n.timer=null},v)},ee.done=function(b){var v=p[b];return v&&v.timer?new Promise(function(e){var n=v.onDone;v.onDone=function(){n&&n(),e(),v.onDone=null}}):Promise.resolve()},ee.clear=function(b){if(b)m(p[b]),delete p[b];else for(var v in p)ee.clear(v)}},{}],531:[function(y,$,ee){"use strict";var p=y("fast-isnumeric");$.exports=function(m,b){if(m>0)return Math.log(m)/Math.LN10;var v=Math.log(Math.min(b[0],b[1]))/Math.LN10;return p(v)||(v=Math.log(Math.max(b[0],b[1]))/Math.LN10-6),v}},{"fast-isnumeric":190}],532:[function(y,$,ee){"use strict";var p=$.exports={},m=y("../plots/geo/constants").locationmodeToLayer,b=y("topojson-client").feature;p.getTopojsonName=function(v){return[v.scope.replace(/ /g,"-"),"_",v.resolution.toString(),"m"].join("")},p.getTopojsonPath=function(v,e){return v+e+".json"},p.getTopojsonFeatures=function(v,e){return b(e,e.objects[m[v.locationmode]]).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(y,$,ee){"use strict";$.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(y,$,ee){"use strict";$.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(y,$,ee){"use strict";var p=y("../registry");$.exports=function(m){for(var b,v,e=p.layoutArrayContainers,n=p.layoutArrayRegexes,t=m.split("[")[0],a=0;a<n.length;a++)if((v=m.match(n[a]))&&0===v.index){b=v[0];break}if(b||(b=e[e.indexOf(t)]),!b)return!1;var r=m.substr(b.length);return r?!!(v=r.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:b,index:Number(v[1]),property:v[3]||""}:{array:b,index:"",property:""}}},{"../registry":638}],536:[function(y,$,ee){"use strict";var p=y("../lib"),m=p.extendFlat,b=p.isPlainObject,v={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},n=v.flags.slice().concat(["fullReplot"]),t=e.flags.slice().concat("layoutReplot");function a(s){for(var i={},l=0;l<s.length;l++)i[s[l]]=!1;return i}function r(s,i,l){var c=m({},s);for(var f in c){var g=c[f];b(g)&&(c[f]=u(g,i,0,f))}return"from-root"===l&&(c.editType=i),c}function u(s,i,l,c){if(s.valType){var f=m({},s);if(f.editType=i,Array.isArray(s.items)){f.items=new Array(s.items.length);for(var g=0;g<s.items.length;g++)f.items[g]=u(s.items[g],i)}return f}return r(s,i,"_"===c.charAt(0)?"nested":"from-root")}$.exports={traces:v,layout:e,traceFlags:function(){return a(n)},layoutFlags:function(){return a(t)},update:function(s,i){var l=i.editType;if(l&&"none"!==l)for(var c=l.split("+"),f=0;f<c.length;f++)s[c[f]]=!0},overrideAll:r}},{"../lib":503}],537:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("gl-mat4/fromQuat"),b=y("../registry"),v=y("../lib"),e=y("../plots/plots"),n=y("../plots/cartesian/axis_ids"),t=y("../components/color"),a=n.cleanId,r=n.getFromTrace,u=b.traceIs;function s(d,w){var _=d[w],T=w.charAt(0);_&&"paper"!==_&&(d[w]=a(_,T,!0))}function i(d){function w(_,T){d[_]&&(!d.title||!d.title[T])&&(d.title||(d.title={}),d.title[T]=d[_],delete d[_])}d&&("string"!=typeof d.title&&"number"!=typeof d.title||(d.title={text:d.title}),w("titlefont","font"),w("titleposition","position"),w("titleside","side"),w("titleoffset","offset"))}function l(d){if(!v.isPlainObject(d))return!1;var w=d.name;return delete d.name,delete d.showlegend,("string"==typeof w||"number"==typeof w)&&String(w)}function c(d,w,_,T){if(_&&!T)return d;if(T&&!_||!d.trim())return w;if(!w.trim())return d;var k,L=Math.min(d.length,w.length);for(k=0;k<L&&d.charAt(k)===w.charAt(k);k++);return d.substr(0,k).trim()}function f(d){var w="middle",_="center";return"string"==typeof d&&(-1!==d.indexOf("top")?w="top":-1!==d.indexOf("bottom")&&(w="bottom"),-1!==d.indexOf("left")?_="left":-1!==d.indexOf("right")&&(_="right")),w+" "+_}function g(d,w){return w in d&&"object"==typeof d[w]&&0===Object.keys(d[w]).length}ee.clearPromiseQueue=function(d){Array.isArray(d._promises)&&d._promises.length>0&&v.log("Clearing previous rejected promises from queue."),d._promises=[]},ee.cleanLayout=function(d){var w,_;d||(d={}),d.xaxis1&&(d.xaxis||(d.xaxis=d.xaxis1),delete d.xaxis1),d.yaxis1&&(d.yaxis||(d.yaxis=d.yaxis1),delete d.yaxis1),d.scene1&&(d.scene||(d.scene=d.scene1),delete d.scene1);var T=(e.subplotsRegistry.cartesian||{}).attrRegex,k=(e.subplotsRegistry.polar||{}).attrRegex,L=(e.subplotsRegistry.ternary||{}).attrRegex,M=(e.subplotsRegistry.gl3d||{}).attrRegex,O=Object.keys(d);for(w=0;w<O.length;w++){var P=O[w];if(T&&T.test(P)){var S=d[P];S.anchor&&"free"!==S.anchor&&(S.anchor=a(S.anchor)),S.overlaying&&(S.overlaying=a(S.overlaying)),S.type||(S.isdate?S.type="date":S.islog?S.type="log":!1===S.isdate&&!1===S.islog&&(S.type="linear")),"withzero"!==S.autorange&&"tozero"!==S.autorange||(S.autorange=!0,S.rangemode="tozero"),delete S.islog,delete S.isdate,delete S.categories,g(S,"domain")&&delete S.domain,void 0!==S.autotick&&(void 0===S.tickmode&&(S.tickmode=S.autotick?"auto":"linear"),delete S.autotick),i(S)}else if(k&&k.test(P))i(d[P].radialaxis);else if(L&&L.test(P)){var E=d[P];i(E.aaxis),i(E.baxis),i(E.caxis)}else if(M&&M.test(P)){var R=d[P],B=R.cameraposition;if(Array.isArray(B)&&4===B[0].length){var V=B[1],Z=B[2],W=m([],B[0]),G=[];for(_=0;_<3;++_)G[_]=V[_]+Z*W[2+4*_];R.camera={eye:{x:G[0],y:G[1],z:G[2]},center:{x:V[0],y:V[1],z:V[2]},up:{x:0,y:0,z:1}},delete R.cameraposition}i(R.xaxis),i(R.yaxis),i(R.zaxis)}}var X=Array.isArray(d.annotations)?d.annotations.length:0;for(w=0;w<X;w++){var te=d.annotations[w];v.isPlainObject(te)&&(te.ref&&("paper"===te.ref?(te.xref="paper",te.yref="paper"):"data"===te.ref&&(te.xref="x",te.yref="y"),delete te.ref),s(te,"xref"),s(te,"yref"))}var D=Array.isArray(d.shapes)?d.shapes.length:0;for(w=0;w<D;w++){var N=d.shapes[w];v.isPlainObject(N)&&(s(N,"xref"),s(N,"yref"))}var U=Array.isArray(d.images)?d.images.length:0;for(w=0;w<U;w++){var Q=d.images[w];v.isPlainObject(Q)&&(s(Q,"xref"),s(Q,"yref"))}var j=d.legend;return j&&(j.x>3?(j.x=1.02,j.xanchor="left"):j.x<-2&&(j.x=-.02,j.xanchor="right"),j.y>3?(j.y=1.02,j.yanchor="bottom"):j.y<-2&&(j.y=-.02,j.yanchor="top")),i(d),"rotate"===d.dragmode&&(d.dragmode="orbit"),t.clean(d),d.template&&d.template.layout&&ee.cleanLayout(d.template.layout),d},ee.cleanData=function(d){for(var w=0;w<d.length;w++){var _,T=d[w];if("histogramy"===T.type&&"xbins"in T&&!("ybins"in T)&&(T.ybins=T.xbins,delete T.xbins),T.error_y&&"opacity"in T.error_y){var k=t.defaults,L=T.error_y.color||(u(T,"bar")?t.defaultLine:k[w%k.length]);T.error_y.color=t.addOpacity(t.rgb(L),t.opacity(L)*T.error_y.opacity),delete T.error_y.opacity}if("bardir"in T&&("h"!==T.bardir||!u(T,"bar")&&"histogram"!==T.type.substr(0,9)||(T.orientation="h",ee.swapXYData(T)),delete T.bardir),"histogramy"===T.type&&ee.swapXYData(T),"histogramx"!==T.type&&"histogramy"!==T.type||(T.type="histogram"),"scl"in T&&!("colorscale"in T)&&(T.colorscale=T.scl,delete T.scl),"reversescl"in T&&!("reversescale"in T)&&(T.reversescale=T.reversescl,delete T.reversescl),T.xaxis&&(T.xaxis=a(T.xaxis,"x")),T.yaxis&&(T.yaxis=a(T.yaxis,"y")),u(T,"gl3d")&&T.scene&&(T.scene=e.subplotsRegistry.gl3d.cleanId(T.scene)),!u(T,"pie-like")&&!u(T,"bar-like"))if(Array.isArray(T.textposition))for(_=0;_<T.textposition.length;_++)T.textposition[_]=f(T.textposition[_]);else T.textposition&&(T.textposition=f(T.textposition));var M=b.getModule(T);if(M&&M.colorbar){var O=M.colorbar.container,P=O?T[O]:T;P&&P.colorscale&&("YIGnBu"===P.colorscale&&(P.colorscale="YlGnBu"),"YIOrRd"===P.colorscale&&(P.colorscale="YlOrRd"))}if("surface"===T.type&&v.isPlainObject(T.contours)){var S=["x","y","z"];for(_=0;_<S.length;_++){var E=T.contours[S[_]];v.isPlainObject(E)&&(E.highlightColor&&(E.highlightcolor=E.highlightColor,delete E.highlightColor),E.highlightWidth&&(E.highlightwidth=E.highlightWidth,delete E.highlightWidth))}}if("candlestick"===T.type||"ohlc"===T.type){var R=!1!==(T.increasing||{}).showlegend,B=!1!==(T.decreasing||{}).showlegend,H=l(T.increasing),V=l(T.decreasing);if(!1!==H&&!1!==V){var Z=c(H,V,R,B);Z&&(T.name=Z)}else!H&&!V||T.name||(T.name=H||V)}if(Array.isArray(T.transforms)){var W=T.transforms;for(_=0;_<W.length;_++){var G=W[_];if(v.isPlainObject(G))switch(G.type){case"filter":G.filtersrc&&(G.target=G.filtersrc,delete G.filtersrc),G.calendar&&(G.valuecalendar||(G.valuecalendar=G.calendar),delete G.calendar);break;case"groupby":if(G.styles=G.styles||G.style,G.styles&&!Array.isArray(G.styles)){var X=G.styles,te=Object.keys(X);G.styles=[];for(var D=0;D<te.length;D++)G.styles.push({target:te[D],value:X[te[D]]})}}}}g(T,"line")&&delete T.line,"marker"in T&&(g(T.marker,"line")&&delete T.marker.line,g(T,"marker")&&delete T.marker),t.clean(T),T.autobinx&&(delete T.autobinx,delete T.xbins),T.autobiny&&(delete T.autobiny,delete T.ybins),i(T),T.colorbar&&i(T.colorbar),T.marker&&T.marker.colorbar&&i(T.marker.colorbar),T.line&&T.line.colorbar&&i(T.line.colorbar),T.aaxis&&i(T.aaxis),T.baxis&&i(T.baxis)}},ee.swapXYData=function(d){var w;if(v.swapAttrs(d,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(d.z)&&Array.isArray(d.z[0])&&(d.transpose?delete d.transpose:d.transpose=!0),d.error_x&&d.error_y){var _=d.error_y,T="copy_ystyle"in _?_.copy_ystyle:!(_.color||_.thickness||_.width);v.swapAttrs(d,["error_?.copy_ystyle"]),T&&v.swapAttrs(d,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof d.hoverinfo){var k=d.hoverinfo.split("+");for(w=0;w<k.length;w++)"x"===k[w]?k[w]="y":"y"===k[w]&&(k[w]="x");d.hoverinfo=k.join("+")}},ee.coerceTraceIndices=function(d,w){if(p(w))return[w];if(!Array.isArray(w)||!w.length)return d.data.map(function(k,L){return L});if(Array.isArray(w)){for(var _=[],T=0;T<w.length;T++)v.isIndex(w[T],d.data.length)?_.push(w[T]):v.warn("trace index (",w[T],") is not a number or is out of bounds");return _}return w},ee.manageArrayContainers=function(d,w,_){var T=d.obj,k=d.parts,L=k.length,M=k[L-1],O=p(M);if(O&&null===w){var P=k.slice(0,L-1).join(".");v.nestedProperty(T,P).get().splice(M,1)}else O&&void 0===d.get()&&void 0===d.get()&&(_[d.astr]=null),d.set(w)};var h=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function o(d){var w=d.search(h);if(w>0)return d.substr(0,w)}ee.hasParent=function(d,w){for(var _=o(w);_;){if(_ in d)return!0;_=o(_)}return!1};var x=["x","y","z"];ee.clearAxisTypes=function(d,w,_){for(var T=0;T<w.length;T++)for(var k=d._fullData[T],L=0;L<3;L++){var M=r(d,k,x[L]);if(M&&"log"!==M.type){var O=M._name,P=M._id.substr(1);if("scene"===P.substr(0,5)){if(void 0!==_[P])continue;O=P+"."+O}var S=O+".type";void 0===_[O]&&void 0===_[S]&&v.nestedProperty(d.layout,S).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(y,$,ee){"use strict";var p=y("./plot_api");ee._doPlot=p._doPlot,ee.newPlot=p.newPlot,ee.restyle=p.restyle,ee.relayout=p.relayout,ee.redraw=p.redraw,ee.update=p.update,ee._guiRestyle=p._guiRestyle,ee._guiRelayout=p._guiRelayout,ee._guiUpdate=p._guiUpdate,ee._storeDirectGUIEdit=p._storeDirectGUIEdit,ee.react=p.react,ee.extendTraces=p.extendTraces,ee.prependTraces=p.prependTraces,ee.addTraces=p.addTraces,ee.deleteTraces=p.deleteTraces,ee.moveTraces=p.moveTraces,ee.purge=p.purge,ee.addFrames=p.addFrames,ee.deleteFrames=p.deleteFrames,ee.animate=p.animate,ee.setPlotConfig=p.setPlotConfig,ee.toImage=y("./to_image"),ee.validate=y("./validate"),ee.downloadImage=y("../snapshot/download");var m=y("./template_api");ee.makeTemplate=m.makeTemplate,ee.validateTemplate=m.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(y,$,ee){"use strict";var p=y("../lib/is_plain_object"),m=y("../lib/noop"),b=y("../lib/loggers"),v=y("../lib/search").sorterAsc,e=y("../registry");ee.containerArrayMatch=y("./container_array_match");var n=ee.isAddVal=function(a){return"add"===a||p(a)},t=ee.isRemoveVal=function(a){return null===a||"remove"===a};ee.applyContainerArrayChanges=function(a,r,u,s,i){var l=r.astr,c=e.getComponentMethod(l,"supplyLayoutDefaults"),f=e.getComponentMethod(l,"draw"),g=e.getComponentMethod(l,"drawOne"),h=s.replot||s.recalc||c===m||f===m,o=a.layout,x=a._fullLayout;if(u[""]){Object.keys(u).length>1&&b.warn("Full array edits are incompatible with other edits",l);var d=u[""][""];if(t(d))r.set(null);else{if(!Array.isArray(d))return b.warn("Unrecognized full array edit value",l,d),!0;r.set(d)}return!h&&(c(o,x),f(a),!0)}var w,_,T,k,L,M,O,S=Object.keys(u).map(Number).sort(v),E=r.get(),R=E||[],B=i(x,l).get(),H=[],V=-1,Z=R.length;for(w=0;w<S.length;w++)if(k=u[T=S[w]],L=Object.keys(k),O=n(M=k[""]),T<0||T>R.length-(O?0:1))b.warn("index out of range",l,T);else if(void 0!==M)L.length>1&&b.warn("Insertion & removal are incompatible with edits to the same index.",l,T),t(M)?H.push(T):O?("add"===M&&(M={}),R.splice(T,0,M),B&&B.splice(T,0,{})):b.warn("Unrecognized full object edit value",l,T,M),-1===V&&(V=T);else for(_=0;_<L.length;_++)i(R[T],L[_],l+"["+T+"].").set(k[L[_]]);for(w=H.length-1;w>=0;w--)R.splice(H[w],1),B&&B.splice(H[w],1);if(R.length?E||r.set(R):r.set(null),h)return!1;if(c(o,x),g!==m){var W;if(-1===V)W=S;else{for(Z=Math.max(R.length,Z),W=[],w=0;w<S.length&&!((T=S[w])>=V);w++)W.push(T);for(w=V;w<Z;w++)W.push(w)}for(w=0;w<W.length;w++)g(a,W[w])}else f(a);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("fast-isnumeric"),b=y("has-hover"),v=y("../lib"),e=v.nestedProperty,n=y("../lib/events"),t=y("../lib/queue"),a=y("../registry"),r=y("./plot_schema"),u=y("../plots/plots"),s=y("../plots/cartesian/axes"),i=y("../components/drawing"),l=y("../components/color"),c=y("../plots/cartesian/graph_interact").initInteractions,f=y("../constants/xmlns_namespaces"),g=y("../plots/cartesian/select").clearSelect,h=y("./plot_config").dfltConfig,o=y("./manage_arrays"),x=y("./helpers"),d=y("./subroutines"),w=y("./edit_types"),_=y("../plots/cartesian/constants").AX_NAME_PATTERN,T=0;function k(fe){var me=fe._fullLayout;me._redrawFromAutoMarginCount?me._redrawFromAutoMarginCount--:fe.emit("plotly_afterplot")}function L(fe,me){try{fe._fullLayout._paper.style("background",me)}catch(Te){v.error(Te)}}function M(fe,me){L(fe,l.combine(me,"white"))}function O(fe,me){if(!fe._context){fe._context=v.extendDeep({},h);var Te=p.select("base");fe._context._baseUrl=Te.size()&&Te.attr("href")?window.location.href.split("#")[0]:""}var _e,Me,Ie,ze=fe._context;if(me){for(Me=Object.keys(me),_e=0;_e<Me.length;_e++)"editable"!==(Ie=Me[_e])&&"edits"!==Ie&&Ie in ze&&(ze[Ie]="setBackground"===Ie&&"opaque"===me[Ie]?M:me[Ie]);me.plot3dPixelRatio&&!ze.plotGlPixelRatio&&(ze.plotGlPixelRatio=ze.plot3dPixelRatio);var Ve=me.editable;if(void 0!==Ve)for(ze.editable=Ve,Me=Object.keys(ze.edits),_e=0;_e<Me.length;_e++)ze.edits[Me[_e]]=Ve;if(me.edits)for(Me=Object.keys(me.edits),_e=0;_e<Me.length;_e++)(Ie=Me[_e])in ze.edits&&(ze.edits[Ie]=me.edits[Ie]);ze._exportedPlot=me._exportedPlot}ze.staticPlot&&(ze.editable=!1,ze.edits={},ze.autosizable=!1,ze.scrollZoom=!1,ze.doubleClick=!1,ze.showTips=!1,ze.showLink=!1,ze.displayModeBar=!1),"hover"!==ze.displayModeBar||b||(ze.displayModeBar=!0),"transparent"!==ze.setBackground&&"function"==typeof ze.setBackground||(ze.setBackground=L),ze._hasZeroHeight=ze._hasZeroHeight||0===fe.clientHeight,ze._hasZeroWidth=ze._hasZeroWidth||0===fe.clientWidth;var Je=ze.scrollZoom,De=ze._scrollZoom={};if(!0===Je)De.cartesian=1,De.gl3d=1,De.geo=1,De.mapbox=1;else if("string"==typeof Je){var Be=Je.split("+");for(_e=0;_e<Be.length;_e++)De[Be[_e]]=1}else!1!==Je&&(De.gl3d=1,De.geo=1,De.mapbox=1)}function P(fe,me){var Te,_e,Me=me+1,Ie=[];for(Te=0;Te<fe.length;Te++)(_e=fe[Te])<0?Ie.push(Me+_e):Ie.push(_e);return Ie}function S(fe,me,Te){var _e,Me;for(_e=0;_e<me.length;_e++){if((Me=me[_e])!==parseInt(Me,10))throw new Error("all values in "+Te+" must be integers");if(Me>=fe.data.length||Me<-fe.data.length)throw new Error(Te+" must be valid indices for gd.data.");if(me.indexOf(Me,_e+1)>-1||Me>=0&&me.indexOf(-fe.data.length+Me)>-1||Me<0&&me.indexOf(fe.data.length+Me)>-1)throw new Error("each index in "+Te+" must be unique.")}}function E(fe,me,Te){if(!Array.isArray(fe.data))throw new Error("gd.data must be an array.");if(void 0===me)throw new Error("currentIndices is a required argument.");if(Array.isArray(me)||(me=[me]),S(fe,me,"currentIndices"),void 0===Te||Array.isArray(Te)||(Te=[Te]),void 0!==Te&&S(fe,Te,"newIndices"),void 0!==Te&&me.length!==Te.length)throw new Error("current and new indices must be of equal length.")}function R(fe,me,Te,_e,Me){!function(Ye,tt,st,vt){var Pt=v.isPlainObject(vt);if(!Array.isArray(Ye.data))throw new Error("gd.data must be an array");if(!v.isPlainObject(tt))throw new Error("update must be a key:value object");if(void 0===st)throw new Error("indices must be an integer or array of integers");for(var Mt in S(Ye,st,"indices"),tt){if(!Array.isArray(tt[Mt])||tt[Mt].length!==st.length)throw new Error("attribute "+Mt+" must be an array of length equal to indices array length");if(Pt&&(!(Mt in vt)||!Array.isArray(vt[Mt])||vt[Mt].length!==tt[Mt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(fe,me,Te,_e);for(var Ie=function(Ye,tt,st,vt){var Mt,rt,et,bt,Rt=v.isPlainObject(vt),Yt=[];for(var Fe in Array.isArray(st)||(st=[st]),st=P(st,Ye.data.length-1),tt)for(var He=0;He<st.length;He++){if(Mt=(rt=e(Ye.data[st[He]],Fe)).get(),!v.isArrayOrTypedArray(et=tt[Fe][He]))throw new Error("attribute: "+Fe+" index: "+He+" must be an array");if(!v.isArrayOrTypedArray(Mt))throw new Error("cannot extend missing or non-array attribute: "+Fe);if(Mt.constructor!==et.constructor)throw new Error("cannot extend array with an array of a different type: "+Fe);m(bt=Rt?vt[Fe][He]:vt)||(bt=-1),Yt.push({prop:rt,target:Mt,insert:et,maxp:Math.floor(bt)})}return Yt}(fe,me,Te,_e),ze={},Ve={},Je=0;Je<Ie.length;Je++){var De=Ie[Je].prop,Ze=Me(Ie[Je].target,Ie[Je].insert,Ie[Je].maxp);De.set(Ze[0]),Array.isArray(ze[De.astr])||(ze[De.astr]=[]),ze[De.astr].push(Ze[1]),Array.isArray(Ve[De.astr])||(Ve[De.astr]=[]),Ve[De.astr].push(Ie[Je].target.length)}return{update:ze,maxPoints:Ve}}function B(fe,me){var Te=new fe.constructor(fe.length+me.length);return Te.set(fe),Te.set(me,fe.length),Te}function H(fe,me,Te,_e){fe=v.getGraphDiv(fe),x.clearPromiseQueue(fe);var Me={};if("string"==typeof me)Me[me]=Te;else{if(!v.isPlainObject(me))return v.warn("Restyle fail.",me,Te,_e),Promise.reject();Me=v.extendFlat({},me),void 0===_e&&(_e=Te)}Object.keys(Me).length&&(fe.changed=!0);var Ie=x.coerceTraceIndices(fe,_e),ze=G(fe,Me,Ie),Ve=ze.flags;Ve.calc&&(fe.calcdata=void 0),Ve.clearAxisTypes&&x.clearAxisTypes(fe,Ie,{});var Je=[];Ve.fullReplot?Je.push(ee._doPlot):(Je.push(u.previousPromises),u.supplyDefaults(fe),Ve.markerSize&&(u.doCalcdata(fe),N(Je)),Ve.style&&Je.push(d.doTraceStyle),Ve.colorbars&&Je.push(d.doColorBars),Je.push(k)),Je.push(u.rehover,u.redrag),t.add(fe,H,[fe,ze.undoit,ze.traces],H,[fe,ze.redoit,ze.traces]);var De=v.syncOrAsync(Je,fe);return De&&De.then||(De=Promise.resolve()),De.then(function(){return fe.emit("plotly_restyle",ze.eventData),fe})}function V(fe){return void 0===fe?null:fe}function Z(fe,me){return me?function(Te,_e,Me){var Ie=e(Te,_e),ze=Ie.set;return Ie.set=function(Ve){W((Me||"")+_e,Ie.get(),Ve,fe),ze(Ve)},Ie}:e}function W(fe,me,Te,_e){if(Array.isArray(me)||Array.isArray(Te))for(var Me=Array.isArray(me)?me:[],Ie=Array.isArray(Te)?Te:[],ze=Math.max(Me.length,Ie.length),Ve=0;Ve<ze;Ve++)W(fe+"["+Ve+"]",Me[Ve],Ie[Ve],_e);else if(v.isPlainObject(me)||v.isPlainObject(Te)){var Je=v.isPlainObject(me)?me:{},De=v.isPlainObject(Te)?Te:{},Be=v.extendFlat({},Je,De);for(var Ze in Be)W(fe+"."+Ze,Je[Ze],De[Ze],_e)}else void 0===_e[fe]&&(_e[fe]=V(me))}function G(fe,me,Te){var _e,Me=fe._fullLayout,Ie=fe._fullData,ze=fe.data,Ve=Me._guiEditing,Je=Z(Me._preGUI,Ve),De=v.extendDeepAll({},me);X(me);var Be,Ze=w.traceFlags(),Ye={},tt={};function st(){return Te.map(function(){})}function vt(_t){var Dt=s.id2name(_t);-1===Be.indexOf(Dt)&&Be.push(Dt)}function Pt(_t){return"LAYOUT"+_t+".autorange"}function Mt(_t){return"LAYOUT"+_t+".range"}function rt(_t){for(var Dt=_t;Dt<Ie.length;Dt++)if(Ie[Dt]._input===ze[_t])return Ie[Dt]}function et(_t,Dt,Vt){if(Array.isArray(_t))_t.forEach(function(Kt){et(Kt,Dt,Vt)});else if(!(_t in me)&&!x.hasParent(me,_t)){var nr;if("LAYOUT"===_t.substr(0,6))nr=Je(fe.layout,_t.replace("LAYOUT",""));else{var Gt=Te[Vt];nr=Z(Me._tracePreGUI[rt(Gt)._fullInput.uid],Ve)(ze[Gt],_t)}_t in tt||(tt[_t]=st()),void 0===tt[_t][Vt]&&(tt[_t][Vt]=V(nr.get())),void 0!==Dt&&nr.set(Dt)}}function bt(_t){return function(Dt){return Ie[Dt][_t]}}function Rt(_t){return function(Dt,Vt){return!1===Dt?Ie[Te[Vt]][_t]:null}}for(var Yt in me){if(x.hasParent(me,Yt))throw new Error("cannot set "+Yt+" and a parent attribute simultaneously");var Fe,He,Oe,$e,ke,Le,Pe=me[Yt];if("autobinx"!==Yt&&"autobiny"!==Yt||(Yt=Yt.charAt(Yt.length-1)+"bins",Pe=Array.isArray(Pe)?Pe.map(Rt(Yt)):!1===Pe?Te.map(bt(Yt)):null),Ye[Yt]=Pe,"LAYOUT"!==Yt.substr(0,6)){for(tt[Yt]=st(),_e=0;_e<Te.length;_e++)if(Fe=ze[Te[_e]],He=rt(Te[_e]),$e=(Oe=Z(Me._tracePreGUI[He._fullInput.uid],Ve)(Fe,Yt)).get(),void 0!==(ke=Array.isArray(Pe)?Pe[_e%Pe.length]:Pe)){var Ce=Oe.parts[Oe.parts.length-1],Xe=Yt.substr(0,Yt.length-Ce.length-1),at=Xe?Xe+".":"",pt=Xe?e(He,Xe).get():He;if((Le=r.getTraceValObject(He,Oe.parts))&&Le.impliedEdits&&null!==ke)for(var ut in Le.impliedEdits)et(v.relativeAttr(Yt,ut),Le.impliedEdits[ut],_e);else if("thicknessmode"!==Ce&&"lenmode"!==Ce||$e===ke||"fraction"!==ke&&"pixels"!==ke||!pt){if("type"===Yt&&("pie"===ke!=("pie"===$e)||"funnelarea"===ke!=("funnelarea"===$e))){var St="x",ot="y";"bar"!==ke&&"bar"!==$e||"h"!==Fe.orientation||(St="y",ot="x"),v.swapAttrs(Fe,["?","?src"],"labels",St),v.swapAttrs(Fe,["d?","?0"],"label",St),v.swapAttrs(Fe,["?","?src"],"values",ot),"pie"===$e||"funnelarea"===$e?(e(Fe,"marker.color").set(e(Fe,"marker.colors").get()),Me._pielayer.selectAll("g.trace").remove()):a.traceIs(Fe,"cartesian")&&e(Fe,"marker.colors").set(e(Fe,"marker.color").get())}}else{var Et=Me._size,Lt=pt.orient,Qe="top"===Lt||"bottom"===Lt;if("thicknessmode"===Ce){var mt=Qe?Et.h:Et.w;et(at+"thickness",pt.thickness*("fraction"===ke?1/mt:mt),_e)}else{var It=Qe?Et.w:Et.h;et(at+"len",pt.len*("fraction"===ke?1/It:It),_e)}}if(tt[Yt][_e]=V($e),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Yt)){if("orientation"===Yt){Oe.set(ke);var jt=Fe.x&&!Fe.y?"h":"v";if((Oe.get()||jt)===He.orientation)continue}else"orientationaxes"===Yt&&(Fe.orientation={v:"h",h:"v"}[He.orientation]);x.swapXYData(Fe),Ze.calc=Ze.clearAxisTypes=!0}else-1!==u.dataArrayContainers.indexOf(Oe.parts[0])?(x.manageArrayContainers(Oe,ke,tt),Ze.calc=!0):(Le?Le.arrayOk&&!a.traceIs(He,"regl")&&(v.isArrayOrTypedArray(ke)||v.isArrayOrTypedArray($e))?Ze.calc=!0:w.update(Ze,Le):Ze.calc=!0,Oe.set(ke))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(Yt)&&s.swap(fe,Te),"orientationaxes"===Yt){var Zt=e(fe.layout,"hovermode"),Re=Zt.get();"x"===Re?Zt.set("y"):"y"===Re?Zt.set("x"):"x unified"===Re?Zt.set("y unified"):"y unified"===Re&&Zt.set("x unified")}if(-1!==["orientation","type"].indexOf(Yt)){for(Be=[],_e=0;_e<Te.length;_e++){var lt=ze[Te[_e]];a.traceIs(lt,"cartesian")&&(vt(lt.xaxis||"x"),vt(lt.yaxis||"y"))}et(Be.map(Pt),!0,0),et(Be.map(Mt),[0,1],0)}}else Oe=Je(fe.layout,Yt.replace("LAYOUT","")),tt[Yt]=[V(Oe.get())],Oe.set(Array.isArray(Pe)?Pe[0]:Pe),Ze.calc=!0}return(Ze.calc||Ze.plot)&&(Ze.fullReplot=!0),{flags:Ze,undoit:tt,redoit:Ye,traces:Te,eventData:v.extendDeepNoArrays([],[De,Te])}}function X(fe){var me,Te,_e,Me=v.counterRegex("axis",".title",!1,!1),Ie=/colorbar\.title$/,ze=Object.keys(fe);for(me=0;me<ze.length;me++)_e=fe[Te=ze[me]],"title"!==Te&&!Me.test(Te)&&!Ie.test(Te)||"string"!=typeof _e&&"number"!=typeof _e?Te.indexOf("titlefont")>-1?Ve(Te,Te.replace("titlefont","title.font")):Te.indexOf("titleposition")>-1?Ve(Te,Te.replace("titleposition","title.position")):Te.indexOf("titleside")>-1?Ve(Te,Te.replace("titleside","title.side")):Te.indexOf("titleoffset")>-1&&Ve(Te,Te.replace("titleoffset","title.offset")):Ve(Te,Te.replace("title","title.text"));function Ve(Je,De){fe[De]=fe[Je],delete fe[Je]}}function te(fe,me,Te){fe=v.getGraphDiv(fe),x.clearPromiseQueue(fe);var _e={};if("string"==typeof me)_e[me]=Te;else{if(!v.isPlainObject(me))return v.warn("Relayout fail.",me,Te),Promise.reject();_e=v.extendFlat({},me)}Object.keys(_e).length&&(fe.changed=!0);var Me=J(fe,_e),Ie=Me.flags;Ie.calc&&(fe.calcdata=void 0);var ze=[u.previousPromises];Ie.layoutReplot?ze.push(d.layoutReplot):Object.keys(_e).length&&(D(fe,Ie,Me)||u.supplyDefaults(fe),Ie.legend&&ze.push(d.doLegend),Ie.layoutstyle&&ze.push(d.layoutStyles),Ie.axrange&&N(ze,Me.rangesAltered),Ie.ticks&&ze.push(d.doTicksRelayout),Ie.modebar&&ze.push(d.doModeBar),Ie.camera&&ze.push(d.doCamera),Ie.colorbars&&ze.push(d.doColorBars),ze.push(k)),ze.push(u.rehover,u.redrag),t.add(fe,te,[fe,Me.undoit],te,[fe,Me.redoit]);var Ve=v.syncOrAsync(ze,fe);return Ve&&Ve.then||(Ve=Promise.resolve(fe)),Ve.then(function(){return fe.emit("plotly_relayout",Me.eventData),fe})}function D(fe,me,Te){var _e=fe._fullLayout;if(!me.axrange)return!1;for(var Me in me)if("axrange"!==Me&&me[Me])return!1;for(var Ie in Te.rangesAltered){var ze=s.id2name(Ie),Ve=fe.layout[ze],Je=_e[ze];if(Je.autorange=Ve.autorange,Ve.range&&(Je.range=Ve.range.slice()),Je.cleanRange(),Je._matchGroup)for(var De in Je._matchGroup)if(De!==Ie){var Be=_e[s.id2name(De)];Be.autorange=Je.autorange,Be.range=Je.range.slice(),Be._input.range=Je.range.slice()}}return!0}function N(fe,me){fe.push(g,d.doAutoRangeAndConstraints,me?function(_e){var Me=[],Ie=!0;for(var ze in me){var Ve=s.getFromId(_e,ze);if(Me.push(ze),-1!==(Ve.ticklabelposition||"").indexOf("inside")&&Ve._anchorAxis&&Me.push(Ve._anchorAxis._id),Ve._matchGroup)for(var Je in Ve._matchGroup)me[Je]||Me.push(Je);Ve.automargin&&(Ie=!1)}return s.draw(_e,Me,{skipTitle:Ie})}:function(_e){return s.draw(_e,"redraw")},d.drawData,d.finalDraw)}var U=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,Q=/^[xyz]axis[0-9]*\.autorange$/,j=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function J(fe,me){var Te,_e,Me,Ie=fe.layout,ze=fe._fullLayout,Je=Z(ze._preGUI,ze._guiEditing),De=Object.keys(me),Be=s.list(fe),Ze=v.extendDeepAll({},me),Ye={};for(X(me),De=Object.keys(me),_e=0;_e<De.length;_e++)if(0===De[_e].indexOf("allaxes")){for(Me=0;Me<Be.length;Me++){var tt=Be[Me]._id.substr(1),st=-1!==tt.indexOf("scene")?tt+".":"",vt=De[_e].replace("allaxes",st+Be[Me]._name);me[vt]||(me[vt]=me[De[_e]])}delete me[De[_e]]}var Pt=w.layoutFlags(),Mt={},rt={};function et(Gt,Kt){if(Array.isArray(Gt))Gt.forEach(function(dr){et(dr,Kt)});else if(!(Gt in me)&&!x.hasParent(me,Gt)){var ir=Je(Ie,Gt);Gt in rt||(rt[Gt]=V(ir.get())),void 0!==Kt&&ir.set(Kt)}}var bt,Rt={};function Yt(Gt){var Kt=s.name2id(Gt.split(".")[0]);return Rt[Kt]=1,Kt}for(var Fe in me){if(x.hasParent(me,Fe))throw new Error("cannot set "+Fe+" and a parent attribute simultaneously");for(var He=Je(Ie,Fe),Oe=me[Fe],$e=He.parts.length-1;$e>0&&"string"!=typeof He.parts[$e];)$e--;var ke=He.parts[$e],Le=He.parts[$e-1]+"."+ke,Pe=He.parts.slice(0,$e).join("."),Ce=e(fe.layout,Pe).get(),Xe=e(ze,Pe).get(),at=He.get();if(void 0!==Oe){Mt[Fe]=Oe,rt[Fe]="reverse"===ke?Oe:V(at);var pt=r.getLayoutValObject(ze,He.parts);if(pt&&pt.impliedEdits&&null!==Oe)for(var ut in pt.impliedEdits)et(v.relativeAttr(Fe,ut),pt.impliedEdits[ut]);if(-1!==["width","height"].indexOf(Fe))if(Oe){et("autosize",null);var St="height"===Fe?"width":"height";et(St,ze[St])}else ze[Fe]=fe._initialAutoSize[Fe];else if("autosize"===Fe)et("width",Oe?null:ze.width),et("height",Oe?null:ze.height);else if(Le.match(U))Yt(Le),e(ze,Pe+"._inputRange").set(null);else if(Le.match(Q)){Yt(Le),e(ze,Pe+"._inputRange").set(null);var ot=e(ze,Pe).get();ot._inputDomain&&(ot._input.domain=ot._inputDomain.slice())}else Le.match(j)&&e(ze,Pe+"._inputDomain").set(null);if("type"===ke){bt=Ce;var Et="linear"===Xe.type&&"log"===Oe;if(Et||"log"===Xe.type&&"linear"===Oe){if(bt&&bt.range)if(Xe.autorange)Et&&(bt.range=bt.range[1]>bt.range[0]?[1,2]:[2,1]);else{var Qe=bt.range[0],mt=bt.range[1];Et?(Qe<=0&&mt<=0&&et(Pe+".autorange",!0),Qe<=0?Qe=mt/1e6:mt<=0&&(mt=Qe/1e6),et(Pe+".range[0]",Math.log(Qe)/Math.LN10),et(Pe+".range[1]",Math.log(mt)/Math.LN10)):(et(Pe+".range[0]",Math.pow(10,Qe)),et(Pe+".range[1]",Math.pow(10,mt)))}else et(Pe+".autorange",!0);Array.isArray(ze._subplots.polar)&&ze._subplots.polar.length&&ze[He.parts[0]]&&"radialaxis"===He.parts[1]&&delete ze[He.parts[0]]._subplot.viewInitial["radialaxis.range"],a.getComponentMethod("annotations","convertCoords")(fe,Xe,Oe,et),a.getComponentMethod("images","convertCoords")(fe,Xe,Oe,et)}else et(Pe+".autorange",!0),et(Pe+".range",null);e(ze,Pe+"._inputRange").set(null)}else if(ke.match(_)){var It=e(ze,Fe).get(),jt=(Oe||{}).type;jt&&"-"!==jt||(jt="linear"),a.getComponentMethod("annotations","convertCoords")(fe,It,jt,et),a.getComponentMethod("images","convertCoords")(fe,It,jt,et)}var Zt=o.containerArrayMatch(Fe);if(Zt){Te=Zt.array;var Re=Zt.property,lt=pt||{editType:"calc"};""!==(_e=Zt.index)&&""===Re&&(o.isAddVal(Oe)?rt[Fe]=null:o.isRemoveVal(Oe)?rt[Fe]=(e(Ie,Te).get()||[])[_e]:v.warn("unrecognized full object value",me)),w.update(Pt,lt),Ye[Te]||(Ye[Te]={});var _t=Ye[Te][_e];_t||(_t=Ye[Te][_e]={}),_t[Re]=Oe,delete me[Fe]}else"reverse"===ke?(Ce.range?Ce.range.reverse():(et(Pe+".autorange",!0),Ce.range=[1,0]),Xe.autorange?Pt.calc=!0:Pt.plot=!0):(ze._has("scatter-like")&&ze._has("regl")&&"dragmode"===Fe&&("lasso"===Oe||"select"===Oe)&&"lasso"!==at&&"select"!==at||ze._has("gl2d")?Pt.plot=!0:pt?w.update(Pt,pt):Pt.calc=!0,He.set(Oe))}}for(Te in Ye)o.applyContainerArrayChanges(fe,Je(Ie,Te),Ye[Te],Pt,Je)||(Pt.plot=!0);for(var Dt in Rt){var Vt=(bt=s.getFromId(fe,Dt))&&bt._constraintGroup;if(Vt)for(var nr in Pt.calc=!0,Vt)Rt[nr]||(s.getFromId(fe,nr)._constraintShrinkable=!0)}return(K(fe)||me.height||me.width)&&(Pt.plot=!0),(Pt.plot||Pt.calc)&&(Pt.layoutReplot=!0),{flags:Pt,rangesAltered:Rt,undoit:rt,redoit:Mt,eventData:Ze}}function K(fe){var me=fe._fullLayout,Te=me.width,_e=me.height;return fe.layout.autosize&&u.plotAutoSize(fe,fe.layout,me),me.width!==Te||me.height!==_e}function re(fe,me,Te,_e){fe=v.getGraphDiv(fe),x.clearPromiseQueue(fe),v.isPlainObject(me)||(me={}),v.isPlainObject(Te)||(Te={}),Object.keys(me).length&&(fe.changed=!0),Object.keys(Te).length&&(fe.changed=!0);var Me=x.coerceTraceIndices(fe,_e),Ie=G(fe,v.extendFlat({},me),Me),ze=Ie.flags,Ve=J(fe,v.extendFlat({},Te)),Je=Ve.flags;(ze.calc||Je.calc)&&(fe.calcdata=void 0),ze.clearAxisTypes&&x.clearAxisTypes(fe,Me,Te);var De=[];Je.layoutReplot?De.push(d.layoutReplot):ze.fullReplot?De.push(ee._doPlot):(De.push(u.previousPromises),D(fe,Je,Ve)||u.supplyDefaults(fe),ze.style&&De.push(d.doTraceStyle),(ze.colorbars||Je.colorbars)&&De.push(d.doColorBars),Je.legend&&De.push(d.doLegend),Je.layoutstyle&&De.push(d.layoutStyles),Je.axrange&&N(De,Ve.rangesAltered),Je.ticks&&De.push(d.doTicksRelayout),Je.modebar&&De.push(d.doModeBar),Je.camera&&De.push(d.doCamera),De.push(k)),De.push(u.rehover,u.redrag),t.add(fe,re,[fe,Ie.undoit,Ve.undoit,Ie.traces],re,[fe,Ie.redoit,Ve.redoit,Ie.traces]);var Be=v.syncOrAsync(De,fe);return Be&&Be.then||(Be=Promise.resolve(fe)),Be.then(function(){return fe.emit("plotly_update",{data:Ie.eventData,layout:Ve.eventData}),fe})}function ne(fe){return function(me){me._fullLayout._guiEditing=!0;var Te=fe.apply(null,arguments);return me._fullLayout._guiEditing=!1,Te}}var se=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],oe=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function pe(fe,me){for(var Te=0;Te<me.length;Te++){var _e=me[Te],Me=fe.match(_e.pattern);if(Me){var Ie=Me[1]||"";return{head:Ie,tail:fe.substr(Ie.length+1),attr:_e.attr}}}}function ce(fe,me){var Te=e(me,fe).get();if(void 0!==Te)return Te;var _e=fe.split(".");for(_e.pop();_e.length>1;)if(_e.pop(),void 0!==(Te=e(me,_e.join(".")+".uirevision").get()))return Te;return me.uirevision}function ge(fe,me){for(var Te=0;Te<me.length;Te++)if(me[Te]._fullInput.uid===fe)return Te;return-1}function xe(fe,me,Te){for(var _e=0;_e<me.length;_e++)if(me[_e].uid===fe)return _e;return!me[Te]||me[Te].uid?-1:Te}function we(fe,me){var Te=v.isPlainObject(fe),_e=Array.isArray(fe);return Te||_e?(Te&&v.isPlainObject(me)||_e&&Array.isArray(me))&&JSON.stringify(fe)===JSON.stringify(me):fe===me}function be(fe,me,Te,_e){var Me,Ie,ze,Ve=_e.getValObject,Je=_e.flags,De=_e.immutable,Be=_e.inArray,Ze=_e.arrayIndex;function Ye(){var Ce=Me.editType;Be&&-1!==Ce.indexOf("arraydraw")?v.pushUnique(Je.arrays[Be],Ze):(w.update(Je,Me),"none"!==Ce&&Je.nChanges++,_e.transition&&Me.anim&&Je.nChangesAnim++,(U.test(ze)||Q.test(ze))&&(Je.rangesAltered[Te[0]]=1),j.test(ze)&&e(me,"_inputDomain").set(null),"datarevision"===Ie&&(Je.newDataRevision=1))}function tt(Ce){return"data_array"===Ce.valType||Ce.arrayOk}for(Ie in fe){if(Je.calc&&!_e.transition)return;var st=fe[Ie],vt=me[Ie],Pt=Te.concat(Ie);if(ze=Pt.join("."),"_"!==Ie.charAt(0)&&"function"!=typeof st&&st!==vt){if(("tick0"===Ie||"dtick"===Ie)&&"geo"!==Te[0]){var Mt=me.tickmode;if("auto"===Mt||"array"===Mt||!Mt)continue}if(("range"!==Ie||!me.autorange)&&("zmin"!==Ie&&"zmax"!==Ie||"contourcarpet"!==me.type)&&(Me=Ve(Pt))&&(!Me._compareAsJSON||JSON.stringify(st)!==JSON.stringify(vt))){var rt,et=Me.valType,bt=tt(Me),Rt=Array.isArray(st),Yt=Array.isArray(vt);if(Rt&&Yt){var Fe="_input_"+Ie,He=fe[Fe],Oe=me[Fe];if(Array.isArray(He)&&He===Oe)continue}if(void 0===vt)bt&&Rt?Je.calc=!0:Ye();else if(Me._isLinkedToArray){var $e=[],ke=!1;Be||(Je.arrays[Ie]=$e);var Le=Math.min(st.length,vt.length),Pe=Math.max(st.length,vt.length);if(Le!==Pe){if("arraydraw"!==Me.editType){Ye();continue}ke=!0}for(rt=0;rt<Le;rt++)be(st[rt],vt[rt],Pt.concat(rt),v.extendFlat({inArray:Ie,arrayIndex:rt},_e));if(ke)for(rt=Le;rt<Pe;rt++)$e.push(rt)}else!et&&v.isPlainObject(st)?be(st,vt,Pt,_e):bt?Rt&&Yt?(De&&(Je.calc=!0),(De||_e.newDataRevision)&&Ye()):Rt!==Yt?Je.calc=!0:Ye():Rt&&Yt&&st.length===vt.length&&String(st)===String(vt)||Ye()}}}for(Ie in me)if(!(Ie in fe)&&"_"!==Ie.charAt(0)&&"function"!=typeof me[Ie]){if(tt(Me=Ve(Te.concat(Ie)))&&Array.isArray(me[Ie]))return void(Je.calc=!0);Ye()}}function Se(fe){var me=fe._fullLayout,Te=fe.getBoundingClientRect();if(!v.equalDomRects(Te,me._lastBBox)){var _e=me._invTransform=v.inverseTransformMatrix(v.getFullTransformMatrix(fe));me._invScaleX=Math.sqrt(_e[0][0]*_e[0][0]+_e[0][1]*_e[0][1]+_e[0][2]*_e[0][2]),me._invScaleY=Math.sqrt(_e[1][0]*_e[1][0]+_e[1][1]*_e[1][1]+_e[1][2]*_e[1][2]),me._lastBBox=Te}}ee.animate=function(fe,me,Te){if(fe=v.getGraphDiv(fe),!v.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var _e=fe._transitionData;_e._frameQueue||(_e._frameQueue=[]);var Me=(Te=u.supplyAnimationDefaults(Te)).transition,Ie=Te.frame;function ze(De){return Array.isArray(Me)?De>=Me.length?Me[0]:Me[De]:Me}function Ve(De){return Array.isArray(Ie)?De>=Ie.length?Ie[0]:Ie[De]:Ie}function Je(De,Be){var Ze=0;return function(){if(De&&++Ze===Be)return De()}}return void 0===_e._frameWaitingCnt&&(_e._frameWaitingCnt=0),new Promise(function(De,Be){var tt,st,vt=0;function Pt(He){return He.transitionOpts=Array.isArray(Me)?vt>=Me.length?Me[vt]:Me[0]:Me,vt++,He}var Mt=[],rt=null==me,et=Array.isArray(me);if(rt||et||!v.isPlainObject(me)){if(rt||-1!==["string","number"].indexOf(typeof me))for(tt=0;tt<_e._frames.length;tt++)(st=_e._frames[tt])&&(rt||String(st.group)===String(me))&&Mt.push({type:"byname",name:String(st.name),data:Pt({name:st.name})});else if(et)for(tt=0;tt<me.length;tt++){var bt=me[tt];-1!==["number","string"].indexOf(typeof bt)?(bt=String(bt),Mt.push({type:"byname",name:bt,data:Pt({name:bt})})):v.isPlainObject(bt)&&Mt.push({type:"object",data:Pt(v.extendFlat({},bt))})}}else Mt.push({type:"object",data:Pt(v.extendFlat({},me))});for(tt=0;tt<Mt.length;tt++)if("byname"===(st=Mt[tt]).type&&!_e._frameHash[st.data.name])return v.warn('animate failure: frame not found: "'+st.data.name+'"'),void Be();-1!==["next","immediate"].indexOf(Te.mode)&&function(){if(0!==_e._frameQueue.length){for(;_e._frameQueue.length;){var He=_e._frameQueue.pop();He.onInterrupt&&He.onInterrupt()}fe.emit("plotly_animationinterrupted",[])}}(),"reverse"===Te.direction&&Mt.reverse();var Rt=fe._fullLayout._currentFrame;if(Rt&&Te.fromcurrent){var Yt=-1;for(tt=0;tt<Mt.length;tt++)if("byname"===(st=Mt[tt]).type&&st.name===Rt){Yt=tt;break}if(Yt>0&&Yt<Mt.length-1){var Fe=[];for(tt=0;tt<Mt.length;tt++)st=Mt[tt],("byname"!==Mt[tt].type||tt>Yt)&&Fe.push(st);Mt=Fe}}Mt.length>0?function(He){if(0!==He.length){for(var Oe=0;Oe<He.length;Oe++){var $e;$e="byname"===He[Oe].type?u.computeFrame(fe,He[Oe].name):He[Oe].data;var ke=Ve(Oe),Le=ze(Oe);Le.duration=Math.min(Le.duration,ke.duration);var Pe={frame:$e,name:He[Oe].name,frameOpts:ke,transitionOpts:Le};Oe===He.length-1&&(Pe.onComplete=Je(De,2),Pe.onInterrupt=Be),_e._frameQueue.push(Pe)}"immediate"===Te.mode&&(_e._lastFrameAt=-1/0),_e._animationRaf||function(){fe.emit("plotly_animating"),_e._lastFrameAt=-1/0,_e._timeToNext=0,_e._runningTransitions=0,_e._currentFrame=null;var He=function(){_e._animationRaf=window.requestAnimationFrame(He),Date.now()-_e._lastFrameAt>_e._timeToNext&&function(){_e._currentFrame&&_e._currentFrame.onComplete&&_e._currentFrame.onComplete();var He=_e._currentFrame=_e._frameQueue.shift();if(He){var Oe=He.name?He.name.toString():null;fe._fullLayout._currentFrame=Oe,_e._lastFrameAt=Date.now(),_e._timeToNext=He.frameOpts.duration,u.transition(fe,He.frame.data,He.frame.layout,x.coerceTraceIndices(fe,He.frame.traces),He.frameOpts,He.transitionOpts).then(function(){He.onComplete&&He.onComplete()}),fe.emit("plotly_animatingframe",{name:Oe,frame:He.frame,animation:{frame:He.frameOpts,transition:He.transitionOpts}})}else fe.emit("plotly_animated"),window.cancelAnimationFrame(_e._animationRaf),_e._animationRaf=null}()};He()}()}}(Mt):(fe.emit("plotly_animated"),De())})},ee.addFrames=function(fe,me,Te){if(fe=v.getGraphDiv(fe),null==me)return Promise.resolve();if(!v.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var _e,Me,Ie,ze,Ve=fe._transitionData._frames,Je=fe._transitionData._frameHash;if(!Array.isArray(me))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+me);var De=Ve.length+2*me.length,Be=[],Ze={};for(_e=me.length-1;_e>=0;_e--)if(v.isPlainObject(me[_e])){var Ye=me[_e].name,tt=(Je[Ye]||Ze[Ye]||{}).name,st=me[_e].name;tt&&st&&"number"==typeof st&&(Je[tt]||Ze[tt])&&T<5&&(T++,v.warn('addFrames: overwriting frame "'+(Je[tt]||Ze[tt]).name+'" with a frame whose name of type "number" also equates to "'+tt+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===T&&v.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Ze[Ye]={name:Ye},Be.push({frame:u.supplyFrameDefaults(me[_e]),index:Te&&null!=Te[_e]?Te[_e]:De+_e})}Be.sort(function(Fe,He){return Fe.index>He.index?-1:Fe.index<He.index?1:0});var Pt=[],Mt=[],rt=Ve.length;for(_e=Be.length-1;_e>=0;_e--){if("number"==typeof(Me=Be[_e].frame).name&&v.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Me.name)for(;Je[Me.name="frame "+fe._transitionData._counter++];);if(Je[Me.name]){for(Ie=0;Ie<Ve.length&&(Ve[Ie]||{}).name!==Me.name;Ie++);Pt.push({type:"replace",index:Ie,value:Me}),Mt.unshift({type:"replace",index:Ie,value:Ve[Ie]})}else ze=Math.max(0,Math.min(Be[_e].index,rt)),Pt.push({type:"insert",index:ze,value:Me}),Mt.unshift({type:"delete",index:ze}),rt++}return t&&t.add(fe,u.modifyFrames,[fe,Mt],u.modifyFrames,[fe,Pt]),u.modifyFrames(fe,Pt)},ee.deleteFrames=function(fe,me){if(fe=v.getGraphDiv(fe),!v.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe);var Te,_e,Me=fe._transitionData._frames,Ie=[],ze=[];if(!me)for(me=[],Te=0;Te<Me.length;Te++)me.push(Te);for((me=me.slice()).sort(),Te=me.length-1;Te>=0;Te--)Ie.push({type:"delete",index:_e=me[Te]}),ze.unshift({type:"insert",index:_e,value:Me[_e]});return t&&t.add(fe,u.modifyFrames,[fe,ze],u.modifyFrames,[fe,Ie]),u.modifyFrames(fe,Ie)},ee.addTraces=function fe(me,Te,_e){me=v.getGraphDiv(me);var Me,Ie,ze=[],Ve=ee.deleteTraces,Je=fe,De=[me,ze],Be=[me,Te];for(function(Ze,Ye,tt){var st,vt;if(!Array.isArray(Ze.data))throw new Error("gd.data must be an array.");if(void 0===Ye)throw new Error("traces must be defined.");for(Array.isArray(Ye)||(Ye=[Ye]),st=0;st<Ye.length;st++)if("object"!=typeof(vt=Ye[st])||Array.isArray(vt)||null===vt)throw new Error("all values in traces array must be non-array objects");if(void 0===tt||Array.isArray(tt)||(tt=[tt]),void 0!==tt&&tt.length!==Ye.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(me,Te,_e),Array.isArray(Te)||(Te=[Te]),Te=Te.map(function(Ze){return v.extendFlat({},Ze)}),x.cleanData(Te),Me=0;Me<Te.length;Me++)me.data.push(Te[Me]);for(Me=0;Me<Te.length;Me++)ze.push(-Te.length+Me);if(void 0===_e)return Ie=ee.redraw(me),t.add(me,Ve,De,Je,Be),Ie;Array.isArray(_e)||(_e=[_e]);try{E(me,ze,_e)}catch(Ze){throw me.data.splice(me.data.length-Te.length,Te.length),Ze}return t.startSequence(me),t.add(me,Ve,De,Je,Be),Ie=ee.moveTraces(me,ze,_e),t.stopSequence(me),Ie},ee.deleteTraces=function fe(me,Te){me=v.getGraphDiv(me);var _e,Me,Ie=[],ze=ee.addTraces,Ve=fe,Je=[me,Ie,Te],De=[me,Te];if(void 0===Te)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Te)||(Te=[Te]),S(me,Te,"indices"),(Te=P(Te,me.data.length-1)).sort(v.sorterDes),_e=0;_e<Te.length;_e+=1)Me=me.data.splice(Te[_e],1)[0],Ie.push(Me);var Be=ee.redraw(me);return t.add(me,ze,Je,Ve,De),Be},ee.extendTraces=function fe(me,Te,_e,Me){function Ie(De,Be,Ze){var Ye,tt;if(v.isTypedArray(De))if(Ze<0){var st=new De.constructor(0),vt=B(De,Be);Ze<0?(Ye=vt,tt=st):(Ye=st,tt=vt)}else if(Ye=new De.constructor(Ze),tt=new De.constructor(De.length+Be.length-Ze),Ze===Be.length)Ye.set(Be),tt.set(De);else if(Ze<Be.length){var Pt=Be.length-Ze;Ye.set(Be.subarray(Pt)),tt.set(De),tt.set(Be.subarray(0,Pt),De.length)}else{var Mt=Ze-Be.length,rt=De.length-Mt;Ye.set(De.subarray(rt)),Ye.set(Be,Mt),tt.set(De.subarray(0,rt))}else Ye=De.concat(Be),tt=Ze>=0&&Ze<Ye.length?Ye.splice(0,Ye.length-Ze):[];return[Ye,tt]}var ze=R(me=v.getGraphDiv(me),Te,_e,Me,Ie),Ve=ee.redraw(me),Je=[me,ze.update,_e,ze.maxPoints];return t.add(me,ee.prependTraces,Je,fe,arguments),Ve},ee.moveTraces=function fe(me,Te,_e){var Me,Ie=[],ze=[],Ve=fe,Je=fe,De=[me=v.getGraphDiv(me),_e,Te],Be=[me,Te,_e];if(E(me,Te,_e),Te=Array.isArray(Te)?Te:[Te],void 0===_e)for(_e=[],Me=0;Me<Te.length;Me++)_e.push(-Te.length+Me);for(_e=Array.isArray(_e)?_e:[_e],Te=P(Te,me.data.length-1),_e=P(_e,me.data.length-1),Me=0;Me<me.data.length;Me++)-1===Te.indexOf(Me)&&Ie.push(me.data[Me]);for(Me=0;Me<Te.length;Me++)ze.push({newIndex:_e[Me],trace:me.data[Te[Me]]});for(ze.sort(function(Ye,tt){return Ye.newIndex-tt.newIndex}),Me=0;Me<ze.length;Me+=1)Ie.splice(ze[Me].newIndex,0,ze[Me].trace);me.data=Ie;var Ze=ee.redraw(me);return t.add(me,Ve,De,Je,Be),Ze},ee.prependTraces=function fe(me,Te,_e,Me){function Ie(De,Be,Ze){var Ye,tt;if(v.isTypedArray(De))if(Ze<=0){var st=new De.constructor(0),vt=B(Be,De);Ze<0?(Ye=vt,tt=st):(Ye=st,tt=vt)}else if(Ye=new De.constructor(Ze),tt=new De.constructor(De.length+Be.length-Ze),Ze===Be.length)Ye.set(Be),tt.set(De);else if(Ze<Be.length){var Pt=Be.length-Ze;Ye.set(Be.subarray(0,Pt)),tt.set(Be.subarray(Pt)),tt.set(De,Pt)}else{var Mt=Ze-Be.length;Ye.set(Be),Ye.set(De.subarray(0,Mt),Be.length),tt.set(De.subarray(Mt))}else Ye=Be.concat(De),tt=Ze>=0&&Ze<Ye.length?Ye.splice(Ze,Ye.length):[];return[Ye,tt]}var ze=R(me=v.getGraphDiv(me),Te,_e,Me,Ie),Ve=ee.redraw(me),Je=[me,ze.update,_e,ze.maxPoints];return t.add(me,ee.extendTraces,Je,fe,arguments),Ve},ee.newPlot=function(fe,me,Te,_e){return fe=v.getGraphDiv(fe),u.cleanPlot([],{},fe._fullData||[],fe._fullLayout||{}),u.purge(fe),ee._doPlot(fe,me,Te,_e)},ee._doPlot=function(fe,me,Te,_e){var Me;if(fe=v.getGraphDiv(fe),n.init(fe),v.isPlainObject(me)){var Ie=me;me=Ie.data,Te=Ie.layout,_e=Ie.config,Me=Ie.frames}if(!1===n.triggerHandler(fe,"plotly_beforeplot",[me,Te,_e]))return Promise.reject();me||Te||v.isPlotDiv(fe)||v.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",fe),O(fe,_e),Te||(Te={}),p.select(fe).classed("js-plotly-plot",!0),i.makeTester(),Array.isArray(fe._promises)||(fe._promises=[]);var ze=0===(fe.data||[]).length&&Array.isArray(me);Array.isArray(me)&&(x.cleanData(me),ze?fe.data=me:fe.data.push.apply(fe.data,me),fe.empty=!1),fe.layout&&!ze||(fe.layout=x.cleanLayout(Te)),u.supplyDefaults(fe);var Ve=fe._fullLayout,Je=Ve._has("cartesian");Ve._replotting=!0,(ze||Ve._shouldCreateBgLayer)&&(function(Mt){var rt=p.select(Mt),et=Mt._fullLayout;if(et._calcInverseTransform=Se,et._calcInverseTransform(Mt),et._container=rt.selectAll(".plot-container").data([0]),et._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),et._paperdiv=et._container.selectAll(".svg-container").data([0]),et._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),et._glcontainer=et._paperdiv.selectAll(".gl-container").data([{}]),et._glcontainer.enter().append("div").classed("gl-container",!0),et._paperdiv.selectAll(".main-svg").remove(),et._paperdiv.select(".modebar-container").remove(),et._paper=et._paperdiv.insert("svg",":first-child").classed("main-svg",!0),et._toppaper=et._paperdiv.append("svg").classed("main-svg",!0),et._modebardiv=et._paperdiv.append("div"),delete et._modeBar,et._hoverpaper=et._paperdiv.append("svg").classed("main-svg",!0),!et._uid){var bt={};p.selectAll("defs").each(function(){this.id&&(bt[this.id.split("-")[1]]=1)}),et._uid=v.randstr(bt)}et._paperdiv.selectAll(".main-svg").attr(f.svgAttrs),et._defs=et._paper.append("defs").attr("id","defs-"+et._uid),et._clips=et._defs.append("g").classed("clips",!0),et._topdefs=et._toppaper.append("defs").attr("id","topdefs-"+et._uid),et._topclips=et._topdefs.append("g").classed("clips",!0),et._bgLayer=et._paper.append("g").classed("bglayer",!0),et._draggers=et._paper.append("g").classed("draglayer",!0);var Rt=et._paper.append("g").classed("layer-below",!0);et._imageLowerLayer=Rt.append("g").classed("imagelayer",!0),et._shapeLowerLayer=Rt.append("g").classed("shapelayer",!0),et._cartesianlayer=et._paper.append("g").classed("cartesianlayer",!0),et._polarlayer=et._paper.append("g").classed("polarlayer",!0),et._smithlayer=et._paper.append("g").classed("smithlayer",!0),et._ternarylayer=et._paper.append("g").classed("ternarylayer",!0),et._geolayer=et._paper.append("g").classed("geolayer",!0),et._funnelarealayer=et._paper.append("g").classed("funnelarealayer",!0),et._pielayer=et._paper.append("g").classed("pielayer",!0),et._iciclelayer=et._paper.append("g").classed("iciclelayer",!0),et._treemaplayer=et._paper.append("g").classed("treemaplayer",!0),et._sunburstlayer=et._paper.append("g").classed("sunburstlayer",!0),et._indicatorlayer=et._toppaper.append("g").classed("indicatorlayer",!0),et._glimages=et._paper.append("g").classed("glimages",!0);var Yt=et._toppaper.append("g").classed("layer-above",!0);et._imageUpperLayer=Yt.append("g").classed("imagelayer",!0),et._shapeUpperLayer=Yt.append("g").classed("shapelayer",!0),et._infolayer=et._toppaper.append("g").classed("infolayer",!0),et._menulayer=et._toppaper.append("g").classed("menulayer",!0),et._zoomlayer=et._toppaper.append("g").classed("zoomlayer",!0),et._hoverlayer=et._hoverpaper.append("g").classed("hoverlayer",!0),et._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Mt.emit("plotly_framework")}(fe),Ve._shouldCreateBgLayer&&delete Ve._shouldCreateBgLayer),i.initGradients(fe),i.initPatterns(fe),ze&&s.saveShowSpikeInitial(fe);var De=!fe.calcdata||fe.calcdata.length!==(fe._fullData||[]).length;De&&u.doCalcdata(fe);for(var Be=0;Be<fe.calcdata.length;Be++)fe.calcdata[Be][0].trace=fe._fullData[Be];fe._context.responsive?fe._responsiveChartHandler||(fe._responsiveChartHandler=function(){v.isHidden(fe)||u.resize(fe)},window.addEventListener("resize",fe._responsiveChartHandler)):v.clearResponsive(fe);var Ze=v.extendFlat({},Ve._size),Ye=0;function tt(){if(u.clearAutoMarginIds(fe),d.drawMarginPushers(fe),s.allowAutoMargin(fe),Ve._has("pie"))for(var Mt=fe._fullData,rt=0;rt<Mt.length;rt++){var et=Mt[rt];"pie"===et.type&&et.automargin&&u.allowAutoMargin(fe,"pie."+et.uid+".automargin")}return u.doAutoMargin(fe),u.previousPromises(fe)}function st(){fe._transitioning||(d.doAutoRangeAndConstraints(fe),ze&&s.saveRangeInitial(fe),a.getComponentMethod("rangeslider","calcAutorange")(fe))}var vt=[u.previousPromises,function(){if(Me)return ee.addFrames(fe,Me)},function Mt(){for(var rt=Ve._basePlotModules,et=0;et<rt.length;et++)rt[et].drawFramework&&rt[et].drawFramework(fe);!Ve._glcanvas&&Ve._has("gl")&&(Ve._glcanvas=Ve._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Fe){return Fe.key}),Ve._glcanvas.enter().append("canvas").attr("class",function(Fe){return"gl-canvas gl-canvas-"+Fe.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var bt=fe._context.plotGlPixelRatio;if(Ve._glcanvas){Ve._glcanvas.attr("width",Ve.width*bt).attr("height",Ve.height*bt).style("width",Ve.width+"px").style("height",Ve.height+"px");var Rt=Ve._glcanvas.data()[0].regl;if(Rt&&(Math.floor(Ve.width*bt)!==Rt._gl.drawingBufferWidth||Math.floor(Ve.height*bt)!==Rt._gl.drawingBufferHeight)){var Yt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Ye)return v.log(Yt+" Clearing graph and plotting again."),u.cleanPlot([],{},fe._fullData,Ve),u.supplyDefaults(fe),Ve=fe._fullLayout,u.doCalcdata(fe),Ye++,Mt();v.error(Yt)}}return"h"===Ve.modebar.orientation?Ve._modebardiv.style("height",null).style("width","100%"):Ve._modebardiv.style("width",null).style("height",Ve.height+"px"),u.previousPromises(fe)},tt,function(){if(u.didMarginChange(Ze,Ve._size))return v.syncOrAsync([tt,d.layoutStyles],fe)}];Je&&vt.push(function(){if(De)return v.syncOrAsync([a.getComponentMethod("shapes","calcAutorange"),a.getComponentMethod("annotations","calcAutorange"),st],fe);st()}),vt.push(d.layoutStyles),Je&&vt.push(function(){return s.draw(fe,ze?"":"redraw")},function(Mt){Mt._fullLayout._insideTickLabelsAutorange&&te(Mt,Mt._fullLayout._insideTickLabelsAutorange).then(function(){Mt._fullLayout._insideTickLabelsAutorange=void 0})}),vt.push(d.drawData,d.finalDraw,c,u.addLinks,u.rehover,u.redrag,u.doAutoMargin,function(Mt){Mt._fullLayout._insideTickLabelsAutorange&&ze&&s.saveRangeInitial(Mt,!0)},u.previousPromises);var Pt=v.syncOrAsync(vt,fe);return Pt&&Pt.then||(Pt=Promise.resolve()),Pt.then(function(){return k(fe),fe})},ee.purge=function(fe){var me=(fe=v.getGraphDiv(fe))._fullLayout||{};return u.cleanPlot([],{},fe._fullData||[],me),u.purge(fe),n.purge(fe),me._container&&me._container.remove(),delete fe._context,fe},ee.react=function(fe,me,Te,_e){var Me,Ie;fe=v.getGraphDiv(fe),x.clearPromiseQueue(fe);var Pe,Ce,Xe,at,pt,ut,ze=fe._fullData,Ve=fe._fullLayout;if(v.isPlotDiv(fe)&&ze&&Ve){if(v.isPlainObject(me)){var Je=me;me=Je.data,Te=Je.layout,_e=Je.config,Me=Je.frames}var De=!1;if(_e){var Be=v.extendDeep({},fe._context);fe._context=void 0,O(fe,_e),De=function Pe(Ce,Xe){var at;for(at in Ce)if("_"!==at.charAt(0)){var pt=Ce[at],ut=Xe[at];if(pt!==ut)if(v.isPlainObject(pt)&&v.isPlainObject(ut)){if(Pe(pt,ut))return!0}else{if(!Array.isArray(pt)||!Array.isArray(ut)||pt.length!==ut.length)return!0;for(var St=0;St<pt.length;St++)if(pt[St]!==ut[St]&&(!v.isPlainObject(pt[St])||!v.isPlainObject(ut[St])||Pe(pt[St],ut[St])))return!0}}}(Be,fe._context)}fe.data=me||[],x.cleanData(fe.data),fe.layout=Te||{},x.cleanLayout(fe.layout),function(Pe,Ce,Xe,at){var pt,ut,St,ot,Et,Lt,Qe,mt,It,jt,Zt=at._preGUI,Re=[],lt={},_t={};for(pt in Zt){if(Et=pe(pt,se)){if(It=Et.head,jt=Et.tail,(ot=(St=e(at,ut=Et.attr||It+".uirevision").get())&&ce(ut,Ce))&&ot===St){if(null===(Lt=Zt[pt])&&(Lt=void 0),we(mt=(Qe=e(Ce,pt)).get(),Lt)){void 0===mt&&"autorange"===jt&&Re.push(It),Qe.set(V(e(at,pt).get()));continue}if("autorange"===jt||"range["===jt.substr(0,6)){var nr=Zt[It+".autorange"];if(nr||null===nr&&null===Zt[It+".range[0]"]&&null===Zt[It+".range[1]"]){if(!(It in lt)){var Gt=e(Ce,It).get();lt[It]=Gt&&(Gt.autorange||!1!==Gt.autorange&&(!Gt.range||2!==Gt.range.length))}if(lt[It]){Qe.set(V(e(at,pt).get()));continue}}}}}else v.warn("unrecognized GUI edit: "+pt);delete Zt[pt],Et&&"range["===Et.tail.substr(0,6)&&(_t[Et.head]=1)}for(var Kt=0;Kt<Re.length;Kt++){var ir=Re[Kt];if(_t[ir]){var dr=e(Ce,ir).get();dr&&delete dr.autorange}}var hr=at._tracePreGUI;for(var cr in hr){var sr,mr=hr[cr],Ir=null;for(pt in mr){if(!Ir){var vr=ge(cr,Xe);if(vr<0){delete hr[cr];break}var Br=xe(cr,Pe,(sr=Xe[vr]._fullInput).index);if(Br<0){delete hr[cr];break}Ir=Pe[Br]}if(Et=pe(pt,oe)){if(Et.attr?ot=(St=e(at,Et.attr).get())&&ce(Et.attr,Ce):(St=sr.uirevision,void 0===(ot=Ir.uirevision)&&(ot=Ce.uirevision)),ot&&ot===St&&(null===(Lt=mr[pt])&&(Lt=void 0),we(mt=(Qe=e(Ir,pt)).get(),Lt))){Qe.set(V(e(sr,pt).get()));continue}}else v.warn("unrecognized GUI edit: "+pt+" in trace uid "+cr);delete mr[pt]}}}(fe.data,fe.layout,ze,Ve),u.supplyDefaults(fe,{skipUpdateCalc:!0});var Ze=fe._fullData,Ye=fe._fullLayout,tt=void 0===Ye.datarevision,st=Ye.transition,vt=(Pe=fe,Ce=Ve,Xe=Ye,at=tt,pt=st,(ut=w.layoutFlags()).arrays={},ut.rangesAltered={},ut.nChanges=0,ut.nChangesAnim=0,be(Ce,Xe,[],{getValObject:function(ot){return r.getLayoutValObject(Xe,ot)},flags:ut,immutable:at,transition:pt,gd:Pe}),(ut.plot||ut.calc)&&(ut.layoutReplot=!0),pt&&ut.nChanges&&ut.nChangesAnim&&(ut.anim=ut.nChanges===ut.nChangesAnim?"all":"some"),ut),Mt=function(Pe,Ce,Xe,at,pt,ut){var St=Ce.length===Xe.length;if(!pt&&!St)return{fullReplot:!0,calc:!0};var ot,Et,Lt=w.traceFlags();Lt.arrays={},Lt.nChanges=0,Lt.nChangesAnim=0;var Qe={getValObject:function(It){var jt=r.getTraceValObject(Et,It);return!Et._module.animatable&&jt.anim&&(jt.anim=!1),jt},flags:Lt,immutable:at,transition:pt,newDataRevision:ut,gd:Pe},mt={};for(ot=0;ot<Ce.length;ot++)if(Xe[ot]){if(u.hasMakesDataTransform(Et=Xe[ot]._fullInput)&&(Et=Xe[ot]),mt[Et.uid])continue;mt[Et.uid]=1,be(Ce[ot]._fullInput,Et,[],Qe)}return(Lt.calc||Lt.plot)&&(Lt.fullReplot=!0),pt&&Lt.nChanges&&Lt.nChangesAnim&&(Lt.anim=Lt.nChanges===Lt.nChangesAnim&&St?"all":"some"),Lt}(fe,ze,Ze,tt,st,vt.newDataRevision);if(K(fe)&&(vt.layoutReplot=!0),Mt.calc||vt.calc){fe.calcdata=void 0;for(var rt=Object.getOwnPropertyNames(Ye),et=0;et<rt.length;et++){var bt=rt[et],Rt=bt.substring(0,5);if("xaxis"===Rt||"yaxis"===Rt){var Yt=Ye[bt]._emptyCategories;Yt&&Yt()}}}else u.supplyDefaultsUpdateCalc(fe.calcdata,Ze);var Fe=[];if(Me&&(fe._transitionData={},u.createTransitionData(fe),Fe.push(function(){return ee.addFrames(fe,Me)})),Ye.transition&&!De&&(Mt.anim||vt.anim))vt.ticks&&Fe.push(d.doTicksRelayout),u.doCalcdata(fe),d.doAutoRangeAndConstraints(fe),Fe.push(function(){return u.transitionFromReact(fe,Mt,vt,Ve)});else if(Mt.fullReplot||vt.layoutReplot||De)fe._fullLayout._skipDefaults=!0,Fe.push(ee._doPlot);else{for(var He in vt.arrays){var Oe=vt.arrays[He];if(Oe.length){var $e=a.getComponentMethod(He,"drawOne");if($e!==v.noop)for(var ke=0;ke<Oe.length;ke++)$e(fe,Oe[ke]);else{var Le=a.getComponentMethod(He,"draw");if(Le===v.noop)throw new Error("cannot draw components: "+He);Le(fe)}}}Fe.push(u.previousPromises),Mt.style&&Fe.push(d.doTraceStyle),(Mt.colorbars||vt.colorbars)&&Fe.push(d.doColorBars),vt.legend&&Fe.push(d.doLegend),vt.layoutstyle&&Fe.push(d.layoutStyles),vt.axrange&&N(Fe),vt.ticks&&Fe.push(d.doTicksRelayout),vt.modebar&&Fe.push(d.doModeBar),vt.camera&&Fe.push(d.doCamera),Fe.push(k)}Fe.push(u.rehover,u.redrag),(Ie=v.syncOrAsync(Fe,fe))&&Ie.then||(Ie=Promise.resolve(fe))}else Ie=ee.newPlot(fe,me,Te,_e);return Ie.then(function(){return fe.emit("plotly_react",{data:me,layout:Te}),fe})},ee.redraw=function(fe){if(fe=v.getGraphDiv(fe),!v.isPlotDiv(fe))throw new Error("This element is not a Plotly plot: "+fe);return x.cleanData(fe.data),x.cleanLayout(fe.layout),fe.calcdata=void 0,ee._doPlot(fe).then(function(){return fe.emit("plotly_redraw"),fe})},ee.relayout=te,ee.restyle=H,ee.setPlotConfig=function(fe){return v.extendFlat(h,fe)},ee.update=re,ee._guiRelayout=ne(te),ee._guiRestyle=ne(H),ee._guiUpdate=ne(re),ee._storeDirectGUIEdit=function(fe,me,Te){for(var _e in Te)W(_e,e(fe,_e).get(),Te[_e],me)}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(y,$,ee){"use strict";var p={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},m={};(function b(v,e){for(var n in v){var t=v[n];t.valType?e[n]=t.dflt:(e[n]||(e[n]={}),b(t,e[n]))}})(p,m),$.exports={configAttributes:p,dfltConfig:m}},{}],542:[function(y,$,ee){"use strict";var p=y("../registry"),m=y("../lib"),b=y("../plots/attributes"),v=y("../plots/layout_attributes"),e=y("../plots/frame_attributes"),n=y("../plots/animation_attributes"),t=y("./plot_config").configAttributes,a=y("./edit_types"),r=m.extendDeepAll,u=m.isPlainObject,s=m.isArrayOrTypedArray,i=m.nestedProperty,l=m.valObjectMeta,c=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function f(_,T,k){if(!_)return!1;if(_._isLinkedToArray)if(g(T[k]))k++;else if(k<T.length)return!1;for(;k<T.length;k++){var L=_[T[k]];if(!u(L)||(_=L,k===T.length-1))break;if(_._isLinkedToArray){if(!g(T[++k]))return!1}else if("info_array"===_.valType){var M=T[++k];if(!g(M))return!1;var O=_.items;if(Array.isArray(O)){if(M>=O.length)return!1;if(2===_.dimensions){if(k++,T.length===k)return _;var P=T[k];if(!g(P))return!1;_=O[M][P]}else _=O[M]}else _=O}}return _}function g(_){return _===Math.round(_)&&_>=0}function h(){var _,T,k={};for(_ in r(k,v),p.subplotsRegistry)if((T=p.subplotsRegistry[_]).layoutAttributes)if(Array.isArray(T.attr))for(var L=0;L<T.attr.length;L++)d(k,T,T.attr[L]);else d(k,T,"subplot"===T.attr?T.name:T.attr);for(_ in p.componentsRegistry){var M=(T=p.componentsRegistry[_]).schema;if(M&&(M.subplots||M.layout)){var O=M.subplots;if(O&&O.xaxis&&!O.yaxis)for(var P in O.xaxis)delete k.yaxis[P]}else"colorscale"===T.name?r(k,T.layoutAttributes):T.layoutAttributes&&w(k,T.layoutAttributes,T.name)}return{layoutAttributes:x(k)}}function o(){var _={frames:r({},e)};return x(_),_.frames}function x(_){return ee.crawl(_,function(k,L,M){ee.isValObject(k)?!0!==k.arrayOk&&"data_array"!==k.valType||(M[L+"src"]={valType:"string",editType:"none"}):u(k)&&(k.role="object")}),ee.crawl(_,function(k,L,M){if(k){var O=k._isLinkedToArray;O&&(delete k._isLinkedToArray,M[L]={items:{}},M[L].items[O]=k,M[L].role="object")}}),function(T){!function k(L){for(var M in L)if(u(L[M]))k(L[M]);else if(Array.isArray(L[M]))for(var O=0;O<L[M].length;O++)k(L[M][O]);else L[M]instanceof RegExp&&(L[M]=L[M].toString())}(T)}(_),_}function d(_,T,k){var L=i(_,k),M=r({},T.layoutAttributes);M._isSubplotObj=!0,L.set(M)}function w(_,T,k){var L=i(_,k);L.set(r(L.get()||{},T))}ee.IS_SUBPLOT_OBJ="_isSubplotObj",ee.IS_LINKED_TO_ARRAY="_isLinkedToArray",ee.DEPRECATED="_deprecated",ee.UNDERSCORE_ATTRS=c,ee.get=function(){var _={};p.allTypes.forEach(function(k){_[k]=function(L){var M,O;O=(M=p.modules[L]._module).basePlotModule;var P={type:null},S=r({},b),E=r({},M.attributes);ee.crawl(E,function(H,V,Z,W,G){i(S,G).set(void 0),void 0===H&&i(E,G).set(void 0)}),r(P,S),p.traceIs(L,"noOpacity")&&delete P.opacity,p.traceIs(L,"showLegend")||(delete P.showlegend,delete P.legendgroup),p.traceIs(L,"noHover")&&(delete P.hoverinfo,delete P.hoverlabel),M.selectPoints||delete P.selectedpoints,r(P,E),O.attributes&&r(P,O.attributes),P.type=L;var R={meta:M.meta||{},categories:M.categories||{},animatable:Boolean(M.animatable),type:L,attributes:x(P)};if(M.layoutAttributes){var B={};r(B,M.layoutAttributes),R.layoutAttributes=x(B)}return M.animatable||ee.crawl(R,function(H){ee.isValObject(H)&&"anim"in H&&delete H.anim}),R}(k)});var T={};return Object.keys(p.transformsRegistry).forEach(function(k){var L,O;T[k]=(O=r({},p.transformsRegistry[L=k].attributes),Object.keys(p.componentsRegistry).forEach(function(P){var S=p.componentsRegistry[P];S.schema&&S.schema.transforms&&S.schema.transforms[L]&&Object.keys(S.schema.transforms[L]).forEach(function(E){w(O,S.schema.transforms[L][E],E)})}),{attributes:x(O)})}),{defs:{valObjects:l,metaKeys:c.concat(["description","role","editType","impliedEdits"]),editType:{traces:a.traces,layout:a.layout},impliedEdits:{}},traces:_,layout:h(),transforms:T,frames:o(),animation:x(n),config:x(t)}},ee.crawl=function(_,T,k,L){var M=k||0;L=L||"",Object.keys(_).forEach(function(O){var P=_[O];if(-1===c.indexOf(O)){var S=(L?L+".":"")+O;T(P,O,_,M,S),ee.isValObject(P)||u(P)&&"impliedEdits"!==O&&ee.crawl(P,T,M+1,S)}})},ee.isValObject=function(_){return _&&void 0!==_.valType},ee.findArrayAttributes=function(_){var T,k,L=[],M=[],O=[];function P(H,V,Z,W){M=M.slice(0,W).concat([V]),O=O.slice(0,W).concat([H&&H._isLinkedToArray]),H&&("data_array"===H.valType||!0===H.arrayOk)&&("colorbar"!==M[W-1]||"ticktext"!==V&&"tickvals"!==V)&&function G(X,te,D){var N=X[M[te]],U=D+M[te];if(te===M.length-1)s(N)&&L.push(k+U);else if(O[te]){if(Array.isArray(N))for(var Q=0;Q<N.length;Q++)u(N[Q])&&G(N[Q],te+1,U+"["+Q+"].")}else u(N)&&G(N,te+1,U+".")}(T,0,"")}T=_,k="",ee.crawl(b,P),_._module&&_._module.attributes&&ee.crawl(_._module.attributes,P);var S=_.transforms;if(S)for(var E=0;E<S.length;E++){var R=S[E],B=R._module;B&&(k="transforms["+E+"].",T=R,ee.crawl(B.attributes,P))}return L},ee.getTraceValObject=function(_,T){var k,L,M=T[0],O=1;if("transforms"===M){if(1===T.length)return b.transforms;var P=_.transforms;if(!Array.isArray(P)||!P.length)return!1;var S=T[1];if(!g(S)||S>=P.length)return!1;L=(k=(p.transformsRegistry[P[S].type]||{}).attributes)&&k[T[2]],O=3}else{var E=_._module;if(E||(E=(p.modules[_.type||b.type.dflt]||{})._module),!E)return!1;if(!(L=(k=E.attributes)&&k[M])){var R=E.basePlotModule;R&&R.attributes&&(L=R.attributes[M])}L||(L=b[M])}return f(L,T,O)},ee.getLayoutValObject=function(_,T){return f(function(k,L){var M,O,P,S,E=k._basePlotModules;if(E){var R;for(M=0;M<E.length;M++){if((P=E[M]).attrRegex&&P.attrRegex.test(L)){if(P.layoutAttrOverrides)return P.layoutAttrOverrides;!R&&P.layoutAttributes&&(R=P.layoutAttributes)}var B=P.baseLayoutAttrOverrides;if(B&&L in B)return B[L]}if(R)return R}var H=k._modules;if(H)for(M=0;M<H.length;M++)if((S=H[M].layoutAttributes)&&L in S)return S[L];for(O in p.componentsRegistry){if("colorscale"===(P=p.componentsRegistry[O]).name&&0===L.indexOf("coloraxis"))return P.layoutAttributes[L];if(!P.schema&&L===P.name)return P.layoutAttributes}return L in v&&v[L]}(_,T[0]),T,1)}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(y,$,ee){"use strict";var p=y("../lib"),m=y("../plots/attributes"),b={name:{valType:"string",editType:"none"}};function v(n){return n&&"string"==typeof n}function e(n){return"s"!==n.charAt(n.length-1)&&p.warn("bad argument to arrayDefaultKey: "+n),n.substr(0,n.length-1)+"defaults"}b.templateitemname={valType:"string",editType:"calc"},ee.templatedArray=function(n,t){return t._isLinkedToArray=n,t.name=b.name,t.templateitemname=b.templateitemname,t},ee.traceTemplater=function(n){var t,a,r={};for(t in n)a=n[t],Array.isArray(a)&&a.length&&(r[t]=0);return{newTrace:function(u){var s={type:t=p.coerce(u,{},m,"type"),_template:null};if(t in r){var i=r[t]%(a=n[t]).length;r[t]++,s._template=a[i]}return s}}},ee.newContainer=function(n,t,a){var r=n._template,u=r&&(r[t]||a&&r[a]);return p.isPlainObject(u)||(u=null),n[t]={_template:u}},ee.arrayTemplater=function(n,t,a){var r=n._template,u=r&&r[e(t)],s=r&&r[t];Array.isArray(s)&&s.length||(s=[]);var i={};return{newItem:function(l){var c={name:l.name,_input:l},f=c.templateitemname=l.templateitemname;if(!v(f))return c._template=u,c;for(var g=0;g<s.length;g++){var h=s[g];if(h.name===f)return i[f]=1,c._template=h,c}return c[a]=l[a]||!1,c._template=!1,c},defaultItems:function(){for(var l=[],c=0;c<s.length;c++){var f=s[c],g=f.name;if(v(g)&&!i[g]){var h={_template:f,name:g,_input:{_templateitemname:g}};h.templateitemname=f.templateitemname,l.push(h),i[g]=1}}return l}}},ee.arrayDefaultKey=e,ee.arrayEditor=function(n,t,a){var r=(p.nestedProperty(n,t).get()||[]).length,u=a._index,s=u>=r&&(a._input||{})._templateitemname;s&&(u=r);var i,l=t+"["+u+"]";function c(){i={},s&&(i[l]={},i[l].templateitemname=s)}function f(h,o){s?p.nestedProperty(i[l],h).set(o):i[l+"."+h]=o}function g(){var h=i;return c(),h}return c(),{modifyBase:function(h,o){i[h]=o},modifyItem:f,getUpdateObj:g,applyUpdate:function(h,o){h&&f(h,o);var x=g();for(var d in x)p.nestedProperty(n,d).set(x[d])}}}},{"../lib":503,"../plots/attributes":550}],544:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../registry"),b=y("../plots/plots"),v=y("../lib"),e=y("../lib/clear_gl_canvases"),n=y("../components/color"),t=y("../components/drawing"),a=y("../components/titles"),r=y("../components/modebar"),u=y("../plots/cartesian/axes"),s=y("../constants/alignment"),i=y("../plots/cartesian/constraints"),l=i.enforce,c=i.clean,f=y("../plots/cartesian/autorange").doAutoRange;function g(T,k,L){for(var M=0;M<L.length;M++){var O=L[M][0],P=L[M][1];if(!(O[0]>=T[1]||O[1]<=T[0])&&P[0]<k[1]&&P[1]>k[0])return!0}return!1}function h(T){var k,L,M,O,P,S,E=T._fullLayout,R=E._size,B=R.p,H=u.list(T,"",!0);if(E._paperdiv.style({width:T._context.responsive&&E.autosize&&!T._context._hasZeroWidth&&!T.layout.width?"100%":E.width+"px",height:T._context.responsive&&E.autosize&&!T._context._hasZeroHeight&&!T.layout.height?"100%":E.height+"px"}).selectAll(".main-svg").call(t.setSize,E.width,E.height),T._context.setBackground(T,E.paper_bgcolor),ee.drawMainTitle(T),r.manage(T),!E._has("cartesian"))return b.previousPromises(T);function V(Ye,tt,st){var vt=Ye._lw/2;return"x"===Ye._id.charAt(0)?tt?"top"===st?tt._offset-B-vt:tt._offset+tt._length+B+vt:R.t+R.h*(1-(Ye.position||0))+vt%1:tt?"right"===st?tt._offset+tt._length+B+vt:tt._offset-B-vt:R.l+R.w*(Ye.position||0)+vt%1}for(k=0;k<H.length;k++){var Z=(O=H[k])._anchorAxis;O._linepositions={},O._lw=t.crispRound(T,O.linewidth,1),O._mainLinePosition=V(O,Z,O.side),O._mainMirrorPosition=O.mirror&&Z?V(O,Z,s.OPPOSITE_SIDE[O.side]):null}var W=[],G=[],X=[],te=1===n.opacity(E.paper_bgcolor)&&1===n.opacity(E.plot_bgcolor)&&E.paper_bgcolor===E.plot_bgcolor;for(L in E._plots)if((M=E._plots[L]).mainplot)M.bg&&M.bg.remove(),M.bg=void 0;else{var D=M.xaxis.domain,N=M.yaxis.domain,U=M.plotgroup;if(g(D,N,X)){var Q=U.node(),j=M.bg=v.ensureSingle(U,"rect","bg");Q.insertBefore(j.node(),Q.childNodes[0]),G.push(L)}else U.select("rect.bg").remove(),X.push([D,N]),te||(W.push(L),G.push(L))}var J,K,re,ne,se,oe,pe,ce,ge,xe,we,be,Se,fe=E._bgLayer.selectAll(".bg").data(W);for(fe.enter().append("rect").classed("bg",!0),fe.exit().remove(),fe.each(function(Ye){E._plots[Ye].bg=p.select(this)}),k=0;k<G.length;k++)P=(M=E._plots[G[k]]).xaxis,S=M.yaxis,M.bg&&void 0!==P._offset&&void 0!==S._offset&&M.bg.call(t.setRect,P._offset-B,S._offset-B,P._length+2*B,S._length+2*B).call(n.fill,E.plot_bgcolor).style("stroke-width",0);if(!E._hasOnlyLargeSploms)for(L in E._plots){P=(M=E._plots[L]).xaxis,S=M.yaxis;var me,Te,_e=M.clipId="clip"+E._uid+L+"plot",Me=v.ensureSingleById(E._clips,"clipPath",_e,function(Ye){Ye.classed("plotclip",!0).append("rect")});M.clipRect=Me.select("rect").attr({width:P._length,height:S._length}),t.setTranslate(M.plot,P._offset,S._offset),M._hasClipOnAxisFalse?(me=null,Te=_e):(me=_e,Te=null),t.setClipUrl(M.plot,me,T),M.layerClipId=Te}function Ie(Ye){return"M"+J+","+Ye+"H"+K}function ze(Ye){return"M"+P._offset+","+Ye+"h"+P._length}function Ve(Ye){return"M"+Ye+","+ce+"V"+pe}function Je(Ye){return"M"+Ye+","+S._offset+"v"+S._length}function De(Ye,tt,st){if(!Ye.showline||L!==Ye._mainSubplot)return"";if(!Ye._anchorAxis)return st(Ye._mainLinePosition);var vt=tt(Ye._mainLinePosition);return Ye.mirror&&(vt+=tt(Ye._mainMirrorPosition)),vt}for(L in E._plots){S=(M=E._plots[L]).yaxis;var Be="M0,0";o(P=M.xaxis,L)&&(se=d(P,"left",S,H),J=P._offset-(se?B+se:0),oe=d(P,"right",S,H),K=P._offset+P._length+(oe?B+oe:0),re=V(P,S,"bottom"),ne=V(P,S,"top"),!(Se=!P._anchorAxis||L!==P._mainSubplot)||"allticks"!==P.mirror&&"all"!==P.mirror||(P._linepositions[L]=[re,ne]),Be=De(P,Ie,ze),Se&&P.showline&&("all"===P.mirror||"allticks"===P.mirror)&&(Be+=Ie(re)+Ie(ne)),M.xlines.style("stroke-width",P._lw+"px").call(n.stroke,P.showline?P.linecolor:"rgba(0,0,0,0)")),M.xlines.attr("d",Be);var Ze="M0,0";o(S,L)&&(we=d(S,"bottom",P,H),pe=S._offset+S._length+(we?B:0),be=d(S,"top",P,H),ce=S._offset-(be?B:0),ge=V(S,P,"left"),xe=V(S,P,"right"),!(Se=!S._anchorAxis||L!==S._mainSubplot)||"allticks"!==S.mirror&&"all"!==S.mirror||(S._linepositions[L]=[ge,xe]),Ze=De(S,Ve,Je),Se&&S.showline&&("all"===S.mirror||"allticks"===S.mirror)&&(Ze+=Ve(ge)+Ve(xe)),M.ylines.style("stroke-width",S._lw+"px").call(n.stroke,S.showline?S.linecolor:"rgba(0,0,0,0)")),M.ylines.attr("d",Ze)}return u.makeClipPaths(T),b.previousPromises(T)}function o(T,k){return(T.ticks||T.showline)&&(k===T._mainSubplot||"all"===T.mirror||"allticks"===T.mirror)}function x(T,k,L){if(!L.showline||!L._lw)return!1;if("all"===L.mirror||"allticks"===L.mirror)return!0;var M=L._anchorAxis;if(!M)return!1;var O=s.FROM_BL[k];return L.side===k?M.domain[O]===T.domain[O]:L.mirror&&M.domain[1-O]===T.domain[1-O]}function d(T,k,L,M){if(x(T,k,L))return L._lw;for(var O=0;O<M.length;O++){var P=M[O];if(P._mainAxis===L._mainAxis&&x(T,k,P))return P._lw}return 0}function w(T,k){var L=T.title,M=T._size,O=0;return"paper"===("start"===k?O=L.pad.l:"end"===k&&(O=-L.pad.r),L.xref)?M.l+M.w*L.x+O:T.width*L.x+O}function _(T,k){var L=T.title,M=T._size,O=0;return"0em"!==k&&k?k===s.CAP_SHIFT+"em"&&(O=L.pad.t):O=-L.pad.b,"auto"===L.y?M.t/2:"paper"===L.yref?M.t+M.h-M.h*L.y+O:T.height-T.height*L.y+O}ee.layoutStyles=function(T){return v.syncOrAsync([b.doAutoMargin,h],T)},ee.drawMainTitle=function(T){var P,S,k=T._fullLayout,L=(S="middle",v.isRightAnchor(P=k.title)?S="end":v.isLeftAnchor(P)&&(S="start"),S),M=function(O){var P=O.title,S="0em";return v.isTopAnchor(P)?S=s.CAP_SHIFT+"em":v.isMiddleAnchor(P)&&(S=s.MID_SHIFT+"em"),S}(k);a.draw(T,"gtitle",{propContainer:k,propName:"title.text",placeholder:k._dfltTitle.plot,attributes:{x:w(k,L),y:_(k,M),"text-anchor":L,dy:M}})},ee.doTraceStyle=function(T){var k,L=T.calcdata,M=[];for(k=0;k<L.length;k++){var O=L[k],P=O[0]||{},S=P.trace||{},E=S._module||{},R=E.arraysToCalcdata;R&&R(O,S);var B=E.editStyle;B&&M.push({fn:B,cd0:P})}if(M.length){for(k=0;k<M.length;k++){var H=M[k];H.fn(T,H.cd0)}e(T),ee.redrawReglTraces(T)}return b.style(T),m.getComponentMethod("legend","draw")(T),b.previousPromises(T)},ee.doColorBars=function(T){return m.getComponentMethod("colorbar","draw")(T),b.previousPromises(T)},ee.layoutReplot=function(T){var k=T.layout;return T.layout=void 0,m.call("_doPlot",T,"",k)},ee.doLegend=function(T){return m.getComponentMethod("legend","draw")(T),b.previousPromises(T)},ee.doTicksRelayout=function(T){return u.draw(T,"redraw"),T._fullLayout._hasOnlyLargeSploms&&(m.subplotsRegistry.splom.updateGrid(T),e(T),ee.redrawReglTraces(T)),ee.drawMainTitle(T),b.previousPromises(T)},ee.doModeBar=function(T){var k=T._fullLayout;r.manage(T);for(var L=0;L<k._basePlotModules.length;L++){var M=k._basePlotModules[L].updateFx;M&&M(T)}return b.previousPromises(T)},ee.doCamera=function(T){for(var k=T._fullLayout,L=k._subplots.gl3d,M=0;M<L.length;M++){var O=k[L[M]];O._scene.setViewport(O)}},ee.drawData=function(T){var k=T._fullLayout;e(T);for(var L=k._basePlotModules,M=0;M<L.length;M++)L[M].plot(T);return ee.redrawReglTraces(T),b.style(T),m.getComponentMethod("shapes","draw")(T),m.getComponentMethod("annotations","draw")(T),m.getComponentMethod("images","draw")(T),k._replotting=!1,b.previousPromises(T)},ee.redrawReglTraces=function(T){var k=T._fullLayout;if(k._has("regl")){var L,M,O=T._fullData,P=[],S=[];for(k._hasOnlyLargeSploms&&k._splomGrid.draw(),L=0;L<O.length;L++){var E=O[L];!0===E.visible&&0!==E._length&&("splom"===E.type?k._splomScenes[E.uid].draw():"scattergl"===E.type?v.pushUnique(P,E.xaxis+E.yaxis):"scatterpolargl"===E.type&&v.pushUnique(S,E.subplot))}for(L=0;L<P.length;L++)(M=k._plots[P[L]])._scene&&M._scene.draw();for(L=0;L<S.length;L++)(M=k[S[L]]._subplot)._scene&&M._scene.draw()}},ee.doAutoRangeAndConstraints=function(T){for(var k,L=u.list(T,"",!0),M={},O=0;O<L.length;O++)if(!M[(k=L[O])._id]){M[k._id]=1,c(T,k),f(T,k);var P=k._matchGroup;if(P)for(var S in P){var E=u.getFromId(T,S);f(T,E,k.range),M[S]=1}}l(T)},ee.finalDraw=function(T){m.getComponentMethod("rangeslider","draw")(T),m.getComponentMethod("rangeselector","draw")(T)},ee.drawMarginPushers=function(T){m.getComponentMethod("legend","draw")(T),m.getComponentMethod("rangeselector","draw")(T),m.getComponentMethod("sliders","draw")(T),m.getComponentMethod("updatemenus","draw")(T),m.getComponentMethod("colorbar","draw")(T)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(y,$,ee){"use strict";var p=y("../lib"),m=p.isPlainObject,b=y("./plot_schema"),v=y("../plots/plots"),e=y("../plots/attributes"),n=y("./plot_template"),t=y("./plot_config").dfltConfig;function a(g,h){g=p.extendDeep({},g);var o,x,d=Object.keys(g).sort();function w(M,O,P){if(m(O)&&m(M))a(M,O);else if(Array.isArray(O)&&Array.isArray(M)){var S=n.arrayTemplater({_template:g},P);for(x=0;x<O.length;x++){var E=O[x],R=S.newItem(E)._template;R&&a(R,E)}var B=S.defaultItems();for(x=0;x<B.length;x++)O.push(B[x]._template);for(x=0;x<O.length;x++)delete O[x].templateitemname}}for(o=0;o<d.length;o++){var _=d[o],T=g[_];if(_ in h?w(T,h[_],_):h[_]=T,r(_)===_)for(var k in h){var L=r(k);k===L||L!==_||k in g||w(T,h[k],_)}}}function r(g){return g.replace(/[0-9]+$/,"")}function u(g,h,o,x,d){var w=d&&o(d);for(var _ in g){var T=g[_],k=l(g,_,x),L=l(g,_,d),M=o(L);if(!M){var O=r(_);O!==_&&(M=o(L=l(g,O,d)))}if(!(w&&w===M||!M||M._noTemplating||"data_array"===M.valType||M.arrayOk&&Array.isArray(T)))if(!M.valType&&m(T))u(T,h,o,k,L);else if(M._isLinkedToArray&&Array.isArray(T))for(var P=!1,S=0,E={},R=0;R<T.length;R++){var B=T[R];if(m(B)){var H=B.name;if(H)E[H]||(u(B,h,o,l(T,S,k),l(T,S,L)),S++,E[H]=1);else if(!P){var V=l(g,n.arrayDefaultKey(_),x),Z=l(T,S,k);u(B,h,o,Z,l(T,S,L));var W=p.nestedProperty(h,Z);p.nestedProperty(h,V).set(W.get()),W.set(null),P=!0}}}else p.nestedProperty(h,k).set(T)}}function s(g,h){return b.getLayoutValObject(g,p.nestedProperty({},h).parts)}function i(g,h){return b.getTraceValObject(g,p.nestedProperty({},h).parts)}function l(g,h,o){return o?Array.isArray(g)?o+"["+h+"]":o+"."+h:h}function c(g){for(var h=0;h<g.length;h++)if(m(g[h]))return!0}function f(g){var h;switch(g.code){case"data":h="The template has no key data.";break;case"layout":h="The template has no key layout.";break;case"missing":h=g.path?"There are no templates for item "+g.path+" with name "+g.templateitemname:"There are no templates for trace "+g.index+", of type "+g.traceType+".";break;case"unused":h=g.path?"The template item at "+g.path+" was not used in constructing the plot.":g.dataCount?"Some of the templates of type "+g.traceType+" were not used. The template has "+g.templateCount+" traces, the data only has "+g.dataCount+" of this type.":"The template has "+g.templateCount+" traces of type "+g.traceType+" but there are none in the data.";break;case"reused":h="Some of the templates of type "+g.traceType+" were used more than once. The template has "+g.templateCount+" traces, the data has "+g.dataCount+" of this type."}return g.msg=h,g}ee.makeTemplate=function(g){g=p.isPlainObject(g)?g:p.getGraphDiv(g),g=p.extendDeep({_context:t},{data:g.data,layout:g.layout}),v.supplyDefaults(g);var h=g.data||[],o=g.layout||{};o._basePlotModules=g._fullLayout._basePlotModules,o._modules=g._fullLayout._modules;var x={data:{},layout:{}};h.forEach(function(S){var E={};u(S,E,i.bind(null,S));var R=p.coerce(S,{},e,"type"),B=x.data[R];B||(B=x.data[R]=[]),B.push(E)}),u(o,x.layout,s.bind(null,o)),delete x.layout.template;var d=o.template;if(m(d)){var w,_,T,k,L,M,O=d.layout;m(O)&&a(O,x.layout);var P=d.data;if(m(P)){for(_ in x.data)if(T=P[_],Array.isArray(T)){for(M=(L=x.data[_]).length,k=T.length,w=0;w<M;w++)a(T[w%k],L[w]);for(w=M;w<k;w++)L.push(p.extendDeep({},T[w]))}for(_ in P)_ in x.data||(x.data[_]=p.extendDeep([],P[_]))}}return x},ee.validateTemplate=function(g,h){var o=p.extendDeep({},{_context:t,data:g.data,layout:g.layout}),x=o.layout||{};m(h)||(h=x.template||{});var d=h.layout,w=h.data,_=[];o.layout=x,o.layout.template=h,v.supplyDefaults(o);var T=o._fullLayout,k=o._fullData,L={};if(m(d)?(function B(H,V){for(var Z in H)if("_"!==Z.charAt(0)&&m(H[Z])){var W,G=r(Z),X=[];for(W=0;W<V.length;W++)X.push(l(H,Z,V[W])),G!==Z&&X.push(l(H,G,V[W]));for(W=0;W<X.length;W++)L[X[W]]=1;B(H[Z],X)}}(T,["layout"]),function B(H,V){for(var Z in H)if(-1===Z.indexOf("defaults")&&m(H[Z])){var W=l(H,Z,V);L[W]?B(H[Z],W):_.push({code:"unused",path:W})}}(d,"layout")):_.push({code:"layout"}),m(w)){for(var M,O={},P=0;P<k.length;P++){var S=k[P];O[M=S.type]=(O[M]||0)+1,S._fullInput._template||_.push({code:"missing",index:S._fullInput.index,traceType:M})}for(M in w){var E=w[M].length,R=O[M]||0;E>R?_.push({code:"unused",traceType:M,templateCount:E,dataCount:R}):R>E&&_.push({code:"reused",traceType:M,templateCount:E,dataCount:R})}}else _.push({code:"data"});if(function B(H,V){for(var Z in H)if("_"!==Z.charAt(0)){var W=H[Z],G=l(H,Z,V);m(W)?(Array.isArray(H)&&!1===W._template&&W.templateitemname&&_.push({code:"missing",path:G,templateitemname:W.templateitemname}),B(W,G)):Array.isArray(W)&&c(W)&&B(W,G)}}({data:k,layout:T},""),_.length)return _.map(f)}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("./plot_api"),b=y("../plots/plots"),v=y("../lib"),e=y("../snapshot/helpers"),n=y("../snapshot/tosvg"),t=y("../snapshot/svgtoimg"),a=y("../version").version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};$.exports=function(u,s){var i,l,c,f;function g(R){return!(R in s)||v.validate(s[R],r[R])}if(s=s||{},v.isPlainObject(u)?(i=u.data||[],l=u.layout||{},c=u.config||{},f={}):(u=v.getGraphDiv(u),i=v.extendDeep([],u.data),l=v.extendDeep({},u.layout),c=u._context,f=u._fullLayout||{}),!g("width")&&null!==s.width||!g("height")&&null!==s.height)throw new Error("Height and width should be pixel values.");if(!g("format"))throw new Error("Export format is not "+v.join2(r.format.values,", "," or ")+".");var h={};function o(R,B){return v.coerce(s,h,r,R,B)}var x=o("format"),d=o("width"),w=o("height"),_=o("scale"),T=o("setBackground"),k=o("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var M=v.extendFlat({},l);d?M.width=d:null===s.width&&p(f.width)&&(M.width=f.width),w?M.height=w:null===s.height&&p(f.height)&&(M.height=f.height);var O=v.extendFlat({},c,{_exportedPlot:!0,staticPlot:!0,setBackground:T}),P=e.getRedrawFunc(L);function S(){return new Promise(function(R){setTimeout(R,e.getDelay(L._fullLayout))})}function E(){return new Promise(function(R,B){var H=n(L,x,_),V=L._fullLayout.width,Z=L._fullLayout.height;function W(){m.purge(L),document.body.removeChild(L)}if("full-json"===x){var G=b.graphJson(L,!1,"keepdata","object",!0,!0);return G.version=a,G=JSON.stringify(G),W(),R(k?G:e.encodeJSON(G))}if(W(),"svg"===x)return R(k?H:e.encodeSVG(H));var X=document.createElement("canvas");X.id=v.randstr(),t({format:x,width:V,height:Z,scale:_,canvas:X,svg:H,promise:!0}).then(R).catch(B)})}return new Promise(function(R,B){m.newPlot(L,i,M,O).then(P).then(S).then(E).then(function(H){var V;R((V=H,k?V.replace(e.IMAGE_URL_PREFIX,""):V))}).catch(function(H){B(H)})})}},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1118,"./plot_api":540,"fast-isnumeric":190}],547:[function(y,$,ee){"use strict";var p=y("../lib"),m=y("../plots/plots"),b=y("./plot_schema"),v=y("./plot_config").dfltConfig,e=p.isPlainObject,n=Array.isArray,t=p.isArrayOrTypedArray;function a(h,o,x,d,w,_){_=_||[];for(var T=Object.keys(h),k=0;k<T.length;k++){var L=T[k];if("transforms"!==L){var M=_.slice();M.push(L);var O=h[L],P=o[L],S=c(x,L),E=(S||{}).valType,R="info_array"===E,B="colorscale"===E,H=(S||{}).items;if(l(x,L))if(e(O)&&e(P)&&"any"!==E)a(O,P,S,d,w,M);else if(R&&n(O)){O.length>P.length&&d.push(i("unused",w,M.concat(P.length)));var V,Z,G,X,te=P.length,D=Array.isArray(H);if(D&&(te=Math.min(te,H.length)),2===S.dimensions)for(Z=0;Z<te;Z++)if(n(O[Z])){O[Z].length>P[Z].length&&d.push(i("unused",w,M.concat(Z,P[Z].length)));var N=P[Z].length;for(V=0;V<(D?Math.min(N,H[Z].length):N);V++)X=P[Z][V],p.validate(G=O[Z][V],D?H[Z][V]:H)?X!==G&&X!==+G&&d.push(i("dynamic",w,M.concat(Z,V),G,X)):d.push(i("value",w,M.concat(Z,V),G))}else d.push(i("array",w,M.concat(Z),O[Z]));else for(Z=0;Z<te;Z++)X=P[Z],p.validate(G=O[Z],D?H[Z]:H)?X!==G&&X!==+G&&d.push(i("dynamic",w,M.concat(Z),G,X)):d.push(i("value",w,M.concat(Z),G))}else if(S.items&&!R&&n(O)){var U,Q,j=H[Object.keys(H)[0]],J=[];for(U=0;U<P.length;U++){var K=P[U]._index||U;if((Q=M.slice()).push(K),e(O[K])&&e(P[U])){J.push(K);var re=O[K],ne=P[U];e(re)&&!1!==re.visible&&!1===ne.visible?d.push(i("invisible",w,Q)):a(re,ne,j,d,w,Q)}}for(U=0;U<O.length;U++)(Q=M.slice()).push(U),e(O[U])?-1===J.indexOf(U)&&d.push(i("unused",w,Q)):d.push(i("object",w,Q,O[U]))}else!e(O)&&e(P)?d.push(i("object",w,M,O)):t(O)||!t(P)||R||B?L in o?p.validate(O,S)?"enumerated"===S.valType&&(S.coerceNumber&&O!==+P||O!==P)&&d.push(i("dynamic",w,M,O,P)):d.push(i("value",w,M,O)):d.push(i("unused",w,M,O)):d.push(i("array",w,M,O));else d.push(i("schema",w,M))}}return d}function r(h,o){for(var x=h.layout.layoutAttributes,d=0;d<o.length;d++){var w=o[d],_=h.traces[w.type],T=_.layoutAttributes;T&&p.extendFlat(w.subplot?x[_.attributes.subplot.dflt]:x,T)}return x}$.exports=function(h,o){void 0===h&&(h=[]),void 0===o&&(o={});var x,d,w=b.get(),_=[],T={_context:p.extendFlat({},v)};n(h)?(T.data=p.extendDeep([],h),x=h):(T.data=[],x=[],_.push(i("array","data"))),e(o)?(T.layout=p.extendDeep({},o),d=o):(T.layout={},d={},arguments.length>1&&_.push(i("object","layout"))),m.supplyDefaults(T);for(var k=T._fullData,L=x.length,M=0;M<L;M++){var O=x[M],P=["data",M];if(e(O)){var S=k[M],E=S.type,R=w.traces[E].attributes;R.type={valType:"enumerated",values:[E]},!1===S.visible&&!1!==O.visible&&_.push(i("invisible",P)),a(O,S,R,_,P);var B=O.transforms,H=S.transforms;if(B){n(B)||_.push(i("array",P,["transforms"])),P.push("transforms");for(var V=0;V<B.length;V++){var Z=["transforms",V],W=B[V].type;if(e(B[V])){var G=w.transforms[W]?w.transforms[W].attributes:{};G.type={valType:"enumerated",values:Object.keys(w.transforms)},a(B[V],H[V],G,_,P,Z)}else _.push(i("object",P,Z))}}}else _.push(i("object",P))}var X=T._fullLayout,te=r(w,k);return a(d,X,te,_,"layout"),0===_.length?void 0:_};var u={object:function(h,o){return("layout"===h&&""===o?"The layout argument":"data"===h[0]&&""===o?"Trace "+h[1]+" in the data argument":s(h)+"key "+o)+" must be linked to an object container"},array:function(h,o){return("data"===h?"The data argument":s(h)+"key "+o)+" must be linked to an array container"},schema:function(h,o){return s(h)+"key "+o+" is not part of the schema"},unused:function(h,o,x){var d=e(x)?"container":"key";return s(h)+d+" "+o+" did not get coerced"},dynamic:function(h,o,x,d){return[s(h)+"key",o,"(set to '"+x+"')","got reset to","'"+d+"'","during defaults."].join(" ")},invisible:function(h,o){return(o?s(h)+"item "+o:"Trace "+h[1])+" got defaulted to be not visible"},value:function(h,o,x){return[s(h)+"key "+o,"is set to an invalid value ("+x+")"].join(" ")}};function s(h){return n(h)?"In data trace "+h[1]+", ":"In "+h+", "}function i(h,o,x,d,w){var _,T;x=x||"",n(o)?(_=o[0],T=o[1]):(_=o,T=null);var k=function(M){if(!n(M))return String(M);for(var O="",P=0;P<M.length;P++){var S=M[P];"number"==typeof S?O=O.substr(0,O.length-1)+"["+S+"]":O+=S,P<M.length-1&&(O+=".")}return O}(x),L=u[h](o,k,d,w);return p.log(L),{code:h,container:_,trace:T,path:x,astr:k,msg:L}}function l(h,o){var x=g(o),d=x.keyMinusId;return!!(d in h&&h[d]._isSubplotObj&&x.id)||o in h}function c(h,o){return o in h?h[o]:h[g(o).keyMinusId]}var f=p.counterRegex("([a-z]+)");function g(h){var o=h.match(f);return{keyMinusId:o&&o[1],id:o&&o[2]}}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(y,$,ee){"use strict";$.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(y,$,ee){"use strict";var p=y("../lib"),m=y("../plot_api/plot_template");$.exports=function(b,v,e){var n,t,a=e.name,r=e.inclusionAttr||"visible",u=v[a],s=p.isArrayOrTypedArray(b[a])?b[a]:[],i=v[a]=[],l=m.arrayTemplater(v,a,r);for(n=0;n<s.length;n++){var c=s[n];p.isPlainObject(c)?t=l.newItem(c):(t=l.newItem({}))[r]=!1,t._index=n,!1!==t[r]&&e.handleItemDefaults(c,t,v,e),i.push(t)}var f=l.defaultItems();for(n=0;n<f.length;n++)(t=f[n])._index=i.length,e.handleItemDefaults({},t,v,e,{}),i.push(t);if(p.isArrayOrTypedArray(u)){var g=Math.min(u.length,i.length);for(n=0;n<g;n++)p.relinkPrivateKeys(i[n],u[n])}return i}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(y,$,ee){"use strict";var p=y("./font_attributes"),m=y("../components/fx/attributes");$.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:p({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:m.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib"),b=m.dateTime2ms,v=m.incrementMonth,e=y("../../constants/numerical").ONEAVGMONTH;$.exports=function(n,t,a,r){if("date"!==t.type)return{vals:r};var u=n[a+"periodalignment"];if(!u)return{vals:r};var s,i=n[a+"period"];if(p(i)){if((i=+i)<=0)return{vals:r}}else if("string"==typeof i&&"M"===i.charAt(0)){var l=+i.substring(1);if(!(l>0&&Math.round(l)===l))return{vals:r};s=l}for(var c=t.calendar,f="start"===u,g="end"===u,o=b(n[a+"period0"],c)||0,x=[],d=[],w=[],_=r.length,T=0;T<_;T++){var k,L,M,O=r[T];if(s){for(k=Math.round((O-o)/(s*e)),M=v(o,s*k,c);M>O;)M=v(M,-s,c);for(;M<=O;)M=v(M,s,c);L=v(M,-s,c)}else{for(M=o+(k=Math.round((O-o)/i))*i;M>O;)M-=i;for(;M<=O;)M+=i;L=M-i}x[T]=f?L:g?M:(L+M)/2,d[T]=L,w[T]=M}return{vals:x,starts:d,ends:w}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(y,$,ee){"use strict";$.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("fast-isnumeric"),b=y("../../lib"),v=y("../../constants/numerical").FP_SAFE,e=y("../../registry"),n=y("../../components/drawing"),t=y("./axis_ids"),a=t.getFromId,r=t.isLinked;function u(d,w){var _,T,k=[],L=d._fullLayout,M=i(L,w,0),O=i(L,w,1),P=l(d,w),S=P.min,E=P.max;if(0===S.length||0===E.length)return b.simpleMap(w.range,w.r2l);var R=S[0].val,B=E[0].val;for(_=1;_<S.length&&R===B;_++)R=Math.min(R,S[_].val);for(_=1;_<E.length&&R===B;_++)B=Math.max(B,E[_].val);var H=!1;if(w.range){var V=b.simpleMap(w.range,w.r2l);H=V[1]<V[0]}"reversed"===w.autorange&&(H=!0,w.autorange=!0);var Z,W,G,X,te,D,N=w.rangemode,U="tozero"===N,Q="nonnegative"===N,j=w._length,J=j/10,K=0;for(_=0;_<S.length;_++)for(Z=S[_],T=0;T<E.length;T++)(D=(W=E[T]).val-Z.val-s(w,Z.val,W.val))>0&&((te=j-M(Z)-O(W))>J?D/te>K&&(G=Z,X=W,K=D/te):D/j>K&&(G={val:Z.val,nopad:1},X={val:W.val,nopad:1},K=D/j));if(R===B){var re=R-1,ne=R+1;if(U)if(0===R)k=[0,1];else{var se=(R>0?E:S).reduce(function(pe,ce){return Math.max(pe,O(ce))},0),oe=R/(1-Math.min(.5,se/j));k=R>0?[0,oe]:[oe,0]}else k=Q?[Math.max(0,re),Math.max(1,ne)]:[re,ne]}else U?(G.val>=0&&(G={val:0,nopad:1}),X.val<=0&&(X={val:0,nopad:1})):Q&&(G.val-K*M(G)<0&&(G={val:0,nopad:1}),X.val<=0&&(X={val:1,nopad:1})),K=(X.val-G.val-s(w,Z.val,W.val))/(j-M(G)-O(X)),k=[G.val-K*M(G),X.val+K*O(X)];return H&&k.reverse(),b.simpleMap(k,w.l2r||Number)}function s(d,w,_){var T=0;if(d.rangebreaks)for(var k=d.locateBreaks(w,_),L=0;L<k.length;L++){var M=k[L];T+=M.max-M.min}return T}function i(d,w,_){var T=.05*w._length,k=w._anchorAxis||{};if(-1!==(w.ticklabelposition||"").indexOf("inside")||-1!==(k.ticklabelposition||"").indexOf("inside")){var L="reversed"===w.autorange;if(!L){var M=b.simpleMap(w.range,w.r2l);L=M[1]<M[0]}L&&(_=!_)}var O=0;return r(d,w._id)||(O=function(P,S,E){var R=0,B="x"===S._id.charAt(0);for(var H in P._plots){var V=P._plots[H];if(S._id===V.xaxis._id||S._id===V.yaxis._id){var Z=(B?V.yaxis:V.xaxis)||{};if(-1!==(Z.ticklabelposition||"").indexOf("inside")&&(!E&&("left"===Z.side||"bottom"===Z.side)||E&&("top"===Z.side||"right"===Z.side))){if(Z._vals){var W=b.deg2rad(Z._tickAngles[Z._id+"tick"]||0),G=Math.abs(Math.cos(W)),X=Math.abs(Math.sin(W));Z._vals[0].bb||Z._selections[Z._id+"tick"].each(function(j){var J=p.select(this);J.select(".text-math-group").empty()&&(j.bb=n.bBox(J.node()))});for(var D=0;D<Z._vals.length;D++){var N=Z._vals[D].bb;if(N){var U=6+N.width,Q=6+N.height;R=Math.max(R,B?Math.max(U*G,Q*X):Math.max(Q*G,U*X))}}}"inside"===Z.ticks&&"inside"===Z.ticklabelposition&&(R+=Z.ticklen||0)}}}return R}(d,w,_)),T=Math.max(O,T),"domain"===w.constrain&&w._inputDomain&&(T*=(w._inputDomain[1]-w._inputDomain[0])/(w.domain[1]-w.domain[0])),function(P){return P.nopad?0:P.pad+(P.extrapad?T:O)}}function l(d,w,_){var T,k,L,M=w._id,P=d._fullLayout,S=[],E=[];function R(W,G){for(T=0;T<G.length;T++){var X=W[G[T]],te=(X._extremes||{})[M];if(!0===X.visible&&te){for(k=0;k<te.min.length;k++)c(S,(L=te.min[k]).val,L.pad,{extrapad:L.extrapad});for(k=0;k<te.max.length;k++)f(E,(L=te.max[k]).val,L.pad,{extrapad:L.extrapad})}}}if(R(d._fullData,w._traceIndices),R(P.annotations||[],w._annIndices||[]),R(P.shapes||[],w._shapeIndices||[]),w._matchGroup&&!_)for(var B in w._matchGroup)if(B!==w._id){var H=a(d,B),V=l(d,H,!0),Z=w._length/H._length;for(k=0;k<V.min.length;k++)c(S,(L=V.min[k]).val,L.pad*Z,{extrapad:L.extrapad});for(k=0;k<V.max.length;k++)f(E,(L=V.max[k]).val,L.pad*Z,{extrapad:L.extrapad})}return{min:S,max:E}}function c(d,w,_,T){g(d,w,_,T,o)}function f(d,w,_,T){g(d,w,_,T,x)}function g(d,w,_,T,k){for(var L=T.tozero,M=T.extrapad,O=!0,P=0;P<d.length&&O;P++){var S=d[P];if(k(S.val,w)&&S.pad>=_&&(S.extrapad||!M)){O=!1;break}k(w,S.val)&&S.pad<=_&&(M||!S.extrapad)&&(d.splice(P,1),P--)}if(O){var E=L&&0===w;d.push({val:w,pad:E?0:_,extrapad:!E&&M})}}function h(d){return m(d)&&Math.abs(d)<v}function o(d,w){return d<=w}function x(d,w){return d>=w}$.exports={getAutoRange:u,makePadFn:i,doAutoRange:function(d,w,_){if(w.setScale(),w.autorange){w.range=_?_.slice():u(d,w),w._r=w.range.slice(),w._rl=b.simpleMap(w._r,w.r2l);var T=w._input,k={};k[w._attr+".range"]=w.range,k[w._attr+".autorange"]=w.autorange,e.call("_storeDirectGUIEdit",d.layout,d._fullLayout._preGUI,k),T.range=w.range.slice(),T.autorange=w.autorange}var L=w._anchorAxis;if(L&&L.rangeslider){var M=L.rangeslider[w._name];M&&"auto"===M.rangemode&&(M.range=u(d,w)),L._input.rangeslider[w._name]=b.extendFlat({},M)}},findExtremes:function(d,w,_){_||(_={}),d._m||d.setScale();var T,k,L,M,O,P,S,E,R,B=[],H=[],V=w.length,Z=_.padded||!1,W=_.tozero&&("linear"===d.type||"-"===d.type),G="log"===d.type,X=!1,te=_.vpadLinearized||!1;function D(ne){if(Array.isArray(ne))return X=!0,function(oe){return Math.max(Number(ne[oe]||0),0)};var se=Math.max(Number(ne||0),0);return function(){return se}}var N=D((d._m>0?_.ppadplus:_.ppadminus)||_.ppad||0),U=D((d._m>0?_.ppadminus:_.ppadplus)||_.ppad||0),Q=D(_.vpadplus||_.vpad),j=D(_.vpadminus||_.vpad);if(!X){if(E=1/0,R=-1/0,G)for(T=0;T<V;T++)(k=w[T])<E&&k>0&&(E=k),k>R&&k<v&&(R=k);else for(T=0;T<V;T++)(k=w[T])<E&&k>-v&&(E=k),k>R&&k<v&&(R=k);w=[E,R],V=2}var J={tozero:W,extrapad:Z};function K(ne){m(L=w[ne])&&(P=N(ne),S=U(ne),te?(M=d.c2l(L)-j(ne),O=d.c2l(L)+Q(ne)):(E=L-j(ne),R=L+Q(ne),G&&E<R/10&&(E=R/10),M=d.c2l(E),O=d.c2l(R)),W&&(M=Math.min(0,M),O=Math.max(0,O)),h(M)&&c(B,M,S,J),h(O)&&f(H,O,P,J))}var re=Math.min(6,V);for(T=0;T<re;T++)K(T);for(T=V-1;T>=re;T--)K(T);return{min:B,max:H,opts:_}},concatExtremes:l}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("fast-isnumeric"),b=y("../../plots/plots"),v=y("../../registry"),e=y("../../lib"),n=e.strTranslate,t=y("../../lib/svg_text_utils"),a=y("../../components/titles"),r=y("../../components/color"),u=y("../../components/drawing"),s=y("./layout_attributes"),i=y("./clean_ticks"),l=y("../../constants/numerical"),c=l.ONEMAXYEAR,f=l.ONEAVGYEAR,g=l.ONEMINYEAR,h=l.ONEMAXQUARTER,o=l.ONEAVGQUARTER,x=l.ONEMINQUARTER,d=l.ONEMAXMONTH,w=l.ONEAVGMONTH,_=l.ONEMINMONTH,T=l.ONEWEEK,k=l.ONEDAY,L=k/2,M=l.ONEHOUR,O=l.ONEMIN,P=l.ONESEC,S=l.MINUS_SIGN,E=l.BADNUM,R={K:"zeroline"},B={K:"gridline",L:"path"},H={K:"tick",L:"path"},V={K:"tick",L:"text"},Z=y("../../constants/alignment"),W=Z.MID_SHIFT,G=Z.CAP_SHIFT,X=Z.LINE_SPACING,te=Z.OPPOSITE_SIDE,D=$.exports={};D.setConvert=y("./set_convert");var N=y("./axis_autotype"),U=y("./axis_ids"),Q=U.idSort,j=U.isLinked;D.id2name=U.id2name,D.name2id=U.name2id,D.cleanId=U.cleanId,D.list=U.list,D.listIds=U.listIds,D.getFromId=U.getFromId,D.getFromTrace=U.getFromTrace;var J=y("./autorange");function K(Fe){var He=1e-4*(Fe[1]-Fe[0]);return[Fe[0]-He,Fe[1]+He]}D.getAutoRange=J.getAutoRange,D.findExtremes=J.findExtremes,D.coerceRef=function(Fe,He,Oe,$e,ke,Le){var Pe=$e.charAt($e.length-1),Ce=Oe._fullLayout._subplots[Pe+"axis"],Xe=$e+"ref",at={};return ke||(ke=Ce[0]||("string"==typeof Le?Le:Le[0])),Le||(Le=ke),Ce=Ce.concat(Ce.map(function(pt){return pt+" domain"})),at[Xe]={valType:"enumerated",values:Ce.concat(Le?"string"==typeof Le?[Le]:Le:[]),dflt:ke},e.coerce(Fe,He,at,Xe)},D.getRefType=function(Fe){return void 0===Fe?Fe:"paper"===Fe?"paper":"pixel"===Fe?"pixel":/( domain)$/.test(Fe)?"domain":"range"},D.coercePosition=function(Fe,He,Oe,$e,ke,Le){var Pe,Ce;if("range"!==D.getRefType($e))Pe=e.ensureNumber,Ce=Oe(ke,Le);else{var Xe=D.getFromId(He,$e);Ce=Oe(ke,Le=Xe.fraction2r(Le)),Pe=Xe.cleanPos}Fe[ke]=Pe(Ce)},D.cleanPosition=function(Fe,He,Oe){return("paper"===Oe||"pixel"===Oe?e.ensureNumber:D.getFromId(He,Oe).cleanPos)(Fe)},D.redrawComponents=function(Fe,He){He=He||D.listIds(Fe);var Oe=Fe._fullLayout;function $e(ke,Le,Pe,Ce){for(var Xe=v.getComponentMethod(ke,Le),at={},pt=0;pt<He.length;pt++)for(var ut=Oe[D.id2name(He[pt])][Pe],St=0;St<ut.length;St++){var ot=ut[St];if(!at[ot]&&(Xe(Fe,ot),at[ot]=1,Ce))return}}$e("annotations","drawOne","_annIndices"),$e("shapes","drawOne","_shapeIndices"),$e("images","draw","_imgIndices",!0)};var re=D.getDataConversions=function(Fe,He,Oe,$e){var ke,Le="x"===Oe||"y"===Oe||"z"===Oe?Oe:$e;if(Array.isArray(Le)){if(ke={type:N($e,void 0,{autotypenumbers:Fe._fullLayout.autotypenumbers}),_categories:[]},D.setConvert(ke),"category"===ke.type)for(var Pe=0;Pe<$e.length;Pe++)ke.d2c($e[Pe])}else ke=D.getFromTrace(Fe,He,Le);return ke?{d2c:ke.d2c,c2d:ke.c2d}:"ids"===Le?{d2c:se,c2d:se}:{d2c:ne,c2d:ne}};function ne(Fe){return+Fe}function se(Fe){return String(Fe)}function oe(Fe){return+Fe.substring(1)}D.getDataToCoordFunc=function(Fe,He,Oe,$e){return re(Fe,He,Oe,$e).d2c},D.counterLetter=function(Fe){var He=Fe.charAt(0);return"x"===He?"y":"y"===He?"x":void 0},D.minDtick=function(Fe,He,Oe,$e){-1===["log","category","multicategory"].indexOf(Fe.type)&&$e?void 0===Fe._minDtick?(Fe._minDtick=He,Fe._forceTick0=Oe):Fe._minDtick&&((Fe._minDtick/He+1e-6)%1<2e-6&&((Oe-Fe._forceTick0)/He%1+1.000001)%1<2e-6?(Fe._minDtick=He,Fe._forceTick0=Oe):((He/Fe._minDtick+1e-6)%1>2e-6||((Oe-Fe._forceTick0)/Fe._minDtick%1+1.000001)%1>2e-6)&&(Fe._minDtick=0)):Fe._minDtick=0},D.saveRangeInitial=function(Fe,He){for(var Oe=D.list(Fe,"",!0),$e=!1,ke=0;ke<Oe.length;ke++){var Le=Oe[ke],Pe=void 0===Le._rangeInitial;(Pe&&!1===Le.autorange||He&&(Pe||Le.range[0]!==Le._rangeInitial[0]||Le.range[1]!==Le._rangeInitial[1]))&&(Le._rangeInitial=Le.range.slice(),$e=!0)}return $e},D.saveShowSpikeInitial=function(Fe,He){for(var Oe=D.list(Fe,"",!0),$e=!1,ke="on",Le=0;Le<Oe.length;Le++){var Pe=Oe[Le],Ce=void 0===Pe._showSpikeInitial;(Ce||He&&(Ce||Pe.showspikes!==Pe._showspikes))&&(Pe._showSpikeInitial=Pe.showspikes,$e=!0),"on"!==ke||Pe.showspikes||(ke="off")}return Fe._fullLayout._cartesianSpikesEnabled=ke,$e},D.autoBin=function(Fe,He,Oe,$e,ke,Le){var Pe,Ce=e.aggNums(Math.min,null,Fe),Xe=e.aggNums(Math.max,null,Fe);if("category"===He.type||"multicategory"===He.type)return{start:Ce-.5,end:Xe+.5,size:Math.max(1,Math.round(Le)||1),_dataSpan:Xe-Ce};if(ke||(ke=He.calendar),Pe="log"===He.type?{type:"linear",range:[Ce,Xe]}:{type:He.type,range:e.simpleMap([Ce,Xe],He.c2r,0,ke),calendar:ke},D.setConvert(Pe),Le=Le&&i.dtick(Le,Pe.type))Pe.dtick=Le,Pe.tick0=i.tick0(void 0,Pe.type,ke);else{var at;if(Oe)at=(Xe-Ce)/Oe;else{var pt=e.distinctVals(Fe),ut=Math.pow(10,Math.floor(Math.log(pt.minDiff)/Math.LN10)),St=ut*e.roundUp(pt.minDiff/ut,[.9,1.9,4.9,9.9],!0);at=Math.max(St,2*e.stdev(Fe)/Math.pow(Fe.length,$e?.25:.4)),m(at)||(at=1)}D.autoTicks(Pe,at)}var ot,Et=Pe.dtick,Lt=D.tickIncrement(D.tickFirst(Pe),Et,"reverse",ke);if("number"==typeof Et)ot=(Lt=function(Qe,mt,It,jt,Zt){var Re=0,lt=0,_t=0,Dt=0;function Vt(ir){return(1+100*(ir-Qe)/It.dtick)%100<2}for(var nr=0;nr<mt.length;nr++)mt[nr]%1==0?_t++:m(mt[nr])||Dt++,Vt(mt[nr])&&Re++,Vt(mt[nr]+It.dtick/2)&&lt++;var Gt=mt.length-Dt;if(_t===Gt&&"date"!==It.type)It.dtick<1?Qe=jt-.5*It.dtick:(Qe-=.5)+It.dtick<jt&&(Qe+=It.dtick);else if(lt<.1*Gt&&(Re>.3*Gt||Vt(jt)||Vt(Zt))){var Kt=It.dtick/2;Qe+=Qe+Kt<jt?Kt:-Kt}return Qe}(Lt,Fe,Pe,Ce,Xe))+(1+Math.floor((Xe-Lt)/Et))*Et;else for("M"===Pe.dtick.charAt(0)&&(Lt=function(Qe,mt,It,jt,Zt){var Re=e.findExactDates(mt,Zt);if(Re.exactDays>.8){var lt=Number(It.substr(1));Re.exactYears>.8&&lt%12==0?Qe=D.tickIncrement(Qe,"M6","reverse")+1.5*k:Re.exactMonths>.8?Qe=D.tickIncrement(Qe,"M1","reverse")+15.5*k:Qe-=L;var _t=D.tickIncrement(Qe,It);if(_t<=jt)return _t}return Qe}(Lt,Fe,Et,Ce,ke)),ot=Lt;ot<=Xe;)ot=D.tickIncrement(ot,Et,!1,ke);return{start:He.c2r(Lt,0,ke),end:He.c2r(ot,0,ke),size:Et,_dataSpan:Xe-Ce}},D.prepTicks=function(Fe,He){var Oe=e.simpleMap(Fe.range,Fe.r2l,void 0,void 0,He);if(Fe._dtickInit=Fe.dtick,Fe._tick0Init=Fe.tick0,"auto"===Fe.tickmode||!Fe.dtick){var $e,ke=Fe.nticks;ke||("category"===Fe.type||"multicategory"===Fe.type?($e=Fe.tickfont?e.bigFont(Fe.tickfont.size||12):15,ke=Fe._length/$e):($e="y"===Fe._id.charAt(0)?40:80,ke=e.constrain(Fe._length/$e,4,9)+1),"radialaxis"===Fe._name&&(ke*=2)),"array"===Fe.tickmode&&(ke*=100),Fe._roughDTick=Math.abs(Oe[1]-Oe[0])/ke,D.autoTicks(Fe,Fe._roughDTick),Fe._minDtick>0&&Fe.dtick<2*Fe._minDtick&&(Fe.dtick=Fe._minDtick,Fe.tick0=Fe.l2r(Fe._forceTick0))}"period"===Fe.ticklabelmode&&function(Le){var Pe;function Ce(){return!(m(Le.dtick)||"M"!==Le.dtick.charAt(0))}var Xe=Ce(),at=D.getTickFormat(Le);if(at){var pt=Le._dtickInit!==Le.dtick;/%[fLQsSMX]/.test(at)||(/%[HI]/.test(at)?(Pe=M,pt&&!Xe&&Le.dtick<M&&(Le.dtick=M)):/%p/.test(at)?(Pe=L,pt&&!Xe&&Le.dtick<L&&(Le.dtick=L)):/%[Aadejuwx]/.test(at)?(Pe=k,pt&&!Xe&&Le.dtick<k&&(Le.dtick=k)):/%[UVW]/.test(at)?(Pe=T,pt&&!Xe&&Le.dtick<T&&(Le.dtick=T)):/%[Bbm]/.test(at)?(Pe=w,pt&&(Xe?oe(Le.dtick)<1:Le.dtick<_)&&(Le.dtick="M1")):/%[q]/.test(at)?(Pe=o,pt&&(Xe?oe(Le.dtick)<3:Le.dtick<x)&&(Le.dtick="M3")):/%[Yy]/.test(at)&&(Pe=f,pt&&(Xe?oe(Le.dtick)<12:Le.dtick<g)&&(Le.dtick="M12")))}(Xe=Ce())&&Le.tick0===Le._dowTick0&&(Le.tick0=Le._rawTick0),Le._definedDelta=Pe}(Fe),Fe.tick0||(Fe.tick0="date"===Fe.type?"2000-01-01":0),"date"===Fe.type&&Fe.dtick<.1&&(Fe.dtick=.1),me(Fe)},D.calcTicks=function(Fe,He){D.prepTicks(Fe,He);var Oe=e.simpleMap(Fe.range,Fe.r2l,void 0,void 0,He);if("array"===Fe.tickmode)return function(nr){var Gt=nr.tickvals,Kt=nr.ticktext,ir=new Array(Gt.length),dr=K(e.simpleMap(nr.range,nr.r2l)),hr=Math.min(dr[0],dr[1]),cr=Math.max(dr[0],dr[1]),sr=0;Array.isArray(Kt)||(Kt=[]);var mr="category"===nr.type?nr.d2l_noadd:nr.d2l;"log"===nr.type&&"L"!==String(nr.dtick).charAt(0)&&(nr.dtick="L"+Math.pow(10,Math.floor(Math.min(nr.range[0],nr.range[1]))-1));for(var Ir=0;Ir<Gt.length;Ir++){var vr=mr(Gt[Ir]);vr>hr&&vr<cr&&(ir[sr]=void 0===Kt[Ir]?D.tickText(nr,vr):Te(nr,vr,String(Kt[Ir])),sr++)}return sr<Gt.length&&ir.splice(sr,Gt.length-sr),nr.rangebreaks&&(ir=ir.filter(function(Br){return nr.maskBreaks(Br.x)!==E})),ir}(Fe);var $e=K(Oe),ke=$e[0],Le=$e[1],Pe=Oe[1]<Oe[0],Ce=Math.min(Oe[0],Oe[1]),Xe=Math.max(Oe[0],Oe[1]),at="log"===Fe.type&&!(m(Fe.dtick)||"L"===Fe.dtick.charAt(0)),pt="period"===Fe.ticklabelmode;if(Fe._tmin=D.tickFirst(Fe,He),Fe._tmin<ke!==Pe)return[];"category"!==Fe.type&&"multicategory"!==Fe.type||(Le=Pe?Math.max(-.5,Le):Math.min(Fe._categories.length-.5,Le));var ut=Fe._tmin;Fe.rangebreaks&&Fe._tick0Init!==Fe.tick0&&(ut=bt(ut,Fe),Pe||(ut=D.tickIncrement(ut,Fe.dtick,!Pe,Fe.calendar))),pt&&(ut=D.tickIncrement(ut,Fe.dtick,!Pe,Fe.calendar));for(var St,ot=Math.max(1e3,Fe._length||0),Et=[],Lt=null;Pe?ut>=Le:ut<=Le;ut=D.tickIncrement(ut,Fe.dtick,Pe,Fe.calendar)){if(Fe.rangebreaks&&!Pe){if(ut<ke)continue;if(Fe.maskBreaks(ut)===E&&bt(ut,Fe)>=Xe)break}if(Et.length>ot||ut===Lt)break;Lt=ut;var Qe=!1;at&&ut!==(0|ut)&&(Qe=!0),Et.push({minor:Qe,value:ut})}if(pt&&function(nr,Gt,Kt){for(var ir=0;ir<nr.length;ir++){var dr=nr[ir].value,hr=ir,cr=ir+1;ir<nr.length-1?(hr=ir,cr=ir+1):ir>0?(hr=ir-1,cr=ir):(hr=ir,cr=ir);var sr,vr=Math.abs(nr[cr].value-nr[hr].value),Br=Kt||vr,Jr=0;Br>=g?Jr=vr>=g&&vr<=c?vr:f:Kt===o&&Br>=x?Jr=vr>=x&&vr<=h?vr:o:Br>=_?Jr=vr>=_&&vr<=d?vr:w:Kt===T&&Br>=T?Jr=T:Br>=k?Jr=k:Kt===L&&Br>=L?Jr=L:Kt===M&&Br>=M&&(Jr=M),Jr>=vr&&(Jr=vr,sr=!0);var ln=dr+Jr;if(Gt.rangebreaks&&Jr>0){for(var En=0,Cn=0;Cn<84;Cn++){var An=(Cn+.5)/84;Gt.maskBreaks(dr*(1-An)+An*ln)!==E&&En++}(Jr*=En/84)||(nr[ir].drop=!0),sr&&vr>T&&(Jr=vr)}(Jr>0||0===ir)&&(nr[ir].periodX=dr+Jr/2)}}(Et,Fe,Fe._definedDelta),Fe.rangebreaks){var mt="y"===Fe._id.charAt(0),It=1;"auto"===Fe.tickmode&&(It=Fe.tickfont?Fe.tickfont.size:12);var jt=NaN;for(St=Et.length-1;St>-1;St--)if(Et[St].drop)Et.splice(St,1);else{Et[St].value=bt(Et[St].value,Fe);var Zt=Fe.c2p(Et[St].value);(mt?jt>Zt-It:jt<Zt+It)?Et.splice(Pe?St+1:St,1):jt=Zt}}et(Fe)&&360===Math.abs(Oe[1]-Oe[0])&&Et.pop(),Fe._tmax=(Et[Et.length-1]||{}).value,Fe._prevDateHead="",Fe._inCalcTicks=!0;var Re,lt,_t=[];for(St=0;St<Et.length;St++)Re=D.tickText(Fe,Et[St].value,!1,Et[St].minor),void 0!==(lt=Et[St].periodX)&&(Re.periodX=lt,(lt>Xe||lt<Ce)&&(lt>Xe&&(Re.periodX=Xe),lt<Ce&&(Re.periodX=Ce),Re.text=" ",Fe._prevDateHead="")),_t.push(Re);return Fe._inCalcTicks=!1,_t};var pe=[2,5,10],ce=[1,2,3,6,12],ge=[1,2,5,10,15,30],xe=[1,2,3,7,14],we=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],be=[-.301,0,.301,.699,1],Se=[15,30,45,90,180];function fe(Fe,He,Oe){return He*e.roundUp(Fe/He,Oe)}function me(Fe){var He=Fe.dtick;if(Fe._tickexponent=0,m(He)||"string"==typeof He||(He=1),"category"!==Fe.type&&"multicategory"!==Fe.type||(Fe._tickround=null),"date"===Fe.type){var Oe=Fe.r2l(Fe.tick0),$e=Fe.l2r(Oe).replace(/(^-|i)/g,""),ke=$e.length;if("M"===String(He).charAt(0))Fe._tickround=ke>10||"01-01"!==$e.substr(5)?"d":+He.substr(1)%12==0?"y":"m";else if(He>=k&&ke<=10||He>=15*k)Fe._tickround="d";else if(He>=O&&ke<=16||He>=M)Fe._tickround="M";else if(He>=P&&ke<=19||He>=O)Fe._tickround="S";else{var Le=Fe.l2r(Oe+He).replace(/^-/,"").length;Fe._tickround=Math.max(ke,Le)-20,Fe._tickround<0&&(Fe._tickround=4)}}else if(m(He)||"L"===He.charAt(0)){var Pe=Fe.range.map(Fe.r2d||Number);m(He)||(He=Number(He.substr(1))),Fe._tickround=2-Math.floor(Math.log(He)/Math.LN10+.01);var Ce=Math.max(Math.abs(Pe[0]),Math.abs(Pe[1])),Xe=Math.floor(Math.log(Ce)/Math.LN10+.01),at=void 0===Fe.minexponent?3:Fe.minexponent;Math.abs(Xe)>at&&(Fe._tickexponent=Me(Fe.exponentformat)&&!Ie(Xe)?3*Math.round((Xe-1)/3):Xe)}else Fe._tickround=null}function Te(Fe,He,Oe){var $e=Fe.tickfont||{};return{x:He,dx:0,dy:0,text:Oe||"",fontSize:$e.size,font:$e.family,fontColor:$e.color}}D.autoTicks=function(Fe,He){var Oe;function $e(pt){return Math.pow(pt,Math.floor(Math.log(He)/Math.LN10))}if("date"===Fe.type){Fe.tick0=e.dateTick0(Fe.calendar,0);var ke=2*He;if(ke>f)He/=f,Oe=$e(10),Fe.dtick="M"+12*fe(He,Oe,pe);else if(ke>w)Fe.dtick="M"+fe(He/=w,1,ce);else if(ke>k){Fe.dtick=fe(He,k,Fe._hasDayOfWeekBreaks?[1,2,7,14]:xe);var Le=D.getTickFormat(Fe),Pe="period"===Fe.ticklabelmode;Pe&&(Fe._rawTick0=Fe.tick0),Fe.tick0=/%[uVW]/.test(Le)?e.dateTick0(Fe.calendar,2):e.dateTick0(Fe.calendar,1),Pe&&(Fe._dowTick0=Fe.tick0)}else ke>M?Fe.dtick=fe(He,M,ce):ke>O?Fe.dtick=fe(He,O,ge):ke>P?Fe.dtick=fe(He,P,ge):(Oe=$e(10),Fe.dtick=fe(He,Oe,pe))}else if("log"===Fe.type){Fe.tick0=0;var Ce=e.simpleMap(Fe.range,Fe.r2l);if(He>.7)Fe.dtick=Math.ceil(He);else if(Math.abs(Ce[1]-Ce[0])<1){var Xe=1.5*Math.abs((Ce[1]-Ce[0])/He);He=Math.abs(Math.pow(10,Ce[1])-Math.pow(10,Ce[0]))/Xe,Oe=$e(10),Fe.dtick="L"+fe(He,Oe,pe)}else Fe.dtick=He>.3?"D2":"D1"}else"category"===Fe.type||"multicategory"===Fe.type?(Fe.tick0=0,Fe.dtick=Math.ceil(Math.max(He,1))):et(Fe)?(Fe.tick0=0,Fe.dtick=fe(He,Oe=1,Se)):(Fe.tick0=0,Oe=$e(10),Fe.dtick=fe(He,Oe,pe));if(0===Fe.dtick&&(Fe.dtick=1),!m(Fe.dtick)&&"string"!=typeof Fe.dtick){var at=Fe.dtick;throw Fe.dtick=1,"ax.dtick error: "+String(at)}},D.tickIncrement=function(Fe,He,Oe,$e){var ke=Oe?-1:1;if(m(He))return e.increment(Fe,ke*He);var Le=He.charAt(0),Pe=ke*Number(He.substr(1));if("M"===Le)return e.incrementMonth(Fe,Pe,$e);if("L"===Le)return Math.log(Math.pow(10,Fe)+Pe)/Math.LN10;if("D"===Le){var Ce="D2"===He?be:we,Xe=Fe+.01*ke,at=e.roundUp(e.mod(Xe,1),Ce,Oe);return Math.floor(Xe)+Math.log(p.round(Math.pow(10,at),1))/Math.LN10}throw"unrecognized dtick "+String(He)},D.tickFirst=function(Fe,He){var Oe=Fe.r2l||Number,$e=e.simpleMap(Fe.range,Oe,void 0,void 0,He),ke=$e[1]<$e[0],Le=ke?Math.floor:Math.ceil,Pe=K($e)[0],Ce=Fe.dtick,Xe=Oe(Fe.tick0);if(m(Ce)){var at=Le((Pe-Xe)/Ce)*Ce+Xe;return"category"!==Fe.type&&"multicategory"!==Fe.type||(at=e.constrain(at,0,Fe._categories.length-1)),at}var pt=Ce.charAt(0),ut=Number(Ce.substr(1));if("M"===pt){for(var St,ot,Et,Lt=0,Qe=Xe;Lt<10;){if(((St=D.tickIncrement(Qe,Ce,ke,Fe.calendar))-Pe)*(Qe-Pe)<=0)return ke?Math.min(Qe,St):Math.max(Qe,St);ot=(Pe-(Qe+St)/2)/(St-Qe),Et=pt+(Math.abs(Math.round(ot))||1)*ut,Qe=D.tickIncrement(Qe,Et,ot<0?!ke:ke,Fe.calendar),Lt++}return e.error("tickFirst did not converge",Fe),Qe}if("L"===pt)return Math.log(Le((Math.pow(10,Pe)-Xe)/ut)*ut+Xe)/Math.LN10;if("D"===pt){var mt="D2"===Ce?be:we,It=e.roundUp(e.mod(Pe,1),mt,ke);return Math.floor(Pe)+Math.log(p.round(Math.pow(10,It),1))/Math.LN10}throw"unrecognized dtick "+String(Ce)},D.tickText=function(Fe,He,Oe,$e){var ke,Le=Te(Fe,He),Pe="array"===Fe.tickmode,Ce=Oe||Pe,Xe=Fe.type,at="category"===Xe?Fe.d2l_noadd:Fe.d2l;if(Pe&&Array.isArray(Fe.ticktext)){var pt=e.simpleMap(Fe.range,Fe.r2l),ut=(Math.abs(pt[1]-pt[0])-(Fe._lBreaks||0))/1e4;for(ke=0;ke<Fe.ticktext.length&&!(Math.abs(He-at(Fe.tickvals[ke]))<ut);ke++);if(ke<Fe.ticktext.length)return Le.text=String(Fe.ticktext[ke]),Le}function St(Lt){return void 0===Lt||(Oe?"none"===Lt:"all"!==Lt&&He!=={first:Fe._tmin,last:Fe._tmax}[Lt])}var Qe,mt,ot=Oe?"never":"none"!==Fe.exponentformat&&St(Fe.showexponent)?"hide":"";if("date"===Xe?function(Lt,Qe,mt,It){var jt=Lt._tickround,Zt=mt&&Lt.hoverformat||D.getTickFormat(Lt);It&&(jt=m(jt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[jt]);var Re,lt=e.formatDate(Qe.x,Zt,jt,Lt._dateFormat,Lt.calendar,Lt._extraFormat),_t=lt.indexOf("\n");if(-1!==_t&&(Re=lt.substr(_t+1),lt=lt.substr(0,_t)),It&&("00:00:00"===lt||"00:00"===lt?(lt=Re,Re=""):8===lt.length&&(lt=lt.replace(/:00$/,""))),Re)if(mt)"d"===jt?lt+=", "+Re:lt=Re+(lt?", "+lt:"");else if(Lt._inCalcTicks&&Lt._prevDateHead===Re){var Dt=Rt(Lt),Vt=Lt._trueSide||Lt.side;(!Dt&&"top"===Vt||Dt&&"bottom"===Vt)&&(lt+="<br> ")}else Lt._prevDateHead=Re,lt+="<br>"+Re;Qe.text=lt}(Fe,Le,Oe,Ce):"log"===Xe?function(Lt,Qe,mt,It,jt){var Zt=Lt.dtick,Re=Qe.x,lt=Lt.tickformat,_t="string"==typeof Zt&&Zt.charAt(0);if("never"===jt&&(jt=""),It&&"L"!==_t&&(Zt="L3",_t="L"),lt||"L"===_t)Qe.text=ze(Math.pow(10,Re),Lt,jt,It);else if(m(Zt)||"D"===_t&&e.mod(Re+.01,1)<.1){var Dt=Math.round(Re),Vt=Math.abs(Dt),nr=Lt.exponentformat;"power"===nr||Me(nr)&&Ie(Dt)?(Qe.text=0===Dt?1:1===Dt?"10":"10<sup>"+(Dt>1?"":S)+Vt+"</sup>",Qe.fontSize*=1.25):("e"===nr||"E"===nr)&&Vt>2?Qe.text="1"+nr+(Dt>0?"+":S)+Vt:(Qe.text=ze(Math.pow(10,Re),Lt,"","fakehover"),"D1"===Zt&&"y"===Lt._id.charAt(0)&&(Qe.dy-=Qe.fontSize/6))}else{if("D"!==_t)throw"unrecognized dtick "+String(Zt);Qe.text=String(Math.round(Math.pow(10,e.mod(Re,1)))),Qe.fontSize*=.75}if("D1"===Lt.dtick){var Gt=String(Qe.text).charAt(0);"0"!==Gt&&"1"!==Gt||("y"===Lt._id.charAt(0)?Qe.dx-=Qe.fontSize/4:(Qe.dy+=Qe.fontSize/2,Qe.dx+=(Lt.range[1]>Lt.range[0]?1:-1)*Qe.fontSize*(Re<0?.5:.25)))}}(Fe,Le,0,Ce,ot):"category"===Xe?(Qe=Le,void 0===(mt=Fe._categories[Math.round(Qe.x)])&&(mt=""),Qe.text=String(mt)):"multicategory"===Xe?function(Lt,Qe,mt){var It=Math.round(Qe.x),jt=Lt._categories[It]||[],Zt=void 0===jt[1]?"":String(jt[1]),Re=void 0===jt[0]?"":String(jt[0]);mt?Qe.text=Re+" - "+Zt:(Qe.text=Zt,Qe.text2=Re)}(Fe,Le,Oe):et(Fe)?function(Lt,Qe,mt,It,jt){if("radians"!==Lt.thetaunit||mt)Qe.text=ze(Qe.x,Lt,jt,It);else{var Zt=Qe.x/180;if(0===Zt)Qe.text="0";else{var Re=function(_t){function Dt(Kt,ir){return Math.abs(Kt-ir)<=1e-6}var Vt=function(Kt){for(var ir=1;!Dt(Math.round(Kt*ir)/ir,Kt);)ir*=10;return ir}(_t),nr=_t*Vt,Gt=Math.abs(function Kt(ir,dr){return Dt(dr,0)?ir:Kt(dr,ir%dr)}(nr,Vt));return[Math.round(nr/Gt),Math.round(Vt/Gt)]}(Zt);if(Re[1]>=100)Qe.text=ze(e.deg2rad(Qe.x),Lt,jt,It);else{var lt=Qe.x<0;Qe.text=1===Re[1]?1===Re[0]?"\u03c0":Re[0]+"\u03c0":["<sup>",Re[0],"</sup>","\u2044","<sub>",Re[1],"</sub>","\u03c0"].join(""),lt&&(Qe.text=S+Qe.text)}}}}(Fe,Le,Oe,Ce,ot):function(Lt,Qe,mt,It,jt){"never"===jt?jt="":"all"===Lt.showexponent&&Math.abs(Qe.x/Lt.dtick)<1e-6&&(jt="hide"),Qe.text=ze(Qe.x,Lt,jt,It)}(Fe,Le,0,Ce,ot),$e||(Fe.tickprefix&&!St(Fe.showtickprefix)&&(Le.text=Fe.tickprefix+Le.text),Fe.ticksuffix&&!St(Fe.showticksuffix)&&(Le.text+=Fe.ticksuffix)),"boundaries"===Fe.tickson||Fe.showdividers){var Et=function(Lt){var Qe=Fe.l2p(Lt);return Qe>=0&&Qe<=Fe._length?Lt:null};Le.xbnd=[Et(Le.x-.5),Et(Le.x+Fe.dtick-.5)]}return Le},D.hoverLabelText=function(Fe,He,Oe){Oe&&(Fe=e.extendFlat({},Fe,{hoverformat:Oe}));var $e=Array.isArray(He)?He[0]:He,ke=Array.isArray(He)?He[1]:void 0;if(void 0!==ke&&ke!==$e)return D.hoverLabelText(Fe,$e,Oe)+" - "+D.hoverLabelText(Fe,ke,Oe);var Le="log"===Fe.type&&$e<=0,Pe=D.tickText(Fe,Fe.c2l(Le?-$e:$e),"hover").text;return Le?0===$e?"0":S+Pe:Pe};var _e=["f","p","n","\u03bc","m","","k","M","G","T"];function Me(Fe){return"SI"===Fe||"B"===Fe}function Ie(Fe){return Fe>14||Fe<-15}function ze(Fe,He,Oe,$e){var ke=Fe<0,Le=He._tickround,Pe=Oe||He.exponentformat||"B",Ce=He._tickexponent,Xe=D.getTickFormat(He),at=He.separatethousands;if($e){var pt={exponentformat:Pe,minexponent:He.minexponent,dtick:"none"===He.showexponent?He.dtick:m(Fe)&&Math.abs(Fe)||1,range:"none"===He.showexponent?He.range.map(He.r2d):[0,Fe||1]};me(pt),Le=(Number(pt._tickround)||0)+4,Ce=pt._tickexponent,He.hoverformat&&(Xe=He.hoverformat)}if(Xe)return He._numFormat(Xe)(Fe).replace(/-/g,S);var ut,St=Math.pow(10,-Le)/2;if("none"===Pe&&(Ce=0),(Fe=Math.abs(Fe))<St)Fe="0",ke=!1;else{if(Fe+=St,Ce&&(Fe*=Math.pow(10,-Ce),Le+=Ce),0===Le)Fe=String(Math.floor(Fe));else if(Le<0){Fe=(Fe=String(Math.round(Fe))).substr(0,Fe.length+Le);for(var ot=Le;ot<0;ot++)Fe+="0"}else{var Et=(Fe=String(Fe)).indexOf(".")+1;Et&&(Fe=Fe.substr(0,Et+Le).replace(/\.?0+$/,""))}Fe=e.numSeparate(Fe,He._separators,at)}return Ce&&"hide"!==Pe&&(Me(Pe)&&Ie(Ce)&&(Pe="power"),ut=Ce<0?S+-Ce:"power"!==Pe?"+"+Ce:String(Ce),"e"===Pe||"E"===Pe?Fe+=Pe+ut:"power"===Pe?Fe+="\xd710<sup>"+ut+"</sup>":"B"===Pe&&9===Ce?Fe+="B":Me(Pe)&&(Fe+=_e[Ce/3+5])),ke?S+Fe:Fe}function Ve(Fe,He){for(var Oe=[],$e={},ke=0;ke<He.length;ke++){var Le=He[ke];$e[Le.text2]?$e[Le.text2].push(Le.x):$e[Le.text2]=[Le.x]}for(var Pe in $e)Oe.push(Te(Fe,e.interp($e[Pe],.5),Pe));return Oe}function Je(Fe){return void 0!==Fe.periodX?Fe.periodX:Fe.x}function De(Fe){return[Fe.text,Fe.x,Fe.axInfo,Fe.font,Fe.fontSize,Fe.fontColor].join("_")}function Be(Fe){var He=Fe.title.font.size,Oe=(Fe.title.text.match(t.BR_TAG_ALL)||[]).length;return Fe.title.hasOwnProperty("standoff")?Oe?He*(G+Oe*X):He*G:Oe?He*(Oe+1)*X:He}function Ze(Fe,He){var Oe=Fe.l2p(He);return Oe>1&&Oe<Fe._length-1}function Ye(Fe){var He=p.select(Fe),Oe=He.select(".text-math-group");return Oe.empty()?He.select("text"):Oe}function tt(Fe){return Fe._id+".automargin"}function st(Fe){return tt(Fe)+".mirror"}function vt(Fe){return Fe._id+".rangeslider"}function Pt(Fe,He){for(var Oe=0;Oe<He.length;Oe++)-1===Fe.indexOf(He[Oe])&&Fe.push(He[Oe])}function Mt(Fe,He,Oe){var $e,ke,Le=[],Pe=[],Ce=Fe.layout;for($e=0;$e<He.length;$e++)Le.push(D.getFromId(Fe,He[$e]));for($e=0;$e<Oe.length;$e++)Pe.push(D.getFromId(Fe,Oe[$e]));var Xe=Object.keys(s),at=["anchor","domain","overlaying","position","side","tickangle","editType"],pt=["linear","log"];for($e=0;$e<Xe.length;$e++){var ut=Xe[$e],St=Le[0][ut],ot=Pe[0][ut],Et=!0,Lt=!1,Qe=!1;if("_"!==ut.charAt(0)&&"function"!=typeof St&&-1===at.indexOf(ut)){for(ke=1;ke<Le.length&&Et;ke++){var mt=Le[ke][ut];"type"===ut&&-1!==pt.indexOf(St)&&-1!==pt.indexOf(mt)&&St!==mt?Lt=!0:mt!==St&&(Et=!1)}for(ke=1;ke<Pe.length&&Et;ke++){var It=Pe[ke][ut];"type"===ut&&-1!==pt.indexOf(ot)&&-1!==pt.indexOf(It)&&ot!==It?Qe=!0:Pe[ke][ut]!==ot&&(Et=!1)}Et&&(Lt&&(Ce[Le[0]._name].type="linear"),Qe&&(Ce[Pe[0]._name].type="linear"),rt(Ce,ut,Le,Pe,Fe._fullLayout._dfltTitle))}}for($e=0;$e<Fe._fullLayout.annotations.length;$e++){var jt=Fe._fullLayout.annotations[$e];-1!==He.indexOf(jt.xref)&&-1!==Oe.indexOf(jt.yref)&&e.swapAttrs(Ce.annotations[$e],["?"])}}function rt(Fe,He,Oe,$e,ke){var Le,Pe=e.nestedProperty,Ce=Pe(Fe[Oe[0]._name],He).get(),Xe=Pe(Fe[$e[0]._name],He).get();for("title"===He&&(Ce&&Ce.text===ke.x&&(Ce.text=ke.y),Xe&&Xe.text===ke.y&&(Xe.text=ke.x)),Le=0;Le<Oe.length;Le++)Pe(Fe,Oe[Le]._name+"."+He).set(Xe);for(Le=0;Le<$e.length;Le++)Pe(Fe,$e[Le]._name+"."+He).set(Ce)}function et(Fe){return"angularaxis"===Fe._id}function bt(Fe,He){for(var Oe=He._rangebreaks.length,$e=0;$e<Oe;$e++){var ke=He._rangebreaks[$e];if(Fe>=ke.min&&Fe<ke.max)return ke.max}return Fe}function Rt(Fe){return-1!==(Fe.ticklabelposition||"").indexOf("inside")}function Yt(Fe,He){Rt(Fe._anchorAxis||{})&&Fe._hideCounterAxisInsideTickLabels&&Fe._hideCounterAxisInsideTickLabels(He)}D.getTickFormat=function(Fe){var He,Oe,$e,ke,Le,Pe,Ce,Xe,St,ot,Et,Lt,Qe,mt;function at(St){return"string"!=typeof St?St:Number(St.replace("M",""))*w}function pt(St,ot){var Et=["L","D"];if(typeof St==typeof ot){if("number"==typeof St)return St-ot;var Lt=Et.indexOf(St.charAt(0)),Qe=Et.indexOf(ot.charAt(0));return Lt===Qe?Number(St.replace(/(L|D)/g,""))-Number(ot.replace(/(L|D)/g,"")):Lt-Qe}return"number"==typeof St?1:-1}if(Fe.tickformatstops&&Fe.tickformatstops.length>0)switch(Fe.type){case"date":case"linear":for(He=0;He<Fe.tickformatstops.length;He++)if(($e=Fe.tickformatstops[He]).enabled&&(ke=Fe.dtick,Pe=void 0,Pe=at||function(St){return St},Xe=(Le=$e.dtickrange)[1],(!(Ce=Le[0])&&"number"!=typeof Ce||Pe(Ce)<=Pe(ke))&&(!Xe&&"number"!=typeof Xe||Pe(Xe)>=Pe(ke)))){Oe=$e;break}break;case"log":for(He=0;He<Fe.tickformatstops.length;He++)if(($e=Fe.tickformatstops[He]).enabled&&(void 0,void 0,void 0,void 0,Et=null===(ot=$e.dtickrange)[0],Lt=null===ot[1],Qe=pt(St=Fe.dtick,ot[0])>=0,mt=pt(St,ot[1])<=0,(Et||Qe)&&(Lt||mt))){Oe=$e;break}}return Oe?Oe.value:Fe.tickformat},D.getSubplots=function(Fe,He){var Oe=Fe._fullLayout._subplots,$e=Oe.cartesian.concat(Oe.gl2d||[]),ke=He?D.findSubplotsWithAxis($e,He):$e;return ke.sort(function(Le,Pe){var Ce=Le.substr(1).split("y"),Xe=Pe.substr(1).split("y");return Ce[0]===Xe[0]?+Ce[1]-+Xe[1]:+Ce[0]-+Xe[0]}),ke},D.findSubplotsWithAxis=function(Fe,He){for(var Oe=new RegExp("x"===He._id.charAt(0)?"^"+He._id+"y":He._id+"$"),$e=[],ke=0;ke<Fe.length;ke++){var Le=Fe[ke];Oe.test(Le)&&$e.push(Le)}return $e},D.makeClipPaths=function(Fe){var He=Fe._fullLayout;if(!He._hasOnlyLargeSploms){var Oe,$e,ke={_offset:0,_length:He.width,_id:""},Le={_offset:0,_length:He.height,_id:""},Pe=D.list(Fe,"x",!0),Ce=D.list(Fe,"y",!0),Xe=[];for(Oe=0;Oe<Pe.length;Oe++)for(Xe.push({x:Pe[Oe],y:Le}),$e=0;$e<Ce.length;$e++)0===Oe&&Xe.push({x:ke,y:Ce[$e]}),Xe.push({x:Pe[Oe],y:Ce[$e]});var at=He._clips.selectAll(".axesclip").data(Xe,function(pt){return pt.x._id+pt.y._id});at.enter().append("clipPath").classed("axesclip",!0).attr("id",function(pt){return"clip"+He._uid+pt.x._id+pt.y._id}).append("rect"),at.exit().remove(),at.each(function(pt){p.select(this).select("rect").attr({x:pt.x._offset||0,y:pt.y._offset||0,width:pt.x._length||1,height:pt.y._length||1})})}},D.draw=function(Fe,He,Oe){var $e=Fe._fullLayout;"redraw"===He&&$e._paper.selectAll("g.subplot").each(function(Le){var Ce=$e._plots[Le[0]];if(Ce){var Xe=Ce.xaxis,at=Ce.yaxis;Ce.xaxislayer.selectAll("."+Xe._id+"tick").remove(),Ce.yaxislayer.selectAll("."+at._id+"tick").remove(),Ce.xaxislayer.selectAll("."+Xe._id+"tick2").remove(),Ce.yaxislayer.selectAll("."+at._id+"tick2").remove(),Ce.xaxislayer.selectAll("."+Xe._id+"divider").remove(),Ce.yaxislayer.selectAll("."+at._id+"divider").remove(),Ce.gridlayer&&Ce.gridlayer.selectAll("path").remove(),Ce.zerolinelayer&&Ce.zerolinelayer.selectAll("path").remove(),$e._infolayer.select(".g-"+Xe._id+"title").remove(),$e._infolayer.select(".g-"+at._id+"title").remove()}});var ke=He&&"redraw"!==He?He:D.listIds(Fe);return e.syncOrAsync(ke.map(function(Le){return function(){if(Le){var Pe=D.getFromId(Fe,Le),Ce=D.drawOne(Fe,Pe,Oe);return Pe._r=Pe.range.slice(),Pe._rl=e.simpleMap(Pe._r,Pe.r2l),Ce}}}))},D.drawOne=function(Fe,He,Oe){var $e,ke,Le;Oe=Oe||{},He.setScale();var Pe=Fe._fullLayout,Ce=He._id,Xe=Ce.charAt(0),at=D.counterLetter(Ce),pt=Pe._plots[He._mainSubplot];if(pt){var ut=pt[Xe+"axislayer"],St=He._mainLinePosition,ot=He._mainMirrorPosition,Et=He._vals=D.calcTicks(He),Lt=[He.mirror,St,ot].join("_");for($e=0;$e<Et.length;$e++)Et[$e].axInfo=Lt;He._selections={},He._tickAngles&&(He._prevTickAngles=He._tickAngles),He._tickAngles={},He._depth=null;var Qe={};if(He.visible){var mt,It,jt=D.makeTransTickFn(He),Zt=D.makeTransTickLabelFn(He),Re="inside"===He.ticks,lt="outside"===He.ticks;if("boundaries"===He.tickson){var _t=function(Rr,Lr){var Qr,On=[],zr=function(sn,Mn){var Tn=sn.xbnd[Mn];null!==Tn&&On.push(e.extendFlat({},sn,{x:Tn}))};if(Lr.length){for(Qr=0;Qr<Lr.length;Qr++)zr(Lr[Qr],0);zr(Lr[Qr-1],1)}return On}(0,Et);It=D.clipEnds(He,_t),mt=Re?It:_t}else It=D.clipEnds(He,Et),mt=Re&&"period"!==He.ticklabelmode?It:Et;var Dt=He._gridVals=It,Vt=function(Rr,Lr){var Qr,On,zr=[],sn=Lr.length&&Lr[Lr.length-1].x<Lr[0].x,Mn=function(Rn,$t){var Ct=Rn.xbnd[$t];null!==Ct&&zr.push(e.extendFlat({},Rn,{x:Ct}))};if(Rr.showdividers&&Lr.length){for(Qr=0;Qr<Lr.length;Qr++){var Tn=Lr[Qr];Tn.text2!==On&&Mn(Tn,sn?1:0),On=Tn.text2}Mn(Lr[Qr-1],sn?0:1)}return zr}(He,Et);if(!Pe._hasOnlyLargeSploms){var nr=He._subplotsWith,Gt={};for($e=0;$e<nr.length;$e++){var Kt=(Le=Pe._plots[ke=nr[$e]])[at+"axis"],ir=Kt._mainAxis._id;if(!Gt[ir]){Gt[ir]=1;var dr="x"===Xe?"M0,"+Kt._offset+"v"+Kt._length:"M"+Kt._offset+",0h"+Kt._length;D.drawGrid(Fe,He,{vals:Dt,counterAxis:Kt,layer:Le.gridlayer.select("."+Ce),path:dr,transFn:jt}),D.drawZeroLine(Fe,He,{counterAxis:Kt,layer:Le.zerolinelayer,path:dr,transFn:jt})}}}var hr=D.getTickSigns(He),cr=[];if(He.ticks){var sr,mr,Ir,vr=D.makeTickPath(He,St,hr[2]);if(He._anchorAxis&&He.mirror&&!0!==He.mirror?(sr=D.makeTickPath(He,ot,hr[3]),mr=vr+sr):(sr="",mr=vr),He.showdividers&&lt&&"boundaries"===He.tickson){var Br={};for($e=0;$e<Vt.length;$e++)Br[Vt[$e].x]=1;Ir=function(Rr){return Br[Rr.x]?sr:mr}}else Ir=mr;D.drawTicks(Fe,He,{vals:mt,layer:ut,path:Ir,transFn:jt}),"allticks"===He.mirror&&(cr=Object.keys(He._linepositions||{}))}for($e=0;$e<cr.length;$e++){Le=Pe._plots[ke=cr[$e]];var Jr=He._linepositions[ke]||[],ln=D.makeTickPath(He,Jr[0],hr[0])+D.makeTickPath(He,Jr[1],hr[1]);D.drawTicks(Fe,He,{vals:mt,layer:Le[Xe+"axislayer"],path:ln,transFn:jt})}var En=[];if(En.push(function(){return D.drawLabels(Fe,He,{vals:Et,layer:ut,plotinfo:Le,transFn:Zt,labelFns:D.makeLabelFns(He,St)})}),"multicategory"===He.type){var Cn={x:2,y:10}[Xe];En.push(function(){var Rr={x:"height",y:"width"}[Xe],Lr=$r()[Rr]+Cn+(He._tickAngles[Ce+"tick"]?He.tickfont.size*X:0);return D.drawLabels(Fe,He,{vals:Ve(He,Et),layer:ut,cls:Ce+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:jt,labelFns:D.makeLabelFns(He,St+Lr*hr[4])})}),En.push(function(){return He._depth=hr[4]*($r("tick2")[He.side]-St),Rr=Fe,Lr=He,zr=(Qr={vals:Vt,layer:ut,path:D.makeTickPath(He,St,hr[4],He._depth),transFn:jt}).vals,(sn=Qr.layer.selectAll("path."+(On=Lr._id+"divider")).data(zr,De)).exit().remove(),sn.enter().insert("path",":first-child").classed(On,1).classed("crisp",1).call(r.stroke,Lr.dividercolor).style("stroke-width",u.crispRound(Rr,Lr.dividerwidth,1)+"px"),void sn.attr("transform",Qr.transFn).attr("d",Qr.path);var Rr,Lr,Qr,On,zr,sn})}else He.title.hasOwnProperty("standoff")&&En.push(function(){He._depth=hr[4]*($r()[He.side]-St)});var An=v.getComponentMethod("rangeslider","isVisible")(He);return En.push(function(){var Rr,Lr,Qr,On,zr=He.side.charAt(0),sn=te[He.side].charAt(0),Mn=D.getPxPosition(Fe,He),Tn=lt?He.ticklen:0;if((He.automargin||An)&&("multicategory"===He.type?Rr=$r("tick2"):(Rr=$r(),"x"===Xe&&"b"===zr&&(He._depth=Math.max(Rr.width>0?Rr.bottom-Mn:0,Tn)))),He.automargin){Lr={x:0,y:0,r:0,l:0,t:0,b:0};var Rn=[0,1];if("x"===Xe){if("b"===zr?Lr[zr]=He._depth:(Lr[zr]=He._depth=Math.max(Rr.width>0?Mn-Rr.top:0,Tn),Rn.reverse()),Rr.width>0){var $t=Rr.right-(He._offset+He._length);$t>0&&(Lr.xr=1,Lr.r=$t);var Ct=He._offset-Rr.left;Ct>0&&(Lr.xl=0,Lr.l=Ct)}}else if("l"===zr?Lr[zr]=He._depth=Math.max(Rr.height>0?Mn-Rr.left:0,Tn):(Lr[zr]=He._depth=Math.max(Rr.height>0?Rr.right-Mn:0,Tn),Rn.reverse()),Rr.height>0){var Ut=Rr.bottom-(He._offset+He._length);Ut>0&&(Lr.yb=0,Lr.b=Ut);var lr=He._offset-Rr.top;lr>0&&(Lr.yt=1,Lr.t=lr)}Lr[at]="free"===He.anchor?He.position:He._anchorAxis.domain[Rn[0]],He.title.text!==Pe._dfltTitle[Xe]&&(Lr[zr]+=Be(He)+(He.title.standoff||0)),He.mirror&&"free"!==He.anchor&&((Qr={x:0,y:0,r:0,l:0,t:0,b:0})[sn]=He.linewidth,He.mirror&&!0!==He.mirror&&(Qr[sn]+=Tn),!0===He.mirror||"ticks"===He.mirror?Qr[at]=He._anchorAxis.domain[Rn[1]]:"all"!==He.mirror&&"allticks"!==He.mirror||(Qr[at]=[He._counterDomainMin,He._counterDomainMax][Rn[1]]))}An&&(On=v.getComponentMethod("rangeslider","autoMarginOpts")(Fe,He)),b.autoMargin(Fe,tt(He),Lr),b.autoMargin(Fe,st(He),Qr),b.autoMargin(Fe,vt(He),On)}),Oe.skipTitle||An&&"bottom"===He.side||En.push(function(){return function(Rr,Lr){var Qr,On=Rr._fullLayout,zr=Lr._id,sn=zr.charAt(0),Mn=Lr.title.font.size;if(Lr.title.hasOwnProperty("standoff"))Qr=Lr._depth+Lr.title.standoff+Be(Lr);else{var Tn=Rt(Lr);if("multicategory"===Lr.type)Qr=Lr._depth;else{var Rn=1.5*Mn;Tn&&(Rn=.5*Mn,"outside"===Lr.ticks&&(Rn+=Lr.ticklen)),Qr=10+Rn+(Lr.linewidth?Lr.linewidth-1:0)}Tn||(Qr+="x"===sn?"top"===Lr.side?Mn*(Lr.showticklabels?1:0):Mn*(Lr.showticklabels?1.5:.5):"right"===Lr.side?Mn*(Lr.showticklabels?1:.5):Mn*(Lr.showticklabels?.5:0))}var $t,Ct,Ut,lr,_r=D.getPxPosition(Rr,Lr);if("x"===sn?(Ct=Lr._offset+Lr._length/2,Ut="top"===Lr.side?_r-Qr:_r+Qr):(Ut=Lr._offset+Lr._length/2,Ct="right"===Lr.side?_r+Qr:_r-Qr,$t={rotate:"-90",offset:0}),"multicategory"!==Lr.type){var qr=Lr._selections[Lr._id+"tick"];if(lr={selection:qr,side:Lr.side},qr&&qr.node()&&qr.node().parentNode){var Vr=u.getTranslate(qr.node().parentNode);lr.offsetLeft=Vr.x,lr.offsetTop=Vr.y}Lr.title.hasOwnProperty("standoff")&&(lr.pad=0)}return a.draw(Rr,zr+"title",{propContainer:Lr,propName:Lr._name+".title.text",placeholder:On._dfltTitle[sn],avoid:lr,transform:$t,attributes:{x:Ct,y:Ut,"text-anchor":"middle"}})}(Fe,He)}),e.syncOrAsync(En)}}function $r(Rr){var Qr,On,zr,sn,Mn,Tn,Lr=Ce+(Rr||"tick");return Qe[Lr]||(Qe[Lr]=((Qr=He)._selections[On=Lr].size()?(zr=1/0,sn=-1/0,Mn=1/0,Tn=-1/0,Qr._selections[On].each(function(){var Rn=Ye(this),$t=u.bBox(Rn.node().parentNode);zr=Math.min(zr,$t.top),sn=Math.max(sn,$t.bottom),Mn=Math.min(Mn,$t.left),Tn=Math.max(Tn,$t.right)})):(zr=0,sn=0,Mn=0,Tn=0),{top:zr,bottom:sn,left:Mn,right:Tn,height:sn-zr,width:Tn-Mn})),Qe[Lr]}},D.getTickSigns=function(Fe){var He=Fe._id.charAt(0),$e=Fe.side==={x:"top",y:"right"}[He]?1:-1,ke=[-1,1,$e,-$e];return"inside"!==Fe.ticks==("x"===He)&&(ke=ke.map(function(Le){return-Le})),Fe.side&&ke.push({l:-1,t:-1,r:1,b:1}[Fe.side.charAt(0)]),ke},D.makeTransTickFn=function(Fe){return"x"===Fe._id.charAt(0)?function(He){return n(Fe._offset+Fe.l2p(He.x),0)}:function(He){return n(0,Fe._offset+Fe.l2p(He.x))}},D.makeTransTickLabelFn=function(Fe){var He=function(ke){var Le=ke.ticklabelposition||"",Pe=function(mt){return-1!==Le.indexOf(mt)},Ce=Pe("top"),Xe=Pe("left"),at=Pe("right"),pt=Pe("bottom"),ut=Pe("inside"),St=pt||Xe||Ce||at;if(!St&&!ut)return[0,0];var ot=ke.side,Et=St?(ke.tickwidth||0)/2:0,Lt=3,Qe=ke.tickfont?ke.tickfont.size:12;return(pt||Ce)&&(Et+=Qe*G,Lt+=(ke.linewidth||0)/2),(Xe||at)&&(Et+=(ke.linewidth||0)/2,Lt+=3),ut&&"top"===ot&&(Lt-=Qe*(1-G)),(Xe||Ce)&&(Et=-Et),"bottom"!==ot&&"right"!==ot||(Lt=-Lt),[St?Et:0,ut?Lt:0]}(Fe),Oe=He[0],$e=He[1];return"x"===Fe._id.charAt(0)?function(ke){return n(Oe+Fe._offset+Fe.l2p(Je(ke)),$e)}:function(ke){return n($e,Oe+Fe._offset+Fe.l2p(Je(ke)))}},D.makeTickPath=function(Fe,He,Oe,$e){$e=void 0!==$e?$e:Fe.ticklen;var ke=Fe._id.charAt(0),Le=(Fe.linewidth||1)/2;return"x"===ke?"M0,"+(He+Le*Oe)+"v"+$e*Oe:"M"+(He+Le*Oe)+",0h"+$e*Oe},D.makeLabelFns=function(Fe,He,Oe){var $e=Fe.ticklabelposition||"",ke=function(Gt){return-1!==$e.indexOf(Gt)},Le=ke("top"),Pe=ke("left"),Ce=ke("right"),Xe=ke("bottom")||Pe||Le||Ce,at=ke("inside"),pt="inside"===$e&&"inside"===Fe.ticks||!at&&"outside"===Fe.ticks&&"boundaries"!==Fe.tickson,ut=0,St=0,ot=pt?Fe.ticklen:0;if(at?ot*=-1:Xe&&(ot=0),pt&&(ut+=ot,Oe)){var Et=e.deg2rad(Oe);ut=ot*Math.cos(Et)+1,St=ot*Math.sin(Et)}Fe.showticklabels&&(pt||Fe.showline)&&(ut+=.2*Fe.tickfont.size);var Lt,Qe,mt,It,jt,Zt={labelStandoff:ut+=(Fe.linewidth||1)/2*(at?-1:1),labelShift:St},Re=0,lt=Fe.side,_t=Fe._id.charAt(0),Dt=Fe.tickangle;if("x"===_t)It=(jt=!at&&"bottom"===lt||at&&"top"===lt)?1:-1,at&&(It*=-1),Lt=St*It,Qe=He+ut*It,mt=jt?1:-.2,90===Math.abs(Dt)&&(at?mt+=W:mt=-90===Dt&&"bottom"===lt?G:90===Dt&&"top"===lt?W:.5,Re=W/2*(Dt/90)),Zt.xFn=function(Gt){return Gt.dx+Lt+Re*Gt.fontSize},Zt.yFn=function(Gt){return Gt.dy+Qe+Gt.fontSize*mt},Zt.anchorFn=function(Gt,Kt){if(Xe){if(Pe)return"end";if(Ce)return"start"}return m(Kt)&&0!==Kt&&180!==Kt?Kt*It<0!==at?"end":"start":"middle"},Zt.heightFn=function(Gt,Kt,ir){return Kt<-60||Kt>60?-.5*ir:"top"===Fe.side!==at?-ir:0};else if("y"===_t){if(It=(jt=!at&&"left"===lt||at&&"right"===lt)?1:-1,at&&(It*=-1),Lt=ut,Qe=St*It,mt=0,at||90!==Math.abs(Dt)||(mt=-90===Dt&&"left"===lt||90===Dt&&"right"===lt?G:.5),at){var Vt=m(Dt)?+Dt:0;if(0!==Vt){var nr=e.deg2rad(Vt);Re=Math.abs(Math.sin(nr))*G*It,mt=0}}Zt.xFn=function(Gt){return Gt.dx+He-(Lt+Gt.fontSize*mt)*It+Re*Gt.fontSize},Zt.yFn=function(Gt){return Gt.dy+Qe+Gt.fontSize*W},Zt.anchorFn=function(Gt,Kt){return m(Kt)&&90===Math.abs(Kt)?"middle":jt?"end":"start"},Zt.heightFn=function(Gt,Kt,ir){return"right"===Fe.side&&(Kt*=-1),Kt<-30?-ir:Kt<30?-.5*ir:0}}return Zt},D.drawTicks=function(Fe,He,Oe){var $e=He._id+"tick",ke=(Oe=Oe||{}).vals;"period"===He.ticklabelmode&&(ke=ke.slice()).shift();var Le=Oe.layer.selectAll("path."+$e).data(He.ticks?ke:[],De);Le.exit().remove(),Le.enter().append("path").classed($e,1).classed("ticks",1).classed("crisp",!1!==Oe.crisp).call(r.stroke,He.tickcolor).style("stroke-width",u.crispRound(Fe,He.tickwidth,1)+"px").attr("d",Oe.path).style("display",null),Yt(He,[H]),Le.attr("transform",Oe.transFn)},D.drawGrid=function(Fe,He,Oe){var $e=He._id+"grid",ke=(Oe=Oe||{}).vals,Le=Oe.counterAxis;if(!1===He.showgrid)ke=[];else if(Le&&D.shouldShowZeroLine(Fe,He,Le))for(var Pe="array"===He.tickmode,Ce=0;Ce<ke.length;Ce++){var Xe=ke[Ce].x;if(Pe?!Xe:Math.abs(Xe)<He.dtick/100){if(ke=ke.slice(0,Ce).concat(ke.slice(Ce+1)),!Pe)break;Ce--}}var at=Oe.layer.selectAll("path."+$e).data(ke,De);at.exit().remove(),at.enter().append("path").classed($e,1).classed("crisp",!1!==Oe.crisp),He._gw=u.crispRound(Fe,He.gridwidth,1),at.attr("transform",Oe.transFn).attr("d",Oe.path).call(r.stroke,He.gridcolor||"#ddd").style("stroke-width",He._gw+"px").style("display",null),Yt(He,[B]),"function"==typeof Oe.path&&at.attr("d",Oe.path)},D.drawZeroLine=function(Fe,He,Oe){var $e=He._id+"zl",ke=D.shouldShowZeroLine(Fe,He,(Oe=Oe||Oe).counterAxis),Le=Oe.layer.selectAll("path."+$e).data(ke?[{x:0,id:He._id}]:[]);Le.exit().remove(),Le.enter().append("path").classed($e,1).classed("zl",1).classed("crisp",!1!==Oe.crisp).each(function(){Oe.layer.selectAll("path").sort(function(Pe,Ce){return Q(Pe.id,Ce.id)})}),Le.attr("transform",Oe.transFn).attr("d",Oe.path).call(r.stroke,He.zerolinecolor||r.defaultLine).style("stroke-width",u.crispRound(Fe,He.zerolinewidth,He._gw||1)+"px").style("display",null),Yt(He,[R])},D.drawLabels=function(Fe,He,Oe){Oe=Oe||{};var $e=Fe._fullLayout,ke=He._id,Le=ke.charAt(0),Pe=Oe.cls||ke+"tick",Ce=Oe.vals,Xe=Oe.labelFns,at=Oe.secondary?0:He.tickangle,pt=(He._prevTickAngles||{})[Pe],ut=Oe.layer.selectAll("g."+Pe).data(He.showticklabels?Ce:[],De),St=[];function ot(It,jt){It.each(function(Zt){var Re=p.select(this),lt=Re.select(".text-math-group"),_t=Xe.anchorFn(Zt,jt),Dt=Oe.transFn.call(Re.node(),Zt)+(m(jt)&&0!=+jt?" rotate("+jt+","+Xe.xFn(Zt)+","+(Xe.yFn(Zt)-Zt.fontSize/2)+")":""),Vt=t.lineCount(Re),nr=X*Zt.fontSize,Gt=Xe.heightFn(Zt,m(jt)?+jt:0,(Vt-1)*nr);if(Gt&&(Dt+=n(0,Gt)),lt.empty()){var Kt=Re.select("text");Kt.attr({transform:Dt,"text-anchor":_t}),Kt.style("opacity",1),He._adjustTickLabelsOverflow&&He._adjustTickLabelsOverflow()}else{var ir=u.bBox(lt.node()).width*{end:-.5,start:.5}[_t];lt.attr("transform",Dt+n(ir,0))}})}ut.enter().append("g").classed(Pe,1).append("text").attr("text-anchor","middle").each(function(It){var jt=p.select(this),Zt=Fe._promises.length;jt.call(t.positionText,Xe.xFn(It),Xe.yFn(It)).call(u.font,It.font,It.fontSize,It.fontColor).text(It.text).call(t.convertToTspans,Fe),Fe._promises[Zt]?St.push(Fe._promises.pop().then(function(){ot(jt,at)})):ot(jt,at)}),Yt(He,[V]),ut.exit().remove(),Oe.repositionOnUpdate&&ut.each(function(It){p.select(this).select("text").call(t.positionText,Xe.xFn(It),Xe.yFn(It))}),He._adjustTickLabelsOverflow=function(){var It=He.ticklabeloverflow;if(It&&"allow"!==It){var jt=-1!==It.indexOf("hide"),Zt="x"===He._id.charAt(0),Re=0,lt=Zt?Fe._fullLayout.width:Fe._fullLayout.height;if(-1!==It.indexOf("domain")){var _t=e.simpleMap(He.range,He.r2l);Re=He.l2p(_t[0])+He._offset,lt=He.l2p(_t[1])+He._offset}var Dt=Math.min(Re,lt),Vt=Math.max(Re,lt),nr=He.side,Gt=1/0,Kt=-1/0;for(var ir in ut.each(function(cr){var sr=p.select(this);if(sr.select(".text-math-group").empty()){var mr=u.bBox(sr.node()),Ir=0;Zt?(mr.right>Vt||mr.left<Dt)&&(Ir=1):(mr.bottom>Vt||mr.top+(He.tickangle?0:cr.fontSize/4)<Dt)&&(Ir=1);var vr=sr.select("text");Ir?jt&&vr.style("opacity",0):(vr.style("opacity",1),Gt="bottom"===nr||"right"===nr?Math.min(Gt,Zt?mr.top:mr.left):-1/0,Kt="top"===nr||"left"===nr?Math.max(Kt,Zt?mr.bottom:mr.right):1/0)}}),$e._plots){var dr=$e._plots[ir];if(He._id===dr.xaxis._id||He._id===dr.yaxis._id){var hr=Zt?dr.yaxis:dr.xaxis;hr&&(hr["_visibleLabelMin_"+He._id]=Gt,hr["_visibleLabelMax_"+He._id]=Kt)}}}},He._hideCounterAxisInsideTickLabels=function(It){var jt="x"===He._id.charAt(0),Zt=[];for(var Re in $e._plots){var lt=$e._plots[Re];He._id!==lt.xaxis._id&&He._id!==lt.yaxis._id||Zt.push(jt?lt.yaxis:lt.xaxis)}Zt.forEach(function(_t,Dt){_t&&Rt(_t)&&(It||[R,B,H,V]).forEach(function(Vt){var nr="tick"===Vt.K&&"text"===Vt.L&&"period"===He.ticklabelmode,Gt=$e._plots[He._mainSubplot];(Vt.K===R.K?Gt.zerolinelayer.selectAll("."+He._id+"zl"):Vt.K===B.K?Gt.gridlayer.selectAll("."+He._id):Gt[He._id.charAt(0)+"axislayer"]).each(function(){var Kt=p.select(this);Vt.L&&(Kt=Kt.selectAll(Vt.L)),Kt.each(function(ir){var dr=He.l2p(nr?Je(ir):ir.x)+He._offset,hr=p.select(this);dr<He["_visibleLabelMax_"+_t._id]&&dr>He["_visibleLabelMin_"+_t._id]?hr.style("display","none"):"tick"!==Vt.K||Dt||hr.style("display",null)})})})})},ot(ut,pt+1?pt:at);var Et=null;He._selections&&(He._selections[Pe]=ut);var Lt=[function(){return St.length&&Promise.all(St)}];He.automargin&&$e._redrawFromAutoMarginCount&&90===pt?(Et=90,Lt.push(function(){ot(ut,pt)})):Lt.push(function(){if(ot(ut,at),Ce.length&&"x"===Le&&!m(at)&&("log"!==He.type||"D"!==String(He.dtick).charAt(0))){Et=0;var It,jt=0,Zt=[];if(ut.each(function(sr){jt=Math.max(jt,sr.fontSize);var mr=He.l2p(sr.x),Ir=Ye(this),vr=u.bBox(Ir.node());Zt.push({top:0,bottom:10,height:10,left:mr-vr.width/2,right:mr+vr.width/2+2,width:vr.width+2})}),"boundaries"!==He.tickson&&!He.showdividers||Oe.secondary){var Re=Ce.length,lt=Math.abs((Ce[Re-1].x-Ce[0].x)*He._m)/(Re-1),_t=He.ticklabelposition||"",Dt=function(sr){return-1!==_t.indexOf(sr)},Vt=Dt("top"),nr=Dt("left"),Gt=Dt("right"),Kt=Dt("bottom")||nr||Vt||Gt?(He.tickwidth||0)+6:0,ir=lt<2.5*jt||"multicategory"===He.type||"realaxis"===He._name;for(It=0;It<Zt.length-1;It++)if(e.bBoxIntersect(Zt[It],Zt[It+1],Kt)){Et=ir?90:30;break}}else{var dr=2;for(He.ticks&&(dr+=He.tickwidth/2),It=0;It<Zt.length;It++){var hr=Ce[It].xbnd,cr=Zt[It];if(null!==hr[0]&&cr.left-He.l2p(hr[0])<dr||null!==hr[1]&&He.l2p(hr[1])-cr.right<dr){Et=90;break}}}Et&&ot(ut,Et)}}),He._tickAngles&&Lt.push(function(){He._tickAngles[Pe]=null===Et?m(at)?at:0:Et});var Qe=He._anchorAxis;Qe&&Qe.autorange&&Rt(He)&&!j($e,He._id)&&($e._insideTickLabelsAutorange||($e._insideTickLabelsAutorange={}),$e._insideTickLabelsAutorange[Qe._name+".autorange"]=Qe.autorange,Lt.push(function(){ut.each(function(It,jt){var Zt=Ye(this);Zt.select(".text-math-group").empty()&&(He._vals[jt].bb=u.bBox(Zt.node()))})}));var mt=e.syncOrAsync(Lt);return mt&&mt.then&&Fe._promises.push(mt),mt},D.getPxPosition=function(Fe,He){var Oe,$e=Fe._fullLayout._size,ke=He._id.charAt(0),Le=He.side;return"free"!==He.anchor?Oe=He._anchorAxis:"x"===ke?Oe={_offset:$e.t+(1-(He.position||0))*$e.h,_length:0}:"y"===ke&&(Oe={_offset:$e.l+(He.position||0)*$e.w,_length:0}),"top"===Le||"left"===Le?Oe._offset:"bottom"===Le||"right"===Le?Oe._offset+Oe._length:void 0},D.shouldShowZeroLine=function(Fe,He,Oe){var $e=e.simpleMap(He.range,He.r2l);return $e[0]*$e[1]<=0&&He.zeroline&&("linear"===He.type||"-"===He.type)&&!(He.rangebreaks&&He.maskBreaks(0)===E)&&(Ze(He,0)||!function(ke,Le,Pe,Ce){var Xe=Pe._mainAxis;if(Xe){var at=ke._fullLayout,pt=Le._id.charAt(0),ut=D.counterLetter(Le._id),St=Le._offset+(Math.abs(Ce[0])<Math.abs(Ce[1])==("x"===pt)?0:Le._length),Et=at._plots[Pe._mainSubplot];if(!(Et.mainplotinfo||Et).overlays.length)return ot(Pe);for(var Lt=D.list(ke,ut),Qe=0;Qe<Lt.length;Qe++){var mt=Lt[Qe];if(mt._mainAxis===Xe&&ot(mt))return!0}}function ot(It){if(!It.showline||!It.linewidth)return!1;var jt=Math.max((It.linewidth+Le.zerolinewidth)/2,1);function Zt(_t){return"number"==typeof _t&&Math.abs(_t-St)<jt}if(Zt(It._mainLinePosition)||Zt(It._mainMirrorPosition))return!0;var Re=It._linepositions||{};for(var lt in Re)if(Zt(Re[lt][0])||Zt(Re[lt][1]))return!0}}(Fe,He,Oe,$e)||function(ke,Le){for(var Pe=ke._fullData,Ce=Le._mainSubplot,Xe=Le._id.charAt(0),at=0;at<Pe.length;at++){var pt=Pe[at];if(!0===pt.visible&&pt.xaxis+pt.yaxis===Ce&&(v.traceIs(pt,"bar-like")&&pt.orientation==={x:"h",y:"v"}[Xe]||pt.fill&&pt.fill.charAt(pt.fill.length-1)===Xe))return!0}return!1}(Fe,He))},D.clipEnds=function(Fe,He){return He.filter(function(Oe){return Ze(Fe,Oe.x)})},D.allowAutoMargin=function(Fe){for(var He=D.list(Fe,"",!0),Oe=0;Oe<He.length;Oe++){var $e=He[Oe];$e.automargin&&(b.allowAutoMargin(Fe,tt($e)),$e.mirror&&b.allowAutoMargin(Fe,st($e))),v.getComponentMethod("rangeslider","isVisible")($e)&&b.allowAutoMargin(Fe,vt($e))}},D.swap=function(Fe,He){for(var Oe=function(ke,Le){var Pe,Ce,Xe=[];for(Pe=0;Pe<Le.length;Pe++){var at=[],pt=ke._fullData[Le[Pe]].xaxis,ut=ke._fullData[Le[Pe]].yaxis;if(pt&&ut){for(Ce=0;Ce<Xe.length;Ce++)-1===Xe[Ce].x.indexOf(pt)&&-1===Xe[Ce].y.indexOf(ut)||at.push(Ce);if(at.length){var St,ot=Xe[at[0]];if(at.length>1)for(Ce=1;Ce<at.length;Ce++)Pt(ot.x,(St=Xe[at[Ce]]).x),Pt(ot.y,St.y);Pt(ot.x,[pt]),Pt(ot.y,[ut])}else Xe.push({x:[pt],y:[ut]})}}return Xe}(Fe,He),$e=0;$e<Oe.length;$e++)Mt(Fe,Oe[$e].x,Oe[$e].y)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib"),b=y("../../constants/numerical").BADNUM,v=m.isArrayOrTypedArray,e=m.isDateTime,n=m.cleanNumber,t=Math.round;function a(u,s){return s?p(u):"number"==typeof u}function r(u){return Math.max(1,(u-1)/1e3)}$.exports=function(u,s,i){var x,l=u,c=i.noMultiCategory;if(v(l)&&!l.length)return"-";if(!c&&v((x=l)[0])&&v(x[1]))return"multicategory";if(c&&Array.isArray(l[0])){for(var f=[],g=0;g<l.length;g++)if(v(l[g]))for(var h=0;h<l[g].length;h++)f.push(l[g][h]);l=f}if(function(x,d){for(var w=x.length,_=r(w),T=0,k=0,L={},M=0;M<w;M+=_){var P=x[t(M)],S=String(P);L[S]||(L[S]=1,e(P,d)&&T++,p(P)&&k++)}return T>2*k}(l,s))return"date";var o="strict"!==i.autotypenumbers;return function(x,d){for(var w=x.length,_=r(w),T=0,k=0,L={},M=0;M<w;M+=_){var P=x[t(M)],S=String(P);if(!L[S]){L[S]=1;var E=typeof P;"boolean"===E?k++:(d?n(P)!==b:"number"===E)?T++:"string"===E&&k++}}return k>2*T}(l,o)?"category":function(x,d){for(var w=x.length,_=0;_<w;_++)if(a(x[_],d))return!0;return!1}(l,o)?"linear":"-"}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../registry"),b=y("../../lib"),v=y("../array_container_defaults"),e=y("./layout_attributes"),n=y("./tick_value_defaults"),t=y("./tick_mark_defaults"),a=y("./tick_label_defaults"),r=y("./prefix_suffix_defaults"),u=y("./category_order_defaults"),s=y("./line_grid_defaults"),i=y("./set_convert"),l=y("./constants").WEEKDAY_PATTERN,c=y("./constants").HOUR_PATTERN;function f(o,x,d){function w(S,E){return b.coerce(o,x,e.rangebreaks,S,E)}if(w("enabled")){var _=w("bounds");if(_&&_.length>=2){var T,k,L="";if(2===_.length)for(T=0;T<2;T++)if(k=h(_[T])){L=l;break}var M=w("pattern",L);if(M===l)for(T=0;T<2;T++)(k=h(_[T]))&&(x.bounds[T]=_[T]=k-1);if(M)for(T=0;T<2;T++)switch(k=_[T],M){case l:if(!p(k)||(k=+k)!==Math.floor(k)||k<0||k>=7)return void(x.enabled=!1);x.bounds[T]=_[T]=k;break;case c:if(!p(k)||(k=+k)<0||k>24)return void(x.enabled=!1);x.bounds[T]=_[T]=k}if(!1===d.autorange){var O=d.range;if(O[0]<O[1]){if(_[0]<O[0]&&_[1]>O[1])return void(x.enabled=!1)}else if(_[0]>O[0]&&_[1]<O[1])return void(x.enabled=!1)}}else{var P=w("values");if(!P||!P.length)return void(x.enabled=!1);w("dvalue")}}}$.exports=function(o,x,d,w,_){var T,k=w.letter,L=w.font||{},M=w.splomStash||{},O=d("visible",!w.visibleDflt),S=x.type||(x._template||{}).type||"-";"date"===S&&(m.getComponentMethod("calendars","handleDefaults")(o,x,"calendar",w.calendar),w.noTicklabelmode||(T=d("ticklabelmode")));var E="";w.noTicklabelposition&&"multicategory"!==S||(E=b.coerce(o,x,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===T?["outside","inside"]:"x"===k?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),w.noTicklabeloverflow||d("ticklabeloverflow",-1!==E.indexOf("inside")?"hide past domain":"category"===S||"multicategory"===S?"allow":"hide past div"),i(x,_);var R=!x.isValidRange(o.range);R&&w.reverseDflt&&(R="reversed"),!d("autorange",R)||"linear"!==S&&"-"!==S||d("rangemode"),d("range"),x.cleanRange(),u(o,x,d,w),"category"===S||w.noHover||d("hoverformat");var B=d("color"),H=B!==e.color.dflt?B:L.color,V=M.label||_._dfltTitle[k];if(r(o,x,d,S,w),!O)return x;d("title.text",V),b.coerceFont(d,"title.font",{family:L.family,size:b.bigFont(L.size),color:H}),n(o,x,d,S),a(o,x,d,S,w),t(o,x,d,w),s(o,x,d,{dfltColor:B,bgColor:w.bgColor,showGrid:w.showGrid,attributes:e}),(x.showline||x.ticks)&&d("mirror"),w.automargin&&d("automargin");var Z,W="multicategory"===S;if(w.noTickson||"category"!==S&&!W||!x.ticks&&!x.showgrid||(W&&(Z="boundaries"),"boundaries"===d("tickson",Z)&&delete x.ticklabelposition),W&&d("showdividers")&&(d("dividercolor"),d("dividerwidth")),"date"===S)if(v(o,x,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:f}),x.rangebreaks.length){for(var G=0;G<x.rangebreaks.length;G++)if(x.rangebreaks[G].pattern===l){x._hasDayOfWeekBreaks=!0;break}if(i(x,_),_._has("scattergl")||_._has("splom"))for(var X=0;X<w.data.length;X++){var te=w.data[X];"scattergl"!==te.type&&"splom"!==te.type||(te.visible=!1,b.warn(te.type+" traces do not work on axes with rangebreaks. Setting trace "+te.index+" to `visible: false`."))}}else delete x.rangebreaks;return x};var g={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function h(o){if("string"==typeof o)return g[o.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(y,$,ee){"use strict";var p=y("../../constants/docs"),m=p.FORMAT_LINK,b=p.DATE_FORMAT_LINK;function v(n,t){return["Sets the "+n+" formatting rule"+(t?"for `"+t+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+m+"."].join(" ")}function e(n,t){return v(n,t)+[" And for dates see: "+b+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}$.exports={axisHoverFormat:function(n,t){return{valType:"string",dflt:"",editType:"none",description:(t?v:e)("hover text",n)+["By default the values are formatted using "+(t?"generic number format":"`"+n+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:v,descriptionWithDates:e}},{"../../constants/docs":474}],558:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("./constants");function b(v,e){if(e&&e.length)for(var n=0;n<e.length;n++)if(e[n][v])return!0;return!1}ee.id2name=function(v){if("string"==typeof v&&v.match(m.AX_ID_PATTERN)){var e=v.split(" ")[0].substr(1);return"1"===e&&(e=""),v.charAt(0)+"axis"+e}},ee.name2id=function(v){if(v.match(m.AX_NAME_PATTERN)){var e=v.substr(5);return"1"===e&&(e=""),v.charAt(0)+e}},ee.cleanId=function(v,e,n){var t=/( domain)$/.test(v);if("string"==typeof v&&v.match(m.AX_ID_PATTERN)&&(!e||v.charAt(0)===e)&&(!t||n)){var a=v.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===a&&(a=""),v.charAt(0)+a+(t&&n?" domain":"")}},ee.list=function(v,e,n){var t=v._fullLayout;if(!t)return[];var a,r=ee.listIds(v,e),u=new Array(r.length);for(a=0;a<r.length;a++){var s=r[a];u[a]=t[s.charAt(0)+"axis"+s.substr(1)]}if(!n){var i=t._subplots.gl3d||[];for(a=0;a<i.length;a++){var l=t[i[a]];e?u.push(l[e+"axis"]):u.push(l.xaxis,l.yaxis,l.zaxis)}}return u},ee.listIds=function(v,e){var n=v._fullLayout;if(!n)return[];var t=n._subplots;return e?t[e+"axis"]:t.xaxis.concat(t.yaxis)},ee.getFromId=function(v,e,n){var t=v._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===n?e=e.replace(/y[0-9]*/,""):"y"===n&&(e=e.replace(/x[0-9]*/,"")),t[ee.id2name(e)]},ee.getFromTrace=function(v,e,n){var t=v._fullLayout,a=null;if(p.traceIs(e,"gl3d")){var r=e.scene;"scene"===r.substr(0,5)&&(a=t[r][n+"axis"])}else a=ee.getFromId(v,e[n+"axis"]||n);return a},ee.idSort=function(v,e){var n=v.charAt(0),t=e.charAt(0);return n!==t?n>t?1:-1:+(v.substr(1)||1)-+(e.substr(1)||1)},ee.ref2id=function(v){return!!/^[xyz]/.test(v)&&v.split(" ")[0]},ee.isLinked=function(v,e){return b(e,v._axisMatchGroups)||b(e,v._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(y,$,ee){"use strict";$.exports=function(p,m,b,v){if("category"===m.type){var e,n=p.categoryarray,t=Array.isArray(n)&&n.length>0;t&&(e="array");var a,r=b("categoryorder",e);"array"===r&&(a=b("categoryarray")),t||"array"!==r||(r=m.categoryorder="trace"),"trace"===r?m._initialCategories=[]:"array"===r?m._initialCategories=a.slice():(a=function(u,s){var i,l,c,f=s.dataAttr||u._id.charAt(0),g={};if(s.axData)i=s.axData;else for(i=[],l=0;l<s.data.length;l++){var h=s.data[l];h[f+"axis"]===u._id&&i.push(h)}for(l=0;l<i.length;l++){var o=i[l][f];for(c=0;c<o.length;c++){var x=o[c];null!=x&&(g[x]=1)}}return Object.keys(g)}(m,v).sort(),"category ascending"===r?m._initialCategories=a:"category descending"===r&&(m._initialCategories=a.reverse()))}}},{}],560:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib"),b=y("../../constants/numerical"),v=b.ONEDAY,e=b.ONEWEEK;ee.dtick=function(n,t){var a="log"===t,r="date"===t,u="category"===t,s=r?v:1;if(!n)return s;if(p(n))return(n=Number(n))<=0?s:u?Math.max(1,Math.round(n)):r?Math.max(.1,n):n;if("string"!=typeof n||!r&&!a)return s;var i=n.charAt(0),l=n.substr(1);return(l=p(l)?Number(l):0)<=0||!(r&&"M"===i&&l===Math.round(l)||a&&"L"===i||a&&"D"===i&&(1===l||2===l))?s:n},ee.tick0=function(n,t,a,r){return"date"===t?m.cleanDate(n,m.dateTick0(a,r%e==0?1:0)):"D1"!==r&&"D2"!==r?p(n)?Number(n):0:void 0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(y,$,ee){"use strict";var p=y("../../lib/regex").counter;$.exports={idRegex:{x:p("x","( domain)?"),y:p("y","( domain)?")},attrRegex:p("[xy]axis"),xAxisMatch:p("xaxis"),yAxisMatch:p("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./autorange"),b=y("./axis_ids").id2name,v=y("./layout_attributes"),e=y("./scale_zoom"),n=y("./set_convert"),t=y("../../constants/numerical").ALMOST_EQUAL,a=y("../../constants/alignment").FROM_BL;function r(g,h,o){var x=o.axIds,d=o.layoutOut,w=o.hasImage,_=d._axisConstraintGroups,T=d._axisMatchGroups,k=h._id,L=k.charAt(0),M=((d._splomAxes||{})[L]||{})[k]||{},O=h._id,P="x"===O.charAt(0);function S(Q,j){return p.coerce(g,h,v,Q,j)}h._matchGroup=null,h._constraintGroup=null,S("constrain",w?"domain":"range"),p.coerce(g,h,{constraintoward:{valType:"enumerated",values:P?["left","center","right"]:["bottom","middle","top"],dflt:P?"center":"middle"}},"constraintoward");var E,R,B=h.type,H=[];for(E=0;E<x.length;E++)(R=x[E])!==O&&d[b(R)].type===B&&H.push(R);var V=s(_,O);if(V){var Z=[];for(E=0;E<H.length;E++)V[R=H[E]]||Z.push(R);H=Z}var W,G,X=H.length;X&&(g.matches||M.matches)&&(W=p.coerce(g,h,{matches:{valType:"enumerated",values:H,dflt:-1!==H.indexOf(M.matches)?M.matches:void 0}},"matches"));var te=w&&!P?h.anchor:void 0;if(X&&!W&&(g.scaleanchor||te)&&(G=p.coerce(g,h,{scaleanchor:{valType:"enumerated",values:H}},"scaleanchor",te)),W){h._matchGroup=i(T,O,W,1);var D=d[b(W)],N=u(d,h)/u(d,D);P!==("x"===W.charAt(0))&&(N=(P?"x":"y")+N),i(_,O,W,N)}else g.matches&&-1!==x.indexOf(g.matches)&&p.warn("ignored "+h._name+'.matches: "'+g.matches+'" to avoid an infinite loop');if(G){var U=S("scaleratio");U||(U=h.scaleratio=1),i(_,O,G,U)}else g.scaleanchor&&-1!==x.indexOf(g.scaleanchor)&&p.warn("ignored "+h._name+'.scaleanchor: "'+g.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function u(g,h){var o=h.domain;return o||(o=g[b(h.overlaying)].domain),o[1]-o[0]}function s(g,h){for(var o=0;o<g.length;o++)if(g[o][h])return g[o];return null}function i(g,h,o,x){var d,w,_,T,k,L=s(g,h);null===L?((L={})[h]=1,k=g.length,g.push(L)):k=g.indexOf(L);var M=Object.keys(L);for(d=0;d<g.length;d++)if(_=g[d],d!==k&&_[o]){var O=_[o];for(w=0;w<M.length;w++)_[T=M[w]]=l(O,l(x,L[T]));return void g.splice(k,1)}if(1!==x)for(w=0;w<M.length;w++){var P=M[w];L[P]=l(x,L[P])}L[o]=1}function l(g,h){var o,x,d="",w="";"string"==typeof g&&(o=(d=g.match(/^[xy]*/)[0]).length,g=+g.substr(o)),"string"==typeof h&&(x=(w=h.match(/^[xy]*/)[0]).length,h=+h.substr(x));var _=g*h;return o||x?o&&x&&d.charAt(0)!==w.charAt(0)?o===x?_:(o>x?d.substr(x):w.substr(o))+_:d+w+g*h:_}function c(g,h){for(var o=h._size,x=o.h/o.w,d={},w=Object.keys(g),_=0;_<w.length;_++){var T=w[_],k=g[T];if("string"==typeof k){var L=k.match(/^[xy]*/)[0],M=L.length;k=+k.substr(M);for(var O="y"===L.charAt(0)?x:1/x,P=0;P<M;P++)k*=O}d[T]=k}return d}function f(g,h){var o=g._inputDomain,d=o[0]+(o[1]-o[0])*a[g.constraintoward];g.domain=g._input.domain=[d+(o[0]-d)/h,d+(o[1]-d)/h],g.setScale()}ee.handleDefaults=function(g,h,o){var x,d,w,_,T,k,L,M,O=o.axIds,P=o.axHasImage,S=h._axisConstraintGroups=[],E=h._axisMatchGroups=[];for(x=0;x<O.length;x++)r(T=g[_=b(O[x])],k=h[_],{axIds:O,layoutOut:h,hasImage:P[_]});function R(D,N){for(x=0;x<D.length;x++)for(w in d=D[x])h[b(w)][N]=d}for(R(E,"_matchGroup"),x=0;x<S.length;x++)for(w in d=S[x])if((k=h[b(w)]).fixedrange){for(var B in d){var H=b(B);!1===(g[H]||{}).fixedrange&&p.warn("fixedrange was specified as false for axis "+H+" but was overridden because another axis in its constraint group has fixedrange true"),h[H].fixedrange=!0}break}for(x=0;x<S.length;){for(w in d=S[x]){(k=h[b(w)])._matchGroup&&Object.keys(k._matchGroup).length===Object.keys(d).length&&(S.splice(x,1),x--);break}x++}R(S,"_constraintGroup");var V=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],Z=!1,W=!1;function G(){M=k[L],"rangebreaks"===L&&(W=k._hasDayOfWeekBreaks)}for(x=0;x<E.length;x++){d=E[x];for(var X=0;X<V.length;X++){var te;for(w in L=V[X],M=null,d)if(T=g[_=b(w)],L in(k=h[_])){if(!k.matches&&(te=k,L in T)){G();break}null===M&&L in T&&G()}if("range"===L&&M&&(Z=!0),"autorange"===L&&null===M&&Z&&(M=!1),null===M&&L in te&&(M=te[L]),null!==M)for(w in d)(k=h[b(w)])[L]="range"===L?M.slice():M,"rangebreaks"===L&&(k._hasDayOfWeekBreaks=W,n(k,h))}}},ee.enforce=function(g){var h,o,x,d,w,_,T,k,L=g._fullLayout,M=L._axisConstraintGroups||[];for(h=0;h<M.length;h++){x=c(M[h],L);var O=Object.keys(x),P=1/0,S=0,E=1/0,R={},B={},H=!1;for(o=0;o<O.length;o++)B[d=O[o]]=w=L[b(d)],w._inputDomain?w.domain=w._inputDomain.slice():w._inputDomain=w.domain.slice(),w._inputRange||(w._inputRange=w.range.slice()),w.setScale(),R[d]=_=Math.abs(w._m)/x[d],P=Math.min(P,_),"domain"!==w.constrain&&w._constraintShrinkable||(E=Math.min(E,_)),delete w._constraintShrinkable,S=Math.max(S,_),"domain"===w.constrain&&(H=!0);if(!(P>t*S)||H)for(o=0;o<O.length;o++)if(_=R[d=O[o]],T=(w=B[d]).constrain,_!==E||"domain"===T)if(k=_/E,"range"===T)e(w,k);else{var V=w._inputDomain,Z=(w.domain[1]-w.domain[0])/(V[1]-V[0]),W=(w.r2l(w.range[1])-w.r2l(w.range[0]))/(w.r2l(w._inputRange[1])-w.r2l(w._inputRange[0]));if((k/=Z)*W<1){w.domain=w._input.domain=V.slice(),e(w,k);continue}if(W<1&&(w.range=w._input.range=w._inputRange.slice(),k*=W),w.autorange){var G=w.r2l(w.range[0]),X=w.r2l(w.range[1]),te=(G+X)/2,D=te,N=te,U=Math.abs(X-te),Q=te-U*k*1.0001,j=te+U*k*1.0001,J=m.makePadFn(L,w,0),K=m.makePadFn(L,w,1);f(w,k);var re,ne,se=Math.abs(w._m),oe=m.concatExtremes(g,w),pe=oe.min,ce=oe.max;for(ne=0;ne<pe.length;ne++)(re=pe[ne].val-J(pe[ne])/se)>Q&&re<D&&(D=re);for(ne=0;ne<ce.length;ne++)(re=ce[ne].val+K(ce[ne])/se)<j&&re>N&&(N=re);k/=(N-D)/(2*U),D=w.l2r(D),N=w.l2r(N),w.range=w._input.range=G<X?[D,N]:[N,D]}f(w,k)}}},ee.getAxisGroup=function(g,h){for(var o=g._axisMatchGroups,x=0;x<o.length;x++)if(o[x][h])return"g"+x;return h},ee.clean=function(g,h){if(h._inputDomain){for(var o=!1,x=h._id,d=g._fullLayout._axisConstraintGroups,w=0;w<d.length;w++)if(d[w][x]){o=!0;break}o&&"domain"===h.constrain||(h._input.domain=h.domain=h._inputDomain,delete h._inputDomain)}}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=m.numberFormat,v=y("tinycolor2"),e=y("has-passive-events"),n=y("../../registry"),t=m.strTranslate,a=y("../../lib/svg_text_utils"),r=y("../../components/color"),u=y("../../components/drawing"),s=y("../../components/fx"),i=y("./axes"),l=y("../../lib/setcursor"),c=y("../../components/dragelement"),f=y("../../components/dragelement/helpers"),g=f.selectingOrDrawing,h=f.freeMode,o=y("../../constants/alignment").FROM_TL,x=y("../../lib/clear_gl_canvases"),d=y("../../plot_api/subroutines").redrawReglTraces,w=y("../plots"),_=y("./axis_ids").getFromId,T=y("./select").prepSelect,k=y("./select").clearSelect,L=y("./select").selectOnClick,M=y("./scale_zoom"),O=y("./constants"),P=O.MINDRAG,S=O.MINZOOM,E=!0;function R(re,ne,se,oe){var pe=m.ensureSingle(re.draglayer,ne,se,function(ce){ce.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",re.id)});return pe.call(l,oe),pe.node()}function B(re,ne,se,oe,pe,ce,ge){var xe=R(re,"rect",ne,se);return p.select(xe).call(u.setRect,oe,pe,ce,ge),xe}function H(re,ne){for(var se=0;se<re.length;se++)if(!re[se].fixedrange)return ne;return""}function V(re,ne,se,oe,pe){for(var ce=0;ce<re.length;ce++){var ge=re[ce];if(!ge.fixedrange)if(ge.rangebreaks){var xe="y"===ge._id.charAt(0),be=xe?1-se:se;oe[ge._name+".range[0]"]=ge.l2r(ge.p2l((xe?1-ne:ne)*ge._length)),oe[ge._name+".range[1]"]=ge.l2r(ge.p2l(be*ge._length))}else{var Se=ge._rl[0],fe=ge._rl[1]-Se;oe[ge._name+".range[0]"]=ge.l2r(Se+fe*ne),oe[ge._name+".range[1]"]=ge.l2r(Se+fe*se)}}if(pe&&pe.length){var me=(ne+(1-se))/2;V(pe,me,1-me,oe,[])}}function Z(re,ne){for(var se=0;se<re.length;se++){var oe=re[se];if(!oe.fixedrange)if(oe.rangebreaks){var pe=oe._length,ce=(oe.p2l(0+ne)-oe.p2l(0)+(oe.p2l(pe+ne)-oe.p2l(pe)))/2;oe.range=[oe.l2r(oe._rl[0]-ce),oe.l2r(oe._rl[1]-ce)]}else oe.range=[oe.l2r(oe._rl[0]-ne/oe._m),oe.l2r(oe._rl[1]-ne/oe._m)]}}function W(re){return 1-(re>=0?Math.min(re,.9):1/(1/Math.max(re,-.3)+3.222))}function G(re,ne,se,oe,pe){return re.append("path").attr("class","zoombox").style({fill:ne>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",t(se,oe)).attr("d",pe+"Z")}function X(re,ne,se){return re.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",t(ne,se)).attr("d","M0,0Z")}function te(re,ne,se,oe,pe,ce){re.attr("d",oe+"M"+se.l+","+se.t+"v"+se.h+"h"+se.w+"v-"+se.h+"h-"+se.w+"Z"),D(re,ne,pe,ce)}function D(re,ne,se,oe){se||(re.transition().style("fill",oe>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ne.transition().style("opacity",1).duration(200))}function N(re){p.select(re).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function U(re){E&&re.data&&re._context.showTips&&(m.notifier(m._(re,"Double-click to zoom back out"),"long"),E=!1)}function Q(re){var ne=Math.floor(Math.min(re.b-re.t,re.r-re.l,S)/2);return"M"+(re.l-3.5)+","+(re.t-.5+ne)+"h3v"+-ne+"h"+ne+"v-3h-"+(ne+3)+"ZM"+(re.r+3.5)+","+(re.t-.5+ne)+"h-3v"+-ne+"h"+-ne+"v-3h"+(ne+3)+"ZM"+(re.r+3.5)+","+(re.b+.5-ne)+"h-3v"+ne+"h"+-ne+"v3h"+(ne+3)+"ZM"+(re.l-3.5)+","+(re.b+.5-ne)+"h3v"+ne+"h"+ne+"v3h-"+(ne+3)+"Z"}function j(re,ne,se,oe,pe){for(var ce,ge,xe,we,be=!1,Se={},fe={},me=(pe||{}).xaHash,Te=(pe||{}).yaHash,_e=0;_e<ne.length;_e++){var Me=ne[_e];for(ce in se)if(Me[ce]){for(xe in Me)pe&&(me[xe]||Te[xe])||("x"===xe.charAt(0)?se:oe)[xe]||(Se[xe]=ce);for(ge in oe)pe&&(me[ge]||Te[ge])||!Me[ge]||(be=!0)}for(ge in oe)if(Me[ge])for(we in Me)pe&&(me[we]||Te[we])||("x"===we.charAt(0)?se:oe)[we]||(fe[we]=ge)}be&&(m.extendFlat(Se,fe),fe={});var Ie={},ze=[];for(xe in Se){var Ve=_(re,xe);ze.push(Ve),Ie[Ve._id]=Ve}var Je={},De=[];for(we in fe){var Be=_(re,we);De.push(Be),Je[Be._id]=Be}return{xaHash:Ie,yaHash:Je,xaxes:ze,yaxes:De,xLinks:Se,yLinks:fe,isSubplotConstrained:be}}function J(re,ne){if(e){var se=void 0!==re.onwheel?"wheel":"mousewheel";re._onwheel&&re.removeEventListener(se,re._onwheel),re._onwheel=ne,re.addEventListener(se,ne,{passive:!1})}else void 0!==re.onwheel?re.onwheel=ne:void 0!==re.onmousewheel?re.onmousewheel=ne:re.isAddedWheelEvent||(re.isAddedWheelEvent=!0,re.addEventListener("wheel",ne,{passive:!1}))}function K(re){var ne=[];for(var se in re)ne.push(re[se]);return ne}$.exports={makeDragBox:function(re,ne,se,oe,pe,ce,ge,xe){var we,be,Se,fe,me,Te,_e,Me,Ie,ze,Ve,Je,De,Be,Ze,Ye,tt,st,vt,Pt,Mt,rt,et,bt=re._fullLayout._zoomlayer,Rt=ge+xe==="nsew",Yt=1===(ge+xe).length;function Fe(){if(Ie=(we=ne.xaxis)._length,ze=(be=ne.yaxis)._length,_e=we._offset,Me=be._offset,(Se={})[we._id]=we,(fe={})[be._id]=be,ge&&xe)for(var cr=ne.overlays,sr=0;sr<cr.length;sr++){var mr=cr[sr].xaxis;Se[mr._id]=mr;var Ir=cr[sr].yaxis;fe[Ir._id]=Ir}me=K(Se),Te=K(fe),De=H(me,xe),Be=H(Te,ge),Ze=!Be&&!De,Je=j(re,re._fullLayout._axisMatchGroups,Se,fe);var vr=(Ve=j(re,re._fullLayout._axisConstraintGroups,Se,fe,Je)).isSubplotConstrained||Je.isSubplotConstrained;Ye=xe||vr,tt=ge||vr;var Br=re._fullLayout;st=Br._has("scattergl"),vt=Br._has("splom"),Pt=Br._has("svg")}Fe();var cr,He=(cr=Be+De)?"nsew"===cr?Rt?"":"pan"===re._fullLayout.dragmode?"move":"crosshair":cr.toLowerCase()+"-resize":"pointer",Oe=B(ne,ge+xe+"drag",He,se,oe,pe,ce);if(Ze&&!Rt)return Oe.onmousedown=null,Oe.style.pointerEvents="none",Oe;var $e,ke,Le,Pe,Ce,Xe,at,pt,ut,St,ot={element:Oe,gd:re,plotinfo:ne};function Et(){ot.plotinfo.selection=!1,k(re)}function Lt(cr,sr){var An,$r,Rr,Lr,Qr,mr=ot.gd;if(mr._fullLayout._activeShapeIndex>=0)mr._fullLayout._deactivateShape(mr);else{var Ir=mr._fullLayout.clickmode;if(N(mr),2!==cr||Yt||function(){if(!re._transitioningWithDuration){var cr=re._context.doubleClick,sr=[];De&&(sr=sr.concat(me)),Be&&(sr=sr.concat(Te)),Je.xaxes&&(sr=sr.concat(Je.xaxes)),Je.yaxes&&(sr=sr.concat(Je.yaxes));var mr,Ir,vr,Br={};if("reset+autosize"===cr)for(cr="autosize",Ir=0;Ir<sr.length;Ir++)if((mr=sr[Ir])._rangeInitial&&(mr.range[0]!==mr._rangeInitial[0]||mr.range[1]!==mr._rangeInitial[1])||!mr._rangeInitial&&!mr.autorange){cr="reset";break}if("autosize"===cr)for(Ir=0;Ir<sr.length;Ir++)(mr=sr[Ir]).fixedrange||(Br[mr._name+".autorange"]=!0);else if("reset"===cr)for((De||Ve.isSubplotConstrained)&&(sr=sr.concat(Ve.xaxes)),Be&&!Ve.isSubplotConstrained&&(sr=sr.concat(Ve.yaxes)),Ve.isSubplotConstrained&&(De?Be||(sr=sr.concat(Te)):sr=sr.concat(me)),Ir=0;Ir<sr.length;Ir++)(mr=sr[Ir]).fixedrange||(mr._rangeInitial?(Br[mr._name+".range[0]"]=(vr=mr._rangeInitial)[0],Br[mr._name+".range[1]"]=vr[1]):Br[mr._name+".autorange"]=!0);re.emit("plotly_doubleclick",null),n.call("_guiRelayout",re,Br)}}(),Rt)Ir.indexOf("select")>-1&&L(sr,mr,me,Te,ne.id,ot),Ir.indexOf("event")>-1&&s.click(mr,sr,ne.id);else if(1===cr&&Yt){var vr=ge?be:we,Br="s"===ge||"w"===xe?0:1,Jr=vr._name+".range["+Br+"]",ln=(Lr=(An=vr).range[$r=Br],Qr=Math.abs(Lr-An.range[1-$r]),"date"===An.type?Lr:"log"===An.type?(Rr=Math.ceil(Math.max(0,-Math.log(Qr)/Math.LN10))+3,b("."+Rr+"g")(Math.pow(10,Lr))):(Rr=Math.floor(Math.log(Math.abs(Lr))/Math.LN10)-Math.floor(Math.log(Qr)/Math.LN10)+4,b("."+String(Rr)+"g")(Lr))),En="left",Cn="middle";if(vr.fixedrange)return;ge?(Cn="n"===ge?"top":"bottom","right"===vr.side&&(En="right")):"e"===xe&&(En="right"),mr._context.showAxisRangeEntryBoxes&&p.select(Oe).call(a.makeEditable,{gd:mr,immediate:!0,background:mr._fullLayout.paper_bgcolor,text:String(ln),fill:vr.tickfont?vr.tickfont.color:"#444",horizontalAlign:En,verticalAlign:Cn}).on("edit",function(An){var $r=vr.d2r(An);void 0!==$r&&n.call("_guiRelayout",mr,Jr,$r)})}}}function Qe(cr,sr){if(re._transitioningWithDuration)return!1;var Cn,An,mr=Math.max(0,Math.min(Ie,rt*cr+$e)),Ir=Math.max(0,Math.min(ze,et*sr+ke)),vr=Math.abs(mr-$e),Br=Math.abs(Ir-ke);function Jr(){at="",Le.r=Le.l,Le.t=Le.b,ut.attr("d","M0,0Z")}if(Le.l=Math.min($e,mr),Le.r=Math.max($e,mr),Le.t=Math.min(ke,Ir),Le.b=Math.max(ke,Ir),Ve.isSubplotConstrained)vr>S||Br>S?(at="xy",vr/Ie>Br/ze?(Br=vr*ze/Ie,ke>Ir?Le.t=ke-Br:Le.b=ke+Br):(vr=Br*Ie/ze,$e>mr?Le.l=$e-vr:Le.r=$e+vr),ut.attr("d",Q(Le))):Jr();else if(Je.isSubplotConstrained)if(vr>S||Br>S){at="xy";var ln=Math.min(Le.l/Ie,(ze-Le.b)/ze),En=Math.max(Le.r/Ie,(ze-Le.t)/ze);Le.l=ln*Ie,Le.r=En*Ie,Le.b=(1-ln)*ze,Le.t=(1-En)*ze,ut.attr("d",Q(Le))}else Jr();else!Be||Br<Math.min(Math.max(.6*vr,P),S)?vr<P||!De?Jr():(Le.t=0,Le.b=ze,at="x",ut.attr("d","M"+((Cn=Le).l-.5)+","+((An=ke)-S-.5)+"h-3v"+(2*S+1)+"h3ZM"+(Cn.r+.5)+","+(An-S-.5)+"h3v"+(2*S+1)+"h-3Z")):!De||vr<Math.min(.6*Br,S)?(Le.l=0,Le.r=Ie,at="y",ut.attr("d",function(Cn,An){return"M"+(An-S-.5)+","+(Cn.t-.5)+"v-3h"+(2*S+1)+"v3ZM"+(An-S-.5)+","+(Cn.b+.5)+"v3h"+(2*S+1)+"v-3Z"}(Le,$e))):(at="xy",ut.attr("d",Q(Le)));Le.w=Le.r-Le.l,Le.h=Le.b-Le.t,at&&(St=!0),re._dragged=St,te(pt,ut,Le,Ce,Xe,Pe),mt(),re.emit("plotly_relayouting",Mt),Xe=!0}function mt(){Mt={},"xy"!==at&&"x"!==at||(V(me,Le.l/Ie,Le.r/Ie,Mt,Ve.xaxes),Dt("x",Mt)),"xy"!==at&&"y"!==at||(V(Te,(ze-Le.b)/ze,(ze-Le.t)/ze,Mt,Ve.yaxes),Dt("y",Mt))}function It(){mt(),N(re),Gt(),U(re)}ot.prepFn=function(cr,sr,mr){var Ir=ot.dragmode,vr=re._fullLayout.dragmode;vr!==Ir&&(ot.dragmode=vr),Fe(),rt=re._fullLayout._invScaleX,et=re._fullLayout._invScaleY,Ze||(Rt?cr.shiftKey?"pan"===vr?vr="zoom":g(vr)||(vr="pan"):cr.ctrlKey&&(vr="pan"):vr="pan"),ot.minDrag=h(vr)?1:void 0,g(vr)?(ot.xaxes=me,ot.yaxes=Te,T(cr,sr,mr,ot,vr)):(ot.clickFn=Lt,g(Ir)&&Et(),Ze||("zoom"===vr?(ot.moveFn=Qe,ot.doneFn=It,ot.minDrag=1,function(Br,Jr,ln){var En=Oe.getBoundingClientRect();$e=Jr-En.left,ke=ln-En.top,re._fullLayout._calcInverseTransform(re);var Cn=m.apply3DTransform(re._fullLayout._invTransform)($e,ke);Le={l:$e=Cn[0],r:$e,w:0,t:ke=Cn[1],b:ke,h:0},Pe=re._hmpixcount?re._hmlumcount/re._hmpixcount:v(re._fullLayout.plot_bgcolor).getLuminance(),Xe=!1,at="xy",St=!1,pt=G(bt,Pe,_e,Me,Ce="M0,0H"+Ie+"V"+ze+"H0V0"),ut=X(bt,_e,Me)}(0,sr,mr)):"pan"===vr&&(ot.moveFn=_t,ot.doneFn=Gt))),re._fullLayout._redrag=function(){var Br=re._dragdata;Br&&Br.element===Oe&&(g(re._fullLayout.dragmode)||(Fe(),Kt([0,0,Ie,ze]),ot.moveFn(Br.dx,Br.dy)))}},c.init(ot);var jt=[0,0,Ie,ze],Zt=null,Re=O.REDRAWDELAY,lt=ne.mainplot?re._fullLayout._plots[ne.mainplot]:ne;function _t(cr,sr){if(cr*=rt,sr*=et,!re._transitioningWithDuration){if(re._fullLayout._replotting=!0,"ew"===De||"ns"===Be){var mr=De?-cr:0,Ir=Be?-sr:0;if(Je.isSubplotConstrained){if(De&&Be){var vr=(cr/Ie-sr/ze)/2;mr=-(cr=vr*Ie),Ir=-(sr=-vr*ze)}Be?mr=-Ir*Ie/ze:Ir=-mr*ze/Ie}return De&&(Z(me,cr),Dt("x")),Be&&(Z(Te,sr),Dt("y")),Kt([mr,Ir,Ie,ze]),Vt(),void re.emit("plotly_relayouting",Mt)}var Br,Jr,ln="w"===De==("n"===Be)?1:-1;if(De&&Be&&(Ve.isSubplotConstrained||Je.isSubplotConstrained)){var En=(cr/Ie+ln*sr/ze)/2;cr=En*Ie,sr=ln*En*ze}if("w"===De?cr=Rr(me,0,cr):"e"===De?cr=Rr(me,1,-cr):De||(cr=0),"n"===Be?sr=Rr(Te,1,sr):"s"===Be?sr=Rr(Te,0,-sr):Be||(sr=0),Br="w"===De?cr:0,Jr="n"===Be?sr:0,Ve.isSubplotConstrained&&!Je.isSubplotConstrained||Je.isSubplotConstrained&&De&&Be&&ln>0){var Cn;if(Je.isSubplotConstrained||!De&&1===Be.length){for(Cn=0;Cn<me.length;Cn++)me[Cn].range=me[Cn]._r.slice(),M(me[Cn],1-sr/ze);Br=(cr=sr*Ie/ze)/2}if(Je.isSubplotConstrained||!Be&&1===De.length){for(Cn=0;Cn<Te.length;Cn++)Te[Cn].range=Te[Cn]._r.slice(),M(Te[Cn],1-cr/Ie);Jr=(sr=cr*ze/Ie)/2}}Je.isSubplotConstrained&&Be||Dt("x"),Je.isSubplotConstrained&&De||Dt("y");var An=Ie-cr,$r=ze-sr;!Je.isSubplotConstrained||De&&Be||(De?(Jr=Br?0:cr*ze/Ie,$r=An*ze/Ie):(Br=Jr?0:sr*Ie/ze,An=$r*Ie/ze)),Kt([Br,Jr,An,$r]),Vt(),re.emit("plotly_relayouting",Mt)}function Rr(Lr,Qr,On){for(var zr,sn,Mn=1-Qr,Tn=0;Tn<Lr.length;Tn++){var Rn=Lr[Tn];if(!Rn.fixedrange){zr=Rn,sn=Rn._rl[Mn]+(Rn._rl[Qr]-Rn._rl[Mn])/W(On/Rn._length);var $t=Rn.l2r(sn);!1!==$t&&void 0!==$t&&(Rn.range[Qr]=$t)}}return zr._length*(zr._rl[Qr]-sn)/(zr._rl[Qr]-zr._rl[Mn])}}function Dt(cr,sr){for(var mr=Je.isSubplotConstrained?{x:Te,y:me}[cr]:Je[cr+"axes"],Ir=Je.isSubplotConstrained?{x:me,y:Te}[cr]:[],vr=0;vr<mr.length;vr++){var Br=mr[vr],Jr=Br._id,ln=Je.xLinks[Jr]||Je.yLinks[Jr],En=Ir[0]||Se[ln]||fe[ln];En&&(sr?(sr[Br._name+".range[0]"]=sr[En._name+".range[0]"],sr[Br._name+".range[1]"]=sr[En._name+".range[1]"]):Br.range=En.range.slice())}}function Vt(){var cr,sr=[];function mr(Br){for(cr=0;cr<Br.length;cr++)Br[cr].fixedrange||sr.push(Br[cr]._id)}for(Ye&&(mr(me),mr(Ve.xaxes),mr(Je.xaxes)),tt&&(mr(Te),mr(Ve.yaxes),mr(Je.yaxes)),Mt={},cr=0;cr<sr.length;cr++){var vr=_(re,sr[cr]);i.drawOne(re,vr,{skipTitle:!0}),Mt[vr._name+".range[0]"]=vr.range[0],Mt[vr._name+".range[1]"]=vr.range[1]}i.redrawComponents(re,sr)}function Gt(){Kt([0,0,Ie,ze]),m.syncOrAsync([w.previousPromises,function(){re._fullLayout._replotting=!1,n.call("_guiRelayout",re,Mt)}],re)}function Kt(cr){var sr,mr,Ir,vr,Br=re._fullLayout,Jr=Br._plots,ln=Br._subplots.cartesian;if(vt&&n.subplotsRegistry.splom.drag(re),st)for(sr=0;sr<ln.length;sr++)if(Ir=(mr=Jr[ln[sr]]).xaxis,vr=mr.yaxis,mr._scene){var En=m.simpleMap(Ir.range,Ir.r2l),Cn=m.simpleMap(vr.range,vr.r2l);mr._scene.update({range:[En[0],Cn[0],En[1],Cn[1]]})}if((vt||st)&&(x(re),d(re)),Pt){var An=cr[2]/we._length,$r=cr[3]/be._length;for(sr=0;sr<ln.length;sr++){Ir=(mr=Jr[ln[sr]]).xaxis,vr=mr.yaxis;var Rr,Lr,Qr,On,sn=(tt||Je.isSubplotConstrained)&&!vr.fixedrange&&fe[vr._id];if((Ye||Je.isSubplotConstrained)&&!Ir.fixedrange&&Se[Ir._id]?(Rr=An,Qr=xe||Je.isSubplotConstrained?cr[0]:hr(Ir,Rr)):Je.xaHash[Ir._id]?(Rr=An,Qr=cr[0]*Ir._length/we._length):Je.yaHash[Ir._id]?(Rr=$r,Qr="ns"===Be?-cr[1]*Ir._length/be._length:hr(Ir,Rr,{n:"top",s:"bottom"}[Be])):Qr=dr(Ir,Rr=ir(Ir,An,$r)),sn?(Lr=$r,On=ge||Je.isSubplotConstrained?cr[1]:hr(vr,Lr)):Je.yaHash[vr._id]?(Lr=$r,On=cr[1]*vr._length/be._length):Je.xaHash[vr._id]?(Lr=An,On="ew"===De?-cr[0]*vr._length/we._length:hr(vr,Lr,{e:"right",w:"left"}[De])):On=dr(vr,Lr=ir(vr,An,$r)),Rr||Lr){Rr||(Rr=1),Lr||(Lr=1);var Mn=Ir._offset-Qr/Rr,Tn=vr._offset-On/Lr;mr.clipRect.call(u.setTranslate,Qr,On).call(u.setScale,Rr,Lr),mr.plot.call(u.setTranslate,Mn,Tn).call(u.setScale,1/Rr,1/Lr),Rr===mr.xScaleFactor&&Lr===mr.yScaleFactor||(u.setPointGroupScale(mr.zoomScalePts,Rr,Lr),u.setTextPointsScale(mr.zoomScaleTxt,Rr,Lr)),u.hideOutsideRangePoints(mr.clipOnAxisFalseTraces,mr),mr.xScaleFactor=Rr,mr.yScaleFactor=Lr}}}}function ir(cr,sr,mr){return cr.fixedrange?0:Ye&&Ve.xaHash[cr._id]?sr:tt&&(Ve.isSubplotConstrained?Ve.xaHash:Ve.yaHash)[cr._id]?mr:0}function dr(cr,sr){return sr?(cr.range=cr._r.slice(),M(cr,sr),hr(cr,sr)):0}function hr(cr,sr,mr){return cr._length*(1-sr)*o[mr||cr.constraintoward||"middle"]}return ge.length*xe.length!=1&&J(Oe,function(cr){if(re._context._scrollZoom.cartesian||re._fullLayout._enablescrollzoom){if(Et(),re._transitioningWithDuration)return cr.preventDefault(),void cr.stopPropagation();Fe(),clearTimeout(Zt);var sr=-cr.deltaY;if(isFinite(sr)||(sr=cr.wheelDelta/10),isFinite(sr)){var mr,Ir=Math.exp(-Math.min(Math.max(sr,-20),20)/200),vr=lt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Br=(cr.clientX-vr.left)/vr.width,Jr=(vr.bottom-cr.clientY)/vr.height;if(Ye){for(xe||(Br=.5),mr=0;mr<me.length;mr++)ln(me[mr],Br,Ir);Dt("x"),jt[2]*=Ir,jt[0]+=jt[2]*Br*(1/Ir-1)}if(tt){for(ge||(Jr=.5),mr=0;mr<Te.length;mr++)ln(Te[mr],Jr,Ir);Dt("y"),jt[3]*=Ir,jt[1]+=jt[3]*(1-Jr)*(1/Ir-1)}Kt(jt),Vt(),re.emit("plotly_relayouting",Mt),Zt=setTimeout(function(){re._fullLayout&&(jt=[0,0,Ie,ze],Gt())},Re),cr.preventDefault()}else m.log("Did not find wheel motion attributes: ",cr)}function ln(En,Cn,An){if(!En.fixedrange){var $r=m.simpleMap(En.range,En.r2l),Rr=$r[0]+($r[1]-$r[0])*Cn;En.range=$r.map(function(Lr){return En.l2r(Rr+(Lr-Rr)*An)})}}}),Oe},makeDragger:R,makeRectDragger:B,makeZoombox:G,makeCorners:X,updateZoombox:te,xyCorners:Q,transitionZoombox:D,removeZoombox:N,showDoubleClickNotifier:U,attachWheelEventHandler:J}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/fx"),b=y("../../components/dragelement"),v=y("../../lib/setcursor"),e=y("./dragbox").makeDragBox,n=y("./constants").DRAGGERSIZE;ee.initInteractions=function(t){var a=t._fullLayout;if(t._context.staticPlot)p.select(t).selectAll(".drag").remove();else if(a._has("cartesian")||a._has("splom")){Object.keys(a._plots||{}).sort(function(u,s){if((a._plots[u].mainplot&&!0)===(a._plots[s].mainplot&&!0)){var i=u.split("y"),l=s.split("y");return i[0]===l[0]?Number(i[1]||1)-Number(l[1]||1):Number(i[0]||1)-Number(l[0]||1)}return a._plots[u].mainplot?1:-1}).forEach(function(u){var s=a._plots[u],i=s.xaxis,l=s.yaxis;if(!s.mainplot){var c=e(t,s,i._offset,l._offset,i._length,l._length,"ns","ew");c.onmousemove=function(h){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===u&&t._fullLayout._plots[u]&&m.hover(t,h,u)},m.hover(t,h,u),t._fullLayout._lasthover=c,t._fullLayout._hoversubplot=u},c.onmouseout=function(h){t._dragging||(t._fullLayout._hoversubplot=null,b.unhover(t,h))},t._context.showAxisDragHandles&&(e(t,s,i._offset-n,l._offset-n,n,n,"n","w"),e(t,s,i._offset+i._length,l._offset-n,n,n,"n","e"),e(t,s,i._offset-n,l._offset+l._length,n,n,"s","w"),e(t,s,i._offset+i._length,l._offset+l._length,n,n,"s","e"))}if(t._context.showAxisDragHandles){if(u===i._mainSubplot){var f=i._mainLinePosition;"top"===i.side&&(f-=n),e(t,s,i._offset+.1*i._length,f,.8*i._length,n,"","ew"),e(t,s,i._offset,f,.1*i._length,n,"","w"),e(t,s,i._offset+.9*i._length,f,.1*i._length,n,"","e")}if(u===l._mainSubplot){var g=l._mainLinePosition;"right"!==l.side&&(g-=n),e(t,s,g,l._offset+.1*l._length,n,.8*l._length,"ns",""),e(t,s,g,l._offset+.9*l._length,n,.1*l._length,"s",""),e(t,s,g,l._offset,n,.1*l._length,"n","")}}});var r=a._hoverlayer.node();r.onmousemove=function(u){u.target=t._fullLayout._lasthover,m.hover(t,u,a._hoversubplot)},r.onclick=function(u){u.target=t._fullLayout._lasthover,m.click(t,u)},r.onmousedown=function(u){t._fullLayout._lasthover.onmousedown(u)},ee.updateFx(t)}},ee.updateFx=function(t){var a=t._fullLayout;v(a._draggers,"pan"===a.dragmode?"move":"crosshair")}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(y,$,ee){"use strict";$.exports={clearOutlineControllers:function(p){var m=p._fullLayout._zoomlayer;m&&m.selectAll(".outline-controllers").remove()},clearSelect:function(p){var m=p._fullLayout._zoomlayer;m&&m.selectAll(".select-outline").remove(),p._fullLayout._drawing=!1}}},{}],566:[function(y,$,ee){"use strict";var p=y("../../lib").strTranslate;function m(b,v){switch(b.type){case"log":return b.p2d(v);case"date":return b.p2r(v,0,b.calendar);default:return b.p2r(v)}}$.exports={p2r:m,r2p:function(b,v){switch(b.type){case"log":return b.d2p(v);case"date":return b.r2p(v,0,b.calendar);default:return b.r2p(v)}},axValue:function(b){var v="y"===b._id.charAt(0)?1:0;return function(e){return m(b,e[v])}},getTransform:function(b){return p(b.xaxis._offset,b.yaxis._offset)}}},{"../../lib":503}],567:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../lib"),b=y("./axis_ids");$.exports=function(v){return function(e,n){var t=e[v];if(Array.isArray(t))for(var a=p.subplotsRegistry.cartesian,r=a.idRegex,u=n._subplots,s=u.xaxis,i=u.yaxis,l=u.cartesian,c=n._has("cartesian")||n._has("gl2d"),f=0;f<t.length;f++){var g=t[f];if(m.isPlainObject(g)){var h=b.cleanId(g.xref,"x",!1),o=b.cleanId(g.yref,"y",!1),x=r.x.test(h),d=r.y.test(o);if(x||d){c||m.pushUnique(n._basePlotModules,a);var w=!1;x&&-1===s.indexOf(h)&&(s.push(h),w=!0),d&&-1===i.indexOf(o)&&(i.push(o),w=!0),w&&x&&d&&l.push(h+o)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../registry"),b=y("../../lib"),v=y("../plots"),e=y("../../components/drawing"),n=y("../get_data").getModuleCalcData,t=y("./axis_ids"),a=y("./constants"),r=y("../../constants/xmlns_namespaces"),u=b.ensureSingle;function s(g,h,o){return b.ensureSingle(g,h,o,function(x){x.datum(o)})}function i(g,h,o,x,d){for(var w,_,T,k=a.traceLayerClasses,L=g._fullLayout,M=L._modules,O=[],P=[],S=0;S<M.length;S++){var E=(w=M[S]).name,R=m.modules[E].categories;if(R.svg){var B=w.layerName||E+"layer",H=w.plot;T=(_=n(o,H))[0],o=_[1],T.length&&O.push({i:k.indexOf(B),className:B,plotMethod:H,cdModule:T}),R.zoomScale&&P.push("."+B)}}O.sort(function(W,G){return W.i-G.i});var V=h.plot.selectAll("g.mlayer").data(O,function(W){return W.className});if(V.enter().append("g").attr("class",function(W){return W.className}).classed("mlayer",!0).classed("rangeplot",h.isRangePlot),V.exit().remove(),V.order(),V.each(function(W){var G=p.select(this),X=W.className;W.plotMethod(g,h,W.cdModule,G,x,d),-1===a.clipOnAxisFalseQuery.indexOf("."+X)&&e.setClipUrl(G,h.layerClipId,g)}),L._has("scattergl")&&(w=m.getModule("scattergl"),T=n(o,w)[0],w.plot(g,h,T)),!g._context.staticPlot&&(h._hasClipOnAxisFalse&&(h.clipOnAxisFalseTraces=h.plot.selectAll(a.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var Z=h.plot.selectAll(P.join(",")).selectAll(".trace");h.zoomScalePts=Z.selectAll("path.point"),h.zoomScaleTxt=Z.selectAll(".textpoint")}}function l(g,h){var o=h.plotgroup,x=h.id,d=a.layerValue2layerClass[h.xaxis.layer],w=a.layerValue2layerClass[h.yaxis.layer],_=g._fullLayout._hasOnlyLargeSploms;if(h.mainplot){var T=h.mainplotinfo,k=T.plotgroup,L=x+"-x",M=x+"-y";h.gridlayer=T.gridlayer,h.zerolinelayer=T.zerolinelayer,u(T.overlinesBelow,"path",L),u(T.overlinesBelow,"path",M),u(T.overaxesBelow,"g",L),u(T.overaxesBelow,"g",M),h.plot=u(T.overplot,"g",x),u(T.overlinesAbove,"path",L),u(T.overlinesAbove,"path",M),u(T.overaxesAbove,"g",L),u(T.overaxesAbove,"g",M),h.xlines=k.select(".overlines-"+d).select("."+L),h.ylines=k.select(".overlines-"+w).select("."+M),h.xaxislayer=k.select(".overaxes-"+d).select("."+L),h.yaxislayer=k.select(".overaxes-"+w).select("."+M)}else if(_)h.xlines=u(o,"path","xlines-above"),h.ylines=u(o,"path","ylines-above"),h.xaxislayer=u(o,"g","xaxislayer-above"),h.yaxislayer=u(o,"g","yaxislayer-above");else{var O=u(o,"g","layer-subplot");h.shapelayer=u(O,"g","shapelayer"),h.imagelayer=u(O,"g","imagelayer"),h.gridlayer=u(o,"g","gridlayer"),h.zerolinelayer=u(o,"g","zerolinelayer"),u(o,"path","xlines-below"),u(o,"path","ylines-below"),h.overlinesBelow=u(o,"g","overlines-below"),u(o,"g","xaxislayer-below"),u(o,"g","yaxislayer-below"),h.overaxesBelow=u(o,"g","overaxes-below"),h.plot=u(o,"g","plot"),h.overplot=u(o,"g","overplot"),h.xlines=u(o,"path","xlines-above"),h.ylines=u(o,"path","ylines-above"),h.overlinesAbove=u(o,"g","overlines-above"),u(o,"g","xaxislayer-above"),u(o,"g","yaxislayer-above"),h.overaxesAbove=u(o,"g","overaxes-above"),h.xlines=o.select(".xlines-"+d),h.ylines=o.select(".ylines-"+w),h.xaxislayer=o.select(".xaxislayer-"+d),h.yaxislayer=o.select(".yaxislayer-"+w)}_||(s(h.gridlayer,"g",h.xaxis._id),s(h.gridlayer,"g",h.yaxis._id),h.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(t.idSort)),h.xlines.style("fill","none").classed("crisp",!0),h.ylines.style("fill","none").classed("crisp",!0)}function c(g,h){if(g){var o={};for(var x in g.each(function(T){var k=T[0];p.select(this).remove(),f(k,h),o[k]=!0}),h._plots)for(var d=h._plots[x].overlays||[],w=0;w<d.length;w++){var _=d[w];o[_.id]&&_.plot.selectAll(".trace").remove()}}}function f(g,h){h._draggers.selectAll("g."+g).remove(),h._defs.select("#clip"+h._uid+g+"plot").remove()}ee.name="cartesian",ee.attr=["xaxis","yaxis"],ee.idRoot=["x","y"],ee.idRegex=a.idRegex,ee.attrRegex=a.attrRegex,ee.attributes=y("./attributes"),ee.layoutAttributes=y("./layout_attributes"),ee.supplyLayoutDefaults=y("./layout_defaults"),ee.transitionAxes=y("./transition_axes"),ee.finalizeSubplots=function(g,h){var o,x,d,w=h._subplots,_=w.xaxis,T=w.yaxis,k=w.cartesian,L=k.concat(w.gl2d||[]),M={},O={};for(o=0;o<L.length;o++){var P=L[o].split("y");M[P[0]]=1,O["y"+P[1]]=1}for(o=0;o<_.length;o++)M[x=_[o]]||(d=(g[t.id2name(x)]||{}).anchor,a.idRegex.y.test(d)||(d="y"),k.push(x+d),L.push(x+d),O[d]||(O[d]=1,b.pushUnique(T,d)));for(o=0;o<T.length;o++)O[d=T[o]]||(x=(g[t.id2name(d)]||{}).anchor,a.idRegex.x.test(x)||(x="x"),k.push(x+d),L.push(x+d),M[x]||(M[x]=1,b.pushUnique(_,x)));if(!L.length){for(var S in x="",d="",g)a.attrRegex.test(S)&&("x"===S.charAt(0)?(!x||+S.substr(5)<+x.substr(5))&&(x=S):(!d||+S.substr(5)<+d.substr(5))&&(d=S));x=x?t.name2id(x):"x",d=d?t.name2id(d):"y",_.push(x),T.push(d),k.push(x+d)}},ee.plot=function(g,h,o,x){var d,w=g._fullLayout,_=w._subplots.cartesian,T=g.calcdata;if(!Array.isArray(h))for(h=[],d=0;d<T.length;d++)h.push(d);for(d=0;d<_.length;d++){for(var k,L=_[d],M=w._plots[L],O=[],P=0;P<T.length;P++){var S=T[P],E=S[0].trace;E.xaxis+E.yaxis===L&&((-1!==h.indexOf(E.index)||E.carpet)&&(k&&k[0].trace.xaxis+k[0].trace.yaxis===L&&-1!==["tonextx","tonexty","tonext"].indexOf(E.fill)&&-1===O.indexOf(k)&&O.push(k),O.push(S)),k=S)}i(g,M,O,o,x)}},ee.clean=function(g,h,o,x){var d,w,_,T=x._plots||{},k=h._plots||{},L=x._subplots||{};if(x._hasOnlyLargeSploms&&!h._hasOnlyLargeSploms)for(_ in T)(d=T[_]).plotgroup&&d.plotgroup.remove();var M=x._has&&x._has("gl"),O=h._has&&h._has("gl");if(M&&!O)for(_ in T)(d=T[_])._scene&&d._scene.destroy();if(L.xaxis&&L.yaxis){var P=t.listIds({_fullLayout:x});for(w=0;w<P.length;w++){var S=P[w];h[t.id2name(S)]||x._infolayer.selectAll(".g-"+S+"title").remove()}}var E=x._has&&x._has("cartesian"),R=h._has&&h._has("cartesian");if(E&&!R)c(x._cartesianlayer.selectAll(".subplot"),x),x._defs.selectAll(".axesclip").remove(),delete x._axisConstraintGroups,delete x._axisMatchGroups;else if(L.cartesian)for(w=0;w<L.cartesian.length;w++){var B=L.cartesian[w];k[B]||(x._cartesianlayer.selectAll("."+B+",."+B+"-x,."+B+"-y").remove(),f(B,x))}},ee.drawFramework=function(g){var h=g._fullLayout,o=function(d){var w,_,T,k,L,M,O=d._fullLayout,P=O._subplots.cartesian,S=P.length,E=[],R=[];for(w=0;w<S;w++){var V=(L=(k=O._plots[T=P[w]]).xaxis)._mainAxis._id+(M=k.yaxis)._mainAxis._id,Z=O._plots[V];k.overlays=[],V!==T&&Z?(k.mainplot=V,k.mainplotinfo=Z,R.push(T)):(k.mainplot=void 0,k.mainplotinfo=void 0,E.push(T))}for(w=0;w<R.length;w++)(k=O._plots[T=R[w]]).mainplotinfo.overlays.push(k);var W=E.concat(R),G=new Array(S);for(w=0;w<S;w++){var X=[T=W[w],(L=(k=O._plots[T]).xaxis).layer,(M=k.yaxis).layer,L.overlaying||"",M.overlaying||""];for(_=0;_<k.overlays.length;_++)X.push(k.overlays[_].id);G[w]=X}return G}(g),x=h._cartesianlayer.selectAll(".subplot").data(o,String);x.enter().append("g").attr("class",function(d){return"subplot "+d[0]}),x.order(),x.exit().call(c,h),x.each(function(d){var w=d[0],_=h._plots[w];_.plotgroup=p.select(this),l(g,_),_.draglayer=u(h._draggers,"g",w)})},ee.rangePlot=function(g,h,o){l(g,h),i(g,h,o),v.style(g)},ee.toSVG=function(g){var h=g._fullLayout._glimages,o=p.select(g).selectAll(".svg-container");o.filter(function(x,d){return d===o.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var x=this.toDataURL("image/png");h.append("svg:image").attr({xmlns:r.svg,"xlink:href":x,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},ee.updateFx=y("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(y,$,ee){"use strict";var p=y("../font_attributes"),m=y("../../components/color/attributes"),b=y("../../components/drawing/attributes").dash,v=y("../../lib/extend").extendFlat,e=y("../../plot_api/plot_template").templatedArray,n=y("../../plots/cartesian/axis_format_attributes").descriptionWithDates,t=y("../../constants/numerical").ONEDAY,a=y("./constants"),r=a.HOUR_PATTERN,u=a.WEEKDAY_PATTERN;$.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:m.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:p({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[u,r,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:t},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:v({},b,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:p({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:n("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:n("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:m.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:m.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:m.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",a.idRegex.x.toString(),a.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:p({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/color"),b=y("../../components/fx/helpers").isUnifiedHover,v=y("../../components/fx/hovermode_defaults"),e=y("../../plot_api/plot_template"),n=y("../layout_attributes"),t=y("./layout_attributes"),a=y("./type_defaults"),r=y("./axis_defaults"),u=y("./constraints"),s=y("./position_defaults"),i=y("./axis_ids"),l=i.id2name,c=i.name2id,f=y("./constants").AX_ID_PATTERN,g=y("../../registry"),h=g.traceIs,o=g.getComponentMethod;function x(d,w,_){Array.isArray(d[w])?d[w].push(_):d[w]=[_]}$.exports=function(d,w,_){var T,k,L=w.autotypenumbers,M={},O={},P={},S={},E={},R={},B={},H={},V={},Z={};for(T=0;T<_.length;T++){var W=_[T];if(h(W,"cartesian")||h(W,"gl2d")){var G,X;if(W.xaxis)G=l(W.xaxis),x(M,G,W);else if(W.xaxes)for(k=0;k<W.xaxes.length;k++)x(M,l(W.xaxes[k]),W);if(W.yaxis)X=l(W.yaxis),x(M,X,W);else if(W.yaxes)for(k=0;k<W.yaxes.length;k++)x(M,l(W.yaxes[k]),W);"funnel"===W.type?"h"===W.orientation?(G&&(O[G]=!0),X&&(B[X]=!0)):X&&(P[X]=!0):"image"===W.type?(X&&(H[X]=!0),G&&(H[G]=!0)):(X&&(E[X]=!0,R[X]=!0),h(W,"carpet")&&("carpet"!==W.type||W._cheater)||G&&(S[G]=!0)),"carpet"===W.type&&W._cheater&&G&&(O[G]=!0),h(W,"2dMap")&&(V[G]=!0,V[X]=!0),h(W,"oriented")&&(Z["h"===W.orientation?X:G]=!0)}}var te=w._subplots,D=te.xaxis,N=te.yaxis,U=p.simpleMap(D,l),Q=p.simpleMap(N,l),j=U.concat(Q),J=m.background;D.length&&N.length&&(J=p.coerce(d,w,n,"plot_bgcolor"));var K,re,ne,se,oe,pe=m.combine(J,w.paper_bgcolor);function ce(){oe._traceIndices=(M[K]||[]).map(function(bt){return bt._expandedIndex}),oe._annIndices=[],oe._shapeIndices=[],oe._imgIndices=[],oe._subplotsWith=[],oe._counterAxes=[],oe._name=oe._attr=K,oe._id=re}function ge(et,bt){return p.coerce(se,oe,t,et,bt)}function xe(et,bt){return p.coerce2(se,oe,t,et,bt)}function we(et){return"x"===et?N:D}function be(et,bt){for(var Rt="x"===et?U:Q,Yt=[],Fe=0;Fe<Rt.length;Fe++){var He=Rt[Fe];He===bt||(d[He]||{}).overlaying||Yt.push(c(He))}return Yt}var Se={x:we("x"),y:we("y")},fe=Se.x.concat(Se.y),me={},Te=[];function _e(){var et=se.matches;f.test(et)&&-1===fe.indexOf(et)&&(me[et]=se.type,Te=Object.keys(me))}var Me=v(d,w),Ie=b(Me);for(T=0;T<j.length;T++){re=c(K=j[T]),ne=K.charAt(0),p.isPlainObject(d[K])||(d[K]={}),se=d[K],oe=e.newContainer(w,K,ne+"axis"),ce();var Je={letter:ne,font:w.font,outerTicks:V[K],showGrid:!Z[K],data:M[K]||[],bgColor:pe,calendar:w.calendar,automargin:!0,visibleDflt:"x"===ne&&!S[K]&&O[K]||"y"===ne&&!E[K]&&P[K],reverseDflt:"y"===ne&&(!R[K]&&B[K]||H[K]),autotypenumbersDflt:L,splomStash:((w._splomAxes||{})[ne]||{})[re]};ge("uirevision",w.uirevision),a(se,oe,ge,Je),r(se,oe,ge,Je,w);var De=Ie&&ne===Me.charAt(0),Be=xe("spikecolor",Ie?oe.color:void 0),Ze=xe("spikethickness",Ie?1.5:void 0),Ye=xe("spikedash",Ie?"dot":void 0),tt=xe("spikemode",Ie?"across":void 0),st=xe("spikesnap");ge("showspikes",!!(De||Be||Ze||Ye||tt||st))||(delete oe.spikecolor,delete oe.spikethickness,delete oe.spikedash,delete oe.spikemode,delete oe.spikesnap),s(se,oe,ge,{letter:ne,counterAxes:Se[ne],overlayableAxes:be(ne,K),grid:w.grid}),ge("title.standoff"),_e(),oe._input=se}for(T=0;T<Te.length;){re=Te[T++],ne=(K=l(re)).charAt(0),p.isPlainObject(d[K])||(d[K]={}),se=d[K],oe=e.newContainer(w,K,ne+"axis"),ce();var vt={letter:ne,font:w.font,outerTicks:V[K],showGrid:!Z[K],data:[],bgColor:pe,calendar:w.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:L,splomStash:((w._splomAxes||{})[ne]||{})[re]};ge("uirevision",w.uirevision),oe.type=me[re]||"linear",r(se,oe,ge,vt,w),s(se,oe,ge,{letter:ne,counterAxes:Se[ne],overlayableAxes:be(ne,K),grid:w.grid}),ge("fixedrange"),_e(),oe._input=se}var Pt=o("rangeslider","handleDefaults"),Mt=o("rangeselector","handleDefaults");for(T=0;T<U.length;T++)se=d[K=U[T]],oe=w[K],Pt(d,w,K),"date"===oe.type&&Mt(se,oe,w,Q,oe.calendar),ge("fixedrange");for(T=0;T<Q.length;T++){se=d[K=Q[T]];var rt=w[l((oe=w[K]).anchor)];ge("fixedrange",o("rangeslider","isVisible")(rt))}u.handleDefaults(d,w,{axIds:fe.concat(Te).sort(i.idSort),axHasImage:H})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(y,$,ee){"use strict";var p=y("tinycolor2").mix,m=y("../../components/color/attributes").lightFraction,b=y("../../lib");$.exports=function(v,e,n,t){var a=(t=t||{}).dfltColor;function r(g,h){return b.coerce2(v,e,t.attributes,g,h)}var u=r("linecolor",a),s=r("linewidth");n("showline",t.showLine||!!u||!!s)||(delete e.linecolor,delete e.linewidth);var i=r("gridcolor",p(a,t.bgColor,t.blend||m).toRgbString()),l=r("gridwidth");if(n("showgrid",t.showGrid||!!i||!!l)||(delete e.gridcolor,delete e.gridwidth),!t.noZeroLine){var c=r("zerolinecolor",a),f=r("zerolinewidth");n("zeroline",t.showGrid||!!c||!!f)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib");$.exports=function(b,v,e,n){var t,a,r,u,s=n.counterAxes||[],i=n.overlayableAxes||[],l=n.letter,c=n.grid;c&&(t=c._anchors[v._id],(a=c._domains[l][c._axisMap[v._id]])&&(r=c[l+"side"].split(" ")[0],u=c.domain[l]["right"===r||"top"===r?1:0])),a=a||[0,1],t=t||(p(b.position)?"free":s[0]||"free"),r=r||("x"===l?"bottom":"left"),u=u||0,"free"===m.coerce(b,v,{anchor:{valType:"enumerated",values:["free"].concat(s),dflt:t}},"anchor")&&e("position",u),m.coerce(b,v,{side:{valType:"enumerated",values:"x"===l?["bottom","top"]:["left","right"],dflt:r}},"side");var f=!1;if(i.length&&(f=m.coerce(b,v,{overlaying:{valType:"enumerated",values:[!1].concat(i),dflt:!1}},"overlaying")),!f){var g=e("domain",a);g[0]>g[1]-1/4096&&(v.domain=a),m.noneOrAll(b.domain,v.domain,a)}return e("layer"),v}},{"../../lib":503,"fast-isnumeric":190}],573:[function(y,$,ee){"use strict";var p=y("./show_dflt");$.exports=function(m,b,v,e,n){n||(n={});var t=n.tickSuffixDflt,a=p(m);v("tickprefix")&&v("showtickprefix",a),v("ticksuffix",t)&&v("showticksuffix",a)}},{"./show_dflt":577}],574:[function(y,$,ee){"use strict";var p=y("../../constants/alignment").FROM_BL;$.exports=function(m,b,v){void 0===v&&(v=p[m.constraintoward||"center"]);var e=[m.r2l(m.range[0]),m.r2l(m.range[1])],n=e[0]+(e[1]-e[0])*v;m.range=m._input.range=[m.l2r(n+(e[0]-n)*b),m.l2r(n+(e[1]-n)*b)],m.setScale()}},{"../../constants/alignment":471}],575:[function(y,$,ee){"use strict";var p=y("polybooljs"),m=y("../../registry"),b=y("../../components/drawing").dashStyle,v=y("../../components/color"),e=y("../../components/fx"),n=y("../../components/fx/helpers").makeEventData,t=y("../../components/dragelement/helpers"),a=t.freeMode,r=t.rectMode,u=t.drawMode,s=t.openMode,i=t.selectMode,l=y("../../components/shapes/draw_newshape/display_outlines"),c=y("../../components/shapes/draw_newshape/helpers").handleEllipse,f=y("../../components/shapes/draw_newshape/newshapes"),g=y("../../lib"),h=y("../../lib/polygon"),o=y("../../lib/throttle"),x=y("./axis_ids").getFromId,d=y("../../lib/clear_gl_canvases"),w=y("../../plot_api/subroutines").redrawReglTraces,_=y("./constants"),T=_.MINSELECT,k=h.filter,L=h.tester,M=y("./handle_outline").clearSelect,O=y("./helpers"),P=O.p2r,S=O.axValue,E=O.getTransform;function R(U,Q,j,J,K,re,ne){var se,oe,pe,ce,ge,xe,we,be,Se,Ve,fe=Q._hoverdata,me=Q._fullLayout.clickmode.indexOf("event")>-1,Te=[];if((Ve=fe)&&Array.isArray(Ve)&&!0!==Ve[0].hoverOnBox){Z(U,Q,re);var _e=function(Ve,Je){var De,Be,Ze=Ve[0],Ye=-1,tt=[];for(Be=0;Be<Je.length;Be++)if(Ze.fullData._expandedIndex===(De=Je[Be]).cd[0].trace._expandedIndex){if(!0===Ze.hoverOnBox)break;void 0!==Ze.pointNumber?Ye=Ze.pointNumber:void 0!==Ze.binNumber&&(Ye=Ze.binNumber,tt=Ze.pointNumbers);break}return{pointNumber:Ye,pointNumbers:tt,searchInfo:De}}(fe,se=G(Q,j,J,K));if(_e.pointNumbers.length>0?function(Ve,Je){var De,Be,Ze,Ye=[];for(Ze=0;Ze<Ve.length;Ze++)(De=Ve[Ze]).cd[0].trace.selectedpoints&&De.cd[0].trace.selectedpoints.length>0&&Ye.push(De);if(1===Ye.length&&Ye[0]===Je.searchInfo&&(Be=Je.searchInfo.cd[0].trace).selectedpoints.length===Je.pointNumbers.length){for(Ze=0;Ze<Je.pointNumbers.length;Ze++)if(Be.selectedpoints.indexOf(Je.pointNumbers[Ze])<0)return!1;return!0}return!1}(se,_e):function(Ve){var De,Be,Ze=0;for(Be=0;Be<Ve.length;Be++)if((De=Ve[Be].cd[0].trace).selectedpoints&&(De.selectedpoints.length>1||(Ze+=De.selectedpoints.length)>1))return!1;return 1===Ze}(se)&&(xe=X(_e))){for(ne&&ne.remove(),Se=0;Se<se.length;Se++)(oe=se[Se])._module.selectPoints(oe,!1);te(Q,se),W(re),me&&Q.emit("plotly_deselect",null)}else{for(we=U.shiftKey&&(void 0!==xe?xe:X(_e)),pe=function(Ve,Je,De){return{pointNumber:Ve,searchInfo:Je,subtract:De}}(_e.pointNumber,_e.searchInfo,we),ce=V(re.selectionDefs.concat([pe])),Se=0;Se<se.length;Se++)if(ge=D(se[Se]._module.selectPoints(se[Se],ce),se[Se]),Te.length)for(var Me=0;Me<ge.length;Me++)Te.push(ge[Me]);else Te=ge;if(te(Q,se,be={points:Te}),pe&&re&&re.selectionDefs.push(pe),ne){var Ie=re.mergedPolygons,ze=s(re.dragmode);l(N(Ie,ze),ne,re)}me&&Q.emit("plotly_selected",be)}}}function B(U){return"pointNumber"in U&&"searchInfo"in U}function H(U){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Q,j,J,K){return K.cd[0].trace._expandedIndex===U.searchInfo.cd[0].trace._expandedIndex&&J===U.pointNumber},isRect:!1,degenerate:!1,subtract:U.subtract}}function V(U){for(var Q=[],j=B(U[0])?0:U[0][0][0],J=j,K=B(U[0])?0:U[0][0][1],re=K,ne=0;ne<U.length;ne++)if(B(U[ne]))Q.push(H(U[ne]));else{var se=h.tester(U[ne]);se.subtract=U[ne].subtract,Q.push(se),j=Math.min(j,se.xmin),J=Math.max(J,se.xmax),K=Math.min(K,se.ymin),re=Math.max(re,se.ymax)}return{xmin:j,xmax:J,ymin:K,ymax:re,pts:[],contains:function(oe,pe,ce,ge){for(var xe=!1,we=0;we<Q.length;we++)Q[we].contains(oe,pe,ce,ge)&&(xe=!1===Q[we].subtract);return xe},isRect:!1,degenerate:!1}}function Z(U,Q,j){Q._fullLayout._drawing=!1;var J=Q._fullLayout,K=j.plotinfo,re=j.dragmode,ne=J._lastSelectedSubplot&&J._lastSelectedSubplot===K.id,se=(U.shiftKey||U.altKey)&&!(u(re)&&s(re));ne&&se&&K.selection&&K.selection.selectionDefs&&!j.selectionDefs?(j.selectionDefs=K.selection.selectionDefs,j.mergedPolygons=K.selection.mergedPolygons):se&&K.selection||W(j),ne||(M(Q),J._lastSelectedSubplot=K.id)}function W(U){var Q=U.dragmode,j=U.plotinfo,J=U.gd;if(J._fullLayout._activeShapeIndex>=0&&J._fullLayout._deactivateShape(J),u(Q)){var K=J._fullLayout._zoomlayer.selectAll(".select-outline-"+j.id);if(K&&J._fullLayout._drawing){var re=f(K,U);re&&m.call("_guiRelayout",J,{shapes:re}),J._fullLayout._drawing=!1}}j.selection={},j.selection.selectionDefs=U.selectionDefs=[],j.selection.mergedPolygons=U.mergedPolygons=[]}function G(U,Q,j,J){var K,re,ne,se=[],oe=Q.map(function(we){return we._id}),pe=j.map(function(we){return we._id});for(ne=0;ne<U.calcdata.length;ne++)if(!0===(re=(K=U.calcdata[ne])[0].trace).visible&&re._module&&re._module.selectPoints)if(!J||re.subplot!==J&&re.geo!==J)if("splom"===re.type&&re._xaxes[oe[0]]&&re._yaxes[pe[0]]){var ce=xe(re._module,K,Q[0],j[0]);ce.scene=U._fullLayout._splomScenes[re.uid],se.push(ce)}else if("sankey"===re.type){var ge=xe(re._module,K,Q[0],j[0]);se.push(ge)}else{if(-1===oe.indexOf(re.xaxis)||-1===pe.indexOf(re.yaxis))continue;se.push(xe(re._module,K,x(U,re.xaxis),x(U,re.yaxis)))}else se.push(xe(re._module,K,Q[0],j[0]));return se;function xe(we,be,Se,fe){return{_module:we,cd:be,xaxis:Se,yaxis:fe}}}function X(U){var Q=U.searchInfo.cd[0].trace,J=U.pointNumbers;return!!Q.selectedpoints&&Q.selectedpoints.indexOf(J.length>0?J[0]:U.pointNumber)>-1}function te(U,Q,j){var J,K,re,ne;for(J=0;J<Q.length;J++){var se=Q[J].cd[0].trace._fullInput,oe=U._fullLayout._tracePreGUI[se.uid]||{};void 0===oe.selectedpoints&&(oe.selectedpoints=se._input.selectedpoints||null)}if(j){var pe=j.points||[];for(J=0;J<Q.length;J++)(ne=Q[J].cd[0].trace)._input.selectedpoints=ne._fullInput.selectedpoints=[],ne._fullInput!==ne&&(ne.selectedpoints=[]);for(J=0;J<pe.length;J++){var ce=pe[J],ge=ce.data,xe=ce.fullData;ce.pointIndices?([].push.apply(ge.selectedpoints,ce.pointIndices),ne._fullInput!==ne&&[].push.apply(xe.selectedpoints,ce.pointIndices)):(ge.selectedpoints.push(ce.pointIndex),ne._fullInput!==ne&&xe.selectedpoints.push(ce.pointIndex))}}else for(J=0;J<Q.length;J++)delete(ne=Q[J].cd[0].trace).selectedpoints,delete ne._input.selectedpoints,ne._fullInput!==ne&&delete ne._fullInput.selectedpoints;var we=!1;for(J=0;J<Q.length;J++){ne=(re=(K=Q[J]).cd)[0].trace,m.traceIs(ne,"regl")&&(we=!0);var be=K._module,Se=be.styleOnSelect||be.style;Se&&(Se(U,re,re[0].node3),re[0].nodeRangePlot3&&Se(U,re,re[0].nodeRangePlot3))}we&&(d(U),w(U))}function D(U,Q){if(Array.isArray(U))for(var j=Q.cd,J=Q.cd[0].trace,K=0;K<U.length;K++)U[K]=n(U[K],J,j);return U}function N(U,Q){for(var j=[],J=0;J<U.length;J++){j[J]=[];for(var K=0;K<U[J].length;K++){j[J][K]=[],j[J][K][0]=K?"L":"M";for(var re=0;re<U[J][K].length;re++)j[J][K].push(U[J][K][re])}Q||j[J].push(["Z",j[J][0][1],j[J][0][2]])}return j}$.exports={prepSelect:function(U,Q,j,J,K){var re=a(K),ne=r(K),se=s(K),oe=u(K),pe=i(K),ce="drawcircle"===K,ge="drawline"===K||ce,xe=J.gd,we=xe._fullLayout,be=we._zoomlayer,Se=J.element.getBoundingClientRect(),fe=J.plotinfo,me=E(fe),Te=Q-Se.left,_e=j-Se.top;we._calcInverseTransform(xe);var Ie,ze,Ve,Je,De,Be,Ze,Me=g.apply3DTransform(we._invTransform)(Te,_e),Ye=we._invScaleX,tt=we._invScaleY,st=Te=Me[0],vt=_e=Me[1],Pt="M"+Te+","+_e,Mt=J.xaxes[0]._length,rt=J.yaxes[0]._length,et=J.xaxes.concat(J.yaxes),bt=U.altKey&&!(u(K)&&se);Z(U,xe,J),re&&(Ie=k([[Te,_e]],_.BENDPX));var Rt=be.selectAll("path.select-outline-"+fe.id).data(oe?[0]:[1,2]),Yt=we.newshape;Rt.enter().append("path").attr("class",function(Pe){return"select-outline select-outline-"+Pe+" select-outline-"+fe.id}).style(oe?{opacity:Yt.opacity/2,fill:se?void 0:Yt.fillcolor,stroke:Yt.line.color,"stroke-dasharray":b(Yt.line.dash,Yt.line.width),"stroke-width":Yt.line.width+"px"}:{}).attr("fill-rule",Yt.fillrule).classed("cursor-move",!!oe).attr("transform",me).attr("d",Pt+"Z");var Fe,He=be.append("path").attr("class","zoombox-corners").style({fill:v.background,stroke:v.defaultLine,"stroke-width":1}).attr("transform",me).attr("d","M0,0Z"),Oe=we._uid+_.SELECTID,$e=[],ke=G(xe,J.xaxes,J.yaxes,J.subplot);function Le(Pe,Ce){return Pe-Ce}Fe=fe.fillRangeItems?fe.fillRangeItems:ne?function(Pe,Ce){var Xe=Pe.range={};for(De=0;De<et.length;De++){var at=et[De],pt=at._id.charAt(0);Xe[at._id]=[P(at,Ce[pt+"min"]),P(at,Ce[pt+"max"])].sort(Le)}}:function(Pe,Ce,Xe){var at=Pe.lassoPoints={};for(De=0;De<et.length;De++){var pt=et[De];at[pt._id]=Xe.filtered.map(S(pt))}},J.moveFn=function(Pe,Ce){st=Math.max(0,Math.min(Mt,Ye*Pe+Te)),vt=Math.max(0,Math.min(rt,tt*Ce+_e));var Et,Lt,Xe=Math.abs(st-Te),at=Math.abs(vt-_e);if(ne){var pt,ut,St;if(pe){var ot=we.selectdirection;switch(pt="any"===ot?at<Math.min(.6*Xe,T)?"h":Xe<Math.min(.6*at,T)?"v":"d":ot){case"h":ut=ce?rt/2:0,St=rt;break;case"v":ut=ce?Mt/2:0,St=Mt}}if(oe)switch(we.newshape.drawdirection){case"vertical":pt="h",ut=ce?rt/2:0,St=rt;break;case"horizontal":pt="v",ut=ce?Mt/2:0,St=Mt;break;case"ortho":Xe<at?(pt="h",ut=_e,St=vt):(pt="v",ut=Te,St=st);break;default:pt="d"}"h"===pt?((Je=ge?c(ce,[st,ut],[st,St]):[[Te,ut],[Te,St],[st,St],[st,ut]]).xmin=ge?st:Math.min(Te,st),Je.xmax=ge?st:Math.max(Te,st),Je.ymin=Math.min(ut,St),Je.ymax=Math.max(ut,St),He.attr("d","M"+Je.xmin+","+(_e-T)+"h-4v"+2*T+"h4ZM"+(Je.xmax-1)+","+(_e-T)+"h4v"+2*T+"h-4Z")):"v"===pt?((Je=ge?c(ce,[ut,vt],[St,vt]):[[ut,_e],[ut,vt],[St,vt],[St,_e]]).xmin=Math.min(ut,St),Je.xmax=Math.max(ut,St),Je.ymin=ge?vt:Math.min(_e,vt),Je.ymax=ge?vt:Math.max(_e,vt),He.attr("d","M"+(Te-T)+","+Je.ymin+"v-4h"+2*T+"v4ZM"+(Te-T)+","+(Je.ymax-1)+"v4h"+2*T+"v-4Z")):"d"===pt&&((Je=ge?c(ce,[Te,_e],[st,vt]):[[Te,_e],[Te,vt],[st,vt],[st,_e]]).xmin=Math.min(Te,st),Je.xmax=Math.max(Te,st),Je.ymin=Math.min(_e,vt),Je.ymax=Math.max(_e,vt),He.attr("d","M0,0Z"))}else re&&(Ie.addPt([st,vt]),Je=Ie.filtered);J.selectionDefs&&J.selectionDefs.length?(Et=J.mergedPolygons,Lt=Je,Ve=bt?p.difference({regions:Et,inverted:!1},{regions:[Lt],inverted:!1}).regions:p.union({regions:Et,inverted:!1},{regions:[Lt],inverted:!1}).regions,Je.subtract=bt,ze=V(J.selectionDefs.concat([Je]))):(Ve=[Je],ze=L(Je)),l(N(Ve,se),Rt,J),pe&&o.throttle(Oe,_.SELECTDELAY,function(){var Et;$e=[];var Lt,Qe=[];for(De=0;De<ke.length;De++)if(Lt=(Be=ke[De])._module.selectPoints(Be,ze),Qe.push(Lt),Et=D(Lt,Be),$e.length)for(var mt=0;mt<Et.length;mt++)$e.push(Et[mt]);else $e=Et;te(xe,ke,Ze={points:$e}),Fe(Ze,Je,Ie),J.gd.emit("plotly_selecting",Ze)})},J.clickFn=function(Pe,Ce){if(He.remove(),xe._fullLayout._activeShapeIndex>=0)xe._fullLayout._deactivateShape(xe);else if(!oe){var Xe=we.clickmode;o.done(Oe).then(function(){if(o.clear(Oe),2===Pe){for(Rt.remove(),De=0;De<ke.length;De++)(Be=ke[De])._module.selectPoints(Be,!1);te(xe,ke),W(J),xe.emit("plotly_deselect",null)}else Xe.indexOf("select")>-1&&R(Ce,xe,J.xaxes,J.yaxes,J.subplot,J,Rt),"event"===Xe&&xe.emit("plotly_selected",void 0);e.click(xe,Ce)}).catch(g.error)}},J.doneFn=function(){He.remove(),o.done(Oe).then(function(){o.clear(Oe),J.gd.emit("plotly_selected",Ze),Je&&J.selectionDefs&&(Je.subtract=bt,J.selectionDefs.push(Je),J.mergedPolygons.length=0,[].push.apply(J.mergedPolygons,Ve)),J.doneFnCompleted&&J.doneFnCompleted($e)}).catch(g.error),oe&&W(J)}},clearSelect:M,clearSelectionsCache:W,selectOnClick:R}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("d3-time-format").utcFormat,b=y("../../lib"),v=b.numberFormat,e=y("fast-isnumeric"),n=b.cleanNumber,t=b.ms2DateTime,a=b.dateTime2ms,r=b.ensureNumber,u=b.isArrayOrTypedArray,s=y("../../constants/numerical"),i=s.FP_SAFE,l=s.BADNUM,c=s.LOG_CLIP,f=s.ONEWEEK,g=s.ONEDAY,h=s.ONEHOUR,o=s.ONEMIN,x=s.ONESEC,d=y("./axis_ids"),w=y("./constants"),_=w.HOUR_PATTERN,T=w.WEEKDAY_PATTERN;function k(M){return Math.pow(10,M)}function L(M){return null!=M}$.exports=function(M,O){O=O||{};var P=M._id||"x",S=P.charAt(0);function E(j,J){if(j>0)return Math.log(j)/Math.LN10;if(j<=0&&J&&M.range&&2===M.range.length){var K=M.range[0],re=M.range[1];return.5*(K+re-2*c*Math.abs(K-re))}return l}function R(j,J,K,re){if((re||{}).msUTC&&e(j))return+j;var ne=a(j,K||M.calendar);if(ne===l){if(!e(j))return l;j=+j;var se=Math.floor(10*b.mod(j+.05,1)),oe=Math.round(j-se/10);ne=a(new Date(oe))+se/10}return ne}function B(j,J,K){return t(j,J,K||M.calendar)}function H(j){return M._categories[Math.round(j)]}function V(j){if(L(j)){if(void 0===M._categoriesMap&&(M._categoriesMap={}),void 0!==M._categoriesMap[j])return M._categoriesMap[j];M._categories.push("number"==typeof j?String(j):j);var J=M._categories.length-1;return M._categoriesMap[j]=J,J}return l}function Z(j){if(M._categoriesMap)return M._categoriesMap[j]}function W(j){var J=Z(j);return void 0!==J?J:e(j)?+j:void 0}function G(j){return e(j)?+j:Z(j)}function X(j,J,K){return p.round(K+J*j,2)}function te(j,J,K){return(j-K)/J}var D=function(j){return e(j)?X(j,M._m,M._b):l},N=function(j){return te(j,M._m,M._b)};if(M.rangebreaks){var U="y"===S;D=function(j){if(!e(j))return l;var J=M._rangebreaks.length;if(!J)return X(j,M._m,M._b);var K=U;M.range[0]>M.range[1]&&(K=!K);for(var re=K?-1:1,ne=re*j,se=0,oe=0;oe<J;oe++){var pe=re*M._rangebreaks[oe].min,ce=re*M._rangebreaks[oe].max;if(ne<pe)break;if(!(ne>ce)){se=ne<(pe+ce)/2?oe:oe+1;break}se=oe+1}var ge=M._B[se]||0;return isFinite(ge)?X(j,M._m2,ge):0},N=function(j){var J=M._rangebreaks.length;if(!J)return te(j,M._m,M._b);for(var K=0,re=0;re<J&&!(j<M._rangebreaks[re].pmin);re++)j>M._rangebreaks[re].pmax&&(K=re+1);return te(j,M._m2,M._B[K])}}M.c2l="log"===M.type?E:r,M.l2c="log"===M.type?k:r,M.l2p=D,M.p2l=N,M.c2p="log"===M.type?function(j,J){return D(E(j,J))}:D,M.p2c="log"===M.type?function(j){return k(N(j))}:N,-1!==["linear","-"].indexOf(M.type)?(M.d2r=M.r2d=M.d2c=M.r2c=M.d2l=M.r2l=n,M.c2d=M.c2r=M.l2d=M.l2r=r,M.d2p=M.r2p=function(j){return M.l2p(n(j))},M.p2d=M.p2r=N,M.cleanPos=r):"log"===M.type?(M.d2r=M.d2l=function(j,J){return E(n(j),J)},M.r2d=M.r2c=function(j){return k(n(j))},M.d2c=M.r2l=n,M.c2d=M.l2r=r,M.c2r=E,M.l2d=k,M.d2p=function(j,J){return M.l2p(M.d2r(j,J))},M.p2d=function(j){return k(N(j))},M.r2p=function(j){return M.l2p(n(j))},M.p2r=N,M.cleanPos=r):"date"===M.type?(M.d2r=M.r2d=b.identity,M.d2c=M.r2c=M.d2l=M.r2l=R,M.c2d=M.c2r=M.l2d=M.l2r=B,M.d2p=M.r2p=function(j,J,K){return M.l2p(R(j,0,K))},M.p2d=M.p2r=function(j,J,K){return B(N(j),J,K)},M.cleanPos=function(j){return b.cleanDate(j,l,M.calendar)}):"category"===M.type?(M.d2c=M.d2l=V,M.r2d=M.c2d=M.l2d=H,M.d2r=M.d2l_noadd=W,M.r2c=function(j){var J=G(j);return void 0!==J?J:M.fraction2r(.5)},M.l2r=M.c2r=r,M.r2l=G,M.d2p=function(j){return M.l2p(M.r2c(j))},M.p2d=function(j){return H(N(j))},M.r2p=M.d2p,M.p2r=N,M.cleanPos=function(j){return"string"==typeof j&&""!==j?j:r(j)}):"multicategory"===M.type&&(M.r2d=M.c2d=M.l2d=H,M.d2r=M.d2l_noadd=W,M.r2c=function(j){var J=W(j);return void 0!==J?J:M.fraction2r(.5)},M.r2c_just_indices=Z,M.l2r=M.c2r=r,M.r2l=W,M.d2p=function(j){return M.l2p(M.r2c(j))},M.p2d=function(j){return H(N(j))},M.r2p=M.d2p,M.p2r=N,M.cleanPos=function(j){return Array.isArray(j)||"string"==typeof j&&""!==j?j:r(j)},M.setupMultiCategory=function(j){var J,K,re=M._traceIndices,ne=M._matchGroup;if(ne&&0===M._categories.length)for(var se in ne)if(se!==P){var oe=O[d.id2name(se)];re=re.concat(oe._traceIndices)}var pe=[[0,{}],[0,{}]],ce=[];for(J=0;J<re.length;J++){var ge=j[re[J]];if(S in ge){var xe=ge[S],we=ge._length||b.minRowLength(xe);if(u(xe[0])&&u(xe[1]))for(K=0;K<we;K++){var be=xe[0][K],Se=xe[1][K];L(be)&&L(Se)&&(ce.push([be,Se]),be in pe[0][1]||(pe[0][1][be]=pe[0][0]++),Se in pe[1][1]||(pe[1][1][Se]=pe[1][0]++))}}}for(ce.sort(function(fe,me){var Te=pe[0][1],_e=Te[fe[0]]-Te[me[0]];if(_e)return _e;var Me=pe[1][1];return Me[fe[1]]-Me[me[1]]}),J=0;J<ce.length;J++)V(ce[J])}),M.fraction2r=function(j){var J=M.r2l(M.range[0]),K=M.r2l(M.range[1]);return M.l2r(J+j*(K-J))},M.r2fraction=function(j){var J=M.r2l(M.range[0]),K=M.r2l(M.range[1]);return(M.r2l(j)-J)/(K-J)},M.cleanRange=function(j,J){J||(J={}),j||(j="range");var K,re,ne=b.nestedProperty(M,j).get();if(re=(re="date"===M.type?b.dfltRange(M.calendar):"y"===S?w.DFLTRANGEY:"realaxis"===M._name?[0,1]:J.dfltRange||w.DFLTRANGEX).slice(),"tozero"!==M.rangemode&&"nonnegative"!==M.rangemode||(re[0]=0),ne&&2===ne.length)for("date"!==M.type||M.autorange||(ne[0]=b.cleanDate(ne[0],l,M.calendar),ne[1]=b.cleanDate(ne[1],l,M.calendar)),K=0;K<2;K++)if("date"===M.type){if(!b.isDateTime(ne[K],M.calendar)){M[j]=re;break}if(M.r2l(ne[0])===M.r2l(ne[1])){var se=b.constrain(M.r2l(ne[0]),b.MIN_MS+1e3,b.MAX_MS-1e3);ne[0]=M.l2r(se-1e3),ne[1]=M.l2r(se+1e3);break}}else{if(!e(ne[K])){if(!e(ne[1-K])){M[j]=re;break}ne[K]=ne[1-K]*(K?10:.1)}if(ne[K]<-i?ne[K]=-i:ne[K]>i&&(ne[K]=i),ne[0]===ne[1]){var oe=Math.max(1,Math.abs(1e-6*ne[0]));ne[0]-=oe,ne[1]+=oe}}else b.nestedProperty(M,j).set(re)},M.setScale=function(j){var J=O._size;if(M.overlaying){var K=d.getFromId({_fullLayout:O},M.overlaying);M.domain=K.domain}var re=j&&M._r?"_r":"range",ne=M.calendar;M.cleanRange(re);var se,oe,pe=M.r2l(M[re][0],ne),ce=M.r2l(M[re][1],ne),ge="y"===S;if(ge?(M._offset=J.t+(1-M.domain[1])*J.h,M._length=J.h*(M.domain[1]-M.domain[0]),M._m=M._length/(pe-ce),M._b=-M._m*ce):(M._offset=J.l+M.domain[0]*J.w,M._length=J.w*(M.domain[1]-M.domain[0]),M._m=M._length/(ce-pe),M._b=-M._m*pe),M._rangebreaks=[],M._lBreaks=0,M._m2=0,M._B=[],M.rangebreaks&&(M._rangebreaks=M.locateBreaks(Math.min(pe,ce),Math.max(pe,ce)),M._rangebreaks.length)){for(se=0;se<M._rangebreaks.length;se++)oe=M._rangebreaks[se],M._lBreaks+=Math.abs(oe.max-oe.min);var xe=ge;pe>ce&&(xe=!xe),xe&&M._rangebreaks.reverse();var we=xe?-1:1;for(M._m2=we*M._length/(Math.abs(ce-pe)-M._lBreaks),M._B.push(-M._m2*(ge?ce:pe)),se=0;se<M._rangebreaks.length;se++)M._B.push(M._B[M._B.length-1]-we*M._m2*((oe=M._rangebreaks[se]).max-oe.min));for(se=0;se<M._rangebreaks.length;se++)(oe=M._rangebreaks[se]).pmin=D(oe.min),oe.pmax=D(oe.max)}if(!isFinite(M._m)||!isFinite(M._b)||M._length<0)throw O._replotting=!1,new Error("Something went wrong with axis scaling")},M.maskBreaks=function(j){var J,K,re,ne,se,oe=M.rangebreaks||[];oe._cachedPatterns||(oe._cachedPatterns=oe.map(function(be){return be.enabled&&be.bounds?b.simpleMap(be.bounds,be.pattern?n:M.d2c):null})),oe._cachedValues||(oe._cachedValues=oe.map(function(be){return be.enabled&&be.values?b.simpleMap(be.values,M.d2c).sort(b.sorterAsc):null}));for(var pe=0;pe<oe.length;pe++){var ce=oe[pe];if(ce.enabled)if(ce.bounds){switch(K=(J=oe._cachedPatterns[pe])[0],re=J[1],ce.pattern){case T:ne=(se=new Date(j)).getUTCDay(),K>re&&(re+=7,ne<K&&(ne+=7));break;case _:ne=(se=new Date(j)).getUTCHours()+(se.getUTCMinutes()/60+se.getUTCSeconds()/3600+se.getUTCMilliseconds()/36e5),K>re&&(re+=24,ne<K&&(ne+=24));break;case"":ne=j}if(ne>=K&&ne<re)return l}else for(var xe=oe._cachedValues[pe],we=0;we<xe.length;we++)if(re=(K=xe[we])+ce.dvalue,j>=K&&j<re)return l}return j},M.locateBreaks=function(j,J){var K,re,ne,se,oe=[];if(!M.rangebreaks)return oe;var pe=M.rangebreaks.slice().sort(function(Me,Ie){return Me.pattern===T&&Ie.pattern===_?-1:Ie.pattern===T&&Me.pattern===_?1:0}),ce=function(Me,Ie){if((Me=b.constrain(Me,j,J))!==(Ie=b.constrain(Ie,j,J))){for(var ze=!0,Ve=0;Ve<oe.length;Ve++){var Je=oe[Ve];Me<Je.max&&Ie>=Je.min&&(Me<Je.min&&(Je.min=Me),Ie>Je.max&&(Je.max=Ie),ze=!1)}ze&&oe.push({min:Me,max:Ie})}};for(K=0;K<pe.length;K++){var ge=pe[K];if(ge.enabled)if(ge.bounds){var xe=j,we=J;ge.pattern&&(xe=Math.floor(xe)),ne=(re=b.simpleMap(ge.bounds,ge.pattern?n:M.r2l))[0],se=re[1];var be,Se,fe=new Date(xe);switch(ge.pattern){case T:Se=f,be=(se-ne+(se<ne?7:0))*g,xe+=ne*g-(fe.getUTCDay()*g+fe.getUTCHours()*h+fe.getUTCMinutes()*o+fe.getUTCSeconds()*x+fe.getUTCMilliseconds());break;case _:Se=g,be=(se-ne+(se<ne?24:0))*h,xe+=ne*h-(fe.getUTCHours()*h+fe.getUTCMinutes()*o+fe.getUTCSeconds()*x+fe.getUTCMilliseconds());break;default:xe=Math.min(re[0],re[1]),be=Se=(we=Math.max(re[0],re[1]))-xe}for(var me=xe;me<we;me+=Se)ce(me,me+be)}else for(var Te=b.simpleMap(ge.values,M.d2c),_e=0;_e<Te.length;_e++)ce(ne=Te[_e],se=ne+ge.dvalue)}return oe.sort(function(Me,Ie){return Me.min-Ie.min}),oe},M.makeCalcdata=function(j,J,K){var re,ne,se,oe,pe=M.type,ce="date"===pe&&j[J+"calendar"];if(J in j){if(re=j[J],oe=j._length||b.minRowLength(re),b.isTypedArray(re)&&("linear"===pe||"log"===pe)){if(oe===re.length)return re;if(re.subarray)return re.subarray(0,oe)}if("multicategory"===pe)return function(we,be){for(var Se=new Array(be),fe=0;fe<be;fe++)Se[fe]=Z([(we[0]||[])[fe],(we[1]||[])[fe]]);return Se}(re,oe);for(ne=new Array(oe),se=0;se<oe;se++)ne[se]=M.d2c(re[se],0,ce,K)}else{var ge=J+"0"in j?M.d2c(j[J+"0"],0,ce):0,xe=j["d"+J]?Number(j["d"+J]):1;for(re=j[{x:"y",y:"x"}[J]],oe=j._length||re.length,ne=new Array(oe),se=0;se<oe;se++)ne[se]=ge+se*xe}if(M.rangebreaks)for(se=0;se<oe;se++)ne[se]=M.maskBreaks(ne[se]);return ne},M.isValidRange=function(j){return Array.isArray(j)&&2===j.length&&e(M.r2l(j[0]))&&e(M.r2l(j[1]))},M.isPtWithinRange=function(j,J){var K=M.c2l(j[S],null,J),re=M.r2l(M.range[0]),ne=M.r2l(M.range[1]);return re<ne?re<=K&&K<=ne:ne<=K&&K<=re},M._emptyCategories=function(){M._categories=[],M._categoriesMap={}},M.clearCalc=function(){var j=M._matchGroup;if(j){var J=null,K=null;for(var re in j){var ne=O[d.id2name(re)];if(ne._categories){J=ne._categories,K=ne._categoriesMap;break}}J&&K?(M._categories=J,M._categoriesMap=K):M._emptyCategories()}else M._emptyCategories();if(M._initialCategories)for(var se=0;se<M._initialCategories.length;se++)V(M._initialCategories[se])},M.sortByInitialCategories=function(){var j=[];if(M._emptyCategories(),M._initialCategories)for(var J=0;J<M._initialCategories.length;J++)V(M._initialCategories[J]);j=j.concat(M._traceIndices);var K=M._matchGroup;for(var re in K)if(P!==re){var ne=O[d.id2name(re)];ne._categories=M._categories,ne._categoriesMap=M._categoriesMap,j=j.concat(ne._traceIndices)}return j};var Q=O._d3locale;"date"===M.type&&(M._dateFormat=Q?Q.timeFormat:m,M._extraFormat=O._extraFormat),M._separators=O.separators,M._numFormat=Q?Q.numberFormat:v,delete M._minDtick,delete M._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(y,$,ee){"use strict";$.exports=function(p){var m=["showexponent","showtickprefix","showticksuffix"].filter(function(b){return void 0!==p[b]});if(m.every(function(b){return p[b]===p[m[0]]})||1===m.length)return p[m[0]]}},{}],578:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/color").contrast,b=y("./layout_attributes"),v=y("./show_dflt"),e=y("../array_container_defaults");function n(t,a){function r(u,s){return p.coerce(t,a,b.tickformatstops,u,s)}r("enabled")&&(r("dtickrange"),r("value"))}$.exports=function(t,a,r,u,s){s||(s={});var i=v(t);if(r("showticklabels")){var l=s.font||{},c=a.color,f=-1!==(a.ticklabelposition||"").indexOf("inside")?m(s.bgColor):c&&c!==b.color.dflt?c:l.color;if(p.coerceFont(r,"tickfont",{family:l.family,size:l.size,color:f}),s.noAng||r("tickangle"),"category"!==u){var g=r("tickformat");e(t,a,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:n}),a.tickformatstops.length||delete a.tickformatstops,s.noExp||g||"date"===u||(r("showexponent",i),r("exponentformat"),r("minexponent"),r("separatethousands"))}}}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./layout_attributes");$.exports=function(b,v,e,n){var t=p.coerce2(b,v,m,"ticklen"),a=p.coerce2(b,v,m,"tickwidth"),r=p.coerce2(b,v,m,"tickcolor",v.color);e("ticks",n.outerTicks||t||a||r?"outside":"")||(delete v.ticklen,delete v.tickwidth,delete v.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(y,$,ee){"use strict";var p=y("./clean_ticks"),m=y("../../lib").isArrayOrTypedArray;$.exports=function(b,v,e,n){function t(l){var c=b[l];return void 0!==c?c:(v._template||{})[l]}var a=t("tick0"),r=t("dtick"),u=t("tickvals"),s=e("tickmode",m(u)?"array":r?"linear":"auto");if("auto"===s)e("nticks");else if("linear"===s){var i=v.dtick=p.dtick(r,n);v.tick0=p.tick0(a,n,v.calendar,i)}else"multicategory"!==n&&(void 0===e("tickvals")?v.tickmode="auto":e("ticktext"))}},{"../../lib":503,"./clean_ticks":560}],581:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../registry"),b=y("../../lib"),v=y("../../components/drawing"),e=y("./axes");$.exports=function(n,t,a,r){var u=n._fullLayout;if(0!==t.length){var s,i,l,c;r&&(s=r());var f=p.ease(a.easing);return n._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var o={},x=0;x<t.length;x++){var d=t[x],_=d.plotinfo.yaxis;d.xr0&&(o[d.plotinfo.xaxis._name+".range"]=d.xr0.slice()),d.yr0&&(o[_._name+".range"]=d.yr0.slice())}return m.call("relayout",n,o).then(function(){for(var T=0;T<t.length;T++)g(t[T].plotinfo)})}()}),i=Date.now(),c=window.requestAnimationFrame(function o(){l=Date.now();for(var x=Math.min(1,(l-i)/a.duration),d=f(x),w=0;w<t.length;w++)h(t[w],d);l-i>a.duration?(function(){for(var _={},T=0;T<t.length;T++){var k=t[T],M=k.plotinfo.yaxis;k.xr1&&(_[k.plotinfo.xaxis._name+".range"]=k.xr1.slice()),k.yr1&&(_[M._name+".range"]=k.yr1.slice())}s&&s(),m.call("relayout",n,_).then(function(){for(var O=0;O<t.length;O++)g(t[O].plotinfo)})}(),c=window.cancelAnimationFrame(o)):c=window.requestAnimationFrame(o)}),Promise.resolve()}function g(o){var x=o.xaxis,d=o.yaxis;u._defs.select("#"+o.clipId+"> rect").call(v.setTranslate,0,0).call(v.setScale,1,1),o.plot.call(v.setTranslate,x._offset,d._offset).call(v.setScale,1,1);var w=o.plot.selectAll(".scatterlayer .trace");w.selectAll(".point").call(v.setPointGroupScale,1,1),w.selectAll(".textpoint").call(v.setTextPointsScale,1,1),w.call(v.hideOutsideRangePoints,o)}function h(o,x){var d=o.plotinfo,w=d.xaxis,_=d.yaxis,T=w._length,k=_._length,L=!!o.xr1,M=!!o.yr1,O=[];if(L){var P=b.simpleMap(o.xr0,w.r2l),S=b.simpleMap(o.xr1,w.r2l),E=P[1]-P[0],R=S[1]-S[0];O[0]=(P[0]*(1-x)+x*S[0]-P[0])/(P[1]-P[0])*T,O[2]=T*(1-x+x*R/E),w.range[0]=w.l2r(P[0]*(1-x)+x*S[0]),w.range[1]=w.l2r(P[1]*(1-x)+x*S[1])}else O[0]=0,O[2]=T;if(M){var B=b.simpleMap(o.yr0,_.r2l),H=b.simpleMap(o.yr1,_.r2l),V=B[1]-B[0],Z=H[1]-H[0];O[1]=(B[1]*(1-x)+x*H[1]-B[1])/(B[0]-B[1])*k,O[3]=k*(1-x+x*Z/V),_.range[0]=w.l2r(B[0]*(1-x)+x*H[0]),_.range[1]=_.l2r(B[1]*(1-x)+x*H[1])}else O[1]=0,O[3]=k;e.drawOne(n,w,{skipTitle:!0}),e.drawOne(n,_,{skipTitle:!0}),e.redrawComponents(n,[w._id,_._id]);var W=L?T/O[2]:1,G=M?k/O[3]:1,U=w._offset-(L?O[0]/O[2]*T:0),Q=_._offset-(M?O[1]/O[3]*k:0);d.clipRect.call(v.setTranslate,L?O[0]:0,M?O[1]:0).call(v.setScale,1/W,1/G),d.plot.call(v.setTranslate,U,Q).call(v.setScale,W,G),v.setPointGroupScale(d.zoomScalePts,1/W,1/G),v.setTextPointsScale(d.zoomScaleTxt,1/W,1/G)}e.redrawComponents(n)}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(y,$,ee){"use strict";var p=y("../../registry").traceIs,m=y("./axis_autotype");function b(e){return{v:"x",h:"y"}[e.orientation||"v"]}function v(e,n){var t=b(e),a=p(e,"box-violin"),r=p(e._fullInput||{},"candlestick");return a&&!r&&n===t&&void 0===e[t]&&void 0===e[t+"0"]}$.exports=function(e,n,t,a){t("autotypenumbers",a.autotypenumbersDflt),"-"===t("type",(a.splomStash||{}).type)&&(function(r,u){if("-"===r.type){var s,i=r._id,l=i.charAt(0);-1!==i.indexOf("scene")&&(i=l);var c=function(_,T,k){for(var L=0;L<_.length;L++){var M=_[L];if("splom"===M.type&&M._length>0&&(M["_"+k+"axes"]||{})[T]||(M[k+"axis"]||k)===T&&(v(M,k)||(M[k]||[]).length||M[k+"0"]))return M}}(u,i,l);if(c){if("histogram"===c.type&&l==={v:"y",h:"x"}[c.orientation||"v"])return void(r.type="linear");var f=l+"calendar",g=c[f],h={noMultiCategory:!p(c,"cartesian")||p(c,"noMultiCategory")};if("box"===c.type&&c._hasPreCompStats&&l==={h:"x",v:"y"}[c.orientation||"v"]&&(h.noMultiCategory=!0),h.autotypenumbers=r.autotypenumbers,v(c,l)){var o=b(c),x=[];for(s=0;s<u.length;s++){var d=u[s];p(d,"box-violin")&&(d[l+"axis"]||l)===i&&(x.push(void 0!==d[o]?d[o][0]:void 0!==d.name?d.name:"text"),d[f]!==g&&(g=void 0))}r.type=m(x,g,h)}else if("splom"===c.type){var w=c.dimensions[c._axesDim[i]];w.visible&&(r.type=m(w.values,g,h))}else r.type=m(c[l]||[c[l+"0"]],g,h)}}}(n,a.data),"-"===n.type?n.type="linear":e.type=n.type)}},{"../../registry":638,"./axis_autotype":555}],583:[function(y,$,ee){"use strict";var p=y("../registry"),m=y("../lib");function b(t,a,r){var u,s,i,l=!1;if("data"===a.type)u=t._fullData[null!==a.traces?a.traces[0]:0];else{if("layout"!==a.type)return!1;u=t._fullLayout}return s=m.nestedProperty(u,a.prop).get(),(i=r[a.type]=r[a.type]||{}).hasOwnProperty(a.prop)&&i[a.prop]!==s&&(l=!0),i[a.prop]=s,{changed:l,value:s}}function v(t,a){var r=[],u=a[0],s={};if("string"==typeof u)s[u]=a[1];else{if(!m.isPlainObject(u))return r;s=u}return n(s,function(i,l,c){r.push({type:"layout",prop:i,value:c})},"",0),r}function e(t,a){var r,u,s,i,l=[];if(s=a[1],r=a[2],i={},"string"==typeof(u=a[0]))i[u]=s;else{if(!m.isPlainObject(u))return l;i=u,void 0===r&&(r=s)}return void 0===r&&(r=null),n(i,function(c,f,g){var h,o;if(Array.isArray(g)){o=g.slice();var x=Math.min(o.length,t.data.length);r&&(x=Math.min(x,r.length)),h=[];for(var d=0;d<x;d++)h[d]=r?r[d]:d}else o=g,h=r?r.slice():null;if(null===h)Array.isArray(o)&&(o=o[0]);else if(Array.isArray(h)){if(!Array.isArray(o)){var w=o;o=[];for(var _=0;_<h.length;_++)o[_]=w}o.length=Math.min(h.length,o.length)}l.push({type:"data",prop:c,traces:h,value:o})},"",0),l}function n(t,a,r,u){Object.keys(t).forEach(function(s){var i=t[s];if("_"!==s[0]){var l=r+(u>0?".":"")+s;m.isPlainObject(i)?n(i,a,l,u+1):a(l,s,i)}})}ee.manageCommandObserver=function(t,a,r,u){var s={},i=!0;a&&a._commandObserver&&(s=a._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var l=ee.hasSimpleAPICommandBindings(t,r,s.lookupTable);if(a&&a._commandObserver){if(l)return s;if(a._commandObserver.remove)return a._commandObserver.remove(),a._commandObserver=null,s}if(l){b(t,l,s.cache),s.check=function(){if(i){var g=b(t,l,s.cache);return g.changed&&u&&void 0!==s.lookupTable[g.value]&&(s.disable(),Promise.resolve(u({value:g.value,type:l.type,prop:l.prop,traces:l.traces,index:s.lookupTable[g.value]})).then(s.enable,s.enable)),g.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],f=0;f<c.length;f++)t._internalOn(c[f],s.check);s.remove=function(){for(var g=0;g<c.length;g++)t._removeInternalListener(c[g],s.check)}}else m.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){i=!1},s.enable=function(){i=!0},a&&(a._commandObserver=s),s},ee.hasSimpleAPICommandBindings=function(t,a,r){var u,s,i=a.length;for(u=0;u<i;u++){var l,c=a[u],f=c.method,g=c.args;if(Array.isArray(g)||(g=[]),!f)return!1;var h=ee.computeAPICommandBindings(t,f,g);if(1!==h.length)return!1;if(s){if((l=h[0]).type!==s.type||l.prop!==s.prop)return!1;if(Array.isArray(s.traces)){if(!Array.isArray(l.traces))return!1;l.traces.sort();for(var o=0;o<s.traces.length;o++)if(s.traces[o]!==l.traces[o])return!1}else if(l.prop!==s.prop)return!1}else s=h[0],Array.isArray(s.traces)&&s.traces.sort();var x=(l=h[0]).value;if(Array.isArray(x)){if(1!==x.length)return!1;x=x[0]}r&&(r[x]=u)}return s},ee.executeAPICommand=function(t,a,r){if("skip"===a)return Promise.resolve();var u=p.apiMethodRegistry[a],s=[t];Array.isArray(r)||(r=[]);for(var i=0;i<r.length;i++)s.push(r[i]);return u.apply(null,s).catch(function(l){return m.warn("API call to Plotly."+a+" rejected.",l),Promise.reject(l)})},ee.computeAPICommandBindings=function(t,a,r){var u,i;switch(Array.isArray(r)||(r=[]),a){case"restyle":u=e(t,r);break;case"relayout":u=v(0,r);break;case"update":u=e(t,[r[0],r[2]]).concat(v(0,[r[1]]));break;case"animate":i=r,u=Array.isArray(i[0])&&1===i[0].length&&-1!==["string","number"].indexOf(typeof i[0][0])?[{type:"layout",prop:"_currentFrame",value:i[0][0].toString()}]:[];break;default:u=[]}return u}},{"../lib":503,"../registry":638}],584:[function(y,$,ee){"use strict";var p=y("../lib/extend").extendFlat;ee.attributes=function(m,b){b=b||{};var v={valType:"info_array",editType:(m=m||{}).editType,items:[{valType:"number",min:0,max:1,editType:m.editType},{valType:"number",min:0,max:1,editType:m.editType}],dflt:[0,1]},e={x:p({},v,{}),y:p({},v,{}),editType:m.editType};return m.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:m.editType},e.column={valType:"integer",min:0,dflt:0,editType:m.editType}),e},ee.defaults=function(m,b,v,e){var n=e&&e.x||[0,1],t=e&&e.y||[0,1],a=b.grid;if(a){var r=v("domain.column");void 0!==r&&(r<a.columns?n=a._domains.x[r]:delete m.domain.column);var u=v("domain.row");void 0!==u&&(u<a.rows?t=a._domains.y[u]:delete m.domain.row)}var s=v("domain.x",n),i=v("domain.y",t);s[0]<s[1]||(m.domain.x=n.slice()),i[0]<i[1]||(m.domain.y=t.slice())}},{"../lib/extend":493}],585:[function(y,$,ee){"use strict";$.exports=function(p){var m=p.editType,b=p.colorEditType;void 0===b&&(b=m);var v={family:{valType:"string",noBlank:!0,strict:!0,editType:m},size:{valType:"number",min:1,editType:m},color:{valType:"color",editType:b},editType:m};return p.arrayOk&&(v.family.arrayOk=!0,v.size.arrayOk=!0,v.color.arrayOk=!0),v}},{}],586:[function(y,$,ee){"use strict";$.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(y,$,ee){"use strict";ee.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},ee.axesNames=["lonaxis","lataxis"],ee.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},ee.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},ee.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},ee.clipPad=.001,ee.precision=.1,ee.landColor="#F0DC82",ee.waterColor="#3399FF",ee.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},ee.sphereSVG={type:"Sphere"},ee.fillLayers={ocean:1,land:1,lakes:1},ee.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},ee.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],ee.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],ee.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("d3-geo"),b=m.geoPath,v=m.geoDistance,e=y("d3-geo-projection"),n=y("../../registry"),t=y("../../lib"),a=t.strTranslate,r=y("../../components/color"),u=y("../../components/drawing"),s=y("../../components/fx"),i=y("../plots"),l=y("../cartesian/axes"),c=y("../cartesian/autorange").getAutoRange,f=y("../../components/dragelement"),g=y("../cartesian/select").prepSelect,h=y("../cartesian/select").clearSelect,o=y("../cartesian/select").selectOnClick,x=y("./zoom"),d=y("./constants"),w=y("../../lib/geo_location_utils"),_=y("../../lib/topojson_utils"),T=y("topojson-client").feature;function k(O){this.id=O.id,this.graphDiv=O.graphDiv,this.container=O.container,this.topojsonURL=O.topojsonURL,this.isStatic=O.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var L=k.prototype;function M(O,P){var S=d.clipPad,E=O[0]+S,R=O[1]-S,B=P[0]+S,H=P[1]-S;E>0&&R<0&&(R+=360);var V=(R-E)/4;return{type:"Polygon",coordinates:[[[E,B],[E,H],[E+V,H],[E+2*V,H],[E+3*V,H],[R,H],[R,B],[R-V,B],[R-2*V,B],[R-3*V,B],[E,B]]]}}$.exports=function(O){return new k(O)},L.plot=function(O,P,S){var E=this,R=P[this.id],B=[],H=!1;for(var V in d.layerNameToAdjective)if("frame"!==V&&R["show"+V]){H=!0;break}for(var Z=0;Z<O.length;Z++)if(O[0][0].trace.locationmode){H=!0;break}if(H){var W=_.getTopojsonName(R);null!==E.topojson&&W===E.topojsonName||(E.topojsonName=W,void 0===PlotlyGeoAssets.topojson[E.topojsonName]&&B.push(E.fetchTopojson()))}B=B.concat(w.fetchTraceGeoData(O)),S.push(new Promise(function(G,X){Promise.all(B).then(function(){E.topojson=PlotlyGeoAssets.topojson[E.topojsonName],E.update(O,P),G()}).catch(X)}))},L.fetchTopojson=function(){var O=this,P=_.getTopojsonPath(O.topojsonURL,O.topojsonName);return new Promise(function(S,E){p.json(P,function(R,B){if(R)return E(404===R.status?new Error(["plotly.js could not find topojson file at",P,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",P].join(" ")));PlotlyGeoAssets.topojson[O.topojsonName]=B,S()})})},L.update=function(O,P){var S=P[this.id];this.hasChoropleth=!1;for(var E=0;E<O.length;E++){var R=O[E],B=R[0].trace;"choropleth"===B.type&&(this.hasChoropleth=!0),!0===B.visible&&B._length>0&&B._module.calcGeoJSON(R,P)}if(!this.updateProjection(O,P)){this.viewInitial&&this.scope===S.scope||this.saveViewInitial(S),this.scope=S.scope,this.updateBaseLayers(P,S),this.updateDims(P,S),this.updateFx(P,S),i.generalUpdatePerTraceModule(this.graphDiv,this,O,S);var H=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=H.selectAll(".point"),this.dataPoints.text=H.selectAll("text"),this.dataPaths.line=H.selectAll(".js-line");var V=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=V.selectAll("path"),this.render()}},L.updateProjection=function(O,P){var S=this.graphDiv,E=P[this.id],R=P._size,B=E.domain,H=E.projection,V=E.lonaxis,Z=E.lataxis,W=V._ax,G=Z._ax,X=this.projection=function(fe){var me=fe.projection,Te=me.type,_e=d.projNames[Te];_e="geo"+t.titleCase(_e);for(var Me=(m[_e]||e[_e])(),Ie=fe._isSatellite?180*Math.acos(1/me.distance)/Math.PI:fe._isClipped?d.lonaxisSpan[Te]/2:null,ze=["center","rotate","parallels","clipExtent"],Ve=function(Be){return Be?Me:[]},Je=0;Je<ze.length;Je++){var De=ze[Je];"function"!=typeof Me[De]&&(Me[De]=Ve)}return Me.isLonLatOverEdges=function(Be){if(null===Me(Be))return!0;if(Ie){var Ze=Me.rotate();return v(Be,[-Ze[0],-Ze[1]])>Ie*Math.PI/180}return!1},Me.getPath=function(){return b().projection(Me)},Me.getBounds=function(Be){return Me.getPath().bounds(Be)},Me.precision(d.precision),fe._isSatellite&&Me.tilt(me.tilt).distance(me.distance),Ie&&Me.clipAngle(Ie-d.clipPad),Me}(E),te=[[R.l+R.w*B.x[0],R.t+R.h*(1-B.y[1])],[R.l+R.w*B.x[1],R.t+R.h*(1-B.y[0])]],D=E.center||{},N=H.rotation||{},U=V.range||[],Q=Z.range||[];if(E.fitbounds){W._length=te[1][0]-te[0][0],G._length=te[1][1]-te[0][1],W.range=c(S,W),G.range=c(S,G);var j=(W.range[0]+W.range[1])/2,J=(G.range[0]+G.range[1])/2;if(E._isScoped)D={lon:j,lat:J};else if(E._isClipped){D={lon:j,lat:J},N={lon:j,lat:J,roll:N.roll};var K=H.type,re=d.lonaxisSpan[K]/2||180,ne=d.lataxisSpan[K]/2||90;U=[j-re,j+re],Q=[J-ne,J+ne]}else D={lon:j,lat:J},N={lon:j,lat:N.lat,roll:N.roll}}X.center([D.lon-N.lon,D.lat-N.lat]).rotate([-N.lon,-N.lat,N.roll]).parallels(H.parallels);var se=M(U,Q);X.fitExtent(te,se);var oe=this.bounds=X.getBounds(se),pe=this.fitScale=X.scale(),ce=X.translate();if(E.fitbounds){var ge=X.getBounds(M(W.range,G.range)),xe=Math.min((oe[1][0]-oe[0][0])/(ge[1][0]-ge[0][0]),(oe[1][1]-oe[0][1])/(ge[1][1]-ge[0][1]));isFinite(xe)?X.scale(xe*pe):t.warn("Something went wrong during"+this.id+"fitbounds computations.")}else X.scale(H.scale*pe);var we=this.midPt=[(oe[0][0]+oe[1][0])/2,(oe[0][1]+oe[1][1])/2];if(X.translate([ce[0]+(we[0]-ce[0]),ce[1]+(we[1]-ce[1])]).clipExtent(oe),E._isAlbersUsa){var be=X([D.lon,D.lat]),Se=X.translate();X.translate([Se[0]-(be[0]-Se[0]),Se[1]-(be[1]-Se[1])])}},L.updateBaseLayers=function(O,P){var S=this,E=S.topojson,R=S.layers,B=S.basePaths;function H(X){return"lonaxis"===X||"lataxis"===X}function V(X){return Boolean(d.lineLayers[X])}function Z(X){return Boolean(d.fillLayers[X])}var W=(this.hasChoropleth?d.layersForChoropleth:d.layers).filter(function(X){return V(X)||Z(X)?P["show"+X]:!H(X)||P[X].showgrid}),G=S.framework.selectAll(".layer").data(W,String);G.exit().each(function(X){delete R[X],delete B[X],p.select(this).remove()}),G.enter().append("g").attr("class",function(X){return"layer "+X}).each(function(X){var te=R[X]=p.select(this);"bg"===X?S.bgRect=te.append("rect").style("pointer-events","all"):H(X)?B[X]=te.append("path").style("fill","none"):"backplot"===X?te.append("g").classed("choroplethlayer",!0):"frontplot"===X?te.append("g").classed("scatterlayer",!0):V(X)?B[X]=te.append("path").style("fill","none").style("stroke-miterlimit",2):Z(X)&&(B[X]=te.append("path").style("stroke","none"))}),G.order(),G.each(function(X){var te=B[X],D=d.layerNameToAdjective[X];"frame"===X?te.datum(d.sphereSVG):V(X)||Z(X)?te.datum(T(E,E.objects[X])):H(X)&&te.datum(function(N,U,Q){var j,J,K,re=U[N],ne=d.scopeDefaults[U.scope];"lonaxis"===N?(j=ne.lonaxisRange,J=ne.lataxisRange,K=function(Se,fe){return[Se,fe]}):"lataxis"===N&&(j=ne.lataxisRange,J=ne.lonaxisRange,K=function(Se,fe){return[fe,Se]});var se={type:"linear",range:[j[0],j[1]-1e-6],tick0:re.tick0,dtick:re.dtick};l.setConvert(se,Q);var oe=l.calcTicks(se);U.isScoped||"lonaxis"!==N||oe.pop();for(var pe=oe.length,ce=new Array(pe),ge=0;ge<pe;ge++)for(var xe=oe[ge].x,we=ce[ge]=[],be=J[0];be<J[1]+2.5;be+=2.5)we.push(K(xe,be));return{type:"MultiLineString",coordinates:ce}}(X,P,O)).call(r.stroke,P[X].gridcolor).call(u.dashLine,"",P[X].gridwidth),V(X)?te.call(r.stroke,P[D+"color"]).call(u.dashLine,"",P[D+"width"]):Z(X)&&te.call(r.fill,P[D+"color"])})},L.updateDims=function(O,P){var S=this.bounds,E=(P.framewidth||0)/2,R=S[0][0]-E,B=S[0][1]-E,H=S[1][0]-R+E,V=S[1][1]-B+E;u.setRect(this.clipRect,R,B,H,V),this.bgRect.call(u.setRect,R,B,H,V).call(r.fill,P.bgcolor),this.xaxis._offset=R,this.xaxis._length=H,this.yaxis._offset=B,this.yaxis._length=V},L.updateFx=function(O,P){var S=this,E=S.graphDiv,R=S.bgRect,B=O.dragmode,H=O.clickmode;if(!S.isStatic){var V;"select"===B?V=function(G,X){(G.range={})[S.id]=[W([X.xmin,X.ymin]),W([X.xmax,X.ymax])]}:"lasso"===B&&(V=function(G,X,te){(G.lassoPoints={})[S.id]=te.filtered.map(W)});var Z={element:S.bgRect.node(),gd:E,plotinfo:{id:S.id,xaxis:S.xaxis,yaxis:S.yaxis,fillRangeItems:V},xaxes:[S.xaxis],yaxes:[S.yaxis],subplot:S.id,clickFn:function(G){2===G&&h(E)}};"pan"===B?(R.node().onmousedown=null,R.call(x(S,P)),R.on("dblclick.zoom",function(){var G=S.viewInitial,X={};for(var te in G)X[S.id+"."+te]=G[te];n.call("_guiRelayout",E,X),E.emit("plotly_doubleclick",null)}),E._context._scrollZoom.geo||R.on("wheel.zoom",null)):"select"!==B&&"lasso"!==B||(R.on(".zoom",null),Z.prepFn=function(G,X,te){g(G,X,te,Z,B)},f.init(Z)),R.on("mousemove",function(){var G=S.projection.invert(t.getPositionFromD3Event());if(!G)return f.unhover(E,p.event);S.xaxis.p2c=function(){return G[0]},S.yaxis.p2c=function(){return G[1]},s.hover(E,p.event,S.id)}),R.on("mouseout",function(){E._dragging||f.unhover(E,p.event)}),R.on("click",function(){"select"!==B&&"lasso"!==B&&(H.indexOf("select")>-1&&o(p.event,E,[S.xaxis],[S.yaxis],S.id,Z),H.indexOf("event")>-1&&s.click(E,p.event))})}function W(G){return S.projection.invert([G[0]+S.xaxis._offset,G[1]+S.yaxis._offset])}},L.makeFramework=function(){var O=this,P=O.graphDiv,S=P._fullLayout,E="clip"+S._uid+O.id;O.clipDef=S._clips.append("clipPath").attr("id",E),O.clipRect=O.clipDef.append("rect"),O.framework=p.select(O.container).append("g").attr("class","geo "+O.id).call(u.setClipUrl,E,P),O.project=function(R){var B=O.projection(R);return B?[B[0]-O.xaxis._offset,B[1]-O.yaxis._offset]:[null,null]},O.xaxis={_id:"x",c2p:function(R){return O.project(R)[0]}},O.yaxis={_id:"y",c2p:function(R){return O.project(R)[1]}},O.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},l.setConvert(O.mockAxis,S)},L.saveViewInitial=function(O){var S=O.center||{},E=O.projection,R=E.rotation||{};this.viewInitial={fitbounds:O.fitbounds,"projection.scale":E.scale},t.extendFlat(this.viewInitial,O._isScoped?{"center.lon":S.lon,"center.lat":S.lat}:O._isClipped?{"projection.rotation.lon":R.lon,"projection.rotation.lat":R.lat}:{"center.lon":S.lon,"center.lat":S.lat,"projection.rotation.lon":R.lon})},L.render=function(){var O,P=this.projection,S=P.getPath();function E(B){var H=P(B.lonlat);return H?a(H[0],H[1]):null}function R(B){return P.isLonLatOverEdges(B.lonlat)?"none":null}for(O in this.basePaths)this.basePaths[O].attr("d",S);for(O in this.dataPaths)this.dataPaths[O].attr("d",function(B){return S(B.geojson)});for(O in this.dataPoints)this.dataPoints[O].attr("display",R).attr("transform",E)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(y,$,ee){"use strict";var p=y("../../plots/get_data").getSubplotCalcData,m=y("../../lib").counterRegex,b=y("./geo"),v="geo",e=m(v),n={};n.geo={valType:"subplotid",dflt:v,editType:"calc"},$.exports={attr:v,name:v,idRoot:v,idRegex:e,attrRegex:e,attributes:n,layoutAttributes:y("./layout_attributes"),supplyLayoutDefaults:y("./layout_defaults"),plot:function(t){for(var a=t._fullLayout,r=t.calcdata,u=a._subplots.geo,s=0;s<u.length;s++){var i=u[s],l=p(r,v,i),c=a[i]._subplot;c||(c=b({id:i,graphDiv:t,container:a._geolayer.node(),topojsonURL:t._context.topojsonURL,staticPlot:t._context.staticPlot}),a[i]._subplot=c),c.plot(l,a,t._promises)}},updateFx:function(t){for(var a=t._fullLayout,r=a._subplots.geo,u=0;u<r.length;u++){var s=a[r[u]];s._subplot.updateFx(a,s)}},clean:function(t,a,r,u){for(var s=u._subplots.geo||[],i=0;i<s.length;i++){var l=s[i],c=u[l]._subplot;!a[l]&&c&&(c.framework.remove(),c.clipDef.remove())}}}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(y,$,ee){"use strict";var p=y("../../components/color/attributes"),m=y("../domain").attributes,b=y("./constants"),v=y("../../plot_api/edit_types").overrideAll,e=y("../../lib/sort_object_keys"),n={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:p.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};($.exports=v({domain:m({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:e(b.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:e(b.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:p.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:b.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:b.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:b.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:b.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:p.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:p.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:p.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:p.background},lonaxis:n,lataxis:n},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../subplot_defaults"),b=y("../get_data").getSubplotData,v=y("./constants"),e=y("./layout_attributes"),n=v.axesNames;function t(a,r,u,s){var i=b(s.fullData,"geo",s.id).map(function(N){return N._expandedIndex}),l=u("resolution"),c=u("scope"),f=v.scopeDefaults[c],g=u("projection.type",f.projType),h=r._isAlbersUsa="albers usa"===g;h&&(c=r.scope="usa");var o=r._isScoped="world"!==c,x=r._isSatellite="satellite"===g,d=r._isConic=-1!==g.indexOf("conic")||"albers"===g,w=r._isClipped=!!v.lonaxisSpan[g];if(!1===a.visible){var _=p.extendDeep({},r._template);_.showcoastlines=!1,_.showcountries=!1,_.showframe=!1,_.showlakes=!1,_.showland=!1,_.showocean=!1,_.showrivers=!1,_.showsubunits=!1,_.lonaxis&&(_.lonaxis.showgrid=!1),_.lataxis&&(_.lataxis.showgrid=!1),r._template=_}for(var T=u("visible"),k=0;k<n.length;k++){var L,M=n[k],O=[30,10][k];if(o)L=f[M+"Range"];else{var P=v[M+"Span"],S=(P[g]||P["*"])/2,E=u("projection.rotation."+M.substr(0,3),f.projRotate[k]);L=[E-S,E+S]}var R=u(M+".range",L);u(M+".tick0"),u(M+".dtick",O),u(M+".showgrid",!!T&&void 0)&&(u(M+".gridcolor"),u(M+".gridwidth")),r[M]._ax={type:"linear",_id:M.slice(0,3),_traceIndices:i,setScale:p.identity,c2l:p.identity,r2l:p.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var B=r.lonaxis.range,H=r.lataxis.range,V=B[0],Z=B[1];V>0&&Z<0&&(Z+=360);var W,G,X,te=(V+Z)/2;if(!h){var D=o?f.projRotate:[te,0,0];W=u("projection.rotation.lon",D[0]),u("projection.rotation.lat",D[1]),u("projection.rotation.roll",D[2]),u("showcoastlines",!o&&T)&&(u("coastlinecolor"),u("coastlinewidth")),u("showocean",!!T&&void 0)&&u("oceancolor")}h?(G=-96.6,X=38.7):(G=o?te:W,X=(H[0]+H[1])/2),u("center.lon",G),u("center.lat",X),x&&(u("projection.tilt"),u("projection.distance")),d&&u("projection.parallels",f.projParallels||[0,60]),u("projection.scale"),u("showland",!!T&&void 0)&&u("landcolor"),u("showlakes",!!T&&void 0)&&u("lakecolor"),u("showrivers",!!T&&void 0)&&(u("rivercolor"),u("riverwidth")),u("showcountries",o&&"usa"!==c&&T)&&(u("countrycolor"),u("countrywidth")),("usa"===c||"north america"===c&&50===l)&&(u("showsubunits",T),u("subunitcolor"),u("subunitwidth")),o||u("showframe",T)&&(u("framecolor"),u("framewidth")),u("bgcolor"),u("fitbounds")&&(delete r.projection.scale,o?(delete r.center.lon,delete r.center.lat):w?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}$.exports=function(a,r,u){m(a,r,u,{type:"geo",attributes:e,handleDefaults:t,fullData:u,partition:"y"})}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=y("../../registry"),v=Math.PI/180,e=180/Math.PI,n={cursor:"pointer"},t={cursor:"auto"};function a(T,k){return p.behavior.zoom().translate(k.translate()).scale(k.scale())}function r(T,k,L){var M=T.id,O=T.graphDiv,P=O.layout,S=P[M],E=O._fullLayout,R=E[M],B={},H={};function V(Z,W){B[M+"."+Z]=m.nestedProperty(S,Z).get(),b.call("_storeDirectGUIEdit",P,E._preGUI,B);var G=m.nestedProperty(R,Z);G.get()!==W&&(G.set(W),m.nestedProperty(S,Z).set(W),H[M+"."+Z]=W)}L(V),V("projection.scale",k.scale()/T.fitScale),V("fitbounds",!1),O.emit("plotly_relayout",H)}function u(T,k){var L=a(0,k);function M(O){var P=k.invert(T.midPt);O("center.lon",P[0]),O("center.lat",P[1])}return L.on("zoomstart",function(){p.select(this).style(n)}).on("zoom",function(){k.scale(p.event.scale).translate(p.event.translate),T.render();var O=k.invert(T.midPt);T.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/T.fitScale,"geo.center.lon":O[0],"geo.center.lat":O[1]})}).on("zoomend",function(){p.select(this).style(t),r(T,k,M)}),L}function s(T,k){var L,M,O,P,S,E,R,B,H,V=a(0,k);function Z(G){return k.invert(G)}function W(G){var X=k.rotate(),te=k.invert(T.midPt);G("projection.rotation.lon",-X[0]),G("center.lon",te[0]),G("center.lat",te[1])}return V.on("zoomstart",function(){p.select(this).style(n),L=p.mouse(this),M=k.rotate(),O=k.translate(),P=M,S=Z(L)}).on("zoom",function(){if(E=p.mouse(this),function(te){var D=Z(te);if(!D)return!0;var N=k(D);return Math.abs(N[0]-te[0])>2||Math.abs(N[1]-te[1])>2}(L))return V.scale(k.scale()),void V.translate(k.translate());k.scale(p.event.scale),k.translate([O[0],p.event.translate[1]]),S?Z(E)&&(B=Z(E),k.rotate(R=[P[0]+(B[0]-S[0]),M[1],M[2]]),P=R):S=Z(L=E),H=!0,T.render();var G=k.rotate(),X=k.invert(T.midPt);T.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/T.fitScale,"geo.center.lon":X[0],"geo.center.lat":X[1],"geo.projection.rotation.lon":-G[0]})}).on("zoomend",function(){p.select(this).style(t),H&&r(T,k,W)}),V}function i(T,k){var L,M={r:k.rotate(),k:k.scale()},O=a(0,k),P=function(Z){for(var W=0,G=arguments.length,X=[];++W<G;)X.push(arguments[W]);var te=p.dispatch.apply(null,X);return te.of=function(D,N){return function(U){var Q;try{Q=U.sourceEvent=p.event,U.target=Z,p.event=U,te[U.type].apply(D,N)}finally{p.event=Q}}},te}(O,"zoomstart","zoom","zoomend"),S=0,E=O.on;function R(Z){S++||Z({type:"zoomstart"})}function B(Z){Z({type:"zoom"})}function H(Z){--S||Z({type:"zoomend"})}function V(Z){var W=k.rotate();Z("projection.rotation.lon",-W[0]),Z("projection.rotation.lat",-W[1])}return O.on("zoomstart",function(){p.select(this).style(n);var Z=p.mouse(this),W=k.rotate(),G=W,X=k.translate(),te=c(W);L=l(k,Z),E.call(O,"zoom",function(){var D=p.mouse(this);if(k.scale(M.k=p.event.scale),L){if(l(k,D)){k.rotate(W).translate(X);var N=l(k,D),U=g(L,N),Q=w(f(te,U)),j=M.r=h(Q,L,G);isFinite(j[0])&&isFinite(j[1])&&isFinite(j[2])||(j=G),k.rotate(j),G=j}}else L=l(k,Z=D);B(P.of(this,arguments))}),R(P.of(this,arguments))}).on("zoomend",function(){p.select(this).style(t),E.call(O,"zoom",null),H(P.of(this,arguments)),r(T,k,V)}).on("zoom.redraw",function(){T.render();var Z=k.rotate();T.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/T.fitScale,"geo.projection.rotation.lon":-Z[0],"geo.projection.rotation.lat":-Z[1]})}),p.rebind(O,P,"on")}function l(T,k){var M,O,P,S,L=T.invert(k);return L&&isFinite(L[0])&&isFinite(L[1])&&(O=(M=L)[0]*v,P=M[1]*v,[(S=Math.cos(P))*Math.cos(O),S*Math.sin(O),Math.sin(P)])}function c(T){var k=.5*T[0]*v,L=.5*T[1]*v,M=.5*T[2]*v,O=Math.sin(k),P=Math.cos(k),S=Math.sin(L),E=Math.cos(L),R=Math.sin(M),B=Math.cos(M);return[P*E*B+O*S*R,O*E*B-P*S*R,P*S*B+O*E*R,P*E*R-O*S*B]}function f(T,k){var L=T[0],M=T[1],O=T[2],P=T[3],S=k[0],E=k[1],R=k[2],B=k[3];return[L*S-M*E-O*R-P*B,L*E+M*S+O*B-P*R,L*R-M*B+O*S+P*E,L*B+M*R-O*E+P*S]}function g(T,k){if(T&&k){var L=[(S=T)[1]*(E=k)[2]-S[2]*E[1],S[2]*E[0]-S[0]*E[2],S[0]*E[1]-S[1]*E[0]],M=Math.sqrt(_(L,L)),O=.5*Math.acos(Math.max(-1,Math.min(1,_(T,k)))),P=Math.sin(O)/M;return M&&[Math.cos(O),L[2]*P,-L[1]*P,L[0]*P]}var S,E}function h(T,k,L){var M=d(k,2,T[0]);M=d(M,1,T[1]),M=d(M,0,T[2]-L[2]);var O,P,S=k[0],E=k[1],R=k[2],B=M[0],H=M[1],V=M[2],Z=Math.atan2(E,S)*e,W=Math.sqrt(S*S+E*E);Math.abs(H)>W?(P=(H>0?90:-90)-Z,O=0):(P=Math.asin(H/W)*e-Z,O=Math.sqrt(W*W-H*H));var G=180-P-2*Z,X=(Math.atan2(V,B)-Math.atan2(R,O))*e,te=(Math.atan2(V,B)-Math.atan2(R,-O))*e;return o(L[0],L[1],P,X)<=o(L[0],L[1],G,te)?[P,X,L[2]]:[G,te,L[2]]}function o(T,k,L,M){var O=x(L-T),P=x(M-k);return Math.sqrt(O*O+P*P)}function x(T){return(T%360+540)%360-180}function d(T,k,L){var M=L*v,O=T.slice(),P=0===k?1:0,S=2===k?1:2,E=Math.cos(M),R=Math.sin(M);return O[P]=T[P]*E-T[S]*R,O[S]=T[S]*E+T[P]*R,O}function w(T){return[Math.atan2(2*(T[0]*T[1]+T[2]*T[3]),1-2*(T[1]*T[1]+T[2]*T[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(T[0]*T[2]-T[3]*T[1]))))*e,Math.atan2(2*(T[0]*T[3]+T[1]*T[2]),1-2*(T[2]*T[2]+T[3]*T[3]))*e]}function _(T,k){for(var L=0,M=0,O=T.length;M<O;++M)L+=T[M]*k[M];return L}$.exports=function(T,k){return(k._isScoped?u:k._isClipped?i:s)(T,T.projection)}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(y,$,ee){"use strict";var p=y("../registry"),m=y("./cartesian/constants").SUBPLOT_PATTERN;ee.getSubplotCalcData=function(b,v,e){var n=p.subplotsRegistry[v];if(!n)return[];for(var t=n.attr,a=[],r=0;r<b.length;r++){var u=b[r];u[0].trace[t]===e&&a.push(u)}return a},ee.getModuleCalcData=function(b,v){var e,n=[],t=[];if(!(e="string"==typeof v?p.getModule(v).plot:"function"==typeof v?v:v.plot))return[n,b];for(var a=0;a<b.length;a++){var r=b[a],u=r[0].trace;!0===u.visible&&0!==u._length&&(u._module.plot===e?n.push(r):t.push(r))}return[n,t]},ee.getSubplotData=function(b,v,e){if(!p.subplotsRegistry[v])return[];var n,t,a,r=p.subplotsRegistry[v].attr,u=[];if("gl2d"===v){var s=e.match(m);t="x"+s[1],a="y"+s[2]}for(var i=0;i<b.length;i++)n=b[i],"gl2d"===v&&p.traceIs(n,"gl2d")?n[r[0]]===t&&n[r[1]]===a&&u.push(n):n[r]===e&&u.push(n);return u}},{"../registry":638,"./cartesian/constants":561}],594:[function(y,$,ee){"use strict";var p=y("mouse-change"),m=y("mouse-wheel"),b=y("mouse-event-offset"),v=y("../cartesian/constants"),e=y("has-passive-events");function n(t,a){this.element=t,this.plot=a,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}$.exports=function(t){var a=t.mouseContainer,r=t.glplot,u=new n(a,r);function s(){t.xaxis.autorange=!1,t.yaxis.autorange=!1}function i(l,c,f){var g,h,o=t.calcDataBox(),x=r.viewBox,d=u.lastPos[0],w=u.lastPos[1],_=v.MINDRAG*r.pixelRatio,T=v.MINZOOM*r.pixelRatio;function k(E,R,B){var H=Math.min(R,B),V=Math.max(R,B);H!==V?(o[E]=H,o[E+2]=V,u.dataBox=o,t.setRanges(o)):(t.selectBox.selectBox=[0,0,1,1],t.glplot.setDirty())}switch(c*=r.pixelRatio,f=x[3]-x[1]-(f*=r.pixelRatio),t.fullLayout.dragmode){case"zoom":if(l){var L=c/(x[2]-x[0])*(o[2]-o[0])+o[0],M=f/(x[3]-x[1])*(o[3]-o[1])+o[1];u.boxInited||(u.boxStart[0]=L,u.boxStart[1]=M,u.dragStart[0]=c,u.dragStart[1]=f),u.boxEnd[0]=L,u.boxEnd[1]=M,u.boxInited=!0,u.boxEnabled||u.boxStart[0]===u.boxEnd[0]&&u.boxStart[1]===u.boxEnd[1]||(u.boxEnabled=!0);var O=Math.abs(u.dragStart[0]-c)<T,P=Math.abs(u.dragStart[1]-f)<T;if(!function(){for(var E=t.graphDiv._fullLayout._axisConstraintGroups,R=t.xaxis._id,B=t.yaxis._id,H=0;H<E.length;H++)if(-1!==E[H][R]){if(-1!==E[H][B])return!0;break}return!1}()||O&&P)O&&(u.boxEnd[0]=u.boxStart[0]),P&&(u.boxEnd[1]=u.boxStart[1]);else{g=u.boxEnd[0]-u.boxStart[0],h=u.boxEnd[1]-u.boxStart[1];var S=(o[3]-o[1])/(o[2]-o[0]);Math.abs(g*S)>Math.abs(h)?(u.boxEnd[1]=u.boxStart[1]+Math.abs(g)*S*(h>=0?1:-1),u.boxEnd[1]<o[1]?(u.boxEnd[1]=o[1],u.boxEnd[0]=u.boxStart[0]+(o[1]-u.boxStart[1])/Math.abs(S)):u.boxEnd[1]>o[3]&&(u.boxEnd[1]=o[3],u.boxEnd[0]=u.boxStart[0]+(o[3]-u.boxStart[1])/Math.abs(S))):(u.boxEnd[0]=u.boxStart[0]+Math.abs(h)/S*(g>=0?1:-1),u.boxEnd[0]<o[0]?(u.boxEnd[0]=o[0],u.boxEnd[1]=u.boxStart[1]+(o[0]-u.boxStart[0])*Math.abs(S)):u.boxEnd[0]>o[2]&&(u.boxEnd[0]=o[2],u.boxEnd[1]=u.boxStart[1]+(o[2]-u.boxStart[0])*Math.abs(S)))}}else u.boxEnabled?(h=u.boxStart[1]!==u.boxEnd[1],(g=u.boxStart[0]!==u.boxEnd[0])||h?(g&&(k(0,u.boxStart[0],u.boxEnd[0]),t.xaxis.autorange=!1),h&&(k(1,u.boxStart[1],u.boxEnd[1]),t.yaxis.autorange=!1),t.relayoutCallback()):t.glplot.setDirty(),u.boxEnabled=!1,u.boxInited=!1):u.boxInited&&(u.boxInited=!1);break;case"pan":u.boxEnabled=!1,u.boxInited=!1,l?(u.panning||(u.dragStart[0]=c,u.dragStart[1]=f),Math.abs(u.dragStart[0]-c)<_&&(c=u.dragStart[0]),Math.abs(u.dragStart[1]-f)<_&&(f=u.dragStart[1]),h=(w-f)*(o[3]-o[1])/(r.viewBox[3]-r.viewBox[1]),o[0]+=g=(d-c)*(o[2]-o[0])/(r.viewBox[2]-r.viewBox[0]),o[2]+=g,o[1]+=h,o[3]+=h,t.setRanges(o),u.panning=!0,u.lastInputTime=Date.now(),s(),t.cameraChanged(),t.handleAnnotations()):u.panning&&(u.panning=!1,t.relayoutCallback())}u.lastPos[0]=c,u.lastPos[1]=f}return u.mouseListener=p(a,i),a.addEventListener("touchstart",function(l){var c=b(l.changedTouches[0],a);i(0,c[0],c[1]),i(1,c[0],c[1]),l.preventDefault()},!!e&&{passive:!1}),a.addEventListener("touchmove",function(l){l.preventDefault();var c=b(l.changedTouches[0],a);i(1,c[0],c[1]),l.preventDefault()},!!e&&{passive:!1}),a.addEventListener("touchend",function(l){i(0,u.lastPos[0],u.lastPos[1]),l.preventDefault()},!!e&&{passive:!1}),u.wheelListener=m(a,function(l,c){if(!t.scrollZoom)return!1;var f=t.calcDataBox(),g=r.viewBox,h=u.lastPos[0],o=u.lastPos[1],x=Math.exp(5*c/(g[3]-g[1])),d=h/(g[2]-g[0])*(f[2]-f[0])+f[0],w=o/(g[3]-g[1])*(f[3]-f[1])+f[1];return f[0]=(f[0]-d)*x+d,f[2]=(f[2]-d)*x+d,f[1]=(f[1]-w)*x+w,f[3]=(f[3]-w)*x+w,t.setRanges(f),u.lastInputTime=Date.now(),s(),t.cameraChanged(),t.handleAnnotations(),t.relayoutCallback(),!0},!0),u}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(y,$,ee){"use strict";var p=y("../cartesian/axes"),m=y("../../lib/str2rgbarray");function b(n){this.scene=n,this.gl=n.gl,this.pixelRatio=n.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var v=b.prototype,e=["xaxis","yaxis"];v.merge=function(n){var t,a,r,u,s,i,l,c,f,g,h;for(this.titleEnable=!1,this.backgroundColor=m(n.plot_bgcolor),g=0;g<2;++g){var o=(t=e[g]).charAt(0);for(r=(a=n[this.scene[t]._name]).title.text===this.scene.fullLayout._dfltTitle[o]?"":a.title.text,h=0;h<=2;h+=2)this.labelEnable[g+h]=!1,this.labels[g+h]=r,this.labelColor[g+h]=m(a.title.font.color),this.labelFont[g+h]=a.title.font.family,this.labelSize[g+h]=a.title.font.size,this.labelPad[g+h]=this.getLabelPad(t,a),this.tickEnable[g+h]=!1,this.tickColor[g+h]=m((a.tickfont||{}).color),this.tickAngle[g+h]="auto"===a.tickangle?0:Math.PI*-a.tickangle/180,this.tickPad[g+h]=this.getTickPad(a),this.tickMarkLength[g+h]=0,this.tickMarkWidth[g+h]=a.tickwidth||0,this.tickMarkColor[g+h]=m(a.tickcolor),this.borderLineEnable[g+h]=!1,this.borderLineColor[g+h]=m(a.linecolor),this.borderLineWidth[g+h]=a.linewidth||0;l=this.hasSharedAxis(a),s=this.hasAxisInDfltPos(t,a)&&!l,i=this.hasAxisInAltrPos(t,a)&&!l,u=a.mirror||!1,c=l?-1!==String(u).indexOf("all"):!!u,f=l?"allticks"===u:-1!==String(u).indexOf("ticks"),s?this.labelEnable[g]=!0:i&&(this.labelEnable[g+2]=!0),s?this.tickEnable[g]=a.showticklabels:i&&(this.tickEnable[g+2]=a.showticklabels),(s||c)&&(this.borderLineEnable[g]=a.showline),(i||c)&&(this.borderLineEnable[g+2]=a.showline),(s||f)&&(this.tickMarkLength[g]=this.getTickMarkLength(a)),(i||f)&&(this.tickMarkLength[g+2]=this.getTickMarkLength(a)),this.gridLineEnable[g]=a.showgrid,this.gridLineColor[g]=m(a.gridcolor),this.gridLineWidth[g]=a.gridwidth,this.zeroLineEnable[g]=a.zeroline,this.zeroLineColor[g]=m(a.zerolinecolor),this.zeroLineWidth[g]=a.zerolinewidth}},v.hasSharedAxis=function(n){var t=this.scene;return 0!==p.findSubplotsWithAxis(t.fullLayout._subplots.gl2d,n).indexOf(t.id)},v.hasAxisInDfltPos=function(n,t){var a=t.side;return"xaxis"===n?"bottom"===a:"yaxis"===n?"left"===a:void 0},v.hasAxisInAltrPos=function(n,t){var a=t.side;return"xaxis"===n?"top"===a:"yaxis"===n?"right"===a:void 0},v.getLabelPad=function(n,t){var a=t.title.font.size,r=t.showticklabels;return"xaxis"===n?"top"===t.side?a*(1.5+(r?1:0))-10:a*(1.5+(r?.5:0))-10:"yaxis"===n?"right"===t.side?10+a*(1.5+(r?1:.5)):10+a*(1.5+(r?.5:0)):void 0},v.getTickPad=function(n){return"outside"===n.ticks?10+n.ticklen:15},v.getTickMarkLength=function(n){if(!n.ticks)return 0;var t=n.ticklen;return"inside"===n.ticks?-t:t},$.exports=function(n){return new b(n)}},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(y,$,ee){"use strict";var p=y("../../plot_api/edit_types").overrideAll,m=y("./scene2d"),b=y("../layout_attributes"),v=y("../../constants/xmlns_namespaces"),e=y("../cartesian/constants"),n=y("../cartesian"),t=y("../../components/fx/layout_attributes"),a=y("../get_data").getSubplotData;ee.name="gl2d",ee.attr=["xaxis","yaxis"],ee.idRoot=["x","y"],ee.idRegex=e.idRegex,ee.attrRegex=e.attrRegex,ee.attributes=y("../cartesian/attributes"),ee.supplyLayoutDefaults=function(r,u,s){u._has("cartesian")||n.supplyLayoutDefaults(r,u,s)},ee.layoutAttrOverrides=p(n.layoutAttributes,"plot","from-root"),ee.baseLayoutAttrOverrides=p({plot_bgcolor:b.plot_bgcolor,hoverlabel:t.hoverlabel},"plot","nested"),ee.plot=function(r){for(var u=r._fullLayout,s=r._fullData,i=u._subplots.gl2d,l=0;l<i.length;l++){var c=i[l],f=u._plots[c],g=a(s,"gl2d",c),h=f._scene2d;void 0===h&&(h=new m({id:c,graphDiv:r,container:r.querySelector(".gl-container"),staticPlot:r._context.staticPlot,plotGlPixelRatio:r._context.plotGlPixelRatio},u),f._scene2d=h),h.plot(g,r.calcdata,u,r.layout)}},ee.clean=function(r,u,s,i){for(var l=i._subplots.gl2d||[],c=0;c<l.length;c++){var f=l[c],g=i._plots[f];if(g._scene2d){var h=a(r,"gl2d",f);0===h.length&&(g._scene2d.destroy(),delete i._plots[f])}}n.clean.apply(this,arguments)},ee.drawFramework=function(r){r._context.staticPlot||n.drawFramework(r)},ee.toSVG=function(r){for(var u=r._fullLayout,s=u._subplots.gl2d,i=0;i<s.length;i++){var l=u._plots[s[i]]._scene2d,c=l.toImage("png");u._glimages.append("svg:image").attr({xmlns:v.svg,"xlink:href":c,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),l.destroy()}},ee.updateFx=function(r){for(var u=r._fullLayout,s=u._subplots.gl2d,i=0;i<s.length;i++)u._plots[s[i]]._scene2d.updateFx(u.dragmode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(y,$,ee){"use strict";var p,m,b=y("../../registry"),v=y("../../plots/cartesian/axes"),e=y("../../components/fx"),n=y("../../../stackgl_modules").gl_plot2d,t=y("../../../stackgl_modules").gl_spikes2d,a=y("../../../stackgl_modules").gl_select_box,r=y("webgl-context"),u=y("./convert"),s=y("./camera"),i=y("../../lib/show_no_webgl_msg"),l=y("../cartesian/constraints"),c=l.enforce,f=l.clean,g=y("../cartesian/autorange").doAutoRange,h=y("../../components/dragelement/helpers"),o=h.drawMode,x=h.selectMode,d=["xaxis","yaxis"],w=y("../cartesian/constants").SUBPLOT_PATTERN;function _(k,L){this.container=k.container,this.graphDiv=k.graphDiv,this.pixelRatio=k.plotGlPixelRatio||window.devicePixelRatio,this.id=k.id,this.staticPlot=!!k.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),this.stopped||(this.glplotOptions=u(this),this.glplotOptions.merge(L),this.glplot=n(this.glplotOptions),this.camera=s(this),this.traces={},this.spikes=t(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}$.exports=_;var T=_.prototype;T.makeFramework=function(){if(this.staticPlot){if(!(m||(p=document.createElement("canvas"),m=r({canvas:p,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=p,this.gl=m}else{var k=this.container.querySelector(".gl-canvas-focus"),L=r({canvas:k,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L)return i(this),void(this.stopped=!0);this.canvas=k,this.gl=L}var M=this.canvas;M.style.width="100%",M.style.height="100%",M.style.position="absolute",M.style.top="0px",M.style.left="0px",M.style["pointer-events"]="none",this.updateSize(M);var O=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",O.style["z-index"]=20,O.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var S=this.container;S.appendChild(O),S.appendChild(P);var E=this;P.addEventListener("mouseout",function(){E.isMouseOver=!1,E.unhover()}),P.addEventListener("mouseover",function(){E.isMouseOver=!0})},T.toImage=function(k){k||(k="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(p),this.updateSize(this.canvas);var L=this.glplot.gl,M=L.drawingBufferWidth,O=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(M*O*4);L.readPixels(0,0,M,O,L.RGBA,L.UNSIGNED_BYTE,P);for(var S=0,E=O-1;S<E;++S,--E)for(var R=0;R<M;++R)for(var B=0;B<4;++B){var H=P[4*(M*S+R)+B];P[4*(M*S+R)+B]=P[4*(M*E+R)+B],P[4*(M*E+R)+B]=H}var V=document.createElement("canvas");V.width=M,V.height=O;var Z,W=V.getContext("2d"),G=W.createImageData(M,O);switch(G.data.set(P),W.putImageData(G,0,0),k){case"jpeg":Z=V.toDataURL("image/jpeg");break;case"webp":Z=V.toDataURL("image/webp");break;default:Z=V.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(p),Z},T.updateSize=function(k){k||(k=this.canvas);var L=this.pixelRatio,M=this.fullLayout,P=M.height,S=0|Math.ceil(L*M.width),E=0|Math.ceil(L*P);return k.width===S&&k.height===E||(k.width=S,k.height=E),k},T.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var k=[v.calcTicks(this.xaxis),v.calcTicks(this.yaxis)],L=0;L<2;++L)for(var M=0;M<k[L].length;++M)k[L][M].text=k[L][M].text+"";return k},T.updateRefs=function(k){this.fullLayout=k;var L=this.id.match(w),O="yaxis"+L[2];this.xaxis=this.fullLayout["xaxis"+L[1]],this.yaxis=this.fullLayout[O]},T.relayoutCallback=function(){var k=this.graphDiv,L=this.xaxis,M=this.yaxis,O=k.layout,P={},S=P[L._name+".range"]=L.range.slice(),E=P[M._name+".range"]=M.range.slice();P[L._name+".autorange"]=L.autorange,P[M._name+".autorange"]=M.autorange,b.call("_storeDirectGUIEdit",k.layout,k._fullLayout._preGUI,P);var R=O[L._name];R.range=S,R.autorange=L.autorange;var B=O[M._name];B.range=E,B.autorange=M.autorange,P.lastInputTime=this.camera.lastInputTime,k.emit("plotly_relayout",P)},T.cameraChanged=function(){var k=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks();(function(M,O){for(var P=0;P<2;++P){var S=M[P],E=O[P];if(S.length!==E.length)return!0;for(var R=0;R<S.length;++R)if(S[R].x!==E[R].x)return!0}return!1})(L,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=k.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},T.handleAnnotations=function(){for(var k=this.graphDiv,L=this.fullLayout.annotations,M=0;M<L.length;M++){var O=L[M];O.xref===this.xaxis._id&&O.yref===this.yaxis._id&&b.getComponentMethod("annotations","drawOne")(k,M)}},T.destroy=function(){if(this.glplot){var k=this.traces;k&&Object.keys(k).map(function(L){k[L].dispose(),delete k[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},T.plot=function(k,L,M){var O=this.glplot;this.updateRefs(M),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(k,L),this.updateFx(M.dragmode);var P=M.width,S=M.height;this.updateSize(this.canvas);var E=this.glplotOptions;E.merge(M),E.screenBox=[0,0,P,S];var R={_fullLayout:{_axisConstraintGroups:M._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:M._size}};f(R,this.xaxis),f(R,this.yaxis);var B,H,V=M._size,Z=this.xaxis.domain,W=this.yaxis.domain;for(E.viewBox=[V.l+Z[0]*V.w,V.b+W[0]*V.h,P-V.r-(1-Z[1])*V.w,S-V.t-(1-W[1])*V.h],this.mouseContainer.style.width=V.w*(Z[1]-Z[0])+"px",this.mouseContainer.style.height=V.h*(W[1]-W[0])+"px",this.mouseContainer.height=V.h*(W[1]-W[0]),this.mouseContainer.style.left=V.l+Z[0]*V.w+"px",this.mouseContainer.style.top=V.t+(1-W[1])*V.h+"px",H=0;H<2;++H)(B=this[d[H]])._length=E.viewBox[H+2]-E.viewBox[H],g(this.graphDiv,B),B.setScale();c(R),E.ticks=this.computeTickMarks(),E.dataBox=this.calcDataBox(),E.merge(M),O.update(E),this.glplot.draw()},T.calcDataBox=function(){var k=this.xaxis,L=this.yaxis,M=k.range,O=L.range,P=k.r2l,S=L.r2l;return[P(M[0]),S(O[0]),P(M[1]),S(O[1])]},T.setRanges=function(k){var L=this.xaxis,M=this.yaxis,O=L.l2r,P=M.l2r;L.range=[O(k[0]),O(k[2])],M.range=[P(k[1]),P(k[3])]},T.updateTraces=function(k,L){var M,O,P,S=Object.keys(this.traces);this.fullData=k;e:for(M=0;M<S.length;M++){var E=S[M],R=this.traces[E];for(O=0;O<k.length;O++)if((P=k[O]).uid===E&&P.type===R.type)continue e;R.dispose(),delete this.traces[E]}for(M=0;M<k.length;M++){var B=L[M],H=this.traces[(P=k[M]).uid];H?H.update(P,B):(H=P._module.plot(this,P,B),this.traces[P.uid]=H)}this.glplot.objects.sort(function(V,Z){return V._trace.index-Z._trace.index})},T.updateFx=function(k){x(k)||o(k)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===k?"move":"zoom"===k?"crosshair":null},T.emitPointAction=function(k,L){for(var M,O=k.trace.uid,P=k.pointIndex,S=0;S<this.fullData.length;S++)this.fullData[S].uid===O&&(M=this.fullData[S]);var E={x:k.traceCoord[0],y:k.traceCoord[1],curveNumber:M.index,pointNumber:P,data:M._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(E,M,P),this.graphDiv.emit(L,{points:[E]})},T.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var k=this.glplot,L=this.camera,M=L.mouseListener,O=1===this.lastButtonState&&0===M.buttons,P=this.fullLayout;this.lastButtonState=M.buttons,this.cameraChanged();var S,E=M.x*k.pixelRatio,R=this.canvas.height-k.pixelRatio*M.y;if(L.boxEnabled&&"zoom"===P.dragmode){this.selectBox.enabled=!0;for(var B=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],H=0;H<2;H++)L.boxStart[H]===L.boxEnd[H]&&(B[H]=k.dataBox[H],B[H+2]=k.dataBox[H+2]);k.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var V=P._size,G=(S=k.pick(E/k.pixelRatio+V.l+this.xaxis.domain[0]*V.w,R/k.pixelRatio-(V.t+(1-this.yaxis.domain[1])*V.h)))&&S.object._trace.handlePick(S);if(G&&O&&this.emitPointAction(G,"plotly_click"),S&&"skip"!==S.object._trace.hoverinfo&&P.hovermode&&G&&(!this.lastPickResult||this.lastPickResult.traceUid!==G.trace.uid||this.lastPickResult.dataCoord[0]!==G.dataCoord[0]||this.lastPickResult.dataCoord[1]!==G.dataCoord[1])){var X=G;this.lastPickResult={traceUid:G.trace?G.trace.uid:null,dataCoord:G.dataCoord.slice()},this.spikes.update({center:S.dataCoord}),X.screenCoord=[((k.viewBox[2]-k.viewBox[0])*(S.dataCoord[0]-k.dataBox[0])/(k.dataBox[2]-k.dataBox[0])+k.viewBox[0])/k.pixelRatio,(this.canvas.height-(k.viewBox[3]-k.viewBox[1])*(S.dataCoord[1]-k.dataBox[1])/(k.dataBox[3]-k.dataBox[1])-k.viewBox[1])/k.pixelRatio],this.emitPointAction(G,"plotly_hover");var te=this.fullData[X.trace.index]||{},D=X.pointIndex,N=e.castHoverinfo(te,P,D);if(N&&"all"!==N){var U=N.split("+");-1===U.indexOf("x")&&(X.traceCoord[0]=void 0),-1===U.indexOf("y")&&(X.traceCoord[1]=void 0),-1===U.indexOf("z")&&(X.traceCoord[2]=void 0),-1===U.indexOf("text")&&(X.textLabel=void 0),-1===U.indexOf("name")&&(X.name=void 0)}e.loneHover({x:X.screenCoord[0],y:X.screenCoord[1],xLabel:this.hoverFormatter("xaxis",X.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",X.traceCoord[1]),zLabel:X.traceCoord[2],text:X.textLabel,name:X.name,color:e.castHoverOption(te,D,"bgcolor")||X.color,borderColor:e.castHoverOption(te,D,"bordercolor"),fontFamily:e.castHoverOption(te,D,"font.family"),fontSize:e.castHoverOption(te,D,"font.size"),fontColor:e.castHoverOption(te,D,"font.color"),nameLength:e.castHoverOption(te,D,"namelength"),textAlign:e.castHoverOption(te,D,"align")},{container:this.svgContainer,gd:this.graphDiv})}}S||this.unhover(),k.draw()}},T.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},T.hoverFormatter=function(k,L){if(void 0!==L){var M=this[k];return v.tickText(M,M.c2l(L),"hover").text}}},{"../../../stackgl_modules":1119,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(y,$,ee){"use strict";var p=y("../../plot_api/edit_types").overrideAll,m=y("../../components/fx/layout_attributes"),b=y("./scene"),v=y("../get_data").getSubplotData,e=y("../../lib"),n=y("../../constants/xmlns_namespaces");ee.name="gl3d",ee.attr="scene",ee.idRoot="scene",ee.idRegex=ee.attrRegex=e.counterRegex("scene"),ee.attributes=y("./layout/attributes"),ee.layoutAttributes=y("./layout/layout_attributes"),ee.baseLayoutAttrOverrides=p({hoverlabel:m.hoverlabel},"plot","nested"),ee.supplyLayoutDefaults=y("./layout/defaults"),ee.plot=function(t){for(var a=t._fullLayout,r=t._fullData,u=a._subplots.gl3d,s=0;s<u.length;s++){var i=u[s],l=v(r,"gl3d",i),c=a[i],f=c.camera,g=c._scene;g||(g=new b({id:i,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:f},a),c._scene=g),g.viewInitial||(g.viewInitial={up:{x:f.up.x,y:f.up.y,z:f.up.z},eye:{x:f.eye.x,y:f.eye.y,z:f.eye.z},center:{x:f.center.x,y:f.center.y,z:f.center.z}}),g.plot(l,a,t.layout)}},ee.clean=function(t,a,r,u){for(var s=u._subplots.gl3d||[],i=0;i<s.length;i++){var l=s[i];!a[l]&&u[l]._scene&&(u[l]._scene.destroy(),u._infolayer&&u._infolayer.selectAll(".annotation-"+l).remove())}},ee.toSVG=function(t){for(var a=t._fullLayout,r=a._subplots.gl3d,u=a._size,s=0;s<r.length;s++){var i=a[r[s]],l=i.domain,c=i._scene,f=c.toImage("png");a._glimages.append("svg:image").attr({xmlns:n.svg,"xlink:href":f,x:u.l+u.w*l.x[0],y:u.t+u.h*(1-l.y[1]),width:u.w*(l.x[1]-l.x[0]),height:u.h*(l.y[1]-l.y[0]),preserveAspectRatio:"none"}),c.destroy()}},ee.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){var a=t.substr(5);return"1"===a&&(a=""),"scene"+a}},ee.updateFx=function(t){for(var a=t._fullLayout,r=a._subplots.gl3d,u=0;u<r.length;u++)a[r[u]]._scene.updateFx(a.dragmode,a.hovermode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(y,$,ee){"use strict";$.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(y,$,ee){"use strict";var p=y("../../../components/color"),m=y("../../cartesian/layout_attributes"),b=y("../../../lib/extend").extendFlat,v=y("../../../plot_api/edit_types").overrideAll;$.exports=v({visible:m.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:p.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:m.color,categoryorder:m.categoryorder,categoryarray:m.categoryarray,title:{text:m.title.text,font:m.title.font},type:b({},m.type,{values:["-","linear","log","date","category"]}),autotypenumbers:m.autotypenumbers,autorange:m.autorange,rangemode:m.rangemode,range:b({},m.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,mirror:m.mirror,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,showticklabels:m.showticklabels,tickfont:m.tickfont,tickangle:m.tickangle,tickprefix:m.tickprefix,showtickprefix:m.showtickprefix,ticksuffix:m.ticksuffix,showticksuffix:m.showticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,minexponent:m.minexponent,separatethousands:m.separatethousands,tickformat:m.tickformat,tickformatstops:m.tickformatstops,hoverformat:m.hoverformat,showline:m.showline,linecolor:m.linecolor,linewidth:m.linewidth,showgrid:m.showgrid,gridcolor:b({},m.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:m.gridwidth,zeroline:m.zeroline,zerolinecolor:m.zerolinecolor,zerolinewidth:m.zerolinewidth,_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(y,$,ee){"use strict";var p=y("tinycolor2").mix,m=y("../../../lib"),b=y("../../../plot_api/plot_template"),v=y("./axis_attributes"),e=y("../../cartesian/type_defaults"),n=y("../../cartesian/axis_defaults"),t=["xaxis","yaxis","zaxis"];$.exports=function(a,r,u){var s,i;function l(g,h){return m.coerce(s,i,v,g,h)}for(var c=0;c<t.length;c++){var f=t[c];s=a[f]||{},(i=b.newContainer(r,f))._id=f[0]+u.scene,i._name=f,e(s,i,l,u),n(s,i,l,{font:u.font,letter:f[0],data:u.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:u.bgColor,calendar:u.calendar},u.fullLayout),l("gridcolor",p(i.color,u.bgColor,13600/187).toRgbString()),l("title.text",f[0]),i.setScale=m.noop,l("showspikes")&&(l("spikesides"),l("spikethickness"),l("spikecolor",i.color)),l("showaxeslabels"),l("showbackground")&&l("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(y,$,ee){"use strict";var p=y("../../../lib/str2rgbarray"),m=y("../../../lib"),b=["xaxis","yaxis","zaxis"];function v(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}v.prototype.merge=function(e,n){for(var t=0;t<3;++t){var a=n[b[t]];a.visible?(this.labels[t]=e._meta?m.templateString(a.title.text,e._meta):a.title.text,"font"in a.title&&(a.title.font.color&&(this.labelColor[t]=p(a.title.font.color)),a.title.font.family&&(this.labelFont[t]=a.title.font.family),a.title.font.size&&(this.labelSize[t]=a.title.font.size)),"showline"in a&&(this.lineEnable[t]=a.showline),"linecolor"in a&&(this.lineColor[t]=p(a.linecolor)),"linewidth"in a&&(this.lineWidth[t]=a.linewidth),"showgrid"in a&&(this.gridEnable[t]=a.showgrid),"gridcolor"in a&&(this.gridColor[t]=p(a.gridcolor)),"gridwidth"in a&&(this.gridWidth[t]=a.gridwidth),"log"===a.type?this.zeroEnable[t]=!1:"zeroline"in a&&(this.zeroEnable[t]=a.zeroline),"zerolinecolor"in a&&(this.zeroLineColor[t]=p(a.zerolinecolor)),"zerolinewidth"in a&&(this.zeroLineWidth[t]=a.zerolinewidth),this.lineTickEnable[t]=!(!("ticks"in a)||!a.ticks),"ticklen"in a&&(this.lineTickLength[t]=this._defaultLineTickLength[t]=a.ticklen),"tickcolor"in a&&(this.lineTickColor[t]=p(a.tickcolor)),"tickwidth"in a&&(this.lineTickWidth[t]=a.tickwidth),"tickangle"in a&&(this.tickAngle[t]="auto"===a.tickangle?-3600:Math.PI*-a.tickangle/180),"showticklabels"in a&&(this.tickEnable[t]=a.showticklabels),"tickfont"in a&&(a.tickfont.color&&(this.tickColor[t]=p(a.tickfont.color)),a.tickfont.family&&(this.tickFont[t]=a.tickfont.family),a.tickfont.size&&(this.tickSize[t]=a.tickfont.size)),"mirror"in a?-1!==["ticks","all","allticks"].indexOf(a.mirror)?(this.lineTickMirror[t]=!0,this.lineMirror[t]=!0):!0===a.mirror?(this.lineTickMirror[t]=!1,this.lineMirror[t]=!0):(this.lineTickMirror[t]=!1,this.lineMirror[t]=!1):this.lineMirror[t]=!1,"showbackground"in a&&!1!==a.showbackground?(this.backgroundEnable[t]=!0,this.backgroundColor[t]=p(a.backgroundcolor)):this.backgroundEnable[t]=!1):(this.tickEnable[t]=!1,this.labelEnable[t]=!1,this.lineEnable[t]=!1,this.lineTickEnable[t]=!1,this.gridEnable[t]=!1,this.zeroEnable[t]=!1,this.backgroundEnable[t]=!1)}},$.exports=function(e,n){var t=new v;return t.merge(e,n),t}},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(y,$,ee){"use strict";var p=y("../../../lib"),m=y("../../../components/color"),b=y("../../../registry"),v=y("../../subplot_defaults"),e=y("./axis_defaults"),n=y("./layout_attributes"),t=y("../../get_data").getSubplotData;function a(r,u,s,i){for(var l=s("bgcolor"),c=m.combine(l,i.paper_bgcolor),f=["up","center","eye"],g=0;g<f.length;g++)s("camera."+f[g]+".x"),s("camera."+f[g]+".y"),s("camera."+f[g]+".z");s("camera.projection.type");var h=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),o=s("aspectmode",h?"manual":"auto");h||(r.aspectratio=u.aspectratio={x:1,y:1,z:1},"manual"===o&&(u.aspectmode="auto"),r.aspectmode=u.aspectmode);var x=t(i.fullData,"gl3d",i.id);e(r,u,{font:i.font,scene:i.id,data:x,bgColor:c,calendar:i.calendar,autotypenumbersDflt:i.autotypenumbersDflt,fullLayout:i.fullLayout}),b.getComponentMethod("annotations3d","handleDefaults")(r,u,i);var d=i.getDfltFromLayout("dragmode");if(!1!==d&&!d)if(d="orbit",r.camera&&r.camera.up){var w=r.camera.up.x,_=r.camera.up.y,T=r.camera.up.z;0!==T&&(w&&_&&T?T/Math.sqrt(w*w+_*_+T*T)>.999&&(d="turntable"):d="turntable")}else d="turntable";s("dragmode",d),s("hovermode",i.getDfltFromLayout("hovermode"))}$.exports=function(r,u,s){var i=u._basePlotModules.length>1;v(r,u,s,{type:"gl3d",attributes:n,handleDefaults:a,fullLayout:u,font:u.font,fullData:s,getDfltFromLayout:function(l){if(!i)return p.validate(r[l],n[l])?r[l]:void 0},autotypenumbersDflt:u.autotypenumbers,paper_bgcolor:u.paper_bgcolor,calendar:u.calendar})}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(y,$,ee){"use strict";var p=y("./axis_attributes"),m=y("../../domain").attributes,b=y("../../../lib/extend").extendFlat,v=y("../../../lib").counterRegex;function e(n,t,a){return{x:{valType:"number",dflt:n,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:a,editType:"camera"},editType:"camera"}}$.exports={_arrayAttrRegexps:[v("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:b(e(0,0,1),{}),center:b(e(0,0,0),{}),eye:b(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:m({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:p,yaxis:p,zaxis:p,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(y,$,ee){"use strict";var p=y("../../../lib/str2rgbarray"),m=["xaxis","yaxis","zaxis"];function b(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}b.prototype.merge=function(v){for(var e=0;e<3;++e){var n=v[m[e]];n.visible?(this.enabled[e]=n.showspikes,this.colors[e]=p(n.spikecolor),this.drawSides[e]=n.spikesides,this.lineWidth[e]=n.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},$.exports=function(v){var e=new b;return e.merge(v),e}},{"../../../lib/str2rgbarray":528}],606:[function(y,$,ee){"use strict";$.exports=function(e){for(var n=e.axesOptions,t=e.glplot.axesPixels,a=e.fullSceneLayout,r=[[],[],[]],u=0;u<3;++u){var s=a[b[u]];if(s._length=(t[u].hi-t[u].lo)*t[u].pixelsPerDataUnit/e.dataScale[u],Math.abs(s._length)===1/0||isNaN(s._length))r[u]=[];else{s._input_range=s.range.slice(),s.range[0]=t[u].lo/e.dataScale[u],s.range[1]=t[u].hi/e.dataScale[u],s._m=1/(e.dataScale[u]*t[u].pixelsPerDataUnit),s.range[0]===s.range[1]&&(s.range[0]-=1,s.range[1]+=1);var i=s.tickmode;if("auto"===s.tickmode){s.tickmode="linear";var l=s.nticks||m.constrain(s._length/40,4,9);p.autoTicks(s,Math.abs(s.range[1]-s.range[0])/l)}for(var c=p.calcTicks(s,{msUTC:!0}),f=0;f<c.length;++f)c[f].x=c[f].x*e.dataScale[u],"date"===s.type&&(c[f].text=c[f].text.replace(/\<br\>/g," "));r[u]=c,s.tickmode=i}}for(n.ticks=r,u=0;u<3;++u)for(v[u]=.5*(e.glplot.bounds[0][u]+e.glplot.bounds[1][u]),f=0;f<2;++f)n.bounds[f][u]=e.glplot.bounds[f][u];e.contourLevels=function(g){for(var h=new Array(3),o=0;o<3;++o){for(var x=g[o],d=new Array(x.length),w=0;w<x.length;++w)d[w]=x[w].x;h[o]=d}return h}(r)};var p=y("../../cartesian/axes"),m=y("../../../lib"),b=["xaxis","yaxis","zaxis"],v=[0,0,0]},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(y,$,ee){"use strict";function p(m,b){var v,e,n=[0,0,0,0];for(v=0;v<4;++v)for(e=0;e<4;++e)n[e]+=m[4*v+e]*b[v];return n}$.exports=function(m,b){return p(m.projection,p(m.view,p(m.model,[b[0],b[1],b[2],1])))}},{}],608:[function(y,$,ee){"use strict";var p,m,b=y("../../../stackgl_modules").gl_plot3d,v=b.createCamera,e=b.createScene,n=y("webgl-context"),t=y("has-passive-events"),a=y("../../registry"),r=y("../../lib"),u=r.preserveDrawingBuffer(),s=y("../../plots/cartesian/axes"),i=y("../../components/fx"),l=y("../../lib/str2rgbarray"),c=y("../../lib/show_no_webgl_msg"),f=y("./project"),g=y("./layout/convert"),h=y("./layout/spikes"),o=y("./layout/tick_marks");function x(k,L){var M=document.createElement("div"),O=k.container;this.graphDiv=k.graphDiv;var P=document.createElementNS("http://www.w3.org/2000/svg","svg");P.style.position="absolute",P.style.top=P.style.left="0px",P.style.width=P.style.height="100%",P.style["z-index"]=20,P.style["pointer-events"]="none",M.appendChild(P),this.svgContainer=P,M.id=k.id,M.style.position="absolute",M.style.top=M.style.left="0px",M.style.width=M.style.height="100%",O.appendChild(M),this.fullLayout=L,this.id=k.id||"scene",this.fullSceneLayout=L[this.id],this.plotArgs=[[],{},{}],this.axesOptions=g(L,L[this.id]),this.spikeOptions=h(L[this.id]),this.container=M,this.staticMode=!!k.staticPlot,this.pixelRatio=this.pixelRatio||k.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var d=x.prototype;d.prepareOptions=function(){var k={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:u,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(m||(p=document.createElement("canvas"),m=n({canvas:p,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");k.gl=m,k.canvas=p}return k};var w=!0;d.tryCreatePlot=function(){var k=this.prepareOptions(),L=!0;try{this.glplot=e(k)}catch(M){if(this.staticMode||!w||u)L=!1;else{r.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{u=k.glOptions.preserveDrawingBuffer=!0,this.glplot=e(k)}catch(O){u=k.glOptions.preserveDrawingBuffer=!1,L=!1}}}return w=!1,L},d.initializeGLCamera=function(){var k=this.fullSceneLayout.camera;this.camera=v(this.container,{center:[k.center.x,k.center.y,k.center.z],eye:[k.eye.x,k.eye.y,k.eye.z],up:[k.up.x,k.up.y,k.up.z],_ortho:"orthographic"===k.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},d.initializeGLPlot=function(){var k=this;if(k.initializeGLCamera(),!k.tryCreatePlot())return c(k);k.traces={},k.make4thDimension();var L=k.graphDiv,M=L.layout,O=function(){var S={};return k.isCameraChanged(M)&&(S[k.id+".camera"]=k.getCamera()),k.isAspectChanged(M)&&(S[k.id+".aspectratio"]=k.glplot.getAspectratio(),"manual"!==M[k.id].aspectmode&&(k.fullSceneLayout.aspectmode=M[k.id].aspectmode=S[k.id+".aspectmode"]="manual")),S},P=function(S){if(!1!==S.fullSceneLayout.dragmode){var E=O();S.saveLayout(M),S.graphDiv.emit("plotly_relayout",E)}};return k.glplot.canvas&&(k.glplot.canvas.addEventListener("mouseup",function(){P(k)}),k.glplot.canvas.addEventListener("wheel",function(S){if(L._context._scrollZoom.gl3d){if(k.camera._ortho){var E=S.deltaX>S.deltaY?1.1:1/1.1,R=k.glplot.getAspectratio();k.glplot.setAspectratio({x:E*R.x,y:E*R.y,z:E*R.z})}P(k)}},!!t&&{passive:!1}),k.glplot.canvas.addEventListener("mousemove",function(){if(!1!==k.fullSceneLayout.dragmode&&0!==k.camera.mouseListener.buttons){var S=O();k.graphDiv.emit("plotly_relayouting",S)}}),k.staticMode||k.glplot.canvas.addEventListener("webglcontextlost",function(S){L&&L.emit&&L.emit("plotly_webglcontextlost",{event:S,layer:k.id})},!1)),k.glplot.oncontextloss=function(){k.recoverContext()},k.glplot.onrender=function(){k.render()},!0},d.render=function(){var k,L=this,M=L.graphDiv,O=L.svgContainer,P=L.container.getBoundingClientRect();M._fullLayout._calcInverseTransform(M);var R=P.width*M._fullLayout._invScaleX,B=P.height*M._fullLayout._invScaleY;O.setAttributeNS(null,"viewBox","0 0 "+R+" "+B),O.setAttributeNS(null,"width",R),O.setAttributeNS(null,"height",B),o(L),L.glplot.axes.update(L.axesOptions);for(var H=Object.keys(L.traces),V=null,Z=L.glplot.selection,W=0;W<H.length;++W)"skip"!==(k=L.traces[H[W]]).data.hoverinfo&&k.handlePick(Z)&&(V=k),k.setContourLevels&&k.setContourLevels();function G(oe,pe,ce){var ge=L.fullSceneLayout[oe+"axis"];return"log"!==ge.type&&(pe=ge.d2l(pe)),s.hoverLabelText(ge,pe,ce)}if(null!==V){var te,X=f(L.glplot.cameraParams,Z.dataCoordinate),D=M._fullData[(k=V.data).index],N=Z.index,U={xLabel:G("x",Z.traceCoordinate[0],k.xhoverformat),yLabel:G("y",Z.traceCoordinate[1],k.yhoverformat),zLabel:G("z",Z.traceCoordinate[2],k.zhoverformat)},Q=i.castHoverinfo(D,L.fullLayout,N),j=(Q||"").split("+"),J=Q&&"all"===Q;D.hovertemplate||J||(-1===j.indexOf("x")&&(U.xLabel=void 0),-1===j.indexOf("y")&&(U.yLabel=void 0),-1===j.indexOf("z")&&(U.zLabel=void 0),-1===j.indexOf("text")&&(Z.textLabel=void 0),-1===j.indexOf("name")&&(V.name=void 0));var K=[];"cone"===k.type||"streamtube"===k.type?(U.uLabel=G("x",Z.traceCoordinate[3],k.uhoverformat),(J||-1!==j.indexOf("u"))&&K.push("u: "+U.uLabel),U.vLabel=G("y",Z.traceCoordinate[4],k.vhoverformat),(J||-1!==j.indexOf("v"))&&K.push("v: "+U.vLabel),U.wLabel=G("z",Z.traceCoordinate[5],k.whoverformat),(J||-1!==j.indexOf("w"))&&K.push("w: "+U.wLabel),U.normLabel=Z.traceCoordinate[6].toPrecision(3),(J||-1!==j.indexOf("norm"))&&K.push("norm: "+U.normLabel),"streamtube"===k.type&&(U.divergenceLabel=Z.traceCoordinate[7].toPrecision(3),(J||-1!==j.indexOf("divergence"))&&K.push("divergence: "+U.divergenceLabel)),Z.textLabel&&K.push(Z.textLabel),te=K.join("<br>")):"isosurface"===k.type||"volume"===k.type?(U.valueLabel=s.hoverLabelText(L._mockAxis,L._mockAxis.d2l(Z.traceCoordinate[3]),k.valuehoverformat),K.push("value: "+U.valueLabel),Z.textLabel&&K.push(Z.textLabel),te=K.join("<br>")):te=Z.textLabel;var re={x:Z.traceCoordinate[0],y:Z.traceCoordinate[1],z:Z.traceCoordinate[2],data:D._input,fullData:D,curveNumber:D.index,pointNumber:N};i.appendArrayPointValue(re,D,N),k._module.eventData&&(re=D._module.eventData(re,Z,D,{},N));var ne={points:[re]};if(L.fullSceneLayout.hovermode){var se=[];i.loneHover({trace:D,x:(.5+.5*X[0]/X[3])*R,y:(.5-.5*X[1]/X[3])*B,xLabel:U.xLabel,yLabel:U.yLabel,zLabel:U.zLabel,text:te,name:V.name,color:i.castHoverOption(D,N,"bgcolor")||V.color,borderColor:i.castHoverOption(D,N,"bordercolor"),fontFamily:i.castHoverOption(D,N,"font.family"),fontSize:i.castHoverOption(D,N,"font.size"),fontColor:i.castHoverOption(D,N,"font.color"),nameLength:i.castHoverOption(D,N,"namelength"),textAlign:i.castHoverOption(D,N,"align"),hovertemplate:r.castOption(D,N,"hovertemplate"),hovertemplateLabels:r.extendFlat({},re,U),eventData:[re]},{container:O,gd:M,inOut_bbox:se}),re.bbox=se[0]}M.emit(Z.buttons&&Z.distance<5?"plotly_click":"plotly_hover",ne),this.oldEventData=ne}else i.loneUnhover(O),this.oldEventData&&M.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;L.drawAnnotations(L)},d.recoverContext=function(){var k=this;k.glplot.dispose();var L=function(){k.glplot.gl.isContextLost()?requestAnimationFrame(L):k.initializeGLPlot()?k.plot.apply(k,k.plotArgs):r.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(L)};var _=["xaxis","yaxis","zaxis"];function T(k,L,M){for(var O=k.fullSceneLayout,P=0;P<3;P++){var S=_[P],E=S.charAt(0),R=O[S],B=L[E],H=L[E+"calendar"],V=L["_"+E+"length"];if(r.isArrayOrTypedArray(B))for(var Z,W=0;W<(V||B.length);W++)if(r.isArrayOrTypedArray(B[W]))for(var G=0;G<B[W].length;++G)Z=R.d2l(B[W][G],0,H),!isNaN(Z)&&isFinite(Z)&&(M[0][P]=Math.min(M[0][P],Z),M[1][P]=Math.max(M[1][P],Z));else Z=R.d2l(B[W],0,H),!isNaN(Z)&&isFinite(Z)&&(M[0][P]=Math.min(M[0][P],Z),M[1][P]=Math.max(M[1][P],Z));else M[0][P]=Math.min(M[0][P],0),M[1][P]=Math.max(M[1][P],V-1)}}d.plot=function(k,L,M){if(this.plotArgs=[k,L,M],!this.glplot.contextLost){var O,P,S,E,R,B,H=L[this.id],V=M[this.id];this.fullLayout=L,this.fullSceneLayout=H,this.axesOptions.merge(L,H),this.spikeOptions.merge(H),this.setViewport(H),this.updateFx(H.dragmode,H.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(l(H.bgcolor)),this.setConvert(R),k?Array.isArray(k)||(k=[k]):k=[];var Z=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(S=0;S<k.length;++S)!0===(O=k[S]).visible&&0!==O._length&&T(this,O,Z);!function(Te,_e){for(var Me=Te.fullSceneLayout,Ie=Me.annotations||[],ze=0;ze<3;ze++)for(var Ve=_[ze],Je=Ve.charAt(0),De=Me[Ve],Be=0;Be<Ie.length;Be++){var Ze=Ie[Be];if(Ze.visible){var Ye=De.r2l(Ze[Je]);!isNaN(Ye)&&isFinite(Ye)&&(_e[0][ze]=Math.min(_e[0][ze],Ye),_e[1][ze]=Math.max(_e[1][ze],Ye))}}}(this,Z);var W=[1,1,1];for(E=0;E<3;++E)W[E]=Z[1][E]===Z[0][E]?1:1/(Z[1][E]-Z[0][E]);for(this.dataScale=W,this.convertAnnotations(this),S=0;S<k.length;++S)!0===(O=k[S]).visible&&0!==O._length&&((P=this.traces[O.uid])?P.data.type===O.type?P.update(O):(P.dispose(),P=O._module.plot(this,O),this.traces[O.uid]=P):(P=O._module.plot(this,O),this.traces[O.uid]=P),P.name=O.name);var G=Object.keys(this.traces);e:for(S=0;S<G.length;++S){for(E=0;E<k.length;++E)if(k[E].uid===G[S]&&!0===k[E].visible&&0!==k[E]._length)continue e;(P=this.traces[G[S]]).dispose(),delete this.traces[G[S]]}this.glplot.objects.sort(function(Te,_e){return Te._trace.data.index-_e._trace.data.index});var X,te=[[0,0,0],[0,0,0]],D=[],N={};for(S=0;S<3;++S){if((B=(R=H[_[S]]).type)in N?(N[B].acc*=W[S],N[B].count+=1):N[B]={acc:W[S],count:1},R.autorange){te[0][S]=1/0,te[1][S]=-1/0;var U=this.glplot.objects,Q=this.fullSceneLayout.annotations||[],j=R._name.charAt(0);for(E=0;E<U.length;E++){var J=U[E],K=J.bounds,re=J._trace.data._pad||0;te[0][S]="ErrorBars"===J.constructor.name&&R._lowerLogErrorBound?Math.min(te[0][S],R._lowerLogErrorBound):Math.min(te[0][S],K[0][S]/W[S]-re),te[1][S]=Math.max(te[1][S],K[1][S]/W[S]+re)}for(E=0;E<Q.length;E++){var ne=Q[E];if(ne.visible){var se=R.r2l(ne[j]);te[0][S]=Math.min(te[0][S],se),te[1][S]=Math.max(te[1][S],se)}}if("rangemode"in R&&"tozero"===R.rangemode&&(te[0][S]=Math.min(te[0][S],0),te[1][S]=Math.max(te[1][S],0)),te[0][S]>te[1][S])te[0][S]=-1,te[1][S]=1;else{var oe=te[1][S]-te[0][S];te[0][S]-=oe/32,te[1][S]+=oe/32}if("reversed"===R.autorange){var pe=te[0][S];te[0][S]=te[1][S],te[1][S]=pe}}else{var ce=R.range;te[0][S]=R.r2l(ce[0]),te[1][S]=R.r2l(ce[1])}te[0][S]===te[1][S]&&(te[0][S]-=1,te[1][S]+=1),D[S]=te[1][S]-te[0][S],this.glplot.setBounds(S,{min:te[0][S]*W[S],max:te[1][S]*W[S]})}var ge=H.aspectmode;if("cube"===ge)X=[1,1,1];else if("manual"===ge){var xe=H.aspectratio;X=[xe.x,xe.y,xe.z]}else{if("auto"!==ge&&"data"!==ge)throw new Error("scene.js aspectRatio was not one of the enumerated types");var we=[1,1,1];for(S=0;S<3;++S){var be=N[B=(R=H[_[S]]).type];we[S]=Math.pow(be.acc,1/be.count)/W[S]}X="data"===ge||Math.max.apply(null,we)/Math.min.apply(null,we)<=4?we:[1,1,1]}H.aspectratio.x=V.aspectratio.x=X[0],H.aspectratio.y=V.aspectratio.y=X[1],H.aspectratio.z=V.aspectratio.z=X[2],this.glplot.setAspectratio(H.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:H.aspectratio.x,y:H.aspectratio.y,z:H.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=H.aspectmode);var Se=H.domain||null,fe=L._size||null;if(Se&&fe){var me=this.container.style;me.position="absolute",me.left=fe.l+Se.x[0]*fe.w+"px",me.top=fe.t+(1-Se.y[1])*fe.h+"px",me.width=fe.w*(Se.x[1]-Se.x[0])+"px",me.height=fe.h*(Se.y[1]-Se.y[0])+"px"}this.glplot.redraw()}},d.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},d.getCamera=function(){var k;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(k=this.camera).up[0],y:k.up[1],z:k.up[2]},center:{x:k.center[0],y:k.center[1],z:k.center[2]},eye:{x:k.eye[0],y:k.eye[1],z:k.eye[2]},projection:{type:!0===k._ortho?"orthographic":"perspective"}}},d.setViewport=function(k){var L,M=k.camera;this.camera.lookAt.apply(this,[[(L=M).eye.x,L.eye.y,L.eye.z],[L.center.x,L.center.y,L.center.z],[L.up.x,L.up.y,L.up.z]]),this.glplot.setAspectratio(k.aspectratio),"orthographic"===M.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},d.isCameraChanged=function(k){var B,H,V,Z,W,L=this.getCamera(),M=r.nestedProperty(k,this.id+".camera").get(),P=!1;if(void 0===M)P=!0;else{for(var S=0;S<3;S++)for(var E=0;E<3;E++)if(V=E,void 0,void 0,W=["x","y","z"],!(B=M)[(Z=["up","center","eye"])[H=S]]||L[Z[H]][W[V]]!==B[Z[H]][W[V]]){P=!0;break}(!M.projection||L.projection&&L.projection.type!==M.projection.type)&&(P=!0)}return P},d.isAspectChanged=function(k){var L=this.glplot.getAspectratio(),M=r.nestedProperty(k,this.id+".aspectratio").get();return void 0===M||M.x!==L.x||M.y!==L.y||M.z!==L.z},d.saveLayout=function(k){var L,M,O,P,S,E,R=this.fullLayout,B=this.isCameraChanged(k),H=this.isAspectChanged(k),V=B||H;if(V){var Z={};B&&(L=this.getCamera(),O=(M=r.nestedProperty(k,this.id+".camera")).get(),Z[this.id+".camera"]=O),H&&(P=this.glplot.getAspectratio(),E=(S=r.nestedProperty(k,this.id+".aspectratio")).get(),Z[this.id+".aspectratio"]=E),a.call("_storeDirectGUIEdit",k,R._preGUI,Z),B&&(M.set(L),r.nestedProperty(R,this.id+".camera").set(L)),H&&(S.set(P),r.nestedProperty(R,this.id+".aspectratio").set(P),this.glplot.redraw())}return V},d.updateFx=function(k,L){var M=this.camera;if(M)if("orbit"===k)M.mode="orbit",M.keyBindingMode="rotate";else if("turntable"===k){M.up=[0,0,1],M.mode="turntable",M.keyBindingMode="rotate";var O=this.graphDiv,P=O._fullLayout,S=this.fullSceneLayout.camera,E=S.up.x,R=S.up.y,B=S.up.z;if(B/Math.sqrt(E*E+R*R+B*B)<.999){var H=this.id+".camera.up",V={x:0,y:0,z:1},Z={};Z[H]=V;var W=O.layout;a.call("_storeDirectGUIEdit",W,P._preGUI,Z),S.up=V,r.nestedProperty(W,H).set(V)}}else M.keyBindingMode=k;this.fullSceneLayout.hovermode=L},d.toImage=function(k){k||(k="png"),this.staticMode&&this.container.appendChild(p),this.glplot.redraw();var L=this.glplot.gl,M=L.drawingBufferWidth,O=L.drawingBufferHeight;L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(M*O*4);L.readPixels(0,0,M,O,L.RGBA,L.UNSIGNED_BYTE,P),function(H,V,Z){for(var W=0,G=Z-1;W<G;++W,--G)for(var X=0;X<V;++X)for(var te=0;te<4;++te){var D=4*(V*W+X)+te,N=4*(V*G+X)+te,U=H[D];H[D]=H[N],H[N]=U}}(P,M,O),function(H,V,Z){for(var W=0;W<Z;++W)for(var G=0;G<V;++G){var X=4*(V*W+G),te=H[X+3];if(te>0)for(var D=255/te,N=0;N<3;++N)H[X+N]=Math.min(D*H[X+N],255)}}(P,M,O);var S=document.createElement("canvas");S.width=M,S.height=O;var E,R=S.getContext("2d"),B=R.createImageData(M,O);switch(B.data.set(P),R.putImageData(B,0,0),k){case"jpeg":E=S.toDataURL("image/jpeg");break;case"webp":E=S.toDataURL("image/webp");break;default:E=S.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(p),E},d.setConvert=function(){for(var k=0;k<3;k++){var L=this.fullSceneLayout[_[k]];s.setConvert(L,this.fullLayout),L.setScale=r.noop}},d.make4thDimension=function(){var k=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},s.setConvert(this._mockAxis,k)},$.exports=x},{"../../../stackgl_modules":1119,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(y,$,ee){"use strict";$.exports=function(p,m,b,v){v=v||p.length;for(var e=new Array(v),n=0;n<v;n++)e[n]=[p[n],m[n],b[n]];return e}},{}],610:[function(y,$,ee){"use strict";var p=y("./font_attributes"),m=y("./animation_attributes"),b=y("../components/color/attributes"),v=y("../components/shapes/draw_newshape/attributes"),e=y("./pad_attributes"),n=y("../lib/extend").extendFlat,t=p({editType:"calc"});t.family.dflt='"Open Sans", verdana, arial, sans-serif',t.size.dflt=12,t.color.dflt=b.defaultLine,$.exports={font:t,title:{text:{valType:"string",editType:"layoutstyle"},font:p({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:n(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:b.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:b.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:b.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:v.newshape,activeshape:v.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:n({},m.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:p({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(y,$,ee){"use strict";var p=y("../../lib/sort_object_keys"),m='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',b=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',m].join(" "),v=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:m,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:b,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:b,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:v,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:v,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},n=p(e);$.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:n,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",n.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":526}],612:[function(y,$,ee){"use strict";var p=y("../../lib");$.exports=function(m,b){var v=m.split(" "),e=v[0],n=v[1],t=p.isArrayOrTypedArray(b)?p.mean(b):b,a=.5+t/100,r=1.5+t/100,u=["",""],s=[0,0];switch(e){case"top":u[0]="top",s[1]=-r;break;case"bottom":u[0]="bottom",s[1]=r}switch(n){case"left":u[1]="right",s[0]=-a;break;case"right":u[1]="left",s[0]=a}return{anchor:u[0]&&u[1]?u.join("-"):u[0]?u[0]:u[1]?u[1]:"center",offset:s}}},{"../../lib":503}],613:[function(y,$,ee){"use strict";var p=y("mapbox-gl/dist/mapbox-gl-unminified"),m=y("../../lib"),b=m.strTranslate,v=m.strScale,e=y("../../plots/get_data").getSubplotCalcData,n=y("../../constants/xmlns_namespaces"),t=y("@plotly/d3"),a=y("../../components/drawing"),r=y("../../lib/svg_text_utils"),u=y("./mapbox"),s=ee.constants=y("./constants");function i(l){return"string"==typeof l&&(-1!==s.styleValuesMapbox.indexOf(l)||0===l.indexOf("mapbox://"))}ee.name="mapbox",ee.attr="subplot",ee.idRoot="mapbox",ee.idRegex=ee.attrRegex=m.counterRegex("mapbox"),ee.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},ee.layoutAttributes=y("./layout_attributes"),ee.supplyLayoutDefaults=y("./layout_defaults"),ee.plot=function(l){var c=l._fullLayout,f=l.calcdata,g=c._subplots.mapbox;if(p.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var h=function(T,k){var L=T._fullLayout;if(""===T._context.mapboxAccessToken)return"";for(var M=[],O=[],P=!1,S=!1,E=0;E<k.length;E++){var R=L[k[E]],B=R.accesstoken;i(R.style)&&(B?m.pushUnique(M,B):(i(R._input.style)&&(m.error("Uses Mapbox map style, but did not set an access token."),P=!0),S=!0)),B&&m.pushUnique(O,B)}if(S){var H=P?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw m.error(H),new Error(H)}return M.length?(M.length>1&&m.warn(s.multipleTokensErrorMsg),M[0]):(O.length&&m.log(["Listed mapbox access token(s)",O.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(l,g);p.accessToken=h;for(var o=0;o<g.length;o++){var x=g[o],d=e(f,"mapbox",x),w=c[x],_=w._subplot;_||(_=new u(l,x),c[x]._subplot=_),_.viewInitial||(_.viewInitial={center:m.extendFlat({},w.center),zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),_.plot(d,c,l._promises)}},ee.clean=function(l,c,f,g){for(var h=g._subplots.mapbox||[],o=0;o<h.length;o++){var x=h[o];!c[x]&&g[x]._subplot&&g[x]._subplot.destroy()}},ee.toSVG=function(l){for(var c=l._fullLayout,f=c._subplots.mapbox,g=c._size,h=0;h<f.length;h++){var o=c[f[h]],x=o.domain,d=o._subplot.toImage("png");c._glimages.append("svg:image").attr({xmlns:n.svg,"xlink:href":d,x:g.l+g.w*x.x[0],y:g.t+g.h*(1-x.y[1]),width:g.w*(x.x[1]-x.x[0]),height:g.h*(x.y[1]-x.y[0]),preserveAspectRatio:"none"});var w=t.select(o._subplot.div);if(null!==w.select(".mapboxgl-ctrl-logo").node().offsetParent){var _=c._glimages.append("g");_.attr("transform",b(g.l+g.w*x.x[0]+10,g.t+g.h*(1-x.y[0])-31)),_.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),_.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),_.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),_.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var T=w.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),k=c._glimages.append("g"),L=k.append("text");L.text(T).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":T});var M=a.bBox(L.node()),O=g.w*(x.x[1]-x.x[0]);if(M.width>O/2){var P=T.split("|").join("<br>");L.text(P).attr("data-unformatted",P).call(r.convertToTspans,l),M=a.bBox(L.node())}L.attr("transform",b(-3,8-M.height)),k.insert("rect",".static-attribution").attr({x:-M.width-6,y:-M.height-3,width:M.width+6,height:M.height+3,fill:"rgba(255, 255, 255, 0.75)"});var S=1;M.width+6>O&&(S=O/(M.width+6));var E=[g.l+g.w*x.x[1],g.t+g.h*(1-x.y[0])];k.attr("transform",b(E[0],E[1])+v(S))}},ee.updateFx=function(l){for(var c=l._fullLayout,f=c._subplots.mapbox,g=0;g<f.length;g++)c[f[g]]._subplot.updateFx(c)}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../lib/svg_text_utils").sanitizeHTML,b=y("./convert_text_opts"),v=y("./constants");function e(r,u){this.subplot=r,this.uid=r.uid+"-"+u,this.index=u,this.idSource="source-"+this.uid,this.idLayer=v.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var n=e.prototype;function t(r){if(!r.visible)return!1;var u=r.source;if(Array.isArray(u)&&u.length>0){for(var s=0;s<u.length;s++)if("string"!=typeof u[s]||0===u[s].length)return!1;return!0}return p.isPlainObject(u)||"string"==typeof u&&u.length>0}function a(r){var u={},s={};switch(r.type){case"circle":p.extendFlat(s,{"circle-radius":r.circle.radius,"circle-color":r.color,"circle-opacity":r.opacity});break;case"line":p.extendFlat(s,{"line-width":r.line.width,"line-color":r.color,"line-opacity":r.opacity,"line-dasharray":r.line.dash});break;case"fill":p.extendFlat(s,{"fill-color":r.color,"fill-outline-color":r.fill.outlinecolor,"fill-opacity":r.opacity});break;case"symbol":var i=r.symbol,l=b(i.textposition,i.iconsize);p.extendFlat(u,{"icon-image":i.icon+"-15","icon-size":i.iconsize/10,"text-field":i.text,"text-size":i.textfont.size,"text-anchor":l.anchor,"text-offset":l.offset,"symbol-placement":i.placement}),p.extendFlat(s,{"icon-color":r.color,"text-color":i.textfont.color,"text-opacity":r.opacity});break;case"raster":p.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":r.opacity})}return{layout:u,paint:s}}n.update=function(r){this.visible?this.needsNewImage(r)?this.updateImage(r):this.needsNewSource(r)?(this.removeLayer(),this.updateSource(r),this.updateLayer(r)):this.needsNewLayer(r)?this.updateLayer(r):this.updateStyle(r):(this.updateSource(r),this.updateLayer(r)),this.visible=t(r)},n.needsNewImage=function(r){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===r.sourcetype&&(this.source!==r.source||JSON.stringify(this.coordinates)!==JSON.stringify(r.coordinates))},n.needsNewSource=function(r){return this.sourceType!==r.sourcetype||JSON.stringify(this.source)!==JSON.stringify(r.source)||this.layerType!==r.type},n.needsNewLayer=function(r){return this.layerType!==r.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},n.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},n.updateImage=function(r){this.subplot.map.getSource(this.idSource).updateImage({url:r.source,coordinates:r.coordinates});var u=this.findFollowingMapboxLayerId(this.lookupBelow());null!==u&&this.subplot.map.moveLayer(this.idLayer,u)},n.updateSource=function(r){var i,l,c,f,g,u=this.subplot.map;if(u.getSource(this.idSource)&&u.removeSource(this.idSource),this.sourceType=r.sourcetype,this.source=r.source,t(r)){var s=(f=(i=r).source,g={type:c=i.sourcetype},"geojson"===c?l="data":"vector"===c?l="string"==typeof f?"url":"tiles":"raster"===c?(l="tiles",g.tileSize=256):"image"===c&&(l="url",g.coordinates=i.coordinates),g[l]=f,i.sourceattribution&&(g.attribution=m(i.sourceattribution)),g);u.addSource(this.idSource,s)}},n.findFollowingMapboxLayerId=function(r){if("traces"===r)for(var u=this.subplot.getMapLayers(),s=0;s<u.length;s++){var i=u[s].id;if("string"==typeof i&&0===i.indexOf(v.traceLayerPrefix)){r=i;break}}return r},n.updateLayer=function(r){var u=this.subplot,s=a(r),i=this.lookupBelow(),l=this.findFollowingMapboxLayerId(i);this.removeLayer(),t(r)&&u.addLayer({id:this.idLayer,source:this.idSource,"source-layer":r.sourcelayer||"",type:r.type,minzoom:r.minzoom,maxzoom:r.maxzoom,layout:s.layout,paint:s.paint},l),this.layerType=r.type,this.below=i},n.updateStyle=function(r){if(t(r)){var u=a(r);this.subplot.setOptions(this.idLayer,"setLayoutProperty",u.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",u.paint)}},n.removeLayer=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer)},n.dispose=function(){var r=this.subplot.map;r.getLayer(this.idLayer)&&r.removeLayer(this.idLayer),r.getSource(this.idSource)&&r.removeSource(this.idSource)},$.exports=function(r,u,s){var i=new e(r,u);return i.update(s),i}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/color").defaultLine,b=y("../domain").attributes,v=y("../font_attributes"),e=y("../../traces/scatter/attributes").textposition,n=y("../../plot_api/edit_types").overrideAll,t=y("../../plot_api/plot_template").templatedArray,a=y("./constants"),r=v({});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular",($.exports=n({_arrayAttrRegexps:[p.counterRegex("mapbox",".layers",!0)],domain:b({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:a.styleValuesMapbox.concat(a.styleValuesNonMapbox),dflt:a.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:t("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:m},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:m}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:r,textposition:p.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":925,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../subplot_defaults"),b=y("../array_container_defaults"),v=y("./layout_attributes");function e(t,a,r,u){r("accesstoken",u.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch"),b(t,a,{name:"layers",handleItemDefaults:n}),a._input=t}function n(t,a){function r(c,f){return p.coerce(t,a,v.layers,c,f)}if(r("visible")){var u,s=r("sourcetype"),i="raster"===s||"image"===s;r("source"),r("sourceattribution"),"vector"===s&&r("sourcelayer"),"image"===s&&r("coordinates"),i&&(u="raster");var l=r("type",u);i&&"raster"!==l&&(l=a.type="raster",p.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),"circle"===l&&r("circle.radius"),"line"===l&&(r("line.width"),r("line.dash")),"fill"===l&&r("fill.outlinecolor"),"symbol"===l&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),p.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}$.exports=function(t,a,r){m(t,a,r,{type:"mapbox",attributes:v,handleDefaults:e,partition:"y",accessToken:a._mapboxAccessToken})}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(y,$,ee){"use strict";var p=y("mapbox-gl/dist/mapbox-gl-unminified"),m=y("../../lib"),b=y("../../lib/geo_location_utils"),v=y("../../registry"),e=y("../cartesian/axes"),n=y("../../components/dragelement"),t=y("../../components/fx"),a=y("../../components/dragelement/helpers"),r=a.rectMode,u=a.drawMode,s=a.selectMode,i=y("../cartesian/select").prepSelect,l=y("../cartesian/select").clearSelect,c=y("../cartesian/select").clearSelectionsCache,f=y("../cartesian/select").selectOnClick,g=y("./constants"),h=y("./layers");function o(k,L){this.id=L,this.gd=k;var M=k._fullLayout,O=k._context;this.container=M._glcontainer.node(),this.isStatic=O.staticPlot,this.uid=M._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(M),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var x=o.prototype;x.plot=function(k,L,M){var O,P=this;P.map&&L[P.id].accesstoken!==P.accessToken&&(P.map.remove(),P.map=null,P.styleObj=null,P.traceHash={},P.layerList=[]),O=new Promise(P.map?function(E,R){P.updateMap(k,L,E,R)}:function(E,R){P.createMap(k,L,E,R)}),M.push(O)},x.createMap=function(k,L,M,O){var P=this,S=L[P.id],E=P.styleObj=w(S.style);P.accessToken=S.accesstoken;var R=P.map=new p.Map({container:P.div,style:E.style,center:T(S.center),zoom:S.zoom,bearing:S.bearing,pitch:S.pitch,interactive:!P.isStatic,preserveDrawingBuffer:P.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new p.AttributionControl({compact:!0}));R._canvas.style.left="0px",R._canvas.style.top="0px",P.rejectOnError(O),P.isStatic||P.initFx(k,L);var B=[];B.push(new Promise(function(H){R.once("load",H)})),B=B.concat(b.fetchTraceGeoData(k)),Promise.all(B).then(function(){P.fillBelowLookup(k,L),P.updateData(k),P.updateLayout(L),P.resolveOnRender(M)}).catch(O)},x.updateMap=function(k,L,M,O){var P=this,S=P.map,E=L[this.id];P.rejectOnError(O);var R=[],B=w(E.style);JSON.stringify(P.styleObj)!==JSON.stringify(B)&&(P.styleObj=B,S.setStyle(B.style),P.traceHash={},R.push(new Promise(function(H){S.once("styledata",H)}))),R=R.concat(b.fetchTraceGeoData(k)),Promise.all(R).then(function(){P.fillBelowLookup(k,L),P.updateData(k),P.updateLayout(L),P.resolveOnRender(M)}).catch(O)},x.fillBelowLookup=function(k,L){var M,O,P=L[this.id].layers,S=this.belowLookup={},E=!1;for(M=0;M<k.length;M++){var R=k[M][0].trace,B=R._module;"string"==typeof R.below?O=R.below:B.getBelow&&(O=B.getBelow(R,this)),""===O&&(E=!0),S["trace-"+R.uid]=O||""}for(M=0;M<P.length;M++){var H=P[M];S["layout-"+M]=O="string"==typeof H.below?H.below:E?"traces":""}var V,Z,W={};for(V in S)W[O=S[V]]?W[O].push(V):W[O]=[V];for(O in W){var G=W[O];if(G.length>1)for(M=0;M<G.length;M++)0===(V=G[M]).indexOf("trace-")?(Z=V.split("trace-")[1],this.traceHash[Z]&&(this.traceHash[Z].below=null)):0===V.indexOf("layout-")&&(Z=V.split("layout-")[1],this.layerList[Z]&&(this.layerList[Z].below=null))}};var d={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function w(k){var L={};return m.isPlainObject(k)?(L.id=k.id,L.style=k):"string"==typeof k?(L.id=k,L.style=-1!==g.styleValuesMapbox.indexOf(k)?_(k):g.stylesNonMapbox[k]?g.stylesNonMapbox[k]:k):(L.id=g.styleValueDflt,L.style=_(g.styleValueDflt)),L.transition={duration:0,delay:0},L}function _(k){return g.styleUrlPrefix+k+"-"+g.styleUrlSuffix}function T(k){return[k.lon,k.lat]}x.updateData=function(k){var L,M,O,P,S=this.traceHash,E=k.slice().sort(function(Z,W){return d[Z[0].trace.type]-d[W[0].trace.type]});for(O=0;O<E.length;O++){var R=E[O],B=!1;(L=S[(M=R[0].trace).uid])&&(L.type===M.type?(L.update(R),B=!0):L.dispose()),!B&&M._module&&(S[M.uid]=M._module.plot(this,R))}var H=Object.keys(S);e:for(O=0;O<H.length;O++){var V=H[O];for(P=0;P<k.length;P++)if(V===(M=k[P][0].trace).uid)continue e;(L=S[V]).dispose(),delete S[V]}},x.updateLayout=function(k){var L=this.map,M=k[this.id];this.dragging||this.wheeling||(L.setCenter(T(M.center)),L.setZoom(M.zoom),L.setBearing(M.bearing),L.setPitch(M.pitch)),this.updateLayers(k),this.updateFramework(k),this.updateFx(k),this.map.resize(),this.gd._context._scrollZoom.mapbox?L.scrollZoom.enable():L.scrollZoom.disable()},x.resolveOnRender=function(k){var L=this.map;L.on("render",function M(){L.loaded()&&(L.off("render",M),setTimeout(k,10))})},x.rejectOnError=function(k){var L=this.map;function M(){k(new Error(g.mapOnErrorMsg))}L.once("error",M),L.once("style.error",M),L.once("source.error",M),L.once("tile.error",M),L.once("layer.error",M)},x.createFramework=function(k){var L=this,M=L.div=document.createElement("div");M.id=L.uid,M.style.position="absolute",L.container.appendChild(M),L.xaxis={_id:"x",c2p:function(O){return L.project(O).x}},L.yaxis={_id:"y",c2p:function(O){return L.project(O).y}},L.updateFramework(k),L.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(L.mockAxis,k)},x.initFx=function(k,L){var M=this,O=M.gd,P=M.map;function S(){t.loneUnhover(L._hoverlayer)}function E(){var R=M.getView();O.emit("plotly_relayouting",M.getViewEditsWithDerived(R))}P.on("moveend",function(R){if(M.map){var B=O._fullLayout;if(R.originalEvent||M.wheeling){var H=B[M.id];v.call("_storeDirectGUIEdit",O.layout,B._preGUI,M.getViewEdits(H));var V=M.getView();H._input.center=H.center=V.center,H._input.zoom=H.zoom=V.zoom,H._input.bearing=H.bearing=V.bearing,H._input.pitch=H.pitch=V.pitch,O.emit("plotly_relayout",M.getViewEditsWithDerived(V))}R.originalEvent&&"mouseup"===R.originalEvent.type?M.dragging=!1:M.wheeling&&(M.wheeling=!1),B._rehover&&B._rehover()}}),P.on("wheel",function(){M.wheeling=!0}),P.on("mousemove",function(R){var B=M.div.getBoundingClientRect(),H=[R.originalEvent.offsetX,R.originalEvent.offsetY];R.target.getBoundingClientRect=function(){return B},M.xaxis.p2c=function(){return P.unproject(H).lng},M.yaxis.p2c=function(){return P.unproject(H).lat},O._fullLayout._rehover=function(){O._fullLayout._hoversubplot===M.id&&O._fullLayout[M.id]&&t.hover(O,R,M.id)},t.hover(O,R,M.id),O._fullLayout._hoversubplot=M.id}),P.on("dragstart",function(){M.dragging=!0,S()}),P.on("zoomstart",S),P.on("mouseout",function(){O._fullLayout._hoversubplot=null}),P.on("drag",E),P.on("zoom",E),P.on("dblclick",function(){var R=O._fullLayout[M.id];v.call("_storeDirectGUIEdit",O.layout,O._fullLayout._preGUI,M.getViewEdits(R));var B=M.viewInitial;P.setCenter(T(B.center)),P.setZoom(B.zoom),P.setBearing(B.bearing),P.setPitch(B.pitch);var H=M.getView();R._input.center=R.center=H.center,R._input.zoom=R.zoom=H.zoom,R._input.bearing=R.bearing=H.bearing,R._input.pitch=R.pitch=H.pitch,O.emit("plotly_doubleclick",null),O.emit("plotly_relayout",M.getViewEditsWithDerived(H))}),M.clearSelect=function(){c(M.dragOptions),l(M.dragOptions.gd)},M.onClickInPanFn=function(R){return function(B){var H=O._fullLayout.clickmode;H.indexOf("select")>-1&&f(B.originalEvent,O,[M.xaxis],[M.yaxis],M.id,R),H.indexOf("event")>-1&&t.click(O,B.originalEvent)}}},x.updateFx=function(k){var L=this,M=L.map,O=L.gd;if(!L.isStatic){var P,S=k.dragmode;P=r(S)?function(B,H){(B.range={})[L.id]=[R([H.xmin,H.ymin]),R([H.xmax,H.ymax])]}:function(B,H,V){(B.lassoPoints={})[L.id]=V.filtered.map(R)},L.dragOptions=m.extendDeep(L.dragOptions||{},{dragmode:k.dragmode,element:L.div,gd:O,plotinfo:{id:L.id,domain:k[L.id].domain,xaxis:L.xaxis,yaxis:L.yaxis,fillRangeItems:P},xaxes:[L.xaxis],yaxes:[L.yaxis],subplot:L.id}),M.off("click",L.onClickInPanHandler),s(S)||u(S)?(M.dragPan.disable(),M.on("zoomstart",L.clearSelect),L.dragOptions.prepFn=function(B,H,V){i(B,H,V,L.dragOptions,S)},n.init(L.dragOptions)):(M.dragPan.enable(),M.off("zoomstart",L.clearSelect),L.div.onmousedown=null,L.onClickInPanHandler=L.onClickInPanFn(L.dragOptions),M.on("click",L.onClickInPanHandler))}function R(B){var H=L.map.unproject(B);return[H.lng,H.lat]}},x.updateFramework=function(k){var L=k[this.id].domain,M=k._size,O=this.div.style;O.width=M.w*(L.x[1]-L.x[0])+"px",O.height=M.h*(L.y[1]-L.y[0])+"px",O.left=M.l+L.x[0]*M.w+"px",O.top=M.t+(1-L.y[1])*M.h+"px",this.xaxis._offset=M.l+L.x[0]*M.w,this.xaxis._length=M.w*(L.x[1]-L.x[0]),this.yaxis._offset=M.t+(1-L.y[1])*M.h,this.yaxis._length=M.h*(L.y[1]-L.y[0])},x.updateLayers=function(k){var L,M=k[this.id].layers,O=this.layerList;if(M.length!==O.length){for(L=0;L<O.length;L++)O[L].dispose();for(O=this.layerList=[],L=0;L<M.length;L++)O.push(h(this,L,M[L]))}else for(L=0;L<M.length;L++)O[L].update(M[L])},x.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},x.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},x.setOptions=function(k,L,M){for(var O in M)this.map[L](k,O,M[O])},x.getMapLayers=function(){return this.map.getStyle().layers},x.addLayer=function(k,L){var M=this.map;if("string"==typeof L){if(""===L)return void M.addLayer(k,L);for(var O=this.getMapLayers(),P=0;P<O.length;P++)if(L===O[P].id)return void M.addLayer(k,L);m.warn(["Trying to add layer with *below* value",L,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}M.addLayer(k)},x.project=function(k){return this.map.project(new p.LngLat(k[0],k[1]))},x.getView=function(){var k=this.map,L=k.getCenter(),M={lon:L.lng,lat:L.lat},O=k.getCanvas(),P=parseInt(O.style.width),S=parseInt(O.style.height);return{center:M,zoom:k.getZoom(),bearing:k.getBearing(),pitch:k.getPitch(),_derived:{coordinates:[k.unproject([0,0]).toArray(),k.unproject([P,0]).toArray(),k.unproject([P,S]).toArray(),k.unproject([0,S]).toArray()]}}},x.getViewEdits=function(k){for(var L=this.id,M=["center","zoom","bearing","pitch"],O={},P=0;P<M.length;P++){var S=M[P];O[L+"."+S]=k[S]}return O},x.getViewEditsWithDerived=function(k){var L=this.id,M=this.getViewEdits(k);return M[L+"._derived"]=k._derived,M},$.exports=o},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(y,$,ee){"use strict";$.exports=function(p){var m=p.editType;return{t:{valType:"number",dflt:0,editType:m},r:{valType:"number",dflt:0,editType:m},b:{valType:"number",dflt:0,editType:m},l:{valType:"number",dflt:0,editType:m},editType:m}}},{}],619:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("d3-time-format").timeFormatLocale,b=y("d3-format").formatLocale,v=y("fast-isnumeric"),e=y("../registry"),n=y("../plot_api/plot_schema"),t=y("../plot_api/plot_template"),a=y("../lib"),r=y("../components/color"),u=y("../constants/numerical").BADNUM,s=y("./cartesian/axis_ids"),i=y("./cartesian/handle_outline").clearSelect,l=y("./animation_attributes"),c=y("./frame_attributes"),f=y("../plots/get_data").getModuleCalcData,g=a.relinkPrivateKeys,h=a._,o=$.exports={};a.extendFlat(o,e),o.attributes=y("./attributes"),o.attributes.type.values=o.allTypes,o.fontAttrs=y("./font_attributes"),o.layoutAttributes=y("./layout_attributes"),o.fontWeight="normal";var x=o.transformsRegistry,d=y("./command");o.executeAPICommand=d.executeAPICommand,o.computeAPICommandBindings=d.computeAPICommandBindings,o.manageCommandObserver=d.manageCommandObserver,o.hasSimpleAPICommandBindings=d.hasSimpleAPICommandBindings,o.redrawText=function(V){return V=a.getGraphDiv(V),new Promise(function(Z){setTimeout(function(){V._fullLayout&&(e.getComponentMethod("annotations","draw")(V),e.getComponentMethod("legend","draw")(V),e.getComponentMethod("colorbar","draw")(V),Z(o.previousPromises(V)))},300)})},o.resize=function(V){var Z;V=a.getGraphDiv(V);var W=new Promise(function(G,X){V&&!a.isHidden(V)||X(new Error("Resize must be passed a displayed plot div element.")),V._redrawTimer&&clearTimeout(V._redrawTimer),V._resolveResize&&(Z=V._resolveResize),V._resolveResize=G,V._redrawTimer=setTimeout(function(){if(!V.layout||V.layout.width&&V.layout.height||a.isHidden(V))G(V);else{delete V.layout.width,delete V.layout.height;var te=V.changed;V.autoplay=!0,e.call("relayout",V,{autosize:!0}).then(function(){V.changed=te,V._resolveResize===G&&(delete V._resolveResize,G(V))})}},100)});return Z&&Z(W),W},o.previousPromises=function(V){if((V._promises||[]).length)return Promise.all(V._promises).then(function(){V._promises=[]})},o.addLinks=function(V){if(V._context.showLink||V._context.showSources){var Z=V._fullLayout,W=a.ensureSingle(Z._paper,"text","js-plot-link-container",function(U){U.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var Q=p.select(this);Q.append("tspan").classed("js-link-to-tool",!0),Q.append("tspan").classed("js-link-spacer",!0),Q.append("tspan").classed("js-sourcelinks",!0)})}),G=W.node(),X={y:Z._paper.attr("height")-9};document.body.contains(G)&&G.getComputedTextLength()>=Z.width-20?(X["text-anchor"]="start",X.x=5):(X["text-anchor"]="end",X.x=Z._paper.attr("width")-7),W.attr(X);var te=W.select(".js-link-to-tool"),D=W.select(".js-link-spacer"),N=W.select(".js-sourcelinks");V._context.showSources&&V._context.showSources(V),V._context.showLink&&function(U,Q){Q.text("");var j=Q.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(U._context.linkText+" "+String.fromCharCode(187));if(U._context.sendData)j.on("click",function(){o.sendDataToCloud(U)});else{var J=window.location.pathname.split("/"),K=window.location.search;j.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+J[2].split(".")[0]+"/"+J[1]+K})}}(V,te),D.text(te.text()&&N.text()?" - ":"")}},o.sendDataToCloud=function(V){var Z=(window.PLOTLYENV||{}).BASE_URL||V._context.plotlyServerURL;if(Z){V.emit("plotly_beforeexport");var W=p.select(V).append("div").attr("id","hiddenform").style("display","none"),G=W.append("form").attr({action:Z+"/external",method:"post",target:"_blank"});return G.append("input").attr({type:"text",name:"data"}).node().value=o.graphJson(V,!1,"keepdata"),G.node().submit(),W.remove(),V.emit("plotly_afterexport"),!1}};var w=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],_=["year","month","dayMonth","dayMonthYear"];function T(V,Z){var W=V._context.locale;W||(W="en-US");var G=!1,X={};function te(J){for(var K=!0,re=0;re<Z.length;re++){var ne=Z[re];X[ne]||(J[ne]?X[ne]=J[ne]:K=!1)}K&&(G=!0)}for(var D=0;D<2;D++){for(var N=V._context.locales,U=0;U<2;U++){var Q=(N[W]||{}).format;if(Q&&(te(Q),G))break;N=e.localeRegistry}var j=W.split("-")[0];if(G||j===W)break;W=j}return G||te(e.localeRegistry.en.format),X}function k(V,Z){var W={_fullLayout:Z},G="x"===V._id.charAt(0),X=V._mainAxis._anchorAxis,te="",D="",N="";if(X&&(N=X._mainAxis._id,te=G?V._id+N:N+V._id),!te||!Z._plots[te]){te="";for(var U=V._counterAxes,Q=0;Q<U.length;Q++){var j=U[Q],J=G?V._id+j:j+V._id;D||(D=J);var K=s.getFromId(W,j);if(N&&K.overlaying===N){te=J;break}}}return te||D}function L(V){var Z=V.transforms;if(Array.isArray(Z)&&Z.length)for(var W=0;W<Z.length;W++){var G=Z[W],X=G._module||x[G.type];if(X&&X.makesData)return!0}return!1}function M(V,Z,W,G){for(var X=V.transforms,te=[V],D=0;D<X.length;D++){var N=X[D],U=x[N.type];U&&U.transform&&(te=U.transform(te,{transform:N,fullTrace:V,fullData:Z,layout:W,fullLayout:G,transformIndex:D}))}return te}function O(V){return"string"==typeof V&&"px"===V.substr(V.length-2)&&parseFloat(V)}function P(V){var Z=V.margin;if(!V._size){var W=V._size={l:Math.round(Z.l),r:Math.round(Z.r),t:Math.round(Z.t),b:Math.round(Z.b),p:Math.round(Z.pad)};W.w=Math.round(V.width)-W.l-W.r,W.h=Math.round(V.height)-W.t-W.b}V._pushmargin||(V._pushmargin={}),V._pushmarginIds||(V._pushmarginIds={})}o.supplyDefaults=function(V,Z){var Be,Ze,W=Z&&Z.skipUpdateCalc,G=V._fullLayout||{};if(G._skipDefaults)delete G._skipDefaults;else{var X,te=V._fullLayout={},D=V.layout||{},N=V._fullData||[],U=V._fullData=[],Q=V.data||[],j=V.calcdata||[],J=V._context||{};V._transitionData||o.createTransitionData(V),te._dfltTitle={plot:h(V,"Click to enter Plot title"),x:h(V,"Click to enter X axis title"),y:h(V,"Click to enter Y axis title"),colorbar:h(V,"Click to enter Colorscale title"),annotation:h(V,"new text")},te._traceWord=h(V,"trace");var K=T(V,w);if(te._mapboxAccessToken=J.mapboxAccessToken,G._initialAutoSizeIsDone){var re=G.width,ne=G.height;o.supplyLayoutGlobalDefaults(D,te,K),D.width||(te.width=re),D.height||(te.height=ne),o.sanitizeMargins(te)}else{o.supplyLayoutGlobalDefaults(D,te,K);var se=!D.width||!D.height,oe=te.autosize;se&&(oe||J.autosizable)?o.plotAutoSize(V,D,te):se&&o.sanitizeMargins(te),!oe&&se&&(D.width=te.width,D.height=te.height)}te._d3locale=((Be=K).decimal=(Ze=te.separators).charAt(0),Be.thousands=Ze.charAt(1),{numberFormat:function(Ye){try{Ye=b(Be).format(a.adjustFormat(Ye))}catch(tt){return a.warnBadFormat(Ye),a.noFormat}return Ye},timeFormat:m(Be).utcFormat}),te._extraFormat=T(V,_),te._initialAutoSizeIsDone=!0,te._dataLength=Q.length,te._modules=[],te._visibleModules=[],te._basePlotModules=[];var ce=te._subplots=function(){var Be,Ze,Ye=e.collectableSubplotTypes,tt={};if(!Ye){Ye=[];var st=e.subplotsRegistry;for(var vt in st){var Pt=st[vt].attr;if(Pt&&(Ye.push(vt),Array.isArray(Pt)))for(Ze=0;Ze<Pt.length;Ze++)a.pushUnique(Ye,Pt[Ze])}}for(Be=0;Be<Ye.length;Be++)tt[Ye[Be]]=[];return tt}(),ge=te._splomAxes={x:{},y:{}},xe=te._splomSubplots={};te._splomGridDflt={},te._scatterStackOpts={},te._firstScatter={},te._alignmentOpts={},te._colorAxes={},te._requestRangeslider={},te._traceUids=function(Be,Ze){var Ye,tt,st=Ze.length,vt=[];for(Ye=0;Ye<Be.length;Ye++){var Pt=Be[Ye]._fullInput;Pt!==tt&&vt.push(Pt),tt=Pt}var Mt=vt.length,rt=new Array(st),et={};function bt(Fe,He){rt[He]=Fe,et[Fe]=1}function Rt(Fe,He){if(Fe&&"string"==typeof Fe&&!et[Fe])return bt(Fe,He),!0}for(Ye=0;Ye<st;Ye++){var Yt=Ze[Ye].uid;"number"==typeof Yt&&(Yt=String(Yt)),Rt(Yt,Ye)||Ye<Mt&&Rt(vt[Ye].uid,Ye)||bt(a.randstr(et),Ye)}return rt}(N,Q),te._globalTransforms=(V._context||{}).globalTransforms,o.supplyDataDefaults(Q,U,D,te);var we=Object.keys(ge.x),be=Object.keys(ge.y);if(we.length>1&&be.length>1){for(e.getComponentMethod("grid","sizeDefaults")(D,te),X=0;X<we.length;X++)a.pushUnique(ce.xaxis,we[X]);for(X=0;X<be.length;X++)a.pushUnique(ce.yaxis,be[X]);for(var Se in xe)a.pushUnique(ce.cartesian,Se)}if(te._has=o._hasPlotType.bind(te),N.length===U.length)for(X=0;X<U.length;X++)g(U[X],N[X]);o.supplyLayoutModuleDefaults(D,te,U,V._transitionData);var fe=te._visibleModules,me=[];for(X=0;X<fe.length;X++){var Te=fe[X].crossTraceDefaults;Te&&a.pushUnique(me,Te)}for(X=0;X<me.length;X++)me[X](U,te);te._hasOnlyLargeSploms=1===te._basePlotModules.length&&"splom"===te._basePlotModules[0].name&&we.length>15&&be.length>15&&0===te.shapes.length&&0===te.images.length,o.linkSubplots(U,te,N,G),o.cleanPlot(U,te,N,G);var _e=!(!G._has||!G._has("gl2d")),Me=!(!te._has||!te._has("gl2d")),Ie=!(!G._has||!G._has("cartesian"))||_e,ze=!(!te._has||!te._has("cartesian"))||Me;Ie&&!ze?G._bgLayer.remove():ze&&!Ie&&(te._shouldCreateBgLayer=!0),G._zoomlayer&&!V._dragging&&i({_fullLayout:G}),function(Be,Ze){var Ye,tt=[];Ze.meta&&(Ye=Ze._meta={meta:Ze.meta,layout:{meta:Ze.meta}});for(var st=0;st<Be.length;st++){var vt=Be[st];vt.meta?tt[vt.index]=vt._meta={meta:vt.meta}:Ze.meta&&(vt._meta={meta:Ze.meta}),Ze.meta&&(vt._meta.layout={meta:Ze.meta})}tt.length&&(Ye||(Ye=Ze._meta={}),Ye.data=tt)}(U,te),g(te,G),e.getComponentMethod("colorscale","crossTraceDefaults")(U,te),te._preGUI||(te._preGUI={}),te._tracePreGUI||(te._tracePreGUI={});var Ve,Je=te._tracePreGUI,De={};for(Ve in Je)De[Ve]="old";for(X=0;X<U.length;X++)De[Ve=U[X]._fullInput.uid]||(Je[Ve]={}),De[Ve]="new";for(Ve in De)"old"===De[Ve]&&delete Je[Ve];P(te),e.getComponentMethod("rangeslider","makeData")(te),W||j.length!==U.length||o.supplyDefaultsUpdateCalc(j,U)}},o.supplyDefaultsUpdateCalc=function(V,Z){for(var W=0;W<Z.length;W++){var G=Z[W],X=(V[W]||[])[0];if(X&&X.trace){var te=X.trace;if(te._hasCalcTransform){var D,N,U,Q=te._arrayAttrs;for(D=0;D<Q.length;D++)U=a.nestedProperty(te,N=Q[D]).get().slice(),a.nestedProperty(G,N).set(U)}X.trace=G}}},o.createTransitionData=function(V){V._transitionData||(V._transitionData={}),V._transitionData._frames||(V._transitionData._frames=[]),V._transitionData._frameHash||(V._transitionData._frameHash={}),V._transitionData._counter||(V._transitionData._counter=0),V._transitionData._interruptCallbacks||(V._transitionData._interruptCallbacks=[])},o._hasPlotType=function(V){var Z,W=this._basePlotModules||[];for(Z=0;Z<W.length;Z++)if(W[Z].name===V)return!0;var G=this._modules||[];for(Z=0;Z<G.length;Z++){var X=G[Z].name;if(X===V)return!0;var te=e.modules[X];if(te&&te.categories[V])return!0}return!1},o.cleanPlot=function(V,Z,W,G){var X,te,D=G._basePlotModules||[];for(X=0;X<D.length;X++){var N=D[X];N.clean&&N.clean(V,Z,W,G)}var U=G._has&&G._has("gl"),Q=Z._has&&Z._has("gl");U&&!Q&&void 0!==G._glcontainer&&(G._glcontainer.selectAll(".gl-canvas").remove(),G._glcontainer.selectAll(".no-webgl").remove(),G._glcanvas=null);var j=!!G._infolayer;e:for(X=0;X<W.length;X++){var J=W[X].uid;for(te=0;te<V.length;te++)if(J===V[te].uid)continue e;j&&G._infolayer.select(".cb"+J).remove()}},o.linkSubplots=function(V,Z,W,G){var X,te,D=G._plots||{},N=Z._plots={},U=Z._subplots,Q={_fullData:V,_fullLayout:Z},j=U.cartesian.concat(U.gl2d||[]);for(X=0;X<j.length;X++){var J,K=j[X],re=D[K],ne=s.getFromId(Q,K,"x"),se=s.getFromId(Q,K,"y");for(re?J=N[K]=re:(J=N[K]={}).id=K,ne._counterAxes.push(se._id),se._counterAxes.push(ne._id),ne._subplotsWith.push(K),se._subplotsWith.push(K),J.xaxis=ne,J.yaxis=se,J._hasClipOnAxisFalse=!1,te=0;te<V.length;te++){var oe=V[te];if(oe.xaxis===J.xaxis._id&&oe.yaxis===J.yaxis._id&&!1===oe.cliponaxis){J._hasClipOnAxisFalse=!0;break}}}var pe,ce=s.list(Q,null,!0);for(X=0;X<ce.length;X++){var ge=null;(pe=ce[X]).overlaying&&(ge=s.getFromId(Q,pe.overlaying))&&ge.overlaying&&(pe.overlaying=!1,ge=null),pe._mainAxis=ge||pe,ge&&(pe.domain=ge.domain.slice()),pe._anchorAxis="free"===pe.anchor?null:s.getFromId(Q,pe.anchor)}for(X=0;X<ce.length;X++)if((pe=ce[X])._counterAxes.sort(s.idSort),pe._subplotsWith.sort(a.subplotSort),pe._mainSubplot=k(pe,Z),pe._counterAxes.length&&(pe.spikemode&&-1!==pe.spikemode.indexOf("across")||pe.automargin&&pe.mirror&&"free"!==pe.anchor||e.getComponentMethod("rangeslider","isVisible")(pe))){var xe=1,we=0;for(te=0;te<pe._counterAxes.length;te++){var be=s.getFromId(Q,pe._counterAxes[te]);xe=Math.min(xe,be.domain[0]),we=Math.max(we,be.domain[1])}xe<we&&(pe._counterDomainMin=xe,pe._counterDomainMax=we)}},o.clearExpandedTraceDefaultColors=function(V){var Z,W,G;for(W=[],(Z=V._module._colorAttrs)||(V._module._colorAttrs=Z=[],n.crawl(V._module.attributes,function(X,te,D,N){W[N]=te,W.length=N+1,"color"===X.valType&&void 0===X.dflt&&Z.push(W.join("."))})),G=0;G<Z.length;G++)a.nestedProperty(V,"_input."+Z[G]).get()||a.nestedProperty(V,Z[G]).set(null)},o.supplyDataDefaults=function(V,Z,W,G){var X,te,D,N=G._modules,U=G._visibleModules,Q=G._basePlotModules,j=0,J=0;function K(Se){Z.push(Se);var fe=Se._module;fe&&(a.pushUnique(N,fe),!0===Se.visible&&a.pushUnique(U,fe),a.pushUnique(Q,Se._module.basePlotModule),j++,!1!==Se._input.visible&&J++)}G._transformModules=[];var re={},ne=[],oe=t.traceTemplater((W.template||{}).data||{});for(X=0;X<V.length;X++){if((te=oe.newTrace(D=V[X])).uid=G._traceUids[X],o.supplyTraceDefaults(D,te,J,G,X),te.index=X,te._input=D,te._expandedIndex=j,te.transforms&&te.transforms.length)for(var pe=!1!==D.visible&&!1===te.visible,ce=M(te,Z,W,G),ge=0;ge<ce.length;ge++){var xe=ce[ge],we={_template:te._template,type:te.type,uid:te.uid+ge};pe&&!1===xe.visible&&delete xe.visible,o.supplyTraceDefaults(xe,we,j,G,X),g(we,xe),we.index=X,we._input=D,we._fullInput=te,we._expandedIndex=j,we._expandedInput=xe,K(we)}else te._fullInput=te,te._expandedInput=te,K(te);e.traceIs(te,"carpetAxis")&&(re[te.carpet]=te),e.traceIs(te,"carpetDependent")&&ne.push(X)}for(X=0;X<ne.length;X++)if((te=Z[ne[X]]).visible){var be=re[te.carpet];te._carpet=be,be&&be.visible?(te.xaxis=be.xaxis,te.yaxis=be.yaxis):te.visible=!1}},o.supplyAnimationDefaults=function(V){var Z;V=V||{};var W={};function G(X,te){return a.coerce(V||{},W,l,X,te)}if(G("mode"),G("direction"),G("fromcurrent"),Array.isArray(V.frame))for(W.frame=[],Z=0;Z<V.frame.length;Z++)W.frame[Z]=o.supplyAnimationFrameDefaults(V.frame[Z]||{});else W.frame=o.supplyAnimationFrameDefaults(V.frame||{});if(Array.isArray(V.transition))for(W.transition=[],Z=0;Z<V.transition.length;Z++)W.transition[Z]=o.supplyAnimationTransitionDefaults(V.transition[Z]||{});else W.transition=o.supplyAnimationTransitionDefaults(V.transition||{});return W},o.supplyAnimationFrameDefaults=function(V){var Z={};function W(G,X){return a.coerce(V||{},Z,l.frame,G,X)}return W("duration"),W("redraw"),Z},o.supplyAnimationTransitionDefaults=function(V){var Z={};function W(G,X){return a.coerce(V||{},Z,l.transition,G,X)}return W("duration"),W("easing"),Z},o.supplyFrameDefaults=function(V){var Z={};function W(G,X){return a.coerce(V,Z,c,G,X)}return W("group"),W("name"),W("traces"),W("baseframe"),W("data"),W("layout"),Z},o.supplyTraceDefaults=function(V,Z,W,G,X){var te,D=G.colorway||r.defaults,N=D[W%D.length];function U(ce,ge){return a.coerce(V,Z,o.attributes,ce,ge)}var Q=U("visible");U("type"),U("name",G._traceWord+" "+X),U("uirevision",G.uirevision);var j=o.getModule(Z);if(Z._module=j,j){var J=j.basePlotModule,K=J.attr,re=J.attributes;if(K&&re){var ne=G._subplots,se="";if(Q||"gl2d"!==J.name){if(Array.isArray(K))for(te=0;te<K.length;te++){var oe=K[te],pe=a.coerce(V,Z,re,oe);ne[oe]&&a.pushUnique(ne[oe],pe),se+=pe}else se=a.coerce(V,Z,re,K);ne[J.name]&&a.pushUnique(ne[J.name],se)}}}return Q&&(U("customdata"),U("ids"),U("meta"),e.traceIs(Z,"showLegend")?(a.coerce(V,Z,j.attributes.showlegend?j.attributes:o.attributes,"showlegend"),U("legendgroup"),U("legendgrouptitle.text")&&a.coerceFont(U,"legendgrouptitle.font",a.extendFlat({},G.font,{size:Math.round(1.1*G.font.size)})),U("legendrank"),Z._dfltShowLegend=!0):Z._dfltShowLegend=!1,j&&j.supplyDefaults(V,Z,N,G),e.traceIs(Z,"noOpacity")||U("opacity"),e.traceIs(Z,"notLegendIsolatable")&&(Z.visible=!!Z.visible),e.traceIs(Z,"noHover")||(Z.hovertemplate||a.coerceHoverinfo(V,Z,G),"parcats"!==Z.type&&e.getComponentMethod("fx","supplyDefaults")(V,Z,N,G)),j&&j.selectPoints&&U("selectedpoints"),o.supplyTransformDefaults(V,Z,G)),Z},o.hasMakesDataTransform=L,o.supplyTransformDefaults=function(V,Z,W){if(Z._length||L(V)){var G=W._globalTransforms||[],X=W._transformModules||[];if(Array.isArray(V.transforms)||0!==G.length)for(var D=G.concat(V.transforms||[]),N=Z.transforms=[],U=0;U<D.length;U++){var Q,j=D[U],J=j.type,K=x[J],re=!(j._module&&j._module===K),ne=K&&"function"==typeof K.transform;K||a.warn("Unrecognized transform type "+J+"."),K&&K.supplyDefaults&&(re||ne)?((Q=K.supplyDefaults(j,Z,W,V)).type=J,Q._module=K,a.pushUnique(X,K)):Q=a.extendFlat({},j),N.push(Q)}}},o.supplyLayoutGlobalDefaults=function(V,Z,W){function G(N,U){return a.coerce(V,Z,o.layoutAttributes,N,U)}var X=V.template;a.isPlainObject(X)&&(Z.template=X,Z._template=X.layout,Z._dataTemplate=X.data),G("autotypenumbers");var te=a.coerceFont(G,"font");G("title.text",Z._dfltTitle.plot),a.coerceFont(G,"title.font",{family:te.family,size:Math.round(1.4*te.size),color:te.color}),G("title.xref"),G("title.yref"),G("title.x"),G("title.y"),G("title.xanchor"),G("title.yanchor"),G("title.pad.t"),G("title.pad.r"),G("title.pad.b"),G("title.pad.l"),G("uniformtext.mode")&&G("uniformtext.minsize"),G("autosize",!(V.width&&V.height)),G("width"),G("height"),G("margin.l"),G("margin.r"),G("margin.t"),G("margin.b"),G("margin.pad"),G("margin.autoexpand"),V.width&&V.height&&o.sanitizeMargins(Z),e.getComponentMethod("grid","sizeDefaults")(V,Z),G("paper_bgcolor"),G("separators",W.decimal+W.thousands),G("hidesources"),G("colorway"),G("datarevision");var D=G("uirevision");G("editrevision",D),G("selectionrevision",D),e.getComponentMethod("modebar","supplyLayoutDefaults")(V,Z),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(V,Z,G),G("meta"),a.isPlainObject(V.transition)&&(G("transition.duration"),G("transition.easing"),G("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(V,Z,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(V,Z,G)},o.plotAutoSize=function(V,Z,W){var G,X,te=V._context||{},D=te.frameMargins,N=a.isPlotDiv(V);if(N&&V.emit("plotly_autosize"),te.fillFrame)G=window.innerWidth,X=window.innerHeight,document.body.style.overflow="hidden";else{var U=N?window.getComputedStyle(V):{};if(G=O(U.width)||O(U.maxWidth)||W.width,X=O(U.height)||O(U.maxHeight)||W.height,v(D)&&D>0){var Q=1-2*D;G=Math.round(Q*G),X=Math.round(Q*X)}}var j=o.layoutAttributes.width.min,J=o.layoutAttributes.height.min;G<j&&(G=j),X<J&&(X=J);var K=!Z.width&&Math.abs(W.width-G)>1,re=!Z.height&&Math.abs(W.height-X)>1;(re||K)&&(K&&(W.width=G),re&&(W.height=X)),V._initialAutoSize||(V._initialAutoSize={width:G,height:X}),o.sanitizeMargins(W)},o.supplyLayoutModuleDefaults=function(V,Z,W,G){var X,te,D,N=e.componentsRegistry,U=Z._basePlotModules,Q=e.subplotsRegistry.cartesian;for(X in N)(D=N[X]).includeBasePlot&&D.includeBasePlot(V,Z);for(var j in U.length||U.push(Q),Z._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(V,Z),Q.finalizeSubplots(V,Z)),Z._subplots)Z._subplots[j].sort(a.subplotSort);for(te=0;te<U.length;te++)(D=U[te]).supplyLayoutDefaults&&D.supplyLayoutDefaults(V,Z,W);var J=Z._modules;for(te=0;te<J.length;te++)(D=J[te]).supplyLayoutDefaults&&D.supplyLayoutDefaults(V,Z,W);var K=Z._transformModules;for(te=0;te<K.length;te++)(D=K[te]).supplyLayoutDefaults&&D.supplyLayoutDefaults(V,Z,W,G);for(X in N)(D=N[X]).supplyLayoutDefaults&&D.supplyLayoutDefaults(V,Z,W)},o.purge=function(V){var Z=V._fullLayout||{};void 0!==Z._glcontainer&&(Z._glcontainer.selectAll(".gl-canvas").remove(),Z._glcontainer.remove(),Z._glcanvas=null),Z._modeBar&&Z._modeBar.destroy(),V._transitionData&&(V._transitionData._interruptCallbacks&&(V._transitionData._interruptCallbacks.length=0),V._transitionData._animationRaf&&window.cancelAnimationFrame(V._transitionData._animationRaf)),a.clearThrottle(),a.clearResponsive(V),delete V.data,delete V.layout,delete V._fullData,delete V._fullLayout,delete V.calcdata,delete V.empty,delete V.fid,delete V.undoqueue,delete V.undonum,delete V.autoplay,delete V.changed,delete V._promises,delete V._redrawTimer,delete V._hmlumcount,delete V._hmpixcount,delete V._transitionData,delete V._transitioning,delete V._initialAutoSize,delete V._transitioningWithDuration,delete V._dragging,delete V._dragged,delete V._dragdata,delete V._hoverdata,delete V._snapshotInProgress,delete V._editing,delete V._mouseDownTime,delete V._legendMouseDownTime,V.removeAllListeners&&V.removeAllListeners()},o.style=function(V){var Z,W=V._fullLayout._visibleModules,G=[];for(Z=0;Z<W.length;Z++){var X=W[Z];X.style&&a.pushUnique(G,X.style)}for(Z=0;Z<G.length;Z++)G[Z](V)},o.sanitizeMargins=function(V){if(V&&V.margin){var Z,W=V.width,G=V.height,X=V.margin,D=G-(X.t+X.b);W-(X.l+X.r)<0&&(Z=(W-1)/(X.l+X.r),X.l=Math.floor(Z*X.l),X.r=Math.floor(Z*X.r)),D<0&&(Z=(G-1)/(X.t+X.b),X.t=Math.floor(Z*X.t),X.b=Math.floor(Z*X.b))}},o.clearAutoMarginIds=function(V){V._fullLayout._pushmarginIds={}},o.allowAutoMargin=function(V,Z){V._fullLayout._pushmarginIds[Z]=1},o.autoMargin=function(V,Z,W){var G=V._fullLayout,X=G.width,te=G.height,D=G.margin,N=a.constrain(X-D.l-D.r,2,64),U=a.constrain(te-D.t-D.b,2,64),Q=Math.max(0,X-N),j=Math.max(0,te-U),J=G._pushmargin,K=G._pushmarginIds;if(!1!==D.autoexpand){if(W){var re=W.pad;if(void 0===re&&(re=Math.min(12,D.l,D.r,D.t,D.b)),Q){var ne=(W.l+W.r)/Q;ne>1&&(W.l/=ne,W.r/=ne)}if(j){var se=(W.t+W.b)/j;se>1&&(W.t/=se,W.b/=se)}J[Z]={l:{val:void 0!==W.xl?W.xl:W.x,size:W.l+re},r:{val:void 0!==W.xr?W.xr:W.x,size:W.r+re},b:{val:void 0!==W.yb?W.yb:W.y,size:W.b+re},t:{val:void 0!==W.yt?W.yt:W.y,size:W.t+re}},K[Z]=1}else delete J[Z],delete K[Z];if(!G._replotting)return o.doAutoMargin(V)}},o.doAutoMargin=function(V){var Z=V._fullLayout,W=Z.width,G=Z.height;Z._size||(Z._size={}),P(Z);var X=Z._size,te=Z.margin,D=a.extendFlat({},X),N=te.l,U=te.r,Q=te.t,j=te.b,J=Z._pushmargin,K=Z._pushmarginIds;if(!1!==Z.margin.autoexpand){for(var re in J)K[re]||delete J[re];for(var ne in J.base={l:{val:0,size:N},r:{val:1,size:U},t:{val:1,size:Q},b:{val:0,size:j}},J){var se=J[ne].l||{},oe=J[ne].b||{},pe=se.val,ce=se.size,ge=oe.val,xe=oe.size;for(var we in J){if(v(ce)&&J[we].r){var be=J[we].r.val,Se=J[we].r.size;if(be>pe){var fe=(ce*be+(Se-W)*pe)/(be-pe),me=(Se*(1-pe)+(ce-W)*(1-be))/(be-pe);fe+me>N+U&&(N=fe,U=me)}}if(v(xe)&&J[we].t){var Te=J[we].t.val,_e=J[we].t.size;if(Te>ge){var Me=(xe*Te+(_e-G)*ge)/(Te-ge),Ie=(_e*(1-ge)+(xe-G)*(1-Te))/(Te-ge);Me+Ie>j+Q&&(j=Me,Q=Ie)}}}}}var st,ze=a.constrain(W-te.l-te.r,2,64),Ve=a.constrain(G-te.t-te.b,2,64),Je=Math.max(0,W-ze),De=Math.max(0,G-Ve);if(Je){var Be=(N+U)/Je;Be>1&&(N/=Be,U/=Be)}if(De){var Ze=(j+Q)/De;Ze>1&&(j/=Ze,Q/=Ze)}if(X.l=Math.round(N),X.r=Math.round(U),X.t=Math.round(Q),X.b=Math.round(j),X.p=Math.round(te.pad),X.w=Math.round(W)-X.l-X.r,X.h=Math.round(G)-X.t-X.b,!Z._replotting&&o.didMarginChange(D,X)){"_redrawFromAutoMarginCount"in Z?Z._redrawFromAutoMarginCount++:Z._redrawFromAutoMarginCount=1;var Ye=3*(1+Object.keys(K).length);if(Z._redrawFromAutoMarginCount<Ye)return e.call("_doPlot",V);Z._size=D,a.warn("Too many auto-margin redraws.")}st=s.list(V,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(vt){for(var Pt=0;Pt<st.length;Pt++){var Mt=st[Pt][vt];Mt&&Mt()}})};var S=["l","r","t","b","p","w","h"];function E(V,Z,W){var G=!1,te=a.syncOrAsync([o.previousPromises,function(){if(V._transitionData)return V._transitioning=!1,function(D){var N=Promise.resolve();if(!D)return N;for(;D.length;)N=N.then(D.shift());return N}(V._transitionData._interruptCallbacks)},W.prepareFn,o.rehover,function(){return V.emit("plotly_transitioning",[]),new Promise(function(D){V._transitioning=!0,Z.duration>0&&(V._transitioningWithDuration=!0),V._transitionData._interruptCallbacks.push(function(){G=!0}),W.redraw&&V._transitionData._interruptCallbacks.push(function(){return e.call("redraw",V)}),V._transitionData._interruptCallbacks.push(function(){V.emit("plotly_transitioninterrupted",[])});var N=0,U=0;function Q(){return N++,function(){var j;U++,G||U!==N||(j=D,!V._transitionData||(function(J){if(J)for(;J.length;)J.shift()}(V._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(W.redraw)return e.call("redraw",V)}).then(function(){V._transitioning=!1,V._transitioningWithDuration=!1,V.emit("plotly_transitioned",[])}).then(j)))}}W.runFn(Q),setTimeout(Q())})}],V);return te&&te.then||(te=Promise.resolve()),te.then(function(){return V})}o.didMarginChange=function(V,Z){for(var W=0;W<S.length;W++){var G=S[W],X=V[G],te=Z[G];if(!v(X)||Math.abs(te-X)>1)return!0}return!1},o.graphJson=function(V,Z,W,G,X,te){(X&&Z&&!V._fullData||X&&!Z&&!V._fullLayout)&&o.supplyDefaults(V);var N=X?V._fullLayout:V.layout,U=(V._transitionData||{})._frames;function Q(K,re){if("function"==typeof K)return re?"_function_":null;if(a.isPlainObject(K)){var ne,se={};return Object.keys(K).sort().forEach(function(oe){if(-1===["_","["].indexOf(oe.charAt(0)))if("function"!=typeof K[oe]){if("keepdata"===W){if("src"===oe.substr(oe.length-3))return}else if("keepstream"===W){if("string"==typeof(ne=K[oe+"src"])&&ne.indexOf(":")>0&&!a.isPlainObject(K.stream))return}else if("keepall"!==W&&"string"==typeof(ne=K[oe+"src"])&&ne.indexOf(":")>0)return;se[oe]=Q(K[oe],re)}else re&&(se[oe]="_function")}),se}return Array.isArray(K)?K.map(function(oe){return Q(oe,re)}):a.isTypedArray(K)?a.simpleMap(K,a.identity):a.isJSDate(K)?a.ms2DateTimeLocal(+K):K}var j={data:((X?V._fullData:V.data)||[]).map(function(K){var re=Q(K);return Z&&delete re.fit,re})};if(!Z&&(j.layout=Q(N),X)){var J=N._size;j.layout.computed={margin:{b:J.b,l:J.l,r:J.r,t:J.t}}}return U&&(j.frames=Q(U)),te&&(j.config=Q(V._context,!0)),"object"===G?j:JSON.stringify(j)},o.modifyFrames=function(V,Z){var W,G,X,te=V._transitionData._frames,D=V._transitionData._frameHash;for(W=0;W<Z.length;W++)switch((G=Z[W]).type){case"replace":var N=(te[G.index]||{}).name,U=(X=G.value).name;te[G.index]=D[U]=X,U!==N&&(delete D[N],D[U]=X);break;case"insert":D[(X=G.value).name]=X,te.splice(G.index,0,X);break;case"delete":delete D[(X=te[G.index]).name],te.splice(G.index,1)}return Promise.resolve()},o.computeFrame=function(V,Z){var W,G,X,te,D=V._transitionData._frameHash;if(!Z)throw new Error("computeFrame must be given a string frame name");var N=D[Z.toString()];if(!N)return!1;for(var U=[N],Q=[N.name];N.baseframe&&(N=D[N.baseframe.toString()])&&-1===Q.indexOf(N.name);)U.push(N),Q.push(N.name);for(var j={};N=U.pop();)if(N.layout&&(j.layout=o.extendLayout(j.layout,N.layout)),N.data){if(j.data||(j.data=[]),!(G=N.traces))for(G=[],W=0;W<N.data.length;W++)G[W]=W;for(j.traces||(j.traces=[]),W=0;W<N.data.length;W++)null!=(X=G[W])&&(-1===(te=j.traces.indexOf(X))&&(j.traces[te=j.data.length]=X),j.data[te]=o.extendTrace(j.data[te],N.data[W]))}return j},o.recomputeFrameHash=function(V){for(var Z=V._transitionData._frameHash={},W=V._transitionData._frames,G=0;G<W.length;G++){var X=W[G];X&&X.name&&(Z[X.name]=X)}},o.extendObjectWithContainers=function(V,Z,W){var G,X,te,D,N,U,Q,j=a.extendDeepNoArrays({},Z||{}),J=a.expandObjectPaths(j),K={};if(W&&W.length)for(te=0;te<W.length;te++)void 0===(X=(G=a.nestedProperty(J,W[te])).get())?a.nestedProperty(K,W[te]).set(null):(G.set(null),a.nestedProperty(K,W[te]).set(X));if(V=a.extendDeepNoArrays(V||{},J),W&&W.length)for(te=0;te<W.length;te++)if(U=a.nestedProperty(K,W[te]).get()){for(Q=(N=a.nestedProperty(V,W[te])).get(),Array.isArray(Q)||N.set(Q=[]),D=0;D<U.length;D++){var re=U[D];Q[D]=null===re?null:o.extendObjectWithContainers(Q[D],re)}N.set(Q)}return V},o.dataArrayContainers=["transforms","dimensions"],o.layoutArrayContainers=e.layoutArrayContainers,o.extendTrace=function(V,Z){return o.extendObjectWithContainers(V,Z,o.dataArrayContainers)},o.extendLayout=function(V,Z){return o.extendObjectWithContainers(V,Z,o.layoutArrayContainers)},o.transition=function(V,Z,W,G,X,te){var D={redraw:X.redraw},N={},U=[];return D.prepareFn=function(){for(var Q=Array.isArray(Z)?Z.length:0,j=G.slice(0,Q),J=0;J<j.length;J++){var K=j[J],re=V._fullData[K]._module;if(re){if(re.animatable){var ne=re.basePlotModule.name;N[ne]||(N[ne]=[]),N[ne].push(K)}V.data[j[J]]=o.extendTrace(V.data[j[J]],Z[J])}}var se=a.expandObjectPaths(a.extendDeepNoArrays({},W)),oe=/^[xy]axis[0-9]*$/;for(var pe in se)oe.test(pe)&&delete se[pe].range;o.extendLayout(V.layout,se),delete V.calcdata,o.supplyDefaults(V),o.doCalcdata(V);var ce=a.expandObjectPaths(W);if(ce){var ge=V._fullLayout._plots;for(var xe in ge){var we=ge[xe],be=we.xaxis,Se=we.yaxis,fe=be.range.slice(),me=Se.range.slice(),Te=null,_e=null,Me=null,Ie=null;Array.isArray(ce[be._name+".range"])?Te=ce[be._name+".range"].slice():Array.isArray((ce[be._name]||{}).range)&&(Te=ce[be._name].range.slice()),Array.isArray(ce[Se._name+".range"])?_e=ce[Se._name+".range"].slice():Array.isArray((ce[Se._name]||{}).range)&&(_e=ce[Se._name].range.slice()),fe&&Te&&(be.r2l(fe[0])!==be.r2l(Te[0])||be.r2l(fe[1])!==be.r2l(Te[1]))&&(Me={xr0:fe,xr1:Te}),me&&_e&&(Se.r2l(me[0])!==Se.r2l(_e[0])||Se.r2l(me[1])!==Se.r2l(_e[1]))&&(Ie={yr0:me,yr1:_e}),(Me||Ie)&&U.push(a.extendFlat({plotinfo:we},Me,Ie))}}return Promise.resolve()},D.runFn=function(Q){var j,J,K=V._fullLayout._basePlotModules,re=U.length;if(W)for(J=0;J<K.length;J++)K[J].transitionAxes&&K[J].transitionAxes(V,U,te,Q);for(var ne in re?((j=a.extendFlat({},te)).duration=0,delete N.cartesian):j=te,N){var se=N[ne];V._fullData[se[0]]._module.basePlotModule.plot(V,se,j,Q)}},E(V,te,D)},o.transitionFromReact=function(V,Z,W,G){var X=V._fullLayout,te=X.transition,D={},N=[];return D.prepareFn=function(){var U=X._plots;for(var Q in D.redraw=!1,"some"===Z.anim&&(D.redraw=!0),"some"===W.anim&&(D.redraw=!0),U){var j=U[Q],J=j.xaxis,K=j.yaxis,re=G[J._name].range.slice(),ne=G[K._name].range.slice(),se=J.range.slice(),oe=K.range.slice();J.setScale(),K.setScale();var pe=null,ce=null;J.r2l(re[0])===J.r2l(se[0])&&J.r2l(re[1])===J.r2l(se[1])||(pe={xr0:re,xr1:se}),K.r2l(ne[0])===K.r2l(oe[0])&&K.r2l(ne[1])===K.r2l(oe[1])||(ce={yr0:ne,yr1:oe}),(pe||ce)&&N.push(a.extendFlat({plotinfo:j},pe,ce))}return Promise.resolve()},D.runFn=function(U){for(var Q,j,J,K=V._fullData,re=V._fullLayout._basePlotModules,ne=[],se=0;se<K.length;se++)ne.push(se);function oe(){if(V._fullLayout)for(var ce=0;ce<re.length;ce++)re[ce].transitionAxes&&re[ce].transitionAxes(V,N,Q,U)}function pe(){if(V._fullLayout)for(var ce=0;ce<re.length;ce++)re[ce].plot(V,J,j,U)}N.length&&Z.anim?"traces first"===te.ordering?(Q=a.extendFlat({},te,{duration:0}),J=ne,j=te,setTimeout(oe,te.duration),pe()):(Q=te,J=null,j=a.extendFlat({},te,{duration:0}),setTimeout(pe,Q.duration),oe()):N.length?(Q=te,oe()):Z.anim&&(J=ne,j=te,pe())},E(V,te,D)},o.doCalcdata=function(V,Z){var W,G,X,te,D=s.list(V),N=V._fullData,U=V._fullLayout,Q=new Array(N.length),j=(V.calcdata||[]).slice();for(V.calcdata=Q,U._numBoxes=0,U._numViolins=0,U._violinScaleGroupStats={},V._hmpixcount=0,V._hmlumcount=0,U._piecolormap={},U._sunburstcolormap={},U._treemapcolormap={},U._iciclecolormap={},U._funnelareacolormap={},X=0;X<N.length;X++)Array.isArray(Z)&&-1===Z.indexOf(X)&&(Q[X]=j[X]);for(X=0;X<N.length;X++)(W=N[X])._arrayAttrs=n.findArrayAttributes(W),W._extremes={};var J=U._subplots.polar||[];for(X=0;X<J.length;X++)D.push(U[J[X]].radialaxis,U[J[X]].angularaxis);for(var K in U._colorAxes){var re=U[K];!1!==re.cauto&&(delete re.cmin,delete re.cmax)}var ne=!1;function se(ce){if(G=(W=N[ce])._module,!0===W.visible&&W.transforms){if(G&&G.calc){var ge=G.calc(V,W);ge[0]&&ge[0].t&&ge[0].t._scene&&delete ge[0].t._scene.dirty}for(te=0;te<W.transforms.length;te++){var xe=W.transforms[te];(G=x[xe.type])&&G.calcTransform&&(W._hasCalcTransform=!0,ne=!0,G.calcTransform(V,W,xe))}}}function oe(ce,ge){if(!!(G=(W=N[ce])._module).isContainer===ge){var xe=[];if(!0===W.visible&&0!==W._length){delete W._indexToPoints;var we=W.transforms||[];for(te=we.length-1;te>=0;te--)if(we[te].enabled){W._indexToPoints=we[te]._indexToPoints;break}G&&G.calc&&(xe=G.calc(V,W))}Array.isArray(xe)&&xe[0]||(xe=[{x:u,y:u}]),xe[0].t||(xe[0].t={}),xe[0].trace=W,Q[ce]=xe}}for(B(D,N,U),X=0;X<N.length;X++)oe(X,!0);for(X=0;X<N.length;X++)se(X);for(ne&&B(D,N,U),X=0;X<N.length;X++)oe(X,!0);for(X=0;X<N.length;X++)oe(X,!1);H(V);var pe=function(ce,ge){var xe,we,be,Se,fe,me=[];function Te($e,ke,Le){var Pe=ke._id.charAt(0);if("histogram2dcontour"===$e){var Ce=ke._counterAxes[0],Xe=s.getFromId(ge,Ce),at="x"===Pe||"x"===Ce&&"category"===Xe.type,pt="y"===Pe||"y"===Ce&&"category"===Xe.type;return function(ut,St){return 0===ut||0===St||at&&ut===Le[St].length-1||pt&&St===Le.length-1?-1:("y"===Pe?St:ut)-1}}return function(ut,St){return"y"===Pe?St:ut}}var _e={min:function($e){return a.aggNums(Math.min,null,$e)},max:function($e){return a.aggNums(Math.max,null,$e)},sum:function($e){return a.aggNums(function(ke,Le){return ke+Le},null,$e)},total:function($e){return a.aggNums(function(ke,Le){return ke+Le},null,$e)},mean:function($e){return a.mean($e)},median:function($e){return a.median($e)}};for(xe=0;xe<ce.length;xe++){var Me=ce[xe];if("category"===Me.type){var Ie=Me.categoryorder.match(R);if(Ie){var ze=Ie[1],Ve=Ie[2],Je=Me._id.charAt(0),De="x"===Je,Be=[];for(we=0;we<Me._categories.length;we++)Be.push([Me._categories[we],[]]);for(we=0;we<Me._traceIndices.length;we++){var Ze=Me._traceIndices[we],Ye=ge._fullData[Ze];if(!0===Ye.visible){var tt=Ye.type;e.traceIs(Ye,"histogram")&&(delete Ye._xautoBinFinished,delete Ye._yautoBinFinished);var st="splom"===tt,vt="scattergl"===tt,Pt=ge.calcdata[Ze];for(be=0;be<Pt.length;be++){var Mt,rt,et=Pt[be];if(st){var bt=Ye._axesDim[Me._id];if(!De){var Rt=Ye._diag[bt][0];Rt&&(Me=ge._fullLayout[s.id2name(Rt)])}var Yt=et.trace.dimensions[bt].values;for(Se=0;Se<Yt.length;Se++)for(Mt=Me._categoriesMap[Yt[Se]],fe=0;fe<et.trace.dimensions.length;fe++)fe!==bt&&Be[Mt][1].push(et.trace.dimensions[fe].values[Se])}else if(vt){for(Se=0;Se<et.t.x.length;Se++)De?(Mt=et.t.x[Se],rt=et.t.y[Se]):(Mt=et.t.y[Se],rt=et.t.x[Se]),Be[Mt][1].push(rt);et.t&&et.t._scene&&delete et.t._scene.dirty}else if(et.hasOwnProperty("z")){var He=Te(Ye.type,Me,rt=et.z);for(Se=0;Se<rt.length;Se++)for(fe=0;fe<rt[Se].length;fe++)(Mt=He(fe,Se))+1&&Be[Mt][1].push(rt[Se][fe])}else for(void 0===(Mt=et.p)&&(Mt=et[Je]),void 0===(rt=et.s)&&(rt=et.v),void 0===rt&&(rt=De?et.y:et.x),Array.isArray(rt)||(rt=void 0===rt?[]:[rt]),Se=0;Se<rt.length;Se++)Be[Mt][1].push(rt[Se])}}}Me._categoriesValue=Be;var Oe=[];for(we=0;we<Be.length;we++)Oe.push([Be[we][0],_e[ze](Be[we][1])]);Oe.sort(function($e,ke){return $e[1]-ke[1]}),Me._categoriesAggregatedValue=Oe,Me._initialCategories=Oe.map(function($e){return $e[0]}),"descending"===Ve&&Me._initialCategories.reverse(),me=me.concat(Me.sortByInitialCategories())}}}return me}(D,V);if(pe.length){for(U._numBoxes=0,U._numViolins=0,X=0;X<pe.length;X++)oe(pe[X],!0);for(X=0;X<pe.length;X++)oe(pe[X],!1);H(V)}e.getComponentMethod("fx","calc")(V),e.getComponentMethod("errorbars","calc")(V)};var R=/(total|sum|min|max|mean|median) (ascending|descending)/;function B(V,Z,W){var G={};function X(U){U.clearCalc(),"multicategory"===U.type&&U.setupMultiCategory(Z),G[U._id]=1}a.simpleMap(V,X);for(var te=W._axisMatchGroups||[],D=0;D<te.length;D++)for(var N in te[D])G[N]||X(W[s.id2name(N)])}function H(V){var Z,W,G,X=V._fullLayout,te=X._visibleModules,D={};for(W=0;W<te.length;W++){var N=te[W],U=N.crossTraceCalc;if(U){var Q=N.basePlotModule.name;D[Q]?a.pushUnique(D[Q],U):D[Q]=[U]}}for(G in D){var j=D[G],J=X._subplots[G];if(Array.isArray(J))for(Z=0;Z<J.length;Z++){var K=J[Z],re="cartesian"===G?X._plots[K]:X[K];for(W=0;W<j.length;W++)j[W](V,re,K)}else for(W=0;W<j.length;W++)j[W](V)}}o.rehover=function(V){V._fullLayout._rehover&&V._fullLayout._rehover()},o.redrag=function(V){V._fullLayout._redrag&&V._fullLayout._redrag()},o.generalUpdatePerTraceModule=function(V,Z,W,G){var X,te=Z.traceHash,D={};for(X=0;X<W.length;X++){var N=W[X],U=N[0].trace;U.visible&&(D[U.type]=D[U.type]||[],D[U.type].push(N))}for(var Q in te)if(!D[Q]){var j=te[Q][0];j[0].trace.visible=!1,D[Q]=[j]}for(var J in D){var K=D[J];K[0][0].trace._module.plot(V,Z,a.filterVisible(K),G)}Z.traceHash=D},o.plotBasePlot=function(V,Z,W,G,X){var te=e.getModule(V),D=f(Z.calcdata,te)[0];te.plot(Z,D,G,X)},o.cleanBasePlot=function(V,Z,W,G,X){var te=X._has&&X._has(V),D=W._has&&W._has(V);te&&!D&&X["_"+V+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(y,$,ee){"use strict";$.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../lib/polygon").tester,b=p.findIndexOfMin,v=p.isAngleInsideSector,e=p.angleDelta,n=p.angleDist;function t(s,i,l,c){var f,g,h=c[0],o=c[1],x=r(Math.sin(i)-Math.sin(s)),d=r(Math.cos(i)-Math.cos(s)),w=Math.tan(l),_=r(1/w),T=x/d,k=o-T*h;return _?x&&d?g=w*(f=k/(w-T)):d?(f=o*_,g=o):(f=h,g=h*w):x&&d?(f=0,g=k):d?(f=0,g=o):f=g=NaN,[f,g]}function a(s,i,l,c){return p.isFullCircle([i,l])?function(f,g){var h,o=g.length,x=new Array(o+1);for(h=0;h<o;h++){var d=g[h];x[h]=[f*Math.cos(d),f*Math.sin(d)]}return x[h]=x[0].slice(),x}(s,c):function(f,g,h,o){var x,d,w=o.length,_=[];function T(B){return[f*Math.cos(B),f*Math.sin(B)]}function k(B,H,V){return t(B,H,V,T(B))}function L(B){return p.mod(B,w)}function M(B){return v(B,[g,h])}var O=b(o,function(B){return M(B)?n(B,g):1/0}),P=k(o[O],o[L(O-1)],g);for(_.push(P),x=O,d=0;d<w;x++,d++){var S=o[L(x)];if(!M(S))break;_.push(T(S))}var E=b(o,function(B){return M(B)?n(B,h):1/0}),R=k(o[E],o[L(E+1)],h);return _.push(R),_.push([0,0]),_.push(_[0].slice()),_}(s,i,l,c)}function r(s){return Math.abs(s)>1e-10?s:0}function u(s,i,l){i=i||0,l=l||0;for(var c=s.length,f=new Array(c),g=0;g<c;g++){var h=s[g];f[g]=[i+h[0],l-h[1]]}return f}$.exports={isPtInsidePolygon:function(s,i,l,c,f){if(!v(i,c))return!1;var g,h;l[0]<l[1]?(g=l[0],h=l[1]):(g=l[1],h=l[0]);var o=m(a(g,c[0],c[1],f)),x=m(a(h,c[0],c[1],f)),d=[s*Math.cos(i),s*Math.sin(i)];return x.contains(d)&&!o.contains(d)},findPolygonOffset:function(s,i,l,c){for(var f=1/0,g=1/0,h=a(s,i,l,c),o=0;o<h.length;o++){var x=h[o];f=Math.min(f,x[0]),g=Math.min(g,-x[1])}return[f,g]},findEnclosingVertexAngles:function(s,i){var l=b(i,function(f){var g=e(f,s);return g>0?g:1/0}),c=p.mod(l+1,i.length);return[i[l],i[c]]},findIntersectionXY:t,findXYatLength:function(s,i,l,c){var f=-i*l,g=i*i+1,h=2*(i*f-l),x=Math.sqrt(h*h-4*g*(f*f+l*l-s*s)),d=(-h+x)/(2*g),w=(-h-x)/(2*g);return[[d,i*d+f+c],[w,i*w+f+c]]},clampTiny:r,pathPolygon:function(s,i,l,c,f,g){return"M"+u(a(s,i,l,c),f,g).join("L")},pathPolygonAnnulus:function(s,i,l,c,f,g,h){var o,x;s<i?(o=s,x=i):(o=i,x=s);var d=u(a(o,l,c,f),g,h);return"M"+u(a(x,l,c,f),g,h).reverse().join("L")+"M"+d.join("L")}}},{"../../lib":503,"../../lib/polygon":515}],622:[function(y,$,ee){"use strict";var p=y("../get_data").getSubplotCalcData,m=y("../../lib").counterRegex,b=y("./polar"),v=y("./constants"),e=v.attr,n=v.name,t=m(n),a={};a[e]={valType:"subplotid",dflt:n,editType:"calc"},$.exports={attr:e,name:n,idRoot:n,idRegex:t,attrRegex:t,attributes:a,layoutAttributes:y("./layout_attributes"),supplyLayoutDefaults:y("./layout_defaults"),plot:function(r){for(var u=r._fullLayout,s=r.calcdata,i=u._subplots[n],l=0;l<i.length;l++){var c=i[l],f=p(s,n,c),g=u[c]._subplot;g||(g=b(r,c),u[c]._subplot=g),g.plot(f,u,r._promises)}},clean:function(r,u,s,i){for(var l=i._subplots[n]||[],c=i._has&&i._has("gl"),f=u._has&&u._has("gl"),g=c&&!f,h=0;h<l.length;h++){var o=l[h],x=i[o]._subplot;if(!u[o]&&x)for(var d in x.framework.remove(),x.layers["radial-axis-title"].remove(),x.clipPaths)x.clipPaths[d].remove();g&&x._scene&&(x._scene.destroy(),x._scene=null)}},toSVG:y("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(y,$,ee){"use strict";var p=y("../../components/color/attributes"),m=y("../cartesian/layout_attributes"),b=y("../domain").attributes,v=y("../../lib").extendFlat,e=y("../../plot_api/edit_types").overrideAll,n=e({color:m.color,showline:v({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:v({},m.showgrid,{dflt:!0}),gridcolor:m.gridcolor,gridwidth:m.gridwidth},"plot","from-root"),t=e({tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,minexponent:m.minexponent,separatethousands:m.separatethousands,tickfont:m.tickfont,tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,layer:m.layer},"plot","from-root"),a={visible:v({},m.visible,{dflt:!0}),type:v({},m.type,{values:["-","linear","log","date","category"]}),autotypenumbers:m.autotypenumbers,autorange:v({},m.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:v({},m.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:m.categoryorder,categoryarray:m.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:v({},m.title.text,{editType:"plot",dflt:""}),font:v({},m.title.font,{editType:"plot"}),editType:"plot"},hoverformat:m.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}};v(a,n,t);var r={visible:v({},m.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:m.autotypenumbers,categoryorder:m.categoryorder,categoryarray:m.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:m.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};v(r,n,t),$.exports={domain:b({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:p.background},radialaxis:a,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/color"),b=y("../../plot_api/plot_template"),v=y("../subplot_defaults"),e=y("../get_data").getSubplotData,n=y("../cartesian/tick_value_defaults"),t=y("../cartesian/tick_mark_defaults"),a=y("../cartesian/tick_label_defaults"),r=y("../cartesian/prefix_suffix_defaults"),u=y("../cartesian/category_order_defaults"),s=y("../cartesian/line_grid_defaults"),i=y("../cartesian/axis_autotype"),l=y("./layout_attributes"),c=y("./set_convert"),f=y("./constants"),g=f.axisNames;function h(x,d,w,_){var T=w("bgcolor");_.bgColor=m.combine(T,_.paper_bgcolor);var k=w("sector");w("hole");var L,M=e(_.fullData,f.name,_.id),O=_.layoutOut;function P(Q,j){return w(L+"."+Q,j)}for(var S=0;S<g.length;S++){p.isPlainObject(x[L=g[S]])||(x[L]={});var E=x[L],R=b.newContainer(d,L);R._id=R._name=L,R._attr=_.id+"."+L,R._traceIndices=M.map(function(Q){return Q._expandedIndex});var B=f.axisName2dataArray[L],H=o(E,R,P,M,B,_);u(E,R,P,{axData:M,dataAttr:B});var V=P("visible");switch(c(R,d,O),P("uirevision",d.uirevision),R._m=1,L){case"radialaxis":var Z=P("autorange",!R.isValidRange(E.range));E.autorange=Z,!Z||"linear"!==H&&"-"!==H||P("rangemode"),"reversed"===Z&&(R._m=-1),P("range"),R.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===H){p.log("Polar plots do not support date angular axes yet.");for(var W=0;W<M.length;W++)M[W].visible=!1;H=E.type=R.type="linear"}P("linear"===H?"thetaunit":"period");var G=P("direction");P("rotation",{counterclockwise:0,clockwise:90}[G])}if(r(E,R,P,R.type,{tickSuffixDflt:"degrees"===R.thetaunit?"\xb0":void 0}),V){var X,te,D,N,U=_.font||{};te=(X=P("color"))===E.color?X:U.color,D=U.size,N=U.family,n(E,R,P,R.type),a(E,R,P,R.type,{font:{color:te,size:D,family:N}}),t(E,R,P,{outerTicks:!0}),s(E,R,P,{dfltColor:X,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[L]}),P("layer"),"radialaxis"===L&&(P("side"),P("angle",k[0]),P("title.text"),p.coerceFont(P,"title.font",{color:te,size:p.bigFont(D),family:N}))}"category"!==H&&P("hoverformat"),R._input=E}"category"===d.angularaxis.type&&w("gridshape")}function o(x,d,w,_,T,k){var L=w("autotypenumbers",k.autotypenumbersDflt);if("-"===w("type")){for(var M,O=0;O<_.length;O++)if(_[O].visible){M=_[O];break}M&&M[T]&&(d.type=i(M[T],"gregorian",{noMultiCategory:!0,autotypenumbers:L})),"-"===d.type?d.type="linear":x.type=d.type}return d.type}$.exports=function(x,d,w){v(x,d,w,{type:f.name,attributes:l,handleDefaults:h,font:d.font,autotypenumbersDflt:d.autotypenumbers,paper_bgcolor:d.paper_bgcolor,fullData:w,layoutOut:d})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("tinycolor2"),b=y("../../registry"),v=y("../../lib"),e=v.strRotate,n=v.strTranslate,t=y("../../components/color"),a=y("../../components/drawing"),r=y("../plots"),u=y("../../plots/cartesian/axes"),s=y("../cartesian/set_convert"),i=y("./set_convert"),l=y("../cartesian/autorange").doAutoRange,c=y("../cartesian/dragbox"),f=y("../../components/dragelement"),g=y("../../components/fx"),h=y("../../components/titles"),o=y("../cartesian/select").prepSelect,x=y("../cartesian/select").selectOnClick,d=y("../cartesian/select").clearSelect,w=y("../../lib/setcursor"),_=y("../../lib/clear_gl_canvases"),T=y("../../plot_api/subroutines").redrawReglTraces,k=y("../../constants/alignment").MID_SHIFT,L=y("./constants"),M=y("./helpers"),O=y("../smith/helpers"),P=O.smith,S=O.reactanceArc,E=O.resistanceArc,R=O.smithTransform,B=v._,H=v.mod,V=v.deg2rad,Z=v.rad2deg;function W(N,U,Q){this.isSmith=Q||!1,this.id=U,this.gd=N,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var j=N._fullLayout;this.clipIds.forTraces="clip"+j._uid+U+"-for-traces",this.clipPaths.forTraces=j._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=j["_"+(Q?"smith":"polar")+"layer"].append("g").attr("class",U),this.getHole=function(K){return this.isSmith?0:K.hole},this.getSector=function(K){return this.isSmith?[0,360]:K.sector},this.getRadial=function(K){return this.isSmith?K.realaxis:K.radialaxis},this.getAngular=function(K){return this.isSmith?K.imaginaryaxis:K.angularaxis},Q||(this.radialTickLayout=null,this.angularTickLayout=null)}var G=W.prototype;function X(N){var U=N.ticks+String(N.ticklen)+String(N.showticklabels);return"side"in N&&(U+=N.side),U}function te(N,U){return U[v.findIndexOfMin(U,function(Q){return v.angleDist(N,Q)})]}function D(N,U,Q){return U?(N.attr("display",null),N.attr(Q)):N&&N.attr("display","none"),N}$.exports=function(N,U,Q){return new W(N,U,Q)},G.plot=function(N,U){for(var Q=U[this.id],j=!1,J=0;J<N.length;J++)if(!1===N[J][0].trace.cliponaxis){j=!0;break}this._hasClipOnAxisFalse=j,this.updateLayers(U,Q),this.updateLayout(U,Q),r.generalUpdatePerTraceModule(this.gd,this,N,Q),this.updateFx(U,Q),this.isSmith&&(delete Q.realaxis.range,delete Q.imaginaryaxis.range)},G.updateLayers=function(N,U){var Q=this.isSmith,j=this.layers,J=this.getRadial(U),K=this.getAngular(U),re=L.layerNames,ne=re.indexOf("frontplot"),se=re.slice(0,ne),oe="below traces"===K.layer,pe="below traces"===J.layer;oe&&se.push("angular-line"),pe&&se.push("radial-line"),oe&&se.push("angular-axis"),pe&&se.push("radial-axis"),se.push("frontplot"),oe||se.push("angular-line"),pe||se.push("radial-line"),oe||se.push("angular-axis"),pe||se.push("radial-axis");var ce=(Q?"smith":"polar")+"sublayer",ge=this.framework.selectAll("."+ce).data(se,String);ge.enter().append("g").attr("class",function(xe){return ce+" "+xe}).each(function(xe){var we=j[xe]=p.select(this);switch(xe){case"frontplot":Q||we.append("g").classed("barlayer",!0),we.append("g").classed("scatterlayer",!0);break;case"backplot":we.append("g").classed("maplayer",!0);break;case"plotbg":j.bg=we.append("path");break;case"radial-grid":case"angular-grid":we.style("fill","none");break;case"radial-line":we.append("line").style("fill","none");break;case"angular-line":we.append("path").style("fill","none")}}),ge.order()},G.updateLayout=function(N,U){var Q=this.layers,j=N._size,J=this.getRadial(U),K=this.getAngular(U),re=U.domain.x,ne=U.domain.y;this.xOffset=j.l+j.w*re[0],this.yOffset=j.t+j.h*(1-ne[1]);var se=this.xLength=j.w*(re[1]-re[0]),oe=this.yLength=j.h*(ne[1]-ne[0]),pe=this.getSector(U);this.sectorInRad=pe.map(V);var ce,ge,xe,we,be,vt,et,bt,Rt,Yt,Fe,He,Oe,$e,ke,Se=this.sectorBBox=(Rt=(vt=pe)[1]-(bt=vt[0]),Fe=(Yt=H(bt,360))+Rt,He=Math.cos(V(Yt)),Oe=Math.sin(V(Yt)),$e=Math.cos(V(Fe)),ke=Math.sin(V(Fe)),et=Yt<=90&&Fe>=90||Yt>90&&Fe>=450?1:Oe<=0&&ke<=0?0:Math.max(Oe,ke),[Yt<=180&&Fe>=180||Yt>180&&Fe>=540?-1:He>=0&&$e>=0?0:Math.min(He,$e),Yt<=270&&Fe>=270||Yt>270&&Fe>=630?-1:Oe>=0&&ke>=0?0:Math.min(Oe,ke),Fe>=360?1:He<=0&&$e<=0?0:Math.max(He,$e),et]),fe=Se[2]-Se[0],Te=oe/se,_e=Math.abs((Se[3]-Se[1])/fe);Te>_e?(ce=se,be=(oe-(ge=se*_e))/j.h/2,xe=[re[0],re[1]],we=[ne[0]+be,ne[1]-be]):(ge=oe,be=(se-(ce=oe/_e))/j.w/2,xe=[re[0]+be,re[1]-be],we=[ne[0],ne[1]]),this.xLength2=ce,this.yLength2=ge,this.xDomain2=xe,this.yDomain2=we;var Me,Ie=this.xOffset2=j.l+j.w*xe[0],ze=this.yOffset2=j.t+j.h*(1-we[1]),Ve=this.radius=ce/fe,Je=this.innerRadius=this.getHole(U)*Ve,De=this.cx=Ie-Ve*Se[0],Be=this.cy=ze+Ve*Se[3],Ze=this.cxx=De-Ie,Ye=this.cyy=Be-ze,tt=J.side;"counterclockwise"===tt?(Me=tt,tt="top"):"clockwise"===tt&&(Me=tt,tt="bottom"),this.radialAxis=this.mockAxis(N,U,J,{_id:"x",side:tt,_trueSide:Me,domain:[Je/j.w,Ve/j.w]}),this.angularAxis=this.mockAxis(N,U,K,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(N,U),this.updateAngularAxis(N,U),this.updateRadialAxis(N,U),this.updateRadialAxisTitle(N,U),this.xaxis=this.mockCartesianAxis(N,U,{_id:"x",domain:xe}),this.yaxis=this.mockCartesianAxis(N,U,{_id:"y",domain:we});var st=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",st).attr("transform",n(Ze,Ye)),Q.frontplot.attr("transform",n(Ie,ze)).call(a.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),Q.bg.attr("d",st).attr("transform",n(De,Be)).call(t.fill,U.bgcolor)},G.mockAxis=function(N,U,Q,j){var J=v.extendFlat({},Q,j);return i(J,U,N),J},G.mockCartesianAxis=function(N,U,Q){var j=this,J=j.isSmith,K=Q._id,re=v.extendFlat({type:"linear"},Q);s(re,N);var ne={x:[0,2],y:[1,3]};return re.setRange=function(){var se=j.sectorBBox,oe=ne[K],pe=j.radialAxis._rl,ce=(pe[1]-pe[0])/(1-j.getHole(U));re.range=[se[oe[0]]*ce,se[oe[1]]*ce]},re.isPtWithinRange="x"!==K||J?function(){return!0}:function(se){return j.isPtInside(se)},re.setRange(),re.setScale(),re},G.doAutoRange=function(N,U){var Q=this.gd,j=this.radialAxis,J=this.getRadial(U);l(Q,j);var K=j.range;J.range=K.slice(),J._input.range=K.slice(),j._rl=[j.r2l(K[0],null,"gregorian"),j.r2l(K[1],null,"gregorian")]},G.updateRadialAxis=function(N,U){var Q=this,j=Q.gd,J=Q.layers,K=Q.radius,re=Q.innerRadius,ne=Q.cx,se=Q.cy,oe=Q.getRadial(U),pe=H(Q.getSector(U)[0],360),ce=Q.radialAxis,ge=re<K,xe=Q.isSmith;xe||(Q.fillViewInitialKey("radialaxis.angle",oe.angle),Q.fillViewInitialKey("radialaxis.range",ce.range.slice()),ce.setGeometry()),"auto"===ce.tickangle&&pe>90&&pe<=270&&(ce.tickangle=180);var we=xe?function(Ve){var Je=R(Q,P([Ve.x,0]));return n(Je[0]-ne,Je[1]-se)}:function(Ve){return n(ce.l2p(Ve.x)+re,0)},be=xe?function(Ve){return E(Q,Ve.x,-1/0,1/0)}:function(Ve){return Q.pathArc(ce.r2p(Ve.x)+re)},Se=X(oe);if(Q.radialTickLayout!==Se&&(J["radial-axis"].selectAll(".xtick").remove(),Q.radialTickLayout=Se),ge){ce.setScale();var fe=0,me=xe?(ce.tickvals||[]).filter(function(Ve){return Ve>=0}).map(function(Ve){return u.tickText(ce,Ve,!0,!1)}):u.calcTicks(ce),Te=xe?me:u.clipEnds(ce,me),_e=u.getTickSigns(ce)[2];xe&&(("top"===ce.ticks&&"bottom"===ce.side||"bottom"===ce.ticks&&"top"===ce.side)&&(_e=-_e),"top"===ce.ticks&&"top"===ce.side&&(fe=-ce.ticklen),"bottom"===ce.ticks&&"bottom"===ce.side&&(fe=ce.ticklen)),u.drawTicks(j,ce,{vals:me,layer:J["radial-axis"],path:u.makeTickPath(ce,0,_e),transFn:we,crisp:!1}),u.drawGrid(j,ce,{vals:Te,layer:J["radial-grid"],path:be,transFn:v.noop,crisp:!1}),u.drawLabels(j,ce,{vals:me,layer:J["radial-axis"],transFn:we,labelFns:u.makeLabelFns(ce,fe)})}var Me=Q.radialAxisAngle=Q.vangles?Z(te(V(oe.angle),Q.vangles)):oe.angle,Ie=n(ne,se),ze=Ie+e(-Me);D(J["radial-axis"],ge&&(oe.showticklabels||oe.ticks),{transform:ze}),D(J["radial-grid"],ge&&oe.showgrid,{transform:xe?"":Ie}),D(J["radial-line"].select("line"),ge&&oe.showline,{x1:xe?-K:re,y1:0,x2:K,y2:0,transform:ze}).attr("stroke-width",oe.linewidth).call(t.stroke,oe.linecolor)},G.updateRadialAxisTitle=function(N,U,Q){if(!this.isSmith){var j=this.gd,J=this.radius,K=this.cx,re=this.cy,ne=this.getRadial(U),se=this.id+"title",oe=0;if(ne.title){var pe=a.bBox(this.layers["radial-axis"].node()).height,ce=ne.title.font.size,ge=ne.side;oe="top"===ge?ce:"counterclockwise"===ge?-(pe+.4*ce):pe+.8*ce}var xe=void 0!==Q?Q:this.radialAxisAngle,we=V(xe),be=Math.cos(we),Se=Math.sin(we),fe=K+J/2*be+oe*Se,me=re-J/2*Se+oe*be;this.layers["radial-axis-title"]=h.draw(j,se,{propContainer:ne,propName:this.id+".radialaxis.title",placeholder:B(j,"Click to enter radial axis title"),attributes:{x:fe,y:me,"text-anchor":"middle"},transform:{rotate:-xe}})}},G.updateAngularAxis=function(N,U){var Q=this,j=Q.gd,J=Q.layers,K=Q.radius,re=Q.innerRadius,ne=Q.cx,se=Q.cy,oe=Q.getAngular(U),pe=Q.angularAxis,ce=Q.isSmith;ce||(Q.fillViewInitialKey("angularaxis.rotation",oe.rotation),pe.setGeometry(),pe.setScale());var ge=ce?function(Ve){var Je=R(Q,P([0,Ve.x]));return Math.atan2(Je[0]-ne,Je[1]-se)-Math.PI/2}:function(Ve){return pe.t2g(Ve.x)};"linear"===pe.type&&"radians"===pe.thetaunit&&(pe.tick0=Z(pe.tick0),pe.dtick=Z(pe.dtick));var xe=function(Ve){return n(ne+K*Math.cos(Ve),se-K*Math.sin(Ve))},we=ce?function(Ve){var Je=R(Q,P([0,Ve.x]));return n(Je[0],Je[1])}:function(Ve){return xe(ge(Ve))},be=ce?function(Ve){var Je=R(Q,P([0,Ve.x])),De=Math.atan2(Je[0]-ne,Je[1]-se)-Math.PI/2;return n(Je[0],Je[1])+e(-Z(De))}:function(Ve){var Je=ge(Ve);return xe(Je)+e(-Z(Je))},Se=ce?function(Ve){return S(Q,Ve.x,0,1/0)}:function(Ve){var Je=ge(Ve),De=Math.cos(Je),Be=Math.sin(Je);return"M"+[ne+re*De,se-re*Be]+"L"+[ne+K*De,se-K*Be]},fe=u.makeLabelFns(pe,0).labelStandoff,me={xFn:function(Ve){var Je=ge(Ve);return Math.cos(Je)*fe},yFn:function(Ve){var Je=ge(Ve),De=Math.sin(Je)>0?.2:1;return-Math.sin(Je)*(fe+Ve.fontSize*De)+Math.abs(Math.cos(Je))*(Ve.fontSize*k)},anchorFn:function(Ve){var Je=ge(Ve),De=Math.cos(Je);return Math.abs(De)<.1?"middle":De>0?"start":"end"},heightFn:function(Ve,Je,De){var Be=ge(Ve);return-.5*(1+Math.sin(Be))*De}},Te=X(oe);Q.angularTickLayout!==Te&&(J["angular-axis"].selectAll("."+pe._id+"tick").remove(),Q.angularTickLayout=Te);var _e,Me=ce?[1/0].concat(pe.tickvals||[]).map(function(Ve){return u.tickText(pe,Ve,!0,!1)}):u.calcTicks(pe);if(ce&&(Me[0].text="\u221e",Me[0].fontSize*=1.75),"linear"===U.gridshape?(_e=Me.map(ge),v.angleDelta(_e[0],_e[1])<0&&(_e=_e.slice().reverse())):_e=null,Q.vangles=_e,"category"===pe.type&&(Me=Me.filter(function(Ve){return v.isAngleInsideSector(ge(Ve),Q.sectorInRad)})),pe.visible){var Ie="inside"===pe.ticks?-1:1;u.drawTicks(j,pe,{vals:Me,layer:J["angular-axis"],path:"M"+Ie*((pe.linewidth||1)/2)+",0h"+Ie*pe.ticklen,transFn:be,crisp:!1}),u.drawGrid(j,pe,{vals:Me,layer:J["angular-grid"],path:Se,transFn:v.noop,crisp:!1}),u.drawLabels(j,pe,{vals:Me,layer:J["angular-axis"],repositionOnUpdate:!0,transFn:we,labelFns:me})}D(J["angular-line"].select("path"),oe.showline,{d:Q.pathSubplot(),transform:n(ne,se)}).attr("stroke-width",oe.linewidth).call(t.stroke,oe.linecolor)},G.updateFx=function(N,U){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(N),this.updateRadialDrag(N,U,0),this.updateRadialDrag(N,U,1)),this.updateHoverAndMainDrag(N))},G.updateHoverAndMainDrag=function(N){var U,Q,j=this,J=j.isSmith,K=j.gd,ne=N._zoomlayer,se=L.MINZOOM,oe=L.OFFEDGE,pe=j.radius,ce=j.innerRadius,ge=j.cx,xe=j.cy,we=j.cxx,be=j.cyy,Se=j.sectorInRad,fe=j.vangles,me=j.radialAxis,Te=M.clampTiny,_e=M.findXYatLength,Me=M.findEnclosingVertexAngles,Ie=L.cornerHalfWidth,ze=L.cornerLen/2,Ve=c.makeDragger(j.layers,"path","maindrag","crosshair");p.select(Ve).attr("d",j.pathSubplot()).attr("transform",n(ge,xe)),Ve.onmousemove=function(at){g.hover(K,at,j.id),K._fullLayout._lasthover=Ve,K._fullLayout._hoversubplot=j.id},Ve.onmouseout=function(at){K._dragging||f.unhover(K,at)};var Je,De,Be,Ze,Ye,tt,st,vt,Pt,Mt={element:Ve,gd:K,subplot:j.id,plotinfo:{id:j.id,xaxis:j.xaxis,yaxis:j.yaxis},xaxes:[j.xaxis],yaxes:[j.yaxis]};function rt(at,pt){return Math.sqrt(at*at+pt*pt)}function et(at,pt){return rt(at-we,pt-be)}function bt(at,pt){return Math.atan2(be-pt,at-we)}function Rt(at,pt){return[at*Math.cos(pt),at*Math.sin(-pt)]}function Yt(at,pt){if(0===at)return j.pathSector(2*Ie);var ut=ze/at,St=pt-ut,ot=pt+ut,Et=Math.max(0,Math.min(at,pe)),Lt=Et-Ie,Qe=Et+Ie;return"M"+Rt(Lt,St)+"A"+[Lt,Lt]+" 0,0,0 "+Rt(Lt,ot)+"L"+Rt(Qe,ot)+"A"+[Qe,Qe]+" 0,0,1 "+Rt(Qe,St)+"Z"}function Fe(at,pt,ut){if(0===at)return j.pathSector(2*Ie);var St,ot,Et=Rt(at,pt),Lt=Rt(at,ut),Qe=Te((Et[0]+Lt[0])/2),mt=Te((Et[1]+Lt[1])/2);if(Qe&&mt){var It=mt/Qe,jt=-1/It,Zt=_e(Ie,It,Qe,mt);St=_e(ze,jt,Zt[0][0],Zt[0][1]),ot=_e(ze,jt,Zt[1][0],Zt[1][1])}else{var Re,lt;mt?(Re=ze,lt=Ie):(Re=Ie,lt=ze),St=[[Qe-Re,mt-lt],[Qe+Re,mt-lt]],ot=[[Qe-Re,mt+lt],[Qe+Re,mt+lt]]}return"M"+St.join("L")+"L"+ot.reverse().join("L")+"Z"}function He(at,pt){return pt=Math.max(Math.min(pt,pe),ce),at<oe?at=0:pe-at<oe?at=pe:pt<oe?pt=0:pe-pt<oe&&(pt=pe),Math.abs(pt-at)>se?(at<pt?(Be=at,Ze=pt):(Be=pt,Ze=at),!0):(Be=null,Ze=null,!1)}function Oe(at,pt){pt=pt||"M0,0Z",vt.attr("d",at=at||Ye),Pt.attr("d",pt),c.transitionZoombox(vt,Pt,tt,st),tt=!0;var ut={};Ce(ut),K.emit("plotly_relayouting",ut)}function $e(at,pt){var ut,St,ot=Je+(at*=U),Et=De+(pt*=Q),Lt=et(Je,De),Qe=Math.min(et(ot,Et),pe),mt=bt(Je,De);He(Lt,Qe)&&(ut=Ye+j.pathSector(Ze),Be&&(ut+=j.pathSector(Be)),St=Yt(Be,mt)+Yt(Ze,mt)),Oe(ut,St)}function ke(at,pt,ut,St){var ot=M.findIntersectionXY(ut,St,ut,[at-we,be-pt]);return rt(ot[0],ot[1])}function Le(at,pt){var ut,St,ot=Je+at,Et=De+pt,Lt=bt(Je,De),Qe=bt(ot,Et),mt=Me(Lt,fe),It=Me(Qe,fe);He(ke(Je,De,mt[0],mt[1]),Math.min(ke(ot,Et,It[0],It[1]),pe))&&(ut=Ye+j.pathSector(Ze),Be&&(ut+=j.pathSector(Be)),St=[Fe(Be,mt[0],mt[1]),Fe(Ze,mt[0],mt[1])].join(" ")),Oe(ut,St)}function Pe(){if(c.removeZoombox(K),null!==Be&&null!==Ze){var at={};Ce(at),c.showDoubleClickNotifier(K),b.call("_guiRelayout",K,at)}}function Ce(at){var pt=me._rl,ut=(pt[1]-pt[0])/(1-ce/pe)/pe;at[j.id+".radialaxis.range"]=[pt[0]+(Be-ce)*ut,pt[0]+(Ze-ce)*ut]}function Xe(at,pt){var ut=K._fullLayout.clickmode;if(c.removeZoombox(K),2===at){var St={};for(var ot in j.viewInitial)St[j.id+"."+ot]=j.viewInitial[ot];K.emit("plotly_doubleclick",null),b.call("_guiRelayout",K,St)}ut.indexOf("select")>-1&&1===at&&x(pt,K,[j.xaxis],[j.yaxis],j.id,Mt),ut.indexOf("event")>-1&&g.click(K,pt,j.id)}Mt.prepFn=function(at,pt,ut){var St=K._fullLayout.dragmode,ot=Ve.getBoundingClientRect();K._fullLayout._calcInverseTransform(K),U=K._fullLayout._invScaleX,Q=K._fullLayout._invScaleY;var Lt=v.apply3DTransform(K._fullLayout._invTransform)(pt-ot.left,ut-ot.top);if(Je=Lt[0],De=Lt[1],fe){var Qe=M.findPolygonOffset(pe,Se[0],Se[1],fe);Je+=we+Qe[0],De+=be+Qe[1]}switch(St){case"zoom":Mt.clickFn=Xe,J||(Mt.moveFn=fe?Le:$e,Mt.doneFn=Pe,Be=null,Ze=null,Ye=j.pathSubplot(),tt=!1,st=m(K._fullLayout[j.id].bgcolor).getLuminance(),(vt=c.makeZoombox(ne,st,ge,xe,Ye)).attr("fill-rule","evenodd"),Pt=c.makeCorners(ne,ge,xe),d(K));break;case"select":case"lasso":o(at,pt,ut,Mt,St)}},f.init(Mt)},G.updateRadialDrag=function(N,U,Q){var j=this,J=j.gd,K=j.layers,re=j.radius,ne=j.innerRadius,se=j.cx,oe=j.cy,pe=j.radialAxis,ce=L.radialDragBoxSize,ge=ce/2;if(pe.visible){var xe,we,be,Se=V(j.radialAxisAngle),fe=pe._rl,me=fe[0],Te=fe[1],_e=fe[Q],Me=.75*(fe[1]-fe[0])/(1-j.getHole(U))/re;Q?(xe=se+(re+ge)*Math.cos(Se),we=oe-(re+ge)*Math.sin(Se),be="radialdrag"):(xe=se+(ne-ge)*Math.cos(Se),we=oe-(ne-ge)*Math.sin(Se),be="radialdrag-inner");var Ie,ze,Ve,Je=c.makeRectDragger(K,be,"crosshair",-ge,-ge,ce,ce),De={element:Je,gd:J};D(p.select(Je),pe.visible&&ne<re,{transform:n(xe,we)}),De.prepFn=function(){Ie=null,ze=null,Ve=null,De.moveFn=Be,De.doneFn=Ze,d(J)},De.clampFn=function(st,vt){return Math.sqrt(st*st+vt*vt)<L.MINDRAG&&(st=0,vt=0),[st,vt]},f.init(De)}function Be(st,vt){if(Ie)Ie(st,vt);else{var Pt=[st,-vt],Mt=[Math.cos(Se),Math.sin(Se)],rt=Math.abs(v.dot(Pt,Mt)/Math.sqrt(v.dot(Pt,Pt)));isNaN(rt)||(Ie=rt<.5?Ye:tt)}var bt,et={};bt=et,null!==ze?bt[j.id+".radialaxis.angle"]=ze:null!==Ve&&(bt[j.id+".radialaxis.range["+Q+"]"]=Ve),J.emit("plotly_relayouting",et)}function Ze(){null!==ze?b.call("_guiRelayout",J,j.id+".radialaxis.angle",ze):null!==Ve&&b.call("_guiRelayout",J,j.id+".radialaxis.range["+Q+"]",Ve)}function Ye(st,vt){if(0!==Q){ze=Math.atan2(oe-(we+vt),xe+st-se),j.vangles&&(ze=te(ze,j.vangles)),ze=Z(ze);var rt=n(se,oe)+e(-ze);K["radial-axis"].attr("transform",rt),K["radial-line"].select("line").attr("transform",rt);var et=j.gd._fullLayout;j.updateRadialAxisTitle(et,et[j.id],ze)}}function tt(st,vt){var Pt=v.dot([st,-vt],[Math.cos(Se),Math.sin(Se)]);if(Ve=_e-Me*Pt,Me>0==(Q?Ve>me:Ve<Te)){var Mt=J._fullLayout,rt=Mt[j.id];pe.range[Q]=Ve,pe._rl[Q]=Ve,j.updateRadialAxis(Mt,rt),j.xaxis.setRange(),j.xaxis.setScale(),j.yaxis.setRange(),j.yaxis.setScale();var et=!1;for(var bt in j.traceHash){var Rt=j.traceHash[bt],Yt=v.filterVisible(Rt);Rt[0][0].trace._module.plot(J,j,Yt,rt),b.traceIs(bt,"gl")&&Yt.length&&(et=!0)}et&&(_(J),T(J))}else Ve=null}},G.updateAngularDrag=function(N){var U=this,Q=U.gd,j=U.layers,J=U.radius,K=U.angularAxis,re=U.cx,ne=U.cy,se=U.cxx,oe=U.cyy,pe=L.angularDragBoxSize,ce=c.makeDragger(j,"path","angulardrag","move"),ge={element:ce,gd:Q};function xe(De,Be){return Math.atan2(oe+pe-Be,De-se-pe)}p.select(ce).attr("d",U.pathAnnulus(J,J+pe)).attr("transform",n(re,ne)).call(w,"move");var we,be,Se,fe,me,Te,_e=j.frontplot.select(".scatterlayer").selectAll(".trace"),Me=_e.selectAll(".point"),Ie=_e.selectAll(".textpoint");function ze(De,Be){var Ze=U.gd._fullLayout,Ye=Ze[U.id],tt=xe(we+De*N._invScaleX,be+Be*N._invScaleY),st=Z(tt-Te);if(fe=Se+st,j.frontplot.attr("transform",n(U.xOffset2,U.yOffset2)+e([-st,se,oe])),U.vangles){me=U.radialAxisAngle+st;var vt=n(re,ne)+e(-st),Pt=n(re,ne)+e(-me);j.bg.attr("transform",vt),j["radial-grid"].attr("transform",vt),j["radial-axis"].attr("transform",Pt),j["radial-line"].select("line").attr("transform",Pt),U.updateRadialAxisTitle(Ze,Ye,me)}else U.clipPaths.forTraces.select("path").attr("transform",n(se,oe)+e(st));Me.each(function(){var Yt=p.select(this),Fe=a.getTranslate(Yt);Yt.attr("transform",n(Fe.x,Fe.y)+e([st]))}),Ie.each(function(){var Yt=p.select(this),Fe=Yt.select("text"),He=a.getTranslate(Yt);Yt.attr("transform",e([st,Fe.attr("x"),Fe.attr("y")])+n(He.x,He.y))}),K.rotation=v.modHalf(fe,360),U.updateAngularAxis(Ze,Ye),U._hasClipOnAxisFalse&&!v.isFullCircle(U.sectorInRad)&&_e.call(a.hideOutsideRangePoints,U);var Mt=!1;for(var rt in U.traceHash)if(b.traceIs(rt,"gl")){var et=U.traceHash[rt],bt=v.filterVisible(et);et[0][0].trace._module.plot(Q,U,bt,Ye),bt.length&&(Mt=!0)}Mt&&(_(Q),T(Q));var Rt={};Ve(Rt),Q.emit("plotly_relayouting",Rt)}function Ve(De){De[U.id+".angularaxis.rotation"]=fe,U.vangles&&(De[U.id+".radialaxis.angle"]=me)}function Je(){Ie.select("text").attr("transform",null);var De={};Ve(De),b.call("_guiRelayout",Q,De)}ge.prepFn=function(De,Be,Ze){Se=N[U.id].angularaxis.rotation;var tt=ce.getBoundingClientRect();we=Be-tt.left,be=Ze-tt.top,Q._fullLayout._calcInverseTransform(Q);var st=v.apply3DTransform(N._invTransform)(we,be);Te=xe(we=st[0],be=st[1]),ge.moveFn=ze,ge.doneFn=Je,d(Q)},U.vangles&&!v.isFullCircle(U.sectorInRad)&&(ge.prepFn=v.noop,w(p.select(ce),null)),f.init(ge)},G.isPtInside=function(N){if(this.isSmith)return!0;var U=this.sectorInRad,Q=this.vangles,j=this.angularAxis.c2g(N.theta),J=this.radialAxis,K=J.c2l(N.r);return(Q?M.isPtInsidePolygon:v.isPtInsideSector)(K,j,J._rl,U,Q)},G.pathArc=function(N){var U=this.sectorInRad,Q=this.vangles;return(Q?M.pathPolygon:v.pathArc)(N,U[0],U[1],Q)},G.pathSector=function(N){var U=this.sectorInRad,Q=this.vangles;return(Q?M.pathPolygon:v.pathSector)(N,U[0],U[1],Q)},G.pathAnnulus=function(N,U){var Q=this.sectorInRad,j=this.vangles;return(j?M.pathPolygonAnnulus:v.pathAnnulus)(N,U,Q[0],Q[1],j)},G.pathSubplot=function(){var N=this.innerRadius,U=this.radius;return N?this.pathAnnulus(N,U):this.pathSector(U)},G.fillViewInitialKey=function(N,U){N in this.viewInitial||(this.viewInitial[N]=U)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../cartesian/set_convert"),b=p.deg2rad,v=p.rad2deg;$.exports=function(e,n,t){switch(m(e,t),e._id){case"x":case"radialaxis":u=n._subplot,(a=e).setGeometry=function(){var s=a._rl[0],i=a._rl[1],l=u.innerRadius,c=(u.radius-l)/(i-s),f=l/c,g=s>i?function(h){return h<=0}:function(h){return h>=0};a.c2g=function(h){var o=a.c2l(h)-s;return(g(o)?o:0)+f},a.g2c=function(h){return a.l2c(h+s-f)},a.g2p=function(h){return h*c},a.c2p=function(h){return a.g2p(a.c2g(h))}};break;case"angularaxis":!function(a,r){var u=a.type;if("linear"===u){var s=a.d2c,i=a.c2d;a.d2c=function(l,c){return f=s(l),"degrees"===c?b(f):f;var f},a.c2d=function(l,c){return i((f=l,"degrees"===c?v(f):f));var f}}a.makeCalcdata=function(l,c){var f,g,h=l[c],o=l._length,x=function(k){return a.d2c(k,l.thetaunit)};if(h){if(p.isTypedArray(h)&&"linear"===u){if(o===h.length)return h;if(h.subarray)return h.subarray(0,o)}for(f=new Array(o),g=0;g<o;g++)f[g]=x(h[g])}else{var d=c+"0",w="d"+c,_=d in l?x(l[d]):0,T=l[w]?x(l[w]):(a.period||2*Math.PI)/o;for(f=new Array(o),g=0;g<o;g++)f[g]=_+g*T}return f},a.setGeometry=function(){var l,c,f,g,h=r.sector,o=h.map(b),x={clockwise:-1,counterclockwise:1}[a.direction],d=b(a.rotation),w=function(L){return x*L+d},_=function(L){return(L-d)/x};switch(u){case"linear":c=l=p.identity,g=b,f=v,a.range=p.isFullCircle(o)?[h[0],h[0]+360]:o.map(_).map(v);break;case"category":var T=a._categories.length,k=a.period?Math.max(a.period,T):T;0===k&&(k=1),c=g=function(L){return 2*L*Math.PI/k},l=f=function(L){return L*k/Math.PI/2},a.range=[0,k]}a.c2g=function(L){return w(c(L))},a.g2c=function(L){return l(_(L))},a.t2g=function(L){return w(g(L))},a.g2t=function(L){return f(_(L))}}}(e,n)}var a,u}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(y,$,ee){"use strict";$.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(y,$,ee){"use strict";function p(e){return e<0?-1:e>0?1:0}function m(e){var n=e[0],t=e[1];if(!isFinite(n)||!isFinite(t))return[1,0];var a=(n+1)*(n+1)+t*t;return[(n*n+t*t-1)/a,2*t/a]}function b(e,n){return[n[0]*e.radius+e.cx,-n[1]*e.radius+e.cy]}function v(e,n){return n*e.radius}$.exports={smith:m,reactanceArc:function(e,n,t,a){var r=b(e,m([t,n])),u=r[0],s=r[1],i=b(e,m([a,n])),l=i[0],c=i[1];if(0===n)return["M"+u+","+s,"L"+l+","+c].join(" ");var f=v(e,1/Math.abs(n));return["M"+u+","+s,"A"+f+","+f+" 0 0,"+(n<0?1:0)+" "+l+","+c].join(" ")},resistanceArc:function(e,n,t,a){var r=v(e,1/(n+1)),u=b(e,m([n,t])),s=u[0],i=u[1],l=b(e,m([n,a])),c=l[0],f=l[1];if(p(t)!==p(a)){var g=b(e,m([n,0]));return["M"+s+","+i,"A"+r+","+r+" 0 0,"+(0<t?0:1)+" "+g[0]+","+g[1],"A"+r+","+r+" 0 0,"+(a<0?0:1)+c+","+f].join(" ")}return["M"+s+","+i,"A"+r+","+r+" 0 0,"+(a<t?0:1)+" "+c+","+f].join(" ")},smithTransform:b}},{}],629:[function(y,$,ee){"use strict";var p=y("../get_data").getSubplotCalcData,m=y("../../lib").counterRegex,b=y("../polar/polar"),v=y("./constants"),e=v.attr,n=v.name,t=m(n),a={};a[e]={valType:"subplotid",dflt:n,editType:"calc"},$.exports={attr:e,name:n,idRoot:n,idRegex:t,attrRegex:t,attributes:a,layoutAttributes:y("./layout_attributes"),supplyLayoutDefaults:y("./layout_defaults"),plot:function(r){for(var u=r._fullLayout,s=r.calcdata,i=u._subplots[n],l=0;l<i.length;l++){var c=i[l],f=p(s,n,c),g=u[c]._subplot;g||(g=b(r,c,!0),u[c]._subplot=g),g.plot(f,u,r._promises)}},clean:function(r,u,s,i){for(var l=i._subplots[n]||[],c=0;c<l.length;c++){var f=l[c],g=i[f]._subplot;if(!u[f]&&g)for(var h in g.framework.remove(),g.clipPaths)g.clipPaths[h].remove()}},toSVG:y("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(y,$,ee){"use strict";var p=y("../../components/color/attributes"),m=y("../cartesian/layout_attributes"),b=y("../domain").attributes,v=y("../../lib").extendFlat,e=y("../../plot_api/edit_types").overrideAll,n=e({color:m.color,showline:v({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:v({},m.showgrid,{dflt:!0}),gridcolor:m.gridcolor,gridwidth:m.gridwidth},"plot","from-root"),t=e({ticklen:m.ticklen,tickwidth:v({},m.tickwidth,{dflt:2}),tickcolor:m.tickcolor,showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,tickfont:m.tickfont,tickformat:m.tickformat,hoverformat:m.hoverformat,layer:m.layer},"plot","from-root"),a=v({visible:v({},m.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:v({},m.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},n,t),r=v({visible:v({},m.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:m.ticks,editType:"calc"},n,t);$.exports={domain:b({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:p.background},realaxis:a,imaginaryaxis:r,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(y,$,ee){"use strict";var p,m,b,v=y("../../lib"),e=y("../../components/color"),n=y("../../plot_api/plot_template"),t=y("../subplot_defaults"),a=y("../get_data").getSubplotData,r=y("../cartesian/prefix_suffix_defaults"),u=y("../cartesian/tick_label_defaults"),s=y("../cartesian/line_grid_defaults"),i=y("../cartesian/set_convert"),l=y("./layout_attributes"),c=y("./constants"),f=c.axisNames,g=(p=function(o){return o.slice().reverse().map(function(x){return-x}).concat([0]).concat(o)},m=String,b={},function(o){var x=m?m(o):o;if(x in b)return b[x];var d=p(o);return b[x]=d,d});function h(o,x,d,w){var _=d("bgcolor");w.bgColor=e.combine(_,w.paper_bgcolor);var T,k=a(w.fullData,c.name,w.id),L=w.layoutOut;function M(G,X){return d(T+"."+G,X)}for(var O=0;O<f.length;O++){v.isPlainObject(o[T=f[O]])||(o[T]={});var P=o[T],S=n.newContainer(x,T);S._id=S._name=T,S._attr=w.id+"."+T,S._traceIndices=k.map(function(G){return G._expandedIndex});var E=M("visible");if(S.type="linear",i(S,L),r(P,S,M,S.type),E){var R,B,H,V,Z="realaxis"===T;Z&&M("side"),Z?M("tickvals"):M("tickvals",g(x.realaxis.tickvals||l.realaxis.tickvals.dflt));var W=w.font||{};E&&(B=(R=M("color"))===P.color?R:W.color,H=W.size,V=W.family),u(P,S,M,S.type,{noAng:!Z,noExp:!0,font:{color:B,size:H,family:V}}),v.coerce2(o,x,l,T+".ticklen"),v.coerce2(o,x,l,T+".tickwidth"),v.coerce2(o,x,l,T+".tickcolor",x.color),M("ticks")||(delete x[T].ticklen,delete x[T].tickwidth,delete x[T].tickcolor),s(P,S,M,{dfltColor:R,bgColor:w.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l[T]}),M("layer")}M("hoverformat"),delete S.type,S._input=P}}$.exports=function(o,x,d){t(o,x,d,{noUirevision:!0,type:c.name,attributes:l,handleDefaults:h,font:x.font,paper_bgcolor:x.paper_bgcolor,fullData:d,layoutOut:x})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(y,$,ee){"use strict";var p=y("../lib"),m=y("../plot_api/plot_template"),b=y("./domain").defaults;$.exports=function(v,e,n,t){var a,r,s=t.attributes,i=t.handleDefaults,l=t.partition||"x",c=e._subplots[t.type],f=c.length,g=f&&c[0].replace(/\d+$/,"");function h(w,_){return p.coerce(a,r,s,w,_)}for(var o=0;o<f;o++){var x=c[o];a=v[x]?v[x]:v[x]={},r=m.newContainer(e,x,g),t.noUirevision||h("uirevision",e.uirevision);var d={};d[l]=[o/f,(o+1)/f],b(r,e,h,d),t.id=x,i(a,r,h,t)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(y,$,ee){"use strict";function m(b){var v=b.description?" "+b.description:"",e=b.keys||[];if(e.length>0){for(var n=[],t=0;t<e.length;t++)n[t]="`"+e[t]+"`";v+="Finally, the template string has access to ",v=1===e.length?"variable "+n[0]:"variables "+n.slice(0,-1).join(", ")+" and "+n.slice(-1)+"."}return v}y("../constants/docs"),ee.hovertemplateAttrs=function(b,v){b=b||{},m(v=v||{});var e={valType:"string",dflt:"",editType:b.editType||"none"};return!1!==b.arrayOk&&(e.arrayOk=!0),e},ee.texttemplateAttrs=function(b,v){b=b||{},m(v=v||{});var e={valType:"string",dflt:"",editType:b.editType||"calc"};return!1!==b.arrayOk&&(e.arrayOk=!0),e}},{"../constants/docs":474}],634:[function(y,$,ee){"use strict";var p=y("./ternary"),m=y("../../plots/get_data").getSubplotCalcData,b=y("../../lib").counterRegex;ee.name="ternary";var v=ee.attr="subplot";ee.idRoot="ternary",ee.idRegex=ee.attrRegex=b("ternary"),(ee.attributes={})[v]={valType:"subplotid",dflt:"ternary",editType:"calc"},ee.layoutAttributes=y("./layout_attributes"),ee.supplyLayoutDefaults=y("./layout_defaults"),ee.plot=function(e){for(var n=e._fullLayout,t=e.calcdata,a=n._subplots.ternary,r=0;r<a.length;r++){var u=a[r],s=m(t,"ternary",u),i=n[u]._subplot;i||(i=new p({id:u,graphDiv:e,container:n._ternarylayer.node()},n),n[u]._subplot=i),i.plot(s,n,e._promises)}},ee.clean=function(e,n,t,a){for(var r=a._subplots.ternary||[],u=0;u<r.length;u++){var s=r[u],i=a[s]._subplot;!n[s]&&i&&(i.plotContainer.remove(),i.clipDef.remove(),i.clipDefRelative.remove(),i.layers["a-title"].remove(),i.layers["b-title"].remove(),i.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(y,$,ee){"use strict";var p=y("../../components/color/attributes"),m=y("../domain").attributes,b=y("../cartesian/layout_attributes"),v=y("../../plot_api/edit_types").overrideAll,e=y("../../lib/extend").extendFlat,n={title:{text:b.title.text,font:b.title.font},color:b.color,tickmode:b.tickmode,nticks:e({},b.nticks,{dflt:6,min:1}),tick0:b.tick0,dtick:b.dtick,tickvals:b.tickvals,ticktext:b.ticktext,ticks:b.ticks,ticklen:b.ticklen,tickwidth:b.tickwidth,tickcolor:b.tickcolor,showticklabels:b.showticklabels,showtickprefix:b.showtickprefix,tickprefix:b.tickprefix,showticksuffix:b.showticksuffix,ticksuffix:b.ticksuffix,showexponent:b.showexponent,exponentformat:b.exponentformat,minexponent:b.minexponent,separatethousands:b.separatethousands,tickfont:b.tickfont,tickangle:b.tickangle,tickformat:b.tickformat,tickformatstops:b.tickformatstops,hoverformat:b.hoverformat,showline:e({},b.showline,{dflt:!0}),linecolor:b.linecolor,linewidth:b.linewidth,showgrid:e({},b.showgrid,{dflt:!0}),gridcolor:b.gridcolor,gridwidth:b.gridwidth,layer:b.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:b._deprecated.title,titlefont:b._deprecated.titlefont}},t=$.exports=v({domain:m({name:"ternary"}),bgcolor:{valType:"color",dflt:p.background},sum:{valType:"number",dflt:1,min:0},aaxis:n,baxis:n,caxis:n},"plot","from-root");t.uirevision={valType:"any",editType:"none"},t.aaxis.uirevision=t.baxis.uirevision=t.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(y,$,ee){"use strict";var p=y("../../components/color"),m=y("../../plot_api/plot_template"),b=y("../../lib"),v=y("../subplot_defaults"),e=y("../cartesian/tick_label_defaults"),n=y("../cartesian/prefix_suffix_defaults"),t=y("../cartesian/tick_mark_defaults"),a=y("../cartesian/tick_value_defaults"),r=y("../cartesian/line_grid_defaults"),u=y("./layout_attributes"),s=["aaxis","baxis","caxis"];function i(c,f,g,h){var o,x,d,w=g("bgcolor"),_=g("sum");h.bgColor=p.combine(w,h.paper_bgcolor);for(var T=0;T<s.length;T++)x=c[o=s[T]]||{},(d=m.newContainer(f,o))._name=o,l(x,d,h,f);var k=f.aaxis,L=f.baxis,M=f.caxis;k.min+L.min+M.min>=_&&(k.min=0,L.min=0,M.min=0,c.aaxis&&delete c.aaxis.min,c.baxis&&delete c.baxis.min,c.caxis&&delete c.caxis.min)}function l(c,f,g,h){var o=u[f._name];function x(L,M){return b.coerce(c,f,o,L,M)}x("uirevision",h.uirevision),f.type="linear";var d=x("color"),w=d!==o.color.dflt?d:g.font.color,_=f._name.charAt(0).toUpperCase(),T="Component "+_,k=x("title.text",T);f._hovertitle=k===T?k:_,b.coerceFont(x,"title.font",{family:g.font.family,size:b.bigFont(g.font.size),color:w}),x("min"),a(c,f,x,"linear"),n(c,f,x,"linear"),e(c,f,x,"linear"),t(c,f,x,{outerTicks:!0}),x("showticklabels")&&(b.coerceFont(x,"tickfont",{family:g.font.family,size:g.font.size,color:w}),x("tickangle"),x("tickformat")),r(c,f,x,{dfltColor:d,bgColor:g.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:o}),x("hoverformat"),x("layer")}$.exports=function(c,f,g){v(c,f,g,{type:"ternary",attributes:u,handleDefaults:i,font:f.font,paper_bgcolor:f.paper_bgcolor})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("tinycolor2"),b=y("../../registry"),v=y("../../lib"),e=v.strTranslate,n=v._,t=y("../../components/color"),a=y("../../components/drawing"),r=y("../cartesian/set_convert"),u=y("../../lib/extend").extendFlat,s=y("../plots"),i=y("../cartesian/axes"),l=y("../../components/dragelement"),c=y("../../components/fx"),f=y("../../components/dragelement/helpers"),g=f.freeMode,h=f.rectMode,o=y("../../components/titles"),x=y("../cartesian/select").prepSelect,d=y("../cartesian/select").selectOnClick,w=y("../cartesian/select").clearSelect,_=y("../cartesian/select").clearSelectionsCache,T=y("../cartesian/constants");function k(H,V){this.id=H.id,this.graphDiv=H.graphDiv,this.init(V),this.makeFramework(V),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}$.exports=k;var L=k.prototype;L.init=function(H){this.container=H._ternarylayer,this.defs=H._defs,this.layoutId=H._uid,this.traceHash={},this.layers={}},L.plot=function(H,V){var Z=V[this.id],W=V._size;this._hasClipOnAxisFalse=!1;for(var G=0;G<H.length;G++)if(!1===H[G][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(Z),this.adjustLayout(Z,W),s.generalUpdatePerTraceModule(this.graphDiv,this,H,Z),this.layers.plotbg.select("path").call(t.fill,Z.bgcolor)},L.makeFramework=function(H){var V=this.graphDiv,Z=H[this.id],W=this.clipId="clip"+this.layoutId+this.id,G=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=v.ensureSingleById(H._clips,"clipPath",W,function(X){X.append("path").attr("d","M0,0Z")}),this.clipDefRelative=v.ensureSingleById(H._clips,"clipPath",G,function(X){X.append("path").attr("d","M0,0Z")}),this.plotContainer=v.ensureSingle(this.container,"g",this.id),this.updateLayers(Z),a.setClipUrl(this.layers.backplot,W,V),a.setClipUrl(this.layers.grids,W,V)},L.updateLayers=function(H){var V=this.layers,Z=["draglayer","plotbg","backplot","grids"];"below traces"===H.aaxis.layer&&Z.push("aaxis","aline"),"below traces"===H.baxis.layer&&Z.push("baxis","bline"),"below traces"===H.caxis.layer&&Z.push("caxis","cline"),Z.push("frontplot"),"above traces"===H.aaxis.layer&&Z.push("aaxis","aline"),"above traces"===H.baxis.layer&&Z.push("baxis","bline"),"above traces"===H.caxis.layer&&Z.push("caxis","cline");var W=this.plotContainer.selectAll("g.toplevel").data(Z,String),G=["agrid","bgrid","cgrid"];W.enter().append("g").attr("class",function(X){return"toplevel "+X}).each(function(X){var te=p.select(this);V[X]=te,"frontplot"===X?te.append("g").classed("scatterlayer",!0):"backplot"===X?te.append("g").classed("maplayer",!0):"plotbg"===X?te.append("path").attr("d","M0,0Z"):"aline"===X||"bline"===X||"cline"===X?te.append("path"):"grids"===X&&G.forEach(function(D){V[D]=te.append("g").classed("grid "+D,!0)})}),W.order()};var M=Math.sqrt(4/3);L.adjustLayout=function(H,V){var Z,W,G,X,te,D,N=this,U=H.domain,Q=(U.x[0]+U.x[1])/2,j=(U.y[0]+U.y[1])/2,J=U.x[1]-U.x[0],K=U.y[1]-U.y[0],re=J*V.w,ne=K*V.h,se=H.sum,oe=H.aaxis.min,pe=H.baxis.min,ce=H.caxis.min;re>M*ne?G=(X=ne)*M:X=(G=re)/M,te=J*G/re,D=K*X/ne,W=V.t+V.h*(1-j)-X/2,N.x0=Z=V.l+V.w*Q-G/2,N.y0=W,N.w=G,N.h=X,N.sum=se,N.xaxis={type:"linear",range:[oe+2*ce-se,se-oe-2*pe],domain:[Q-te/2,Q+te/2],_id:"x"},r(N.xaxis,N.graphDiv._fullLayout),N.xaxis.setScale(),N.xaxis.isPtWithinRange=function(Ie){return Ie.a>=N.aaxis.range[0]&&Ie.a<=N.aaxis.range[1]&&Ie.b>=N.baxis.range[1]&&Ie.b<=N.baxis.range[0]&&Ie.c>=N.caxis.range[1]&&Ie.c<=N.caxis.range[0]},N.yaxis={type:"linear",range:[oe,se-pe-ce],domain:[j-D/2,j+D/2],_id:"y"},r(N.yaxis,N.graphDiv._fullLayout),N.yaxis.setScale(),N.yaxis.isPtWithinRange=function(){return!0};var ge=N.yaxis.domain[0],xe=N.aaxis=u({},H.aaxis,{range:[oe,se-pe-ce],side:"left",tickangle:(+H.aaxis.tickangle||0)-30,domain:[ge,ge+D*M],anchor:"free",position:0,_id:"y",_length:G});r(xe,N.graphDiv._fullLayout),xe.setScale();var we=N.baxis=u({},H.baxis,{range:[se-oe-ce,pe],side:"bottom",domain:N.xaxis.domain,anchor:"free",position:0,_id:"x",_length:G});r(we,N.graphDiv._fullLayout),we.setScale();var be=N.caxis=u({},H.caxis,{range:[se-oe-pe,ce],side:"right",tickangle:(+H.caxis.tickangle||0)+30,domain:[ge,ge+D*M],anchor:"free",position:0,_id:"y",_length:G});r(be,N.graphDiv._fullLayout),be.setScale();var Se="M"+Z+","+(W+X)+"h"+G+"l-"+G/2+",-"+X+"Z";N.clipDef.select("path").attr("d",Se),N.layers.plotbg.select("path").attr("d",Se);var fe="M0,"+X+"h"+G+"l-"+G/2+",-"+X+"Z";N.clipDefRelative.select("path").attr("d",fe);var me=e(Z,W);N.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",me),N.clipDefRelative.select("path").attr("transform",null);var Te=e(Z-we._offset,W+X);N.layers.baxis.attr("transform",Te),N.layers.bgrid.attr("transform",Te);var _e=e(Z+G/2,W)+"rotate(30)"+e(0,-xe._offset);N.layers.aaxis.attr("transform",_e),N.layers.agrid.attr("transform",_e);var Me=e(Z+G/2,W)+"rotate(-30)"+e(0,-be._offset);N.layers.caxis.attr("transform",Me),N.layers.cgrid.attr("transform",Me),N.drawAxes(!0),N.layers.aline.select("path").attr("d",xe.showline?"M"+Z+","+(W+X)+"l"+G/2+",-"+X:"M0,0").call(t.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),N.layers.bline.select("path").attr("d",we.showline?"M"+Z+","+(W+X)+"h"+G:"M0,0").call(t.stroke,we.linecolor||"#000").style("stroke-width",(we.linewidth||0)+"px"),N.layers.cline.select("path").attr("d",be.showline?"M"+(Z+G/2)+","+W+"l"+G/2+","+X:"M0,0").call(t.stroke,be.linecolor||"#000").style("stroke-width",(be.linewidth||0)+"px"),N.graphDiv._context.staticPlot||N.initInteractions(),a.setClipUrl(N.layers.frontplot,N._hasClipOnAxisFalse?null:N.clipId,N.graphDiv)},L.drawAxes=function(H){var V=this.graphDiv,Z=this.id.substr(7)+"title",W=this.layers,G=this.aaxis,X=this.baxis,te=this.caxis;if(this.drawAx(G),this.drawAx(X),this.drawAx(te),H){var D=Math.max(G.showticklabels?G.tickfont.size/2:0,(te.showticklabels?.75*te.tickfont.size:0)+("outside"===te.ticks?.87*te.ticklen:0)),N=(X.showticklabels?X.tickfont.size:0)+("outside"===X.ticks?X.ticklen:0)+3;W["a-title"]=o.draw(V,"a"+Z,{propContainer:G,propName:this.id+".aaxis.title",placeholder:n(V,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-G.title.font.size/3-D,"text-anchor":"middle"}}),W["b-title"]=o.draw(V,"b"+Z,{propContainer:X,propName:this.id+".baxis.title",placeholder:n(V,"Click to enter Component B title"),attributes:{x:this.x0-N,y:this.y0+this.h+.83*X.title.font.size+N,"text-anchor":"middle"}}),W["c-title"]=o.draw(V,"c"+Z,{propContainer:te,propName:this.id+".caxis.title",placeholder:n(V,"Click to enter Component C title"),attributes:{x:this.x0+this.w+N,y:this.y0+this.h+.83*te.title.font.size+N,"text-anchor":"middle"}})}},L.drawAx=function(H){var V,Z=this.graphDiv,W=H._name,G=W.charAt(0),X=H._id,te=this.layers[W],D=G+"tickLayout",N=(V=H).ticks+String(V.ticklen)+String(V.showticklabels);this[D]!==N&&(te.selectAll("."+X+"tick").remove(),this[D]=N),H.setScale();var U=i.calcTicks(H),Q=i.clipEnds(H,U),j=i.makeTransTickFn(H),J=i.getTickSigns(H)[2],K=v.deg2rad(30),re=J*(H.linewidth||1)/2,ne=J*H.ticklen,se=this.w,oe=this.h,pe="b"===G?"M0,"+re+"l"+Math.sin(K)*ne+","+Math.cos(K)*ne:"M"+re+",0l"+Math.cos(K)*ne+","+-Math.sin(K)*ne,ce={a:"M0,0l"+oe+",-"+se/2,b:"M0,0l-"+se/2+",-"+oe,c:"M0,0l-"+oe+","+se/2}[G];i.drawTicks(Z,H,{vals:"inside"===H.ticks?Q:U,layer:te,path:pe,transFn:j,crisp:!1}),i.drawGrid(Z,H,{vals:Q,layer:this.layers[G+"grid"],path:ce,transFn:j,crisp:!1}),i.drawLabels(Z,H,{vals:U,layer:te,transFn:j,labelFns:i.makeLabelFns(H,0,30)})};var O=T.MINZOOM/2+.87,P="m-0.87,.5h"+O+"v3h-"+(O+5.2)+"l"+(O/2+2.6)+",-"+(.87*O+4.5)+"l2.6,1.5l-"+O/2+","+.87*O+"Z",S="m0.87,.5h-"+O+"v3h"+(O+5.2)+"l-"+(O/2+2.6)+",-"+(.87*O+4.5)+"l-2.6,1.5l"+O/2+","+.87*O+"Z",E="m0,1l"+O/2+","+.87*O+"l2.6,-1.5l-"+(O/2+2.6)+",-"+(.87*O+4.5)+"l-"+(O/2+2.6)+","+(.87*O+4.5)+"l2.6,1.5l"+O/2+",-"+.87*O+"Z",R=!0;function B(H){p.select(H).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}L.clearSelect=function(){_(this.dragOptions),w(this.dragOptions.gd)},L.initInteractions=function(){var H,V,Z,W,G,X,te,D,N,U,Q,j,J=this,K=J.layers.plotbg.select("path").node(),re=J.graphDiv,ne=re._fullLayout._zoomlayer;function se(fe){var me={};return me[J.id+".aaxis.min"]=fe.a,me[J.id+".baxis.min"]=fe.b,me[J.id+".caxis.min"]=fe.c,me}function oe(fe,me){var Te=re._fullLayout.clickmode;B(re),2===fe&&(re.emit("plotly_doubleclick",null),b.call("_guiRelayout",re,se({a:0,b:0,c:0}))),Te.indexOf("select")>-1&&1===fe&&d(me,re,[J.xaxis],[J.yaxis],J.id,J.dragOptions),Te.indexOf("event")>-1&&c.click(re,me,J.id)}function pe(fe,me){return 1-me/J.h}function ce(fe,me){return 1-(fe+(J.h-me)/Math.sqrt(3))/J.w}function ge(fe,me){return(fe-(J.h-me)/Math.sqrt(3))/J.w}function xe(fe,me){var Te=Z+fe*H,_e=W+me*V,Me=Math.max(0,Math.min(1,pe(0,W),pe(0,_e))),Ie=Math.max(0,Math.min(1,ce(Z,W),ce(Te,_e))),ze=Math.max(0,Math.min(1,ge(Z,W),ge(Te,_e))),Ve=(Me/2+ze)*J.w,Je=(1-Me/2-Ie)*J.w,De=(Ve+Je)/2,Be=Je-Ve,Ze=(1-Me)*J.h,Ye=Ze-Be/M;Be<T.MINZOOM?(te=G,Q.attr("d",N),j.attr("d","M0,0Z")):(te={a:G.a+Me*X,b:G.b+Ie*X,c:G.c+ze*X},Q.attr("d",N+"M"+Ve+","+Ze+"H"+Je+"L"+De+","+Ye+"L"+Ve+","+Ze+"Z"),j.attr("d","M"+Z+","+W+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Ve+","+Ze+P+"M"+Je+","+Ze+S+"M"+De+","+Ye+E)),U||(Q.transition().style("fill",D>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),j.transition().style("opacity",1).duration(200),U=!0),re.emit("plotly_relayouting",se(te))}function we(){B(re),te!==G&&(b.call("_guiRelayout",re,se(te)),R&&re.data&&re._context.showTips&&(v.notifier(n(re,"Double-click to zoom back out"),"long"),R=!1))}function be(fe,me){var Te=fe/J.xaxis._m,_e=me/J.yaxis._m,Me=[(te={a:G.a-_e,b:G.b+(Te+_e)/2,c:G.c-(Te-_e)/2}).a,te.b,te.c].sort(v.sorterAsc),Ie=Me.indexOf(te.a),ze=Me.indexOf(te.b),Ve=Me.indexOf(te.c);Me[0]<0&&(Me[1]+Me[0]/2<0?(Me[2]+=Me[0]+Me[1],Me[0]=Me[1]=0):(Me[2]+=Me[0]/2,Me[1]+=Me[0]/2,Me[0]=0),me=(G.a-(te={a:Me[Ie],b:Me[ze],c:Me[Ve]}).a)*J.yaxis._m,fe=(G.c-te.c-G.b+te.b)*J.xaxis._m);var Je=e(J.x0+fe,J.y0+me);J.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Je);var De=e(-fe,-me);J.clipDefRelative.select("path").attr("transform",De),J.aaxis.range=[te.a,J.sum-te.b-te.c],J.baxis.range=[J.sum-te.a-te.c,te.b],J.caxis.range=[J.sum-te.a-te.b,te.c],J.drawAxes(!1),J._hasClipOnAxisFalse&&J.plotContainer.select(".scatterlayer").selectAll(".trace").call(a.hideOutsideRangePoints,J),re.emit("plotly_relayouting",se(te))}function Se(){b.call("_guiRelayout",re,se(te))}this.dragOptions={element:K,gd:re,plotinfo:{id:J.id,domain:re._fullLayout[J.id].domain,xaxis:J.xaxis,yaxis:J.yaxis},subplot:J.id,prepFn:function(fe,me,Te){J.dragOptions.xaxes=[J.xaxis],J.dragOptions.yaxes=[J.yaxis],H=re._fullLayout._invScaleX,V=re._fullLayout._invScaleY;var _e=J.dragOptions.dragmode=re._fullLayout.dragmode;J.dragOptions.minDrag=g(_e)?1:void 0,"zoom"===_e?(J.dragOptions.moveFn=xe,J.dragOptions.clickFn=oe,J.dragOptions.doneFn=we,function(Me,Ie,ze){var Ve=K.getBoundingClientRect();Z=Ie-Ve.left,W=ze-Ve.top,re._fullLayout._calcInverseTransform(re);var De=v.apply3DTransform(re._fullLayout._invTransform)(Z,W);Z=De[0],W=De[1],te=G={a:J.aaxis.range[0],b:J.baxis.range[1],c:J.caxis.range[1]},X=J.aaxis.range[1]-G.a,D=m(J.graphDiv._fullLayout[J.id].bgcolor).getLuminance(),N="M0,"+J.h+"L"+J.w/2+", 0L"+J.w+","+J.h+"Z",U=!1,Q=ne.append("path").attr("class","zoombox").attr("transform",e(J.x0,J.y0)).style({fill:D>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",N),j=ne.append("path").attr("class","zoombox-corners").attr("transform",e(J.x0,J.y0)).style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),J.clearSelect(re)}(0,me,Te)):"pan"===_e?(J.dragOptions.moveFn=be,J.dragOptions.clickFn=oe,J.dragOptions.doneFn=Se,te=G={a:J.aaxis.range[0],b:J.baxis.range[1],c:J.caxis.range[1]},J.clearSelect(re)):(h(_e)||g(_e))&&x(fe,me,Te,J.dragOptions,_e)}},K.onmousemove=function(fe){c.hover(re,fe,J.id),re._fullLayout._lasthover=K,re._fullLayout._hoversubplot=J.id},K.onmouseout=function(fe){re._dragging||l.unhover(re,fe)},l.init(this.dragOptions)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(y,$,ee){"use strict";var p=y("./lib/loggers"),m=y("./lib/noop"),b=y("./lib/push_unique"),v=y("./lib/is_plain_object"),e=y("./lib/dom").addStyleRule,n=y("./lib/extend"),t=y("./plots/attributes"),a=y("./plots/layout_attributes"),r=n.extendFlat,u=n.extendDeepAll;function s(d){var w=d.name,_=d.categories,T=d.meta;if(ee.modules[w])p.log("Type "+w+" already registered");else{ee.subplotsRegistry[d.basePlotModule.name]||function(R){var B=R.name;if(ee.subplotsRegistry[B])p.log("Plot type "+B+" already registered.");else for(var H in f(R),ee.subplotsRegistry[B]=R,ee.componentsRegistry)o(H,R.name)}(d.basePlotModule);for(var k={},L=0;L<_.length;L++)k[_[L]]=!0,ee.allCategories[_[L]]=!0;for(var M in ee.modules[w]={_module:d,categories:k},T&&Object.keys(T).length&&(ee.modules[w].meta=T),ee.allTypes.push(w),ee.componentsRegistry)g(M,w);d.layoutAttributes&&r(ee.traceLayoutAttributes,d.layoutAttributes);var O=d.basePlotModule,P=O.name;if("mapbox"===P){var S=O.constants.styleRules;for(var E in S)e(".js-plotly-plot .plotly .mapboxgl-"+E,S[E])}"geo"!==P&&"mapbox"!==P||void 0===typeof window||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function i(d){if("string"!=typeof d.name)throw new Error("Component module *name* must be a string.");var w=d.name;for(var _ in ee.componentsRegistry[w]=d,d.layoutAttributes&&(d.layoutAttributes._isLinkedToArray&&b(ee.layoutArrayContainers,w),f(d)),ee.modules)g(w,_);for(var T in ee.subplotsRegistry)o(w,T);for(var k in ee.transformsRegistry)h(w,k);d.schema&&d.schema.layout&&u(a,d.schema.layout)}function l(d){if("string"!=typeof d.name)throw new Error("Transform module *name* must be a string.");var w="Transform module "+d.name,_="function"==typeof d.transform,T="function"==typeof d.calcTransform;if(!_&&!T)throw new Error(w+" is missing a *transform* or *calcTransform* method.");for(var k in _&&T&&p.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),v(d.attributes)||p.log(w+" registered without an *attributes* object."),"function"!=typeof d.supplyDefaults&&p.log(w+" registered without a *supplyDefaults* method."),ee.transformsRegistry[d.name]=d,ee.componentsRegistry)h(k,d.name)}function c(d){var w=d.name,_=w.split("-")[0],T=d.dictionary,k=d.format,L=T&&Object.keys(T).length,M=k&&Object.keys(k).length,O=ee.localeRegistry,P=O[w];if(P||(O[w]=P={}),_!==w){var S=O[_];S||(O[_]=S={}),L&&S.dictionary===P.dictionary&&(S.dictionary=T),M&&S.format===P.format&&(S.format=k)}L&&(P.dictionary=T),M&&(P.format=k)}function f(d){if(d.layoutAttributes){var w=d.layoutAttributes._arrayAttrRegexps;if(w)for(var _=0;_<w.length;_++)b(ee.layoutArrayRegexes,w[_])}}function g(d,w){var _=ee.componentsRegistry[d].schema;if(_&&_.traces){var T=_.traces[w];T&&u(ee.modules[w]._module.attributes,T)}}function h(d,w){var _=ee.componentsRegistry[d].schema;if(_&&_.transforms){var T=_.transforms[w];T&&u(ee.transformsRegistry[w].attributes,T)}}function o(d,w){var _=ee.componentsRegistry[d].schema;if(_&&_.subplots){var T=ee.subplotsRegistry[w],k=T.layoutAttributes,L="subplot"===T.attr?T.name:T.attr;Array.isArray(L)&&(L=L[0]);var M=_.subplots[L];k&&M&&u(k,M)}}function x(d){return"object"==typeof d&&(d=d.type),d}ee.modules={},ee.allCategories={},ee.allTypes=[],ee.subplotsRegistry={},ee.transformsRegistry={},ee.componentsRegistry={},ee.layoutArrayContainers=[],ee.layoutArrayRegexes=[],ee.traceLayoutAttributes={},ee.localeRegistry={},ee.apiMethodRegistry={},ee.collectableSubplotTypes=null,ee.register=function(d){if(ee.collectableSubplotTypes=null,!d)throw new Error("No argument passed to Plotly.register.");d&&!Array.isArray(d)&&(d=[d]);for(var w=0;w<d.length;w++){var _=d[w];if(!_)throw new Error("Invalid module was attempted to be registered!");switch(_.moduleType){case"trace":s(_);break;case"transform":l(_);break;case"component":i(_);break;case"locale":c(_);break;case"apiMethod":ee.apiMethodRegistry[_.name]=_.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},ee.getModule=function(d){var w=ee.modules[x(d)];return!!w&&w._module},ee.traceIs=function(d,w){if("various"===(d=x(d)))return!1;var _=ee.modules[d];return _||(d&&p.log("Unrecognized trace type "+d+"."),_=ee.modules[t.type.dflt]),!!_.categories[w]},ee.getTransformIndices=function(d,w){for(var _=[],T=d.transforms||[],k=0;k<T.length;k++)T[k].type===w&&_.push(k);return _},ee.hasTransform=function(d,w){for(var _=d.transforms||[],T=0;T<_.length;T++)if(_[T].type===w)return!0;return!1},ee.getComponentMethod=function(d,w){var _=ee.componentsRegistry[d];return _&&_[w]||m},ee.call=function(){var d=arguments[0],w=[].slice.call(arguments,1);return ee.apiMethodRegistry[d].apply(null,w)}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(y,$,ee){"use strict";var p=y("../registry"),m=y("../lib"),b=m.extendFlat,v=m.extendDeep;function e(n){var t;switch(n){case"themes__thumb":t={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}$.exports=function(n,t){var a,s=n.layout,i=v([],n.data),l=v({},s,e(t.tileClass)),c=n._context||{};if(t.width&&(l.width=t.width),t.height&&(l.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){l.annotations=[];var f=Object.keys(l);for(a=0;a<f.length;a++)["xaxis","yaxis","zaxis"].indexOf(f[a].slice(0,5))>-1&&(l[f[a]].title={text:""});for(a=0;a<i.length;a++){var g=i[a];g.showscale=!1,g.marker&&(g.marker.showscale=!1),p.traceIs(g,"pie-like")&&(g.textposition="none")}}if(Array.isArray(t.annotations))for(a=0;a<t.annotations.length;a++)l.annotations.push(t.annotations[a]);var h=Object.keys(l).filter(function(_){return _.match(/^scene\d*$/)});if(h.length){var o={};for("thumbnail"===t.tileClass&&(o={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),a=0;a<h.length;a++){var x=l[h[a]];x.xaxis||(x.xaxis={}),x.yaxis||(x.yaxis={}),x.zaxis||(x.zaxis={}),b(x.xaxis,o),b(x.yaxis,o),b(x.zaxis,o),x._scene=null}}var d=document.createElement("div");t.tileClass&&(d.className=t.tileClass);var w={gd:d,td:d,layout:l,data:i,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:c.mapboxAccessToken}};return"transparent"!==t.setBackground&&(w.config.setBackground=t.setBackground||"opaque"),w.gd.defaultLayout=e(t.tileClass),w}},{"../lib":503,"../registry":638}],640:[function(y,$,ee){"use strict";var p=y("../lib"),m=y("../plot_api/to_image"),b=y("./filesaver"),v=y("./helpers");$.exports=function(e,n){var t;return p.isPlainObject(e)||(t=p.getGraphDiv(e)),(n=n||{}).format=n.format||"png",n.width=n.width||null,n.height=n.height||null,n.imageDataOnly=!0,new Promise(function(a,r){t&&t._snapshotInProgress&&r(new Error("Snapshotting already in progress.")),p.isIE()&&"svg"!==n.format&&r(new Error(v.MSG_IE_BAD_FORMAT)),t&&(t._snapshotInProgress=!0);var u=m(e,n),s=n.filename||e.fn||"newplot";s+="."+n.format.replace("-","."),u.then(function(i){return t&&(t._snapshotInProgress=!1),b(i,s,n.format)}).then(function(i){a(i)}).catch(function(i){t&&(t._snapshotInProgress=!1),r(i)})})}},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(y,$,ee){"use strict";var p=y("../lib"),m=y("./helpers");$.exports=function(b,v,e){var n=document.createElement("a"),t="download"in n;return new Promise(function(a,r){var u,s;return p.isIE()?(u=m.createBlob(b,"svg"),window.navigator.msSaveBlob(u,v),u=null,a(v)):t?(u=m.createBlob(b,e),s=m.createObjectURL(u),n.href=s,n.download=v,document.body.appendChild(n),n.click(),document.body.removeChild(n),m.revokeObjectURL(s),u=null,a(v)):p.isSafari()?(m.octetStream(("svg"===e?",":";base64,")+encodeURIComponent(b)),a(v)):void r(new Error("download error"))})}},{"../lib":503,"./helpers":642}],642:[function(y,$,ee){"use strict";var p=y("../registry");ee.getDelay=function(b){return b._has&&(b._has("gl3d")||b._has("gl2d")||b._has("mapbox"))?500:0},ee.getRedrawFunc=function(b){return function(){p.getComponentMethod("colorbar","draw")(b)}},ee.encodeSVG=function(b){return"data:image/svg+xml,"+encodeURIComponent(b)},ee.encodeJSON=function(b){return"data:application/json,"+encodeURIComponent(b)};var m=window.URL||window.webkitURL;ee.createObjectURL=function(b){return m.createObjectURL(b)},ee.revokeObjectURL=function(b){return m.revokeObjectURL(b)},ee.createBlob=function(b,v){if("svg"===v)return new window.Blob([b],{type:"image/svg+xml;charset=utf-8"});if("full-json"===v)return new window.Blob([b],{type:"application/json;charset=utf-8"});var e=function(n){for(var t=n.length,a=new ArrayBuffer(t),r=new Uint8Array(a),u=0;u<t;u++)r[u]=n.charCodeAt(u);return a}(window.atob(b));return new window.Blob([e],{type:"image/"+v})},ee.octetStream=function(b){document.location.href="data:application/octet-stream"+b},ee.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,ee.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(y,$,ee){"use strict";var p=y("./helpers"),m={getDelay:p.getDelay,getRedrawFunc:p.getRedrawFunc,clone:y("./cloneplot"),toSVG:y("./tosvg"),svgToImg:y("./svgtoimg"),toImage:y("./toimage"),downloadImage:y("./download")};$.exports=m},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(y,$,ee){"use strict";var p=y("../lib"),m=y("events").EventEmitter,b=y("./helpers");$.exports=function(v){var e=v.emitter||new m,n=new Promise(function(t,a){var r=window.Image,u=v.svg,s=v.format||"png";if(p.isIE()&&"svg"!==s){var i=new Error(b.MSG_IE_BAD_FORMAT);return a(i),v.promise?n:e.emit("error",i)}var l,c,f=v.canvas,g=v.scale||1,x=g*(v.width||300),d=g*(v.height||150),w=f.getContext("2d"),_=new r;"svg"===s||p.isSafari()?c=b.encodeSVG(u):(l=b.createBlob(u,"svg"),c=b.createObjectURL(l)),f.width=x,f.height=d,_.onload=function(){var T;switch(l=null,b.revokeObjectURL(c),"svg"!==s&&w.drawImage(_,0,0,x,d),s){case"jpeg":T=f.toDataURL("image/jpeg");break;case"png":T=f.toDataURL("image/png");break;case"webp":T=f.toDataURL("image/webp");break;case"svg":T=c;break;default:var k="Image format is not jpeg, png, svg or webp.";if(a(new Error(k)),!v.promise)return e.emit("error",k)}t(T),v.promise||e.emit("success",T)},_.onerror=function(T){if(l=null,b.revokeObjectURL(c),a(T),!v.promise)return e.emit("error",T)},_.src=c});return v.promise?n:e}},{"../lib":503,"./helpers":642,events:84}],645:[function(y,$,ee){"use strict";var p=y("events").EventEmitter,m=y("../registry"),b=y("../lib"),v=y("./helpers"),e=y("./cloneplot"),n=y("./tosvg"),t=y("./svgtoimg");$.exports=function(a,r){var u=new p,s=e(a,{format:"png"}),i=s.gd;i.style.position="absolute",i.style.left="-5000px",document.body.appendChild(i);var l=v.getRedrawFunc(i);return m.call("_doPlot",i,s.data,s.layout,s.config).then(l).then(function(){var c=v.getDelay(i._fullLayout);setTimeout(function(){var f=n(i),g=document.createElement("canvas");g.id=b.randstr(),(u=t({format:r.format,width:i._fullLayout.width,height:i._fullLayout.height,canvas:g,emitter:u,svg:f})).clean=function(){i&&document.body.removeChild(i)}},c)}).catch(function(c){u.emit("error",c)}),u}},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../lib"),b=y("../components/drawing"),v=y("../components/color"),e=y("../constants/xmlns_namespaces"),n=/"/g,t=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");$.exports=function(a,r,u){var s,i,l=a._fullLayout,c=l._paper,f=l._toppaper,g=l.width,h=l.height;c.insert("rect",":first-child").call(b.setRect,0,0,g,h).call(v.fill,l.paper_bgcolor);var o=l._basePlotModules||[];for(s=0;s<o.length;s++){var x=o[s];x.toSVG&&x.toSVG(a)}if(f){var d=f.node().childNodes,w=Array.prototype.slice.call(d);for(s=0;s<w.length;s++){var _=w[s];_.childNodes.length&&c.node().appendChild(_)}}l._draggers&&l._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var L=p.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){L.style({visibility:null,display:null});var M=this.style.fontFamily;M&&-1!==M.indexOf('"')&&L.style("font-family",M.replace(n,"TOBESTRIPPED"))}else L.remove()});var T=[];if(l._gradientUrlQueryParts)for(i in l._gradientUrlQueryParts)T.push(i);if(l._patternUrlQueryParts)for(i in l._patternUrlQueryParts)T.push(i);T.length&&c.selectAll(T.join(",")).each(function(){var L=p.select(this),M=this.style.fill;M&&-1!==M.indexOf("url(")&&L.style("fill",M.replace(n,"TOBESTRIPPED"));var O=this.style.stroke;O&&-1!==O.indexOf("url(")&&L.style("stroke",O.replace(n,"TOBESTRIPPED"))}),"pdf"!==r&&"eps"!==r||c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(e.xmlns,"xmlns",e.svg),c.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),"svg"===r&&u&&(c.attr("width",u*g),c.attr("height",u*h),c.attr("viewBox","0 0 "+g+" "+h));var L,M,O,k=(new window.XMLSerializer).serializeToString(c.node());return L=k,M=p.select("body").append("div").style({display:"none"}).html(""),O=L.replace(/(&[^;]*;)/gi,function(P){return"&lt;"===P?"&#60;":"&rt;"===P?"&#62;":-1!==P.indexOf("<")||-1!==P.indexOf(">")?"":M.html(P).text()}),M.remove(),k=(k=(k=O).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(t,"'"),m.isIE()&&(k=(k=(k=k.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),k}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(y,$,ee){"use strict";var p=y("../../lib");$.exports=function(m,b){for(var v=0;v<m.length;v++)m[v].i=v;p.mergeArray(b.text,m,"tx"),p.mergeArray(b.hovertext,m,"htx");var e=b.marker;if(e){p.mergeArray(e.opacity,m,"mo",!0),p.mergeArray(e.color,m,"mc");var n=e.line;n&&(p.mergeArray(n.color,m,"mlc"),p.mergeArrayCastPositive(n.width,m,"mlw"))}}},{"../../lib":503}],648:[function(y,$,ee){"use strict";var p=y("../scatter/attributes"),m=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../../plots/template_attributes").texttemplateAttrs,e=y("../../components/colorscale/attributes"),n=y("../../plots/font_attributes"),t=y("./constants"),a=y("../../components/drawing/attributes").pattern,r=y("../../lib/extend").extendFlat,u=n({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=r({},p.marker.line.width,{dflt:0}),i=r({width:s,editType:"calc"},e("marker.line")),l=r({line:i,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:a});$.exports={x:p.x,x0:p.x0,dx:p.dx,y:p.y,y0:p.y0,dy:p.dy,xperiod:p.xperiod,yperiod:p.yperiod,xperiod0:p.xperiod0,yperiod0:p.yperiod0,xperiodalignment:p.xperiodalignment,yperiodalignment:p.yperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),text:p.text,texttemplate:v({editType:"plot"},{keys:t.eventDataKeys}),hovertext:p.hovertext,hovertemplate:b({},{keys:t.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:r({},u,{}),insidetextfont:r({},u,{}),outsidetextfont:r({},u,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:r({},p.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:l,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:p.selected.marker.opacity,color:p.selected.marker.color,editType:"style"},textfont:p.selected.textfont,editType:"style"},unselected:{marker:{opacity:p.unselected.marker.opacity,color:p.unselected.marker.color,editType:"style"},textfont:p.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":925,"./constants":650}],649:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes"),m=y("../../plots/cartesian/align_period"),b=y("../../components/colorscale/helpers").hasColorscale,v=y("../../components/colorscale/calc"),e=y("./arrays_to_calcdata"),n=y("../scatter/calc_selection");$.exports=function(t,a){var r,u,s,i,l,c,f=p.getFromId(t,a.xaxis||"x"),g=p.getFromId(t,a.yaxis||"y"),h={msUTC:!(!a.base&&0!==a.base)};"h"===a.orientation?(r=f.makeCalcdata(a,"x",h),s=g.makeCalcdata(a,"y"),i=m(a,g,"y",s),l=!!a.yperiodalignment,c="y"):(r=g.makeCalcdata(a,"y",h),s=f.makeCalcdata(a,"x"),i=m(a,f,"x",s),l=!!a.xperiodalignment,c="x"),u=i.vals;for(var o=Math.min(u.length,r.length),x=new Array(o),d=0;d<o;d++)x[d]={p:u[d],s:r[d]},l&&(x[d].orig_p=s[d],x[d][c+"End"]=i.ends[d],x[d][c+"Start"]=i.starts[d]),a.ids&&(x[d].id=String(a.ids[d]));return b(a,"marker")&&v(t,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),b(a,"marker.line")&&v(t,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(x,a),n(x,a),x}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":927,"./arrays_to_calcdata":647}],650:[function(y,$,ee){"use strict";$.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib").isArrayOrTypedArray,b=y("../../constants/numerical").BADNUM,v=y("../../registry"),e=y("../../plots/cartesian/axes"),n=y("../../plots/cartesian/constraints").getAxisGroup,t=y("./sieve.js");function a(o,x,d,w,_){if(w.length){var T,k,L,M;switch(function(O,P){var S,E;for(S=0;S<P.length;S++){var R,B=P[S],H=B[0].trace,V="funnel"===H.type?H._base:H.base,Z="h"===H.orientation?H.xcalendar:H.ycalendar,W="category"===O.type||"multicategory"===O.type?function(){return null}:O.d2c;if(m(V)){for(E=0;E<Math.min(V.length,B.length);E++)R=W(V[E],0,Z),p(R)?(B[E].b=+R,B[E].hasB=1):B[E].b=0;for(;E<B.length;E++)B[E].b=0}else{R=W(V,0,Z);var G=p(R);for(R=G?R:0,E=0;E<B.length;E++)B[E].b=R,G&&(B[E].hasB=1)}}}(d,w),_.mode){case"overlay":r(x,d,w,_);break;case"group":for(T=[],k=[],L=0;L<w.length;L++)void 0===(M=w[L])[0].trace.offset?k.push(M):T.push(M);k.length&&(O=o,S=d,B=new t(k,{posAxis:P=x,sepNegVal:!1,overlapNoMerge:!(R=_).norm}),function(H,V,Z,W){for(var G=H._fullLayout,D=Z.minDiff,N=Z.traces,U=N.length,Q=Z.positions.length!==Z.distinctPositions.length,j=D*(1-W.gap),J=n(G,V._id)+N[0][0].trace.orientation,K=G._alignmentOpts[J]||{},re=0;re<U;re++){var ne,se,oe=N[re],pe=oe[0].trace,ge=Object.keys((K[pe.alignmentgroup]||{}).offsetGroups||{}).length,xe=(ne=ge?j/ge:Q?j/U:j)*(1-(W.groupgap||0));se=ge?((2*pe._offsetIndex+1-ge)*ne-xe)/2:Q?((2*re+1-U)*ne-xe)/2:-xe/2;var we=oe[0].t;we.barwidth=xe,we.poffset=se,we.bargroupwidth=j,we.bardelta=D}Z.binWidth=N[0][0].t.barwidth/100,s(Z),i(V,Z),l(V,Z,Q)}(O,P,B,R),function(H,V){for(var Z=H.traces,W=0;W<Z.length;W++){var G=Z[W];if(void 0===G[0].trace.base)for(var X=new t([G],{posAxis:V,sepNegVal:!0,overlapNoMerge:!0}),te=0;te<G.length;te++){var D=G[te];if(D.p!==b){var N=X.put(D.p,D.b+D.s);N&&(D.b=N)}}}}(B,P),R.norm?(f(B),g(S,B,R)):c(S,B)),T.length&&r(x,d,T,_);break;case"stack":case"relative":for(T=[],k=[],L=0;L<w.length;L++)void 0===(M=w[L])[0].trace.base?k.push(M):T.push(M);k.length&&function(O,P,S,E,R){var B=new t(E,{posAxis:P,sepNegVal:"relative"===R.mode,overlapNoMerge:!(R.norm||"stack"===R.mode||"relative"===R.mode)});u(P,B,R),function(G,X,te){var D,N,U,Q,j,J,K=h(G),re=X.traces;for(Q=0;Q<re.length;Q++)if("funnel"===(N=(D=re[Q])[0].trace).type)for(j=0;j<D.length;j++)(J=D[j]).s!==b&&X.put(J.p,-.5*J.s);for(Q=0;Q<re.length;Q++){U="funnel"===(N=(D=re[Q])[0].trace).type;var ne=[];for(j=0;j<D.length;j++)if((J=D[j]).s!==b){var se,oe=X.put(J.p,se=U?J.s:J.s+J.b),pe=oe+se;J.b=oe,J[K]=pe,te.norm||(ne.push(pe),J.hasB&&ne.push(oe))}te.norm||(N._extremes[G._id]=e.findExtremes(G,ne,{tozero:!0,padded:!0}))}}(S,B,R);for(var H=0;H<E.length;H++)for(var V=E[H],Z=0;Z<V.length;Z++){var W=V[Z];W.s!==b&&W.b+W.s===B.get(W.p,W.s)&&(W._outmost=!0)}R.norm&&g(S,B,R)}(0,x,d,k,_),T.length&&r(x,d,T,_)}!function(O,P){var S,E,R,B=h(P),H={},V=1/0,Z=-1/0;for(S=0;S<O.length;S++)for(R=O[S],E=0;E<R.length;E++){var W=R[E].p;p(W)&&(V=Math.min(V,W),Z=Math.max(Z,W))}var G=1e4/(Z-V),X=H.round=function(J){return String(Math.round(G*(J-V)))};for(S=0;S<O.length;S++){(R=O[S])[0].t.extents=H;var te=R[0].t.poffset,D=Array.isArray(te);for(E=0;E<R.length;E++){var N=R[E],U=N[B]-N.w/2;if(p(U)){var Q=N[B]+N.w/2,j=X(N.p);H[j]=H[j]?[Math.min(U,H[j][0]),Math.max(Q,H[j][1])]:[U,Q]}N.p0=N.p+(D?te[E]:te),N.p1=N.p0+N.w,N.s0=N.b,N.s1=N.s0+N.s}}}(w,x)}var O,P,S,R,B}function r(o,x,d,w){for(var _=0;_<d.length;_++){var k=new t([d[_]],{posAxis:o,sepNegVal:!1,overlapNoMerge:!w.norm});u(o,k,w),w.norm?(f(k),g(x,k,w)):c(x,k)}}function u(o,x,d){for(var w=x.minDiff,_=x.traces,T=w*(1-d.gap),k=T*(1-(d.groupgap||0)),L=-k/2,M=0;M<_.length;M++){var O=_[M][0].t;O.barwidth=k,O.poffset=L,O.bargroupwidth=T,O.bardelta=w}x.binWidth=_[0][0].t.barwidth/100,s(x),i(o,x),l(o,x)}function s(o){var x,d,w=o.traces;for(x=0;x<w.length;x++){var _,T=w[x],k=T[0],L=k.trace,M=k.t,O=L._offset||L.offset,P=M.poffset;if(m(O)){for(_=Array.prototype.slice.call(O,0,T.length),d=0;d<_.length;d++)p(_[d])||(_[d]=P);for(d=_.length;d<T.length;d++)_.push(P);M.poffset=_}else void 0!==O&&(M.poffset=O);var S=L._width||L.width,E=M.barwidth;if(m(S)){var R=Array.prototype.slice.call(S,0,T.length);for(d=0;d<R.length;d++)p(R[d])||(R[d]=E);for(d=R.length;d<T.length;d++)R.push(E);if(M.barwidth=R,void 0===O){for(_=[],d=0;d<T.length;d++)_.push(P+(E-R[d])/2);M.poffset=_}}else void 0!==S&&(M.barwidth=S,void 0===O&&(M.poffset=P+(E-S)/2))}}function i(o,x){for(var d=x.traces,w=h(o),_=0;_<d.length;_++)for(var T=d[_],k=T[0].t,L=k.poffset,M=Array.isArray(L),O=k.barwidth,P=Array.isArray(O),S=0;S<T.length;S++){var E=T[S],R=E.w=P?O[S]:O;E[w]=E.p+(M?L[S]:L)+R/2}}function l(o,x,d){var w=x.traces,_=x.minDiff/2;e.minDtick(o,x.minDiff,x.distinctPositions[0],d);for(var T=0;T<w.length;T++){var k,L,M,O,P=w[T],S=P[0],E=S.trace,R=[];for(O=0;O<P.length;O++)L=(k=P[O]).p-_,R.push(L,M=k.p+_);if(E.width||E.offset){var B=S.t,H=B.poffset,V=B.barwidth,Z=Array.isArray(H),W=Array.isArray(V);for(O=0;O<P.length;O++)M=(L=(k=P[O]).p+(Z?H[O]:H))+(W?V[O]:V),R.push(L,M)}E._extremes[o._id]=e.findExtremes(o,R,{padded:!1})}}function c(o,x){for(var d=x.traces,w=h(o),_=0;_<d.length;_++){for(var T=d[_],k=T[0].trace,L=[],M=!1,O=0;O<T.length;O++){var P=T[O],S=P.b,E=S+P.s;P[w]=E,L.push(E),P.hasB&&L.push(S),P.hasB&&P.b||(M=!0)}k._extremes[o._id]=e.findExtremes(o,L,{tozero:M,padded:!0})}}function f(o){for(var x=o.traces,d=0;d<x.length;d++)for(var w=x[d],_=0;_<w.length;_++){var T=w[_];T.s!==b&&o.put(T.p,T.b+T.s)}}function g(o,x,d){var w=x.traces,_=h(o),T="fraction"===d.norm?1:100,k=T/1e9,L=o.l2c(o.c2l(0)),M="stack"===d.mode?T:L;function O(te){return p(o.c2l(te))&&(te<L-k||te>M+k||!p(L))}for(var P=0;P<w.length;P++){for(var S=w[P],E=S[0].trace,R=[],B=!1,H=!1,V=0;V<S.length;V++){var Z=S[V];if(Z.s!==b){var W=Math.abs(T/x.get(Z.p,Z.s));Z.b*=W,Z.s*=W;var G=Z.b,X=G+Z.s;Z[_]=X,R.push(X),H=H||O(X),Z.hasB&&(R.push(G),H=H||O(G)),Z.hasB&&Z.b||(B=!0)}}E._extremes[o._id]=e.findExtremes(o,R,{tozero:B,padded:H})}}function h(o){return o._id.charAt(0)}$.exports={crossTraceCalc:function(o,x){for(var d=x.xaxis,w=x.yaxis,_=o._fullLayout,T=o._fullData,k=o.calcdata,L=[],M=[],O=0;O<T.length;O++){var P=T[O];if(!0===P.visible&&v.traceIs(P,"bar")&&P.xaxis===d._id&&P.yaxis===w._id&&("h"===P.orientation?L.push(k[O]):M.push(k[O]),P._computePh))for(var S=o.calcdata[O],E=0;E<S.length;E++)"function"==typeof S[E].ph0&&(S[E].ph0=S[E].ph0()),"function"==typeof S[E].ph1&&(S[E].ph1=S[E].ph1())}var R={xCat:"category"===d.type||"multicategory"===d.type,yCat:"category"===w.type||"multicategory"===w.type,mode:_.barmode,norm:_.barnorm,gap:_.bargap,groupgap:_.bargroupgap};a(o,d,w,M,R),a(o,w,d,L,R)},setGroupPositions:a}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/color"),b=y("../../registry"),v=y("../scatter/xy_defaults"),e=y("../scatter/period_defaults"),n=y("./style_defaults"),t=y("../../plots/cartesian/constraints").getAxisGroup,a=y("./attributes"),r=p.coerceFont;function u(i,l,c,f){var g=l.orientation,o=t(c,l[{v:"x",h:"y"}[g]+"axis"])+g,x=c._alignmentOpts||{},d=f("alignmentgroup"),w=x[o];w||(w=x[o]={});var _=w[d];_?_.traces.push(l):_=w[d]={traces:[l],alignmentIndex:Object.keys(w).length,offsetGroups:{}};var T=f("offsetgroup"),k=_.offsetGroups,L=k[T];T&&(L||(L=k[T]={offsetIndex:Object.keys(k).length}),l._offsetIndex=L.offsetIndex)}function s(i,l,c,f,g,h){var o=!1!==(h=h||{}).moduleHasSelected,x=!1!==h.moduleHasUnselected,d=!1!==h.moduleHasConstrain,w=!1!==h.moduleHasCliponaxis,_=!1!==h.moduleHasTextangle,T=!1!==h.moduleHasInsideanchor,k=!!h.hasPathbar,L=Array.isArray(g)||"auto"===g,M=L||"inside"===g,O=L||"outside"===g;if(M||O){var P=r(f,"textfont",c.font),S=p.extendFlat({},P),E=!(i.textfont&&i.textfont.color);if(E&&delete S.color,r(f,"insidetextfont",S),k){var R=p.extendFlat({},P);E&&delete R.color,r(f,"pathbar.textfont",R)}O&&r(f,"outsidetextfont",P),o&&f("selected.textfont.color"),x&&f("unselected.textfont.color"),d&&f("constraintext"),w&&f("cliponaxis"),_&&f("textangle"),f("texttemplate")}M&&T&&f("insidetextanchor")}$.exports={supplyDefaults:function(i,l,c,f){function g(d,w){return p.coerce(i,l,a,d,w)}if(v(i,l,f,g)){e(i,l,f,g),g("xhoverformat"),g("yhoverformat"),g("orientation",l.x&&!l.y?"h":"v"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate");var h=g("textposition");s(i,0,f,g,h,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n(i,l,g,c,f);var o=(l.marker.line||{}).color,x=b.getComponentMethod("errorbars","supplyDefaults");x(i,l,o||m.defaultLine,{axis:"y"}),x(i,l,o||m.defaultLine,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(l,g)}else l.visible=!1},crossTraceDefaults:function(i,l){var c;function f(h){return p.coerce(c._input,c,a,h)}if("group"===l.barmode)for(var g=0;g<i.length;g++)"bar"===(c=i[g]).type&&u(0,c,l,f)},handleGroupingDefaults:u,handleText:s}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":945,"../scatter/xy_defaults":952,"./attributes":648,"./style_defaults":663}],653:[function(y,$,ee){"use strict";$.exports=function(p,m,b){return p.x="xVal"in m?m.xVal:m.x,p.y="yVal"in m?m.yVal:m.y,m.xa&&(p.xaxis=m.xa),m.ya&&(p.yaxis=m.ya),"h"===b.orientation?(p.label=p.y,p.value=p.x):(p.label=p.x,p.value=p.y),p}},{}],654:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("tinycolor2"),b=y("../../lib").isArrayOrTypedArray;ee.coerceString=function(v,e,n){if("string"==typeof e){if(e||!v.noBlank)return e}else if(("number"==typeof e||!0===e)&&!v.strict)return String(e);return void 0!==n?n:v.dflt},ee.coerceNumber=function(v,e,n){if(p(e)){e=+e;var t=v.min,a=v.max;if(!(void 0!==t&&e<t||void 0!==a&&e>a))return e}return void 0!==n?n:v.dflt},ee.coerceColor=function(v,e,n){return m(e).isValid()?e:void 0!==n?n:v.dflt},ee.coerceEnumerated=function(v,e,n){return v.coerceNumber&&(e=+e),-1!==v.values.indexOf(e)?e:void 0!==n?n:v.dflt},ee.getValue=function(v,e){var n;return Array.isArray(v)?e<v.length&&(n=v[e]):n=v,n},ee.getLineWidth=function(v,e){return 0<e.mlw?e.mlw:b(v.marker.line.width)?0:v.marker.line.width}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(y,$,ee){"use strict";var p=y("../../components/fx"),m=y("../../registry"),b=y("../../components/color"),v=y("../../lib").fillText,e=y("./helpers").getLineWidth,n=y("../../plots/cartesian/axes").hoverLabelText,t=y("../../constants/numerical").BADNUM;function a(u,s,i,l,c){var f,g,h,o,x,d,w,_=u.cd,T=_[0].trace,k=_[0].t,L="closest"===l,M="waterfall"===T.type,O=u.maxHoverDistance,P=u.maxSpikeDistance;"h"===T.orientation?(f=i,g=s,h="y",o="x",x=D,d=X):(f=s,g=i,h="x",o="y",d=D,x=X);var S=T[h+"period"],E=L||S;function R(ne){return H(ne,-1)}function B(ne){return H(ne,1)}function H(ne,se){return ne[h]+se*ne.w/2}function V(ne){return ne[h+"End"]-ne[h+"Start"]}var Z=L?R:S?function(ne){return ne.p-V(ne)/2}:function(ne){return Math.min(R(ne),ne.p-k.bardelta/2)},W=L?B:S?function(ne){return ne.p+V(ne)/2}:function(ne){return Math.max(B(ne),ne.p+k.bardelta/2)};function G(ne,se,oe){return c.finiteRange&&(oe=0),p.inbox(ne-f,se-f,oe+Math.min(1,Math.abs(se-ne)/w)-1)}function X(ne){return G(Z(ne),W(ne),O)}function te(ne){var se=ne[o];if(M){var oe=Math.abs(ne.rawS)||0;g>0?se+=oe:g<0&&(se-=oe)}return se}function D(ne){var se=g,oe=ne.b,pe=te(ne);return p.inbox(oe-se,pe-se,O+(pe-se)/(pe-oe)-1)}var N=u[h+"a"],U=u[o+"a"];w=Math.abs(N.r2c(N.range[1])-N.r2c(N.range[0]));var ne,se,oe,pe,Q=p.getDistanceFunction(l,x,d,function(ne){return(x(ne)+d(ne))/2});if(p.getClosest(_,Q,u),!1!==u.index&&_[u.index].p!==t){E||(Z=function(ne){return Math.min(R(ne),ne.p-k.bargroupwidth/2)},W=function(ne){return Math.max(B(ne),ne.p+k.bargroupwidth/2)});var j=_[u.index],J=T.base?j.b+j.s:j.s;u[o+"0"]=u[o+"1"]=U.c2p(j[o],!0),u[o+"LabelVal"]=J;var K=k.extents[k.extents.round(j.p)];return u[h+"0"]=N.c2p(L?Z(j):K[0],!0),u[h+"1"]=N.c2p(L?W(j):K[1],!0),u[h+"LabelVal"]=void 0!==j.orig_p?j.orig_p:j.p,u.labelLabel=n(N,u[h+"LabelVal"],T[h+"hoverformat"]),u.valueLabel=n(U,u[o+"LabelVal"],T[o+"hoverformat"]),u.baseLabel=n(U,j.b,T[o+"hoverformat"]),u.spikeDistance=(se=g,oe=(ne=j).b,pe=te(ne),(p.inbox(oe-se,pe-se,P+(pe-se)/(pe-oe)-1)+function(ne){return G(R(ne),B(ne),P)}(j))/2),u[h+"Spike"]=N.c2p(j.p,!0),v(j,T,u),u.hovertemplate=T.hovertemplate,u}}function r(u,s){var i=s.mcc||u.marker.color,l=s.mlcc||u.marker.line.color,c=e(u,s);return b.opacity(i)?i:b.opacity(l)&&c?l:void 0}$.exports={hoverPoints:function(u,s,i,l,c){var f=a(u,s,i,l,c);if(f){var g=f.cd,h=g[0].trace,o=g[f.index];return f.color=r(h,o),m.getComponentMethod("errorbars","hoverInfo")(o,h,f),[f]}},hoverOnBars:a,getTraceColor:r}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults").supplyDefaults,crossTraceDefaults:y("./defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc").crossTraceCalc,colorbar:y("../scatter/marker_colorbar"),arraysToCalcdata:y("./arrays_to_calcdata"),plot:y("./plot").plot,style:y("./style").style,styleOnSelect:y("./style").styleOnSelect,hoverPoints:y("./hover").hoverPoints,eventData:y("./event_data"),selectPoints:y("./select"),moduleType:"trace",name:"bar",basePlotModule:y("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":943,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(y,$,ee){"use strict";$.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../plots/cartesian/axes"),b=y("../../lib"),v=y("./layout_attributes");$.exports=function(e,n,t){function a(h,o){return b.coerce(e,n,v,h,o)}for(var r=!1,u=!1,s=!1,i={},l=a("barmode"),c=0;c<t.length;c++){var f=t[c];if(p.traceIs(f,"bar")&&f.visible){if(r=!0,"group"===l){var g=f.xaxis+f.yaxis;i[g]&&(s=!0),i[g]=!0}f.visible&&"histogram"===f.type&&"category"!==m.getFromId({_fullLayout:n},f["v"===f.orientation?"xaxis":"yaxis"]).type&&(u=!0)}}r?("overlay"!==l&&a("barnorm"),a("bargap",u&&!s?0:.2),a("bargroupgap")):delete n.barmode}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("fast-isnumeric"),b=y("../../lib"),v=y("../../lib/svg_text_utils"),e=y("../../components/color"),n=y("../../components/drawing"),t=y("../../registry"),a=y("../../plots/cartesian/axes").tickText,r=y("./uniform_text"),u=r.recordMinTextSize,s=r.clearMinTextSize,i=y("./style"),l=y("./helpers"),c=y("./constants"),f=y("./attributes"),g=f.text,h=f.textposition,o=y("../../components/fx/helpers").appendArrayPointValue,x=c.TEXTPAD;function d(P){return P.id}function _(P,S){return P<S?1:-1}function T(P,S,E,R){var B;return!S.uniformtext.mode&&k(E)?(R&&(B=R()),P.transition().duration(E.duration).ease(E.easing).each("end",function(){B&&B()}).each("interrupt",function(){B&&B()})):P}function k(P){return P&&P.duration>0}function L(P){return"auto"===P?0:P}function M(P,S){var E=Math.PI/180*S,R=Math.abs(Math.sin(E)),B=Math.abs(Math.cos(E));return{x:P.width*B+P.height*R,y:P.width*R+P.height*B}}function O(P,S,E,R,B,H){var V=!!H.isHorizontal,Z=!!H.constrained,W=H.angle||0,G=H.anchor||"end",X="end"===G,te="start"===G,D=((H.leftToRight||0)+1)/2,N=1-D,U=B.width,Q=B.height,j=Math.abs(S-P),J=Math.abs(R-E),K=j>2*x&&J>2*x?x:0;j-=2*K,J-=2*K;var re=L(W);"auto"!==W||U<=j&&Q<=J||!(U>j||Q>J)||(U>J||Q>j)&&U<Q==j<J||(re+=90);var ne=M(B,re),se=1;Z&&(se=Math.min(1,j/ne.x,J/ne.y));var oe=B.left*N+B.right*D,pe=(B.top+B.bottom)/2,ce=(P+x)*N+(S-x)*D,ge=(E+R)/2,xe=0,we=0;if(te||X){var be=(V?ne.x:ne.y)/2,Se=V?_(P,S):_(E,R);V?te?(ce=P+Se*K,xe=-Se*be):(ce=S-Se*K,xe=Se*be):te?(ge=E+Se*K,we=-Se*be):(ge=R-Se*K,we=Se*be)}return{textX:oe,textY:pe,targetX:ce,targetY:ge,anchorX:xe,anchorY:we,scale:se,rotate:re}}$.exports={plot:function(P,S,E,R,B,H){var V=S.xaxis,Z=S.yaxis,W=P._fullLayout;B||(B={mode:W.barmode,norm:W.barmode,gap:W.bargap,groupgap:W.bargroupgap},s("bar",W));var G=b.makeTraceGroups(R,E,"trace bars").each(function(X){var te=p.select(this),D=X[0].trace,Q="bar"===D.type||"funnel"===D.type,j=0;"waterfall"===D.type&&D.connector.visible&&"between"===D.connector.mode&&(j=D.connector.line.width/2);var J="h"===D.orientation,K=k(B),re=b.ensureSingle(te,"g","points"),ne=function(P){if(P.ids)return d}(D),se=re.selectAll("g.point").data(b.identity,ne);se.enter().append("g").classed("point",!0),se.exit().remove(),se.each(function(pe,ce){var ge,xe,De,Be,Ze,Ye,tt,st,vt,Pt,we=p.select(this),be=(Be=V,Ze=Z,st=[],Pt=(Ye=J)?Ze:Be,(tt=[])[0]=(vt=Ye?Be:Ze).c2p((De=pe).s0,!0),st[0]=Pt.c2p(De.p0,!0),tt[1]=vt.c2p(De.s1,!0),st[1]=Pt.c2p(De.p1,!0),Ye?[tt,st]:[st,tt]),Se=be[0][0],fe=be[0][1],me=be[1][0],Te=be[1][1],_e=0==(J?fe-Se:Te-me);if(_e&&Q&&l.getLineWidth(D,pe)&&(_e=!1),_e||(_e=!(m(Se)&&m(fe)&&m(me)&&m(Te))),pe.isBlank=_e,_e&&(J?fe=Se:Te=me),j&&!_e&&(J?(Se-=_(Se,fe)*j,fe+=_(Se,fe)*j):(me-=_(me,Te)*j,Te+=_(me,Te)*j)),"waterfall"===D.type){if(!_e){var Me=D[pe.dir].marker;ge=Me.line.width,xe=Me.color}}else ge=l.getLineWidth(D,pe),xe=pe.mc||D.marker.color;function Ie(De){var Be=p.round(ge/2%1,2);return 0===B.gap&&0===B.groupgap?p.round(Math.round(De)-Be,2):De}if(!P._context.staticPlot){var ze=e.opacity(xe)<1||ge>.01?Ie:function(De,Be,Ze){return Ze&&De===Be?De:Math.abs(De-Be)>=2?Ie(De):De>Be?Math.ceil(De):Math.floor(De)};Se=ze(Se,fe,J),fe=ze(fe,Se,J),me=ze(me,Te,!J),Te=ze(Te,me,!J)}var Ve=T(b.ensureSingle(we,"path"),W,B,H);if(Ve.style("vector-effect","non-scaling-stroke").attr("d",isNaN((fe-Se)*(Te-me))||_e&&P._context.staticPlot?"M0,0Z":"M"+Se+","+me+"V"+Te+"H"+fe+"V"+me+"Z").call(n.setClipUrl,S.layerClipId,P),!W.uniformtext.mode&&K){var Je=n.makePointStyleFns(D);n.singlePointStyle(pe,Ve,D,Je,P)}(function(De,Be,Ze,Ye,tt,st,vt,Pt,Mt,rt,et){var bt,Rt=Be.xaxis,Yt=Be.yaxis,Fe=De._fullLayout;function He(Gt,Kt,ir){return b.ensureSingle(Gt,"text").text(Kt).attr({class:"bartext bartext-"+bt,"text-anchor":"middle","data-notex":1}).call(n.font,ir).call(v.convertToTspans,De)}var Kt,ir,dr,hr,cr,sr,Oe=Ye[0].trace,$e="h"===Oe.orientation,ke=(ir=tt,dr=Rt,hr=Yt,cr=(sr=(Kt=Ye)[0].trace).texttemplate?function(mr,Ir,vr,Br,Jr){var ln=Ir[0].trace,En=b.castOption(ln,vr,"texttemplate");if(!En)return"";var Cn,An,$r,Rr,Lr="waterfall"===ln.type,Qr="funnel"===ln.type;function On(Ct){return a(Rr,Rr.c2l(Ct),!0).text}"h"===ln.orientation?(Cn="y",An=Jr,$r="x",Rr=Br):(Cn="x",An=Br,$r="y",Rr=Jr);var zr=Ir[vr],sn={};sn.label=zr.p,sn.labelLabel=sn[Cn+"Label"]=a(An,An.c2l(zr.p),!0).text;var Tn=b.castOption(ln,zr.i,"text");(0===Tn||Tn)&&(sn.text=Tn),sn.value=zr.s,sn.valueLabel=sn[$r+"Label"]=On(zr.s);var Rn={};o(Rn,ln,zr.i),Lr&&(sn.delta=+zr.rawS||zr.s,sn.deltaLabel=On(sn.delta),sn.final=zr.v,sn.finalLabel=On(sn.final),sn.initial=sn.final-sn.delta,sn.initialLabel=On(sn.initial)),Qr&&(sn.value=zr.s,sn.valueLabel=On(sn.value),sn.percentInitial=zr.begR,sn.percentInitialLabel=b.formatPercent(zr.begR),sn.percentPrevious=zr.difR,sn.percentPreviousLabel=b.formatPercent(zr.difR),sn.percentTotal=zr.sumR,sn.percenTotalLabel=b.formatPercent(zr.sumR));var $t=b.castOption(ln,zr.i,"customdata");return $t&&(sn.customdata=$t),b.texttemplateString(En,sn,mr._d3locale,Rn,sn,ln._meta||{})}(Fe,Kt,ir,dr,hr):sr.textinfo?function(mr,Ir,vr,Br){var Jr=mr[0].trace,ln="h"===Jr.orientation,En="waterfall"===Jr.type,Cn="funnel"===Jr.type;function An(Ut){return a(ln?vr:Br,+Ut,!0).text}var $r,Lr=mr[Ir],Qr=Jr.textinfo.split("+"),On=[],zr=function(Ut){return-1!==Qr.indexOf(Ut)};if(zr("label")&&On.push(a(ln?Br:vr,mr[Ir].p,!0).text),zr("text")&&(0===($r=b.castOption(Jr,Lr.i,"text"))||$r)&&On.push($r),En){var Mn=+Lr.rawS||Lr.s,Tn=Lr.v,Rn=Tn-Mn;zr("initial")&&On.push(An(Rn)),zr("delta")&&On.push(An(Mn)),zr("final")&&On.push(An(Tn))}if(Cn){zr("value")&&On.push(An(Lr.s));var $t=0;zr("percent initial")&&$t++,zr("percent previous")&&$t++,zr("percent total")&&$t++;var Ct=$t>1;zr("percent initial")&&($r=b.formatPercent(Lr.begR),Ct&&($r+=" of initial"),On.push($r)),zr("percent previous")&&($r=b.formatPercent(Lr.difR),Ct&&($r+=" of previous"),On.push($r)),zr("percent total")&&($r=b.formatPercent(Lr.sumR),Ct&&($r+=" of total"),On.push($r))}return On.join("<br>")}(Kt,ir,dr,hr):l.getValue(sr.text,ir),l.coerceString(g,cr));bt=function(Gt,Kt){var ir=l.getValue(Gt.textposition,Kt);return l.coerceEnumerated(h,ir)}(Oe,tt);var Pe=Ye[tt],Ce=!("stack"===rt.mode||"relative"===rt.mode)||Pe._outmost;if(ke&&"none"!==bt&&(!Pe.isBlank&&st!==vt&&Pt!==Mt||"auto"!==bt&&"inside"!==bt)){var Xe=Fe.font,at=i.getBarColor(Ye[tt],Oe),pt=i.getInsideTextFont(Oe,tt,Xe,at),ut=i.getOutsideTextFont(Oe,tt,Xe),St=Ze.datum();$e?"log"===Rt.type&&St.s0<=0&&(st=Rt.range[0]<Rt.range[1]?0:Rt._length):"log"===Yt.type&&St.s0<=0&&(Pt=Yt.range[0]<Yt.range[1]?Yt._length:0);var ot,Et,Lt,Qe,mt,It=Math.abs(vt-st)-2*x,jt=Math.abs(Mt-Pt)-2*x;if("outside"===bt&&(Ce||Pe.hasB||(bt="inside")),"auto"===bt&&(Ce?(bt="inside",ot=He(Ze,ke,mt=b.ensureUniformFontSize(De,pt)),Qe=(Et=n.bBox(ot.node())).height,(Lt=Et.width)>0&&Qe>0&&(Lt<=It&&Qe<=jt||Lt<=jt&&Qe<=It||($e?It>=Lt*(jt/Qe):jt>=Qe*(It/Lt)))?bt="inside":(bt="outside",ot.remove(),ot=null)):bt="inside"),!ot){var _t=(ot=He(Ze,ke,mt=b.ensureUniformFontSize(De,"outside"===bt?ut:pt))).attr("transform");if(ot.attr("transform",""),Lt=(Et=n.bBox(ot.node())).width,Qe=Et.height,ot.attr("transform",_t),Lt<=0||Qe<=0)return void ot.remove()}var Dt,nr=Oe.textangle;Dt="outside"===bt?function(Gt,Kt,ir,dr,hr,cr){var sr,mr=!!cr.isHorizontal,Ir=!!cr.constrained,vr=cr.angle||0,Br=hr.width,Jr=hr.height,ln=Math.abs(Kt-Gt),En=Math.abs(dr-ir);sr=mr?En>2*x?x:0:ln>2*x?x:0;var Cn=1;Ir&&(Cn=mr?Math.min(1,En/Jr):Math.min(1,ln/Br));var An=L(vr),$r=M(hr,An),Rr=(mr?$r.x:$r.y)/2,Lr=(hr.left+hr.right)/2,Qr=(hr.top+hr.bottom)/2,On=(Gt+Kt)/2,zr=(ir+dr)/2,sn=0,Mn=0,Tn=mr?_(Kt,Gt):_(ir,dr);return mr?(On=Kt-Tn*sr,sn=Tn*Rr):(zr=dr+Tn*sr,Mn=-Tn*Rr),{textX:Lr,textY:Qr,targetX:On,targetY:zr,anchorX:sn,anchorY:Mn,scale:Cn,rotate:An}}(st,vt,Pt,Mt,Et,{isHorizontal:$e,constrained:"both"===Oe.constraintext||"outside"===Oe.constraintext,angle:nr}):O(st,vt,Pt,Mt,Et,{isHorizontal:$e,constrained:"both"===Oe.constraintext||"inside"===Oe.constraintext,angle:nr,anchor:Oe.insidetextanchor}),Dt.fontSize=mt.size,u("histogram"===Oe.type?"bar":Oe.type,Dt,Fe),Pe.transform=Dt,T(ot,Fe,rt,et).attr("transform",b.getTextTransform(Dt))}else Ze.select("text").remove()})(P,S,we,X,ce,Se,fe,me,Te,B,H),S.layerClipId&&n.hideOutsideRangePoint(pe,we.select("text"),V,Z,D.xcalendar,D.ycalendar)}),n.setClipUrl(te,!1===D.cliponaxis?null:S.layerClipId,P)});t.getComponentMethod("errorbars","plot")(P,G,S,B)},toMoveInsideBar:O}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(y,$,ee){"use strict";function p(m,b,v,e,n){var t=b.c2p(e?m.s0:m.p0,!0),a=b.c2p(e?m.s1:m.p1,!0),r=v.c2p(e?m.p0:m.s0,!0),u=v.c2p(e?m.p1:m.s1,!0);return n?[(t+a)/2,(r+u)/2]:e?[a,(r+u)/2]:[(t+a)/2,u]}$.exports=function(m,b){var v,e=m.cd,n=m.xaxis,t=m.yaxis,a=e[0].trace,r="funnel"===a.type,u="h"===a.orientation,s=[];if(!1===b)for(v=0;v<e.length;v++)e[v].selected=0;else for(v=0;v<e.length;v++){var i=e[v],l="ct"in i?i.ct:p(i,n,t,u,r);b.contains(l,!1,v,m)?(s.push({pointNumber:v,x:n.c2d(i.x),y:t.c2d(i.y)}),i.selected=1):i.selected=0}return s}},{}],661:[function(y,$,ee){"use strict";$.exports=b;var p=y("../../lib").distinctVals,m=y("../../constants/numerical").BADNUM;function b(v,e){this.traces=v,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var n=1/0,t=[],a=0;a<v.length;a++){for(var r=v[a],u=0;u<r.length;u++){var s=r[u];s.p!==m&&t.push(s.p)}r[0]&&r[0].width1&&(n=Math.min(r[0].width1,n))}this.positions=t;var i=p(t);this.distinctPositions=i.vals,this.minDiff=1===i.vals.length&&n!==1/0?n:Math.min(i.minDiff,n);var l=(e.posAxis||{}).type;"category"!==l&&"multicategory"!==l||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}b.prototype.put=function(v,e){var n=this.getLabel(v,e),t=this.bins[n]||0;return this.bins[n]=t+e,t},b.prototype.get=function(v,e){var n=this.getLabel(v,e);return this.bins[n]||0},b.prototype.getLabel=function(v,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?v:Math.round(v/this.binWidth))}},{"../../constants/numerical":479,"../../lib":503}],662:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/color"),b=y("../../components/drawing"),v=y("../../lib"),e=y("../../registry"),n=y("./uniform_text").resizeText,t=y("./attributes"),a=t.textfont,r=t.insidetextfont,u=t.outsidetextfont,s=y("./helpers");function i(d,w,_){b.pointStyle(d.selectAll("path"),w,_),l(d,w,_)}function l(d,w,_){d.selectAll("text").each(function(T){var k=p.select(this),L=v.ensureUniformFontSize(_,c(k,T,w,_));b.font(k,L)})}function c(d,w,_,T){var k=T._fullLayout.font,L=_.textfont;if(d.classed("bartext-inside")){var M=x(w,_);L=g(_,w.i,k,M)}else d.classed("bartext-outside")&&(L=h(_,w.i,k));return L}function f(d,w,_){return o(a,d.textfont,w,_)}function g(d,w,_,T){var k=f(d,w,_);return(void 0===d._input.textfont||void 0===d._input.textfont.color||Array.isArray(d.textfont.color)&&void 0===d.textfont.color[w])&&(k={color:m.contrast(T),family:k.family,size:k.size}),o(r,d.insidetextfont,w,k)}function h(d,w,_){var T=f(d,w,_);return o(u,d.outsidetextfont,w,T)}function o(d,w,_,T){var k=s.getValue((w=w||{}).family,_),L=s.getValue(w.size,_),M=s.getValue(w.color,_);return{family:s.coerceString(d.family,k,T.family),size:s.coerceNumber(d.size,L,T.size),color:s.coerceColor(d.color,M,T.color)}}function x(d,w){return"waterfall"===w.type?w[d.dir].marker.color:d.mcc||d.mc||w.marker.color}$.exports={style:function(d){var w=p.select(d).selectAll("g.barlayer").selectAll("g.trace");n(d,w,"bar");var _=w.size(),T=d._fullLayout;w.style("opacity",function(k){return k[0].trace.opacity}).each(function(k){("stack"===T.barmode&&_>1||0===T.bargap&&0===T.bargroupgap&&!k[0].trace.marker.line.width)&&p.select(this).attr("shape-rendering","crispEdges")}),w.selectAll("g.points").each(function(k){i(p.select(this),k[0].trace,d)}),e.getComponentMethod("errorbars","style")(w)},styleTextPoints:l,styleOnSelect:function(d,w,_){var k,L,M,O,P,S,T=w[0].trace;T.selectedpoints?(L=T,M=d,b.selectedPointStyle((k=_).selectAll("path"),L),O=k.selectAll("text"),P=L,S=M,O.each(function(E){var R,B=p.select(this);if(E.selected){R=v.ensureUniformFontSize(S,c(B,E,P,S));var H=P.selected.textfont&&P.selected.textfont.color;H&&(R.color=H),b.font(B,R)}else b.selectedTextStyle(B,P)})):(i(_,T,d),e.getComponentMethod("errorbars","style")(_))},getInsideTextFont:g,getOutsideTextFont:h,getBarColor:x,resizeText:n}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(y,$,ee){"use strict";var p=y("../../components/color"),m=y("../../components/colorscale/helpers").hasColorscale,b=y("../../components/colorscale/defaults"),v=y("../../lib").coercePattern;$.exports=function(e,n,t,a,r){var u=t("marker.color",a),s=m(e,"marker");s&&b(e,n,r,t,{prefix:"marker.",cLetter:"c"}),t("marker.line.color",p.defaultLine),m(e,"marker.line")&&b(e,n,r,t,{prefix:"marker.line.",cLetter:"c"}),t("marker.line.width"),t("marker.opacity"),v(t,"marker.pattern",u,s),t("selected.marker.color"),t("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib");function b(v){return"_"+v+"Text_minsize"}$.exports={recordMinTextSize:function(v,e,n){if(n.uniformtext.mode){var t=b(v),a=n.uniformtext.minsize,r=e.scale*e.fontSize;e.hide=r<a,n[t]=n[t]||1/0,e.hide||(n[t]=Math.min(n[t],Math.max(r,a)))}},clearMinTextSize:function(v,e){e[b(v)]=void 0},resizeText:function(v,e,n){var t=v._fullLayout,a=t["_"+n+"Text_minsize"];if(a){var r,u="hide"===t.uniformtext.mode;switch(n){case"funnelarea":case"pie":case"sunburst":r="g.slice";break;case"treemap":case"icicle":r="g.slice, g.pathbar";break;default:r="g.points > g.point"}e.selectAll(r).each(function(s){var i=s.transform;i&&(i.scale=u&&i.hide?0:a/i.fontSize,p.select(this).select("text").attr("transform",m.getTextTransform(i)))})}}}},{"../../lib":503,"@plotly/d3":58}],665:[function(y,$,ee){"use strict";var p=y("../../plots/template_attributes").hovertemplateAttrs,m=y("../../lib/extend").extendFlat,b=y("../scatterpolar/attributes"),v=y("../bar/attributes");$.exports={r:b.r,theta:b.theta,r0:b.r0,dr:b.dr,theta0:b.theta0,dtheta:b.dtheta,thetaunit:b.thetaunit,base:m({},v.base,{}),offset:m({},v.offset,{}),width:m({},v.width,{}),text:m({},v.text,{}),hovertext:m({},v.hovertext,{}),marker:v.marker,hoverinfo:b.hoverinfo,hovertemplate:p(),selected:v.selected,unselected:v.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":999}],666:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/helpers").hasColorscale,m=y("../../components/colorscale/calc"),b=y("../bar/arrays_to_calcdata"),v=y("../bar/cross_trace_calc").setGroupPositions,e=y("../scatter/calc_selection"),n=y("../../registry").traceIs,t=y("../../lib").extendFlat;$.exports={calc:function(a,r){for(var u=a._fullLayout,s=r.subplot,l=u[s].angularaxis,c=u[s].radialaxis.makeCalcdata(r,"r"),f=l.makeCalcdata(r,"theta"),g=r._length,h=new Array(g),o=c,x=f,d=0;d<g;d++)h[d]={p:x[d],s:o[d]};function w(_){var T=r[_];void 0!==T&&(r["_"+_]=Array.isArray(T)?l.makeCalcdata(r,_):l.d2c(T,r.thetaunit))}return"linear"===l.type&&(w("width"),w("offset")),p(r,"marker")&&m(a,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),p(r,"marker.line")&&m(a,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),b(h,r),e(h,r),h},crossTraceCalc:function(a,r,u){for(var s=a.calcdata,i=[],l=0;l<s.length;l++){var c=s[l],f=c[0].trace;!0===f.visible&&n(f,"bar")&&f.subplot===u&&i.push(c)}var g=t({},r.radialaxis,{_id:"x"});v(a,r.angularaxis,g,i,{mode:r.barmode,norm:r.barnorm,gap:r.bargap,groupgap:r.bargroupgap})}}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":927}],667:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../scatterpolar/defaults").handleRThetaDefaults,b=y("../bar/style_defaults"),v=y("./attributes");$.exports=function(e,n,t,a){function r(u,s){return p.coerce(e,n,v,u,s)}m(e,n,a,r)?(r("thetaunit"),r("base"),r("offset"),r("width"),r("text"),r("hovertext"),r("hovertemplate"),b(e,n,r,t,a),p.coerceSelectionMarkerOpacity(n,r)):n.visible=!1}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1001,"./attributes":665}],668:[function(y,$,ee){"use strict";var p=y("../../components/fx"),m=y("../../lib"),b=y("../bar/hover").getTraceColor,v=m.fillText,e=y("../scatterpolar/hover").makeHoverPointText,n=y("../../plots/polar/helpers").isPtInsidePolygon;$.exports=function(t,a,r){var u=t.cd,s=u[0].trace,i=t.subplot,l=i.radialAxis,f=i.vangles,g=f?n:m.isPtInsideSector,h=t.maxHoverDistance,o=i.angularAxis._period||2*Math.PI,x=Math.abs(l.g2p(Math.sqrt(a*a+r*r))),d=Math.atan2(r,a);if(l.range[0]>l.range[1]&&(d+=Math.PI),p.getClosest(u,function(T){return g(x,d,[T.rp0,T.rp1],[T.thetag0,T.thetag1],f)?h+Math.min(1,Math.abs(T.thetag1-T.thetag0)/o)-1+(T.rp1-x)/(T.rp1-T.rp0)-1:1/0},t),!1!==t.index){var w=u[t.index];t.x0=t.x1=w.ct[0],t.y0=t.y1=w.ct[1];var _=m.extendFlat({},w,{r:w.s,theta:w.p});return v(w,s,t),e(_,s,i,t),t.hovertemplate=s.hovertemplate,t.color=b(s,w),t.xLabelVal=t.yLabelVal=void 0,w.s<0&&(t.idealAlign="left"),[t]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1003}],669:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"barpolar",basePlotModule:y("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("../scatterpolar/format_labels"),style:y("../bar/style").style,styleOnSelect:y("../bar/style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":943,"../scatterpolar/format_labels":1002,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(y,$,ee){"use strict";$.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./layout_attributes");$.exports=function(b,v,e){var n,t={};function a(s,i){return p.coerce(b[n]||{},v[n],m,s,i)}for(var r=0;r<e.length;r++){var u=e[r];"barpolar"===u.type&&!0===u.visible&&(t[n=u.subplot]||(a("barmode"),a("bargap"),t[n]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("fast-isnumeric"),b=y("../../lib"),v=y("../../components/drawing"),e=y("../../plots/polar/helpers");$.exports=function(n,t,a){var f,g,h,r=t.xaxis,u=t.yaxis,s=t.radialAxis,i=t.angularAxis,l=(g=(f=t).cxx,h=f.cyy,f.vangles?function(o,x,d,w){var _,T;b.angleDelta(d,w)>0?(_=d,T=w):(_=w,T=d);var k=[e.findEnclosingVertexAngles(_,f.vangles)[0],(_+T)/2,e.findEnclosingVertexAngles(T,f.vangles)[1]];return e.pathPolygonAnnulus(o,x,_,T,k,g,h)}:function(o,x,d,w){return b.pathAnnulus(o,x,d,w,g,h)}),c=t.layers.frontplot.select("g.barlayer");b.makeTraceGroups(c,a,"trace bars").each(function(){var f=p.select(this),g=b.ensureSingle(f,"g","points").selectAll("g.point").data(b.identity);g.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),g.exit().remove(),g.each(function(h){var o,x=p.select(this),d=h.rp0=s.c2p(h.s0),w=h.rp1=s.c2p(h.s1),_=h.thetag0=i.c2g(h.p0),T=h.thetag1=i.c2g(h.p1);if(m(d)&&m(w)&&m(_)&&m(T)&&d!==w&&_!==T){var k=s.c2g(h.s1),L=(_+T)/2;h.ct=[r.c2p(k*Math.cos(L)),u.c2p(k*Math.sin(L))],o=l(d,w,_,T)}else o="M0,0Z";b.ensureSingle(x,"path").attr("d",o)}),v.setClipUrl(f,t._hasClipOnAxisFalse?t.clipIds.forTraces:null,n)})}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(y,$,ee){"use strict";var p=y("../scatter/attributes"),m=y("../bar/attributes"),b=y("../../components/color/attributes"),v=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=y("../../plots/template_attributes").hovertemplateAttrs,n=y("../../lib/extend").extendFlat,t=p.marker,a=t.line;$.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:p.xperiod,yperiod:p.yperiod,xperiod0:p.xperiod0,yperiod0:p.yperiod0,xperiodalignment:p.xperiodalignment,yperiodalignment:p.yperiodalignment,xhoverformat:v("x"),yhoverformat:v("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:n({},t.symbol,{arrayOk:!1,editType:"plot"}),opacity:n({},t.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:n({},t.size,{arrayOk:!1,editType:"calc"}),color:n({},t.color,{arrayOk:!1,editType:"style"}),line:{color:n({},a.color,{arrayOk:!1,dflt:b.defaultLine,editType:"style"}),width:n({},a.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:p.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:{marker:p.selected.marker,editType:"style"},unselected:{marker:p.unselected.marker,editType:"style"},text:n({},p.text,{}),hovertext:n({},p.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":925}],674:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../plots/cartesian/axes"),b=y("../../plots/cartesian/align_period"),v=y("../../lib"),e=y("../../constants/numerical").BADNUM,n=v._;$.exports=function(g,h){var o,x,d,w,_,T,k,L=g._fullLayout,M=m.getFromId(g,h.xaxis||"x"),O=m.getFromId(g,h.yaxis||"y"),P=[],S="violin"===h.type?"_numViolins":"_numBoxes";"h"===h.orientation?(d=M,w="x",_=O,T="y",k=!!h.yperiodalignment):(d=O,w="y",_=M,T="x",k=!!h.xperiodalignment);var E,R,B,H,V,Z,W=function(Ze,Ye,tt,st){var vt,Pt=Ye+"0"in Ze;if(Ye in Ze||Pt&&"d"+Ye in Ze){var rt=tt.makeCalcdata(Ze,Ye);return[b(Ze,tt,Ye,rt).vals,rt]}vt=Pt?Ze[Ye+"0"]:"name"in Ze&&("category"===tt.type||p(Ze.name)&&-1!==["linear","log"].indexOf(tt.type)||v.isDateTime(Ze.name)&&"date"===tt.type)?Ze.name:st;for(var et="multicategory"===tt.type?tt.r2c_just_indices(vt):tt.d2c(vt,0,Ze[Ye+"calendar"]),bt=Ze._length,Rt=new Array(bt),Yt=0;Yt<bt;Yt++)Rt[Yt]=et;return[Rt]}(h,T,_,L[S]),G=W[0],X=W[1],te=v.distinctVals(G,_),D=te.vals,N=te.minDiff/2,U="all"===(h.boxpoints||h.points)?v.identity:function(Ze){return Ze.v<E.lf||Ze.v>E.uf};if(h._hasPreCompStats){var Q=h[w],j=function(Ze){return d.d2c((h[Ze]||[])[o])},J=1/0,K=-1/0;for(o=0;o<h._length;o++){var re=G[o];if(p(re)){if((E={}).pos=E[T]=re,k&&X&&(E.orig_p=X[o]),E.q1=j("q1"),E.med=j("median"),E.q3=j("q3"),R=[],Q&&v.isArrayOrTypedArray(Q[o]))for(x=0;x<Q[o].length;x++)(Z=d.d2c(Q[o][x]))!==e&&(a(V={v:Z,i:[o,x]},h,[o,x]),R.push(V));if(E.pts=R.sort(r),H=(B=E[w]=R.map(u)).length,E.med!==e&&E.q1!==e&&E.q3!==e&&E.med>=E.q1&&E.q3>=E.med){var ne=j("lowerfence");E.lf=ne!==e&&ne<=E.q1?ne:s(E,B,H);var se=j("upperfence");E.uf=se!==e&&se>=E.q3?se:i(E,B,H);var oe=j("mean");E.mean=oe!==e?oe:H?v.mean(B,H):(E.q1+E.q3)/2;var pe=j("sd");E.sd=oe!==e&&pe>=0?pe:H?v.stdev(B,H,E.mean):E.q3-E.q1,E.lo=l(E),E.uo=c(E);var ce=j("notchspan");ce=ce!==e&&ce>0?ce:f(E,H),E.ln=E.med-ce,E.un=E.med+ce;var ge=E.lf,xe=E.uf;h.boxpoints&&B.length&&(ge=Math.min(ge,B[0]),xe=Math.max(xe,B[H-1])),h.notched&&(ge=Math.min(ge,E.ln),xe=Math.max(xe,E.un)),E.min=ge,E.max=xe}else{var we;v.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+E.q1,"median = "+E.med,"q3 = "+E.q3].join("\n")),E.med=we=E.med!==e?E.med:E.q1!==e?E.q3!==e?(E.q1+E.q3)/2:E.q1:E.q3!==e?E.q3:0,E.q1=E.q3=we,E.lf=E.uf=we,E.mean=E.sd=we,E.ln=E.un=we,E.min=E.max=we}J=Math.min(J,E.min),K=Math.max(K,E.max),E.pts2=R.filter(U),P.push(E)}}h._extremes[d._id]=m.findExtremes(d,[J,K],{padded:!0})}else{var be=d.makeCalcdata(h,w),Se=function(Ze,Ye){for(var tt=Ze.length,st=new Array(tt+1),vt=0;vt<tt;vt++)st[vt]=Ze[vt]-Ye;return st[tt]=Ze[tt-1]+Ye,st}(D,N),fe=D.length,me=function(Ze){for(var Ye=new Array(Ze),tt=0;tt<Ze;tt++)Ye[tt]=[];return Ye}(fe);for(o=0;o<h._length;o++)if(p(Z=be[o])){var Te=v.findBin(G[o],Se);Te>=0&&Te<fe&&(a(V={v:Z,i:o},h,o),me[Te].push(V))}var _e=1/0,Me=-1/0,Ie=h.quartilemethod,ze="exclusive"===Ie,Ve="inclusive"===Ie;for(o=0;o<fe;o++)if(me[o].length>0){var Je,De;(E={}).pos=E[T]=D[o],R=E.pts=me[o].sort(r),H=(B=E[w]=R.map(u)).length,E.min=B[0],E.max=B[H-1],E.mean=v.mean(B,H),E.sd=v.stdev(B,H,E.mean),E.med=v.interp(B,.5),H%2&&(ze||Ve)?(ze?(Je=B.slice(0,H/2),De=B.slice(H/2+1)):Ve&&(Je=B.slice(0,H/2+1),De=B.slice(H/2)),E.q1=v.interp(Je,.5),E.q3=v.interp(De,.5)):(E.q1=v.interp(B,.25),E.q3=v.interp(B,.75)),E.lf=s(E,B,H),E.uf=i(E,B,H),E.lo=l(E),E.uo=c(E);var Be=f(E,H);E.ln=E.med-Be,E.un=E.med+Be,_e=Math.min(_e,E.ln),Me=Math.max(Me,E.un),E.pts2=R.filter(U),P.push(E)}h._extremes[d._id]=m.findExtremes(d,h.notched?be.concat([_e,Me]):be,{padded:!0})}return function(Ze,Ye){if(v.isArrayOrTypedArray(Ye.selectedpoints))for(var tt=0;tt<Ze.length;tt++){for(var st=Ze[tt].pts||[],vt={},Pt=0;Pt<st.length;Pt++)vt[st[Pt].i]=Pt;v.tagSelected(st,Ye,vt)}}(P,h),P.length>0?(P[0].t={num:L[S],dPos:N,posLetter:T,valLetter:w,labels:{med:n(g,"median:"),min:n(g,"min:"),q1:n(g,"q1:"),q3:n(g,"q3:"),max:n(g,"max:"),mean:n(g,"sd"===h.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:n(g,"lower fence:"),uf:n(g,"upper fence:")}},L[S]++,P):[{t:{empty:!0}}]};var t={text:"tx",hovertext:"htx"};function a(g,h,o){for(var x in t)v.isArrayOrTypedArray(h[x])&&(Array.isArray(o)?v.isArrayOrTypedArray(h[x][o[0]])&&(g[t[x]]=h[x][o[0]][o[1]]):g[t[x]]=h[x][o])}function r(g,h){return g.v-h.v}function u(g){return g.v}function s(g,h,o){return 0===o?g.q1:Math.min(g.q1,h[Math.min(v.findBin(2.5*g.q1-1.5*g.q3,h,!0)+1,o-1)])}function i(g,h,o){return 0===o?g.q3:Math.max(g.q3,h[Math.max(v.findBin(2.5*g.q3-1.5*g.q1,h),0)])}function l(g){return 4*g.q1-3*g.q3}function c(g){return 4*g.q3-3*g.q1}function f(g,h){return 0===h?0:1.57*(g.q3-g.q1)/Math.sqrt(h)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes"),m=y("../../lib"),b=y("../../plots/cartesian/constraints").getAxisGroup,v=["v","h"];function e(n,t,a,r){var u,s,i,l=t.calcdata,c=t._fullLayout,f=r._id,g=f.charAt(0),h=[],o=0;for(u=0;u<a.length;u++)for(i=l[a[u]],s=0;s<i.length;s++)h.push(r.c2l(i[s].pos,!0)),o+=(i[s].pts2||[]).length;if(h.length){var x=m.distinctVals(h);"category"!==r.type&&"multicategory"!==r.type||(x.minDiff=1);var d=x.minDiff/2;p.minDtick(r,x.minDiff,x.vals[0],!0);var w=c["violin"===n?"_numViolins":"_numBoxes"],_="group"===c[n+"mode"]&&w>1,T=1-c[n+"gap"],k=1-c[n+"groupgap"];for(u=0;u<a.length;u++){var L,M,O,P,S,E,R=(i=l[a[u]])[0].trace,B=i[0].t,H=R.width,V=R.side;if(H)L=M=P=H/2,O=0;else if(L=d,_){var Z=b(c,r._id)+R.orientation,G=Object.keys(((c._alignmentOpts[Z]||{})[R.alignmentgroup]||{}).offsetGroups||{}).length,X=G||w;M=L*T*k/X,O=2*L*(((G?R._offsetIndex:B.num)+.5)/X-.5)*T,P=L*T/X}else M=L*T*k,O=0,P=L;B.dPos=L,B.bPos=O,B.bdPos=M,B.wHover=P;var te,D,N,U,Q,j,J=O+M,K=Boolean(H);if("positive"===V?(S=L*(H?1:.5),te=J,E=te=O):"negative"===V?(S=te=O,E=L*(H?1:.5),D=J):(S=E=L,te=D=J),(R.boxpoints||R.points)&&o>0){var re=R.pointpos,ne=R.jitter,se=R.marker.size/2,oe=0;re+ne>=0&&((oe=J*(re+ne))>S?(K=!0,Q=se,N=oe):oe>te&&(Q=se,N=S)),oe<=S&&(N=S);var pe=0;re-ne<=0&&((pe=-J*(re-ne))>E?(K=!0,j=se,U=pe):pe>D&&(j=se,U=E)),pe<=E&&(U=E)}else N=S,U=E;var ce=new Array(i.length);for(s=0;s<i.length;s++)ce[s]=i[s].pos;R._extremes[f]=p.findExtremes(r,ce,{padded:K,vpadminus:U,vpadplus:N,vpadLinearized:!0,ppadminus:{x:j,y:Q}[g],ppadplus:{x:Q,y:j}[g]})}}}$.exports={crossTraceCalc:function(n,t){for(var a=n.calcdata,r=t.xaxis,u=t.yaxis,s=0;s<v.length;s++){for(var i=v[s],l="h"===i?u:r,c=[],f=0;f<a.length;f++){var g=a[f],o=g[0].trace;!0!==o.visible||"box"!==o.type&&"candlestick"!==o.type||g[0].t.empty||(o.orientation||"v")!==i||o.xaxis!==r._id||o.yaxis!==u._id||c.push(f)}e("box",n,c,l)}},setPositionOffset:e}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../registry"),b=y("../../components/color"),v=y("../scatter/period_defaults"),e=y("../bar/defaults").handleGroupingDefaults,n=y("../../plots/cartesian/axis_autotype"),t=y("./attributes");function a(u,s,i,l){function c(V){var Z=0;return V&&V.length&&(Z+=1,p.isArrayOrTypedArray(V[0])&&V[0].length&&(Z+=1)),Z}function f(V){return p.validate(u[V],t[V])}var g,h=i("y"),o=i("x");if("box"===s.type){var x=i("q1"),d=i("median"),w=i("q3");s._hasPreCompStats=x&&x.length&&d&&d.length&&w&&w.length,g=Math.min(p.minRowLength(x),p.minRowLength(d),p.minRowLength(w))}var _,T,k=c(h),L=c(o),M=k&&p.minRowLength(h),O=L&&p.minRowLength(o),P=l.calendar,S={autotypenumbers:l.autotypenumbers};if(s._hasPreCompStats)switch(String(L)+String(k)){case"00":var E=f("x0")||f("dx");_=!f("y0")&&!f("dy")||E?"v":"h",T=g;break;case"10":_="v",T=Math.min(g,O);break;case"20":_="h",T=Math.min(g,o.length);break;case"01":_="h",T=Math.min(g,M);break;case"02":_="v",T=Math.min(g,h.length);break;case"12":_="v",T=Math.min(g,O,h.length);break;case"21":_="h",T=Math.min(g,o.length,M);break;case"11":T=0;break;case"22":var R,B=!1;for(R=0;R<o.length;R++)if("category"===n(o[R],P,S)){B=!0;break}if(B)_="v",T=Math.min(g,O,h.length);else{for(R=0;R<h.length;R++)if("category"===n(h[R],P,S)){B=!0;break}B?(_="h",T=Math.min(g,o.length,M)):(_="v",T=Math.min(g,O,h.length))}}else k>0?(_="v",T=L>0?Math.min(O,M):Math.min(M)):L>0?(_="h",T=Math.min(O)):T=0;if(T){s._length=T;var H=i("orientation",_);s._hasPreCompStats?"v"===H&&0===L?(i("x0",0),i("dx",1)):"h"===H&&0===k&&(i("y0",0),i("dy",1)):"v"===H&&0===L?i("x0"):"h"===H&&0===k&&i("y0"),m.getComponentMethod("calendars","handleTraceDefaults")(u,s,["x","y"],l)}else s.visible=!1}function r(u,s,i,l){var c=l.prefix,f=p.coerce2(u,s,t,"marker.outliercolor"),g=i("marker.line.outliercolor"),h="outliers";s._hasPreCompStats?h="all":(f||g)&&(h="suspectedoutliers");var o=i(c+"points",h);o?(i("jitter","all"===o?.3:0),i("pointpos","all"===o?-1.5:0),i("marker.symbol"),i("marker.opacity"),i("marker.size"),i("marker.color",s.line.color),i("marker.line.color"),i("marker.line.width"),"suspectedoutliers"===o&&(i("marker.line.outliercolor",s.marker.color),i("marker.line.outlierwidth")),i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size"),i("text"),i("hovertext")):delete s.marker;var x=i("hoveron");"all"!==x&&-1===x.indexOf("points")||i("hovertemplate"),p.coerceSelectionMarkerOpacity(s,i)}$.exports={supplyDefaults:function(u,s,i,l){function c(w,_){return p.coerce(u,s,t,w,_)}if(a(u,s,c,l),!1!==s.visible){v(u,s,l,c),c("xhoverformat"),c("yhoverformat");var f=s._hasPreCompStats;f&&(c("lowerfence"),c("upperfence")),c("line.color",(u.marker||{}).color||i),c("line.width"),c("fillcolor",b.addOpacity(s.line.color,.5));var g=!1;if(f){var h=c("mean"),o=c("sd");h&&h.length&&(g=!0,o&&o.length&&(g="sd"))}c("boxmean",g),c("whiskerwidth"),c("width"),c("quartilemethod");var x=!1;if(f){var d=c("notchspan");d&&d.length&&(x=!0)}else p.validate(u.notchwidth,t.notchwidth)&&(x=!0);c("notched",x)&&c("notchwidth"),r(u,s,c,{prefix:"box"})}},crossTraceDefaults:function(u,s){var l;function c(h){return p.coerce(l._input,l,t,h)}for(var f=0;f<u.length;f++){var g=(l=u[f]).type;"box"!==g&&"violin"!==g||"group"===s[g+"mode"]&&e(l._input,l,s,c)}},handleSampleDefaults:a,handlePointsDefaults:r}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":945,"./attributes":673}],677:[function(y,$,ee){"use strict";$.exports=function(p,m){return m.hoverOnBox&&(p.hoverOnBox=m.hoverOnBox),"xVal"in m&&(p.x=m.xVal),"yVal"in m&&(p.y=m.yVal),m.xa&&(p.xaxis=m.xa),m.ya&&(p.yaxis=m.ya),p}},{}],678:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes"),m=y("../../lib"),b=y("../../components/fx"),v=y("../../components/color"),e=m.fillText;function n(a,r,u,s){var i,l,c,f,g,h,o,x,d,w,_,T,k,L,M=a.cd,O=a.xa,P=a.ya,S=M[0].trace,E=M[0].t,R="violin"===S.type,B=[],H=E.bdPos,V=E.wHover,Z=function(oe){return c.c2l(oe.pos)+E.bPos-c.c2l(h)};R&&"both"!==S.side?("positive"===S.side&&(d=function(oe){var pe=Z(oe);return b.inbox(pe,pe+V,w)},T=H,k=0),"negative"===S.side&&(d=function(oe){var pe=Z(oe);return b.inbox(pe-V,pe,w)},T=0,k=H)):(d=function(oe){var pe=Z(oe);return b.inbox(pe-V,pe+V,w)},T=k=H),L=R?function(oe){return b.inbox(oe.span[0]-g,oe.span[1]-g,w)}:function(oe){return b.inbox(oe.min-g,oe.max-g,w)},"h"===S.orientation?(g=r,h=u,o=L,x=d,i="y",c=P,l="x",f=O):(g=u,h=r,o=d,x=L,i="x",c=O,l="y",f=P);var W=Math.min(1,H/Math.abs(c.r2c(c.range[1])-c.r2c(c.range[0])));function G(oe){return(o(oe)+x(oe))/2}w=a.maxHoverDistance-W,_=a.maxSpikeDistance-W;var X=b.getDistanceFunction(s,o,x,G);if(b.getClosest(M,X,a),!1===a.index)return[];var te=M[a.index],D=S.line.color,N=(S.marker||{}).color;a.color=v.opacity(D)&&S.line.width?D:v.opacity(N)&&S.boxpoints?N:S.fillcolor,a[i+"0"]=c.c2p(te.pos+E.bPos-k,!0),a[i+"1"]=c.c2p(te.pos+E.bPos+T,!0),a[i+"LabelVal"]=void 0!==te.orig_p?te.orig_p:te.pos;var U=i+"Spike";a.spikeDistance=G(te)*_/w,a[U]=c.c2p(te.pos,!0);var Q={},j=["med","q1","q3","min","max"];(S.boxmean||(S.meanline||{}).visible)&&j.push("mean"),(S.boxpoints||S.points)&&j.push("lf","uf");for(var J=0;J<j.length;J++){var K=j[J];if(K in te&&!(te[K]in Q)){Q[te[K]]=!0;var re=te[K],ne=f.c2p(re,!0),se=m.extendFlat({},a);se.attr=K,se[l+"0"]=se[l+"1"]=ne,se[l+"LabelVal"]=re,se[l+"Label"]=(E.labels?E.labels[K]+" ":"")+p.hoverLabelText(f,re,S[l+"hoverformat"]),se.hoverOnBox=!0,"mean"===K&&"sd"in te&&"sd"===S.boxmean&&(se[l+"err"]=te.sd),a.name="",a.spikeDistance=void 0,a[U]=void 0,se.hovertemplate=!1,B.push(se)}}return B}function t(a,r,u){for(var s,i,l,c=a.cd,f=a.xa,g=a.ya,h=c[0].trace,o=f.c2p(r),x=g.c2p(u),d=b.quadrature(function(R){var B=Math.max(3,R.mrc||0);return Math.max(Math.abs(f.c2p(R.x)-o)-B,1-3/B)},function(R){var B=Math.max(3,R.mrc||0);return Math.max(Math.abs(g.c2p(R.y)-x)-B,1-3/B)}),w=!1,_=0;_<c.length;_++){i=c[_];for(var T=0;T<(i.pts||[]).length;T++){var k=d(l=i.pts[T]);k<=a.distance&&(a.distance=k,w=[_,T])}}if(!w)return!1;l=(i=c[w[0]]).pts[w[1]];var L=f.c2p(l.x,!0),M=g.c2p(l.y,!0),O=l.mrc||1;s=m.extendFlat({},a,{index:l.i,color:(h.marker||{}).color,name:h.name,x0:L-O,x1:L+O,y0:M-O,y1:M+O,spikeDistance:a.distance,hovertemplate:h.hovertemplate});var P,S=i.orig_p,E=void 0!==S?S:i.pos;return"h"===h.orientation?(P=g,s.xLabelVal=l.x,s.yLabelVal=E):(P=f,s.xLabelVal=E,s.yLabelVal=l.y),s[P._id.charAt(0)+"Spike"]=P.c2p(i.pos,!0),e(l,h,s),s}$.exports={hoverPoints:function(a,r,u,s){var i,l=a.cd[0].trace.hoveron,c=[];return-1!==l.indexOf("boxes")&&(c=c.concat(n(a,r,u,s))),-1!==l.indexOf("points")&&(i=t(a,r,u)),"closest"===s?i?[i]:c:(i&&c.push(i),c)},hoverOnBoxes:n,hoverOnPoints:t}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults").supplyDefaults,crossTraceDefaults:y("./defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults").supplyLayoutDefaults,calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc").crossTraceCalc,plot:y("./plot").plot,style:y("./style").style,styleOnSelect:y("./style").styleOnSelect,hoverPoints:y("./hover").hoverPoints,eventData:y("./event_data"),selectPoints:y("./select"),moduleType:"trace",name:"box",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(y,$,ee){"use strict";$.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../lib"),b=y("./layout_attributes");function v(e,n,t,a,r){for(var u=r+"Layout",s=!1,i=0;i<t.length;i++)if(p.traceIs(t[i],u)){s=!0;break}s&&(a(r+"mode"),a(r+"gap"),a(r+"groupgap"))}$.exports={supplyLayoutDefaults:function(e,n,t){v(0,0,t,function(a,r){return m.coerce(e,n,b,a,r)},"box")},_supply:v}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=y("../../components/drawing");function v(t,a,r,u){var s,i,l="h"===r.orientation,c=a.val,f=a.pos,g=!!f.rangebreaks,h=u.bPos,o=u.wdPos||0,x=u.bPosPxOffset||0,d=r.whiskerwidth||0,w=r.notched||!1,_=w?1-2*r.notchwidth:1;Array.isArray(u.bdPos)?(s=u.bdPos[0],i=u.bdPos[1]):(s=u.bdPos,i=u.bdPos);var T=t.selectAll("path.box").data("violin"!==r.type||r.box.visible?m.identity:[]);T.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),T.exit().remove(),T.each(function(k){if(k.empty)return"M0,0Z";var L=f.c2l(k.pos+h,!0),M=f.l2p(L-s)+x,O=f.l2p(L+i)+x,P=g?(M+O)/2:f.l2p(L)+x,S=r.whiskerwidth,E=g?M*S+(1-S)*P:f.l2p(L-o)+x,R=g?O*S+(1-S)*P:f.l2p(L+o)+x,B=f.l2p(L-s*_)+x,H=f.l2p(L+i*_)+x,V=c.c2p(k.q1,!0),Z=c.c2p(k.q3,!0),W=m.constrain(c.c2p(k.med,!0),Math.min(V,Z)+1,Math.max(V,Z)-1),G=void 0===k.lf||!1===r.boxpoints,X=c.c2p(G?k.min:k.lf,!0),te=c.c2p(G?k.max:k.uf,!0),D=c.c2p(k.ln,!0),N=c.c2p(k.un,!0);l?p.select(this).attr("d","M"+W+","+B+"V"+H+"M"+V+","+M+"V"+O+(w?"H"+D+"L"+W+","+H+"L"+N+","+O:"")+"H"+Z+"V"+M+(w?"H"+N+"L"+W+","+B+"L"+D+","+M:"")+"ZM"+V+","+P+"H"+X+"M"+Z+","+P+"H"+te+(0===d?"":"M"+X+","+E+"V"+R+"M"+te+","+E+"V"+R)):p.select(this).attr("d","M"+B+","+W+"H"+H+"M"+M+","+V+"H"+O+(w?"V"+D+"L"+H+","+W+"L"+O+","+N:"")+"V"+Z+"H"+M+(w?"V"+N+"L"+B+","+W+"L"+M+","+D:"")+"ZM"+P+","+V+"V"+X+"M"+P+","+Z+"V"+te+(0===d?"":"M"+E+","+X+"H"+R+"M"+E+","+te+"H"+R))})}function e(t,a,r,u){var s=a.x,i=a.y,l=u.bdPos,c=u.bPos,f=r.boxpoints||r.points;m.seedPseudoRandom();var g=t.selectAll("g.points").data(f?function(o){return o.forEach(function(x){x.t=u,x.trace=r}),o}:[]);g.enter().append("g").attr("class","points"),g.exit().remove();var h=g.selectAll("path").data(function(o){var x,d,w=o.pts2,_=Math.max((o.max-o.min)/10,o.q3-o.q1),T=1e-9*_,k=.01*_,L=[],M=0;if(r.jitter){if(0===_)for(M=1,L=new Array(w.length),x=0;x<w.length;x++)L[x]=1;else for(x=0;x<w.length;x++){var O=Math.max(0,x-5),P=w[O].v,S=Math.min(w.length-1,x+5),E=w[S].v;"all"!==f&&(w[x].v<o.lf?E=Math.min(E,o.lf):P=Math.max(P,o.uf));var R=Math.sqrt(k*(S-O)/(E-P+T))||0;R=m.constrain(Math.abs(R),0,1),L.push(R),M=Math.max(R,M)}d=2*r.jitter/(M||1)}for(x=0;x<w.length;x++){var B=w[x],H=B.v,V=r.jitter?d*L[x]*(m.pseudoRandom()-.5):0,Z=o.pos+c+l*(r.pointpos+V);"h"===r.orientation?(B.y=Z,B.x=H):(B.x=Z,B.y=H),"suspectedoutliers"===f&&H<o.uo&&H>o.lo&&(B.so=!0)}return w});h.enter().append("path").classed("point",!0),h.exit().remove(),h.call(b.translatePoints,s,i)}function n(t,a,r,u){var s,i,l=a.val,c=a.pos,f=!!c.rangebreaks,g=u.bPos,h=u.bPosPxOffset||0,o=r.boxmean||(r.meanline||{}).visible;Array.isArray(u.bdPos)?(s=u.bdPos[0],i=u.bdPos[1]):(s=u.bdPos,i=u.bdPos);var x=t.selectAll("path.mean").data("box"===r.type&&r.boxmean||"violin"===r.type&&r.box.visible&&r.meanline.visible?m.identity:[]);x.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),x.exit().remove(),x.each(function(d){var w=c.c2l(d.pos+g,!0),_=c.l2p(w-s)+h,T=c.l2p(w+i)+h,k=f?(_+T)/2:c.l2p(w)+h,L=l.c2p(d.mean,!0),M=l.c2p(d.mean-d.sd,!0),O=l.c2p(d.mean+d.sd,!0);"h"===r.orientation?p.select(this).attr("d","M"+L+","+_+"V"+T+("sd"===o?"m0,0L"+M+","+k+"L"+L+","+_+"L"+O+","+k+"Z":"")):p.select(this).attr("d","M"+_+","+L+"H"+T+("sd"===o?"m0,0L"+k+","+M+"L"+_+","+L+"L"+k+","+O+"Z":""))})}$.exports={plot:function(t,a,r,u){var s=a.xaxis,i=a.yaxis;m.makeTraceGroups(u,r,"trace boxes").each(function(l){var c,f,g=p.select(this),h=l[0],o=h.t,x=h.trace;o.wdPos=o.bdPos*x.whiskerwidth,!0!==x.visible||o.empty?g.remove():("h"===x.orientation?(c=i,f=s):(c=s,f=i),v(g,{pos:c,val:f},x,o),e(g,{x:s,y:i},x,o),n(g,{pos:c,val:f},x,o))})},plotBoxAndWhiskers:v,plotPoints:e,plotBoxMean:n}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(y,$,ee){"use strict";$.exports=function(p,m){var b,v,e=p.cd,n=p.xaxis,t=p.yaxis,a=[];if(!1===m)for(b=0;b<e.length;b++)for(v=0;v<(e[b].pts||[]).length;v++)e[b].pts[v].selected=0;else for(b=0;b<e.length;b++)for(v=0;v<(e[b].pts||[]).length;v++){var r=e[b].pts[v],u=n.c2p(r.x),s=t.c2p(r.y);m.contains([u,s],null,r.i,p)?(a.push({pointNumber:r.i,x:n.c2d(r.x),y:t.c2d(r.y)}),r.selected=1):r.selected=0}return a}},{}],684:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/color"),b=y("../../components/drawing");$.exports={style:function(v,e,n){var t=n||p.select(v).selectAll("g.trace.boxes");t.style("opacity",function(a){return a[0].trace.opacity}),t.each(function(a){var r=p.select(this),u=a[0].trace,s=u.line.width;function i(f,g,h,o){f.style("stroke-width",g+"px").call(m.stroke,h).call(m.fill,o)}var l=r.selectAll("path.box");if("candlestick"===u.type)l.each(function(f){if(!f.empty){var g=p.select(this),h=u[f.dir];i(g,h.line.width,h.line.color,h.fillcolor),g.style("opacity",u.selectedpoints&&!f.selected?.3:1)}});else{i(l,s,u.line.color,u.fillcolor),r.selectAll("path.mean").style({"stroke-width":s,"stroke-dasharray":2*s+"px,"+s+"px"}).call(m.stroke,u.line.color);var c=r.selectAll("path.point");b.pointStyle(c,u,v)}})},styleOnSelect:function(v,e,n){var t=e[0].trace,a=n.selectAll("path.point");t.selectedpoints?b.selectedPointStyle(a,t):b.pointStyle(a,t,v)}}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(y,$,ee){"use strict";var p=y("../../lib").extendFlat,m=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=y("../ohlc/attributes"),v=y("../box/attributes");function e(n){return{line:{color:p({},v.line.color,{dflt:n}),width:v.line.width,editType:"style"},fillcolor:v.fillcolor,editType:"style"}}$.exports={xperiod:b.xperiod,xperiod0:b.xperiod0,xperiodalignment:b.xperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),x:b.x,open:b.open,high:b.high,low:b.low,close:b.close,line:{width:p({},v.line.width,{}),editType:"style"},increasing:e(b.increasing.line.color.dflt),decreasing:e(b.decreasing.line.color.dflt),text:b.text,hovertext:b.hovertext,whiskerwidth:p({},v.whiskerwidth,{dflt:0}),hoverlabel:b.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":871}],686:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/cartesian/axes"),b=y("../../plots/cartesian/align_period"),v=y("../ohlc/calc").calcCommon;function e(n,t,a,r){return{min:a,q1:Math.min(n,r),med:r,q3:Math.max(n,r),max:t}}$.exports=function(n,t){var a=n._fullLayout,r=m.getFromId(n,t.xaxis),u=m.getFromId(n,t.yaxis),s=r.makeCalcdata(t,"x"),i=b(t,r,"x",s).vals,l=v(n,t,s,i,u,e);return l.length?(p.extendFlat(l[0].t,{num:a._numBoxes,dPos:p.distinctVals(i).minDiff/2,posLetter:"x",valLetter:"y"}),a._numBoxes++,l):[{t:{empty:!0}}]}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":872}],687:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/color"),b=y("../ohlc/ohlc_defaults"),v=y("../scatter/period_defaults"),e=y("./attributes");function n(t,a,r,u){var s=r(u+".line.color");r(u+".line.width",a.line.width),r(u+".fillcolor",m.addOpacity(s,.5))}$.exports=function(t,a,r,u){function s(i,l){return p.coerce(t,a,e,i,l)}b(t,a,s,u)?(v(t,a,u,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),n(0,a,s,"increasing"),n(0,a,s,"decreasing"),s("text"),s("hovertext"),s("whiskerwidth"),u._requestRangeslider[a.xaxis]=!0):a.visible=!1}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":876,"../scatter/period_defaults":945,"./attributes":685}],688:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"candlestick",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:y("./attributes"),layoutAttributes:y("../box/layout_attributes"),supplyLayoutDefaults:y("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:y("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("../box/plot").plot,layerName:"boxlayer",style:y("../box/style").style,hoverPoints:y("../ohlc/hover").hoverPoints,selectPoints:y("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":874,"../ohlc/select":878,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(y,$,ee){"use strict";var p=y("./axis_defaults"),m=y("../../plot_api/plot_template");$.exports=function(b,v,e,n,t){var a,r,u,s;n("a")||(n("da"),n("a0")),n("b")||(n("db"),n("b0")),a=b,r=v,u=e,s=t,["aaxis","baxis"].forEach(function(i){var l=i.charAt(0),c=a[i]||{},f=m.newContainer(r,i);p(c,f,{tickfont:"x",id:l+"axis",letter:l,font:r.font,name:i,data:a[l],calendar:r.calendar,dfltColor:s,bgColor:u.paper_bgcolor,autotypenumbersDflt:u.autotypenumbers,fullLayout:u}),f._categories=f._categories||[],a[i]||"-"===c.type||(a[i]={type:c.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(y,$,ee){"use strict";var p=y("../../lib").isArrayOrTypedArray;$.exports=function(m){return function b(v,e){if(!p(v)||e>=10)return null;for(var n=1/0,t=-1/0,a=v.length,r=0;r<a;r++){var u=v[r];if(p(u)){var s=b(u,e+1);s&&(n=Math.min(s[0],n),t=Math.max(s[1],t))}else n=Math.min(u,n),t=Math.max(u,t)}return[n,t]}(m,0)}},{"../../lib":503}],691:[function(y,$,ee){"use strict";var p=y("../../plots/font_attributes"),m=y("./axis_attributes"),b=y("../../components/color/attributes"),v=p({editType:"calc"});v.family.dflt='"Open Sans", verdana, arial, sans-serif',v.size.dflt=12,v.color.dflt=b.defaultLine,$.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:m,baxis:m,font:v,color:{valType:"color",dflt:b.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(y,$,ee){"use strict";var p=y("../../lib").isArrayOrTypedArray;$.exports=function(m,b,v,e){var n,t,a,r,u,s,i,l,c,f,g,h,o,x=p(v)?"a":"b",d=("a"===x?m.aaxis:m.baxis).smoothing,w="a"===x?m.a2i:m.b2j,_="a"===x?v:e,T="a"===x?e:v,k="a"===x?b.a.length:b.b.length,L="a"===x?b.b.length:b.a.length,M=Math.floor("a"===x?m.b2j(T):m.a2i(T)),O="a"===x?function(te){return m.evalxy([],te,M)}:function(te){return m.evalxy([],M,te)};d&&(a=Math.max(0,Math.min(L-2,M)),r=M-a,t="a"===x?function(te,D){return m.dxydi([],te,a,D,r)}:function(te,D){return m.dxydj([],a,te,r,D)});var P=w(_[0]),S=w(_[1]),E=P<S?1:-1,R=1e-8*(S-P),B=E>0?Math.floor:Math.ceil,H=E>0?Math.ceil:Math.floor,V=E>0?Math.min:Math.max,Z=E>0?Math.max:Math.min,W=B(P+R),G=H(S-R),X=[[i=O(P)]];for(n=W;n*E<G*E;n+=E)u=[],g=Z(P,n),o=(h=V(S,n+E))-g,s=Math.max(0,Math.min(k-2,Math.floor(.5*(g+h)))),l=O(h),d&&(c=t(s,g-s),f=t(s,h-s),u.push([i[0]+c[0]/3*o,i[1]+c[1]/3*o]),u.push([l[0]-f[0]/3*o,l[1]-f[1]/3*o])),u.push(l),X.push(u),i=l;return X}},{"../../lib":503}],693:[function(y,$,ee){"use strict";var p=y("../../plots/font_attributes"),m=y("../../components/color/attributes"),b=y("../../plots/cartesian/layout_attributes"),v=y("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=y("../../plot_api/edit_types").overrideAll;$.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:p({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:b.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:p({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:v("tick label")},tickformatstops:e(b.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:m.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:m.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:p({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(y,$,ee){"use strict";var p=y("./attributes"),m=y("../../components/color").addOpacity,b=y("../../registry"),v=y("../../lib"),e=y("../../plots/cartesian/tick_value_defaults"),n=y("../../plots/cartesian/tick_label_defaults"),t=y("../../plots/cartesian/prefix_suffix_defaults"),a=y("../../plots/cartesian/category_order_defaults"),r=y("../../plots/cartesian/set_convert"),u=y("../../plots/cartesian/axis_autotype");$.exports=function(s,i,l){var c=l.letter,f=l.font||{},g=p[c+"axis"];function h(S,E){return v.coerce(s,i,g,S,E)}function o(S,E){return v.coerce2(s,i,g,S,E)}l.name&&(i._name=l.name,i._id=l.name),h("autotypenumbers",l.autotypenumbersDflt);var x=h("type");"-"===x&&(l.data&&function(S,E){if("-"===S.type){var R=S._id.charAt(0);S.type=u(E,S[R+"calendar"],{autotypenumbers:S.autotypenumbers})}}(i,l.data),"-"===i.type?i.type="linear":x=s.type=i.type),h("smoothing"),h("cheatertype"),h("showticklabels"),h("labelprefix",c+" = "),h("labelsuffix"),h("showtickprefix"),h("showticksuffix"),h("separatethousands"),h("tickformat"),h("exponentformat"),h("minexponent"),h("showexponent"),h("categoryorder"),h("tickmode"),h("tickvals"),h("ticktext"),h("tick0"),h("dtick"),"array"===i.tickmode&&(h("arraytick0"),h("arraydtick")),h("labelpadding"),i._hovertitle=c,"date"===x&&b.getComponentMethod("calendars","handleDefaults")(s,i,"calendar",l.calendar),r(i,l.fullLayout),i.c2p=v.identity;var d=h("color",l.dfltColor),w=d===s.color?d:f.color;h("title.text")&&(v.coerceFont(h,"title.font",{family:f.family,size:v.bigFont(f.size),color:w}),h("title.offset")),h("tickangle"),h("autorange",!i.isValidRange(s.range))&&h("rangemode"),h("range"),i.cleanRange(),h("fixedrange"),e(s,i,h,x),t(s,i,h,x,l),n(s,i,h,x,l),a(s,i,h,{data:l.data,dataAttr:c});var _=o("gridcolor",m(d,.3)),T=o("gridwidth"),k=h("showgrid");k||(delete i.gridcolor,delete i.gridwidth);var L=o("startlinecolor",d),M=o("startlinewidth",T);h("startline",i.showgrid||!!L||!!M)||(delete i.startlinecolor,delete i.startlinewidth);var O=o("endlinecolor",d),P=o("endlinewidth",T);return h("endline",i.showgrid||!!O||!!P)||(delete i.endlinecolor,delete i.endlinewidth),k?(h("minorgridcount"),h("minorgridwidth",T),h("minorgridcolor",m(_,.06)),i.minorgridcount||(delete i.minorgridwidth,delete i.minorgridcolor)):(delete i.gridcolor,delete i.gridWidth),"none"===i.showticklabels&&(delete i.tickfont,delete i.tickangle,delete i.showexponent,delete i.exponentformat,delete i.minexponent,delete i.tickformat,delete i.showticksuffix,delete i.showtickprefix),i.showticksuffix||delete i.ticksuffix,i.showtickprefix||delete i.tickprefix,h("tickmode"),i}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes"),m=y("../../lib").isArray1D,b=y("./cheater_basis"),v=y("./array_minmax"),e=y("./calc_gridlines"),n=y("./calc_labels"),t=y("./calc_clippath"),a=y("../heatmap/clean_2d_array"),r=y("./smooth_fill_2d_array"),u=y("../heatmap/convert_column_xyz"),s=y("./set_convert");$.exports=function(i,l){var c=p.getFromId(i,l.xaxis),f=p.getFromId(i,l.yaxis),g=l.aaxis,h=l.baxis,o=l.x,x=l.y,d=[];o&&m(o)&&d.push("x"),x&&m(x)&&d.push("y"),d.length&&u(l,g,h,"a","b",d);var w=l._a=l._a||l.a,_=l._b=l._b||l.b;o=l._x||l.x,x=l._y||l.y;var T={};l._cheater&&(o=b("index"===g.cheatertype?w.length:w,"index"===h.cheatertype?_.length:_,l.cheaterslope)),l._x=o=a(o),l._y=x=a(x),r(o,w,_),r(x,w,_),s(l),l.setScale();var M=v(o),O=v(x),P=.5*(M[1]-M[0]),S=.5*(M[1]+M[0]),E=.5*(O[1]-O[0]),R=.5*(O[1]+O[0]);return O=[R-1.3*E,R+1.3*E],l._extremes[c._id]=p.findExtremes(c,M=[S-1.3*P,S+1.3*P],{padded:!0}),l._extremes[f._id]=p.findExtremes(f,O,{padded:!0}),e(l,"a","b"),e(l,"b","a"),n(l,g),n(l,h),T.clipsegments=t(l._xctrl,l._yctrl,g,h),T.x=o,T.y=x,T.a=w,T.b=_,[T]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(y,$,ee){"use strict";$.exports=function(p,m,b,v){var e,n,t,a=[],r=!!b.smoothing,u=!!v.smoothing,s=p[0].length-1,i=p.length-1;for(e=0,n=[],t=[];e<=s;e++)n[e]=p[0][e],t[e]=m[0][e];for(a.push({x:n,y:t,bicubic:r}),e=0,n=[],t=[];e<=i;e++)n[e]=p[e][s],t[e]=m[e][s];for(a.push({x:n,y:t,bicubic:u}),e=s,n=[],t=[];e>=0;e--)n[s-e]=p[i][e],t[s-e]=m[i][e];for(a.push({x:n,y:t,bicubic:r}),e=i,n=[],t=[];e>=0;e--)n[i-e]=p[e][0],t[i-e]=m[e][0];return a.push({x:n,y:t,bicubic:u}),a}},{}],697:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes"),m=y("../../lib/extend").extendFlat;$.exports=function(b,v,e){var n,t,a,r,u,s,i,l,c,f,g,h,o,x,d=b["_"+v],w=b[v+"axis"],_=w._gridlines=[],T=w._minorgridlines=[],k=w._boundarylines=[],L=b["_"+e],M=b[e+"axis"];"array"===w.tickmode&&(w.tickvals=d.slice());var O=b._xctrl,P=b._yctrl,S=O[0].length,E=O.length,R=b._a.length,B=b._b.length;p.prepTicks(w),"array"===w.tickmode&&delete w.tickvals;var H=w.smoothing?3:1;function V(W){var G,X,te,D,N,U,Q,j,J,K,re,ne,se=[],oe=[],pe={};if("b"===v)for(X=b.b2j(W),te=Math.floor(Math.max(0,Math.min(B-2,X))),D=X-te,pe.length=B,pe.crossLength=R,pe.xy=function(ce){return b.evalxy([],ce,X)},pe.dxy=function(ce,ge){return b.dxydi([],ce,te,ge,D)},G=0;G<R;G++)U=Math.min(R-2,G),Q=G-U,j=b.evalxy([],G,X),M.smoothing&&G>0&&(J=b.dxydi([],G-1,te,0,D),se.push(N[0]+J[0]/3),oe.push(N[1]+J[1]/3),K=b.dxydi([],G-1,te,1,D),se.push(j[0]-K[0]/3),oe.push(j[1]-K[1]/3)),se.push(j[0]),oe.push(j[1]),N=j;else for(G=b.a2i(W),U=Math.floor(Math.max(0,Math.min(R-2,G))),Q=G-U,pe.length=R,pe.crossLength=B,pe.xy=function(ce){return b.evalxy([],G,ce)},pe.dxy=function(ce,ge){return b.dxydj([],U,ce,Q,ge)},X=0;X<B;X++)te=Math.min(B-2,X),D=X-te,j=b.evalxy([],G,X),M.smoothing&&X>0&&(re=b.dxydj([],U,X-1,Q,0),se.push(N[0]+re[0]/3),oe.push(N[1]+re[1]/3),ne=b.dxydj([],U,X-1,Q,1),se.push(j[0]-ne[0]/3),oe.push(j[1]-ne[1]/3)),se.push(j[0]),oe.push(j[1]),N=j;return pe.axisLetter=v,pe.axis=w,pe.crossAxis=M,pe.value=W,pe.constvar=e,pe.index=l,pe.x=se,pe.y=oe,pe.smoothing=M.smoothing,pe}function Z(W){var G,X,te,D,N,U=[],Q=[],j={};if(j.length=d.length,j.crossLength=L.length,"b"===v)for(te=Math.max(0,Math.min(B-2,W)),N=Math.min(1,Math.max(0,W-te)),j.xy=function(J){return b.evalxy([],J,W)},j.dxy=function(J,K){return b.dxydi([],J,te,K,N)},G=0;G<S;G++)U[G]=O[W*H][G],Q[G]=P[W*H][G];else for(X=Math.max(0,Math.min(R-2,W)),D=Math.min(1,Math.max(0,W-X)),j.xy=function(J){return b.evalxy([],W,J)},j.dxy=function(J,K){return b.dxydj([],X,J,D,K)},G=0;G<E;G++)U[G]=O[G][W*H],Q[G]=P[G][W*H];return j.axisLetter=v,j.axis=w,j.crossAxis=M,j.value=d[W],j.constvar=e,j.index=W,j.x=U,j.y=Q,j.smoothing=M.smoothing,j}if("array"===w.tickmode){for(r=5e-15,s=(u=[Math.floor((d.length-1-w.arraytick0)/w.arraydtick*(1+r)),Math.ceil(-w.arraytick0/w.arraydtick/(1+r))].sort(function(W,G){return W-G}))[0]-1,i=u[1]+1,l=s;l<i;l++)(t=w.arraytick0+w.arraydtick*l)<0||t>d.length-1||_.push(m(Z(t),{color:w.gridcolor,width:w.gridwidth}));for(l=s;l<i;l++)if(a=w.arraytick0+w.arraydtick*l,g=Math.min(a+w.arraydtick,d.length-1),!(a<0||a>d.length-1||g<0||g>d.length-1))for(h=d[a],o=d[g],n=0;n<w.minorgridcount;n++)(x=g-a)<=0||(f=h+(o-h)*(n+1)/(w.minorgridcount+1)*(w.arraydtick/x))<d[0]||f>d[d.length-1]||T.push(m(V(f),{color:w.minorgridcolor,width:w.minorgridwidth}));w.startline&&k.push(m(Z(0),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&k.push(m(Z(d.length-1),{color:w.endlinecolor,width:w.endlinewidth}))}else{for(r=5e-15,s=(u=[Math.floor((d[d.length-1]-w.tick0)/w.dtick*(1+r)),Math.ceil((d[0]-w.tick0)/w.dtick/(1+r))].sort(function(W,G){return W-G}))[0],i=u[1],l=s;l<=i;l++)_.push(m(V(c=w.tick0+w.dtick*l),{color:w.gridcolor,width:w.gridwidth}));for(l=s-1;l<i+1;l++)for(c=w.tick0+w.dtick*l,n=0;n<w.minorgridcount;n++)(f=c+w.dtick*(n+1)/(w.minorgridcount+1))<d[0]||f>d[d.length-1]||T.push(m(V(f),{color:w.minorgridcolor,width:w.minorgridwidth}));w.startline&&k.push(m(V(d[0]),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&k.push(m(V(d[d.length-1]),{color:w.endlinecolor,width:w.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes"),m=y("../../lib/extend").extendFlat;$.exports=function(b,v){var e,n,t,a=v._labels=[],r=v._gridlines;for(e=0;e<r.length;e++)t=r[e],-1!==["start","both"].indexOf(v.showticklabels)&&(n=p.tickText(v,t.value),m(n,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:t.xy(0),dxy:t.dxy(0,0),axis:t.axis,length:t.crossAxis.length,font:t.axis.tickfont,isFirst:0===e,isLast:e===r.length-1}),a.push(n)),-1!==["end","both"].indexOf(v.showticklabels)&&(n=p.tickText(v,t.value),m(n,{endAnchor:!1,xy:t.xy(t.crossLength-1),dxy:t.dxy(t.crossLength-2,1),axis:t.axis,length:t.crossAxis.length,font:t.axis.tickfont,isFirst:0===e,isLast:e===r.length-1}),a.push(n))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(y,$,ee){"use strict";$.exports=function(p,m,b,v){var e=p[0]-m[0],n=p[1]-m[1],t=b[0]-m[0],a=b[1]-m[1],r=Math.pow(e*e+n*n,.25),u=Math.pow(t*t+a*a,.25),s=(u*u*e-r*r*t)*v,i=(u*u*n-r*r*a)*v,l=u*(r+u)*3,c=r*(r+u)*3;return[[m[0]+(l&&s/l),m[1]+(l&&i/l)],[m[0]-(c&&s/c),m[1]-(c&&i/c)]]}},{}],700:[function(y,$,ee){"use strict";var p=y("../../lib").isArrayOrTypedArray;$.exports=function(m,b,v){var e,n,t,a,r,u,s=[],i=p(m)?m.length:m,l=p(b)?b.length:b,c=p(m)?m:null,f=p(b)?b:null;c&&(t=(c.length-1)/(c[c.length-1]-c[0])/(i-1)),f&&(a=(f.length-1)/(f[f.length-1]-f[0])/(l-1));var g=1/0,h=-1/0;for(n=0;n<l;n++)for(s[n]=[],r=f?(f[n]-f[0])*a:n/(l-1),e=0;e<i;e++)u=(c?(c[e]-c[0])*t:e/(i-1))-r*v,g=Math.min(u,g),h=Math.max(u,h),s[n][e]=u;var o=1/(h-g),x=-g*o;for(n=0;n<l;n++)for(e=0;e<i;e++)s[n][e]=o*s[n][e]+x;return s}},{"../../lib":503}],701:[function(y,$,ee){"use strict";var p=y("./catmull_rom"),m=y("../../lib").ensureArray;function b(v,e,n){return[(2*(-.5*n[0]+1.5*e[0])+v[0])/3,(2*(-.5*n[1]+1.5*e[1])+v[1])/3]}$.exports=function(v,e,n,t,a,r){var u,s,i,l,c,f,g,h,o,x,d=n[0].length,w=n.length,_=a?3*d-2:d,T=r?3*w-2:w;for(v=m(v,T),e=m(e,T),i=0;i<T;i++)v[i]=m(v[i],_),e[i]=m(e[i],_);for(s=0,l=0;s<w;s++,l+=r?3:1)for(c=v[l],f=e[l],g=n[s],h=t[s],u=0,i=0;u<d;u++,i+=a?3:1)c[i]=g[u],f[i]=h[u];if(a)for(s=0,l=0;s<w;s++,l+=r?3:1){for(u=1,i=3;u<d-1;u++,i+=3)o=p([n[s][u-1],t[s][u-1]],[n[s][u],t[s][u]],[n[s][u+1],t[s][u+1]],a),v[l][i-1]=o[0][0],e[l][i-1]=o[0][1],v[l][i+1]=o[1][0],e[l][i+1]=o[1][1];x=b([v[l][0],e[l][0]],[v[l][2],e[l][2]],[v[l][3],e[l][3]]),v[l][1]=x[0],e[l][1]=x[1],x=b([v[l][_-1],e[l][_-1]],[v[l][_-3],e[l][_-3]],[v[l][_-4],e[l][_-4]]),v[l][_-2]=x[0],e[l][_-2]=x[1]}if(r)for(i=0;i<_;i++){for(l=3;l<T-3;l+=3)o=p([v[l-3][i],e[l-3][i]],[v[l][i],e[l][i]],[v[l+3][i],e[l+3][i]],r),v[l-1][i]=o[0][0],e[l-1][i]=o[0][1],v[l+1][i]=o[1][0],e[l+1][i]=o[1][1];x=b([v[0][i],e[0][i]],[v[2][i],e[2][i]],[v[3][i],e[3][i]]),v[1][i]=x[0],e[1][i]=x[1],x=b([v[T-1][i],e[T-1][i]],[v[T-3][i],e[T-3][i]],[v[T-4][i],e[T-4][i]]),v[T-2][i]=x[0],e[T-2][i]=x[1]}if(a&&r)for(l=1;l<T;l+=(l+1)%3==0?2:1){for(i=3;i<_-3;i+=3)o=p([v[l][i-3],e[l][i-3]],[v[l][i],e[l][i]],[v[l][i+3],e[l][i+3]],a),v[l][i-1]=.5*(v[l][i-1]+o[0][0]),e[l][i-1]=.5*(e[l][i-1]+o[0][1]),v[l][i+1]=.5*(v[l][i+1]+o[1][0]),e[l][i+1]=.5*(e[l][i+1]+o[1][1]);x=b([v[l][0],e[l][0]],[v[l][2],e[l][2]],[v[l][3],e[l][3]]),v[l][1]=.5*(v[l][1]+x[0]),e[l][1]=.5*(e[l][1]+x[1]),x=b([v[l][_-1],e[l][_-1]],[v[l][_-3],e[l][_-3]],[v[l][_-4],e[l][_-4]]),v[l][_-2]=.5*(v[l][_-2]+x[0]),e[l][_-2]=.5*(e[l][_-2]+x[1])}return[v,e]}},{"../../lib":503,"./catmull_rom":699}],702:[function(y,$,ee){"use strict";$.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(y,$,ee){"use strict";$.exports=function(p,m,b){return m&&b?function(v,e,n,t,a){var r,l,c;v||(v=[]),e*=3,n*=3;var f=t*t,g=1-t,h=g*g,o=g*t*2,x=-3*h,d=3*(h-o),w=3*(o-f),_=3*f,T=a*a,k=T*a,L=1-a,M=L*L,O=M*L;for(c=0;c<p.length;c++)r=x*(l=p[c])[n][e]+d*l[n][e+1]+w*l[n][e+2]+_*l[n][e+3],v[c]=O*r+3*(M*a*(x*l[n+1][e]+d*l[n+1][e+1]+w*l[n+1][e+2]+_*l[n+1][e+3])+L*T*(x*l[n+2][e]+d*l[n+2][e+1]+w*l[n+2][e+2]+_*l[n+2][e+3]))+k*(x*l[n+3][e]+d*l[n+3][e+1]+w*l[n+3][e+2]+_*l[n+3][e+3]);return v}:m?function(v,e,n,t,a){var r,s,i;v||(v=[]),e*=3;var l=t*t,c=1-t,f=c*c,g=c*t*2,h=-3*f,o=3*(f-g),x=3*(g-l),d=3*l,w=1-a;for(s=0;s<p.length;s++)r=h*(i=p[s])[n][e]+o*i[n][e+1]+x*i[n][e+2]+d*i[n][e+3],v[s]=w*r+a*(h*i[n+1][e]+o*i[n+1][e+1]+x*i[n+1][e+2]+d*i[n+1][e+3]);return v}:b?function(v,e,n,t,a){var r,l,c;v||(v=[]),n*=3;var f=a*a,g=f*a,h=1-a,o=h*h,x=o*h;for(l=0;l<p.length;l++)r=(c=p[l])[n][e+1]-c[n][e],v[l]=x*r+3*(o*a*(c[n+1][e+1]-c[n+1][e])+h*f*(c[n+2][e+1]-c[n+2][e]))+g*(c[n+3][e+1]-c[n+3][e]);return v}:function(v,e,n,t,a){var r,s,i;v||(v=[]);var l=1-a;for(s=0;s<p.length;s++)r=(i=p[s])[n][e+1]-i[n][e],v[s]=l*r+a*(i[n+1][e+1]-i[n+1][e]);return v}}},{}],704:[function(y,$,ee){"use strict";$.exports=function(p,m,b){return m&&b?function(v,e,n,t,a){var r,l,c;v||(v=[]),e*=3,n*=3;var f=t*t,g=f*t,h=1-t,o=h*h,x=o*h,d=a*a,w=1-a,_=w*w,T=w*a*2,k=-3*_,L=3*(_-T),M=3*(T-d),O=3*d;for(c=0;c<p.length;c++)r=k*(l=p[c])[n][e]+L*l[n+1][e]+M*l[n+2][e]+O*l[n+3][e],v[c]=x*r+3*(o*t*(k*l[n][e+1]+L*l[n+1][e+1]+M*l[n+2][e+1]+O*l[n+3][e+1])+h*f*(k*l[n][e+2]+L*l[n+1][e+2]+M*l[n+2][e+2]+O*l[n+3][e+2]))+g*(k*l[n][e+3]+L*l[n+1][e+3]+M*l[n+2][e+3]+O*l[n+3][e+3]);return v}:m?function(v,e,n,t,a){var r,l,c;v||(v=[]),e*=3;var f=a*a,g=f*a,h=1-a,o=h*h,x=o*h;for(l=0;l<p.length;l++)r=(c=p[l])[n+1][e]-c[n][e],v[l]=x*r+3*(o*a*(c[n+1][e+1]-c[n][e+1])+h*f*(c[n+1][e+2]-c[n][e+2]))+g*(c[n+1][e+3]-c[n][e+3]);return v}:b?function(v,e,n,t,a){var r,s,i;v||(v=[]),n*=3;var l=1-t,c=a*a,f=1-a,g=f*f,h=f*a*2,o=-3*g,x=3*(g-h),d=3*(h-c),w=3*c;for(s=0;s<p.length;s++)r=o*(i=p[s])[n][e]+x*i[n+1][e]+d*i[n+2][e]+w*i[n+3][e],v[s]=l*r+t*(o*i[n][e+1]+x*i[n+1][e+1]+d*i[n+2][e+1]+w*i[n+3][e+1]);return v}:function(v,e,n,t,a){var r,s,i;v||(v=[]);var l=1-t;for(s=0;s<p.length;s++)r=(i=p[s])[n+1][e]-i[n][e],v[s]=l*r+t*(i[n+1][e+1]-i[n][e+1]);return v}}},{}],705:[function(y,$,ee){"use strict";$.exports=function(p,m,b,v,e){var n=m-2,t=b-2;return v&&e?function(a,r,u){var s,f,g;a||(a=[]);var h=Math.max(0,Math.min(Math.floor(r),n)),o=Math.max(0,Math.min(Math.floor(u),t)),x=Math.max(0,Math.min(1,r-h)),d=Math.max(0,Math.min(1,u-o));h*=3,o*=3;var w=x*x,_=w*x,T=1-x,k=T*T,L=k*T,M=d*d,O=M*d,P=1-d,S=P*P,E=S*P;for(g=0;g<p.length;g++)s=L*(f=p[g])[o][h]+3*(k*x*f[o][h+1]+T*w*f[o][h+2])+_*f[o][h+3],a[g]=E*s+3*(S*d*(L*f[o+1][h]+3*(k*x*f[o+1][h+1]+T*w*f[o+1][h+2])+_*f[o+1][h+3])+P*M*(L*f[o+2][h]+3*(k*x*f[o+2][h+1]+T*w*f[o+2][h+2])+_*f[o+2][h+3]))+O*(L*f[o+3][h]+3*(k*x*f[o+3][h+1]+T*w*f[o+3][h+2])+_*f[o+3][h+3]);return a}:v?function(a,r,u){a||(a=[]);var s,f,g,h=Math.max(0,Math.min(Math.floor(r),n)),o=Math.max(0,Math.min(Math.floor(u),t)),x=Math.max(0,Math.min(1,r-h)),d=Math.max(0,Math.min(1,u-o));h*=3;var w=x*x,_=w*x,T=1-x,k=T*T,L=k*T,M=1-d;for(f=0;f<p.length;f++)s=M*(g=p[f])[o][h]+d*g[o+1][h],a[f]=L*s+3*(k*x*(M*g[o][h+1]+d*g[o+1][h+1])+T*w*(M*g[o][h+2]+d*g[o+1][h+1]))+_*(M*g[o][h+3]+d*g[o+1][h+1]);return a}:e?function(a,r,u){a||(a=[]);var s,f,g,h=Math.max(0,Math.min(Math.floor(r),n)),o=Math.max(0,Math.min(Math.floor(u),t)),x=Math.max(0,Math.min(1,r-h)),d=Math.max(0,Math.min(1,u-o));o*=3;var w=d*d,_=w*d,T=1-d,k=T*T,L=k*T,M=1-x;for(f=0;f<p.length;f++)s=M*(g=p[f])[o][h]+x*g[o][h+1],a[f]=L*s+3*(k*d*(M*g[o+1][h]+x*g[o+1][h+1])+T*w*(M*g[o+2][h]+x*g[o+2][h+1]))+_*(M*g[o+3][h]+x*g[o+3][h+1]);return a}:function(a,r,u){a||(a=[]);var s,l,c,f=Math.max(0,Math.min(Math.floor(r),n)),g=Math.max(0,Math.min(Math.floor(u),t)),h=Math.max(0,Math.min(1,r-f)),o=Math.max(0,Math.min(1,u-g)),x=1-o,d=1-h;for(l=0;l<p.length;l++)s=d*(c=p[l])[g][f]+h*c[g][f+1],a[l]=x*s+o*(d*c[g+1][f]+h*c[g+1][f+1]);return a}}},{}],706:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./xy_defaults"),b=y("./ab_defaults"),v=y("./attributes"),e=y("../../components/color/attributes");$.exports=function(n,t,a,r){function u(i,l){return p.coerce(n,t,v,i,l)}t._clipPathId="clip"+t.uid+"carpet";var s=u("color",e.defaultLine);p.coerceFont(u,"font"),u("carpet"),b(n,t,r,u,s),t.a&&t.b?(t.a.length<3&&(t.aaxis.smoothing=0),t.b.length<3&&(t.baxis.smoothing=0),m(n,t,u)||(t.visible=!1),t._cheater&&u("cheaterslope")):t.visible=!1}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),plot:y("./plot"),calc:y("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(y,$,ee){"use strict";$.exports=function(p,m){for(var b,v=p._fullData.length,e=0;e<v;e++){var n=p._fullData[e];if(n.index!==m.index&&"carpet"===n.type&&(b||(b=n),n.carpet===m.carpet))return n}return b}},{}],709:[function(y,$,ee){"use strict";$.exports=function(p,m,b){if(0===p.length)return"";var v,e=[],n=b?3:1;for(v=0;v<p.length;v+=n)e.push(p[v]+","+m[v]),b&&v<p.length-n&&(e.push("C"),e.push([p[v+1]+","+m[v+1],p[v+2]+","+m[v+2]+" "].join(" ")));return e.join(b?"":"L")}},{}],710:[function(y,$,ee){"use strict";var p=y("../../lib").isArrayOrTypedArray;$.exports=function(m,b,v){var e;for(p(m)?m.length>b.length&&(m=m.slice(0,b.length)):m=[],e=0;e<b.length;e++)m[e]=v(b[e]);return m}},{"../../lib":503}],711:[function(y,$,ee){"use strict";$.exports=function(p,m,b,v,e,n){var t=e[0]*p.dpdx(m),a=e[1]*p.dpdy(b),r=1,u=1;if(n){var s=Math.sqrt(e[0]*e[0]+e[1]*e[1]),i=Math.sqrt(n[0]*n[0]+n[1]*n[1]);u=Math.max(0,(e[0]*n[0]+e[1]*n[1])/s/i)}var c=180*Math.atan2(a,t)/Math.PI;return c<-90?(c+=180,r=-r):c>90&&(c-=180,r=-r),{angle:c,flip:r,p:p.c2p(v,m,b),offsetMultplier:u}}},{}],712:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/drawing"),b=y("./map_1d_array"),v=y("./makepath"),e=y("./orient_text"),n=y("../../lib/svg_text_utils"),t=y("../../lib"),a=t.strRotate,r=t.strTranslate,u=y("../../constants/alignment");function s(g,h,o,x,d,w){var _="const-"+d+"-lines",T=o.selectAll("."+_).data(w);T.enter().append("path").classed(_,!0).style("vector-effect","non-scaling-stroke"),T.each(function(k){var L=k,O=L.y,P=b([],L.x,g.c2p),S=b([],O,h.c2p),E="M"+v(P,S,L.smoothing);p.select(this).attr("d",E).style("stroke-width",L.width).style("stroke",L.color).style("fill","none")}),T.exit().remove()}function i(g,h,o,x,d,w,_,T){var k=w.selectAll("text."+T).data(_);k.enter().append("text").classed(T,!0);var L=0,M={};return k.each(function(O,P){var S;if("auto"===O.axis.tickangle)S=e(x,h,o,O.xy,O.dxy);else{var E=(O.axis.tickangle+180)*Math.PI/180;S=e(x,h,o,O.xy,[Math.cos(E),Math.sin(E)])}P||(M={angle:S.angle,flip:S.flip});var R=(O.endAnchor?-1:1)*S.flip,B=p.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(m.font,O.font).text(O.text).call(n.convertToTspans,g),H=m.bBox(this);B.attr("transform",r(S.p[0],S.p[1])+a(S.angle)+r(O.axis.labelpadding*R,.3*H.height)),L=Math.max(L,H.width+O.axis.labelpadding)}),k.exit().remove(),M.maxExtent=L,M}$.exports=function(g,h,o,x){var d=h.xaxis,w=h.yaxis,_=g._fullLayout._clips;t.makeTraceGroups(x,o,"trace").each(function(T){var k=p.select(this),L=T[0],M=L.trace,O=M.aaxis,P=M.baxis,S=t.ensureSingle(k,"g","minorlayer"),E=t.ensureSingle(k,"g","majorlayer"),R=t.ensureSingle(k,"g","boundarylayer"),B=t.ensureSingle(k,"g","labellayer");k.style("opacity",M.opacity),s(d,w,E,0,"a",O._gridlines),s(d,w,E,0,"b",P._gridlines),s(d,w,S,0,"a",O._minorgridlines),s(d,w,S,0,"b",P._minorgridlines),s(d,w,R,0,"a-boundary",O._boundarylines),s(d,w,R,0,"b-boundary",P._boundarylines);var Z,W,G,te,D,N,U,Q,j,J,K,re,ne,se,oe,H=i(g,d,w,M,0,B,O._labels,"a-label"),V=i(g,d,w,M,0,B,P._labels,"b-label");Z=g,W=B,G=M,te=d,D=w,N=H,U=V,re=t.aggNums(Math.min,null,G.a),ne=t.aggNums(Math.max,null,G.a),se=t.aggNums(Math.min,null,G.b),oe=t.aggNums(Math.max,null,G.b),J=G.ab2xy(Q=.5*(re+ne),j=se,!0),K=G.dxyda_rough(Q,j),void 0===N.angle&&t.extendFlat(N,e(G,te,D,J,G.dxydb_rough(Q,j))),f(Z,W,G,0,J,K,G.aaxis,te,D,N,"a-title"),J=G.ab2xy(Q=re,j=.5*(se+oe),!0),K=G.dxydb_rough(Q,j),void 0===U.angle&&t.extendFlat(U,e(G,te,D,J,G.dxyda_rough(Q,j))),f(Z,W,G,0,J,K,G.baxis,te,D,U,"b-title"),function(Z,W,G,X,te){var D,N,U,Q,j=G.select("#"+Z._clipPathId);j.size()||(j=G.append("clipPath").classed("carpetclip",!0));var J=t.ensureSingle(j,"path","carpetboundary"),K=W.clipsegments,re=[];for(Q=0;Q<K.length;Q++)N=b([],(D=K[Q]).x,X.c2p),U=b([],D.y,te.c2p),re.push(v(N,U,D.bicubic));var ne="M"+re.join("L")+"Z";j.attr("id",Z._clipPathId),J.attr("d",ne)}(M,L,_,d,w)})};var l=u.LINE_SPACING,c=(1-u.MID_SHIFT)/l+1;function f(g,h,o,x,d,w,_,T,k,L,M){var O=[];_.title.text&&O.push(_.title.text);var P=h.selectAll("text."+M).data(O),S=L.maxExtent;P.enter().append("text").classed(M,!0),P.each(function(){var E=e(o,T,k,d,w);-1===["start","both"].indexOf(_.showticklabels)&&(S=0);var R=_.title.font.size;S+=R+_.title.offset;var B=(L.angle+(L.flip<0?180:0)-E.angle+450)%360,H=B>90&&B<270,V=p.select(this);V.text(_.title.text).call(n.convertToTspans,g),H&&(S=(-n.lineCount(V)+c)*l*R-S),V.attr("transform",r(E.p[0],E.p[1])+a(E.angle)+r(0,S)).attr("text-anchor","middle").call(m.font,_.title.font)}),P.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(y,$,ee){"use strict";var p=y("./constants"),m=y("../../lib/search").findBin,b=y("./compute_control_points"),v=y("./create_spline_evaluator"),e=y("./create_i_derivative_evaluator"),n=y("./create_j_derivative_evaluator");$.exports=function(t){var a=t._a,r=t._b,u=a.length,s=r.length,i=t.aaxis,l=t.baxis,c=a[0],f=a[u-1],g=r[0],h=r[s-1],o=a[a.length-1]-a[0],x=r[r.length-1]-r[0],d=o*p.RELATIVE_CULL_TOLERANCE,w=x*p.RELATIVE_CULL_TOLERANCE;c-=d,f+=d,g-=w,h+=w,t.isVisible=function(_,T){return _>c&&_<f&&T>g&&T<h},t.isOccluded=function(_,T){return _<c||_>f||T<g||T>h},t.setScale=function(){var k=b(t._xctrl,t._yctrl,t._x,t._y,i.smoothing,l.smoothing);t._xctrl=k[0],t._yctrl=k[1],t.evalxy=v([t._xctrl,t._yctrl],u,s,i.smoothing,l.smoothing),t.dxydi=e([t._xctrl,t._yctrl],i.smoothing,l.smoothing),t.dxydj=n([t._xctrl,t._yctrl],i.smoothing,l.smoothing)},t.i2a=function(_){var T=Math.max(0,Math.floor(_[0]),u-2),k=_[0]-T;return(1-k)*a[T]+k*a[T+1]},t.j2b=function(_){var T=Math.max(0,Math.floor(_[1]),u-2),k=_[1]-T;return(1-k)*r[T]+k*r[T+1]},t.ij2ab=function(_){return[t.i2a(_[0]),t.j2b(_[1])]},t.a2i=function(_){var T=Math.max(0,Math.min(m(_,a),u-2)),k=a[T];return Math.max(0,Math.min(u-1,T+(_-k)/(a[T+1]-k)))},t.b2j=function(_){var T=Math.max(0,Math.min(m(_,r),s-2)),k=r[T];return Math.max(0,Math.min(s-1,T+(_-k)/(r[T+1]-k)))},t.ab2ij=function(_){return[t.a2i(_[0]),t.b2j(_[1])]},t.i2c=function(_,T){return t.evalxy([],_,T)},t.ab2xy=function(_,T,k){if(!k&&(_<a[0]||_>a[u-1]|T<r[0]||T>r[s-1]))return[!1,!1];var L=t.a2i(_),M=t.b2j(T),O=t.evalxy([],L,M);if(k){var P,S,E,R,B=0,H=0,V=[];_<a[0]?(P=0,S=0,B=(_-a[0])/(a[1]-a[0])):_>a[u-1]?(P=u-2,S=1,B=(_-a[u-1])/(a[u-1]-a[u-2])):S=L-(P=Math.max(0,Math.min(u-2,Math.floor(L)))),T<r[0]?(E=0,R=0,H=(T-r[0])/(r[1]-r[0])):T>r[s-1]?(E=s-2,R=1,H=(T-r[s-1])/(r[s-1]-r[s-2])):R=M-(E=Math.max(0,Math.min(s-2,Math.floor(M)))),B&&(t.dxydi(V,P,E,S,R),O[0]+=V[0]*B,O[1]+=V[1]*B),H&&(t.dxydj(V,P,E,S,R),O[0]+=V[0]*H,O[1]+=V[1]*H)}return O},t.c2p=function(_,T,k){return[T.c2p(_[0]),k.c2p(_[1])]},t.p2x=function(_,T,k){return[T.p2c(_[0]),k.p2c(_[1])]},t.dadi=function(_){var T=Math.max(0,Math.min(a.length-2,_));return a[T+1]-a[T]},t.dbdj=function(_){var T=Math.max(0,Math.min(r.length-2,_));return r[T+1]-r[T]},t.dxyda=function(_,T,k,L){var M=t.dxydi(null,_,T,k,L),O=t.dadi(_,k);return[M[0]/O,M[1]/O]},t.dxydb=function(_,T,k,L){var M=t.dxydj(null,_,T,k,L),O=t.dbdj(T,L);return[M[0]/O,M[1]/O]},t.dxyda_rough=function(_,T,k){var L=o*(k||.1),M=t.ab2xy(_+L,T,!0),O=t.ab2xy(_-L,T,!0);return[.5*(M[0]-O[0])/L,.5*(M[1]-O[1])/L]},t.dxydb_rough=function(_,T,k){var L=x*(k||.1),M=t.ab2xy(_,T+L,!0),O=t.ab2xy(_,T-L,!0);return[.5*(M[0]-O[0])/L,.5*(M[1]-O[1])/L]},t.dpdx=function(_){return _._m},t.dpdy=function(_){return _._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(y,$,ee){"use strict";var p=y("../../lib");$.exports=function(m,b,v){var e,n,t,l,c,f,g,h,o,x,d,w,_,W,G,X,te,D,a=[],r=[],u=m[0].length,s=m.length,k=0;for(e=0;e<u;e++)for(n=0;n<s;n++)void 0===m[n][e]&&(a.push(e),r.push(n),m[n][e]=(G=n,X=void 0,te=void 0,D=void 0,te=0,D=0,(W=e)>0&&void 0!==(X=m[G][W-1])&&(D++,te+=X),W<u-1&&void 0!==(X=m[G][W+1])&&(D++,te+=X),G>0&&void 0!==(X=m[G-1][W])&&(D++,te+=X),G<s-1&&void 0!==(X=m[G+1][W])&&(D++,te+=X),te/Math.max(1,D))),k=Math.max(k,Math.abs(m[n][e]));if(!a.length)return m;var L=0,M=0,O=a.length;do{for(L=0,t=0;t<O;t++){n=r[t];var S,E,R,B,H,V=0,Z=0;0===(e=a[t])?(E=b[B=Math.min(u-1,2)],Z+=(S=m[n][1])+(S-m[n][B])*(b[0]-(R=b[1]))/(R-E),V++):e===u-1&&(E=b[B=Math.max(0,u-3)],Z+=(S=m[n][u-2])+(S-m[n][B])*(b[u-1]-(R=b[u-2]))/(R-E),V++),(0===e||e===u-1)&&n>0&&n<s-1&&(Z+=((c=v[n]-v[n-1])*m[n+1][e]+(l=v[n+1]-v[n])*m[n-1][e])/(c+l),V++),0===n?(E=v[H=Math.min(s-1,2)],Z+=(S=m[1][e])+(S-m[H][e])*(v[0]-(R=v[1]))/(R-E),V++):n===s-1&&(E=v[H=Math.max(0,s-3)],Z+=(S=m[s-2][e])+(S-m[H][e])*(v[s-1]-(R=v[s-2]))/(R-E),V++),(0===n||n===s-1)&&e>0&&e<u-1&&(Z+=((c=b[e]-b[e-1])*m[n][e+1]+(l=b[e+1]-b[e])*m[n][e-1])/(c+l),V++),V?Z/=V:(d=(h=v[n+1]-v[n])*(o=v[n]-v[n-1])*(h+o),Z=((x=(f=b[e+1]-b[e])*(g=b[e]-b[e-1])*(f+g))*(o*m[n+1][e]+h*m[n-1][e])+d*(g*m[n][e+1]+f*m[n][e-1]))/(d*(g+f)+x*(o+h))),L+=(_=(w=Z-m[n][e])/k)*_,m[n][e]+=w*(1+(V?0:.85))}L=Math.sqrt(L)}while(M++<100&&L>1e-5);return p.log("Smoother converged to",L,"after",M,"iterations"),m}},{"../../lib":503}],715:[function(y,$,ee){"use strict";var p=y("../../lib").isArray1D;$.exports=function(m,b,v){var e=v("x"),n=e&&e.length,t=v("y"),a=t&&t.length;if(!n&&!a)return!1;if(b._cheater=!e,n&&!p(e)||a&&!p(t))b._length=null;else{var r=n?e.length:1/0;a&&(r=Math.min(r,t.length)),b.a&&b.a.length&&(r=Math.min(r,b.a.length)),b.b&&b.b.length&&(r=Math.min(r,b.b.length)),b._length=r}return!0}},{"../../lib":503}],716:[function(y,$,ee){"use strict";var p=y("../../plots/template_attributes").hovertemplateAttrs,m=y("../scattergeo/attributes"),b=y("../../components/colorscale/attributes"),v=y("../../plots/attributes"),e=y("../../components/color/attributes").defaultLine,n=y("../../lib/extend").extendFlat,t=m.marker.line;$.exports=n({locations:{valType:"data_array",editType:"calc"},locationmode:m.locationmode,z:{valType:"data_array",editType:"calc"},geojson:n({},m.geojson,{}),featureidkey:m.featureidkey,text:n({},m.text,{}),hovertext:n({},m.hovertext,{}),marker:{line:{color:n({},t.color,{dflt:e}),width:n({},t.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:m.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:m.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:n({},v.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:p(),showlegend:n({},v.showlegend,{dflt:!1})},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":967}],717:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../constants/numerical").BADNUM,b=y("../../components/colorscale/calc"),v=y("../scatter/arrays_to_calcdata"),e=y("../scatter/calc_selection");function n(t){return t&&"string"==typeof t}$.exports=function(t,a){var r,u=a._length,s=new Array(u);r=a.geojson?function(g){return n(g)||p(g)}:n;for(var i=0;i<u;i++){var l=s[i]={},c=a.locations[i],f=a.z[i];r(c)&&p(f)?(l.loc=c,l.z=f):(l.loc=null,l.z=m),l.index=i}return v(s,a),b(t,a,{vals:a.z,containerStr:"",cLetter:"z"}),e(s,a),s}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":924,"../scatter/calc_selection":927,"fast-isnumeric":190}],718:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/colorscale/defaults"),b=y("./attributes");$.exports=function(v,e,n,t){function a(l,c){return p.coerce(v,e,b,l,c)}var r=a("locations"),u=a("z");if(r&&r.length&&p.isArrayOrTypedArray(u)&&u.length){e._length=Math.min(r.length,u.length);var s,i=a("geojson");("string"==typeof i&&""!==i||p.isPlainObject(i))&&(s="geojson-id"),"geojson-id"===a("locationmode",s)&&a("featureidkey"),a("text"),a("hovertext"),a("hovertemplate"),a("marker.line.width")&&a("marker.line.color"),a("marker.opacity"),m(v,e,t,a,{prefix:"",cLetter:"z"}),p.coerceSelectionMarkerOpacity(e,a)}else e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(y,$,ee){"use strict";$.exports=function(p,m,b,v,e){p.location=m.location,p.z=m.z;var n=v[e];return n.fIn&&n.fIn.properties&&(p.properties=n.fIn.properties),p.ct=n.ct,p}},{}],720:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes"),m=y("./attributes"),b=y("../../lib").fillText;$.exports=function(v,e,n){var t,a,r,u,s=v.cd,i=s[0].trace,l=v.subplot,c=[e,n],f=[e+360,n];for(a=0;a<s.length;a++)if(u=!1,(t=s[a])._polygons){for(r=0;r<t._polygons.length;r++)t._polygons[r].contains(c)&&(u=!u),t._polygons[r].contains(f)&&(u=!u);if(u)break}if(u&&t)return v.x0=v.x1=v.xa.c2p(t.ct),v.y0=v.y1=v.ya.c2p(t.ct),v.index=t.index,v.location=t.loc,v.z=t.z,v.zLabel=p.tickText(l.mockAxis,l.mockAxis.c2l(t.z),"hover").text,v.hovertemplate=t.hovertemplate,function(g,h,o){if(!h.hovertemplate){var x=o.hi||h.hoverinfo,d=String(o.loc),w="all"===x?m.hoverinfo.flags:x.split("+"),_=-1!==w.indexOf("name"),T=-1!==w.indexOf("location"),k=-1!==w.indexOf("z"),L=-1!==w.indexOf("text"),M=[];!_&&T?g.nameOverride=d:(_&&(g.nameOverride=h.name),T&&M.push(d)),k&&M.push(g.zLabel),L&&b(o,h,M),g.extraText=M.join("<br>")}}(v,i,t),[v]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../heatmap/colorbar"),calc:y("./calc"),calcGeoJSON:y("./plot").calcGeoJSON,plot:y("./plot").plot,style:y("./style").style,styleOnSelect:y("./style").styleOnSelect,hoverPoints:y("./hover"),eventData:y("./event_data"),selectPoints:y("./select"),moduleType:"trace",name:"choropleth",basePlotModule:y("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=y("../../lib/geo_location_utils"),v=y("../../lib/topojson_utils").getTopojsonFeatures,e=y("../../plots/cartesian/autorange").findExtremes,n=y("./style").style;$.exports={calcGeoJSON:function(t,a){for(var r=t[0].trace,u=a[r.geo],s=u._subplot,i=r.locationmode,l=r._length,c="geojson-id"===i?b.extractTraceFeature(t):v(r,s.topojson),f=[],g=[],h=0;h<l;h++){var o=t[h],x="geojson-id"===i?o.fOut:b.locationToFeature(i,o.loc,c);if(x){o.geojson=x,o.ct=x.properties.ct,o._polygons=b.feature2polygons(x);var d=b.computeBbox(x);f.push(d[0],d[2]),g.push(d[1],d[3])}else o.geojson=null}if("geojson"===u.fitbounds&&"geojson-id"===i){var w=b.computeBbox(b.getTraceGeojson(r));f=[w[0],w[2]],g=[w[1],w[3]]}var _={padded:!0};r._extremes.lon=e(u.lonaxis._ax,f,_),r._extremes.lat=e(u.lataxis._ax,g,_)},plot:function(t,a,r){var u=a.layers.backplot.select(".choroplethlayer");m.makeTraceGroups(u,r,"trace choropleth").each(function(s){var i=p.select(this).selectAll("path.choroplethlocation").data(m.identity);i.enter().append("path").classed("choroplethlocation",!0),i.exit().remove(),n(t,s)})}}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(y,$,ee){"use strict";$.exports=function(p,m){var b,v,e,n,t,a=p.cd,r=p.xaxis,u=p.yaxis,s=[];if(!1===m)for(b=0;b<a.length;b++)a[b].selected=0;else for(b=0;b<a.length;b++)(e=(v=a[b]).ct)&&(n=r.c2p(e),t=u.c2p(e),m.contains([n,t],null,b,p)?(s.push({pointNumber:b,lon:e[0],lat:e[1]}),v.selected=1):v.selected=0);return s}},{}],724:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/color"),b=y("../../components/drawing"),v=y("../../components/colorscale");function e(n,t){var a=t[0].trace,r=t[0].node3.selectAll(".choroplethlocation"),u=a.marker||{},s=u.line||{},i=v.makeColorScaleFuncFromTrace(a);r.each(function(l){p.select(this).attr("fill",i(l.z)).call(m.stroke,l.mlc||s.color).call(b.dashLine,"",l.mlw||s.width||0).style("opacity",u.opacity)}),b.selectedPointStyle(r,a,n)}$.exports={style:function(n,t){t&&e(n,t)},styleOnSelect:function(n,t){var r=t[0].trace;r.selectedpoints?b.selectedPointStyle(t[0].node3.selectAll(".choroplethlocation"),r,n):e(n,t)}}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(y,$,ee){"use strict";var p=y("../choropleth/attributes"),m=y("../../components/colorscale/attributes"),b=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../../plots/attributes"),e=y("../../lib/extend").extendFlat;$.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},p.featureidkey,{}),below:{valType:"string",editType:"plot"},text:p.text,hovertext:p.hovertext,marker:{line:{color:e({},p.marker.line.color,{editType:"plot"}),width:e({},p.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},p.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},p.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},p.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:p.hoverinfo,hovertemplate:b({},{keys:["properties"]}),showlegend:e({},v.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib"),b=y("../../components/colorscale"),v=y("../../components/drawing"),e=y("../../lib/geojson_utils").makeBlank,n=y("../../lib/geo_location_utils");function t(a){var r,u=a[0].trace,s=u._opts;if(u.selectedpoints){for(var i=v.makeSelectedPointStyleFns(u),l=0;l<a.length;l++){var c=a[l];c.fOut&&(c.fOut.properties.mo2=i.selectedOpacityFn(c))}r={type:"identity",property:"mo2"}}else r=m.isArrayOrTypedArray(u.marker.opacity)?{type:"identity",property:"mo"}:u.marker.opacity;return m.extendFlat(s.fill.paint,{"fill-opacity":r}),m.extendFlat(s.line.paint,{"line-opacity":r}),s}$.exports={convert:function(a){var r=a[0].trace,u=!0===r.visible&&0!==r._length,s={layout:{visibility:"none"},paint:{}},i={layout:{visibility:"none"},paint:{}},l=r._opts={fill:s,line:i,geojson:e()};if(!u)return l;var c=n.extractTraceFeature(a);if(!c)return l;var f,g,h,o=b.makeColorScaleFuncFromTrace(r),x=r.marker,d=x.line||{};m.isArrayOrTypedArray(x.opacity)&&(f=function(M){var O=M.mo;return p(O)?+m.constrain(O,0,1):0}),m.isArrayOrTypedArray(d.color)&&(g=function(M){return M.mlc}),m.isArrayOrTypedArray(d.width)&&(h=function(M){return M.mlw});for(var w=0;w<a.length;w++){var _=a[w],T=_.fOut;if(T){var k=T.properties;k.fc=o(_.z),f&&(k.mo=f(_)),g&&(k.mlc=g(_)),h&&(k.mlw=h(_)),_.ct=k.ct,_._polygons=n.feature2polygons(T)}}var L=f?{type:"identity",property:"mo"}:x.opacity;return m.extendFlat(s.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),m.extendFlat(i.paint,{"line-color":g?{type:"identity",property:"mlc"}:d.color,"line-width":h?{type:"identity",property:"mlw"}:d.width,"line-opacity":L}),s.layout.visibility="visible",i.layout.visibility="visible",l.geojson={type:"FeatureCollection",features:c},t(a),l},convertOnSelect:t}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/colorscale/defaults"),b=y("./attributes");$.exports=function(v,e,n,t){function a(i,l){return p.coerce(v,e,b,i,l)}var r=a("locations"),u=a("z"),s=a("geojson");p.isArrayOrTypedArray(r)&&r.length&&p.isArrayOrTypedArray(u)&&u.length&&("string"==typeof s&&""!==s||p.isPlainObject(s))?(a("featureidkey"),e._length=Math.min(r.length,u.length),a("below"),a("text"),a("hovertext"),a("hovertemplate"),a("marker.line.width")&&a("marker.line.color"),a("marker.opacity"),m(v,e,t,a,{prefix:"",cLetter:"z"}),p.coerceSelectionMarkerOpacity(e,a)):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../heatmap/colorbar"),calc:y("../choropleth/calc"),plot:y("./plot"),hoverPoints:y("../choropleth/hover"),eventData:y("../choropleth/event_data"),selectPoints:y("../choropleth/select"),styleOnSelect:function(p,m){m&&m[0].trace._glTrace.updateOnSelect(m)},getBelow:function(p,m){for(var b=m.getMapLayers(),v=b.length-2;v>=0;v--){var e=b[v].id;if("string"==typeof e&&0===e.indexOf("water"))for(var n=v+1;n<b.length;n++)if("string"==typeof(e=b[n].id)&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:y("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(y,$,ee){"use strict";var p=y("./convert").convert,m=y("./convert").convertOnSelect,b=y("../../plots/mapbox/constants").traceLayerPrefix;function v(n,t){this.type="choroplethmapbox",this.subplot=n,this.uid=t,this.sourceId="source-"+t,this.layerList=[["fill",b+t+"-fill"],["line",b+t+"-line"]],this.below=null}var e=v.prototype;e.update=function(n){this._update(p(n))},e.updateOnSelect=function(n){this._update(m(n))},e._update=function(n){var t=this.subplot,a=this.layerList,r=t.belowLookup["trace-"+this.uid];t.map.getSource(this.sourceId).setData(n.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(n,r),this.below=r);for(var u=0;u<a.length;u++){var s=a[u],l=s[1],c=n[s[0]];t.setOptions(l,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&t.setOptions(l,"setPaintProperty",c.paint)}},e._addLayers=function(n,t){for(var a=this.subplot,r=this.layerList,u=this.sourceId,s=0;s<r.length;s++){var i=r[s],l=i[0],c=n[l];a.addLayer({type:l,id:i[1],source:u,layout:c.layout,paint:c.paint},t)}},e._removeLayers=function(){for(var n=this.subplot.map,t=this.layerList,a=t.length-1;a>=0;a--)n.removeLayer(t[a][1])},e.dispose=function(){var n=this.subplot.map;this._removeLayers(),n.removeSource(this.sourceId)},$.exports=function(n,t){var a=t[0].trace,r=new v(n,a.uid),u=r.sourceId,s=p(t),i=r.below=n.belowLookup["trace-"+a.uid];return n.map.addSource(u,{type:"geojson",data:s.geojson}),r._addLayers(s,i),t[0].trace._glTrace=r,r}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/attributes"),m=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../mesh3d/attributes"),e=y("../../plots/attributes"),n=y("../../lib/extend").extendFlat,t={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:b({editType:"calc"},{keys:["norm"]}),uhoverformat:m("u",1),vhoverformat:m("v",1),whoverformat:m("w",1),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),showlegend:n({},e.showlegend,{dflt:!1})};n(t,p("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(a){t[a]=v[a]}),t.hoverinfo=n({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),t.transforms=void 0,$.exports=t},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":866}],731:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/calc");$.exports=function(m,b){for(var v=b.u,e=b.v,n=b.w,t=Math.min(b.x.length,b.y.length,b.z.length,v.length,e.length,n.length),a=-1/0,r=1/0,u=0;u<t;u++){var s=v[u],i=e[u],l=n[u],c=Math.sqrt(s*s+i*i+l*l);a=Math.max(a,c),r=Math.min(r,c)}b._len=t,b._normMax=a,p(m,b,{vals:[r,a],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(y,$,ee){"use strict";var p=y("../../../stackgl_modules").gl_cone3d,m=y("../../../stackgl_modules").gl_cone3d.createConeMesh,b=y("../../lib").simpleMap,v=y("../../lib/gl_format_color").parseColorScale,e=y("../../components/colorscale").extractOpts,n=y("../../plots/gl3d/zip3");function t(l,c){this.scene=l,this.uid=c,this.mesh=null,this.data=null}var a=t.prototype;a.handlePick=function(l){if(l.object===this.mesh){var c=l.index=l.data.index,o=this.data.u[c],x=this.data.v[c],d=this.data.w[c];l.traceCoordinate=[this.data.x[c],this.data.y[c],this.data.z[c],o,x,d,Math.sqrt(o*o+x*x+d*d)];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&void 0!==w[c]?l.textLabel=w[c]:w&&(l.textLabel=w),!0}};var r={xaxis:0,yaxis:1,zaxis:2},u={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function i(l,c){var f=l.fullSceneLayout,g=l.dataScale,h={};function o(_,T){var k=f[T],L=g[r[T]];return b(_,function(M){return k.d2l(M)*L})}h.vectors=n(o(c.u,"xaxis"),o(c.v,"yaxis"),o(c.w,"zaxis"),c._len),h.positions=n(o(c.x,"xaxis"),o(c.y,"yaxis"),o(c.z,"zaxis"),c._len);var x=e(c);h.colormap=v(c),h.vertexIntensityBounds=[x.min/c._normMax,x.max/c._normMax],h.coneOffset=u[c.anchor],h.coneSize="scaled"===c.sizemode?c.sizeref||.5:c.sizeref&&c._normMax?c.sizeref/c._normMax:.5;var d=p(h),w=c.lightposition;return d.lightPosition=[w.x,w.y,w.z],d.ambient=c.lighting.ambient,d.diffuse=c.lighting.diffuse,d.specular=c.lighting.specular,d.roughness=c.lighting.roughness,d.fresnel=c.lighting.fresnel,d.opacity=c.opacity,c._pad=s[c.anchor]*d.vectorScale*d.coneScale*c._normMax,d}a.update=function(l){this.data=l;var c=i(this.scene,l);this.mesh.update(c)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(l,c){var f=l.glplot.gl,g=i(l,c),h=m(f,g),o=new t(l,c.uid);return o.mesh=h,o.data=c,h._trace=o,l.glplot.add(h),o}},{"../../../stackgl_modules":1119,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/colorscale/defaults"),b=y("./attributes");$.exports=function(v,e,n,t){function a(f,g){return p.coerce(v,e,b,f,g)}var r=a("u"),u=a("v"),s=a("w"),i=a("x"),l=a("y"),c=a("z");r&&r.length&&u&&u.length&&s&&s.length&&i&&i.length&&l&&l.length&&c&&c.length?(a("sizeref"),a("sizemode"),a("anchor"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),m(v,e,t,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"cone",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:y("./calc"),plot:y("./convert"),eventData:function(p,m){return p.norm=m.traceCoordinate[6],p},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(y,$,ee){"use strict";var p=y("../heatmap/attributes"),m=y("../scatter/attributes"),b=y("../../plots/cartesian/axis_format_attributes"),v=b.axisHoverFormat,e=b.descriptionOnlyNumbers,n=y("../../components/colorscale/attributes"),t=y("../../components/drawing/attributes").dash,a=y("../../plots/font_attributes"),r=y("../../lib/extend").extendFlat,u=y("../../constants/filter_ops"),s=u.COMPARISON_OPS2,i=u.INTERVAL_OPS,l=m.line;$.exports=r({z:p.z,x:p.x,x0:p.x0,dx:p.dx,y:p.y,y0:p.y0,dy:p.dy,xperiod:p.xperiod,yperiod:p.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:p.xperiodalignment,yperiodalignment:p.yperiodalignment,text:p.text,hovertext:p.hovertext,transpose:p.transpose,xtype:p.xtype,ytype:p.ytype,xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z",1),hovertemplate:p.hovertemplate,hoverongaps:p.hoverongaps,connectgaps:r({},p.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:a({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(s).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},l.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:t,smoothing:r({},l.smoothing,{}),editType:"plot"}},n("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":925}],736:[function(y,$,ee){"use strict";var p=y("../../components/colorscale"),m=y("../heatmap/calc"),b=y("./set_contours"),v=y("./end_plus");$.exports=function(e,n){var t=m(e,n),a=t[0].z;b(n,a);var r,u=n.contours,s=p.extractOpts(n);if("heatmap"===u.coloring&&s.auto&&!1===n.autocontour){var i=u.start,l=v(u),c=u.size||1,f=Math.floor((l-i)/c)+1;isFinite(c)||(c=1,f=1);var g=i-c/2;r=[g,g+f*c]}else r=a;return p.calc(e,n,{vals:r,cLetter:"z"}),t}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(y,$,ee){"use strict";$.exports=function(p,m){var b,v=p[0],e=v.z;switch(m.type){case"levels":var n=Math.min(e[0][0],e[0][1]);for(b=0;b<p.length;b++){var t=p[b];t.prefixBoundary=!t.edgepaths.length&&(n>t.level||t.starts.length&&n===t.level)}break;case"constraint":if(v.prefixBoundary=!1,v.edgepaths.length)return;var a=v.x.length,r=v.y.length,u=-1/0,s=1/0;for(b=0;b<r;b++)s=Math.min(s,e[b][0]),s=Math.min(s,e[b][a-1]),u=Math.max(u,e[b][0]),u=Math.max(u,e[b][a-1]);for(b=1;b<a-1;b++)s=Math.min(s,e[0][b]),s=Math.min(s,e[r-1][b]),u=Math.max(u,e[0][b]),u=Math.max(u,e[r-1][b]);var i,l,c=m.value;switch(m._operation){case">":c>u&&(v.prefixBoundary=!0);break;case"<":(c<s||v.starts.length&&c===s)&&(v.prefixBoundary=!0);break;case"[]":i=Math.min(c[0],c[1]),((l=Math.max(c[0],c[1]))<s||i>u||v.starts.length&&l===s)&&(v.prefixBoundary=!0);break;case"][":i=Math.min(c[0],c[1]),l=Math.max(c[0],c[1]),i<s&&l>u&&(v.prefixBoundary=!0)}}}},{}],738:[function(y,$,ee){"use strict";var p=y("../../components/colorscale"),m=y("./make_color_map"),b=y("./end_plus");$.exports={min:"zmin",max:"zmax",calc:function(v,e,n){var t=e.contours,a=e.line,r=t.size||1,u=t.coloring,s=m(e,{isColorbar:!0});if("heatmap"===u){var i=p.extractOpts(e);n._fillgradient=i.reversescale?p.flipScale(i.colorscale):i.colorscale,n._zrange=[i.min,i.max]}else"fill"===u&&(n._fillcolor=s);n._line={color:"lines"===u?s:a.color,width:!1!==t.showlines?a.width:0,dash:a.dash},n._levels={start:t.start,end:b(t),size:r}}}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(y,$,ee){"use strict";$.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("./label_defaults"),b=y("../../components/color"),v=b.addOpacity,e=b.opacity,n=y("../../constants/filter_ops"),t=n.CONSTRAINT_REDUCTION,a=n.COMPARISON_OPS2;$.exports=function(r,u,s,i,l,c){var f,g,h,d,w,_,o=u.contours,x=s("contours.operation");o._operation=t[x],d=s,-1===a.indexOf((w=o).operation)?(d("contours.value",[0,1]),Array.isArray(w.value)?w.value.length>2?w.value=w.value.slice(2):0===w.length?w.value=[0,1]:w.length<2?(_=parseFloat(w.value[0]),w.value=[_,_+1]):w.value=[parseFloat(w.value[0]),parseFloat(w.value[1])]:p(w.value)&&(_=parseFloat(w.value),w.value=[_,_+1])):(d("contours.value",0),p(w.value)||(w.value=Array.isArray(w.value)?parseFloat(w.value[0]):0)),"="===x?f=o.showlines=!0:(f=s("contours.showlines"),h=s("fillcolor",v((r.line||{}).color||l,.5))),f&&(g=s("line.color",h&&e(h)?v(u.fillcolor,1):l),s("line.width",2),s("line.dash")),s("line.smoothing"),m(s,i,g,c)}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(y,$,ee){"use strict";var p=y("../../constants/filter_ops"),m=y("fast-isnumeric");function b(n,t){var a,r=Array.isArray(t);function u(s){return m(s)?+s:null}return-1!==p.COMPARISON_OPS2.indexOf(n)?a=u(r?t[0]:t):-1!==p.INTERVAL_OPS.indexOf(n)?a=r?[u(t[0]),u(t[1])]:[u(t),u(t)]:-1!==p.SET_OPS.indexOf(n)&&(a=r?t.map(u):[u(t)]),a}function v(n){return function(t){t=b(n,t);var a=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]);return{start:a,end:r,size:r-a}}}function e(n){return function(t){return{start:t=b(n,t),end:1/0,size:1/0}}}$.exports={"[]":v("[]"),"][":v("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(y,$,ee){"use strict";$.exports=function(p,m,b,v){var e=v("contours.start"),n=v("contours.end"),t=!1===e||!1===n,a=b("contours.size");!(t?m.autocontour=!0:b("autocontour",!1))&&a||b("ncontours")}},{}],743:[function(y,$,ee){"use strict";var p=y("../../lib");function m(b){return p.extendFlat({},b,{edgepaths:p.extendDeep([],b.edgepaths),paths:p.extendDeep([],b.paths),starts:p.extendDeep([],b.starts)})}$.exports=function(b,v){var e,n,t,a=function(s){return s.reverse()},r=function(s){return s};switch(v){case"=":case"<":return b;case">":for(1!==b.length&&p.warn("Contour data invalid for the specified inequality operation."),n=b[0],e=0;e<n.edgepaths.length;e++)n.edgepaths[e]=a(n.edgepaths[e]);for(e=0;e<n.paths.length;e++)n.paths[e]=a(n.paths[e]);for(e=0;e<n.starts.length;e++)n.starts[e]=a(n.starts[e]);return b;case"][":var u=a;a=r,r=u;case"[]":for(2!==b.length&&p.warn("Contour data invalid for the specified inequality range operation."),n=m(b[0]),t=m(b[1]),e=0;e<n.edgepaths.length;e++)n.edgepaths[e]=a(n.edgepaths[e]);for(e=0;e<n.paths.length;e++)n.paths[e]=a(n.paths[e]);for(e=0;e<n.starts.length;e++)n.starts[e]=a(n.starts[e]);for(;t.edgepaths.length;)n.edgepaths.push(r(t.edgepaths.shift()));for(;t.paths.length;)n.paths.push(r(t.paths.shift()));for(;t.starts.length;)n.starts.push(r(t.starts.shift()));return[n]}}},{"../../lib":503}],744:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../heatmap/xyz_defaults"),b=y("../scatter/period_defaults"),v=y("./constraint_defaults"),e=y("./contours_defaults"),n=y("./style_defaults"),t=y("./attributes");$.exports=function(a,r,u,s){function i(c,f){return p.coerce(a,r,t,c,f)}if(m(a,r,i,s)){b(a,r,s,i),i("xhoverformat"),i("yhoverformat"),i("text"),i("hovertext"),i("hovertemplate"),i("hoverongaps");var l="constraint"===i("contours.type");i("connectgaps",p.isArray1D(r.z)),l?v(a,r,i,s,u):(e(a,r,i,function(c){return p.coerce2(a,r,t,c)}),n(a,r,i,s))}else r.visible=!1}},{"../../lib":503,"../heatmap/xyz_defaults":806,"../scatter/period_defaults":945,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./constraint_mapping"),b=y("./end_plus");$.exports=function(v,e,n){for(var t="constraint"===v.type?m[v._operation](v.value):v,a=t.size,r=[],u=b(t),s=n.trace._carpetTrace,i=s?{xaxis:s.aaxis,yaxis:s.baxis,x:n.a,y:n.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:n.x,y:n.y},l=t.start;l<u;l+=a)if(r.push(p.extendFlat({level:l,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},i)),r.length>1e3){p.warn("Too many contours, clipping at 1000",v);break}return r}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(y,$,ee){"use strict";$.exports=function(p){return p.end+p.size/1e6}},{}],747:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./constants");function b(n,t,a,r){return Math.abs(n[0]-t[0])<a&&Math.abs(n[1]-t[1])<r}function v(n,t,a,r,u){var s,J,re,ne,se,i=t.join(","),l=n.crossings[i],c=(re=t,ne=0,se=0,(J=l)>20&&a?208===J||1114===J?ne=0===re[0]?1:-1:se=0===re[1]?1:-1:-1!==m.BOTTOMSTART.indexOf(J)?se=1:-1!==m.LEFTSTART.indexOf(J)?ne=1:-1!==m.TOPSTART.indexOf(J)?se=-1:ne=-1,[ne,se]),f=[e(n,t,[-c[0],-c[1]])],g=n.z.length,h=n.z[0].length,o=t.slice(),x=c.slice();for(s=0;s<1e4;s++){if(l>20?n.crossings[i]=m.SADDLEREMAINDER[l=m.CHOOSESADDLE[l][(c[0]||c[1])<0?0:1]]:delete n.crossings[i],!(c=m.NEWDELTA[l])){p.log("Found bad marching index:",l,t,n.level);break}if(f.push(e(n,t,c)),t[0]+=c[0],t[1]+=c[1],i=t.join(","),b(f[f.length-1],f[f.length-2],r,u)&&f.pop(),t[0]===o[0]&&t[1]===o[1]&&c[0]===x[0]&&c[1]===x[1]||a&&(c[0]&&(t[0]<0||t[0]>h-2)||c[1]&&(t[1]<0||t[1]>g-2)))break;l=n.crossings[i]}1e4===s&&p.log("Infinite loop in contour?");var w,_,T,k,L,M,O,P,S,E,R,B,H,V,Z,W=b(f[0],f[f.length-1],r,u),G=0,X=.2*n.smoothing,te=[],D=0;for(s=1;s<f.length;s++)V=(B=f[s])[2]-(H=f[s-1])[2],Z=B[3]-H[3],G+=O=Math.sqrt(V*V+Z*Z),te.push(O);var N=G/te.length*X;function U(J){return f[J%f.length]}for(s=f.length-2;s>=D;s--)if((w=te[s])<N){for(T=0,_=s-1;_>=D&&w+te[_]<N;_--)w+=te[_];if(W&&s===f.length-2)for(T=0;T<_&&w+te[T]<N;T++)w+=te[T];L=s-_+T+1,M=Math.floor((s+_+T+2)/2),k=W||s!==f.length-2?W||-1!==_?L%2?U(M):[(U(M)[0]+U(M+1)[0])/2,(U(M)[1]+U(M+1)[1])/2]:f[0]:f[f.length-1],f.splice(_+1,s-_+1,k),s=_+1,T&&(D=T),W&&(s===f.length-2?f[T]=f[f.length-1]:0===s&&(f[f.length-1]=f[0]))}for(f.splice(0,D),s=0;s<f.length;s++)f[s].length=2;if(!(f.length<2))if(W)f.pop(),n.paths.push(f);else{a||p.log("Unclosed interior contour?",n.level,o.join(","),f.join("L"));var Q=!1;for(P=0;P<n.edgepaths.length;P++)if(E=n.edgepaths[P],!Q&&b(E[0],f[f.length-1],r,u)){f.pop(),Q=!0;var j=!1;for(S=0;S<n.edgepaths.length;S++)if(b((R=n.edgepaths[S])[R.length-1],f[0],r,u)){j=!0,f.shift(),n.edgepaths.splice(P,1),S===P?n.paths.push(f.concat(R)):(S>P&&S--,n.edgepaths[S]=R.concat(f,E));break}j||(n.edgepaths[P]=f.concat(E))}for(P=0;P<n.edgepaths.length&&!Q;P++)b((E=n.edgepaths[P])[E.length-1],f[0],r,u)&&(f.shift(),n.edgepaths[P]=E.concat(f),Q=!0);Q||n.edgepaths.push(f)}}function e(n,t,a){var r=t[0]+Math.max(a[0],0),u=t[1]+Math.max(a[1],0),s=n.z[u][r],i=n.xaxis,l=n.yaxis;if(a[1]){var c=(n.level-s)/(n.z[u][r+1]-s),f=(1!==c?(1-c)*i.c2l(n.x[r]):0)+(0!==c?c*i.c2l(n.x[r+1]):0);return[i.c2p(i.l2c(f),!0),l.c2p(n.y[u],!0),r+c,u]}var g=(n.level-s)/(n.z[u+1][r]-s),h=(1!==g?(1-g)*l.c2l(n.y[u]):0)+(0!==g?g*l.c2l(n.y[u+1]):0);return[i.c2p(n.x[r],!0),l.c2p(l.l2c(h),!0),r,u+g]}$.exports=function(n,t,a){var r,u,s,i;for(t=t||.01,a=a||.01,u=0;u<n.length;u++){for(s=n[u],i=0;i<s.starts.length;i++)v(s,s.starts[i],"edge",t,a);for(r=0;Object.keys(s.crossings).length&&r<1e4;)r++,v(s,Object.keys(s.crossings)[0].split(",").map(Number),void 0,t,a);1e4===r&&p.log("Infinite loop in contour?")}}},{"../../lib":503,"./constants":739}],748:[function(y,$,ee){"use strict";var p=y("../../components/color"),m=y("../heatmap/hover");$.exports=function(b,v,e,n,t){t||(t={}),t.isContour=!0;var a=m(b,v,e,n,t);return a&&a.forEach(function(r){var u=r.trace;"constraint"===u.contours.type&&(u.fillcolor&&p.opacity(u.fillcolor)?r.color=p.addOpacity(u.fillcolor,1):u.contours.showlines&&p.opacity(u.line.color)&&(r.color=p.addOpacity(u.line.color,1)))}),a}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot").plot,style:y("./style"),colorbar:y("./colorbar"),hoverPoints:y("./hover"),moduleType:"trace",name:"contour",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(y,$,ee){"use strict";var p=y("../../lib");$.exports=function(m,b,v,e){if(e||(e={}),m("contours.showlabels")){var n=b.font;p.coerceFont(m,"contours.labelfont",{family:n.family,size:n.size,color:v}),m("contours.labelformat")}!1!==e.hasHover&&m("zhoverformat")}},{"../../lib":503}],751:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/colorscale"),b=y("./end_plus");$.exports=function(v){var e=v.contours,n=e.start,t=b(e),a=e.size||1,r=Math.floor((t-n)/a)+1,u="lines"===e.coloring?0:1,s=m.extractOpts(v);isFinite(a)||(a=1,r=1);var i,l,c=s.reversescale?m.flipScale(s.colorscale):s.colorscale,f=c.length,g=new Array(f),h=new Array(f);if("heatmap"===e.coloring){var o=s.min,x=s.max;for(l=0;l<f;l++)g[l]=(i=c[l])[0]*(x-o)+o,h[l]=i[1];var d=p.extent([o,x,e.start,e.start+a*(r-1)]),w=d[o<x?0:1],_=d[o<x?1:0];w!==o&&(g.splice(0,0,w),h.splice(0,0,h[0])),_!==x&&(g.push(_),h.push(h[h.length-1]))}else for(l=0;l<f;l++)g[l]=((i=c[l])[0]*(r+u-1)-u/2)*a+n,h[l]=i[1];return m.makeColorScaleFunc({domain:g,range:h},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(y,$,ee){"use strict";var p=y("./constants");function m(b,v){var e=(v[0][0]>b?0:1)+(v[0][1]>b?0:2)+(v[1][1]>b?0:4)+(v[1][0]>b?0:8);return 5===e||10===e?b>(v[0][0]+v[0][1]+v[1][0]+v[1][1])/4?5===e?713:1114:5===e?104:208:15===e?0:e}$.exports=function(b){var v,e,n,t,a,r,u,s,i,l=b[0].z,c=l.length,f=l[0].length,g=2===c||2===f;for(e=0;e<c-1;e++)for(t=[],0===e&&(t=t.concat(p.BOTTOMSTART)),e===c-2&&(t=t.concat(p.TOPSTART)),v=0;v<f-1;v++)for(n=t.slice(),0===v&&(n=n.concat(p.LEFTSTART)),v===f-2&&(n=n.concat(p.RIGHTSTART)),a=v+","+e,r=[[l[e][v],l[e][v+1]],[l[e+1][v],l[e+1][v+1]]],i=0;i<b.length;i++)(u=m((s=b[i]).level,r))&&(s.crossings[a]=u,-1!==n.indexOf(u)&&(s.starts.push([v,e]),g&&-1!==n.indexOf(u,n.indexOf(u)+1)&&s.starts.push([v,e])))}},{"./constants":739}],753:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=y("../../components/drawing"),v=y("../../components/colorscale"),e=y("../../lib/svg_text_utils"),n=y("../../plots/cartesian/axes"),t=y("../../plots/cartesian/set_convert"),a=y("../heatmap/plot"),r=y("./make_crossings"),u=y("./find_all_paths"),s=y("./empty_pathinfo"),i=y("./convert_to_constraints"),l=y("./close_boundaries"),c=y("./constants"),f=c.LABELOPTIMIZER;function g(x,d){var w,_,T,k,L,M,P="",S=0,E=x.edgepaths.map(function(W,G){return G}),R=!0;function V(W){return Math.abs(W[0]-d[2][0])<.01}for(;E.length;){for(M=b.smoothopen(x.edgepaths[S],x.smoothing),P+=R?M:M.replace(/^M/,"L"),E.splice(E.indexOf(S),1),w=x.edgepaths[S][x.edgepaths[S].length-1],k=-1,T=0;T<4;T++){if(!w){m.log("Missing end?",S,x);break}for(Math.abs(w[1]-d[0][1])<.01&&!V(w)?_=d[1]:Math.abs(w[0]-d[0][0])<.01?_=d[0]:Math.abs(w[1]-d[2][1])<.01?_=d[3]:V(w)&&(_=d[2]),L=0;L<x.edgepaths.length;L++){var Z=x.edgepaths[L][0];Math.abs(w[0]-_[0])<.01?Math.abs(w[0]-Z[0])<.01&&(Z[1]-w[1])*(_[1]-Z[1])>=0&&(_=Z,k=L):Math.abs(w[1]-_[1])<.01?Math.abs(w[1]-Z[1])<.01&&(Z[0]-w[0])*(_[0]-Z[0])>=0&&(_=Z,k=L):m.log("endpt to newendpt is not vert. or horz.",w,_,Z)}if(w=_,k>=0)break;P+="L"+_}if(k===x.edgepaths.length){m.log("unclosed perimeter path");break}(R=-1===E.indexOf(S=k))&&(S=E[0],P+="Z")}for(S=0;S<x.paths.length;S++)P+=b.smoothclosed(x.paths[S],x.smoothing);return P}function h(x,d,w,_){var T=d.width/2,k=d.height/2,L=x.x,M=x.y,O=x.theta,P=Math.cos(O)*T,S=Math.sin(O)*T,E=(L>_.center?_.right-L:L-_.left)/(P+Math.abs(Math.sin(O)*k)),R=(M>_.middle?_.bottom-M:M-_.top)/(Math.abs(S)+Math.cos(O)*k);if(E<1||R<1)return 1/0;var B=f.EDGECOST*(1/(E-1)+1/(R-1));B+=f.ANGLECOST*O*O;for(var H=L-P,V=M-S,Z=L+P,W=M+S,G=0;G<w.length;G++){var X=w[G],te=Math.cos(X.theta)*X.width/2,D=Math.sin(X.theta)*X.width/2,N=2*m.segmentDistance(H,V,Z,W,X.x-te,X.y-D,X.x+te,X.y+D)/(d.height+X.height),U=X.level===d.level,Q=U?f.SAMELEVELDISTANCE:1;if(N<=Q)return 1/0;B+=f.NEIGHBORCOST*(U?f.SAMELEVELFACTOR:1)/(N-Q)}return B}function o(x){var d,w,_=x.trace._emptypoints,T=[],k=x.z.length,L=x.z[0].length,M=[];for(d=0;d<L;d++)M.push(1);for(d=0;d<k;d++)T.push(M.slice());for(d=0;d<_.length;d++)T[(w=_[d])[0]][w[1]]=0;return x.zmask=T,T}ee.plot=function(x,d,w,_){var T=d.xaxis,k=d.yaxis;m.makeTraceGroups(_,w,"contour").each(function(L){var M=p.select(this),O=L[0],S=O.x,E=O.y,R=O.trace.contours,B=s(R,d,O),H=m.ensureSingle(M,"g","heatmapcoloring"),V=[];"heatmap"===R.coloring&&(V=[L]),a(x,d,V,H),r(B),u(B);var U,Q,j,Z=T.c2p(S[0],!0),W=T.c2p(S[S.length-1],!0),G=k.c2p(E[0],!0),X=k.c2p(E[E.length-1],!0),te=[[Z,X],[W,X],[W,G],[Z,G]],D=B;"constraint"===R.type&&(D=i(B,R._operation)),U=te,Q=R,(j=m.ensureSingle(M,"g","contourbg").selectAll("path").data("fill"===Q.coloring?[0]:[])).enter().append("path"),j.exit().remove(),j.attr("d","M"+U.join("L")+"Z").style("stroke","none"),function(N,U,Q,j){var J="fill"===j.coloring||"constraint"===j.type&&"="!==j._operation,K="M"+Q.join("L")+"Z";J&&l(U,j);var re=m.ensureSingle(N,"g","contourfill").selectAll("path").data(J?U:[]);re.enter().append("path"),re.exit().remove(),re.each(function(ne){var se=(ne.prefixBoundary?K:"")+g(ne,Q);se?p.select(this).attr("d",se).style("stroke","none"):p.select(this).remove()})}(M,D,te,R),function(N,U,Q,j,J){var K=m.ensureSingle(N,"g","contourlines"),re=!1!==J.showlines,ne=J.showlabels,se=re&&ne,oe=ee.createLines(K,re||ne,U),pe=ee.createLineClip(K,se,Q,j.trace.uid),ce=N.selectAll("g.contourlabels").data(ne?[0]:[]);if(ce.exit().remove(),ce.enter().append("g").classed("contourlabels",!0),ne){var ge=[],xe=[];m.clearLocationCache();var we=ee.labelFormatter(Q,j),be=b.tester.append("text").attr("data-notex",1).call(b.font,J.labelfont),Se=U[0].xaxis,fe=U[0].yaxis,me=Se._length,Te=fe._length,_e=Se.range,Me=fe.range,Ie=m.aggNums(Math.min,null,j.x),ze=m.aggNums(Math.max,null,j.x),Ve=m.aggNums(Math.min,null,j.y),Je=m.aggNums(Math.max,null,j.y),De=Math.max(Se.c2p(Ie,!0),0),Be=Math.min(Se.c2p(ze,!0),me),Ze=Math.max(fe.c2p(Je,!0),0),Ye=Math.min(fe.c2p(Ve,!0),Te),tt={};_e[0]<_e[1]?(tt.left=De,tt.right=Be):(tt.left=Be,tt.right=De),Me[0]<Me[1]?(tt.top=Ze,tt.bottom=Ye):(tt.top=Ye,tt.bottom=Ze),tt.middle=(tt.top+tt.bottom)/2,tt.center=(tt.left+tt.right)/2,ge.push([[tt.left,tt.top],[tt.right,tt.top],[tt.right,tt.bottom],[tt.left,tt.bottom]]);var st=Math.sqrt(me*me+Te*Te),vt=c.LABELDISTANCE*st/Math.max(1,U.length/c.LABELINCREASE);oe.each(function(Pt){var Mt=ee.calcTextOpts(Pt.level,we,be,Q);p.select(this).selectAll("path").each(function(){var rt=m.getVisibleSegment(this,tt,Mt.height/2);if(rt&&!(rt.len<(Mt.width+Mt.height)*c.LABELMIN))for(var et=Math.min(Math.ceil(rt.len/vt),c.LABELMAX),bt=0;bt<et;bt++){var Rt=ee.findBestTextLocation(this,rt,Mt,xe,tt);if(!Rt)break;ee.addLabelData(Rt,Mt,xe,ge)}})}),be.remove(),ee.drawLabels(ce,xe,Q,pe,se?ge:null)}ne&&!re&&oe.remove()}(M,B,x,O,R),function(N,U,Q,j,J){var K=j.trace,ne="clip"+K.uid,se=Q._fullLayout._clips.selectAll("#"+ne).data(K.connectgaps?[]:[0]);if(se.enter().append("clipPath").classed("contourclip",!0).attr("id",ne),se.exit().remove(),!1===K.connectgaps){var oe={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:U.xaxis,yaxis:U.yaxis,x:j.x,y:j.y,z:o(j),smoothing:0};r([oe]),u([oe]),l([oe],{type:"levels"}),m.ensureSingle(se,"path","").attr("d",(oe.prefixBoundary?"M"+J.join("L")+"Z":"")+g(oe,J))}else ne=null;b.setClipUrl(N,ne,Q)}(M,d,x,O,te)})},ee.createLines=function(x,d,w){var _=w[0].smoothing,T=x.selectAll("g.contourlevel").data(d?w:[]);if(T.exit().remove(),T.enter().append("g").classed("contourlevel",!0),d){var k=T.selectAll("path.openline").data(function(M){return M.pedgepaths||M.edgepaths});k.exit().remove(),k.enter().append("path").classed("openline",!0),k.attr("d",function(M){return b.smoothopen(M,_)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var L=T.selectAll("path.closedline").data(function(M){return M.ppaths||M.paths});L.exit().remove(),L.enter().append("path").classed("closedline",!0),L.attr("d",function(M){return b.smoothclosed(M,_)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return T},ee.createLineClip=function(x,d,w,_){var T=d?"clipline"+_:null,k=w._fullLayout._clips.selectAll("#"+T).data(d?[0]:[]);return k.exit().remove(),k.enter().append("clipPath").classed("contourlineclip",!0).attr("id",T),b.setClipUrl(x,T,w),k},ee.labelFormatter=function(x,d){var w=x._fullLayout,_=d.trace,T=_.contours,k={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(T.labelformat)k.tickformat=T.labelformat,t(k,w);else{var L=v.extractOpts(_);if(L&&L.colorbar&&L.colorbar._axis)k=L.colorbar._axis;else{if("constraint"===T.type){var M=T.value;k.range=Array.isArray(M)?[M[0],M[M.length-1]]:[M,M]}else k.range=[T.start,T.end],k.nticks=(T.end-T.start)/T.size;k.range[0]===k.range[1]&&(k.range[1]+=k.range[0]||1),k.nticks||(k.nticks=1e3),t(k,w),n.prepTicks(k),k._tmin=null,k._tmax=null}}return function(O){return n.tickText(k,O).text}},ee.calcTextOpts=function(x,d,w,_){var T=d(x);w.text(T).call(e.convertToTspans,_);var k=w.node(),L=b.bBox(k,!0);return{text:T,width:L.width,height:L.height,fontSize:+k.style["font-size"].replace("px",""),level:x,dy:(L.top+L.bottom)/2}},ee.findBestTextLocation=function(x,d,w,_,T){var k,L,M,O,P,S=w.width;d.isClosed?(k=d.min+(L=d.len/f.INITIALSEARCHPOINTS)/2,M=d.max):(k=d.min+(L=(d.len-S)/(f.INITIALSEARCHPOINTS+1))+S/2,M=d.max-(L+S)/2);for(var E=1/0,R=0;R<f.ITERATIONS;R++){for(var B=k;B<M;B+=L){var H=m.getTextLocation(x,d.total,B,S),V=h(H,w,_,T);V<E&&(E=V,P=H,O=B)}if(E>2*f.MAXCOST)break;R&&(L/=2),M=(k=O-L/2)+1.5*L}if(E<=f.MAXCOST)return P},ee.addLabelData=function(x,d,w,_){var T=d.fontSize,k=d.width+T/3,L=Math.max(0,d.height-T/3),M=x.x,O=x.y,P=x.theta,S=Math.sin(P),E=Math.cos(P),R=function(H,V){return[M+H*E-V*S,O+H*S+V*E]},B=[R(-k/2,-L/2),R(-k/2,L/2),R(k/2,L/2),R(k/2,-L/2)];w.push({text:d.text,x:M,y:O,dy:d.dy,theta:P,level:d.level,width:k,height:L}),_.push(B)},ee.drawLabels=function(x,d,w,_,T){var k=x.selectAll("text").data(d,function(O){return O.text+","+O.x+","+O.y+","+O.theta});if(k.exit().remove(),k.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(O){var P=O.x+Math.sin(O.theta)*O.dy,S=O.y-Math.cos(O.theta)*O.dy;p.select(this).text(O.text).attr({x:P,y:S,transform:"rotate("+180*O.theta/Math.PI+" "+P+" "+S+")"}).call(e.convertToTspans,w)}),T){for(var L="",M=0;M<T.length;M++)L+="M"+T[M].join("L")+"Z";m.ensureSingle(_,"path","").attr("d",L)}}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":803,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes"),m=y("../../lib");function b(v,e,n){var t={type:"linear",range:[v,e]};return p.autoTicks(t,(e-v)/(n||15)),t}$.exports=function(v,e){var n=v.contours;if(v.autocontour){var t=v.zmin,a=v.zmax;(v.zauto||void 0===t)&&(t=m.aggNums(Math.min,null,e)),(v.zauto||void 0===a)&&(a=m.aggNums(Math.max,null,e));var r=b(t,a,v.ncontours);n.size=r.dtick,n.start=p.tickFirst(r),r.range.reverse(),n.end=p.tickFirst(r),n.start===t&&(n.start+=n.size),n.end===a&&(n.end-=n.size),n.start>n.end&&(n.start=n.end=(n.start+n.end)/2),v._input.contours||(v._input.contours={}),m.extendFlat(v._input.contours,{start:n.start,end:n.end,size:n.size}),v._input.autocontour=!0}else if("constraint"!==n.type){var u,s=n.start,i=n.end,l=v._input.contours;s>i&&(n.start=l.start=i,i=n.end=l.end=s,s=n.start),!(n.size>0)&&(u=s===i?1:b(s,i,v.ncontours).dtick,l.size=n.size=u)}}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/drawing"),b=y("../heatmap/style"),v=y("./make_color_map");$.exports=function(e){var n=p.select(e).selectAll("g.contour");n.style("opacity",function(t){return t[0].trace.opacity}),n.each(function(t){var a=p.select(this),r=t[0].trace,u=r.contours,s=r.line,i=u.size||1,l=u.start,c="constraint"===u.type,f=!c&&"lines"===u.coloring,g=!c&&"fill"===u.coloring,h=f||g?v(r):null;a.selectAll("g.contourlevel").each(function(d){p.select(this).selectAll("path").call(m.lineGroupStyle,s.width,f?h(d.level):s.color,s.dash)});var o=u.labelfont;if(a.selectAll("g.contourlabels text").each(function(d){m.font(p.select(this),{family:o.family,size:o.size,color:o.color||(f?h(d.level):s.color)})}),c)a.selectAll("g.contourfill path").style("fill",r.fillcolor);else if(g){var x;a.selectAll("g.contourfill path").style("fill",function(d){return void 0===x&&(x=d.level),h(d.level+.5*i)}),void 0===x&&(x=l),a.selectAll("g.contourbg path").style("fill",h(x-.5*i))}}),b(e)}},{"../../components/drawing":388,"../heatmap/style":804,"./make_color_map":751,"@plotly/d3":58}],756:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/defaults"),m=y("./label_defaults");$.exports=function(b,v,e,n,t){var a,r=e("contours.coloring"),u="";"fill"===r&&(a=e("contours.showlines")),!1!==a&&("lines"!==r&&(u=e("line.color","#000")),e("line.width",.5),e("line.dash")),"none"!==r&&(!0!==b.showlegend&&(v.showlegend=!1),v._dfltShowLegend=!1,p(b,v,n,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),m(e,n,u,t)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(y,$,ee){"use strict";var p=y("../heatmap/attributes"),m=y("../contour/attributes"),b=y("../../components/colorscale/attributes"),v=y("../../lib/extend").extendFlat,e=m.contours;$.exports=v({carpet:{valType:"string",editType:"calc"},z:p.z,a:p.x,a0:p.x0,da:p.dx,b:p.y,b0:p.y0,db:p.dy,text:p.text,hovertext:p.hovertext,transpose:p.transpose,atype:p.xtype,btype:p.ytype,fillcolor:m.fillcolor,autocontour:m.autocontour,ncontours:m.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:m.line.color,width:m.line.width,dash:m.line.dash,smoothing:m.line.smoothing,editType:"plot"},transforms:void 0},b("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/calc"),m=y("../../lib"),b=y("../heatmap/convert_column_xyz"),v=y("../heatmap/clean_2d_array"),e=y("../heatmap/interp2d"),n=y("../heatmap/find_empties"),t=y("../heatmap/make_bound_array"),a=y("./defaults"),r=y("../carpet/lookup_carpetid"),u=y("../contour/set_contours");$.exports=function(s,i){var l=i._carpetTrace=r(s,i);if(l&&l.visible&&"legendonly"!==l.visible){if(!i.a||!i.b){var c=s.data[l.index],f=s.data[i.index];f.a||(f.a=c.a),f.b||(f.b=c.b),a(f,i,i._defaultColor,s._fullLayout)}var g=function(h,o){var x,d,w,_,T,k,L,M=o._carpetTrace,O=M.aaxis,P=M.baxis;O._minDtick=0,P._minDtick=0,m.isArray1D(o.z)&&b(o,O,P,"a","b",["z"]),x=o._a=o._a||o.a,_=o._b=o._b||o.b,x=x?O.makeCalcdata(o,"_a"):[],_=_?P.makeCalcdata(o,"_b"):[],d=o.a0||0,w=o.da||1,T=o.b0||0,k=o.db||1,L=o._z=v(o._z||o.z,o.transpose),o._emptypoints=n(L),e(L,o._emptypoints);var S=m.maxRowLength(L),V={a:t(o,"scaled"===o.xtype?"":x,d,w,S,O),b:t(o,"scaled"===o.ytype?"":_,T,k,L.length,P),z:L};return"levels"===o.contours.type&&"none"!==o.contours.coloring&&p(h,o,{vals:L,containerStr:"",cLetter:"z"}),[V]}(s,i);return u(i,i._z),g}}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":802,"./defaults":759}],759:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../heatmap/xyz_defaults"),b=y("./attributes"),v=y("../contour/constraint_defaults"),e=y("../contour/contours_defaults"),n=y("../contour/style_defaults");$.exports=function(t,a,r,u){function s(i,l){return p.coerce(t,a,b,i,l)}if(s("carpet"),t.a&&t.b){if(!m(t,a,s,u,"a","b"))return void(a.visible=!1);s("text"),"constraint"===s("contours.type")?v(t,a,s,u,r,{hasHover:!1}):(e(t,a,s,function(i){return p.coerce2(t,a,b,i)}),n(t,a,s,u,{hasHover:!1}))}else a._defaultColor=r,a._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":806,"./attributes":757}],760:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../contour/colorbar"),calc:y("./calc"),plot:y("./plot"),style:y("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../carpet/map_1d_array"),b=y("../carpet/makepath"),v=y("../../components/drawing"),e=y("../../lib"),n=y("../contour/make_crossings"),t=y("../contour/find_all_paths"),a=y("../contour/plot"),r=y("../contour/constants"),u=y("../contour/convert_to_constraints"),s=y("../contour/empty_pathinfo"),i=y("../contour/close_boundaries"),l=y("../carpet/lookup_carpetid"),c=y("../carpet/axis_aligned_line");function f(o,x,d){var w=o.getPointAtLength(x),_=o.getPointAtLength(d),T=_.x-w.x,k=_.y-w.y,L=Math.sqrt(T*T+k*k);return[T/L,k/L]}function g(o){var x=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return[o[0]/x,o[1]/x]}function h(o,x){var d=Math.abs(o[0]*x[0]+o[1]*x[1]);return Math.sqrt(1-d*d)/d}$.exports=function(o,x,d,w){var _=x.xaxis,T=x.yaxis;e.makeTraceGroups(w,d,"contour").each(function(k){var L=p.select(this),M=k[0],O=M.trace,P=O._carpetTrace=l(o,O),S=o.calcdata[P.index][0];if(P.visible&&"legendonly"!==P.visible){var E=M.a,R=M.b,B=O.contours,H=s(B,x,M),V="constraint"===B.type,Z=B._operation,W=V?"="===Z?"lines":"fill":B.coloring,G=[[E[0],R[R.length-1]],[E[E.length-1],R[R.length-1]],[E[E.length-1],R[0]],[E[0],R[0]]];n(H),t(H,1e-8*(E[E.length-1]-E[0]),1e-8*(R[R.length-1]-R[0]));var D,N,U,Q,j=H;"constraint"===B.type&&(j=u(H,Z)),function(ne,se){var oe,pe,ce,ge,xe,we,be,Se,fe;for(oe=0;oe<ne.length;oe++){for(xe=(ge=ne[oe]).pedgepaths=[],we=ge.ppaths=[],pe=0;pe<ge.edgepaths.length;pe++){for(fe=ge.edgepaths[pe],be=[],ce=0;ce<fe.length;ce++)be[ce]=se(fe[ce]);xe.push(be)}for(pe=0;pe<ge.paths.length;pe++){for(fe=ge.paths[pe],Se=[],ce=0;ce<fe.length;ce++)Se[ce]=se(fe[ce]);we.push(Se)}}}(H,re);var J=[];for(Q=S.clipsegments.length-1;Q>=0;Q--)N=m([],(D=S.clipsegments[Q]).x,_.c2p),U=m([],D.y,T.c2p),N.reverse(),U.reverse(),J.push(b(N,U,D.bicubic));var K="M"+J.join("L")+"Z";(function(ne,se,oe,pe,ce,ge){var xe,we,be,Se,fe=e.ensureSingle(ne,"g","contourbg").selectAll("path").data("fill"!==ge||ce?[]:[0]);fe.enter().append("path"),fe.exit().remove();var me=[];for(Se=0;Se<se.length;Se++)we=m([],(xe=se[Se]).x,oe.c2p),be=m([],xe.y,pe.c2p),me.push(b(we,be,xe.bicubic));fe.attr("d","M"+me.join("L")+"Z").style("stroke","none")})(L,S.clipsegments,_,T,V,W),function(ne,se,oe,pe,ce,ge,xe,we,be,Se,fe){var me="fill"===Se;me&&i(ce,ne.contours);var Te=e.ensureSingle(se,"g","contourfill").selectAll("path").data(me?ce:[]);Te.enter().append("path"),Te.exit().remove(),Te.each(function(_e){var Me=(_e.prefixBoundary?fe:"")+function(Ie,ze,Ve,Je,De,Be,Ze,Ye){var tt,st,vt,Pt,Mt,rt,et,bt="",Rt=ze.edgepaths.map(function(at,pt){return pt}),Yt=!0,Fe=1e-4*Math.abs(Ve[0][0]-Ve[2][0]),He=1e-4*Math.abs(Ve[0][1]-Ve[2][1]);function Oe(at){return Math.abs(at[1]-Ve[0][1])<He}function $e(at){return Math.abs(at[1]-Ve[2][1])<He}function ke(at){return Math.abs(at[0]-Ve[0][0])<Fe}function Le(at){return Math.abs(at[0]-Ve[2][0])<Fe}function Pe(at,pt){var ut,St,ot,Et,Lt="";for(Oe(at)&&!Le(at)||$e(at)&&!ke(at)?(Et=De.aaxis,ot=c(De,Be,[at[0],pt[0]],.5*(at[1]+pt[1]))):(Et=De.baxis,ot=c(De,Be,.5*(at[0]+pt[0]),[at[1],pt[1]])),ut=1;ut<ot.length;ut++)for(Lt+=Et.smoothing?"C":"L",St=0;St<ot[ut].length;St++){var Qe=ot[ut][St];Lt+=[Ze.c2p(Qe[0]),Ye.c2p(Qe[1])]+" "}return Lt}for(tt=0,st=null;Rt.length;){for(st&&(bt+=Pe(st,ze.edgepaths[tt][0])),et=v.smoothopen(ze.edgepaths[tt].map(Je),ze.smoothing),bt+=Yt?et:et.replace(/^M/,"L"),Rt.splice(Rt.indexOf(tt),1),st=ze.edgepaths[tt][ze.edgepaths[tt].length-1],Mt=-1,Pt=0;Pt<4;Pt++){if(!st){e.log("Missing end?",tt,ze);break}for(Oe(st)&&!Le(st)?vt=Ve[1]:ke(st)?vt=Ve[0]:$e(st)?vt=Ve[3]:Le(st)&&(vt=Ve[2]),rt=0;rt<ze.edgepaths.length;rt++){var Xe=ze.edgepaths[rt][0];Math.abs(st[0]-vt[0])<Fe?Math.abs(st[0]-Xe[0])<Fe&&(Xe[1]-st[1])*(vt[1]-Xe[1])>=0&&(vt=Xe,Mt=rt):Math.abs(st[1]-vt[1])<He?Math.abs(st[1]-Xe[1])<He&&(Xe[0]-st[0])*(vt[0]-Xe[0])>=0&&(vt=Xe,Mt=rt):e.log("endpt to newendpt is not vert. or horz.",st,vt,Xe)}if(Mt>=0)break;bt+=Pe(st,vt),st=vt}if(Mt===ze.edgepaths.length){e.log("unclosed perimeter path");break}(Yt=-1===Rt.indexOf(tt=Mt))&&(tt=Rt[0],bt+=Pe(st,vt)+"Z",st=null)}for(tt=0;tt<ze.paths.length;tt++)bt+=v.smoothclosed(ze.paths[tt].map(Je),ze.smoothing);return bt}(0,_e,ge,xe,we,be,oe,pe);Me?p.select(this).attr("d",Me).style("stroke","none"):p.select(this).remove()})}(O,L,_,T,j,G,re,P,S,W,K),function(ne,se,oe,pe,ce,ge,xe){var we=e.ensureSingle(ne,"g","contourlines"),be=!1!==ce.showlines,Se=ce.showlabels,fe=be&&Se,me=a.createLines(we,be||Se,se),Te=a.createLineClip(we,fe,oe,pe.trace.uid),_e=ne.selectAll("g.contourlabels").data(Se?[0]:[]);if(_e.exit().remove(),_e.enter().append("g").classed("contourlabels",!0),Se){var ze=ge.xaxis._length,Ve=ge.yaxis._length,Je=[[[0,0],[ze,0],[ze,Ve],[0,Ve]]],De=[];e.clearLocationCache();var Be=a.labelFormatter(oe,pe),Ze=v.tester.append("text").attr("data-notex",1).call(v.font,ce.labelfont),Ye={left:0,right:ze,center:ze/2,top:0,bottom:Ve,middle:Ve/2},tt=Math.sqrt(ze*ze+Ve*Ve),st=r.LABELDISTANCE*tt/Math.max(1,se.length/r.LABELINCREASE);me.each(function(vt){var Pt=a.calcTextOpts(vt.level,Be,Ze,oe);p.select(this).selectAll("path").each(function(Mt){var rt=e.getVisibleSegment(this,Ye,Pt.height/2);if(rt&&(function(Yt,Fe,He,Oe,$e,ke){for(var Le,Pe=0;Pe<He.pedgepaths.length;Pe++)Fe===He.pedgepaths[Pe]&&(Le=He.edgepaths[Pe]);if(Le){var Ce=$e.a[0],Xe=$e.a[$e.a.length-1],at=$e.b[0],pt=$e.b[$e.b.length-1],St=f(Yt,0,1),ot=f(Yt,Oe.total,Oe.total-1),Et=ut(Le[0],St),Lt=Oe.total-ut(Le[Le.length-1],ot);Oe.min<Et&&(Oe.min=Et),Oe.max>Lt&&(Oe.max=Lt),Oe.len=Oe.max-Oe.min}function ut(Qe,mt){var It,jt=0;return(Math.abs(Qe[0]-Ce)<.1||Math.abs(Qe[0]-Xe)<.1)&&(It=g($e.dxydb_rough(Qe[0],Qe[1],.1)),jt=Math.max(jt,ke*h(mt,It)/2)),(Math.abs(Qe[1]-at)<.1||Math.abs(Qe[1]-pt)<.1)&&(It=g($e.dxyda_rough(Qe[0],Qe[1],.1)),jt=Math.max(jt,ke*h(mt,It)/2)),jt}}(this,Mt,vt,rt,xe,Pt.height),!(rt.len<(Pt.width+Pt.height)*r.LABELMIN)))for(var et=Math.min(Math.ceil(rt.len/st),r.LABELMAX),bt=0;bt<et;bt++){var Rt=a.findBestTextLocation(this,rt,Pt,De,Ye);if(!Rt)break;a.addLabelData(Rt,Pt,De,Je)}})}),Ze.remove(),a.drawLabels(_e,De,oe,Te,fe?Je:null)}Se&&!be&&me.remove()}(L,H,o,M,B,x,P),v.setClipUrl(L,P._clipPathId,o)}function re(ne){var se=P.ab2xy(ne[0],ne[1],!0);return[_.c2p(se[0]),T.c2p(se[1])]}})}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/attributes"),m=y("../../plots/template_attributes").hovertemplateAttrs,b=y("../../plots/attributes"),v=y("../scattermapbox/attributes"),e=y("../../lib/extend").extendFlat;$.exports=e({lon:v.lon,lat:v.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:v.text,hovertext:v.hovertext,hoverinfo:e({},b.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:m(),showlegend:e({},b.showlegend,{dflt:!1})},p("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":990}],763:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib").isArrayOrTypedArray,b=y("../../constants/numerical").BADNUM,v=y("../../components/colorscale/calc"),e=y("../../lib")._;$.exports=function(n,t){for(var a=t._length,r=new Array(a),u=t.z,s=m(u)&&u.length,i=0;i<a;i++){var l=r[i]={},c=t.lon[i],f=t.lat[i];if(l.lonlat=p(c)&&p(f)?[+c,+f]:[b,b],s){var g=u[i];l.z=p(g)?g:b}}return v(n,t,{vals:s?u:[0,1],containerStr:"",cLetter:"z"}),a&&(r[0].t={labels:{lat:e(n,"lat:")+" ",lon:e(n,"lon:")+" "}}),r}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib"),b=y("../../components/color"),v=y("../../components/colorscale"),e=y("../../constants/numerical").BADNUM,n=y("../../lib/geojson_utils").makeBlank;$.exports=function(t){var a=t[0].trace,r=!0===a.visible&&0!==a._length,u=a._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:n()};if(!r)return u;var s,i=[],l=a.z,c=a.radius,f=m.isArrayOrTypedArray(l)&&l.length,g=m.isArrayOrTypedArray(c);for(s=0;s<t.length;s++){var h=t[s],o=h.lonlat;if(o[0]!==e){var x={};if(f){var d=h.z;x.z=d!==e?d:0}g&&(x.r=p(c[s])&&c[s]>0?+c[s]:0),i.push({type:"Feature",geometry:{type:"Point",coordinates:o},properties:x})}}var w=v.extractOpts(a),_=w.reversescale?v.flipScale(w.colorscale):w.colorscale,T=_[0][1],k=["interpolate",["linear"],["heatmap-density"],0,b.opacity(T)<1?T:b.addOpacity(T,0)];for(s=1;s<_.length;s++)k.push(_[s][0],_[s][1]);return m.extendFlat(u.heatmap.paint,{"heatmap-weight":f?["interpolate",["linear"],["get","z"],w.min,0,w.max,1]:1/(w.max-w.min),"heatmap-color":k,"heatmap-radius":g?{type:"identity",property:"r"}:a.radius,"heatmap-opacity":a.opacity}),u.geojson={type:"FeatureCollection",features:i},u.heatmap.layout.visibility="visible",u}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/colorscale/defaults"),b=y("./attributes");$.exports=function(v,e,n,t){function a(i,l){return p.coerce(v,e,b,i,l)}var r=a("lon")||[],u=a("lat")||[],s=Math.min(r.length,u.length);s?(e._length=s,a("z"),a("radius"),a("below"),a("text"),a("hovertext"),a("hovertemplate"),m(v,e,t,a,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(y,$,ee){"use strict";$.exports=function(p,m){return p.lon=m.lon,p.lat=m.lat,p.z=m.z,p}},{}],767:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes"),m=y("../scattermapbox/hover").hoverPoints,b=y("../scattermapbox/hover").getExtraText;$.exports=function(v,e,n){var t=m(v,e,n);if(t){var a=t[0],r=a.cd,u=r[0].trace,s=r[a.index];if(delete a.color,"z"in s){var i=a.subplot.mockAxis;a.z=s.z,a.zLabel=p.tickText(i,i.c2l(s.z),"hover").text}return a.extraText=b(u,s,r[0].t.labels),[a]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":995}],768:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../heatmap/colorbar"),formatLabels:y("../scattermapbox/format_labels"),calc:y("./calc"),plot:y("./plot"),hoverPoints:y("./hover"),eventData:y("./event_data"),getBelow:function(p,m){for(var b=m.getMapLayers(),v=0;v<b.length;v++){var e=b[v],n=e.id;if("symbol"===e.type&&"string"==typeof n&&-1===n.indexOf("plotly-"))return n}},moduleType:"trace",name:"densitymapbox",basePlotModule:y("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":994,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(y,$,ee){"use strict";var p=y("./convert"),m=y("../../plots/mapbox/constants").traceLayerPrefix;function b(e,n){this.type="densitymapbox",this.subplot=e,this.uid=n,this.sourceId="source-"+n,this.layerList=[["heatmap",m+n+"-heatmap"]],this.below=null}var v=b.prototype;v.update=function(e){var n=this.subplot,t=this.layerList,a=p(e),r=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(a.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(a,r),this.below=r);for(var u=0;u<t.length;u++){var s=t[u],l=s[1],c=a[s[0]];n.setOptions(l,"setLayoutProperty",c.layout),"visible"===c.layout.visibility&&n.setOptions(l,"setPaintProperty",c.paint)}},v._addLayers=function(e,n){for(var t=this.subplot,a=this.layerList,r=this.sourceId,u=0;u<a.length;u++){var s=a[u],i=s[0],l=e[i];t.addLayer({type:i,id:s[1],source:r,layout:l.layout,paint:l.paint},n)}},v._removeLayers=function(){for(var e=this.subplot.map,n=this.layerList,t=n.length-1;t>=0;t--)e.removeLayer(n[t][1])},v.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},$.exports=function(e,n){var t=n[0].trace,a=new b(e,t.uid),r=a.sourceId,u=p(n),s=a.below=e.belowLookup["trace-"+t.uid];return e.map.addSource(r,{type:"geojson",data:u.geojson}),a._addLayers(u,s),a}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(y,$,ee){"use strict";var p=y("../../lib");$.exports=function(m,b){for(var v=0;v<m.length;v++)m[v].i=v;p.mergeArray(b.text,m,"tx"),p.mergeArray(b.hovertext,m,"htx");var e=b.marker;if(e){p.mergeArray(e.opacity,m,"mo"),p.mergeArray(e.color,m,"mc");var n=e.line;n&&(p.mergeArray(n.color,m,"mlc"),p.mergeArrayCastPositive(n.width,m,"mlw"))}}},{"../../lib":503}],771:[function(y,$,ee){"use strict";var p,m=y("../bar/attributes"),b=y("../scatter/attributes").line,v=y("../../plots/attributes"),e=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=y("../../plots/template_attributes").hovertemplateAttrs,t=y("../../plots/template_attributes").texttemplateAttrs,a=y("./constants"),r=y("../../lib/extend").extendFlat,u=y("../../components/color");$.exports={x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:m.hovertext,hovertemplate:n({},{keys:a.eventDataKeys}),hoverinfo:r({},v.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:t({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:m.text,textposition:m.textposition,insidetextanchor:r({},m.insidetextanchor,{dflt:"middle"}),textangle:r({},m.textangle,{dflt:0}),textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:m.outsidetextfont,constraintext:m.constraintext,cliponaxis:m.cliponaxis,orientation:r({},m.orientation,{}),offset:r({},m.offset,{arrayOk:!1}),width:r({},m.width,{arrayOk:!1}),marker:(p=r({},m.marker),delete p.pattern,p),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:r({},b.color,{dflt:u.defaultLine}),width:r({},b.width,{dflt:0,editType:"plot"}),dash:b.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":925,"./constants":773}],772:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes"),m=y("../../plots/cartesian/align_period"),b=y("./arrays_to_calcdata"),v=y("../scatter/calc_selection"),e=y("../../constants/numerical").BADNUM;function n(t){return t===e?0:t}$.exports=function(t,a){var r,u,s,i,l,c,f,g,h=p.getFromId(t,a.xaxis||"x"),o=p.getFromId(t,a.yaxis||"y");"h"===a.orientation?(r=h.makeCalcdata(a,"x"),s=o.makeCalcdata(a,"y"),i=m(a,o,"y",s),l=!!a.yperiodalignment,c="y"):(r=o.makeCalcdata(a,"y"),s=h.makeCalcdata(a,"x"),i=m(a,h,"x",s),l=!!a.xperiodalignment,c="x"),u=i.vals;var x,d=Math.min(u.length,r.length),w=new Array(d);for(a._base=[],f=0;f<d;f++){r[f]<0&&(r[f]=e);var _=!1;r[f]!==e&&f+1<d&&r[f+1]!==e&&(_=!0),g=w[f]={p:u[f],s:r[f],cNext:_},a._base[f]=-.5*g.s,l&&(w[f].orig_p=s[f],w[f][c+"End"]=i.ends[f],w[f][c+"Start"]=i.starts[f]),a.ids&&(g.id=String(a.ids[f])),0===f&&(w[0].vTotal=0),w[0].vTotal+=n(g.s),g.begR=n(g.s)/n(w[0].s)}for(f=0;f<d;f++)(g=w[f]).s!==e&&(g.sumR=g.s/w[0].vTotal,g.difR=void 0!==x?g.s/x:1,x=g.s);return b(w,a),v(w,a),w}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":927,"./arrays_to_calcdata":770}],773:[function(y,$,ee){"use strict";$.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(y,$,ee){"use strict";var p=y("../bar/cross_trace_calc").setGroupPositions;$.exports=function(m,b){var v,e,n=m._fullLayout,t=m._fullData,a=m.calcdata,r=b.xaxis,u=b.yaxis,s=[],i=[],l=[];for(e=0;e<t.length;e++){var c=t[e];!0===c.visible&&c.xaxis===r._id&&c.yaxis===u._id&&"funnel"===c.type&&(v=a[e],"h"===c.orientation?l.push(v):i.push(v),s.push(v))}var g={mode:n.funnelmode,norm:n.funnelnorm,gap:n.funnelgap,groupgap:n.funnelgroupgap};for(p(m,r,u,i,g),p(m,u,r,l,g),e=0;e<s.length;e++){v=s[e];for(var h=0;h<v.length;h++)h+1<v.length&&(v[h].nextP0=v[h+1].p0,v[h].nextS0=v[h+1].s0,v[h].nextP1=v[h+1].p1,v[h].nextS1=v[h+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../bar/defaults").handleGroupingDefaults,b=y("../bar/defaults").handleText,v=y("../scatter/xy_defaults"),e=y("../scatter/period_defaults"),n=y("./attributes"),t=y("../../components/color");$.exports={supplyDefaults:function(a,r,u,s){function i(g,h){return p.coerce(a,r,n,g,h)}if(v(a,r,s,i)){e(a,r,s,i),i("xhoverformat"),i("yhoverformat"),i("orientation",r.y&&!r.x?"v":"h"),i("offset"),i("width");var l=i("text");i("hovertext"),i("hovertemplate");var c=i("textposition");b(a,r,s,i,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===r.textposition||r.texttemplate||i("textinfo",Array.isArray(l)?"text+value":"value");var f=i("marker.color",u);i("marker.line.color",t.defaultLine),i("marker.line.width"),i("connector.visible")&&(i("connector.fillcolor",(h=p.isArrayOrTypedArray(g=f)?"#000":g,t.addOpacity(h,.5*t.opacity(h)))),i("connector.line.width")&&(i("connector.line.color"),i("connector.line.dash")))}else r.visible=!1;var g,h},crossTraceDefaults:function(a,r){var u,s;function i(c){return p.coerce(s._input,s,n,c)}if("group"===r.funnelmode)for(var l=0;l<a.length;l++)u=(s=a[l])._input,m(u,s,r,i)}}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":945,"../scatter/xy_defaults":952,"./attributes":771}],776:[function(y,$,ee){"use strict";$.exports=function(p,m){return p.x="xVal"in m?m.xVal:m.x,p.y="yVal"in m?m.yVal:m.y,"percentInitial"in m&&(p.percentInitial=m.percentInitial),"percentPrevious"in m&&(p.percentPrevious=m.percentPrevious),"percentTotal"in m&&(p.percentTotal=m.percentTotal),m.xa&&(p.xaxis=m.xa),m.ya&&(p.yaxis=m.ya),p}},{}],777:[function(y,$,ee){"use strict";var p=y("../../components/color").opacity,m=y("../bar/hover").hoverOnBars,b=y("../../lib").formatPercent;$.exports=function(v,e,n,t,a){var d,w,_,T,k,r=m(v,e,n,t,a);if(r){var u=r.cd,s=u[0].trace,l=u[r.index];r[("h"===s.orientation?"x":"y")+"LabelVal"]=l.s,r.percentInitial=l.begR,r.percentInitialLabel=b(l.begR,1),r.percentPrevious=l.difR,r.percentPreviousLabel=b(l.difR,1),r.percentTotal=l.sumR,r.percentTotalLabel=b(l.sumR,1);var c=l.hi||s.hoverinfo,f=[];if(c&&"none"!==c&&"skip"!==c){var g="all"===c,h=c.split("+"),o=function(x){return g||-1!==h.indexOf(x)};o("percent initial")&&f.push(r.percentInitialLabel+" of initial"),o("percent previous")&&f.push(r.percentPreviousLabel+" of previous"),o("percent total")&&f.push(r.percentTotalLabel+" of total")}return r.extraText=f.join("<br>"),r.color=(w=s.marker,T=(d=l).mlc||w.line.color,k=d.mlw||w.line.width,p(_=d.mc||w.color)?_:p(T)&&k?T:void 0),[r]}}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults").supplyDefaults,crossTraceDefaults:y("./defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc"),plot:y("./plot"),style:y("./style").style,hoverPoints:y("./hover"),eventData:y("./event_data"),selectPoints:y("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:y("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(y,$,ee){"use strict";$.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./layout_attributes");$.exports=function(b,v,e){var n=!1;function t(u,s){return p.coerce(b,v,m,u,s)}for(var a=0;a<e.length;a++){var r=e[a];if(r.visible&&"funnel"===r.type){n=!0;break}}n&&(t("funnelmode"),t("funnelgap",.2),t("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=y("../../components/drawing"),v=y("../../constants/numerical").BADNUM,e=y("../bar/plot"),n=y("../bar/uniform_text").clearMinTextSize;function t(a,r,u,s){var i=[],l=[],c=s?r:u,f=s?u:r;return i[0]=c.c2p(a.s0,!0),l[0]=f.c2p(a.p0,!0),i[1]=c.c2p(a.s1,!0),l[1]=f.c2p(a.p1,!0),i[2]=c.c2p(a.nextS0,!0),l[2]=f.c2p(a.nextP0,!0),i[3]=c.c2p(a.nextS1,!0),l[3]=f.c2p(a.nextP1,!0),s?[i,l]:[l,i]}$.exports=function(a,r,u,s){var l,c,h,o,i=a._fullLayout;n("funnel",i),l=a,h=(c=r).xaxis,o=c.yaxis,m.makeTraceGroups(s,u,"trace bars").each(function(x){var d=p.select(this),w=x[0].trace,_=m.ensureSingle(d,"g","regions");if(w.connector&&w.connector.visible){var T="h"===w.orientation,k=_.selectAll("g.region").data(m.identity);k.enter().append("g").classed("region",!0),k.exit().remove();var L=k.size();k.each(function(M,O){if(O===L-1||M.cNext){var P=t(M,h,o,T),S=P[0],E=P[1],R="";S[0]!==v&&E[0]!==v&&S[1]!==v&&E[1]!==v&&S[2]!==v&&E[2]!==v&&S[3]!==v&&E[3]!==v&&(R+=T?"M"+S[0]+","+E[1]+"L"+S[2]+","+E[2]+"H"+S[3]+"L"+S[1]+","+E[1]+"Z":"M"+S[1]+","+E[1]+"L"+S[2]+","+E[3]+"V"+E[2]+"L"+S[1]+","+E[0]+"Z"),""===R&&(R="M0,0Z"),m.ensureSingle(p.select(this),"path").attr("d",R).call(b.setClipUrl,c.layerClipId,l)}})}else _.remove()}),function(l,c,f,g){var h=c.xaxis,o=c.yaxis;m.makeTraceGroups(g,f,"trace bars").each(function(x){var d=p.select(this),w=x[0].trace,_=m.ensureSingle(d,"g","lines");if(w.connector&&w.connector.visible&&w.connector.line.width){var T="h"===w.orientation,k=_.selectAll("g.line").data(m.identity);k.enter().append("g").classed("line",!0),k.exit().remove();var L=k.size();k.each(function(M,O){if(O===L-1||M.cNext){var P=t(M,h,o,T),S=P[0],E=P[1],R="";void 0!==S[3]&&void 0!==E[3]&&(T?(R+="M"+S[0]+","+E[1]+"L"+S[2]+","+E[2],R+="M"+S[1]+","+E[1]+"L"+S[3]+","+E[2]):(R+="M"+S[1]+","+E[1]+"L"+S[2]+","+E[3],R+="M"+S[1]+","+E[0]+"L"+S[2]+","+E[2])),""===R&&(R="M0,0Z"),m.ensureSingle(p.select(this),"path").attr("d",R).call(b.setClipUrl,c.layerClipId,l)}})}else _.remove()})}(a,r,u,s),e.plot(a,r,u,s,{mode:i.funnelmode,norm:i.funnelmode,gap:i.funnelgap,groupgap:i.funnelgroupgap})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/drawing"),b=y("../../components/color"),v=y("../../constants/interactions").DESELECTDIM,e=y("../bar/style"),n=y("../bar/uniform_text").resizeText,t=e.styleTextPoints;$.exports={style:function(a,r,u){var s=u||p.select(a).selectAll("g.funnellayer").selectAll("g.trace");n(a,s,"funnel"),s.style("opacity",function(i){return i[0].trace.opacity}),s.each(function(i){var l=p.select(this),c=i[0].trace;l.selectAll(".point > path").each(function(f){if(!f.isBlank){var g=c.marker;p.select(this).call(b.fill,f.mc||g.color).call(b.stroke,f.mlc||g.line.color).call(m.dashLine,g.line.dash,f.mlw||g.line.width).style("opacity",c.selectedpoints&&!f.selected?v:1)}}),t(l,c,a),l.selectAll(".regions").each(function(){p.select(this).selectAll("path").style("stroke-width",0).call(b.fill,c.connector.fillcolor)}),l.selectAll(".lines").each(function(){var f=c.connector.line;m.lineGroupStyle(p.select(this).selectAll("path"),f.width,f.color,f.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(y,$,ee){"use strict";var p=y("../pie/attributes"),m=y("../../plots/attributes"),b=y("../../plots/domain").attributes,v=y("../../plots/template_attributes").hovertemplateAttrs,e=y("../../plots/template_attributes").texttemplateAttrs,n=y("../../lib/extend").extendFlat;$.exports={labels:p.labels,label0:p.label0,dlabel:p.dlabel,values:p.values,marker:{colors:p.marker.colors,line:{color:n({},p.marker.line.color,{dflt:null}),width:n({},p.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:p.text,hovertext:p.hovertext,scalegroup:n({},p.scalegroup,{}),textinfo:n({},p.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:n({},m.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:v({},{keys:["label","color","value","text","percent"]}),textposition:n({},p.textposition,{values:["inside","none"],dflt:"inside"}),textfont:p.textfont,insidetextfont:p.insidetextfont,title:{text:p.title.text,font:p.title.font,position:n({},p.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:b({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":899}],784:[function(y,$,ee){"use strict";var p=y("../../plots/plots");ee.name="funnelarea",ee.plot=function(m,b,v,e){p.plotBasePlot(ee.name,m,b,v,e)},ee.clean=function(m,b,v,e){p.cleanBasePlot(ee.name,m,b,v,e)}},{"../../plots/plots":619}],785:[function(y,$,ee){"use strict";var p=y("../pie/calc");$.exports={calc:function(m,b){return p.calc(m,b)},crossTraceCalc:function(m){p.crossTraceCalc(m,{type:"funnelarea"})}}},{"../pie/calc":901}],786:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./attributes"),b=y("../../plots/domain").defaults,v=y("../bar/defaults").handleText,e=y("../pie/defaults").handleLabelsAndValues;$.exports=function(n,t,a,r){function u(x,d){return p.coerce(n,t,m,x,d)}var s=u("labels"),i=u("values"),l=e(s,i),c=l.len;if(t._hasLabels=l.hasLabels,t._hasValues=l.hasValues,!t._hasLabels&&t._hasValues&&(u("label0"),u("dlabel")),c){t._length=c,u("marker.line.width")&&u("marker.line.color",r.paper_bgcolor),u("marker.colors"),u("scalegroup");var f,g=u("text"),h=u("texttemplate");if(h||(f=u("textinfo",Array.isArray(g)?"text+percent":"percent")),u("hovertext"),u("hovertemplate"),h||f&&"none"!==f){var o=u("textposition");v(n,t,r,u,o,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}b(t,r,u),u("title.text")&&(u("title.position"),p.coerceFont(u,"title.font",r.font)),u("aspectratio"),u("baseratio")}else t.visible=!1}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":902,"./attributes":783}],787:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"funnelarea",basePlotModule:y("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot"),style:y("./style"),styleOne:y("../pie/style_one"),meta:{}}},{"../pie/style_one":910,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(y,$,ee){"use strict";var p=y("../pie/layout_attributes").hiddenlabels;$.exports={hiddenlabels:p,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":906}],789:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./layout_attributes");$.exports=function(b,v){function e(n,t){return p.coerce(b,v,m,n,t)}e("hiddenlabels"),e("funnelareacolorway",v.colorway),e("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/drawing"),b=y("../../lib"),v=b.strScale,e=b.strTranslate,n=y("../../lib/svg_text_utils"),t=y("../bar/plot").toMoveInsideBar,a=y("../bar/uniform_text"),r=a.recordMinTextSize,u=a.clearMinTextSize,s=y("../pie/helpers"),i=y("../pie/plot"),l=i.attachFxHandlers,c=i.determineInsideTextFont,f=i.layoutAreas,g=i.prerenderTitles,h=i.positionTitleOutside,o=i.formatSliceLabel;function x(d,w){return"l"+(w[0]-d[0])+","+(w[1]-d[1])}$.exports=function(d,w){var _=d._fullLayout;u("funnelarea",_),g(w,d),f(w,_._size),b.makeTraceGroups(_._funnelarealayer,w,"trace").each(function(T){var k=p.select(this),L=T[0],M=L.trace;(function(O){if(O.length){var P=O[0],S=P.trace,E=S.aspectratio,R=S.baseratio;R>.999&&(R=.999);var B,X,te,H=Math.pow(R,2),V=P.vTotal,Z=V,W=V*H/(1-H)/V,D=[];for(D.push(G()),X=O.length-1;X>-1;X--)(te=O[X]).hidden||(W+=te.v/Z,D.push(G()));var U=1/0,Q=-1/0;for(X=0;X<D.length;X++)B=D[X],U=Math.min(U,B[1]),Q=Math.max(Q,B[1]);for(X=0;X<D.length;X++)D[X][1]-=(Q+U)/2;var J=P.r,K=(Q-U)/2,re=J/D[D.length-1][0],ne=J/K*E;for(P.r=ne*K,X=0;X<D.length;X++)D[X][0]*=re,D[X][1]*=ne;var xe,we,se=[-(B=D[0])[0],B[1]],oe=[B[0],B[1]],pe=0;for(X=O.length-1;X>-1;X--)if(!(te=O[X]).hidden){var ce=D[pe+=1][0],ge=D[pe][1];te.TL=[-ce,ge],te.TR=[ce,ge],te.BL=se,te.BR=oe,te.pxmid=[.5*((xe=te.TR)[0]+(we=te.BR)[0]),.5*(xe[1]+we[1])],se=te.TL,oe=te.TR}}function G(){var be,Se={x:be=Math.sqrt(W),y:-be};return[Se.x,Se.y]}})(T),k.each(function(){var O=p.select(this).selectAll("g.slice").data(T);O.enter().append("g").classed("slice",!0),O.exit().remove(),O.each(function(S,E){if(S.hidden)p.select(this).selectAll("path,g").remove();else{S.pointNumber=S.i,S.curveNumber=M.index;var R=L.cx,B=L.cy,H=p.select(this),V=H.selectAll("path.surface").data([S]);V.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),H.call(l,d,T);var Z="M"+(R+S.TR[0])+","+(B+S.TR[1])+x(S.TR,S.BR)+x(S.BR,S.BL)+x(S.BL,S.TL)+"Z";V.attr("d",Z),o(d,S,L);var W=s.castOption(M.textposition,S.pts),G=H.selectAll("g.slicetext").data(S.text&&"none"!==W?[0]:[]);G.enter().append("g").classed("slicetext",!0),G.exit().remove(),G.each(function(){var X=b.ensureSingle(p.select(this),"text","",function(K){K.attr("data-notex",1)}),te=b.ensureUniformFontSize(d,c(M,S,_.font));X.text(S.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(m.font,te).call(n.convertToTspans,d);var D,N,U,Q=m.bBox(X.node()),j=Math.min(S.BL[1],S.BR[1])+B,J=Math.max(S.TL[1],S.TR[1])+B;N=Math.max(S.TL[0],S.BL[0])+R,U=Math.min(S.TR[0],S.BR[0])+R,(D=t(N,U,j,J,Q,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=te.size,r(M.type,D,_),T[E].transform=D,X.attr("transform",b.getTextTransform(D))})}});var P=p.select(this).selectAll("g.titletext").data(M.title.text?[0]:[]);P.enter().append("g").classed("titletext",!0),P.exit().remove(),P.each(function(){var S=b.ensureSingle(p.select(this),"text","",function(B){B.attr("data-notex",1)}),E=M.title.text;M._meta&&(E=b.templateString(E,M._meta)),S.text(E).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(m.font,M.title.font).call(n.convertToTspans,d);var R=h(L,_._size);S.attr("transform",e(R.x,R.y)+v(Math.min(1,R.scale))+e(R.tx,R.ty))})})})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":904,"../pie/plot":908,"@plotly/d3":58}],791:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../pie/style_one"),b=y("../bar/uniform_text").resizeText;$.exports=function(v){var e=v._fullLayout._funnelarealayer.selectAll(".trace");b(v,e,"funnelarea"),e.each(function(n){var t=n[0].trace,a=p.select(this);a.style({opacity:t.opacity}),a.selectAll("path.surface").each(function(r){p.select(this).call(m,r,t)})})}},{"../bar/uniform_text":664,"../pie/style_one":910,"@plotly/d3":58}],792:[function(y,$,ee){"use strict";var p=y("../scatter/attributes"),m=y("../../plots/attributes"),b=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,v=y("../../plots/template_attributes").hovertemplateAttrs,e=y("../../components/colorscale/attributes"),n=y("../../lib/extend").extendFlat;$.exports=n({z:{valType:"data_array",editType:"calc"},x:n({},p.x,{impliedEdits:{xtype:"array"}}),x0:n({},p.x0,{impliedEdits:{xtype:"scaled"}}),dx:n({},p.dx,{impliedEdits:{xtype:"scaled"}}),y:n({},p.y,{impliedEdits:{ytype:"array"}}),y0:n({},p.y0,{impliedEdits:{ytype:"scaled"}}),dy:n({},p.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:n({},p.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:n({},p.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:n({},p.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:n({},p.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:n({},p.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:n({},p.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:v(),showlegend:n({},m.showlegend,{dflt:!1})},{transforms:void 0},e("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":925}],793:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../lib"),b=y("../../plots/cartesian/axes"),v=y("../../plots/cartesian/align_period"),e=y("../histogram2d/calc"),n=y("../../components/colorscale/calc"),t=y("./convert_column_xyz"),a=y("./clean_2d_array"),r=y("./interp2d"),u=y("./find_empties"),s=y("./make_bound_array"),i=y("../../constants/numerical").BADNUM;function l(c){for(var f=[],g=c.length,h=0;h<g;h++){var o=c[h];o!==i&&f.push(o)}return f}$.exports=function(c,f){var g,h,o,x,d,w,_,T,k,L,M,O=b.getFromId(c,f.xaxis||"x"),P=b.getFromId(c,f.yaxis||"y"),S=p.traceIs(f,"contour"),E=p.traceIs(f,"histogram"),R=p.traceIs(f,"gl2d"),B=S?"best":f.zsmooth;if(O._minDtick=0,P._minDtick=0,E)x=(M=e(c,f)).orig_x,g=M.x,h=M.x0,o=M.dx,T=M.orig_y,d=M.y,w=M.y0,_=M.dy,k=M.z;else{var H=f.z;m.isArray1D(H)?(t(f,O,P,"x","y",["z"]),g=f._x,d=f._y,H=f._z):(x=f.x?O.makeCalcdata(f,"x"):[],T=f.y?P.makeCalcdata(f,"y"):[],g=v(f,O,"x",x).vals,d=v(f,P,"y",T).vals,f._x=g,f._y=d),h=f.x0,o=f.dx,w=f.y0,_=f.dy,k=a(H,f,O,P)}function V(K){B=f._input.zsmooth=f.zsmooth=!1,m.warn('cannot use zsmooth: "fast": '+K)}if((O.rangebreaks||P.rangebreaks)&&(k=function(K,re,ne){for(var se=[],oe=-1,pe=0;pe<ne.length;pe++)if(re[pe]!==i){se[++oe]=[];for(var ce=0;ce<ne[pe].length;ce++)K[ce]!==i&&se[oe].push(ne[pe][ce])}return se}(g,d,k),E||(g=l(g),d=l(d),f._x=g,f._y=d)),E||!S&&!f.connectgaps||(f._emptypoints=u(k),r(k,f._emptypoints)),"fast"===B)if("log"===O.type||"log"===P.type)V("log axis found");else if(!E){if(g.length){var Z=(g[g.length-1]-g[0])/(g.length-1),W=Math.abs(Z/100);for(L=0;L<g.length-1;L++)if(Math.abs(g[L+1]-g[L]-Z)>W){V("x scale is not linear");break}}if(d.length&&"fast"===B){var G=(d[d.length-1]-d[0])/(d.length-1),X=Math.abs(G/100);for(L=0;L<d.length-1;L++)if(Math.abs(d[L+1]-d[L]-G)>X){V("y scale is not linear");break}}}var te=m.maxRowLength(k),D="scaled"===f.xtype?"":g,N=s(f,D,h,o,te,O),U="scaled"===f.ytype?"":d,Q=s(f,U,w,_,k.length,P);R||(f._extremes[O._id]=b.findExtremes(O,N),f._extremes[P._id]=b.findExtremes(P,Q));var j={x:N,y:Q,z:k,text:f._text||f.text,hovertext:f._hovertext||f.hovertext};if(f.xperiodalignment&&x&&(j.orig_x=x),f.yperiodalignment&&T&&(j.orig_y=T),D&&D.length===N.length-1&&(j.xCenter=D),U&&U.length===Q.length-1&&(j.yCenter=U),E&&(j.xRanges=M.xRanges,j.yRanges=M.yRanges,j.pts=M.pts),S||n(c,f,{vals:k,cLetter:"z"}),S&&f.contours&&"heatmap"===f.contours.coloring){var J={type:"contour"===f.type?"heatmap":"histogram2d",xcalendar:f.xcalendar,ycalendar:f.ycalendar};j.xfill=s(J,D,h,o,te,O),j.yfill=s(J,U,w,_,k.length,P)}return[j]}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":825,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":802}],794:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib"),b=y("../../constants/numerical").BADNUM;$.exports=function(v,e,n,t){var a,r,u,s,i,l;function c(d){if(p(d))return+d}if(e&&e.transpose){for(a=0,i=0;i<v.length;i++)a=Math.max(a,v[i].length);if(0===a)return!1;u=function(d){return d.length},s=function(d,w,_){return(d[_]||[])[w]}}else a=v.length,u=function(d,w){return d[w].length},s=function(d,w,_){return(d[w]||[])[_]};function g(d){if(e&&"carpet"!==e.type&&"contourcarpet"!==e.type&&d&&"category"===d.type&&e["_"+d._id.charAt(0)].length){var w=d._id.charAt(0),_={},T=e["_"+w+"CategoryMap"]||e[w];for(i=0;i<T.length;i++)_[T[i]]=i;return function(k){var L=_[d._categories[k]];return L+1?L:b}}return m.identity}var h=g(n),o=g(t);t&&"category"===t.type&&(a=t._categories.length);var d,w,_,x=new Array(a);for(i=0;i<a;i++)for(r=n&&"category"===n.type?n._categories.length:u(v,i),x[i]=new Array(r),l=0;l<r;l++)x[i][l]=c((d=v,w=o(i),_=h(l),w===b||_===b?b:s(d,w,_)));return x}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(y,$,ee){"use strict";$.exports={min:"zmin",max:"zmax"}},{}],796:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../constants/numerical").BADNUM,b=y("../../plots/cartesian/align_period");$.exports=function(v,e,n,t,a,r){var u=v._length,s=e.makeCalcdata(v,t),i=n.makeCalcdata(v,a);s=b(v,e,t,s).vals,i=b(v,n,a,i).vals;var l,c,f,g,h=v.text,o=void 0!==h&&p.isArray1D(h),x=v.hovertext,d=void 0!==x&&p.isArray1D(x),w=p.distinctVals(s),_=w.vals,T=p.distinctVals(i),k=T.vals,L=[],M=k.length,O=_.length;for(l=0;l<r.length;l++)L[l]=p.init2dArray(M,O);o&&(f=p.init2dArray(M,O)),d&&(g=p.init2dArray(M,O));var P=p.init2dArray(M,O);for(l=0;l<u;l++)if(s[l]!==m&&i[l]!==m){var S=p.findBin(s[l]+w.minDiff/2,_),E=p.findBin(i[l]+T.minDiff/2,k);for(c=0;c<r.length;c++)L[c][E][S]=v[r[c]][l],P[E][S]=l;o&&(f[E][S]=h[l]),d&&(g[E][S]=x[l])}for(v["_"+t]=_,v["_"+a]=k,c=0;c<r.length;c++)v["_"+r[c]]=L[c];o&&(v._text=f),d&&(v._hovertext=g),e&&"category"===e.type&&(v["_"+t+"CategoryMap"]=_.map(function(B){return e._categories[B]})),n&&"category"===n.type&&(v["_"+a+"CategoryMap"]=k.map(function(B){return n._categories[B]})),v._after2before=P}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./xyz_defaults"),b=y("../scatter/period_defaults"),v=y("./style_defaults"),e=y("../../components/colorscale/defaults"),n=y("./attributes");$.exports=function(t,a,r,u){function s(i,l){return p.coerce(t,a,n,i,l)}m(t,a,s,u)?(b(t,a,u,s),s("xhoverformat"),s("yhoverformat"),s("text"),s("hovertext"),s("hovertemplate"),v(t,a,s,u),s("hoverongaps"),s("connectgaps",p.isArray1D(a.z)&&!1!==a.zsmooth),e(t,a,u,s,{prefix:"",cLetter:"z"})):a.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":945,"./attributes":792,"./style_defaults":805,"./xyz_defaults":806}],798:[function(y,$,ee){"use strict";var p=y("../../lib").maxRowLength;$.exports=function(m){var b,v,e,n,t,a,r,u,s=[],i={},l=[],c=m[0],f=[],g=[0,0,0],h=p(m);for(v=0;v<m.length;v++)for(b=f,f=c,c=m[v+1]||[],e=0;e<h;e++)void 0===f[e]&&((a=(void 0!==f[e-1]?1:0)+(void 0!==f[e+1]?1:0)+(void 0!==b[e]?1:0)+(void 0!==c[e]?1:0))?(0===v&&a++,0===e&&a++,v===m.length-1&&a++,e===f.length-1&&a++,a<4&&(i[[v,e]]=[v,e,a]),s.push([v,e,a])):l.push([v,e]));for(;l.length;){for(r={},u=!1,t=l.length-1;t>=0;t--)(a=((i[[(v=(n=l[t])[0])-1,e=n[1]]]||g)[2]+(i[[v+1,e]]||g)[2]+(i[[v,e-1]]||g)[2]+(i[[v,e+1]]||g)[2])/20)&&(r[n]=[v,e,a],l.splice(t,1),u=!0);if(!u)throw"findEmpties iterated with no new neighbors";for(n in r)i[n]=r[n],s.push(r[n])}return s.sort(function(o,x){return x[2]-o[2]})}},{"../../lib":503}],799:[function(y,$,ee){"use strict";var p=y("../../components/fx"),m=y("../../lib"),b=y("../../plots/cartesian/axes"),v=y("../../components/colorscale").extractOpts;$.exports=function(e,n,t,a,r){r||(r={});var u,s,i,l,c=r.isContour,f=e.cd[0],g=f.trace,h=e.xa,o=e.ya,x=f.x,d=f.y,w=f.z,_=f.xCenter,T=f.yCenter,k=f.zmask,L=g.zhoverformat,M=x,O=d;if(!1!==e.index){try{i=Math.round(e.index[1]),l=Math.round(e.index[0])}catch(D){return void m.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(i<0||i>=w[0].length||l<0||l>w.length)return}else{if(p.inbox(n-x[0],n-x[x.length-1],0)>0||p.inbox(t-d[0],t-d[d.length-1],0)>0)return;if(c){var P;for(M=[2*x[0]-x[1]],P=1;P<x.length;P++)M.push((x[P]+x[P-1])/2);for(M.push([2*x[x.length-1]-x[x.length-2]]),O=[2*d[0]-d[1]],P=1;P<d.length;P++)O.push((d[P]+d[P-1])/2);O.push([2*d[d.length-1]-d[d.length-2]])}i=Math.max(0,Math.min(M.length-2,m.findBin(n,M))),l=Math.max(0,Math.min(O.length-2,m.findBin(t,O)))}var S,E,R=h.c2p(x[i]),B=h.c2p(x[i+1]),H=o.c2p(d[l]),V=o.c2p(d[l+1]);c?(B=R,u=(S=f.orig_x||x)[i],V=H,s=(E=f.orig_y||d)[l]):(S=f.orig_x||_||x,E=f.orig_y||T||d,u=_?S[i]:(S[i]+S[i+1])/2,s=T?E[l]:(E[l]+E[l+1])/2,h&&"category"===h.type&&(u=x[i]),o&&"category"===o.type&&(s=d[l]),g.zsmooth&&(R=B=h.c2p(u),H=V=o.c2p(s)));var Z=w[l][i];if(k&&!k[l][i]&&(Z=void 0),void 0!==Z||g.hoverongaps){var W;Array.isArray(f.hovertext)&&Array.isArray(f.hovertext[l])?W=f.hovertext[l][i]:Array.isArray(f.text)&&Array.isArray(f.text[l])&&(W=f.text[l][i]);var G=v(g),te=b.tickText({type:"linear",range:[G.min,G.max],hoverformat:L,_separators:h._separators,_numFormat:h._numFormat},Z,"hover").text;return[m.extendFlat(e,{index:g._after2before?g._after2before[l][i]:[l,i],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:R,x1:B,y0:H,y1:V,xLabelVal:u,yLabelVal:s,zLabelVal:Z,zLabel:te,text:W})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),colorbar:y("./colorbar"),style:y("./style"),hoverPoints:y("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":803,"./style":804}],801:[function(y,$,ee){"use strict";var p=y("../../lib"),m=[[-1,0],[1,0],[0,-1],[0,1]];function b(e){return.5-.25*Math.min(1,.5*e)}function v(e,n,t){var a,r,u,s,i,l,c,f,g,h,o,x,d,w=0;for(s=0;s<n.length;s++){for(o=e[r=(a=n[s])[0]][u=a[1]],h=0,g=0,i=0;i<4;i++)(c=e[r+(l=m[i])[0]])&&void 0!==(f=c[u+l[1]])&&(0===h?x=d=f:(x=Math.min(x,f),d=Math.max(d,f)),g++,h+=f);if(0===g)throw"iterateInterp2d order is wrong: no defined neighbors";e[r][u]=h/g,void 0===o?g<4&&(w=1):(e[r][u]=(1+t)*e[r][u]-t*o,d>x&&(w=Math.max(w,Math.abs(e[r][u]-o)/(d-x))))}return w}$.exports=function(e,n){var t,a=1;for(v(e,n),t=0;t<n.length&&!(n[t][2]<4);t++);for(n=n.slice(t),t=0;t<100&&a>.01;t++)a=v(e,n,b(a));return a>.01&&p.log("interp2d didn't converge quickly",a),e}},{"../../lib":503}],802:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../lib").isArrayOrTypedArray;$.exports=function(b,v,e,n,t,a){var r,u,s,i=[],l=p.traceIs(b,"contour"),c=p.traceIs(b,"histogram"),f=p.traceIs(b,"gl2d");if(m(v)&&v.length>1&&!c&&"category"!==a.type){var g=v.length;if(!(g<=t))return v.slice(0,l?t:t+1);if(l||f)i=v.slice(0,t);else if(1===t)i=[v[0]-.5,v[0]+.5];else{for(i=[1.5*v[0]-.5*v[1]],s=1;s<g;s++)i.push(.5*(v[s-1]+v[s]));i.push(1.5*v[g-1]-.5*v[g-2])}if(g<t){var h=i[i.length-1],o=h-i[i.length-2];for(s=g;s<t;s++)i.push(h+=o)}}else{var x=b[a._id.charAt(0)+"calendar"];for(r=c?a.r2c(e,0,x):m(v)&&1===v.length?v[0]:void 0===e?0:("log"===a.type?a.d2c:a.r2c)(e,0,x),u=n||1,s=l||f?0:-.5;s<t;s++)i.push(r+u*s)}return i}},{"../../lib":503,"../../registry":638}],803:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("tinycolor2"),b=y("../../registry"),v=y("../../lib"),e=y("../../components/colorscale").makeColorScaleFuncFromTrace,n=y("../../constants/xmlns_namespaces");function t(u,s){var i=s.length-2,l=v.constrain(v.findBin(u,s),0,i),c=s[l],g=v.constrain(l+(u-c)/(s[l+1]-c)-.5,0,i),h=Math.round(g),o=Math.abs(g-h);return g&&g!==i&&o?{bin0:h,frac:o,bin1:Math.round(h+o/(g-h))}:{bin0:h,bin1:h,frac:0}}function a(u,s){var i=s.length-1,l=v.constrain(v.findBin(u,s),0,i),c=s[l],f=(u-c)/(s[l+1]-c)||0;return f<=0?{bin0:l,bin1:l,frac:0}:f<.5?{bin0:l,bin1:l+1,frac:f}:{bin0:l+1,bin1:l,frac:1-f}}function r(u,s,i){u[s]=i[0],u[s+1]=i[1],u[s+2]=i[2],u[s+3]=Math.round(255*i[3])}$.exports=function(u,s,i,l){var c=s.xaxis,f=s.yaxis;v.makeTraceGroups(l,i,"hm").each(function(g){var h,o,x,d,w,_,T=p.select(this),k=g[0],L=k.trace,M=k.z,O=k.x,P=k.y,S=k.xCenter,E=k.yCenter,R=b.traceIs(L,"contour"),B=R?"best":L.zsmooth,H=M.length,V=v.maxRowLength(M),Z=!1,W=!1;for(_=0;void 0===h&&_<O.length-1;)h=c.c2p(O[_]),_++;for(_=O.length-1;void 0===o&&_>0;)o=c.c2p(O[_]),_--;for(o<h&&(x=o,o=h,h=x,Z=!0),_=0;void 0===d&&_<P.length-1;)d=f.c2p(P[_]),_++;for(_=P.length-1;void 0===w&&_>0;)w=f.c2p(P[_]),_--;if(w<d&&(x=d,d=w,w=x,W=!0),R&&(S=O,E=P,O=k.xfill,P=k.yfill),"fast"!==B){var G="best"===B?0:.5;h=Math.max(-G*c._length,h),o=Math.min((1+G)*c._length,o),d=Math.max(-G*f._length,d),w=Math.min((1+G)*f._length,w)}var X=Math.round(o-h),te=Math.round(w-d);if(X<=0||te<=0)T.selectAll("image").data([]).exit().remove();else{var D,N;"fast"===B?(D=V,N=H):(D=X,N=te);var U=document.createElement("canvas");U.width=D,U.height=N;var Q,j,J=U.getContext("2d"),K=e(L,{noNumericCheck:!0,returnArray:!0});"fast"===B?(Q=Z?function(Oe){return V-1-Oe}:v.identity,j=W?function(Oe){return H-1-Oe}:v.identity):(Q=function(Oe){return v.constrain(Math.round(c.c2p(O[Oe])-h),0,X)},j=function(Oe){return v.constrain(Math.round(f.c2p(P[Oe])-d),0,te)});var re,ne,se,oe,pe,ce=j(0),ge=[ce,ce],xe=Z?0:1,we=W?0:1,be=0,Se=0,fe=0,me=0;if(B){var Te,_e=0;try{Te=new Uint8Array(X*te*4)}catch(Oe){Te=new Array(X*te*4)}if("best"===B){var Me,Ie,ze,Ve=S||O,Je=E||P,De=new Array(Ve.length),Be=new Array(Je.length),Ze=new Array(X),Ye=S?a:t,tt=E?a:t;for(_=0;_<Ve.length;_++)De[_]=Math.round(c.c2p(Ve[_])-h);for(_=0;_<Je.length;_++)Be[_]=Math.round(f.c2p(Je[_])-d);for(_=0;_<X;_++)Ze[_]=Ye(_,De);for(ne=0;ne<te;ne++)for(Ie=M[(Me=tt(ne,Be)).bin0],ze=M[Me.bin1],_=0;_<X;_++,_e+=4)r(Te,_e,pe=He(Ie,ze,Ze[_],Me))}else for(ne=0;ne<H;ne++)for(oe=M[ne],ge=j(ne),_=0;_<X;_++)pe=Fe(oe[_],1),r(Te,_e=4*(ge*X+Q(_)),pe);var st=J.createImageData(X,te);try{st.data.set(Te)}catch(Oe){var vt=st.data,Pt=vt.length;for(ne=0;ne<Pt;ne++)vt[ne]=Te[ne]}J.putImageData(st,0,0)}else{var Mt=L.xgap,rt=L.ygap,et=Math.floor(Mt/2),bt=Math.floor(rt/2);for(ne=0;ne<H;ne++)if(oe=M[ne],ge.reverse(),ge[we]=j(ne+1),ge[0]!==ge[1]&&void 0!==ge[0]&&void 0!==ge[1])for(re=[se=Q(0),se],_=0;_<V;_++)re.reverse(),re[xe]=Q(_+1),re[0]!==re[1]&&void 0!==re[0]&&void 0!==re[1]&&(pe=Fe(oe[_],(re[1]-re[0])*(ge[1]-ge[0])),J.fillStyle="rgba("+pe.join(",")+")",J.fillRect(re[0]+et,ge[0]+bt,re[1]-re[0]-Mt,ge[1]-ge[0]-rt))}Se=Math.round(Se/be),fe=Math.round(fe/be),me=Math.round(me/be);var Rt=m("rgb("+Se+","+fe+","+me+")");u._hmpixcount=(u._hmpixcount||0)+be,u._hmlumcount=(u._hmlumcount||0)+be*Rt.getLuminance();var Yt=T.selectAll("image").data(g);Yt.enter().append("svg:image").attr({xmlns:n.svg,preserveAspectRatio:"none"}),Yt.attr({height:te,width:X,x:h,y:d,"xlink:href":U.toDataURL("image/png")})}function Fe(Oe,$e){if(void 0!==Oe){var ke=K(Oe);return ke[0]=Math.round(ke[0]),ke[1]=Math.round(ke[1]),ke[2]=Math.round(ke[2]),be+=$e,Se+=ke[0]*$e,fe+=ke[1]*$e,me+=ke[2]*$e,ke}return[0,0,0,0]}function He(Oe,$e,ke,Le){var Pe=Oe[ke.bin0];if(void 0===Pe)return Fe(void 0,1);var Xe=Oe[ke.bin1],at=$e[ke.bin0],pt=$e[ke.bin1];return Fe(Pe+ke.frac*(Xe-Pe||0)+Le.frac*((at-Pe||0)+ke.frac*(void 0===Xe?void 0===pt?0:void 0===at?2*(pt-Pe):2*(2*pt-at-Pe)/3:void 0===pt?void 0===at?0:2*(2*Pe-Xe-at)/3:void 0===at?2*(2*pt-Xe-Pe)/3:pt+Pe-Xe-at)))}})}},{"../../components/colorscale":378,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"@plotly/d3":58,tinycolor2:312}],804:[function(y,$,ee){"use strict";var p=y("@plotly/d3");$.exports=function(m){p.select(m).selectAll(".hm image").style("opacity",function(b){return b.trace.opacity})}},{"@plotly/d3":58}],805:[function(y,$,ee){"use strict";$.exports=function(p,m,b){!1===b("zsmooth")&&(b("xgap"),b("ygap")),b("zhoverformat")}},{}],806:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib"),b=y("../../registry");function v(e,n){var t=n(e);return"scaled"===(t?n(e+"type","array"):"scaled")&&(n(e+"0"),n("d"+e)),t}$.exports=function(e,n,t,a,r,u){var s,i,l=t("z");if(r=r||"x",u=u||"y",void 0===l||!l.length)return 0;if(m.isArray1D(e.z)){s=t(r),i=t(u);var c=m.minRowLength(s),f=m.minRowLength(i);if(0===c||0===f)return 0;n._length=Math.min(c,f,l.length)}else{if(s=v(r,t),i=v(u,t),!function(g){for(var h,o=!0,x=!1,d=!1,w=0;w<g.length;w++){if(!m.isArrayOrTypedArray(h=g[w])){o=!1;break}h.length>0&&(x=!0);for(var _=0;_<h.length;_++)if(p(h[_])){d=!0;break}}return o&&x&&d}(l))return 0;t("transpose"),n._length=null}return"heatmapgl"===e.type||b.getComponentMethod("calendars","handleTraceDefaults")(e,n,[r,u],a),!0}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],807:[function(y,$,ee){"use strict";for(var p=y("../heatmap/attributes"),m=y("../../components/colorscale/attributes"),b=y("../../lib/extend").extendFlat,v=y("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],n={},t=0;t<e.length;t++){var a=e[t];n[a]=p[a]}n.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},b(n,m("",{cLetter:"z",autoColorDflt:!1})),$.exports=v(n,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],808:[function(y,$,ee){"use strict";var p=y("../../../stackgl_modules").gl_heatmap2d,m=y("../../plots/cartesian/axes"),b=y("../../lib/str2rgbarray");function v(n,t){this.scene=n,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=p(n.glplot,this.options),this.heatmap._trace=this}var e=v.prototype;e.handlePick=function(n){var t=this.options,a=t.shape,r=n.pointId,u=r%a[0],s=Math.floor(r/a[0]);return{trace:this,dataCoord:n.dataCoord,traceCoord:[t.x[u],t.y[s],t.z[r]],textLabel:this.textLabels[r],name:this.name,pointIndex:[s,u],hoverinfo:this.hoverinfo}},e.update=function(n,t){var a=t[0];this.index=n.index,this.name=n.name,this.hoverinfo=n.hoverinfo;var r=a.z;this.options.z=[].concat.apply([],r),this.options.shape=[r[0].length,r.length],this.options.x=a.x,this.options.y=a.y,this.options.zsmooth=n.zsmooth;var i=function(h){for(var o=h.colorscale,x=h.zmin,d=h.zmax,w=o.length,_=new Array(w),T=new Array(4*w),k=0;k<w;k++){var L=o[k],M=b(L[1]);_[k]=x+L[0]*(d-x);for(var O=0;O<4;O++)T[4*k+O]=M[O]}return{colorLevels:_,colorValues:T}}(n);this.options.colorLevels=i.colorLevels,this.options.colorValues=i.colorValues,this.textLabels=[].concat.apply([],n.text),this.heatmap.update(this.options);var l,c,f=this.scene.xaxis,g=this.scene.yaxis;!1===n.zsmooth&&(l={ppad:a.x[1]-a.x[0]},c={ppad:a.y[1]-a.y[0]}),n._extremes[f._id]=m.findExtremes(f,a.x,l),n._extremes[g._id]=m.findExtremes(g,a.y,c)},e.dispose=function(){this.heatmap.dispose()},$.exports=function(n,t,a){var r=new v(n,t.uid);return r.update(t,a),r}},{"../../../stackgl_modules":1119,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],809:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../heatmap/xyz_defaults"),b=y("../../components/colorscale/defaults"),v=y("./attributes");$.exports=function(e,n,t,a){function r(u,s){return p.coerce(e,n,v,u,s)}m(e,n,r,a)?(r("text"),r("zsmooth"),b(e,n,a,r,{prefix:"",cLetter:"z"})):n.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":806,"./attributes":807}],810:[function(y,$,ee){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../heatmap/colorbar"),calc:y("../heatmap/calc"),plot:y("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:y("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":807,"./convert":808,"./defaults":809}],811:[function(y,$,ee){"use strict";var p=y("../bar/attributes"),m=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../../plots/template_attributes").texttemplateAttrs,e=y("../../plots/font_attributes"),n=y("./bin_attributes"),t=y("./constants"),a=y("../../lib/extend").extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:m("x"),yhoverformat:m("y"),text:a({},p.text,{}),hovertext:a({},p.hovertext,{}),orientation:p.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:n("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:n("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:b({},{keys:t.eventDataKeys}),texttemplate:v({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:a({},p.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:p.insidetextanchor,textangle:p.textangle,cliponaxis:p.cliponaxis,constraintext:p.constraintext,marker:p.marker,offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup,selected:p.selected,unselected:p.unselected,_deprecated:{bardir:p._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":813,"./constants":817}],812:[function(y,$,ee){"use strict";$.exports=function(p,m){for(var b=p.length,v=0,e=0;e<b;e++)m[e]?(p[e]/=m[e],v+=p[e]):p[e]=null;return v}},{}],813:[function(y,$,ee){"use strict";$.exports=function(p,m){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],814:[function(y,$,ee){"use strict";var p=y("fast-isnumeric");$.exports={count:function(m,b,v){return v[m]++,1},sum:function(m,b,v,e){var n=e[b];return p(n)?(n=Number(n),v[m]+=n,n):0},avg:function(m,b,v,e,n){var t=e[b];return p(t)&&(t=Number(t),v[m]+=t,n[m]++),0},min:function(m,b,v,e){var n=e[b];if(p(n)){if(n=Number(n),!p(v[m]))return v[m]=n,n;if(v[m]>n){var t=n-v[m];return v[m]=n,t}}return 0},max:function(m,b,v,e){var n=e[b];if(p(n)){if(n=Number(n),!p(v[m]))return v[m]=n,n;if(v[m]<n){var t=n-v[m];return v[m]=n,t}}return 0}}},{"fast-isnumeric":190}],815:[function(y,$,ee){"use strict";var p=y("../../constants/numerical"),m=p.ONEAVGYEAR,b=p.ONEAVGMONTH,v=p.ONEDAY,e=p.ONEHOUR,n=p.ONEMIN,t=p.ONESEC,a=y("../../plots/cartesian/axes").tickIncrement;function r(l,c,f,g){if(l*c<=0)return 1/0;for(var h=Math.abs(c-l),o="date"===f.type,x=u(h,o),d=0;d<10;d++){var w=u(80*x,o);if(x===w||!s(w,l,c,o,f,g))break;x=w}return x}function u(l,c){return c&&l>t?l>v?l>1.1*m?m:l>1.1*b?b:v:l>e?e:l>n?n:t:Math.pow(10,Math.floor(Math.log(l)/Math.LN10))}function s(l,c,f,g,h,o){if(g&&l>v){var x=i(c,h,o),d=i(f,h,o),w=l===m?0:1;return x[w]!==d[w]}return Math.floor(f/l)-Math.floor(c/l)>.1}function i(l,c,f){var g=c.c2d(l,m,f).split("-");return""===g[0]&&(g.unshift(),g[0]="-"+g[0]),g}$.exports=function(l,c,f,g,h){var o,x,d=-1.1*c,w=-.1*c,_=l-w,T=f[0],k=f[1],L=Math.min(r(T+w,T+_,g,h),r(k+w,k+_,g,h)),M=Math.min(r(T+d,T+w,g,h),r(k+d,k+w,g,h));if(L>M&&M<Math.abs(k-T)/4e3?(o=L,x=!1):(o=Math.min(L,M),x=!0),"date"===g.type&&o>v){var O=o===m?1:6,P=o===m?"M12":"M1";return function(S,E){var R=g.c2d(S,m,h),B=R.indexOf("-",O);B>0&&(R=R.substr(0,B));var H=g.d2c(R,0,h);if(H<S){var V=a(H,P,!1,h);(H+V)/2<S+l&&(H=V)}return E&&x?a(H,P,!0,h):H}}return function(S,E){var R=o*Math.round(S/o);return R+o/10<S&&R+.9*o<S+l&&(R+=o),E&&x&&(R-=o),R}}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],816:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib"),b=y("../../registry"),v=y("../../plots/cartesian/axes"),e=y("../bar/arrays_to_calcdata"),n=y("./bin_functions"),t=y("./norm_functions"),a=y("./average"),r=y("./bin_label_vals");function u(s,i,l,c,f){var g,h,o,x,d,w,_,T=c+"bins",k=s._fullLayout,M=k._histogramBinOpts[i["_"+c+"bingroup"]],O="overlay"===k.barmode,P=function(ce){return l.r2c(ce,0,x)},S=function(ce){return l.c2r(ce,0,x)},E="date"===l.type?function(ce){return ce||0===ce?m.cleanDate(ce,null,x):null}:function(ce){return p(ce)?Number(ce):null};function R(ce,ge,xe){ge[ce+"Found"]?(ge[ce]=E(ge[ce]),null===ge[ce]&&(ge[ce]=xe[ce])):(w[ce]=ge[ce]=xe[ce],m.nestedProperty(h[0],T+"."+ce).set(xe[ce]))}if(i["_"+c+"autoBinFinished"])delete i["_"+c+"autoBinFinished"];else{h=M.traces;var B=[],H=!0,V=!1,Z=!1;for(g=0;g<h.length;g++)if((o=h[g]).visible){var W=M.dirs[g];d=o["_"+W+"pos0"]=l.makeCalcdata(o,W),B=m.concat(B,d),delete o["_"+c+"autoBinFinished"],!0===i.visible&&(H?H=!1:(delete o._autoBin,o["_"+c+"autoBinFinished"]=1),b.traceIs(o,"2dMap")&&(V=!0),"histogram2dcontour"===o.type&&(Z=!0))}var G=v.autoBin(B,l,M.nbins,V,x=h[0][c+"calendar"],M.sizeFound&&M.size),X=h[0]._autoBin={};if(w=X[M.dirs[0]]={},Z&&(M.size||(G.start=S(v.tickIncrement(P(G.start),G.size,!0,x))),void 0===M.end&&(G.end=S(v.tickIncrement(P(G.end),G.size,!1,x)))),O&&!b.traceIs(i,"2dMap")&&0===G._dataSpan&&"category"!==l.type&&"multicategory"!==l.type){if(f)return[G,d,!0];G=function(ce,ge,xe,we,be){var Se,fe,me,Te=ce._fullLayout,_e=function(vt,Pt){for(var Mt=Pt.xaxis,rt=Pt.yaxis,et=Pt.orientation,bt=[],Rt=vt._fullData,Yt=0;Yt<Rt.length;Yt++){var Fe=Rt[Yt];"histogram"===Fe.type&&!0===Fe.visible&&Fe.orientation===et&&Fe.xaxis===Mt&&Fe.yaxis===rt&&bt.push(Fe)}return bt}(ce,ge),Me=!1,Ie=1/0,ze=[ge];for(Se=0;Se<_e.length;Se++)if((fe=_e[Se])===ge)Me=!0;else if(Me){var Ve=u(ce,fe,xe,we,!0),Je=Ve[0],De=Ve[2];fe["_"+we+"autoBinFinished"]=1,fe["_"+we+"pos0"]=Ve[1],De?ze.push(fe):Ie=Math.min(Ie,Je.size)}else me=Te._histogramBinOpts[fe["_"+we+"bingroup"]],Ie=Math.min(Ie,me.size||fe[be].size);var Be=new Array(ze.length);for(Se=0;Se<ze.length;Se++)for(var Ze=ze[Se]["_"+we+"pos0"],Ye=0;Ye<Ze.length;Ye++)if(void 0!==Ze[Ye]){Be[Se]=Ze[Ye];break}for(isFinite(Ie)||(Ie=m.distinctVals(Be).minDiff),Se=0;Se<ze.length;Se++){var tt=(fe=ze[Se])[we+"calendar"],st={start:xe.c2r(Be[Se]-Ie/2,0,tt),end:xe.c2r(Be[Se]+Ie/2,0,tt),size:Ie};fe._input[be]=fe[be]=st,(me=Te._histogramBinOpts[fe["_"+we+"bingroup"]])&&m.extendFlat(me,st)}return ge[be]}(s,i,l,c,T)}(_=o.cumulative||{}).enabled&&"include"!==_.currentbin&&("decreasing"===_.direction?G.start=S(v.tickIncrement(P(G.start),G.size,!0,x)):G.end=S(v.tickIncrement(P(G.end),G.size,!1,x))),M.size=G.size,M.sizeFound||(w.size=G.size,m.nestedProperty(h[0],T+".size").set(G.size)),R("start",M,G),R("end",M,G)}d=i["_"+c+"pos0"],delete i["_"+c+"pos0"];var te=i._input[T]||{},D=m.extendFlat({},M),N=M.start,U=l.r2l(te.start),Q=void 0!==U;if((M.startFound||Q)&&U!==l.r2l(N)){var j=Q?U:m.aggNums(Math.min,null,d),J={type:"category"===l.type||"multicategory"===l.type?"linear":l.type,r2l:l.r2l,dtick:M.size,tick0:N,calendar:x,range:[j,v.tickIncrement(j,M.size,!1,x)].map(l.l2r)},K=v.tickFirst(J);K>l.r2l(j)&&(K=v.tickIncrement(K,M.size,!0,x)),D.start=l.l2r(K),Q||m.nestedProperty(i,T+".start").set(D.start)}var re=M.end,ne=l.r2l(te.end),se=void 0!==ne;if((M.endFound||se)&&ne!==l.r2l(re)){var oe=se?ne:m.aggNums(Math.max,null,d);D.end=l.l2r(oe),se||m.nestedProperty(i,T+".start").set(D.end)}var pe="autobin"+c;return!1===i._input[pe]&&(i._input[T]=m.extendFlat({},i[T]||{}),delete i._input[pe],delete i[pe]),[D,d]}$.exports={calc:function(s,i){var l,c,f,g,h=[],o=[],x=v.getFromId(s,"h"===i.orientation?i.yaxis:i.xaxis),d="h"===i.orientation?"y":"x",w={x:"y",y:"x"}[d],_=i[d+"calendar"],T=i.cumulative,k=u(s,i,x,d),L=k[0],M=k[1],O="string"==typeof L.size,P=[],S=O?P:L,E=[],R=[],B=[],H=0,V=i.histnorm,Z=i.histfunc,W=-1!==V.indexOf("density");T.enabled&&W&&(V=V.replace(/ ?density$/,""),W=!1);var G,X="max"===Z||"min"===Z?null:0,te=n.count,D=t[V],N=!1,U=function(Se){return x.r2c(Se,0,_)};for(m.isArrayOrTypedArray(i[w])&&"count"!==Z&&(G=i[w],N="avg"===Z,te=n[Z]),l=U(L.start),f=U(L.end)+(l-v.tickIncrement(l,L.size,!1,_))/1e6;l<f&&h.length<1e6&&(c=v.tickIncrement(l,L.size,!1,_),h.push((l+c)/2),o.push(X),B.push([]),P.push(l),W&&E.push(1/(c-l)),N&&R.push(0),!(c<=l));)l=c;P.push(l),O||"date"!==x.type||(S={start:U(S.start),end:U(S.end),size:S.size}),s._fullLayout._roundFnOpts||(s._fullLayout._roundFnOpts={});var Q=i["_"+d+"bingroup"],j={leftGap:1/0,rightGap:1/0};Q&&(s._fullLayout._roundFnOpts[Q]||(s._fullLayout._roundFnOpts[Q]=j),j=s._fullLayout._roundFnOpts[Q]);var J,K=o.length,re=!0,ne=j.leftGap,se=j.rightGap,oe={};for(l=0;l<M.length;l++){var pe=M[l];(g=m.findBin(pe,S))>=0&&g<K&&(H+=te(g,l,o,G,R),re&&B[g].length&&pe!==M[B[g][0]]&&(re=!1),B[g].push(l),oe[l]=g,ne=Math.min(ne,pe-P[g]),se=Math.min(se,P[g+1]-pe))}j.leftGap=ne,j.rightGap=se,re||(J=function(Se,fe){return function(){var me=s._fullLayout._roundFnOpts[Q];return r(me.leftGap,me.rightGap,P,x,_)(Se,fe)}}),N&&(H=a(o,R)),D&&D(o,H,E),T.enabled&&function(Se,fe,me){var Te,_e,Me;function Ie(Ve){Me=Se[Ve],Se[Ve]/=2}function ze(Ve){Se[Ve]=Me+(_e=Se[Ve])/2,Me+=_e}if("half"===me)if("increasing"===fe)for(Ie(0),Te=1;Te<Se.length;Te++)ze(Te);else for(Ie(Se.length-1),Te=Se.length-2;Te>=0;Te--)ze(Te);else if("increasing"===fe){for(Te=1;Te<Se.length;Te++)Se[Te]+=Se[Te-1];"exclude"===me&&(Se.unshift(0),Se.pop())}else{for(Te=Se.length-2;Te>=0;Te--)Se[Te]+=Se[Te+1];"exclude"===me&&(Se.push(0),Se.shift())}}(o,T.direction,T.currentbin);var ce=Math.min(h.length,o.length),ge=[],xe=0,we=ce-1;for(l=0;l<ce;l++)if(o[l]){xe=l;break}for(l=ce-1;l>=xe;l--)if(o[l]){we=l;break}for(l=xe;l<=we;l++)if(p(h[l])&&p(o[l])){var be={p:h[l],s:o[l],b:0};T.enabled||(be.pts=B[l],re?be.ph0=be.ph1=B[l].length?M[B[l][0]]:h[l]:(i._computePh=!0,be.ph0=J(P[l]),be.ph1=J(P[l+1],!0))),ge.push(be)}return 1===ge.length&&(ge[0].width1=v.tickIncrement(ge[0].p,L.size,!1,_)-ge[0].p),e(ge,i),m.isArrayOrTypedArray(i.selectedpoints)&&m.tagSelected(ge,i,oe),ge},calcAllAutoBins:u}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":812,"./bin_functions":814,"./bin_label_vals":815,"./norm_functions":823,"fast-isnumeric":190}],817:[function(y,$,ee){"use strict";$.exports={eventDataKeys:["binNumber"]}},{}],818:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/cartesian/axis_ids"),b=y("../../registry").traceIs,v=y("../bar/defaults").handleGroupingDefaults,e=p.nestedProperty,n=y("../../plots/cartesian/constraints").getAxisGroup,t=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],a=["x","y"];$.exports=function(r,u){var s,i,l,c,f,g,h,o=u._histogramBinOpts={},x=[],d={},w=[];function _(G,X){return p.coerce(s._input,s,s._module.attributes,G,X)}function T(G){return"v"===G.orientation?"x":"y"}function k(G,X,te){var D=G.uid+"__"+te;X||(X=D);var N=m.getFromTrace({_fullLayout:u},G,te).type,U=G[te+"calendar"]||"",Q=o[X],j=!0;Q&&(N===Q.axType&&U===Q.calendar?(j=!1,Q.traces.push(G),Q.dirs.push(te)):(X=D,N!==Q.axType&&p.warn(["Attempted to group the bins of trace",G.index,"set on a","type:"+N,"axis","with bins on","type:"+Q.axType,"axis."].join(" ")),U!==Q.calendar&&p.warn(["Attempted to group the bins of trace",G.index,"set with a",U,"calendar","with bins",Q.calendar?"on a "+Q.calendar+" calendar":"w/o a set calendar"].join(" ")))),j&&(o[X]={traces:[G],dirs:[te],axType:N,calendar:G[te+"calendar"]||""}),G["_"+te+"bingroup"]=X}for(f=0;f<r.length;f++)b(s=r[f],"histogram")&&(x.push(s),delete s._xautoBinFinished,delete s._yautoBinFinished,b(s,"2dMap")||v(s._input,s,u,_));var L=u._alignmentOpts||{};for(f=0;f<x.length;f++){if(l="",!b(s=x[f],"2dMap")){if(c=T(s),"group"===u.barmode&&s.alignmentgroup){var O=n(u,s[c+"axis"])+s.orientation;(L[O]||{})[s.alignmentgroup]&&(l=O)}l||"overlay"===u.barmode||(l=n(u,s.xaxis)+n(u,s.yaxis)+T(s))}l?(d[l]||(d[l]=[]),d[l].push(s)):w.push(s)}for(l in d)if(1!==(i=d[l]).length){var P=!1;for(i.length&&(s=i[0],P=_("bingroup")),l=P||l,f=0;f<i.length;f++){var S=(s=i[f])._input.bingroup;S&&S!==l&&p.warn(["Trace",s.index,"must match","within bingroup",l+".","Ignoring its bingroup:",S,"setting."].join(" ")),s.bingroup=l,k(s,l,T(s))}}else w.push(i[0]);for(f=0;f<w.length;f++){s=w[f];var E=_("bingroup");if(b(s,"2dMap"))for(h=0;h<2;h++){var R=_((c=a[h])+"bingroup",E?E+"__"+c:null);k(s,R,c)}else k(s,E,T(s))}for(l in o){var B=o[l];for(i=B.traces,g=0;g<t.length;g++){var H,V,Z=t[g],W=Z.name;if("nbins"!==W||!B.sizeFound){for(f=0;f<i.length;f++){if(void 0!==e((s=i[f])._input,H=Z.aStr[c=B.dirs[f]]).get()){B[W]=_(H),B[W+"Found"]=!0;break}(V=(s._autoBin||{})[c]||{})[W]&&e(s,H).set(V[W])}if("start"===W||"end"===W)for(;f<i.length;f++)(s=i[f])["_"+c+"bingroup"]&&_(H,(V=(s._autoBin||{})[c]||{})[W]);"nbins"!==W||B.sizeFound||B.nbinsFound||(s=i[0],B[W]=_(H))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],819:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../lib"),b=y("../../components/color"),v=y("../bar/defaults").handleText,e=y("../bar/style_defaults"),n=y("./attributes");$.exports=function(t,a,r,u){function s(w,_){return m.coerce(t,a,n,w,_)}var i=s("x"),l=s("y");s("cumulative.enabled")&&(s("cumulative.direction"),s("cumulative.currentbin")),s("text");var c=s("textposition");v(t,a,u,s,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat");var f=s("orientation",l&&!i?"h":"v"),g="v"===f?"x":"y",h="v"===f?"y":"x",o=i&&l?Math.min(m.minRowLength(i)&&m.minRowLength(l)):m.minRowLength(a[g]||[]);if(o){a._length=o,p.getComponentMethod("calendars","handleTraceDefaults")(t,a,["x","y"],u),a[h]&&s("histfunc"),s("histnorm"),s("autobin"+g),e(t,a,s,r,u),m.coerceSelectionMarkerOpacity(a,s);var x=(a.marker.line||{}).color,d=p.getComponentMethod("errorbars","supplyDefaults");d(t,a,x||b.defaultLine,{axis:"y"}),d(t,a,x||b.defaultLine,{axis:"x",inherit:"y"})}else a.visible=!1}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":811}],820:[function(y,$,ee){"use strict";$.exports=function(p,m,b,v,e){if(p.x="xVal"in m?m.xVal:m.x,p.y="yVal"in m?m.yVal:m.y,"zLabelVal"in m&&(p.z=m.zLabelVal),m.xa&&(p.xaxis=m.xa),m.ya&&(p.yaxis=m.ya),!(b.cumulative||{}).enabled){var n,t=Array.isArray(e)?v[0].pts[e[0]][e[1]]:v[e].pts;if(p.pointNumbers=t,p.binNumber=p.pointNumber,delete p.pointNumber,delete p.pointIndex,b._indexToPoints){n=[];for(var a=0;a<t.length;a++)n=n.concat(b._indexToPoints[t[a]])}else n=t;p.pointIndices=n}return p}},{}],821:[function(y,$,ee){"use strict";var p=y("../bar/hover").hoverPoints,m=y("../../plots/cartesian/axes").hoverLabelText;$.exports=function(b,v,e,n,t){var a=p(b,v,e,n,t);if(a){var r=(b=a[0]).cd[b.index],u=b.cd[0].trace;if(!u.cumulative.enabled){var s="h"===u.orientation?"y":"x";b[s+"Label"]=m(b[s+"a"],[r.ph0,r.ph1],u[s+"hoverformat"])}return a}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],822:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),layoutAttributes:y("../bar/layout_attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("./cross_trace_defaults"),supplyLayoutDefaults:y("../bar/layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("../bar/cross_trace_calc").crossTraceCalc,plot:y("../bar/plot").plot,layerName:"barlayer",style:y("../bar/style").style,styleOnSelect:y("../bar/style").styleOnSelect,colorbar:y("../scatter/marker_colorbar"),hoverPoints:y("./hover"),selectPoints:y("../bar/select"),eventData:y("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:y("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":943,"./attributes":811,"./calc":816,"./cross_trace_defaults":818,"./defaults":819,"./event_data":820,"./hover":821}],823:[function(y,$,ee){"use strict";$.exports={percent:function(p,m){for(var b=p.length,v=100/m,e=0;e<b;e++)p[e]*=v},probability:function(p,m){for(var b=p.length,v=0;v<b;v++)p[v]/=m},density:function(p,m,b,v){var e=p.length;v=v||1;for(var n=0;n<e;n++)p[n]*=b[n]*v},"probability density":function(p,m,b,v){var e=p.length;v&&(m/=v);for(var n=0;n<e;n++)p[n]*=b[n]/m}}},{}],824:[function(y,$,ee){"use strict";var p=y("../histogram/attributes"),m=y("../histogram/bin_attributes"),b=y("../heatmap/attributes"),v=y("../../plots/attributes"),e=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=y("../../plots/template_attributes").hovertemplateAttrs,t=y("../../components/colorscale/attributes"),a=y("../../lib/extend").extendFlat;$.exports=a({x:p.x,y:p.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:p.histnorm,histfunc:p.histfunc,nbinsx:p.nbinsx,xbins:m("x"),nbinsy:p.nbinsy,ybins:m("y"),autobinx:p.autobinx,autobiny:p.autobiny,bingroup:a({},p.bingroup,{}),xbingroup:a({},p.bingroup,{}),ybingroup:a({},p.bingroup,{}),xgap:b.xgap,ygap:b.ygap,zsmooth:b.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:n({},{keys:"z"}),showlegend:a({},v.showlegend,{dflt:!1})},t("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":811,"../histogram/bin_attributes":813}],825:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/cartesian/axes"),b=y("../histogram/bin_functions"),v=y("../histogram/norm_functions"),e=y("../histogram/average"),n=y("../histogram/bin_label_vals"),t=y("../histogram/calc").calcAllAutoBins;function a(s,i,l,c){var f,g=new Array(s);if(c)for(f=0;f<s;f++)g[f]=1/(i[f+1]-i[f]);else{var h=1/l;for(f=0;f<s;f++)g[f]=h}return g}function r(s,i){return{start:s(i.start),end:s(i.end),size:i.size}}function u(s,i,l,c,f,g){var h,o=s.length-1,x=new Array(o),d=n(l,c,s,f,g);for(h=0;h<o;h++){var w=(i||[])[h];x[h]=void 0===w?[d(s[h]),d(s[h+1],!0)]:[w,w]}return x}$.exports=function(s,i){var l,c,f,g,h=m.getFromId(s,i.xaxis),o=m.getFromId(s,i.yaxis),x=i.xcalendar,d=i.ycalendar,w=function(rt){return h.r2c(rt,0,x)},_=function(rt){return o.r2c(rt,0,d)},T=t(s,i,h,"x"),k=T[0],L=T[1],M=t(s,i,o,"y"),O=M[0],P=M[1],S=i._length;L.length>S&&L.splice(S,L.length-S),P.length>S&&P.splice(S,P.length-S);var E=[],R=[],B=[],H="string"==typeof k.size,V="string"==typeof O.size,Z=[],W=[],G=H?Z:k,X=V?W:O,te=0,D=[],N=[],U=i.histnorm,Q=i.histfunc,j=-1!==U.indexOf("density"),J="max"===Q||"min"===Q?null:0,K=b.count,re=v[U],ne=!1,se=[],oe=[],pe="z"in i?i.z:"marker"in i&&Array.isArray(i.marker.color)?i.marker.color:"";pe&&"count"!==Q&&(ne="avg"===Q,K=b[Q]);var ce=k.size,ge=w(k.start),xe=w(k.end)+(ge-m.tickIncrement(ge,ce,!1,x))/1e6;for(l=ge;l<xe;l=m.tickIncrement(l,ce,!1,x))R.push(J),Z.push(l),ne&&B.push(0);Z.push(l);var be=R.length,Se=(l-ge)/be,fe=h.c2r(ge+Se/2,0,x),me=O.size,Te=_(O.start),_e=_(O.end)+(Te-m.tickIncrement(Te,me,!1,d))/1e6;for(l=Te;l<_e;l=m.tickIncrement(l,me,!1,d)){E.push(R.slice()),W.push(l);var Me=new Array(be);for(c=0;c<be;c++)Me[c]=[];N.push(Me),ne&&D.push(B.slice())}W.push(l);var Ie=E.length,ze=(l-Te)/Ie,Ve=o.c2r(Te+ze/2,0,d);j&&(se=a(R.length,G,Se,H),oe=a(E.length,X,ze,V)),H||"date"!==h.type||(G=r(w,G)),V||"date"!==o.type||(X=r(_,X));var Je=!0,De=!0,Be=new Array(be),Ze=new Array(Ie),Ye=1/0,tt=1/0,st=1/0,vt=1/0;for(l=0;l<S;l++){var Pt=L[l],Mt=P[l];f=p.findBin(Pt,G),g=p.findBin(Mt,X),f>=0&&f<be&&g>=0&&g<Ie&&(te+=K(f,l,E[g],pe,D[g]),N[g][f].push(l),Je&&(void 0===Be[f]?Be[f]=Pt:Be[f]!==Pt&&(Je=!1)),De&&(void 0===Ze[g]?Ze[g]=Mt:Ze[g]!==Mt&&(De=!1)),Ye=Math.min(Ye,Pt-Z[f]),tt=Math.min(tt,Z[f+1]-Pt),st=Math.min(st,Mt-W[g]),vt=Math.min(vt,W[g+1]-Mt))}if(ne)for(g=0;g<Ie;g++)te+=e(E[g],D[g]);if(re)for(g=0;g<Ie;g++)re(E[g],te,se,oe[g]);return{x:L,xRanges:u(Z,Je&&Be,Ye,tt,h,x),x0:fe,dx:Se,y:P,yRanges:u(W,De&&Ze,st,vt,o,d),y0:Ve,dy:ze,z:E,pts:N}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":812,"../histogram/bin_functions":814,"../histogram/bin_label_vals":815,"../histogram/calc":816,"../histogram/norm_functions":823}],826:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./sample_defaults"),b=y("../heatmap/style_defaults"),v=y("../../components/colorscale/defaults"),e=y("./attributes");$.exports=function(n,t,a,r){function u(s,i){return p.coerce(n,t,e,s,i)}m(n,t,u,r),!1!==t.visible&&(b(n,t,u,r),v(n,t,r,u,{prefix:"",cLetter:"z"}),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/style_defaults":805,"./attributes":824,"./sample_defaults":829}],827:[function(y,$,ee){"use strict";var p=y("../heatmap/hover"),m=y("../../plots/cartesian/axes").hoverLabelText;$.exports=function(b,v,e,n,t){var a=p(b,v,e,n,t);if(a){var r=(b=a[0]).index,i=b.cd[0],l=i.trace,c=i.xRanges[r[1]],f=i.yRanges[r[0]];return b.xLabel=m(b.xa,[c[0],c[1]],l.xhoverformat),b.yLabel=m(b.ya,[f[0],f[1]],l.yhoverformat),a}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],828:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("../histogram/cross_trace_defaults"),calc:y("../heatmap/calc"),plot:y("../heatmap/plot"),layerName:"heatmaplayer",colorbar:y("../heatmap/colorbar"),style:y("../heatmap/style"),hoverPoints:y("./hover"),eventData:y("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":803,"../heatmap/style":804,"../histogram/cross_trace_defaults":818,"../histogram/event_data":820,"./attributes":824,"./defaults":826,"./hover":827}],829:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../lib");$.exports=function(b,v,e,n){var t=e("x"),a=e("y"),r=m.minRowLength(t),u=m.minRowLength(a);r&&u?(v._length=Math.min(r,u),p.getComponentMethod("calendars","handleTraceDefaults")(b,v,["x","y"],n),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):v.visible=!1}},{"../../lib":503,"../../registry":638}],830:[function(y,$,ee){"use strict";var p=y("../histogram2d/attributes"),m=y("../contour/attributes"),b=y("../../components/colorscale/attributes"),v=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=y("../../lib/extend").extendFlat;$.exports=e({x:p.x,y:p.y,z:p.z,marker:p.marker,histnorm:p.histnorm,histfunc:p.histfunc,nbinsx:p.nbinsx,xbins:p.xbins,nbinsy:p.nbinsy,ybins:p.ybins,autobinx:p.autobinx,autobiny:p.autobiny,bingroup:p.bingroup,xbingroup:p.xbingroup,ybingroup:p.ybingroup,autocontour:m.autocontour,ncontours:m.ncontours,contours:m.contours,line:{color:m.line.color,width:e({},m.line.width,{dflt:.5}),dash:m.line.dash,smoothing:m.line.smoothing,editType:"plot"},xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z",1),hovertemplate:p.hovertemplate},b("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":824}],831:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../histogram2d/sample_defaults"),b=y("../contour/contours_defaults"),v=y("../contour/style_defaults"),e=y("./attributes");$.exports=function(n,t,a,r){function u(s,i){return p.coerce(n,t,e,s,i)}m(n,t,u,r),!1!==t.visible&&(b(n,t,u,function(s){return p.coerce2(n,t,e,s)}),v(n,t,u,r),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../histogram2d/sample_defaults":829,"./attributes":830}],832:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("../histogram/cross_trace_defaults"),calc:y("../contour/calc"),plot:y("../contour/plot").plot,layerName:"contourlayer",style:y("../contour/style"),colorbar:y("../contour/colorbar"),hoverPoints:y("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":818,"./attributes":830,"./defaults":831}],833:[function(y,$,ee){"use strict";var p=y("../../plots/template_attributes").hovertemplateAttrs,m=y("../../plots/template_attributes").texttemplateAttrs,b=y("../../components/colorscale/attributes"),v=y("../../plots/domain").attributes,e=y("../pie/attributes"),n=y("../sunburst/attributes"),t=y("../treemap/attributes"),a=y("../treemap/constants"),r=y("../../lib/extend").extendFlat;$.exports={labels:n.labels,parents:n.parents,values:n.values,branchvalues:n.branchvalues,count:n.count,level:n.level,maxdepth:n.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:t.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:r({colors:n.marker.colors,line:n.marker.line,editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),leaf:n.leaf,pathbar:t.pathbar,text:e.text,textinfo:n.textinfo,texttemplate:m({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:n.hoverinfo,hovertemplate:p({},{keys:a.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:t.outsidetextfont,textposition:t.textposition,sort:e.sort,root:n.root,domain:v({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":899,"../sunburst/attributes":1044,"../treemap/attributes":1070,"../treemap/constants":1073}],834:[function(y,$,ee){"use strict";var p=y("../../plots/plots");ee.name="icicle",ee.plot=function(m,b,v,e){p.plotBasePlot(ee.name,m,b,v,e)},ee.clean=function(m,b,v,e){p.cleanBasePlot(ee.name,m,b,v,e)}},{"../../plots/plots":619}],835:[function(y,$,ee){"use strict";var p=y("../sunburst/calc");ee.calc=function(m,b){return p.calc(m,b)},ee.crossTraceCalc=function(m){return p._runCrossTraceCalc("icicle",m)}},{"../sunburst/calc":1046}],836:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./attributes"),b=y("../../components/color"),v=y("../../plots/domain").defaults,e=y("../bar/defaults").handleText,n=y("../bar/constants").TEXTPAD,t=y("../../components/colorscale"),a=t.hasColorscale,r=t.handleDefaults;$.exports=function(u,s,i,l){function c(w,_){return p.coerce(u,s,m,w,_)}var f=c("labels"),g=c("parents");if(f&&f.length&&g&&g.length){var h=c("values");c(h&&h.length?"branchvalues":"count"),c("level"),c("maxdepth"),c("tiling.orientation"),c("tiling.flip"),c("tiling.pad");var o=c("text");c("texttemplate"),s.texttemplate||c("textinfo",Array.isArray(o)?"text+label":"label"),c("hovertext"),c("hovertemplate");var x=c("pathbar.visible");e(u,s,l,c,"auto",{hasPathbar:x,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition"),c("marker.line.width")&&c("marker.line.color",l.paper_bgcolor),c("marker.colors");var d=s._hasColorscale=a(u,"marker","colors")||(u.marker||{}).coloraxis;d&&r(u,s,l,c,{prefix:"marker.",cLetter:"c"}),c("leaf.opacity",d?1:.7),s._hovered={marker:{line:{width:2,color:b.contrast(l.paper_bgcolor)}}},x&&(c("pathbar.thickness",s.pathbar.textfont.size+2*n),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),v(s,l,c),s._length=null}else s.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":833}],837:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=y("../../components/drawing"),v=y("../../lib/svg_text_utils"),e=y("./partition"),n=y("./style").styleOne,t=y("../treemap/constants"),a=y("../sunburst/helpers"),r=y("../sunburst/fx"),u=y("../sunburst/plot").formatSliceLabel;$.exports=function(s,i,l,c,f){var g=f.width,h=f.height,o=f.viewX,x=f.viewY,d=f.pathSlice,w=f.toMoveInsideSlice,_=f.strTransform,T=f.hasTransition,k=f.handleSlicesExit,L=f.makeUpdateSliceInterpolator,M=f.makeUpdateTextInterpolator,O=f.prevEntry,P=s._fullLayout,S=i[0].trace,E=-1!==S.textposition.indexOf("left"),R=-1!==S.textposition.indexOf("right"),B=-1!==S.textposition.indexOf("bottom"),H=e(l,[g,h],{flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1,orientation:S.tiling.orientation,pad:{inner:S.tiling.pad},maxDepth:S._maxDepth}).descendants(),V=1/0,Z=-1/0;H.forEach(function(D){var N=D.depth;N>=S._maxDepth?(D.x0=D.x1=(D.x0+D.x1)/2,D.y0=D.y1=(D.y0+D.y1)/2):(V=Math.min(V,N),Z=Math.max(Z,N))}),c=c.data(H,a.getPtId),S._maxVisibleLayers=isFinite(Z)?Z-V+1:0,c.enter().append("g").classed("slice",!0),k(c,!1,{},[g,h],d),c.order();var W=null;if(T&&O){var G=a.getPtId(O);c.each(function(D){null===W&&a.getPtId(D)===G&&(W={x0:D.x0,x1:D.x1,y0:D.y0,y1:D.y1})})}var X=function(){return W||{x0:0,x1:g,y0:0,y1:h}},te=c;return T&&(te=te.transition().each("end",function(){var D=p.select(this);a.setSliceCursor(D,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),te.each(function(D){D._x0=o(D.x0),D._x1=o(D.x1),D._y0=x(D.y0),D._y1=x(D.y1),D._hoverX=o(D.x1-S.tiling.pad),D._hoverY=x(B?D.y1-S.tiling.pad/2:D.y0+S.tiling.pad/2);var N=p.select(this),U=m.ensureSingle(N,"path","surface",function(K){K.style("pointer-events","all")});T?U.transition().attrTween("d",function(K){var re=L(K,!1,X(),[g,h],{orientation:S.tiling.orientation,flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1});return function(ne){return d(re(ne))}}):U.attr("d",d),N.call(r,l,s,i,{styleOne:n,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,s,{isTransitioning:s._transitioning}),U.call(n,D,S,{hovered:!1}),D._text=D.x0===D.x1||D.y0===D.y1?"":u(D,l,S,i,P)||"";var Q=m.ensureSingle(N,"g","slicetext"),j=m.ensureSingle(Q,"text","",function(K){K.attr("data-notex",1)}),J=m.ensureUniformFontSize(s,a.determineTextFont(S,D,P.font));j.text(D._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":E?"start":"middle").call(b.font,J).call(v.convertToTspans,s),D.textBB=b.bBox(j.node()),D.transform=w(D,{fontSize:J.size}),D.transform.fontSize=J.size,T?j.transition().attrTween("transform",function(K){var re=M(K,!1,X(),[g,h]);return function(ne){return _(re(ne))}}):j.attr("transform",_(D))}),W}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1049,"../sunburst/helpers":1050,"../sunburst/plot":1054,"../treemap/constants":1073,"./partition":841,"./style":843,"@plotly/d3":58}],838:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"icicle",basePlotModule:y("./base_plot"),categories:[],animatable:!0,attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot"),style:y("./style").style,colorbar:y("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":943,"./attributes":833,"./base_plot":834,"./calc":835,"./defaults":836,"./layout_attributes":839,"./layout_defaults":840,"./plot":842,"./style":843}],839:[function(y,$,ee){"use strict";$.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],840:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./layout_attributes");$.exports=function(b,v){function e(n,t){return p.coerce(b,v,m,n,t)}e("iciclecolorway",v.colorway),e("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":839}],841:[function(y,$,ee){"use strict";var p=y("d3-hierarchy"),m=y("../treemap/flip_tree");$.exports=function(b,v,e){var n=e.flipX,t=e.flipY,a="h"===e.orientation,r=e.maxDepth,u=v[0],s=v[1];r&&(u=(b.height+1)*v[0]/Math.min(b.height+1,r),s=(b.height+1)*v[1]/Math.min(b.height+1,r));var i=p.partition().padding(e.pad.inner).size(a?[v[1],u]:[v[0],s])(b);return(a||n||t)&&m(i,v,{swapXY:a,flipX:n,flipY:t}),i}},{"../treemap/flip_tree":1078,"d3-hierarchy":115}],842:[function(y,$,ee){"use strict";var p=y("../treemap/draw"),m=y("./draw_descendants");$.exports=function(b,v,e,n){return p(b,v,e,n,{type:"icicle",drawDescendants:m})}},{"../treemap/draw":1075,"./draw_descendants":837}],843:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/color"),b=y("../../lib"),v=y("../bar/uniform_text").resizeText;function e(n,t,a){var r=t.data.data,u=!t.children,s=r.i,i=b.castOption(a,s,"marker.line.color")||m.defaultLine,l=b.castOption(a,s,"marker.line.width")||0;n.style("stroke-width",l).call(m.fill,r.color).call(m.stroke,i).style("opacity",u?a.leaf.opacity:null)}$.exports={style:function(n){var t=n._fullLayout._iciclelayer.selectAll(".trace");v(n,t,"icicle"),t.each(function(a){var r=p.select(this),u=a[0].trace;r.style("opacity",u.opacity),r.selectAll("path.surface").each(function(s){p.select(this).call(e,s,u)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],844:[function(y,$,ee){"use strict";for(var p=y("../../plots/attributes"),m=y("../../plots/template_attributes").hovertemplateAttrs,b=y("../../lib/extend").extendFlat,v=y("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],n=[],t=[],a=0;a<e.length;a++){var r=v[e[a]];n.push("For the `"+e[a]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),t.push("For the `"+e[a]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}$.exports=b({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:b({},p.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:m({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":846}],845:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./constants"),b=y("fast-isnumeric"),v=y("../../plots/cartesian/axes"),e=y("../../lib").maxRowLength,n=y("./helpers").getImageSize;function t(r,u,s,i){return function(l){return p.constrain((l-r)*u,s,i)}}function a(r,u){return function(s){return p.constrain(s,r,u)}}$.exports=function(r,u){var s,i;if(u._hasZ)s=u.z.length,i=e(u.z);else if(u._hasSource){var l=n(u.source);s=l.height,i=l.width}var c,f=v.getFromId(r,u.xaxis||"x"),g=v.getFromId(r,u.yaxis||"y"),h=f.d2c(u.x0)-u.dx/2,o=g.d2c(u.y0)-u.dy/2,x=[h,h+i*u.dx],d=[o,o+s*u.dy];if(f&&"log"===f.type)for(c=0;c<i;c++)x.push(h+c*u.dx);if(g&&"log"===g.type)for(c=0;c<s;c++)d.push(o+c*u.dy);return u._extremes[f._id]=v.findExtremes(f,x),u._extremes[g._id]=v.findExtremes(g,d),u._scaler=function(w){var _=m.colormodel[w.colormodel],T=(_.colormodel||w.colormodel).length;w._sArray=[];for(var k=0;k<T;k++)w._sArray.push(_.min[k]!==w.zmin[k]||_.max[k]!==w.zmax[k]?t(w.zmin[k],(_.max[k]-_.min[k])/(w.zmax[k]-w.zmin[k]),_.min[k],_.max[k]):a(_.min[k],_.max[k]));return function(L){for(var M=L.slice(0,T),O=0;O<T;O++){var P=M[O];if(!b(P))return!1;M[O]=w._sArray[O](P)}return M}}(u),[{x0:h,y0:o,z:u.z,w:i,h:s}]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":846,"./helpers":849,"fast-isnumeric":190}],846:[function(y,$,ee){"use strict";$.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(p){return p.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(p){return p.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(p){return p.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(p){var m=p.slice(0,3);return m[1]=m[1]+"%",m[2]=m[2]+"%",m},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(p){var m=p.slice(0,4);return m[1]=m[1]+"%",m[2]=m[2]+"%",m},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],847:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./attributes"),b=y("./constants"),v=y("../../snapshot/helpers").IMAGE_URL_PREFIX;$.exports=function(e,n){function t(u,s){return p.coerce(e,n,m,u,s)}t("source"),n.source&&!n.source.match(v)&&delete n.source,n._hasSource=!!n.source;var a,r=t("z");n._hasZ=!(void 0===r||!r.length||!r[0]||!r[0].length),n._hasZ||n._hasSource?(t("x0"),t("y0"),t("dx"),t("dy"),n._hasZ?(t("colormodel","rgb"),t("zmin",(a=b.colormodel[n.colormodel]).zminDflt||a.min),t("zmax",a.zmaxDflt||a.max)):n._hasSource&&(n.colormodel="rgba256",n.zmin=(a=b.colormodel[n.colormodel]).zminDflt,n.zmax=a.zmaxDflt),t("zsmooth"),t("text"),t("hovertext"),t("hovertemplate"),n._length=null):n.visible=!1}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":844,"./constants":846}],848:[function(y,$,ee){"use strict";$.exports=function(p,m){return"xVal"in m&&(p.x=m.xVal),"yVal"in m&&(p.y=m.yVal),m.xa&&(p.xaxis=m.xa),m.ya&&(p.yaxis=m.ya),p.color=m.color,p.colormodel=m.trace.colormodel,p.z||(p.z=m.color),p}},{}],849:[function(y,$,ee){"use strict";var p=y("probe-image-size/sync"),m=y("../../snapshot/helpers").IMAGE_URL_PREFIX,b=y("buffer/").Buffer;ee.getImageSize=function(v){var e=v.replace(m,""),n=new b(e,"base64");return p(n)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],850:[function(y,$,ee){"use strict";var p=y("../../components/fx"),m=y("../../lib"),b=y("./constants");$.exports=function(v,e,n){var t=v.cd[0],a=t.trace,r=v.xa,u=v.ya;if(!(p.inbox(e-t.x0,e-(t.x0+t.w*a.dx),0)>0||p.inbox(n-t.y0,n-(t.y0+t.h*a.dy),0)>0)){var s,i=Math.floor((e-t.x0)/a.dx),l=Math.floor(Math.abs(n-t.y0)/a.dy);if(a._hasZ?s=t.z[l][i]:a._hasSource&&(s=a._canvas.el.getContext("2d").getImageData(i,l,1,1).data),s){var c,f=t.hi||a.hoverinfo;if(f){var g=f.split("+");-1!==g.indexOf("all")&&(g=["color"]),-1!==g.indexOf("color")&&(c=!0)}var h,o=b.colormodel[a.colormodel],x=o.colormodel||a.colormodel,d=x.length,w=a._scaler(s),_=o.suffix,T=[];(a.hovertemplate||c)&&(T.push("["+[w[0]+_[0],w[1]+_[1],w[2]+_[2]].join(", ")),4===d&&T.push(", "+w[3]+_[3]),T.push("]"),T=T.join(""),v.extraText=x.toUpperCase()+": "+T),Array.isArray(a.hovertext)&&Array.isArray(a.hovertext[l])?h=a.hovertext[l][i]:Array.isArray(a.text)&&Array.isArray(a.text[l])&&(h=a.text[l][i]);var k=u.c2p(t.y0+(l+.5)*a.dy),L=t.x0+(i+.5)*a.dx,M=t.y0+(l+.5)*a.dy,O="["+s.slice(0,a.colormodel.length).join(", ")+"]";return[m.extendFlat(v,{index:[l,i],x0:r.c2p(t.x0+i*a.dx),x1:r.c2p(t.x0+(i+1)*a.dx),y0:k,y1:k,color:w,xVal:L,xLabelVal:L,yVal:M,yLabelVal:M,zLabelVal:O,text:h,hovertemplateLabels:{zLabel:O,colorLabel:T,"color[0]Label":w[0]+_[0],"color[1]Label":w[1]+_[1],"color[2]Label":w[2]+_[2],"color[3]Label":w[3]+_[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":846}],851:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),style:y("./style"),hoverPoints:y("./hover"),eventData:y("./event_data"),moduleType:"trace",name:"image",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":844,"./calc":845,"./defaults":847,"./event_data":848,"./hover":850,"./plot":852,"./style":853}],852:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=m.strTranslate,v=y("../../constants/xmlns_namespaces"),e=y("./constants"),n=m.isIOS()||m.isSafari()||m.isIE();$.exports=function(t,a,r,u){var s=a.xaxis,i=a.yaxis,l=!(n||t._context._exportedPlot);m.makeTraceGroups(u,r,"im").each(function(c){var f=p.select(this),g=c[0],h=g.trace,o=("fast"===h.zsmooth||!1===h.zsmooth&&l)&&!h._hasZ&&h._hasSource&&"linear"===s.type&&"linear"===i.type;h._realImage=o;var x,d,w,_,T,k,L=g.z,M=g.x0,O=g.y0,P=g.w,S=g.h,E=h.dx,R=h.dy;for(k=0;void 0===x&&k<P;)x=s.c2p(M+k*E),k++;for(k=P;void 0===d&&k>0;)d=s.c2p(M+k*E),k--;for(k=0;void 0===_&&k<S;)_=i.c2p(O+k*R),k++;for(k=S;void 0===T&&k>0;)T=i.c2p(O+k*R),k--;d<x&&(w=d,d=x,x=w),T<_&&(w=_,_=T,T=w),!o&&(x=Math.max(-.5*s._length,x),d=Math.min(1.5*s._length,d),_=Math.max(-.5*i._length,_),T=Math.min(1.5*i._length,T));var B=Math.round(d-x),H=Math.round(T-_);if(B<=0||H<=0)f.selectAll("image").data([]).exit().remove();else{var V=f.selectAll("image").data([c]);V.enter().append("svg:image").attr({xmlns:v.svg,preserveAspectRatio:"none"}),V.exit().remove();var Z=!1===h.zsmooth?e.pixelatedStyle:"";if(o){var W=m.simpleMap(s.range,s.r2l),G=m.simpleMap(i.range,i.r2l),X=W[1]<W[0],te=G[1]>G[0];if(X||te){var D=x+B/2,N=_+H/2;Z+="transform:"+b(D+"px",N+"px")+"scale("+(X?-1:1)+","+(te?-1:1)+")"+b(-D+"px",-N+"px")+";"}}V.attr("style",Z);var U=new Promise(function(j){if(h._hasZ)j();else if(h._hasSource)if(h._canvas&&h._canvas.el.width===P&&h._canvas.el.height===S&&h._canvas.source===h.source)j();else{var J=document.createElement("canvas");J.width=P,J.height=S;var K=J.getContext("2d");h._image=h._image||new Image;var re=h._image;re.onload=function(){K.drawImage(re,0,0),h._canvas={el:J,source:h.source},j()},re.setAttribute("src",h.source)}}).then(function(){var j;if(h._hasZ)j=Q(function(K,re){return L[re][K]}).toDataURL("image/png");else if(h._hasSource)if(o)j=h.source;else{var J=h._canvas.el.getContext("2d").getImageData(0,0,P,S).data;j=Q(function(K,re){var ne=4*(re*P+K);return[J[ne],J[ne+1],J[ne+2],J[ne+3]]}).toDataURL("image/png")}V.attr({"xlink:href":j,height:H,width:B,x,y:_})});t._promises.push(U)}function Q(j){var J=document.createElement("canvas");J.width=B,J.height=H;var K,re=J.getContext("2d"),ne=function(fe){return m.constrain(Math.round(s.c2p(M+fe*E)-x),0,B)},se=function(fe){return m.constrain(Math.round(i.c2p(O+fe*R)-_),0,H)},oe=e.colormodel[h.colormodel],pe=oe.colormodel||h.colormodel,ce=oe.fmt;for(k=0;k<g.w;k++){var ge=ne(k),xe=ne(k+1);if(xe!==ge&&!isNaN(xe)&&!isNaN(ge))for(var we=0;we<g.h;we++){var be=se(we),Se=se(we+1);Se===be||isNaN(Se)||isNaN(be)||!j(k,we)||(K=h._scaler(j(k,we)),re.fillStyle=K?pe+"("+ce(K).join(",")+")":"rgba(0,0,0,0)",re.fillRect(ge,be,xe-ge,Se-be))}}return J}})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":846,"@plotly/d3":58}],853:[function(y,$,ee){"use strict";var p=y("@plotly/d3");$.exports=function(m){p.select(m).selectAll(".im image").style("opacity",function(b){return b[0].trace.opacity})}},{"@plotly/d3":58}],854:[function(y,$,ee){"use strict";var p=y("../../lib/extend").extendFlat,m=y("../../lib/extend").extendDeep,b=y("../../plot_api/edit_types").overrideAll,v=y("../../plots/font_attributes"),e=y("../../components/color/attributes"),n=y("../../plots/domain").attributes,t=y("../../plots/cartesian/layout_attributes"),a=y("../../plot_api/plot_template").templatedArray,r=y("../../constants/delta.js"),u=y("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=v({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},l={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},c=a("step",m({},i,{range:l}));$.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:n({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:p({},s,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:u("value")},font:p({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:u("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:p({},s,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:m({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:b({range:l,visible:p({},t.visible,{dflt:!0}),tickmode:t.tickmode,nticks:t.nticks,tick0:t.tick0,dtick:t.dtick,tickvals:t.tickvals,ticktext:t.ticktext,ticks:p({},t.ticks,{dflt:"outside"}),ticklen:t.ticklen,tickwidth:t.tickwidth,tickcolor:t.tickcolor,showticklabels:t.showticklabels,tickfont:v({}),tickangle:t.tickangle,tickformat:t.tickformat,tickformatstops:t.tickformatstops,tickprefix:t.tickprefix,showtickprefix:t.showtickprefix,ticksuffix:t.ticksuffix,showticksuffix:t.showticksuffix,separatethousands:t.separatethousands,exponentformat:t.exponentformat,minexponent:t.minexponent,showexponent:t.showexponent,editType:"plot"},"plot"),steps:c,threshold:{line:{color:p({},i.line.color,{}),width:p({},i.line.width,{dflt:1}),editType:"plot"},thickness:p({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],855:[function(y,$,ee){"use strict";var p=y("../../plots/plots");ee.name="indicator",ee.plot=function(m,b,v,e){p.plotBasePlot(ee.name,m,b,v,e)},ee.clean=function(m,b,v,e){p.cleanBasePlot(ee.name,m,b,v,e)}},{"../../plots/plots":619}],856:[function(y,$,ee){"use strict";$.exports={calc:function(p,m){var b=[],v=m.value;"number"!=typeof m._lastValue&&(m._lastValue=m.value);var e=m._lastValue,n=e;return m._hasDelta&&"number"==typeof m.delta.reference&&(n=m.delta.reference),b[0]={y:v,lastY:e,delta:v-n,relativeDelta:(v-n)/n},b}}},{}],857:[function(y,$,ee){"use strict";$.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],858:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./attributes"),b=y("../../plots/domain").defaults,v=y("../../plot_api/plot_template"),e=y("../../plots/array_container_defaults"),n=y("./constants.js"),t=y("../../plots/cartesian/tick_value_defaults"),a=y("../../plots/cartesian/tick_mark_defaults"),r=y("../../plots/cartesian/tick_label_defaults"),u=y("../../plots/cartesian/prefix_suffix_defaults");function s(i,l){function c(f,g){return p.coerce(i,l,m.gauge.steps,f,g)}c("color"),c("line.color"),c("line.width"),c("range"),c("thickness")}$.exports={supplyDefaults:function(i,l,c,f){function g(P,S){return p.coerce(i,l,m,P,S)}b(l,f,g),g("mode"),l._hasNumber=-1!==l.mode.indexOf("number"),l._hasDelta=-1!==l.mode.indexOf("delta"),l._hasGauge=-1!==l.mode.indexOf("gauge");var h=g("value");l._range=[0,"number"==typeof h?1.5*h:1];var o,x,d,w,_,T,k=new Array(2);function L(P,S){return p.coerce(d,w,m.gauge,P,S)}function M(P,S){return p.coerce(_,T,m.gauge.axis,P,S)}if(l._hasNumber&&(g("number.valueformat"),g("number.font.color",f.font.color),g("number.font.family",f.font.family),g("number.font.size"),void 0===l.number.font.size&&(l.number.font.size=n.defaultNumberFontSize,k[0]=!0),g("number.prefix"),g("number.suffix"),o=l.number.font.size),l._hasDelta&&(g("delta.font.color",f.font.color),g("delta.font.family",f.font.family),g("delta.font.size"),void 0===l.delta.font.size&&(l.delta.font.size=(l._hasNumber?.5:1)*(o||n.defaultNumberFontSize),k[1]=!0),g("delta.reference",l.value),g("delta.relative"),g("delta.valueformat",l.delta.relative?"2%":""),g("delta.increasing.symbol"),g("delta.increasing.color"),g("delta.decreasing.symbol"),g("delta.decreasing.color"),g("delta.position"),x=l.delta.font.size),l._scaleNumbers=(!l._hasNumber||k[0])&&(!l._hasDelta||k[1])||!1,g("title.font.color",f.font.color),g("title.font.family",f.font.family),g("title.font.size",.25*(o||x||n.defaultNumberFontSize)),g("title.text"),l._hasGauge){(d=i.gauge)||(d={}),w=v.newContainer(l,"gauge"),L("shape"),(l._isBullet="bullet"===l.gauge.shape)||g("title.align","center"),(l._isAngular="angular"===l.gauge.shape)||g("align","center"),L("bgcolor",f.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width"),L("bar.thickness",n.valueThickness*("bullet"===l.gauge.shape?.5:1)),e(d,w,{name:"steps",handleItemDefaults:s}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),_={},d&&(_=d.axis||{}),T=v.newContainer(w,"axis"),M("visible"),l._range=M("range",l._range);var O={outerTicks:!0};t(_,T,M,"linear"),u(_,T,M,"linear",O),r(_,T,M,"linear",O),a(_,T,M,O)}else g("title.align","center"),g("align","center"),l._isAngular=l._isBullet=!1;l._length=null}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":854,"./constants.js":857}],859:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"indicator",basePlotModule:y("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,calc:y("./calc").calc,plot:y("./plot"),meta:{}}},{"./attributes":854,"./base_plot":855,"./calc":856,"./defaults":858,"./plot":860}],860:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("d3-interpolate").interpolate,b=y("d3-interpolate").interpolateNumber,v=y("../../lib"),e=v.strScale,n=v.strTranslate,t=v.rad2deg,a=y("../../constants/alignment").MID_SHIFT,r=y("../../components/drawing"),u=y("./constants"),s=y("../../lib/svg_text_utils"),i=y("../../plots/cartesian/axes"),l=y("../../plots/cartesian/axis_defaults"),c=y("../../plots/cartesian/position_defaults"),f=y("../../plots/cartesian/layout_attributes"),g=y("../../components/color"),h={left:"start",center:"middle",right:"end"},o={left:0,center:.5,right:1},x=/[yzafpn\xb5mkMGTPEZY]/;function d(M){return M&&M.duration>0}function w(M){M.each(function(O){g.stroke(p.select(this),O.line.color)}).each(function(O){g.fill(p.select(this),O.color)}).style("stroke-width",function(O){return O.line.width})}function _(M,O,P){var S=M._fullLayout,E=v.extendFlat({type:"linear",ticks:"outside",range:P,showline:!0},O),R={type:"linear",_id:"x"+O._id},B={letter:"x",font:S.font,noHover:!0,noTickson:!0};function H(V,Z){return v.coerce(E,R,f,V,Z)}return l(E,R,H,B,S),c(E,R,H,B),R}function T(M,O,P){return[Math.min(O/M.width,P/M.height),M,O+"x"+P]}function k(M,O,P,S){var E=document.createElementNS("http://www.w3.org/2000/svg","text"),R=p.select(E);return R.text(M).attr("x",0).attr("y",0).attr("text-anchor",P).attr("data-unformatted",M).call(s.convertToTspans,S).call(r.font,O),r.bBox(R.node())}function L(M,O,P,S,E,R){var B="_cache"+O;M[B]&&M[B].key===E||(M[B]={key:E,value:P});var H=v.aggNums(R,null,[M[B].value,S],2);return M[B].value=H,H}$.exports=function(M,O,P,S){var E,R=M._fullLayout;d(P)&&S&&(E=S()),v.makeTraceGroups(R._indicatorlayer,O,"trace").each(function(B){var H,V,Z,W,G,X=B[0].trace,te=p.select(this),D=X._hasGauge,N=X._isAngular,U=X._isBullet,Q=X.domain,j={w:R._size.w*(Q.x[1]-Q.x[0]),h:R._size.h*(Q.y[1]-Q.y[0]),l:R._size.l+R._size.w*Q.x[0],r:R._size.r+R._size.w*(1-Q.x[1]),t:R._size.t+R._size.h*(1-Q.y[1]),b:R._size.b+R._size.h*Q.y[0]},J=j.l+j.w/2,K=j.t+j.h/2,re=Math.min(j.w/2,j.h),ne=u.innerRadius*re,se=X.align||"center";if(V=K,D){if(N&&(H=J,V=K+re/2,Z=function(Se){return fe=Se,[(me=.9*ne)/Math.sqrt(fe.width/2*(fe.width/2)+fe.height*fe.height),fe,me];var fe,me}),U){var oe=u.bulletPadding,pe=1-u.bulletNumberDomainSize+oe;H=j.l+(pe+(1-pe)*o[se])*j.w,Z=function(Se){return T(Se,(u.bulletNumberDomainSize-oe)*j.w,j.h)}}}else H=j.l+o[se]*j.w,Z=function(Se){return T(Se,j.w,j.h)};(function(Se,fe,me,Te){var _e,Me,Ie,ze=me[0].trace,Ve=Te.numbersX,Je=Te.numbersY,De=ze.align||"center",Be=h[De],Ze=Te.transitionOpts,Ye=Te.onComplete,tt=v.ensureSingle(fe,"g","numbers"),st=[];ze._hasNumber&&st.push("number"),ze._hasDelta&&(st.push("delta"),"left"===ze.delta.position&&st.reverse());var vt=tt.selectAll("text").data(st);function Pt(He,Oe,$e,ke){if(!He.match("s")||$e>=0==ke>=0||Oe($e).slice(-1).match(x)||Oe(ke).slice(-1).match(x))return Oe;var Le=He.slice().replace("s","f").replace(/\d+/,function(Ce){return parseInt(Ce)-1}),Pe=_(Se,{tickformat:Le});return function(Ce){return Math.abs(Ce)<1?i.tickText(Pe,Ce).text:Oe(Ce)}}vt.enter().append("text"),vt.attr("text-anchor",function(){return Be}).attr("class",function(He){return He}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),vt.exit().remove();var Mt,rt=ze.mode+ze.align;if(ze._hasDelta&&(Mt=function(){var He=_(Se,{tickformat:ze.delta.valueformat},ze._range);He.setScale(),i.prepTicks(He);var Oe=function(Xe){return i.tickText(He,Xe).text},$e=function(Xe){return ze.delta.relative?Xe.relativeDelta:Xe.delta},ke=function(Xe,at){return 0===Xe||"number"!=typeof Xe||isNaN(Xe)?"-":(Xe>0?ze.delta.increasing.symbol:ze.delta.decreasing.symbol)+at(Xe)},Le=function(Xe){return Xe.delta>=0?ze.delta.increasing.color:ze.delta.decreasing.color};void 0===ze._deltaLastValue&&(ze._deltaLastValue=$e(me[0]));var Pe=tt.select("text.delta");function Ce(){Pe.text(ke($e(me[0]),Oe)).call(g.fill,Le(me[0])).call(s.convertToTspans,Se)}return Pe.call(r.font,ze.delta.font).call(g.fill,Le({delta:ze._deltaLastValue})),d(Ze)?Pe.transition().duration(Ze.duration).ease(Ze.easing).tween("text",function(){var Xe=p.select(this),at=$e(me[0]),pt=ze._deltaLastValue,ut=Pt(ze.delta.valueformat,Oe,pt,at),St=b(pt,at);return ze._deltaLastValue=at,function(ot){Xe.text(ke(St(ot),ut)),Xe.call(g.fill,Le({delta:St(ot)}))}}).each("end",function(){Ce(),Ye&&Ye()}).each("interrupt",function(){Ce(),Ye&&Ye()}):Ce(),Me=k(ke($e(me[0]),Oe),ze.delta.font,Be,Se),Pe}(),rt+=ze.delta.position+ze.delta.font.size+ze.delta.font.family+ze.delta.valueformat,rt+=ze.delta.increasing.symbol+ze.delta.decreasing.symbol,Ie=Me),ze._hasNumber&&(function(){var He=_(Se,{tickformat:ze.number.valueformat},ze._range);He.setScale(),i.prepTicks(He);var Oe=function(Ce){return i.tickText(He,Ce).text},$e=ze.number.suffix,ke=ze.number.prefix,Le=tt.select("text.number");function Pe(){var Ce="number"==typeof me[0].y?ke+Oe(me[0].y)+$e:"-";Le.text(Ce).call(r.font,ze.number.font).call(s.convertToTspans,Se)}d(Ze)?Le.transition().duration(Ze.duration).ease(Ze.easing).each("end",function(){Pe(),Ye&&Ye()}).each("interrupt",function(){Pe(),Ye&&Ye()}).attrTween("text",function(){var Ce=p.select(this),Xe=b(me[0].lastY,me[0].y);ze._lastValue=me[0].y;var at=Pt(ze.number.valueformat,Oe,me[0].lastY,me[0].y);return function(pt){Ce.text(ke+at(Xe(pt))+$e)}}):Pe(),_e=k(ke+Oe(me[0].y)+$e,ze.number.font,Be,Se)}(),rt+=ze.number.font.size+ze.number.font.family+ze.number.valueformat+ze.number.suffix+ze.number.prefix,Ie=_e),ze._hasDelta&&ze._hasNumber){var et,bt,Rt=[(_e.left+_e.right)/2,(_e.top+_e.bottom)/2],Yt=[(Me.left+Me.right)/2,(Me.top+Me.bottom)/2],Fe=.75*ze.delta.font.size;"left"===ze.delta.position&&(et=L(ze,"deltaPos",0,-1*(_e.width*o[ze.align]+Me.width*(1-o[ze.align])+Fe),rt,Math.min),bt=Rt[1]-Yt[1],Ie={width:_e.width+Me.width+Fe,height:Math.max(_e.height,Me.height),left:Me.left+et,right:_e.right,top:Math.min(_e.top,Me.top+bt),bottom:Math.max(_e.bottom,Me.bottom+bt)}),"right"===ze.delta.position&&(et=L(ze,"deltaPos",0,_e.width*(1-o[ze.align])+Me.width*o[ze.align]+Fe,rt,Math.max),bt=Rt[1]-Yt[1],Ie={width:_e.width+Me.width+Fe,height:Math.max(_e.height,Me.height),left:_e.left,right:Me.right+et,top:Math.min(_e.top,Me.top+bt),bottom:Math.max(_e.bottom,Me.bottom+bt)}),"bottom"===ze.delta.position&&(et=null,bt=Me.height,Ie={width:Math.max(_e.width,Me.width),height:_e.height+Me.height,left:Math.min(_e.left,Me.left),right:Math.max(_e.right,Me.right),top:_e.bottom-_e.height,bottom:_e.bottom+Me.height}),"top"===ze.delta.position&&(et=null,bt=_e.top,Ie={width:Math.max(_e.width,Me.width),height:_e.height+Me.height,left:Math.min(_e.left,Me.left),right:Math.max(_e.right,Me.right),top:_e.bottom-_e.height-Me.height,bottom:_e.bottom}),Mt.attr({dx:et,dy:bt})}(ze._hasNumber||ze._hasDelta)&&tt.attr("transform",function(){var Oe,He=Te.numbersScaler(Ie),$e=L(ze,"numbersScale",1,He[0],rt+=He[2],Math.min);ze._scaleNumbers||($e=1),ze._numbersTop=$e*Ie.top+(Oe=ze._isAngular?Je-$e*Ie.bottom:Je-$e*(Ie.top+Ie.bottom)/2);var ke=Ie[De];"center"===De&&(ke=(Ie.left+Ie.right)/2);var Le=Ve-$e*ke;return Le=L(ze,"numbersTranslate",0,Le,rt,Math.max),n(Le,Oe)+e($e)})})(M,te,B,{numbersX:H,numbersY:V,numbersScaler:Z,transitionOpts:P,onComplete:E}),D&&(W={range:X.gauge.axis.range,color:X.gauge.bgcolor,line:{color:X.gauge.bordercolor,width:0},thickness:1},G={range:X.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:X.gauge.bordercolor,width:X.gauge.borderwidth},thickness:1});var ce=te.selectAll("g.angular").data(N?B:[]);ce.exit().remove();var ge=te.selectAll("g.angularaxis").data(N?B:[]);ge.exit().remove(),N&&function(Se,fe,me,Te){var _e,Me,Ie,ze,Ve=me[0].trace,Je=Te.size,De=Te.radius,Be=Te.innerRadius,Ze=Te.gaugeBg,Ye=Te.gaugeOutline,tt=[Je.l+Je.w/2,Je.t+Je.h/2+De/2],st=Te.gauge,vt=Te.layer,Pt=Te.transitionOpts,Mt=Te.onComplete,rt=Math.PI/2;function et(Lt){var Qe=Ve.gauge.axis.range[0],mt=(Lt-Qe)/(Ve.gauge.axis.range[1]-Qe)*Math.PI-rt;return mt<-rt?-rt:mt>rt?rt:mt}function bt(Lt){return p.svg.arc().innerRadius((Be+De)/2-Lt/2*(De-Be)).outerRadius((Be+De)/2+Lt/2*(De-Be)).startAngle(-rt)}function Rt(Lt){Lt.attr("d",function(Qe){return bt(Qe.thickness).startAngle(et(Qe.range[0])).endAngle(et(Qe.range[1]))()})}st.enter().append("g").classed("angular",!0),st.attr("transform",n(tt[0],tt[1])),vt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),vt.selectAll("g.xangularaxistick,path,text").remove(),(_e=_(Se,Ve.gauge.axis)).type="linear",_e.range=Ve.gauge.axis.range,_e._id="xangularaxis",_e.ticklabeloverflow="allow",_e.setScale();var Yt=function(Lt){return(_e.range[0]-Lt.x)/(_e.range[1]-_e.range[0])*Math.PI+Math.PI},Fe={},He=i.makeLabelFns(_e,0).labelStandoff;Fe.xFn=function(Lt){var Qe=Yt(Lt);return Math.cos(Qe)*He},Fe.yFn=function(Lt){var Qe=Yt(Lt),mt=Math.sin(Qe)>0?.2:1;return-Math.sin(Qe)*(He+Lt.fontSize*mt)+Math.abs(Math.cos(Qe))*(Lt.fontSize*a)},Fe.anchorFn=function(Lt){var Qe=Yt(Lt),mt=Math.cos(Qe);return Math.abs(mt)<.1?"middle":mt>0?"start":"end"},Fe.heightFn=function(Lt,Qe,mt){var It=Yt(Lt);return-.5*(1+Math.sin(It))*mt};var Oe=function(Lt){return n(tt[0]+De*Math.cos(Lt),tt[1]-De*Math.sin(Lt))};Ie=function(Lt){return Oe(Yt(Lt))},Me=i.calcTicks(_e),ze=i.getTickSigns(_e)[2],_e.visible&&(i.drawTicks(Se,_e,{vals:Me,layer:vt,path:"M"+(ze="inside"===_e.ticks?-1:1)*((_e.linewidth||1)/2)+",0h"+ze*_e.ticklen,transFn:function(Lt){var Qe=Yt(Lt);return Oe(Qe)+"rotate("+-t(Qe)+")"}}),i.drawLabels(Se,_e,{vals:Me,layer:vt,transFn:Ie,labelFns:Fe}));var ke=[Ze].concat(Ve.gauge.steps),Le=st.selectAll("g.bg-arc").data(ke);Le.enter().append("g").classed("bg-arc",!0).append("path"),Le.select("path").call(Rt).call(w),Le.exit().remove();var Pe=bt(Ve.gauge.bar.thickness),Ce=st.selectAll("g.value-arc").data([Ve.gauge.bar]);Ce.enter().append("g").classed("value-arc",!0).append("path");var at,pt,ut,Xe=Ce.select("path");d(Pt)?(Xe.transition().duration(Pt.duration).ease(Pt.easing).each("end",function(){Mt&&Mt()}).each("interrupt",function(){Mt&&Mt()}).attrTween("d",(at=Pe,pt=et(me[0].lastY),ut=et(me[0].y),function(){var Lt=m(pt,ut);return function(Qe){return at.endAngle(Lt(Qe))()}})),Ve._lastValue=me[0].y):Xe.attr("d","number"==typeof me[0].y?Pe.endAngle(et(me[0].y)):"M0,0Z"),Xe.call(w),Ce.exit().remove(),ke=[];var St=Ve.gauge.threshold.value;(St||0===St)&&ke.push({range:[St,St],color:Ve.gauge.threshold.color,line:{color:Ve.gauge.threshold.line.color,width:Ve.gauge.threshold.line.width},thickness:Ve.gauge.threshold.thickness});var ot=st.selectAll("g.threshold-arc").data(ke);ot.enter().append("g").classed("threshold-arc",!0).append("path"),ot.select("path").call(Rt).call(w),ot.exit().remove();var Et=st.selectAll("g.gauge-outline").data([Ye]);Et.enter().append("g").classed("gauge-outline",!0).append("path"),Et.select("path").call(Rt).call(w),Et.exit().remove()}(M,0,B,{radius:re,innerRadius:ne,gauge:ce,layer:ge,size:j,gaugeBg:W,gaugeOutline:G,transitionOpts:P,onComplete:E});var xe=te.selectAll("g.bullet").data(U?B:[]);xe.exit().remove();var we=te.selectAll("g.bulletaxis").data(U?B:[]);we.exit().remove(),U&&function(Se,fe,me,Te){var _e,Me,Ie,ze,Ve,Je=me[0].trace,De=Te.gauge,Be=Te.layer,Ze=Te.gaugeBg,Ye=Te.gaugeOutline,tt=Te.size,st=Je.domain,vt=Te.transitionOpts,Pt=Te.onComplete;De.enter().append("g").classed("bullet",!0),De.attr("transform",n(tt.l,tt.t)),Be.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Be.selectAll("g.xbulletaxistick,path,text").remove();var Mt=tt.h,rt=Je.gauge.bar.thickness*Mt,et=st.x[0],bt=st.x[0]+(st.x[1]-st.x[0])*(Je._hasNumber||Je._hasDelta?1-u.bulletNumberDomainSize:1);function Rt(Le){Le.attr("width",function(Pe){return Math.max(0,_e.c2p(Pe.range[1])-_e.c2p(Pe.range[0]))}).attr("x",function(Pe){return _e.c2p(Pe.range[0])}).attr("y",function(Pe){return.5*(1-Pe.thickness)*Mt}).attr("height",function(Pe){return Pe.thickness*Mt})}(_e=_(Se,Je.gauge.axis))._id="xbulletaxis",_e.domain=[et,bt],_e.setScale(),Me=i.calcTicks(_e),Ie=i.makeTransTickFn(_e),ze=i.getTickSigns(_e)[2],Ve=tt.t+tt.h,_e.visible&&(i.drawTicks(Se,_e,{vals:"inside"===_e.ticks?i.clipEnds(_e,Me):Me,layer:Be,path:i.makeTickPath(_e,Ve,ze),transFn:Ie}),i.drawLabels(Se,_e,{vals:Me,layer:Be,transFn:Ie,labelFns:i.makeLabelFns(_e,Ve)}));var Yt=[Ze].concat(Je.gauge.steps),Fe=De.selectAll("g.bg-bullet").data(Yt);Fe.enter().append("g").classed("bg-bullet",!0).append("rect"),Fe.select("rect").call(Rt).call(w),Fe.exit().remove();var He=De.selectAll("g.value-bullet").data([Je.gauge.bar]);He.enter().append("g").classed("value-bullet",!0).append("rect"),He.select("rect").attr("height",rt).attr("y",(Mt-rt)/2).call(w),d(vt)?He.select("rect").transition().duration(vt.duration).ease(vt.easing).each("end",function(){Pt&&Pt()}).each("interrupt",function(){Pt&&Pt()}).attr("width",Math.max(0,_e.c2p(Math.min(Je.gauge.axis.range[1],me[0].y)))):He.select("rect").attr("width","number"==typeof me[0].y?Math.max(0,_e.c2p(Math.min(Je.gauge.axis.range[1],me[0].y))):0),He.exit().remove();var Oe=me.filter(function(){return Je.gauge.threshold.value||0===Je.gauge.threshold.value}),$e=De.selectAll("g.threshold-bullet").data(Oe);$e.enter().append("g").classed("threshold-bullet",!0).append("line"),$e.select("line").attr("x1",_e.c2p(Je.gauge.threshold.value)).attr("x2",_e.c2p(Je.gauge.threshold.value)).attr("y1",(1-Je.gauge.threshold.thickness)/2*Mt).attr("y2",(1-(1-Je.gauge.threshold.thickness)/2)*Mt).call(g.stroke,Je.gauge.threshold.line.color).style("stroke-width",Je.gauge.threshold.line.width),$e.exit().remove();var ke=De.selectAll("g.gauge-outline").data([Ye]);ke.enter().append("g").classed("gauge-outline",!0).append("rect"),ke.select("rect").call(Rt).call(w),ke.exit().remove()}(M,0,B,{gauge:xe,layer:we,size:j,gaugeBg:W,gaugeOutline:G,transitionOpts:P,onComplete:E});var be=te.selectAll("text.title").data(B);be.exit().remove(),be.enter().append("text").classed("title",!0),be.attr("text-anchor",function(){return U?h.right:h[X.title.align]}).text(X.title.text).call(r.font,X.title.font).call(s.convertToTspans,M),be.attr("transform",function(){var Se,fe=j.l+j.w*o[X.title.align],me=u.titlePadding,Te=r.bBox(be.node());return D?(N&&(Se=X.gauge.axis.visible?r.bBox(ge.node()).top-me-Te.bottom:j.t+j.h/2-re/2-Te.bottom-me),U&&(Se=V-(Te.top+Te.bottom)/2,fe=j.l-u.bulletPadding*j.w)):Se=X._numbersTop-me-Te.bottom,n(fe,Se)})})}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":857,"@plotly/d3":58,"d3-interpolate":116}],861:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/attributes"),m=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../mesh3d/attributes"),e=y("../../plots/attributes"),n=y("../../lib/extend").extendFlat,t=y("../../plot_api/edit_types").overrideAll,a=$.exports=t(n({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:b(),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),valuehoverformat:m("value",1),showlegend:n({},e.showlegend,{dflt:!1})},p("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:v.opacity,lightposition:v.lightposition,lighting:v.lighting,flatshading:v.flatshading,contour:v.contour,hoverinfo:n({},e.hoverinfo)}),"calc","nested");a.flatshading.dflt=!0,a.lighting.facenormalsepsilon.dflt=0,a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":866}],862:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/calc"),m=y("../streamtube/calc").processGrid,b=y("../streamtube/calc").filter;$.exports=function(v,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=b(e.x,e._len),e._y=b(e.y,e._len),e._z=b(e.z,e._len),e._value=b(e.value,e._len);var n=m(e);e._gridFill=n.fill,e._Xs=n.Xs,e._Ys=n.Ys,e._Zs=n.Zs,e._len=n.len;for(var t=1/0,a=-1/0,r=0;r<e._len;r++){var u=e._value[r];t=Math.min(t,u),a=Math.max(a,u)}e._minValues=t,e._maxValues=a,e._vMin=null==e.isomin?t:e.isomin,e._vMax=void 0===e.isomax||null===e.isomin?a:e.isomax,p(v,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1040}],863:[function(y,$,ee){"use strict";var p=y("../../../stackgl_modules").gl_mesh3d,m=y("../../lib/gl_format_color").parseColorScale,b=y("../../lib/str2rgbarray"),v=y("../../components/colorscale").extractOpts,e=y("../../plots/gl3d/zip3"),n=function(s,i){for(var l=i.length-1;l>0;l--){var c=Math.min(i[l],i[l-1]),f=Math.max(i[l],i[l-1]);if(f>c&&c<s&&s<=f)return{id:l,distRatio:(f-s)/(f-c)}}return{id:0,distRatio:0}};function t(s,i,l){this.scene=s,this.uid=l,this.mesh=i,this.name="",this.data=null,this.showContour=!1}var a=t.prototype;a.handlePick=function(s){if(s.object===this.mesh){var i=s.data.index,c=this.data._meshY[i],f=this.data._meshZ[i],g=this.data._Ys.length,h=this.data._Zs.length,o=n(this.data._meshX[i],this.data._Xs).id,x=n(c,this.data._Ys).id,d=n(f,this.data._Zs).id,w=s.index=d+h*x+h*g*o;s.traceCoordinate=[this.data._meshX[w],this.data._meshY[w],this.data._meshZ[w],this.data._value[w]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&void 0!==_[w]?s.textLabel=_[w]:_&&(s.textLabel=_),!0}},a.update=function(s){var i=this.scene,l=i.fullSceneLayout;function c(h,o,x,d){return o.map(function(w){return h.d2l(w,0,d)*x})}this.data=u(s);var f={positions:e(c(l.xaxis,s._meshX,i.dataScale[0],s.xcalendar),c(l.yaxis,s._meshY,i.dataScale[1],s.ycalendar),c(l.zaxis,s._meshZ,i.dataScale[2],s.zcalendar)),cells:e(s._meshI,s._meshJ,s._meshK),lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,contourEnable:s.contour.show,contourColor:b(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},g=v(s);f.vertexIntensity=s._meshIntensity,f.vertexIntensityBounds=[g.min,g.max],f.colormap=m(s),this.mesh.update(f)},a.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function u(s){s._meshI=[],s._meshJ=[],s._meshK=[];var i,l,c,f,g,h,o,x=s.surface.show,d=s.spaceframe.show,w=s.surface.fill,_=s.spaceframe.fill,T=!1,k=!1,L=0,M=s._Xs,O=s._Ys,P=s._Zs,S=M.length,E=O.length,R=P.length,B=r.indexOf(s._gridFill.replace(/-/g,"").replace(/\+/g,"")),H=function(De,Be,Ze){switch(B){case 5:return Ze+R*Be+R*E*De;case 4:return Ze+R*De+R*S*Be;case 3:return Be+E*Ze+E*R*De;case 2:return Be+E*De+E*S*Ze;case 1:return De+S*Ze+S*R*Be;default:return De+S*Be+S*E*Ze}},V=s._minValues,Z=s._maxValues,W=s._vMin,G=s._vMax;function X(De,Be,Ze){for(var Ye=h.length,tt=l;tt<Ye;tt++)if(De===c[tt]&&Be===f[tt]&&Ze===g[tt])return tt;return-1}function te(){l=i}function D(){c=[],f=[],g=[],h=[],i=0,te()}function N(De,Be,Ze,Ye){return c.push(De),f.push(Be),g.push(Ze),h.push(Ye),++i-1}function U(De,Be,Ze){for(var Ye=[],tt=0;tt<De.length;tt++)Ye[tt]=De[tt]*(1-Ze)+Ze*Be[tt];return Ye}function Q(De){o=De}function j(De,Be){return"all"===De||null===De||De.indexOf(Be)>-1}function J(De,Be){return null===De?Be:De}function K(De,Be,Ze){te();var tt,st,$e,ke,Le,Pe,Ce,Xe,at,pt,ut,St,ot,Et,Lt,vt=[Be],Pt=[Ze];if(o>=1)vt=[Be],Pt=[Ze];else if(o>0){var Mt=(ke=Ze,pt=U(Xe=function(Qe,mt,It){for(var jt=[],Zt=0;Zt<Qe.length;Zt++)jt[Zt]=(Qe[Zt]+mt[Zt]+It[Zt])/3;return jt}(Le=($e=Be)[0],Pe=$e[1],Ce=$e[2]),Le,at=Math.sqrt(1-o)),{xyzv:[[Le,Pe,ut=U(Xe,Pe,at)],[ut,pt,Le],[Pe,Ce,St=U(Xe,Ce,at)],[St,ut,Pe],[Ce,Le,pt],[pt,St,Ce]],abc:[[ot=ke[0],Et=ke[1],-1],[-1,-1,ot],[Et,Lt=ke[2],-1],[-1,-1,Et],[Lt,ot,-1],[-1,-1,Lt]]});vt=Mt.xyzv,Pt=Mt.abc}for(var rt=0;rt<vt.length;rt++){Be=vt[rt],Ze=Pt[rt];for(var et=[],bt=0;bt<3;bt++){var Rt=Be[bt][0],Yt=Be[bt][1],Fe=Be[bt][2],He=Be[bt][3],Oe=Ze[bt]>-1?Ze[bt]:X(Rt,Yt,Fe);et[bt]=Oe>-1?Oe:N(Rt,Yt,Fe,J(De,He))}tt=et[1],st=et[2],s._meshI.push(et[0]),s._meshJ.push(tt),s._meshK.push(st),++L}}function re(De,Be,Ze,Ye){var tt=De[3];tt<Ze&&(tt=Ze),tt>Ye&&(tt=Ye);for(var st=(De[3]-tt)/(De[3]-Be[3]+1e-9),vt=[],Pt=0;Pt<4;Pt++)vt[Pt]=(1-st)*De[Pt]+st*Be[Pt];return vt}function ne(De,Be,Ze){return De>=Be&&De<=Ze}function se(De){var Be=.001*(G-W);return De>=W-Be&&De<=G+Be}function oe(De){for(var Be=[],Ze=0;Ze<4;Ze++){var Ye=De[Ze];Be.push([s._x[Ye],s._y[Ye],s._z[Ye],s._value[Ye]])}return Be}function pe(De,Be,Ze,Ye,tt,st){st||(st=1),Ze=[-1,-1,-1];var vt=!1,Pt=[ne(Be[0][3],Ye,tt),ne(Be[1][3],Ye,tt),ne(Be[2][3],Ye,tt)];if(!Pt[0]&&!Pt[1]&&!Pt[2])return!1;var Mt=function(et,bt,Rt){return se(bt[0][3])&&se(bt[1][3])&&se(bt[2][3])?(K(et,bt,Rt),!0):st<3&&pe(et,bt,Rt,W,G,++st)};if(Pt[0]&&Pt[1]&&Pt[2])return Mt(De,Be,Ze)||vt;var rt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(et){if(Pt[et[0]]&&Pt[et[1]]&&!Pt[et[2]]){var bt=Be[et[0]],Rt=Be[et[1]],Yt=Be[et[2]],Fe=re(Yt,bt,Ye,tt),He=re(Yt,Rt,Ye,tt);vt=Mt(De,[He,Fe,bt],[-1,-1,Ze[et[0]]])||vt,vt=Mt(De,[bt,Rt,He],[Ze[et[0]],Ze[et[1]],-1])||vt,rt=!0}}),rt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(et){if(Pt[et[0]]&&!Pt[et[1]]&&!Pt[et[2]]){var bt=Be[et[0]],Yt=Be[et[2]],Fe=re(Be[et[1]],bt,Ye,tt),He=re(Yt,bt,Ye,tt);vt=Mt(De,[He,Fe,bt],[-1,-1,Ze[et[0]]])||vt,rt=!0}}),vt}function ce(De,Be,Ze,Ye){var Mt,rt,et,bt,tt=!1,st=oe(Be),vt=[ne(st[0][3],Ze,Ye),ne(st[1][3],Ze,Ye),ne(st[2][3],Ze,Ye),ne(st[3][3],Ze,Ye)];if(!(vt[0]||vt[1]||vt[2]||vt[3]))return tt;if(vt[0]&&vt[1]&&vt[2]&&vt[3])return k&&(Mt=De,rt=st,et=Be,(bt=function(Rt,Yt,Fe){K(Mt,[rt[Rt],rt[Yt],rt[Fe]],[et[Rt],et[Yt],et[Fe]])})(0,1,2),bt(3,0,1),bt(2,3,0),tt=void bt(1,2,3)||tt),tt;var Pt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Mt){if(vt[Mt[0]]&&vt[Mt[1]]&&vt[Mt[2]]&&!vt[Mt[3]]){var rt=st[Mt[0]],et=st[Mt[1]],bt=st[Mt[2]],Rt=st[Mt[3]];if(k)tt=K(De,[rt,et,bt],[Be[Mt[0]],Be[Mt[1]],Be[Mt[2]]])||tt;else{var Yt=re(Rt,rt,Ze,Ye),Fe=re(Rt,et,Ze,Ye),He=re(Rt,bt,Ze,Ye);tt=K(null,[Yt,Fe,He],[-1,-1,-1])||tt}Pt=!0}}),Pt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Mt){if(vt[Mt[0]]&&vt[Mt[1]]&&!vt[Mt[2]]&&!vt[Mt[3]]){var rt=st[Mt[0]],et=st[Mt[1]],bt=st[Mt[2]],Rt=st[Mt[3]],Yt=re(bt,rt,Ze,Ye),Fe=re(bt,et,Ze,Ye),He=re(Rt,et,Ze,Ye),Oe=re(Rt,rt,Ze,Ye);k?(tt=K(De,[rt,Oe,Yt],[Be[Mt[0]],-1,-1])||tt,tt=K(De,[et,Fe,He],[Be[Mt[1]],-1,-1])||tt):(ke=[Yt,Fe,He,Oe],Le=[-1,-1,-1,-1],(Pe=function(Ce,Xe,at){K(null,[ke[Ce],ke[Xe],ke[at]],[Le[Ce],Le[Xe],Le[at]])})(0,1,2),tt=void Pe(2,3,0)||tt),Pt=!0}var ke,Le,Pe}),Pt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Mt){if(vt[Mt[0]]&&!vt[Mt[1]]&&!vt[Mt[2]]&&!vt[Mt[3]]){var rt=st[Mt[0]],bt=st[Mt[2]],Rt=st[Mt[3]],Yt=re(st[Mt[1]],rt,Ze,Ye),Fe=re(bt,rt,Ze,Ye),He=re(Rt,rt,Ze,Ye);k?(tt=K(De,[rt,Yt,Fe],[Be[Mt[0]],-1,-1])||tt,tt=K(De,[rt,Fe,He],[Be[Mt[0]],-1,-1])||tt,tt=K(De,[rt,He,Yt],[Be[Mt[0]],-1,-1])||tt):tt=K(null,[Yt,Fe,He],[-1,-1,-1])||tt,Pt=!0}})),tt}function ge(De,Be,Ze,Ye,tt,st,vt,Pt,Mt,rt,et){var bt=!1;return T&&(j(De,"A")&&(bt=ce(null,[Be,Ze,Ye,st],rt,et)||bt),j(De,"B")&&(bt=ce(null,[Ze,Ye,tt,Mt],rt,et)||bt),j(De,"C")&&(bt=ce(null,[Ze,st,vt,Mt],rt,et)||bt),j(De,"D")&&(bt=ce(null,[Ye,st,Pt,Mt],rt,et)||bt),j(De,"E")&&(bt=ce(null,[Ze,Ye,st,Mt],rt,et)||bt)),k&&(bt=ce(De,[Ze,Ye,st,Mt],rt,et)||bt),bt}function xe(De,Be,Ze,Ye,tt,st,vt,Pt){return[!0===Pt[0]||pe(De,oe([Be,Ze,Ye]),[Be,Ze,Ye],st,vt),!0===Pt[1]||pe(De,oe([Ye,tt,Be]),[Ye,tt,Be],st,vt)]}function we(De,Be,Ze,Ye,tt,st,vt,Pt,Mt){return Pt?xe(De,Be,Ze,tt,Ye,st,vt,Mt):xe(De,Ze,tt,Ye,Be,st,vt,Mt)}function be(De,Be,Ze,Ye,tt,st,vt){var Pt,Mt,rt,et,bt=!1,Rt=function(){bt=pe(De,[Pt,Mt,rt],[-1,-1,-1],tt,st)||bt,bt=pe(De,[rt,et,Pt],[-1,-1,-1],tt,st)||bt},Yt=vt[0],Fe=vt[1],He=vt[2];return Yt&&(Pt=U(oe([H(Be,Ze-0,Ye-0)])[0],oe([H(Be-1,Ze-0,Ye-0)])[0],Yt),Mt=U(oe([H(Be,Ze-0,Ye-1)])[0],oe([H(Be-1,Ze-0,Ye-1)])[0],Yt),rt=U(oe([H(Be,Ze-1,Ye-1)])[0],oe([H(Be-1,Ze-1,Ye-1)])[0],Yt),et=U(oe([H(Be,Ze-1,Ye-0)])[0],oe([H(Be-1,Ze-1,Ye-0)])[0],Yt),Rt()),Fe&&(Pt=U(oe([H(Be-0,Ze,Ye-0)])[0],oe([H(Be-0,Ze-1,Ye-0)])[0],Fe),Mt=U(oe([H(Be-0,Ze,Ye-1)])[0],oe([H(Be-0,Ze-1,Ye-1)])[0],Fe),rt=U(oe([H(Be-1,Ze,Ye-1)])[0],oe([H(Be-1,Ze-1,Ye-1)])[0],Fe),et=U(oe([H(Be-1,Ze,Ye-0)])[0],oe([H(Be-1,Ze-1,Ye-0)])[0],Fe),Rt()),He&&(Pt=U(oe([H(Be-0,Ze-0,Ye)])[0],oe([H(Be-0,Ze-0,Ye-1)])[0],He),Mt=U(oe([H(Be-0,Ze-1,Ye)])[0],oe([H(Be-0,Ze-1,Ye-1)])[0],He),rt=U(oe([H(Be-1,Ze-1,Ye)])[0],oe([H(Be-1,Ze-1,Ye-1)])[0],He),et=U(oe([H(Be-1,Ze-0,Ye)])[0],oe([H(Be-1,Ze-0,Ye-1)])[0],He),Rt()),bt}function Se(De,Be,Ze,Ye,tt,st,vt,Pt,Mt,rt,et,bt){var Rt=De;return bt?(T&&"even"===De&&(Rt=null),ge(Rt,Be,Ze,Ye,tt,st,vt,Pt,Mt,rt,et)):(T&&"odd"===De&&(Rt=null),ge(Rt,Mt,Pt,vt,st,tt,Ye,Ze,Be,rt,et))}function fe(De,Be,Ze,Ye,tt){for(var st=[],vt=0,Pt=0;Pt<Be.length;Pt++)for(var Mt=Be[Pt],rt=1;rt<R;rt++)for(var et=1;et<E;et++)st.push(we(De,H(Mt,et-1,rt-1),H(Mt,et-1,rt),H(Mt,et,rt-1),H(Mt,et,rt),Ze,Ye,(Mt+et+rt)%2,tt&&tt[vt]?tt[vt]:[])),vt++;return st}function me(De,Be,Ze,Ye,tt){for(var st=[],vt=0,Pt=0;Pt<Be.length;Pt++)for(var Mt=Be[Pt],rt=1;rt<S;rt++)for(var et=1;et<R;et++)st.push(we(De,H(rt-1,Mt,et-1),H(rt,Mt,et-1),H(rt-1,Mt,et),H(rt,Mt,et),Ze,Ye,(rt+Mt+et)%2,tt&&tt[vt]?tt[vt]:[])),vt++;return st}function Te(De,Be,Ze,Ye,tt){for(var st=[],vt=0,Pt=0;Pt<Be.length;Pt++)for(var Mt=Be[Pt],rt=1;rt<E;rt++)for(var et=1;et<S;et++)st.push(we(De,H(et-1,rt-1,Mt),H(et-1,rt,Mt),H(et,rt-1,Mt),H(et,rt,Mt),Ze,Ye,(et+rt+Mt)%2,tt&&tt[vt]?tt[vt]:[])),vt++;return st}function _e(De,Be,Ze){for(var Ye=1;Ye<R;Ye++)for(var tt=1;tt<E;tt++)for(var st=1;st<S;st++)Se(De,H(st-1,tt-1,Ye-1),H(st-1,tt-1,Ye),H(st-1,tt,Ye-1),H(st-1,tt,Ye),H(st,tt-1,Ye-1),H(st,tt-1,Ye),H(st,tt,Ye-1),H(st,tt,Ye),Be,Ze,(st+tt+Ye)%2)}function Me(De,Be,Ze){T=!0,_e(De,Be,Ze),T=!1}function Ie(De,Be,Ze,Ye,tt,st){for(var vt=[],Mt=0;Mt<Be.length;Mt++)for(var rt=Be[Mt],et=1;et<R;et++)for(var bt=1;bt<E;bt++)vt.push(be(De,rt,bt,et,Ze,Ye,tt[Mt]));return vt}function ze(De,Be,Ze,Ye,tt,st){for(var vt=[],Mt=0;Mt<Be.length;Mt++)for(var rt=Be[Mt],et=1;et<S;et++)for(var bt=1;bt<R;bt++)vt.push(be(De,et,rt,bt,Ze,Ye,tt[Mt]));return vt}function Ve(De,Be,Ze,Ye,tt,st){for(var vt=[],Mt=0;Mt<Be.length;Mt++)for(var rt=Be[Mt],et=1;et<E;et++)for(var bt=1;bt<S;bt++)vt.push(be(De,bt,et,rt,Ze,Ye,tt[Mt]));return vt}function Je(De,Be){for(var Ze=[],Ye=De;Ye<Be;Ye++)Ze.push(Ye);return Ze}return function(){if(D(),function(){for(var Pt=0;Pt<S;Pt++)for(var Mt=0;Mt<E;Mt++)for(var rt=0;rt<R;rt++){var et=H(Pt,Mt,rt);N(s._x[et],s._y[et],s._z[et],s._value[et])}}(),d&&_&&(Q(_),k=!0,_e(null,W,G),k=!1),x&&w){Q(w);for(var De=s.surface.pattern,Be=s.surface.count,Ze=0;Ze<Be;Ze++){var Ye=1===Be?.5:Ze/(Be-1),tt=(1-Ye)*W+Ye*G,st=Math.abs(tt-V)>Math.abs(tt-Z)?[V,tt]:[tt,Z];Me(De,st[0],st[1])}}var vt=[[Math.min(W,Z),Math.max(W,Z)],[Math.min(V,G),Math.max(V,G)]];["x","y","z"].forEach(function(Pt){for(var Mt=[],rt=0;rt<vt.length;rt++){var et=0,bt=vt[rt][0],Rt=vt[rt][1],Yt=s.slices[Pt];if(Yt.show&&Yt.fill){Q(Yt.fill);var Fe=[],He=[],Oe=[];if(Yt.locations.length)for(var $e=0;$e<Yt.locations.length;$e++){var ke=n(Yt.locations[$e],"x"===Pt?M:"y"===Pt?O:P);0===ke.distRatio?Fe.push(ke.id):ke.id>0&&(He.push(ke.id),Oe.push("x"===Pt?[ke.distRatio,0,0]:"y"===Pt?[0,ke.distRatio,0]:[0,0,ke.distRatio]))}else Fe=Je(1,"x"===Pt?S-1:"y"===Pt?E-1:R-1);He.length>0&&(Mt[et]="x"===Pt?Ie(null,He,bt,Rt,Oe):"y"===Pt?ze(null,He,bt,Rt,Oe):Ve(null,He,bt,Rt,Oe),et++),Fe.length>0&&(Mt[et]="x"===Pt?fe(null,Fe,bt,Rt,Mt[et]):"y"===Pt?me(null,Fe,bt,Rt,Mt[et]):Te(null,Fe,bt,Rt,Mt[et]),et++)}var Le=s.caps[Pt];Le.show&&Le.fill&&(Q(Le.fill),Mt[et]="x"===Pt?fe(null,[0,S-1],bt,Rt,Mt[et]):"y"===Pt?me(null,[0,E-1],bt,Rt,Mt[et]):Te(null,[0,R-1],bt,Rt,Mt[et]),et++)}}),0===L&&D(),s._meshX=c,s._meshY=f,s._meshZ=g,s._meshIntensity=h,s._Xs=M,s._Ys=O,s._Zs=P}(),s}$.exports={findNearestOnAxis:n,generateIsoMeshes:u,createIsosurfaceTrace:function(s,i){var c=p({gl:s.glplot.gl}),f=new t(s,c,i.uid);return c._trace=f,f.update(i),s.glplot.add(c),f}}},{"../../../stackgl_modules":1119,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],864:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../registry"),b=y("./attributes"),v=y("../../components/colorscale/defaults");function e(n,t,a,r,u){var s=u("isomin"),i=u("isomax");null!=i&&null!=s&&s>i&&(t.isomin=null,t.isomax=null);var l=u("x"),c=u("y"),f=u("z"),g=u("value");l&&l.length&&c&&c.length&&f&&f.length&&g&&g.length?(m.getComponentMethod("calendars","handleTraceDefaults")(n,t,["x","y","z"],r),u("valuehoverformat"),["x","y","z"].forEach(function(h){u(h+"hoverformat");var o="caps."+h;u(o+".show")&&u(o+".fill");var x="slices."+h;u(x+".show")&&(u(x+".fill"),u(x+".locations"))}),u("spaceframe.show")&&u("spaceframe.fill"),u("surface.show")&&(u("surface.count"),u("surface.fill"),u("surface.pattern")),u("contour.show")&&(u("contour.color"),u("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(h){u(h)}),v(n,t,r,u,{prefix:"",cLetter:"c"}),t._length=null):t.visible=!1}$.exports={supplyDefaults:function(n,t,a,r){e(n,t,0,r,function(u,s){return p.coerce(n,t,b,u,s)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":861}],865:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,calc:y("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:y("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":861,"./calc":862,"./convert":863,"./defaults":864}],866:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/attributes"),m=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../surface/attributes"),e=y("../../plots/attributes"),n=y("../../lib/extend").extendFlat;$.exports=n({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:b({editType:"calc"}),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},p("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:v.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:n({},v.contours.x.show,{}),color:v.contours.x.color,width:v.contours.x.width,editType:"calc"},lightposition:{x:n({},v.lightposition.x,{dflt:1e5}),y:n({},v.lightposition.y,{dflt:1e5}),z:n({},v.lightposition.z,{dflt:0}),editType:"calc"},lighting:n({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},v.lighting),hoverinfo:n({},e.hoverinfo,{editType:"calc"}),showlegend:n({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1056}],867:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/calc");$.exports=function(m,b){b.intensity&&p(m,b,{vals:b.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],868:[function(y,$,ee){"use strict";var p=y("../../../stackgl_modules").gl_mesh3d,m=y("../../../stackgl_modules").delaunay_triangulate,b=y("../../../stackgl_modules").alpha_shape,v=y("../../../stackgl_modules").convex_hull,e=y("../../lib/gl_format_color").parseColorScale,n=y("../../lib/str2rgbarray"),t=y("../../components/colorscale").extractOpts,a=y("../../plots/gl3d/zip3");function r(f,g,h){this.scene=f,this.uid=h,this.mesh=g,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var u=r.prototype;function s(f){for(var g=[],h=f.length,o=0;o<h;o++)g[o]=n(f[o]);return g}function i(f,g,h,o){for(var x=[],d=g.length,w=0;w<d;w++)x[w]=f.d2l(g[w],0,o)*h;return x}function l(f){for(var g=[],h=f.length,o=0;o<h;o++)g[o]=Math.round(f[o]);return g}function c(f,g){for(var h=f.length,o=0;o<h;o++)if(f[o]<=-.5||f[o]>=g-.5)return!1;return!0}u.handlePick=function(f){if(f.object===this.mesh){var g=f.index=f.data.index;f.traceCoordinate=f.data._cellCenter?f.data.dataCoordinate:[this.data.x[g],this.data.y[g],this.data.z[g]];var h=this.data.hovertext||this.data.text;return Array.isArray(h)&&void 0!==h[g]?f.textLabel=h[g]:h&&(f.textLabel=h),!0}},u.update=function(f){var g=this.scene,h=g.fullSceneLayout;this.data=f;var o,x=f.x.length,d=a(i(h.xaxis,f.x,g.dataScale[0],f.xcalendar),i(h.yaxis,f.y,g.dataScale[1],f.ycalendar),i(h.zaxis,f.z,g.dataScale[2],f.zcalendar));if(f.i&&f.j&&f.k){if(f.i.length!==f.j.length||f.j.length!==f.k.length||!c(f.i,x)||!c(f.j,x)||!c(f.k,x))return;o=a(l(f.i),l(f.j),l(f.k))}else o=0===f.alphahull?v(d):f.alphahull>0?b(f.alphahull,d):function(k,L){for(var M=["x","y","z"].indexOf(k),O=[],P=L.length,S=0;S<P;S++)O[S]=[L[S][(M+1)%3],L[S][(M+2)%3]];return m(O)}(f.delaunayaxis,d);var w={positions:d,cells:o,lightPosition:[f.lightposition.x,f.lightposition.y,f.lightposition.z],ambient:f.lighting.ambient,diffuse:f.lighting.diffuse,specular:f.lighting.specular,roughness:f.lighting.roughness,fresnel:f.lighting.fresnel,vertexNormalsEpsilon:f.lighting.vertexnormalsepsilon,faceNormalsEpsilon:f.lighting.facenormalsepsilon,opacity:f.opacity,contourEnable:f.contour.show,contourColor:n(f.contour.color).slice(0,3),contourWidth:f.contour.width,useFacetNormals:f.flatshading};if(f.intensity){var _=t(f);this.color="#fff";var T=f.intensitymode;w[T+"Intensity"]=f.intensity,w[T+"IntensityBounds"]=[_.min,_.max],w.colormap=e(f)}else f.vertexcolor?(this.color=f.vertexcolor[0],w.vertexColors=s(f.vertexcolor)):f.facecolor?(this.color=f.facecolor[0],w.cellColors=s(f.facecolor)):(this.color=f.color,w.meshColor=n(f.color));this.mesh.update(w)},u.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(f,g){var o=p({gl:f.glplot.gl}),x=new r(f,o,g.uid);return o._trace=x,x.update(g),f.glplot.add(o),x}},{"../../../stackgl_modules":1119,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],869:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../lib"),b=y("../../components/colorscale/defaults"),v=y("./attributes");$.exports=function(e,n,t,a){function r(s,i){return m.coerce(e,n,v,s,i)}function u(s){var i=s.map(function(l){var c=r(l);return c&&m.isArrayOrTypedArray(c)?c:null});return i.every(function(l){return l&&l.length===i[0].length})&&i}u(["x","y","z"])?(u(["i","j","k"]),(!n.i||n.j&&n.k)&&(!n.j||n.k&&n.i)&&(!n.k||n.i&&n.j)?(p.getComponentMethod("calendars","handleTraceDefaults")(e,n,["x","y","z"],a),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(s){r(s)}),r("contour.show")&&(r("contour.color"),r("contour.width")),"intensity"in e?(r("intensity"),r("intensitymode"),b(e,n,a,r,{prefix:"",cLetter:"c"})):(n.showscale=!1,"facecolor"in e?r("facecolor"):"vertexcolor"in e?r("vertexcolor"):r("color",t)),r("text"),r("hovertext"),r("hovertemplate"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),n._length=null):n.visible=!1):n.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":866}],870:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:y("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":866,"./calc":867,"./convert":868,"./defaults":869}],871:[function(y,$,ee){"use strict";var p=y("../../lib").extendFlat,m=y("../scatter/attributes"),b=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,v=y("../../components/drawing/attributes").dash,e=y("../../components/fx/attributes"),n=y("../../constants/delta.js"),t=n.INCREASING.COLOR,a=n.DECREASING.COLOR,r=m.line;function u(s){return{line:{color:p({},r.color,{dflt:s}),width:r.width,dash:v,editType:"style"},editType:"style"}}$.exports={xperiod:m.xperiod,xperiod0:m.xperiod0,xperiodalignment:m.xperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:p({},r.width,{}),dash:p({},v,{}),editType:"style"},increasing:u(t),decreasing:u(a),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:p({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":925}],872:[function(y,$,ee){"use strict";var p=y("../../lib"),m=p._,b=y("../../plots/cartesian/axes"),v=y("../../plots/cartesian/align_period"),e=y("../../constants/numerical").BADNUM;function n(a,r,u,s){return{o:a,h:r,l:u,c:s}}function t(a,r,u,s,i,l){for(var c=i.makeCalcdata(r,"open"),f=i.makeCalcdata(r,"high"),g=i.makeCalcdata(r,"low"),h=i.makeCalcdata(r,"close"),o=Array.isArray(r.text),x=Array.isArray(r.hovertext),d=!0,w=null,_=!!r.xperiodalignment,T=[],k=0;k<s.length;k++){var L=s[k],M=c[k],O=f[k],P=g[k],S=h[k];if(L!==e&&M!==e&&O!==e&&P!==e&&S!==e){S===M?null!==w&&S!==w&&(d=S>w):d=S>M,w=S;var E=l(M,O,P,S);E.pos=L,E.yc=(M+S)/2,E.i=k,E.dir=d?"increasing":"decreasing",E.x=E.pos,E.y=[P,O],_&&(E.orig_p=u[k]),o&&(E.tx=r.text[k]),x&&(E.htx=r.hovertext[k]),T.push(E)}else T.push({pos:L,empty:!0})}return r._extremes[i._id]=b.findExtremes(i,p.concat(g,f),{padded:!0}),T.length&&(T[0].t={labels:{open:m(a,"open:")+" ",high:m(a,"high:")+" ",low:m(a,"low:")+" ",close:m(a,"close:")+" "}}),T}$.exports={calc:function(a,r){var u=b.getFromId(a,r.xaxis),s=b.getFromId(a,r.yaxis),i=function(h,o,x){var d=x._minDiff;if(!d){var w,_=h._fullData,T=[];for(d=1/0,w=0;w<_.length;w++){var k=_[w];if("ohlc"===k.type&&!0===k.visible&&k.xaxis===o._id){T.push(k);var L=o.makeCalcdata(k,"x");k._origX=L;var M=v(x,o,"x",L).vals;k._xcalc=M;var O=p.distinctVals(M).minDiff;O&&isFinite(O)&&(d=Math.min(d,O))}}for(d===1/0&&(d=1),w=0;w<T.length;w++)T[w]._minDiff=d}return d*x.tickwidth}(a,u,r),l=r._minDiff;r._minDiff=null;var c=r._origX;r._origX=null;var f=r._xcalc;r._xcalc=null;var g=t(a,r,c,f,s,n);return r._extremes[u._id]=b.findExtremes(u,f,{vpad:l/2}),g.length?(p.extendFlat(g[0].t,{wHover:l/2,tickLen:i}),g):[{t:{empty:!0}}]},calcCommon:t}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],873:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./ohlc_defaults"),b=y("../scatter/period_defaults"),v=y("./attributes");function e(n,t,a,r){a(r+".line.color"),a(r+".line.width",t.line.width),a(r+".line.dash",t.line.dash)}$.exports=function(n,t,a,r){function u(s,i){return p.coerce(n,t,v,s,i)}m(n,t,u,r)?(b(n,t,r,u,{x:!0}),u("xhoverformat"),u("yhoverformat"),u("line.width"),u("line.dash"),e(0,t,u,"increasing"),e(0,t,u,"decreasing"),u("text"),u("hovertext"),u("tickwidth"),r._requestRangeslider[t.xaxis]=!0):t.visible=!1}},{"../../lib":503,"../scatter/period_defaults":945,"./attributes":871,"./ohlc_defaults":876}],874:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes"),m=y("../../lib"),b=y("../../components/fx"),v=y("../../components/color"),e=y("../../lib").fillText,n=y("../../constants/delta.js"),t={increasing:n.INCREASING.SYMBOL,decreasing:n.DECREASING.SYMBOL};function a(s,i,l,c){var f,g,h=s.cd,o=s.xa,x=h[0].trace,d=h[0].t,w=x.type,_="ohlc"===w?"l":"min",T="ohlc"===w?"h":"max",k=d.bPos||0,L=d.bdPos||d.tickLen,M=d.wHover,O=Math.min(1,L/Math.abs(o.r2c(o.range[1])-o.r2c(o.range[0])));function P(Z){var W=Z.pos+k-i;return b.inbox(W-M,W+M,f)}function S(Z){var W=Z[_],G=Z[T];return W===G||b.inbox(W-l,G-l,f)}function E(Z){return(P(Z)+S(Z))/2}f=s.maxHoverDistance-O,g=s.maxSpikeDistance-O;var R=b.getDistanceFunction(c,P,S,E);if(b.getClosest(h,R,s),!1===s.index)return null;var B=h[s.index];if(B.empty)return null;var H=x[B.dir],V=H.line.color;return s.color=v.opacity(V)&&H.line.width?V:H.fillcolor,s.x0=o.c2p(B.pos+k-L,!0),s.x1=o.c2p(B.pos+k+L,!0),s.xLabelVal=void 0!==B.orig_p?B.orig_p:B.pos,s.spikeDistance=E(B)*g/f,s.xSpike=o.c2p(B.pos,!0),s}function r(s,i,l,c){var f=s.cd,g=s.ya,h=f[0].trace,o=f[0].t,x=[],d=a(s,i,l,c);if(!d)return[];var w=f[d.index].hi||h.hoverinfo,_=w.split("+");if("all"!==w&&-1===_.indexOf("y"))return[];for(var T=["high","open","close","low"],k={},L=0;L<T.length;L++){var M,O=T[L],P=h[O][d.index],S=g.c2p(P,!0);P in k?(M=k[P]).yLabel+="<br>"+o.labels[O]+p.hoverLabelText(g,P,h.yhoverformat):((M=m.extendFlat({},d)).y0=M.y1=S,M.yLabelVal=P,M.yLabel=o.labels[O]+p.hoverLabelText(g,P,h.yhoverformat),M.name="",x.push(M),k[P]=M)}return x}function u(s,i,l,c){var f=s.cd,g=s.ya,h=f[0].trace,o=f[0].t,x=a(s,i,l,c);if(!x)return[];var d=f[x.index],w=x.index=d.i,_=d.dir;function T(E){return o.labels[E]+p.hoverLabelText(g,h[E][w],h.yhoverformat)}var k=d.hi||h.hoverinfo,L=k.split("+"),M="all"===k,O=M||-1!==L.indexOf("y"),P=M||-1!==L.indexOf("text"),S=O?[T("open"),T("high"),T("low"),T("close")+"  "+t[_]]:[];return P&&e(d,h,S),x.extraText=S.join("<br>"),x.y0=x.y1=g.c2p(d.yc,!0),[x]}$.exports={hoverPoints:function(s,i,l,c){return s.cd[0].trace.hoverlabel.split?r(s,i,l,c):u(s,i,l,c)},hoverSplit:r,hoverOnPoints:u}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],875:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"ohlc",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc").calc,plot:y("./plot"),style:y("./style"),hoverPoints:y("./hover").hoverPoints,selectPoints:y("./select")}},{"../../plots/cartesian":568,"./attributes":871,"./calc":872,"./defaults":873,"./hover":874,"./plot":877,"./select":878,"./style":879}],876:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../lib");$.exports=function(b,v,e,n){var t=e("x"),a=e("open"),r=e("high"),u=e("low"),s=e("close");if(e("hoverlabel.split"),p.getComponentMethod("calendars","handleTraceDefaults")(b,v,["x"],n),a&&r&&u&&s){var i=Math.min(a.length,r.length,u.length,s.length);return t&&(i=Math.min(i,m.minRowLength(t))),v._length=i,i}}},{"../../lib":503,"../../registry":638}],877:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib");$.exports=function(b,v,e,n){var t=v.yaxis,a=v.xaxis,r=!!a.rangebreaks;m.makeTraceGroups(n,e,"trace ohlc").each(function(u){var s=p.select(this),i=u[0],l=i.t;if(!0!==i.trace.visible||l.empty)s.remove();else{var c=l.tickLen,f=s.selectAll("path").data(m.identity);f.enter().append("path"),f.exit().remove(),f.attr("d",function(g){if(g.empty)return"M0,0Z";var h=a.c2p(g.pos-c,!0),o=a.c2p(g.pos+c,!0),x=r?(h+o)/2:a.c2p(g.pos,!0);return"M"+h+","+t.c2p(g.o,!0)+"H"+x+"M"+x+","+t.c2p(g.h,!0)+"V"+t.c2p(g.l,!0)+"M"+o+","+t.c2p(g.c,!0)+"H"+x})}})}},{"../../lib":503,"@plotly/d3":58}],878:[function(y,$,ee){"use strict";$.exports=function(p,m){var b,v=p.cd,e=p.xaxis,n=p.yaxis,t=[],a=v[0].t.bPos||0;if(!1===m)for(b=0;b<v.length;b++)v[b].selected=0;else for(b=0;b<v.length;b++){var r=v[b];m.contains([e.c2p(r.pos+a),n.c2p(r.yc)],null,r.i,p)?(t.push({pointNumber:r.i,x:e.c2d(r.pos),y:n.c2d(r.yc)}),r.selected=1):r.selected=0}return t}},{}],879:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/drawing"),b=y("../../components/color");$.exports=function(v,e,n){var t=n||p.select(v).selectAll("g.ohlclayer").selectAll("g.trace");t.style("opacity",function(a){return a[0].trace.opacity}),t.each(function(a){var r=a[0].trace;p.select(this).selectAll("path").each(function(u){if(!u.empty){var s=r[u.dir].line;p.select(this).style("fill","none").call(b.stroke,s.color).call(m.dashLine,s.dash,s.width).style("opacity",r.selectedpoints&&!u.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],880:[function(y,$,ee){"use strict";var p=y("../../lib/extend").extendFlat,m=y("../../plots/attributes"),b=y("../../plots/font_attributes"),v=y("../../components/colorscale/attributes"),e=y("../../plots/template_attributes").hovertemplateAttrs,n=y("../../plots/domain").attributes,t=p({editType:"calc"},v("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});$.exports={domain:n({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:p({},m.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:b({editType:"calc"}),tickfont:b({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:t,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],881:[function(y,$,ee){"use strict";var p=y("../../plots/get_data").getModuleCalcData,m=y("./plot");ee.name="parcats",ee.plot=function(b,v,e,n){var t=p(b.calcdata,"parcats");t.length&&m(b,t[0],e,n)},ee.clean=function(b,v,e,n){var t=n._has&&n._has("parcats"),a=v._has&&v._has("parcats");t&&!a&&n._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":886}],882:[function(y,$,ee){"use strict";var p=y("../../lib/gup").wrap,m=y("../../components/colorscale/helpers").hasColorscale,b=y("../../components/colorscale/calc"),v=y("../../lib/filter_unique.js"),e=y("../../components/drawing"),n=y("../../lib"),t=y("fast-isnumeric");function a(s,i,l){s.valueInds.push(i),s.count+=l}function r(s,i,l){return{categoryInds:s,color:i,rawColor:l,valueInds:[],count:0}}function u(s,i,l){s.valueInds.push(i),s.count+=l}$.exports=function(s,i){var l=n.filterVisible(i.dimensions);if(0===l.length)return[];var c,f,g,h=l.map(function(X){var te;if("trace"===X.categoryorder)te=null;else if("array"===X.categoryorder)te=X.categoryarray;else{te=v(X.values);for(var D=!0,N=0;N<te.length;N++)if(!t(te[N])){D=!1;break}te.sort(D?n.sorterAsc:void 0),"category descending"===X.categoryorder&&(te=te.reverse())}return function(U,Q){Q=null==Q?[]:Q.map(function(pe){return pe});var j={},J={},K=[];Q.forEach(function(pe,ce){j[pe]=0,J[pe]=ce});for(var re=0;re<U.length;re++){var ne,se=U[re];void 0===j[se]?(j[se]=1,ne=Q.push(se)-1,J[se]=ne):(j[se]++,ne=J[se]),K.push(ne)}var oe=Q.map(function(pe){return j[pe]});return{uniqueValues:Q,uniqueCounts:oe,inds:K}}(X.values,te)});c=n.isArrayOrTypedArray(i.counts)?i.counts:[i.counts],function(X){var te;if(function(D){for(var N=new Array(D.length),U=0;U<D.length;U++){if(D[U]<0||D[U]>=D.length||void 0!==N[D[U]])return!1;N[D[U]]=!0}return!0}(X.map(function(D){return D.displayindex})))for(te=0;te<X.length;te++)X[te]._displayindex=X[te].displayindex;else for(te=0;te<X.length;te++)X[te]._displayindex=te}(l),l.forEach(function(X,te){!function(D,N){D._categoryarray=N.uniqueValues,D._ticktext=null==D.ticktext?[]:D.ticktext.slice();for(var U=D._ticktext.length;U<N.uniqueValues.length;U++)D._ticktext.push(N.uniqueValues[U])}(X,h[te])});var o,x=i.line;x?(m(i,"line")&&b(s,i,{vals:i.line.color,containerStr:"line",cLetter:"c"}),o=e.tryColorscale(x)):o=n.identity;var d,w,_,T,k,L=l[0].values.length,M={},O=h.map(function(X){return X.inds});for(g=0,d=0;d<L;d++){var P=[];for(w=0;w<O.length;w++)P.push(O[w][d]);g+=f=c[d%c.length];var S=(_=d,T=void 0,k=void 0,n.isArrayOrTypedArray(x.color)?k=T=x.color[_%x.color.length]:T=x.color,{color:o(T),rawColor:k}),E=P+"-"+S.rawColor;void 0===M[E]&&(M[E]=r(P,S.color,S.rawColor)),u(M[E],d,f)}var R,X,te,D,N,B=l.map(function(X,te){return{dimensionInd:te,containerInd:X._index,displayInd:X._displayindex,dimensionLabel:X.label,count:g,categories:[],dragX:null}});for(d=0;d<L;d++)for(f=c[d%c.length],w=0;w<B.length;w++){var H=B[w].containerInd,V=h[w].inds[d],Z=B[w].categories;void 0===Z[V]&&(Z[V]={dimensionInd:w,categoryInd:R=V,categoryValue:i.dimensions[H]._categoryarray[V],displayInd:R,categoryLabel:i.dimensions[H]._ticktext[V],valueInds:[],count:0,dragY:null}),a(Z[V],d,f)}return p((te=M,D=g,N=(X=B).map(function(U){return U.categories.length}).reduce(function(U,Q){return Math.max(U,Q)}),{dimensions:X,paths:te,trace:void 0,maxCats:N,count:D}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],883:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/colorscale/helpers").hasColorscale,b=y("../../components/colorscale/defaults"),v=y("../../plots/domain").defaults,e=y("../../plots/array_container_defaults"),n=y("./attributes"),t=y("../parcoords/merge_length");function a(r,u){function s(o,x){return p.coerce(r,u,n.dimensions,o,x)}var i=s("values"),l=s("visible");if(i&&i.length||(l=u.visible=!1),l){s("label"),s("displayindex",u._index);var c,f=r.categoryarray,g=Array.isArray(f)&&f.length>0;g&&(c="array");var h=s("categoryorder",c);"array"===h?(s("categoryarray"),s("ticktext")):(delete r.categoryarray,delete r.ticktext),g||"array"!==h||(u.categoryorder="trace")}}$.exports=function(r,u,s,i){function l(o,x){return p.coerce(r,u,n,o,x)}var c=e(r,u,{name:"dimensions",handleItemDefaults:a}),f=function(o,x,d,w,_){_("line.shape"),_("line.hovertemplate");var T=_("line.color",w.colorway[0]);if(m(o,"line")&&p.isArrayOrTypedArray(T)){if(T.length)return _("line.colorscale"),b(o,x,w,_,{prefix:"line.",cLetter:"c"}),T.length;x.line.color=d}return 1/0}(r,u,s,i,l);v(u,i,l),Array.isArray(c)&&c.length||(u.visible=!1),t(u,c,"values",f),l("hoveron"),l("hovertemplate"),l("arrangement"),l("bundlecolors"),l("sortpaths"),l("counts");var g={family:i.font.family,size:Math.round(i.font.size),color:i.font.color};p.coerceFont(l,"labelfont",g);var h={family:i.font.family,size:Math.round(i.font.size/1.2),color:i.font.color};p.coerceFont(l,"tickfont",h)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":896,"./attributes":880}],884:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:y("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":880,"./base_plot":881,"./calc":882,"./defaults":883,"./plot":886}],885:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("d3-interpolate").interpolateNumber,b=y("../../plot_api/plot_api"),v=y("../../components/fx"),e=y("../../lib"),n=e.strTranslate,t=y("../../components/drawing"),a=y("tinycolor2"),r=y("../../lib/svg_text_utils");function u(D,N,U,Q){var j=D.map(Z.bind(0,N,U)),J=Q.selectAll("g.parcatslayer").data([null]);J.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var K=J.selectAll("g.trace.parcats").data(j,s),re=K.enter().append("g").attr("class","trace parcats");K.attr("transform",function(be){return n(be.x,be.y)}),re.append("g").attr("class","paths");var ne=K.select("g.paths").selectAll("path.path").data(function(be){return be.paths},s);ne.attr("fill",function(be){return be.model.color});var se=ne.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(be){return be.model.color}).attr("fill-opacity",0);x(se),ne.attr("d",function(be){return be.svgD}),se.empty()||ne.sort(l),ne.exit().remove(),ne.on("mouseover",c).on("mouseout",f).on("click",o),re.append("g").attr("class","dimensions");var oe=K.select("g.dimensions").selectAll("g.dimension").data(function(be){return be.dimensions},s);oe.enter().append("g").attr("class","dimension"),oe.attr("transform",function(be){return n(be.x,0)}),oe.exit().remove();var pe=oe.selectAll("g.category").data(function(be){return be.categories},s),ce=pe.enter().append("g").attr("class","category");pe.attr("transform",function(be){return n(0,be.y)}),ce.append("rect").attr("class","catrect").attr("pointer-events","none"),pe.select("rect.catrect").attr("fill","none").attr("width",function(be){return be.width}).attr("height",function(be){return be.height}),w(ce);var ge=pe.selectAll("rect.bandrect").data(function(be){return be.bands},s);ge.each(function(){e.raiseToTop(this)}),ge.attr("fill",function(be){return be.color});var xe=ge.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(be){return be.color}).attr("fill-opacity",0);ge.attr("fill",function(be){return be.color}).attr("width",function(be){return be.width}).attr("height",function(be){return be.height}).attr("y",function(be){return be.y}).attr("cursor",function(be){return"fixed"===be.parcatsViewModel.arrangement?"default":"perpendicular"===be.parcatsViewModel.arrangement?"ns-resize":"move"}),_(xe),ge.exit().remove(),ce.append("text").attr("class","catlabel").attr("pointer-events","none");var we=N._fullLayout.paper_bgcolor;pe.select("text.catlabel").attr("text-anchor",function(be){return i(be)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(we)).style("fill","rgb(0, 0, 0)").attr("x",function(be){return i(be)?be.width+5:-5}).attr("y",function(be){return be.height/2}).text(function(be){return be.model.categoryLabel}).each(function(be){t.font(p.select(this),be.parcatsViewModel.categorylabelfont),r.convertToTspans(p.select(this),N)}),ce.append("text").attr("class","dimlabel"),pe.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(be){return"fixed"===be.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(be){return be.width/2}).attr("y",-5).text(function(be,Se){return 0===Se?be.parcatsViewModel.model.dimensions[be.model.dimensionInd].dimensionLabel:null}).each(function(be){t.font(p.select(this),be.parcatsViewModel.labelfont)}),pe.selectAll("rect.bandrect").on("mouseover",O).on("mouseout",P),pe.exit().remove(),oe.call(p.behavior.drag().origin(function(be){return{x:be.x,y:0}}).on("dragstart",S).on("drag",E).on("dragend",R)),K.each(function(be){be.traceSelection=p.select(this),be.pathSelection=p.select(this).selectAll("g.paths").selectAll("path.path"),be.dimensionSelection=p.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),K.exit().remove()}function s(D){return D.key}function i(D){return D.model.dimensionInd===D.parcatsViewModel.dimensions[D.parcatsViewModel.dimensions.length-1].model.dimensionInd}function l(D,N){return D.model.rawColor>N.model.rawColor?1:D.model.rawColor<N.model.rawColor?-1:0}function c(D){if(!D.parcatsViewModel.dragDimension&&-1===D.parcatsViewModel.hoverinfoItems.indexOf("skip")){e.raiseToTop(this),d(p.select(this));var N=g(D),U=h(D);if(D.parcatsViewModel.graphDiv.emit("plotly_hover",{points:N,event:p.event,constraints:U}),-1===D.parcatsViewModel.hoverinfoItems.indexOf("none")){var Q,j,J,K=p.mouse(this)[0],re=D.parcatsViewModel.graphDiv,ne=D.parcatsViewModel.trace,se=re._fullLayout,oe=se._paperdiv.node().getBoundingClientRect(),pe=D.parcatsViewModel.graphDiv.getBoundingClientRect();for(J=0;J<D.leftXs.length-1;J++)if(D.leftXs[J]+D.dimWidths[J]-2<=K&&K<=D.leftXs[J+1]+2){var ce=D.parcatsViewModel.dimensions[J];Q=(ce.x+ce.width+D.parcatsViewModel.dimensions[J+1].x)/2,j=(D.topYs[J]+D.topYs[J+1]+D.height)/2;break}var xe=D.parcatsViewModel.x+Q,we=D.parcatsViewModel.y+j,be=a.mostReadable(D.model.color,["black","white"]),Se=D.model.count,fe=Se/D.parcatsViewModel.model.count,me={countLabel:Se,probabilityLabel:fe.toFixed(3)},Te=[];-1!==D.parcatsViewModel.hoverinfoItems.indexOf("count")&&Te.push(["Count:",me.countLabel].join(" ")),-1!==D.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Te.push(["P:",me.probabilityLabel].join(" "));var _e=Te.join("<br>"),Me=p.mouse(re)[0];v.loneHover({trace:ne,x:xe-oe.left+pe.left,y:we-oe.top+pe.top,text:_e,color:D.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:be,idealAlign:Me<xe?"right":"left",hovertemplate:(ne.line||{}).hovertemplate,hovertemplateLabels:me,eventData:[{data:ne._input,fullData:ne,count:Se,probability:fe}]},{container:se._hoverlayer.node(),outerContainer:se._paper.node(),gd:re})}}}function f(D){if(!D.parcatsViewModel.dragDimension&&(x(p.select(this)),v.loneUnhover(D.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),D.parcatsViewModel.pathSelection.sort(l),-1===D.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var N=g(D),U=h(D);D.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:N,event:p.event,constraints:U})}}function g(D){for(var N=[],U=B(D.parcatsViewModel),Q=0;Q<D.model.valueInds.length;Q++)N.push({curveNumber:U,pointNumber:D.model.valueInds[Q]});return N}function h(D){for(var N={},U=D.parcatsViewModel.model.dimensions,Q=0;Q<U.length;Q++){var j=U[Q];N[j.containerInd]=j.categories[D.model.categoryInds[Q]].categoryValue}return void 0!==D.model.rawColor&&(N.color=D.model.rawColor),N}function o(D){if(-1===D.parcatsViewModel.hoverinfoItems.indexOf("skip")){var N=g(D),U=h(D);D.parcatsViewModel.graphDiv.emit("plotly_click",{points:N,event:p.event,constraints:U})}}function x(D){D.attr("fill",function(N){return N.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function d(D){D.attr("fill-opacity",.8).attr("stroke",function(N){return a.mostReadable(N.model.color,["black","white"])}).attr("stroke-width",.3)}function w(D){D.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function _(D){D.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function T(D){var U=D.categoryViewModel.model.dimensionInd,Q=D.categoryViewModel.model.categoryInd;return D.parcatsViewModel.pathSelection.filter(function(j){return j.model.categoryInds[U]===Q&&j.model.color===D.color})}function k(D,N,U){var Q=p.select(D).datum(),j=Q.categoryViewModel.model,J=Q.parcatsViewModel.graphDiv,K=p.select(D.parentNode).selectAll("rect.bandrect"),re=[];K.each(function(se){T(se).each(function(oe){Array.prototype.push.apply(re,g(oe))})});var ne={};ne[j.dimensionInd]=j.categoryValue,J.emit(N,{points:re,event:U,constraints:ne})}function L(D,N,U){var Q=p.select(D).datum(),j=Q.categoryViewModel.model,J=Q.parcatsViewModel.graphDiv,K=T(Q),re=[];K.each(function(se){Array.prototype.push.apply(re,g(se))});var ne={};ne[j.dimensionInd]=j.categoryValue,void 0!==Q.rawColor&&(ne.color=Q.rawColor),J.emit(N,{points:re,event:U,constraints:ne})}function M(D,N,U){D._fullLayout._calcInverseTransform(D);var Q,j,J=D._fullLayout._invScaleX,K=D._fullLayout._invScaleY,re=p.select(U.parentNode).select("rect.catrect"),ne=re.node().getBoundingClientRect(),se=re.datum(),oe=se.parcatsViewModel,ce=oe.trace,ge=ne.top+ne.height/2;oe.dimensions.length>1&&oe.model.dimensions[se.model.dimensionInd].displayInd===oe.dimensions.length-1?(Q=ne.left,j="left"):(Q=ne.left+ne.width,j="right");var xe=se.model.count,we=se.model.categoryLabel,be=xe/se.parcatsViewModel.model.count,Se={countLabel:xe,categoryLabel:we,probabilityLabel:be.toFixed(3)},fe=[];-1!==se.parcatsViewModel.hoverinfoItems.indexOf("count")&&fe.push(["Count:",Se.countLabel].join(" ")),-1!==se.parcatsViewModel.hoverinfoItems.indexOf("probability")&&fe.push(["P("+Se.categoryLabel+"):",Se.probabilityLabel].join(" "));var me=fe.join("<br>");return{trace:ce,x:J*(Q-N.left),y:K*(ge-N.top),text:me,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:j,hovertemplate:ce.hovertemplate,hovertemplateLabels:Se,eventData:[{data:ce._input,fullData:ce,count:xe,category:we,probability:be}]}}function O(D){if(!D.parcatsViewModel.dragDimension&&-1===D.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(p.mouse(this)[1]<-1)return;var N,U=D.parcatsViewModel.graphDiv,Q=U._fullLayout,j=Q._paperdiv.node().getBoundingClientRect(),J=D.parcatsViewModel.hoveron;"color"===J?(d(ne=T(re=p.select(this).datum())),ne.each(function(){e.raiseToTop(this)}),p.select(this.parentNode).selectAll("rect.bandrect").filter(function(se){return se.color===re.color}).each(function(){e.raiseToTop(this),p.select(this).attr("stroke","black").attr("stroke-width",1.5)}),L(this,"plotly_hover",p.event)):(function(K){p.select(K.parentNode).selectAll("rect.bandrect").each(function(re){var ne=T(re);d(ne),ne.each(function(){e.raiseToTop(this)})}),p.select(K.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),k(this,"plotly_hover",p.event)),-1===D.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===J?N=M(U,j,this):"color"===J?N=function(K,re,ne){K._fullLayout._calcInverseTransform(K);var se,oe,pe=K._fullLayout._invScaleX,ce=K._fullLayout._invScaleY,ge=ne.getBoundingClientRect(),xe=p.select(ne).datum(),we=xe.categoryViewModel,be=we.parcatsViewModel,fe=be.trace,me=ge.y+ge.height/2;be.dimensions.length>1&&be.model.dimensions[we.model.dimensionInd].displayInd===be.dimensions.length-1?(se=ge.left,oe="left"):(se=ge.left+ge.width,oe="right");var Te=we.model.categoryLabel,_e=xe.parcatsViewModel.model.count,Me=0;xe.categoryViewModel.bands.forEach(function(st){st.color===xe.color&&(Me+=st.count)});var Ie=we.model.count,ze=0;be.pathSelection.each(function(st){st.model.color===xe.color&&(ze+=st.model.count)});var Ve=Me/_e,Je=Me/ze,De=Me/Ie,Be={countLabel:_e,categoryLabel:Te,probabilityLabel:Ve.toFixed(3)},Ze=[];-1!==we.parcatsViewModel.hoverinfoItems.indexOf("count")&&Ze.push(["Count:",Be.countLabel].join(" ")),-1!==we.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(Ze.push("P(color \u2229 "+Te+"): "+Be.probabilityLabel),Ze.push("P("+Te+" | color): "+Je.toFixed(3)),Ze.push("P(color | "+Te+"): "+De.toFixed(3)));var Ye=Ze.join("<br>"),tt=a.mostReadable(xe.color,["black","white"]);return{trace:fe,x:pe*(se-re.left),y:ce*(me-re.top),text:Ye,color:xe.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:tt,fontSize:10,idealAlign:oe,hovertemplate:fe.hovertemplate,hovertemplateLabels:Be,eventData:[{data:fe._input,fullData:fe,category:Te,count:_e,probability:Ve,categorycount:Ie,colorcount:ze,bandcolorcount:Me}]}}(U,j,this):"dimension"===J&&(N=function(K,re,ne){var se=[];return p.select(ne.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){se.push(M(K,re,this))}),se}(U,j,this)),N&&v.loneHover(N,{container:Q._hoverlayer.node(),outerContainer:Q._paper.node(),gd:U}))}var re,ne}function P(D){var N=D.parcatsViewModel;!N.dragDimension&&(x(N.pathSelection),w(N.dimensionSelection.selectAll("g.category")),_(N.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),v.loneUnhover(N.graphDiv._fullLayout._hoverlayer.node()),N.pathSelection.sort(l),-1===N.hoverinfoItems.indexOf("skip"))&&("color"===D.parcatsViewModel.hoveron?L(this,"plotly_unhover",p.event):k(this,"plotly_unhover",p.event))}function S(D){"fixed"!==D.parcatsViewModel.arrangement&&(D.dragDimensionDisplayInd=D.model.displayInd,D.initialDragDimensionDisplayInds=D.parcatsViewModel.model.dimensions.map(function(N){return N.displayInd}),D.dragHasMoved=!1,D.dragCategoryDisplayInd=null,p.select(this).selectAll("g.category").select("rect.catrect").each(function(N){var U=p.mouse(this)[0],Q=p.mouse(this)[1];-2<=U&&U<=N.width+2&&-2<=Q&&Q<=N.height+2&&(D.dragCategoryDisplayInd=N.model.displayInd,D.initialDragCategoryDisplayInds=D.model.categories.map(function(j){return j.displayInd}),N.model.dragY=N.y,e.raiseToTop(this.parentNode),p.select(this.parentNode).selectAll("rect.bandrect").each(function(j){j.y<Q&&Q<=j.y+j.height&&(D.potentialClickBand=this)}))}),D.parcatsViewModel.dragDimension=D,v.loneUnhover(D.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function E(D){if("fixed"!==D.parcatsViewModel.arrangement&&(D.dragHasMoved=!0,null!==D.dragDimensionDisplayInd)){var N=D.dragDimensionDisplayInd,U=N-1,Q=N+1,j=D.parcatsViewModel.dimensions[N];if(null!==D.dragCategoryDisplayInd){var J=j.categories[D.dragCategoryDisplayInd];J.model.dragY+=p.event.dy;var K=J.model.dragY,re=J.model.displayInd,ne=j.categories,se=ne[re-1],oe=ne[re+1];void 0!==se&&K<se.y+se.height/2&&(J.model.displayInd=se.model.displayInd,se.model.displayInd=re),void 0!==oe&&K+J.height>oe.y+oe.height/2&&(J.model.displayInd=oe.model.displayInd,oe.model.displayInd=re),D.dragCategoryDisplayInd=J.model.displayInd}if(null===D.dragCategoryDisplayInd||"freeform"===D.parcatsViewModel.arrangement){j.model.dragX=p.event.x;var pe=D.parcatsViewModel.dimensions[U],ce=D.parcatsViewModel.dimensions[Q];void 0!==pe&&j.model.dragX<pe.x+pe.width&&(j.model.displayInd=pe.model.displayInd,pe.model.displayInd=N),void 0!==ce&&j.model.dragX+j.width>ce.x&&(j.model.displayInd=ce.model.displayInd,ce.model.displayInd=D.dragDimensionDisplayInd),D.dragDimensionDisplayInd=j.model.displayInd}X(D.parcatsViewModel),G(D.parcatsViewModel),V(D.parcatsViewModel),H(D.parcatsViewModel)}}function R(D){if("fixed"!==D.parcatsViewModel.arrangement&&null!==D.dragDimensionDisplayInd){p.select(this).selectAll("text").attr("font-weight","normal");var N={},U=B(D.parcatsViewModel),Q=D.parcatsViewModel.model.dimensions.map(function(oe){return oe.displayInd}),j=D.initialDragDimensionDisplayInds.some(function(oe,pe){return oe!==Q[pe]});j&&Q.forEach(function(oe,pe){N["dimensions["+D.parcatsViewModel.model.dimensions[pe].containerInd+"].displayindex"]=oe});var J=!1;if(null!==D.dragCategoryDisplayInd){var K=D.model.categories.map(function(oe){return oe.displayInd});if(J=D.initialDragCategoryDisplayInds.some(function(oe,pe){return oe!==K[pe]})){var re=D.model.categories.slice().sort(function(oe,pe){return oe.displayInd-pe.displayInd}),ne=re.map(function(oe){return oe.categoryValue}),se=re.map(function(oe){return oe.categoryLabel});N["dimensions["+D.model.containerInd+"].categoryarray"]=[ne],N["dimensions["+D.model.containerInd+"].ticktext"]=[se],N["dimensions["+D.model.containerInd+"].categoryorder"]="array"}}-1===D.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!D.dragHasMoved&&D.potentialClickBand&&("color"===D.parcatsViewModel.hoveron?L(D.potentialClickBand,"plotly_click",p.event.sourceEvent):k(D.potentialClickBand,"plotly_click",p.event.sourceEvent)),D.model.dragX=null,null!==D.dragCategoryDisplayInd&&(D.parcatsViewModel.dimensions[D.dragDimensionDisplayInd].categories[D.dragCategoryDisplayInd].model.dragY=null,D.dragCategoryDisplayInd=null),D.dragDimensionDisplayInd=null,D.parcatsViewModel.dragDimension=null,D.dragHasMoved=null,D.potentialClickBand=null,X(D.parcatsViewModel),G(D.parcatsViewModel),p.transition().duration(300).ease("cubic-in-out").each(function(){V(D.parcatsViewModel,!0),H(D.parcatsViewModel,!0)}).each("end",function(){(j||J)&&b.restyle(D.parcatsViewModel.graphDiv,N,[U])})}}function B(D){for(var N,U=D.graphDiv._fullData,Q=0;Q<U.length;Q++)if(D.key===U[Q].uid){N=Q;break}return N}function H(D,N){var U;void 0===N&&(N=!1),D.pathSelection.data(function(Q){return Q.paths},s),(U=D.pathSelection,N?U.transition():U).attr("d",function(Q){return Q.svgD})}function V(D,N){function U(K){return N?K.transition():K}void 0===N&&(N=!1),D.dimensionSelection.data(function(K){return K.dimensions},s);var Q=D.dimensionSelection.selectAll("g.category").data(function(K){return K.categories},s);U(D.dimensionSelection).attr("transform",function(K){return n(K.x,0)}),U(Q).attr("transform",function(K){return n(0,K.y)}),Q.select(".dimlabel").text(function(K,re){return 0===re?K.parcatsViewModel.model.dimensions[K.model.dimensionInd].dimensionLabel:null}),Q.select(".catlabel").attr("text-anchor",function(K){return i(K)?"start":"end"}).attr("x",function(K){return i(K)?K.width+5:-5}).each(function(K){var re,ne;i(K)?(re=K.width+5,ne="start"):(re=-5,ne="end"),p.select(this).selectAll("tspan").attr("x",re).attr("text-anchor",ne)});var j=Q.selectAll("rect.bandrect").data(function(K){return K.bands},s),J=j.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(K){return K.color}).attr("fill-opacity",0);j.attr("fill",function(K){return K.color}).attr("width",function(K){return K.width}).attr("height",function(K){return K.height}).attr("y",function(K){return K.y}),_(J),j.each(function(){e.raiseToTop(this)}),j.exit().remove()}function Z(D,N,U){var Q,j=U[0],J=N.margin||{l:80,r:80,t:100,b:80},K=j.trace,re=K.domain,ne=N.width,se=N.height,oe=Math.floor(ne*(re.x[1]-re.x[0])),pe=Math.floor(se*(re.y[1]-re.y[0])),ce=re.x[0]*ne+J.l,ge=N.height-re.y[1]*N.height+J.t,xe=K.line.shape;Q="all"===K.hoverinfo?["count","probability"]:(K.hoverinfo||"").split("+");var we={trace:K,key:K.uid,model:j,x:ce,y:ge,width:oe,height:pe,hoveron:K.hoveron,hoverinfoItems:Q,arrangement:K.arrangement,bundlecolors:K.bundlecolors,sortpaths:K.sortpaths,labelfont:K.labelfont,categorylabelfont:K.tickfont,pathShape:xe,dragDimension:null,margin:J,paths:[],dimensions:[],graphDiv:D,traceSelection:null,pathSelection:null,dimensionSelection:null};return j.dimensions&&(X(we),G(we)),we}function W(D,N,U,Q,j){var J,K,re=[],ne=[];for(K=0;K<U.length-1;K++)J=m(U[K]+D[K],D[K+1]),re.push(J(j)),ne.push(J(1-j));var se="M "+D[0]+","+N[0];for(se+="l"+U[0]+",0 ",K=1;K<U.length;K++)se+="C"+re[K-1]+","+N[K-1]+" "+ne[K-1]+","+N[K]+" "+D[K]+","+N[K],se+="l"+U[K]+",0 ";for(se+="l0,"+Q+" ",se+="l -"+U[U.length-1]+",0 ",K=U.length-2;K>=0;K--)se+="C"+ne[K]+","+(N[K+1]+Q)+" "+re[K]+","+(N[K]+Q)+" "+(D[K]+U[K])+","+(N[K]+Q),se+="l-"+U[K]+",0 ";return se+"Z"}function G(D){var N=D.dimensions,U=D.model,Q=N.map(function(Ze){return Ze.categories.map(function(Ye){return Ye.y})}),j=D.model.dimensions.map(function(Ze){return Ze.categories.map(function(Ye){return Ye.displayInd})}),J=D.model.dimensions.map(function(Ze){return Ze.displayInd}),K=D.dimensions.map(function(Ze){return Ze.model.dimensionInd}),re=N.map(function(Ze){return Ze.x}),ne=N.map(function(Ze){return Ze.width}),se=[];for(var oe in U.paths)U.paths.hasOwnProperty(oe)&&se.push(U.paths[oe]);function pe(Ze){var Ye=Ze.categoryInds.map(function(tt,st){return j[st][tt]});return K.map(function(tt){return Ye[tt]})}se.sort(function(Ze,Ye){var tt=pe(Ze),st=pe(Ye);return"backward"===D.sortpaths&&(tt.reverse(),st.reverse()),tt.push(Ze.valueInds[0]),st.push(Ye.valueInds[0]),D.bundlecolors&&(tt.unshift(Ze.rawColor),st.unshift(Ye.rawColor)),tt<st?-1:tt>st?1:0});for(var ce=new Array(se.length),ge=N[0].model.count,xe=N[0].categories.map(function(Ze){return Ze.height}).reduce(function(Ze,Ye){return Ze+Ye}),we=0;we<se.length;we++){var be,Se=se[we];be=ge>0?xe*(Se.count/ge):0;for(var fe,me=new Array(Q.length),Te=0;Te<Se.categoryInds.length;Te++){var Me=j[Te][Se.categoryInds[Te]],Ie=J[Te];me[Ie]=Q[Ie][Me],Q[Ie][Me]+=be;var ze=D.dimensions[Ie].categories[Me],Ve=ze.bands.length,Je=ze.bands[Ve-1];if(void 0===Je||Se.rawColor!==Je.rawColor){var De=void 0===Je?0:Je.y+Je.height;ze.bands.push({key:De,color:Se.color,rawColor:Se.rawColor,height:be,width:ze.width,count:Se.count,y:De,categoryViewModel:ze,parcatsViewModel:D})}else{var Be=ze.bands[Ve-1];Be.height+=be,Be.count+=Se.count}}fe=W(re,me,ne,be,"hspline"===D.pathShape?.5:0),ce[we]={key:Se.valueInds[0],model:Se,height:be,leftXs:re,topYs:me,dimWidths:ne,svgD:fe,parcatsViewModel:D}}D.paths=ce}function X(D){var N=D.model.dimensions.map(function(K){return{displayInd:K.displayInd,dimensionInd:K.dimensionInd}});N.sort(function(K,re){return K.displayInd-re.displayInd});var U=[];for(var Q in N)U.push(te(D,D.model.dimensions[N[Q].dimensionInd]));D.dimensions=U}function te(D,N){var U,Q=D.model.dimensions.length;U=40+(Q>1?(D.width-80-16)/(Q-1):0)*N.displayInd;var J,K,re,se,oe=[],pe=D.model.maxCats,ce=N.categories.length,ge=N.count,xe=D.height-8*(pe-1),we=8*(pe-ce)/2,be=N.categories.map(function(Se){return{displayInd:Se.displayInd,categoryInd:Se.categoryInd}});for(be.sort(function(Se,fe){return Se.displayInd-fe.displayInd}),se=0;se<ce;se++)re={key:(K=N.categories[be[se].categoryInd]).valueInds[0],model:K,width:16,height:J=ge>0?K.count/ge*xe:0,y:null!==K.dragY?K.dragY:we,bands:[],parcatsViewModel:D},we=we+J+8,oe.push(re);return{key:N.dimensionInd,x:null!==N.dragX?N.dragX:U,y:0,width:16,model:N,categories:oe,parcatsViewModel:D,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}$.exports=function(D,N,U,Q){u(U,D,Q,N)}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],886:[function(y,$,ee){"use strict";var p=y("./parcats");$.exports=function(m,b,v,e){var n=m._fullLayout,a=n._size;p(m,n._paper,b,{width:a.w,height:a.h,margin:{t:a.t,r:a.r,b:a.b,l:a.l}},v,e)}},{"./parcats":885}],887:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/attributes"),m=y("../../plots/cartesian/layout_attributes"),b=y("../../plots/font_attributes"),v=y("../../plots/domain").attributes,e=y("../../lib/extend").extendFlat,n=y("../../plot_api/plot_template").templatedArray;$.exports={domain:v({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:b({editType:"plot"}),tickfont:b({editType:"plot"}),rangefont:b({editType:"plot"}),dimensions:n("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},m.tickvals,{editType:"plot"}),ticktext:e({},m.ticktext,{editType:"plot"}),tickformat:e({},m.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},p("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],888:[function(y,$,ee){"use strict";var p=y("./constants"),m=y("@plotly/d3"),b=y("../../lib/gup").keyFun,v=y("../../lib/gup").repeat,e=y("../../lib").sorterAsc,n=y("../../lib").strTranslate,t=p.bar.snapRatio;function a(M,O){return M*(1-t)+O*t}var r=p.bar.snapClose;function u(M,O){return M*(1-r)+O*r}function s(M,O,P,S){if(function(te,D){for(var N=0;N<D.length;N++)if(te>=D[N][0]&&te<=D[N][1])return!0;return!1}(P,S))return P;var E=M?-1:1,R=0,B=O.length-1;if(E<0){var H=R;R=B,B=H}for(var V=O[R],Z=V,W=R;E*W<E*B;W+=E){var G=W+E,X=O[G];if(E*P<E*u(V,X))return a(V,Z);if(E*P<E*X||G===B)return a(X,V);Z=V,V=X}}function i(M){M.attr("x",-p.bar.captureWidth/2).attr("width",p.bar.captureWidth)}function l(M){M.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function c(M){if(!M.brush.filterSpecified)return"0,"+M.height;for(var O,P,S,E=f(M.brush.filter.getConsolidated(),M.height),R=[0],B=E.length?E[0][0]:null,H=0;H<E.length;H++)P=(O=E[H])[1]-O[0],R.push(B),R.push(P),(S=H+1)<E.length&&(B=E[S][0]-O[1]);return R.push(M.height),R}function f(M,O){return M.map(function(P){return P.map(function(S){return Math.max(0,S*O)}).sort(e)})}function g(){m.select(document.body).style("cursor",null)}function h(M){M.attr("stroke-dasharray",c)}function o(M,O){var P=m.select(M).selectAll(".highlight, .highlight-shadow");h(O?P.transition().duration(p.bar.snapDuration).each("end",O):P)}function x(M,O){var P,S=M.brush,E=NaN,R={};if(S.filterSpecified){var B=M.height,H=S.filter.getConsolidated(),V=f(H,B),Z=NaN,W=NaN,G=NaN;for(P=0;P<=V.length;P++){var X=V[P];if(X&&X[0]<=O&&O<=X[1]){Z=P;break}if(W=P?P-1:NaN,X&&X[0]>O){G=P;break}}if(E=Z,isNaN(E)&&(E=isNaN(W)||isNaN(G)?isNaN(W)?G:W:O-V[W][1]<V[G][0]-O?W:G),!isNaN(E)){var te=V[E],D=function(j,J){var K=p.bar.handleHeight;if(!(J>j[1]+K||J<j[0]-K))return J>=.9*j[1]+.1*j[0]?"n":J<=.9*j[0]+.1*j[1]?"s":"ns"}(te,O);D&&(R.interval=H[E],R.intervalPix=te,R.region=D)}}if(M.ordinal&&!R.region){var N=M.unitTickvals,U=M.unitToPaddedPx.invert(O);for(P=0;P<N.length;P++){var Q=[.25*N[Math.max(P-1,0)]+.75*N[P],.25*N[Math.min(P+1,N.length-1)]+.75*N[P]];if(U>=Q[0]&&U<=Q[1]){R.clickableOrdinalRange=Q;break}}}return R}function d(M,O){m.event.sourceEvent.stopPropagation();var P=O.height-m.mouse(M)[1]-2*p.verticalPadding,S=O.brush.svgBrush;S.wasDragged=!0,S._dragging=!0,S.newExtent=S.grabbingBar?[P-S.grabPoint,P+S.barLength-S.grabPoint].map(O.unitToPaddedPx.invert):[S.startExtent,O.unitToPaddedPx.invert(P)].sort(e),O.brush.filterSpecified=!0,S.extent=S.stayingIntervals.concat([S.newExtent]),S.brushCallback(O),o(M.parentNode)}function w(M,O){var P=x(O,O.height-m.mouse(M)[1]-2*p.verticalPadding),S="crosshair";P.clickableOrdinalRange?S="pointer":P.region&&(S=P.region+"-resize"),m.select(document.body).style("cursor",S)}function _(M){M.on("mousemove",function(O){m.event.preventDefault(),O.parent.inBrushDrag||w(this,O)}).on("mouseleave",function(O){O.parent.inBrushDrag||g()}).call(m.behavior.drag().on("dragstart",function(O){!function(P,S){m.event.sourceEvent.stopPropagation();var E=S.height-m.mouse(P)[1]-2*p.verticalPadding,R=S.unitToPaddedPx.invert(E),B=S.brush,H=x(S,E),V=H.interval,Z=B.svgBrush;if(Z.wasDragged=!1,Z.grabbingBar="ns"===H.region,Z.grabbingBar){var W=V.map(S.unitToPaddedPx);Z.grabPoint=E-W[0]-p.verticalPadding,Z.barLength=W[1]-W[0]}Z.clickableOrdinalRange=H.clickableOrdinalRange,Z.stayingIntervals=S.multiselect&&B.filterSpecified?B.filter.getConsolidated():[],V&&(Z.stayingIntervals=Z.stayingIntervals.filter(function(G){return G[0]!==V[0]&&G[1]!==V[1]})),Z.startExtent=H.region?V["s"===H.region?1:0]:R,S.parent.inBrushDrag=!0,Z.brushStartCallback()}(this,O)}).on("drag",function(O){d(this,O)}).on("dragend",function(O){!function(P,S){var E=S.brush,R=E.filter,B=E.svgBrush;B._dragging||(w(P,S),d(P,S),S.brush.svgBrush.wasDragged=!1),B._dragging=!1,m.event.sourceEvent.stopPropagation();var H=B.grabbingBar;if(B.grabbingBar=!1,B.grabLocation=void 0,S.parent.inBrushDrag=!1,g(),!B.wasDragged)return B.wasDragged=void 0,B.clickableOrdinalRange?E.filterSpecified&&S.multiselect?B.extent.push(B.clickableOrdinalRange):(B.extent=[B.clickableOrdinalRange],E.filterSpecified=!0):H?(B.extent=B.stayingIntervals,0===B.extent.length&&k(E)):k(E),B.brushCallback(S),o(P.parentNode),void B.brushEndCallback(E.filterSpecified?R.getConsolidated():[]);var V=function(){R.set(R.getConsolidated())};if(S.ordinal){var Z=S.unitTickvals;Z[Z.length-1]<Z[0]&&Z.reverse(),B.newExtent=[s(0,Z,B.newExtent[0],B.stayingIntervals),s(1,Z,B.newExtent[1],B.stayingIntervals)];var W=B.newExtent[1]>B.newExtent[0];B.extent=B.stayingIntervals.concat(W?[B.newExtent]:[]),B.extent.length||k(E),B.brushCallback(S),W?o(P.parentNode,V):(V(),o(P.parentNode))}else V();B.brushEndCallback(E.filterSpecified?R.getConsolidated():[])}(this,O)}))}function T(M,O){return M[0]-O[0]}function k(M){M.filterSpecified=!1,M.svgBrush.extent=[[-1/0,1/0]]}function L(M){for(var O,P=M.slice(),S=[],E=P.shift();E;){for(O=E.slice();(E=P.shift())&&E[0]<=O[1];)O[1]=Math.max(O[1],E[1]);S.push(O)}return 1===S.length&&S[0][0]>S[0][1]&&(S=[]),S}$.exports={makeBrush:function(M,O,P,S,E,R){var B,V,Z,W,H=(W=[],{set:function(G){1===(W=G.map(function(X){return X.slice().sort(e)}).sort(T)).length&&W[0][0]===-1/0&&W[0][1]===1/0&&(W=[[0,-1]]),V=L(W),Z=W.reduce(function(X,te){return[Math.min(X[0],te[0]),Math.max(X[1],te[1])]},[1/0,-1/0])},get:function(){return W.slice()},getConsolidated:function(){return V},getBounds:function(){return Z}});return H.set(P),{filter:H,filterSpecified:O,svgBrush:{extent:[],brushStartCallback:S,brushCallback:(B=E,function(V){var G,Z=V.brush,W=(G=Z,G.svgBrush.extent.map(function(X){return X.slice()})).slice();Z.filter.set(W),B()}),brushEndCallback:R}}},ensureAxisBrush:function(M,O){var P=M.selectAll("."+p.cn.axisBrush).data(v,b);P.enter().append("g").classed(p.cn.axisBrush,!0),function(S,E){var R=S.selectAll(".background").data(v);R.enter().append("rect").classed("background",!0).call(i).call(l).style("pointer-events","auto").attr("transform",n(0,p.verticalPadding)),R.call(_).attr("height",function(V){return V.height-p.verticalPadding});var B=S.selectAll(".highlight-shadow").data(v);B.enter().append("line").classed("highlight-shadow",!0).attr("x",-p.bar.width/2).attr("stroke-width",p.bar.width+p.bar.strokeWidth).attr("stroke",E).attr("opacity",p.bar.strokeOpacity).attr("stroke-linecap","butt"),B.attr("y1",function(V){return V.height}).call(h);var H=S.selectAll(".highlight").data(v);H.enter().append("line").classed("highlight",!0).attr("x",-p.bar.width/2).attr("stroke-width",p.bar.width-p.bar.strokeWidth).attr("stroke",p.bar.fillColor).attr("opacity",p.bar.fillOpacity).attr("stroke-linecap","butt"),H.attr("y1",function(V){return V.height}).call(h)}(P,O)},cleanRanges:function(M,O){if(Array.isArray(M[0])?(M=M.map(function(S){return S.sort(e)}),M=O.multiselect?L(M.sort(T)):[M[0]]):M=[M.sort(e)],O.tickvals){var P=O.tickvals.slice().sort(e);if(!(M=M.map(function(S){var E=[s(0,P,S[0],[]),s(1,P,S[1],[])];if(E[1]>E[0])return E}).filter(function(S){return S})).length)return}return M.length>1?M:M[0]}}},{"../../lib":503,"../../lib/gup":500,"./constants":891,"@plotly/d3":58}],889:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../plots/get_data").getModuleCalcData,b=y("./plot"),v=y("../../constants/xmlns_namespaces");ee.name="parcoords",ee.plot=function(e){var n=m(e.calcdata,"parcoords")[0];n.length&&b(e,n)},ee.clean=function(e,n,t,a){var r=a._has&&a._has("parcoords"),u=n._has&&n._has("parcoords");r&&!u&&(a._paperdiv.selectAll(".parcoords").remove(),a._glimages.selectAll("*").remove())},ee.toSVG=function(e){var n=e._fullLayout._glimages,t=p.select(e).selectAll(".svg-container");t.filter(function(a,r){return r===t.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var a=this.toDataURL("image/png");n.append("svg:image").attr({xmlns:v.svg,"xlink:href":a,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){p.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":898,"@plotly/d3":58}],890:[function(y,$,ee){"use strict";var p=y("../../lib").isArrayOrTypedArray,m=y("../../components/colorscale"),b=y("../../lib/gup").wrap;$.exports=function(v,e){var n,t;return m.hasColorscale(e,"line")&&p(e.line.color)?(n=e.line.color,t=m.extractOpts(e.line).colorscale,m.calc(v,e,{vals:n,containerStr:"line",cLetter:"c"})):(n=function(a){for(var r=new Array(a),u=0;u<a;u++)r[u]=.5;return r}(e._length),t=[[0,e.line.color],[1,e.line.color]]),b({lineColor:n,cscale:t})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],891:[function(y,$,ee){"use strict";$.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],892:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/colorscale/helpers").hasColorscale,b=y("../../components/colorscale/defaults"),v=y("../../plots/domain").defaults,e=y("../../plots/array_container_defaults"),n=y("../../plots/cartesian/axes"),t=y("./attributes"),a=y("./axisbrush"),r=y("./constants").maxDimensionCount,u=y("./merge_length");function s(i,l,c,f){function g(w,_){return p.coerce(i,l,t.dimensions,w,_)}var h=g("values"),o=g("visible");if(h&&h.length||(o=l.visible=!1),o){g("label"),g("tickvals"),g("ticktext"),g("tickformat");var x=g("range");l._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:x},n.setConvert(l._ax,f.layout),g("multiselect");var d=g("constraintrange");d&&(l.constraintrange=a.cleanRanges(d,l))}}$.exports=function(i,l,c,f){function g(w,_){return p.coerce(i,l,t,w,_)}var h=i.dimensions;Array.isArray(h)&&h.length>r&&(p.log("parcoords traces support up to "+r+" dimensions at the moment"),h.splice(r));var o=e(i,l,{name:"dimensions",layout:f,handleItemDefaults:s}),x=function(w,_,T,k,L){var M=L("line.color",T);if(m(w,"line")&&p.isArrayOrTypedArray(M)){if(M.length)return L("line.colorscale"),b(w,_,k,L,{prefix:"line.",cLetter:"c"}),M.length;_.line.color=T}return 1/0}(i,l,c,f,g);v(l,f,g),Array.isArray(o)&&o.length||(l.visible=!1),u(l,o,"values",x);var d={family:f.font.family,size:Math.round(f.font.size/1.2),color:f.font.color};p.coerceFont(g,"labelfont",d),p.coerceFont(g,"tickfont",d),p.coerceFont(g,"rangefont",d),g("labelangle"),g("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":887,"./axisbrush":888,"./constants":891,"./merge_length":896}],893:[function(y,$,ee){"use strict";var p=y("../../lib").isTypedArray;ee.convertTypedArray=function(m){return p(m)?Array.prototype.slice.call(m):m},ee.isOrdinal=function(m){return!!m.tickvals},ee.isVisible=function(m){return m.visible||!("visible"in m)}},{"../../lib":503}],894:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:y("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":887,"./base_plot":889,"./calc":890,"./defaults":892,"./plot":898}],895:[function(y,$,ee){"use strict";var p=y("glslify"),m=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),b=p(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),v=y("./constants").maxDimensionCount,e=y("../../lib"),n=new Uint8Array(4),t=new Uint8Array(4),a={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function r(o,x,d,w,_){var T=o._gl;T.enable(T.SCISSOR_TEST),T.scissor(x,d,w,_),o.clear({color:[0,0,0,0],depth:1})}function u(o,x,d,w,_,T){var k=T.key;d.drawCompleted||(o.read({x:0,y:0,width:1,height:1,data:n}),d.drawCompleted=!0),function L(M){var O=Math.min(w,_-M*w);0===M&&(window.cancelAnimationFrame(d.currentRafs[k]),delete d.currentRafs[k],r(o,T.scissorX,T.scissorY,T.scissorWidth,T.viewBoxSize[1])),d.clearOnly||(T.count=2*O,T.offset=2*M*w,x(T),M*w+O<_&&(d.currentRafs[k]=window.requestAnimationFrame(function(){L(M+1)})),d.drawCompleted=!1)}(0)}function s(o,x){for(var d=new Array(256),w=0;w<256;w++)d[w]=o(w/255).concat(x);return d}function i(o,x){return(o>>>8*x)%256/255}function l(o,x,d){for(var w=new Array(8*x),_=0,T=0;T<x;T++)for(var k=0;k<2;k++)for(var L=0;L<4;L++){var M=4*o+L,O=d[64*T+M];63===M&&0===k&&(O*=-1),w[_++]=O}return w}function c(o){var x="0"+o;return x.substr(x.length-2)}function f(o){return o<v?"p"+c(o+1)+"_"+c(o+4):"colors"}function g(o,x,d,w,_,T,k,L,M,O,P,S,E,R){for(var B=[[],[]],H=0;H<64;H++)B[0][H]=H===_?1:0,B[1][H]=H===T?1:0;var V=o.lines.canvasOverdrag*R,Z=o.domain,W=o.canvasWidth*R,G=o.canvasHeight*R,X=o.pad.l*R,te=o.pad.b*R,D=o.layoutHeight*R,N=o.layoutWidth*R,U=o.deselectedLines.color;return e.extendFlat({key:P,resolution:[W,G],viewBoxPos:[(k*=R)+V,L*=R],viewBoxSize:[M*=R,O*=R],i0:_,i1:T,dim0A:B[0].slice(0,16),dim0B:B[0].slice(16,32),dim0C:B[0].slice(32,48),dim0D:B[0].slice(48,64),dim1A:B[1].slice(0,16),dim1B:B[1].slice(16,32),dim1C:B[1].slice(32,48),dim1D:B[1].slice(48,64),drwLayer:S,contextColor:[U[0]/255,U[1]/255,U[2]/255,U[3]<1?U[3]:Math.max(1/255,Math.pow(1/o.lines.color.length,1/3))],scissorX:(w===x?0:k+V)+(X-V)+N*Z.x[0],scissorWidth:(w===d?W-k+V:M+.5)+(w===x?k+V:0),scissorY:L+te+D*Z.y[0],scissorHeight:O,viewportX:X-V+N*Z.x[0],viewportY:te+D*Z.y[0],viewportWidth:W,viewportHeight:G},E)}function h(o){var x=Math.max(0,Math.floor(2047*o[0]),0),d=Math.min(2047,Math.ceil(2047*o[1]),2047);return[Math.min(x,d),Math.max(x,d)]}$.exports=function(o,x){var d,_,T,k,L=x.context,M=x.pick,O=x.regl,P=O._gl,S=P.getParameter(P.ALIASED_LINE_WIDTH_RANGE),E=Math.max(S[0],Math.min(S[1],x.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},B=function(G){for(var X={},te=0;te<=v;te+=4)X[f(te)]=G.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return X}(O),H=O.texture(a),V=[];W(x);var Z=O({profile:!1,blend:{enable:L,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!L,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:O.prop("scissorX"),y:O.prop("scissorY"),width:O.prop("scissorWidth"),height:O.prop("scissorHeight")}},viewport:{x:O.prop("viewportX"),y:O.prop("viewportY"),width:O.prop("viewportWidth"),height:O.prop("viewportHeight")},dither:!1,vert:m,frag:b,primitive:"lines",lineWidth:E,attributes:B,uniforms:{resolution:O.prop("resolution"),viewBoxPos:O.prop("viewBoxPos"),viewBoxSize:O.prop("viewBoxSize"),dim0A:O.prop("dim0A"),dim1A:O.prop("dim1A"),dim0B:O.prop("dim0B"),dim1B:O.prop("dim1B"),dim0C:O.prop("dim0C"),dim1C:O.prop("dim1C"),dim0D:O.prop("dim0D"),dim1D:O.prop("dim1D"),loA:O.prop("loA"),hiA:O.prop("hiA"),loB:O.prop("loB"),hiB:O.prop("hiB"),loC:O.prop("loC"),hiC:O.prop("hiC"),loD:O.prop("loD"),hiD:O.prop("hiD"),palette:H,contextColor:O.prop("contextColor"),maskTexture:O.prop("maskTexture"),drwLayer:O.prop("drwLayer"),maskHeight:O.prop("maskHeight")},offset:O.prop("offset"),count:O.prop("count")});function W(G){d=G.model,_=G.viewModel.dimensions.slice(),T=_[0]?_[0].values.length:0;var X=d.lines,te=M?X.color.map(function(N,U){return U/X.color.length}):X.color,D=function(N,U,Q){for(var J=new Array(N*(v+4)),K=0,re=0;re<N;re++){for(var ne=0;ne<v;ne++)J[K++]=ne<U.length?U[ne].paddedUnitValues[re]:.5;J[K++]=i(re,2),J[K++]=i(re,1),J[K++]=i(re,0),J[K++]=Math.max(1e-6,Math.min(.999999,Q[re]))}return J}(T,_,te);(function(N,U,Q){for(var j=0;j<=v;j+=4)N[f(j)](l(j/4,U,Q))})(B,T,D),L||M||(H=O.texture(e.extendFlat({data:s(d.unitToColor,255)},a)))}return{render:function(G,X,te){var D,N,U,Q=G.length,j=1/0,J=-1/0;for(D=0;D<Q;D++)G[D].dim0.canvasX<j&&(j=G[D].dim0.canvasX,N=D),G[D].dim1.canvasX>J&&(J=G[D].dim1.canvasX,U=D);0===Q&&r(O,0,0,d.canvasWidth,d.canvasHeight);var K=function(be){var Se,fe,me,Te=[[],[]];for(me=0;me<64;me++){var _e=!be&&me<_.length?_[me].brush.filter.getBounds():[-1/0,1/0];Te[0][me]=_e[0],Te[1][me]=_e[1]}var Me=new Array(16384);for(Se=0;Se<16384;Se++)Me[Se]=255;if(!be)for(Se=0;Se<_.length;Se++){var Ie=Se%8,ze=(Se-Ie)/8,Ve=Math.pow(2,Ie),Je=_[Se].brush.filter.get();if(!(Je.length<2)){var De=h(Je[0])[1];for(fe=1;fe<Je.length;fe++){var Be=h(Je[fe]);for(me=De+1;me<Be[0];me++)Me[8*me+ze]&=~Ve;De=Math.max(De,Be[1])}}}var Ze={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Me};return k?k(Ze):k=O.texture(Ze),{maskTexture:k,maskHeight:2048,loA:Te[0].slice(0,16),loB:Te[0].slice(16,32),loC:Te[0].slice(32,48),loD:Te[0].slice(48,64),hiA:Te[1].slice(0,16),hiB:Te[1].slice(16,32),hiC:Te[1].slice(32,48),hiD:Te[1].slice(48,64)}}(L);for(D=0;D<Q;D++){var re=G[D],ne=re.dim0.crossfilterDimensionIndex,se=re.dim1.crossfilterDimensionIndex,oe=re.canvasX,pe=re.canvasY,ce=oe+re.panelSizeX,ge=re.plotGlPixelRatio;if(X||!V[ne]||V[ne][0]!==oe||V[ne][1]!==ce){V[ne]=[oe,ce];var xe=g(d,N,U,D,ne,se,oe,pe,re.panelSizeX,re.panelSizeY,re.dim0.crossfilterDimensionIndex,L?0:M?2:1,K,ge);R.clearOnly=te,u(O,Z,R,X?d.lines.blockLineCount:T,T,xe)}}},readPixel:function(G,X){return O.read({x:G,y:X,width:1,height:1,data:t}),t},readPixels:function(G,X,te,D){var N=new Uint8Array(4*te*D);return O.read({x:G,y:X,width:te,height:D,data:N}),N},destroy:function(){for(var G in o.style["pointer-events"]="none",H.destroy(),k&&k.destroy(),B)B[G].destroy()},update:W}}},{"../../lib":503,"./constants":891,glslify:227}],896:[function(y,$,ee){"use strict";$.exports=function(p,m,b,v){var e,n;for(v||(v=1/0),e=0;e<m.length;e++)(n=m[e]).visible&&(v=Math.min(v,n[b].length));for(v===1/0&&(v=0),p._length=v,e=0;e<m.length;e++)(n=m[e]).visible&&(n._length=v);return v}},{}],897:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=m.numberFormat,v=y("color-rgba"),e=y("../../plots/cartesian/axes"),n=m.strRotate,t=m.strTranslate,a=y("../../lib/svg_text_utils"),r=y("../../components/drawing"),u=y("../../components/colorscale"),s=y("../../lib/gup"),i=s.keyFun,l=s.repeat,c=s.unwrap,f=y("./helpers"),g=y("./constants"),h=y("./axisbrush"),o=y("./lines");function x(V,Z,W){return m.aggNums(V,null,Z,W)}function d(V,Z){return _(x(Math.min,V,Z),x(Math.max,V,Z))}function w(V){var Z=V.range;return Z?_(Z[0],Z[1]):d(V.values,V._length)}function _(V,Z){return!isNaN(V)&&isFinite(V)||(V=0),!isNaN(Z)&&isFinite(Z)||(Z=0),V===Z&&(0===V?(V-=1,Z+=1):(V*=.9,Z*=1.1)),[V,Z]}function T(V,Z,W,G,X){var te,D,N=w(W);return G?p.scale.ordinal().domain(G.map((te=b(W.tickformat),D=X,D?function(U,Q){var j=D[Q];return null==j?te(U):j}:te))).range(G.map(function(U){return V-Z+(U-N[0])/(N[1]-N[0])*(2*Z-V)})):p.scale.linear().domain(N).range([V-Z,Z])}function k(V){if(V.tickvals){var Z=w(V);return p.scale.ordinal().domain(V.tickvals).range(V.tickvals.map(function(W){return(W-Z[0])/(Z[1]-Z[0])}))}}function L(V){var Z=V.map(function(X){return X[0]}),W=V.map(function(X){var te=v(X[1]);return p.rgb("rgb("+te[0]+","+te[1]+","+te[2]+")")}),G="rgb".split("").map(function(X){return p.scale.linear().clamp(!0).domain(Z).range(W.map((te=X,function(D){return D[te]})));var te});return function(X){return G.map(function(te){return te(X)})}}function M(V){return V.dimensions.some(function(Z){return Z.brush.filterSpecified})}function O(V,Z,W){var G=c(Z),X=G.trace,te=f.convertTypedArray(G.lineColor),D=X.line,N={color:v(g.deselectedLineColor)},U=u.extractOpts(D),Q=U.reversescale?u.flipScale(G.cscale):G.cscale,j=X.domain,J=X.dimensions,K=V.width,re=X.labelangle,ne=X.labelside,se=X.labelfont,oe=X.tickfont,pe=X.rangefont,ce=m.extendDeepNoArrays({},D,{color:te.map(p.scale.linear().domain(w({values:te,range:[U.min,U.max],_length:X._length}))),blockLineCount:g.blockLineCount,canvasOverdrag:g.overdrag*g.canvasPixelRatio}),ge=Math.floor(K*(j.x[1]-j.x[0])),xe=Math.floor(V.height*(j.y[1]-j.y[0])),we=V.margin||{l:80,r:80,t:100,b:80},be=ge,Se=xe;return{key:W,colCount:J.filter(f.isVisible).length,dimensions:J,tickDistance:g.tickDistance,unitToColor:L(Q),lines:ce,deselectedLines:N,labelAngle:re,labelSide:ne,labelFont:se,tickFont:oe,rangeFont:pe,layoutWidth:K,layoutHeight:V.height,domain:j,translateX:j.x[0]*K,translateY:V.height-j.y[1]*V.height,pad:we,canvasWidth:be*g.canvasPixelRatio+2*ce.canvasOverdrag,canvasHeight:Se*g.canvasPixelRatio,width:be,height:Se,canvasPixelRatio:g.canvasPixelRatio}}function P(V,Z,W){var K,re,G=W.width,X=W.height,te=W.dimensions,D=W.canvasPixelRatio,N=function(K){return G*K/Math.max(1,W.colCount-1)},U=g.verticalPadding/X,Q=(K=X,re=g.verticalPadding,p.scale.linear().range([re,K-re])),j={key:W.key,xScale:N,model:W,inBrushDrag:!1},J={};return j.dimensions=te.filter(f.isVisible).map(function(K,re){var Me,Ie,ne=(Me=K,Ie=U,p.scale.linear().domain(w(Me)).range([Ie,1-Ie])),se=J[K.label];J[K.label]=(se||0)+1;var oe=K.label+(se?"__"+se:""),pe=K.constraintrange,ce=pe&&pe.length;ce&&!Array.isArray(pe[0])&&(pe=[pe]);var ge=ce?pe.map(function(Me){return Me.map(ne)}):[[-1/0,1/0]],xe=K.values;xe.length>K._length&&(xe=xe.slice(0,K._length));var we,be=K.tickvals;function Se(Me,Ie){return{val:Me,text:we[Ie]}}function fe(Me,Ie){return Me.val-Ie.val}if(Array.isArray(be)&&be.length){we=K.ticktext,Array.isArray(we)&&we.length?we.length>be.length?we=we.slice(0,be.length):be.length>we.length&&(be=be.slice(0,we.length)):we=be.map(b(K.tickformat));for(var me=1;me<be.length;me++)if(be[me]<be[me-1]){for(var Te=be.map(Se).sort(fe),_e=0;_e<be.length;_e++)be[_e]=Te[_e].val,we[_e]=Te[_e].text;break}}else be=void 0;return xe=f.convertTypedArray(xe),{key:oe,label:K.label,tickFormat:K.tickformat,tickvals:be,ticktext:we,ordinal:f.isOrdinal(K),multiselect:K.multiselect,xIndex:re,crossfilterDimensionIndex:re,visibleIndex:K._index,height:X,values:xe,paddedUnitValues:xe.map(ne),unitTickvals:be&&be.map(ne),xScale:N,x:N(re),canvasX:N(re)*D,unitToPaddedPx:Q,domainScale:T(X,g.verticalPadding,K,be,we),ordinalScale:k(K),parent:j,model:W,brush:h.makeBrush(V,ce,ge,function(){V.linePickActive(!1)},function(){var Me=j;Me.focusLayer&&Me.focusLayer.render(Me.panels,!0);var Ie=M(Me);!V.contextShown()&&Ie?(Me.contextLayer&&Me.contextLayer.render(Me.panels,!0),V.contextShown(!0)):V.contextShown()&&!Ie&&(Me.contextLayer&&Me.contextLayer.render(Me.panels,!0,!0),V.contextShown(!1))},function(Me){if(j.focusLayer.render(j.panels,!0),j.pickLayer&&j.pickLayer.render(j.panels,!0),V.linePickActive(!0),Z&&Z.filterChanged){var Ie=ne.invert,ze=Me.map(function(Ve){return Ve.map(Ie).sort(m.sorterAsc)}).sort(function(Ve,Je){return Ve[0]-Je[0]});Z.filterChanged(j.key,K._index,ze)}})}}),j}function S(V){V.classed(g.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function E(V,Z){var G=V*Math.PI/180;return{dir:"top"===Z?1:-1,dx:Math.sin(G),dy:Math.cos(G),degrees:V}}function R(V,Z,W){for(var G=Z.panels||(Z.panels=[]),X=V.data(),te=0;te<X.length-1;te++){var D=G[te]||(G[te]={}),N=X[te],U=X[te+1];D.dim0=N,D.dim1=U,D.canvasX=N.canvasX,D.panelSizeX=U.canvasX-N.canvasX,D.panelSizeY=Z.model.canvasHeight,D.y=0,D.canvasY=0,D.plotGlPixelRatio=W}}function B(V,Z){return e.tickText(V._ax,Z,!1).text}function H(V,Z){if(V.ordinal)return"";var W=V.domainScale.domain();return B(V.model.dimensions[V.visibleIndex],W[Z?W.length-1:0])}$.exports=function(V,Z,W,G){var X=V._fullLayout,te=X._toppaper,D=X._glcontainer,N=V._context.plotGlPixelRatio,U=V._fullLayout.paper_bgcolor;!function(_e){for(var Me=0;Me<_e.length;Me++)for(var Ie=0;Ie<_e[Me].length;Ie++)for(var ze=_e[Me][Ie].trace,Ve=ze.dimensions,Je=0;Je<Ve.length;Je++){var De=Ve[Je].values,Be=Ve[Je]._ax;Be&&(Be.range=Be.range?_(Be.range[0],Be.range[1]):d(De,ze._length),Be.dtick||(Be.dtick=.01*(Math.abs(Be.range[1]-Be.range[0])||1)),Be.tickformat=Ve[Je].tickformat,e.calcTicks(Be),Be.cleanRange())}}(Z);var Q,j,J=(Q=!0,j=!1,{linePickActive:function(_e){return arguments.length?Q=!!_e:Q},contextShown:function(_e){return arguments.length?j=!!_e:j}}),K=Z.filter(function(_e){return c(_e).trace.visible}).map(O.bind(0,W)).map(P.bind(0,J,G));D.each(function(_e,Me){return m.extendFlat(_e,K[Me])});var re=D.selectAll(".gl-canvas").each(function(_e){_e.viewModel=K[0],_e.viewModel.plotGlPixelRatio=N,_e.viewModel.paperColor=U,_e.model=_e.viewModel?_e.viewModel.model:null}),ne=null;re.filter(function(_e){return _e.pick}).style("pointer-events","auto").on("mousemove",function(_e){if(J.linePickActive()&&_e.lineLayer&&G&&G.hover){var Me=p.event,Ie=this.width,ze=this.height,Ve=p.mouse(this),Je=Ve[0],De=Ve[1];if(Je<0||De<0||Je>=Ie||De>=ze)return;var Be=_e.lineLayer.readPixel(Je,ze-1-De),Ze=0!==Be[3],Ye=Ze?Be[2]+256*(Be[1]+256*Be[0]):null,tt={x:Je,y:De,clientX:Me.clientX,clientY:Me.clientY,dataIndex:_e.model.key,curveNumber:Ye};Ye!==ne&&(Ze?G.hover(tt):G.unhover&&G.unhover(tt),ne=Ye)}}),re.style("opacity",function(_e){return _e.pick?0:1}),te.style("background","rgba(255, 255, 255, 0)");var se=te.selectAll("."+g.cn.parcoords).data(K,i);se.exit().remove(),se.enter().append("g").classed(g.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),se.attr("transform",function(_e){return t(_e.model.translateX,_e.model.translateY)});var oe=se.selectAll("."+g.cn.parcoordsControlView).data(l,i);oe.enter().append("g").classed(g.cn.parcoordsControlView,!0),oe.attr("transform",function(_e){return t(_e.model.pad.l,_e.model.pad.t)});var pe=oe.selectAll("."+g.cn.yAxis).data(function(_e){return _e.dimensions},i);pe.enter().append("g").classed(g.cn.yAxis,!0),oe.each(function(_e){R(pe,_e,N)}),re.each(function(_e){_e.viewModel&&(!_e.lineLayer||G?_e.lineLayer=o(this,_e):_e.lineLayer.update(_e),(_e.key||0===_e.key)&&(_e.viewModel[_e.key]=_e.lineLayer),_e.lineLayer.render(_e.viewModel.panels,!_e.context||G))}),pe.attr("transform",function(_e){return t(_e.xScale(_e.xIndex),0)}),pe.call(p.behavior.drag().origin(function(_e){return _e}).on("drag",function(_e){var Me=_e.parent;J.linePickActive(!1),_e.x=Math.max(-g.overdrag,Math.min(_e.model.width+g.overdrag,p.event.x)),_e.canvasX=_e.x*_e.model.canvasPixelRatio,pe.sort(function(Ie,ze){return Ie.x-ze.x}).each(function(Ie,ze){Ie.xIndex=ze,Ie.x=_e===Ie?Ie.x:Ie.xScale(Ie.xIndex),Ie.canvasX=Ie.x*Ie.model.canvasPixelRatio}),R(pe,Me,N),pe.filter(function(Ie){return 0!==Math.abs(_e.xIndex-Ie.xIndex)}).attr("transform",function(Ie){return t(Ie.xScale(Ie.xIndex),0)}),p.select(this).attr("transform",t(_e.x,0)),pe.each(function(Ie,ze,Ve){Ve===_e.parent.key&&(Me.dimensions[ze]=Ie)}),Me.contextLayer&&Me.contextLayer.render(Me.panels,!1,!M(Me)),Me.focusLayer.render&&Me.focusLayer.render(Me.panels)}).on("dragend",function(_e){var Me=_e.parent;_e.x=_e.xScale(_e.xIndex),_e.canvasX=_e.x*_e.model.canvasPixelRatio,R(pe,Me,N),p.select(this).attr("transform",function(Ie){return t(Ie.x,0)}),Me.contextLayer&&Me.contextLayer.render(Me.panels,!1,!M(Me)),Me.focusLayer&&Me.focusLayer.render(Me.panels),Me.pickLayer&&Me.pickLayer.render(Me.panels,!0),J.linePickActive(!0),G&&G.axesMoved&&G.axesMoved(Me.key,Me.dimensions.map(function(Ie){return Ie.crossfilterDimensionIndex}))})),pe.exit().remove();var ce=pe.selectAll("."+g.cn.axisOverlays).data(l,i);ce.enter().append("g").classed(g.cn.axisOverlays,!0),ce.selectAll("."+g.cn.axis).remove();var ge=ce.selectAll("."+g.cn.axis).data(l,i);ge.enter().append("g").classed(g.cn.axis,!0),ge.each(function(_e){var Me=_e.model.height/_e.model.tickDistance,Ie=_e.domainScale,ze=Ie.domain();p.select(this).call(p.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Me,_e.tickFormat).tickValues(_e.ordinal?ze:null).tickFormat(function(Ve){return f.isOrdinal(_e)?Ve:B(_e.model.dimensions[_e.visibleIndex],Ve)}).scale(Ie)),r.font(ge.selectAll("text"),_e.model.tickFont)}),ge.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),ge.selectAll("text").style("text-shadow",a.makeTextShadow(U)).style("cursor","default");var xe=ce.selectAll("."+g.cn.axisHeading).data(l,i);xe.enter().append("g").classed(g.cn.axisHeading,!0);var we=xe.selectAll("."+g.cn.axisTitle).data(l,i);we.enter().append("text").classed(g.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),we.text(function(_e){return _e.label}).each(function(_e){var Me=p.select(this);r.font(Me,_e.model.labelFont),a.convertToTspans(Me,V)}).attr("transform",function(_e){var Me=E(_e.model.labelAngle,_e.model.labelSide),Ie=g.axisTitleOffset;return(Me.dir>0?"":t(0,2*Ie+_e.model.height))+n(Me.degrees)+t(-Ie*Me.dx,-Ie*Me.dy)}).attr("text-anchor",function(_e){var Me=E(_e.model.labelAngle,_e.model.labelSide);return 2*Math.abs(Me.dx)>Math.abs(Me.dy)?Me.dir*Me.dx<0?"start":"end":"middle"});var be=ce.selectAll("."+g.cn.axisExtent).data(l,i);be.enter().append("g").classed(g.cn.axisExtent,!0);var Se=be.selectAll("."+g.cn.axisExtentTop).data(l,i);Se.enter().append("g").classed(g.cn.axisExtentTop,!0),Se.attr("transform",t(0,-g.axisExtentOffset));var fe=Se.selectAll("."+g.cn.axisExtentTopText).data(l,i);fe.enter().append("text").classed(g.cn.axisExtentTopText,!0).call(S),fe.text(function(_e){return H(_e,!0)}).each(function(_e){r.font(p.select(this),_e.model.rangeFont)});var me=be.selectAll("."+g.cn.axisExtentBottom).data(l,i);me.enter().append("g").classed(g.cn.axisExtentBottom,!0),me.attr("transform",function(_e){return t(0,_e.model.height+g.axisExtentOffset)});var Te=me.selectAll("."+g.cn.axisExtentBottomText).data(l,i);Te.enter().append("text").classed(g.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(S),Te.text(function(_e){return H(_e,!1)}).each(function(_e){r.font(p.select(this),_e.model.rangeFont)}),h.ensureAxisBrush(ce,U)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":888,"./constants":891,"./helpers":893,"./lines":895,"@plotly/d3":58,"color-rgba":91}],898:[function(y,$,ee){"use strict";var p=y("./parcoords"),m=y("../../lib/prepare_regl"),b=y("./helpers").isVisible;function v(e,n,t){var a=n.indexOf(t),r=e.indexOf(a);return-1===r&&(r+=n.length),r}$.exports=function(e,n){var t=e._fullLayout;if(m(e)){var a={},r={},u={},s={},i=t._size;n.forEach(function(l,c){var f=l[0].trace;u[c]=f.index;var g=s[c]=f._fullInput.index;a[c]=e.data[g].dimensions,r[c]=e.data[g].dimensions.slice()}),p(e,n,{width:i.w,height:i.h,margin:{t:i.t,r:i.r,b:i.b,l:i.l}},{filterChanged:function(l,c,f){var g=r[l][c],h=f.map(function(T){return T.slice()}),o="dimensions["+c+"].constraintrange",x=t._tracePreGUI[e._fullData[u[l]]._fullInput.uid];void 0===x[o]&&(x[o]=g.constraintrange||null);var w=e._fullData[u[l]].dimensions[c];h.length?(1===h.length&&(h=h[0]),g.constraintrange=h,w.constraintrange=h.slice(),h=[h]):(delete g.constraintrange,delete w.constraintrange,h=null);var _={};_[o]=h,e.emit("plotly_restyle",[_,[s[l]]])},hover:function(l){e.emit("plotly_hover",l)},unhover:function(l){e.emit("plotly_unhover",l)},axesMoved:function(l,c){var g,h,f=(g=c,h=r[l].filter(b),function(o,x){return v(g,h,o)-v(g,h,x)});a[l].sort(f),r[l].filter(function(g){return!b(g)}).sort(function(g){return r[l].indexOf(g)}).forEach(function(g){a[l].splice(a[l].indexOf(g),1),a[l].splice(r[l].indexOf(g),0,g)}),e.emit("plotly_restyle",[{dimensions:[a[l]]},[s[l]]])}})}}},{"../../lib/prepare_regl":516,"./helpers":893,"./parcoords":897}],899:[function(y,$,ee){"use strict";var p=y("../../plots/attributes"),m=y("../../plots/domain").attributes,b=y("../../plots/font_attributes"),v=y("../../components/color/attributes"),e=y("../../plots/template_attributes").hovertemplateAttrs,n=y("../../plots/template_attributes").texttemplateAttrs,t=y("../../lib/extend").extendFlat,a=b({editType:"plot",arrayOk:!0,colorEditType:"plot"});$.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:v.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:t({},p.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:n({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:t({},a,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:t({},a,{}),outsidetextfont:t({},a,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:t({},a,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:m({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:t({},a,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],900:[function(y,$,ee){"use strict";var p=y("../../plots/plots");ee.name="pie",ee.plot=function(m,b,v,e){p.plotBasePlot(ee.name,m,b,v,e)},ee.clean=function(m,b,v,e){p.cleanBasePlot(ee.name,m,b,v,e)}},{"../../plots/plots":619}],901:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("tinycolor2"),b=y("../../components/color"),v={};function e(t){return function(a,r){return!!a&&!!(a=m(a)).isValid()&&(a=b.addOpacity(a,a.getAlpha()),t[r]||(t[r]=a),a)}}function n(t,a){var r,u=JSON.stringify(t),s=a[u];if(!s){for(s=t.slice(),r=0;r<t.length;r++)s.push(m(t[r]).lighten(20).toHexString());for(r=0;r<t.length;r++)s.push(m(t[r]).darken(20).toHexString());a[u]=s}return s}$.exports={calc:function(t,a){var r,u,s=[],i=t._fullLayout,l=i.hiddenlabels||[],c=a.labels,f=a.marker.colors||[],g=a.values,h=a._length,o=a._hasValues&&h;if(a.dlabel)for(c=new Array(h),r=0;r<h;r++)c[r]=String(a.label0+r*a.dlabel);var x={},d=e(i["_"+a.type+"colormap"]),w=0,_=!1;for(r=0;r<h;r++){var T,k,L;if(o){if(!p(T=g[r])||(T=+T)<0)continue}else T=1;void 0!==(k=c[r])&&""!==k||(k=r);var M=x[k=String(k)];void 0===M?(x[k]=s.length,(L=-1!==l.indexOf(k))||(w+=T),s.push({v:T,label:k,color:d(f[r],k),i:r,pts:[r],hidden:L})):(_=!0,(u=s[M]).v+=T,u.pts.push(r),u.hidden||(w+=T),!1===u.color&&f[r]&&(u.color=d(f[r],k)))}return("funnelarea"===a.type?_:a.sort)&&s.sort(function(O,P){return P.v-O.v}),s[0]&&(s[0].vTotal=w),s},crossTraceCalc:function(t,a){var r=(a||{}).type;r||(r="pie");var u=t._fullLayout,s=t.calcdata,i=u[r+"colorway"],l=u["_"+r+"colormap"];u["extend"+r+"colors"]&&(i=n(i,v));for(var c=0,f=0;f<s.length;f++){var g=s[f];if(g[0].trace.type===r)for(var h=0;h<g.length;h++){var o=g[h];!1===o.color&&(l[o.label]?o.color=l[o.label]:(l[o.label]=o.color=i[c%i.length],c++))}}},makePullColorFn:e,generateExtendedColors:n}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],902:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib"),b=y("./attributes"),v=y("../../plots/domain").defaults,e=y("../bar/defaults").handleText;function n(t,a){var r=Array.isArray(t),u=m.isArrayOrTypedArray(a),s=Math.min(r?t.length:1/0,u?a.length:1/0);if(isFinite(s)||(s=0),s&&u){for(var i,l=0;l<s;l++){var c=a[l];if(p(c)&&c>0){i=!0;break}}i||(s=0)}return{hasLabels:r,hasValues:u,len:s}}$.exports={handleLabelsAndValues:n,supplyDefaults:function(t,a,r,u){function s(d,w){return m.coerce(t,a,b,d,w)}var i=n(s("labels"),s("values")),l=i.len;if(a._hasLabels=i.hasLabels,a._hasValues=i.hasValues,!a._hasLabels&&a._hasValues&&(s("label0"),s("dlabel")),l){a._length=l,s("marker.line.width")&&s("marker.line.color"),s("marker.colors"),s("scalegroup");var c,f=s("text"),g=s("texttemplate");if(g||(c=s("textinfo",Array.isArray(f)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),g||c&&"none"!==c){var h=s("textposition");e(t,a,u,s,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(h)||"auto"===h||"outside"===h)&&s("automargin"),("inside"===h||"auto"===h||Array.isArray(h))&&s("insidetextorientation")}v(a,u,s);var o=s("hole");if(s("title.text")){var x=s("title.position",o?"middle center":"top center");o||"middle center"!==x||(a.title.position="top center"),m.coerceFont(s,"title.font",u.font)}s("sort"),s("direction"),s("rotation"),s("pull")}else a.visible=!1}}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":899,"fast-isnumeric":190}],903:[function(y,$,ee){"use strict";var p=y("../../components/fx/helpers").appendArrayMultiPointValues;$.exports=function(m,b){var v={curveNumber:b.index,pointNumbers:m.pts,data:b._input,fullData:b,label:m.label,color:m.color,value:m.v,percent:m.percent,text:m.text,bbox:m.bbox,v:m.v};return 1===m.pts.length&&(v.pointNumber=v.i=m.pts[0]),p(v,b,m.pts),"funnelarea"===b.type&&(delete v.v,delete v.i),v}},{"../../components/fx/helpers":402}],904:[function(y,$,ee){"use strict";var p=y("../../lib");function m(b){return-1!==b.indexOf("e")?b.replace(/[.]?0+e/,"e"):-1!==b.indexOf(".")?b.replace(/[.]?0+$/,""):b}ee.formatPiePercent=function(b,v){var e=m((100*b).toPrecision(3));return p.numSeparate(e,v)+"%"},ee.formatPieValue=function(b,v){var e=m(b.toPrecision(10));return p.numSeparate(e,v)},ee.getFirstFilled=function(b,v){if(Array.isArray(b))for(var e=0;e<v.length;e++){var n=b[v[e]];if(n||0===n||""===n)return n}},ee.castOption=function(b,v){return Array.isArray(b)?ee.getFirstFilled(b,v):b||void 0},ee.getRotationAngle=function(b){return("auto"===b?0:b)*Math.PI/180}},{"../../lib":503}],905:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,supplyLayoutDefaults:y("./layout_defaults"),layoutAttributes:y("./layout_attributes"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot").plot,style:y("./style"),styleOne:y("./style_one"),moduleType:"trace",name:"pie",basePlotModule:y("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":899,"./base_plot":900,"./calc":901,"./defaults":902,"./layout_attributes":906,"./layout_defaults":907,"./plot":908,"./style":909,"./style_one":910}],906:[function(y,$,ee){"use strict";$.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],907:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./layout_attributes");$.exports=function(b,v){function e(n,t){return p.coerce(b,v,m,n,t)}e("hiddenlabels"),e("piecolorway",v.colorway),e("extendpiecolors")}},{"../../lib":503,"./layout_attributes":906}],908:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../plots/plots"),b=y("../../components/fx"),v=y("../../components/color"),e=y("../../components/drawing"),n=y("../../lib"),t=n.strScale,a=n.strTranslate,r=y("../../lib/svg_text_utils"),u=y("../bar/uniform_text"),s=u.recordMinTextSize,i=u.clearMinTextSize,l=y("../bar/constants").TEXTPAD,c=y("./helpers"),f=y("./event_data"),g=y("../../lib").isValidTextValue;function h(Z,W,G){var X=G[0],te=X.cx,D=X.cy,N=X.trace,U="funnelarea"===N.type;"_hasHoverLabel"in N||(N._hasHoverLabel=!1),"_hasHoverEvent"in N||(N._hasHoverEvent=!1),Z.on("mouseover",function(Q){var j=W._fullLayout,J=W._fullData[N.index];if(!W._dragging&&!1!==j.hovermode){var K=J.hoverinfo;if(Array.isArray(K)&&(K=b.castHoverinfo({hoverinfo:[c.castOption(K,Q.pts)],_module:N._module},j,0)),"all"===K&&(K="label+text+value+percent+name"),J.hovertemplate||"none"!==K&&"skip"!==K&&K){var re=Q.rInscribed||0,ne=te+Q.pxmid[0]*(1-re),se=D+Q.pxmid[1]*(1-re),oe=j.separators,pe=[];if(K&&-1!==K.indexOf("label")&&pe.push(Q.label),Q.text=c.castOption(J.hovertext||J.text,Q.pts),K&&-1!==K.indexOf("text")){var ce=Q.text;n.isValidTextValue(ce)&&pe.push(ce)}Q.value=Q.v,Q.valueLabel=c.formatPieValue(Q.v,oe),K&&-1!==K.indexOf("value")&&pe.push(Q.valueLabel),Q.percent=Q.v/X.vTotal,Q.percentLabel=c.formatPiePercent(Q.percent,oe),K&&-1!==K.indexOf("percent")&&pe.push(Q.percentLabel);var ge=J.hoverlabel,xe=ge.font,we=[];b.loneHover({trace:N,x0:ne-re*X.r,x1:ne+re*X.r,y:se,_x0:U?te+Q.TL[0]:ne-re*X.r,_x1:U?te+Q.TR[0]:ne+re*X.r,_y0:U?D+Q.TL[1]:se-re*X.r,_y1:U?D+Q.BL[1]:se+re*X.r,text:pe.join("<br>"),name:J.hovertemplate||-1!==K.indexOf("name")?J.name:void 0,idealAlign:Q.pxmid[0]<0?"left":"right",color:c.castOption(ge.bgcolor,Q.pts)||Q.color,borderColor:c.castOption(ge.bordercolor,Q.pts),fontFamily:c.castOption(xe.family,Q.pts),fontSize:c.castOption(xe.size,Q.pts),fontColor:c.castOption(xe.color,Q.pts),nameLength:c.castOption(ge.namelength,Q.pts),textAlign:c.castOption(ge.align,Q.pts),hovertemplate:c.castOption(J.hovertemplate,Q.pts),hovertemplateLabels:Q,eventData:[f(Q,J)]},{container:j._hoverlayer.node(),outerContainer:j._paper.node(),gd:W,inOut_bbox:we}),Q.bbox=we[0],N._hasHoverLabel=!0}N._hasHoverEvent=!0,W.emit("plotly_hover",{points:[f(Q,J)],event:p.event})}}),Z.on("mouseout",function(Q){var j=W._fullLayout,J=W._fullData[N.index],K=p.select(this).datum();N._hasHoverEvent&&(Q.originalEvent=p.event,W.emit("plotly_unhover",{points:[f(K,J)],event:p.event}),N._hasHoverEvent=!1),N._hasHoverLabel&&(b.loneUnhover(j._hoverlayer.node()),N._hasHoverLabel=!1)}),Z.on("click",function(Q){W._dragging||!1===W._fullLayout.hovermode||(W._hoverdata=[f(Q,W._fullData[N.index])],b.click(W,p.event))})}function o(Z,W,G){var X=c.castOption(Z.insidetextfont.color,W.pts);!X&&Z._input.textfont&&(X=c.castOption(Z._input.textfont.color,W.pts));var te=c.castOption(Z.insidetextfont.family,W.pts)||c.castOption(Z.textfont.family,W.pts)||G.family,D=c.castOption(Z.insidetextfont.size,W.pts)||c.castOption(Z.textfont.size,W.pts)||G.size;return{color:X||v.contrast(W.color),family:te,size:D}}function x(Z,W){for(var G,X,te=0;te<Z.length;te++)if((X=(G=Z[te][0]).trace).title.text){var D=X.title.text;X._meta&&(D=n.templateString(D,X._meta));var N=e.tester.append("text").attr("data-notex",1).text(D).call(e.font,X.title.font).call(r.convertToTspans,W),U=e.bBox(N.node(),!0);G.titleBox={width:U.width,height:U.height},N.remove()}}function d(Z,W,G){var X=G.r||W.rpx1,te=W.rInscribed;if(W.startangle===W.stopangle)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var D,N=W.ring,U=1===N&&Math.abs(W.startangle-W.stopangle)===2*Math.PI,Q=W.halfangle,j=W.midangle,J=G.trace.insidetextorientation,K="horizontal"===J,re="tangential"===J,ne="radial"===J,se="auto"===J,oe=[];if(!se){var pe,ce=function(fe,me){if(Je=(Ie=W).stopangle,(Ve=Ie.startangle)>(ze=fe)&&ze>Je||Ve<ze&&ze<Je){var Te=Math.abs(fe-W.startangle),_e=Math.abs(fe-W.stopangle),Me=Te<_e?Te:_e;(D="tan"===me?_(Z,X,N,Me,0):w(Z,X,N,Me,Math.PI/2)).textPosAngle=fe,oe.push(D)}var Ie,ze,Ve,Je};if(K||re){for(pe=4;pe>=-4;pe-=2)ce(Math.PI*pe,"tan");for(pe=4;pe>=-4;pe-=2)ce(Math.PI*(pe+1),"tan")}if(K||ne){for(pe=4;pe>=-4;pe-=2)ce(Math.PI*(pe+1.5),"rad");for(pe=4;pe>=-4;pe-=2)ce(Math.PI*(pe+.5),"rad")}}if(U||se||K){var ge=Math.sqrt(Z.width*Z.width+Z.height*Z.height);if((D={scale:te*X*2/ge,rCenter:1-te,rotate:0}).textPosAngle=(W.startangle+W.stopangle)/2,D.scale>=1)return D;oe.push(D)}(se||ne)&&((D=w(Z,X,N,Q,j)).textPosAngle=(W.startangle+W.stopangle)/2,oe.push(D)),(se||re)&&((D=_(Z,X,N,Q,j)).textPosAngle=(W.startangle+W.stopangle)/2,oe.push(D));for(var xe=0,we=0,be=0;be<oe.length;be++){var Se=oe[be].scale;if(we<Se&&(we=Se,xe=be),!se&&we>=1)break}return oe[xe]}function w(Z,W,G,X,te){W=Math.max(0,W-2*l);var D=Z.width/Z.height,N=L(D,X,W,G);return{scale:2*N/Z.height,rCenter:T(D,N/W),rotate:k(te)}}function _(Z,W,G,X,te){W=Math.max(0,W-2*l);var D=Z.height/Z.width,N=L(D,X,W,G);return{scale:2*N/Z.width,rCenter:T(D,N/W),rotate:k(te+Math.PI/2)}}function T(Z,W){return Math.cos(W)-Z*W}function k(Z){return(180/Math.PI*Z+720)%180-90}function L(Z,W,G,X){var te=Z+1/(2*Math.tan(W));return G*Math.min(1/(Math.sqrt(te*te+.5)+te),X/(Math.sqrt(Z*Z+X/2)+Z))}function M(Z,W){return Z.v!==W.vTotal||W.trace.hole?Math.min(1/(1+1/Math.sin(Z.halfangle)),Z.ring/2):1}function O(Z,W){var G=W.pxmid[0],X=W.pxmid[1],te=Z.width/2,D=Z.height/2;return G<0&&(te*=-1),X<0&&(D*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs(D)*(te>0?1:-1)/2,y:D/(1+G*G/(X*X)),outside:!0}}function P(Z,W){var G,X,te,D=Z.trace,N={x:Z.cx,y:Z.cy},U={tx:0,ty:0};U.ty+=D.title.font.size,te=E(D),-1!==D.title.position.indexOf("top")?(N.y-=(1+te)*Z.r,U.ty-=Z.titleBox.height):-1!==D.title.position.indexOf("bottom")&&(N.y+=(1+te)*Z.r);var j,J=Z.r/(void 0===(j=Z.trace.aspectratio)?1:j),K=W.w*(D.domain.x[1]-D.domain.x[0])/2;return-1!==D.title.position.indexOf("left")?(K+=J,N.x-=(1+te)*J,U.tx+=Z.titleBox.width/2):-1!==D.title.position.indexOf("center")?K*=2:-1!==D.title.position.indexOf("right")&&(K+=J,N.x+=(1+te)*J,U.tx-=Z.titleBox.width/2),G=K/Z.titleBox.width,X=S(Z,W)/Z.titleBox.height,{x:N.x,y:N.y,scale:Math.min(G,X),tx:U.tx,ty:U.ty}}function S(Z,W){var G=Z.trace;return Math.min(Z.titleBox.height,W.h*(G.domain.y[1]-G.domain.y[0])/2)}function E(Z){var W,G=Z.pull;if(!G)return 0;if(Array.isArray(G))for(G=0,W=0;W<Z.pull.length;W++)Z.pull[W]>G&&(G=Z.pull[W]);return G}function R(Z,W){for(var G=[],X=0;X<Z.length;X++){var te=Z[X][0],D=te.trace,N=D.domain,U=W.w*(N.x[1]-N.x[0]),Q=W.h*(N.y[1]-N.y[0]);D.title.text&&"middle center"!==D.title.position&&(Q-=S(te,W));var J=Q/2;"funnelarea"!==D.type||D.scalegroup||(J/=D.aspectratio),te.r=Math.min(U/2,J)/(1+E(D)),te.cx=W.l+W.w*(D.domain.x[1]+D.domain.x[0])/2,te.cy=W.t+W.h*(1-D.domain.y[0])-Q/2,D.title.text&&-1!==D.title.position.indexOf("bottom")&&(te.cy-=S(te,W)),D.scalegroup&&-1===G.indexOf(D.scalegroup)&&G.push(D.scalegroup)}!function(K,re){for(var ne,se,oe,pe=0;pe<re.length;pe++){var ce=1/0,ge=re[pe];for(se=0;se<K.length;se++)if((oe=(ne=K[se][0]).trace).scalegroup===ge){var xe;if("pie"===oe.type)xe=ne.r*ne.r;else if("funnelarea"===oe.type){var we,be;oe.aspectratio>1?be=(we=ne.r)/oe.aspectratio:we=(be=ne.r)*oe.aspectratio,xe=(we*=(1+oe.baseratio)/2)*be}ce=Math.min(ce,xe/ne.vTotal)}for(se=0;se<K.length;se++)if((oe=(ne=K[se][0]).trace).scalegroup===ge){var Se=ce*ne.vTotal;"funnelarea"===oe.type&&(Se/=(1+oe.baseratio)/2,Se/=oe.aspectratio),ne.r=Math.sqrt(Se)}}}(Z,G)}function B(Z,W){return[Z*Math.sin(W),-Z*Math.cos(W)]}function H(Z,W,G){var xe,X=Z._fullLayout,te=G.trace,D=te.texttemplate,N=te.textinfo;if(!D&&N&&"none"!==N){var U,Q=N.split("+"),j=function(xe){return-1!==Q.indexOf(xe)},J=j("label"),K=j("text"),re=j("value"),ne=j("percent"),se=X.separators;if(U=J?[W.label]:[],K){var oe=c.getFirstFilled(te.text,W.pts);g(oe)&&U.push(oe)}re&&U.push(c.formatPieValue(W.v,se)),ne&&U.push(c.formatPiePercent(W.v/G.vTotal,se)),W.text=U.join("<br>")}if(D){var pe=n.castOption(te,W.i,"texttemplate");if(pe){var ce={label:(xe=W).label,value:xe.v,valueLabel:c.formatPieValue(xe.v,X.separators),percent:xe.v/G.vTotal,percentLabel:c.formatPiePercent(xe.v/G.vTotal,X.separators),color:xe.color,text:xe.text,customdata:n.castOption(te,xe.i,"customdata")},ge=c.getFirstFilled(te.text,W.pts);(g(ge)||""===ge)&&(ce.text=ge),W.text=n.texttemplateString(pe,ce,Z._fullLayout._d3locale,ce,te._meta||{})}else W.text=""}}function V(Z,W){var G=Z.rotate*Math.PI/180,X=Math.cos(G),te=Math.sin(G),D=(W.left+W.right)/2,N=(W.top+W.bottom)/2;Z.textX=D*X-N*te,Z.textY=D*te+N*X,Z.noCenter=!0}$.exports={plot:function(Z,W){var G=Z._fullLayout,X=G._size;i("pie",G),x(W,Z),R(W,X);var te=n.makeTraceGroups(G._pielayer,W,"trace").each(function(D){var N=p.select(this),U=D[0],Q=U.trace;(function(j){var J,K,re,ne=j[0],se=ne.r,oe=ne.trace,pe=c.getRotationAngle(oe.rotation),ce=2*Math.PI/ne.vTotal,ge="px0",xe="px1";if("counterclockwise"===oe.direction){for(J=0;J<j.length&&j[J].hidden;J++);if(J===j.length)return;pe+=ce*j[J].v,ce*=-1,ge="px1",xe="px0"}for(re=B(se,pe),J=0;J<j.length;J++)(K=j[J]).hidden||(K[ge]=re,K.startangle=pe,K.pxmid=B(se,pe+=ce*K.v/2),K.midangle=pe,re=B(se,pe+=ce*K.v/2),K.stopangle=pe,K[xe]=re,K.largeArc=K.v>ne.vTotal/2?1:0,K.halfangle=Math.PI*Math.min(K.v/ne.vTotal,.5),K.ring=1-oe.hole,K.rInscribed=M(K,ne))})(D),N.attr("stroke-linejoin","round"),N.each(function(){var j=p.select(this).selectAll("g.slice").data(D);j.enter().append("g").classed("slice",!0),j.exit().remove();var J=[[[],[]],[[],[]]],K=!1;j.each(function(xe,we){if(xe.hidden)p.select(this).selectAll("path,g").remove();else{xe.pointNumber=xe.i,xe.curveNumber=Q.index,J[xe.pxmid[1]<0?0:1][xe.pxmid[0]<0?0:1].push(xe);var be=U.cx,Se=U.cy,fe=p.select(this),me=fe.selectAll("path.surface").data([xe]);if(me.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),fe.call(h,Z,D),Q.pull){var Te=+c.castOption(Q.pull,xe.pts)||0;Te>0&&(be+=Te*xe.pxmid[0],Se+=Te*xe.pxmid[1])}xe.cxFinal=be,xe.cyFinal=Se;var _e=Q.hole;if(xe.v===U.vTotal){var Me="M"+(be+xe.px0[0])+","+(Se+xe.px0[1])+De(xe.px0,xe.pxmid,!0,1)+De(xe.pxmid,xe.px0,!0,1)+"Z";me.attr("d",_e?"M"+(be+_e*xe.px0[0])+","+(Se+_e*xe.px0[1])+De(xe.px0,xe.pxmid,!1,_e)+De(xe.pxmid,xe.px0,!1,_e)+"Z"+Me:Me)}else{var Ie=De(xe.px0,xe.px1,!0,1);if(_e){var ze=1-_e;me.attr("d","M"+(be+_e*xe.px1[0])+","+(Se+_e*xe.px1[1])+De(xe.px1,xe.px0,!1,_e)+"l"+ze*xe.px0[0]+","+ze*xe.px0[1]+Ie+"Z")}else me.attr("d","M"+be+","+Se+"l"+xe.px0[0]+","+xe.px0[1]+Ie+"Z")}H(Z,xe,U);var Ve=c.castOption(Q.textposition,xe.pts),Je=fe.selectAll("g.slicetext").data(xe.text&&"none"!==Ve?[0]:[]);Je.enter().append("g").classed("slicetext",!0),Je.exit().remove(),Je.each(function(){var rt,et,bt,Be=n.ensureSingle(p.select(this),"text","",function(rt){rt.attr("data-notex",1)}),Ze=n.ensureUniformFontSize(Z,"outside"===Ve?(bt=G.font,{color:c.castOption((rt=Q).outsidetextfont.color,(et=xe).pts)||c.castOption(rt.textfont.color,et.pts)||bt.color,family:c.castOption(rt.outsidetextfont.family,et.pts)||c.castOption(rt.textfont.family,et.pts)||bt.family,size:c.castOption(rt.outsidetextfont.size,et.pts)||c.castOption(rt.textfont.size,et.pts)||bt.size}):o(Q,xe,G.font));Be.text(xe.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,Ze).call(r.convertToTspans,Z);var Ye,tt=e.bBox(Be.node());if("outside"===Ve)Ye=O(tt,xe);else if(Ye=d(tt,xe,U),"auto"===Ve&&Ye.scale<1){var st=n.ensureUniformFontSize(Z,Q.outsidetextfont);Be.call(e.font,st),Ye=O(tt=e.bBox(Be.node()),xe)}var vt=Ye.textPosAngle,Pt=void 0===vt?xe.pxmid:B(U.r,vt);if(Ye.targetX=be+Pt[0]*Ye.rCenter+(Ye.x||0),Ye.targetY=Se+Pt[1]*Ye.rCenter+(Ye.y||0),V(Ye,tt),Ye.outside){var Mt=Ye.targetY;xe.yLabelMin=Mt-tt.height/2,xe.yLabelMid=Mt,xe.yLabelMax=Mt+tt.height/2,xe.labelExtraX=0,xe.labelExtraY=0,K=!0}Ye.fontSize=Ze.size,s(Q.type,Ye,G),D[we].transform=Ye,Be.attr("transform",n.getTextTransform(Ye))})}function De(Be,Ze,Ye,tt){return"a"+tt*U.r+","+tt*U.r+" 0 "+xe.largeArc+(Ye?" 1 ":" 0 ")+tt*(Ze[0]-Be[0])+","+tt*(Ze[1]-Be[1])}});var we,re=p.select(this).selectAll("g.titletext").data(Q.title.text?[0]:[]);if(re.enter().append("g").classed("titletext",!0),re.exit().remove(),re.each(function(){var xe,Se,fe,we=n.ensureSingle(p.select(this),"text","",function(Se){Se.attr("data-notex",1)}),be=Q.title.text;Q._meta&&(be=n.templateString(be,Q._meta)),we.text(be).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,Q.title.font).call(r.convertToTspans,Z),xe="middle center"===Q.title.position?(Se=U,fe=Math.sqrt(Se.titleBox.width*Se.titleBox.width+Se.titleBox.height*Se.titleBox.height),{x:Se.cx,y:Se.cy,scale:Se.trace.hole*Se.r*2/fe,tx:0,ty:-Se.titleBox.height/2+Se.trace.title.font.size}):P(U,X),we.attr("transform",a(xe.x,xe.y)+t(Math.min(1,xe.scale))+a(xe.tx,xe.ty))}),K&&function(xe,we){var be,Se,fe,me,Te,_e,Me,Ie,ze,Ve,Je,De,Be;function Ze(vt,Pt){return vt.pxmid[1]-Pt.pxmid[1]}function Ye(vt,Pt){return Pt.pxmid[1]-vt.pxmid[1]}function tt(vt,Pt){Pt||(Pt={});var Mt,rt,et,bt,Rt=Pt.labelExtraY+(Se?Pt.yLabelMax:Pt.yLabelMin),Yt=Se?vt.yLabelMin:vt.yLabelMax,Fe=Se?vt.yLabelMax:vt.yLabelMin,He=vt.cyFinal+Te(vt.px0[1],vt.px1[1]),Oe=Rt-Yt;if(Oe*Me>0&&(vt.labelExtraY=Oe),Array.isArray(we.pull))for(rt=0;rt<Ve.length;rt++)(et=Ve[rt])===vt||(c.castOption(we.pull,vt.pts)||0)>=(c.castOption(we.pull,et.pts)||0)||((vt.pxmid[1]-et.pxmid[1])*Me>0?(Oe=et.cyFinal+Te(et.px0[1],et.px1[1])-Yt-vt.labelExtraY)*Me>0&&(vt.labelExtraY+=Oe):(Fe+vt.labelExtraY-He)*Me>0&&(Mt=3*_e*Math.abs(rt-Ve.indexOf(vt)),(bt=et.cxFinal+me(et.px0[0],et.px1[0])+Mt-(vt.cxFinal+vt.pxmid[0])-vt.labelExtraX)*_e>0&&(vt.labelExtraX+=bt)))}for(Se=0;Se<2;Se++)for(fe=Se?Ze:Ye,Te=Se?Math.max:Math.min,Me=Se?1:-1,be=0;be<2;be++){for(me=be?Math.max:Math.min,_e=be?1:-1,(Ie=xe[Se][be]).sort(fe),Ve=(ze=xe[1-Se][be]).concat(Ie),De=[],Je=0;Je<Ie.length;Je++)void 0!==Ie[Je].yLabelMid&&De.push(Ie[Je]);for(Be=!1,Je=0;Se&&Je<ze.length;Je++)if(void 0!==ze[Je].yLabelMid){Be=ze[Je];break}for(Je=0;Je<De.length;Je++){var st=Je&&De[Je-1];Be&&!Je&&(st=Be),tt(De[Je],st)}}}(J,Q),we=Q,j.each(function(be){var Se=p.select(this);if(be.labelExtraX||be.labelExtraY){var fe=Se.select("g.slicetext text");be.transform.targetX+=be.labelExtraX,be.transform.targetY+=be.labelExtraY,fe.attr("transform",n.getTextTransform(be.transform));var me=be.cxFinal+be.pxmid[0],Te="M"+me+","+(be.cyFinal+be.pxmid[1]),_e=(be.yLabelMax-be.yLabelMin)*(be.pxmid[0]<0?-1:1)/4;if(be.labelExtraX){var Me=be.labelExtraX*be.pxmid[1]/be.pxmid[0],Ie=be.yLabelMid+be.labelExtraY-(be.cyFinal+be.pxmid[1]);Math.abs(Me)>Math.abs(Ie)?Te+="l"+Ie*be.pxmid[0]/be.pxmid[1]+","+Ie+"H"+(me+be.labelExtraX+_e):Te+="l"+be.labelExtraX+","+Me+"v"+(Ie-Me)+"h"+_e}else Te+="V"+(be.yLabelMid+be.labelExtraY)+"h"+_e;n.ensureSingle(Se,"path","textline").call(v.stroke,we.outsidetextfont.color).attr({"stroke-width":Math.min(2,we.outsidetextfont.size/8),d:Te,fill:"none"})}else Se.select("path.textline").remove()}),K&&Q.automargin){var ne=e.bBox(N.node()),se=Q.domain,ce=(X.w*(se.x[1]-se.x[0])*.5-U.r)/X.w,ge=(X.h*(se.y[1]-se.y[0])*.5-U.r)/X.h;m.autoMargin(Z,"pie."+Q.uid+".automargin",{xl:se.x[0]-ce,xr:se.x[1]+ce,yb:se.y[0]-ge,yt:se.y[1]+ge,l:Math.max(U.cx-U.r-ne.left,0),r:Math.max(ne.right-(U.cx+U.r),0),b:Math.max(ne.bottom-(U.cy+U.r),0),t:Math.max(U.cy-U.r-ne.top,0),pad:5})}})});setTimeout(function(){te.selectAll("tspan").each(function(){var D=p.select(this);D.attr("dy")&&D.attr("dy",D.attr("dy"))})},0)},formatSliceLabel:H,transformInsideText:d,determineInsideTextFont:o,positionTitleOutside:P,prerenderTitles:x,layoutAreas:R,attachFxHandlers:h,computeTransform:V}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":903,"./helpers":904,"@plotly/d3":58}],909:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("./style_one"),b=y("../bar/uniform_text").resizeText;$.exports=function(v){var e=v._fullLayout._pielayer.selectAll(".trace");b(v,e,"pie"),e.each(function(n){var t=n[0].trace,a=p.select(this);a.style({opacity:t.opacity}),a.selectAll("path.surface").each(function(r){p.select(this).call(m,r,t)})})}},{"../bar/uniform_text":664,"./style_one":910,"@plotly/d3":58}],910:[function(y,$,ee){"use strict";var p=y("../../components/color"),m=y("./helpers").castOption;$.exports=function(b,v,e){var n=e.marker.line,t=m(n.color,v.pts)||p.defaultLine,a=m(n.width,v.pts)||0;b.style("stroke-width",a).call(p.fill,v.color).call(p.stroke,t)}},{"../../components/color":366,"./helpers":904}],911:[function(y,$,ee){"use strict";var p=y("../scatter/attributes");$.exports={x:p.x,y:p.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:p.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":925}],912:[function(y,$,ee){"use strict";var p=y("../../../stackgl_modules").gl_pointcloud2d,m=y("../../lib/str2rgbarray"),b=y("../../plots/cartesian/autorange").findExtremes,v=y("../scatter/get_trace_color");function e(t,a){this.scene=t,this.uid=a,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=p(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var n=e.prototype;n.handlePick=function(t){var a=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*a],this.pickXYData[2*a+1]]:[this.pickXData[a],this.pickYData[a]],textLabel:Array.isArray(this.textLabels)?this.textLabels[a]:this.textLabels,color:this.color,name:this.name,pointIndex:a,hoverinfo:this.hoverinfo}},n.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=v(t,{})},n.updateFast=function(t){var a,r,u,s,i,l,c=this.xData=this.pickXData=t.x,f=this.yData=this.pickYData=t.y,g=this.pickXYData=t.xy,o=t.indices,x=this.bounds;if(g){if(u=g,a=g.length>>>1,t.xbounds&&t.ybounds)x[0]=t.xbounds[0],x[2]=t.xbounds[1],x[1]=t.ybounds[0],x[3]=t.ybounds[1];else for(l=0;l<a;l++)i=u[2*l+1],(s=u[2*l])<x[0]&&(x[0]=s),s>x[2]&&(x[2]=s),i<x[1]&&(x[1]=i),i>x[3]&&(x[3]=i);if(o)r=o;else for(r=new Int32Array(a),l=0;l<a;l++)r[l]=l}else for(a=c.length,u=new Float32Array(2*a),r=new Int32Array(a),l=0;l<a;l++)s=c[l],i=f[l],r[l]=l,u[2*l]=s,u[2*l+1]=i,s<x[0]&&(x[0]=s),s>x[2]&&(x[2]=s),i<x[1]&&(x[1]=i),i>x[3]&&(x[3]=i);this.idToIndex=r,this.pointcloudOptions.idToIndex=r,this.pointcloudOptions.positions=u;var d=m(t.marker.color),w=m(t.marker.border.color),_=t.opacity*t.marker.opacity;d[3]*=_,this.pointcloudOptions.color=d;var T=t.marker.blend;null===T&&(T=c.length<100||f.length<100),this.pointcloudOptions.blend=T,w[3]*=_,this.pointcloudOptions.borderColor=w;var k=t.marker.sizemin,L=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=k,this.pointcloudOptions.sizeMax=L,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var M=this.scene.xaxis,O=this.scene.yaxis,P=L/2||.5;t._extremes[M._id]=b(M,[x[0],x[2]],{ppad:P}),t._extremes[O._id]=b(O,[x[1],x[3]],{ppad:P})},n.dispose=function(){this.pointcloud.dispose()},$.exports=function(t,a){var r=new e(t,a.uid);return r.update(a),r}},{"../../../stackgl_modules":1119,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":935}],913:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./attributes");$.exports=function(b,v,e){function n(t,a){return p.coerce(b,v,m,t,a)}n("x"),n("y"),n("xbounds"),n("ybounds"),b.xy&&b.xy instanceof Float32Array&&(v.xy=b.xy),b.indices&&b.indices instanceof Int32Array&&(v.indices=b.indices),n("text"),n("marker.color",e),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",e),n("marker.border.arearatio"),v._length=null}},{"../../lib":503,"./attributes":911}],914:[function(y,$,ee){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("../scatter3d/calc"),plot:y("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:y("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":954,"./attributes":911,"./convert":912,"./defaults":913}],915:[function(y,$,ee){"use strict";var p=y("../../plots/font_attributes"),m=y("../../plots/attributes"),b=y("../../components/color/attributes"),v=y("../../components/fx/attributes"),e=y("../../plots/domain").attributes,n=y("../../plots/template_attributes").hovertemplateAttrs,t=y("../../components/colorscale/attributes"),a=y("../../plot_api/plot_template").templatedArray,r=y("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,u=y("../../lib/extend").extendFlat,s=y("../../plot_api/edit_types").overrideAll;($.exports=s({hoverinfo:u({},m.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:v.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:p({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:v.hoverlabel,hovertemplate:n({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:v.hoverlabel,hovertemplate:n({},{keys:["value","label"]}),colorscales:a("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:u(t().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],916:[function(y,$,ee){"use strict";var p=y("../../plot_api/edit_types").overrideAll,m=y("../../plots/get_data").getModuleCalcData,b=y("./plot"),v=y("../../components/fx/layout_attributes"),e=y("../../lib/setcursor"),n=y("../../components/dragelement"),t=y("../../plots/cartesian/select").prepSelect,a=y("../../lib"),r=y("../../registry");function u(s,i){var l=s._fullData[i],c=s._fullLayout,f=c.dragmode,h=l._bgRect;if("pan"!==f&&"zoom"!==f){e(h,"pan"===c.dragmode?"move":"crosshair");var o={_id:"x",c2p:a.identity,_offset:l._sankey.translateX,_length:l._sankey.width},x={_id:"y",c2p:a.identity,_offset:l._sankey.translateY,_length:l._sankey.height},d={gd:s,element:h.node(),plotinfo:{id:i,xaxis:o,yaxis:x,fillRangeItems:a.noop},subplot:i,xaxes:[o],yaxes:[x],doneFnCompleted:function(w){var _,T=s._fullData[i],k=T.node.groups.slice(),L=[];function M(E){for(var R=T._sankey.graph.nodes,B=0;B<R.length;B++)if(R[B].pointNumber===E)return R[B]}for(var O=0;O<w.length;O++){var P=M(w[O].pointNumber);if(P)if(P.group){for(var S=0;S<P.childrenNodes.length;S++)L.push(P.childrenNodes[S].pointNumber);k[P.pointNumber-T.node._count]=!1}else L.push(P.pointNumber)}_=k.filter(Boolean).concat([L]),r.call("_guiRestyle",s,{"node.groups":[_]},i)},prepFn:function(w,_,T){t(w,_,T,d,f)}};n.init(d)}}ee.name="sankey",ee.baseLayoutAttrOverrides=p({hoverlabel:v.hoverlabel},"plot","nested"),ee.plot=function(s){var i=m(s.calcdata,"sankey")[0];b(s,i),ee.updateFx(s)},ee.clean=function(s,i,l,c){var f=c._has&&c._has("sankey"),g=i._has&&i._has("sankey");f&&!g&&(c._paperdiv.selectAll(".sankey").remove(),c._paperdiv.selectAll(".bgsankey").remove())},ee.updateFx=function(s){for(var i=0;i<s._fullData.length;i++)u(s,i)}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":921}],917:[function(y,$,ee){"use strict";var p=y("strongly-connected-components"),m=y("../../lib"),b=y("../../lib/gup").wrap,v=m.isArrayOrTypedArray,e=m.isIndex,n=y("../../components/colorscale");$.exports=function(a,r){var u=function(a){var r,u=a.node,s=a.link,i=[],l=v(s.color),c=v(s.customdata),f={},g={},h=s.colorscales.length;for(r=0;r<h;r++){var o=s.colorscales[r],x=n.extractScale(o,{cLetter:"c"}),d=n.makeColorScaleFunc(x);g[o.label]=d}var w=0;for(r=0;r<s.value.length;r++)s.source[r]>w&&(w=s.source[r]),s.target[r]>w&&(w=s.target[r]);var _,T=w+1;a.node._count=T;var k=a.node.groups,L={};for(r=0;r<k.length;r++){var M=k[r];for(_=0;_<M.length;_++){var O=M[_],P=T+r;L.hasOwnProperty(O)?m.warn("Node "+O+" is already part of a group."):L[O]=P}}var S={source:[],target:[]};for(r=0;r<s.value.length;r++){var E=s.value[r],R=s.source[r],B=s.target[r];if(E>0&&e(R,T)&&e(B,T)&&(!L.hasOwnProperty(R)||!L.hasOwnProperty(B)||L[R]!==L[B])){L.hasOwnProperty(B)&&(B=L[B]),L.hasOwnProperty(R)&&(R=L[R]),f[R=+R]=f[B=+B]=!0;var H="";s.label&&s.label[r]&&(H=s.label[r]);var V=null;H&&g.hasOwnProperty(H)&&(V=g[H]),i.push({pointNumber:r,label:H,color:l?s.color[r]:s.color,customdata:c?s.customdata[r]:s.customdata,concentrationscale:V,source:R,target:B,value:+E}),S.source.push(R),S.target.push(B)}}var Z=T+k.length,W=v(u.color),G=v(u.customdata),X=[];for(r=0;r<Z;r++)f[r]&&X.push({group:r>T-1,childrenNodes:[],pointNumber:r,label:u.label[r],color:W?u.color[r]:u.color,customdata:G?u.customdata[r]:u.customdata});var D=!1;return function(N,U,Q){for(var j=m.init2dArray(N,0),J=0;J<Math.min(U.length,Q.length);J++)if(m.isIndex(U[J],N)&&m.isIndex(Q[J],N)){if(U[J]===Q[J])return!0;j[U[J]].push(Q[J])}return p(j).components.some(function(K){return K.length>1})}(Z,S.source,S.target)&&(D=!0),{circular:D,links:i,nodes:X,groups:k,groupLookup:L}}(r);return b({circular:u.circular,_nodes:u.nodes,_links:u.links,_groups:u.groups,_groupLookup:u.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],918:[function(y,$,ee){"use strict";$.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],919:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./attributes"),b=y("../../components/color"),v=y("tinycolor2"),e=y("../../plots/domain").defaults,n=y("../../components/fx/hoverlabel_defaults"),t=y("../../plot_api/plot_template"),a=y("../../plots/array_container_defaults");function r(u,s){function i(l,c){return p.coerce(u,s,m.link.colorscales,l,c)}i("label"),i("cmin"),i("cmax"),i("colorscale")}$.exports=function(u,s,i,l){function c(L,M){return p.coerce(u,s,m,L,M)}var f=p.extendDeep(l.hoverlabel,u.hoverlabel),g=u.node,h=t.newContainer(s,"node");function o(L,M){return p.coerce(g,h,m.node,L,M)}o("label"),o("groups"),o("x"),o("y"),o("pad"),o("thickness"),o("line.color"),o("line.width"),o("hoverinfo",u.hoverinfo),n(g,h,o,f),o("hovertemplate");var x=l.colorway;o("color",h.label.map(function(L,M){return b.addOpacity(x[M%x.length],.8)})),o("customdata");var d=u.link||{},w=t.newContainer(s,"link");function _(L,M){return p.coerce(d,w,m.link,L,M)}_("label"),_("source"),_("target"),_("value"),_("line.color"),_("line.width"),_("hoverinfo",u.hoverinfo),n(d,w,_,f),_("hovertemplate");var T,k=v(l.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";_("color",p.repeat(k,w.value.length)),_("customdata"),a(d,w,{name:"colorscales",handleItemDefaults:r}),e(s,l,c),c("orientation"),c("valueformat"),c("valuesuffix"),h.x.length&&h.y.length&&(T="freeform"),c("arrangement",T),p.coerceFont(c,"textfont",p.extendFlat({},l.font)),s._length=null}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":915,tinycolor2:312}],920:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),moduleType:"trace",name:"sankey",basePlotModule:y("./base_plot"),selectPoints:y("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":915,"./base_plot":916,"./calc":917,"./defaults":919,"./plot":921,"./select.js":923}],921:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=m.numberFormat,v=y("./render"),e=y("../../components/fx"),n=y("../../components/color"),t=y("./constants").cn,a=m._;function r(d){return""!==d}function u(d,w){return d.filter(function(_){return _.key===w.traceId})}function s(d,w){p.select(d).select("path").style("fill-opacity",w),p.select(d).select("rect").style("fill-opacity",w)}function i(d){p.select(d).select("text.name").style("fill","black")}function l(d){return function(w){return-1!==d.node.sourceLinks.indexOf(w.link)||-1!==d.node.targetLinks.indexOf(w.link)}}function c(d){return function(w){return-1!==w.node.sourceLinks.indexOf(d.link)||-1!==w.node.targetLinks.indexOf(d.link)}}function f(d,w,_){w&&_&&u(_,w).selectAll("."+t.sankeyLink).filter(l(w)).call(h.bind(0,w,_,!1))}function g(d,w,_){w&&_&&u(_,w).selectAll("."+t.sankeyLink).filter(l(w)).call(o.bind(0,w,_,!1))}function h(d,w,_,T){var k=T.datum().link.label;T.style("fill-opacity",function(L){if(!L.link.concentrationscale)return.4}),k&&u(w,d).selectAll("."+t.sankeyLink).filter(function(L){return L.link.label===k}).style("fill-opacity",function(L){if(!L.link.concentrationscale)return.4}),_&&u(w,d).selectAll("."+t.sankeyNode).filter(c(d)).call(f)}function o(d,w,_,T){var k=T.datum().link.label;T.style("fill-opacity",function(L){return L.tinyColorAlpha}),k&&u(w,d).selectAll("."+t.sankeyLink).filter(function(L){return L.link.label===k}).style("fill-opacity",function(L){return L.tinyColorAlpha}),_&&u(w,d).selectAll(t.sankeyNode).filter(c(d)).call(g)}function x(d,w){var T=m.nestedProperty(d.hoverlabel||{},w).get();return!Array.isArray(T)&&T}$.exports=function(d,w){for(var _=d._fullLayout,T=_._paper,k=_._size,L=0;L<d._fullData.length;L++)if(d._fullData[L].visible&&d._fullData[L].type===t.sankey&&!d._fullData[L]._viewInitial){var M=d._fullData[L].node;d._fullData[L]._viewInitial={node:{groups:M.groups.slice(),x:M.x.slice(),y:M.y.slice()}}}var O=a(d,"source:")+" ",P=a(d,"target:")+" ",S=a(d,"concentration:")+" ",E=a(d,"incoming flow count:")+" ",R=a(d,"outgoing flow count:")+" ";v(d,T,w,{width:k.w,height:k.h,margin:{t:k.t,r:k.r,b:k.b,l:k.l}},{linkEvents:{hover:function(B,H,V){!1!==d._fullLayout.hovermode&&(p.select(B).call(h.bind(0,H,V,!0)),"skip"!==H.link.trace.link.hoverinfo&&(H.link.fullData=H.link.trace,d.emit("plotly_hover",{event:p.event,points:[H.link]})))},follow:function(B,H){if(!1!==d._fullLayout.hovermode){var V=H.link.trace.link;if("none"!==V.hoverinfo&&"skip"!==V.hoverinfo){for(var Z=[],W=0,G=0;G<H.flow.links.length;G++){var X=H.flow.links[G];if("closest"!==d._fullLayout.hovermode||H.link.pointNumber===X.pointNumber){H.link.pointNumber===X.pointNumber&&(W=G),X.fullData=X.trace,V=H.link.trace.link;var te=N(X),D={valueLabel:b(H.valueFormat)(X.value)+H.valueSuffix};Z.push({x:te[0],y:te[1],name:D.valueLabel,text:[X.label||"",O+X.source.label,P+X.target.label,X.concentrationscale?S+b("%0.2f")(X.flow.labelConcentration):""].filter(r).join("<br>"),color:x(V,"bgcolor")||n.addOpacity(X.color,1),borderColor:x(V,"bordercolor"),fontFamily:x(V,"font.family"),fontSize:x(V,"font.size"),fontColor:x(V,"font.color"),nameLength:x(V,"namelength"),textAlign:x(V,"align"),idealAlign:p.event.x<te[0]?"right":"left",hovertemplate:V.hovertemplate,hovertemplateLabels:D,eventData:[X]})}}e.loneHover(Z,{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:d,anchorIndex:W}).each(function(){H.link.concentrationscale||s(this,.65),i(this)})}}function N(U){var Q,j;U.circular?(Q=(U.circularPathData.leftInnerExtent+U.circularPathData.rightInnerExtent)/2,j=U.circularPathData.verticalFullExtent):(Q=(U.source.x1+U.target.x0)/2,j=(U.y0+U.y1)/2);var J=[Q,j];return"v"===U.trace.orientation&&J.reverse(),J[0]+=H.parent.translateX,J[1]+=H.parent.translateY,J}},unhover:function(B,H,V){!1!==d._fullLayout.hovermode&&(p.select(B).call(o.bind(0,H,V,!0)),"skip"!==H.link.trace.link.hoverinfo&&(H.link.fullData=H.link.trace,d.emit("plotly_unhover",{event:p.event,points:[H.link]})),e.loneUnhover(_._hoverlayer.node()))},select:function(B,H){var V=H.link;V.originalEvent=p.event,d._hoverdata=[V],e.click(d,{target:!0})}},nodeEvents:{hover:function(B,H,V){!1!==d._fullLayout.hovermode&&(p.select(B).call(f,H,V),"skip"!==H.node.trace.node.hoverinfo&&(H.node.fullData=H.node.trace,d.emit("plotly_hover",{event:p.event,points:[H.node]})))},follow:function(B,H){if(!1!==d._fullLayout.hovermode){var V=H.node.trace.node;if("none"!==V.hoverinfo&&"skip"!==V.hoverinfo){var Z=p.select(B).select("."+t.nodeRect),W=d._fullLayout._paperdiv.node().getBoundingClientRect(),G=Z.node().getBoundingClientRect(),X=G.left-2-W.left,te=G.right+2-W.left,D=G.top+G.height/4-W.top,N={valueLabel:b(H.valueFormat)(H.node.value)+H.valueSuffix};H.node.fullData=H.node.trace,d._fullLayout._calcInverseTransform(d);var U=d._fullLayout._invScaleX,j=e.loneHover({x0:U*X,x1:U*te,y:d._fullLayout._invScaleY*D,name:b(H.valueFormat)(H.node.value)+H.valueSuffix,text:[H.node.label,E+H.node.targetLinks.length,R+H.node.sourceLinks.length].filter(r).join("<br>"),color:x(V,"bgcolor")||H.tinyColorHue,borderColor:x(V,"bordercolor"),fontFamily:x(V,"font.family"),fontSize:x(V,"font.size"),fontColor:x(V,"font.color"),nameLength:x(V,"namelength"),textAlign:x(V,"align"),idealAlign:"left",hovertemplate:V.hovertemplate,hovertemplateLabels:N,eventData:[H.node]},{container:_._hoverlayer.node(),outerContainer:_._paper.node(),gd:d});s(j,.85),i(j)}}},unhover:function(B,H,V){!1!==d._fullLayout.hovermode&&(p.select(B).call(g,H,V),"skip"!==H.node.trace.node.hoverinfo&&(H.node.fullData=H.node.trace,d.emit("plotly_unhover",{event:p.event,points:[H.node]})),e.loneUnhover(_._hoverlayer.node()))},select:function(B,H,V){var Z=H.node;Z.originalEvent=p.event,d._hoverdata=[Z],p.select(B).call(g,H,V),e.click(d,{target:!0})}}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":918,"./render":922,"@plotly/d3":58}],922:[function(y,$,ee){"use strict";var p=y("d3-force"),m=y("d3-interpolate").interpolateNumber,b=y("@plotly/d3"),v=y("@plotly/d3-sankey"),e=y("@plotly/d3-sankey-circular"),n=y("./constants"),t=y("tinycolor2"),a=y("../../components/color"),r=y("../../components/drawing"),u=y("../../lib"),s=u.strTranslate,i=u.strRotate,l=y("../../lib/gup"),c=l.keyFun,f=l.repeat,g=l.unwrap,h=y("../../lib/svg_text_utils"),o=y("../../registry"),x=y("../../constants/alignment"),d=x.CAP_SHIFT,w=x.LINE_SPACING;function _(G,X,te){var D,N=g(X),U=N.trace,Q=U.domain,j="h"===U.orientation,J=U.node.pad,K=U.node.thickness,re=G.width*(Q.x[1]-Q.x[0]),ne=G.height*(Q.y[1]-Q.y[0]),se=N._nodes,oe=N._links,pe=N.circular;(D=pe?e.sankeyCircular().circularLinkGap(0):v.sankey()).iterations(n.sankeyIterations).size(j?[re,ne]:[ne,re]).nodeWidth(K).nodePadding(J).nodeId(function(Me){return Me.pointNumber}).nodes(se).links(oe);var ce,ge,xe,we=D();for(var be in D.nodePadding()<J&&u.warn("node.pad was reduced to ",D.nodePadding()," to fit within the figure."),N._groupLookup){var Se,fe=parseInt(N._groupLookup[be]);for(ce=0;ce<we.nodes.length;ce++)if(we.nodes[ce].pointNumber===fe){Se=we.nodes[ce];break}if(Se){var me={pointNumber:parseInt(be),x0:Se.x0,x1:Se.x1,y0:Se.y0,y1:Se.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};we.nodes.unshift(me),Se.childrenNodes.unshift(me)}}if(function(){for(ce=0;ce<we.nodes.length;ce++){var Me,Ie,ze=we.nodes[ce],Ve={};for(ge=0;ge<ze.targetLinks.length;ge++)Me=(Ie=ze.targetLinks[ge]).source.pointNumber+":"+Ie.target.pointNumber,Ve.hasOwnProperty(Me)||(Ve[Me]=[]),Ve[Me].push(Ie);var Je=Object.keys(Ve);for(ge=0;ge<Je.length;ge++){var De=Ve[Me=Je[ge]],Be=0,Ze={};for(xe=0;xe<De.length;xe++)Ze[(Ie=De[xe]).label]||(Ze[Ie.label]=0),Ze[Ie.label]+=Ie.value,Be+=Ie.value;for(xe=0;xe<De.length;xe++)(Ie=De[xe]).flow={value:Be,labelConcentration:Ze[Ie.label]/Be,concentration:Ie.value/Be,links:De},Ie.concentrationscale&&(Ie.color=t(Ie.concentrationscale(Ie.flow.labelConcentration)))}var Ye=0;for(ge=0;ge<ze.sourceLinks.length;ge++)Ye+=ze.sourceLinks[ge].value;for(ge=0;ge<ze.sourceLinks.length;ge++)(Ie=ze.sourceLinks[ge]).concentrationOut=Ie.value/Ye;var tt=0;for(ge=0;ge<ze.targetLinks.length;ge++)tt+=ze.targetLinks[ge].value;for(ge=0;ge<ze.targetLinks.length;ge++)(Ie=ze.targetLinks[ge]).concenrationIn=Ie.value/tt}}(),U.node.x.length&&U.node.y.length){for(ce=0;ce<Math.min(U.node.x.length,U.node.y.length,we.nodes.length);ce++)if(U.node.x[ce]&&U.node.y[ce]){var Te=[U.node.x[ce]*re,U.node.y[ce]*ne];we.nodes[ce].x0=Te[0]-K/2,we.nodes[ce].x1=Te[0]+K/2;var _e=we.nodes[ce].y1-we.nodes[ce].y0;we.nodes[ce].y0=Te[1]-_e/2,we.nodes[ce].y1=Te[1]+_e/2}"snap"===U.arrangement&&function(Me){var Ie,ze,Ve=Me.map(function(Ye,tt){return{x0:Ye.x0,index:tt}}).sort(function(Ye,tt){return Ye.x0-tt.x0}),Je=[],De=-1,Be=-1/0;for(ce=0;ce<Ve.length;ce++){var Ze=Me[Ve[ce].index];Ze.x0>Be+K&&(De+=1,Ie=Ze.x0),Be=Ze.x0,Je[De]||(Je[De]=[]),Je[De].push(Ze),Ze.x0+=ze=Ie-Ze.x0,Ze.x1+=ze}return Je}(se=we.nodes).forEach(function(Ie){var ze,Ve,Je,De=0,Be=Ie.length;for(Ie.sort(function(Ze,Ye){return Ze.y0-Ye.y0}),Je=0;Je<Be;++Je)(ze=Ie[Je]).y0>=De||(Ve=De-ze.y0)>1e-6&&(ze.y0+=Ve,ze.y1+=Ve),De=ze.y1+J}),D.update(we)}return{circular:pe,key:te,trace:U,guid:u.randstr(),horizontal:j,width:re,height:ne,nodePad:U.node.pad,nodeLineColor:U.node.line.color,nodeLineWidth:U.node.line.width,linkLineColor:U.link.line.color,linkLineWidth:U.link.line.width,valueFormat:U.valueformat,valueSuffix:U.valuesuffix,textFont:U.textfont,translateX:Q.x[0]*G.width+G.margin.l,translateY:G.height-Q.y[1]*G.height+G.margin.t,dragParallel:j?ne:re,dragPerpendicular:j?re:ne,arrangement:U.arrangement,sankey:D,graph:we,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function T(G,X,te){var D=t(X.color),N=X.source.label+"|"+X.target.label+"__"+te;return X.trace=G.trace,X.curveNumber=G.trace.index,{circular:G.circular,key:N,traceId:G.key,pointNumber:X.pointNumber,link:X,tinyColorHue:a.tinyRGB(D),tinyColorAlpha:D.getAlpha(),linkPath:k,linkLineColor:G.linkLineColor,linkLineWidth:G.linkLineWidth,valueFormat:G.valueFormat,valueSuffix:G.valueSuffix,sankey:G.sankey,parent:G,interactionState:G.interactionState,flow:X.flow}}function k(){return function(G){if(G.link.circular)return te=(X=G.link).width/2,D=X.circularPathData,"top"===X.circularLinkType?"M "+D.targetX+" "+(D.targetY+te)+" L"+D.rightInnerExtent+" "+(D.targetY+te)+"A"+(D.rightLargeArcRadius+te)+" "+(D.rightSmallArcRadius+te)+" 0 0 1 "+(D.rightFullExtent-te)+" "+(D.targetY-D.rightSmallArcRadius)+"L"+(D.rightFullExtent-te)+" "+D.verticalRightInnerExtent+"A"+(D.rightLargeArcRadius+te)+" "+(D.rightLargeArcRadius+te)+" 0 0 1 "+D.rightInnerExtent+" "+(D.verticalFullExtent-te)+"L"+D.leftInnerExtent+" "+(D.verticalFullExtent-te)+"A"+(D.leftLargeArcRadius+te)+" "+(D.leftLargeArcRadius+te)+" 0 0 1 "+(D.leftFullExtent+te)+" "+D.verticalLeftInnerExtent+"L"+(D.leftFullExtent+te)+" "+(D.sourceY-D.leftSmallArcRadius)+"A"+(D.leftLargeArcRadius+te)+" "+(D.leftSmallArcRadius+te)+" 0 0 1 "+D.leftInnerExtent+" "+(D.sourceY+te)+"L"+D.sourceX+" "+(D.sourceY+te)+"L"+D.sourceX+" "+(D.sourceY-te)+"L"+D.leftInnerExtent+" "+(D.sourceY-te)+"A"+(D.leftLargeArcRadius-te)+" "+(D.leftSmallArcRadius-te)+" 0 0 0 "+(D.leftFullExtent-te)+" "+(D.sourceY-D.leftSmallArcRadius)+"L"+(D.leftFullExtent-te)+" "+D.verticalLeftInnerExtent+"A"+(D.leftLargeArcRadius-te)+" "+(D.leftLargeArcRadius-te)+" 0 0 0 "+D.leftInnerExtent+" "+(D.verticalFullExtent+te)+"L"+D.rightInnerExtent+" "+(D.verticalFullExtent+te)+"A"+(D.rightLargeArcRadius-te)+" "+(D.rightLargeArcRadius-te)+" 0 0 0 "+(D.rightFullExtent+te)+" "+D.verticalRightInnerExtent+"L"+(D.rightFullExtent+te)+" "+(D.targetY-D.rightSmallArcRadius)+"A"+(D.rightLargeArcRadius-te)+" "+(D.rightSmallArcRadius-te)+" 0 0 0 "+D.rightInnerExtent+" "+(D.targetY-te)+"L"+D.targetX+" "+(D.targetY-te)+"Z":"M "+D.targetX+" "+(D.targetY-te)+" L"+D.rightInnerExtent+" "+(D.targetY-te)+"A"+(D.rightLargeArcRadius+te)+" "+(D.rightSmallArcRadius+te)+" 0 0 0 "+(D.rightFullExtent-te)+" "+(D.targetY+D.rightSmallArcRadius)+"L"+(D.rightFullExtent-te)+" "+D.verticalRightInnerExtent+"A"+(D.rightLargeArcRadius+te)+" "+(D.rightLargeArcRadius+te)+" 0 0 0 "+D.rightInnerExtent+" "+(D.verticalFullExtent+te)+"L"+D.leftInnerExtent+" "+(D.verticalFullExtent+te)+"A"+(D.leftLargeArcRadius+te)+" "+(D.leftLargeArcRadius+te)+" 0 0 0 "+(D.leftFullExtent+te)+" "+D.verticalLeftInnerExtent+"L"+(D.leftFullExtent+te)+" "+(D.sourceY+D.leftSmallArcRadius)+"A"+(D.leftLargeArcRadius+te)+" "+(D.leftSmallArcRadius+te)+" 0 0 0 "+D.leftInnerExtent+" "+(D.sourceY-te)+"L"+D.sourceX+" "+(D.sourceY-te)+"L"+D.sourceX+" "+(D.sourceY+te)+"L"+D.leftInnerExtent+" "+(D.sourceY+te)+"A"+(D.leftLargeArcRadius-te)+" "+(D.leftSmallArcRadius-te)+" 0 0 1 "+(D.leftFullExtent-te)+" "+(D.sourceY+D.leftSmallArcRadius)+"L"+(D.leftFullExtent-te)+" "+D.verticalLeftInnerExtent+"A"+(D.leftLargeArcRadius-te)+" "+(D.leftLargeArcRadius-te)+" 0 0 1 "+D.leftInnerExtent+" "+(D.verticalFullExtent-te)+"L"+D.rightInnerExtent+" "+(D.verticalFullExtent-te)+"A"+(D.rightLargeArcRadius-te)+" "+(D.rightLargeArcRadius-te)+" 0 0 1 "+(D.rightFullExtent+te)+" "+D.verticalRightInnerExtent+"L"+(D.rightFullExtent+te)+" "+(D.targetY+D.rightSmallArcRadius)+"A"+(D.rightLargeArcRadius-te)+" "+(D.rightSmallArcRadius-te)+" 0 0 1 "+D.rightInnerExtent+" "+(D.targetY+te)+"L"+D.targetX+" "+(D.targetY+te)+"Z";var X,te,D,N=G.link.source.x1,U=G.link.target.x0,Q=m(N,U),j=Q(.5),J=Q(.5),K=G.link.y0-G.link.width/2,re=G.link.y0+G.link.width/2,ne=G.link.y1-G.link.width/2,se=G.link.y1+G.link.width/2;return"M"+N+","+K+"C"+j+","+K+" "+J+","+ne+" "+U+","+ne+"L"+U+","+se+"C"+J+","+se+" "+j+","+re+" "+N+","+re+"Z"}}function L(G,X){var te=t(X.color),D=n.nodePadAcross,N=G.nodePad/2;X.dx=X.x1-X.x0,X.dy=X.y1-X.y0;var U=X.dx,Q=Math.max(.5,X.dy),j="node_"+X.pointNumber;return X.group&&(j=u.randstr()),X.trace=G.trace,X.curveNumber=G.trace.index,{index:X.pointNumber,key:j,partOfGroup:X.partOfGroup||!1,group:X.group,traceId:G.key,trace:G.trace,node:X,nodePad:G.nodePad,nodeLineColor:G.nodeLineColor,nodeLineWidth:G.nodeLineWidth,textFont:G.textFont,size:G.horizontal?G.height:G.width,visibleWidth:Math.ceil(U),visibleHeight:Q,zoneX:-D,zoneY:-N,zoneWidth:U+2*D,zoneHeight:Q+2*N,labelY:G.horizontal?X.dy/2+1:X.dx/2+1,left:1===X.originalLayer,sizeAcross:G.width,forceLayouts:G.forceLayouts,horizontal:G.horizontal,darkBackground:te.getBrightness()<=128,tinyColorHue:a.tinyRGB(te),tinyColorAlpha:te.getAlpha(),valueFormat:G.valueFormat,valueSuffix:G.valueSuffix,sankey:G.sankey,graph:G.graph,arrangement:G.arrangement,uniqueNodeLabelPathId:[G.guid,G.key,j].join("_"),interactionState:G.interactionState,figure:G}}function M(G){G.attr("transform",function(X){return s(X.node.x0.toFixed(3),X.node.y0.toFixed(3))})}function O(G){G.call(M)}function P(G,X){G.call(O),X.attr("d",k())}function S(G){G.attr("width",function(X){return X.node.x1-X.node.x0}).attr("height",function(X){return X.visibleHeight})}function E(G){return G.link.width>1||G.linkLineWidth>0}function R(G){return s(G.translateX,G.translateY)+(G.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function B(G,X,te){G.on(".basic",null).on("mouseover.basic",function(D){D.interactionState.dragInProgress||D.partOfGroup||(te.hover(this,D,X),D.interactionState.hovered=[this,D])}).on("mousemove.basic",function(D){D.interactionState.dragInProgress||D.partOfGroup||(te.follow(this,D),D.interactionState.hovered=[this,D])}).on("mouseout.basic",function(D){D.interactionState.dragInProgress||D.partOfGroup||(te.unhover(this,D,X),D.interactionState.hovered=!1)}).on("click.basic",function(D){D.interactionState.hovered&&(te.unhover(this,D,X),D.interactionState.hovered=!1),D.interactionState.dragInProgress||D.partOfGroup||te.select(this,D,X)})}function H(G,X,te,D){var N=b.behavior.drag().origin(function(U){return{x:U.node.x0+U.visibleWidth/2,y:U.node.y0+U.visibleHeight/2}}).on("dragstart",function(U){if("fixed"!==U.arrangement&&(u.ensureSingle(D._fullLayout._infolayer,"g","dragcover",function(j){D._fullLayout._dragCover=j}),u.raiseToTop(this),U.interactionState.dragInProgress=U.node,Z(U.node),U.interactionState.hovered&&(te.nodeEvents.unhover.apply(0,U.interactionState.hovered),U.interactionState.hovered=!1),"snap"===U.arrangement)){var Q=U.traceId+"|"+U.key;U.forceLayouts[Q]?U.forceLayouts[Q].alpha(1):function(j,J,K,re){!function(se){for(var oe=0;oe<se.length;oe++)se[oe].y=(se[oe].y0+se[oe].y1)/2,se[oe].x=(se[oe].x0+se[oe].x1)/2}(K.graph.nodes);var oe,pe,ce,ne=K.graph.nodes.filter(function(se){return se.originalX===K.node.originalX}).filter(function(se){return!se.partOfGroup});K.forceLayouts[J]=p.forceSimulation(ne).alphaDecay(0).force("collide",p.forceCollide().radius(function(se){return se.dy/2+K.nodePad/2}).strength(1).iterations(n.forceIterations)).force("constrain",(oe=J,pe=ne,ce=K,function(){for(var ge=0,xe=0;xe<pe.length;xe++){var we=pe[xe];we===ce.interactionState.dragInProgress?(we.x=we.lastDraggedX,we.y=we.lastDraggedY):(we.vx=(we.originalX-we.x)/n.forceTicksPerFrame,we.y=Math.min(ce.size-we.dy/2,Math.max(we.dy/2,we.y))),ge=Math.max(ge,Math.abs(we.vx),Math.abs(we.vy))}!ce.interactionState.dragInProgress&&ge<.1&&ce.forceLayouts[oe].alpha()>0&&ce.forceLayouts[oe].alpha(0)})).stop()}(0,Q,U),j=G,J=X,K=U,re=Q,ne=D,window.requestAnimationFrame(function se(){var oe;for(oe=0;oe<n.forceTicksPerFrame;oe++)K.forceLayouts[re].tick();if(function(ce){for(var ge=0;ge<ce.length;ge++)ce[ge].y0=ce[ge].y-ce[ge].dy/2,ce[ge].y1=ce[ge].y0+ce[ge].dy,ce[ge].x0=ce[ge].x-ce[ge].dx/2,ce[ge].x1=ce[ge].x0+ce[ge].dx}(K.graph.nodes),K.sankey.update(K.graph),P(j.filter(W(K)),J),K.forceLayouts[re].alpha()>0)window.requestAnimationFrame(se);else{var pe=K.node.originalX;K.node.x0=pe-K.visibleWidth/2,K.node.x1=pe+K.visibleWidth/2,V(K,ne)}})}var j,J,K,re,ne}).on("drag",function(U){if("fixed"!==U.arrangement){var Q=b.event.x,j=b.event.y;"snap"===U.arrangement?(U.node.x0=Q-U.visibleWidth/2,U.node.x1=Q+U.visibleWidth/2,U.node.y0=j-U.visibleHeight/2,U.node.y1=j+U.visibleHeight/2):("freeform"===U.arrangement&&(U.node.x0=Q-U.visibleWidth/2,U.node.x1=Q+U.visibleWidth/2),j=Math.max(0,Math.min(U.size-U.visibleHeight/2,j)),U.node.y0=j-U.visibleHeight/2,U.node.y1=j+U.visibleHeight/2),Z(U.node),"snap"!==U.arrangement&&(U.sankey.update(U.graph),P(G.filter(W(U)),X))}}).on("dragend",function(U){if("fixed"!==U.arrangement){U.interactionState.dragInProgress=!1;for(var Q=0;Q<U.node.childrenNodes.length;Q++)U.node.childrenNodes[Q].x=U.node.x,U.node.childrenNodes[Q].y=U.node.y;"snap"!==U.arrangement&&V(U,D)}});G.on(".drag",null).call(N)}function V(G,X){for(var te=[],D=[],N=0;N<G.graph.nodes.length;N++){var Q=(G.graph.nodes[N].y0+G.graph.nodes[N].y1)/2;te.push((G.graph.nodes[N].x0+G.graph.nodes[N].x1)/2/G.figure.width),D.push(Q/G.figure.height)}o.call("_guiRestyle",X,{"node.x":[te],"node.y":[D]},G.trace.index).then(function(){X._fullLayout._dragCover&&X._fullLayout._dragCover.remove()})}function Z(G){G.lastDraggedX=G.x0+G.dx/2,G.lastDraggedY=G.y0+G.dy/2}function W(G){return function(X){return X.node.originalX===G.node.originalX}}$.exports=function(G,X,te,D,N){var U=!1;u.ensureSingle(G._fullLayout._infolayer,"g","first-render",function(){U=!0});var Q=G._fullLayout._dragCover,j=te.filter(function(ce){return g(ce).trace.visible}).map(_.bind(null,D)),J=X.selectAll("."+n.cn.sankey).data(j,c);J.exit().remove(),J.enter().append("g").classed(n.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",R),J.each(function(ce,ge){G._fullData[ge]._sankey=ce;var xe="bgsankey-"+ce.trace.uid+"-"+ge;u.ensureSingle(G._fullLayout._draggers,"rect",xe),G._fullData[ge]._bgRect=b.select("."+xe),G._fullData[ge]._bgRect.style("pointer-events","all").attr("width",ce.width).attr("height",ce.height).attr("x",ce.translateX).attr("y",ce.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),J.transition().ease(n.ease).duration(n.duration).attr("transform",R);var K=J.selectAll("."+n.cn.sankeyLinks).data(f,c);K.enter().append("g").classed(n.cn.sankeyLinks,!0).style("fill","none");var re=K.selectAll("."+n.cn.sankeyLink).data(function(ce){return ce.graph.links.filter(function(ge){return ge.value}).map(T.bind(null,ce))},c);re.enter().append("path").classed(n.cn.sankeyLink,!0).call(B,J,N.linkEvents),re.style("stroke",function(ce){return E(ce)?a.tinyRGB(t(ce.linkLineColor)):ce.tinyColorHue}).style("stroke-opacity",function(ce){return E(ce)?a.opacity(ce.linkLineColor):ce.tinyColorAlpha}).style("fill",function(ce){return ce.tinyColorHue}).style("fill-opacity",function(ce){return ce.tinyColorAlpha}).style("stroke-width",function(ce){return E(ce)?ce.linkLineWidth:1}).attr("d",k()),re.style("opacity",function(){return G._context.staticPlot||U||Q?1:0}).transition().ease(n.ease).duration(n.duration).style("opacity",1),re.exit().transition().ease(n.ease).duration(n.duration).style("opacity",0).remove();var ne=J.selectAll("."+n.cn.sankeyNodeSet).data(f,c);ne.enter().append("g").classed(n.cn.sankeyNodeSet,!0),ne.style("cursor",function(ce){switch(ce.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var se=ne.selectAll("."+n.cn.sankeyNode).data(function(ce){var ge=ce.graph.nodes;return function(xe){var we,be=[];for(we=0;we<xe.length;we++)xe[we].originalX=(xe[we].x0+xe[we].x1)/2,xe[we].originalY=(xe[we].y0+xe[we].y1)/2,-1===be.indexOf(xe[we].originalX)&&be.push(xe[we].originalX);for(be.sort(function(Se,fe){return Se-fe}),we=0;we<xe.length;we++)xe[we].originalLayerIndex=be.indexOf(xe[we].originalX),xe[we].originalLayer=xe[we].originalLayerIndex/(be.length-1)}(ge),ge.map(L.bind(null,ce))},c);se.enter().append("g").classed(n.cn.sankeyNode,!0).call(M).style("opacity",function(ce){return!G._context.staticPlot&&!U||ce.partOfGroup?0:1}),se.call(B,J,N.nodeEvents).call(H,re,N,G),se.transition().ease(n.ease).duration(n.duration).call(M).style("opacity",function(ce){return ce.partOfGroup?0:1}),se.exit().transition().ease(n.ease).duration(n.duration).style("opacity",0).remove();var oe=se.selectAll("."+n.cn.nodeRect).data(f);oe.enter().append("rect").classed(n.cn.nodeRect,!0).call(S),oe.style("stroke-width",function(ce){return ce.nodeLineWidth}).style("stroke",function(ce){return a.tinyRGB(t(ce.nodeLineColor))}).style("stroke-opacity",function(ce){return a.opacity(ce.nodeLineColor)}).style("fill",function(ce){return ce.tinyColorHue}).style("fill-opacity",function(ce){return ce.tinyColorAlpha}),oe.transition().ease(n.ease).duration(n.duration).call(S);var pe=se.selectAll("."+n.cn.nodeLabel).data(f);pe.enter().append("text").classed(n.cn.nodeLabel,!0).style("cursor","default"),pe.attr("data-notex",1).text(function(ce){return ce.node.label}).each(function(ce){var ge=b.select(this);r.font(ge,ce.textFont),h.convertToTspans(ge,G)}).style("text-shadow",h.makeTextShadow(G._fullLayout.paper_bgcolor)).attr("text-anchor",function(ce){return ce.horizontal&&ce.left?"end":"start"}).attr("transform",function(ce){var ge=b.select(this),xe=h.lineCount(ge),be=ce.nodeLineWidth/2+3,Se=((ce.horizontal?ce.visibleHeight:ce.visibleWidth)-ce.textFont.size*((xe-1)*w-d))/2;ce.horizontal&&(ce.left?be=-be:be+=ce.visibleWidth);var fe=ce.horizontal?"":"scale(-1,1)"+i(90);return s(ce.horizontal?be:Se,ce.horizontal?Se:be)+fe}),pe.transition().ease(n.ease).duration(n.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":918,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],923:[function(y,$,ee){"use strict";$.exports=function(p,m){for(var b=[],v=p.cd[0].trace,e=v._sankey.graph.nodes,n=0;n<e.length;n++){var t=e[n];if(!t.partOfGroup){var a=[(t.x0+t.x1)/2,(t.y0+t.y1)/2];"v"===v.orientation&&a.reverse(),m&&m.contains(a,!1,n,p)&&b.push({pointNumber:t.pointNumber})}}return b}},{}],924:[function(y,$,ee){"use strict";var p=y("../../lib");$.exports=function(m,b){for(var v=0;v<m.length;v++)m[v].i=v;p.mergeArray(b.text,m,"tx"),p.mergeArray(b.texttemplate,m,"txt"),p.mergeArray(b.hovertext,m,"htx"),p.mergeArray(b.customdata,m,"data"),p.mergeArray(b.textposition,m,"tp"),b.textfont&&(p.mergeArrayCastPositive(b.textfont.size,m,"ts"),p.mergeArray(b.textfont.color,m,"tc"),p.mergeArray(b.textfont.family,m,"tf"));var e=b.marker;if(e){p.mergeArrayCastPositive(e.size,m,"ms"),p.mergeArrayCastPositive(e.opacity,m,"mo"),p.mergeArray(e.symbol,m,"mx"),p.mergeArray(e.color,m,"mc");var n=e.line;e.line&&(p.mergeArray(n.color,m,"mlc"),p.mergeArrayCastPositive(n.width,m,"mlw"));var t=e.gradient;t&&"none"!==t.type&&(p.mergeArray(t.type,m,"mgt"),p.mergeArray(t.color,m,"mgc"))}}},{"../../lib":503}],925:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=y("../../plots/template_attributes").texttemplateAttrs,b=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../../components/colorscale/attributes"),e=y("../../plots/font_attributes"),n=y("../../components/drawing/attributes").dash,t=y("../../components/drawing"),a=y("./constants"),r=y("../../lib/extend").extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:p("x"),yhoverformat:p("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:m({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:b({},{keys:a.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},n,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:r({symbol:{valType:"enumerated",values:t.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},v("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},v("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":929}],926:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib"),b=y("../../plots/cartesian/axes"),v=y("../../plots/cartesian/align_period"),e=y("../../constants/numerical").BADNUM,n=y("./subtypes"),t=y("./colorscale_calc"),a=y("./arrays_to_calcdata"),r=y("./calc_selection");function u(f,g,h,o,x,d,w){var _=g._length,T=f._fullLayout,k=h._id,L=o._id,M=T._firstScatter[l(g)]===g.uid,O=(c(g,T,h,o)||{}).orientation,P=g.fill;h._minDtick=0,o._minDtick=0;var S={padded:!0},E={padded:!0};w&&(S.ppad=E.ppad=w);var R=_<2||x[0]!==x[_-1]||d[0]!==d[_-1];R&&("tozerox"===P||"tonextx"===P&&(M||"h"===O))?S.tozero=!0:(g.error_y||{}).visible||"tonexty"!==P&&"tozeroy"!==P&&(n.hasMarkers(g)||n.hasText(g))||(S.padded=!1,S.ppad=0),R&&("tozeroy"===P||"tonexty"===P&&(M||"v"===O))?E.tozero=!0:"tonextx"!==P&&"tozerox"!==P||(E.padded=!1),k&&(g._extremes[k]=b.findExtremes(h,x,S)),L&&(g._extremes[L]=b.findExtremes(o,d,E))}function s(f,g){if(n.hasMarkers(f)){var h,o=f.marker,x=1.6*(f.marker.sizeref||1);if(h="area"===f.marker.sizemode?function(k){return Math.max(Math.sqrt((k||0)/x),3)}:function(k){return Math.max((k||0)/x,3)},m.isArrayOrTypedArray(o.size)){var d={type:"linear"};b.setConvert(d);for(var w=d.makeCalcdata(f.marker,"size"),_=new Array(g),T=0;T<g;T++)_[T]=h(w[T]);return _}return h(o.size)}}function i(f,g){var h=l(g),o=f._firstScatter;o[h]||(o[h]=g.uid)}function l(f){var g=f.stackgroup;return f.xaxis+f.yaxis+f.type+(g?"-"+g:"")}function c(f,g,h,o){var x=f.stackgroup;if(x){var d=g._scatterStackOpts[h._id+o._id][x],w="v"===d.orientation?o:h;return"linear"===w.type||"log"===w.type?d:void 0}}$.exports={calc:function(f,g){var h,o,x,d,w,_,T=f._fullLayout,k=b.getFromId(f,g.xaxis||"x"),L=b.getFromId(f,g.yaxis||"y"),M=k.makeCalcdata(g,"x"),O=L.makeCalcdata(g,"y"),P=v(g,k,"x",M),S=v(g,L,"y",O),E=P.vals,R=S.vals,B=g._length,H=new Array(B),V=g.ids,Z=c(g,T,k,L),W=!1;i(T,g);var G,X="x",te="y";Z?(m.pushUnique(Z.traceIndices,g._expandedIndex),(h="v"===Z.orientation)?(te="s",G="x"):(X="s",G="y"),w="interpolate"===Z.stackgaps):u(f,g,k,L,E,R,s(g,B));var D=!!g.xperiodalignment,N=!!g.yperiodalignment;for(o=0;o<B;o++){var U=H[o]={},Q=p(E[o]),j=p(R[o]);Q&&j?(U[X]=E[o],U[te]=R[o],D&&(U.orig_x=M[o],U.xEnd=P.ends[o],U.xStart=P.starts[o]),N&&(U.orig_y=O[o],U.yEnd=S.ends[o],U.yStart=S.starts[o])):Z&&(h?Q:j)?(U[G]=h?E[o]:R[o],U.gap=!0,w?(U.s=e,W=!0):U.s=0):U[X]=U[te]=e,V&&(U.id=String(V[o]))}if(a(H,g),t(f,g),r(H,g),Z){for(o=0;o<H.length;)H[o][G]===e?H.splice(o,1):o++;if(m.sort(H,function(ne,se){return ne[G]-se[G]||ne.i-se.i}),W){for(o=0;o<H.length-1&&H[o].gap;)o++;for((_=H[o].s)||(_=H[o].s=0),x=0;x<o;x++)H[x].s=_;for(d=H.length-1;d>o&&H[d].gap;)d--;for(_=H[d].s,x=H.length-1;x>d;x--)H[x].s=_;for(;o<d;)if(H[++o].gap){for(x=o+1;H[x].gap;)x++;for(var J=H[o-1][G],K=H[o-1].s,re=(H[x].s-K)/(H[x][G]-J);o<x;)H[o].s=K+(H[o][G]-J)*re,o++}}}return H},calcMarkerSize:s,calcAxisExpansion:u,setFirstScatter:i,getStackOpts:c}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":924,"./calc_selection":927,"./colorscale_calc":928,"./subtypes":950,"fast-isnumeric":190}],927:[function(y,$,ee){"use strict";var p=y("../../lib");$.exports=function(m,b){p.isArrayOrTypedArray(b.selectedpoints)&&p.tagSelected(m,b)}},{"../../lib":503}],928:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/helpers").hasColorscale,m=y("../../components/colorscale/calc"),b=y("./subtypes");$.exports=function(v,e){b.hasLines(e)&&p(e,"line")&&m(v,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),b.hasMarkers(e)&&(p(e,"marker")&&m(v,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),p(e,"marker.line")&&m(v,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":950}],929:[function(y,$,ee){"use strict";$.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],930:[function(y,$,ee){"use strict";var p=y("./calc");function m(b,v,e,n,t,a,r){t[n]=!0;var i,l,f,g,h,u={i:null,gap:!0,s:0};if(u[r]=e,b.splice(v,0,u),v&&e===b[v-1][r]){var s=b[v-1];u.s=s.s,u.i=s.i,u.gap=s.gap}else a&&(u.s=(f=r,g=(i=b)[(l=v)-1],(h=i[l+1])?g?g.s+(h.s-g.s)*(e-g[f])/(h[f]-g[f]):h.s:g.s));v||(b[0].t=b[1].t,b[0].trace=b[1].trace,delete b[1].t,delete b[1].trace)}$.exports=function(b,v){var e=v.xaxis,n=v.yaxis,a=b._fullLayout._scatterStackOpts[e._id+n._id];if(a){var r,u,s,i,l,c,f,g,h,o,x,d,w,_,T,k=b.calcdata;for(var L in a){var M=(o=a[L]).traceIndices;if(M.length){for(x="interpolate"===o.stackgaps,d=o.groupnorm,"v"===o.orientation?(w="x",_="y"):(w="y",_="x"),T=new Array(M.length),r=0;r<T.length;r++)T[r]=!1;c=k[M[0]];var O=new Array(c.length);for(r=0;r<c.length;r++)O[r]=c[r][w];for(r=1;r<M.length;r++){for(l=k[M[r]],u=s=0;u<l.length;u++){for(f=l[u][w];f>O[s]&&s<O.length;s++)m(l,u,O[s],r,T,x,w),u++;if(f!==O[s]){for(i=0;i<r;i++)m(k[M[i]],s,f,i,T,x,w);O.splice(s,0,f)}s++}for(;s<O.length;s++)m(l,u,O[s],r,T,x,w),u++}var P=O.length;for(u=0;u<c.length;u++){for(g=c[u][_]=c[u].s,r=1;r<M.length;r++)(l=k[M[r]])[0].trace._rawLength=l[0].trace._length,l[0].trace._length=P,l[u][_]=g+=l[u].s;if(d)for(h=("fraction"===d?g:g/100)||1,r=0;r<M.length;r++){var S=k[M[r]][u];S[_]/=h,S.sNorm=S.s/h}}for(r=0;r<M.length;r++){var E=(l=k[M[r]])[0].trace,R=p.calcMarkerSize(E,E._rawLength),B=Array.isArray(R);if(R&&T[r]||B){var H=R;for(R=new Array(P),u=0;u<P;u++)R[u]=l[u].gap?0:B?H[l[u].i]:H}var V=new Array(P),Z=new Array(P);for(u=0;u<P;u++)V[u]=l[u].x,Z[u]=l[u].y;p.calcAxisExpansion(b,E,e,n,V,Z,R),l[0].t.orientation=o.orientation}}}}}},{"./calc":926}],931:[function(y,$,ee){"use strict";$.exports=function(p){for(var m=0;m<p.length;m++){var b=p[m];if("scatter"===b.type){var v=b.fill;if("none"!==v&&"toself"!==v&&(b.opacity=void 0,"tonexty"===v||"tonextx"===v))for(var e=m-1;e>=0;e--){var n=p[e];if("scatter"===n.type&&n.xaxis===b.xaxis&&n.yaxis===b.yaxis){n.opacity=void 0;break}}}}}},{}],932:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../registry"),b=y("./attributes"),v=y("./constants"),e=y("./subtypes"),n=y("./xy_defaults"),t=y("./period_defaults"),a=y("./stack_defaults"),r=y("./marker_defaults"),u=y("./line_defaults"),s=y("./line_shape_defaults"),i=y("./text_defaults"),l=y("./fillcolor_defaults");$.exports=function(c,f,g,h){function o(M,O){return p.coerce(c,f,b,M,O)}var x=n(c,f,h,o);if(x||(f.visible=!1),f.visible){t(c,f,h,o),o("xhoverformat"),o("yhoverformat");var d=a(c,f,h,o),w=!d&&x<v.PTS_LINESONLY?"lines+markers":"lines";o("text"),o("hovertext"),o("mode",w),e.hasLines(f)&&(u(c,f,g,h,o),s(c,f,o),o("connectgaps"),o("line.simplify")),e.hasMarkers(f)&&r(c,f,g,h,o,{gradient:!0}),e.hasText(f)&&(o("texttemplate"),i(c,f,h,o));var _=[];(e.hasMarkers(f)||e.hasText(f))&&(o("cliponaxis"),o("marker.maxdisplayed"),_.push("points")),o("fill",d?d.fillDflt:"none"),"none"!==f.fill&&(l(c,f,g,o),e.hasLines(f)||s(c,f,o));var T=(f.line||{}).color,k=(f.marker||{}).color;"tonext"!==f.fill&&"toself"!==f.fill||_.push("fills"),o("hoveron",_.join("+")||"points"),"fills"!==f.hoveron&&o("hovertemplate");var L=m.getComponentMethod("errorbars","supplyDefaults");L(c,f,T||k||g,{axis:"y"}),L(c,f,T||k||g,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(f,o)}}},{"../../lib":503,"../../registry":638,"./attributes":925,"./constants":929,"./fillcolor_defaults":933,"./line_defaults":938,"./line_shape_defaults":940,"./marker_defaults":944,"./period_defaults":945,"./stack_defaults":948,"./subtypes":950,"./text_defaults":951,"./xy_defaults":952}],933:[function(y,$,ee){"use strict";var p=y("../../components/color"),m=y("../../lib").isArrayOrTypedArray;$.exports=function(b,v,e,n){var t=!1;if(v.marker){var a=v.marker.color,r=(v.marker.line||{}).color;a&&!m(a)?t=a:r&&!m(r)&&(t=r)}n("fillcolor",p.addOpacity((v.line||{}).color||t||e,.5))}},{"../../components/color":366,"../../lib":503}],934:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes");$.exports=function(m,b,v){var e={},n={_fullLayout:v},t=p.getFromTrace(n,b,"x"),a=p.getFromTrace(n,b,"y");return e.xLabel=p.tickText(t,t.c2l(m.x),!0).text,e.yLabel=p.tickText(a,a.c2l(m.y),!0).text,e}},{"../../plots/cartesian/axes":554}],935:[function(y,$,ee){"use strict";var p=y("../../components/color"),m=y("./subtypes");$.exports=function(b,v){var e,n;if("lines"===b.mode)return(e=b.line.color)&&p.opacity(e)?e:b.fillcolor;if("none"===b.mode)return b.fill?b.fillcolor:"";var t=v.mcc||(b.marker||{}).color,a=v.mlcc||((b.marker||{}).line||{}).color;return(n=t&&p.opacity(t)?t:a&&p.opacity(a)&&(v.mlw||((b.marker||{}).line||{}).width)?a:"")?p.opacity(n)<.3?p.addOpacity(n,.3):n:(e=(b.line||{}).color)&&p.opacity(e)&&m.hasLines(b)&&b.line.width?e:b.fillcolor}},{"../../components/color":366,"./subtypes":950}],936:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/fx"),b=y("../../registry"),v=y("./get_trace_color"),e=y("../../components/color"),n=p.fillText;$.exports=function(t,a,r,u){var s=t.cd,i=s[0].trace,l=t.xa,c=t.ya,f=l.c2p(a),g=c.c2p(r),h=[f,g],o=i.hoveron||"",x=-1!==i.mode.indexOf("markers")?3:.5,d=!!i.xperiodalignment,w=!!i.yperiodalignment;if(-1!==o.indexOf("points")){var _=function(oe){var pe=Math.max(x,oe.mrc||0),ce=l.c2p(oe.x)-f,ge=c.c2p(oe.y)-g;return Math.max(Math.sqrt(ce*ce+ge*ge)-pe,1-x/pe)},T=m.getDistanceFunction(u,function(oe){if(d){var pe=l.c2p(oe.xStart),ce=l.c2p(oe.xEnd);return f>=Math.min(pe,ce)&&f<=Math.max(pe,ce)?0:1/0}var ge=Math.max(3,oe.mrc||0),xe=1-1/ge,we=Math.abs(l.c2p(oe.x)-f);return we<ge?xe*we/ge:we-ge+xe},function(oe){if(w){var pe=c.c2p(oe.yStart),ce=c.c2p(oe.yEnd);return g>=Math.min(pe,ce)&&g<=Math.max(pe,ce)?0:1/0}var ge=Math.max(3,oe.mrc||0),xe=1-1/ge,we=Math.abs(c.c2p(oe.y)-g);return we<ge?xe*we/ge:we-ge+xe},_);if(m.getClosest(s,T,t),!1!==t.index){var k=s[t.index],L=l.c2p(k.x,!0),M=c.c2p(k.y,!0),O=k.mrc||1;t.index=k.i;var P=s[0].t.orientation,S=P&&(k.sNorm||k.s),E="h"===P?S:void 0!==k.orig_x?k.orig_x:k.x,R="v"===P?S:void 0!==k.orig_y?k.orig_y:k.y;return p.extendFlat(t,{color:v(i,k),x0:L-O,x1:L+O,xLabelVal:E,y0:M-O,y1:M+O,yLabelVal:R,spikeDistance:_(k),hovertemplate:i.hovertemplate}),n(k,i,t),b.getComponentMethod("errorbars","hoverInfo")(k,i,t),[t]}}if(-1!==o.indexOf("fills")&&i._polygons){var B,H,V,Z,W,G,te,D,N=i._polygons,U=[],Q=!1,j=1/0,J=-1/0,K=1/0,re=-1/0;for(B=0;B<N.length;B++)(V=N[B]).contains(h)&&(Q=!Q,U.push(V),K=Math.min(K,V.ymin),re=Math.max(re,V.ymax));if(Q){var ne=((K=Math.max(K,0))+(re=Math.min(re,c._length)))/2;for(B=0;B<U.length;B++)for(Z=U[B].pts,H=1;H<Z.length;H++)(te=Z[H-1][1])>ne!=(D=Z[H][1])>=ne&&(G=Z[H-1][0],D-te&&(W=G+(Z[H][0]-G)*(ne-te)/(D-te),j=Math.min(j,W),J=Math.max(J,W)));j=Math.max(j,0),J=Math.min(J,l._length);var se=e.defaultLine;return e.opacity(i.fillcolor)?se=i.fillcolor:e.opacity((i.line||{}).color)&&(se=i.line.color),p.extendFlat(t,{distance:t.maxHoverDistance,x0:j,x1:J,y0:ne,y1:ne,color:se,hovertemplate:!1}),delete t.index,t.text=i.text&&!Array.isArray(i.text)?String(i.text):i.name,[t]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":935}],937:[function(y,$,ee){"use strict";var p=y("./subtypes");$.exports={hasLines:p.hasLines,hasMarkers:p.hasMarkers,hasText:p.hasText,isBubble:p.isBubble,attributes:y("./attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("./cross_trace_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./cross_trace_calc"),arraysToCalcdata:y("./arrays_to_calcdata"),plot:y("./plot"),colorbar:y("./marker_colorbar"),formatLabels:y("./format_labels"),style:y("./style").style,styleOnSelect:y("./style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":924,"./attributes":925,"./calc":926,"./cross_trace_calc":930,"./cross_trace_defaults":931,"./defaults":932,"./format_labels":934,"./hover":936,"./marker_colorbar":943,"./plot":946,"./select":947,"./style":949,"./subtypes":950}],938:[function(y,$,ee){"use strict";var p=y("../../lib").isArrayOrTypedArray,m=y("../../components/colorscale/helpers").hasColorscale,b=y("../../components/colorscale/defaults");$.exports=function(v,e,n,t,a,r){var u=(v.marker||{}).color;a("line.color",n),m(v,"line")?b(v,e,t,a,{prefix:"line.",cLetter:"c"}):a("line.color",!p(u)&&u||n),a("line.width"),(r||{}).noDash||a("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],939:[function(y,$,ee){"use strict";var p=y("../../constants/numerical"),m=p.BADNUM,b=p.LOG_CLIP,v=b+.5,e=b-.5,n=y("../../lib"),t=n.segmentsIntersect,a=n.constrain,r=y("./constants");$.exports=function(u,s){var i,l,c,f,g,h,o,x,d,w,_,T,k,L,M,O,P,S,E=s.xaxis,R=s.yaxis,B="log"===E.type,H="log"===R.type,V=E._length,Z=R._length,W=s.connectGaps,G=s.baseTolerance,X=s.shape,te="linear"===X,D=s.fill&&"none"!==s.fill,N=[],U=r.minTolerance,Q=u.length,j=new Array(Q),J=0;function K(Ye){var tt=u[Ye];if(!tt)return!1;var st=s.linearized?E.l2p(tt.x):E.c2p(tt.x),vt=s.linearized?R.l2p(tt.y):R.c2p(tt.y);if(st===m){if(B&&(st=E.c2p(tt.x,!0)),st===m)return!1;H&&vt===m&&(st*=Math.abs(E._m*Z*(E._m>0?v:e)/(R._m*V*(R._m>0?v:e)))),st*=1e3}if(vt===m){if(H&&(vt=R.c2p(tt.y,!0)),vt===m)return!1;vt*=1e3}return[st,vt]}function re(Ye,tt,st,vt){var Pt=st-Ye,Mt=vt-tt,rt=.5-Ye,et=.5-tt,bt=Pt*Pt+Mt*Mt,Rt=Pt*rt+Mt*et;if(Rt>0&&Rt<bt){var Yt=rt*Mt-et*Pt;if(Yt*Yt<bt)return!0}}function ne(Ye,tt){var st=Ye[0]/V,vt=Ye[1]/Z,Pt=Math.max(0,-st,st-1,-vt,vt-1);return Pt&&void 0!==P&&re(st,vt,P,S)&&(Pt=0),Pt&&tt&&re(st,vt,tt[0]/V,tt[1]/Z)&&(Pt=0),(1+r.toleranceGrowth*Pt)*G}function se(Ye,tt){var st=Ye[0]-tt[0],vt=Ye[1]-tt[1];return Math.sqrt(st*st+vt*vt)}var oe,pe,ce,ge,xe,we,be,Se=r.maxScreensAway,fe=-V*Se,me=V*(1+Se),Te=-Z*Se,_e=Z*(1+Se),Me=[[fe,Te,me,Te],[me,Te,me,_e],[me,_e,fe,_e],[fe,_e,fe,Te]];function Ie(Ye){if(Ye[0]<fe||Ye[0]>me||Ye[1]<Te||Ye[1]>_e)return[a(Ye[0],fe,me),a(Ye[1],Te,_e)]}function ze(Ye,tt){return Ye[0]===tt[0]&&(Ye[0]===fe||Ye[0]===me)||Ye[1]===tt[1]&&(Ye[1]===Te||Ye[1]===_e)||void 0}function Ve(Ye,tt,st){return function(vt,Pt){var Mt=Ie(vt),rt=Ie(Pt),et=[];if(Mt&&rt&&ze(Mt,rt))return et;Mt&&et.push(Mt),rt&&et.push(rt);var bt=2*n.constrain((vt[Ye]+Pt[Ye])/2,tt,st)-((Mt||vt)[Ye]+(rt||Pt)[Ye]);return bt&&((Mt&&rt?bt>0==Mt[Ye]>rt[Ye]?Mt:rt:Mt||rt)[Ye]+=bt),et}}function Je(Ye){var tt=Ye[0],st=Ye[1],vt=tt===j[J-1][0],Pt=st===j[J-1][1];if(!vt||!Pt)if(J>1){var Mt=tt===j[J-2][0],rt=st===j[J-2][1];vt&&(tt===fe||tt===me)&&Mt?rt?J--:j[J-1]=Ye:Pt&&(st===Te||st===_e)&&rt?Mt?J--:j[J-1]=Ye:j[J++]=Ye}else j[J++]=Ye}function De(Ye){j[J-1][0]!==Ye[0]&&j[J-1][1]!==Ye[1]&&Je([ce,ge]),Je(Ye),xe=null,ce=ge=0}function Be(Ye){if(P=Ye[0]/V,S=Ye[1]/Z,pe=Ye[1]<Te?Te:Ye[1]>_e?_e:0,(oe=Ye[0]<fe?fe:Ye[0]>me?me:0)||pe){if(J)if(xe){var tt=be(xe,Ye);tt.length>1&&(De(tt[0]),j[J++]=tt[1])}else we=be(j[J-1],Ye)[0],j[J++]=we;else j[J++]=[oe||Ye[0],pe||Ye[1]];var st=j[J-1];oe&&pe&&(st[0]!==oe||st[1]!==pe)?(xe&&(ce!==oe&&ge!==pe?Je(ce&&ge?(Mt=(Pt=Ye)[0]-(vt=xe)[0],rt=(Pt[1]-vt[1])/Mt,(vt[1]*Pt[0]-Pt[1]*vt[0])/Mt>0?[rt>0?fe:me,_e]:[rt>0?me:fe,Te]):[ce||oe,ge||pe]):ce&&ge&&Je([ce,ge])),Je([oe,pe])):ce-oe&&ge-pe&&Je([oe||ce,pe||ge]),xe=Ye,ce=oe,ge=pe}else xe&&De(be(xe,Ye)[0]),j[J++]=Ye;var vt,Pt,Mt,rt}for("linear"===X||"spline"===X?be=function(Ye,tt){for(var st=[],vt=0,Pt=0;Pt<4;Pt++){var Mt=Me[Pt],rt=t(Ye[0],Ye[1],tt[0],tt[1],Mt[0],Mt[1],Mt[2],Mt[3]);rt&&(!vt||Math.abs(rt.x-st[0][0])>1||Math.abs(rt.y-st[0][1])>1)&&(rt=[rt.x,rt.y],vt&&se(rt,Ye)<se(st[0],Ye)?st.unshift(rt):st.push(rt),vt++)}return st}:"hv"===X||"vh"===X?be=function(Ye,tt){var st=[],vt=Ie(Ye),Pt=Ie(tt);return vt&&Pt&&ze(vt,Pt)||(vt&&st.push(vt),Pt&&st.push(Pt)),st}:"hvh"===X?be=Ve(0,fe,me):"vhv"===X&&(be=Ve(1,Te,_e)),i=0;i<Q;i++)if(l=K(i)){for(J=0,xe=null,Be(l),i++;i<Q;i++){if(!(f=K(i))){if(W)continue;break}if(te&&s.simplify){var Ze=K(i+1);if(w=se(f,l),D&&(0===J||J===Q-1)||!(w<ne(f,Ze)*U)){for(x=[(f[0]-l[0])/w,(f[1]-l[1])/w],g=l,_=w,T=L=M=0,o=!1,c=f,i++;i<u.length;i++){if(h=Ze,Ze=K(i+1),!h){if(W)continue;break}if(O=(d=[h[0]-l[0],h[1]-l[1]])[0]*x[1]-d[1]*x[0],L=Math.min(L,O),(M=Math.max(M,O))-L>ne(h,Ze))break;c=h,(k=d[0]*x[0]+d[1]*x[1])>_?(_=k,f=h,o=!1):k<T&&(T=k,g=h,o=!0)}if(o?(Be(f),c!==g&&Be(g)):(g!==l&&Be(g),c!==f&&Be(f)),Be(c),i>=u.length||!h)break;Be(h),l=h}}else Be(f)}xe&&Je([ce||xe[0],ge||xe[1]]),N.push(j.slice(0,J))}return N}},{"../../constants/numerical":479,"../../lib":503,"./constants":929}],940:[function(y,$,ee){"use strict";$.exports=function(p,m,b){"spline"===b("line.shape")&&b("line.smoothing")}},{}],941:[function(y,$,ee){"use strict";var p={tonextx:1,tonexty:1,tonext:1};$.exports=function(m,b,v){var e,n,t,a,r,u={},s=!1,i=-1,l=0,c=-1;for(n=0;n<v.length;n++)(t=(e=v[n][0].trace).stackgroup||"")?t in u?r=u[t]:(r=u[t]=l,l++):e.fill in p&&c>=0?r=c:(r=c=l,l++),r<i&&(s=!0),e._groupIndex=i=r;var f=v.slice();s&&f.sort(function(h,o){var x=h[0].trace,d=o[0].trace;return x._groupIndex-d._groupIndex||x.index-d.index});var g={};for(n=0;n<f.length;n++)t=(e=f[n][0].trace).stackgroup||"",!0===e.visible?(e._nexttrace=null,e.fill in p&&(e._prevtrace=(a=g[t])||null,a&&(a._nexttrace=e)),e._ownfill=e.fill&&("tozero"===e.fill.substr(0,6)||"toself"===e.fill||"to"===e.fill.substr(0,2)&&!e._prevtrace),g[t]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return f}},{}],942:[function(y,$,ee){"use strict";var p=y("fast-isnumeric");$.exports=function(m,b){b||(b=2);var v=m.marker,e=v.sizeref||1,n=v.sizemin||0,t="area"===v.sizemode?function(a){return Math.sqrt(a/e)}:function(a){return a/e};return function(a){var r=t(a/b);return p(r)&&r>0?Math.max(r,n):0}}},{"fast-isnumeric":190}],943:[function(y,$,ee){"use strict";$.exports={container:"marker",min:"cmin",max:"cmax"}},{}],944:[function(y,$,ee){"use strict";var p=y("../../components/color"),m=y("../../components/colorscale/helpers").hasColorscale,b=y("../../components/colorscale/defaults"),v=y("./subtypes");$.exports=function(e,n,t,a,r,u){var s=v.isBubble(e),i=(e.line||{}).color;u=u||{},i&&(t=i),r("marker.symbol"),r("marker.opacity",s?.7:1),r("marker.size"),r("marker.color",t),m(e,"marker")&&b(e,n,a,r,{prefix:"marker.",cLetter:"c"}),u.noSelect||(r("selected.marker.color"),r("unselected.marker.color"),r("selected.marker.size"),r("unselected.marker.size")),u.noLine||(r("marker.line.color",i&&!Array.isArray(i)&&n.marker.color!==i?i:s?p.background:p.defaultLine),m(e,"marker.line")&&b(e,n,a,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width",s?1:0)),s&&(r("marker.sizeref"),r("marker.sizemin"),r("marker.sizemode")),u.gradient&&"none"!==r("marker.gradient.type")&&r("marker.gradient.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":950}],945:[function(y,$,ee){"use strict";var p=y("../../lib").dateTick0,m=y("../../constants/numerical").ONEWEEK;function b(v,e){return p(e,v%m==0?1:0)}$.exports=function(v,e,n,t,a){if(a||(a={x:!0,y:!0}),a.x){var r=t("xperiod");r&&(t("xperiod0",b(r,e.xcalendar)),t("xperiodalignment"))}if(a.y){var u=t("yperiod");u&&(t("yperiod0",b(u,e.ycalendar)),t("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],946:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../registry"),b=y("../../lib"),v=b.ensureSingle,e=b.identity,n=y("../../components/drawing"),t=y("./subtypes"),a=y("./line_points"),r=y("./link_traces"),u=y("../../lib/polygon").tester;function s(i,l,c,f,g,h,o){var x;!function(me,Te,_e,Me,Ie){var ze=_e.xaxis,Ve=_e.yaxis,Je=p.extent(b.simpleMap(ze.range,ze.r2c)),De=p.extent(b.simpleMap(Ve.range,Ve.r2c)),Be=Me[0].trace;if(t.hasMarkers(Be)){var Ze=Be.marker.maxdisplayed;if(0!==Ze){var Ye=Me.filter(function(Pt){return Pt.x>=Je[0]&&Pt.x<=Je[1]&&Pt.y>=De[0]&&Pt.y<=De[1]}),tt=Math.ceil(Ye.length/Ze),st=0;Ie.forEach(function(Pt,Mt){var rt=Pt[0].trace;t.hasMarkers(rt)&&rt.marker.maxdisplayed>0&&Mt<Te&&st++});var vt=Math.round(st*tt/3+Math.floor(st/3)*tt/7.1);Me.forEach(function(Pt){delete Pt.vis}),Ye.forEach(function(Pt,Mt){0===Math.round((Mt+vt)%tt)&&(Pt.vis=!0)})}}}(0,l,c,f,g);var d=!!o&&o.duration>0;function w(me){return d?me.transition():me}var _=c.xaxis,T=c.yaxis,k=f[0].trace,L=k.line,M=p.select(h),O=v(M,"g","errorbars"),P=v(M,"g","lines"),S=v(M,"g","points"),E=v(M,"g","text");if(m.getComponentMethod("errorbars","plot")(i,O,c,o),!0===k.visible){var R,B;w(M).style("opacity",k.opacity);var H=k.fill.charAt(k.fill.length-1);"x"!==H&&"y"!==H&&(H=""),f[0][c.isRangePlot?"nodeRangePlot3":"node3"]=M;var V,Z,W="",G=[],X=k._prevtrace;X&&(W=X._prevRevpath||"",B=X._nextFill,G=X._polygons);var te,D,N,U,Q,j,J,K="",re="",ne=[],se=b.noop;if(R=k._ownFill,t.hasLines(k)||"none"!==k.fill){for(B&&B.datum(f),-1!==["hv","vh","hvh","vhv"].indexOf(L.shape)?(te=n.steps(L.shape),D=n.steps(L.shape.split("").reverse().join(""))):te=D="spline"===L.shape?function(me){var Te=me[me.length-1];return me.length>1&&me[0][0]===Te[0]&&me[0][1]===Te[1]?n.smoothclosed(me.slice(1),L.smoothing):n.smoothopen(me,L.smoothing)}:function(me){return"M"+me.join("L")},N=function(me){return D(me.reverse())},ne=a(f,{xaxis:_,yaxis:T,connectGaps:k.connectgaps,baseTolerance:Math.max(L.width||1,3)/4,shape:L.shape,simplify:L.simplify,fill:k.fill}),J=k._polygons=new Array(ne.length),x=0;x<ne.length;x++)k._polygons[x]=u(ne[x]);ne.length&&(U=ne[0][0],j=(Q=ne[ne.length-1])[Q.length-1]),se=function(me){return function(Te){if(V=te(Te),Z=N(Te),K?H?(K+="L"+V.substr(1),re=Z+"L"+re.substr(1)):(K+="Z"+V,re=Z+"Z"+re):(K=V,re=Z),t.hasLines(k)&&Te.length>1){var _e=p.select(this);if(_e.datum(f),me)w(_e.style("opacity",0).attr("d",V).call(n.lineGroupStyle)).style("opacity",1);else{var Me=w(_e);Me.attr("d",V),n.singleLineStyle(f,Me)}}}}}var oe=P.selectAll(".js-line").data(ne);w(oe.exit()).style("opacity",0).remove(),oe.each(se(!1)),oe.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(n.lineGroupStyle).each(se(!0)),n.setClipUrl(oe,c.layerClipId,i),ne.length?(R?(R.datum(f),U&&j&&(H?("y"===H?U[1]=j[1]=T.c2p(0,!0):"x"===H&&(U[0]=j[0]=_.c2p(0,!0)),w(R).attr("d","M"+j+"L"+U+"L"+K.substr(1)).call(n.singleFillStyle)):w(R).attr("d",K+"Z").call(n.singleFillStyle))):B&&("tonext"===k.fill.substr(0,6)&&K&&W?("tonext"===k.fill?w(B).attr("d",K+"Z"+W+"Z").call(n.singleFillStyle):w(B).attr("d",K+"L"+W.substr(1)+"Z").call(n.singleFillStyle),k._polygons=k._polygons.concat(G)):(ce(B),k._polygons=null)),k._prevRevpath=re,k._prevPolygons=J):(R?ce(R):B&&ce(B),k._polygons=k._prevRevpath=k._prevPolygons=null),S.datum(f),E.datum(f),function(me,Te,_e){var Me,Ie=_e[0].trace,ze=t.hasMarkers(Ie),Ve=t.hasText(Ie),Je=function(me){if(me.ids)return be}(Ie),De=fe,Be=fe;if(ze||Ve){var Ze=e,Ye=Ie.stackgroup,tt=Ye&&"infer zero"===i._fullLayout._scatterStackOpts[_._id+T._id][Ye].stackgaps;Ie.marker.maxdisplayed||Ie._needsCull?Ze=tt?xe:ge:Ye&&!tt&&(Ze=we),ze&&(De=Ze),Ve&&(Be=Ze)}var st,vt=(Me=me.selectAll("path.point").data(De,Je)).enter().append("path").classed("point",!0);d&&vt.call(n.pointStyle,Ie,i).call(n.translatePoints,_,T).style("opacity",0).transition().style("opacity",1),Me.order(),ze&&(st=n.makePointStyleFns(Ie)),Me.each(function(Pt){var Mt=p.select(this),rt=w(Mt);n.translatePoint(Pt,rt,_,T)?(n.singlePointStyle(Pt,rt,Ie,st,i),c.layerClipId&&n.hideOutsideRangePoint(Pt,rt,_,T,Ie.xcalendar,Ie.ycalendar),Ie.customdata&&Mt.classed("plotly-customdata",null!=Pt.data)):rt.remove()}),d?Me.exit().transition().style("opacity",0).remove():Me.exit().remove(),(Me=Te.selectAll("g").data(Be,Je)).enter().append("g").classed("textpoint",!0).append("text"),Me.order(),Me.each(function(Pt){var Mt=p.select(this),rt=w(Mt.select("text"));n.translatePoint(Pt,rt,_,T)?c.layerClipId&&n.hideOutsideRangePoint(Pt,Mt,_,T,Ie.xcalendar,Ie.ycalendar):Mt.remove()}),Me.selectAll("text").call(n.textPointStyle,Ie,i).each(function(Pt){var Mt=_.c2p(Pt.x),rt=T.c2p(Pt.y);p.select(this).selectAll("tspan.line").each(function(){w(p.select(this)).attr({x:Mt,y:rt})})}),Me.exit().remove()}(S,E,f);var pe=!1===k.cliponaxis?null:c.layerClipId;n.setClipUrl(S,pe,i),n.setClipUrl(E,pe,i)}function ce(me){w(me).attr("d","M0,0Z")}function ge(me){return me.filter(function(Te){return!Te.gap&&Te.vis})}function xe(me){return me.filter(function(Te){return Te.vis})}function we(me){return me.filter(function(Te){return!Te.gap})}function be(me){return me.id}function fe(){return!1}}$.exports=function(i,l,c,f,g,h){var o,x,T,L,d=!g,w=!!g&&g.duration>0,_=r(i,l,c);(o=f.selectAll("g.trace").data(_,function(T){return T[0].trace.uid})).enter().append("g").attr("class",function(T){return"trace scatter trace"+T[0].trace.uid}).style("stroke-miterlimit",2),o.order(),T=i,L=l,o.each(function(M){var O=v(p.select(this),"g","fills");n.setClipUrl(O,L.layerClipId,T);var P=M[0].trace,S=[];P._ownfill&&S.push("_ownFill"),P._nexttrace&&S.push("_nextFill");var E=O.selectAll("g").data(S,e);E.enter().append("g"),E.exit().each(function(R){P[R]=null}).remove(),E.order().each(function(R){P[R]=v(p.select(this),"path","js-fill")})}),w?(h&&(x=h()),p.transition().duration(g.duration).ease(g.easing).each("end",function(){x&&x()}).each("interrupt",function(){x&&x()}).each(function(){f.selectAll("g.trace").each(function(T,k){s(i,k,l,T,_,this,g)})})):o.each(function(T,k){s(i,k,l,T,_,this,g)}),d&&o.exit().remove(),f.selectAll("path:not([d])").remove()}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":939,"./link_traces":941,"./subtypes":950,"@plotly/d3":58}],947:[function(y,$,ee){"use strict";var p=y("./subtypes");$.exports=function(m,b){var v,e,n,t,a=m.cd,r=m.xaxis,u=m.yaxis,s=[],i=a[0].trace;if(!p.hasMarkers(i)&&!p.hasText(i))return[];if(!1===b)for(v=0;v<a.length;v++)a[v].selected=0;else for(v=0;v<a.length;v++)n=r.c2p((e=a[v]).x),t=u.c2p(e.y),null!==e.i&&b.contains([n,t],!1,v,m)?(s.push({pointNumber:e.i,x:r.c2d(e.x),y:u.c2d(e.y)}),e.selected=1):e.selected=0;return s}},{"./subtypes":950}],948:[function(y,$,ee){"use strict";var p=["orientation","groupnorm","stackgaps"];$.exports=function(m,b,v,e){var n=v._scatterStackOpts,t=e("stackgroup");if(t){var a=b.xaxis+b.yaxis,r=n[a];r||(r=n[a]={});var u=r[t],s=!1;u?u.traces.push(b):(u=r[t]={traceIndices:[],traces:[b]},s=!0);for(var i={orientation:b.x&&!b.y?"h":"v"},l=0;l<p.length;l++){var c=p[l],f=c+"Found";if(!u[f]){var g=void 0!==m[c],h="orientation"===c;if((g||s)&&(u[c]=e(c,i[c]),h&&(u.fillDflt="h"===u[c]?"tonextx":"tonexty"),g&&(u[f]=!0,!s&&(delete u.traces[0][c],h))))for(var o=0;o<u.traces.length-1;o++){var x=u.traces[o];x._input.fill!==x.fill&&(x.fill=u.fillDflt)}}}return u}}},{}],949:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/drawing"),b=y("../../registry");function v(n,t,a){m.pointStyle(n.selectAll("path.point"),t,a)}function e(n,t,a){m.textPointStyle(n.selectAll("text"),t,a)}$.exports={style:function(n){var t=p.select(n).selectAll("g.trace.scatter");t.style("opacity",function(a){return a[0].trace.opacity}),t.selectAll("g.points").each(function(a){v(p.select(this),a.trace||a[0].trace,n)}),t.selectAll("g.text").each(function(a){e(p.select(this),a.trace||a[0].trace,n)}),t.selectAll("g.trace path.js-line").call(m.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(m.fillGroupStyle),b.getComponentMethod("errorbars","style")(t)},stylePoints:v,styleText:e,styleOnSelect:function(n,t,a){var r=t[0].trace;r.selectedpoints?(m.selectedPointStyle(a.selectAll("path.point"),r),m.selectedTextStyle(a.selectAll("text"),r)):(v(a,r,n),e(a,r,n))}}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],950:[function(y,$,ee){"use strict";var p=y("../../lib");$.exports={hasLines:function(m){return m.visible&&m.mode&&-1!==m.mode.indexOf("lines")},hasMarkers:function(m){return m.visible&&(m.mode&&-1!==m.mode.indexOf("markers")||"splom"===m.type)},hasText:function(m){return m.visible&&m.mode&&-1!==m.mode.indexOf("text")},isBubble:function(m){return p.isPlainObject(m.marker)&&p.isArrayOrTypedArray(m.marker.size)}}},{"../../lib":503}],951:[function(y,$,ee){"use strict";var p=y("../../lib");$.exports=function(m,b,v,e,n){n=n||{},e("textposition"),p.coerceFont(e,"textfont",v.font),n.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],952:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../registry");$.exports=function(b,v,e,n){var t,a=n("x"),r=n("y");if(m.getComponentMethod("calendars","handleTraceDefaults")(b,v,["x","y"],e),a){var u=p.minRowLength(a);r?t=Math.min(u,p.minRowLength(r)):(t=u,n("y0"),n("dy"))}else{if(!r)return 0;t=p.minRowLength(r),n("x0"),n("dx")}return v._length=t,t}},{"../../lib":503,"../../registry":638}],953:[function(y,$,ee){"use strict";var p=y("../scatter/attributes"),m=y("../../components/colorscale/attributes"),b=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,v=y("../../plots/template_attributes").hovertemplateAttrs,e=y("../../plots/template_attributes").texttemplateAttrs,n=y("../../plots/attributes"),t=y("../../constants/gl3d_dashes"),a=y("../../constants/gl3d_markers"),r=y("../../lib/extend").extendFlat,u=y("../../plot_api/edit_types").overrideAll,s=y("../../lib/sort_object_keys"),l=p.marker,c=l.line,f=r({width:p.line.width,dash:{valType:"enumerated",values:s(t),dflt:"solid"}},m("line")),g=$.exports=u({x:p.x,y:p.y,z:{valType:"data_array"},text:r({},p.text,{}),texttemplate:e({},{}),hovertext:r({},p.hovertext,{}),hovertemplate:v(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),mode:r({},p.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:p.connectgaps,line:f,marker:r({symbol:{valType:"enumerated",values:s(a),dflt:"circle",arrayOk:!0},size:r({},l.size,{dflt:8}),sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,opacity:r({},l.opacity,{arrayOk:!1}),colorbar:l.colorbar,line:r({width:r({},c.width,{arrayOk:!1})},m("marker.line"))},m("marker")),textposition:r({},p.textposition,{dflt:"top center"}),textfont:{color:p.textfont.color,size:p.textfont.size,family:r({},p.textfont.family,{arrayOk:!1})},opacity:n.opacity,hoverinfo:r({},n.hoverinfo)},"calc","nested");g.x.editType=g.y.editType=g.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":925}],954:[function(y,$,ee){"use strict";var p=y("../scatter/arrays_to_calcdata"),m=y("../scatter/colorscale_calc");$.exports=function(b,v){var e=[{x:!1,y:!1,trace:v,t:{}}];return p(e,v),m(b,v),e}},{"../scatter/arrays_to_calcdata":924,"../scatter/colorscale_calc":928}],955:[function(y,$,ee){"use strict";var p=y("../../registry");function m(b,v,e,n){if(!v||!v.visible)return null;for(var t=p.getComponentMethod("errorbars","makeComputeError")(v),a=new Array(b.length),r=0;r<b.length;r++){var u=t(+b[r],r);if("log"===n.type){var s=n.c2l(b[r]),i=b[r]-u[0],l=b[r]+u[1];if(a[r]=[(n.c2l(i,!0)-s)*e,(n.c2l(l,!0)-s)*e],i>0){var c=n.c2l(i);n._lowerLogErrorBound||(n._lowerLogErrorBound=c),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,c)}}else a[r]=[-u[0]*e,u[1]*e]}return a}$.exports=function(b,v,e){var n=[m(b.x,b.error_x,v[0],e.xaxis),m(b.y,b.error_y,v[1],e.yaxis),m(b.z,b.error_z,v[2],e.zaxis)],t=function(l){for(var c=0;c<l.length;c++)if(l[c])return l[c].length;return 0}(n);if(0===t)return null;for(var a=new Array(t),r=0;r<t;r++){for(var u=[[0,0,0],[0,0,0]],s=0;s<3;s++)if(n[s])for(var i=0;i<2;i++)u[i][s]=n[s][r][i];a[r]=u}return a}},{"../../registry":638}],956:[function(y,$,ee){"use strict";var p=y("../../../stackgl_modules").gl_line3d,m=y("../../../stackgl_modules").gl_scatter3d,b=y("../../../stackgl_modules").gl_error3d,v=y("../../../stackgl_modules").gl_mesh3d,e=y("../../../stackgl_modules").delaunay_triangulate,n=y("../../lib"),t=y("../../lib/str2rgbarray"),a=y("../../lib/gl_format_color").formatColor,r=y("../scatter/make_bubble_size_func"),u=y("../../constants/gl3d_dashes"),s=y("../../constants/gl3d_markers"),i=y("../../plots/cartesian/axes"),l=y("../../components/fx/helpers").appendArrayPointValue,c=y("./calc_errors");function f(L,M){this.scene=L,this.uid=M,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var g=f.prototype;function h(L){return null==L?0:L.indexOf("left")>-1?-1:L.indexOf("right")>-1?1:0}function o(L){return null==L?0:L.indexOf("top")>-1?-1:L.indexOf("bottom")>-1?1:0}function x(L,M){return M(4*L)}function d(L){return s[L]}function w(L,M,O,P,S){var E=null;if(n.isArrayOrTypedArray(L)){E=[];for(var R=0;R<M;R++)E[R]=void 0===L[R]?P:O(L[R],S)}else E=O(L,n.identity);return E}function T(L){if(n.isArrayOrTypedArray(L)){var M=L[0];return n.isArrayOrTypedArray(M)&&(L=M),"rgb("+L.slice(0,3).map(function(O){return Math.round(255*O)})+")"}return null}function k(L){return n.isArrayOrTypedArray(L)?4===L.length&&"number"==typeof L[0]?T(L):L.map(T):null}g.handlePick=function(L){if(L.object&&(L.object===this.linePlot||L.object===this.delaunayMesh||L.object===this.textMarkers||L.object===this.scatterPlot)){var M=L.index=L.data.index;return L.object.highlight&&L.object.highlight(null),this.scatterPlot&&(L.object=this.scatterPlot,this.scatterPlot.highlight(L.data)),L.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[M]||0===this.textLabels[M])&&(L.textLabel=this.textLabels[M]):L.textLabel=this.textLabels),L.traceCoordinate=[this.data.x[M],this.data.y[M],this.data.z[M]],!0}},g.update=function(L){var M,O,P,S,E=this.scene.glplot.gl,R=u.solid;this.data=L;var B=function(L,M){var O,P,S,E,R,B,H=[],V=L.fullSceneLayout,Z=L.dataScale,W=V.xaxis,G=V.yaxis,X=V.zaxis,te=M.marker,D=M.line,N=M.x||[],U=M.y||[],Q=M.z||[],j=N.length,J=M.xcalendar,K=M.ycalendar,re=M.zcalendar;for(R=0;R<j;R++)O=W.d2l(N[R],0,J)*Z[0],P=G.d2l(U[R],0,K)*Z[1],S=X.d2l(Q[R],0,re)*Z[2],H[R]=[O,P,S];if(Array.isArray(M.text))B=M.text;else if(void 0!==M.text)for(B=new Array(j),R=0;R<j;R++)B[R]=M.text;function ne(Me,Ie){var ze=V[Me];return i.tickText(ze,ze.d2l(Ie),!0).text}var se=M.texttemplate;if(se){var oe=L.fullLayout._d3locale,pe=Array.isArray(se),ce=pe?Math.min(se.length,j):j,ge=pe?function(Me){return se[Me]}:function(){return se};for(B=new Array(ce),R=0;R<ce;R++){var xe={x:N[R],y:U[R],z:Q[R]},we={xLabel:ne("xaxis",N[R]),yLabel:ne("yaxis",U[R]),zLabel:ne("zaxis",Q[R])},be={};l(be,M,R);var Se=M._meta||{};B[R]=n.texttemplateString(ge(R),we,oe,be,xe,Se)}}if(E={position:H,mode:M.mode,text:B},"line"in M&&(E.lineColor=a(D,1,j),E.lineWidth=D.width,E.lineDashes=D.dash),"marker"in M){var fe=r(M);E.scatterColor=a(te,1,j),E.scatterSize=w(te.size,j,x,20,fe),E.scatterMarker=w(te.symbol,j,d,"\u25cf"),E.scatterLineWidth=te.line.width,E.scatterLineColor=a(te.line,1,j),E.scatterAngle=0}"textposition"in M&&(E.textOffset=function(Me){var Ie=[0,0];if(Array.isArray(Me))for(var ze=0;ze<Me.length;ze++)Ie[ze]=[0,0],Me[ze]&&(Ie[ze][0]=h(Me[ze]),Ie[ze][1]=o(Me[ze]));else Ie[0]=h(Me),Ie[1]=o(Me);return Ie}(M.textposition),E.textColor=a(M.textfont,1,j),E.textSize=w(M.textfont.size,j,n.identity,12),E.textFont=M.textfont.family,E.textAngle=0);var me=["x","y","z"];for(E.project=[!1,!1,!1],E.projectScale=[1,1,1],E.projectOpacity=[1,1,1],R=0;R<3;++R){var Te=M.projection[me[R]];(E.project[R]=Te.show)&&(E.projectOpacity[R]=Te.opacity,E.projectScale[R]=Te.scale)}E.errorBounds=c(M,Z,V);var _e=function(Me){for(var Ie=[0,0,0],ze=[[0,0,0],[0,0,0],[0,0,0]],Ve=[1,1,1],Je=0;Je<3;Je++){var De=Me[Je];De&&!1!==De.copy_zstyle&&!1!==Me[2].visible&&(De=Me[2]),De&&De.visible&&(Ie[Je]=De.width/2,ze[Je]=t(De.color),Ve[Je]=De.thickness)}return{capSize:Ie,color:ze,lineWidth:Ve}}([M.error_x,M.error_y,M.error_z]);return E.errorColor=_e.color,E.errorLineWidth=_e.lineWidth,E.errorCapSize=_e.capSize,E.delaunayAxis=M.surfaceaxis,E.delaunayColor=t(M.surfacecolor),E}(this.scene,L);"mode"in B&&(this.mode=B.mode),"lineDashes"in B&&B.lineDashes in u&&(R=u[B.lineDashes]),this.color=k(B.scatterColor)||k(B.lineColor),this.dataPoints=B.position,M={gl:this.scene.glplot.gl,position:B.position,color:B.lineColor,lineWidth:B.lineWidth||1,dashes:R[0],dashScale:R[1],opacity:L.opacity,connectGaps:L.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(M):(this.linePlot=p(M),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var H=L.opacity;if(L.marker&&L.marker.opacity&&(H*=L.marker.opacity),O={gl:this.scene.glplot.gl,position:B.position,color:B.scatterColor,size:B.scatterSize,glyph:B.scatterMarker,opacity:H,orthographic:!0,lineWidth:B.scatterLineWidth,lineColor:B.scatterLineColor,project:B.project,projectScale:B.projectScale,projectOpacity:B.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(O):(this.scatterPlot=m(O),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),S={gl:this.scene.glplot.gl,position:B.position,glyph:B.text,color:B.textColor,size:B.textSize,angle:B.textAngle,alignment:B.textOffset,font:B.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:L.opacity},this.textLabels=L.hovertext||L.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(S):(this.textMarkers=m(S),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),P={gl:this.scene.glplot.gl,position:B.position,color:B.errorColor,error:B.errorBounds,lineWidth:B.errorLineWidth,capSize:B.errorCapSize,opacity:L.opacity},this.errorBars?B.errorBounds?this.errorBars.update(P):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):B.errorBounds&&(this.errorBars=b(P),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),B.delaunayAxis>=0){var V=function(Z,W,G){var X,te=(G+1)%3,D=(G+2)%3,N=[],U=[];for(X=0;X<Z.length;++X){var Q=Z[X];!isNaN(Q[te])&&isFinite(Q[te])&&!isNaN(Q[D])&&isFinite(Q[D])&&(N.push([Q[te],Q[D]]),U.push(X))}var j=e(N);for(X=0;X<j.length;++X)for(var J=j[X],K=0;K<J.length;++K)J[K]=U[J[K]];return{positions:Z,cells:j,meshColor:W}}(B.position,B.delaunayColor,B.delaunayAxis);V.opacity=L.opacity,this.delaunayMesh?this.delaunayMesh.update(V):(V.gl=E,this.delaunayMesh=v(V),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},g.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},$.exports=function(L,M){var O=new f(L,M.uid);return O.update(M),O}},{"../../../stackgl_modules":1119,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":942,"./calc_errors":955}],957:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../lib"),b=y("../scatter/subtypes"),v=y("../scatter/marker_defaults"),e=y("../scatter/line_defaults"),n=y("../scatter/text_defaults"),t=y("./attributes");$.exports=function(a,r,u,s){function i(x,d){return m.coerce(a,r,t,x,d)}if(x=a,d=r,_=s,T=0,k=(w=i)("x"),L=w("y"),M=w("z"),p.getComponentMethod("calendars","handleTraceDefaults")(x,d,["x","y","z"],_),k&&L&&M&&(T=Math.min(k.length,L.length,M.length),d._length=d._xlength=d._ylength=d._zlength=T),T){i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),i("mode"),b.hasLines(r)&&(i("connectgaps"),e(a,r,u,s,i)),b.hasMarkers(r)&&v(a,r,u,s,i,{noSelect:!0}),b.hasText(r)&&(i("texttemplate"),n(a,r,s,i,{noSelect:!0}));var l=(r.line||{}).color,c=(r.marker||{}).color;i("surfaceaxis")>=0&&i("surfacecolor",l||c);for(var f=["x","y","z"],g=0;g<3;++g){var h="projection."+f[g];i(h+".show")&&(i(h+".opacity"),i(h+".scale"))}var o=p.getComponentMethod("errorbars","supplyDefaults");o(a,r,l||c||u,{axis:"z"}),o(a,r,l||c||u,{axis:"y",inherit:"z"}),o(a,r,l||c||u,{axis:"x",inherit:"z"})}else r.visible=!1;var x,d,w,_,T,k,L,M}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":938,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"./attributes":953}],958:[function(y,$,ee){"use strict";$.exports={plot:y("./convert"),attributes:y("./attributes"),markerSymbols:y("../../constants/gl3d_markers"),supplyDefaults:y("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:y("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":953,"./calc":954,"./convert":956,"./defaults":957}],959:[function(y,$,ee){"use strict";var p=y("../scatter/attributes"),m=y("../../plots/attributes"),b=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../../plots/template_attributes").texttemplateAttrs,e=y("../../components/colorscale/attributes"),n=y("../../lib/extend").extendFlat,t=p.marker,a=p.line,r=t.line;$.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:n({},p.mode,{dflt:"markers"}),text:n({},p.text,{}),texttemplate:v({editType:"plot"},{keys:["a","b","text"]}),hovertext:n({},p.hovertext,{}),line:{color:a.color,width:a.width,dash:a.dash,shape:n({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:p.connectgaps,fill:n({},p.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:p.fillcolor,marker:n({symbol:t.symbol,opacity:t.opacity,maxdisplayed:t.maxdisplayed,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,line:n({width:r.width,editType:"calc"},e("marker.line")),gradient:t.gradient,editType:"calc"},e("marker")),textfont:p.textfont,textposition:p.textposition,selected:p.selected,unselected:p.unselected,hoverinfo:n({},m.hoverinfo,{flags:["a","b","text","name"]}),hoveron:p.hoveron,hovertemplate:b()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":925}],960:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../scatter/colorscale_calc"),b=y("../scatter/arrays_to_calcdata"),v=y("../scatter/calc_selection"),e=y("../scatter/calc").calcMarkerSize,n=y("../carpet/lookup_carpetid");$.exports=function(t,a){var r=a._carpetTrace=n(t,a);if(r&&r.visible&&"legendonly"!==r.visible){var u;a.xaxis=r.xaxis,a.yaxis=r.yaxis;var s,i,l=a._length,c=new Array(l),f=!1;for(u=0;u<l;u++)if(i=a.b[u],p(s=a.a[u])&&p(i)){var g=r.ab2xy(+s,+i,!0),h=r.isVisible(+s,+i);h||(f=!0),c[u]={x:g[0],y:g[1],a:s,b:i,vis:h}}else c[u]={x:!1,y:!1};return a._needsCull=f,c[0].carpet=r,c[0].trace=a,e(a,l),m(t,a),b(c,a),v(c,a),c}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":924,"../scatter/calc":926,"../scatter/calc_selection":927,"../scatter/colorscale_calc":928,"fast-isnumeric":190}],961:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../scatter/constants"),b=y("../scatter/subtypes"),v=y("../scatter/marker_defaults"),e=y("../scatter/line_defaults"),n=y("../scatter/line_shape_defaults"),t=y("../scatter/text_defaults"),a=y("../scatter/fillcolor_defaults"),r=y("./attributes");$.exports=function(u,s,i,l){function c(x,d){return p.coerce(u,s,r,x,d)}c("carpet"),s.xaxis="x",s.yaxis="y";var f=c("a"),g=c("b"),h=Math.min(f.length,g.length);if(h){s._length=h,c("text"),c("texttemplate"),c("hovertext"),c("mode",h<m.PTS_LINESONLY?"lines+markers":"lines"),b.hasLines(s)&&(e(u,s,i,l,c),n(u,s,c),c("connectgaps")),b.hasMarkers(s)&&v(u,s,i,l,c,{gradient:!0}),b.hasText(s)&&t(u,s,l,c);var o=[];(b.hasMarkers(s)||b.hasText(s))&&(c("marker.maxdisplayed"),o.push("points")),c("fill"),"none"!==s.fill&&(a(u,s,i,c),b.hasLines(s)||n(u,s,c)),"tonext"!==s.fill&&"toself"!==s.fill||o.push("fills"),"fills"!==c("hoveron",o.join("+")||"points")&&c("hovertemplate"),p.coerceSelectionMarkerOpacity(s,c)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":929,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/line_shape_defaults":940,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"./attributes":959}],962:[function(y,$,ee){"use strict";$.exports=function(p,m,b,v,e){var n=v[e];return p.a=n.a,p.b=n.b,p.y=n.y,p}},{}],963:[function(y,$,ee){"use strict";$.exports=function(p,m){var b={},v=m._carpet,e=v.ab2ij([p.a,p.b]),n=Math.floor(e[0]),t=e[0]-n,a=Math.floor(e[1]),u=v.evalxy([],n,a,t,e[1]-a);return b.yLabel=u[1].toFixed(3),b}},{}],964:[function(y,$,ee){"use strict";var p=y("../scatter/hover"),m=y("../../lib").fillText;$.exports=function(b,v,e,n){var t=p(b,v,e,n);if(t&&!1!==t[0].index){var a=t[0];if(void 0===a.index){var u=b.xa._length,s=u*(1-a.y0/b.ya._length)/2,i=u-s;return a.x0=Math.max(Math.min(a.x0,i),s),a.x1=Math.max(Math.min(a.x1,i),s),t}var l=a.cd[a.index];a.a=l.a,a.b=l.b,a.xLabelVal=void 0,a.yLabelVal=void 0;var c=a.trace,f=c._carpet,g=c._module.formatLabels(l,c);a.yLabel=g.yLabel,delete a.text;var h=[];if(!c.hovertemplate){var o=(l.hi||c.hoverinfo).split("+");-1!==o.indexOf("all")&&(o=["a","b","text"]),-1!==o.indexOf("a")&&x(f.aaxis,l.a),-1!==o.indexOf("b")&&x(f.baxis,l.b),h.push("y: "+a.yLabel),-1!==o.indexOf("text")&&m(l,c,h),a.extraText=h.join("<br>")}return t}function x(d,w){var _;_=d.labelprefix&&d.labelprefix.length>0?d.labelprefix.replace(/ = $/,""):d._hovertitle,h.push(_+": "+w.toFixed(3)+d.labelsuffix)}}},{"../../lib":503,"../scatter/hover":936}],965:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),style:y("../scatter/style").style,styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("../scatter/select"),eventData:y("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:y("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":943,"../scatter/select":947,"../scatter/style":949,"./attributes":959,"./calc":960,"./defaults":961,"./event_data":962,"./format_labels":963,"./hover":964,"./plot":966}],966:[function(y,$,ee){"use strict";var p=y("../scatter/plot"),m=y("../../plots/cartesian/axes"),b=y("../../components/drawing");$.exports=function(v,e,n,t){var a,u,s=n[0][0].carpet,i={xaxis:m.getFromId(v,s.xaxis||"x"),yaxis:m.getFromId(v,s.yaxis||"y"),plot:e.plot};for(p(v,i,n,t),a=0;a<n.length;a++)u=t.selectAll("g.trace"+n[a][0].trace.uid+" .js-line"),b.setClipUrl(u,n[a][0].carpet._clipPathId,v)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":946}],967:[function(y,$,ee){"use strict";var p=y("../../plots/template_attributes").hovertemplateAttrs,m=y("../../plots/template_attributes").texttemplateAttrs,b=y("../scatter/attributes"),v=y("../../plots/attributes"),e=y("../../components/colorscale/attributes"),n=y("../../components/drawing/attributes").dash,t=y("../../lib/extend").extendFlat,a=y("../../plot_api/edit_types").overrideAll,r=b.marker,u=b.line,s=r.line;$.exports=a({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:t({},b.mode,{dflt:"markers"}),text:t({},b.text,{}),texttemplate:m({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:t({},b.hovertext,{}),textfont:b.textfont,textposition:b.textposition,line:{color:u.color,width:u.width,dash:n},connectgaps:b.connectgaps,marker:t({symbol:r.symbol,opacity:r.opacity,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:t({width:s.width},e("marker.line")),gradient:r.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:b.fillcolor,selected:b.selected,unselected:b.unselected,hoverinfo:t({},v.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:p()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":925}],968:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../constants/numerical").BADNUM,b=y("../scatter/colorscale_calc"),v=y("../scatter/arrays_to_calcdata"),e=y("../scatter/calc_selection"),n=y("../../lib")._;function t(a){return a&&"string"==typeof a}$.exports=function(a,r){var u,s=Array.isArray(r.locations),i=s?r.locations.length:r._length,l=new Array(i);u=r.geojson?function(x){return t(x)||p(x)}:t;for(var c=0;c<i;c++){var f=l[c]={};if(s){var g=r.locations[c];f.loc=u(g)?g:null}else{var h=r.lon[c],o=r.lat[c];f.lonlat=p(h)&&p(o)?[+h,+o]:[m,m]}}return v(l,r),b(a,r),e(l,r),i&&(l[0].t={labels:{lat:n(a,"lat:")+" ",lon:n(a,"lon:")+" "}}),l}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":924,"../scatter/calc_selection":927,"../scatter/colorscale_calc":928,"fast-isnumeric":190}],969:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../scatter/subtypes"),b=y("../scatter/marker_defaults"),v=y("../scatter/line_defaults"),e=y("../scatter/text_defaults"),n=y("../scatter/fillcolor_defaults"),t=y("./attributes");$.exports=function(a,r,u,s){function i(x,d){return p.coerce(a,r,t,x,d)}var l,c=i("locations");if(c&&c.length){var f,g=i("geojson");("string"==typeof g&&""!==g||p.isPlainObject(g))&&(f="geojson-id"),"geojson-id"===i("locationmode",f)&&i("featureidkey"),l=c.length}else{var h=i("lon")||[],o=i("lat")||[];l=Math.min(h.length,o.length)}l?(r._length=l,i("text"),i("hovertext"),i("hovertemplate"),i("mode"),m.hasLines(r)&&(v(a,r,u,s,i),i("connectgaps")),m.hasMarkers(r)&&b(a,r,u,s,i,{gradient:!0}),m.hasText(r)&&(i("texttemplate"),e(a,r,s,i)),i("fill"),"none"!==r.fill&&n(a,r,u,i),p.coerceSelectionMarkerOpacity(r,i)):r.visible=!1}},{"../../lib":503,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"./attributes":967}],970:[function(y,$,ee){"use strict";$.exports=function(p,m,b,v,e){p.lon=m.lon,p.lat=m.lat,p.location=m.loc?m.loc:null;var n=v[e];return n.fIn&&n.fIn.properties&&(p.properties=n.fIn.properties),p}},{}],971:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes");$.exports=function(m,b,v){var e={},n=v[b.geo]._subplot.mockAxis,t=m.lonlat;return e.lonLabel=p.tickText(n,n.c2l(t[0]),!0).text,e.latLabel=p.tickText(n,n.c2l(t[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],972:[function(y,$,ee){"use strict";var p=y("../../components/fx"),m=y("../../constants/numerical").BADNUM,b=y("../scatter/get_trace_color"),v=y("../../lib").fillText,e=y("./attributes");$.exports=function(n,t,a){var r=n.cd,u=r[0].trace,s=n.xa,i=n.ya,l=n.subplot,c=l.projection.isLonLatOverEdges,f=l.project;if(p.getClosest(r,function(_){var T=_.lonlat;if(T[0]===m||c(T))return 1/0;var k=f(T),L=f([t,a]),M=Math.abs(k[0]-L[0]),O=Math.abs(k[1]-L[1]),P=Math.max(3,_.mrc||0);return Math.max(Math.sqrt(M*M+O*O)-P,1-3/P)},n),!1!==n.index){var g=r[n.index],h=g.lonlat,o=[s.c2p(h),i.c2p(h)],x=g.mrc||1;n.x0=o[0]-x,n.x1=o[0]+x,n.y0=o[1]-x,n.y1=o[1]+x,n.loc=g.loc,n.lon=h[0],n.lat=h[1];var d={};d[u.geo]={_subplot:l};var w=u._module.formatLabels(g,u,d);return n.lonLabel=w.lonLabel,n.latLabel=w.latLabel,n.color=b(u,g),n.extraText=function(_,T,k,L){if(!_.hovertemplate){var M=T.hi||_.hoverinfo,O="all"===M?e.hoverinfo.flags:M.split("+"),P=-1!==O.indexOf("location")&&Array.isArray(_.locations),S=-1!==O.indexOf("lon"),E=-1!==O.indexOf("lat"),R=-1!==O.indexOf("text"),B=[];return P?B.push(T.loc):S&&E?B.push("("+H(k.latLabel)+", "+H(k.lonLabel)+")"):S?B.push(L.lon+H(k.lonLabel)):E&&B.push(L.lat+H(k.latLabel)),R&&v(T,_,B),B.join("<br>")}function H(V){return V+"\xb0"}}(u,g,n,r[0].t.labels),n.hovertemplate=u.hovertemplate,[n]}}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":935,"./attributes":967}],973:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),calcGeoJSON:y("./plot").calcGeoJSON,plot:y("./plot").plot,style:y("./style"),styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover"),eventData:y("./event_data"),selectPoints:y("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:y("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":943,"../scatter/style":949,"./attributes":967,"./calc":968,"./defaults":969,"./event_data":970,"./format_labels":971,"./hover":972,"./plot":974,"./select":975,"./style":976}],974:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=y("../../lib/topojson_utils").getTopojsonFeatures,v=y("../../lib/geojson_utils"),e=y("../../lib/geo_location_utils"),n=y("../../plots/cartesian/autorange").findExtremes,t=y("../../constants/numerical").BADNUM,a=y("../scatter/calc").calcMarkerSize,r=y("../scatter/subtypes"),u=y("./style");$.exports={calcGeoJSON:function(s,i){var l,c,f=s[0].trace,g=i[f.geo],h=g._subplot,o=f._length;if(Array.isArray(f.locations)){var x=f.locationmode,d="geojson-id"===x?e.extractTraceFeature(s):b(f,h.topojson);for(l=0;l<o;l++){c=s[l];var w="geojson-id"===x?c.fOut:e.locationToFeature(x,c.loc,d);c.lonlat=w?w.properties.ct:[t,t]}}var _,T,k={padded:!0};if("geojson"===g.fitbounds&&"geojson-id"===f.locationmode){var L=e.computeBbox(e.getTraceGeojson(f));_=[L[0],L[2]],T=[L[1],L[3]]}else{for(_=new Array(o),T=new Array(o),l=0;l<o;l++)_[l]=(c=s[l]).lonlat[0],T[l]=c.lonlat[1];k.ppad=a(f,o)}f._extremes.lon=n(g.lonaxis._ax,_,k),f._extremes.lat=n(g.lataxis._ax,T,k)},plot:function(s,i,l){var c=i.layers.frontplot.select(".scatterlayer"),f=m.makeTraceGroups(c,l,"trace scattergeo");function g(h,o){h.lonlat[0]===t&&p.select(o).remove()}f.selectAll("*").remove(),f.each(function(h){var o=p.select(this),x=h[0].trace;if(r.hasLines(x)||"none"!==x.fill){var d=v.calcTraceToLineCoords(h),w="none"!==x.fill?v.makePolygon(d):v.makeLine(d);o.selectAll("path.js-line").data([{geojson:w,trace:x}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(x)&&o.selectAll("path.point").data(m.identity).enter().append("path").classed("point",!0).each(function(_){g(_,this)}),r.hasText(x)&&o.selectAll("g").data(m.identity).enter().append("g").append("text").each(function(_){g(_,this)}),u(s,h)})}}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":926,"../scatter/subtypes":950,"./style":976,"@plotly/d3":58}],975:[function(y,$,ee){"use strict";var p=y("../scatter/subtypes"),m=y("../../constants/numerical").BADNUM;$.exports=function(b,v){var e,n,t,a,r,u=b.cd,s=b.xaxis,i=b.yaxis,l=[],c=u[0].trace;if(!p.hasMarkers(c)&&!p.hasText(c))return[];if(!1===v)for(r=0;r<u.length;r++)u[r].selected=0;else for(r=0;r<u.length;r++)(n=(e=u[r]).lonlat)[0]!==m&&(t=s.c2p(n),a=i.c2p(n),v.contains([t,a],null,r,b)?(l.push({pointNumber:r,lon:n[0],lat:n[1]}),e.selected=1):e.selected=0);return l}},{"../../constants/numerical":479,"../scatter/subtypes":950}],976:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/drawing"),b=y("../../components/color"),v=y("../scatter/style"),e=v.stylePoints,n=v.styleText;$.exports=function(t,a){var r,u,s,i;a&&(r=t,s=(u=a)[0].trace,(i=u[0].node3).style("opacity",u[0].trace.opacity),e(i,s,r),n(i,s,r),i.selectAll("path.js-line").style("fill","none").each(function(l){var c=p.select(this),f=l.trace,g=f.line||{};c.call(b.stroke,g.color).call(m.dashLine,g.dash||"",g.width||0),"none"!==f.fill&&c.call(b.fill,f.fillcolor)}))}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":949,"@plotly/d3":58}],977:[function(y,$,ee){"use strict";var p=y("../../plots/attributes"),m=y("../scatter/attributes"),b=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,v=y("../../components/colorscale/attributes"),e=y("../../lib/sort_object_keys"),n=y("../../lib/extend").extendFlat,t=y("../../plot_api/edit_types").overrideAll,a=y("./constants").DASHES,r=m.line,u=m.marker,s=u.line,i=$.exports=t({x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),text:m.text,hovertext:m.hovertext,textposition:m.textposition,textfont:m.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(a),dflt:"solid"}},marker:n({},v("marker"),{symbol:u.symbol,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:u.opacity,colorbar:u.colorbar,line:n({},v("marker.line"),{width:s.width})}),connectgaps:m.connectgaps,fill:n({},m.fill,{dflt:"none"}),fillcolor:m.fillcolor,selected:{marker:m.selected.marker,textfont:m.selected.textfont},unselected:{marker:m.unselected.marker,textfont:m.unselected.textfont},opacity:p.opacity},"calc","nested");i.x.editType=i.y.editType=i.x0.editType=i.y0.editType="calc+clearAxisTypes",i.hovertemplate=m.hovertemplate,i.texttemplate=m.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":925,"./constants":979}],978:[function(y,$,ee){"use strict";var p=y("@plotly/point-cluster"),m=y("../../lib"),b=y("../../plots/cartesian/axis_ids"),v=y("../../plots/cartesian/autorange").findExtremes,e=y("../../plots/cartesian/align_period"),n=y("../scatter/calc"),t=n.calcMarkerSize,a=n.calcAxisExpansion,r=n.setFirstScatter,u=y("../scatter/colorscale_calc"),s=y("./convert"),i=y("./scene_update"),l=y("../../constants/numerical").BADNUM,c=y("./constants").TOO_MANY_POINTS;function f(g,h,o){var x=g._extremes[h._id],d=v(h,o._bnds,{padded:!0});x.min=x.min.concat(d.min),x.max=x.max.concat(d.max)}$.exports=function(g,h){var o,x=g._fullLayout,d=b.getFromId(g,h.xaxis),w=b.getFromId(g,h.yaxis),_=x._plots[h.xaxis+h.yaxis],T=h._length,k=T>=c,L=2*T,M={},O=d.makeCalcdata(h,"x"),P=w.makeCalcdata(h,"y"),S=e(h,d,"x",O),E=e(h,w,"y",P),R=S.vals,B=E.vals;h._x=R,h._y=B,h.xperiodalignment&&(h._origX=O,h._xStarts=S.starts,h._xEnds=S.ends),h.yperiodalignment&&(h._origY=P,h._yStarts=E.starts,h._yEnds=E.ends);var H=new Array(L),V=new Array(T);for(o=0;o<T;o++)H[2*o]=R[o]===l?NaN:R[o],H[2*o+1]=B[o]===l?NaN:B[o],V[o]=o;if("log"===d.type)for(o=0;o<L;o+=2)H[o]=d.c2l(H[o]);if("log"===w.type)for(o=1;o<L;o+=2)H[o]=w.c2l(H[o]);k&&"log"!==d.type&&"log"!==w.type?M.tree=p(H):M.ids=V,u(g,h);var Z,W=function(X,te,D,N,U,Q){var j=s.style(X,D);if(j.marker&&(j.marker.positions=N),j.line&&N.length>1&&m.extendFlat(j.line,s.linePositions(X,D,N)),j.errorX||j.errorY){var J=s.errorBarPositions(X,D,N,U,Q);j.errorX&&m.extendFlat(j.errorX,J.x),j.errorY&&m.extendFlat(j.errorY,J.y)}return j.text&&(m.extendFlat(j.text,{positions:N},s.textPosition(X,D,j.text,j.marker)),m.extendFlat(j.textSel,{positions:N},s.textPosition(X,D,j.text,j.markerSel)),m.extendFlat(j.textUnsel,{positions:N},s.textPosition(X,D,j.text,j.markerUnsel))),j}(g,0,h,H,R,B),G=i(g,_);return r(x,h),k?W.marker&&(Z=W.marker.sizeAvg||Math.max(W.marker.size,3)):Z=t(h,T),a(g,h,d,w,R,B,Z),W.errorX&&f(h,d,W.errorX),W.errorY&&f(h,w,W.errorY),W.fill&&!G.fill2d&&(G.fill2d=!0),W.marker&&!G.scatter2d&&(G.scatter2d=!0),W.line&&!G.line2d&&(G.line2d=!0),!W.errorX&&!W.errorY||G.error2d||(G.error2d=!0),W.text&&!G.glText&&(G.glText=!0),W.marker&&(W.marker.snap=T),G.lineOptions.push(W.line),G.errorXOptions.push(W.errorX),G.errorYOptions.push(W.errorY),G.fillOptions.push(W.fill),G.markerOptions.push(W.marker),G.markerSelectedOptions.push(W.markerSel),G.markerUnselectedOptions.push(W.markerUnsel),G.textOptions.push(W.text),G.textSelectedOptions.push(W.textSel),G.textUnselectedOptions.push(W.textUnsel),G.selectBatch.push([]),G.unselectBatch.push([]),M._scene=G,M.index=G.count,M.x=R,M.y=B,M.positions=H,G.count++,[{x:!1,y:!1,t:M,trace:h}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":926,"../scatter/colorscale_calc":928,"./constants":979,"./convert":980,"./scene_update":988,"@plotly/point-cluster":59}],979:[function(y,$,ee){"use strict";$.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],980:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("svg-path-sdf"),b=y("color-normalize"),v=y("../../registry"),e=y("../../lib"),n=y("../../components/drawing"),t=y("../../plots/cartesian/axis_ids"),a=y("../../lib/gl_format_color").formatColor,r=y("../scatter/subtypes"),u=y("../scatter/make_bubble_size_func"),s=y("./helpers"),i=y("./constants"),l=y("../../constants/interactions").DESELECTDIM,c={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},f=y("../../components/fx/helpers").appendArrayPointValue;function g(O,P){var S,E=O._fullLayout,R=P._length,B=P.textfont,H=P.textposition,V=Array.isArray(H)?H:[H],Z=B.color,W=B.size,G=B.family,X={},te=O._context.plotGlPixelRatio,D=P.texttemplate;if(D){X.text=[];var N=E._d3locale,U=Array.isArray(D),Q=U?Math.min(D.length,R):R,j=U?function(pe){return D[pe]}:function(){return D};for(S=0;S<Q;S++){var J={i:S},K=P._module.formatLabels(J,P,E),re={};f(re,P,S);var ne=P._meta||{};X.text.push(e.texttemplateString(j(S),K,N,re,J,ne))}}else X.text=Array.isArray(P.text)&&P.text.length<R?P.text.slice():P.text;if(Array.isArray(X.text))for(S=X.text.length;S<R;S++)X.text[S]="";for(X.opacity=P.opacity,X.font={},X.align=[],X.baseline=[],S=0;S<V.length;S++){var se=V[S].split(/\s+/);switch(se[1]){case"left":X.align.push("right");break;case"right":X.align.push("left");break;default:X.align.push(se[1])}switch(se[0]){case"top":X.baseline.push("bottom");break;case"bottom":X.baseline.push("top");break;default:X.baseline.push(se[0])}}if(Array.isArray(Z))for(X.color=new Array(R),S=0;S<R;S++)X.color[S]=Z[S];else X.color=Z;if(e.isArrayOrTypedArray(W)||Array.isArray(G))for(X.font=new Array(R),S=0;S<R;S++){var oe=X.font[S]={};oe.size=(e.isTypedArray(W)?W[S]:Array.isArray(W)?p(W[S])?W[S]:0:W)*te,oe.family=Array.isArray(G)?G[S]:G}else X.font={size:W*te,family:G};return X}function h(O){var P,S,E=O._length,R=O.marker,B={},H=e.isArrayOrTypedArray(R.symbol),V=e.isArrayOrTypedArray(R.color),Z=e.isArrayOrTypedArray(R.line.color),W=e.isArrayOrTypedArray(R.opacity),G=e.isArrayOrTypedArray(R.size),X=e.isArrayOrTypedArray(R.line.width);if(H||(S=s.isOpenSymbol(R.symbol)),H||V||Z||W){B.colors=new Array(E),B.borderColors=new Array(E);var te=a(R,R.opacity,E),D=a(R.line,R.opacity,E);if(!Array.isArray(D[0])){var N=D;for(D=Array(E),P=0;P<E;P++)D[P]=N}if(!Array.isArray(te[0])){var U=te;for(te=Array(E),P=0;P<E;P++)te[P]=U}for(B.colors=te,B.borderColors=D,P=0;P<E;P++)H&&(S=s.isOpenSymbol(R.symbol[P])),S&&(D[P]=te[P].slice(),te[P]=te[P].slice(),te[P][3]=0);B.opacity=O.opacity}else S?(B.color=b(R.color,"uint8"),B.color[3]=0,B.borderColor=b(R.color,"uint8")):(B.color=b(R.color,"uint8"),B.borderColor=b(R.line.color,"uint8")),B.opacity=O.opacity*R.opacity;if(H)for(B.markers=new Array(E),P=0;P<E;P++)B.markers[P]=M(R.symbol[P]);else B.marker=M(R.symbol);var j,J=u(O,1);if(G||X){var K,re=B.sizes=new Array(E),ne=B.borderSizes=new Array(E),se=0;if(G){for(P=0;P<E;P++)re[P]=J(R.size[P]),se+=re[P];K=se/E}else for(j=J(R.size),P=0;P<E;P++)re[P]=j;if(X)for(P=0;P<E;P++)ne[P]=R.line.width[P];else for(j=R.line.width,P=0;P<E;P++)ne[P]=j;B.sizeAvg=K}else B.size=J(R&&R.size||10),B.borderSizes=J(R.line.width);return B}function o(O,P){var E={};return P&&(P.marker&&P.marker.symbol?E=h(e.extendFlat({},O.marker,P.marker)):P.marker&&(P.marker.size&&(E.size=P.marker.size),P.marker.color&&(E.colors=P.marker.color),void 0!==P.marker.opacity&&(E.opacity=P.marker.opacity))),E}function x(O,P,S){var E={};if(!S)return E;if(S.textfont){var R={opacity:1,text:P.text,texttemplate:P.texttemplate,textposition:P.textposition,textfont:e.extendFlat({},P.textfont)};S.textfont&&e.extendFlat(R.textfont,S.textfont),E=g(O,R)}return E}function d(O,P,S){var E={capSize:2*P.width*S,lineWidth:P.thickness*S,color:P.color};return P.copy_ystyle&&(E=O.error_y),E}var w=i.SYMBOL_SDF_SIZE,_=i.SYMBOL_SIZE,T=i.SYMBOL_STROKE,k={},L=n.symbolFuncs[0](.05*_);function M(O){if("circle"===O)return null;var P,S,E=n.symbolNumber(O),R=n.symbolFuncs[E%100],B=!!n.symbolNoDot[E%100],H=!!n.symbolNoFill[E%100],V=s.isDotSymbol(O);return k[O]?k[O]:(P=V&&!B?R(1.1*_)+L:R(_),S=m(P,{w,h:w,viewBox:[-_,-_,_,_],stroke:H?T:-T}),k[O]=S,S||null)}$.exports={style:function(O,P){var S,E={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},R=O._context.plotGlPixelRatio;if(!0!==P.visible)return E;if(r.hasText(P)&&(E.text=g(O,P),E.textSel=x(O,P,P.selected),E.textUnsel=x(O,P,P.unselected)),r.hasMarkers(P)&&(E.marker=h(P),E.markerSel=o(P,P.selected),E.markerUnsel=o(P,P.unselected),!P.unselected&&e.isArrayOrTypedArray(P.marker.opacity))){var B=P.marker.opacity;for(E.markerUnsel.opacity=new Array(B.length),S=0;S<B.length;S++)E.markerUnsel.opacity[S]=l*B[S]}if(r.hasLines(P)){E.line={overlay:!0,thickness:P.line.width*R,color:P.line.color,opacity:P.opacity};var H=(i.DASHES[P.line.dash]||[1]).slice();for(S=0;S<H.length;++S)H[S]*=P.line.width*R;E.line.dashes=H}return P.error_x&&P.error_x.visible&&(E.errorX=d(P,P.error_x,R)),P.error_y&&P.error_y.visible&&(E.errorY=d(P,P.error_y,R)),P.fill&&"none"!==P.fill&&(E.fill={closed:!0,fill:P.fillcolor,thickness:0}),E},markerStyle:h,markerSelection:o,linePositions:function(O,P,S){var E,R,B=S.length,H=B/2;if(r.hasLines(P)&&H)if("hv"===P.line.shape){for(E=[],R=0;R<H-1;R++)isNaN(S[2*R])||isNaN(S[2*R+1])?E.push(NaN,NaN,NaN,NaN):(E.push(S[2*R],S[2*R+1]),isNaN(S[2*R+2])||isNaN(S[2*R+3])?E.push(NaN,NaN):E.push(S[2*R+2],S[2*R+1]));E.push(S[B-2],S[B-1])}else if("hvh"===P.line.shape){for(E=[],R=0;R<H-1;R++)if(isNaN(S[2*R])||isNaN(S[2*R+1])||isNaN(S[2*R+2])||isNaN(S[2*R+3]))isNaN(S[2*R])||isNaN(S[2*R+1])?E.push(NaN,NaN):E.push(S[2*R],S[2*R+1]),E.push(NaN,NaN);else{var V=(S[2*R]+S[2*R+2])/2;E.push(S[2*R],S[2*R+1],V,S[2*R+1],V,S[2*R+3])}E.push(S[B-2],S[B-1])}else if("vhv"===P.line.shape){for(E=[],R=0;R<H-1;R++)if(isNaN(S[2*R])||isNaN(S[2*R+1])||isNaN(S[2*R+2])||isNaN(S[2*R+3]))isNaN(S[2*R])||isNaN(S[2*R+1])?E.push(NaN,NaN):E.push(S[2*R],S[2*R+1]),E.push(NaN,NaN);else{var Z=(S[2*R+1]+S[2*R+3])/2;E.push(S[2*R],S[2*R+1],S[2*R],Z,S[2*R+2],Z)}E.push(S[B-2],S[B-1])}else if("vh"===P.line.shape){for(E=[],R=0;R<H-1;R++)isNaN(S[2*R])||isNaN(S[2*R+1])?E.push(NaN,NaN,NaN,NaN):(E.push(S[2*R],S[2*R+1]),isNaN(S[2*R+2])||isNaN(S[2*R+3])?E.push(NaN,NaN):E.push(S[2*R],S[2*R+3]));E.push(S[B-2],S[B-1])}else E=S;var W=!1;for(R=0;R<E.length;R++)if(isNaN(E[R])){W=!0;break}var G=W||E.length>i.TOO_MANY_POINTS||r.hasMarkers(P)?"rect":"round";if(W&&P.connectgaps){var X=E[0],te=E[1];for(R=0;R<E.length;R+=2)isNaN(E[R])||isNaN(E[R+1])?(E[R]=X,E[R+1]=te):(X=E[R],te=E[R+1])}return{join:G,positions:E}},errorBarPositions:function(O,P,S,E,R){var B=v.getComponentMethod("errorbars","makeComputeError"),H=t.getFromId(O,P.xaxis),V=t.getFromId(O,P.yaxis),Z=S.length/2,W={};function G(X,te){var D=te._id.charAt(0),N=P["error_"+D];if(N&&N.visible&&("linear"===te.type||"log"===te.type)){for(var U=B(N),Q={x:0,y:1}[D],j={x:[0,1,2,3],y:[2,3,0,1]}[D],J=new Float64Array(4*Z),K=1/0,re=-1/0,ne=0,se=0;ne<Z;ne++,se+=4){var oe=X[ne];if(p(oe)){var pe=S[2*ne+Q],ce=U(oe,ne),ge=ce[0],xe=ce[1];if(p(ge)&&p(xe)){var be=oe+xe;J[se+j[0]]=pe-te.c2l(oe-ge),J[se+j[1]]=te.c2l(be)-pe,J[se+j[2]]=0,J[se+j[3]]=0,K=Math.min(K,oe-ge),re=Math.max(re,oe+xe)}}}W[D]={positions:S,errors:J,_bnds:[K,re]}}}return G(E,H),G(R,V),W},textPosition:function(O,P,S,E){var R,B=P._length,H={};if(r.hasMarkers(P)){var V=S.font,Z=S.align,W=S.baseline;for(H.offset=new Array(B),R=0;R<B;R++){var G=E.sizes?E.sizes[R]:E.size,X=Array.isArray(V)?V[R].size:V.size,te=Array.isArray(Z)?Z.length>1?Z[R]:Z[0]:Z,D=Array.isArray(W)?W.length>1?W[R]:W[0]:W,U=c[D],Q=G?G/.8+1:0;H.offset[R]=[c[te]*Q/X,(-U*Q-.5*U)/X]}}return H}}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":942,"../scatter/subtypes":950,"./constants":979,"./helpers":984,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],981:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../registry"),b=y("./helpers"),v=y("./attributes"),e=y("../scatter/constants"),n=y("../scatter/subtypes"),t=y("../scatter/xy_defaults"),a=y("../scatter/period_defaults"),r=y("../scatter/marker_defaults"),u=y("../scatter/line_defaults"),s=y("../scatter/fillcolor_defaults"),i=y("../scatter/text_defaults");$.exports=function(l,c,f,g){function h(L,M){return p.coerce(l,c,v,L,M)}var o=!!l.marker&&b.isOpenSymbol(l.marker.symbol),x=n.isBubble(l),d=t(l,c,g,h);if(d){a(l,c,g,h),h("xhoverformat"),h("yhoverformat");var w=d<e.PTS_LINESONLY?"lines+markers":"lines";h("text"),h("hovertext"),h("hovertemplate"),h("mode",w),n.hasLines(c)&&(h("connectgaps"),u(l,c,f,g,h),h("line.shape")),n.hasMarkers(c)&&(r(l,c,f,g,h),h("marker.line.width",o||x?1:0)),n.hasText(c)&&(h("texttemplate"),i(l,c,g,h));var _=(c.line||{}).color,T=(c.marker||{}).color;h("fill"),"none"!==c.fill&&s(l,c,f,h);var k=m.getComponentMethod("errorbars","supplyDefaults");k(l,c,_||T||f,{axis:"y"}),k(l,c,_||T||f,{axis:"x",inherit:"y"}),p.coerceSelectionMarkerOpacity(c,h)}else c.visible=!1}},{"../../lib":503,"../../registry":638,"../scatter/constants":929,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/marker_defaults":944,"../scatter/period_defaults":945,"../scatter/subtypes":950,"../scatter/text_defaults":951,"../scatter/xy_defaults":952,"./attributes":977,"./helpers":984}],982:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/color"),b=y("../../constants/interactions").DESELECTDIM;$.exports={styleTextSelection:function(v){var e,n,t=v[0],a=t.trace,r=t.t,u=r._scene,s=r.index,i=u.selectBatch[s],l=u.unselectBatch[s],c=u.textOptions[s],f=u.textSelectedOptions[s]||{},g=u.textUnselectedOptions[s]||{},h=p.extendFlat({},c);if(i.length||l.length){var o=f.color,x=g.color,d=c.color,w=Array.isArray(d);for(h.color=new Array(a._length),e=0;e<i.length;e++)h.color[n=i[e]]=o||(w?d[n]:d);for(e=0;e<l.length;e++){n=l[e];var _=w?d[n]:d;h.color[n]=x||(o?_:m.addOpacity(_,b))}}u.glText[s].update(h)}}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],983:[function(y,$,ee){"use strict";var p=y("../scatter/format_labels");$.exports=function(m,b,v){var e=m.i;return"x"in m||(m.x=b._x[e]),"y"in m||(m.y=b._y[e]),p(m,b,v)}},{"../scatter/format_labels":934}],984:[function(y,$,ee){"use strict";var p=y("./constants");ee.isOpenSymbol=function(m){return"string"==typeof m?p.OPEN_RE.test(m):m%200>100},ee.isDotSymbol=function(m){return"string"==typeof m?p.DOT_RE.test(m):m>200}},{"./constants":979}],985:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../lib"),b=y("../scatter/get_trace_color");function v(e,n,t,a){var r=e.xa,u=e.ya,s=e.distance,i=e.dxy,l=e.index,c={pointNumber:l,x:n[l],y:t[l]};c.tx=Array.isArray(a.text)?a.text[l]:a.text,c.htx=Array.isArray(a.hovertext)?a.hovertext[l]:a.hovertext,c.data=Array.isArray(a.customdata)?a.customdata[l]:a.customdata,c.tp=Array.isArray(a.textposition)?a.textposition[l]:a.textposition;var f=a.textfont;f&&(c.ts=m.isArrayOrTypedArray(f.size)?f.size[l]:f.size,c.tc=Array.isArray(f.color)?f.color[l]:f.color,c.tf=Array.isArray(f.family)?f.family[l]:f.family);var g=a.marker;g&&(c.ms=m.isArrayOrTypedArray(g.size)?g.size[l]:g.size,c.mo=m.isArrayOrTypedArray(g.opacity)?g.opacity[l]:g.opacity,c.mx=m.isArrayOrTypedArray(g.symbol)?g.symbol[l]:g.symbol,c.mc=m.isArrayOrTypedArray(g.color)?g.color[l]:g.color);var h=g&&g.line;h&&(c.mlc=Array.isArray(h.color)?h.color[l]:h.color,c.mlw=m.isArrayOrTypedArray(h.width)?h.width[l]:h.width);var o=g&&g.gradient;o&&"none"!==o.type&&(c.mgt=Array.isArray(o.type)?o.type[l]:o.type,c.mgc=Array.isArray(o.color)?o.color[l]:o.color);var x=r.c2p(c.x,!0),d=u.c2p(c.y,!0),w=c.mrc||1,_=a.hoverlabel;_&&(c.hbg=Array.isArray(_.bgcolor)?_.bgcolor[l]:_.bgcolor,c.hbc=Array.isArray(_.bordercolor)?_.bordercolor[l]:_.bordercolor,c.hts=m.isArrayOrTypedArray(_.font.size)?_.font.size[l]:_.font.size,c.htc=Array.isArray(_.font.color)?_.font.color[l]:_.font.color,c.htf=Array.isArray(_.font.family)?_.font.family[l]:_.font.family,c.hnl=m.isArrayOrTypedArray(_.namelength)?_.namelength[l]:_.namelength);var T=a.hoverinfo;T&&(c.hi=Array.isArray(T)?T[l]:T);var k=a.hovertemplate;k&&(c.ht=Array.isArray(k)?k[l]:k);var L={};L[e.index]=c;var M=a._origX,O=a._origY,P=m.extendFlat({},e,{color:b(a,c),x0:x-w,x1:x+w,xLabelVal:M?M[l]:c.x,y0:d-w,y1:d+w,yLabelVal:O?O[l]:c.y,cd:L,distance:s,spikeDistance:i,hovertemplate:c.ht});return c.htx?P.text=c.htx:c.tx?P.text=c.tx:a.text&&(P.text=a.text),m.fillText(c,a,P),p.getComponentMethod("errorbars","hoverInfo")(c,a,P),P}$.exports={hoverPoints:function(e,n,t,a){var r,u,s,i,l,c,f,g,h,o,x=e.cd,d=x[0].t,w=x[0].trace,_=e.xa,T=e.ya,k=d.x,L=d.y,M=_.c2p(n),O=T.c2p(t),P=e.distance;if(d.tree){var S=_.p2c(M-P),E=_.p2c(M+P),R=T.p2c(O-P),B=T.p2c(O+P);r="x"===a?d.tree.range(Math.min(S,E),Math.min(T._rl[0],T._rl[1]),Math.max(S,E),Math.max(T._rl[0],T._rl[1])):d.tree.range(Math.min(S,E),Math.min(R,B),Math.max(S,E),Math.max(R,B))}else r=d.ids;var H=P;if("x"===a){var V=!!w.xperiodalignment,Z=!!w.yperiodalignment;for(c=0;c<r.length;c++){if(i=k[u=r[c]],f=Math.abs(_.c2p(i)-M),V){var W=_.c2p(w._xStarts[u]),G=_.c2p(w._xEnds[u]);f=M>=Math.min(W,G)&&M<=Math.max(W,G)?0:1/0}if(f<H){if(H=f,g=T.c2p(l=L[u])-O,Z){var X=T.c2p(w._yStarts[u]),te=T.c2p(w._yEnds[u]);g=O>=Math.min(X,te)&&O<=Math.max(X,te)?0:1/0}o=Math.sqrt(f*f+g*g),s=r[c]}}}else for(c=r.length-1;c>-1;c--)i=k[u=r[c]],l=L[u],f=_.c2p(i)-M,g=T.c2p(l)-O,(h=Math.sqrt(f*f+g*g))<H&&(H=o=h,s=u);return e.index=s,e.distance=H,e.dxy=o,void 0===s?[e]:[v(e,k,L,w)]},calcHover:v}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":935}],986:[function(y,$,ee){"use strict";var p=y("./hover");$.exports={moduleType:"trace",name:"scattergl",basePlotModule:y("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("../scatter/cross_trace_defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),hoverPoints:p.hoverPoints,selectPoints:y("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":931,"../scatter/marker_colorbar":943,"./attributes":977,"./calc":978,"./defaults":981,"./format_labels":983,"./hover":985,"./plot":987,"./select":989}],987:[function(y,$,ee){"use strict";var p=y("regl-scatter2d"),m=y("regl-line2d"),b=y("regl-error2d"),v=y("gl-text"),e=y("../../lib"),n=y("../../components/dragelement/helpers").selectMode,t=y("../../lib/prepare_regl"),a=y("../scatter/subtypes"),r=y("../scatter/link_traces"),u=y("./edit_style").styleTextSelection;function s(i,l,c,f){var g=i._size,T=g.w*f,k=g.h*f;return[g.l*f+l.domain[0]*T,g.b*f+c.domain[0]*k,i.width*f-g.r*f-(1-l.domain[1])*T,i.height*f-g.t*f-(1-c.domain[1])*k]}$.exports=function(i,l,c){if(c.length){var f,g,h=i._fullLayout,o=l._scene,x=l.xaxis,d=l.yaxis;if(o)if(t(i,["ANGLE_instanced_arrays","OES_element_index_uint"])){var w=o.count,_=h._glcanvas.data()[0].regl;if(r(i,l,c),o.dirty){if(!0===o.error2d&&(o.error2d=b(_)),!0===o.line2d&&(o.line2d=m(_)),!0===o.scatter2d&&(o.scatter2d=p(_)),!0===o.fill2d&&(o.fill2d=m(_)),!0===o.glText)for(o.glText=new Array(w),f=0;f<w;f++)o.glText[f]=new v(_);if(o.glText){if(w>o.glText.length){var T=w-o.glText.length;for(f=0;f<T;f++)o.glText.push(new v(_))}else w<o.glText.length&&o.glText.splice(w,o.glText.length-w).forEach(function(j){j.destroy()});for(f=0;f<w;f++)o.glText[f].update(o.textOptions[f])}if(o.line2d&&(o.line2d.update(o.lineOptions),o.lineOptions=o.lineOptions.map(function(j){if(j&&j.positions){for(var J=j.positions,K=0;K<J.length&&(isNaN(J[K])||isNaN(J[K+1]));)K+=2;for(var re=J.length-2;re>K&&(isNaN(J[re])||isNaN(J[re+1]));)re-=2;j.positions=J.slice(K,re+2)}return j}),o.line2d.update(o.lineOptions)),o.error2d){var L=(o.errorXOptions||[]).concat(o.errorYOptions||[]);o.error2d.update(L)}o.scatter2d&&o.scatter2d.update(o.markerOptions),o.fillOrder=e.repeat(null,w),o.fill2d&&(o.fillOptions=o.fillOptions.map(function(j,J){var K=c[J];if(j&&K&&K[0]&&K[0].trace){var re,ne,se=K[0],oe=se.trace,pe=se.t,ce=o.lineOptions[J],ge=[];oe._ownfill&&ge.push(J),oe._nexttrace&&ge.push(J+1),ge.length&&(o.fillOrder[J]=ge);var xe,we,be=[],Se=ce&&ce.positions||pe.positions;if("tozeroy"===oe.fill){for(xe=0;xe<Se.length&&isNaN(Se[xe+1]);)xe+=2;for(we=Se.length-2;we>xe&&isNaN(Se[we+1]);)we-=2;0!==Se[xe+1]&&(be=[Se[xe],0]),be=be.concat(Se.slice(xe,we+2)),0!==Se[we+1]&&(be=be.concat([Se[we],0]))}else if("tozerox"===oe.fill){for(xe=0;xe<Se.length&&isNaN(Se[xe]);)xe+=2;for(we=Se.length-2;we>xe&&isNaN(Se[we]);)we-=2;0!==Se[xe]&&(be=[0,Se[xe+1]]),be=be.concat(Se.slice(xe,we+2)),0!==Se[we]&&(be=be.concat([0,Se[we+1]]))}else if("toself"===oe.fill||"tonext"===oe.fill){for(be=[],re=0,j.splitNull=!0,ne=0;ne<Se.length;ne+=2)(isNaN(Se[ne])||isNaN(Se[ne+1]))&&((be=be.concat(Se.slice(re,ne))).push(Se[re],Se[re+1]),be.push(null,null),re=ne+2);be=be.concat(Se.slice(re)),re&&be.push(Se[re],Se[re+1])}else{var fe=oe._nexttrace;if(fe){var me=o.lineOptions[J+1];if(me){var Te=me.positions;if("tonexty"===oe.fill){for(be=Se.slice(),J=Math.floor(Te.length/2);J--;){var _e=Te[2*J],Me=Te[2*J+1];isNaN(_e)||isNaN(Me)||be.push(_e,Me)}j.fill=fe.fillcolor}}}}if(oe._prevtrace&&"tonext"===oe._prevtrace.fill){var Ie=o.lineOptions[J-1].positions,ze=be.length/2,Ve=[re=ze];for(ne=0;ne<Ie.length;ne+=2)(isNaN(Ie[ne])||isNaN(Ie[ne+1]))&&(Ve.push(ne/2+ze+1),re=ne+2);be=be.concat(Ie),j.hole=Ve}return j.fillmode=oe.fill,j.opacity=oe.opacity,j.positions=be,j}}),o.fill2d.update(o.fillOptions))}var O=n(h.dragmode),P=h.clickmode.indexOf("select")>-1;for(f=0;f<w;f++){var S=c[f][0],E=S.trace,R=S.t,B=R.index,H=E._length,V=R.x,Z=R.y;if(E.selectedpoints||O||P){if(O||(O=!0),E.selectedpoints){var W=o.selectBatch[B]=e.selIndices2selPoints(E),G={};for(g=0;g<W.length;g++)G[W[g]]=1;var X=[];for(g=0;g<H;g++)G[g]||X.push(g);o.unselectBatch[B]=X}var te=R.xpx=new Array(H),D=R.ypx=new Array(H);for(g=0;g<H;g++)te[g]=x.c2p(V[g]),D[g]=d.c2p(Z[g])}else R.xpx=R.ypx=null}if(O){if(o.select2d||(o.select2d=p(h._glcanvas.data()[1].regl)),o.scatter2d){var N=new Array(w);for(f=0;f<w;f++)N[f]=o.selectBatch[f].length||o.unselectBatch[f].length?o.markerUnselectedOptions[f]:{};o.scatter2d.update(N)}o.select2d&&(o.select2d.update(o.markerOptions),o.select2d.update(o.markerSelectedOptions)),o.glText&&c.forEach(function(j){a.hasText(((j||[])[0]||{}).trace||{})&&u(j)})}else o.scatter2d&&o.scatter2d.update(o.markerOptions);var U={viewport:s(h,x,d,i._context.plotGlPixelRatio),range:[(x._rl||x.range)[0],(d._rl||d.range)[0],(x._rl||x.range)[1],(d._rl||d.range)[1]]},Q=e.repeat(U,o.count);o.fill2d&&o.fill2d.update(Q),o.line2d&&o.line2d.update(Q),o.error2d&&o.error2d.update(Q.concat(Q)),o.scatter2d&&o.scatter2d.update(Q),o.select2d&&o.select2d.update(Q),o.glText&&o.glText.forEach(function(j){j.update(U)})}else o.init()}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":941,"../scatter/subtypes":950,"./edit_style":982,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],988:[function(y,$,ee){"use strict";var p=y("../../lib");$.exports=function(m,b){var v=b._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},n={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return b._scene||((v=b._scene={}).init=function(){p.extendFlat(v,n,e)},v.init(),v.update=function(t){var a=p.repeat(t,v.count);if(v.fill2d&&v.fill2d.update(a),v.scatter2d&&v.scatter2d.update(a),v.line2d&&v.line2d.update(a),v.error2d&&v.error2d.update(a.concat(a)),v.select2d&&v.select2d.update(a),v.glText)for(var r=0;r<v.count;r++)v.glText[r].update(t)},v.draw=function(){for(var t=v.count,a=v.fill2d,r=v.error2d,u=v.line2d,s=v.scatter2d,i=v.glText,l=v.select2d,c=v.selectBatch,f=v.unselectBatch,g=0;g<t;g++){if(a&&v.fillOrder[g]&&a.draw(v.fillOrder[g]),u&&v.lineOptions[g]&&u.draw(g),r&&(v.errorXOptions[g]&&r.draw(g),v.errorYOptions[g]&&r.draw(g+t)),s&&v.markerOptions[g])if(f[g].length){var h=p.repeat([],v.count);h[g]=f[g],s.draw(h)}else c[g].length||s.draw(g);i[g]&&v.textOptions[g]&&i[g].render()}l&&l.draw(c),v.dirty=!1},v.destroy=function(){v.fill2d&&v.fill2d.destroy&&v.fill2d.destroy(),v.scatter2d&&v.scatter2d.destroy&&v.scatter2d.destroy(),v.error2d&&v.error2d.destroy&&v.error2d.destroy(),v.line2d&&v.line2d.destroy&&v.line2d.destroy(),v.select2d&&v.select2d.destroy&&v.select2d.destroy(),v.glText&&v.glText.forEach(function(t){t.destroy&&t.destroy()}),v.lineOptions=null,v.fillOptions=null,v.markerOptions=null,v.markerSelectedOptions=null,v.markerUnselectedOptions=null,v.errorXOptions=null,v.errorYOptions=null,v.textOptions=null,v.textSelectedOptions=null,v.textUnselectedOptions=null,v.selectBatch=null,v.unselectBatch=null,b._scene=null}),v.dirty||p.extendFlat(v,e),v}},{"../../lib":503}],989:[function(y,$,ee){"use strict";var p=y("../scatter/subtypes"),m=y("./edit_style").styleTextSelection;$.exports=function(b,v){var e=b.cd,n=b.xaxis,t=b.yaxis,a=[],r=e[0].trace,u=e[0].t,s=r._length,i=u.x,l=u.y,c=u._scene,f=u.index;if(!c)return a;var g=p.hasText(r),h=p.hasMarkers(r);if(!0!==r.visible||!h&&!g)return a;var x=[],d=[];if(!1!==v&&!v.degenerate)for(var w=0;w<s;w++)v.contains([u.xpx[w],u.ypx[w]],!1,w,b)?(x.push(w),a.push({pointNumber:w,x:n.c2d(i[w]),y:t.c2d(l[w])})):d.push(w);if(h){var _=c.scatter2d;if(x.length||d.length){if(!c.selectBatch[f].length&&!c.unselectBatch[f].length){var T=new Array(c.count);T[f]=c.markerUnselectedOptions[f],_.update.apply(_,T)}}else{var k=new Array(c.count);k[f]=c.markerOptions[f],_.update.apply(_,k)}}return c.selectBatch[f]=x,c.unselectBatch[f]=d,g&&m(e),a}},{"../scatter/subtypes":950,"./edit_style":982}],990:[function(y,$,ee){"use strict";var p=y("../../plots/template_attributes").hovertemplateAttrs,m=y("../../plots/template_attributes").texttemplateAttrs,b=y("../scattergeo/attributes"),v=y("../scatter/attributes"),e=y("../../plots/mapbox/layout_attributes"),n=y("../../plots/attributes"),t=y("../../components/colorscale/attributes"),a=y("../../lib/extend").extendFlat,r=y("../../plot_api/edit_types").overrideAll,u=b.line,s=b.marker;$.exports=r({lon:b.lon,lat:b.lat,mode:a({},v.mode,{dflt:"markers"}),text:a({},v.text,{}),texttemplate:m({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:a({},v.hovertext,{}),line:{color:u.color,width:u.width},connectgaps:v.connectgaps,marker:a({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},t("marker")),fill:b.fill,fillcolor:v.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:v.selected.marker},unselected:{marker:v.unselected.marker},hoverinfo:a({},n.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:p()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":925,"../scattergeo/attributes":967}],991:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../lib"),b=y("../../constants/numerical").BADNUM,v=y("../../lib/geojson_utils"),e=y("../../components/colorscale"),n=y("../../components/drawing"),t=y("../scatter/make_bubble_size_func"),a=y("../scatter/subtypes"),r=y("../../plots/mapbox/convert_text_opts"),u=y("../../components/fx/helpers").appendArrayPointValue,s=y("../../lib/svg_text_utils").NEWLINES,i=y("../../lib/svg_text_utils").BR_TAG_ALL;function l(){return{geojson:v.makeBlank(),layout:{visibility:"none"},paint:{}}}function c(h,o){return m.isArrayOrTypedArray(h)?o?function(x){return p(h[x])?+h[x]:0}:function(x){return h[x]}:h?function(){return h}:f}function f(){return""}function g(h){return h[0]===b}$.exports=function(h,o){var x,d=o[0].trace,w=!0===d.visible&&0!==d._length,_="none"!==d.fill,T=a.hasLines(d),k=a.hasMarkers(d),L=a.hasText(d),M=k&&"circle"===d.marker.symbol,O=k&&"circle"!==d.marker.symbol,P=l(),S=l(),E=l(),R=l(),B={fill:P,line:S,circle:E,symbol:R};if(!w)return B;if((_||T)&&(x=v.calcTraceToLineCoords(o)),_&&(P.geojson=v.makePolygon(x),P.layout.visibility="visible",m.extendFlat(P.paint,{"fill-color":d.fillcolor})),T&&(S.geojson=v.makeLine(x),S.layout.visibility="visible",m.extendFlat(S.paint,{"line-width":d.line.width,"line-color":d.line.color,"line-opacity":d.opacity})),M){var H=function(W){var G,X,te,D,N=W[0].trace,U=N.marker,Q=N.selectedpoints,j=m.isArrayOrTypedArray(U.color),J=m.isArrayOrTypedArray(U.size),K=m.isArrayOrTypedArray(U.opacity);function re(we){return N.opacity*we}j&&(X=e.hasColorscale(N,"marker")?e.makeColorScaleFuncFromTrace(U):m.identity),J&&(te=t(N)),K&&(D=function(we){return re(p(we)?+m.constrain(we,0,1):0)});var ne,xe,se=[];for(G=0;G<W.length;G++){var oe=W[G],pe=oe.lonlat;if(!g(pe)){var ce={};X&&(ce.mcc=oe.mcc=X(oe.mc)),te&&(ce.mrc=oe.mrc=te(oe.ms)),D&&(ce.mo=D(oe.mo)),Q&&(ce.selected=oe.selected||0),se.push({type:"Feature",geometry:{type:"Point",coordinates:pe},properties:ce})}}if(Q)for(ne=n.makeSelectedPointStyleFns(N),G=0;G<se.length;G++){var ge=se[G].properties;ne.selectedOpacityFn&&(ge.mo=re(ne.selectedOpacityFn(ge))),ne.selectedColorFn&&(ge.mcc=ne.selectedColorFn(ge)),ne.selectedSizeFn&&(ge.mrc=ne.selectedSizeFn(ge))}return{geojson:{type:"FeatureCollection",features:se},mcc:j||ne&&ne.selectedColorFn?{type:"identity",property:"mcc"}:U.color,mrc:J||ne&&ne.selectedSizeFn?{type:"identity",property:"mrc"}:(xe=U.size,xe/2),mo:K||ne&&ne.selectedOpacityFn?{type:"identity",property:"mo"}:re(U.opacity)}}(o);E.geojson=H.geojson,E.layout.visibility="visible",m.extendFlat(E.paint,{"circle-color":H.mcc,"circle-radius":H.mrc,"circle-opacity":H.mo})}if((O||L)&&(R.geojson=function(W,G){for(var X=G._fullLayout,te=W[0].trace,D=te.marker||{},N=D.symbol,U=D.angle,Q="circle"!==N?c(N):f,j="auto"!==U?c(U,!0):f,J=a.hasText(te)?c(te.text):f,K=[],re=0;re<W.length;re++){var ne=W[re];if(!g(ne.lonlat)){var se,oe=te.texttemplate;if(oe){var pe=Array.isArray(oe)?oe[re]||"":oe,ce=te._module.formatLabels(ne,te,X),ge={};u(ge,te,ne.i),se=m.texttemplateString(pe,ce,X._d3locale,ge,ne,te._meta||{})}else se=J(re);se&&(se=se.replace(s,"").replace(i,"\n")),K.push({type:"Feature",geometry:{type:"Point",coordinates:ne.lonlat},properties:{symbol:Q(re),angle:j(re),text:se}})}}return{type:"FeatureCollection",features:K}}(o,h),m.extendFlat(R.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),O&&(m.extendFlat(R.layout,{"icon-size":d.marker.size/10}),"angle"in d.marker&&"auto"!==d.marker.angle&&m.extendFlat(R.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),R.layout["icon-allow-overlap"]=d.marker.allowoverlap,m.extendFlat(R.paint,{"icon-opacity":d.opacity*d.marker.opacity,"icon-color":d.marker.color})),L)){var Z=r(d.textposition,(d.marker||{}).size);m.extendFlat(R.layout,{"text-size":d.textfont.size,"text-anchor":Z.anchor,"text-offset":Z.offset}),m.extendFlat(R.paint,{"text-color":d.textfont.color,"text-opacity":d.opacity})}return B}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":942,"../scatter/subtypes":950,"fast-isnumeric":190}],992:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../scatter/subtypes"),b=y("../scatter/marker_defaults"),v=y("../scatter/line_defaults"),e=y("../scatter/text_defaults"),n=y("../scatter/fillcolor_defaults"),t=y("./attributes");$.exports=function(a,r,u,s){function i(c,f){return p.coerce(a,r,t,c,f)}if(f=r,h=(g=i)("lon")||[],o=g("lat")||[],x=Math.min(h.length,o.length),f._length=x,x){if(i("text"),i("texttemplate"),i("hovertext"),i("hovertemplate"),i("mode"),i("below"),m.hasLines(r)&&(v(a,r,u,s,i,{noDash:!0}),i("connectgaps")),m.hasMarkers(r)){b(a,r,u,s,i,{noLine:!0}),i("marker.allowoverlap"),i("marker.angle");var l=r.marker;"circle"!==l.symbol&&(p.isArrayOrTypedArray(l.size)&&(l.size=l.size[0]),p.isArrayOrTypedArray(l.color)&&(l.color=l.color[0]))}m.hasText(r)&&e(a,r,s,i,{noSelect:!0}),i("fill"),"none"!==r.fill&&n(a,r,u,i),p.coerceSelectionMarkerOpacity(r,i)}else r.visible=!1;var f,g,h,o,x}},{"../../lib":503,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"./attributes":990}],993:[function(y,$,ee){"use strict";$.exports=function(p,m){return p.lon=m.lon,p.lat=m.lat,p}},{}],994:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes");$.exports=function(m,b,v){var e={},n=v[b.subplot]._subplot.mockAxis,t=m.lonlat;return e.lonLabel=p.tickText(n,n.c2l(t[0]),!0).text,e.latLabel=p.tickText(n,n.c2l(t[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],995:[function(y,$,ee){"use strict";var p=y("../../components/fx"),m=y("../../lib"),b=y("../scatter/get_trace_color"),v=m.fillText,e=y("../../constants/numerical").BADNUM;function n(t,a,r){if(!t.hovertemplate){var u=(a.hi||t.hoverinfo).split("+"),s=-1!==u.indexOf("all"),i=-1!==u.indexOf("lon"),l=-1!==u.indexOf("lat"),c=a.lonlat,f=[];return s||i&&l?f.push("("+g(c[1])+", "+g(c[0])+")"):i?f.push(r.lon+g(c[0])):l&&f.push(r.lat+g(c[1])),(s||-1!==u.indexOf("text"))&&v(a,t,f),f.join("<br>")}function g(h){return h+"\xb0"}}$.exports={hoverPoints:function(t,a,r){var u=t.cd,s=u[0].trace,i=t.xa,l=t.ya,c=t.subplot,f=360*(a>=0?Math.floor((a+180)/360):Math.ceil((a-180)/360)),g=a-f;if(p.getClosest(u,function(L){var M=L.lonlat;if(M[0]===e)return 1/0;var O=m.modHalf(M[0],360),P=M[1],S=c.project([O,P]),E=S.x-i.c2p([g,P]),R=S.y-l.c2p([O,r]),B=Math.max(3,L.mrc||0);return Math.max(Math.sqrt(E*E+R*R)-B,1-3/B)},t),!1!==t.index){var h=u[t.index],o=h.lonlat,x=[m.modHalf(o[0],360)+f,o[1]],d=i.c2p(x),w=l.c2p(x),_=h.mrc||1;t.x0=d-_,t.x1=d+_,t.y0=w-_,t.y1=w+_;var T={};T[s.subplot]={_subplot:c};var k=s._module.formatLabels(h,s,T);return t.lonLabel=k.lonLabel,t.latLabel=k.latLabel,t.color=b(s,h),t.extraText=n(s,h,u[0].t.labels),t.hovertemplate=s.hovertemplate,[t]}},getExtraText:n}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":935}],996:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("../scattergeo/calc"),plot:y("./plot"),hoverPoints:y("./hover").hoverPoints,eventData:y("./event_data"),selectPoints:y("./select"),styleOnSelect:function(p,m){m&&m[0].trace._glTrace.update(m)},moduleType:"trace",name:"scattermapbox",basePlotModule:y("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":943,"../scattergeo/calc":968,"./attributes":990,"./defaults":992,"./event_data":993,"./format_labels":994,"./hover":995,"./plot":997,"./select":998}],997:[function(y,$,ee){"use strict";var p=y("./convert"),m=y("../../plots/mapbox/constants").traceLayerPrefix,b=["fill","line","circle","symbol"];function v(n,t){this.type="scattermapbox",this.subplot=n,this.uid=t,this.sourceIds={fill:"source-"+t+"-fill",line:"source-"+t+"-line",circle:"source-"+t+"-circle",symbol:"source-"+t+"-symbol"},this.layerIds={fill:m+t+"-fill",line:m+t+"-line",circle:m+t+"-circle",symbol:m+t+"-symbol"},this.below=null}var e=v.prototype;e.addSource=function(n,t){this.subplot.map.addSource(this.sourceIds[n],{type:"geojson",data:t.geojson})},e.setSourceData=function(n,t){this.subplot.map.getSource(this.sourceIds[n]).setData(t.geojson)},e.addLayer=function(n,t,a){this.subplot.addLayer({type:n,id:this.layerIds[n],source:this.sourceIds[n],layout:t.layout,paint:t.paint},a)},e.update=function(n){var t,a,r,u=this.subplot,s=u.map,i=p(u.gd,n),l=u.belowLookup["trace-"+this.uid];if(l!==this.below){for(t=b.length-1;t>=0;t--)s.removeLayer(this.layerIds[a=b[t]]);for(t=0;t<b.length;t++)r=i[a=b[t]],this.addLayer(a,r,l);this.below=l}for(t=0;t<b.length;t++)r=i[a=b[t]],u.setOptions(this.layerIds[a],"setLayoutProperty",r.layout),"visible"===r.layout.visibility&&(this.setSourceData(a,r),u.setOptions(this.layerIds[a],"setPaintProperty",r.paint));n[0].trace._glTrace=this},e.dispose=function(){for(var n=this.subplot.map,t=b.length-1;t>=0;t--){var a=b[t];n.removeLayer(this.layerIds[a]),n.removeSource(this.sourceIds[a])}},$.exports=function(n,t){for(var a=t[0].trace,r=new v(n,a.uid),u=p(n.gd,t),s=r.below=n.belowLookup["trace-"+a.uid],i=0;i<b.length;i++){var l=b[i],c=u[l];r.addSource(l,c),r.addLayer(l,c,s)}return t[0].trace._glTrace=r,r}},{"../../plots/mapbox/constants":611,"./convert":991}],998:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../scatter/subtypes"),b=y("../../constants/numerical").BADNUM;$.exports=function(v,e){var n,t=v.cd,a=v.xaxis,r=v.yaxis,u=[];if(!m.hasMarkers(t[0].trace))return[];if(!1===e)for(n=0;n<t.length;n++)t[n].selected=0;else for(n=0;n<t.length;n++){var i=t[n],l=i.lonlat;if(l[0]!==b){var c=[p.modHalf(l[0],360),l[1]],f=[a.c2p(c),r.c2p(c)];e.contains(f,null,n,v)?(u.push({pointNumber:n,lon:l[0],lat:l[1]}),i.selected=1):i.selected=0}}return u}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":950}],999:[function(y,$,ee){"use strict";var p=y("../../plots/template_attributes").hovertemplateAttrs,m=y("../../plots/template_attributes").texttemplateAttrs,b=y("../../lib/extend").extendFlat,v=y("../scatter/attributes"),e=y("../../plots/attributes"),n=v.line;$.exports={mode:v.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:v.text,texttemplate:m({editType:"plot"},{keys:["r","theta","text"]}),hovertext:v.hovertext,line:{color:n.color,width:n.width,dash:n.dash,shape:b({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:v.connectgaps,marker:v.marker,cliponaxis:b({},v.cliponaxis,{dflt:!1}),textposition:v.textposition,textfont:v.textfont,fill:b({},v.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:v.fillcolor,hoverinfo:b({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:v.hoveron,hovertemplate:p(),selected:v.selected,unselected:v.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":925}],1e3:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../constants/numerical").BADNUM,b=y("../../plots/cartesian/axes"),v=y("../scatter/colorscale_calc"),e=y("../scatter/arrays_to_calcdata"),n=y("../scatter/calc_selection"),t=y("../scatter/calc").calcMarkerSize;$.exports=function(a,r){for(var u=a._fullLayout,s=r.subplot,i=u[s].radialaxis,l=u[s].angularaxis,c=i.makeCalcdata(r,"r"),f=l.makeCalcdata(r,"theta"),g=r._length,h=new Array(g),o=0;o<g;o++){var x=c[o],d=f[o],w=h[o]={};p(x)&&p(d)?(w.r=x,w.theta=d):w.r=m}var _=t(r,g);return r._extremes.x=b.findExtremes(i,c,{ppad:_}),v(a,r),e(h,r),n(h,r),h}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":924,"../scatter/calc":926,"../scatter/calc_selection":927,"../scatter/colorscale_calc":928,"fast-isnumeric":190}],1001:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../scatter/subtypes"),b=y("../scatter/marker_defaults"),v=y("../scatter/line_defaults"),e=y("../scatter/line_shape_defaults"),n=y("../scatter/text_defaults"),t=y("../scatter/fillcolor_defaults"),a=y("../scatter/constants").PTS_LINESONLY,r=y("./attributes");function u(s,i,l,c){var f,g=c("r"),h=c("theta");if(g)h?f=Math.min(g.length,h.length):(f=g.length,c("theta0"),c("dtheta"));else{if(!h)return 0;f=i.theta.length,c("r0"),c("dr")}return i._length=f,f}$.exports={handleRThetaDefaults:u,supplyDefaults:function(s,i,l,c){function f(o,x){return p.coerce(s,i,r,o,x)}var g=u(0,i,0,f);if(g){f("thetaunit"),f("mode",g<a?"lines+markers":"lines"),f("text"),f("hovertext"),"fills"!==i.hoveron&&f("hovertemplate"),m.hasLines(i)&&(v(s,i,l,c,f),e(s,i,f),f("connectgaps")),m.hasMarkers(i)&&b(s,i,l,c,f,{gradient:!0}),m.hasText(i)&&(f("texttemplate"),n(s,i,c,f));var h=[];(m.hasMarkers(i)||m.hasText(i))&&(f("cliponaxis"),f("marker.maxdisplayed"),h.push("points")),f("fill"),"none"!==i.fill&&(t(s,i,l,f),m.hasLines(i)||e(s,i,f)),"tonext"!==i.fill&&"toself"!==i.fill||h.push("fills"),f("hoveron",h.join("+")||"points"),p.coerceSelectionMarkerOpacity(i,f)}else i.visible=!1}}},{"../../lib":503,"../scatter/constants":929,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/line_shape_defaults":940,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"./attributes":999}],1002:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/cartesian/axes");$.exports=function(b,v,e){var n,t,a={},r=e[v.subplot]._subplot;r?(n=r.radialAxis,t=r.angularAxis):(n=(r=e[v.subplot]).radialaxis,t=r.angularaxis);var u=n.c2l(b.r);a.rLabel=m.tickText(n,u,!0).text;var s="degrees"===t.thetaunit?p.rad2deg(b.theta):b.theta;return a.thetaLabel=m.tickText(t,s,!0).text,a}},{"../../lib":503,"../../plots/cartesian/axes":554}],1003:[function(y,$,ee){"use strict";var p=y("../scatter/hover");function m(b,v,e,n){var t=e.radialAxis,a=e.angularAxis;t._hovertitle="r",a._hovertitle="\u03b8";var r={};r[v.subplot]={_subplot:e};var u=v._module.formatLabels(b,v,r);n.rLabel=u.rLabel,n.thetaLabel=u.thetaLabel;var i=[];function l(f,g){i.push(f._hovertitle+": "+g)}if(!v.hovertemplate){var c=(b.hi||v.hoverinfo).split("+");-1!==c.indexOf("all")&&(c=["r","theta","text"]),-1!==c.indexOf("r")&&l(t,n.rLabel),-1!==c.indexOf("theta")&&l(a,n.thetaLabel),-1!==c.indexOf("text")&&n.text&&(i.push(n.text),delete n.text),n.extraText=i.join("<br>")}}$.exports={hoverPoints:function(b,v,e,n){var t=p(b,v,e,n);if(t&&!1!==t[0].index){var a=t[0];if(void 0===a.index)return t;var r=b.subplot,u=a.cd[a.index],s=a.trace;if(r.isPtInside(u))return a.xLabelVal=void 0,a.yLabelVal=void 0,m(u,s,r,a),a.hovertemplate=s.hovertemplate,t}},makeHoverPointText:m}},{"../scatter/hover":936}],1004:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:y("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),style:y("../scatter/style").style,styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover").hoverPoints,selectPoints:y("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":943,"../scatter/select":947,"../scatter/style":949,"./attributes":999,"./calc":1e3,"./defaults":1001,"./format_labels":1002,"./hover":1003,"./plot":1005}],1005:[function(y,$,ee){"use strict";var p=y("../scatter/plot"),m=y("../../constants/numerical").BADNUM;$.exports=function(b,v,e){for(var n=v.layers.frontplot.select("g.scatterlayer"),t={xaxis:v.xaxis,yaxis:v.yaxis,plot:v.framework,layerClipId:v._hasClipOnAxisFalse?v.clipIds.forTraces:null},a=v.radialAxis,r=v.angularAxis,u=0;u<e.length;u++)for(var s=e[u],i=0;i<s.length;i++){var l=s[i],c=l.r;if(c===m)l.x=l.y=m;else{var f=a.c2g(c),g=r.c2g(l.theta);l.x=f*Math.cos(g),l.y=f*Math.sin(g)}}p(b,t,e,n)}},{"../../constants/numerical":479,"../scatter/plot":946}],1006:[function(y,$,ee){"use strict";var p=y("../scatterpolar/attributes"),m=y("../scattergl/attributes"),b=y("../../plots/template_attributes").texttemplateAttrs;$.exports={mode:p.mode,r:p.r,theta:p.theta,r0:p.r0,dr:p.dr,theta0:p.theta0,dtheta:p.dtheta,thetaunit:p.thetaunit,text:p.text,texttemplate:b({editType:"plot"},{keys:["r","theta","text"]}),hovertext:p.hovertext,hovertemplate:p.hovertemplate,line:m.line,connectgaps:m.connectgaps,marker:m.marker,fill:m.fill,fillcolor:m.fillcolor,textposition:m.textposition,textfont:m.textfont,hoverinfo:p.hoverinfo,selected:p.selected,unselected:p.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":977,"../scatterpolar/attributes":999}],1007:[function(y,$,ee){"use strict";var p=y("../scatter/colorscale_calc"),m=y("../scatter/calc").calcMarkerSize,b=y("../scattergl/convert"),v=y("../../plots/cartesian/axes"),e=y("../scattergl/constants").TOO_MANY_POINTS;$.exports=function(n,t){var a=n._fullLayout,r=t.subplot,u=a[r].radialaxis,s=a[r].angularaxis,i=t._r=u.makeCalcdata(t,"r"),l=t._theta=s.makeCalcdata(t,"theta"),c=t._length,f={};c<i.length&&(i=i.slice(0,c)),c<l.length&&(l=l.slice(0,c)),f.r=i,f.theta=l,p(n,t);var g,h=f.opts=b.style(n,t);return c<e?g=m(t,c):h.marker&&(g=2*(h.marker.sizeAvg||Math.max(h.marker.size,3))),t._extremes.x=v.findExtremes(u,i,{ppad:g}),[{x:!1,y:!1,t:f,trace:t}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":926,"../scatter/colorscale_calc":928,"../scattergl/constants":979,"../scattergl/convert":980}],1008:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../scatter/subtypes"),b=y("../scatterpolar/defaults").handleRThetaDefaults,v=y("../scatter/marker_defaults"),e=y("../scatter/line_defaults"),n=y("../scatter/text_defaults"),t=y("../scatter/fillcolor_defaults"),a=y("../scatter/constants").PTS_LINESONLY,r=y("./attributes");$.exports=function(u,s,i,l){function c(g,h){return p.coerce(u,s,r,g,h)}var f=b(u,s,l,c);f?(c("thetaunit"),c("mode",f<a?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==s.hoveron&&c("hovertemplate"),m.hasLines(s)&&(e(u,s,i,l,c),c("connectgaps")),m.hasMarkers(s)&&v(u,s,i,l,c),m.hasText(s)&&(c("texttemplate"),n(u,s,l,c)),c("fill"),"none"!==s.fill&&t(u,s,i,c),p.coerceSelectionMarkerOpacity(s,c)):s.visible=!1}},{"../../lib":503,"../scatter/constants":929,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"../scatterpolar/defaults":1001,"./attributes":1006}],1009:[function(y,$,ee){"use strict";var p=y("../scatterpolar/format_labels");$.exports=function(m,b,v){var e=m.i;return"r"in m||(m.r=b._r[e]),"theta"in m||(m.theta=b._theta[e]),p(m,b,v)}},{"../scatterpolar/format_labels":1002}],1010:[function(y,$,ee){"use strict";var p=y("../scattergl/hover"),m=y("../scatterpolar/hover").makeHoverPointText;$.exports={hoverPoints:function(b,v,e,n){var t=b.cd[0].t,a=t.r,r=t.theta,u=p.hoverPoints(b,v,e,n);if(u&&!1!==u[0].index){var s=u[0];if(void 0===s.index)return u;var i=b.subplot,l=s.cd[s.index],c=s.trace;if(l.r=a[s.index],l.theta=r[s.index],i.isPtInside(l))return s.xLabelVal=void 0,s.yLabelVal=void 0,m(l,c,i,s),u}}}},{"../scattergl/hover":985,"../scatterpolar/hover":1003}],1011:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:y("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),hoverPoints:y("./hover").hoverPoints,selectPoints:y("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":943,"../scattergl/select":989,"./attributes":1006,"./calc":1007,"./defaults":1008,"./format_labels":1009,"./hover":1010,"./plot":1012}],1012:[function(y,$,ee){"use strict";var p=y("@plotly/point-cluster"),m=y("fast-isnumeric"),b=y("../scattergl/plot"),v=y("../scattergl/scene_update"),e=y("../scattergl/convert"),n=y("../../lib"),t=y("../scattergl/constants").TOO_MANY_POINTS;$.exports=function(a,r,u){if(u.length){var s=r.radialAxis,i=r.angularAxis,l=v(a,r);return u.forEach(function(c){if(c&&c[0]&&c[0].trace){var f,g=c[0],h=g.trace,o=g.t,x=h._length,d=o.r,w=o.theta,_=o.opts,T=d.slice(),k=w.slice();for(f=0;f<d.length;f++)r.isPtInside({r:d[f],theta:w[f]})||(T[f]=NaN,k[f]=NaN);var L=new Array(2*x),M=Array(x),O=Array(x);for(f=0;f<x;f++){var P,S,E=T[f];if(m(E)){var R=s.c2g(E),B=i.c2g(k[f],h.thetaunit);P=R*Math.cos(B),S=R*Math.sin(B)}else P=S=NaN;M[f]=L[2*f]=P,O[f]=L[2*f+1]=S}o.tree=p(L),_.marker&&x>=t&&(_.marker.cluster=o.tree),_.marker&&(_.markerSel.positions=_.markerUnsel.positions=_.marker.positions=L),_.line&&L.length>1&&n.extendFlat(_.line,e.linePositions(a,h,L)),_.text&&(n.extendFlat(_.text,{positions:L},e.textPosition(a,h,_.text,_.marker)),n.extendFlat(_.textSel,{positions:L},e.textPosition(a,h,_.text,_.markerSel)),n.extendFlat(_.textUnsel,{positions:L},e.textPosition(a,h,_.text,_.markerUnsel))),_.fill&&!l.fill2d&&(l.fill2d=!0),_.marker&&!l.scatter2d&&(l.scatter2d=!0),_.line&&!l.line2d&&(l.line2d=!0),_.text&&!l.glText&&(l.glText=!0),l.lineOptions.push(_.line),l.fillOptions.push(_.fill),l.markerOptions.push(_.marker),l.markerSelectedOptions.push(_.markerSel),l.markerUnselectedOptions.push(_.markerUnsel),l.textOptions.push(_.text),l.textSelectedOptions.push(_.textSel),l.textUnselectedOptions.push(_.textUnsel),l.selectBatch.push([]),l.unselectBatch.push([]),o.x=M,o.y=O,o.rawx=M,o.rawy=O,o.r=d,o.theta=w,o.positions=L,o._scene=l,o.index=l.count,l.count++}}),b(a,r,u)}}},{"../../lib":503,"../scattergl/constants":979,"../scattergl/convert":980,"../scattergl/plot":987,"../scattergl/scene_update":988,"@plotly/point-cluster":59,"fast-isnumeric":190}],1013:[function(y,$,ee){"use strict";var p=y("../../plots/template_attributes").hovertemplateAttrs,m=y("../../plots/template_attributes").texttemplateAttrs,b=y("../../lib/extend").extendFlat,v=y("../scatter/attributes"),e=y("../../plots/attributes"),n=v.line;$.exports={mode:v.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:v.text,texttemplate:m({editType:"plot"},{keys:["real","imag","text"]}),hovertext:v.hovertext,line:{color:n.color,width:n.width,dash:n.dash,shape:b({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:v.connectgaps,marker:v.marker,cliponaxis:b({},v.cliponaxis,{dflt:!1}),textposition:v.textposition,textfont:v.textfont,fill:b({},v.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:v.fillcolor,hoverinfo:b({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:v.hoveron,hovertemplate:p(),selected:v.selected,unselected:v.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":925}],1014:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../../constants/numerical").BADNUM,b=y("../scatter/colorscale_calc"),v=y("../scatter/arrays_to_calcdata"),e=y("../scatter/calc_selection"),n=y("../scatter/calc").calcMarkerSize;$.exports=function(t,a){for(var r=t._fullLayout,u=a.subplot,i=r[u].imaginaryaxis,l=r[u].realaxis.makeCalcdata(a,"real"),c=i.makeCalcdata(a,"imag"),f=a._length,g=new Array(f),h=0;h<f;h++){var o=l[h],x=c[h],d=g[h]={};p(o)&&p(x)?(d.real=o,d.imag=x):d.real=m}return n(a,f),b(t,a),v(g,a),e(g,a),g}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":924,"../scatter/calc":926,"../scatter/calc_selection":927,"../scatter/colorscale_calc":928,"fast-isnumeric":190}],1015:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../scatter/subtypes"),b=y("../scatter/marker_defaults"),v=y("../scatter/line_defaults"),e=y("../scatter/line_shape_defaults"),n=y("../scatter/text_defaults"),t=y("../scatter/fillcolor_defaults"),a=y("../scatter/constants").PTS_LINESONLY,r=y("./attributes");$.exports=function(u,s,i,l){function c(h,o){return p.coerce(u,s,r,h,o)}var o,d,w,_,T,f=(o=s,_=(d=c)("real"),T=d("imag"),_&&T&&(w=Math.min(_.length,T.length)),o._length=w,w);if(f){c("mode",f<a?"lines+markers":"lines"),c("text"),c("hovertext"),"fills"!==s.hoveron&&c("hovertemplate"),m.hasLines(s)&&(v(u,s,i,l,c),e(u,s,c),c("connectgaps")),m.hasMarkers(s)&&b(u,s,i,l,c,{gradient:!0}),m.hasText(s)&&(c("texttemplate"),n(u,s,l,c));var g=[];(m.hasMarkers(s)||m.hasText(s))&&(c("cliponaxis"),c("marker.maxdisplayed"),g.push("points")),c("fill"),"none"!==s.fill&&(t(u,s,i,c),m.hasLines(s)||e(u,s,c)),"tonext"!==s.fill&&"toself"!==s.fill||g.push("fills"),c("hoveron",g.join("+")||"points"),p.coerceSelectionMarkerOpacity(s,c)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":929,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/line_shape_defaults":940,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"./attributes":1013}],1016:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes");$.exports=function(m,b,v){var e={},n=v[b.subplot]._subplot;return e.realLabel=p.tickText(n.radialAxis,m.real,!0).text,e.imagLabel=p.tickText(n.angularAxis,m.imag,!0).text,e}},{"../../plots/cartesian/axes":554}],1017:[function(y,$,ee){"use strict";var p=y("../scatter/hover");function m(b,v,e,n){var t=e.radialAxis,a=e.angularAxis;t._hovertitle="real",a._hovertitle="imag";var r={};r[v.subplot]={_subplot:e};var u=v._module.formatLabels(b,v,r);n.realLabel=u.realLabel,n.imagLabel=u.imagLabel;var i=[];function l(f,g){i.push(f._hovertitle+": "+g)}if(!v.hovertemplate){var c=(b.hi||v.hoverinfo).split("+");-1!==c.indexOf("all")&&(c=["real","imag","text"]),-1!==c.indexOf("real")&&l(t,n.realLabel),-1!==c.indexOf("imag")&&l(a,n.imagLabel),-1!==c.indexOf("text")&&n.text&&(i.push(n.text),delete n.text),n.extraText=i.join("<br>")}}$.exports={hoverPoints:function(b,v,e,n){var t=p(b,v,e,n);if(t&&!1!==t[0].index){var a=t[0];if(void 0===a.index)return t;var r=b.subplot,u=a.cd[a.index],s=a.trace;if(r.isPtInside(u))return a.xLabelVal=void 0,a.yLabelVal=void 0,m(u,s,r,a),a.hovertemplate=s.hovertemplate,t}},makeHoverPointText:m}},{"../scatter/hover":936}],1018:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"scattersmith",basePlotModule:y("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),style:y("../scatter/style").style,styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover").hoverPoints,selectPoints:y("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":943,"../scatter/select":947,"../scatter/style":949,"./attributes":1013,"./calc":1014,"./defaults":1015,"./format_labels":1016,"./hover":1017,"./plot":1019}],1019:[function(y,$,ee){"use strict";var p=y("../scatter/plot"),m=y("../../constants/numerical").BADNUM,b=y("../../plots/smith/helpers").smith;$.exports=function(v,e,n){for(var t=e.layers.frontplot.select("g.scatterlayer"),a={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},r=0;r<n.length;r++)for(var u=n[r],s=0;s<u.length;s++){var i=u[s],l=i.real;if(l===m)i.x=i.y=m;else{var c=b([l,i.imag]);i.x=c[0],i.y=c[1]}}p(v,a,n,t)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":946}],1020:[function(y,$,ee){"use strict";var p=y("../../plots/template_attributes").hovertemplateAttrs,m=y("../../plots/template_attributes").texttemplateAttrs,b=y("../scatter/attributes"),v=y("../../plots/attributes"),e=y("../../components/colorscale/attributes"),n=y("../../components/drawing/attributes").dash,t=y("../../lib/extend").extendFlat,a=b.marker,r=b.line,u=a.line;$.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:t({},b.mode,{dflt:"markers"}),text:t({},b.text,{}),texttemplate:m({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:t({},b.hovertext,{}),line:{color:r.color,width:r.width,dash:n,shape:t({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:b.connectgaps,cliponaxis:b.cliponaxis,fill:t({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:b.fillcolor,marker:t({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:t({width:u.width,editType:"calc"},e("marker.line")),gradient:a.gradient,editType:"calc"},e("marker")),textfont:b.textfont,textposition:b.textposition,selected:b.selected,unselected:b.unselected,hoverinfo:t({},v.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:b.hoveron,hovertemplate:p()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":925}],1021:[function(y,$,ee){"use strict";var p=y("fast-isnumeric"),m=y("../scatter/colorscale_calc"),b=y("../scatter/arrays_to_calcdata"),v=y("../scatter/calc_selection"),e=y("../scatter/calc").calcMarkerSize,n=["a","b","c"],t={a:["b","c"],b:["a","c"],c:["a","b"]};$.exports=function(a,r){var u,s,i,l,c,f,g=a._fullLayout[r.subplot].sum,h=r.sum||g,o={a:r.a,b:r.b,c:r.c};for(u=0;u<n.length;u++)if(!o[i=n[u]]){for(c=o[t[i][0]],f=o[t[i][1]],l=new Array(c.length),s=0;s<c.length;s++)l[s]=h-c[s]-f[s];o[i]=l}var x,d,w,_,L=r._length,M=new Array(L);for(u=0;u<L;u++)d=o.b[u],w=o.c[u],p(x=o.a[u])&&p(d)&&p(w)?(1!=(_=g/((x=+x)+(d=+d)+(w=+w)))&&(x*=_,d*=_,w*=_),M[u]={x:w-d,y:x,a:x,b:d,c:w}):M[u]={x:!1,y:!1};return e(r,L),m(a,r),b(M,r),v(M,r),M}},{"../scatter/arrays_to_calcdata":924,"../scatter/calc":926,"../scatter/calc_selection":927,"../scatter/colorscale_calc":928,"fast-isnumeric":190}],1022:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../scatter/constants"),b=y("../scatter/subtypes"),v=y("../scatter/marker_defaults"),e=y("../scatter/line_defaults"),n=y("../scatter/line_shape_defaults"),t=y("../scatter/text_defaults"),a=y("../scatter/fillcolor_defaults"),r=y("./attributes");$.exports=function(u,s,i,l){function c(d,w){return p.coerce(u,s,r,d,w)}var f,g=c("a"),h=c("b"),o=c("c");if(g?(f=g.length,h?(f=Math.min(f,h.length),o&&(f=Math.min(f,o.length))):f=o?Math.min(f,o.length):0):h&&o&&(f=Math.min(h.length,o.length)),f){s._length=f,c("sum"),c("text"),c("hovertext"),"fills"!==s.hoveron&&c("hovertemplate"),c("mode",f<m.PTS_LINESONLY?"lines+markers":"lines"),b.hasLines(s)&&(e(u,s,i,l,c),n(u,s,c),c("connectgaps")),b.hasMarkers(s)&&v(u,s,i,l,c,{gradient:!0}),b.hasText(s)&&(c("texttemplate"),t(u,s,l,c));var x=[];(b.hasMarkers(s)||b.hasText(s))&&(c("cliponaxis"),c("marker.maxdisplayed"),x.push("points")),c("fill"),"none"!==s.fill&&(a(u,s,i,c),b.hasLines(s)||n(u,s,c)),"tonext"!==s.fill&&"toself"!==s.fill||x.push("fills"),c("hoveron",x.join("+")||"points"),p.coerceSelectionMarkerOpacity(s,c)}else s.visible=!1}},{"../../lib":503,"../scatter/constants":929,"../scatter/fillcolor_defaults":933,"../scatter/line_defaults":938,"../scatter/line_shape_defaults":940,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scatter/text_defaults":951,"./attributes":1020}],1023:[function(y,$,ee){"use strict";$.exports=function(p,m,b,v,e){if(m.xa&&(p.xaxis=m.xa),m.ya&&(p.yaxis=m.ya),v[e]){var n=v[e];p.a=n.a,p.b=n.b,p.c=n.c}else p.a=m.a,p.b=m.b,p.c=m.c;return p}},{}],1024:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes");$.exports=function(m,b,v){var e={},n=v[b.subplot]._subplot;return e.aLabel=p.tickText(n.aaxis,m.a,!0).text,e.bLabel=p.tickText(n.baxis,m.b,!0).text,e.cLabel=p.tickText(n.caxis,m.c,!0).text,e}},{"../../plots/cartesian/axes":554}],1025:[function(y,$,ee){"use strict";var p=y("../scatter/hover");$.exports=function(m,b,v,e){var n=p(m,b,v,e);if(n&&!1!==n[0].index){var t=n[0];if(void 0===t.index){var r=m.xa._length,u=r*(1-t.y0/m.ya._length)/2,s=r-u;return t.x0=Math.max(Math.min(t.x0,s),u),t.x1=Math.max(Math.min(t.x1,s),u),n}var i=t.cd[t.index],l=t.trace,c=t.subplot;t.a=i.a,t.b=i.b,t.c=i.c,t.xLabelVal=void 0,t.yLabelVal=void 0;var f={};f[l.subplot]={_subplot:c};var g=l._module.formatLabels(i,l,f);t.aLabel=g.aLabel,t.bLabel=g.bLabel,t.cLabel=g.cLabel;var o=[];if(!l.hovertemplate){var x=(i.hi||l.hoverinfo).split("+");-1!==x.indexOf("all")&&(x=["a","b","c"]),-1!==x.indexOf("a")&&d(c.aaxis,t.aLabel),-1!==x.indexOf("b")&&d(c.baxis,t.bLabel),-1!==x.indexOf("c")&&d(c.caxis,t.cLabel)}return t.extraText=o.join("<br>"),t.hovertemplate=l.hovertemplate,n}function d(w,_){o.push(w._hovertitle+": "+_)}}},{"../scatter/hover":936}],1026:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),formatLabels:y("./format_labels"),calc:y("./calc"),plot:y("./plot"),style:y("../scatter/style").style,styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("../scatter/select"),eventData:y("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:y("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":943,"../scatter/select":947,"../scatter/style":949,"./attributes":1020,"./calc":1021,"./defaults":1022,"./event_data":1023,"./format_labels":1024,"./hover":1025,"./plot":1027}],1027:[function(y,$,ee){"use strict";var p=y("../scatter/plot");$.exports=function(m,b,v){var e=b.plotContainer;e.select(".scatterlayer").selectAll("*").remove();var n={xaxis:b.xaxis,yaxis:b.yaxis,plot:e,layerClipId:b._hasClipOnAxisFalse?b.clipIdRelative:null},t=b.layers.frontplot.select("g.scatterlayer");p(m,n,v,t)}},{"../scatter/plot":946}],1028:[function(y,$,ee){"use strict";var p=y("../scatter/attributes"),m=y("../../components/colorscale/attributes"),b=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,v=y("../../plots/template_attributes").hovertemplateAttrs,e=y("../scattergl/attributes"),n=y("../../plots/cartesian/constants").idRegex,t=y("../../plot_api/plot_template").templatedArray,a=y("../../lib/extend").extendFlat,r=p.marker,u=r.line,s=a(m("marker.line",{editTypeOverride:"calc"}),{width:a({},u.width,{editType:"calc"}),editType:"calc"}),i=a(m("marker"),{symbol:r.symbol,size:a({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:s,editType:"calc"});function l(c){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:n[c],editType:"plot"}}}i.color.editType=i.cmin.editType=i.cmax.editType="style",$.exports={dimensions:t("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:a({},e.text,{}),hovertext:a({},e.hovertext,{}),hovertemplate:v(),xhoverformat:b("x"),yhoverformat:b("y"),marker:i,xaxes:l("x"),yaxes:l("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":925,"../scattergl/attributes":977}],1029:[function(y,$,ee){"use strict";var p=y("regl-line2d"),m=y("../../registry"),b=y("../../lib/prepare_regl"),v=y("../../plots/get_data").getModuleCalcData,e=y("../../plots/cartesian"),n=y("../../plots/cartesian/axis_ids").getFromId,t=y("../../plots/cartesian/axes").shouldShowZeroLine;function a(u,s,i){for(var c=s._visibleDims,f=i.viewOpts.ranges=new Array(i.matrixOptions.data.length),g=0;g<c.length;g++){var h=c[g],o=f[g]=new Array(4),x=n(u,s._diag[h][0]);x&&(o[0]=x.r2l(x.range[0]),o[2]=x.r2l(x.range[1]));var d=n(u,s._diag[h][1]);d&&(o[1]=d.r2l(d.range[0]),o[3]=d.r2l(d.range[1]))}i.selectBatch.length||i.unselectBatch.length?i.matrix.update({ranges:f},{ranges:f}):i.matrix.update({ranges:f})}function r(u){var s=u._fullLayout,i=s._glcanvas.data()[0].regl,l=s._splomGrid;l||(l=s._splomGrid=p(i)),l.update(function(c){var f,g=c._context.plotGlPixelRatio,h=c._fullLayout,o=h._size,x=[0,0,h.width*g,h.height*g],d={};function w(W,G,X,te,D,N){X*=g,te*=g,D*=g,N*=g;var U=G[W+"color"],Q=G[W+"width"],j=String(U+Q);j in d?d[j].data.push(NaN,NaN,X,te,D,N):d[j]={data:[X,te,D,N],join:"rect",thickness:Q*g,color:U,viewport:x,range:x,overlay:!1}}for(f in h._splomSubplots){var _,T,k=h._plots[f],L=k.xaxis,M=k.yaxis,O=L._gridVals,P=M._gridVals,S=L._offset,E=L._length,R=M._length,B=o.b+M.domain[0]*o.h,H=-M._m,V=-H*M.r2l(M.range[0],M.calendar);if(L.showgrid)for(f=0;f<O.length;f++)_=S+L.l2p(O[f].x),w("grid",L,_,B,_,B+R);if(M.showgrid)for(f=0;f<P.length;f++)w("grid",M,S,T=B+V+H*P[f].x,S+E,T);t(c,L,M)&&(_=S+L.l2p(0),w("zeroline",L,_,B,_,B+R)),t(c,M,L)&&w("zeroline",M,S,T=B+V+0,S+E,T)}var Z=[];for(f in d)Z.push(d[f]);return Z}(u))}$.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(u){var s=u._fullLayout,i=m.getModule("splom"),l=v(u.calcdata,i)[0];b(u,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(s._hasOnlyLargeSploms&&r(u),i.plot(u,{},l))},drag:function(u){var s=u.calcdata,i=u._fullLayout;i._hasOnlyLargeSploms&&r(u);for(var l=0;l<s.length;l++){var c=s[l][0].trace,f=i._splomScenes[c.uid];"splom"===c.type&&f&&f.matrix&&a(u,c,f)}},updateGrid:r,clean:function(u,s,i,l){var c,f={};if(l._splomScenes){for(c=0;c<u.length;c++){var g=u[c];"splom"===g.type&&(f[g.uid]=1)}for(c=0;c<i.length;c++){var h=i[c];if(!f[h.uid]){var o=l._splomScenes[h.uid];o&&o.destroy&&o.destroy(),l._splomScenes[h.uid]=null,delete l._splomScenes[h.uid]}}}0===Object.keys(l._splomScenes||{}).length&&delete l._splomScenes,l._splomGrid&&!s._hasOnlyLargeSploms&&l._hasOnlyLargeSploms&&(l._splomGrid.destroy(),l._splomGrid=null,delete l._splomGrid),e.clean(u,s,i,l)},updateFx:e.updateFx,toSVG:e.toSVG}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1030:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/cartesian/axis_ids"),b=y("../scatter/calc").calcMarkerSize,v=y("../scatter/calc").calcAxisExpansion,e=y("../scatter/colorscale_calc"),n=y("../scattergl/convert").markerSelection,t=y("../scattergl/convert").markerStyle,a=y("./scene_update"),r=y("../../constants/numerical").BADNUM,u=y("../scattergl/constants").TOO_MANY_POINTS;$.exports=function(s,i){var l,c,f,g,h,o,x=i.dimensions,d=i._length,w={},_=w.cdata=[],T=w.data=[],k=i._visibleDims=[];function L(O,P){for(var S=O.makeCalcdata({v:P.values,vcalendar:i.calendar},"v"),E=0;E<S.length;E++)S[E]=S[E]===r?NaN:S[E];_.push(S),T.push("log"===O.type?p.simpleMap(S,O.c2l):S)}for(l=0;l<x.length;l++)if((f=x[l]).visible){if(g=m.getFromId(s,i._diag[l][0]),h=m.getFromId(s,i._diag[l][1]),g&&h&&g.type!==h.type){p.log("Skipping splom dimension "+l+" with conflicting axis types");continue}g?(L(g,f),h&&"category"===h.type&&(h._categories=g._categories.slice())):L(h,f),k.push(l)}for(e(s,i),p.extendFlat(w,t(i)),o=_.length*d>u?w.sizeAvg||Math.max(w.size,3):b(i,d),c=0;c<k.length;c++)f=x[l=k[c]],g=m.getFromId(s,i._diag[l][0])||{},h=m.getFromId(s,i._diag[l][1])||{},v(s,i,g,h,_[c],_[c],o);var M=a(s,i);return M.matrix||(M.matrix=!0),M.matrixOptions=w,M.selectedOptions=n(i,i.selected),M.unselectedOptions=n(i,i.unselected),[{x:!1,y:!1,t:{},trace:i}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":926,"../scatter/colorscale_calc":928,"../scattergl/constants":979,"../scattergl/convert":980,"./scene_update":1037}],1031:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/array_container_defaults"),b=y("./attributes"),v=y("../scatter/subtypes"),e=y("../scatter/marker_defaults"),n=y("../parcoords/merge_length"),t=y("../scattergl/helpers").isOpenSymbol;function a(r,u){function s(l,c){return p.coerce(r,u,b.dimensions,l,c)}s("label");var i=s("values");i&&i.length?s("visible"):u.visible=!1,s("axis.type"),s("axis.matches")}$.exports=function(r,u,s,i){function l(d,w){return p.coerce(r,u,b,d,w)}var c=m(r,u,{name:"dimensions",handleItemDefaults:a}),f=l("diagonal.visible"),g=l("showupperhalf"),h=l("showlowerhalf");if(n(u,c,"values")&&(f||g||h)){l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),e(r,u,s,i,l);var o=t(u.marker.symbol),x=v.isBubble(u);l("marker.line.width",o||x?1:0),function(d,w,_,T){var k,L,M=w.dimensions,O=M.length,P=w.showupperhalf,S=w.showlowerhalf,E=w.diagonal.visible,R=new Array(O),B=new Array(O);for(k=0;k<O;k++){var H=k?k+1:"";R[k]="x"+H,B[k]="y"+H}var V=T("xaxes",R),Z=T("yaxes",B),W=w._diag=new Array(O);w._xaxes={},w._yaxes={};var G=[],X=[];function te(ne,se,oe,pe){if(ne){var ce=ne.charAt(0),ge=_._splomAxes[ce];if(w["_"+ce+"axes"][ne]=1,pe.push(ne),!(ne in ge)){var xe=ge[ne]={};oe&&(xe.label=oe.label||"",oe.visible&&oe.axis&&(oe.axis.type&&(xe.type=oe.axis.type),oe.axis.matches&&(xe.matches=se)))}}}var D=!E&&!S,N=!E&&!P;for(w._axesDim={},k=0;k<O;k++){var U=M[k],Q=0===k,j=k===O-1,J=Q&&D||j&&N?void 0:V[k],K=Q&&N||j&&D?void 0:Z[k];te(J,K,U,G),te(K,J,U,X),W[k]=[J,K],w._axesDim[J]=k,w._axesDim[K]=k}for(k=0;k<G.length;k++)for(L=0;L<X.length;L++){var re=G[k]+X[L];k>L&&P||k<L&&S?_._splomSubplots[re]=1:k!==L||!E&&S&&P||(_._splomSubplots[re]=1)}(!S||!E&&P&&S)&&(_._splomGridDflt.xside="bottom",_._splomGridDflt.yside="left")}(0,u,i,l),p.coerceSelectionMarkerOpacity(u,l)}else u.visible=!1}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":896,"../scatter/marker_defaults":944,"../scatter/subtypes":950,"../scattergl/helpers":984,"./attributes":1028}],1032:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../scatter/colorscale_calc"),b=y("../scattergl/convert").markerStyle;$.exports=function(v,e){var n=e.trace,t=v._fullLayout._splomScenes[n.uid];if(t){m(v,n),p.extendFlat(t.matrixOptions,b(n));var a=p.extendFlat({},t.matrixOptions,t.viewOpts);t.matrix.update(a,null)}}},{"../../lib":503,"../scatter/colorscale_calc":928,"../scattergl/convert":980}],1033:[function(y,$,ee){"use strict";ee.getDimIndex=function(p,m){for(var b=m._id,v={x:0,y:1}[b.charAt(0)],e=p._visibleDims,n=0;n<e.length;n++)if(p._diag[e[n]][v]===b)return n;return!1}},{}],1034:[function(y,$,ee){"use strict";var p=y("./helpers"),m=y("../scattergl/hover").calcHover;$.exports={hoverPoints:function(b,v,e){var n=b.cd[0].trace,t=b.scene.matrixOptions.cdata,a=b.xa,r=b.ya,u=a.c2p(v),s=r.c2p(e),i=b.distance,l=p.getDimIndex(n,a),c=p.getDimIndex(n,r);if(!1===l||!1===c)return[b];for(var f,g,h=t[l],o=t[c],x=i,d=0;d<h.length;d++){var _=o[d],T=a.c2p(h[d])-u,k=r.c2p(_)-s,L=Math.sqrt(T*T+k*k);L<x&&(x=g=L,f=d)}return b.index=f,b.distance=x,b.dxy=g,void 0===f?[b]:[m(b,h,o,n)]}}},{"../scattergl/hover":985,"./helpers":1033}],1035:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../components/grid");$.exports={moduleType:"trace",name:"splom",basePlotModule:y("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:y("../scatter/marker_colorbar"),calc:y("./calc"),plot:y("./plot"),hoverPoints:y("./hover").hoverPoints,selectPoints:y("./select"),editStyle:y("./edit_style"),meta:{}},p.register(m)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":943,"./attributes":1028,"./base_plot":1029,"./calc":1030,"./defaults":1031,"./edit_style":1032,"./hover":1034,"./plot":1036,"./select":1038}],1036:[function(y,$,ee){"use strict";var p=y("regl-splom"),m=y("../../lib"),b=y("../../plots/cartesian/axis_ids"),v=y("../../components/dragelement/helpers").selectMode;function e(n,t){var a,r,u,s,i,l=n._fullLayout,c=l._size,f=t.trace,g=t.t,h=l._splomScenes[f.uid],o=h.matrixOptions,x=o.cdata,d=l._glcanvas.data()[0].regl,w=l.dragmode;if(0!==x.length){o.lower=f.showupperhalf,o.upper=f.showlowerhalf,o.diagonal=f.diagonal.visible;var _=f._visibleDims,T=x.length,k=h.viewOpts={};for(k.ranges=new Array(T),k.domains=new Array(T),i=0;i<_.length;i++){u=_[i];var L=k.ranges[i]=new Array(4),M=k.domains[i]=new Array(4);(a=b.getFromId(n,f._diag[u][0]))&&(L[0]=a._rl[0],L[2]=a._rl[1],M[0]=a.domain[0],M[2]=a.domain[1]),(r=b.getFromId(n,f._diag[u][1]))&&(L[1]=r._rl[0],L[3]=r._rl[1],M[1]=r.domain[0],M[3]=r.domain[1])}var O=n._context.plotGlPixelRatio,P=c.l*O,S=c.b*O;k.viewport=[P,S,c.w*O+P,c.h*O+S],!0===h.matrix&&(h.matrix=p(d));var B=l.clickmode.indexOf("select")>-1,H=!0;if(v(w)||f.selectedpoints||B){var V=f._length;if(f.selectedpoints){h.selectBatch=f.selectedpoints;var Z=f.selectedpoints,W={};for(u=0;u<Z.length;u++)W[Z[u]]=!0;var G=[];for(u=0;u<V;u++)W[u]||G.push(u);h.unselectBatch=G}var X=g.xpx=new Array(T),te=g.ypx=new Array(T);for(i=0;i<_.length;i++){if(a=b.getFromId(n,f._diag[u=_[i]][0]))for(X[i]=new Array(V),s=0;s<V;s++)X[i][s]=a.c2p(x[i][s]);if(r=b.getFromId(n,f._diag[u][1]))for(te[i]=new Array(V),s=0;s<V;s++)te[i][s]=r.c2p(x[i][s])}if(h.selectBatch.length||h.unselectBatch.length){var D=m.extendFlat({},o,h.unselectedOptions,k),N=m.extendFlat({},o,h.selectedOptions,k);h.matrix.update(D,N),H=!1}}else g.xpx=g.ypx=null;if(H){var U=m.extendFlat({},o,k);h.matrix.update(U,null)}}}$.exports=function(n,t,a){if(a.length)for(var r=0;r<a.length;r++)e(n,a[r][0])}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1037:[function(y,$,ee){"use strict";var p=y("../../lib");$.exports=function(m,b){var v=m._fullLayout,e=b.uid,n=v._splomScenes;n||(n=v._splomScenes={});var t={dirty:!0,selectBatch:[],unselectBatch:[]},a=n[b.uid];return a||((a=n[e]=p.extendFlat({},t,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){a.matrix&&a.matrix.draw&&(a.selectBatch.length||a.unselectBatch.length?a.matrix.draw(a.unselectBatch,a.selectBatch):a.matrix.draw()),a.dirty=!1},a.destroy=function(){a.matrix&&a.matrix.destroy&&a.matrix.destroy(),a.matrixOptions=null,a.selectBatch=null,a.unselectBatch=null,a=null}),a.dirty||p.extendFlat(a,t),a}},{"../../lib":503}],1038:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../scatter/subtypes"),b=y("./helpers");$.exports=function(v,e){var n=v.cd,t=n[0].trace,a=n[0].t,r=v.scene,u=r.matrixOptions.cdata,s=v.xaxis,i=v.yaxis,l=[];if(!r)return l;var c=!m.hasMarkers(t)&&!m.hasText(t);if(!0!==t.visible||c)return l;var f=b.getDimIndex(t,s),g=b.getDimIndex(t,i);if(!1===f||!1===g)return l;var h=a.xpx[f],o=a.ypx[g],x=u[f],d=u[g],w=[],_=[];if(!1!==e&&!e.degenerate)for(var T=0;T<x.length;T++)e.contains([h[T],o[T]],null,T,v)?(w.push(T),l.push({pointNumber:T,x:x[T],y:d[T]})):_.push(T);var k=r.matrixOptions;return w.length||_.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,p.extendFlat({},k,r.selectedOptions,r.viewOpts)):r.matrix.update(k,null),r.selectBatch=w,r.unselectBatch=_,l}},{"../../lib":503,"../scatter/subtypes":950,"./helpers":1033}],1039:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/attributes"),m=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=y("../../plots/template_attributes").hovertemplateAttrs,v=y("../mesh3d/attributes"),e=y("../../plots/attributes"),n=y("../../lib/extend").extendFlat,t={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:b({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:m("u",1),vhoverformat:m("v",1),whoverformat:m("w",1),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),showlegend:n({},e.showlegend,{dflt:!1})};n(t,p("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(a){t[a]=v[a]}),t.hoverinfo=n({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),t.transforms=void 0,$.exports=t},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":866}],1040:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/colorscale/calc");function b(n){var t,a,r,u,s,i,l,c,f,g,h,o,x=n._x,d=n._y,w=n._z,_=n._len,T=-1/0,k=1/0,L=-1/0,M=1/0,O=-1/0,P=1/0,S="";for(_&&(l=x[0],f=d[0],h=w[0]),_>1&&(c=x[_-1],g=d[_-1],o=w[_-1]),t=0;t<_;t++)T=Math.max(T,x[t]),k=Math.min(k,x[t]),L=Math.max(L,d[t]),M=Math.min(M,d[t]),O=Math.max(O,w[t]),P=Math.min(P,w[t]),u||x[t]===l||(u=!0,S+="x"),s||d[t]===f||(s=!0,S+="y"),i||w[t]===h||(i=!0,S+="z");u||(S+="x"),s||(S+="y"),i||(S+="z");var E=v(n._x),R=v(n._y),B=v(n._z);S=(S=(S=S.replace("x",(l>c?"-":"+")+"x")).replace("y",(f>g?"-":"+")+"y")).replace("z",(h>o?"-":"+")+"z");var H=function(){_=0,E=[],R=[],B=[]};(!_||_<E.length*R.length*B.length)&&H();var V=function(ce){return"x"===ce?x:"y"===ce?d:w},Z=function(ce){return"x"===ce?E:"y"===ce?R:B},W=function(ce){return ce[_-1]<ce[0]?-1:1},G=V(S[1]),X=V(S[3]),te=V(S[5]),D=Z(S[1]).length,N=Z(S[3]).length,U=Z(S[5]).length,Q=!1,j=function(ce,ge,xe){return D*(N*ce+ge)+xe},J=W(V(S[1])),K=W(V(S[3])),re=W(V(S[5]));for(t=0;t<U-1;t++){for(a=0;a<N-1;a++){for(r=0;r<D-1;r++){var ne=j(t,a,r),se=j(t,a,r+1),oe=j(t,a+1,r),pe=j(t+1,a,r);if(G[ne]*J<G[se]*J&&X[ne]*K<X[oe]*K&&te[ne]*re<te[pe]*re||(Q=!0),Q)break}if(Q)break}if(Q)break}return Q&&(p.warn("Encountered arbitrary coordinates! Unable to input data grid."),H()),{xMin:k,yMin:M,zMin:P,xMax:T,yMax:L,zMax:O,Xs:E,Ys:R,Zs:B,len:_,fill:S}}function v(n){return p.distinctVals(n).vals}function e(n,t){if(void 0===t&&(t=n.length),p.isTypedArray(n))return n.subarray(0,t);for(var a=[],r=0;r<t;r++)a[r]=+n[r];return a}$.exports={calc:function(n,t){t._len=Math.min(t.u.length,t.v.length,t.w.length,t.x.length,t.y.length,t.z.length),t._u=e(t.u,t._len),t._v=e(t.v,t._len),t._w=e(t.w,t._len),t._x=e(t.x,t._len),t._y=e(t.y,t._len),t._z=e(t.z,t._len);var a=b(t);t._gridFill=a.fill,t._Xs=a.Xs,t._Ys=a.Ys,t._Zs=a.Zs,t._len=a.len;var r,u,s,i=0;t.starts&&(r=e(t.starts.x||[]),u=e(t.starts.y||[]),s=e(t.starts.z||[]),i=Math.min(r.length,u.length,s.length)),t._startsX=r||[],t._startsY=u||[],t._startsZ=s||[];var l,c=0,f=1/0;for(l=0;l<t._len;l++){var g=t._u[l],h=t._v[l],o=t._w[l],x=Math.sqrt(g*g+h*h+o*o);c=Math.max(c,x),f=Math.min(f,x)}for(m(n,t,{vals:[f,c],containerStr:"",cLetter:"c"}),l=0;l<i;l++){var d=r[l];a.xMax=Math.max(a.xMax,d),a.xMin=Math.min(a.xMin,d);var w=u[l];a.yMax=Math.max(a.yMax,w),a.yMin=Math.min(a.yMin,w);var _=s[l];a.zMax=Math.max(a.zMax,_),a.zMin=Math.min(a.zMin,_)}t._slen=i,t._normMax=c,t._xbnds=[a.xMin,a.xMax],t._ybnds=[a.yMin,a.yMax],t._zbnds=[a.zMin,a.zMax]},filter:e,processGrid:b}},{"../../components/colorscale/calc":374,"../../lib":503}],1041:[function(y,$,ee){"use strict";var p=y("../../../stackgl_modules").gl_streamtube3d,m=p.createTubeMesh,b=y("../../lib"),v=y("../../lib/gl_format_color").parseColorScale,e=y("../../components/colorscale").extractOpts,n=y("../../plots/gl3d/zip3"),t={xaxis:0,yaxis:1,zaxis:2};function a(l,c){this.scene=l,this.uid=c,this.mesh=null,this.data=null}var r=a.prototype;function u(l){var c=l.length;return c>2?l.slice(1,c-1):2===c?[(l[0]+l[1])/2]:l}function s(l){var c=l.length;return 1===c?[.5,.5]:[l[1]-l[0],l[c-1]-l[c-2]]}function i(l,c){var f=l.fullSceneLayout,g=l.dataScale,h=c._len,o={};function x(D,N){var U=f[N],Q=g[t[N]];return b.simpleMap(D,function(j){return U.d2l(j)*Q})}if(o.vectors=n(x(c._u,"xaxis"),x(c._v,"yaxis"),x(c._w,"zaxis"),h),!h)return{positions:[],cells:[]};var d=x(c._Xs,"xaxis"),w=x(c._Ys,"yaxis"),_=x(c._Zs,"zaxis");if(o.meshgrid=[d,w,_],o.gridFill=c._gridFill,c._slen)o.startingPositions=n(x(c._startsX,"xaxis"),x(c._startsY,"yaxis"),x(c._startsZ,"zaxis"));else{for(var T=w[0],k=u(d),L=u(_),M=new Array(k.length*L.length),O=0,P=0;P<k.length;P++)for(var S=0;S<L.length;S++)M[O++]=[k[P],T,L[S]];o.startingPositions=M}o.colormap=v(c),o.tubeSize=c.sizeref,o.maxLength=c.maxdisplayed;var E=x(c._xbnds,"xaxis"),R=x(c._ybnds,"yaxis"),B=x(c._zbnds,"zaxis"),H=s(d),V=s(w),Z=s(_),G=p(o,[[E[0]-H[0],R[0]-V[0],B[0]-Z[0]],[E[1]+H[1],R[1]+V[1],B[1]+Z[1]]]),X=e(c);G.vertexIntensityBounds=[X.min/c._normMax,X.max/c._normMax];var te=c.lightposition;return G.lightPosition=[te.x,te.y,te.z],G.ambient=c.lighting.ambient,G.diffuse=c.lighting.diffuse,G.specular=c.lighting.specular,G.roughness=c.lighting.roughness,G.fresnel=c.lighting.fresnel,G.opacity=c.opacity,c._pad=G.tubeScale*c.sizeref*2,G}r.handlePick=function(l){var c=this.scene.fullSceneLayout,f=this.scene.dataScale;function g(x,d){var _=f[t[d]];return c[d].l2c(x)/_}if(l.object===this.mesh){var h=l.data.position,o=l.data.velocity;return l.traceCoordinate=[g(h[0],"xaxis"),g(h[1],"yaxis"),g(h[2],"zaxis"),g(o[0],"xaxis"),g(o[1],"yaxis"),g(o[2],"zaxis"),l.data.intensity*this.data._normMax,l.data.divergence],l.textLabel=this.data.hovertext||this.data.text,!0}},r.update=function(l){this.data=l;var c=i(this.scene,l);this.mesh.update(c)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(l,c){var f=l.glplot.gl,g=i(l,c),h=m(f,g),o=new a(l,c.uid);return o.mesh=h,o.data=c,h._trace=o,l.glplot.add(h),o}},{"../../../stackgl_modules":1119,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1042:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/colorscale/defaults"),b=y("./attributes");$.exports=function(v,e,n,t){function a(f,g){return p.coerce(v,e,b,f,g)}var r=a("u"),u=a("v"),s=a("w"),i=a("x"),l=a("y"),c=a("z");r&&r.length&&u&&u.length&&s&&s.length&&i&&i.length&&l&&l.length&&c&&c.length?(a("starts.x"),a("starts.y"),a("starts.z"),a("maxdisplayed"),a("sizeref"),a("lighting.ambient"),a("lighting.diffuse"),a("lighting.specular"),a("lighting.roughness"),a("lighting.fresnel"),a("lightposition.x"),a("lightposition.y"),a("lightposition.z"),m(v,e,t,a,{prefix:"",cLetter:"c"}),a("text"),a("hovertext"),a("hovertemplate"),a("uhoverformat"),a("vhoverformat"),a("whoverformat"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1039}],1043:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"streamtube",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:y("./attributes"),supplyDefaults:y("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:y("./calc").calc,plot:y("./convert"),eventData:function(p,m){return p.tubex=p.x,p.tubey=p.y,p.tubez=p.z,p.tubeu=m.traceCoordinate[3],p.tubev=m.traceCoordinate[4],p.tubew=m.traceCoordinate[5],p.norm=m.traceCoordinate[6],p.divergence=m.traceCoordinate[7],delete p.x,delete p.y,delete p.z,p},meta:{}}},{"../../plots/gl3d":598,"./attributes":1039,"./calc":1040,"./convert":1041,"./defaults":1042}],1044:[function(y,$,ee){"use strict";var p=y("../../plots/attributes"),m=y("../../plots/template_attributes").hovertemplateAttrs,b=y("../../plots/template_attributes").texttemplateAttrs,v=y("../../components/colorscale/attributes"),e=y("../../plots/domain").attributes,n=y("../pie/attributes"),t=y("./constants"),a=y("../../lib/extend").extendFlat;$.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:a({colors:{valType:"data_array",editType:"calc"},line:{color:a({},n.marker.line.color,{dflt:null}),width:a({},n.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},v("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:n.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:b({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:n.hovertext,hoverinfo:a({},p.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:m({},{keys:t.eventDataKeys}),textfont:n.textfont,insidetextorientation:n.insidetextorientation,insidetextfont:n.insidetextfont,outsidetextfont:a({},n.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:n.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":899,"./constants":1047}],1045:[function(y,$,ee){"use strict";var p=y("../../plots/plots");ee.name="sunburst",ee.plot=function(m,b,v,e){p.plotBasePlot(ee.name,m,b,v,e)},ee.clean=function(m,b,v,e){p.cleanBasePlot(ee.name,m,b,v,e)}},{"../../plots/plots":619}],1046:[function(y,$,ee){"use strict";var p=y("d3-hierarchy"),m=y("fast-isnumeric"),b=y("../../lib"),v=y("../../components/colorscale").makeColorScaleFuncFromTrace,e=y("../pie/calc").makePullColorFn,n=y("../pie/calc").generateExtendedColors,t=y("../../components/colorscale").calc,a=y("../../constants/numerical").ALMOST_EQUAL,r={},u={},s={};ee.calc=function(i,l){var c,f,g,h,o,x,d=i._fullLayout,w=l.ids,_=b.isArrayOrTypedArray(w),T=l.labels,k=l.parents,L=l.values,M=b.isArrayOrTypedArray(L),O=[],P={},S={},E=function(K){return K||"number"==typeof K},R=function(K){return!M||m(L[K])&&L[K]>=0};_?(c=Math.min(w.length,k.length),f=function(K){return E(w[K])&&R(K)},g=function(K){return String(w[K])}):(c=Math.min(T.length,k.length),f=function(K){return E(T[K])&&R(K)},g=function(K){return String(T[K])}),M&&(c=Math.min(c,L.length));for(var B=0;B<c;B++)if(f(B)){var H=g(B),V=E(k[B])?String(k[B]):"",Z={i:B,id:H,pid:V,label:E(T[B])?String(T[B]):""};M&&(Z.v=+L[B]),O.push(Z),o=H,P[h=V]?P[h].push(o):P[h]=[o],S[o]=1}if(P[""]){if(P[""].length>1){for(var W=b.randstr(),G=0;G<O.length;G++)""===O[G].pid&&(O[G].pid=W);O.unshift({hasMultipleRoots:!0,id:W,pid:"",label:""})}}else{var X,te=[];for(X in P)S[X]||te.push(X);if(1!==te.length)return b.warn(["Multiple implied roots, cannot build",l.type,"hierarchy of",l.name+".","These roots include:",te.join(", ")].join(" "));O.unshift({hasImpliedRoot:!0,id:X=te[0],pid:"",label:X})}try{x=p.stratify().id(function(K){return K.id}).parentId(function(K){return K.pid})(O)}catch(K){return b.warn(["Failed to build",l.type,"hierarchy of",l.name+".","Error:",K.message].join(" "))}var D=p.hierarchy(x),N=!1;if(M)switch(l.branchvalues){case"remainder":D.sum(function(K){return K.data.v});break;case"total":D.each(function(K){var re=K.data.data,ne=re.v;if(K.children){var se=K.children.reduce(function(oe,pe){return oe+pe.data.data.v},0);if((re.hasImpliedRoot||re.hasMultipleRoots)&&(ne=se),ne<se*a)return N=!0,b.warn(["Total value for node",K.data.data.id,"of",l.name,"is smaller than the sum of its children.","\nparent value =",ne,"\nchildren sum =",se].join(" "))}K.value=ne})}else!function K(re,ne,se){var oe=0,pe=re.children;if(pe){for(var ce=pe.length,ge=0;ge<ce;ge++)oe+=K(pe[ge],ne,se);se.branches&&oe++}else se.leaves&&oe++;return re.value=re.data.data.value=oe,ne._values||(ne._values=[]),ne._values[re.data.data.i]=oe,oe}(D,l,{branches:-1!==l.count.indexOf("branches"),leaves:-1!==l.count.indexOf("leaves")});if(!N){var U,Q;l.sort&&D.sort(function(K,re){return re.value-K.value});var j=l.marker.colors||[];return l._hasColorscale?(!!j.length||(j=M?l.values:l._values),t(i,l,{vals:j,containerStr:"marker",cLetter:"c"}),Q=v(l.marker)):U=e(d["_"+l.type+"colormap"]),D.each(function(K){var re=K.data.data;re.color=l._hasColorscale?Q(j[re.i]):U(j[re.i],re.id)}),O[0].hierarchy=D,O}},ee._runCrossTraceCalc=function(i,l){var c=l._fullLayout,f=l.calcdata,g=c[i+"colorway"],h=c["_"+i+"colormap"];c["extend"+i+"colors"]&&(g=n(g,"icicle"===i?s:"treemap"===i?u:r));var o,x=0;function d(T){var k=T.data.data,L=k.id;!1===k.color&&(h[L]?k.color=h[L]:T.parent?T.parent.parent?k.color=T.parent.data.data.color:(h[L]=k.color=g[x%g.length],x++):k.color=o)}for(var w=0;w<f.length;w++){var _=f[w][0];_.trace.type===i&&_.hierarchy&&(o=_.trace.root.color,_.hierarchy.each(d))}},ee.crossTraceCalc=function(i){return ee._runCrossTraceCalc("sunburst",i)}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":901,"d3-hierarchy":115,"fast-isnumeric":190}],1047:[function(y,$,ee){"use strict";$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1048:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./attributes"),b=y("../../plots/domain").defaults,v=y("../bar/defaults").handleText,e=y("../../components/colorscale"),n=e.hasColorscale,t=e.handleDefaults;$.exports=function(a,r,u,s){function i(o,x){return p.coerce(a,r,m,o,x)}var l=i("labels"),c=i("parents");if(l&&l.length&&c&&c.length){var f=i("values");i(f&&f.length?"branchvalues":"count"),i("level"),i("maxdepth"),i("marker.line.width")&&i("marker.line.color",s.paper_bgcolor),i("marker.colors");var g=r._hasColorscale=n(a,"marker","colors")||(a.marker||{}).coloraxis;g&&t(a,r,s,i,{prefix:"marker.",cLetter:"c"}),i("leaf.opacity",g?1:.7);var h=i("text");i("texttemplate"),r.texttemplate||i("textinfo",Array.isArray(h)?"text+label":"label"),i("hovertext"),i("hovertemplate"),v(a,r,s,i,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),i("insidetextorientation"),i("sort"),i("rotation"),i("root.color"),b(r,s,i),r._length=null}else r.visible=!1}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1044}],1049:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../registry"),b=y("../../components/fx/helpers").appendArrayPointValue,v=y("../../components/fx"),e=y("../../lib"),n=y("../../lib/events"),t=y("./helpers"),a=y("../pie/helpers").formatPieValue;function r(u,s,i){for(var l=u.data.data,c={curveNumber:s.index,pointNumber:l.i,data:s._input,fullData:s},f=0;f<i.length;f++){var g=i[f];g in u&&(c[g]=u[g])}return"parentString"in u&&!t.isHierarchyRoot(u)&&(c.parent=u.parentString),b(c,s,l.i),c}$.exports=function(u,s,i,l,c){var f=l[0],g=f.trace,h=f.hierarchy,o="sunburst"===g.type,x="treemap"===g.type||"icicle"===g.type;"_hasHoverLabel"in g||(g._hasHoverLabel=!1),"_hasHoverEvent"in g||(g._hasHoverEvent=!1),u.on("mouseover",function(d){var w=i._fullLayout;if(!i._dragging&&!1!==w.hovermode){var _,T=i._fullData[g.index],k=d.data.data,L=k.i,M=t.isHierarchyRoot(d),O=t.getParent(h,d),P=t.getValue(d),S=function(J){return e.castOption(T,L,J)},E=S("hovertemplate"),R=v.castHoverinfo(T,w,L),B=w.separators;if(E||R&&"none"!==R&&"skip"!==R){var H,V;o&&(H=f.cx+d.pxmid[0]*(1-d.rInscribed),V=f.cy+d.pxmid[1]*(1-d.rInscribed)),x&&(H=d._hoverX,V=d._hoverY);var Z,W={},G=[],X=[],te=function(J){return-1!==G.indexOf(J)};R&&(G="all"===R?T._module.attributes.hoverinfo.flags:R.split("+")),W.label=k.label,te("label")&&W.label&&X.push(W.label),k.hasOwnProperty("v")&&(W.value=k.v,W.valueLabel=a(W.value,B),te("value")&&X.push(W.valueLabel)),W.currentPath=d.currentPath=t.getPath(d.data),te("current path")&&!M&&X.push(W.currentPath);var D=[],N=function(){-1===D.indexOf(Z)&&(X.push(Z),D.push(Z))};W.percentParent=d.percentParent=P/t.getValue(O),W.parent=d.parentString=t.getPtLabel(O),te("percent parent")&&(Z=t.formatPercent(W.percentParent,B)+" of "+W.parent,N()),W.percentEntry=d.percentEntry=P/t.getValue(s),W.entry=d.entry=t.getPtLabel(s),!te("percent entry")||M||d.onPathbar||(Z=t.formatPercent(W.percentEntry,B)+" of "+W.entry,N()),W.percentRoot=d.percentRoot=P/t.getValue(h),W.root=d.root=t.getPtLabel(h),te("percent root")&&!M&&(Z=t.formatPercent(W.percentRoot,B)+" of "+W.root,N()),W.text=S("hovertext")||S("text"),te("text")&&e.isValidTextValue(Z=W.text)&&X.push(Z),_=[r(d,T,c.eventDataKeys)];var U={trace:T,y:V,_x0:d._x0,_x1:d._x1,_y0:d._y0,_y1:d._y1,text:X.join("<br>"),name:E||te("name")?T.name:void 0,color:S("hoverlabel.bgcolor")||k.color,borderColor:S("hoverlabel.bordercolor"),fontFamily:S("hoverlabel.font.family"),fontSize:S("hoverlabel.font.size"),fontColor:S("hoverlabel.font.color"),nameLength:S("hoverlabel.namelength"),textAlign:S("hoverlabel.align"),hovertemplate:E,hovertemplateLabels:W,eventData:_};o&&(U.x0=H-d.rInscribed*d.rpx1,U.x1=H+d.rInscribed*d.rpx1,U.idealAlign=d.pxmid[0]<0?"left":"right"),x&&(U.x=H,U.idealAlign=H<0?"left":"right");var Q=[];v.loneHover(U,{container:w._hoverlayer.node(),outerContainer:w._paper.node(),gd:i,inOut_bbox:Q}),_[0].bbox=Q[0],g._hasHoverLabel=!0}if(x){var j=u.select("path.surface");c.styleOne(j,d,T,{hovered:!0})}g._hasHoverEvent=!0,i.emit("plotly_hover",{points:_||[r(d,T,c.eventDataKeys)],event:p.event})}}),u.on("mouseout",function(d){var w=i._fullLayout,_=i._fullData[g.index],T=p.select(this).datum();if(g._hasHoverEvent&&(d.originalEvent=p.event,i.emit("plotly_unhover",{points:[r(T,_,c.eventDataKeys)],event:p.event}),g._hasHoverEvent=!1),g._hasHoverLabel&&(v.loneUnhover(w._hoverlayer.node()),g._hasHoverLabel=!1),x){var k=u.select("path.surface");c.styleOne(k,T,_,{hovered:!1})}}),u.on("click",function(d){var w=i._fullLayout,_=i._fullData[g.index],T=o&&(t.isHierarchyRoot(d)||t.isLeaf(d)),k=t.getPtId(d),L=t.isEntry(d)?t.findEntryWithChild(h,k):t.findEntryWithLevel(h,k),M=t.getPtId(L),O={points:[r(d,_,c.eventDataKeys)],event:p.event};T||(O.nextLevel=M);var P=n.triggerHandler(i,"plotly_"+g.type+"click",O);if(!1!==P&&w.hovermode&&(i._hoverdata=[r(d,_,c.eventDataKeys)],v.click(i,p.event)),!T&&!1!==P&&!i._dragging&&!i._transitioning){m.call("_storeDirectGUIEdit",_,w._tracePreGUI[_.uid],{level:_.level});var S={data:[{level:M}],traces:[g.index]},E={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};v.loneUnhover(w._hoverlayer.node()),m.call("animate",i,S,E)}})}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":904,"./helpers":1050,"@plotly/d3":58}],1050:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/color"),b=y("../../lib/setcursor"),v=y("../pie/helpers");function e(n){return n.data.data.pid}ee.findEntryWithLevel=function(n,t){var a;return t&&n.eachAfter(function(r){if(ee.getPtId(r)===t)return a=r.copy()}),a||n},ee.findEntryWithChild=function(n,t){var a;return n.eachAfter(function(r){for(var u=r.children||[],s=0;s<u.length;s++)if(ee.getPtId(u[s])===t)return a=r.copy()}),a||n},ee.isEntry=function(n){return!n.parent},ee.isLeaf=function(n){return!n.children},ee.getPtId=function(n){return n.data.data.id},ee.getPtLabel=function(n){return n.data.data.label},ee.getValue=function(n){return n.value},ee.isHierarchyRoot=function(n){return""===e(n)},ee.setSliceCursor=function(n,t,a){var r=a.isTransitioning;if(!r){var u=n.datum();r=a.hideOnRoot&&ee.isHierarchyRoot(u)||a.hideOnLeaves&&ee.isLeaf(u)}b(n,r?null:"pointer")},ee.getInsideTextFontKey=function(n,t,a,r,u){var i=a.data.data.i;return p.castOption(t,i,((u||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+n)||p.castOption(t,i,"textfont."+n)||r.size},ee.getOutsideTextFontKey=function(n,t,a,r){var u=a.data.data.i;return p.castOption(t,u,"outsidetextfont."+n)||p.castOption(t,u,"textfont."+n)||r.size},ee.isOutsideText=function(n,t){return!n._hasColorscale&&ee.isHierarchyRoot(t)},ee.determineTextFont=function(n,t,a,r){return ee.isOutsideText(n,t)?{color:ee.getOutsideTextFontKey("color",u=n,s=t,i=a),family:ee.getOutsideTextFontKey("family",u,s,i),size:ee.getOutsideTextFontKey("size",u,s,i)}:function(u,s,i,l){var f=s.data.data,g=f.i,h=p.castOption(u,g,((l||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!h&&u._input.textfont&&(h=p.castOption(u._input,g,"textfont.color")),{color:h||m.contrast(f.color),family:ee.getInsideTextFontKey("family",u,s,i,l),size:ee.getInsideTextFontKey("size",u,s,i,l)}}(n,t,a,r);var u,s,i},ee.hasTransition=function(n){return!!(n&&n.duration>0)},ee.getMaxDepth=function(n){return n.maxdepth>=0?n.maxdepth:1/0},ee.isHeader=function(n,t){return!(ee.isLeaf(n)||n.depth===t._maxDepth-1)},ee.getParent=function(n,t){return ee.findEntryWithLevel(n,e(t))},ee.listPath=function(n,t){var a=n.parent;if(!a)return[];var r=t?[a.data[t]]:[a];return ee.listPath(a,t).concat(r)},ee.getPath=function(n){return ee.listPath(n,"label").join("/")+"/"},ee.formatValue=v.formatPieValue,ee.formatPercent=function(n,t){var a=p.formatPercent(n,0);return"0%"===a&&(a=v.formatPiePercent(n,t)),a}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":904}],1051:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"sunburst",basePlotModule:y("./base_plot"),categories:[],animatable:!0,attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot").plot,style:y("./style").style,colorbar:y("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":943,"./attributes":1044,"./base_plot":1045,"./calc":1046,"./defaults":1048,"./layout_attributes":1052,"./layout_defaults":1053,"./plot":1054,"./style":1055}],1052:[function(y,$,ee){"use strict";$.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1053:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./layout_attributes");$.exports=function(b,v){function e(n,t){return p.coerce(b,v,m,n,t)}e("sunburstcolorway",v.colorway),e("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1052}],1054:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("d3-hierarchy"),b=y("d3-interpolate").interpolate,v=y("../../components/drawing"),e=y("../../lib"),n=y("../../lib/svg_text_utils"),t=y("../bar/uniform_text"),a=t.recordMinTextSize,r=t.clearMinTextSize,u=y("../pie/plot"),s=y("../pie/helpers").getRotationAngle,i=u.computeTransform,l=u.transformInsideText,c=y("./style").styleOne,f=y("../bar/style").resizeText,g=y("./fx"),h=y("./constants"),o=y("./helpers");function x(w,_,T,k){var L=w._fullLayout,M=!L.uniformtext.mode&&o.hasTransition(k),O=p.select(T).selectAll("g.slice"),P=_[0],S=P.trace,R=o.findEntryWithLevel(P.hierarchy,S.level),B=o.getMaxDepth(S),H=L._size,V=S.domain,W=H.h*(V.y[1]-V.y[0]),G=.5*Math.min(H.w*(V.x[1]-V.x[0]),W),X=P.cx=H.l+H.w*(V.x[1]+V.x[0])/2,te=P.cy=H.t+H.h*(1-V.y[0])-W/2;if(!R)return O.remove();var D=null,N={};M&&O.each(function(Se){N[o.getPtId(Se)]={rpx0:Se.rpx0,rpx1:Se.rpx1,x0:Se.x0,x1:Se.x1,transform:Se.transform},!D&&o.isEntry(Se)&&(D=Se)});var Se,U=(Se=R,m.partition().size([2*Math.PI,Se.height+1])(Se)).descendants(),Q=R.height+1,j=0,J=B;P.hasMultipleRoots&&o.isHierarchyRoot(R)&&(U=U.slice(1),Q-=1,j=1,J+=1),U=U.filter(function(Se){return Se.y1<=J});var K=s(S.rotation);K&&U.forEach(function(Se){Se.x0+=K,Se.x1+=K});var re=Math.min(Q,B),ne=function(Se){return(Se-j)/re*G},se=function(Se,fe){return[Se*Math.cos(fe),-Se*Math.sin(fe)]},oe=function(Se){return e.pathAnnulus(Se.rpx0,Se.rpx1,Se.x0,Se.x1,X,te)},pe=function(Se){return X+d(Se)[0]*(Se.transform.rCenter||0)+(Se.transform.x||0)},ce=function(Se){return te+d(Se)[1]*(Se.transform.rCenter||0)+(Se.transform.y||0)};(O=O.data(U,o.getPtId)).enter().append("g").classed("slice",!0),M?O.exit().transition().each(function(){var Se=p.select(this);Se.select("path.surface").transition().attrTween("d",function(fe){var me=function(Te){var _e,Me=o.getPtId(Te),Ie=N[Me],ze=N[o.getPtId(R)];if(ze){var Ve=(Te.x1>ze.x1?2*Math.PI:0)+K;_e=Te.rpx1<ze.rpx1?{x0:Te.x0,x1:Te.x1,rpx0:0,rpx1:0}:{x0:Ve,x1:Ve,rpx0:Te.rpx0,rpx1:Te.rpx1}}else{var Je,De=o.getPtId(Te.parent);O.each(function(st){if(o.getPtId(st)===De)return Je=st});var Be,Ze=Je.children;Ze.forEach(function(st,vt){if(o.getPtId(st)===Me)return Be=vt});var Ye=Ze.length,tt=b(Je.x0,Je.x1);_e={rpx0:G,rpx1:G,x0:tt(Be/Ye),x1:tt((Be+1)/Ye)}}return b(Ie,_e)}(fe);return function(Te){return oe(me(Te))}}),Se.select("g.slicetext").attr("opacity",0)}).remove():O.exit().remove(),O.order();var ge=null;if(M&&D){var xe=o.getPtId(D);O.each(function(Se){null===ge&&o.getPtId(Se)===xe&&(ge=Se.x1)})}var we=O;function be(Se){var fe=Se.parent,me=N[o.getPtId(fe)],Te={};if(me){var _e=fe.children,Me=_e.indexOf(Se),Ie=_e.length,ze=b(me.x0,me.x1);Te.x0=ze(Me/Ie),Te.x1=ze(Me/Ie)}else Te.x0=Te.x1=0;return Te}M&&(we=we.transition().each("end",function(){var Se=p.select(this);o.setSliceCursor(Se,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),we.each(function(Se){var Ve,fe=p.select(this),me=e.ensureSingle(fe,"path","surface",function(Ve){Ve.style("pointer-events","all")});Se.rpx0=ne(Se.y0),Se.rpx1=ne(Se.y1),Se.xmid=(Se.x0+Se.x1)/2,Se.pxmid=se(Se.rpx1,Se.xmid),Se.midangle=-(Se.xmid-Math.PI/2),Se.startangle=-(Se.x0-Math.PI/2),Se.stopangle=-(Se.x1-Math.PI/2),Se.halfangle=.5*Math.min(e.angleDelta(Se.x0,Se.x1)||Math.PI,Math.PI),Se.ring=1-Se.rpx0/Se.rpx1,Se.rInscribed=0===(Ve=Se).rpx0&&e.isFullCircle([Ve.x0,Ve.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Ve.halfangle)),Ve.ring/2)),M?me.transition().attrTween("d",function(Ve){var Je=function(De){var Be,Ze=N[o.getPtId(De)],Ye={x0:De.x0,x1:De.x1,rpx0:De.rpx0,rpx1:De.rpx1};if(Ze)Be=Ze;else if(D)if(De.parent)if(ge){var tt=(De.x1>ge?2*Math.PI:0)+K;Be={x0:tt,x1:tt}}else e.extendFlat(Be={rpx0:G,rpx1:G},be(De));else Be={rpx0:0,rpx1:0};else Be={x0:K,x1:K};return b(Be,Ye)}(Ve);return function(De){return oe(Je(De))}}):me.attr("d",oe),fe.call(g,R,w,_,{eventDataKeys:h.eventDataKeys,transitionTime:h.CLICK_TRANSITION_TIME,transitionEasing:h.CLICK_TRANSITION_EASING}).call(o.setSliceCursor,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:w._transitioning}),me.call(c,Se,S);var Te=e.ensureSingle(fe,"g","slicetext"),_e=e.ensureSingle(Te,"text","",function(Ve){Ve.attr("data-notex",1)}),Me=e.ensureUniformFontSize(w,o.determineTextFont(S,Se,L.font));_e.text(ee.formatSliceLabel(Se,R,S,_,L)).classed("slicetext",!0).attr("text-anchor","middle").call(v.font,Me).call(n.convertToTspans,w);var Ie=v.bBox(_e.node());Se.transform=l(Ie,Se,P),Se.transform.targetX=pe(Se),Se.transform.targetY=ce(Se);var ze=function(Ve,Je){var De=Ve.transform;return i(De,Je),De.fontSize=Me.size,a(S.type,De,L),e.getTextTransform(De)};M?_e.transition().attrTween("transform",function(Ve){var Je=function(De){var Be,Ze=N[o.getPtId(De)],Ye=De.transform;if(Ze)Be=Ze;else if(Be={rpx1:De.rpx1,transform:{textPosAngle:Ye.textPosAngle,scale:0,rotate:Ye.rotate,rCenter:Ye.rCenter,x:Ye.x,y:Ye.y}},D)if(De.parent)if(ge){var tt=De.x1>ge?2*Math.PI:0;Be.x0=Be.x1=tt}else e.extendFlat(Be,be(De));else Be.x0=Be.x1=K;else Be.x0=Be.x1=K;var st=b(Be.transform.textPosAngle,De.transform.textPosAngle),vt=b(Be.rpx1,De.rpx1),Pt=b(Be.x0,De.x0),Mt=b(Be.x1,De.x1),rt=b(Be.transform.scale,Ye.scale),et=b(Be.transform.rotate,Ye.rotate),bt=0===Ye.rCenter?3:0===Be.transform.rCenter?1/3:1,Rt=b(Be.transform.rCenter,Ye.rCenter);return function(Yt){var Fe=vt(Yt),He=Pt(Yt),Oe=Mt(Yt),$e=Rt(Math.pow(Yt,bt)),ke={pxmid:se(Fe,(He+Oe)/2),rpx1:Fe,transform:{textPosAngle:st(Yt),rCenter:$e,x:Ye.x,y:Ye.y}};return a(S.type,Ye,L),{transform:{targetX:pe(ke),targetY:ce(ke),scale:rt(Yt),rotate:et(Yt),rCenter:$e}}}}(Ve);return function(De){return ze(Je(De),Ie)}}):_e.attr("transform",ze(Se,Ie))})}function d(w){return T=w.transform.textPosAngle,[(_=w.rpx1)*Math.sin(T),-_*Math.cos(T)];var _,T}ee.plot=function(w,_,T,k){var L,M,O=w._fullLayout,P=O._sunburstlayer,S=!T,E=!O.uniformtext.mode&&o.hasTransition(T);r("sunburst",O),(L=P.selectAll("g.trace.sunburst").data(_,function(R){return R[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),L.order(),E?(k&&(M=k()),p.transition().duration(T.duration).ease(T.easing).each("end",function(){M&&M()}).each("interrupt",function(){M&&M()}).each(function(){P.selectAll("g.trace").each(function(R){x(w,R,this,T)})})):(L.each(function(R){x(w,R,this,T)}),O.uniformtext.mode&&f(w,O._sunburstlayer.selectAll(".trace"),"sunburst")),S&&L.exit().remove()},ee.formatSliceLabel=function(w,_,T,k,L){var M=T.texttemplate,O=T.textinfo;if(!(M||O&&"none"!==O))return"";var P=L.separators,E=w.data.data,R=k[0].hierarchy,B=o.isHierarchyRoot(w),H=o.getParent(R,w),V=o.getValue(w);if(!M){var Z,W=O.split("+"),G=function(K){return-1!==W.indexOf(K)},X=[];if(G("label")&&E.label&&X.push(E.label),E.hasOwnProperty("v")&&G("value")&&X.push(o.formatValue(E.v,P)),!B){G("current path")&&X.push(o.getPath(w.data));var te=0;G("percent parent")&&te++,G("percent entry")&&te++,G("percent root")&&te++;var D=te>1;if(te){var N,U=function(K){Z=o.formatPercent(N,P),D&&(Z+=" of "+K),X.push(Z)};G("percent parent")&&!B&&(N=V/o.getValue(H),U("parent")),G("percent entry")&&(N=V/o.getValue(_),U("entry")),G("percent root")&&(N=V/o.getValue(R),U("root"))}}return G("text")&&(Z=e.castOption(T,E.i,"text"),e.isValidTextValue(Z)&&X.push(Z)),X.join("<br>")}var Q=e.castOption(T,E.i,"texttemplate");if(!Q)return"";var j={};E.label&&(j.label=E.label),E.hasOwnProperty("v")&&(j.value=E.v,j.valueLabel=o.formatValue(E.v,P)),j.currentPath=o.getPath(w.data),B||(j.percentParent=V/o.getValue(H),j.percentParentLabel=o.formatPercent(j.percentParent,P),j.parent=o.getPtLabel(H)),j.percentEntry=V/o.getValue(_),j.percentEntryLabel=o.formatPercent(j.percentEntry,P),j.entry=o.getPtLabel(_),j.percentRoot=V/o.getValue(R),j.percentRootLabel=o.formatPercent(j.percentRoot,P),j.root=o.getPtLabel(R),E.hasOwnProperty("color")&&(j.color=E.color);var J=e.castOption(T,E.i,"text");return(e.isValidTextValue(J)||""===J)&&(j.text=J),j.customdata=e.castOption(T,E.i,"customdata"),e.texttemplateString(Q,j,L._d3locale,j,T._meta||{})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":904,"../pie/plot":908,"./constants":1047,"./fx":1049,"./helpers":1050,"./style":1055,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1055:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/color"),b=y("../../lib"),v=y("../bar/uniform_text").resizeText;function e(n,t,a){var r=t.data.data,u=!t.children,s=r.i,i=b.castOption(a,s,"marker.line.color")||m.defaultLine,l=b.castOption(a,s,"marker.line.width")||0;n.style("stroke-width",l).call(m.fill,r.color).call(m.stroke,i).style("opacity",u?a.leaf.opacity:null)}$.exports={style:function(n){var t=n._fullLayout._sunburstlayer.selectAll(".trace");v(n,t,"sunburst"),t.each(function(a){var r=p.select(this),u=a[0].trace;r.style("opacity",u.opacity),r.selectAll("path.surface").each(function(s){p.select(this).call(e,s,u)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1056:[function(y,$,ee){"use strict";var p=y("../../components/color"),m=y("../../components/colorscale/attributes"),b=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,v=y("../../plots/template_attributes").hovertemplateAttrs,e=y("../../plots/attributes"),n=y("../../lib/extend").extendFlat,t=y("../../plot_api/edit_types").overrideAll;function a(u){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:p.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:p.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var r=$.exports=t(n({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:v(),xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},m("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:a(),y:a(),z:a()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:n({},m.zauto,{}),zmin:n({},m.zmin,{}),zmax:n({},m.zmax,{})},hoverinfo:n({},e.hoverinfo),showlegend:n({},e.showlegend,{dflt:!1})}),"calc","nested");r.x.editType=r.y.editType=r.z.editType="calc+clearAxisTypes",r.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1057:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/calc");$.exports=function(m,b){p(m,b,b.surfacecolor?{vals:b.surfacecolor,containerStr:"",cLetter:"c"}:{vals:b.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1058:[function(y,$,ee){"use strict";var p=y("../../../stackgl_modules").gl_surface3d,m=y("../../../stackgl_modules").ndarray,b=y("../../../stackgl_modules").ndarray_linear_interpolate.d2,v=y("../heatmap/interp2d"),e=y("../heatmap/find_empties"),n=y("../../lib").isArrayOrTypedArray,t=y("../../lib/gl_format_color").parseColorScale,a=y("../../lib/str2rgbarray"),r=y("../../components/colorscale").extractOpts;function u(T,k,L){this.scene=T,this.uid=L,this.surface=k,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=u.prototype;s.getXat=function(T,k,L,M){var O=n(this.data.x)?n(this.data.x[0])?this.data.x[k][T]:this.data.x[T]:T;return void 0===L?O:M.d2l(O,0,L)},s.getYat=function(T,k,L,M){var O=n(this.data.y)?n(this.data.y[0])?this.data.y[k][T]:this.data.y[k]:k;return void 0===L?O:M.d2l(O,0,L)},s.getZat=function(T,k,L,M){var O=this.data.z[k][T];return null===O&&this.data.connectgaps&&this.data._interpolatedZ&&(O=this.data._interpolatedZ[k][T]),void 0===L?O:M.d2l(O,0,L)},s.handlePick=function(T){if(T.object===this.surface){var L=(T.data.index[1]-1)/this.dataScaleY-1,M=Math.max(Math.min(Math.round((T.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),O=Math.max(Math.min(Math.round(L),this.data._ylength-1),0);T.index=[M,O],T.traceCoordinate=[this.getXat(M,O),this.getYat(M,O),this.getZat(M,O)],T.dataCoordinate=[this.getXat(M,O,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(M,O,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(M,O,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var P=0;P<3;P++)null!=T.dataCoordinate[P]&&(T.dataCoordinate[P]*=this.scene.dataScale[P]);var E=this.data.hovertext||this.data.text;return T.textLabel=Array.isArray(E)&&E[O]&&void 0!==E[O][M]?E[O][M]:E||"",T.data.dataCoordinate=T.dataCoordinate.slice(),this.surface.highlight(T.data),this.scene.glplot.spikes.position=T.dataCoordinate,!0}};var i=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function l(T,k){if(T<k)return 0;for(var L=0;0===Math.floor(T%k);)T/=k,L++;return L}function c(T){for(var k=[],L=0;L<i.length;L++)k.push(l(T,i[L]));return k}function f(T){for(var k=c(T),L=T,M=0;M<i.length;M++)if(k[M]>0){L=i[M];break}return L}function g(T,k){if(!(T<1||k<1)){for(var L=c(T),M=c(k),O=1,P=0;P<i.length;P++)O*=Math.pow(i[P],Math.max(L[P],M[P]));return O}}s.calcXnums=function(T){var k,L=[];for(k=1;k<T;k++){var M=this.getXat(k-1,0),O=this.getXat(k,0);L[k-1]=O!==M&&null!=M&&null!=O?Math.abs(O-M):0}var P=0;for(k=1;k<T;k++)P+=L[k-1];for(k=1;k<T;k++)L[k-1]=0===L[k-1]?1:Math.round(P/L[k-1]);return L},s.calcYnums=function(T){var k,L=[];for(k=1;k<T;k++){var M=this.getYat(0,k-1),O=this.getYat(0,k);L[k-1]=O!==M&&null!=M&&null!=O?Math.abs(O-M):0}var P=0;for(k=1;k<T;k++)P+=L[k-1];for(k=1;k<T;k++)L[k-1]=0===L[k-1]?1:Math.round(P/L[k-1]);return L};var h=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],o=h[9],x=h[13];function d(T,k,L){var M=L[8]+L[2]*k[0]+L[5]*k[1];return T[0]=(L[6]+L[0]*k[0]+L[3]*k[1])/M,T[1]=(L[7]+L[1]*k[0]+L[4]*k[1])/M,T}function w(T,k,L){return function(M,O,P,S){for(var E=[0,0],R=M.shape[0],B=M.shape[1],H=0;H<R;H++)for(var V=0;V<B;V++)P(E,[H,V],S),M.set(H,V,b(O,E[0],E[1]))}(T,k,d,L),T}function _(T,k){for(var L=!1,M=0;M<T.length;M++)if(k===T[M]){L=!0;break}!1===L&&T.push(k)}s.estimateScale=function(T,k){for(var L=1+function(O){if(0!==O.length){for(var P=1,S=0;S<O.length;S++)P=g(P,O[S]);return P}}(0===k?this.calcXnums(T):this.calcYnums(T));L<o;)L*=2;for(;L>x;)L--,L/=f(L),++L<o&&(L=x);var M=Math.round(L/T);return M>1?M:1},s.refineCoords=function(T){for(var k=this.dataScaleX,L=this.dataScaleY,M=T[0].shape[0],O=T[0].shape[1],P=0|Math.floor(T[0].shape[0]*k+1),S=0|Math.floor(T[0].shape[1]*L+1),E=1+M+1,R=1+O+1,B=m(new Float32Array(E*R),[E,R]),H=[1/k,0,0,0,1/L,0,0,0,1],V=0;V<T.length;++V){this.surface.padField(B,T[V]);var Z=m(new Float32Array(P*S),[P,S]);w(Z,B,H),T[V]=Z}},s.setContourLevels=function(){var T,k,M=[[],[],[]],O=[!1,!1,!1],P=!1;for(T=0;T<3;++T)if(this.showContour[T]&&(P=!0,this.contourSize[T]>0&&null!==this.contourStart[T]&&null!==this.contourEnd[T]&&this.contourEnd[T]>this.contourStart[T]))for(O[T]=!0,k=this.contourStart[T];k<this.contourEnd[T];k+=this.contourSize[T])_(M[T],k*this.scene.dataScale[T]);if(P){var S=[[],[],[]];for(T=0;T<3;++T)this.showContour[T]&&(S[T]=O[T]?M[T]:this.scene.contourLevels[T]);this.surface.update({levels:S})}},s.update=function(T){var k,L,M,O,P=this.scene,S=P.fullSceneLayout,E=this.surface,R=t(T),B=P.dataScale,H=T.z[0].length,V=T._ylength,Z=P.contourLevels;this.data=T;var W=[];for(k=0;k<3;k++)for(W[k]=[],L=0;L<H;L++)W[k][L]=[];for(L=0;L<H;L++)for(M=0;M<V;M++)W[0][L][M]=this.getXat(L,M,T.xcalendar,S.xaxis),W[1][L][M]=this.getYat(L,M,T.ycalendar,S.yaxis),W[2][L][M]=this.getZat(L,M,T.zcalendar,S.zaxis);if(T.connectgaps)for(T._emptypoints=e(W[2]),v(W[2],T._emptypoints),T._interpolatedZ=[],L=0;L<H;L++)for(T._interpolatedZ[L]=[],M=0;M<V;M++)T._interpolatedZ[L][M]=W[2][L][M];for(k=0;k<3;k++)for(L=0;L<H;L++)for(M=0;M<V;M++)null==(O=W[k][L][M])?W[k][L][M]=NaN:O=W[k][L][M]*=B[k];for(k=0;k<3;k++)for(L=0;L<H;L++)for(M=0;M<V;M++)null!=(O=W[k][L][M])&&(this.minValues[k]>O&&(this.minValues[k]=O),this.maxValues[k]<O&&(this.maxValues[k]=O));for(k=0;k<3;k++)this.objectOffset[k]=.5*(this.minValues[k]+this.maxValues[k]);for(k=0;k<3;k++)for(L=0;L<H;L++)for(M=0;M<V;M++)null!=(O=W[k][L][M])&&(W[k][L][M]-=this.objectOffset[k]);var G=[m(new Float32Array(H*V),[H,V]),m(new Float32Array(H*V),[H,V]),m(new Float32Array(H*V),[H,V])];for(k=0;k<3;k++)for(L=0;L<H;L++)for(M=0;M<V;M++)G[k].set(L,M,W[k][L][M]);W=[];var X={colormap:R,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!T.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:T.opacityscale,opacity:T.opacity},te=r(T);if(X.intensityBounds=[te.min,te.max],T.surfacecolor){var D=m(new Float32Array(H*V),[H,V]);for(L=0;L<H;L++)for(M=0;M<V;M++)D.set(L,M,T.surfacecolor[M][L]);G.push(D)}else X.intensityBounds[0]*=B[2],X.intensityBounds[1]*=B[2];(x<G[0].shape[0]||x<G[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(G[0].shape[0],0),this.dataScaleY=this.estimateScale(G[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(G)),T.surfacecolor&&(X.intensity=G.pop());var j,J,K,N=[!0,!0,!0],U=["x","y","z"];for(k=0;k<3;++k){var Q=T.contours[U[k]];N[k]=Q.highlight,X.showContour[k]=Q.show||Q.highlight,X.showContour[k]&&(X.contourProject[k]=[Q.project.x,Q.project.y,Q.project.z],Q.show?(this.showContour[k]=!0,X.levels[k]=Z[k],E.highlightColor[k]=X.contourColor[k]=a(Q.color),E.highlightTint[k]=X.contourTint[k]=Q.usecolormap?0:1,X.contourWidth[k]=Q.width,this.contourStart[k]=Q.start,this.contourEnd[k]=Q.end,this.contourSize[k]=Q.size):(this.showContour[k]=!1,this.contourStart[k]=null,this.contourEnd[k]=null,this.contourSize[k]=0),Q.highlight&&(X.dynamicColor[k]=a(Q.highlightcolor),X.dynamicWidth[k]=Q.highlightwidth))}(J=(j=R)[0].rgb)[0]===(K=j[j.length-1].rgb)[0]&&J[1]===K[1]&&J[2]===K[2]&&J[3]===K[3]&&(X.vertexColor=!0),X.objectOffset=this.objectOffset,X.coords=G,E.update(X),E.visible=T.visible,E.enableDynamic=N,E.enableHighlight=N,E.snapToData=!0,"lighting"in T&&(E.ambientLight=T.lighting.ambient,E.diffuseLight=T.lighting.diffuse,E.specularLight=T.lighting.specular,E.roughness=T.lighting.roughness,E.fresnel=T.lighting.fresnel),"lightposition"in T&&(E.lightPosition=[T.lightposition.x,T.lightposition.y,T.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},$.exports=function(T,k){var M=p({gl:T.glplot.gl}),O=new u(T,M,k.uid);return M._trace=O,O.update(k),T.glplot.add(M),O}},{"../../../stackgl_modules":1119,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1059:[function(y,$,ee){"use strict";var p=y("../../registry"),m=y("../../lib"),b=y("../../components/colorscale/defaults"),v=y("./attributes");function e(t,a,r,u){var s=u("opacityscale");"max"===s?a.opacityscale=[[0,.1],[1,1]]:"min"===s?a.opacityscale=[[0,1],[1,.1]]:"extremes"===s?a.opacityscale=function(i,l){for(var c=[],f=0;f<32;f++){var g=f/31,h=.1+.9*(1-Math.pow(Math.sin(1*g*Math.PI),2));c.push([g,Math.max(0,Math.min(1,h))])}return c}():function(i){var l=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||0!=+i[0][0]||1!=+i[i.length-1][0])return!1;for(var c=0;c<i.length;c++){var f=i[c];if(2!==f.length||+f[0]<l)return!1;l=+f[0]}return!0}(s)||(a.opacityscale=void 0)}function n(t,a,r){a in t&&!(r in t)&&(t[r]=t[a])}$.exports={supplyDefaults:function(t,a,r,u){var s,i;function l(_,T){return m.coerce(t,a,v,_,T)}var c=l("x"),f=l("y"),g=l("z");if(!g||!g.length||c&&c.length<1||f&&f.length<1)a.visible=!1;else{a._xlength=Array.isArray(c)&&m.isArrayOrTypedArray(c[0])?g.length:g[0].length,a._ylength=g.length,p.getComponentMethod("calendars","handleTraceDefaults")(t,a,["x","y","z"],u),l("text"),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(_){l(_)});var h=l("surfacecolor"),o=["x","y","z"];for(s=0;s<3;++s){var x="contours."+o[s],d=l(x+".show"),w=l(x+".highlight");if(d||w)for(i=0;i<3;++i)l(x+".project."+o[i]);d&&(l(x+".color"),l(x+".width"),l(x+".usecolormap")),w&&(l(x+".highlightcolor"),l(x+".highlightwidth")),l(x+".start"),l(x+".end"),l(x+".size")}h||(n(t,"zmin","cmin"),n(t,"zmax","cmax"),n(t,"zauto","cauto")),b(t,a,u,l,{prefix:"",cLetter:"c"}),e(0,a,0,l),a._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1056}],1060:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:y("./calc"),plot:y("./convert"),moduleType:"trace",name:"surface",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1056,"./calc":1057,"./convert":1058,"./defaults":1059}],1061:[function(y,$,ee){"use strict";var p=y("../../components/annotations/attributes"),m=y("../../lib/extend").extendFlat,b=y("../../plot_api/edit_types").overrideAll,v=y("../../plots/font_attributes"),e=y("../../plots/domain").attributes,n=y("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;($.exports=b({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:n("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:m({},p.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:m({},v({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:n("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:m({},p.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:m({},v({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1062:[function(y,$,ee){"use strict";var p=y("../../plots/get_data").getModuleCalcData,m=y("./plot");ee.name="table",ee.plot=function(b){var v=p(b.calcdata,"table")[0];v.length&&m(b,v)},ee.clean=function(b,v,e,n){var t=n._has&&n._has("table"),a=v._has&&v._has("table");t&&!a&&n._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1069}],1063:[function(y,$,ee){"use strict";var p=y("../../lib/gup").wrap;$.exports=function(){return p({})}},{"../../lib/gup":500}],1064:[function(y,$,ee){"use strict";$.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1065:[function(y,$,ee){"use strict";var p=y("./constants"),m=y("../../lib/extend").extendFlat,b=y("fast-isnumeric");function v(s){if(Array.isArray(s)){for(var i=0,l=0;l<s.length;l++)i=Math.max(i,v(s[l]));return i}return s}function e(s,i){return s+i}function n(s){var i,l=s.slice(),c=1/0,f=0;for(i=0;i<l.length;i++)Array.isArray(l[i])||(l[i]=[l[i]]),c=Math.min(c,l[i].length),f=Math.max(f,l[i].length);if(c!==f)for(i=0;i<l.length;i++){var g=f-l[i].length;g&&(l[i]=l[i].concat(t(g)))}return l}function t(s){for(var i=new Array(s),l=0;l<s;l++)i[l]="";return i}function a(s){return s.calcdata.columns.reduce(function(i,l){return l.xIndex<s.xIndex?i+l.columnWidth:i},0)}function r(s,i){return Object.keys(s).map(function(l){return m({},s[l],{auxiliaryBlocks:i})})}function u(s,i){for(var l,c={},f=0,g=0,h={firstRowIndex:null,lastRowIndex:null,rows:[]},o=0,x=0,d=0;d<s.length;d++)h.rows.push({rowIndex:d,rowHeight:l=s[d]}),((g+=l)>=i||d===s.length-1)&&(c[f]=h,h.key=x++,h.firstRowIndex=o,h.lastRowIndex=d,h={firstRowIndex:null,lastRowIndex:null,rows:[]},f+=g,o=d+1,g=0);return c}$.exports=function(s,i){var l=n(i.cells.values),c=function(B){return B.slice(i.header.values.length,B.length)},f=n(i.header.values);f.length&&!f[0].length&&(f[0]=[""],f=n(f));var g=f.concat(c(l).map(function(){return t((f[0]||[""]).length)})),h=i.domain,o=Math.floor(s._fullLayout._size.w*(h.x[1]-h.x[0])),x=Math.floor(s._fullLayout._size.h*(h.y[1]-h.y[0])),d=i.header.values.length?g[0].map(function(){return i.header.height}):[p.emptyHeaderHeight],w=l.length?l[0].map(function(){return i.cells.height}):[],_=d.reduce(e,0),T=u(w,x-_+p.uplift),k=r(u(d,_),[]),L=r(T,k),M={},O=i._fullInput.columnorder.concat(c(l.map(function(B,H){return H}))),P=g.map(function(B,H){var V=Array.isArray(i.columnwidth)?i.columnwidth[Math.min(H,i.columnwidth.length-1)]:i.columnwidth;return b(V)?Number(V):1}),S=P.reduce(e,0);P=P.map(function(B){return B/S*o});var E=Math.max(v(i.header.line.width),v(i.cells.line.width)),R={key:i.uid+s._context.staticPlot,translateX:h.x[0]*s._fullLayout._size.w,translateY:s._fullLayout._size.h*(1-h.y[1]),size:s._fullLayout._size,width:o,maxLineWidth:E,height:x,columnOrder:O,groupHeight:x,rowBlocks:L,headerRowBlocks:k,scrollY:0,cells:m({},i.cells,{values:l}),headerCells:m({},i.header,{values:g}),gdColumns:g.map(function(B){return B[0]}),gdColumnsOriginalOrder:g.map(function(B){return B[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:g.map(function(B,H){return M[B]=(M[B]||0)+1,{key:B+"__"+M[B],label:B,specIndex:H,xIndex:O[H],xScale:a,x:void 0,calcdata:void 0,columnWidth:P[H]}})};return R.columns.forEach(function(B){B.calcdata=R,B.x=a(B)}),R}},{"../../lib/extend":493,"./constants":1064,"fast-isnumeric":190}],1066:[function(y,$,ee){"use strict";var p=y("../../lib/extend").extendFlat;ee.splitToPanels=function(m){var b=[0,0],v=p({},m,{key:"header",type:"header",page:0,prevPages:b,currentRepaint:[null,null],dragHandle:!0,values:m.calcdata.headerCells.values[m.specIndex],rowBlocks:m.calcdata.headerRowBlocks,calcdata:p({},m.calcdata,{cells:m.calcdata.headerCells})});return[p({},m,{key:"cells1",type:"cells",page:0,prevPages:b,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks}),p({},m,{key:"cells2",type:"cells",page:1,prevPages:b,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks}),v]},ee.splitToCells=function(m){var v,e,n,b=[n=(e=(v=m).rowBlocks[v.page])?e.rows[0].rowIndex:0,e?n+e.rows.length:0];return(m.values||[]).slice(b[0],b[1]).map(function(v,e){return{keyWithinBlock:e+("string"==typeof v&&v.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:b[0]+e,column:m,calcdata:m.calcdata,page:m.page,rowBlocks:m.rowBlocks,value:v}})}},{"../../lib/extend":493}],1067:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./attributes"),b=y("../../plots/domain").defaults;$.exports=function(v,e,n,t){function a(r,u){return p.coerce(v,e,m,r,u)}b(e,t,a),a("columnwidth"),a("header.values"),a("header.format"),a("header.align"),a("header.prefix"),a("header.suffix"),a("header.height"),a("header.line.width"),a("header.line.color"),a("header.fill.color"),p.coerceFont(a,"header.font",p.extendFlat({},t.font)),function(r,u){for(var i=r.header.values.length,l=(r.columnorder||[]).slice(0,i),c=l.slice().sort(function(h,o){return h-o}),f=l.map(function(h){return c.indexOf(h)}),g=f.length;g<i;g++)f.push(g);u("columnorder",f)}(e,a),a("cells.values"),a("cells.format"),a("cells.align"),a("cells.prefix"),a("cells.suffix"),a("cells.height"),a("cells.line.width"),a("cells.line.color"),a("cells.fill.color"),p.coerceFont(a,"cells.font",p.extendFlat({},t.font)),e._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1061}],1068:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("./calc"),plot:y("./plot"),moduleType:"trace",name:"table",basePlotModule:y("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1061,"./base_plot":1062,"./calc":1063,"./defaults":1067,"./plot":1069}],1069:[function(y,$,ee){"use strict";var p=y("./constants"),m=y("@plotly/d3"),b=y("../../lib").numberFormat,v=y("../../lib/gup"),e=y("../../components/drawing"),n=y("../../lib/svg_text_utils"),t=y("../../lib").raiseToTop,a=y("../../lib").strTranslate,r=y("../../lib").cancelTransition,u=y("./data_preparation_helper"),s=y("./data_split_helpers"),i=y("../../components/color");function l(G){return Math.ceil(G.calcdata.maxLineWidth/2)}function c(G,X){return"clip"+G._fullLayout._uid+"_scrollAreaBottomClip_"+X.key}function f(G,X){return"clip"+G._fullLayout._uid+"_columnBoundaryClippath_"+X.calcdata.key+"_"+X.specIndex}function g(G){return[].concat.apply([],G.map(function(X){return X})).map(function(X){return X.__data__})}function h(G,X,te){var D=G.selectAll("."+p.cn.scrollbarKit).data(v.repeat,v.keyFun);D.enter().append("g").classed(p.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),D.each(function(J){var ne,K=J.scrollbarState;K.totalHeight=H(ne=J.rowBlocks,ne.length-1)+(ne.length?V(ne[ne.length-1],1/0):1),K.scrollableAreaHeight=J.groupHeight-L(J),K.currentlyVisibleHeight=Math.min(K.totalHeight,K.scrollableAreaHeight),K.ratio=K.currentlyVisibleHeight/K.totalHeight,K.barLength=Math.max(K.ratio*K.currentlyVisibleHeight,p.goldenRatio*p.scrollbarWidth),K.barWiggleRoom=K.currentlyVisibleHeight-K.barLength,K.wiggleRoom=Math.max(0,K.totalHeight-K.scrollableAreaHeight),K.topY=0===K.barWiggleRoom?0:J.scrollY/K.wiggleRoom*K.barWiggleRoom,K.bottomY=K.topY+K.barLength,K.dragMultiplier=K.wiggleRoom/K.barWiggleRoom}).attr("transform",function(J){return a(J.width+p.scrollbarWidth/2+p.scrollbarOffset,L(J))});var N=D.selectAll("."+p.cn.scrollbar).data(v.repeat,v.keyFun);N.enter().append("g").classed(p.cn.scrollbar,!0);var U=N.selectAll("."+p.cn.scrollbarSlider).data(v.repeat,v.keyFun);U.enter().append("g").classed(p.cn.scrollbarSlider,!0),U.attr("transform",function(J){return a(0,J.scrollbarState.topY||0)});var Q=U.selectAll("."+p.cn.scrollbarGlyph).data(v.repeat,v.keyFun);Q.enter().append("line").classed(p.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",p.scrollbarWidth).attr("stroke-linecap","round").attr("y1",p.scrollbarWidth/2),Q.attr("y2",function(J){return J.scrollbarState.barLength-p.scrollbarWidth/2}).attr("stroke-opacity",function(J){return J.columnDragInProgress||!J.scrollbarState.barWiggleRoom||te?0:.4}),Q.transition().delay(0).duration(0),Q.transition().delay(p.scrollbarHideDelay).duration(p.scrollbarHideDuration).attr("stroke-opacity",0);var j=N.selectAll("."+p.cn.scrollbarCaptureZone).data(v.repeat,v.keyFun);j.enter().append("line").classed(p.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",p.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(J){var K=m.event.y,re=this.getBoundingClientRect(),ne=J.scrollbarState,se=K-re.top,oe=m.scale.linear().domain([0,ne.scrollableAreaHeight]).range([0,ne.totalHeight]).clamp(!0);ne.topY<=se&&se<=ne.bottomY||O(X,G,null,oe(se-ne.barLength/2))(J)}).call(m.behavior.drag().origin(function(J){return m.event.stopPropagation(),J.scrollbarState.scrollbarScrollInProgress=!0,J}).on("drag",O(X,G)).on("dragend",function(){})),j.attr("y2",function(J){return J.scrollbarState.scrollableAreaHeight}),X._context.staticPlot&&(Q.remove(),j.remove())}function o(G,X,te,D){var j,N=function(Q){var j=Q.selectAll("."+p.cn.columnCell).data(s.splitToCells,function(J){return J.keyWithinBlock});return j.enter().append("g").classed(p.cn.columnCell,!0),j.exit().remove(),j}(((j=te.selectAll("."+p.cn.columnCells).data(v.repeat,v.keyFun)).enter().append("g").classed(p.cn.columnCells,!0),j.exit().remove(),j));N.each(function(j,J){var K=j.calcdata.cells.font,re=j.column.specIndex,ne={size:w(K.size,re,J),color:w(K.color,re,J),family:w(K.family,re,J)};j.rowNumber=j.key,j.align=w(j.calcdata.cells.align,re,J),j.cellBorderWidth=w(j.calcdata.cells.line.width,re,J),j.font=ne}),function(Q){Q.attr("width",function(j){return j.column.columnWidth}).attr("stroke-width",function(j){return j.cellBorderWidth}).each(function(j){var J=m.select(this);i.stroke(J,w(j.calcdata.cells.line.color,j.column.specIndex,j.rowNumber)),i.fill(J,w(j.calcdata.cells.fill.color,j.column.specIndex,j.rowNumber))})}(function(Q){var j=Q.selectAll("."+p.cn.cellRect).data(v.repeat,function(J){return J.keyWithinBlock});return j.enter().append("rect").classed(p.cn.cellRect,!0),j}(N));var U=function(Q){var j=Q.selectAll("."+p.cn.cellText).data(v.repeat,function(J){return J.keyWithinBlock});return j.enter().append("text").classed(p.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){m.event.stopPropagation()}),j}(function(Q){var j=Q.selectAll("."+p.cn.cellTextHolder).data(v.repeat,function(J){return J.keyWithinBlock});return j.enter().append("g").classed(p.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),j}(N));(function(Q){Q.each(function(j){e.font(m.select(this),j.font)})})(U),x(U,X,D,G),B(N)}function x(G,X,te,D){G.text(function(N){var U=N.column.specIndex,Q=N.rowNumber,j=N.value,J="string"==typeof j,K=J&&j.match(/<br>/i),re=!J||K;N.mayHaveMarkup=J&&j.match(/[<&>]/);var ne,se="string"==typeof(ne=j)&&ne.match(p.latexCheck);N.latex=se;var oe,pe,ce=se?"":w(N.calcdata.cells.prefix,U,Q)||"",ge=se?"":w(N.calcdata.cells.suffix,U,Q)||"",xe=se?null:w(N.calcdata.cells.format,U,Q)||null,we=ce+(xe?b(xe)(N.value):N.value)+ge;if(N.wrappingNeeded=!N.wrapped&&!re&&!se&&(oe=d(we)),N.cellHeightMayIncrease=K||se||N.mayHaveMarkup||(void 0===oe?d(we):oe),N.needsConvertToTspans=N.mayHaveMarkup||N.wrappingNeeded||N.latex,N.wrappingNeeded){var be=(" "===p.wrapSplitCharacter?we.replace(/<a href=/gi,"<a_href="):we).split(p.wrapSplitCharacter),Se=" "===p.wrapSplitCharacter?be.map(function(fe){return fe.replace(/<a_href=/gi,"<a href=")}):be;N.fragments=Se.map(function(fe){return{text:fe,width:null}}),N.fragments.push({fragment:p.wrapSpacer,width:null}),pe=Se.join(p.lineBreaker)+p.lineBreaker+p.wrapSpacer}else delete N.fragments,pe=we;return pe}).attr("dy",function(N){return N.needsConvertToTspans?0:"0.75em"}).each(function(N){var U=m.select(this);N.needsConvertToTspans?n.convertToTspans(U,D,(N.wrappingNeeded?S:E)(te,this,X,D,N)):m.select(this.parentNode).attr("transform",function(j){return a(R(j),p.cellPad)}).attr("text-anchor",function(j){return{left:"start",center:"middle",right:"end"}[j.align]})})}function d(G){return-1!==G.indexOf(p.wrapSplitCharacter)}function w(G,X,te){if(Array.isArray(G)){var D=G[Math.min(X,G.length-1)];return Array.isArray(D)?D[Math.min(te,D.length-1)]:D}return G}function _(G,X,te){G.transition().ease(p.releaseTransitionEase).duration(p.releaseTransitionDuration).attr("transform",a(X.x,te))}function T(G){return"cells"===G.type}function k(G){return"header"===G.type}function L(G){return(G.rowBlocks.length?G.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(X,te){return X+V(te,1/0)},0)}function M(G,X,te){var D=g(X)[0];if(void 0!==D){var N=D.rowBlocks,U=D.calcdata,Q=H(N,N.length),j=D.calcdata.groupHeight-L(D),J=U.scrollY=Math.max(0,Math.min(Q-j,U.scrollY)),K=function(re,ne,se){for(var oe=[],pe=0,ce=0;ce<re.length;ce++){for(var ge=re[ce],xe=ge.rows,we=0,be=0;be<xe.length;be++)we+=xe[be].rowHeight;ge.allRowsHeight=we,ne<pe+we&&ne+se>pe&&oe.push(ce),pe+=we}return oe}(N,J,j);1===K.length&&(K[0]===N.length-1?K.unshift(K[0]-1):K.push(K[0]+1)),K[0]%2&&K.reverse(),X.each(function(re,ne){re.page=K[ne],re.scrollY=J}),X.attr("transform",function(re){var ne=H(re.rowBlocks,re.page)-re.scrollY;return a(0,ne)}),G&&(P(G,te,X,K,D.prevPages,D,0),P(G,te,X,K,D.prevPages,D,1),h(te,G))}}function O(G,X,te,D){return function(N){var U=N.calcdata?N.calcdata:N,Q=X.filter(function(re){return U.key===re.key}),J=U.scrollY;U.scrollY=void 0===D?U.scrollY+(te||U.scrollbarState.dragMultiplier)*m.event.dy:D;var K=Q.selectAll("."+p.cn.yColumn).selectAll("."+p.cn.columnBlock).filter(T);return M(G,K,Q),U.scrollY===J}}function P(G,X,te,D,N,U,Q){D[Q]!==N[Q]&&(clearTimeout(U.currentRepaint[Q]),U.currentRepaint[Q]=setTimeout(function(){var j=te.filter(function(J,K){return K===Q&&D[K]!==N[K]});o(G,X,j,te),N[Q]=D[Q]}))}function S(G,X,te,D){return function(){var N=m.select(X.parentNode);N.each(function(U){var Q=U.fragments;N.selectAll("tspan.line").each(function(pe,ce){Q[ce].width=this.getComputedTextLength()});var j,J,K=Q[Q.length-1].width,re=Q.slice(0,-1),ne=[],se=0,oe=U.column.columnWidth-2*p.cellPad;for(U.value="";re.length;)se+(J=(j=re.shift()).width+K)>oe&&(U.value+=ne.join(p.wrapSpacer)+p.lineBreaker,ne=[],se=0),ne.push(j.text),se+=J;se&&(U.value+=ne.join(p.wrapSpacer)),U.wrapped=!0}),N.selectAll("tspan.line").remove(),x(N.select("."+p.cn.cellText),te,G,D),m.select(X.parentNode.parentNode).call(B)}}function E(G,X,te,D,N){return function(){if(!N.settledY){var U=m.select(X.parentNode),Q=W(N),j=N.key-Q.firstRowIndex,J=Q.rows[j].rowHeight,K=N.cellHeightMayIncrease?X.parentNode.getBoundingClientRect().height+2*p.cellPad:J,re=Math.max(K,J);re-Q.rows[j].rowHeight&&(Q.rows[j].rowHeight=re,G.selectAll("."+p.cn.columnCell).call(B),M(null,G.filter(T),0),h(te,D,!0)),U.attr("transform",function(){var ne=this.parentNode.getBoundingClientRect(),se=m.select(this.parentNode).select("."+p.cn.cellRect).node().getBoundingClientRect(),oe=this.transform.baseVal.consolidate(),pe=se.top-ne.top+(oe?oe.matrix.f:p.cellPad);return a(R(N,m.select(this.parentNode).select("."+p.cn.cellTextHolder).node().getBoundingClientRect().width),pe)}),N.settledY=!0}}}function R(G,X){switch(G.align){default:return p.cellPad;case"right":return G.column.columnWidth-(X||0)-p.cellPad;case"center":return(G.column.columnWidth-(X||0))/2}}function B(G){G.attr("transform",function(X){var te=X.rowBlocks[0].auxiliaryBlocks.reduce(function(N,U){return N+V(U,1/0)},0),D=V(W(X),X.key);return a(0,D+te)}).selectAll("."+p.cn.cellRect).attr("height",function(X){return(te=W(X),D=X.key,te.rows[D-te.firstRowIndex]).rowHeight;var te,D})}function H(G,X){for(var te=0,D=X-1;D>=0;D--)te+=Z(G[D]);return te}function V(G,X){for(var te=0,D=0;D<G.rows.length&&G.rows[D].rowIndex<X;D++)te+=G.rows[D].rowHeight;return te}function Z(G){var X=G.allRowsHeight;if(void 0!==X)return X;for(var te=0,D=0;D<G.rows.length;D++)te+=G.rows[D].rowHeight;return G.allRowsHeight=te,te}function W(G){return G.rowBlocks[G.page]}$.exports=function(G,X){var te=!G._context.staticPlot,D=G._fullLayout._paper.selectAll("."+p.cn.table).data(X.map(function(ge){var xe=v.unwrap(ge).trace;return u(G,xe)}),v.keyFun);D.exit().remove(),D.enter().append("g").classed(p.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),D.attr("width",function(ge){return ge.width+ge.size.l+ge.size.r}).attr("height",function(ge){return ge.height+ge.size.t+ge.size.b}).attr("transform",function(ge){return a(ge.translateX,ge.translateY)});var N=D.selectAll("."+p.cn.tableControlView).data(v.repeat,v.keyFun),U=N.enter().append("g").classed(p.cn.tableControlView,!0).style("box-sizing","content-box");if(te){var Q="onwheel"in document?"wheel":"mousewheel";U.on("mousemove",function(ge){N.filter(function(xe){return ge===xe}).call(h,G)}).on(Q,function(ge){ge.scrollbarState.wheeling||(ge.scrollbarState.wheeling=!0,O(G,N,null,ge.scrollY+m.event.deltaY)(ge)||(m.event.stopPropagation(),m.event.preventDefault()),ge.scrollbarState.wheeling=!1)}).call(h,G,!0)}N.attr("transform",function(ge){return a(ge.size.l,ge.size.t)});var j=N.selectAll("."+p.cn.scrollBackground).data(v.repeat,v.keyFun);j.enter().append("rect").classed(p.cn.scrollBackground,!0).attr("fill","none"),j.attr("width",function(ge){return ge.width}).attr("height",function(ge){return ge.height}),N.each(function(ge){e.setClipUrl(m.select(this),c(G,ge),G)});var J=N.selectAll("."+p.cn.yColumn).data(function(ge){return ge.columns},v.keyFun);J.enter().append("g").classed(p.cn.yColumn,!0),J.exit().remove(),J.attr("transform",function(ge){return a(ge.x,0)}),te&&J.call(m.behavior.drag().origin(function(ge){return _(m.select(this),ge,-p.uplift),t(this),ge.calcdata.columnDragInProgress=!0,h(N.filter(function(xe){return ge.calcdata.key===xe.key}),G),ge}).on("drag",function(ge){var xe=m.select(this),we=function(be){return(ge===be?m.event.x:be.x)+be.columnWidth/2};ge.x=Math.max(-p.overdrag,Math.min(ge.calcdata.width+p.overdrag-ge.columnWidth,m.event.x)),g(J).filter(function(be){return be.calcdata.key===ge.calcdata.key}).sort(function(be,Se){return we(be)-we(Se)}).forEach(function(be,Se){be.xIndex=Se,be.x=ge===be?be.x:be.xScale(be)}),J.filter(function(be){return ge!==be}).transition().ease(p.transitionEase).duration(p.transitionDuration).attr("transform",function(be){return a(be.x,0)}),xe.call(r).attr("transform",a(ge.x,-p.uplift))}).on("dragend",function(ge){var be,Se,fe,me,xe=m.select(this),we=ge.calcdata;ge.x=ge.xScale(ge),ge.calcdata.columnDragInProgress=!1,_(xe,ge,0),be=G,Se=we,fe=we.columns.map(function(be){return be.xIndex}),me=Se.gdColumnsOriginalOrder,Se.gdColumns.sort(function(Te,_e){return fe[me.indexOf(Te)]-fe[me.indexOf(_e)]}),Se.columnorder=fe,be.emit("plotly_restyle")})),J.each(function(ge){e.setClipUrl(m.select(this),f(G,ge),G)});var K=J.selectAll("."+p.cn.columnBlock).data(s.splitToPanels,v.keyFun);K.enter().append("g").classed(p.cn.columnBlock,!0).attr("id",function(ge){return ge.key}),K.style("cursor",function(ge){return ge.dragHandle?"ew-resize":ge.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var re=K.filter(k),ne=K.filter(T);te&&ne.call(m.behavior.drag().origin(function(ge){return m.event.stopPropagation(),ge}).on("drag",O(G,N,-1)).on("dragend",function(){})),o(G,N,re,K),o(G,N,ne,K);var se=N.selectAll("."+p.cn.scrollAreaClip).data(v.repeat,v.keyFun);se.enter().append("clipPath").classed(p.cn.scrollAreaClip,!0).attr("id",function(ge){return c(G,ge)});var oe=se.selectAll("."+p.cn.scrollAreaClipRect).data(v.repeat,v.keyFun);oe.enter().append("rect").classed(p.cn.scrollAreaClipRect,!0).attr("x",-p.overdrag).attr("y",-p.uplift).attr("fill","none"),oe.attr("width",function(ge){return ge.width+2*p.overdrag}).attr("height",function(ge){return ge.height+p.uplift}),J.selectAll("."+p.cn.columnBoundary).data(v.repeat,v.keyFun).enter().append("g").classed(p.cn.columnBoundary,!0);var pe=J.selectAll("."+p.cn.columnBoundaryClippath).data(v.repeat,v.keyFun);pe.enter().append("clipPath").classed(p.cn.columnBoundaryClippath,!0),pe.attr("id",function(ge){return f(G,ge)});var ce=pe.selectAll("."+p.cn.columnBoundaryRect).data(v.repeat,v.keyFun);ce.enter().append("rect").classed(p.cn.columnBoundaryRect,!0).attr("fill","none"),ce.attr("width",function(ge){return ge.columnWidth+2*l(ge)}).attr("height",function(ge){return ge.calcdata.height+2*l(ge)+p.uplift}).attr("x",function(ge){return-l(ge)}).attr("y",function(ge){return-l(ge)}),M(null,ne,N)}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1064,"./data_preparation_helper":1065,"./data_split_helpers":1066,"@plotly/d3":58}],1070:[function(y,$,ee){"use strict";var p=y("../../plots/template_attributes").hovertemplateAttrs,m=y("../../plots/template_attributes").texttemplateAttrs,b=y("../../components/colorscale/attributes"),v=y("../../plots/domain").attributes,e=y("../pie/attributes"),n=y("../sunburst/attributes"),t=y("./constants"),a=y("../../lib/extend").extendFlat;$.exports={labels:n.labels,parents:n.parents,values:n.values,branchvalues:n.branchvalues,count:n.count,level:n.level,maxdepth:n.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:a({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:n.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:n.marker.line,editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:a({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:n.textinfo,texttemplate:m({editType:"plot"},{keys:t.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:n.hoverinfo,hovertemplate:p({},{keys:t.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:a({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:n.root,domain:v({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":899,"../sunburst/attributes":1044,"./constants":1073}],1071:[function(y,$,ee){"use strict";var p=y("../../plots/plots");ee.name="treemap",ee.plot=function(m,b,v,e){p.plotBasePlot(ee.name,m,b,v,e)},ee.clean=function(m,b,v,e){p.cleanBasePlot(ee.name,m,b,v,e)}},{"../../plots/plots":619}],1072:[function(y,$,ee){"use strict";var p=y("../sunburst/calc");ee.calc=function(m,b){return p.calc(m,b)},ee.crossTraceCalc=function(m){return p._runCrossTraceCalc("treemap",m)}},{"../sunburst/calc":1046}],1073:[function(y,$,ee){"use strict";$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1074:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./attributes"),b=y("../../components/color"),v=y("../../plots/domain").defaults,e=y("../bar/defaults").handleText,n=y("../bar/constants").TEXTPAD,t=y("../../components/colorscale"),a=t.hasColorscale,r=t.handleDefaults;$.exports=function(u,s,i,l){function c(T,k){return p.coerce(u,s,m,T,k)}var f=c("labels"),g=c("parents");if(f&&f.length&&g&&g.length){var h=c("values");c(h&&h.length?"branchvalues":"count"),c("level"),c("maxdepth"),"squarify"===c("tiling.packing")&&c("tiling.squarifyratio"),c("tiling.flip"),c("tiling.pad");var o=c("text");c("texttemplate"),s.texttemplate||c("textinfo",Array.isArray(o)?"text+label":"label"),c("hovertext"),c("hovertemplate");var x=c("pathbar.visible");e(u,s,l,c,"auto",{hasPathbar:x,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("textposition");var d=-1!==s.textposition.indexOf("bottom");c("marker.line.width")&&c("marker.line.color",l.paper_bgcolor);var w=c("marker.colors");(s._hasColorscale=a(u,"marker","colors")||(u.marker||{}).coloraxis)?r(u,s,l,c,{prefix:"marker.",cLetter:"c"}):c("marker.depthfade",!(w||[]).length);var _=2*s.textfont.size;c("marker.pad.t",d?_/4:_),c("marker.pad.l",_/4),c("marker.pad.r",_/4),c("marker.pad.b",d?_:_/4),s._hovered={marker:{line:{width:2,color:b.contrast(l.paper_bgcolor)}}},x&&(c("pathbar.thickness",s.pathbar.textfont.size+2*n),c("pathbar.side"),c("pathbar.edgeshape")),c("sort"),c("root.color"),v(s,l,c),s._length=null}else s.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1070}],1075:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../sunburst/helpers"),b=y("../bar/uniform_text").clearMinTextSize,v=y("../bar/style").resizeText,e=y("./plot_one");$.exports=function(n,t,a,r,u){var s,i,l=u.type,c=u.drawDescendants,f=n._fullLayout,g=f["_"+l+"layer"],h=!a;b(l,f),(s=g.selectAll("g.trace."+l).data(t,function(o){return o[0].trace.uid})).enter().append("g").classed("trace",!0).classed(l,!0),s.order(),!f.uniformtext.mode&&m.hasTransition(a)?(r&&(i=r()),p.transition().duration(a.duration).ease(a.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()}).each(function(){g.selectAll("g.trace").each(function(o){e(n,o,this,a,c)})})):(s.each(function(o){e(n,o,this,a,c)}),f.uniformtext.mode&&v(n,g.selectAll(".trace"),l)),h&&s.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1050,"./plot_one":1084,"@plotly/d3":58}],1076:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=y("../../components/drawing"),v=y("../../lib/svg_text_utils"),e=y("./partition"),n=y("./style").styleOne,t=y("./constants"),a=y("../sunburst/helpers"),r=y("../sunburst/fx");$.exports=function(u,s,i,l,c){var f=c.barDifY,g=c.width,h=c.height,o=c.viewX,x=c.viewY,d=c.pathSlice,w=c.toMoveInsideSlice,_=c.strTransform,T=c.hasTransition,k=c.handleSlicesExit,L=c.makeUpdateSliceInterpolator,M=c.makeUpdateTextInterpolator,O={},P=u._fullLayout,S=s[0],E=S.trace,R=S.hierarchy,B=g/E._entryDepth,H=a.listPath(i.data,"id"),V=e(R.copy(),[g,h],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(V=V.filter(function(W){var G=H.indexOf(W.data.id);return-1!==G&&(W.x0=B*G,W.x1=B*(G+1),W.y0=f,W.y1=f+h,W.onPathbar=!0,!0)})).reverse(),(l=l.data(V,a.getPtId)).enter().append("g").classed("pathbar",!0),k(l,!0,O,[g,h],d),l.order();var Z=l;T&&(Z=Z.transition().each("end",function(){var W=p.select(this);a.setSliceCursor(W,u,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),Z.each(function(W){W._x0=o(W.x0),W._x1=o(W.x1),W._y0=x(W.y0),W._y1=x(W.y1),W._hoverX=o(W.x1-Math.min(g,h)/2),W._hoverY=x(W.y1-h/2);var G=p.select(this),X=m.ensureSingle(G,"path","surface",function(U){U.style("pointer-events","all")});T?X.transition().attrTween("d",function(U){var Q=L(U,!0,O,[g,h]);return function(j){return d(Q(j))}}):X.attr("d",d),G.call(r,i,u,s,{styleOne:n,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,u,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:u._transitioning}),X.call(n,W,E,{hovered:!1}),W._text=(a.getPtLabel(W)||"").split("<br>").join(" ")||"";var te=m.ensureSingle(G,"g","slicetext"),D=m.ensureSingle(te,"text","",function(U){U.attr("data-notex",1)}),N=m.ensureUniformFontSize(u,a.determineTextFont(E,W,P.font,{onPathbar:!0}));D.text(W._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(b.font,N).call(v.convertToTspans,u),W.textBB=b.bBox(D.node()),W.transform=w(W,{fontSize:N.size,onPathbar:!0}),W.transform.fontSize=N.size,T?D.transition().attrTween("transform",function(U){var Q=M(U,!0,O,[g,h]);return function(j){return _(Q(j))}}):D.attr("transform",_(W))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1049,"../sunburst/helpers":1050,"./constants":1073,"./partition":1082,"./style":1085,"@plotly/d3":58}],1077:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=y("../../components/drawing"),v=y("../../lib/svg_text_utils"),e=y("./partition"),n=y("./style").styleOne,t=y("./constants"),a=y("../sunburst/helpers"),r=y("../sunburst/fx"),u=y("../sunburst/plot").formatSliceLabel;$.exports=function(s,i,l,c,f){var g=f.width,h=f.height,o=f.viewX,x=f.viewY,d=f.pathSlice,w=f.toMoveInsideSlice,_=f.strTransform,T=f.hasTransition,k=f.handleSlicesExit,L=f.makeUpdateSliceInterpolator,M=f.makeUpdateTextInterpolator,O=f.prevEntry,P=s._fullLayout,S=i[0].trace,E=-1!==S.textposition.indexOf("left"),R=-1!==S.textposition.indexOf("right"),B=-1!==S.textposition.indexOf("bottom"),H=!B&&!S.marker.pad.t||B&&!S.marker.pad.b,V=e(l,[g,h],{packing:S.tiling.packing,squarifyratio:S.tiling.squarifyratio,flipX:S.tiling.flip.indexOf("x")>-1,flipY:S.tiling.flip.indexOf("y")>-1,pad:{inner:S.tiling.pad,top:S.marker.pad.t,left:S.marker.pad.l,right:S.marker.pad.r,bottom:S.marker.pad.b}}).descendants(),Z=1/0,W=-1/0;V.forEach(function(N){var U=N.depth;U>=S._maxDepth?(N.x0=N.x1=(N.x0+N.x1)/2,N.y0=N.y1=(N.y0+N.y1)/2):(Z=Math.min(Z,U),W=Math.max(W,U))}),c=c.data(V,a.getPtId),S._maxVisibleLayers=isFinite(W)?W-Z+1:0,c.enter().append("g").classed("slice",!0),k(c,!1,{},[g,h],d),c.order();var G=null;if(T&&O){var X=a.getPtId(O);c.each(function(N){null===G&&a.getPtId(N)===X&&(G={x0:N.x0,x1:N.x1,y0:N.y0,y1:N.y1})})}var te=function(){return G||{x0:0,x1:g,y0:0,y1:h}},D=c;return T&&(D=D.transition().each("end",function(){var N=p.select(this);a.setSliceCursor(N,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),D.each(function(N){var U=a.isHeader(N,S);N._x0=o(N.x0),N._x1=o(N.x1),N._y0=x(N.y0),N._y1=x(N.y1),N._hoverX=o(N.x1-S.marker.pad.r),N._hoverY=x(B?N.y1-S.marker.pad.b/2:N.y0+S.marker.pad.t/2);var Q=p.select(this),j=m.ensureSingle(Q,"path","surface",function(ne){ne.style("pointer-events","all")});T?j.transition().attrTween("d",function(ne){var se=L(ne,!1,te(),[g,h]);return function(oe){return d(se(oe))}}):j.attr("d",d),Q.call(r,l,s,i,{styleOne:n,eventDataKeys:t.eventDataKeys,transitionTime:t.CLICK_TRANSITION_TIME,transitionEasing:t.CLICK_TRANSITION_EASING}).call(a.setSliceCursor,s,{isTransitioning:s._transitioning}),j.call(n,N,S,{hovered:!1}),N._text=N.x0===N.x1||N.y0===N.y1?"":U?H?"":a.getPtLabel(N)||"":u(N,l,S,i,P)||"";var J=m.ensureSingle(Q,"g","slicetext"),K=m.ensureSingle(J,"text","",function(ne){ne.attr("data-notex",1)}),re=m.ensureUniformFontSize(s,a.determineTextFont(S,N,P.font));K.text(N._text||" ").classed("slicetext",!0).attr("text-anchor",R?"end":E||U?"start":"middle").call(b.font,re).call(v.convertToTspans,s),N.textBB=b.bBox(K.node()),N.transform=w(N,{fontSize:re.size,isHeader:U}),N.transform.fontSize=re.size,T?K.transition().attrTween("transform",function(ne){var se=M(ne,!1,te(),[g,h]);return function(oe){return _(se(oe))}}):K.attr("transform",_(N))}),G}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1049,"../sunburst/helpers":1050,"../sunburst/plot":1054,"./constants":1073,"./partition":1082,"./style":1085,"@plotly/d3":58}],1078:[function(y,$,ee){"use strict";$.exports=function p(m,b,v){var e;v.swapXY&&(e=m.x0,m.x0=m.y0,m.y0=e,e=m.x1,m.x1=m.y1,m.y1=e),v.flipX&&(e=m.x0,m.x0=b[0]-m.x1,m.x1=b[0]-e),v.flipY&&(e=m.y0,m.y0=b[1]-m.y1,m.y1=b[1]-e);var n=m.children;if(n)for(var t=0;t<n.length;t++)p(n[t],b,v)}},{}],1079:[function(y,$,ee){"use strict";$.exports={moduleType:"trace",name:"treemap",basePlotModule:y("./base_plot"),categories:[],animatable:!0,attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc").calc,crossTraceCalc:y("./calc").crossTraceCalc,plot:y("./plot"),style:y("./style").style,colorbar:y("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":943,"./attributes":1070,"./base_plot":1071,"./calc":1072,"./defaults":1074,"./layout_attributes":1080,"./layout_defaults":1081,"./plot":1083,"./style":1085}],1080:[function(y,$,ee){"use strict";$.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1081:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./layout_attributes");$.exports=function(b,v){function e(n,t){return p.coerce(b,v,m,n,t)}e("treemapcolorway",v.colorway),e("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1080}],1082:[function(y,$,ee){"use strict";var p=y("d3-hierarchy"),m=y("./flip_tree");$.exports=function(b,v,e){var n,t=e.flipX,a=e.flipY,r="dice-slice"===e.packing,u=e.pad[a?"bottom":"top"],s=e.pad[t?"right":"left"],i=e.pad[t?"left":"right"],l=e.pad[a?"top":"bottom"];r&&(n=s,s=u,u=n,n=i,i=l,l=n);var c=p.treemap().tile(function(f,g){switch(f){case"squarify":return p.treemapSquarify.ratio(g);case"binary":return p.treemapBinary;case"dice":return p.treemapDice;case"slice":return p.treemapSlice;default:return p.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(s).paddingRight(i).paddingTop(u).paddingBottom(l).size(r?[v[1],v[0]]:v)(b);return(r||t||a)&&m(c,v,{swapXY:r,flipX:t,flipY:a}),c}},{"./flip_tree":1078,"d3-hierarchy":115}],1083:[function(y,$,ee){"use strict";var p=y("./draw"),m=y("./draw_descendants");$.exports=function(b,v,e,n){return p(b,v,e,n,{type:"treemap",drawDescendants:m})}},{"./draw":1075,"./draw_descendants":1077}],1084:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("d3-interpolate").interpolate,b=y("../sunburst/helpers"),v=y("../../lib"),e=y("../bar/constants").TEXTPAD,n=y("../bar/plot").toMoveInsideBar,t=y("../bar/uniform_text").recordMinTextSize,a=y("./constants"),r=y("./draw_ancestors");function u(s){return b.isHierarchyRoot(s)?"":b.getPtId(s)}$.exports=function(s,i,l,c,f){var g=s._fullLayout,h=i[0],o=h.trace,x="icicle"===o.type,d=h.hierarchy,w=b.findEntryWithLevel(d,o.level),_=p.select(l),T=_.selectAll("g.pathbar"),k=_.selectAll("g.slice");if(!w)return T.remove(),void k.remove();var L=b.isHierarchyRoot(w),M=!g.uniformtext.mode&&b.hasTransition(c),O=b.getMaxDepth(o),P=g._size,S=o.domain,E=P.w*(S.x[1]-S.x[0]),R=P.h*(S.y[1]-S.y[0]),B=E,H=o.pathbar.thickness,V=o.marker.line.width+a.gapWithPathbar,Z=o.pathbar.visible?o.pathbar.side.indexOf("bottom")>-1?R+V:-(H+V):0,W={x0:B,x1:B,y0:Z,y1:Z+H},G=function(Me,Ie,ze){var Ve=o.tiling.pad,Je=function(Ye){return Ye-Ve<=Ie.x0},De=function(Ye){return Ye+Ve>=Ie.x1},Be=function(Ye){return Ye-Ve<=Ie.y0},Ze=function(Ye){return Ye+Ve>=Ie.y1};return Me.x0===Ie.x0&&Me.x1===Ie.x1&&Me.y0===Ie.y0&&Me.y1===Ie.y1?{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1}:{x0:Je(Me.x0-Ve)?0:De(Me.x0-Ve)?ze[0]:Me.x0,x1:Je(Me.x1+Ve)?0:De(Me.x1+Ve)?ze[0]:Me.x1,y0:Be(Me.y0-Ve)?0:Ze(Me.y0-Ve)?ze[1]:Me.y0,y1:Be(Me.y1+Ve)?0:Ze(Me.y1+Ve)?ze[1]:Me.y1}},X=null,te={},D={},N=null,U=function(Me,Ie){return Ie?te[u(Me)]:D[u(Me)]};h.hasMultipleRoots&&L&&O++,o._maxDepth=O,o._backgroundColor=g.paper_bgcolor,o._entryDepth=w.data.depth,o._atRootLevel=L;var j=-E/2+P.l+P.w*(S.x[1]+S.x[0])/2,J=-R/2+P.t+P.h*(1-(S.y[1]+S.y[0])/2),K=function(Me){return j+Me},re=function(Me){return J+Me},ne=re(0),se=K(0),oe=function(Me){return se+Me},pe=function(Me){return ne+Me};function ce(Me,Ie){return Me+","+Ie}var ge=oe(0),xe=function(Me){Me.x=Math.max(ge,Me.x)},we=o.pathbar.edgeshape,be=function(Me,Ie){var ze=Me.x0,Ve=Me.x1,Je=Me.y0,De=Me.y1,Be=Me.textBB,Ze=function(bt){return-1!==o.textposition.indexOf(bt)},Ye=Ze("bottom"),tt=Ze("top")||Ie.isHeader&&!Ye?"start":Ye?"end":"middle",st=Ze("right"),vt=Ze("left")||Ie.onPathbar?-1:st?1:0,Pt=o[x?"tiling":"marker"].pad;if(Ie.isHeader){if((ze+=(x?Pt:Pt.l)-e)>=(Ve-=(x?Pt:Pt.r)-e)){var Mt=(ze+Ve)/2;ze=Mt,Ve=Mt}var rt;Ye?Je<(rt=De-(x?Pt:Pt.b))&&rt<De&&(Je=rt):Je<(rt=Je+(x?Pt:Pt.t))&&rt<De&&(De=rt)}var et=n(ze,Ve,Je,De,Be,{isHorizontal:!1,constrained:!0,angle:0,anchor:tt,leftToRight:vt});return et.fontSize=Ie.fontSize,et.targetX=K(et.targetX),et.targetY=re(et.targetY),isNaN(et.targetX)||isNaN(et.targetY)?{}:(ze!==Ve&&Je!==De&&t(o.type,et,g),{scale:et.scale,rotate:et.rotate,textX:et.textX,textY:et.textY,anchorX:et.anchorX,anchorY:et.anchorY,targetX:et.targetX,targetY:et.targetY})},Se=function(Me,Ie){for(var ze,Ve=0,Je=Me;!ze&&Ve<O;)Ve++,(Je=Je.parent)?ze=U(Je,Ie):Ve=O;return ze||{}},fe=function(Me,Ie,ze,Ve,Je){var De,Be=U(Me,Ie);if(Be)De=Be;else if(Ie)De=W;else if(X)if(Me.parent){var Ze=N||ze;Ze&&!Ie?De=G(Me,Ze,Ve):v.extendFlat(De={},Se(Me,Ie))}else De=v.extendFlat({},Me),x&&("h"===Je.orientation?Je.flipX?De.x0=Me.x1:De.x1=0:Je.flipY?De.y0=Me.y1:De.y1=0);else De={};return m(De,{x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1})},me=function(Me,Ie,ze,Ve){var Je=U(Me,Ie),De={},Be=function(Me,Ie,ze,Ve){return Ie?te[u(d)]||W:Me.data.depth-w.data.depth<O?G(Me,D[o.level]||ze,Ve):{}}(Me,Ie,ze,Ve);v.extendFlat(De,{transform:be({x0:Be.x0,x1:Be.x1,y0:Be.y0,y1:Be.y1,textBB:Me.textBB,_text:Me._text},{isHeader:b.isHeader(Me,o)})}),Je?De=Je:Me.parent&&v.extendFlat(De,Se(Me,Ie));var Ze=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&t(o.type,Ze,g),m(De,{transform:{scale:Ze.scale,rotate:Ze.rotate,textX:Ze.textX,textY:Ze.textY,anchorX:Ze.anchorX,anchorY:Ze.anchorY,targetX:Ze.targetX,targetY:Ze.targetY}})},Te=function(Me,Ie,ze,Ve,Je){var De=Ve[0],Be=Ve[1];M?Me.exit().transition().each(function(){var Ze=p.select(this);Ze.select("path.surface").transition().attrTween("d",function(Ye){var tt=function(st,vt,Pt,Mt){var rt,et=U(st,vt);if(vt)rt=W;else{var bt=U(w,vt);rt=bt?G(st,bt,Mt):{}}return m(et,rt)}(Ye,Ie,0,[De,Be]);return function(st){return Je(tt(st))}}),Ze.select("g.slicetext").attr("opacity",0)}).remove():Me.exit().remove()},_e=function(Me){var Ie=Me.transform;return Me.x0!==Me.x1&&Me.y0!==Me.y1&&t(o.type,Ie,g),v.getTextTransform({textX:Ie.textX,textY:Ie.textY,anchorX:Ie.anchorX,anchorY:Ie.anchorY,targetX:Ie.targetX,targetY:Ie.targetY,scale:Ie.scale,rotate:Ie.rotate})};M&&(T.each(function(Me){te[u(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(te[u(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate})}),k.each(function(Me){D[u(Me)]={x0:Me.x0,x1:Me.x1,y0:Me.y0,y1:Me.y1},Me.transform&&(D[u(Me)].transform={textX:Me.transform.textX,textY:Me.transform.textY,anchorX:Me.transform.anchorX,anchorY:Me.transform.anchorY,targetX:Me.transform.targetX,targetY:Me.transform.targetY,scale:Me.transform.scale,rotate:Me.transform.rotate}),!X&&b.isEntry(Me)&&(X=Me)})),N=f(s,i,w,k,{width:E,height:R,viewX:K,viewY:re,pathSlice:function(Me){var Ie=K(Me.x0),ze=K(Me.x1),Ve=re(Me.y0),Je=re(Me.y1);return ze-Ie&&Je-Ve?"M"+ce(Ie,Ve+0)+"L"+ce(ze-0,Ve)+"L"+ce(ze,Je-0)+"L"+ce(Ie+0,Je)+"Z":""},toMoveInsideSlice:be,prevEntry:X,makeUpdateSliceInterpolator:fe,makeUpdateTextInterpolator:me,handleSlicesExit:Te,hasTransition:M,strTransform:_e}),o.pathbar.visible?r(s,i,w,T,{barDifY:Z,width:B,height:H,viewX:oe,viewY:pe,pathSlice:function(Me){var Ie=oe(Math.max(Math.min(Me.x0,Me.x0),0)),ze=oe(Math.min(Math.max(Me.x1,Me.x1),B)),Ve=pe(Me.y0),Je=pe(Me.y1),De=H/2,Be={},Ze={};Be.x=Ie,Ze.x=ze,Be.y=Ze.y=(Ve+Je)/2;var Ye={x:Ie,y:Ve},tt={x:ze,y:Ve},st={x:ze,y:Je},vt={x:Ie,y:Je};return">"===we?(Ye.x-=De,tt.x-=De,st.x-=De,vt.x-=De):"/"===we?(st.x-=De,vt.x-=De,Be.x-=De/2,Ze.x-=De/2):"\\"===we?(Ye.x-=De,tt.x-=De,Be.x-=De/2,Ze.x-=De/2):"<"===we&&(Be.x-=De,Ze.x-=De),xe(Ye),xe(vt),xe(Be),xe(tt),xe(st),xe(Ze),"M"+ce(Ye.x,Ye.y)+"L"+ce(tt.x,tt.y)+"L"+ce(Ze.x,Ze.y)+"L"+ce(st.x,st.y)+"L"+ce(vt.x,vt.y)+"L"+ce(Be.x,Be.y)+"Z"},toMoveInsideSlice:be,makeUpdateSliceInterpolator:fe,makeUpdateTextInterpolator:me,handleSlicesExit:Te,hasTransition:M,strTransform:_e}):T.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1050,"./constants":1073,"./draw_ancestors":1076,"@plotly/d3":58,"d3-interpolate":116}],1085:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/color"),b=y("../../lib"),v=y("../sunburst/helpers"),e=y("../bar/uniform_text").resizeText;function n(t,a,r,u){var s,i,l=(u||{}).hovered,c=a.data.data,f=c.i,g=c.color,h=v.isHierarchyRoot(a),o=1;if(l)s=r._hovered.marker.line.color,i=r._hovered.marker.line.width;else if(h&&g===r.root.color)o=100,s="rgba(0,0,0,0)",i=0;else if(s=b.castOption(r,f,"marker.line.color")||m.defaultLine,i=b.castOption(r,f,"marker.line.width")||0,!r._hasColorscale&&!a.onPathbar){var x=r.marker.depthfade;if(x){var d,w=m.combine(m.addOpacity(r._backgroundColor,.75),g);if(!0===x){var _=v.getMaxDepth(r);d=isFinite(_)?v.isLeaf(a)?0:r._maxVisibleLayers-(a.data.depth-r._entryDepth):a.data.height+1}else d=a.data.depth-r._entryDepth,r._atRootLevel||d++;if(d>0)for(var T=0;T<d;T++)g=m.combine(m.addOpacity(w,.5*T/d),g)}}t.style("stroke-width",i).call(m.fill,g).call(m.stroke,s).style("opacity",o)}$.exports={style:function(t){var a=t._fullLayout._treemaplayer.selectAll(".trace");e(t,a,"treemap"),a.each(function(r){var u=p.select(this),s=r[0].trace;u.style("opacity",s.opacity),u.selectAll("path.surface").each(function(i){p.select(this).call(n,i,s,{hovered:!1})})})},styleOne:n}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1050,"@plotly/d3":58}],1086:[function(y,$,ee){"use strict";var p=y("../box/attributes"),m=y("../../lib/extend").extendFlat,b=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat;$.exports={y:p.y,x:p.x,x0:p.x0,y0:p.y0,xhoverformat:b("x"),yhoverformat:b("y"),name:m({},p.name,{}),orientation:m({},p.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:p.fillcolor,points:m({},p.boxpoints,{}),jitter:m({},p.jitter,{}),pointpos:m({},p.pointpos,{}),width:m({},p.width,{}),marker:p.marker,text:p.text,hovertext:p.hovertext,hovertemplate:p.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup,selected:p.selected,unselected:p.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1087:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/cartesian/axes"),b=y("../box/calc"),v=y("./helpers"),e=y("../../constants/numerical").BADNUM;function n(a,r,u){var s=r.max-r.min;if(!s)return a.bandwidth?a.bandwidth:0;if(a.bandwidth)return Math.max(a.bandwidth,s/1e4);var c,i=u.length,l=p.stdev(u,i-1,r.mean);return Math.max((c=i,1.059*Math.min(l,(r.q3-r.q1)/1.349)*Math.pow(c,-.2)),s/100)}function t(a,r,u,s){var i,l=a.spanmode,c=a.span||[],g=[r.min-2*s,r.max+2*s];function h(x){var d=c[x],w="multicategory"===u.type?u.r2c(d):u.d2c(d,0,a[r.valLetter+"calendar"]);return w===e?g[x]:w}var o={type:"linear",range:i="soft"===l?g:"hard"===l?[r.min,r.max]:[h(0),h(1)]};return m.setConvert(o),o.cleanRange(),i}$.exports=function(a,r){var u=b(a,r);if(u[0].t.empty)return u;for(var s=a._fullLayout,i=m.getFromId(a,r["h"===r.orientation?"xaxis":"yaxis"]),l=1/0,c=-1/0,f=0,g=0,h=0;h<u.length;h++){var o=u[h],x=o.pts.map(v.extractVal),d=o.bandwidth=n(r,o,x),w=o.span=t(r,o,i,d);if(o.min===o.max&&0===d)w=o.span=[o.min,o.max],o.density=[{v:1,t:w[0]}],o.bandwidth=d,f=Math.max(f,1);else{var _=w[1]-w[0],T=Math.ceil(_/(d/3)),k=_/T;if(!isFinite(k)||!isFinite(T))return p.error("Something went wrong with computing the violin span"),u[0].t.empty=!0,u;var L=v.makeKDE(o,r,x);o.density=new Array(T);for(var M=0,O=w[0];O<w[1]+k/2;M++,O+=k){var P=L(O);o.density[M]={v:P,t:O},f=Math.max(f,P)}}g=Math.max(g,x.length),l=Math.min(l,w[0]),c=Math.max(c,w[1])}var S=m.findExtremes(i,[l,c],{padded:!0});if(r._extremes[i._id]=S,r.width)u[0].t.maxKDE=f;else{var E=s._violinScaleGroupStats,R=r.scalegroup,B=E[R];B?(B.maxKDE=Math.max(B.maxKDE,f),B.maxCount=Math.max(B.maxCount,g)):E[R]={maxKDE:f,maxCount:g}}return u[0].t.labels.kde=p._(a,"kde:"),u}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1090}],1088:[function(y,$,ee){"use strict";var p=y("../box/cross_trace_calc").setPositionOffset,m=["v","h"];$.exports=function(b,v){for(var e=b.calcdata,n=v.xaxis,t=v.yaxis,a=0;a<m.length;a++){for(var r=m[a],u="h"===r?t:n,s=[],i=0;i<e.length;i++){var l=e[i],f=l[0].trace;!0!==f.visible||"violin"!==f.type||l[0].t.empty||f.orientation!==r||f.xaxis!==n._id||f.yaxis!==t._id||s.push(i)}p("violin",b,s,u)}}},{"../box/cross_trace_calc":675}],1089:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../components/color"),b=y("../box/defaults"),v=y("./attributes");$.exports=function(e,n,t,a){function r(_,T){return p.coerce(e,n,v,_,T)}function u(_,T){return p.coerce2(e,n,v,_,T)}if(b.handleSampleDefaults(e,n,r,a),!1!==n.visible){r("bandwidth"),r("side"),r("width")||(r("scalegroup",n.name),r("scalemode"));var s,i=r("span");Array.isArray(i)&&(s="manual"),r("spanmode",s);var l=r("line.color",(e.marker||{}).color||t),c=r("line.width"),f=r("fillcolor",m.addOpacity(n.line.color,.5));b.handlePointsDefaults(e,n,r,{prefix:""});var g=u("box.width"),h=u("box.fillcolor",f),o=u("box.line.color",l),x=u("box.line.width",c);r("box.visible",Boolean(g||h||o||x))||(n.box={visible:!1});var d=u("meanline.color",l),w=u("meanline.width",c);r("meanline.visible",Boolean(d||w))||(n.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1086}],1090:[function(y,$,ee){"use strict";var p=y("../../lib"),m=function(b){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*b*b)};ee.makeKDE=function(b,v,e){var n=e.length,t=m,a=b.bandwidth,r=1/(n*a);return function(u){for(var s=0,i=0;i<n;i++)s+=t((u-e[i])/a);return r*s}},ee.getPositionOnKdePath=function(b,v,e){var n,t;"h"===v.orientation?(n="y",t="x"):(n="x",t="y");var a=p.findPointOnPath(b.path,e,t,{pathLength:b.pathLength}),r=b.posCenterPx,u=a[n];return[u,"both"===v.side?2*r-u:r]},ee.getKdeValue=function(b,v,e){var n=b.pts.map(ee.extractVal);return ee.makeKDE(b,v,n)(e)/b.posDensityScale},ee.extractVal=function(b){return b.v}},{"../../lib":503}],1091:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../../plots/cartesian/axes"),b=y("../box/hover"),v=y("./helpers");$.exports=function(e,n,t,a,r){r||(r={});var u,s,i=r.hoverLayer,l=e.cd,c=l[0].trace,f=c.hoveron,g=-1!==f.indexOf("violins"),h=-1!==f.indexOf("kde"),o=[];if(g||h){var x=b.hoverOnBoxes(e,n,t,a);if(h&&x.length>0){var d,w,_,T,k,L=e.xa,M=e.ya;"h"===c.orientation?(k=n,d="y",_=M,w="x",T=L):(k=t,d="x",_=L,w="y",T=M);var O=l[e.index];if(k>=O.span[0]&&k<=O.span[1]){var P=p.extendFlat({},e),S=T.c2p(k,!0),E=v.getKdeValue(O,c,k),R=v.getPositionOnKdePath(O,c,S),B=_._offset,H=_._length;P[d+"0"]=R[0],P[d+"1"]=R[1],P[w+"0"]=P[w+"1"]=S,P[w+"Label"]=w+": "+m.hoverLabelText(T,k,c[w+"hoverformat"])+", "+l[0].t.labels.kde+" "+E.toFixed(3),P.spikeDistance=x[0].spikeDistance;var V=d+"Spike";P[V]=x[0][V],x[0].spikeDistance=void 0,x[0][V]=void 0,P.hovertemplate=!1,o.push(P),(s={stroke:e.color})[d+"1"]=p.constrain(B+R[0],B,B+H),s[d+"2"]=p.constrain(B+R[1],B,B+H),s[w+"1"]=s[w+"2"]=T._offset+S}}g&&(o=o.concat(x))}-1!==f.indexOf("points")&&(u=b.hoverOnPoints(e,n,t));var Z=i.selectAll(".violinline-"+c.uid).data(s?[0]:[]);return Z.enter().append("line").classed("violinline-"+c.uid,!0).attr("stroke-width",1.5),Z.exit().remove(),Z.attr(s),"closest"===a?u?[u]:o:(u&&o.push(u),o)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1090}],1092:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults"),crossTraceDefaults:y("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc"),plot:y("./plot"),style:y("./style"),styleOnSelect:y("../scatter/style").styleOnSelect,hoverPoints:y("./hover"),selectPoints:y("../box/select"),moduleType:"trace",name:"violin",basePlotModule:y("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":949,"./attributes":1086,"./calc":1087,"./cross_trace_calc":1088,"./defaults":1089,"./hover":1091,"./layout_attributes":1093,"./layout_defaults":1094,"./plot":1095,"./style":1096}],1093:[function(y,$,ee){"use strict";var p=y("../box/layout_attributes"),m=y("../../lib").extendFlat;$.exports={violinmode:m({},p.boxmode,{}),violingap:m({},p.boxgap,{}),violingroupgap:m({},p.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1094:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./layout_attributes"),b=y("../box/layout_defaults");$.exports=function(v,e,n){b._supply(v,e,n,function(t,a){return p.coerce(v,e,m,t,a)},"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1093}],1095:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=y("../../components/drawing"),v=y("../box/plot"),e=y("../scatter/line_points"),n=y("./helpers");$.exports=function(t,a,r,u){var s=t._fullLayout,i=a.xaxis,l=a.yaxis;function c(f){var g=e(f,{xaxis:i,yaxis:l,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return b.smoothopen(g[0],1)}m.makeTraceGroups(u,r,"trace violins").each(function(f){var g=p.select(this),h=f[0],o=h.t,x=h.trace;if(!0!==x.visible||o.empty)g.remove();else{var d=o.bPos,w=o.bdPos,_=a[o.valLetter+"axis"],T=a[o.posLetter+"axis"],k="both"===x.side,L=k||"positive"===x.side,M=k||"negative"===x.side,O=g.selectAll("path.violin").data(m.identity);O.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),O.exit().remove(),O.each(function(Z){var W,G,X,te,D,N,U,Q,j=p.select(this),J=Z.density,K=J.length,re=T.c2l(Z.pos+d,!0),ne=T.l2p(re);if(x.width)W=o.maxKDE/w;else{var se=s._violinScaleGroupStats[x.scalegroup];W="count"===x.scalemode?se.maxKDE/w*(se.maxCount/Z.pts.length):se.maxKDE/w}if(L){for(U=new Array(K),D=0;D<K;D++)(Q=U[D]={})[o.posLetter]=re+J[D].v/W,Q[o.valLetter]=_.c2l(J[D].t,!0);G=c(U)}if(M){for(U=new Array(K),N=0,D=K-1;N<K;N++,D--)(Q=U[N]={})[o.posLetter]=re-J[D].v/W,Q[o.valLetter]=_.c2l(J[D].t,!0);X=c(U)}if(k)te=G+"L"+X.substr(1)+"Z";else{var oe=[ne,_.c2p(J[0].t)],pe=[ne,_.c2p(J[K-1].t)];"h"===x.orientation&&(oe.reverse(),pe.reverse()),te=L?"M"+oe+"L"+G.substr(1)+"L"+pe:"M"+pe+"L"+X.substr(1)+"L"+oe}j.attr("d",te),Z.posCenterPx=ne,Z.posDensityScale=W*w,Z.path=j.node(),Z.pathLength=Z.path.getTotalLength()/(k?2:1)});var P,S,E,R=x.box,B=R.width,H=(R.line||{}).width;k?(P=w*B,S=0):L?(P=[0,w*B/2],S=H*{x:1,y:-1}[o.posLetter]):(P=[w*B/2,0],S=H*{x:-1,y:1}[o.posLetter]),v.plotBoxAndWhiskers(g,{pos:T,val:_},x,{bPos:d,bdPos:P,bPosPxOffset:S}),v.plotBoxMean(g,{pos:T,val:_},x,{bPos:d,bdPos:P,bPosPxOffset:S}),!x.box.visible&&x.meanline.visible&&(E=m.identity);var V=g.selectAll("path.meanline").data(E||[]);V.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),V.exit().remove(),V.each(function(Z){var W=_.c2p(Z.mean,!0),G=n.getPositionOnKdePath(Z,x,W);p.select(this).attr("d","h"===x.orientation?"M"+W+","+G[0]+"V"+G[1]:"M"+G[0]+","+W+"H"+G[1])}),v.plotPoints(g,{x:i,y:l},x,o)}})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":939,"./helpers":1090,"@plotly/d3":58}],1096:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/color"),b=y("../scatter/style").stylePoints;$.exports=function(v){var e=p.select(v).selectAll("g.trace.violins");e.style("opacity",function(n){return n[0].trace.opacity}),e.each(function(n){var t=n[0].trace,a=p.select(this),r=t.box||{},u=r.line||{},s=t.meanline||{},i=s.width;a.selectAll("path.violin").style("stroke-width",t.line.width+"px").call(m.stroke,t.line.color).call(m.fill,t.fillcolor),a.selectAll("path.box").style("stroke-width",u.width+"px").call(m.stroke,u.color).call(m.fill,r.fillcolor);var l={"stroke-width":i+"px","stroke-dasharray":2*i+"px,"+i+"px"};a.selectAll("path.mean").style(l).call(m.stroke,s.color),a.selectAll("path.meanline").style(l).call(m.stroke,s.color),b(a,t,v)})}},{"../../components/color":366,"../scatter/style":949,"@plotly/d3":58}],1097:[function(y,$,ee){"use strict";var p=y("../../components/colorscale/attributes"),m=y("../isosurface/attributes"),b=y("../surface/attributes"),v=y("../../plots/attributes"),e=y("../../lib/extend").extendFlat,n=y("../../plot_api/edit_types").overrideAll,t=$.exports=n(e({x:m.x,y:m.y,z:m.z,value:m.value,isomin:m.isomin,isomax:m.isomax,surface:m.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:m.slices,caps:m.caps,text:m.text,hovertext:m.hovertext,xhoverformat:m.xhoverformat,yhoverformat:m.yhoverformat,zhoverformat:m.zhoverformat,valuehoverformat:m.valuehoverformat,hovertemplate:m.hovertemplate},p("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:m.colorbar,opacity:m.opacity,opacityscale:b.opacityscale,lightposition:m.lightposition,lighting:m.lighting,flatshading:m.flatshading,contour:m.contour,hoverinfo:e({},v.hoverinfo),showlegend:e({},v.showlegend,{dflt:!1})}),"calc","nested");t.x.editType=t.y.editType=t.z.editType=t.value.editType="calc+clearAxisTypes",t.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":861,"../surface/attributes":1056}],1098:[function(y,$,ee){"use strict";var p=y("../../../stackgl_modules").gl_mesh3d,m=y("../../lib/gl_format_color").parseColorScale,b=y("../../lib/str2rgbarray"),v=y("../../components/colorscale").extractOpts,e=y("../../plots/gl3d/zip3"),n=y("../isosurface/convert").findNearestOnAxis,t=y("../isosurface/convert").generateIsoMeshes;function a(u,s,i){this.scene=u,this.uid=i,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var r=a.prototype;r.handlePick=function(u){if(u.object===this.mesh){var s=u.data.index,l=this.data._meshY[s],c=this.data._meshZ[s],f=this.data._Ys.length,g=this.data._Zs.length,h=n(this.data._meshX[s],this.data._Xs).id,o=n(l,this.data._Ys).id,x=n(c,this.data._Zs).id,d=u.index=x+g*o+g*f*h;u.traceCoordinate=[this.data._meshX[d],this.data._meshY[d],this.data._meshZ[d],this.data._value[d]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&void 0!==w[d]?u.textLabel=w[d]:w&&(u.textLabel=w),!0}},r.update=function(u){var s=this.scene,i=s.fullSceneLayout;function l(g,h,o,x){return h.map(function(d){return g.d2l(d,0,x)*o})}this.data=t(u);var c={positions:e(l(i.xaxis,u._meshX,s.dataScale[0],u.xcalendar),l(i.yaxis,u._meshY,s.dataScale[1],u.ycalendar),l(i.zaxis,u._meshZ,s.dataScale[2],u.zcalendar)),cells:e(u._meshI,u._meshJ,u._meshK),lightPosition:[u.lightposition.x,u.lightposition.y,u.lightposition.z],ambient:u.lighting.ambient,diffuse:u.lighting.diffuse,specular:u.lighting.specular,roughness:u.lighting.roughness,fresnel:u.lighting.fresnel,vertexNormalsEpsilon:u.lighting.vertexnormalsepsilon,faceNormalsEpsilon:u.lighting.facenormalsepsilon,opacity:u.opacity,opacityscale:u.opacityscale,contourEnable:u.contour.show,contourColor:b(u.contour.color).slice(0,3),contourWidth:u.contour.width,useFacetNormals:u.flatshading},f=v(u);c.vertexIntensity=u._meshIntensity,c.vertexIntensityBounds=[f.min,f.max],c.colormap=m(u),this.mesh.update(c)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(u,s){var l=p({gl:u.glplot.gl}),c=new a(u,l,s.uid);return l._trace=c,c.update(s),u.glplot.add(l),c}},{"../../../stackgl_modules":1119,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":863}],1099:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./attributes"),b=y("../isosurface/defaults").supplyIsoDefaults,v=y("../surface/defaults").opacityscaleDefaults;$.exports=function(e,n,t,a){function r(u,s){return p.coerce(e,n,m,u,s)}b(e,n,t,a,r),v(e,n,a,r)}},{"../../lib":503,"../isosurface/defaults":864,"../surface/defaults":1059,"./attributes":1097}],1100:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),supplyDefaults:y("./defaults"),calc:y("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:y("./convert"),moduleType:"trace",name:"volume",basePlotModule:y("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":862,"./attributes":1097,"./convert":1098,"./defaults":1099}],1101:[function(y,$,ee){"use strict";var p=y("../bar/attributes"),m=y("../scatter/attributes").line,b=y("../../plots/attributes"),v=y("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=y("../../plots/template_attributes").hovertemplateAttrs,n=y("../../plots/template_attributes").texttemplateAttrs,t=y("./constants"),a=y("../../lib/extend").extendFlat,r=y("../../components/color");function u(s){return{marker:{color:a({},p.marker.color,{arrayOk:!1,editType:"style"}),line:{color:a({},p.marker.line.color,{arrayOk:!1,editType:"style"}),width:a({},p.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}$.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:p.x,x0:p.x0,dx:p.dx,y:p.y,y0:p.y0,dy:p.dy,xperiod:p.xperiod,yperiod:p.yperiod,xperiod0:p.xperiod0,yperiod0:p.yperiod0,xperiodalignment:p.xperiodalignment,yperiodalignment:p.yperiodalignment,xhoverformat:v("x"),yhoverformat:v("y"),hovertext:p.hovertext,hovertemplate:e({},{keys:t.eventDataKeys}),hoverinfo:a({},b.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:n({editType:"plot"},{keys:t.eventDataKeys.concat(["label"])}),text:p.text,textposition:p.textposition,insidetextanchor:p.insidetextanchor,textangle:p.textangle,textfont:p.textfont,insidetextfont:p.insidetextfont,outsidetextfont:p.outsidetextfont,constraintext:p.constraintext,cliponaxis:p.cliponaxis,orientation:p.orientation,offset:p.offset,width:p.width,increasing:u(),decreasing:u(),totals:u(),connector:{line:{color:a({},m.color,{dflt:r.defaultLine}),width:a({},m.width,{editType:"plot"}),dash:m.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:p.offsetgroup,alignmentgroup:p.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":925,"./constants":1103}],1102:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes"),m=y("../../plots/cartesian/align_period"),b=y("../../lib").mergeArray,v=y("../scatter/calc_selection"),e=y("../../constants/numerical").BADNUM;function n(a){return"a"===a||"absolute"===a}function t(a){return"t"===a||"total"===a}$.exports=function(a,r){var u,s,i,l,c,f,g=p.getFromId(a,r.xaxis||"x"),h=p.getFromId(a,r.yaxis||"y");"h"===r.orientation?(u=g.makeCalcdata(r,"x"),i=h.makeCalcdata(r,"y"),l=m(r,h,"y",i),c=!!r.yperiodalignment,f="y"):(u=h.makeCalcdata(r,"y"),i=g.makeCalcdata(r,"x"),l=m(r,g,"x",i),c=!!r.xperiodalignment,f="x"),s=l.vals;for(var o,x=Math.min(s.length,u.length),d=new Array(x),w=0,_=!1,T=0;T<x;T++){var k=u[T]||0,L=!1;(u[T]!==e||t(r.measure[T])||n(r.measure[T]))&&T+1<x&&(u[T+1]!==e||t(r.measure[T+1])||n(r.measure[T+1]))&&(L=!0);var M=d[T]={i:T,p:s[T],s:k,rawS:k,cNext:L};n(r.measure[T])?(w=M.s,M.isSum=!0,M.dir="totals",M.s=w):t(r.measure[T])?(M.isSum=!0,M.dir="totals",M.s=w):(M.isSum=!1,M.dir=M.rawS<0?"decreasing":"increasing",M.s=w+(o=M.s),w+=o),"totals"===M.dir&&(_=!0),c&&(d[T].orig_p=i[T],d[T][f+"End"]=l.ends[T],d[T][f+"Start"]=l.starts[T]),r.ids&&(M.id=String(r.ids[T])),M.v=(r.base||0)+w}return d.length&&(d[0].hasTotals=_),b(r.text,d,"tx"),b(r.hovertext,d,"htx"),v(d,r),d}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":927}],1103:[function(y,$,ee){"use strict";$.exports={eventDataKeys:["initial","delta","final"]}},{}],1104:[function(y,$,ee){"use strict";var p=y("../bar/cross_trace_calc").setGroupPositions;$.exports=function(m,b){var v,e,n=m._fullLayout,t=m._fullData,a=m.calcdata,r=b.xaxis,u=b.yaxis,s=[],i=[],l=[];for(e=0;e<t.length;e++){var c=t[e];!0===c.visible&&c.xaxis===r._id&&c.yaxis===u._id&&"waterfall"===c.type&&(v=a[e],"h"===c.orientation?l.push(v):i.push(v),s.push(v))}var f={mode:n.waterfallmode,norm:n.waterfallnorm,gap:n.waterfallgap,groupgap:n.waterfallgroupgap};for(p(m,r,u,i,f),p(m,u,r,l,f),e=0;e<s.length;e++){v=s[e];for(var g=0;g<v.length;g++){var h=v[g];!1===h.isSum&&(h.s0+=0===g?0:v[g-1].s),g+1<v.length&&(v[g].nextP0=v[g+1].p0,v[g].nextS0=v[g+1].s0)}}}},{"../bar/cross_trace_calc":651}],1105:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("../bar/defaults").handleGroupingDefaults,b=y("../bar/defaults").handleText,v=y("../scatter/xy_defaults"),e=y("../scatter/period_defaults"),n=y("./attributes"),t=y("../../components/color"),a=y("../../constants/delta.js"),r=a.INCREASING.COLOR,u=a.DECREASING.COLOR;function s(i,l,c){i(l+".marker.color",c),i(l+".marker.line.color",t.defaultLine),i(l+".marker.line.width")}$.exports={supplyDefaults:function(i,l,c,f){function g(o,x){return p.coerce(i,l,n,o,x)}if(v(i,l,f,g)){e(i,l,f,g),g("xhoverformat"),g("yhoverformat"),g("measure"),g("orientation",l.x&&!l.y?"h":"v"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate");var h=g("textposition");b(i,l,f,g,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==l.textposition&&(g("texttemplate"),l.texttemplate||g("textinfo")),s(g,"increasing",r),s(g,"decreasing",u),s(g,"totals","#4499FF"),g("connector.visible")&&(g("connector.mode"),g("connector.line.width")&&(g("connector.line.color"),g("connector.line.dash")))}else l.visible=!1},crossTraceDefaults:function(i,l){var c,f;function g(o){return p.coerce(f._input,f,n,o)}if("group"===l.waterfallmode)for(var h=0;h<i.length;h++)c=(f=i[h])._input,m(c,f,l,g)}}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":945,"../scatter/xy_defaults":952,"./attributes":1101}],1106:[function(y,$,ee){"use strict";$.exports=function(p,m){return p.x="xVal"in m?m.xVal:m.x,p.y="yVal"in m?m.yVal:m.y,"initial"in m&&(p.initial=m.initial),"delta"in m&&(p.delta=m.delta),"final"in m&&(p.final=m.final),m.xa&&(p.xaxis=m.xa),m.ya&&(p.yaxis=m.ya),p}},{}],1107:[function(y,$,ee){"use strict";var p=y("../../plots/cartesian/axes").hoverLabelText,m=y("../../components/color").opacity,b=y("../bar/hover").hoverOnBars,v=y("../../constants/delta.js"),e=v.INCREASING.SYMBOL,n=v.DECREASING.SYMBOL;$.exports=function(t,a,r,u,s){var S,E,R,B,i=b(t,a,r,u,s);if(i){var l=i.cd,c=l[0].trace,f="h"===c.orientation,g=f?"x":"y",h=f?t.xa:t.ya,o=l[i.index],x=o.isSum?o.b+o.s:o.rawS;if(!o.isSum){i.initial=o.b+o.s-x,i.delta=x,i.final=i.initial+i.delta;var d=M(Math.abs(i.delta));i.deltaLabel=x<0?"("+d+")":d,i.finalLabel=M(i.final),i.initialLabel=M(i.initial)}var w=o.hi||c.hoverinfo,_=[];if(w&&"none"!==w&&"skip"!==w){var T="all"===w,k=w.split("+"),L=function(O){return T||-1!==k.indexOf(O)};o.isSum||(!L("final")||L(f?"x":"y")||_.push(i.finalLabel),L("delta")&&_.push(x<0?i.deltaLabel+" "+n:i.deltaLabel+" "+e),L("initial")&&_.push("Initial: "+i.initialLabel))}return _.length&&(i.extraText=_.join("<br>")),i.color=(R=(S=c[o.dir].marker).line.color,B=S.line.width,m(E=S.color)?E:m(R)&&B?R:void 0),[i]}function M(O){return p(h,O,c[g+"hoverformat"])}}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1108:[function(y,$,ee){"use strict";$.exports={attributes:y("./attributes"),layoutAttributes:y("./layout_attributes"),supplyDefaults:y("./defaults").supplyDefaults,crossTraceDefaults:y("./defaults").crossTraceDefaults,supplyLayoutDefaults:y("./layout_defaults"),calc:y("./calc"),crossTraceCalc:y("./cross_trace_calc"),plot:y("./plot"),style:y("./style").style,hoverPoints:y("./hover"),eventData:y("./event_data"),selectPoints:y("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:y("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1101,"./calc":1102,"./cross_trace_calc":1104,"./defaults":1105,"./event_data":1106,"./hover":1107,"./layout_attributes":1109,"./layout_defaults":1110,"./plot":1111,"./style":1112}],1109:[function(y,$,ee){"use strict";$.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1110:[function(y,$,ee){"use strict";var p=y("../../lib"),m=y("./layout_attributes");$.exports=function(b,v,e){var n=!1;function t(u,s){return p.coerce(b,v,m,u,s)}for(var a=0;a<e.length;a++){var r=e[a];if(r.visible&&"waterfall"===r.type){n=!0;break}}n&&(t("waterfallmode"),t("waterfallgap",.2),t("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1109}],1111:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../lib"),b=y("../../components/drawing"),v=y("../../constants/numerical").BADNUM,e=y("../bar/plot"),n=y("../bar/uniform_text").clearMinTextSize;$.exports=function(t,a,r,u){var i,l,g,h,s=t._fullLayout;n("waterfall",s),e.plot(t,a,r,u,{mode:s.waterfallmode,norm:s.waterfallmode,gap:s.waterfallgap,groupgap:s.waterfallgroupgap}),i=t,g=(l=a).xaxis,h=l.yaxis,m.makeTraceGroups(u,r,"trace bars").each(function(o){var x=p.select(this),d=o[0].trace,w=m.ensureSingle(x,"g","lines");if(d.connector&&d.connector.visible){var _="h"===d.orientation,T=d.connector.mode,k=w.selectAll("g.line").data(m.identity);k.enter().append("g").classed("line",!0),k.exit().remove();var L=k.size();k.each(function(M,O){if(O===L-1||M.cNext){var P=(H=g,V=h,G=[],te=(Z=_)?V:H,(W=[])[0]=(X=Z?H:V).c2p((B=M).s0,!0),G[0]=te.c2p(B.p0,!0),W[1]=X.c2p(B.s1,!0),G[1]=te.c2p(B.p1,!0),W[2]=X.c2p(B.nextS0,!0),G[2]=te.c2p(B.nextP0,!0),Z?[W,G]:[G,W]),S=P[0],E=P[1],R="";S[0]!==v&&E[0]!==v&&S[1]!==v&&E[1]!==v&&("spanning"===T&&!M.isSum&&O>0&&(R+=_?"M"+S[0]+","+E[1]+"V"+E[0]:"M"+S[1]+","+E[0]+"H"+S[0]),"between"!==T&&(M.isSum||O<L-1)&&(R+=_?"M"+S[1]+","+E[0]+"V"+E[1]:"M"+S[0]+","+E[1]+"H"+S[1]),S[2]!==v&&E[2]!==v&&(R+=_?"M"+S[1]+","+E[1]+"V"+E[2]:"M"+S[1]+","+E[1]+"H"+S[2])),""===R&&(R="M0,0Z"),m.ensureSingle(p.select(this),"path").attr("d",R).call(b.setClipUrl,l.layerClipId,i)}var B,H,V,Z,W,G,X,te})}else w.remove()})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1112:[function(y,$,ee){"use strict";var p=y("@plotly/d3"),m=y("../../components/drawing"),b=y("../../components/color"),v=y("../../constants/interactions").DESELECTDIM,e=y("../bar/style"),n=y("../bar/uniform_text").resizeText,t=e.styleTextPoints;$.exports={style:function(a,r,u){var s=u||p.select(a).selectAll("g.waterfalllayer").selectAll("g.trace");n(a,s,"waterfall"),s.style("opacity",function(i){return i[0].trace.opacity}),s.each(function(i){var l=p.select(this),c=i[0].trace;l.selectAll(".point > path").each(function(f){if(!f.isBlank){var g=c[f.dir].marker;p.select(this).call(b.fill,g.color).call(b.stroke,g.line.color).call(m.dashLine,g.line.dash,g.line.width).style("opacity",c.selectedpoints&&!f.selected?v:1)}}),t(l,c,a),l.selectAll(".lines").each(function(){var f=c.connector.line;m.lineGroupStyle(p.select(this).selectAll("path"),f.width,f.color,f.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1113:[function(y,$,ee){"use strict";var p=y("../plots/cartesian/axes"),m=y("../lib"),b=y("../plot_api/plot_schema"),v=y("./helpers").pointsAccessorFunction,e=y("../constants/numerical").BADNUM;ee.moduleType="transform",ee.name="aggregate";var n=ee.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},t=n.aggregations;function a(i,l,c,f){if(f.enabled){for(var g=f.target,h=m.nestedProperty(l,g),o=h.get(),x=function(_,T){var L=T.d2c,M=T.c2d;switch(_.func){case"count":return r;case"first":return u;case"last":return s;case"sum":return function(O,P){for(var S=0,E=0;E<P.length;E++){var R=L(O[P[E]]);R!==e&&(S+=R)}return M(S)};case"avg":return function(O,P){for(var S=0,E=0,R=0;R<P.length;R++){var B=L(O[P[R]]);B!==e&&(S+=B,E++)}return E?M(S/E):e};case"min":return function(O,P){for(var S=1/0,E=0;E<P.length;E++){var R=L(O[P[E]]);R!==e&&(S=Math.min(S,R))}return S===1/0?e:M(S)};case"max":return function(O,P){for(var S=-1/0,E=0;E<P.length;E++){var R=L(O[P[E]]);R!==e&&(S=Math.max(S,R))}return S===-1/0?e:M(S)};case"range":return function(O,P){for(var S=1/0,E=-1/0,R=0;R<P.length;R++){var B=L(O[P[R]]);B!==e&&(S=Math.min(S,B),E=Math.max(E,B))}return E===-1/0||S===1/0?e:M(E-S)};case"change":return function(O,P){var S=L(O[P[0]]),E=L(O[P[P.length-1]]);return S===e||E===e?e:M(E-S)};case"median":return function(O,P){for(var S=[],E=0;E<P.length;E++){var R=L(O[P[E]]);R!==e&&S.push(R)}if(!S.length)return e;S.sort(m.sorterAsc);var B=(S.length-1)/2;return M((S[Math.floor(B)]+S[Math.ceil(B)])/2)};case"mode":return function(O,P){for(var S={},E=0,R=e,B=0;B<P.length;B++){var H=L(O[P[B]]);if(H!==e){var V=S[H]=(S[H]||0)+1;V>E&&(E=V,R=H)}}return E?M(R):e};case"rms":return function(O,P){for(var S=0,E=0,R=0;R<P.length;R++){var B=L(O[P[R]]);B!==e&&(S+=B*B,E++)}return E?M(Math.sqrt(S/E)):e};case"stddev":return function(O,P){var S,E=0,R=0,B=1,H=e;for(S=0;S<P.length&&H===e;S++)H=L(O[P[S]]);if(H===e)return e;for(;S<P.length;S++){var V=L(O[P[S]]);if(V!==e){var Z=V-H;E+=Z,R+=Z*Z,B++}}var W="sample"===_.funcmode?B-1:B;return W?Math.sqrt((R-E*E/B)/W):0}}}(f,p.getDataConversions(i,l,g,o)),d=new Array(c.length),w=0;w<c.length;w++)d[w]=x(o,c[w]);h.set(d),"count"===f.func&&m.pushUnique(l._arrayAttrs,g)}}function r(i,l){return l.length}function u(i,l){return i[l[0]]}function s(i,l){return i[l[l.length-1]]}ee.supplyDefaults=function(i,l){var c,f={};function g(M,O){return m.coerce(i,f,n,M,O)}if(!g("enabled"))return f;var h=b.findArrayAttributes(l),o={};for(c=0;c<h.length;c++)o[h[c]]=1;var x=g("groups");if(!Array.isArray(x)){if(!o[x])return f.enabled=!1,f;o[x]=0}var d,w=i.aggregations||[],_=f.aggregations=new Array(w.length);function T(M,O){return m.coerce(w[c],d,t,M,O)}for(c=0;c<w.length;c++){d={_index:c};var k=T("target"),L=T("func");T("enabled")&&k&&(o[k]||"count"===L&&void 0===o[k])?("stddev"===L&&T("funcmode"),o[k]=0,_[c]=d):_[c]={enabled:!1,_index:c}}for(c=0;c<h.length;c++)o[h[c]]&&_.push({target:h[c],func:t.func.dflt,enabled:!0,_index:-1});return f},ee.calcTransform=function(i,l,c){if(c.enabled){var f=c.groups,g=m.getTargetArray(l,{target:f});if(g){var h,o,x,w={},_={},T=[],k=v(l.transforms,c),L=g.length;for(l._length&&(L=Math.min(L,l._length)),h=0;h<L;h++)void 0===(x=w[o=g[h]])?(w[o]=T.length,T.push([h]),_[w[o]]=k(h)):(T[x].push(h),_[w[o]]=(_[w[o]]||[]).concat(k(h)));c._indexToPoints=_;var M=c.aggregations;for(h=0;h<M.length;h++)a(i,l,T,M[h]);"string"==typeof f&&a(i,l,T,{target:f,func:"first",enabled:!0}),l._length=T.length}}}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1116}],1114:[function(y,$,ee){"use strict";var p=y("../lib"),m=y("../registry"),b=y("../plots/cartesian/axes"),v=y("./helpers").pointsAccessorFunction,e=y("../constants/filter_ops"),n=e.COMPARISON_OPS,t=e.INTERVAL_OPS,a=e.SET_OPS;ee.moduleType="transform",ee.name="filter",ee.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(n).concat(t).concat(a),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},ee.supplyDefaults=function(r){var u={};function s(c,f){return p.coerce(r,u,ee.attributes,c,f)}if(s("enabled")){var i=s("target");if(p.isArrayOrTypedArray(i)&&0===i.length)return u.enabled=!1,u;s("preservegaps"),s("operation"),s("value");var l=m.getComponentMethod("calendars","handleDefaults");l(r,u,"valuecalendar",null),l(r,u,"targetcalendar",null)}return u},ee.calcTransform=function(r,u,s){if(s.enabled){var i=p.getTargetArray(u,s);if(i){var l=s.target,c=i.length;u._length&&(c=Math.min(c,u._length));var f=s.targetcalendar,g=u._arrayAttrs,h=s.preservegaps;if("string"==typeof l){var o=p.nestedProperty(u,l+"calendar").get();o&&(f=o)}var x,d,w=function(P,S,E){var R=P.operation,B=P.value,H=Array.isArray(B);function V(X){return-1!==X.indexOf(R)}var Z,W=function(X){return S(X,0,P.valuecalendar)},G=function(X){return S(X,0,E)};switch(V(n)?Z=W(H?B[0]:B):V(t)?Z=H?[W(B[0]),W(B[1])]:[W(B),W(B)]:V(a)&&(Z=H?B.map(W):[W(B)]),R){case"=":return function(X){return G(X)===Z};case"!=":return function(X){return G(X)!==Z};case"<":return function(X){return G(X)<Z};case"<=":return function(X){return G(X)<=Z};case">":return function(X){return G(X)>Z};case">=":return function(X){return G(X)>=Z};case"[]":return function(X){var te=G(X);return te>=Z[0]&&te<=Z[1]};case"()":return function(X){var te=G(X);return te>Z[0]&&te<Z[1]};case"[)":return function(X){var te=G(X);return te>=Z[0]&&te<Z[1]};case"(]":return function(X){var te=G(X);return te>Z[0]&&te<=Z[1]};case"][":return function(X){var te=G(X);return te<=Z[0]||te>=Z[1]};case")(":return function(X){var te=G(X);return te<Z[0]||te>Z[1]};case"](":return function(X){var te=G(X);return te<=Z[0]||te>Z[1]};case")[":return function(X){var te=G(X);return te<Z[0]||te>=Z[1]};case"{}":return function(X){return-1!==Z.indexOf(G(X))};case"}{":return function(X){return-1===Z.indexOf(G(X))}}}(s,b.getDataToCoordFunc(r,u,l,i),f),_={},T={},k=0;h?(x=function(P){_[P.astr]=p.extendDeep([],P.get()),P.set(new Array(c))},d=function(P,S){var E=_[P.astr][S];P.get()[S]=E}):(x=function(P){_[P.astr]=p.extendDeep([],P.get()),P.set([])},d=function(P,S){var E=_[P.astr][S];P.get().push(E)}),O(x);for(var L=v(u.transforms,s),M=0;M<c;M++)w(i[M])?(O(d,M),T[k++]=L(M)):h&&k++;s._indexToPoints=T,u._length=k}}function O(P,S){for(var E=0;E<g.length;E++)P(p.nestedProperty(u,g[E]),S)}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1116}],1115:[function(y,$,ee){"use strict";var p=y("../lib"),m=y("../plot_api/plot_schema"),b=y("../plots/plots"),v=y("./helpers").pointsAccessorFunction;function e(n,t){var a,r,u,s,i,l,c,f,g,h,o=t.transform,x=t.transformIndex,d=n.transforms[x].groups,w=v(n.transforms,o);if(!p.isArrayOrTypedArray(d)||0===d.length)return[n];var _=p.filterUnique(d),T=new Array(_.length),k=d.length,L=m.findArrayAttributes(n),M=o.styles||[],O={};for(a=0;a<M.length;a++)O[M[a].target]=M[a].value;o.styles&&(h=p.keyedContainer(o,"styles","target","value.name"));var P={},S={};for(a=0;a<_.length;a++){P[l=_[a]]=a,S[l]=0,(c=T[a]=p.extendDeepNoArrays({},n))._group=l,c.transforms[x]._indexToPoints={};var E=null;for(h&&(E=h.get(l)),c.name=E||""===E?E:p.templateString(o.nameformat,{trace:n.name,group:l}),f=c.transforms,c.transforms=[],r=0;r<f.length;r++)c.transforms[r]=p.extendDeepNoArrays({},f[r]);for(r=0;r<L.length;r++)p.nestedProperty(c,L[r]).set([])}for(u=0;u<L.length;u++){for(s=L[u],r=0,g=[];r<_.length;r++)g[r]=p.nestedProperty(T[r],s).get();for(i=p.nestedProperty(n,s).get(),r=0;r<k;r++)g[P[d[r]]].push(i[r])}for(r=0;r<k;r++)(c=T[P[d[r]]]).transforms[x]._indexToPoints[S[d[r]]]=w(r),S[d[r]]++;for(a=0;a<_.length;a++)l=_[a],b.clearExpandedTraceDefaultColors(c=T[a]),c=p.extendDeepNoArrays(c,O[l]||{});return T}ee.moduleType="transform",ee.name="groupby",ee.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},ee.supplyDefaults=function(n,t,a){var r,u={};function s(g,h){return p.coerce(n,u,ee.attributes,g,h)}if(!s("enabled"))return u;s("groups"),s("nameformat",a._dataLength>1?"%{group} (%{trace})":"%{group}");var i=n.styles,l=u.styles=[];if(i)for(r=0;r<i.length;r++){var c=l[r]={};p.coerce(i[r],l[r],ee.attributes.styles,"target");var f=p.coerce(i[r],l[r],ee.attributes.styles,"value");p.isPlainObject(f)?c.value=p.extendDeep({},f):f&&delete c.value}return u},ee.transform=function(n,t){var a,r,u,s=[];for(r=0;r<n.length;r++)for(a=e(n[r],t),u=0;u<a.length;u++)s.push(a[u]);return s}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1116}],1116:[function(y,$,ee){"use strict";ee.pointsAccessorFunction=function(p,m){for(var b,v,e=0;e<p.length&&(b=p[e])!==m;e++)b._indexToPoints&&!1!==b.enabled&&(v=b._indexToPoints);return v?function(n){return v[n]}:function(n){return[n]}}},{}],1117:[function(y,$,ee){"use strict";var p=y("../lib"),m=y("../plots/cartesian/axes"),b=y("./helpers").pointsAccessorFunction,v=y("../constants/numerical").BADNUM;ee.moduleType="transform",ee.name="sort",ee.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},ee.supplyDefaults=function(e){var n={};function t(a,r){return p.coerce(e,n,ee.attributes,a,r)}return t("enabled")&&(t("target"),t("order")),n},ee.calcTransform=function(e,n,t){if(t.enabled){var a=p.getTargetArray(n,t);if(a){var r=t.target,u=a.length;n._length&&(u=Math.min(u,n._length));var s,i,l=n._arrayAttrs,c=function(d,w,_,T){var k,L=new Array(T),M=new Array(T);for(k=0;k<T;k++)L[k]={v:w[k],i:k};for(L.sort(function(O,P){switch(O.order){case"ascending":return function(S,E){var R=P(S.v),B=P(E.v);return R===v?1:B===v?-1:R-B};case"descending":return function(S,E){var R=P(S.v),B=P(E.v);return R===v?1:B===v?-1:B-R}}}(d,_)),k=0;k<T;k++)M[k]=L[k].i;return M}(t,a,m.getDataToCoordFunc(e,n,r,a),u),f=b(n.transforms,t),g={};for(s=0;s<l.length;s++){var h=p.nestedProperty(n,l[s]),o=h.get(),x=new Array(u);for(i=0;i<u;i++)x[i]=o[c[i]];h.set(x)}for(i=0;i<u;i++)g[i]=f(c[i]);t._indexToPoints=g,n._length=u}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1116}],1118:[function(y,$,ee){"use strict";ee.version="2.7.0"},{}],1119:[function(y,$,ee){(function(p){(function(){!function(m){"object"==typeof ee&&void 0!==$?$.exports=m():("undefined"!=typeof window?window:void 0!==p?p:"undefined"!=typeof self?self:this).stackgl=m()}(function(){return function m(b,v,e){function n(r,u){if(!v[r]){if(!b[r]){var s="function"==typeof y&&y;if(!u&&s)return s(r,!0);if(t)return t(r,!0);var i=new Error("Cannot find module '"+r+"'");throw i.code="MODULE_NOT_FOUND",i}var l=v[r]={exports:{}};b[r][0].call(l.exports,function(c){return n(b[r][1][c]||c)},l,l.exports,m,b,v,e)}return v[r].exports}for(var t="function"==typeof y&&y,a=0;a<e.length;a++)n(e[a]);return n}({1:[function(m,b,v){"use strict";v.byteLength=function(l){var c=s(l),g=c[1];return 3*(c[0]+g)/4-g},v.toByteArray=function(l){var c,f,k,g=s(l),h=g[0],o=g[1],x=new t(3*(h+(k=o))/4-k),d=0,w=o>0?h-4:h;for(f=0;f<w;f+=4)c=n[l.charCodeAt(f)]<<18|n[l.charCodeAt(f+1)]<<12|n[l.charCodeAt(f+2)]<<6|n[l.charCodeAt(f+3)],x[d++]=c>>16&255,x[d++]=c>>8&255,x[d++]=255&c;return 2===o&&(c=n[l.charCodeAt(f)]<<2|n[l.charCodeAt(f+1)]>>4,x[d++]=255&c),1===o&&(c=n[l.charCodeAt(f)]<<10|n[l.charCodeAt(f+1)]<<4|n[l.charCodeAt(f+2)]>>2,x[d++]=c>>8&255,x[d++]=255&c),x},v.fromByteArray=function(l){for(var c,f=l.length,g=f%3,h=[],o=0,x=f-g;o<x;o+=16383)h.push(i(l,o,o+16383>x?x:o+16383));return 1===g?h.push(e[(c=l[f-1])>>2]+e[c<<4&63]+"=="):2===g&&h.push(e[(c=(l[f-2]<<8)+l[f-1])>>10]+e[c>>4&63]+e[c<<2&63]+"="),h.join("")};for(var e=[],n=[],t="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,u=a.length;r<u;++r)e[r]=a[r],n[a.charCodeAt(r)]=r;function s(l){var c=l.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=l.indexOf("=");return-1===f&&(f=c),[f,f===c?0:4-f%4]}function i(l,c,f){for(var h,o=[],x=c;x<f;x+=3)o.push(e[(h=(l[x]<<16&16711680)+(l[x+1]<<8&65280)+(255&l[x+2]))>>18&63]+e[h>>12&63]+e[h>>6&63]+e[63&h]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],2:[function(m,b,v){},{}],3:[function(m,b,v){(function(e){(function(){"use strict";var n=m("base64-js"),t=m("ieee754");function a(j){if(j>2147483647)throw new RangeError('The value "'+j+'" is invalid for option "size"');var J=new Uint8Array(j);return J.__proto__=r.prototype,J}function r(j,J,K){if("number"==typeof j){if("string"==typeof J)throw new TypeError('The "string" argument must be of type string. Received type number');return i(j)}return u(j,J,K)}function u(j,J,K){if("string"==typeof j)return function(se,oe){if("string"==typeof oe&&""!==oe||(oe="utf8"),!r.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);var pe=0|f(se,oe),ce=a(pe),ge=ce.write(se,oe);return ge!==pe&&(ce=ce.slice(0,ge)),ce}(j,J);if(ArrayBuffer.isView(j))return l(j);if(null==j)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(U(j,ArrayBuffer)||j&&U(j.buffer,ArrayBuffer))return function(se,oe,pe){if(oe<0||se.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<oe+(pe||0))throw new RangeError('"length" is outside of buffer bounds');var ce;return(ce=void 0===oe&&void 0===pe?new Uint8Array(se):void 0===pe?new Uint8Array(se,oe):new Uint8Array(se,oe,pe)).__proto__=r.prototype,ce}(j,J,K);if("number"==typeof j)throw new TypeError('The "value" argument must not be of type number. Received type number');var re=j.valueOf&&j.valueOf();if(null!=re&&re!==j)return r.from(re,J,K);var ne=function(se){if(r.isBuffer(se)){var oe=0|c(se.length),pe=a(oe);return 0===pe.length||se.copy(pe,0,0,oe),pe}return void 0!==se.length?"number"!=typeof se.length||Q(se.length)?a(0):l(se):"Buffer"===se.type&&Array.isArray(se.data)?l(se.data):void 0}(j);if(ne)return ne;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof j[Symbol.toPrimitive])return r.from(j[Symbol.toPrimitive]("string"),J,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}function s(j){if("number"!=typeof j)throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function i(j){return s(j),a(j<0?0:0|c(j))}function l(j){for(var J=j.length<0?0:0|c(j.length),K=a(J),re=0;re<J;re+=1)K[re]=255&j[re];return K}function c(j){if(j>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|j}function f(j,J){if(r.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||U(j,ArrayBuffer))return j.byteLength;if("string"!=typeof j)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var K=j.length,re=arguments.length>2&&!0===arguments[2];if(!re&&0===K)return 0;for(var ne=!1;;)switch(J){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return te(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*K;case"hex":return K>>>1;case"base64":return D(j).length;default:if(ne)return re?-1:te(j).length;J=(""+J).toLowerCase(),ne=!0}}function g(j,J,K){var re=!1;if((void 0===J||J<0)&&(J=0),J>this.length||((void 0===K||K>this.length)&&(K=this.length),K<=0)||(K>>>=0)<=(J>>>=0))return"";for(j||(j="utf8");;)switch(j){case"hex":return E(this,J,K);case"utf8":case"utf-8":return O(this,J,K);case"ascii":return P(this,J,K);case"latin1":case"binary":return S(this,J,K);case"base64":return M(this,J,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,J,K);default:if(re)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),re=!0}}function h(j,J,K){var re=j[J];j[J]=j[K],j[K]=re}function o(j,J,K,re,ne){if(0===j.length)return-1;if("string"==typeof K?(re=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),Q(K=+K)&&(K=ne?0:j.length-1),K<0&&(K=j.length+K),K>=j.length){if(ne)return-1;K=j.length-1}else if(K<0){if(!ne)return-1;K=0}if("string"==typeof J&&(J=r.from(J,re)),r.isBuffer(J))return 0===J.length?-1:x(j,J,K,re,ne);if("number"==typeof J)return J&=255,"function"==typeof Uint8Array.prototype.indexOf?ne?Uint8Array.prototype.indexOf.call(j,J,K):Uint8Array.prototype.lastIndexOf.call(j,J,K):x(j,[J],K,re,ne);throw new TypeError("val must be string, number or Buffer")}function x(j,J,K,re,ne){var se,oe=1,pe=j.length,ce=J.length;if(void 0!==re&&("ucs2"===(re=String(re).toLowerCase())||"ucs-2"===re||"utf16le"===re||"utf-16le"===re)){if(j.length<2||J.length<2)return-1;oe=2,pe/=2,ce/=2,K/=2}function ge(Se,fe){return 1===oe?Se[fe]:Se.readUInt16BE(fe*oe)}if(ne){var xe=-1;for(se=K;se<pe;se++)if(ge(j,se)===ge(J,-1===xe?0:se-xe)){if(-1===xe&&(xe=se),se-xe+1===ce)return xe*oe}else-1!==xe&&(se-=se-xe),xe=-1}else for(K+ce>pe&&(K=pe-ce),se=K;se>=0;se--){for(var we=!0,be=0;be<ce;be++)if(ge(j,se+be)!==ge(J,be)){we=!1;break}if(we)return se}return-1}function d(j,J,K,re){K=Number(K)||0;var ne=j.length-K;re?(re=Number(re))>ne&&(re=ne):re=ne;var se=J.length;re>se/2&&(re=se/2);for(var oe=0;oe<re;++oe){var pe=parseInt(J.substr(2*oe,2),16);if(Q(pe))return oe;j[K+oe]=pe}return oe}function w(j,J,K,re){return N(te(J,j.length-K),j,K,re)}function _(j,J,K,re){return N(function(ne){for(var se=[],oe=0;oe<ne.length;++oe)se.push(255&ne.charCodeAt(oe));return se}(J),j,K,re)}function T(j,J,K,re){return _(j,J,K,re)}function k(j,J,K,re){return N(D(J),j,K,re)}function L(j,J,K,re){return N(function(ne,se){for(var oe,pe,ge=[],xe=0;xe<ne.length&&!((se-=2)<0);++xe)pe=(oe=ne.charCodeAt(xe))>>8,ge.push(oe%256),ge.push(pe);return ge}(J,j.length-K),j,K,re)}function M(j,J,K){return n.fromByteArray(0===J&&K===j.length?j:j.slice(J,K))}function O(j,J,K){K=Math.min(j.length,K);for(var re=[],ne=J;ne<K;){var se,oe,pe,ce,ge=j[ne],xe=null,we=ge>239?4:ge>223?3:ge>191?2:1;if(ne+we<=K)switch(we){case 1:ge<128&&(xe=ge);break;case 2:128==(192&(se=j[ne+1]))&&(ce=(31&ge)<<6|63&se)>127&&(xe=ce);break;case 3:oe=j[ne+2],128==(192&(se=j[ne+1]))&&128==(192&oe)&&(ce=(15&ge)<<12|(63&se)<<6|63&oe)>2047&&(ce<55296||ce>57343)&&(xe=ce);break;case 4:oe=j[ne+2],pe=j[ne+3],128==(192&(se=j[ne+1]))&&128==(192&oe)&&128==(192&pe)&&(ce=(15&ge)<<18|(63&se)<<12|(63&oe)<<6|63&pe)>65535&&ce<1114112&&(xe=ce)}null===xe?(xe=65533,we=1):xe>65535&&(re.push((xe-=65536)>>>10&1023|55296),xe=56320|1023&xe),re.push(xe),ne+=we}return function(be){var Se=be.length;if(Se<=4096)return String.fromCharCode.apply(String,be);for(var fe="",me=0;me<Se;)fe+=String.fromCharCode.apply(String,be.slice(me,me+=4096));return fe}(re)}function P(j,J,K){var re="";K=Math.min(j.length,K);for(var ne=J;ne<K;++ne)re+=String.fromCharCode(127&j[ne]);return re}function S(j,J,K){var re="";K=Math.min(j.length,K);for(var ne=J;ne<K;++ne)re+=String.fromCharCode(j[ne]);return re}function E(j,J,K){var re=j.length;(!J||J<0)&&(J=0),(!K||K<0||K>re)&&(K=re);for(var ne="",se=J;se<K;++se)ne+=X(j[se]);return ne}function R(j,J,K){for(var re=j.slice(J,K),ne="",se=0;se<re.length;se+=2)ne+=String.fromCharCode(re[se]+256*re[se+1]);return ne}function B(j,J,K){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(j+J>K)throw new RangeError("Trying to access beyond buffer length")}function H(j,J,K,re,ne,se){if(!r.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(J>ne||J<se)throw new RangeError('"value" argument is out of bounds');if(K+re>j.length)throw new RangeError("Index out of range")}function V(j,J,K,re,ne,se){if(K+re>j.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function Z(j,J,K,re,ne){return J=+J,K>>>=0,ne||V(j,0,K,4),t.write(j,J,K,re,23,4),K+4}function W(j,J,K,re,ne){return J=+J,K>>>=0,ne||V(j,0,K,8),t.write(j,J,K,re,52,8),K+8}v.Buffer=r,v.SlowBuffer=function(j){return+j!=j&&(j=0),r.alloc(+j)},v.INSPECT_MAX_BYTES=50,v.kMaxLength=2147483647,(r.TYPED_ARRAY_SUPPORT=function(){try{var j=new Uint8Array(1);return j.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===j.foo()}catch(J){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192,r.from=function(j,J,K){return u(j,J,K)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,r.alloc=function(j,J,K){return ne=J,se=K,s(re=j),re<=0?a(re):void 0!==ne?"string"==typeof se?a(re).fill(ne,se):a(re).fill(ne):a(re);var re,ne,se},r.allocUnsafe=function(j){return i(j)},r.allocUnsafeSlow=function(j){return i(j)},r.isBuffer=function(j){return null!=j&&!0===j._isBuffer&&j!==r.prototype},r.compare=function(j,J){if(U(j,Uint8Array)&&(j=r.from(j,j.offset,j.byteLength)),U(J,Uint8Array)&&(J=r.from(J,J.offset,J.byteLength)),!r.isBuffer(j)||!r.isBuffer(J))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===J)return 0;for(var K=j.length,re=J.length,ne=0,se=Math.min(K,re);ne<se;++ne)if(j[ne]!==J[ne]){K=j[ne],re=J[ne];break}return K<re?-1:re<K?1:0},r.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(j,J){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(0===j.length)return r.alloc(0);var K;if(void 0===J)for(J=0,K=0;K<j.length;++K)J+=j[K].length;var re=r.allocUnsafe(J),ne=0;for(K=0;K<j.length;++K){var se=j[K];if(U(se,Uint8Array)&&(se=r.from(se)),!r.isBuffer(se))throw new TypeError('"list" argument must be an Array of Buffers');se.copy(re,ne),ne+=se.length}return re},r.byteLength=f,r.prototype._isBuffer=!0,r.prototype.swap16=function(){var j=this.length;if(j%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var J=0;J<j;J+=2)h(this,J,J+1);return this},r.prototype.swap32=function(){var j=this.length;if(j%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var J=0;J<j;J+=4)h(this,J,J+3),h(this,J+1,J+2);return this},r.prototype.swap64=function(){var j=this.length;if(j%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var J=0;J<j;J+=8)h(this,J,J+7),h(this,J+1,J+6),h(this,J+2,J+5),h(this,J+3,J+4);return this},r.prototype.toLocaleString=r.prototype.toString=function(){var j=this.length;return 0===j?"":0===arguments.length?O(this,0,j):g.apply(this,arguments)},r.prototype.equals=function(j){if(!r.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j||0===r.compare(this,j)},r.prototype.inspect=function(){var j="",J=v.INSPECT_MAX_BYTES;return j=this.toString("hex",0,J).replace(/(.{2})/g,"$1 ").trim(),this.length>J&&(j+=" ... "),"<Buffer "+j+">"},r.prototype.compare=function(j,J,K,re,ne){if(U(j,Uint8Array)&&(j=r.from(j,j.offset,j.byteLength)),!r.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(void 0===J&&(J=0),void 0===K&&(K=j?j.length:0),void 0===re&&(re=0),void 0===ne&&(ne=this.length),J<0||K>j.length||re<0||ne>this.length)throw new RangeError("out of range index");if(re>=ne&&J>=K)return 0;if(re>=ne)return-1;if(J>=K)return 1;if(this===j)return 0;for(var se=(ne>>>=0)-(re>>>=0),oe=(K>>>=0)-(J>>>=0),pe=Math.min(se,oe),ce=this.slice(re,ne),ge=j.slice(J,K),xe=0;xe<pe;++xe)if(ce[xe]!==ge[xe]){se=ce[xe],oe=ge[xe];break}return se<oe?-1:oe<se?1:0},r.prototype.includes=function(j,J,K){return-1!==this.indexOf(j,J,K)},r.prototype.indexOf=function(j,J,K){return o(this,j,J,K,!0)},r.prototype.lastIndexOf=function(j,J,K){return o(this,j,J,K,!1)},r.prototype.write=function(j,J,K,re){if(void 0===J)re="utf8",K=this.length,J=0;else if(void 0===K&&"string"==typeof J)re=J,K=this.length,J=0;else{if(!isFinite(J))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");J>>>=0,isFinite(K)?(K>>>=0,void 0===re&&(re="utf8")):(re=K,K=void 0)}var ne=this.length-J;if((void 0===K||K>ne)&&(K=ne),j.length>0&&(K<0||J<0)||J>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");for(var se=!1;;)switch(re){case"hex":return d(this,j,J,K);case"utf8":case"utf-8":return w(this,j,J,K);case"ascii":return _(this,j,J,K);case"latin1":case"binary":return T(this,j,J,K);case"base64":return k(this,j,J,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,j,J,K);default:if(se)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),se=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(j,J){var K=this.length;(j=~~j)<0?(j+=K)<0&&(j=0):j>K&&(j=K),(J=void 0===J?K:~~J)<0?(J+=K)<0&&(J=0):J>K&&(J=K),J<j&&(J=j);var re=this.subarray(j,J);return re.__proto__=r.prototype,re},r.prototype.readUIntLE=function(j,J,K){j>>>=0,J>>>=0,K||B(j,J,this.length);for(var re=this[j],ne=1,se=0;++se<J&&(ne*=256);)re+=this[j+se]*ne;return re},r.prototype.readUIntBE=function(j,J,K){j>>>=0,J>>>=0,K||B(j,J,this.length);for(var re=this[j+--J],ne=1;J>0&&(ne*=256);)re+=this[j+--J]*ne;return re},r.prototype.readUInt8=function(j,J){return j>>>=0,J||B(j,1,this.length),this[j]},r.prototype.readUInt16LE=function(j,J){return j>>>=0,J||B(j,2,this.length),this[j]|this[j+1]<<8},r.prototype.readUInt16BE=function(j,J){return j>>>=0,J||B(j,2,this.length),this[j]<<8|this[j+1]},r.prototype.readUInt32LE=function(j,J){return j>>>=0,J||B(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+16777216*this[j+3]},r.prototype.readUInt32BE=function(j,J){return j>>>=0,J||B(j,4,this.length),16777216*this[j]+(this[j+1]<<16|this[j+2]<<8|this[j+3])},r.prototype.readIntLE=function(j,J,K){j>>>=0,J>>>=0,K||B(j,J,this.length);for(var re=this[j],ne=1,se=0;++se<J&&(ne*=256);)re+=this[j+se]*ne;return re>=(ne*=128)&&(re-=Math.pow(2,8*J)),re},r.prototype.readIntBE=function(j,J,K){j>>>=0,J>>>=0,K||B(j,J,this.length);for(var re=J,ne=1,se=this[j+--re];re>0&&(ne*=256);)se+=this[j+--re]*ne;return se>=(ne*=128)&&(se-=Math.pow(2,8*J)),se},r.prototype.readInt8=function(j,J){return j>>>=0,J||B(j,1,this.length),128&this[j]?-1*(255-this[j]+1):this[j]},r.prototype.readInt16LE=function(j,J){j>>>=0,J||B(j,2,this.length);var K=this[j]|this[j+1]<<8;return 32768&K?4294901760|K:K},r.prototype.readInt16BE=function(j,J){j>>>=0,J||B(j,2,this.length);var K=this[j+1]|this[j]<<8;return 32768&K?4294901760|K:K},r.prototype.readInt32LE=function(j,J){return j>>>=0,J||B(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},r.prototype.readInt32BE=function(j,J){return j>>>=0,J||B(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},r.prototype.readFloatLE=function(j,J){return j>>>=0,J||B(j,4,this.length),t.read(this,j,!0,23,4)},r.prototype.readFloatBE=function(j,J){return j>>>=0,J||B(j,4,this.length),t.read(this,j,!1,23,4)},r.prototype.readDoubleLE=function(j,J){return j>>>=0,J||B(j,8,this.length),t.read(this,j,!0,52,8)},r.prototype.readDoubleBE=function(j,J){return j>>>=0,J||B(j,8,this.length),t.read(this,j,!1,52,8)},r.prototype.writeUIntLE=function(j,J,K,re){j=+j,J>>>=0,K>>>=0,re||H(this,j,J,K,Math.pow(2,8*K)-1,0);var ne=1,se=0;for(this[J]=255&j;++se<K&&(ne*=256);)this[J+se]=j/ne&255;return J+K},r.prototype.writeUIntBE=function(j,J,K,re){j=+j,J>>>=0,K>>>=0,re||H(this,j,J,K,Math.pow(2,8*K)-1,0);var ne=K-1,se=1;for(this[J+ne]=255&j;--ne>=0&&(se*=256);)this[J+ne]=j/se&255;return J+K},r.prototype.writeUInt8=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,1,255,0),this[J]=255&j,J+1},r.prototype.writeUInt16LE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,2,65535,0),this[J]=255&j,this[J+1]=j>>>8,J+2},r.prototype.writeUInt16BE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,2,65535,0),this[J]=j>>>8,this[J+1]=255&j,J+2},r.prototype.writeUInt32LE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,4,4294967295,0),this[J+3]=j>>>24,this[J+2]=j>>>16,this[J+1]=j>>>8,this[J]=255&j,J+4},r.prototype.writeUInt32BE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,4,4294967295,0),this[J]=j>>>24,this[J+1]=j>>>16,this[J+2]=j>>>8,this[J+3]=255&j,J+4},r.prototype.writeIntLE=function(j,J,K,re){if(j=+j,J>>>=0,!re){var ne=Math.pow(2,8*K-1);H(this,j,J,K,ne-1,-ne)}var se=0,oe=1,pe=0;for(this[J]=255&j;++se<K&&(oe*=256);)j<0&&0===pe&&0!==this[J+se-1]&&(pe=1),this[J+se]=(j/oe>>0)-pe&255;return J+K},r.prototype.writeIntBE=function(j,J,K,re){if(j=+j,J>>>=0,!re){var ne=Math.pow(2,8*K-1);H(this,j,J,K,ne-1,-ne)}var se=K-1,oe=1,pe=0;for(this[J+se]=255&j;--se>=0&&(oe*=256);)j<0&&0===pe&&0!==this[J+se+1]&&(pe=1),this[J+se]=(j/oe>>0)-pe&255;return J+K},r.prototype.writeInt8=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,1,127,-128),j<0&&(j=255+j+1),this[J]=255&j,J+1},r.prototype.writeInt16LE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,2,32767,-32768),this[J]=255&j,this[J+1]=j>>>8,J+2},r.prototype.writeInt16BE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,2,32767,-32768),this[J]=j>>>8,this[J+1]=255&j,J+2},r.prototype.writeInt32LE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,4,2147483647,-2147483648),this[J]=255&j,this[J+1]=j>>>8,this[J+2]=j>>>16,this[J+3]=j>>>24,J+4},r.prototype.writeInt32BE=function(j,J,K){return j=+j,J>>>=0,K||H(this,j,J,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[J]=j>>>24,this[J+1]=j>>>16,this[J+2]=j>>>8,this[J+3]=255&j,J+4},r.prototype.writeFloatLE=function(j,J,K){return Z(this,j,J,!0,K)},r.prototype.writeFloatBE=function(j,J,K){return Z(this,j,J,!1,K)},r.prototype.writeDoubleLE=function(j,J,K){return W(this,j,J,!0,K)},r.prototype.writeDoubleBE=function(j,J,K){return W(this,j,J,!1,K)},r.prototype.copy=function(j,J,K,re){if(!r.isBuffer(j))throw new TypeError("argument should be a Buffer");if(K||(K=0),re||0===re||(re=this.length),J>=j.length&&(J=j.length),J||(J=0),re>0&&re<K&&(re=K),re===K||0===j.length||0===this.length)return 0;if(J<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),j.length-J<re-K&&(re=j.length-J+K);var ne=re-K;if(this===j&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(J,K,re);else if(this===j&&K<J&&J<re)for(var se=ne-1;se>=0;--se)j[se+J]=this[se+K];else Uint8Array.prototype.set.call(j,this.subarray(K,re),J);return ne},r.prototype.fill=function(j,J,K,re){if("string"==typeof j){if("string"==typeof J?(re=J,J=0,K=this.length):"string"==typeof K&&(re=K,K=this.length),void 0!==re&&"string"!=typeof re)throw new TypeError("encoding must be a string");if("string"==typeof re&&!r.isEncoding(re))throw new TypeError("Unknown encoding: "+re);if(1===j.length){var ne=j.charCodeAt(0);("utf8"===re&&ne<128||"latin1"===re)&&(j=ne)}}else"number"==typeof j&&(j&=255);if(J<0||this.length<J||this.length<K)throw new RangeError("Out of range index");if(K<=J)return this;var se;if(J>>>=0,K=void 0===K?this.length:K>>>0,j||(j=0),"number"==typeof j)for(se=J;se<K;++se)this[se]=j;else{var oe=r.isBuffer(j)?j:r.from(j,re),pe=oe.length;if(0===pe)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(se=0;se<K-J;++se)this[se+J]=oe[se%pe]}return this};var G=/[^+/0-9A-Za-z-_]/g;function X(j){return j<16?"0"+j.toString(16):j.toString(16)}function te(j,J){var K;J=J||1/0;for(var re=j.length,ne=null,se=[],oe=0;oe<re;++oe){if((K=j.charCodeAt(oe))>55295&&K<57344){if(!ne){if(K>56319){(J-=3)>-1&&se.push(239,191,189);continue}if(oe+1===re){(J-=3)>-1&&se.push(239,191,189);continue}ne=K;continue}if(K<56320){(J-=3)>-1&&se.push(239,191,189),ne=K;continue}K=65536+(ne-55296<<10|K-56320)}else ne&&(J-=3)>-1&&se.push(239,191,189);if(ne=null,K<128){if((J-=1)<0)break;se.push(K)}else if(K<2048){if((J-=2)<0)break;se.push(K>>6|192,63&K|128)}else if(K<65536){if((J-=3)<0)break;se.push(K>>12|224,K>>6&63|128,63&K|128)}else{if(!(K<1114112))throw new Error("Invalid code point");if((J-=4)<0)break;se.push(K>>18|240,K>>12&63|128,K>>6&63|128,63&K|128)}}return se}function D(j){return n.toByteArray(function(J){if((J=(J=J.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;J.length%4!=0;)J+="=";return J}(j))}function N(j,J,K,re){for(var ne=0;ne<re&&!(ne+K>=J.length||ne>=j.length);++ne)J[ne+K]=j[ne];return ne}function U(j,J){return j instanceof J||null!=j&&null!=j.constructor&&null!=j.constructor.name&&j.constructor.name===J.name}function Q(j){return j!=j}}).call(this)}).call(this,m("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(m,b,v){v.read=function(e,n,t,a,r){var u,s,i=8*r-a-1,l=(1<<i)-1,c=l>>1,f=-7,g=t?r-1:0,h=t?-1:1,o=e[n+g];for(g+=h,u=o&(1<<-f)-1,o>>=-f,f+=i;f>0;u=256*u+e[n+g],g+=h,f-=8);for(s=u&(1<<-f)-1,u>>=-f,f+=a;f>0;s=256*s+e[n+g],g+=h,f-=8);if(0===u)u=1-c;else{if(u===l)return s?NaN:1/0*(o?-1:1);s+=Math.pow(2,a),u-=c}return(o?-1:1)*s*Math.pow(2,u-a)},v.write=function(e,n,t,a,r,u){var s,i,l,c=8*u-r-1,f=(1<<c)-1,g=f>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,o=a?0:u-1,x=a?1:-1,d=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(i=isNaN(n)?1:0,s=f):(s=Math.floor(Math.log(n)/Math.LN2),n*(l=Math.pow(2,-s))<1&&(s--,l*=2),(n+=s+g>=1?h/l:h*Math.pow(2,1-g))*l>=2&&(s++,l/=2),s+g>=f?(i=0,s=f):s+g>=1?(i=(n*l-1)*Math.pow(2,r),s+=g):(i=n*Math.pow(2,g-1)*Math.pow(2,r),s=0));r>=8;e[t+o]=255&i,o+=x,i/=256,r-=8);for(s=s<<r|i,c+=r;c>0;e[t+o]=255&s,o+=x,s/=256,c-=8);e[t+o-x]|=128*d}},{}],5:[function(m,b,v){var e,n,t=b.exports={};function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function u(x){if(e===setTimeout)return setTimeout(x,0);if((e===a||!e)&&setTimeout)return e=setTimeout,setTimeout(x,0);try{return e(x,0)}catch(d){try{return e.call(null,x,0)}catch(w){return e.call(this,x,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:a}catch(x){e=a}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(x){n=r}}();var s,i=[],l=!1,c=-1;function f(){l&&s&&(l=!1,s.length?i=s.concat(i):c=-1,i.length&&g())}function g(){if(!l){var x=u(f);l=!0;for(var d=i.length;d;){for(s=i,i=[];++c<d;)s&&s[c].run();c=-1,d=i.length}s=null,l=!1,function(w){if(n===clearTimeout)return clearTimeout(w);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(w);try{n(w)}catch(_){try{return n.call(null,w)}catch(T){return n.call(this,w)}}}(x)}}function h(x,d){this.fun=x,this.array=d}function o(){}t.nextTick=function(x){var d=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)d[w-1]=arguments[w];i.push(new h(x,d)),1!==i.length||l||u(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=o,t.addListener=o,t.once=o,t.off=o,t.removeListener=o,t.removeAllListeners=o,t.emit=o,t.prependListener=o,t.prependOnceListener=o,t.listeners=function(x){return[]},t.binding=function(x){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(x){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(m,b,v){b.exports={alpha_shape:m("alpha-shape"),convex_hull:m("convex-hull"),delaunay_triangulate:m("delaunay-triangulate"),gl_cone3d:m("gl-cone3d"),gl_error3d:m("gl-error3d"),gl_heatmap2d:m("gl-heatmap2d"),gl_line3d:m("gl-line3d"),gl_mesh3d:m("gl-mesh3d"),gl_plot2d:m("gl-plot2d"),gl_plot3d:m("gl-plot3d"),gl_pointcloud2d:m("gl-pointcloud2d"),gl_scatter3d:m("gl-scatter3d"),gl_select_box:m("gl-select-box"),gl_spikes2d:m("gl-spikes2d"),gl_streamtube3d:m("gl-streamtube3d"),gl_surface3d:m("gl-surface3d"),ndarray:m("ndarray"),ndarray_linear_interpolate:m("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(m,b,v){"use strict";b.exports=function(u){var s=(u=u||{}).eye||[0,0,1],i=u.center||[0,0,0],l=u.up||[0,1,0],c=u.distanceLimits||[0,1/0],f=u.mode||"turntable",g=e(),h=n(),o=t();return g.setDistanceLimits(c[0],c[1]),g.lookAt(0,s,i,l),h.setDistanceLimits(c[0],c[1]),h.lookAt(0,s,i,l),o.setDistanceLimits(c[0],c[1]),o.lookAt(0,s,i,l),new a({turntable:g,orbit:h,matrix:o},f)};var e=m("turntable-camera-controller"),n=m("orbit-camera-controller"),t=m("matrix-camera-controller");function a(u,s){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(i){return u[i]}),this._mode=s,this._active=u[s],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var r=a.prototype;r.flush=function(u){for(var s=this._controllerList,i=0;i<s.length;++i)s[i].flush(u)},r.idle=function(u){for(var s=this._controllerList,i=0;i<s.length;++i)s[i].idle(u)},r.lookAt=function(u,s,i,l){for(var c=this._controllerList,f=0;f<c.length;++f)c[f].lookAt(u,s,i,l)},r.rotate=function(u,s,i,l){for(var c=this._controllerList,f=0;f<c.length;++f)c[f].rotate(u,s,i,l)},r.pan=function(u,s,i,l){for(var c=this._controllerList,f=0;f<c.length;++f)c[f].pan(u,s,i,l)},r.translate=function(u,s,i,l){for(var c=this._controllerList,f=0;f<c.length;++f)c[f].translate(u,s,i,l)},r.setMatrix=function(u,s){for(var i=this._controllerList,l=0;l<i.length;++l)i[l].setMatrix(u,s)},r.setDistanceLimits=function(u,s){for(var i=this._controllerList,l=0;l<i.length;++l)i[l].setDistanceLimits(u,s)},r.setDistance=function(u,s){for(var i=this._controllerList,l=0;l<i.length;++l)i[l].setDistance(u,s)},r.recalcMatrix=function(u){this._active.recalcMatrix(u)},r.getDistance=function(u){return this._active.getDistance(u)},r.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},r.lastT=function(){return this._active.lastT()},r.setMode=function(u){if(u!==this._mode){var s=this._controllerNames.indexOf(u);if(!(s<0)){var i=this._active,l=this._controllerList[s],c=Math.max(i.lastT(),l.lastT());i.recalcMatrix(c),l.setMatrix(c,i.computedMatrix),this._active=l,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},r.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(m,b,v){"use strict";var e="undefined"==typeof WeakMap?m("weak-map"):WeakMap,n=m("gl-buffer"),t=m("gl-vao"),a=new e;b.exports=function(r){var u=a.get(r),s=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!s||!r.isBuffer(s)){var i=n(r,new Float32Array([-1,-1,-1,4,4,-1]));(u=t(r,[{buffer:i,type:r.FLOAT,size:2}]))._triangleBuffer=i,a.set(r,u)}u.bind(),r.drawArrays(r.TRIANGLES,0,3),u.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(m,b,v){var e=m("pad-left");b.exports=function(n,t,a){t="number"==typeof t?t:1,a=a||": ";var r=n.split(/\r?\n/),u=String(r.length+t-1).length;return r.map(function(s,i){var l=i+t,c=String(l).length;return e(l,u-c)+a+s}).join("\n")}},{"pad-left":264}],10:[function(m,b,v){"use strict";b.exports=function(t){var a=t.length;if(0===a)return[];if(1===a)return[0];for(var r=t[0].length,u=[t[0]],s=[0],i=1;i<a;++i)if(u.push(t[i]),n(u,r)){if(s.push(i),s.length===r+1)return s}else u.pop();return s};var e=m("robust-orientation");function n(t,a){for(var r=new Array(a+1),u=0;u<t.length;++u)r[u]=t[u];for(u=0;u<=t.length;++u){for(var s=t.length;s<=a;++s){for(var i=new Array(a),l=0;l<a;++l)i[l]=Math.pow(s+1-u,l);r[s]=i}if(e.apply(void 0,r))return!0}return!1}},{"robust-orientation":284}],11:[function(m,b,v){"use strict";b.exports=function(t,a){return e(a).filter(function(r){for(var u=new Array(r.length),s=0;s<r.length;++s)u[s]=a[r[s]];return n(u)*t<1})};var e=m("delaunay-triangulate"),n=m("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(m,b,v){b.exports=function(t,a){return n(e(t,a))};var e=m("alpha-complex"),n=m("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(m,b,v){b.exports=function(e){return atob(e)}},{}],14:[function(m,b,v){"use strict";b.exports=function(t,a){for(var r=a.length,u=new Array(r+1),s=0;s<r;++s){for(var i=new Array(r+1),l=0;l<=r;++l)i[l]=t[l][s];u[s]=i}for(u[r]=new Array(r+1),s=0;s<=r;++s)u[r][s]=1;var c=new Array(r+1);for(s=0;s<r;++s)c[s]=a[s];c[r]=1;var f=e(u,c),g=n(f[r+1]);0===g&&(g=1);var h=new Array(r+1);for(s=0;s<=r;++s)h[s]=n(f[s])/g;return h};var e=m("robust-linear-solve");function n(t){for(var a=0,r=0;r<t.length;++r)a+=t[r];return a}},{"robust-linear-solve":283}],15:[function(m,b,v){"use strict";var e=m("./lib/rationalize");b.exports=function(n,t){return e(n[0].mul(t[1]).add(t[0].mul(n[1])),n[1].mul(t[1]))}},{"./lib/rationalize":25}],16:[function(m,b,v){"use strict";b.exports=function(e,n){return e[0].mul(n[1]).cmp(n[0].mul(e[1]))}},{}],17:[function(m,b,v){"use strict";var e=m("./lib/rationalize");b.exports=function(n,t){return e(n[0].mul(t[1]),n[1].mul(t[0]))}},{"./lib/rationalize":25}],18:[function(m,b,v){"use strict";var e=m("./is-rat"),n=m("./lib/is-bn"),t=m("./lib/num-to-bn"),a=m("./lib/str-to-bn"),r=m("./lib/rationalize"),u=m("./div");b.exports=function s(i,l){if(e(i))return l?u(i,s(l)):[i[0].clone(),i[1].clone()];var c,f,g=0;if(n(i))c=i.clone();else if("string"==typeof i)c=a(i);else{if(0===i)return[t(0),t(1)];if(i===Math.floor(i))c=t(i);else{for(;i!==Math.floor(i);)i*=Math.pow(2,256),g-=256;c=t(i)}}if(e(l))c.mul(l[1]),f=l[0].clone();else if(n(l))f=l.clone();else if("string"==typeof l)f=a(l);else if(l)if(l===Math.floor(l))f=t(l);else{for(;l!==Math.floor(l);)l*=Math.pow(2,256),g+=256;f=t(l)}else f=t(1);return g>0?c=c.ushln(g):g<0&&(f=f.ushln(-g)),r(c,f)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(m,b,v){"use strict";var e=m("./lib/is-bn");b.exports=function(n){return Array.isArray(n)&&2===n.length&&e(n[0])&&e(n[1])}},{"./lib/is-bn":23}],20:[function(m,b,v){"use strict";var e=m("bn.js");b.exports=function(n){return n.cmp(new e(0))}},{"bn.js":33}],21:[function(m,b,v){"use strict";var e=m("./bn-sign");b.exports=function(n){var t=n.length,a=n.words,r=0;if(1===t)r=a[0];else if(2===t)r=a[0]+67108864*a[1];else for(var u=0;u<t;u++)r+=a[u]*Math.pow(67108864,u);return e(n)*r}},{"./bn-sign":20}],22:[function(m,b,v){"use strict";var e=m("double-bits"),n=m("bit-twiddle").countTrailingZeros;b.exports=function(t){var a=n(e.lo(t));if(a<32)return a;var r=n(e.hi(t));return r>20?52:r+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(m,b,v){"use strict";m("bn.js"),b.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":33}],24:[function(m,b,v){"use strict";var e=m("bn.js"),n=m("double-bits");b.exports=function(t){var a=n.exponent(t);return a<52?new e(t):new e(t*Math.pow(2,52-a)).ushln(a-52)}},{"bn.js":33,"double-bits":64}],25:[function(m,b,v){"use strict";var e=m("./num-to-bn"),n=m("./bn-sign");b.exports=function(t,a){var r=n(t),u=n(a);if(0===r)return[e(0),e(1)];if(0===u)return[e(0),e(0)];u<0&&(t=t.neg(),a=a.neg());var s=t.gcd(a);return s.cmpn(1)?[t.div(s),a.div(s)]:[t,a]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(m,b,v){"use strict";var e=m("bn.js");b.exports=function(n){return new e(n)}},{"bn.js":33}],27:[function(m,b,v){"use strict";var e=m("./lib/rationalize");b.exports=function(n,t){return e(n[0].mul(t[0]),n[1].mul(t[1]))}},{"./lib/rationalize":25}],28:[function(m,b,v){"use strict";var e=m("./lib/bn-sign");b.exports=function(n){return e(n[0])*e(n[1])}},{"./lib/bn-sign":20}],29:[function(m,b,v){"use strict";var e=m("./lib/rationalize");b.exports=function(n,t){return e(n[0].mul(t[1]).sub(n[1].mul(t[0])),n[1].mul(t[1]))}},{"./lib/rationalize":25}],30:[function(m,b,v){"use strict";var e=m("./lib/bn-to-num"),n=m("./lib/ctz");b.exports=function(t){var a=t[0],r=t[1];if(0===a.cmpn(0))return 0;var u=a.abs().divmod(r.abs()),i=e(u.div),l=u.mod,c=a.negative!==r.negative?-1:1;if(0===l.cmpn(0))return c*i;if(i){var f=n(i)+4,g=e(l.ushln(f).divRound(r));return c*(i+g*Math.pow(2,-f))}var h=r.bitLength()-l.bitLength()+53;return g=e(l.ushln(h).divRound(r)),h<1023?c*g*Math.pow(2,-h):c*(g*=Math.pow(2,-1023))*Math.pow(2,1023-h)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(m,b,v){"use strict";function e(s,i,l,c,f){for(var g=f+1;c<=f;){var h=c+f>>>1,o=s[h];(void 0!==l?l(o,i):o-i)>=0?(g=h,f=h-1):c=h+1}return g}function n(s,i,l,c,f){for(var g=f+1;c<=f;){var h=c+f>>>1,o=s[h];(void 0!==l?l(o,i):o-i)>0?(g=h,f=h-1):c=h+1}return g}function t(s,i,l,c,f){for(var g=c-1;c<=f;){var h=c+f>>>1,o=s[h];(void 0!==l?l(o,i):o-i)<0?(g=h,c=h+1):f=h-1}return g}function a(s,i,l,c,f){for(var g=c-1;c<=f;){var h=c+f>>>1,o=s[h];(void 0!==l?l(o,i):o-i)<=0?(g=h,c=h+1):f=h-1}return g}function r(s,i,l,c,f){for(;c<=f;){var g=c+f>>>1,h=s[g],o=void 0!==l?l(h,i):h-i;if(0===o)return g;o<=0?c=g+1:f=g-1}return-1}function u(s,i,l,c,f,g){return"function"==typeof l?g(s,i,l,void 0===c?0:0|c,void 0===f?s.length-1:0|f):g(s,i,void 0,void 0===l?0:0|l,void 0===c?s.length-1:0|c)}b.exports={ge:function(s,i,l,c,f){return u(s,i,l,c,f,e)},gt:function(s,i,l,c,f){return u(s,i,l,c,f,n)},lt:function(s,i,l,c,f){return u(s,i,l,c,f,t)},le:function(s,i,l,c,f){return u(s,i,l,c,f,a)},eq:function(s,i,l,c,f){return u(s,i,l,c,f,r)}}},{}],32:[function(m,b,v){"use strict";function e(t){var a=32;return(t&=-t)&&a--,65535&t&&(a-=16),16711935&t&&(a-=8),252645135&t&&(a-=4),858993459&t&&(a-=2),1431655765&t&&(a-=1),a}v.INT_BITS=32,v.INT_MAX=2147483647,v.INT_MIN=-1<<31,v.sign=function(t){return(t>0)-(t<0)},v.abs=function(t){var a=t>>31;return(t^a)-a},v.min=function(t,a){return a^(t^a)&-(t<a)},v.max=function(t,a){return t^(t^a)&-(t<a)},v.isPow2=function(t){return!(t&t-1||!t)},v.log2=function(t){var a,r;return a=(t>65535)<<4,a|=r=((t>>>=a)>255)<<3,a|=r=((t>>>=r)>15)<<2,(a|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},v.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},v.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},v.countTrailingZeros=e,v.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,1+((t|=t>>>8)|t>>>16)},v.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},v.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=new Array(256);(function(t){for(var a=0;a<256;++a){var r=a,u=a,s=7;for(r>>>=1;r;r>>>=1)u<<=1,u|=1&r,--s;t[a]=u<<s&255}})(n),v.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},v.interleave2=function(t,a){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))<<1},v.deinterleave2=function(t,a){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>a&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},v.interleave3=function(t,a,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},v.deinterleave3=function(t,a){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>a&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},v.nextCombination=function(t){var a=t|t-1;return a+1|(~a&-~a)-1>>>e(t)+1}},{}],33:[function(m,b,v){!function(e,n){"use strict";function t(S,E){if(!S)throw new Error(E||"Assertion failed")}function a(S,E){S.super_=E;var R=function(){};R.prototype=E.prototype,S.prototype=new R,S.prototype.constructor=S}function r(S,E,R){if(r.isBN(S))return S;this.negative=0,this.words=null,this.length=0,this.red=null,null!==S&&("le"!==E&&"be"!==E||(R=E,E=10),this._init(S||0,E||10,R||"be"))}var u;"object"==typeof e?e.exports=r:n.BN=r,r.BN=r,r.wordSize=26;try{u="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:m("buffer").Buffer}catch(S){}function s(S,E){var R=S.charCodeAt(E);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function i(S,E,R){var B=s(S,R);return R-1>=E&&(B|=s(S,R-1)<<4),B}function l(S,E,R,B){for(var H=0,V=Math.min(S.length,R),Z=E;Z<V;Z++){var W=S.charCodeAt(Z)-48;H*=B,H+=W>=49?W-49+10:W>=17?W-17+10:W}return H}r.isBN=function(S){return S instanceof r||null!==S&&"object"==typeof S&&S.constructor.wordSize===r.wordSize&&Array.isArray(S.words)},r.max=function(S,E){return S.cmp(E)>0?S:E},r.min=function(S,E){return S.cmp(E)<0?S:E},r.prototype._init=function(S,E,R){if("number"==typeof S)return this._initNumber(S,E,R);if("object"==typeof S)return this._initArray(S,E,R);"hex"===E&&(E=16),t(E===(0|E)&&E>=2&&E<=36);var B=0;"-"===(S=S.toString().replace(/\s+/g,""))[0]&&(B++,this.negative=1),B<S.length&&(16===E?this._parseHex(S,B,R):(this._parseBase(S,E,B),"le"===R&&this._initArray(this.toArray(),E,R)))},r.prototype._initNumber=function(S,E,R){S<0&&(this.negative=1,S=-S),S<67108864?(this.words=[67108863&S],this.length=1):S<4503599627370496?(this.words=[67108863&S,S/67108864&67108863],this.length=2):(t(S<9007199254740992),this.words=[67108863&S,S/67108864&67108863,1],this.length=3),"le"===R&&this._initArray(this.toArray(),E,R)},r.prototype._initArray=function(S,E,R){if(t("number"==typeof S.length),S.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(S.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var H,V,Z=0;if("be"===R)for(B=S.length-1,H=0;B>=0;B-=3)this.words[H]|=(V=S[B]|S[B-1]<<8|S[B-2]<<16)<<Z&67108863,this.words[H+1]=V>>>26-Z&67108863,(Z+=24)>=26&&(Z-=26,H++);else if("le"===R)for(B=0,H=0;B<S.length;B+=3)this.words[H]|=(V=S[B]|S[B+1]<<8|S[B+2]<<16)<<Z&67108863,this.words[H+1]=V>>>26-Z&67108863,(Z+=24)>=26&&(Z-=26,H++);return this.strip()},r.prototype._parseHex=function(S,E,R){this.length=Math.ceil((S.length-E)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var H,V=0,Z=0;if("be"===R)for(B=S.length-1;B>=E;B-=2)H=i(S,E,B)<<V,this.words[Z]|=67108863&H,V>=18?(V-=18,this.words[Z+=1]|=H>>>26):V+=8;else for(B=(S.length-E)%2==0?E+1:E;B<S.length;B+=2)H=i(S,E,B)<<V,this.words[Z]|=67108863&H,V>=18?(V-=18,this.words[Z+=1]|=H>>>26):V+=8;this.strip()},r.prototype._parseBase=function(S,E,R){this.words=[0],this.length=1;for(var B=0,H=1;H<=67108863;H*=E)B++;B--,H=H/E|0;for(var V=S.length-R,Z=V%B,W=Math.min(V,V-Z)+R,G=0,X=R;X<W;X+=B)G=l(S,X,X+B,E),this.imuln(H),this.words[0]+G<67108864?this.words[0]+=G:this._iaddn(G);if(0!==Z){var te=1;for(G=l(S,X,S.length,E),X=0;X<Z;X++)te*=E;this.imuln(te),this.words[0]+G<67108864?this.words[0]+=G:this._iaddn(G)}this.strip()},r.prototype.copy=function(S){S.words=new Array(this.length);for(var E=0;E<this.length;E++)S.words[E]=this.words[E];S.length=this.length,S.negative=this.negative,S.red=this.red},r.prototype.clone=function(){var S=new r(null);return this.copy(S),S},r.prototype._expand=function(S){for(;this.length<S;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(S,E,R){R.negative=E.negative^S.negative;var B=S.length+E.length|0;R.length=B,B=B-1|0;var H=0|S.words[0],V=0|E.words[0],Z=H*V,G=Z/67108864|0;R.words[0]=67108863&Z;for(var X=1;X<B;X++){for(var te=G>>>26,D=67108863&G,N=Math.min(X,E.length-1),U=Math.max(0,X-S.length+1);U<=N;U++)te+=(Z=(H=0|S.words[X-U|0])*(V=0|E.words[U])+D)/67108864|0,D=67108863&Z;R.words[X]=0|D,G=0|te}return 0!==G?R.words[X]=0|G:R.length--,R.strip()}r.prototype.toString=function(S,E){var R;if(E=0|E||1,16===(S=S||10)||"hex"===S){R="";for(var B=0,H=0,V=0;V<this.length;V++){var Z=this.words[V],W=(16777215&(Z<<B|H)).toString(16);R=0!=(H=Z>>>24-B&16777215)||V!==this.length-1?c[6-W.length]+W+R:W+R,(B+=2)>=26&&(B-=26,V--)}for(0!==H&&(R=H.toString(16)+R);R.length%E!=0;)R="0"+R;return 0!==this.negative&&(R="-"+R),R}if(S===(0|S)&&S>=2&&S<=36){var G=f[S],X=g[S];R="";var te=this.clone();for(te.negative=0;!te.isZero();){var D=te.modn(X).toString(S);R=(te=te.idivn(X)).isZero()?D+R:c[G-D.length]+D+R}for(this.isZero()&&(R="0"+R);R.length%E!=0;)R="0"+R;return 0!==this.negative&&(R="-"+R),R}t(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var S=this.words[0];return 2===this.length?S+=67108864*this.words[1]:3===this.length&&1===this.words[2]?S+=4503599627370496+67108864*this.words[1]:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-S:S},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(S,E){return t(void 0!==u),this.toArrayLike(u,S,E)},r.prototype.toArray=function(S,E){return this.toArrayLike(Array,S,E)},r.prototype.toArrayLike=function(S,E,R){var B=this.byteLength(),H=R||Math.max(1,B);t(B<=H,"byte array longer than desired length"),t(H>0,"Requested array length <= 0"),this.strip();var V,Z,W="le"===E,G=new S(H),X=this.clone();if(W){for(Z=0;!X.isZero();Z++)V=X.andln(255),X.iushrn(8),G[Z]=V;for(;Z<H;Z++)G[Z]=0}else{for(Z=0;Z<H-B;Z++)G[Z]=0;for(Z=0;!X.isZero();Z++)V=X.andln(255),X.iushrn(8),G[H-Z-1]=V}return G},r.prototype._countBits=Math.clz32?function(S){return 32-Math.clz32(S)}:function(S){var E=S,R=0;return E>=4096&&(R+=13,E>>>=13),E>=64&&(R+=7,E>>>=7),E>=8&&(R+=4,E>>>=4),E>=2&&(R+=2,E>>>=2),R+E},r.prototype._zeroBits=function(S){if(0===S)return 26;var E=S,R=0;return 0==(8191&E)&&(R+=13,E>>>=13),0==(127&E)&&(R+=7,E>>>=7),0==(15&E)&&(R+=4,E>>>=4),0==(3&E)&&(R+=2,E>>>=2),0==(1&E)&&R++,R},r.prototype.bitLength=function(){var E=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+E},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var S=0,E=0;E<this.length;E++){var R=this._zeroBits(this.words[E]);if(S+=R,26!==R)break}return S},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(S){return 0!==this.negative?this.abs().inotn(S).iaddn(1):this.clone()},r.prototype.fromTwos=function(S){return this.testn(S-1)?this.notn(S).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(S){for(;this.length<S.length;)this.words[this.length++]=0;for(var E=0;E<S.length;E++)this.words[E]=this.words[E]|S.words[E];return this.strip()},r.prototype.ior=function(S){return t(0==(this.negative|S.negative)),this.iuor(S)},r.prototype.or=function(S){return this.length>S.length?this.clone().ior(S):S.clone().ior(this)},r.prototype.uor=function(S){return this.length>S.length?this.clone().iuor(S):S.clone().iuor(this)},r.prototype.iuand=function(S){var E;E=this.length>S.length?S:this;for(var R=0;R<E.length;R++)this.words[R]=this.words[R]&S.words[R];return this.length=E.length,this.strip()},r.prototype.iand=function(S){return t(0==(this.negative|S.negative)),this.iuand(S)},r.prototype.and=function(S){return this.length>S.length?this.clone().iand(S):S.clone().iand(this)},r.prototype.uand=function(S){return this.length>S.length?this.clone().iuand(S):S.clone().iuand(this)},r.prototype.iuxor=function(S){var E,R;this.length>S.length?(E=this,R=S):(E=S,R=this);for(var B=0;B<R.length;B++)this.words[B]=E.words[B]^R.words[B];if(this!==E)for(;B<E.length;B++)this.words[B]=E.words[B];return this.length=E.length,this.strip()},r.prototype.ixor=function(S){return t(0==(this.negative|S.negative)),this.iuxor(S)},r.prototype.xor=function(S){return this.length>S.length?this.clone().ixor(S):S.clone().ixor(this)},r.prototype.uxor=function(S){return this.length>S.length?this.clone().iuxor(S):S.clone().iuxor(this)},r.prototype.inotn=function(S){t("number"==typeof S&&S>=0);var E=0|Math.ceil(S/26),R=S%26;this._expand(E),R>0&&E--;for(var B=0;B<E;B++)this.words[B]=67108863&~this.words[B];return R>0&&(this.words[B]=~this.words[B]&67108863>>26-R),this.strip()},r.prototype.notn=function(S){return this.clone().inotn(S)},r.prototype.setn=function(S,E){t("number"==typeof S&&S>=0);var R=S/26|0,B=S%26;return this._expand(R+1),this.words[R]=E?this.words[R]|1<<B:this.words[R]&~(1<<B),this.strip()},r.prototype.iadd=function(S){var E,R,B;if(0!==this.negative&&0===S.negative)return this.negative=0,E=this.isub(S),this.negative^=1,this._normSign();if(0===this.negative&&0!==S.negative)return S.negative=0,E=this.isub(S),S.negative=1,E._normSign();this.length>S.length?(R=this,B=S):(R=S,B=this);for(var H=0,V=0;V<B.length;V++)this.words[V]=67108863&(E=(0|R.words[V])+(0|B.words[V])+H),H=E>>>26;for(;0!==H&&V<R.length;V++)this.words[V]=67108863&(E=(0|R.words[V])+H),H=E>>>26;if(this.length=R.length,0!==H)this.words[this.length]=H,this.length++;else if(R!==this)for(;V<R.length;V++)this.words[V]=R.words[V];return this},r.prototype.add=function(S){var E;return 0!==S.negative&&0===this.negative?(S.negative=0,E=this.sub(S),S.negative^=1,E):0===S.negative&&0!==this.negative?(this.negative=0,E=S.sub(this),this.negative=1,E):this.length>S.length?this.clone().iadd(S):S.clone().iadd(this)},r.prototype.isub=function(S){if(0!==S.negative){S.negative=0;var E=this.iadd(S);return S.negative=1,E._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(S),this.negative=1,this._normSign();var R,B,H=this.cmp(S);if(0===H)return this.negative=0,this.length=1,this.words[0]=0,this;H>0?(R=this,B=S):(R=S,B=this);for(var V=0,Z=0;Z<B.length;Z++)V=(E=(0|R.words[Z])-(0|B.words[Z])+V)>>26,this.words[Z]=67108863&E;for(;0!==V&&Z<R.length;Z++)V=(E=(0|R.words[Z])+V)>>26,this.words[Z]=67108863&E;if(0===V&&Z<R.length&&R!==this)for(;Z<R.length;Z++)this.words[Z]=R.words[Z];return this.length=Math.max(this.length,Z),R!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(S){return this.clone().isub(S)};var o=function(S,E,R){var B,H,V,Z=S.words,W=E.words,G=R.words,X=0,te=0|Z[0],D=8191&te,N=te>>>13,U=0|Z[1],Q=8191&U,j=U>>>13,J=0|Z[2],K=8191&J,re=J>>>13,ne=0|Z[3],se=8191&ne,oe=ne>>>13,pe=0|Z[4],ce=8191&pe,ge=pe>>>13,xe=0|Z[5],we=8191&xe,be=xe>>>13,Se=0|Z[6],fe=8191&Se,me=Se>>>13,Te=0|Z[7],_e=8191&Te,Me=Te>>>13,Ie=0|Z[8],ze=8191&Ie,Ve=Ie>>>13,Je=0|Z[9],De=8191&Je,Be=Je>>>13,Ze=0|W[0],Ye=8191&Ze,tt=Ze>>>13,st=0|W[1],vt=8191&st,Pt=st>>>13,Mt=0|W[2],rt=8191&Mt,et=Mt>>>13,bt=0|W[3],Rt=8191&bt,Yt=bt>>>13,Fe=0|W[4],He=8191&Fe,Oe=Fe>>>13,$e=0|W[5],ke=8191&$e,Le=$e>>>13,Pe=0|W[6],Ce=8191&Pe,Xe=Pe>>>13,at=0|W[7],pt=8191&at,ut=at>>>13,St=0|W[8],ot=8191&St,Et=St>>>13,Lt=0|W[9],Qe=8191&Lt,mt=Lt>>>13;R.negative=S.negative^E.negative,R.length=19;var It=(X+(B=Math.imul(D,Ye))|0)+((8191&(H=(H=Math.imul(D,tt))+Math.imul(N,Ye)|0))<<13)|0;X=((V=Math.imul(N,tt))+(H>>>13)|0)+(It>>>26)|0,It&=67108863,B=Math.imul(Q,Ye),H=(H=Math.imul(Q,tt))+Math.imul(j,Ye)|0,V=Math.imul(j,tt);var jt=(X+(B=B+Math.imul(D,vt)|0)|0)+((8191&(H=(H=H+Math.imul(D,Pt)|0)+Math.imul(N,vt)|0))<<13)|0;X=((V=V+Math.imul(N,Pt)|0)+(H>>>13)|0)+(jt>>>26)|0,jt&=67108863,B=Math.imul(K,Ye),H=(H=Math.imul(K,tt))+Math.imul(re,Ye)|0,V=Math.imul(re,tt),B=B+Math.imul(Q,vt)|0,H=(H=H+Math.imul(Q,Pt)|0)+Math.imul(j,vt)|0,V=V+Math.imul(j,Pt)|0;var Zt=(X+(B=B+Math.imul(D,rt)|0)|0)+((8191&(H=(H=H+Math.imul(D,et)|0)+Math.imul(N,rt)|0))<<13)|0;X=((V=V+Math.imul(N,et)|0)+(H>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,B=Math.imul(se,Ye),H=(H=Math.imul(se,tt))+Math.imul(oe,Ye)|0,V=Math.imul(oe,tt),B=B+Math.imul(K,vt)|0,H=(H=H+Math.imul(K,Pt)|0)+Math.imul(re,vt)|0,V=V+Math.imul(re,Pt)|0,B=B+Math.imul(Q,rt)|0,H=(H=H+Math.imul(Q,et)|0)+Math.imul(j,rt)|0,V=V+Math.imul(j,et)|0;var Re=(X+(B=B+Math.imul(D,Rt)|0)|0)+((8191&(H=(H=H+Math.imul(D,Yt)|0)+Math.imul(N,Rt)|0))<<13)|0;X=((V=V+Math.imul(N,Yt)|0)+(H>>>13)|0)+(Re>>>26)|0,Re&=67108863,B=Math.imul(ce,Ye),H=(H=Math.imul(ce,tt))+Math.imul(ge,Ye)|0,V=Math.imul(ge,tt),B=B+Math.imul(se,vt)|0,H=(H=H+Math.imul(se,Pt)|0)+Math.imul(oe,vt)|0,V=V+Math.imul(oe,Pt)|0,B=B+Math.imul(K,rt)|0,H=(H=H+Math.imul(K,et)|0)+Math.imul(re,rt)|0,V=V+Math.imul(re,et)|0,B=B+Math.imul(Q,Rt)|0,H=(H=H+Math.imul(Q,Yt)|0)+Math.imul(j,Rt)|0,V=V+Math.imul(j,Yt)|0;var lt=(X+(B=B+Math.imul(D,He)|0)|0)+((8191&(H=(H=H+Math.imul(D,Oe)|0)+Math.imul(N,He)|0))<<13)|0;X=((V=V+Math.imul(N,Oe)|0)+(H>>>13)|0)+(lt>>>26)|0,lt&=67108863,B=Math.imul(we,Ye),H=(H=Math.imul(we,tt))+Math.imul(be,Ye)|0,V=Math.imul(be,tt),B=B+Math.imul(ce,vt)|0,H=(H=H+Math.imul(ce,Pt)|0)+Math.imul(ge,vt)|0,V=V+Math.imul(ge,Pt)|0,B=B+Math.imul(se,rt)|0,H=(H=H+Math.imul(se,et)|0)+Math.imul(oe,rt)|0,V=V+Math.imul(oe,et)|0,B=B+Math.imul(K,Rt)|0,H=(H=H+Math.imul(K,Yt)|0)+Math.imul(re,Rt)|0,V=V+Math.imul(re,Yt)|0,B=B+Math.imul(Q,He)|0,H=(H=H+Math.imul(Q,Oe)|0)+Math.imul(j,He)|0,V=V+Math.imul(j,Oe)|0;var _t=(X+(B=B+Math.imul(D,ke)|0)|0)+((8191&(H=(H=H+Math.imul(D,Le)|0)+Math.imul(N,ke)|0))<<13)|0;X=((V=V+Math.imul(N,Le)|0)+(H>>>13)|0)+(_t>>>26)|0,_t&=67108863,B=Math.imul(fe,Ye),H=(H=Math.imul(fe,tt))+Math.imul(me,Ye)|0,V=Math.imul(me,tt),B=B+Math.imul(we,vt)|0,H=(H=H+Math.imul(we,Pt)|0)+Math.imul(be,vt)|0,V=V+Math.imul(be,Pt)|0,B=B+Math.imul(ce,rt)|0,H=(H=H+Math.imul(ce,et)|0)+Math.imul(ge,rt)|0,V=V+Math.imul(ge,et)|0,B=B+Math.imul(se,Rt)|0,H=(H=H+Math.imul(se,Yt)|0)+Math.imul(oe,Rt)|0,V=V+Math.imul(oe,Yt)|0,B=B+Math.imul(K,He)|0,H=(H=H+Math.imul(K,Oe)|0)+Math.imul(re,He)|0,V=V+Math.imul(re,Oe)|0,B=B+Math.imul(Q,ke)|0,H=(H=H+Math.imul(Q,Le)|0)+Math.imul(j,ke)|0,V=V+Math.imul(j,Le)|0;var Dt=(X+(B=B+Math.imul(D,Ce)|0)|0)+((8191&(H=(H=H+Math.imul(D,Xe)|0)+Math.imul(N,Ce)|0))<<13)|0;X=((V=V+Math.imul(N,Xe)|0)+(H>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,B=Math.imul(_e,Ye),H=(H=Math.imul(_e,tt))+Math.imul(Me,Ye)|0,V=Math.imul(Me,tt),B=B+Math.imul(fe,vt)|0,H=(H=H+Math.imul(fe,Pt)|0)+Math.imul(me,vt)|0,V=V+Math.imul(me,Pt)|0,B=B+Math.imul(we,rt)|0,H=(H=H+Math.imul(we,et)|0)+Math.imul(be,rt)|0,V=V+Math.imul(be,et)|0,B=B+Math.imul(ce,Rt)|0,H=(H=H+Math.imul(ce,Yt)|0)+Math.imul(ge,Rt)|0,V=V+Math.imul(ge,Yt)|0,B=B+Math.imul(se,He)|0,H=(H=H+Math.imul(se,Oe)|0)+Math.imul(oe,He)|0,V=V+Math.imul(oe,Oe)|0,B=B+Math.imul(K,ke)|0,H=(H=H+Math.imul(K,Le)|0)+Math.imul(re,ke)|0,V=V+Math.imul(re,Le)|0,B=B+Math.imul(Q,Ce)|0,H=(H=H+Math.imul(Q,Xe)|0)+Math.imul(j,Ce)|0,V=V+Math.imul(j,Xe)|0;var Vt=(X+(B=B+Math.imul(D,pt)|0)|0)+((8191&(H=(H=H+Math.imul(D,ut)|0)+Math.imul(N,pt)|0))<<13)|0;X=((V=V+Math.imul(N,ut)|0)+(H>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,B=Math.imul(ze,Ye),H=(H=Math.imul(ze,tt))+Math.imul(Ve,Ye)|0,V=Math.imul(Ve,tt),B=B+Math.imul(_e,vt)|0,H=(H=H+Math.imul(_e,Pt)|0)+Math.imul(Me,vt)|0,V=V+Math.imul(Me,Pt)|0,B=B+Math.imul(fe,rt)|0,H=(H=H+Math.imul(fe,et)|0)+Math.imul(me,rt)|0,V=V+Math.imul(me,et)|0,B=B+Math.imul(we,Rt)|0,H=(H=H+Math.imul(we,Yt)|0)+Math.imul(be,Rt)|0,V=V+Math.imul(be,Yt)|0,B=B+Math.imul(ce,He)|0,H=(H=H+Math.imul(ce,Oe)|0)+Math.imul(ge,He)|0,V=V+Math.imul(ge,Oe)|0,B=B+Math.imul(se,ke)|0,H=(H=H+Math.imul(se,Le)|0)+Math.imul(oe,ke)|0,V=V+Math.imul(oe,Le)|0,B=B+Math.imul(K,Ce)|0,H=(H=H+Math.imul(K,Xe)|0)+Math.imul(re,Ce)|0,V=V+Math.imul(re,Xe)|0,B=B+Math.imul(Q,pt)|0,H=(H=H+Math.imul(Q,ut)|0)+Math.imul(j,pt)|0,V=V+Math.imul(j,ut)|0;var nr=(X+(B=B+Math.imul(D,ot)|0)|0)+((8191&(H=(H=H+Math.imul(D,Et)|0)+Math.imul(N,ot)|0))<<13)|0;X=((V=V+Math.imul(N,Et)|0)+(H>>>13)|0)+(nr>>>26)|0,nr&=67108863,B=Math.imul(De,Ye),H=(H=Math.imul(De,tt))+Math.imul(Be,Ye)|0,V=Math.imul(Be,tt),B=B+Math.imul(ze,vt)|0,H=(H=H+Math.imul(ze,Pt)|0)+Math.imul(Ve,vt)|0,V=V+Math.imul(Ve,Pt)|0,B=B+Math.imul(_e,rt)|0,H=(H=H+Math.imul(_e,et)|0)+Math.imul(Me,rt)|0,V=V+Math.imul(Me,et)|0,B=B+Math.imul(fe,Rt)|0,H=(H=H+Math.imul(fe,Yt)|0)+Math.imul(me,Rt)|0,V=V+Math.imul(me,Yt)|0,B=B+Math.imul(we,He)|0,H=(H=H+Math.imul(we,Oe)|0)+Math.imul(be,He)|0,V=V+Math.imul(be,Oe)|0,B=B+Math.imul(ce,ke)|0,H=(H=H+Math.imul(ce,Le)|0)+Math.imul(ge,ke)|0,V=V+Math.imul(ge,Le)|0,B=B+Math.imul(se,Ce)|0,H=(H=H+Math.imul(se,Xe)|0)+Math.imul(oe,Ce)|0,V=V+Math.imul(oe,Xe)|0,B=B+Math.imul(K,pt)|0,H=(H=H+Math.imul(K,ut)|0)+Math.imul(re,pt)|0,V=V+Math.imul(re,ut)|0,B=B+Math.imul(Q,ot)|0,H=(H=H+Math.imul(Q,Et)|0)+Math.imul(j,ot)|0,V=V+Math.imul(j,Et)|0;var Gt=(X+(B=B+Math.imul(D,Qe)|0)|0)+((8191&(H=(H=H+Math.imul(D,mt)|0)+Math.imul(N,Qe)|0))<<13)|0;X=((V=V+Math.imul(N,mt)|0)+(H>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,B=Math.imul(De,vt),H=(H=Math.imul(De,Pt))+Math.imul(Be,vt)|0,V=Math.imul(Be,Pt),B=B+Math.imul(ze,rt)|0,H=(H=H+Math.imul(ze,et)|0)+Math.imul(Ve,rt)|0,V=V+Math.imul(Ve,et)|0,B=B+Math.imul(_e,Rt)|0,H=(H=H+Math.imul(_e,Yt)|0)+Math.imul(Me,Rt)|0,V=V+Math.imul(Me,Yt)|0,B=B+Math.imul(fe,He)|0,H=(H=H+Math.imul(fe,Oe)|0)+Math.imul(me,He)|0,V=V+Math.imul(me,Oe)|0,B=B+Math.imul(we,ke)|0,H=(H=H+Math.imul(we,Le)|0)+Math.imul(be,ke)|0,V=V+Math.imul(be,Le)|0,B=B+Math.imul(ce,Ce)|0,H=(H=H+Math.imul(ce,Xe)|0)+Math.imul(ge,Ce)|0,V=V+Math.imul(ge,Xe)|0,B=B+Math.imul(se,pt)|0,H=(H=H+Math.imul(se,ut)|0)+Math.imul(oe,pt)|0,V=V+Math.imul(oe,ut)|0,B=B+Math.imul(K,ot)|0,H=(H=H+Math.imul(K,Et)|0)+Math.imul(re,ot)|0,V=V+Math.imul(re,Et)|0;var Kt=(X+(B=B+Math.imul(Q,Qe)|0)|0)+((8191&(H=(H=H+Math.imul(Q,mt)|0)+Math.imul(j,Qe)|0))<<13)|0;X=((V=V+Math.imul(j,mt)|0)+(H>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,B=Math.imul(De,rt),H=(H=Math.imul(De,et))+Math.imul(Be,rt)|0,V=Math.imul(Be,et),B=B+Math.imul(ze,Rt)|0,H=(H=H+Math.imul(ze,Yt)|0)+Math.imul(Ve,Rt)|0,V=V+Math.imul(Ve,Yt)|0,B=B+Math.imul(_e,He)|0,H=(H=H+Math.imul(_e,Oe)|0)+Math.imul(Me,He)|0,V=V+Math.imul(Me,Oe)|0,B=B+Math.imul(fe,ke)|0,H=(H=H+Math.imul(fe,Le)|0)+Math.imul(me,ke)|0,V=V+Math.imul(me,Le)|0,B=B+Math.imul(we,Ce)|0,H=(H=H+Math.imul(we,Xe)|0)+Math.imul(be,Ce)|0,V=V+Math.imul(be,Xe)|0,B=B+Math.imul(ce,pt)|0,H=(H=H+Math.imul(ce,ut)|0)+Math.imul(ge,pt)|0,V=V+Math.imul(ge,ut)|0,B=B+Math.imul(se,ot)|0,H=(H=H+Math.imul(se,Et)|0)+Math.imul(oe,ot)|0,V=V+Math.imul(oe,Et)|0;var ir=(X+(B=B+Math.imul(K,Qe)|0)|0)+((8191&(H=(H=H+Math.imul(K,mt)|0)+Math.imul(re,Qe)|0))<<13)|0;X=((V=V+Math.imul(re,mt)|0)+(H>>>13)|0)+(ir>>>26)|0,ir&=67108863,B=Math.imul(De,Rt),H=(H=Math.imul(De,Yt))+Math.imul(Be,Rt)|0,V=Math.imul(Be,Yt),B=B+Math.imul(ze,He)|0,H=(H=H+Math.imul(ze,Oe)|0)+Math.imul(Ve,He)|0,V=V+Math.imul(Ve,Oe)|0,B=B+Math.imul(_e,ke)|0,H=(H=H+Math.imul(_e,Le)|0)+Math.imul(Me,ke)|0,V=V+Math.imul(Me,Le)|0,B=B+Math.imul(fe,Ce)|0,H=(H=H+Math.imul(fe,Xe)|0)+Math.imul(me,Ce)|0,V=V+Math.imul(me,Xe)|0,B=B+Math.imul(we,pt)|0,H=(H=H+Math.imul(we,ut)|0)+Math.imul(be,pt)|0,V=V+Math.imul(be,ut)|0,B=B+Math.imul(ce,ot)|0,H=(H=H+Math.imul(ce,Et)|0)+Math.imul(ge,ot)|0,V=V+Math.imul(ge,Et)|0;var dr=(X+(B=B+Math.imul(se,Qe)|0)|0)+((8191&(H=(H=H+Math.imul(se,mt)|0)+Math.imul(oe,Qe)|0))<<13)|0;X=((V=V+Math.imul(oe,mt)|0)+(H>>>13)|0)+(dr>>>26)|0,dr&=67108863,B=Math.imul(De,He),H=(H=Math.imul(De,Oe))+Math.imul(Be,He)|0,V=Math.imul(Be,Oe),B=B+Math.imul(ze,ke)|0,H=(H=H+Math.imul(ze,Le)|0)+Math.imul(Ve,ke)|0,V=V+Math.imul(Ve,Le)|0,B=B+Math.imul(_e,Ce)|0,H=(H=H+Math.imul(_e,Xe)|0)+Math.imul(Me,Ce)|0,V=V+Math.imul(Me,Xe)|0,B=B+Math.imul(fe,pt)|0,H=(H=H+Math.imul(fe,ut)|0)+Math.imul(me,pt)|0,V=V+Math.imul(me,ut)|0,B=B+Math.imul(we,ot)|0,H=(H=H+Math.imul(we,Et)|0)+Math.imul(be,ot)|0,V=V+Math.imul(be,Et)|0;var hr=(X+(B=B+Math.imul(ce,Qe)|0)|0)+((8191&(H=(H=H+Math.imul(ce,mt)|0)+Math.imul(ge,Qe)|0))<<13)|0;X=((V=V+Math.imul(ge,mt)|0)+(H>>>13)|0)+(hr>>>26)|0,hr&=67108863,B=Math.imul(De,ke),H=(H=Math.imul(De,Le))+Math.imul(Be,ke)|0,V=Math.imul(Be,Le),B=B+Math.imul(ze,Ce)|0,H=(H=H+Math.imul(ze,Xe)|0)+Math.imul(Ve,Ce)|0,V=V+Math.imul(Ve,Xe)|0,B=B+Math.imul(_e,pt)|0,H=(H=H+Math.imul(_e,ut)|0)+Math.imul(Me,pt)|0,V=V+Math.imul(Me,ut)|0,B=B+Math.imul(fe,ot)|0,H=(H=H+Math.imul(fe,Et)|0)+Math.imul(me,ot)|0,V=V+Math.imul(me,Et)|0;var cr=(X+(B=B+Math.imul(we,Qe)|0)|0)+((8191&(H=(H=H+Math.imul(we,mt)|0)+Math.imul(be,Qe)|0))<<13)|0;X=((V=V+Math.imul(be,mt)|0)+(H>>>13)|0)+(cr>>>26)|0,cr&=67108863,B=Math.imul(De,Ce),H=(H=Math.imul(De,Xe))+Math.imul(Be,Ce)|0,V=Math.imul(Be,Xe),B=B+Math.imul(ze,pt)|0,H=(H=H+Math.imul(ze,ut)|0)+Math.imul(Ve,pt)|0,V=V+Math.imul(Ve,ut)|0,B=B+Math.imul(_e,ot)|0,H=(H=H+Math.imul(_e,Et)|0)+Math.imul(Me,ot)|0,V=V+Math.imul(Me,Et)|0;var sr=(X+(B=B+Math.imul(fe,Qe)|0)|0)+((8191&(H=(H=H+Math.imul(fe,mt)|0)+Math.imul(me,Qe)|0))<<13)|0;X=((V=V+Math.imul(me,mt)|0)+(H>>>13)|0)+(sr>>>26)|0,sr&=67108863,B=Math.imul(De,pt),H=(H=Math.imul(De,ut))+Math.imul(Be,pt)|0,V=Math.imul(Be,ut),B=B+Math.imul(ze,ot)|0,H=(H=H+Math.imul(ze,Et)|0)+Math.imul(Ve,ot)|0,V=V+Math.imul(Ve,Et)|0;var mr=(X+(B=B+Math.imul(_e,Qe)|0)|0)+((8191&(H=(H=H+Math.imul(_e,mt)|0)+Math.imul(Me,Qe)|0))<<13)|0;X=((V=V+Math.imul(Me,mt)|0)+(H>>>13)|0)+(mr>>>26)|0,mr&=67108863,B=Math.imul(De,ot),H=(H=Math.imul(De,Et))+Math.imul(Be,ot)|0,V=Math.imul(Be,Et);var Ir=(X+(B=B+Math.imul(ze,Qe)|0)|0)+((8191&(H=(H=H+Math.imul(ze,mt)|0)+Math.imul(Ve,Qe)|0))<<13)|0;X=((V=V+Math.imul(Ve,mt)|0)+(H>>>13)|0)+(Ir>>>26)|0,Ir&=67108863;var vr=(X+(B=Math.imul(De,Qe))|0)+((8191&(H=(H=Math.imul(De,mt))+Math.imul(Be,Qe)|0))<<13)|0;return X=((V=Math.imul(Be,mt))+(H>>>13)|0)+(vr>>>26)|0,vr&=67108863,G[0]=It,G[1]=jt,G[2]=Zt,G[3]=Re,G[4]=lt,G[5]=_t,G[6]=Dt,G[7]=Vt,G[8]=nr,G[9]=Gt,G[10]=Kt,G[11]=ir,G[12]=dr,G[13]=hr,G[14]=cr,G[15]=sr,G[16]=mr,G[17]=Ir,G[18]=vr,0!==X&&(G[19]=X,R.length++),R};function x(S,E,R){return(new d).mulp(S,E,R)}function d(S,E){this.x=S,this.y=E}Math.imul||(o=h),r.prototype.mulTo=function(S,E){var R=this.length+S.length;return 10===this.length&&10===S.length?o(this,S,E):R<63?h(this,S,E):R<1024?function(B,H,V){V.negative=H.negative^B.negative,V.length=B.length+H.length;for(var Z=0,W=0,G=0;G<V.length-1;G++){var X=W;W=0;for(var te=67108863&Z,D=Math.min(G,H.length-1),N=Math.max(0,G-B.length+1);N<=D;N++){var Q=(0|B.words[G-N])*(0|H.words[N]),j=67108863&Q;te=67108863&(j=j+te|0),W+=(X=(X=X+(Q/67108864|0)|0)+(j>>>26)|0)>>>26,X&=67108863}V.words[G]=te,Z=X,X=W}return 0!==Z?V.words[G]=Z:V.length--,V.strip()}(this,S,E):x(this,S,E)},d.prototype.makeRBT=function(S){for(var E=new Array(S),R=r.prototype._countBits(S)-1,B=0;B<S;B++)E[B]=this.revBin(B,R,S);return E},d.prototype.revBin=function(S,E,R){if(0===S||S===R-1)return S;for(var B=0,H=0;H<E;H++)B|=(1&S)<<E-H-1,S>>=1;return B},d.prototype.permute=function(S,E,R,B,H,V){for(var Z=0;Z<V;Z++)B[Z]=E[S[Z]],H[Z]=R[S[Z]]},d.prototype.transform=function(S,E,R,B,H,V){this.permute(V,S,E,R,B,H);for(var Z=1;Z<H;Z<<=1)for(var W=Z<<1,G=Math.cos(2*Math.PI/W),X=Math.sin(2*Math.PI/W),te=0;te<H;te+=W)for(var D=G,N=X,U=0;U<Z;U++){var Q=R[te+U],j=B[te+U],J=R[te+U+Z],K=B[te+U+Z],re=D*J-N*K;K=D*K+N*J,R[te+U]=Q+(J=re),B[te+U]=j+K,R[te+U+Z]=Q-J,B[te+U+Z]=j-K,U!==W&&(re=G*D-X*N,N=G*N+X*D,D=re)}},d.prototype.guessLen13b=function(S,E){var R=1|Math.max(E,S),B=1&R,H=0;for(R=R/2|0;R;R>>>=1)H++;return 1<<H+1+B},d.prototype.conjugate=function(S,E,R){if(!(R<=1))for(var B=0;B<R/2;B++){var H=S[B];S[B]=S[R-B-1],S[R-B-1]=H,H=E[B],E[B]=-E[R-B-1],E[R-B-1]=-H}},d.prototype.normalize13b=function(S,E){for(var R=0,B=0;B<E/2;B++){var H=8192*Math.round(S[2*B+1]/E)+Math.round(S[2*B]/E)+R;S[B]=67108863&H,R=H<67108864?0:H/67108864|0}return S},d.prototype.convert13b=function(S,E,R,B){for(var H=0,V=0;V<E;V++)R[2*V]=8191&(H+=0|S[V]),R[2*V+1]=8191&(H>>>=13),H>>>=13;for(V=2*E;V<B;++V)R[V]=0;t(0===H),t(0==(-8192&H))},d.prototype.stub=function(S){for(var E=new Array(S),R=0;R<S;R++)E[R]=0;return E},d.prototype.mulp=function(S,E,R){var B=2*this.guessLen13b(S.length,E.length),H=this.makeRBT(B),V=this.stub(B),Z=new Array(B),W=new Array(B),G=new Array(B),X=new Array(B),te=new Array(B),D=new Array(B),N=R.words;N.length=B,this.convert13b(S.words,S.length,Z,B),this.convert13b(E.words,E.length,X,B),this.transform(Z,V,W,G,B,H),this.transform(X,V,te,D,B,H);for(var U=0;U<B;U++){var Q=W[U]*te[U]-G[U]*D[U];G[U]=W[U]*D[U]+G[U]*te[U],W[U]=Q}return this.conjugate(W,G,B),this.transform(W,G,N,V,B,H),this.conjugate(N,V,B),this.normalize13b(N,B),R.negative=S.negative^E.negative,R.length=S.length+E.length,R.strip()},r.prototype.mul=function(S){var E=new r(null);return E.words=new Array(this.length+S.length),this.mulTo(S,E)},r.prototype.mulf=function(S){var E=new r(null);return E.words=new Array(this.length+S.length),x(this,S,E)},r.prototype.imul=function(S){return this.clone().mulTo(S,this)},r.prototype.imuln=function(S){t("number"==typeof S),t(S<67108864);for(var E=0,R=0;R<this.length;R++){var B=(0|this.words[R])*S,H=(67108863&B)+(67108863&E);E>>=26,E+=B/67108864|0,E+=H>>>26,this.words[R]=67108863&H}return 0!==E&&(this.words[R]=E,this.length++),this},r.prototype.muln=function(S){return this.clone().imuln(S)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(S){var E=function(V){for(var Z=new Array(V.bitLength()),W=0;W<Z.length;W++){var X=W%26;Z[W]=(V.words[W/26|0]&1<<X)>>>X}return Z}(S);if(0===E.length)return new r(1);for(var R=this,B=0;B<E.length&&0===E[B];B++,R=R.sqr());if(++B<E.length)for(var H=R.sqr();B<E.length;B++,H=H.sqr())0!==E[B]&&(R=R.mul(H));return R},r.prototype.iushln=function(S){t("number"==typeof S&&S>=0);var E,R=S%26,B=(S-R)/26,H=67108863>>>26-R<<26-R;if(0!==R){var V=0;for(E=0;E<this.length;E++){var Z=this.words[E]&H;this.words[E]=(0|this.words[E])-Z<<R|V,V=Z>>>26-R}V&&(this.words[E]=V,this.length++)}if(0!==B){for(E=this.length-1;E>=0;E--)this.words[E+B]=this.words[E];for(E=0;E<B;E++)this.words[E]=0;this.length+=B}return this.strip()},r.prototype.ishln=function(S){return t(0===this.negative),this.iushln(S)},r.prototype.iushrn=function(S,E,R){var B;t("number"==typeof S&&S>=0),B=E?(E-E%26)/26:0;var H=S%26,V=Math.min((S-H)/26,this.length),Z=67108863^67108863>>>H<<H,W=R;if(B-=V,B=Math.max(0,B),W){for(var G=0;G<V;G++)W.words[G]=this.words[G];W.length=V}if(0!==V)if(this.length>V)for(this.length-=V,G=0;G<this.length;G++)this.words[G]=this.words[G+V];else this.words[0]=0,this.length=1;var X=0;for(G=this.length-1;G>=0&&(0!==X||G>=B);G--){var te=0|this.words[G];this.words[G]=X<<26-H|te>>>H,X=te&Z}return W&&0!==X&&(W.words[W.length++]=X),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(S,E,R){return t(0===this.negative),this.iushrn(S,E,R)},r.prototype.shln=function(S){return this.clone().ishln(S)},r.prototype.ushln=function(S){return this.clone().iushln(S)},r.prototype.shrn=function(S){return this.clone().ishrn(S)},r.prototype.ushrn=function(S){return this.clone().iushrn(S)},r.prototype.testn=function(S){t("number"==typeof S&&S>=0);var E=S%26,R=(S-E)/26;return!(this.length<=R||!(this.words[R]&1<<E))},r.prototype.imaskn=function(S){t("number"==typeof S&&S>=0);var E=S%26,R=(S-E)/26;return t(0===this.negative,"imaskn works only with positive numbers"),this.length<=R?this:(0!==E&&R++,this.length=Math.min(R,this.length),0!==E&&(this.words[this.length-1]&=67108863^67108863>>>E<<E),this.strip())},r.prototype.maskn=function(S){return this.clone().imaskn(S)},r.prototype.iaddn=function(S){return t("number"==typeof S),t(S<67108864),S<0?this.isubn(-S):0!==this.negative?1===this.length&&(0|this.words[0])<S?(this.words[0]=S-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(S),this.negative=1,this):this._iaddn(S)},r.prototype._iaddn=function(S){this.words[0]+=S;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},r.prototype.isubn=function(S){if(t("number"==typeof S),t(S<67108864),S<0)return this.iaddn(-S);if(0!==this.negative)return this.negative=0,this.iaddn(S),this.negative=1,this;if(this.words[0]-=S,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this.strip()},r.prototype.addn=function(S){return this.clone().iaddn(S)},r.prototype.subn=function(S){return this.clone().isubn(S)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(S,E,R){var B,H;this._expand(S.length+R);var Z=0;for(B=0;B<S.length;B++){H=(0|this.words[B+R])+Z;var W=(0|S.words[B])*E;Z=((H-=67108863&W)>>26)-(W/67108864|0),this.words[B+R]=67108863&H}for(;B<this.length-R;B++)Z=(H=(0|this.words[B+R])+Z)>>26,this.words[B+R]=67108863&H;if(0===Z)return this.strip();for(t(-1===Z),Z=0,B=0;B<this.length;B++)Z=(H=-(0|this.words[B])+Z)>>26,this.words[B]=67108863&H;return this.negative=1,this.strip()},r.prototype._wordDiv=function(S,E){var R,B=this.clone(),H=S,V=0|H.words[H.length-1];0!=(R=26-this._countBits(V))&&(H=H.ushln(R),B.iushln(R),V=0|H.words[H.length-1]);var Z,W=B.length-H.length;if("mod"!==E){(Z=new r(null)).length=W+1,Z.words=new Array(Z.length);for(var G=0;G<Z.length;G++)Z.words[G]=0}var X=B.clone()._ishlnsubmul(H,1,W);0===X.negative&&(B=X,Z&&(Z.words[W]=1));for(var te=W-1;te>=0;te--){var D=67108864*(0|B.words[H.length+te])+(0|B.words[H.length+te-1]);for(D=Math.min(D/V|0,67108863),B._ishlnsubmul(H,D,te);0!==B.negative;)D--,B.negative=0,B._ishlnsubmul(H,1,te),B.isZero()||(B.negative^=1);Z&&(Z.words[te]=D)}return Z&&Z.strip(),B.strip(),"div"!==E&&0!==R&&B.iushrn(R),{div:Z||null,mod:B}},r.prototype.divmod=function(S,E,R){return t(!S.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===S.negative?(V=this.neg().divmod(S,E),"mod"!==E&&(B=V.div.neg()),"div"!==E&&(H=V.mod.neg(),R&&0!==H.negative&&H.iadd(S)),{div:B,mod:H}):0===this.negative&&0!==S.negative?(V=this.divmod(S.neg(),E),"mod"!==E&&(B=V.div.neg()),{div:B,mod:V.mod}):0!=(this.negative&S.negative)?(V=this.neg().divmod(S.neg(),E),"div"!==E&&(H=V.mod.neg(),R&&0!==H.negative&&H.isub(S)),{div:V.div,mod:H}):S.length>this.length||this.cmp(S)<0?{div:new r(0),mod:this}:1===S.length?"div"===E?{div:this.divn(S.words[0]),mod:null}:"mod"===E?{div:null,mod:new r(this.modn(S.words[0]))}:{div:this.divn(S.words[0]),mod:new r(this.modn(S.words[0]))}:this._wordDiv(S,E);var B,H,V},r.prototype.div=function(S){return this.divmod(S,"div",!1).div},r.prototype.mod=function(S){return this.divmod(S,"mod",!1).mod},r.prototype.umod=function(S){return this.divmod(S,"mod",!0).mod},r.prototype.divRound=function(S){var E=this.divmod(S);if(E.mod.isZero())return E.div;var R=0!==E.div.negative?E.mod.isub(S):E.mod,B=S.ushrn(1),H=S.andln(1),V=R.cmp(B);return V<0||1===H&&0===V?E.div:0!==E.div.negative?E.div.isubn(1):E.div.iaddn(1)},r.prototype.modn=function(S){t(S<=67108863);for(var E=(1<<26)%S,R=0,B=this.length-1;B>=0;B--)R=(E*R+(0|this.words[B]))%S;return R},r.prototype.idivn=function(S){t(S<=67108863);for(var E=0,R=this.length-1;R>=0;R--){var B=(0|this.words[R])+67108864*E;this.words[R]=B/S|0,E=B%S}return this.strip()},r.prototype.divn=function(S){return this.clone().idivn(S)},r.prototype.egcd=function(S){t(0===S.negative),t(!S.isZero());var E=this,R=S.clone();E=0!==E.negative?E.umod(S):E.clone();for(var B=new r(1),H=new r(0),V=new r(0),Z=new r(1),W=0;E.isEven()&&R.isEven();)E.iushrn(1),R.iushrn(1),++W;for(var G=R.clone(),X=E.clone();!E.isZero();){for(var te=0,D=1;0==(E.words[0]&D)&&te<26;++te,D<<=1);if(te>0)for(E.iushrn(te);te-- >0;)(B.isOdd()||H.isOdd())&&(B.iadd(G),H.isub(X)),B.iushrn(1),H.iushrn(1);for(var N=0,U=1;0==(R.words[0]&U)&&N<26;++N,U<<=1);if(N>0)for(R.iushrn(N);N-- >0;)(V.isOdd()||Z.isOdd())&&(V.iadd(G),Z.isub(X)),V.iushrn(1),Z.iushrn(1);E.cmp(R)>=0?(E.isub(R),B.isub(V),H.isub(Z)):(R.isub(E),V.isub(B),Z.isub(H))}return{a:V,b:Z,gcd:R.iushln(W)}},r.prototype._invmp=function(S){t(0===S.negative),t(!S.isZero());var E=this,R=S.clone();E=0!==E.negative?E.umod(S):E.clone();for(var B,H=new r(1),V=new r(0),Z=R.clone();E.cmpn(1)>0&&R.cmpn(1)>0;){for(var W=0,G=1;0==(E.words[0]&G)&&W<26;++W,G<<=1);if(W>0)for(E.iushrn(W);W-- >0;)H.isOdd()&&H.iadd(Z),H.iushrn(1);for(var X=0,te=1;0==(R.words[0]&te)&&X<26;++X,te<<=1);if(X>0)for(R.iushrn(X);X-- >0;)V.isOdd()&&V.iadd(Z),V.iushrn(1);E.cmp(R)>=0?(E.isub(R),H.isub(V)):(R.isub(E),V.isub(H))}return(B=0===E.cmpn(1)?H:V).cmpn(0)<0&&B.iadd(S),B},r.prototype.gcd=function(S){if(this.isZero())return S.abs();if(S.isZero())return this.abs();var E=this.clone(),R=S.clone();E.negative=0,R.negative=0;for(var B=0;E.isEven()&&R.isEven();B++)E.iushrn(1),R.iushrn(1);for(;;){for(;E.isEven();)E.iushrn(1);for(;R.isEven();)R.iushrn(1);var H=E.cmp(R);if(H<0){var V=E;E=R,R=V}else if(0===H||0===R.cmpn(1))break;E.isub(R)}return R.iushln(B)},r.prototype.invm=function(S){return this.egcd(S).a.umod(S)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(S){return this.words[0]&S},r.prototype.bincn=function(S){t("number"==typeof S);var E=S%26,R=(S-E)/26,B=1<<E;if(this.length<=R)return this._expand(R+1),this.words[R]|=B,this;for(var H=B,V=R;0!==H&&V<this.length;V++){var Z=0|this.words[V];H=(Z+=H)>>>26,this.words[V]=Z&=67108863}return 0!==H&&(this.words[V]=H,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(S){var E,R=S<0;if(0!==this.negative&&!R)return-1;if(0===this.negative&&R)return 1;if(this.strip(),this.length>1)E=1;else{R&&(S=-S),t(S<=67108863,"Number is too big");var B=0|this.words[0];E=B===S?0:B<S?-1:1}return 0!==this.negative?0|-E:E},r.prototype.cmp=function(S){if(0!==this.negative&&0===S.negative)return-1;if(0===this.negative&&0!==S.negative)return 1;var E=this.ucmp(S);return 0!==this.negative?0|-E:E},r.prototype.ucmp=function(S){if(this.length>S.length)return 1;if(this.length<S.length)return-1;for(var E=0,R=this.length-1;R>=0;R--){var B=0|this.words[R],H=0|S.words[R];if(B!==H){B<H?E=-1:B>H&&(E=1);break}}return E},r.prototype.gtn=function(S){return 1===this.cmpn(S)},r.prototype.gt=function(S){return 1===this.cmp(S)},r.prototype.gten=function(S){return this.cmpn(S)>=0},r.prototype.gte=function(S){return this.cmp(S)>=0},r.prototype.ltn=function(S){return-1===this.cmpn(S)},r.prototype.lt=function(S){return-1===this.cmp(S)},r.prototype.lten=function(S){return this.cmpn(S)<=0},r.prototype.lte=function(S){return this.cmp(S)<=0},r.prototype.eqn=function(S){return 0===this.cmpn(S)},r.prototype.eq=function(S){return 0===this.cmp(S)},r.red=function(S){return new O(S)},r.prototype.toRed=function(S){return t(!this.red,"Already a number in reduction context"),t(0===this.negative,"red works only with positives"),S.convertTo(this)._forceRed(S)},r.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(S){return this.red=S,this},r.prototype.forceRed=function(S){return t(!this.red,"Already a number in reduction context"),this._forceRed(S)},r.prototype.redAdd=function(S){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,S)},r.prototype.redIAdd=function(S){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,S)},r.prototype.redSub=function(S){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,S)},r.prototype.redISub=function(S){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,S)},r.prototype.redShl=function(S){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,S)},r.prototype.redMul=function(S){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.mul(this,S)},r.prototype.redIMul=function(S){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,S),this.red.imul(this,S)},r.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(S){return t(this.red&&!S.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,S)};var w={k256:null,p224:null,p192:null,p25519:null};function _(S,E){this.name=S,this.p=new r(E,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function T(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function L(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function O(S){if("string"==typeof S){var E=r._prime(S);this.m=E.p,this.prime=E}else t(S.gtn(1),"modulus must be greater than 1"),this.m=S,this.prime=null}function P(S){O.call(this,S),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var S=new r(null);return S.words=new Array(Math.ceil(this.n/13)),S},_.prototype.ireduce=function(S){var E,R=S;do{this.split(R,this.tmp),E=(R=(R=this.imulK(R)).iadd(this.tmp)).bitLength()}while(E>this.n);var B=E<this.n?-1:R.ucmp(this.p);return 0===B?(R.words[0]=0,R.length=1):B>0?R.isub(this.p):void 0!==R.strip?R.strip():R._strip(),R},_.prototype.split=function(S,E){S.iushrn(this.n,0,E)},_.prototype.imulK=function(S){return S.imul(this.k)},a(T,_),T.prototype.split=function(S,E){for(var R=Math.min(S.length,9),B=0;B<R;B++)E.words[B]=S.words[B];if(E.length=R,S.length<=9)return S.words[0]=0,void(S.length=1);var H=S.words[9];for(E.words[E.length++]=4194303&H,B=10;B<S.length;B++){var V=0|S.words[B];S.words[B-10]=(4194303&V)<<4|H>>>22,H=V}S.words[B-10]=H>>>=22,S.length-=0===H&&S.length>10?10:9},T.prototype.imulK=function(S){S.words[S.length]=0,S.words[S.length+1]=0,S.length+=2;for(var E=0,R=0;R<S.length;R++){var B=0|S.words[R];S.words[R]=67108863&(E+=977*B),E=64*B+(E/67108864|0)}return 0===S.words[S.length-1]&&(S.length--,0===S.words[S.length-1]&&S.length--),S},a(k,_),a(L,_),a(M,_),M.prototype.imulK=function(S){for(var E=0,R=0;R<S.length;R++){var B=19*(0|S.words[R])+E,H=67108863&B;B>>>=26,S.words[R]=H,E=B}return 0!==E&&(S.words[S.length++]=E),S},r._prime=function(S){if(w[S])return w[S];var E;if("k256"===S)E=new T;else if("p224"===S)E=new k;else if("p192"===S)E=new L;else{if("p25519"!==S)throw new Error("Unknown prime "+S);E=new M}return w[S]=E,E},O.prototype._verify1=function(S){t(0===S.negative,"red works only with positives"),t(S.red,"red works only with red numbers")},O.prototype._verify2=function(S,E){t(0==(S.negative|E.negative),"red works only with positives"),t(S.red&&S.red===E.red,"red works only with red numbers")},O.prototype.imod=function(S){return this.prime?this.prime.ireduce(S)._forceRed(this):S.umod(this.m)._forceRed(this)},O.prototype.neg=function(S){return S.isZero()?S.clone():this.m.sub(S)._forceRed(this)},O.prototype.add=function(S,E){this._verify2(S,E);var R=S.add(E);return R.cmp(this.m)>=0&&R.isub(this.m),R._forceRed(this)},O.prototype.iadd=function(S,E){this._verify2(S,E);var R=S.iadd(E);return R.cmp(this.m)>=0&&R.isub(this.m),R},O.prototype.sub=function(S,E){this._verify2(S,E);var R=S.sub(E);return R.cmpn(0)<0&&R.iadd(this.m),R._forceRed(this)},O.prototype.isub=function(S,E){this._verify2(S,E);var R=S.isub(E);return R.cmpn(0)<0&&R.iadd(this.m),R},O.prototype.shl=function(S,E){return this._verify1(S),this.imod(S.ushln(E))},O.prototype.imul=function(S,E){return this._verify2(S,E),this.imod(S.imul(E))},O.prototype.mul=function(S,E){return this._verify2(S,E),this.imod(S.mul(E))},O.prototype.isqr=function(S){return this.imul(S,S.clone())},O.prototype.sqr=function(S){return this.mul(S,S)},O.prototype.sqrt=function(S){if(S.isZero())return S.clone();var E=this.m.andln(3);if(t(E%2==1),3===E){var R=this.m.add(new r(1)).iushrn(2);return this.pow(S,R)}for(var B=this.m.subn(1),H=0;!B.isZero()&&0===B.andln(1);)H++,B.iushrn(1);t(!B.isZero());var V=new r(1).toRed(this),Z=V.redNeg(),W=this.m.subn(1).iushrn(1),G=this.m.bitLength();for(G=new r(2*G*G).toRed(this);0!==this.pow(G,W).cmp(Z);)G.redIAdd(Z);for(var X=this.pow(G,B),te=this.pow(S,B.addn(1).iushrn(1)),D=this.pow(S,B),N=H;0!==D.cmp(V);){for(var U=D,Q=0;0!==U.cmp(V);Q++)U=U.redSqr();t(Q<N);var j=this.pow(X,new r(1).iushln(N-Q-1));te=te.redMul(j),X=j.redSqr(),D=D.redMul(X),N=Q}return te},O.prototype.invm=function(S){var E=S._invmp(this.m);return 0!==E.negative?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},O.prototype.pow=function(S,E){if(E.isZero())return new r(1).toRed(this);if(0===E.cmpn(1))return S.clone();var R=new Array(16);R[0]=new r(1).toRed(this),R[1]=S;for(var B=2;B<R.length;B++)R[B]=this.mul(R[B-1],S);var H=R[0],V=0,Z=0,W=E.bitLength()%26;for(0===W&&(W=26),B=E.length-1;B>=0;B--){for(var G=E.words[B],X=W-1;X>=0;X--){var te=G>>X&1;H!==R[0]&&(H=this.sqr(H)),0!==te||0!==V?(V<<=1,V|=te,(4==++Z||0===B&&0===X)&&(H=this.mul(H,R[V]),Z=0,V=0)):Z=0}W=26}return H},O.prototype.convertTo=function(S){var E=S.umod(this.m);return E===S?E.clone():E},O.prototype.convertFrom=function(S){var E=S.clone();return E.red=null,E},r.mont=function(S){return new P(S)},a(P,O),P.prototype.convertTo=function(S){return this.imod(S.ushln(this.shift))},P.prototype.convertFrom=function(S){var E=this.imod(S.mul(this.rinv));return E.red=null,E},P.prototype.imul=function(S,E){if(S.isZero()||E.isZero())return S.words[0]=0,S.length=1,S;var R=S.imul(E),B=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=R.isub(B).iushrn(this.shift),V=H;return H.cmp(this.m)>=0?V=H.isub(this.m):H.cmpn(0)<0&&(V=H.iadd(this.m)),V._forceRed(this)},P.prototype.mul=function(S,E){if(S.isZero()||E.isZero())return new r(0)._forceRed(this);var R=S.mul(E),B=R.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=R.isub(B).iushrn(this.shift),V=H;return H.cmp(this.m)>=0?V=H.isub(this.m):H.cmpn(0)<0&&(V=H.iadd(this.m)),V._forceRed(this)},P.prototype.invm=function(S){return this.imod(S._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===b||b,this)},{buffer:2}],34:[function(m,b,v){"use strict";b.exports=function(e){var n,t,a,r=e.length,u=0;for(n=0;n<r;++n)u+=e[n].length;var s=new Array(u),i=0;for(n=0;n<r;++n){var l=e[n],c=l.length;for(t=0;t<c;++t){var f=s[i++]=new Array(c-1),g=0;for(a=0;a<c;++a)a!==t&&(f[g++]=l[a]);if(1&t){var h=f[1];f[1]=f[0],f[0]=h}}}return s}},{}],35:[function(m,b,v){"use strict";b.exports=function(f,g,h){switch(arguments.length){case 1:return l(f);case 2:return"function"==typeof g?s(f,f,g,!0):c(f,g);case 3:return s(f,g,h,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,n=m("typedarray-pool"),t=m("./lib/sweep"),a=m("./lib/intersect");function r(f,g){for(var h=0;h<f;++h)if(!(g[h]<=g[h+f]))return!0;return!1}function u(f,g,h,o){for(var x=0,d=0,w=0,_=f.length;w<_;++w){var T=f[w];if(!r(g,T)){for(var k=0;k<2*g;++k)h[x++]=T[k];o[d++]=w}}return d}function s(f,g,h,o){var x=f.length,d=g.length;if(!(x<=0||d<=0)){var w=f[0].length>>>1;if(!(w<=0)){var _,T=n.mallocDouble(2*w*x),k=n.mallocInt32(x);if((x=u(f,w,T,k))>0){if(1===w&&o)t.init(x),_=t.sweepComplete(w,h,0,x,T,k,0,x,T,k);else{var L=n.mallocDouble(2*w*d),M=n.mallocInt32(d);(d=u(g,w,L,M))>0&&(t.init(x+d),_=1===w?t.sweepBipartite(w,h,0,x,T,k,0,d,L,M):a(w,h,o,x,T,k,d,L,M),n.free(L),n.free(M))}n.free(T),n.free(k)}return _}}}function i(f,g){e.push([f,g])}function l(f){return e=[],s(f,f,i,!0),e}function c(f,g){return e=[],s(f,g,i,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(m,b,v){"use strict";function e(n){return n?function(t,a,r,u,s,i,l,c,f,g,h){return s-u>f-c?function(o,x,d,w,_,T,k,L,M,O,P){for(var S=2*o,E=w,R=S*w;E<_;++E,R+=S){var B=T[x+R],H=T[x+R+o],V=k[E];e:for(var Z=L,W=S*L;Z<M;++Z,W+=S){var te=P[Z];if(!(O[x+W+o]<B||H<O[x+W])){for(var D=x+1;D<o;++D)if(T[D+o+R]<O[D+W]||O[D+o+W]<T[D+R])continue e;var J=d(V,te);if(void 0!==J)return J}}}}(t,a,r,u,s,i,l,c,f,g,h):function(o,x,d,w,_,T,k,L,M,O,P){for(var S=2*o,E=L,R=S*L;E<M;++E,R+=S){var B=O[x+R],H=O[x+R+o],V=P[E];e:for(var Z=w,W=S*w;Z<_;++Z,W+=S){var te=k[Z];if(!(H<T[x+W]||T[x+W+o]<B)){for(var D=x+1;D<o;++D)if(T[D+o+W]<O[D+R]||O[D+o+R]<T[D+W])continue e;var J=d(te,V);if(void 0!==J)return J}}}}(t,a,r,u,s,i,l,c,f,g,h)}:function(t,a,r,u,s,i,l,c,f,g,h,o){return i-s>g-f?u?function(x,d,w,_,T,k,L,M,O,P,S){for(var E=2*x,R=_,B=E*_;R<T;++R,B+=E){var H=k[d+B],V=k[d+B+x],Z=L[R];e:for(var W=M,G=E*M;W<O;++W,G+=E){var X=P[d+G],te=S[W];if(!(X<=H||V<X)){for(var D=d+1;D<x;++D)if(k[D+x+B]<P[D+G]||P[D+x+G]<k[D+B])continue e;var J=w(te,Z);if(void 0!==J)return J}}}}(t,a,r,s,i,l,c,f,g,h,o):function(x,d,w,_,T,k,L,M,O,P,S){for(var E=2*x,R=_,B=E*_;R<T;++R,B+=E){var H=k[d+B],V=k[d+B+x],Z=L[R];e:for(var W=M,G=E*M;W<O;++W,G+=E){var X=P[d+G],te=S[W];if(!(X<H||V<X)){for(var D=d+1;D<x;++D)if(k[D+x+B]<P[D+G]||P[D+x+G]<k[D+B])continue e;var J=w(Z,te);if(void 0!==J)return J}}}}(t,a,r,s,i,l,c,f,g,h,o):u?function(x,d,w,_,T,k,L,M,O,P,S){for(var E=2*x,R=M,B=E*M;R<O;++R,B+=E){var H=P[d+B],V=S[R];e:for(var Z=_,W=E*_;Z<T;++Z,W+=E){var te=L[Z];if(!(H<=k[d+W]||k[d+W+x]<H)){for(var D=d+1;D<x;++D)if(k[D+x+W]<P[D+B]||P[D+x+B]<k[D+W])continue e;var J=w(V,te);if(void 0!==J)return J}}}}(t,a,r,s,i,l,c,f,g,h,o):function(x,d,w,_,T,k,L,M,O,P,S){for(var E=2*x,R=M,B=E*M;R<O;++R,B+=E){var H=P[d+B],V=S[R];e:for(var Z=_,W=E*_;Z<T;++Z,W+=E){var te=L[Z];if(!(H<k[d+W]||k[d+W+x]<H)){for(var D=d+1;D<x;++D)if(k[D+x+W]<P[D+B]||P[D+x+B]<k[D+W])continue e;var J=w(te,V);if(void 0!==J)return J}}}}(t,a,r,s,i,l,c,f,g,h,o)}}v.partial=e(!1),v.full=e(!0)},{}],37:[function(m,b,v){"use strict";b.exports=function(k,L,M,O,P,S,E,R,B){!function(Te,_e){var Me=8*n.log2(_e+1)*(Te+1)|0,Ie=n.nextPow2(6*Me);x.length<Ie&&(e.free(x),x=e.mallocInt32(Ie));var ze=n.nextPow2(2*Me);d.length<ze&&(e.free(d),d=e.mallocDouble(ze))}(k,O+E);var H,V=0,Z=2*k;for(w(V++,0,0,O,0,E,M?16:0,-1/0,1/0),M||w(V++,0,0,E,0,O,1,-1/0,1/0);V>0;){var W=6*(V-=1),G=x[W],X=x[W+1],te=x[W+2],D=x[W+3],N=x[W+4],U=x[W+5],Q=2*V,j=d[Q],J=d[Q+1],K=1&U,re=!!(16&U),ne=P,se=S,oe=R,pe=B;if(K&&(ne=R,se=B,oe=P,pe=S),!(2&U&&(te=f(k,G,X,te,ne,se,J),X>=te)||4&U&&(X=g(k,G,X,te,ne,se,j))>=te)){var ce=te-X,ge=N-D;if(re){if(k*ce*(ce+ge)<1<<22){if(void 0!==(H=u.scanComplete(k,G,L,X,te,ne,se,D,N,oe,pe)))return H;continue}}else{if(k*Math.min(ce,ge)<128){if(void 0!==(H=a(k,G,L,K,X,te,ne,se,D,N,oe,pe)))return H;continue}if(k*ce*ge<1<<22){if(void 0!==(H=u.scanBipartite(k,G,L,K,X,te,ne,se,D,N,oe,pe)))return H;continue}}var xe=l(k,G,X,te,ne,se,j,J);if(X<xe)if(k*(xe-X)<128){if(void 0!==(H=r(k,G+1,L,X,xe,ne,se,D,N,oe,pe)))return H}else if(G===k-2){if(void 0!==(H=K?u.sweepBipartite(k,L,D,N,oe,pe,X,xe,ne,se):u.sweepBipartite(k,L,X,xe,ne,se,D,N,oe,pe)))return H}else w(V++,G+1,X,xe,D,N,K,-1/0,1/0),w(V++,G+1,D,N,X,xe,1^K,-1/0,1/0);if(xe<te){var we=s(k,G,D,N,oe,pe),be=oe[Z*we+G],Se=c(k,G,we,N,oe,pe,be);if(Se<N&&w(V++,G,xe,te,Se,N,(4|K)+(re?16:0),be,J),D<we&&w(V++,G,xe,te,D,we,(2|K)+(re?16:0),j,be),we+1===Se){if(void 0!==(H=re?T(k,G,L,xe,te,ne,se,we,oe,pe[we]):_(k,G,L,K,xe,te,ne,se,we,oe,pe[we])))return H}else if(we<Se){var fe;if(re){if(xe<(fe=h(k,G,xe,te,ne,se,be))){var me=c(k,G,xe,fe,ne,se,be);if(G===k-2){if(xe<me&&void 0!==(H=u.sweepComplete(k,L,xe,me,ne,se,we,Se,oe,pe))||me<fe&&void 0!==(H=u.sweepBipartite(k,L,me,fe,ne,se,we,Se,oe,pe)))return H}else xe<me&&w(V++,G+1,xe,me,we,Se,16,-1/0,1/0),me<fe&&(w(V++,G+1,me,fe,we,Se,0,-1/0,1/0),w(V++,G+1,we,Se,me,fe,1,-1/0,1/0))}}else xe<(fe=K?o(k,G,xe,te,ne,se,be):h(k,G,xe,te,ne,se,be))&&(G===k-2?H=K?u.sweepBipartite(k,L,we,Se,oe,pe,xe,fe,ne,se):u.sweepBipartite(k,L,xe,fe,ne,se,we,Se,oe,pe):(w(V++,G+1,xe,fe,we,Se,K,-1/0,1/0),w(V++,G+1,we,Se,xe,fe,1^K,-1/0,1/0)))}}}}};var e=m("typedarray-pool"),n=m("bit-twiddle"),t=m("./brute"),a=t.partial,r=t.full,u=m("./sweep"),s=m("./median"),i=m("./partition"),l=i("!(lo>=p0)&&!(p1>=hi)"),c=i("lo===p0"),f=i("lo<p0"),g=i("hi<=p0"),h=i("lo<=p0&&p0<=hi"),o=i("lo<p0&&p0<=hi"),x=e.mallocInt32(1024),d=e.mallocDouble(1024);function w(k,L,M,O,P,S,E,R,B){var H=6*k;x[H]=L,x[H+1]=M,x[H+2]=O,x[H+3]=P,x[H+4]=S,x[H+5]=E;var V=2*k;d[V]=R,d[V+1]=B}function _(k,L,M,O,P,S,E,R,B,H,V){var Z=2*k,W=B*Z,G=H[W+L];e:for(var X=P,te=P*Z;X<S;++X,te+=Z){var D=E[te+L],N=E[te+L+k];if(!(G<D||N<G||O&&G===D)){for(var U,Q=R[X],j=L+1;j<k;++j)if(D=E[te+j],(N=E[te+j+k])<H[W+j]||H[W+j+k]<D)continue e;if(void 0!==(U=O?M(V,Q):M(Q,V)))return U}}}function T(k,L,M,O,P,S,E,R,B,H){var V=2*k,Z=R*V,W=B[Z+L];e:for(var G=O,X=O*V;G<P;++G,X+=V){var te=E[G];if(te!==H){var D=S[X+L],N=S[X+L+k];if(!(W<D||N<W)){for(var U=L+1;U<k;++U)if(D=S[X+U],(N=S[X+U+k])<B[Z+U]||B[Z+U+k]<D)continue e;var J=M(te,H);if(void 0!==J)return J}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(m,b,v){"use strict";b.exports=function(t,a,r,u,s,i){if(u<=r+1)return r;for(var l=r,c=u,f=u+r>>>1,g=2*t,h=f,o=s[g*f+a];l<c;){if(c-l<8){n(t,a,l,c,s,i),o=s[g*f+a];break}var x=c-l,d=Math.random()*x+l|0,w=s[g*d+a],_=Math.random()*x+l|0,T=s[g*_+a],k=Math.random()*x+l|0,L=s[g*k+a];w<=T?L>=T?(h=_,o=T):w>=L?(h=d,o=w):(h=k,o=L):T>=L?(h=_,o=T):L>=w?(h=d,o=w):(h=k,o=L);for(var M=g*(c-1),O=g*h,P=0;P<g;++P,++M,++O){var S=s[M];s[M]=s[O],s[O]=S}var E=i[c-1];for(i[c-1]=i[h],i[h]=E,M=g*(c-1),O=g*(h=e(t,a,l,c-1,s,i,o)),P=0;P<g;++P,++M,++O)S=s[M],s[M]=s[O],s[O]=S;if(E=i[c-1],i[c-1]=i[h],i[h]=E,f<h){for(c=h-1;l<c&&s[g*(c-1)+a]===o;)c-=1;c+=1}else{if(!(h<f))break;for(l=h+1;l<c&&s[g*l+a]===o;)l+=1}}return e(t,a,r,f,s,i,s[g*f+a])};var e=m("./partition")("lo<p0");function n(t,a,r,u,s,i){for(var l=2*t,c=l*(r+1)+a,f=r+1;f<u;++f,c+=l)for(var g=s[c],h=f,o=l*(f-1);h>r&&s[o+a]>g;--h,o-=l){for(var x=o,d=o+l,w=0;w<l;++w,++x,++d){var _=s[x];s[x]=s[d],s[d]=_}var T=i[h];i[h]=i[h-1],i[h-1]=T}}},{"./partition":39}],39:[function(m,b,v){"use strict";b.exports=function(n){return e[n]};var e={"lo===p0":function(n,t,a,r,u,s,i){for(var l=2*n,c=l*a,f=c,g=a,h=t,o=a;r>o;++o,c+=l)if(u[c+h]===i)if(g===o)g+=1,f+=l;else{for(var x=0;l>x;++x){var d=u[c+x];u[c+x]=u[f],u[f++]=d}var w=s[o];s[o]=s[g],s[g++]=w}return g},"lo<p0":function(n,t,a,r,u,s,i){for(var l=2*n,c=l*a,f=c,g=a,h=t,o=a;r>o;++o,c+=l)if(u[c+h]<i)if(g===o)g+=1,f+=l;else{for(var x=0;l>x;++x){var d=u[c+x];u[c+x]=u[f],u[f++]=d}var w=s[o];s[o]=s[g],s[g++]=w}return g},"lo<=p0":function(n,t,a,r,u,s,i){for(var l=2*n,c=l*a,f=c,g=a,h=n+t,o=a;r>o;++o,c+=l)if(u[c+h]<=i)if(g===o)g+=1,f+=l;else{for(var x=0;l>x;++x){var d=u[c+x];u[c+x]=u[f],u[f++]=d}var w=s[o];s[o]=s[g],s[g++]=w}return g},"hi<=p0":function(n,t,a,r,u,s,i){for(var l=2*n,c=l*a,f=c,g=a,h=n+t,o=a;r>o;++o,c+=l)if(u[c+h]<=i)if(g===o)g+=1,f+=l;else{for(var x=0;l>x;++x){var d=u[c+x];u[c+x]=u[f],u[f++]=d}var w=s[o];s[o]=s[g],s[g++]=w}return g},"lo<p0&&p0<=hi":function(n,t,a,r,u,s,i){for(var l=2*n,c=l*a,f=c,g=a,h=t,o=n+t,x=a;r>x;++x,c+=l)if(u[c+h]<i&&i<=u[c+o])if(g===x)g+=1,f+=l;else{for(var _=0;l>_;++_){var T=u[c+_];u[c+_]=u[f],u[f++]=T}var k=s[x];s[x]=s[g],s[g++]=k}return g},"lo<=p0&&p0<=hi":function(n,t,a,r,u,s,i){for(var l=2*n,c=l*a,f=c,g=a,h=t,o=n+t,x=a;r>x;++x,c+=l)if(u[c+h]<=i&&i<=u[c+o])if(g===x)g+=1,f+=l;else{for(var _=0;l>_;++_){var T=u[c+_];u[c+_]=u[f],u[f++]=T}var k=s[x];s[x]=s[g],s[g++]=k}return g},"!(lo>=p0)&&!(p1>=hi)":function(n,t,a,r,u,s,i,l){for(var c=2*n,f=c*a,g=f,h=a,o=t,x=n+t,d=a;r>d;++d,f+=c)if(!(u[f+o]>=i||l>=u[f+x]))if(h===d)h+=1,g+=c;else{for(var T=0;c>T;++T){var k=u[f+T];u[f+T]=u[g],u[g++]=k}var L=s[d];s[d]=s[h],s[h++]=L}return h}}},{}],40:[function(m,b,v){"use strict";function e(i,l,c){for(var f=2*(i+1),g=i+1;g<=l;++g){for(var h=c[f++],o=c[f++],x=g,d=f-2;x-- >i;){var w=c[d-2],_=c[d-1];if(w<h||w===h&&_<o)break;c[d]=w,c[d+1]=_,d-=2}c[d]=h,c[d+1]=o}}function n(i,l,c){var f=c[i*=2],g=c[i+1];c[i]=c[l*=2],c[i+1]=c[l+1],c[l]=f,c[l+1]=g}function t(i,l,c){c[i*=2]=c[l*=2],c[i+1]=c[l+1]}function a(i,l,c,f){c*=2;var g=f[i*=2],h=f[i+1];f[i]=f[l*=2],f[i+1]=f[l+1],f[l]=f[c],f[l+1]=f[c+1],f[c]=g,f[c+1]=h}function r(i,l,c,f,g){g[i*=2]=g[l*=2],g[l]=c,g[i+1]=g[l+1],g[l+1]=f}function u(i,l,c){var f=c[i*=2],g=c[l*=2];return!(f<g)&&(f!==g||c[i+1]>c[l+1])}function s(i,l,c,f){var g=f[i*=2];return g<l||g===l&&f[i+1]<c}b.exports=function(i,l){l<=128?e(0,l-1,i):function c(f,g,h){var o=(g-f+1)/6|0,x=f+o,d=g-o,w=f+g>>1,_=w-o,T=w+o,k=x,L=_,M=w,O=T,P=d,S=f+1,E=g-1,R=0;u(k,L,h)&&(R=k,k=L,L=R),u(O,P,h)&&(R=O,O=P,P=R),u(k,M,h)&&(R=k,k=M,M=R),u(L,M,h)&&(R=L,L=M,M=R),u(k,O,h)&&(R=k,k=O,O=R),u(M,O,h)&&(R=M,M=O,O=R),u(L,P,h)&&(R=L,L=P,P=R),u(L,M,h)&&(R=L,L=M,M=R),u(O,P,h)&&(R=O,O=P,P=R);for(var B=h[2*L],H=h[2*L+1],V=h[2*O],Z=h[2*O+1],W=2*k,G=2*M,X=2*P,te=2*x,D=2*w,N=2*d,U=0;U<2;++U){var j=h[G+U],J=h[X+U];h[te+U]=h[W+U],h[D+U]=j,h[N+U]=J}t(_,f,h),t(T,g,h);for(var K=S;K<=E;++K)if(s(K,B,H,h))K!==S&&n(K,S,h),++S;else if(!s(K,V,Z,h))for(;;){if(s(E,V,Z,h)){s(E,B,H,h)?(a(K,S,E,h),++S,--E):(n(K,E,h),--E);break}if(--E<K)break}r(f,S-1,B,H,h),r(g,E+1,V,Z,h),S-2-f<=32?e(f,S-2,h):c(f,S-2,h),g-(E+2)<=32?e(E+2,g,h):c(E+2,g,h),E-S<=32?e(S,E,h):c(S,E,h)}(0,l-1,i)}},{}],41:[function(m,b,v){"use strict";b.exports={init:function(h){var o=n.nextPow2(h);a.length<o&&(e.free(a),a=e.mallocInt32(o)),r.length<o&&(e.free(r),r=e.mallocInt32(o)),u.length<o&&(e.free(u),u=e.mallocInt32(o)),s.length<o&&(e.free(s),s=e.mallocInt32(o)),i.length<o&&(e.free(i),i=e.mallocInt32(o)),l.length<o&&(e.free(l),l=e.mallocInt32(o));var x=8*o;c.length<x&&(e.free(c),c=e.mallocDouble(x))},sweepBipartite:function(h,o,x,d,w,_,T,k,L,M){for(var O=0,P=2*h,S=h-1,E=P-1,R=x;R<d;++R){var B=_[R],H=P*R;c[O++]=w[H+S],c[O++]=-(B+1),c[O++]=w[H+E],c[O++]=B}for(R=T;R<k;++R){B=M[R]+(1<<28);var V=P*R;c[O++]=L[V+S],c[O++]=-B,c[O++]=L[V+E],c[O++]=B}var Z=O>>>1;t(c,Z);var W=0,G=0;for(R=0;R<Z;++R){var X=0|c[2*R+1];if(X>=1<<28)f(u,s,G--,X=X-(1<<28)|0);else if(X>=0)f(a,r,W--,X);else if(X<=-(1<<28)){X=-X-(1<<28)|0;for(var te=0;te<W;++te)if(void 0!==(D=o(a[te],X)))return D;g(u,s,G++,X)}else{for(X=-X-1|0,te=0;te<G;++te){var D;if(void 0!==(D=o(X,u[te])))return D}g(a,r,W++,X)}}},sweepComplete:function(h,o,x,d,w,_,T,k,L,M){for(var O=0,P=2*h,S=h-1,E=P-1,R=x;R<d;++R){var B=_[R]+1<<1,H=P*R;c[O++]=w[H+S],c[O++]=-B,c[O++]=w[H+E],c[O++]=B}for(R=T;R<k;++R){B=M[R]+1<<1;var V=P*R;c[O++]=L[V+S],c[O++]=1|-B,c[O++]=L[V+E],c[O++]=1|B}var Z=O>>>1;t(c,Z);var W=0,G=0,X=0;for(R=0;R<Z;++R){var te=0|c[2*R+1],D=1&te;if(R<Z-1&&te>>1==c[2*R+3]>>1&&(D=2,R+=1),te<0){for(var N=-(te>>1)-1,U=0;U<X;++U)if(void 0!==(Q=o(i[U],N)))return Q;if(0!==D)for(U=0;U<W;++U)if(void 0!==(Q=o(a[U],N)))return Q;if(1!==D)for(U=0;U<G;++U){var Q;if(void 0!==(Q=o(u[U],N)))return Q}0===D?g(a,r,W++,N):1===D?g(u,s,G++,N):2===D&&g(i,l,X++,N)}else N=(te>>1)-1,0===D?f(a,r,W--,N):1===D?f(u,s,G--,N):2===D&&f(i,l,X--,N)}},scanBipartite:function(h,o,x,d,w,_,T,k,L,M,O,P){var S=0,E=2*h,R=o,B=o+h,H=1,V=1;d?V=1<<28:H=1<<28;for(var Z=w;Z<_;++Z){var W=Z+H,G=E*Z;c[S++]=T[G+R],c[S++]=-W,c[S++]=T[G+B],c[S++]=W}for(Z=L;Z<M;++Z)W=Z+V,c[S++]=O[E*Z+R],c[S++]=-W;var te=S>>>1;t(c,te);var D=0;for(Z=0;Z<te;++Z){var N=0|c[2*Z+1];if(N<0){var U=!1;if((W=-N)>=1<<28?(U=!d,W-=1<<28):(U=!!d,W-=1),U)g(a,r,D++,W);else{var Q=P[W],j=E*W,J=O[j+o+1],K=O[j+o+1+h];e:for(var re=0;re<D;++re){var ne=a[re],se=E*ne;if(!(K<T[se+o+1]||T[se+o+1+h]<J)){for(var oe=o+2;oe<h;++oe)if(O[j+oe+h]<T[se+oe]||T[se+oe+h]<O[j+oe])continue e;var pe,ce=k[ne];if(void 0!==(pe=d?x(Q,ce):x(ce,Q)))return pe}}}}else f(a,r,D--,N-H)}},scanComplete:function(h,o,x,d,w,_,T,k,L,M,O){for(var P=0,S=2*h,E=o,R=o+h,B=d;B<w;++B){var H=B+(1<<28),V=S*B;c[P++]=_[V+E],c[P++]=-H,c[P++]=_[V+R],c[P++]=H}for(B=k;B<L;++B)H=B+1,c[P++]=M[S*B+E],c[P++]=-H;var W=P>>>1;t(c,W);var G=0;for(B=0;B<W;++B){var X=0|c[2*B+1];if(X<0)if((H=-X)>=1<<28)a[G++]=H-(1<<28);else{var te=O[H-=1],D=S*H,N=M[D+o+1],U=M[D+o+1+h];e:for(var Q=0;Q<G;++Q){var j=a[Q],J=T[j];if(J===te)break;var K=S*j;if(!(U<_[K+o+1]||_[K+o+1+h]<N)){for(var re=o+2;re<h;++re)if(M[D+re+h]<_[K+re]||_[K+re+h]<M[D+re])continue e;var ne=x(J,te);if(void 0!==ne)return ne}}}else{for(H=X-(1<<28),Q=G-1;Q>=0;--Q)if(a[Q]===H){for(re=Q+1;re<G;++re)a[re-1]=a[re];break}--G}}}};var e=m("typedarray-pool"),n=m("bit-twiddle"),t=m("./sort"),a=e.mallocInt32(1024),r=e.mallocInt32(1024),u=e.mallocInt32(1024),s=e.mallocInt32(1024),i=e.mallocInt32(1024),l=e.mallocInt32(1024),c=e.mallocDouble(8192);function f(h,o,x,d){var w=o[d],_=h[x-1];h[w]=_,o[_]=w}function g(h,o,x,d){h[x]=d,o[d]=x}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(m,b,v){"use strict";var e=m("./lib/monotone"),n=m("./lib/triangulation"),t=m("./lib/delaunay"),a=m("./lib/filter");function r(i){return[Math.min(i[0],i[1]),Math.max(i[0],i[1])]}function u(i,l){return i[0]-l[0]||i[1]-l[1]}function s(i,l,c){return l in i?i[l]:c}b.exports=function(i,l,c){Array.isArray(l)?(c=c||{},l=l||[]):(c=l||{},l=[]);var f=!!s(c,"delaunay",!0),g=!!s(c,"interior",!0),h=!!s(c,"exterior",!0),o=!!s(c,"infinity",!1);if(!g&&!h||0===i.length)return[];var x=e(i,l);if(f||g!==h||o){for(var d=n(i.length,l.map(r).sort(u)),w=0;w<x.length;++w){var _=x[w];d.addTriangle(_[0],_[1],_[2])}return f&&t(i,d),h?g?o?a(d,0,o):d.cells():a(d,1,o):a(d,-1)}return x}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(m,b,v){"use strict";var e=m("robust-in-sphere")[4];function n(t,a,r,u,s,i){var l=a.opposite(u,s);if(!(l<0)){if(s<u){var c=u;u=s,s=c,c=i,i=l,l=c}a.isConstraint(u,s)||e(t[u],t[s],t[i],t[l])<0&&r.push(u,s)}}m("binary-search-bounds"),b.exports=function(t,a){for(var r=[],u=t.length,s=a.stars,i=0;i<u;++i)for(var l=s[i],c=1;c<l.length;c+=2)if(!((o=l[c])<i||a.isConstraint(i,o))){for(var f=l[c-1],g=-1,h=1;h<l.length;h+=2)if(l[h-1]===o){g=l[h];break}g<0||e(t[i],t[o],t[f],t[g])<0&&r.push(i,o)}for(;r.length>0;){for(var o=r.pop(),x=(f=-1,g=-1,l=s[i=r.pop()],1);x<l.length;x+=2){var d=l[x-1],w=l[x];d===o?g=w:w===o&&(f=d)}f<0||g<0||e(t[i],t[o],t[f],t[g])>=0||(a.flip(i,o),n(t,a,r,f,i,g),n(t,a,r,i,g,f),n(t,a,r,g,o,f),n(t,a,r,o,f,g))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(m,b,v){"use strict";var e,n=m("binary-search-bounds");function t(r,u,s,i,l,c,f){this.cells=r,this.neighbor=u,this.flags=i,this.constraint=s,this.active=l,this.next=c,this.boundary=f}function a(r,u){return r[0]-u[0]||r[1]-u[1]||r[2]-u[2]}b.exports=function(r,u,s){var i=function(L,M){for(var O=L.cells(),P=O.length,S=0;S<P;++S){var E=(D=O[S])[0],R=D[1],B=D[2];R<B?R<E&&(D[0]=R,D[1]=B,D[2]=E):B<E&&(D[0]=B,D[1]=E,D[2]=R)}O.sort(a);var H=new Array(P);for(S=0;S<H.length;++S)H[S]=0;var V=[],Z=[],W=new Array(3*P),G=new Array(3*P),X=null;M&&(X=[]);var te=new t(O,W,G,H,V,Z,X);for(S=0;S<P;++S)for(var D=O[S],N=0;N<3;++N){var U=W[3*S+N]=te.locate(R=D[(N+1)%3],E=D[N],L.opposite(R,E)),Q=G[3*S+N]=L.isConstraint(E,R);U<0&&(Q?Z.push(S):(V.push(S),H[S]=1),M&&X.push([R,E,-1]))}return te}(r,s);if(0===u)return s?i.cells.concat(i.boundary):i.cells;for(var l=1,c=i.active,f=i.next,g=i.flags,h=i.cells,o=i.constraint,x=i.neighbor;c.length>0||f.length>0;){for(;c.length>0;){var d=c.pop();if(g[d]!==-l){g[d]=l;for(var w=0;w<3;++w){var _=x[3*d+w];_>=0&&0===g[_]&&(o[3*d+w]?f.push(_):(c.push(_),g[_]=l))}}}var T=f;f=c,c=T,f.length=0,l=-l}var k=function(L,M,O){for(var P=0,S=0;S<L.length;++S)M[S]===O&&(L[P++]=L[S]);return L.length=P,L}(h,g,u);return s?k.concat(i.boundary):k},t.prototype.locate=(e=[0,0,0],function(r,u,s){var i=r,l=u,c=s;return u<s?u<r&&(i=u,l=s,c=r):s<r&&(i=s,l=r,c=u),i<0?-1:(e[0]=i,e[1]=l,e[2]=c,n.eq(this.cells,e,a))})},{"binary-search-bounds":31}],45:[function(m,b,v){"use strict";var e=m("binary-search-bounds"),n=m("robust-orientation")[3];function t(f,g,h,o,x){this.a=f,this.b=g,this.idx=h,this.lowerIds=o,this.upperIds=x}function a(f,g,h,o){this.a=f,this.b=g,this.type=h,this.idx=o}function r(f,g){var h=f.a[0]-g.a[0]||f.a[1]-g.a[1]||f.type-g.type;return h||(0!==f.type&&(h=n(f.a,f.b,g.b))?h:f.idx-g.idx)}function u(f,g){return n(f.a,f.b,g)}function s(f,g,h,o,x){for(var d=e.lt(g,o,u),w=e.gt(g,o,u),_=d;_<w;++_){for(var T=g[_],k=T.lowerIds,L=k.length;L>1&&n(h[k[L-2]],h[k[L-1]],o)>0;)f.push([k[L-1],k[L-2],x]),L-=1;k.length=L,k.push(x);var M=T.upperIds;for(L=M.length;L>1&&n(h[M[L-2]],h[M[L-1]],o)<0;)f.push([M[L-2],M[L-1],x]),L-=1;M.length=L,M.push(x)}}function i(f,g){var h;return(h=f.a[0]<g.a[0]?n(f.a,f.b,g.a):n(g.b,g.a,f.a))?h:(h=g.b[0]<f.b[0]?n(f.a,f.b,g.b):n(g.b,g.a,f.b))||f.idx-g.idx}function l(f,g,h){var o=e.le(f,h,i),x=f[o],d=x.upperIds,w=d[d.length-1];x.upperIds=[w],f.splice(o+1,0,new t(h.a,h.b,h.idx,[w],d))}function c(f,g,h){var o=h.a;h.a=h.b,h.b=o;var x=e.eq(f,h,i);f[x-1].upperIds=f[x].upperIds,f.splice(x,1)}b.exports=function(f,g){for(var h=f.length,o=g.length,x=[],d=0;d<h;++d)x.push(new a(f[d],null,0,d));for(d=0;d<o;++d){var w=g[d],_=f[w[0]],T=f[w[1]];_[0]<T[0]?x.push(new a(_,T,2,d),new a(T,_,1,d)):_[0]>T[0]&&x.push(new a(T,_,2,d),new a(_,T,1,d))}x.sort(r);for(var k=x[0].a[0]-(1+Math.abs(x[0].a[0]))*Math.pow(2,-52),L=[new t([k,1],[k,0],-1,[],[],[],[])],M=[],O=(d=0,x.length);d<O;++d){var P=x[d],S=P.type;0===S?s(M,L,f,P.a,P.idx):2===S?l(L,0,P):c(L,0,P)}return M}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(m,b,v){"use strict";var e=m("binary-search-bounds");function n(r,u){this.stars=r,this.edges=u}b.exports=function(r,u){for(var s=new Array(r),i=0;i<r;++i)s[i]=[];return new n(s,u)};var t=n.prototype;function a(r,u,s){for(var i=1,l=r.length;i<l;i+=2)if(r[i-1]===u&&r[i]===s)return r[i-1]=r[l-2],r[i]=r[l-1],void(r.length=l-2)}t.isConstraint=function(){var r=[0,0];function u(s,i){return s[0]-i[0]||s[1]-i[1]}return function(s,i){return r[0]=Math.min(s,i),r[1]=Math.max(s,i),e.eq(this.edges,r,u)>=0}}(),t.removeTriangle=function(r,u,s){var i=this.stars;a(i[r],u,s),a(i[u],s,r),a(i[s],r,u)},t.addTriangle=function(r,u,s){var i=this.stars;i[r].push(u,s),i[u].push(s,r),i[s].push(r,u)},t.opposite=function(r,u){for(var s=this.stars[u],i=1,l=s.length;i<l;i+=2)if(s[i]===r)return s[i-1];return-1},t.flip=function(r,u){var s=this.opposite(r,u),i=this.opposite(u,r);this.removeTriangle(r,u,s),this.removeTriangle(u,r,i),this.addTriangle(r,i,s),this.addTriangle(u,s,i)},t.edges=function(){for(var r=this.stars,u=[],s=0,i=r.length;s<i;++s)for(var l=r[s],c=0,f=l.length;c<f;c+=2)u.push([l[c],l[c+1]]);return u},t.cells=function(){for(var r=this.stars,u=[],s=0,i=r.length;s<i;++s)for(var l=r[s],c=0,f=l.length;c<f;c+=2){var g=l[c],h=l[c+1];s<Math.min(g,h)&&u.push([s,g,h])}return u}},{"binary-search-bounds":31}],47:[function(m,b,v){"use strict";b.exports=function(e){for(var n=1,t=1;t<e.length;++t)for(var a=0;a<t;++a)if(e[t]<e[a])n=-n;else if(e[a]===e[t])return 0;return n}},{}],48:[function(m,b,v){"use strict";var e=m("dup"),n=m("robust-linear-solve");function t(u,s){for(var i=0,l=u.length,c=0;c<l;++c)i+=u[c]*s[c];return i}function a(u){var s=u.length;if(0===s)return[];var i=e([u.length+1,u.length+1],1),l=e([u.length+1],1);i[s][s]=0;for(var c=0;c<s;++c){for(var f=0;f<=c;++f)i[f][c]=i[c][f]=2*t(u[c],u[f]);l[c]=t(u[c],u[c])}var g=n(i,l),h=0,o=g[s+1];for(c=0;c<o.length;++c)h+=o[c];var x=new Array(s);for(c=0;c<s;++c){o=g[c];var d=0;for(f=0;f<o.length;++f)d+=o[f];x[c]=d/h}return x}function r(u){if(0===u.length)return[];for(var s=u[0].length,i=e([s]),l=a(u),c=0;c<u.length;++c)for(var f=0;f<s;++f)i[f]+=u[c][f]*l[c];return i}r.barycenetric=a,b.exports=r},{dup:65,"robust-linear-solve":283}],49:[function(m,b,v){b.exports=function(n){for(var t=e(n),a=0,r=0;r<n.length;++r)for(var u=n[r],s=0;s<t.length;++s)a+=Math.pow(u[s]-t[s],2);return Math.sqrt(a/n.length)};var e=m("circumcenter")},{circumcenter:48}],50:[function(m,b,v){"use strict";b.exports=function(w,_,T){var k,S,R,B;if(T){k=_;for(var L=new Array(_.length),M=0;M<_.length;++M){var O=_[M];L[M]=[O[0],O[1],T[M]]}_=L}for(var P=(R=!!T,void 0,x(_,B=g(S=w,[],f(S)),R),!!B);d(w,_,!!T);)P=!0;if(T&&P)for(k.length=0,T.length=0,M=0;M<_.length;++M)k.push([(O=_[M])[0],O[1]]),T.push(O[2]);return P};var e=m("union-find"),n=m("box-intersect"),t=m("robust-segment-intersect"),a=m("big-rat"),r=m("big-rat/cmp"),u=m("big-rat/to-float"),s=m("rat-vec"),i=m("nextafter"),l=m("./lib/rat-seg-intersect");function c(w){var _=u(w);return[i(_,-1/0),i(_,1/0)]}function f(w){for(var _=new Array(w.length),T=0;T<w.length;++T){var k=w[T];_[T]=[i(k[0],-1/0),i(k[1],-1/0),i(k[0],1/0),i(k[1],1/0)]}return _}function g(w,_,T){for(var k=_.length,L=new e(k),M=[],O=0;O<_.length;++O){var P=_[O],S=c(P[0]),E=c(P[1]);M.push([i(S[0],-1/0),i(E[0],-1/0),i(S[1],1/0),i(E[1],1/0)])}n(M,function(Z,W){L.link(Z,W)});var R=!0,B=new Array(k);for(O=0;O<k;++O)(V=L.find(O))!==O&&(R=!1,w[V]=[Math.min(w[O][0],w[V][0]),Math.min(w[O][1],w[V][1])]);if(R)return null;var H=0;for(O=0;O<k;++O){var V;(V=L.find(O))===O?(B[O]=H,w[H++]=w[O]):B[O]=-1}for(w.length=H,O=0;O<k;++O)B[O]<0&&(B[O]=B[L.find(O)]);return B}function h(w,_){return w[0]-_[0]||w[1]-_[1]}function o(w,_){return w[0]-_[0]||w[1]-_[1]||(w[2]<_[2]?-1:w[2]>_[2]?1:0)}function x(w,_,T){if(0!==w.length){if(_)for(var k=0;k<w.length;++k){var L=_[(O=w[k])[0]],M=_[O[1]];O[0]=Math.min(L,M),O[1]=Math.max(L,M)}else for(k=0;k<w.length;++k){var O;L=(O=w[k])[0],M=O[1],O[0]=Math.min(L,M),O[1]=Math.max(L,M)}w.sort(T?o:h);var P=1;for(k=1;k<w.length;++k){var S=w[k-1],E=w[k];(E[0]!==S[0]||E[1]!==S[1]||T&&E[2]!==S[2])&&(w[P++]=E)}w.length=P}}function d(w,_,T){var S,E,B,k=function(S,E){for(var R=new Array(E.length),B=0;B<E.length;++B){var H=E[B],V=S[H[0]],Z=S[H[1]];R[B]=[i(Math.min(V[0],Z[0]),-1/0),i(Math.min(V[1],Z[1]),-1/0),i(Math.max(V[0],Z[0]),1/0),i(Math.max(V[1],Z[1]),1/0)]}return R}(w,_),L=(S=w,E=_,B=[],n(k,function(H,V){var Z=E[H],W=E[V];Z[0]!==W[0]&&Z[0]!==W[1]&&Z[1]!==W[0]&&Z[1]!==W[1]&&t(S[Z[0]],S[Z[1]],S[W[0]],S[W[1]])&&B.push([H,V])}),B),O=function(S,E,R,B){var H=[];return n(R,B,function(V,Z){var W=E[V];if(W[0]!==Z&&W[1]!==Z){var G=S[Z];t(S[W[0]],S[W[1]],G,G)&&H.push([V,Z])}}),H}(w,_,k,f(w)),P=g(w,function(S,E,R,B,H){var V,Z,W=S.map(function(ge){return[a(ge[0]),a(ge[1])]});for(V=0;V<R.length;++V){var G=R[V],X=G[1],te=E[Z=G[0]],D=E[X],N=l(s(S[te[0]]),s(S[te[1]]),s(S[D[0]]),s(S[D[1]]));if(N){var U=S.length;S.push([u(N[0]),u(N[1])]),W.push(N),B.push([Z,U],[X,U])}}for(B.sort(function(ge,xe){if(ge[0]!==xe[0])return ge[0]-xe[0];var we=W[ge[1]],be=W[xe[1]];return r(we[0],be[0])||r(we[1],be[1])}),V=B.length-1;V>=0;--V){var Q=E[Z=(pe=B[V])[0]],j=Q[0],J=Q[1],K=S[j],re=S[J];if((K[0]-re[0]||K[1]-re[1])<0){var ne=j;j=J,J=ne}Q[0]=j;var se,oe=Q[1]=pe[1];for(H&&(se=Q[2]);V>0&&B[V-1][0]===Z;){var pe,ce=(pe=B[--V])[1];E.push(H?[oe,ce,se]:[oe,ce]),oe=ce}E.push(H?[oe,J,se]:[oe,J])}return W}(w,_,L,O,T));return x(_,P,T),!!P||L.length>0||O.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(m,b,v){"use strict";b.exports=function(l,c,f,g){var h=r(c,l),o=r(g,f),x=i(h,o);if(0===a(x))return null;var w=i(o,r(l,f)),_=n(w,x),T=s(h,_);return u(l,T)};var e=m("big-rat/mul"),n=m("big-rat/div"),t=m("big-rat/sub"),a=m("big-rat/sign"),r=m("rat-vec/sub"),u=m("rat-vec/add"),s=m("rat-vec/muls");function i(l,c){return t(e(l[0],c[1]),e(l[1],c[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(m,b,v){b.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(m,b,v){"use strict";var e=m("./colorScale"),n=m("lerp");function t(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function a(u){for(var s,i="#",l=0;l<3;++l)i+=("00"+(s=(s=u[l]).toString(16))).substr(s.length);return i}function r(u){return"rgba("+u.join(",")+")"}b.exports=function(u){var s,i,l,c,f,g,h,o,x,d;if(u||(u={}),o=(u.nshades||72)-1,h=u.format||"hex",(g=u.colormap)||(g="jet"),"string"==typeof g){if(g=g.toLowerCase(),!e[g])throw Error(g+" not a supported colorscale");f=e[g]}else{if(!Array.isArray(g))throw Error("unsupported colormap option",g);f=g.slice()}if(f.length>o+1)throw new Error(g+" map requires nshades to be at least size "+f.length);x=Array.isArray(u.alpha)?2!==u.alpha.length?[1,1]:u.alpha.slice():"number"==typeof u.alpha?[u.alpha,u.alpha]:[1,1],s=f.map(function(L){return Math.round(L.index*o)}),x[0]=Math.min(Math.max(x[0],0),1),x[1]=Math.min(Math.max(x[1],0),1);var w=f.map(function(L,M){var O=f[M].index,P=f[M].rgb.slice();return 4===P.length&&P[3]>=0&&P[3]<=1||(P[3]=x[0]+(x[1]-x[0])*O),P}),_=[];for(d=0;d<s.length-1;++d){c=s[d+1]-s[d],i=w[d],l=w[d+1];for(var T=0;T<c;T++){var k=T/c;_.push([Math.round(n(i[0],l[0],k)),Math.round(n(i[1],l[1],k)),Math.round(n(i[2],l[2],k)),n(i[3],l[3],k)])}}return _.push(f[f.length-1].rgb.concat(x[1])),"hex"===h?_=_.map(a):"rgbaString"===h?_=_.map(r):"float"===h&&(_=_.map(t)),_}},{"./colorScale":52,lerp:240}],54:[function(m,b,v){"use strict";b.exports=function(s,i,l,c){var f=e(i,l,c);if(0===f){var g=n(e(s,i,l)),h=n(e(s,i,c));if(g===h){if(0===g){var o=u(s,i,l);return o===u(s,i,c)?0:o?1:-1}return 0}return 0===h?g>0||u(s,i,c)?-1:1:0===g?h>0||u(s,i,l)?1:-1:n(h-g)}var d=e(s,i,l);return d>0?f>0&&e(s,i,c)>0?1:-1:d<0?f>0||e(s,i,c)>0?1:-1:e(s,i,c)>0||u(s,i,l)?1:-1};var e=m("robust-orientation"),n=m("signum"),t=m("two-sum"),a=m("robust-product"),r=m("robust-sum");function u(s,i,l){var c=t(s[0],-i[0]),f=t(s[1],-i[1]),g=t(l[0],-i[0]),h=t(l[1],-i[1]),o=r(a(c,g),a(f,h));return o[o.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(m,b,v){"use strict";b.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(m,b,v){b.exports=function(t,a){var r=t.length,u=t.length-a.length;if(u)return u;switch(r){case 0:return 0;case 1:return t[0]-a[0];case 2:return t[0]+t[1]-a[0]-a[1]||e(t[0],t[1])-e(a[0],a[1]);case 3:var s=t[0]+t[1],i=a[0]+a[1];if(u=s+t[2]-(i+a[2]))return u;var l=e(t[0],t[1]),c=e(a[0],a[1]);return e(l,t[2])-e(c,a[2])||e(l+t[2],s)-e(c+a[2],i);case 4:var f=t[0],g=t[1],h=t[2],o=t[3],x=a[0],d=a[1],w=a[2],_=a[3];return f+g+h+o-(x+d+w+_)||e(f,g,h,o)-e(x,d,w,_,x)||e(f+g,f+h,f+o,g+h,g+o,h+o)-e(x+d,x+w,x+_,d+w,d+_,w+_)||e(f+g+h,f+g+o,f+h+o,g+h+o)-e(x+d+w,x+d+_,x+w+_,d+w+_);default:for(var T=t.slice().sort(n),k=a.slice().sort(n),L=0;L<r;++L)if(u=T[L]-k[L])return u;return 0}};var e=Math.min;function n(t,a){return t-a}},{}],57:[function(m,b,v){"use strict";var e=m("compare-cell"),n=m("cell-orientation");b.exports=function(t,a){return e(t,a)||n(t)-n(a)}},{"cell-orientation":47,"compare-cell":56}],58:[function(m,b,v){"use strict";var e=m("./lib/ch1d"),n=m("./lib/ch2d"),t=m("./lib/chnd");b.exports=function(a){var r=a.length;if(0===r)return[];if(1===r)return[[0]];var u=a[0].length;return 0===u?[]:1===u?e(a):2===u?n(a):t(a,u)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(m,b,v){"use strict";b.exports=function(e){for(var n=0,t=0,a=1;a<e.length;++a)e[a][0]<e[n][0]&&(n=a),e[a][0]>e[t][0]&&(t=a);return n<t?[[n],[t]]:n>t?[[t],[n]]:[[n]]}},{}],60:[function(m,b,v){"use strict";b.exports=function(n){var t=e(n),a=t.length;if(a<=2)return[];for(var r=new Array(a),u=t[a-1],s=0;s<a;++s){var i=t[s];r[s]=[u,i],u=i}return r};var e=m("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(m,b,v){"use strict";b.exports=function(t,a){try{return e(t,!0)}catch(s){var r=n(t);if(r.length<=a)return[];var u=function(i,l){for(var c=i.length,f=new Array(c),g=0;g<l.length;++g)f[g]=i[l[g]];var h=l.length;for(g=0;g<c;++g)l.indexOf(g)<0&&(f[h++]=i[g]);return f}(t,r);return function(i,l){for(var c=i.length,f=l.length,g=0;g<c;++g)for(var h=i[g],o=0;o<h.length;++o){var x=h[o];if(x<f)h[o]=l[x];else{x-=f;for(var d=0;d<f;++d)x>=l[d]&&(x+=1);h[o]=x}}return i}(e(u,!0),r)}};var e=m("incremental-convex-hull"),n=m("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(m,b,v){"use strict";b.exports=function(e,n,t,a,r,u){var s=r-1,i=r*r,l=s*s,c=(1+2*r)*l,f=r*l,g=i*(3-2*r),h=i*s;if(e.length){u||(u=new Array(e.length));for(var o=e.length-1;o>=0;--o)u[o]=c*e[o]+f*n[o]+g*t[o]+h*a[o];return u}return c*e+f*n+g*t+h*a},b.exports.derivative=function(e,n,t,a,r,u){var s=6*r*r-6*r,i=3*r*r-4*r+1,l=-6*r*r+6*r,c=3*r*r-2*r;if(e.length){u||(u=new Array(e.length));for(var f=e.length-1;f>=0;--f)u[f]=s*e[f]+i*n[f]+l*t[f]+c*a[f];return u}return s*e+i*n+l*t[f]+c*a}},{}],63:[function(m,b,v){"use strict";var e=m("incremental-convex-hull"),n=m("uniq");function t(r,u){this.point=r,this.index=u}function a(r,u){for(var s=r.point,i=u.point,l=s.length,c=0;c<l;++c){var f=i[c]-s[c];if(f)return f}return 0}b.exports=function(r,u){var s=r.length;if(0===s)return[];var i=r[0].length;if(i<1)return[];if(1===i)return function(O,P,S){if(1===O)return S?[[-1,0]]:[];var E=P.map(function(Z,W){return[Z[0],W]});E.sort(function(Z,W){return Z[0]-W[0]});for(var R=new Array(O-1),B=1;B<O;++B)R[B-1]=[E[B-1][1],E[B][1]];return S&&R.push([-1,R[0][1]],[R[O-1][1],-1]),R}(s,r,u);for(var l=new Array(s),c=1,f=0;f<s;++f){for(var g=r[f],h=new Array(i+1),o=0,x=0;x<i;++x){var d=g[x];h[x]=d,o+=d*d}h[i]=o,l[f]=new t(h,f),c=Math.max(o,c)}n(l,a),s=l.length;var w=new Array(s+i+1),_=new Array(s+i+1),T=(i+1)*(i+1)*c,k=new Array(i+1);for(f=0;f<=i;++f)k[f]=0;for(k[i]=T,w[0]=k.slice(),_[0]=-1,f=0;f<=i;++f)(h=k.slice())[f]=1,w[f+1]=h,_[f+1]=-1;for(f=0;f<s;++f){var L=l[f];w[f+i+1]=L.point,_[f+i+1]=L.index}var M=e(w,!1);if(M=M.filter(u?function(O){for(var P=0,S=0;S<=i;++S){var E=_[O[S]];if(E<0&&++P>=2)return!1;O[S]=E}return!0}:function(O){for(var P=0;P<=i;++P){var S=_[O[P]];if(S<0)return!1;O[P]=S}return!0}),1&i)for(f=0;f<M.length;++f)h=(L=M[f])[0],L[0]=L[1],L[1]=h;return M}},{"incremental-convex-hull":233,uniq:310}],64:[function(m,b,v){(function(e){(function(){var n=!1;if("undefined"!=typeof Float64Array){var t=new Float64Array(1),a=new Uint32Array(t.buffer);t[0]=1,n=!0,1072693248===a[1]?(b.exports=function(u){return t[0]=u,[a[0],a[1]]},b.exports.pack=function(u,s){return a[0]=u,a[1]=s,t[0]},b.exports.lo=function(u){return t[0]=u,a[0]},b.exports.hi=function(u){return t[0]=u,a[1]}):1072693248===a[0]?(b.exports=function(u){return t[0]=u,[a[1],a[0]]},b.exports.pack=function(u,s){return a[1]=u,a[0]=s,t[0]},b.exports.lo=function(u){return t[0]=u,a[1]},b.exports.hi=function(u){return t[0]=u,a[0]}):n=!1}if(!n){var r=new e(8);b.exports=function(u){return r.writeDoubleLE(u,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},b.exports.pack=function(u,s){return r.writeUInt32LE(u,0,!0),r.writeUInt32LE(s,4,!0),r.readDoubleLE(0,!0)},b.exports.lo=function(u){return r.writeDoubleLE(u,0,!0),r.readUInt32LE(0,!0)},b.exports.hi=function(u){return r.writeDoubleLE(u,0,!0),r.readUInt32LE(4,!0)}}b.exports.sign=function(u){return b.exports.hi(u)>>>31},b.exports.exponent=function(u){return(b.exports.hi(u)<<1>>>21)-1023},b.exports.fraction=function(u){var s=b.exports.lo(u),i=b.exports.hi(u),l=1048575&i;return 2146435072&i&&(l+=1<<20),[s,l]},b.exports.denormalized=function(u){return!(2146435072&b.exports.hi(u))}}).call(this)}).call(this,m("buffer").Buffer)},{buffer:3}],65:[function(m,b,v){"use strict";b.exports=function(e,n){switch(void 0===n&&(n=0),typeof e){case"number":if(e>0)return function(t,a){var r,u;for(r=new Array(t),u=0;u<t;++u)r[u]=a;return r}(0|e,n);break;case"object":if("number"==typeof e.length)return function t(a,r,u){var s=0|a[u];if(s<=0)return[];var i,l=new Array(s);if(u===a.length-1)for(i=0;i<s;++i)l[i]=r;else for(i=0;i<s;++i)l[i]=t(a,r,u+1);return l}(e,n,0)}return[]}},{}],66:[function(m,b,v){"use strict";b.exports=function(n,t){var a=n.length;if("number"!=typeof t){t=0;for(var r=0;r<a;++r){var u=n[r];t=Math.max(t,u[0],u[1])}t=1+(0|t)}t|=0;var s=new Array(t);for(r=0;r<t;++r)s[r]=[];for(r=0;r<a;++r)s[(u=n[r])[0]].push(u[1]),s[u[1]].push(u[0]);for(var i=0;i<t;++i)e(s[i],function(l,c){return l-c});return s};var e=m("uniq")},{uniq:310}],67:[function(m,b,v){"use strict";b.exports=function(e,n,t){var a=n||0,r=t||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[a*e[12]+e[8],a*e[13]+e[9],a*e[14]+e[10],a*e[15]+e[11]],[r*e[12]-e[8],r*e[13]-e[9],r*e[14]-e[10],r*e[15]-e[11]]]}},{}],68:[function(m,b,v){"use strict";b.exports=function(s,i,l){switch(arguments.length){case 0:return new a([0],[0],0);case 1:return"number"==typeof s?new a(c=u(s),c,0):new a(s,u(s.length),0);case 2:if("number"==typeof i){var c=u(s.length);return new a(s,c,+i)}l=0;case 3:if(s.length!==i.length)throw new Error("state and velocity lengths must match");return new a(s,i,l)}};var e=m("cubic-hermite"),n=m("binary-search-bounds");function t(s,i,l){return Math.min(i,Math.max(s,l))}function a(s,i,l){this.dimension=s.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var c=0;c<this.dimension;++c)this.bounds[0][c]=-1/0,this.bounds[1][c]=1/0;this._state=s.slice().reverse(),this._velocity=i.slice().reverse(),this._time=[l],this._scratch=[s.slice(),s.slice(),s.slice(),s.slice(),s.slice()]}var r=a.prototype;function u(s){for(var i=new Array(s),l=0;l<s;++l)i[l]=0;return i}r.flush=function(s){var i=n.gt(this._time,s)-1;i<=0||(this._time.splice(0,i),this._state.splice(0,i*this.dimension),this._velocity.splice(0,i*this.dimension))},r.curve=function(s){var i=this._time,l=i.length,c=n.le(i,s),f=this._scratch[0],g=this._state,h=this._velocity,o=this.dimension,x=this.bounds;if(c<0)for(var d=o-1,w=0;w<o;++w,--d)f[w]=g[d];else if(c>=l-1){d=g.length-1;var _=s-i[l-1];for(w=0;w<o;++w,--d)f[w]=g[d]+_*h[d]}else{d=o*(c+1)-1;var T=i[c],k=i[c+1]-T||1,L=this._scratch[1],M=this._scratch[2],O=this._scratch[3],P=this._scratch[4],S=!0;for(w=0;w<o;++w,--d)L[w]=g[d],O[w]=h[d]*k,M[w]=g[d+o],P[w]=h[d+o]*k,S=S&&L[w]===M[w]&&O[w]===P[w]&&0===O[w];if(S)for(w=0;w<o;++w)f[w]=L[w];else e(L,O,M,P,(s-T)/k,f)}var E=x[0],R=x[1];for(w=0;w<o;++w)f[w]=t(E[w],R[w],f[w]);return f},r.dcurve=function(s){var i=this._time,l=i.length,c=n.le(i,s),f=this._scratch[0],g=this._state,h=this._velocity,o=this.dimension;if(c>=l-1)for(var x=g.length-1,d=0;d<o;++d,--x)f[d]=h[x];else{x=o*(c+1)-1;var w=i[c],_=i[c+1]-w||1,T=this._scratch[1],k=this._scratch[2],L=this._scratch[3],M=this._scratch[4],O=!0;for(d=0;d<o;++d,--x)T[d]=g[x],L[d]=h[x]*_,k[d]=g[x+o],M[d]=h[x+o]*_,O=O&&T[d]===k[d]&&L[d]===M[d]&&0===L[d];if(O)for(d=0;d<o;++d)f[d]=0;else for(e.derivative(T,L,k,M,(s-w)/_,f),d=0;d<o;++d)f[d]/=_}return f},r.lastT=function(){var s=this._time;return s[s.length-1]},r.stable=function(){for(var s=this._velocity,i=s.length,l=this.dimension-1;l>=0;--l)if(s[--i])return!1;return!0},r.jump=function(s){var i=this.lastT(),l=this.dimension;if(!(s<i||arguments.length!==l+1)){var c=this._state,f=this._velocity,g=c.length-this.dimension,h=this.bounds,o=h[0],x=h[1];this._time.push(i,s);for(var d=0;d<2;++d)for(var w=0;w<l;++w)c.push(c[g++]),f.push(0);for(this._time.push(s),w=l;w>0;--w)c.push(t(o[w-1],x[w-1],arguments[w])),f.push(0)}},r.push=function(s){var i=this.lastT(),l=this.dimension;if(!(s<i||arguments.length!==l+1)){var c=this._state,f=this._velocity,g=c.length-this.dimension,h=s-i,o=this.bounds,x=o[0],d=o[1],w=h>1e-6?1/h:0;this._time.push(s);for(var _=l;_>0;--_){var T=t(x[_-1],d[_-1],arguments[_]);c.push(T),f.push((T-c[g++])*w)}}},r.set=function(s){var i=this.dimension;if(!(s<this.lastT()||arguments.length!==i+1)){var l=this._state,c=this._velocity,f=this.bounds,g=f[0],h=f[1];this._time.push(s);for(var o=i;o>0;--o)l.push(t(g[o-1],h[o-1],arguments[o])),c.push(0)}},r.move=function(s){var i=this.lastT(),l=this.dimension;if(!(s<=i||arguments.length!==l+1)){var c=this._state,f=this._velocity,g=c.length-this.dimension,h=this.bounds,o=h[0],x=h[1],d=s-i,w=d>1e-6?1/d:0;this._time.push(s);for(var _=l;_>0;--_){var T=arguments[_];c.push(t(o[_-1],x[_-1],c[g++]+T)),f.push(T*w)}}},r.idle=function(s){var i=this.lastT();if(!(s<i)){var l=this.dimension,c=this._state,f=this._velocity,g=c.length-l,h=this.bounds,o=h[0],x=h[1],d=s-i;this._time.push(s);for(var w=l-1;w>=0;--w)c.push(t(o[w],x[w],c[g]+d*f[g])),f.push(0),g+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(m,b,v){"use strict";function e(o,x,d,w,_,T){this._color=o,this.key=x,this.value=d,this.left=w,this.right=_,this._count=T}function n(o){return new e(o._color,o.key,o.value,o.left,o.right,o._count)}function t(o,x){return new e(o,x.key,x.value,x.left,x.right,x._count)}function a(o){o._count=1+(o.left?o.left._count:0)+(o.right?o.right._count:0)}function r(o,x){this._compare=o,this.root=x}b.exports=function(o){return new r(o||h,null)};var u=r.prototype;function s(o,x){var d;return x.left&&(d=s(o,x.left))?d:(d=o(x.key,x.value))||(x.right?s(o,x.right):void 0)}function i(o,x,d,w){var _;return x(o,w.key)<=0&&(w.left&&(_=i(o,x,d,w.left))||(_=d(w.key,w.value)))?_:w.right?i(o,x,d,w.right):void 0}function l(o,x,d,w,_){var T,k=d(o,_.key),L=d(x,_.key);return k<=0&&(_.left&&(T=l(o,x,d,w,_.left))||L>0&&(T=w(_.key,_.value)))?T:L>0&&_.right?l(o,x,d,w,_.right):void 0}function c(o,x){this.tree=o,this._stack=x}Object.defineProperty(u,"keys",{get:function(){var o=[];return this.forEach(function(x,d){o.push(x)}),o}}),Object.defineProperty(u,"values",{get:function(){var o=[];return this.forEach(function(x,d){o.push(d)}),o}}),Object.defineProperty(u,"length",{get:function(){return this.root?this.root._count:0}}),u.insert=function(o,x){for(var d=this._compare,w=this.root,_=[],T=[];w;){var k=d(o,w.key);_.push(w),T.push(k),w=k<=0?w.left:w.right}_.push(new e(0,o,x,null,null,1));for(var L=_.length-2;L>=0;--L)w=_[L],_[L]=T[L]<=0?new e(w._color,w.key,w.value,_[L+1],w.right,w._count+1):new e(w._color,w.key,w.value,w.left,_[L+1],w._count+1);for(L=_.length-1;L>1;--L){var M=_[L-1];if(w=_[L],1===M._color||1===w._color)break;var O=_[L-2];if(O.left===M)if(M.left===w){if(!(P=O.right)||0!==P._color){O._color=0,O.left=M.right,M._color=1,M.right=O,_[L-2]=M,_[L-1]=w,a(O),a(M),L>=3&&((S=_[L-3]).left===O?S.left=M:S.right=M);break}M._color=1,O.right=t(1,P),O._color=0,L-=1}else{if(!(P=O.right)||0!==P._color){M.right=w.left,O._color=0,O.left=w.right,w._color=1,w.left=M,w.right=O,_[L-2]=w,_[L-1]=M,a(O),a(M),a(w),L>=3&&((S=_[L-3]).left===O?S.left=w:S.right=w);break}M._color=1,O.right=t(1,P),O._color=0,L-=1}else if(M.right===w){if(!(P=O.left)||0!==P._color){O._color=0,O.right=M.left,M._color=1,M.left=O,_[L-2]=M,_[L-1]=w,a(O),a(M),L>=3&&((S=_[L-3]).right===O?S.right=M:S.left=M);break}M._color=1,O.left=t(1,P),O._color=0,L-=1}else{var P;if(!(P=O.left)||0!==P._color){var S;M.left=w.right,O._color=0,O.right=w.left,w._color=1,w.right=M,w.left=O,_[L-2]=w,_[L-1]=M,a(O),a(M),a(w),L>=3&&((S=_[L-3]).right===O?S.right=w:S.left=w);break}M._color=1,O.left=t(1,P),O._color=0,L-=1}}return _[0]._color=1,new r(d,_[0])},u.forEach=function(o,x,d){if(this.root)switch(arguments.length){case 1:return s(o,this.root);case 2:return i(x,this._compare,o,this.root);case 3:return this._compare(x,d)>=0?void 0:l(x,d,this._compare,o,this.root)}},Object.defineProperty(u,"begin",{get:function(){for(var o=[],x=this.root;x;)o.push(x),x=x.left;return new c(this,o)}}),Object.defineProperty(u,"end",{get:function(){for(var o=[],x=this.root;x;)o.push(x),x=x.right;return new c(this,o)}}),u.at=function(o){if(o<0)return new c(this,[]);for(var x=this.root,d=[];;){if(d.push(x),x.left){if(o<x.left._count){x=x.left;continue}o-=x.left._count}if(!o)return new c(this,d);if(o-=1,!x.right||o>=x.right._count)break;x=x.right}return new c(this,[])},u.ge=function(o){for(var x=this._compare,d=this.root,w=[],_=0;d;){var T=x(o,d.key);w.push(d),T<=0&&(_=w.length),d=T<=0?d.left:d.right}return w.length=_,new c(this,w)},u.gt=function(o){for(var x=this._compare,d=this.root,w=[],_=0;d;){var T=x(o,d.key);w.push(d),T<0&&(_=w.length),d=T<0?d.left:d.right}return w.length=_,new c(this,w)},u.lt=function(o){for(var x=this._compare,d=this.root,w=[],_=0;d;){var T=x(o,d.key);w.push(d),T>0&&(_=w.length),d=T<=0?d.left:d.right}return w.length=_,new c(this,w)},u.le=function(o){for(var x=this._compare,d=this.root,w=[],_=0;d;){var T=x(o,d.key);w.push(d),T>=0&&(_=w.length),d=T<0?d.left:d.right}return w.length=_,new c(this,w)},u.find=function(o){for(var x=this._compare,d=this.root,w=[];d;){var _=x(o,d.key);if(w.push(d),0===_)return new c(this,w);d=_<=0?d.left:d.right}return new c(this,[])},u.remove=function(o){var x=this.find(o);return x?x.remove():this},u.get=function(o){for(var x=this._compare,d=this.root;d;){var w=x(o,d.key);if(0===w)return d.value;d=w<=0?d.left:d.right}};var f=c.prototype;function g(o,x){o.key=x.key,o.value=x.value,o.left=x.left,o.right=x.right,o._color=x._color,o._count=x._count}function h(o,x){return o<x?-1:o>x?1:0}Object.defineProperty(f,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(f,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),f.clone=function(){return new c(this.tree,this._stack.slice())},f.remove=function(){var o=this._stack;if(0===o.length)return this.tree;var x=new Array(o.length),d=o[o.length-1];x[x.length-1]=new e(d._color,d.key,d.value,d.left,d.right,d._count);for(var w=o.length-2;w>=0;--w)x[w]=(d=o[w]).left===o[w+1]?new e(d._color,d.key,d.value,x[w+1],d.right,d._count):new e(d._color,d.key,d.value,d.left,x[w+1],d._count);if((d=x[x.length-1]).left&&d.right){var _=x.length;for(d=d.left;d.right;)x.push(d),d=d.right;var T=x[_-1];for(x.push(new e(d._color,T.key,T.value,d.left,d.right,d._count)),x[_-1].key=d.key,x[_-1].value=d.value,w=x.length-2;w>=_;--w)x[w]=new e((d=x[w])._color,d.key,d.value,d.left,x[w+1],d._count);x[_-1].left=x[_]}if(0===(d=x[x.length-1])._color){var k=x[x.length-2];for(k.left===d?k.left=null:k.right===d&&(k.right=null),x.pop(),w=0;w<x.length;++w)x[w]._count--;return new r(this.tree._compare,x[0])}if(d.left||d.right){for(d.left?g(d,d.left):d.right&&g(d,d.right),d._color=1,w=0;w<x.length-1;++w)x[w]._count--;return new r(this.tree._compare,x[0])}if(1===x.length)return new r(this.tree._compare,null);for(w=0;w<x.length;++w)x[w]._count--;var L=x[x.length-2];return function(M){for(var O,P,S,E,R=M.length-1;R>=0;--R){if(O=M[R],0===R)return void(O._color=1);if((P=M[R-1]).left===O){if((S=P.right).right&&0===S.right._color)return E=(S=P.right=n(S)).right=n(S.right),P.right=S.left,S.left=P,S.right=E,S._color=P._color,O._color=1,P._color=1,E._color=1,a(P),a(S),R>1&&((B=M[R-2]).left===P?B.left=S:B.right=S),void(M[R-1]=S);if(S.left&&0===S.left._color)return E=(S=P.right=n(S)).left=n(S.left),P.right=E.left,S.left=E.right,E.left=P,E.right=S,E._color=P._color,P._color=1,S._color=1,O._color=1,a(P),a(S),a(E),R>1&&((B=M[R-2]).left===P?B.left=E:B.right=E),void(M[R-1]=E);if(1===S._color){if(0===P._color)return P._color=1,void(P.right=t(0,S));P.right=t(0,S);continue}S=n(S),P.right=S.left,S.left=P,S._color=P._color,P._color=0,a(P),a(S),R>1&&((B=M[R-2]).left===P?B.left=S:B.right=S),M[R-1]=S,M[R]=P,R+1<M.length?M[R+1]=O:M.push(O),R+=2}else{if((S=P.left).left&&0===S.left._color)return E=(S=P.left=n(S)).left=n(S.left),P.left=S.right,S.right=P,S.left=E,S._color=P._color,O._color=1,P._color=1,E._color=1,a(P),a(S),R>1&&((B=M[R-2]).right===P?B.right=S:B.left=S),void(M[R-1]=S);if(S.right&&0===S.right._color)return E=(S=P.left=n(S)).right=n(S.right),P.left=E.right,S.right=E.left,E.right=P,E.left=S,E._color=P._color,P._color=1,S._color=1,O._color=1,a(P),a(S),a(E),R>1&&((B=M[R-2]).right===P?B.right=E:B.left=E),void(M[R-1]=E);if(1===S._color){if(0===P._color)return P._color=1,void(P.left=t(0,S));P.left=t(0,S);continue}var B;S=n(S),P.left=S.right,S.right=P,S._color=P._color,P._color=0,a(P),a(S),R>1&&((B=M[R-2]).right===P?B.right=S:B.left=S),M[R-1]=S,M[R]=P,R+1<M.length?M[R+1]=O:M.push(O),R+=2}}}(x),L.left===d?L.left=null:L.right=null,new r(this.tree._compare,x[0])},Object.defineProperty(f,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(f,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(f,"index",{get:function(){var o=0,x=this._stack;if(0===x.length){var d=this.tree.root;return d?d._count:0}x[x.length-1].left&&(o=x[x.length-1].left._count);for(var w=x.length-2;w>=0;--w)x[w+1]===x[w].right&&(++o,x[w].left&&(o+=x[w].left._count));return o},enumerable:!0}),f.next=function(){var o=this._stack;if(0!==o.length){var x=o[o.length-1];if(x.right)for(x=x.right;x;)o.push(x),x=x.left;else for(o.pop();o.length>0&&o[o.length-1].right===x;)x=o[o.length-1],o.pop()}},Object.defineProperty(f,"hasNext",{get:function(){var o=this._stack;if(0===o.length)return!1;if(o[o.length-1].right)return!0;for(var x=o.length-1;x>0;--x)if(o[x-1].left===o[x])return!0;return!1}}),f.update=function(o){var x=this._stack;if(0===x.length)throw new Error("Can't update empty node!");var d=new Array(x.length),w=x[x.length-1];d[d.length-1]=new e(w._color,w.key,o,w.left,w.right,w._count);for(var _=x.length-2;_>=0;--_)d[_]=(w=x[_]).left===x[_+1]?new e(w._color,w.key,w.value,d[_+1],w.right,w._count):new e(w._color,w.key,w.value,w.left,d[_+1],w._count);return new r(this.tree._compare,d[0])},f.prev=function(){var o=this._stack;if(0!==o.length){var x=o[o.length-1];if(x.left)for(x=x.left;x;)o.push(x),x=x.right;else for(o.pop();o.length>0&&o[o.length-1].left===x;)x=o[o.length-1],o.pop()}},Object.defineProperty(f,"hasPrev",{get:function(){var o=this._stack;if(0===o.length)return!1;if(o[o.length-1].left)return!0;for(var x=o.length-1;x>0;--x)if(o[x-1].right===o[x])return!0;return!1}})},{}],70:[function(m,b,v){"use strict";b.exports=function(_,T){var k=new i(_);return k.update(T),k};var e=m("./lib/text.js"),n=m("./lib/lines.js"),t=m("./lib/background.js"),a=m("./lib/cube.js"),r=m("./lib/ticks.js"),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(_,T){return _[0]=T[0],_[1]=T[1],_[2]=T[2],_}function i(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=t(_)}var l=i.prototype;function c(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}l.update=function(_){function T(Z,W,G){if(G in _){var X,te=_[G],D=this[G];this[G]=X=(Z?Array.isArray(te)&&Array.isArray(te[0]):Array.isArray(te))?[W(te[0]),W(te[1]),W(te[2])]:[W(te),W(te),W(te)];for(var N=0;N<3;++N)if(X[N]!==D[N])return!0}return!1}_=_||{};var k,L=T.bind(this,!1,Number),M=T.bind(this,!1,Boolean),O=T.bind(this,!1,String),P=T.bind(this,!0,function(Z){if(Array.isArray(Z)){if(3===Z.length)return[+Z[0],+Z[1],+Z[2],1];if(4===Z.length)return[+Z[0],+Z[1],+Z[2],+Z[3]]}return[0,0,0,1]}),S=!1,E=!1;if("bounds"in _)for(var R=_.bounds,B=0;B<2;++B)for(var H=0;H<3;++H)R[B][H]!==this.bounds[B][H]&&(E=!0),this.bounds[B][H]=R[B][H];if("ticks"in _)for(k=_.ticks,S=!0,this.autoTicks=!1,B=0;B<3;++B)this.tickSpacing[B]=0;else L("tickSpacing")&&(this.autoTicks=!0,E=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),E=!0,S=!0,this._firstInit=!1),E&&this.autoTicks&&(k=r.create(this.bounds,this.tickSpacing),S=!0),S){for(B=0;B<3;++B)k[B].sort(function(Z,W){return Z.x-W.x});r.equal(k,this.ticks)?S=!1:this.ticks=k}M("tickEnable"),O("tickFont")&&(S=!0),L("tickSize"),L("tickAngle"),L("tickPad"),P("tickColor");var V=O("labels");O("labelFont")&&(V=!0),M("labelEnable"),L("labelSize"),L("labelPad"),P("labelColor"),M("lineEnable"),M("lineMirror"),L("lineWidth"),P("lineColor"),M("lineTickEnable"),M("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),P("lineTickColor"),M("gridEnable"),L("gridWidth"),P("gridColor"),M("zeroEnable"),P("zeroLineColor"),L("zeroLineWidth"),M("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(V||S)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&S&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};var f=[new c,new c,new c];function g(_,T,k,L,M){for(var O=_.primalOffset,P=_.primalMinor,S=_.mirrorOffset,E=_.mirrorMinor,R=L[T],B=0;B<3;++B)if(T!==B){var H=O,V=S,Z=P,W=E;R&1<<B&&(H=S,V=O,Z=E,W=P),H[B]=k[0][B],V[B]=k[1][B],M[B]>0?(Z[B]=-1,W[B]=0):(Z[B]=0,W[B]=1)}}var h=[0,0,0],o={model:u,view:u,projection:u,_ortho:!1};l.isOpaque=function(){return!0},l.isTransparent=function(){return!1},l.drawTransparent=function(_){};var x=[0,0,0],d=[0,0,0],w=[0,0,0];l.draw=function(_){for(var T=this.gl,k=(_=_||o).model||u,L=_.view||u,M=_.projection||u,O=this.bounds,P=_._ortho||!1,S=a(k,L,M,O,P),E=S.cubeEdges,R=S.axis,W=(P?2:1)*this.pixelRatio*(M[3]*L[12]+M[7]*L[13]+M[11]*L[14]+M[15]*L[15])/T.drawingBufferHeight,G=0;G<3;++G)this.lastCubeProps.cubeEdges[G]=E[G],this.lastCubeProps.axis[G]=R[G];var X=f;for(G=0;G<3;++G)g(f[G],G,this.bounds,E,R);T=this.gl;var te,se,oe,Se,fe,me,Te,_e,Me,Ie,ze,Ve,D=h;for(G=0;G<3;++G)D[G]=this.backgroundEnable[G]?R[G]:0;for(this._background.draw(k,L,M,O,D,this.backgroundColor),this._lines.bind(k,L,M,this),G=0;G<3;++G){var N=[0,0,0];N[G]=R[G]>0?O[1][G]:O[0][G];for(var U=0;U<2;++U){var Q=(G+1+U)%3,j=(G+1+(1^U))%3;this.gridEnable[Q]&&this._lines.drawGrid(Q,j,this.bounds,N,this.gridColor[Q],this.gridWidth[Q]*this.pixelRatio)}for(U=0;U<2;++U)Q=(G+1+U)%3,this.zeroEnable[j=(G+1+(1^U))%3]&&Math.min(O[0][j],O[1][j])<=0&&Math.max(O[0][j],O[1][j])>=0&&this._lines.drawZero(Q,j,this.bounds,N,this.zeroLineColor[j],this.zeroLineWidth[j]*this.pixelRatio)}for(G=0;G<3;++G){this.lineEnable[G]&&this._lines.drawAxisLine(G,this.bounds,X[G].primalOffset,this.lineColor[G],this.lineWidth[G]*this.pixelRatio),this.lineMirror[G]&&this._lines.drawAxisLine(G,this.bounds,X[G].mirrorOffset,this.lineColor[G],this.lineWidth[G]*this.pixelRatio);var J=s(x,X[G].primalMinor),K=s(d,X[G].mirrorMinor),re=this.lineTickLength;for(U=0;U<3;++U){var ne=W/k[5*U];J[U]*=re[U]*ne,K[U]*=re[U]*ne}this.lineTickEnable[G]&&this._lines.drawAxisTicks(G,X[G].primalOffset,J,this.lineTickColor[G],this.lineTickWidth[G]*this.pixelRatio),this.lineTickMirror[G]&&this._lines.drawAxisTicks(G,X[G].mirrorOffset,K,this.lineTickColor[G],this.lineTickWidth[G]*this.pixelRatio)}function pe(Se){(oe=[0,0,0])[Se]=1}for(this._lines.unbind(),this._text.bind(k,L,M,this.pixelRatio),G=0;G<3;++G){var ge=X[G].primalMinor,xe=X[G].mirrorMinor,we=s(w,X[G].primalOffset);for(U=0;U<3;++U)this.lineTickEnable[G]&&(we[U]+=W*ge[U]*Math.max(this.lineTickLength[U],0)/k[5*U]);var be=[0,0,0];if(be[G]=1,this.tickEnable[G]){for(-3600===this.tickAngle[G]?(this.tickAngle[G]=0,this.tickAlign[G]="auto"):this.tickAlign[G]=-1,te[0]="auto"===(te=[this.tickAlign[G],.5,se=1])[0]?0:parseInt(""+te[0]),oe=[0,0,0],void 0,void 0,void 0,void 0,void 0,void 0,Ie=(fe=ge)[_e=((Se=G)+2)%3],ze=(me=xe)[Te=(Se+1)%3],Ve=me[_e],(Me=fe[Te])>0&&Ve>0||Me>0&&Ve<0||Me<0&&Ve>0||Me<0&&Ve<0?pe(Te):(Ie>0&&ze>0||Ie>0&&ze<0||Ie<0&&ze>0||Ie<0&&ze<0)&&pe(_e),U=0;U<3;++U)we[U]+=W*ge[U]*this.tickPad[U]/k[5*U];this._text.drawTicks(G,this.tickSize[G],this.tickAngle[G],we,this.tickColor[G],be,oe,te)}if(this.labelEnable[G]){for(se=0,oe=[0,0,0],this.labels[G].length>4&&(pe(G),se=1),te[0]="auto"===(te=[this.labelAlign[G],.5,se])[0]?0:parseInt(""+te[0]),U=0;U<3;++U)we[U]+=W*ge[U]*this.labelPad[U]/k[5*U];we[G]+=.5*(O[0][G]+O[1][G]),this._text.drawLabel(G,this.labelSize[G],this.labelAngle[G],we,this.labelColor[G],[0,0,0],oe,te)}}this._text.unbind()},l.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(m,b,v){"use strict";b.exports=function(u){for(var s=[],i=[],l=0,c=0;c<3;++c)for(var f=(c+1)%3,g=(c+2)%3,h=[0,0,0],o=[0,0,0],x=-1;x<=1;x+=2){i.push(l,l+2,l+1,l+1,l+2,l+3),h[c]=x,o[c]=x;for(var d=-1;d<=1;d+=2){h[f]=d;for(var w=-1;w<=1;w+=2)h[g]=w,s.push(h[0],h[1],h[2],o[0],o[1],o[2]),l+=1}var _=f;f=g,g=_}var T=e(u,new Float32Array(s)),k=e(u,new Uint16Array(i),u.ELEMENT_ARRAY_BUFFER),L=n(u,[{buffer:T,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:T,type:u.FLOAT,size:3,offset:12,stride:24}],k),M=t(u);return M.attributes.position.location=0,M.attributes.normal.location=1,new a(u,T,L,M)};var e=m("gl-buffer"),n=m("gl-vao"),t=m("./shaders").bg;function a(u,s,i,l){this.gl=u,this.buffer=s,this.vao=i,this.shader=l}var r=a.prototype;r.draw=function(u,s,i,l,c,f){for(var g=!1,h=0;h<3;++h)g=g||c[h];if(g){var o=this.gl;o.enable(o.POLYGON_OFFSET_FILL),o.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:s,projection:i,bounds:l,enable:c,colors:f},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),o.disable(o.POLYGON_OFFSET_FILL)}},r.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(m,b,v){"use strict";b.exports=function(d,w,_,T,k){n(r,w,d),n(r,_,r);for(var L=0,M=0;M<2;++M){i[2]=T[M][2];for(var O=0;O<2;++O){i[1]=T[O][1];for(var P=0;P<2;++P)i[0]=T[P][0],c(u[L],i,r),L+=1}}var S=-1;for(M=0;M<8;++M){for(var E=u[M][3],R=0;R<3;++R)s[M][R]=u[M][R]/E;k&&(s[M][2]*=-1),E<0&&(S<0||s[M][2]<s[S][2])&&(S=M)}if(S<0){S=0;for(var B=0;B<3;++B){for(var H=(B+2)%3,V=(B+1)%3,Z=-1,W=-1,G=0;G<2;++G){var X=(D=G<<B)+(G<<H)+(1-G<<V),te=D+(1-G<<H)+(G<<V);a(s[D],s[X],s[te],l)<0||(G?Z=1:W=1)}if(Z<0||W<0)W>Z&&(S|=1<<B);else{for(G=0;G<2;++G){X=(D=G<<B)+(G<<H)+(1-G<<V);var D,N=g([u[D],u[X],u[te=D+(1-G<<H)+(G<<V)],u[D+(1<<H)+(1<<V)]]);G?Z=N:W=N}W>Z&&(S|=1<<B)}}}var U=7^S,Q=-1;for(M=0;M<8;++M)M!==S&&M!==U&&(Q<0||s[Q][1]>s[M][1])&&(Q=M);var j=-1;for(M=0;M<3;++M)(K=Q^1<<M)!==S&&K!==U&&(j<0&&(j=K),(V=s[K])[0]<s[j][0]&&(j=K));var J=-1;for(M=0;M<3;++M){var K;(K=Q^1<<M)!==S&&K!==U&&K!==j&&(J<0&&(J=K),(V=s[K])[0]>s[J][0]&&(J=K))}var re=h;re[0]=re[1]=re[2]=0,re[e.log2(j^Q)]=Q&j,re[e.log2(Q^J)]=Q&J;var ne=7^J;ne===S||ne===U?re[e.log2(J^(ne=7^j))]=ne&J:re[e.log2(j^ne)]=ne&j;var se=o,oe=S;for(B=0;B<3;++B)se[B]=oe&1<<B?-1:1;return x};var e=m("bit-twiddle"),n=m("gl-mat4/multiply"),t=m("split-polygon"),a=m("robust-orientation"),r=new Array(16),u=new Array(8),s=new Array(8),i=new Array(3),l=[0,0,0];function c(d,w,_){for(var T=0;T<4;++T){d[T]=_[12+T];for(var k=0;k<3;++k)d[T]+=w[k]*_[4*k+T]}}!function(){for(var d=0;d<8;++d)u[d]=[1,1,1,1],s[d]=[1,1,1]}();var f=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function g(d){for(var w=0;w<f.length;++w)if((d=t.positive(d,f[w])).length<3)return 0;var _=d[0],T=_[0]/_[3],k=_[1]/_[3],L=0;for(w=1;w+1<d.length;++w){var M=d[w],O=d[w+1];L+=Math.abs((M[0]/M[3]-T)*(O[1]/O[3]-k)-(M[1]/M[3]-k)*(O[0]/O[3]-T))}return L}var h=[1,1,1],o=[0,0,0],x={cubeEdges:h,axis:o}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(m,b,v){"use strict";b.exports=function(h,o,x){var d=[],w=[0,0,0],_=[0,0,0],T=[0,0,0],k=[0,0,0];d.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var M=d.length/3|0,O=0;O<x[L].length;++O){var P=+x[L][O].x;d.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var S=d.length/3|0;w[L]=M,_[L]=S-M,M=d.length/3|0;for(var E=0;E<x[L].length;++E)d.push(P=+x[L][E].x,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1);S=d.length/3|0,T[L]=M,k[L]=S-M}var R=e(h,new Float32Array(d)),B=n(h,[{buffer:R,type:h.FLOAT,size:3,stride:0,offset:0}]),H=t(h);return H.attributes.position.location=0,new f(h,R,B,H,_,w,k,T)};var e=m("gl-buffer"),n=m("gl-vao"),t=m("./shaders").line,a=[0,0,0],r=[0,0,0],u=[0,0,0],s=[0,0,0],i=[1,1];function l(h){return h[0]=h[1]=h[2]=0,h}function c(h,o){return h[0]=o[0],h[1]=o[1],h[2]=o[2],h}function f(h,o,x,d,w,_,T,k){this.gl=h,this.vertBuffer=o,this.vao=x,this.shader=d,this.tickCount=w,this.tickOffset=_,this.gridCount=T,this.gridOffset=k}var g=f.prototype;g.bind=function(h,o,x){this.shader.bind(),this.shader.uniforms.model=h,this.shader.uniforms.view=o,this.shader.uniforms.projection=x,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=i,this.vao.bind()},g.unbind=function(){this.vao.unbind()},g.drawAxisLine=function(h,o,x,d,w){var _=l(r);this.shader.uniforms.majorAxis=r,_[h]=o[1][h]-o[0][h],this.shader.uniforms.minorAxis=_;var T,k=c(s,x);k[h]+=o[0][h],this.shader.uniforms.offset=k,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=d,(T=l(u))[(h+2)%3]=1,this.shader.uniforms.screenAxis=T,this.vao.draw(this.gl.TRIANGLES,6),(T=l(u))[(h+1)%3]=1,this.shader.uniforms.screenAxis=T,this.vao.draw(this.gl.TRIANGLES,6)},g.drawAxisTicks=function(h,o,x,d,w){if(this.tickCount[h]){var _=l(a);_[h]=1,this.shader.uniforms.majorAxis=_,this.shader.uniforms.offset=o,this.shader.uniforms.minorAxis=x,this.shader.uniforms.color=d,this.shader.uniforms.lineWidth=w;var T=l(u);T[h]=1,this.shader.uniforms.screenAxis=T,this.vao.draw(this.gl.TRIANGLES,this.tickCount[h],this.tickOffset[h])}},g.drawGrid=function(h,o,x,d,w,_){if(this.gridCount[h]){var T=l(r);T[o]=x[1][o]-x[0][o],this.shader.uniforms.minorAxis=T;var k=c(s,d);k[o]+=x[0][o],this.shader.uniforms.offset=k;var L=l(a);L[h]=1,this.shader.uniforms.majorAxis=L;var M=l(u);M[h]=1,this.shader.uniforms.screenAxis=M,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,this.gridCount[h],this.gridOffset[h])}},g.drawZero=function(h,o,x,d,w,_){var T=l(r);this.shader.uniforms.majorAxis=T,T[h]=x[1][h]-x[0][h],this.shader.uniforms.minorAxis=T;var k=c(s,d);k[h]+=x[0][h],this.shader.uniforms.offset=k;var L=l(u);L[o]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,6)},g.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(m,b,v){"use strict";var e=m("glslify"),n=m("gl-shader"),t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);v.line=function(l){return n(l,t,a,null,[{name:"position",type:"vec3"}])};var r=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),u=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);v.text=function(l){return n(l,r,u,null,[{name:"position",type:"vec3"}])};var s=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);v.bg=function(l){return n(l,s,i,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(m,b,v){(function(e){(function(){"use strict";b.exports=function(f,g,h,o,x,d){var w=n(f),_=t(f,[{buffer:w,size:3}]),T=r(f);T.attributes.position.location=0;var k=new i(f,T,w,_);return k.update(g,h,o,x,d),k};var n=m("gl-buffer"),t=m("gl-vao"),a=m("vectorize-text"),r=m("./shaders").text,u=window||e.global||{},s=u.__TEXT_CACHE||{};function i(f,g,h,o){this.gl=f,this.shader=g,this.buffer=h,this.vao=o,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}u.__TEXT_CACHE={};var l=i.prototype,c=[0,0];l.bind=function(f,g,h,o){this.vao.bind(),this.shader.bind();var x=this.shader.uniforms;x.model=f,x.view=g,x.projection=h,x.pixelScale=o,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=c},l.unbind=function(){this.vao.unbind()},l.update=function(f,g,h,o,x){var d=[];function w(S,E,R,B,H,V){var Z=s[R];Z||(Z=s[R]={});var W=Z[E];W||(W=Z[E]=function(J,K){try{return a(J,K)}catch(re){return console.warn('error vectorizing text:"'+J+'" error:',re),{cells:[],positions:[]}}}(E,{triangles:!0,font:R,textAlign:"center",textBaseline:"middle",lineSpacing:H,styletags:V}));for(var G=(B||12)/12,X=W.positions,te=W.cells,D=0,N=te.length;D<N;++D)for(var U=te[D],Q=2;Q>=0;--Q){var j=X[U[Q]];d.push(G*j[0],-G*j[1],S)}}for(var _=[0,0,0],T=[0,0,0],k=[0,0,0],L=[0,0,0],M={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},O=0;O<3;++O){k[O]=d.length/3|0,w(.5*(f[0][O]+f[1][O]),g[O],h[O],12,1.25,M),L[O]=(d.length/3|0)-k[O],_[O]=d.length/3|0;for(var P=0;P<o[O].length;++P)o[O][P].text&&w(o[O][P].x,o[O][P].text,o[O][P].font||x,o[O][P].fontSize||12,1.25,M);T[O]=(d.length/3|0)-_[O]}this.buffer.update(d),this.tickOffset=_,this.tickCount=T,this.labelOffset=k,this.labelCount=L},l.drawTicks=function(f,g,h,o,x,d,w,_){this.tickCount[f]&&(this.shader.uniforms.axis=d,this.shader.uniforms.color=x,this.shader.uniforms.angle=h,this.shader.uniforms.scale=g,this.shader.uniforms.offset=o,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=_,this.vao.draw(this.gl.TRIANGLES,this.tickCount[f],this.tickOffset[f]))},l.drawLabel=function(f,g,h,o,x,d,w,_){this.labelCount[f]&&(this.shader.uniforms.axis=d,this.shader.uniforms.color=x,this.shader.uniforms.angle=h,this.shader.uniforms.scale=g,this.shader.uniforms.offset=o,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=_,this.vao.draw(this.gl.TRIANGLES,this.labelCount[f],this.labelOffset[f]))},l.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,m("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(m,b,v){"use strict";function e(n,t){var a=n+"",r=a.indexOf("."),u=0;r>=0&&(u=a.length-r-1);var s=Math.pow(10,u),i=Math.round(n*t*s),l=i+"";if(l.indexOf("e")>=0)return l;var c=i/s,f=i%s;i<0?(c=0|-Math.ceil(c),f=0|-f):(c=0|Math.floor(c),f|=0);var g=""+c;if(i<0&&(g="-"+g),u){for(var h=""+f;h.length<u;)h="0"+h;return g+"."+h}return g}v.create=function(n,t){for(var a=[],r=0;r<3;++r){for(var u=[],s=0;s*t[r]<=n[1][r];++s)u.push({x:s*t[r],text:e(t[r],s)});for(s=-1;s*t[r]>=n[0][r];--s)u.push({x:s*t[r],text:e(t[r],s)});a.push(u)}return a},v.equal=function(n,t){for(var a=0;a<3;++a){if(n[a].length!==t[a].length)return!1;for(var r=0;r<n[a].length;++r){var u=n[a][r],s=t[a][r];if(u.x!==s.x||u.text!==s.text||u.font!==s.font||u.fontColor!==s.fontColor||u.fontSize!==s.fontSize||u.dx!==s.dx||u.dy!==s.dy)return!1}}return!0}},{}],77:[function(m,b,v){"use strict";b.exports=function(x,d,w,_,T){var k=d.model||s,L=d.view||s,M=d.projection||s,O=d._ortho||!1,P=x.bounds,S=(T=T||t(k,L,M,P,O)).axis;a(i,L,k),a(i,M,i);for(var E=h,R=0;R<3;++R)E[R].lo=1/0,E[R].hi=-1/0,E[R].pixelsPerDataUnit=1/0;var B=e(r(i,i));r(i,i);for(var H=0;H<3;++H){var V=(H+1)%3,Z=(H+2)%3,W=o;e:for(R=0;R<2;++R){var G=[];if(S[H]<0!=!!R){W[H]=P[R][H];for(var X=0;X<2;++X){W[V]=P[X^R][V];for(var te=0;te<2;++te)W[Z]=P[te^X^R][Z],G.push(W.slice())}var D=O?5:4;for(X=D;X===D;++X){if(0===G.length)continue e;G=n.positive(G,B[X])}for(X=0;X<G.length;++X){var N=g(o,i,Z=G[X],w,_);for(te=0;te<3;++te)E[te].lo=Math.min(E[te].lo,Z[te]),E[te].hi=Math.max(E[te].hi,Z[te]),te!==H&&(E[te].pixelsPerDataUnit=Math.min(E[te].pixelsPerDataUnit,Math.abs(N[te])))}}}}return E};var e=m("extract-frustum-planes"),n=m("split-polygon"),t=m("./lib/cube.js"),a=m("gl-mat4/multiply"),r=m("gl-mat4/transpose"),u=m("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i=new Float32Array(16);function l(x,d,w){this.lo=x,this.hi=d,this.pixelsPerDataUnit=w}var c=[0,0,0,1],f=[0,0,0,1];function g(x,d,w,_,T){for(var k=0;k<3;++k){for(var L=c,M=f,O=0;O<3;++O)M[O]=L[O]=w[O];M[3]=L[3]=1,M[k]+=1,u(M,M,d),M[3]<0&&(x[k]=1/0),L[k]-=1,u(L,L,d),L[3]<0&&(x[k]=1/0);var P=(L[0]/L[3]-M[0]/M[3])*_,S=(L[1]/L[3]-M[1]/M[3])*T;x[k]=.25*Math.sqrt(P*P+S*S)}return x}var h=[new l(1/0,-1/0,1/0),new l(1/0,-1/0,1/0),new l(1/0,-1/0,1/0)],o=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(m,b,v){"use strict";var e=m("typedarray-pool"),n=m("ndarray-ops"),t=m("ndarray"),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(l,c,f,g,h){this.gl=l,this.type=c,this.handle=f,this.length=g,this.usage=h}var u=r.prototype;function s(l,c,f,g,h,o){var x=h.length*h.BYTES_PER_ELEMENT;if(o<0)return l.bufferData(c,h,g),x;if(x+o>f)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return l.bufferSubData(c,o,h),f}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(l,c){if("number"!=typeof c&&(c=-1),this.bind(),"object"==typeof l&&void 0!==l.shape){var f=l.dtype;if(a.indexOf(f)<0&&(f="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(f=gl.getExtension("OES_element_index_uint")&&"uint16"!==f?"uint32":"uint16"),f===l.dtype&&function(x,d){for(var w=1,_=d.length-1;_>=0;--_){if(d[_]!==w)return!1;w*=x[_]}return!0}(l.shape,l.stride))this.length=s(this.gl,this.type,this.length,this.usage,0===l.offset&&l.data.length===l.shape[0]?l.data:l.data.subarray(l.offset,l.shape[0]),c);else{var g=e.malloc(l.size,f),h=t(g,l.shape);n.assign(h,l),this.length=s(this.gl,this.type,this.length,this.usage,c<0?g:g.subarray(0,l.size),c),e.free(g)}}else if(Array.isArray(l)){var o;o=function(l,c){for(var f=e.malloc(l.length,c),g=l.length,h=0;h<g;++h)f[h]=l[h];return f}(l,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=s(this.gl,this.type,this.length,this.usage,c<0?o:o.subarray(0,l.length),c),e.free(o)}else if("object"==typeof l&&"number"==typeof l.length)this.length=s(this.gl,this.type,this.length,this.usage,l,c);else{if("number"!=typeof l&&void 0!==l)throw new Error("gl-buffer: Invalid data type");if(c>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(l|=0)<=0&&(l=1),this.gl.bufferData(this.type,0|l,this.usage),this.length=l}},b.exports=function(l,c,f,g){if(g=g||l.DYNAMIC_DRAW,(f=f||l.ARRAY_BUFFER)!==l.ARRAY_BUFFER&&f!==l.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(g!==l.DYNAMIC_DRAW&&g!==l.STATIC_DRAW&&g!==l.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var h=l.createBuffer(),o=new r(l,f,h,0,g);return o.update(c),o}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(m,b,v){"use strict";var e=m("gl-vec3");b.exports=function(t,a){var r=t.positions,u=t.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:t.vertexIntensityBounds,vectors:[],cells:[],coneOffset:t.coneOffset,colormap:t.colormap};if(0===t.positions.length)return a&&(a[0]=[0,0,0],a[1]=[0,0,0]),s;for(var i=0,l=1/0,c=-1/0,f=1/0,g=-1/0,h=1/0,o=-1/0,x=null,d=null,w=[],_=1/0,T=!1,k=0;k<r.length;k++){var L=r[k];l=Math.min(L[0],l),c=Math.max(L[0],c),f=Math.min(L[1],f),g=Math.max(L[1],g),h=Math.min(L[2],h),o=Math.max(L[2],o);var M=u[k];if(e.length(M)>i&&(i=e.length(M)),k){var O=2*e.distance(x,L)/(e.length(d)+e.length(M));O?(_=Math.min(_,O),T=!1):T=!0}T||(x=L,d=M),w.push(M)}var S=[c,g,o];a&&(a[0]=[l,f,h],a[1]=S),0===i&&(i=1);var E=1/i;isFinite(_)||(_=1),s.vectorScale=_;var R=t.coneSize||.5;t.absoluteConeSize&&(R=t.absoluteConeSize*E),s.coneScale=R,k=0;for(var B=0;k<r.length;k++)for(var H=(L=r[k])[0],V=L[1],Z=L[2],W=w[k],G=e.length(W)*E,X=0;X<8;X++){s.positions.push([H,V,Z,B++]),s.positions.push([H,V,Z,B++]),s.positions.push([H,V,Z,B++]),s.positions.push([H,V,Z,B++]),s.positions.push([H,V,Z,B++]),s.positions.push([H,V,Z,B++]),s.vectors.push(W),s.vectors.push(W),s.vectors.push(W),s.vectors.push(W),s.vectors.push(W),s.vectors.push(W),s.vertexIntensity.push(G,G,G),s.vertexIntensity.push(G,G,G);var te=s.positions.length;s.cells.push([te-6,te-5,te-4],[te-3,te-2,te-1])}return s};var n=m("./lib/shaders");b.exports.createMesh=m("./create_mesh"),b.exports.createConeMesh=function(t,a){return b.exports.createMesh(t,a,{shaders:n,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(m,b,v){"use strict";var e=m("gl-shader"),n=m("gl-buffer"),t=m("gl-vao"),a=m("gl-texture2d"),r=m("gl-mat4/multiply"),u=m("gl-mat4/invert"),s=m("ndarray"),i=m("colormap"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(o,x,d,w,_,T,k,L,M,O,P){this.gl=o,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=x,this.dirty=!0,this.triShader=d,this.pickShader=w,this.trianglePositions=_,this.triangleVectors=T,this.triangleColors=L,this.triangleUVs=M,this.triangleIds=k,this.triangleVAO=O,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=P,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=l,this._view=l,this._projection=l,this._resolution=[1,1]}var f=c.prototype;function g(o,x){var d=e(o,x.meshShader.vertex,x.meshShader.fragment,null,x.meshShader.attributes);return d.attributes.position.location=0,d.attributes.color.location=2,d.attributes.uv.location=3,d.attributes.vector.location=4,d}function h(o,x){var d=e(o,x.pickShader.vertex,x.pickShader.fragment,null,x.pickShader.attributes);return d.attributes.position.location=0,d.attributes.id.location=1,d.attributes.vector.location=4,d}f.isOpaque=function(){return this.opacity>=1},f.isTransparent=function(){return this.opacity<1},f.pickSlots=1,f.setPickBase=function(o){this.pickId=o},f.update=function(o){o=o||{};var x=this.gl;this.dirty=!0,"lightPosition"in o&&(this.lightPosition=o.lightPosition),"opacity"in o&&(this.opacity=o.opacity),"ambient"in o&&(this.ambientLight=o.ambient),"diffuse"in o&&(this.diffuseLight=o.diffuse),"specular"in o&&(this.specularLight=o.specular),"roughness"in o&&(this.roughness=o.roughness),"fresnel"in o&&(this.fresnel=o.fresnel),void 0!==o.tubeScale&&(this.tubeScale=o.tubeScale),void 0!==o.vectorScale&&(this.vectorScale=o.vectorScale),void 0!==o.coneScale&&(this.coneScale=o.coneScale),void 0!==o.coneOffset&&(this.coneOffset=o.coneOffset),o.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=x.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=x.LINEAR,this.texture.setPixels(function(Q){for(var j=i({colormap:Q,nshades:256,format:"rgba"}),J=new Uint8Array(1024),K=0;K<256;++K){for(var re=j[K],ne=0;ne<3;++ne)J[4*K+ne]=re[ne];J[4*K+3]=255*re[3]}return s(J,[256,256,4],[4,0,1])}(o.colormap)),this.texture.generateMipmap());var d=o.cells,w=o.positions,_=o.vectors;if(w&&d&&_){var T=[],k=[],L=[],M=[],O=[];this.cells=d,this.positions=w,this.vectors=_;var P=o.meshColor||[1,1,1,1],S=o.vertexIntensity,E=1/0,R=-1/0;if(S)if(o.vertexIntensityBounds)E=+o.vertexIntensityBounds[0],R=+o.vertexIntensityBounds[1];else for(var B=0;B<S.length;++B){var H=S[B];E=Math.min(E,H),R=Math.max(R,H)}else for(B=0;B<w.length;++B)H=w[B][2],E=Math.min(E,H),R=Math.max(R,H);for(this.intensity=S||function(Q){for(var j=Q.length,J=new Array(j),K=0;K<j;++K)J[K]=Q[K][2];return J}(w),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],B=0;B<w.length;++B)for(var V=w[B],Z=0;Z<3;++Z)!isNaN(V[Z])&&isFinite(V[Z])&&(this.bounds[0][Z]=Math.min(this.bounds[0][Z],V[Z]),this.bounds[1][Z]=Math.max(this.bounds[1][Z],V[Z]));var W=0;e:for(B=0;B<d.length;++B){var G=d[B];if(3===G.length){for(Z=0;Z<3;++Z){V=w[te=G[Z]];for(var X=0;X<3;++X)if(isNaN(V[X])||!isFinite(V[X]))continue e}for(Z=0;Z<3;++Z){var te;V=w[te=G[2-Z]],T.push(V[0],V[1],V[2],V[3]);var D=_[te];k.push(D[0],D[1],D[2],D[3]||0);var N;L.push(P[0],P[1],P[2],3===P.length?1:P[3]),M.push((N=S?[(S[te]-E)/(R-E),0]:[(V[2]-E)/(R-E),0])[0],N[1]),O.push(B)}W+=1}}this.triangleCount=W,this.trianglePositions.update(T),this.triangleVectors.update(k),this.triangleColors.update(L),this.triangleUVs.update(M),this.triangleIds.update(new Uint32Array(O))}},f.drawTransparent=f.draw=function(o){for(var x=this.gl,d=(o=o||{}).model||l,w=o.view||l,_=o.projection||l,T=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)T[0][k]=Math.max(T[0][k],this.clipBounds[0][k]),T[1][k]=Math.min(T[1][k],this.clipBounds[1][k]);var L={model:d,view:w,projection:_,inverseModel:l.slice(),clipBounds:T,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};L.inverseModel=u(L.inverseModel,L.model),x.disable(x.CULL_FACE),this.texture.bind(0);var M=new Array(16);for(r(M,L.view,L.model),r(M,L.projection,M),u(M,M),k=0;k<3;++k)L.eyePosition[k]=M[12+k]/M[15];var O=M[15];for(k=0;k<3;++k)O+=this.lightPosition[k]*M[4*k+3];for(k=0;k<3;++k){for(var P=M[12+k],S=0;S<3;++S)P+=M[4*S+k]*this.lightPosition[S];L.lightPosition[k]=P/O}if(this.triangleCount>0){var E=this.triShader;E.bind(),E.uniforms=L,this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},f.drawPick=function(o){for(var x=this.gl,d=(o=o||{}).model||l,w=o.view||l,_=o.projection||l,T=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)T[0][k]=Math.max(T[0][k],this.clipBounds[0][k]),T[1][k]=Math.min(T[1][k],this.clipBounds[1][k]);this._model=[].slice.call(d),this._view=[].slice.call(w),this._projection=[].slice.call(_),this._resolution=[x.drawingBufferWidth,x.drawingBufferHeight];var L={model:d,view:w,projection:_,clipBounds:T,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},M=this.pickShader;M.bind(),M.uniforms=L,this.triangleCount>0&&(this.triangleVAO.bind(),x.drawArrays(x.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},f.pick=function(o){if(!o||o.id!==this.pickId)return null;var x=o.value[0]+256*o.value[1]+65536*o.value[2],d=this.cells[x],w=this.positions[d[1]].slice(0,3),_={position:w,dataCoordinate:w,index:Math.floor(d[1]/48)};return"cone"===this.traceType?_.index=Math.floor(d[1]/48):"streamtube"===this.traceType&&(_.intensity=this.intensity[d[1]],_.velocity=this.vectors[d[1]].slice(0,3),_.divergence=this.vectors[d[1]][3],_.index=x),_},f.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},b.exports=function(o,x,d){var w=d.shaders;1===arguments.length&&(o=(x=o).gl);var _=g(o,w),T=h(o,w),k=a(o,s(new Uint8Array([255,255,255,255]),[1,1,4]));k.generateMipmap(),k.minFilter=o.LINEAR_MIPMAP_LINEAR,k.magFilter=o.LINEAR;var L=n(o),M=n(o),O=n(o),P=n(o),S=n(o),E=t(o,[{buffer:L,type:o.FLOAT,size:4},{buffer:S,type:o.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:O,type:o.FLOAT,size:4},{buffer:P,type:o.FLOAT,size:2},{buffer:M,type:o.FLOAT,size:4}]),R=new c(o,k,_,T,L,M,S,O,P,E,d.traceType||"cone");return R.update(x),R}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(m,b,v){var e=m("glslify"),n=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),t=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);v.meshShader={vertex:n,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},v.pickShader={vertex:a,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(m,b,v){b.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(m,b,v){var e=m("./1.0/numbers");b.exports=function(n){return e[n]}},{"./1.0/numbers":82}],84:[function(m,b,v){"use strict";b.exports=function(c){var f=c.gl,g=e(f),h=n(f,[{buffer:g,type:f.FLOAT,size:3,offset:0,stride:40},{buffer:g,type:f.FLOAT,size:4,offset:12,stride:40},{buffer:g,type:f.FLOAT,size:3,offset:28,stride:40}]),o=t(f);o.attributes.position.location=0,o.attributes.color.location=1,o.attributes.offset.location=2;var x=new r(f,g,h,o);return x.update(c),x};var e=m("gl-buffer"),n=m("gl-vao"),t=m("./shaders/index"),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(c,f,g,h){this.gl=c,this.shader=h,this.buffer=f,this.vao=g,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=r.prototype;function s(c,f){for(var g=0;g<3;++g)c[0][g]=Math.min(c[0][g],f[g]),c[1][g]=Math.max(c[1][g],f[g])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(c){var f=this.gl,g=this.shader.uniforms;this.shader.bind();var h=g.view=c.view||a,o=g.projection=c.projection||a;g.model=c.model||a,g.clipBounds=this.clipBounds,g.opacity=this.opacity;var T=(c._ortho?2:1)*this.pixelRatio*(o[3]*h[12]+o[7]*h[13]+o[11]*h[14]+o[15]*h[15])/f.drawingBufferHeight;this.vao.bind();for(var k=0;k<3;++k)f.lineWidth(this.lineWidth[k]*this.pixelRatio),g.capSize=this.capSize[k]*T,this.lineCount[k]&&f.drawArrays(f.LINES,this.lineOffset[k],this.lineCount[k]);this.vao.unbind()};var i=function(){for(var c=new Array(3),f=0;f<3;++f){for(var g=[],h=1;h<=2;++h)for(var o=-1;o<=1;o+=2){var x=[0,0,0];x[(h+f)%3]=o,g.push(x)}c[f]=g}return c}();function l(c,f,g,h){for(var o=i[h],x=0;x<o.length;++x){var d=o[x];c.push(f[0],f[1],f[2],g[0],g[1],g[2],g[3],d[0],d[1],d[2])}return o.length}u.update=function(c){"lineWidth"in(c=c||{})&&(this.lineWidth=c.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in c&&(this.capSize=c.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in c&&(this.opacity=+c.opacity,this.opacity<1&&(this.hasAlpha=!0));var f=c.color||[[0,0,0],[0,0,0],[0,0,0]],g=c.position,h=c.error;if(Array.isArray(f[0])||(f=[f,f,f]),g&&h){var o=[],x=g.length,d=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var w=0;w<3;++w){this.lineOffset[w]=d;e:for(var _=0;_<x;++_){for(var T=g[_],k=0;k<3;++k)if(isNaN(T[k])||!isFinite(T[k]))continue e;var O,L=h[_],M=f[w];Array.isArray(M[0])&&(M=f[_]),3===M.length?M=[M[0],M[1],M[2],1]:4===M.length&&(M=[M[0],M[1],M[2],M[3]],!this.hasAlpha&&M[3]<1&&(this.hasAlpha=!0)),isNaN(L[0][w])||isNaN(L[1][w])||(L[0][w]<0&&((O=T.slice())[w]+=L[0][w],o.push(T[0],T[1],T[2],M[0],M[1],M[2],M[3],0,0,0,O[0],O[1],O[2],M[0],M[1],M[2],M[3],0,0,0),s(this.bounds,O),d+=2+l(o,O,M,w)),L[1][w]>0&&((O=T.slice())[w]+=L[1][w],o.push(T[0],T[1],T[2],M[0],M[1],M[2],M[3],0,0,0,O[0],O[1],O[2],M[0],M[1],M[2],M[3],0,0,0),s(this.bounds,O),d+=2+l(o,O,M,w)))}this.lineCount[w]=d-this.lineOffset[w]}this.buffer.update(o)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(m,b,v){"use strict";var e=m("glslify"),n=m("gl-shader"),t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);b.exports=function(r){return n(r,t,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(m,b,v){"use strict";var e=m("gl-texture2d");b.exports=function(x,d,w,_){n||(n=x.FRAMEBUFFER_UNSUPPORTED,t=x.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=x.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,r=x.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var T=x.getExtension("WEBGL_draw_buffers");if(!u&&T&&function(E,R){var B=E.getParameter(R.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(B+1);for(var H=0;H<=B;++H){for(var V=new Array(B),Z=0;Z<H;++Z)V[Z]=E.COLOR_ATTACHMENT0+Z;for(Z=H;Z<B;++Z)V[Z]=E.NONE;u[H]=V}}(x,T),Array.isArray(d)&&(_=w,w=0|d[1],d=0|d[0]),"number"!=typeof d)throw new Error("gl-fbo: Missing shape parameter");var k=x.getParameter(x.MAX_RENDERBUFFER_SIZE);if(d<0||d>k||w<0||w>k)throw new Error("gl-fbo: Parameters are too large for FBO");var L=1;if("color"in(_=_||{})){if((L=Math.max(0|_.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(L>1){if(!T)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(L>x.getParameter(T.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+L+" draw buffers")}}var M=x.UNSIGNED_BYTE,O=x.getExtension("OES_texture_float");if(_.float&&L>0){if(!O)throw new Error("gl-fbo: Context does not support floating point textures");M=x.FLOAT}else _.preferFloat&&L>0&&O&&(M=x.FLOAT);var P=!0;"depth"in _&&(P=!!_.depth);var S=!1;return"stencil"in _&&(S=!!_.stencil),new g(x,d,w,M,L,P,S,T)};var n,t,a,r,u=null;function s(x){return[x.getParameter(x.FRAMEBUFFER_BINDING),x.getParameter(x.RENDERBUFFER_BINDING),x.getParameter(x.TEXTURE_BINDING_2D)]}function i(x,d){x.bindFramebuffer(x.FRAMEBUFFER,d[0]),x.bindRenderbuffer(x.RENDERBUFFER,d[1]),x.bindTexture(x.TEXTURE_2D,d[2])}function l(x){switch(x){case n:throw new Error("gl-fbo: Framebuffer unsupported");case t:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case r:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function c(x,d,w,_,T,k){if(!_)return null;var L=e(x,d,w,T,_);return L.magFilter=x.NEAREST,L.minFilter=x.NEAREST,L.mipSamples=1,L.bind(),x.framebufferTexture2D(x.FRAMEBUFFER,k,x.TEXTURE_2D,L.handle,0),L}function f(x,d,w,_,T){var k=x.createRenderbuffer();return x.bindRenderbuffer(x.RENDERBUFFER,k),x.renderbufferStorage(x.RENDERBUFFER,_,d,w),x.framebufferRenderbuffer(x.FRAMEBUFFER,T,x.RENDERBUFFER,k),k}function g(x,d,w,_,T,k,L,M){this.gl=x,this._shape=[0|d,0|w],this._destroyed=!1,this._ext=M,this.color=new Array(T);for(var O=0;O<T;++O)this.color[O]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=_,this._useDepth=k,this._useStencil=L;var P=this,S=[0|d,0|w];Object.defineProperties(S,{0:{get:function(){return P._shape[0]},set:function(E){return P.width=E}},1:{get:function(){return P._shape[1]},set:function(E){return P.height=E}}}),this._shapeVector=S,function(E){var R=s(E.gl),B=E.gl,H=E.handle=B.createFramebuffer(),V=E._shape[0],Z=E._shape[1],W=E.color.length,G=E._ext,X=E._useStencil,te=E._useDepth,D=E._colorType;B.bindFramebuffer(B.FRAMEBUFFER,H);for(var N=0;N<W;++N)E.color[N]=c(B,V,Z,D,B.RGBA,B.COLOR_ATTACHMENT0+N);0===W?(E._color_rb=f(B,V,Z,B.RGBA4,B.COLOR_ATTACHMENT0),G&&G.drawBuffersWEBGL(u[0])):W>1&&G.drawBuffersWEBGL(u[W]);var U=B.getExtension("WEBGL_depth_texture");U?X?E.depth=c(B,V,Z,U.UNSIGNED_INT_24_8_WEBGL,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):te&&(E.depth=c(B,V,Z,B.UNSIGNED_SHORT,B.DEPTH_COMPONENT,B.DEPTH_ATTACHMENT)):te&&X?E._depth_rb=f(B,V,Z,B.DEPTH_STENCIL,B.DEPTH_STENCIL_ATTACHMENT):te?E._depth_rb=f(B,V,Z,B.DEPTH_COMPONENT16,B.DEPTH_ATTACHMENT):X&&(E._depth_rb=f(B,V,Z,B.STENCIL_INDEX,B.STENCIL_ATTACHMENT));var Q=B.checkFramebufferStatus(B.FRAMEBUFFER);if(Q!==B.FRAMEBUFFER_COMPLETE){for(E._destroyed=!0,B.bindFramebuffer(B.FRAMEBUFFER,null),B.deleteFramebuffer(E.handle),E.handle=null,E.depth&&(E.depth.dispose(),E.depth=null),E._depth_rb&&(B.deleteRenderbuffer(E._depth_rb),E._depth_rb=null),N=0;N<E.color.length;++N)E.color[N].dispose(),E.color[N]=null;E._color_rb&&(B.deleteRenderbuffer(E._color_rb),E._color_rb=null),i(B,R),l(Q)}i(B,R)}(this)}var h=g.prototype;function o(x,d,w){if(x._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(x._shape[0]!==d||x._shape[1]!==w){var _=x.gl,T=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(d<0||d>T||w<0||w>T)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");x._shape[0]=d,x._shape[1]=w;for(var k=s(_),L=0;L<x.color.length;++L)x.color[L].shape=x._shape;x._color_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,x._color_rb),_.renderbufferStorage(_.RENDERBUFFER,_.RGBA4,x._shape[0],x._shape[1])),x.depth&&(x.depth.shape=x._shape),x._depth_rb&&(_.bindRenderbuffer(_.RENDERBUFFER,x._depth_rb),x._useDepth&&x._useStencil?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_STENCIL,x._shape[0],x._shape[1]):x._useDepth?_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_COMPONENT16,x._shape[0],x._shape[1]):x._useStencil&&_.renderbufferStorage(_.RENDERBUFFER,_.STENCIL_INDEX,x._shape[0],x._shape[1])),_.bindFramebuffer(_.FRAMEBUFFER,x.handle);var M=_.checkFramebufferStatus(_.FRAMEBUFFER);M!==_.FRAMEBUFFER_COMPLETE&&(x.dispose(),i(_,k),l(M)),i(_,k)}}Object.defineProperties(h,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(x){if(Array.isArray(x)||(x=[0|x,0|x]),2!==x.length)throw new Error("gl-fbo: Shape vector must be length 2");var d=0|x[0],w=0|x[1];return o(this,d,w),[d,w]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(x){return o(this,x|=0,this._shape[1]),x},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(x){return o(this,this._shape[0],x|=0),x},enumerable:!1}}),h.bind=function(){if(!this._destroyed){var x=this.gl;x.bindFramebuffer(x.FRAMEBUFFER,this.handle),x.viewport(0,0,this._shape[0],this._shape[1])}},h.dispose=function(){if(!this._destroyed){this._destroyed=!0;var x=this.gl;x.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(x.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var d=0;d<this.color.length;++d)this.color[d].dispose(),this.color[d]=null;this._color_rb&&(x.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(m,b,v){var e=m("sprintf-js").sprintf,n=m("gl-constants/lookup"),t=m("glsl-shader-name"),a=m("add-line-numbers");b.exports=function(r,u,s){"use strict";var i=t(u)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==s&&(l=s===n.FRAGMENT_SHADER?"fragment":"vertex");for(var c=e("Error compiling %s shader %s:\n",l,i),f=e("%s%s",c,r),g=r.split("\n"),h={},o=0;o<g.length;o++){var x=g[o];if(""!==x&&"\0"!==x){var d=parseInt(x.split(":")[2]);if(isNaN(d))throw new Error(e("Could not parse error: %s",x));h[d]=x}}var w=a(u).split("\n");for(o=0;o<w.length;o++)if((h[o+3]||h[o+2]||h[o+1])&&(c+=w[o]+"\n",h[o+1])){var T=h[o+1];T=T.substr(T.split(":",3).join(":").length+1).trim(),c+=e("^^^ %s\n\n",T)}return{long:c.trim(),short:f.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(m,b,v){"use strict";b.exports=function(f,g){var h=f.gl,k=new s(f,a(h,u.vertex,u.fragment),a(h,u.pickVertex,u.pickFragment),r(h),r(h),r(h),r(h));return k.update(g),f.addObject(k),k};var e=m("binary-search-bounds"),n=m("iota-array"),t=m("typedarray-pool"),a=m("gl-shader"),r=m("gl-buffer"),u=m("./lib/shaders");function s(f,g,h,o,x,d,w){this.plot=f,this.shader=g,this.pickShader=h,this.positionBuffer=o,this.weightBuffer=x,this.colorBuffer=d,this.idBuffer=w,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var i,f,g,l=s.prototype,c=[0,0,1,0,0,1,1,0,1,1,0,1];l.draw=(i=[1,0,0,0,1,0,0,0,1],function(){var f=this.plot,g=this.shader,h=this.bounds,o=this.numVertices;if(!(o<=0)){var x=f.gl,d=f.dataBox,_=h[3]-h[1],T=d[2]-d[0],k=d[3]-d[1];i[0]=2*(h[2]-h[0])/T,i[4]=2*_/k,i[6]=2*(h[0]-d[0])/T-1,i[7]=2*(h[1]-d[1])/k-1,g.bind();var L=g.uniforms;L.viewTransform=i,L.shape=this.shape;var M=g.attributes;this.positionBuffer.bind(),M.position.pointer(),this.weightBuffer.bind(),M.weight.pointer(x.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),M.color.pointer(x.UNSIGNED_BYTE,!0),x.drawArrays(x.TRIANGLES,0,o)}}),l.drawPick=(f=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0],function(h){var o=this.plot,x=this.pickShader,d=this.bounds,w=this.numVertices;if(!(w<=0)){var _=o.gl,T=o.dataBox,L=d[3]-d[1],M=T[2]-T[0],O=T[3]-T[1];f[0]=2*(d[2]-d[0])/M,f[4]=2*L/O,f[6]=2*(d[0]-T[0])/M-1,f[7]=2*(d[1]-T[1])/O-1;for(var P=0;P<4;++P)g[P]=h>>8*P&255;this.pickOffset=h,x.bind();var S=x.uniforms;S.viewTransform=f,S.pickOffset=g,S.shape=this.shape;var E=x.attributes;return this.positionBuffer.bind(),E.position.pointer(),this.weightBuffer.bind(),E.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),E.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,w),h+this.shape[0]*this.shape[1]}}),l.pick=function(f,g,h){var o=this.pickOffset;if(h<o||h>=o+this.shape[0]*this.shape[1])return null;var d=h-o;return{object:this,pointId:d,dataCoord:[this.xData[d%this.shape[0]],this.yData[d/this.shape[0]|0]]}},l.update=function(f){var g=(f=f||{}).shape||[0,0],h=f.x||n(g[0]),o=f.y||n(g[1]),x=f.z||new Float32Array(g[0]*g[1]),d=!1!==f.zsmooth;this.xData=h,this.yData=o;var w,_,T,k,L=f.colorLevels||[0],M=f.colorValues||[0,0,0,1],O=L.length,P=this.bounds;d?(w=P[0]=h[0],_=P[1]=o[0],T=P[2]=h[h.length-1],k=P[3]=o[o.length-1]):(w=P[0]=h[0]+(h[1]-h[0])/2,_=P[1]=o[0]+(o[1]-o[0])/2,T=P[2]=h[h.length-1]+(h[h.length-1]-h[h.length-2])/2,k=P[3]=o[o.length-1]+(o[o.length-1]-o[o.length-2])/2);var S=1/(T-w),E=1/(k-_),R=g[0],B=g[1];this.shape=[R,B];var H=(d?(R-1)*(B-1):R*B)*(c.length>>>1);this.numVertices=H;for(var V=t.mallocUint8(4*H),Z=t.mallocFloat32(2*H),W=t.mallocUint8(2*H),G=t.mallocUint32(H),X=0,te=d?R-1:R,D=d?B-1:B,N=0;N<D;++N){var U,Q;d?(U=E*(o[N]-_),Q=E*(o[N+1]-_)):(U=N<B-1?E*(o[N]-(o[N+1]-o[N])/2-_):E*(o[N]-(o[N]-o[N-1])/2-_),Q=N<B-1?E*(o[N]+(o[N+1]-o[N])/2-_):E*(o[N]+(o[N]-o[N-1])/2-_));for(var j=0;j<te;++j){var J,K;d?(J=S*(h[j]-w),K=S*(h[j+1]-w)):(J=j<R-1?S*(h[j]-(h[j+1]-h[j])/2-w):S*(h[j]-(h[j]-h[j-1])/2-w),K=j<R-1?S*(h[j]+(h[j+1]-h[j])/2-w):S*(h[j]+(h[j]-h[j-1])/2-w));for(var re=0;re<c.length;re+=2){var ne,se,oe,pe,ce=c[re],ge=c[re+1],xe=x[d?(N+ge)*R+(j+ce):N*R+j],we=e.le(L,xe);if(we<0)ne=M[0],se=M[1],oe=M[2],pe=M[3];else if(we===O-1)ne=M[4*O-4],se=M[4*O-3],oe=M[4*O-2],pe=M[4*O-1];else{var be=(xe-L[we])/(L[we+1]-L[we]),Se=1-be,fe=4*we,me=4*(we+1);ne=Se*M[fe]+be*M[me],se=Se*M[fe+1]+be*M[me+1],oe=Se*M[fe+2]+be*M[me+2],pe=Se*M[fe+3]+be*M[me+3]}V[4*X]=255*ne,V[4*X+1]=255*se,V[4*X+2]=255*oe,V[4*X+3]=255*pe,Z[2*X]=.5*J+.5*K,Z[2*X+1]=.5*U+.5*Q,W[2*X]=ce,W[2*X+1]=ge,G[X]=N*R+j,X+=1}}}this.positionBuffer.update(Z),this.weightBuffer.update(W),this.colorBuffer.update(V),this.idBuffer.update(G),t.free(Z),t.free(V),t.free(W),t.free(G)},l.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(m,b,v){"use strict";var e=m("glslify");b.exports={fragment:e(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(m,b,v){var e=m("glslify"),n=m("gl-shader"),t=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];v.createShader=function(s){return n(s,t,a,null,u)},v.createPickShader=function(s){return n(s,t,r,null,u)}},{"gl-shader":132,glslify:231}],91:[function(m,b,v){"use strict";b.exports=function(w){var _=w.gl||w.scene&&w.scene.gl,T=l(_);T.attributes.position.location=0,T.attributes.nextPosition.location=1,T.attributes.arcLength.location=2,T.attributes.lineWidth.location=3,T.attributes.color.location=4;var k=c(_);k.attributes.position.location=0,k.attributes.nextPosition.location=1,k.attributes.arcLength.location=2,k.attributes.lineWidth.location=3,k.attributes.color.location=4;for(var L=e(_),M=n(_,[{buffer:L,size:3,offset:0,stride:48},{buffer:L,size:3,offset:12,stride:48},{buffer:L,size:1,offset:24,stride:48},{buffer:L,size:1,offset:28,stride:48},{buffer:L,size:4,offset:32,stride:48}]),O=s(new Array(1024),[256,1,4]),P=0;P<1024;++P)O.data[P]=255;var S=t(_,O);S.wrap=_.REPEAT;var E=new x(_,T,k,L,M,S);return E.update(w),E};var e=m("gl-buffer"),n=m("gl-vao"),t=m("gl-texture2d"),a=new Uint8Array(4),r=new Float32Array(a.buffer),u=m("binary-search-bounds"),s=m("ndarray"),i=m("./lib/shaders"),l=i.createShader,c=i.createPickShader,f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(w,_){for(var T=0,k=0;k<3;++k){var L=w[k]-_[k];T+=L*L}return Math.sqrt(T)}function h(w){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)_[0][T]=Math.max(w[0][T],_[0][T]),_[1][T]=Math.min(w[1][T],_[1][T]);return _}function o(w,_,T,k){this.arcLength=w,this.position=_,this.index=T,this.dataCoordinate=k}function x(w,_,T,k,L,M){this.gl=w,this.shader=_,this.pickShader=T,this.buffer=k,this.vao=L,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=M,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var d=x.prototype;d.isTransparent=function(){return this.hasAlpha},d.isOpaque=function(){return!this.hasAlpha},d.pickSlots=1,d.setPickBase=function(w){this.pickId=w},d.drawTransparent=d.draw=function(w){if(this.vertexCount){var _=this.gl,T=this.shader,k=this.vao;T.bind(),T.uniforms={model:w.model||f,view:w.view||f,projection:w.projection||f,clipBounds:h(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(_.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},d.drawPick=function(w){if(this.vertexCount){var _=this.gl,T=this.pickShader,k=this.vao;T.bind(),T.uniforms={model:w.model||f,view:w.view||f,projection:w.projection||f,pickId:this.pickId,clipBounds:h(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(_.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},d.update=function(w){var _,T;this.dirty=!0;var k=!!w.connectGaps;"dashScale"in w&&(this.dashScale=w.dashScale),this.hasAlpha=!1,"opacity"in w&&(this.opacity=+w.opacity,this.opacity<1&&(this.hasAlpha=!0));var L=[],M=[],O=[],P=0,S=0,E=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=w.position||w.positions;if(R){var B=w.color||w.colors||[0,0,0,1],H=w.lineWidth||1,V=!1;e:for(_=1;_<R.length;++_){var Z,W,G,X=R[_-1],te=R[_];for(M.push(P),O.push(X.slice()),T=0;T<3;++T){if(isNaN(X[T])||isNaN(te[T])||!isFinite(X[T])||!isFinite(te[T])){if(!k&&L.length>0){for(var D=0;D<24;++D)L.push(L[L.length-12]);S+=2,V=!0}continue e}E[0][T]=Math.min(E[0][T],X[T],te[T]),E[1][T]=Math.max(E[1][T],X[T],te[T])}Array.isArray(B[0])?(Z=B.length>_-1?B[_-1]:B.length>0?B[B.length-1]:[0,0,0,1],W=B.length>_?B[_]:B.length>0?B[B.length-1]:[0,0,0,1]):Z=W=B,3===Z.length&&(Z=[Z[0],Z[1],Z[2],1]),3===W.length&&(W=[W[0],W[1],W[2],1]),!this.hasAlpha&&Z[3]<1&&(this.hasAlpha=!0),G=Array.isArray(H)?H.length>_-1?H[_-1]:H.length>0?H[H.length-1]:[0,0,0,1]:H;var N=P;if(P+=g(X,te),V){for(T=0;T<2;++T)L.push(X[0],X[1],X[2],te[0],te[1],te[2],N,G,Z[0],Z[1],Z[2],Z[3]);S+=2,V=!1}L.push(X[0],X[1],X[2],te[0],te[1],te[2],N,G,Z[0],Z[1],Z[2],Z[3],X[0],X[1],X[2],te[0],te[1],te[2],N,-G,Z[0],Z[1],Z[2],Z[3],te[0],te[1],te[2],X[0],X[1],X[2],P,-G,W[0],W[1],W[2],W[3],te[0],te[1],te[2],X[0],X[1],X[2],P,G,W[0],W[1],W[2],W[3]),S+=4}}if(this.buffer.update(L),M.push(P),O.push(R[R.length-1].slice()),this.bounds=E,this.vertexCount=S,this.points=O,this.arcLength=M,"dashes"in w){var U=w.dashes.slice();for(U.unshift(0),_=1;_<U.length;++_)U[_]=U[_-1]+U[_];var Q=s(new Array(1024),[256,1,4]);for(_=0;_<256;++_){for(T=0;T<4;++T)Q.set(_,0,T,0);1&u.le(U,U[U.length-1]*_/255)?Q.set(_,0,0,0):Q.set(_,0,0,255)}this.texture.setPixels(Q)}},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},d.pick=function(w){if(!w||w.id!==this.pickId)return null;var R,B,H,_=(R=w.value[0],B=w.value[1],H=w.value[2],a[0]=0,a[1]=H,a[2]=B,a[3]=R,r[0]),T=u.le(this.arcLength,_);if(T<0)return null;if(T===this.arcLength.length-1)return new o(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),T);for(var k=this.points[T],L=this.points[Math.min(T+1,this.points.length-1)],M=(_-this.arcLength[T])/(this.arcLength[T+1]-this.arcLength[T]),O=1-M,P=[0,0,0],S=0;S<3;++S)P[S]=O*k[S]+M*L[S];var E=Math.min(M<.5?T:T+1,this.points.length-1);return new o(_,P,E,this.points[E])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(m,b,v){b.exports=function(e){var n=new Float32Array(16);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}},{}],93:[function(m,b,v){b.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(m,b,v){b.exports=function(e){var n=e[0],t=e[1],a=e[2],r=e[3],u=e[4],s=e[5],i=e[6],l=e[7],c=e[8],f=e[9],g=e[10],h=e[11],o=e[12],x=e[13],d=e[14],w=e[15];return(n*s-t*u)*(g*w-h*d)-(n*i-a*u)*(f*w-h*x)+(n*l-r*u)*(f*d-g*x)+(t*i-a*s)*(c*w-h*o)-(t*l-r*s)*(c*d-g*o)+(a*l-r*i)*(c*x-f*o)}},{}],95:[function(m,b,v){b.exports=function(e,n){var t=n[0],a=n[1],r=n[2],u=n[3],s=t+t,i=a+a,l=r+r,c=t*s,f=a*s,g=a*i,h=r*s,o=r*i,x=r*l,d=u*s,w=u*i,_=u*l;return e[0]=1-g-x,e[1]=f+_,e[2]=h-w,e[3]=0,e[4]=f-_,e[5]=1-c-x,e[6]=o+d,e[7]=0,e[8]=h+w,e[9]=o-d,e[10]=1-c-g,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(m,b,v){b.exports=function(e,n,t){var a=n[0],r=n[1],u=n[2],s=n[3],i=a+a,l=r+r,c=u+u,f=a*i,g=a*l,h=a*c,o=r*l,x=r*c,d=u*c,w=s*i,_=s*l,T=s*c;return e[0]=1-(o+d),e[1]=g+T,e[2]=h-_,e[3]=0,e[4]=g-T,e[5]=1-(f+d),e[6]=x+w,e[7]=0,e[8]=h+_,e[9]=x-w,e[10]=1-(f+o),e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}},{}],97:[function(m,b,v){b.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(m,b,v){b.exports=function(e,n){var t=n[0],a=n[1],r=n[2],u=n[3],s=n[4],i=n[5],l=n[6],c=n[7],f=n[8],g=n[9],h=n[10],o=n[11],x=n[12],d=n[13],w=n[14],_=n[15],T=t*i-a*s,k=t*l-r*s,L=t*c-u*s,M=a*l-r*i,O=a*c-u*i,P=r*c-u*l,S=f*d-g*x,E=f*w-h*x,R=f*_-o*x,B=g*w-h*d,H=g*_-o*d,V=h*_-o*w,Z=T*V-k*H+L*B+M*R-O*E+P*S;return Z?(e[0]=(i*V-l*H+c*B)*(Z=1/Z),e[1]=(r*H-a*V-u*B)*Z,e[2]=(d*P-w*O+_*M)*Z,e[3]=(h*O-g*P-o*M)*Z,e[4]=(l*R-s*V-c*E)*Z,e[5]=(t*V-r*R+u*E)*Z,e[6]=(w*L-x*P-_*k)*Z,e[7]=(f*P-h*L+o*k)*Z,e[8]=(s*H-i*R+c*S)*Z,e[9]=(a*R-t*H-u*S)*Z,e[10]=(x*O-d*L+_*T)*Z,e[11]=(g*L-f*O-o*T)*Z,e[12]=(i*E-s*B-l*S)*Z,e[13]=(t*B-a*E+r*S)*Z,e[14]=(d*k-x*M-w*T)*Z,e[15]=(f*M-g*k+h*T)*Z,e):null}},{}],99:[function(m,b,v){var e=m("./identity");b.exports=function(n,t,a,r){var u,s,i,l,c,f,g,h,o,x,d=t[0],w=t[1],_=t[2],T=r[0],k=r[1],L=r[2],M=a[0],O=a[1],P=a[2];return Math.abs(d-M)<1e-6&&Math.abs(w-O)<1e-6&&Math.abs(_-P)<1e-6?e(n):(g=d-M,h=w-O,o=_-P,u=k*(o*=x=1/Math.sqrt(g*g+h*h+o*o))-L*(h*=x),s=L*(g*=x)-T*o,i=T*h-k*g,(x=Math.sqrt(u*u+s*s+i*i))?(u*=x=1/x,s*=x,i*=x):(u=0,s=0,i=0),l=h*i-o*s,c=o*u-g*i,f=g*s-h*u,(x=Math.sqrt(l*l+c*c+f*f))?(l*=x=1/x,c*=x,f*=x):(l=0,c=0,f=0),n[0]=u,n[1]=l,n[2]=g,n[3]=0,n[4]=s,n[5]=c,n[6]=h,n[7]=0,n[8]=i,n[9]=f,n[10]=o,n[11]=0,n[12]=-(u*d+s*w+i*_),n[13]=-(l*d+c*w+f*_),n[14]=-(g*d+h*w+o*_),n[15]=1,n)}},{"./identity":97}],100:[function(m,b,v){b.exports=function(e,n,t){var a=n[0],r=n[1],u=n[2],s=n[3],i=n[4],l=n[5],c=n[6],f=n[7],g=n[8],h=n[9],o=n[10],x=n[11],d=n[12],w=n[13],_=n[14],T=n[15],k=t[0],L=t[1],M=t[2],O=t[3];return e[0]=k*a+L*i+M*g+O*d,e[1]=k*r+L*l+M*h+O*w,e[2]=k*u+L*c+M*o+O*_,e[3]=k*s+L*f+M*x+O*T,e[4]=(k=t[4])*a+(L=t[5])*i+(M=t[6])*g+(O=t[7])*d,e[5]=k*r+L*l+M*h+O*w,e[6]=k*u+L*c+M*o+O*_,e[7]=k*s+L*f+M*x+O*T,e[8]=(k=t[8])*a+(L=t[9])*i+(M=t[10])*g+(O=t[11])*d,e[9]=k*r+L*l+M*h+O*w,e[10]=k*u+L*c+M*o+O*_,e[11]=k*s+L*f+M*x+O*T,e[12]=(k=t[12])*a+(L=t[13])*i+(M=t[14])*g+(O=t[15])*d,e[13]=k*r+L*l+M*h+O*w,e[14]=k*u+L*c+M*o+O*_,e[15]=k*s+L*f+M*x+O*T,e}},{}],101:[function(m,b,v){b.exports=function(e,n,t,a,r,u,s){var i=1/(n-t),l=1/(a-r),c=1/(u-s);return e[0]=-2*i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(n+t)*i,e[13]=(r+a)*l,e[14]=(s+u)*c,e[15]=1,e}},{}],102:[function(m,b,v){b.exports=function(e,n,t,a,r){var u=1/Math.tan(n/2),s=1/(a-r);return e[0]=u/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+a)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*a*s,e[15]=0,e}},{}],103:[function(m,b,v){b.exports=function(e,n,t,a){var r,u,s,i,l,c,f,g,h,o,x,d,w,_,T,k,L,M,O,P,S,E,R,B,H=a[0],V=a[1],Z=a[2],W=Math.sqrt(H*H+V*V+Z*Z);return Math.abs(W)<1e-6?null:(H*=W=1/W,V*=W,Z*=W,r=Math.sin(t),u=Math.cos(t),l=n[1],c=n[2],f=n[3],h=n[5],o=n[6],x=n[7],w=n[9],_=n[10],T=n[11],O=H*V*(s=1-u)-Z*r,P=V*V*s+u,S=Z*V*s+H*r,E=H*Z*s+V*r,R=V*Z*s-H*r,B=Z*Z*s+u,e[0]=(i=n[0])*(k=H*H*s+u)+(g=n[4])*(L=V*H*s+Z*r)+(d=n[8])*(M=Z*H*s-V*r),e[1]=l*k+h*L+w*M,e[2]=c*k+o*L+_*M,e[3]=f*k+x*L+T*M,e[4]=i*O+g*P+d*S,e[5]=l*O+h*P+w*S,e[6]=c*O+o*P+_*S,e[7]=f*O+x*P+T*S,e[8]=i*E+g*R+d*B,e[9]=l*E+h*R+w*B,e[10]=c*E+o*R+_*B,e[11]=f*E+x*R+T*B,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)}},{}],104:[function(m,b,v){b.exports=function(e,n,t){var a=Math.sin(t),r=Math.cos(t),u=n[4],s=n[5],i=n[6],l=n[7],c=n[8],f=n[9],g=n[10],h=n[11];return n!==e&&(e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[4]=u*r+c*a,e[5]=s*r+f*a,e[6]=i*r+g*a,e[7]=l*r+h*a,e[8]=c*r-u*a,e[9]=f*r-s*a,e[10]=g*r-i*a,e[11]=h*r-l*a,e}},{}],105:[function(m,b,v){b.exports=function(e,n,t){var a=Math.sin(t),r=Math.cos(t),u=n[0],s=n[1],i=n[2],l=n[3],c=n[8],f=n[9],g=n[10],h=n[11];return n!==e&&(e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=u*r-c*a,e[1]=s*r-f*a,e[2]=i*r-g*a,e[3]=l*r-h*a,e[8]=u*a+c*r,e[9]=s*a+f*r,e[10]=i*a+g*r,e[11]=l*a+h*r,e}},{}],106:[function(m,b,v){b.exports=function(e,n,t){var a=Math.sin(t),r=Math.cos(t),u=n[0],s=n[1],i=n[2],l=n[3],c=n[4],f=n[5],g=n[6],h=n[7];return n!==e&&(e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e[0]=u*r+c*a,e[1]=s*r+f*a,e[2]=i*r+g*a,e[3]=l*r+h*a,e[4]=c*r-u*a,e[5]=f*r-s*a,e[6]=g*r-i*a,e[7]=h*r-l*a,e}},{}],107:[function(m,b,v){b.exports=function(e,n,t){var a=t[0],r=t[1],u=t[2];return e[0]=n[0]*a,e[1]=n[1]*a,e[2]=n[2]*a,e[3]=n[3]*a,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=n[7]*r,e[8]=n[8]*u,e[9]=n[9]*u,e[10]=n[10]*u,e[11]=n[11]*u,e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],e}},{}],108:[function(m,b,v){b.exports=function(e,n,t){var a,r,u,s,i,l,c,f,g,h,o,x,d=t[0],w=t[1],_=t[2];return n===e?(e[12]=n[0]*d+n[4]*w+n[8]*_+n[12],e[13]=n[1]*d+n[5]*w+n[9]*_+n[13],e[14]=n[2]*d+n[6]*w+n[10]*_+n[14],e[15]=n[3]*d+n[7]*w+n[11]*_+n[15]):(r=n[1],u=n[2],s=n[3],i=n[4],l=n[5],c=n[6],f=n[7],g=n[8],h=n[9],o=n[10],x=n[11],e[0]=a=n[0],e[1]=r,e[2]=u,e[3]=s,e[4]=i,e[5]=l,e[6]=c,e[7]=f,e[8]=g,e[9]=h,e[10]=o,e[11]=x,e[12]=a*d+i*w+g*_+n[12],e[13]=r*d+l*w+h*_+n[13],e[14]=u*d+c*w+o*_+n[14],e[15]=s*d+f*w+x*_+n[15]),e}},{}],109:[function(m,b,v){b.exports=function(e,n){if(e===n){var t=n[1],a=n[2],r=n[3],u=n[6],s=n[7],i=n[11];e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=t,e[6]=n[9],e[7]=n[13],e[8]=a,e[9]=u,e[11]=n[14],e[12]=r,e[13]=s,e[14]=i}else e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12],e[4]=n[1],e[5]=n[5],e[6]=n[9],e[7]=n[13],e[8]=n[2],e[9]=n[6],e[10]=n[10],e[11]=n[14],e[12]=n[3],e[13]=n[7],e[14]=n[11],e[15]=n[15];return e}},{}],110:[function(m,b,v){"use strict";var e=m("barycentric"),n=m("polytope-closest-point/lib/closest_point_2d.js");function t(u,s){for(var i=[0,0,0,0],l=0;l<4;++l)for(var c=0;c<4;++c)i[c]+=u[4*l+c]*s[l];return i}function a(u,s,i,l,c){for(var f=t(l,t(i,t(s,[u[0],u[1],u[2],1]))),g=0;g<3;++g)f[g]/=f[3];return[.5*c[0]*(1+f[0]),.5*c[1]*(1-f[1])]}function r(u,s){for(var i=[0,0,0],l=0;l<u.length;++l)for(var c=u[l],f=s[l],g=0;g<3;++g)i[g]+=f*c[g];return i}b.exports=function(u,s,i,l,c,f){if(1===u.length)return[0,u[0].slice()];for(var g=new Array(u.length),h=0;h<u.length;++h)g[h]=a(u[h],i,l,c,f);var o=0,x=1/0;for(h=0;h<g.length;++h){for(var d=0,w=0;w<2;++w)d+=Math.pow(g[h][w]-s[w],2);d<x&&(x=d,o=h)}var _=function(k,L){if(2===k.length){for(var M=0,O=0,P=0;P<2;++P)M+=Math.pow(L[P]-k[0][P],2),O+=Math.pow(L[P]-k[1][P],2);return(M=Math.sqrt(M))+(O=Math.sqrt(O))<1e-6?[1,0]:[O/(M+O),M/(O+M)]}if(3===k.length){var S=[0,0];return n(k[0],k[1],k[2],L,S),e(k,S)}return[]}(g,s),T=0;for(h=0;h<3;++h){if(_[h]<-.001||_[h]>1.0001)return null;T+=_[h]}return Math.abs(T-1)>.001?null:[o,r(u,_),_]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(m,b,v){var e=m("glslify"),n=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),t=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),u=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),c=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),f=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),g=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);v.meshShader={vertex:n,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},v.wireShader={vertex:a,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},v.pointShader={vertex:u,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},v.pickShader={vertex:i,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},v.pointPickShader={vertex:c,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},v.contourShader={vertex:f,fragment:g,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(m,b,v){"use strict";var e=m("gl-shader"),n=m("gl-buffer"),t=m("gl-vao"),a=m("gl-texture2d"),r=m("normals"),u=m("gl-mat4/multiply"),s=m("gl-mat4/invert"),i=m("ndarray"),l=m("colormap"),c=m("simplicial-complex-contour"),f=m("typedarray-pool"),g=m("./lib/shaders"),h=m("./lib/closest-point"),o=g.meshShader,x=g.wireShader,d=g.pointShader,w=g.pickShader,_=g.pointPickShader,T=g.contourShader,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function L(V,Z,W,G,X,te,D,N,U,Q,j,J,K,re,ne,se,oe,pe,ce,ge,xe,we,be,Se,fe,me,Te){this.gl=V,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=Z,this.dirty=!0,this.triShader=W,this.lineShader=G,this.pointShader=X,this.pickShader=te,this.pointPickShader=D,this.contourShader=N,this.trianglePositions=U,this.triangleColors=j,this.triangleNormals=K,this.triangleUVs=J,this.triangleIds=Q,this.triangleVAO=re,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ne,this.edgeColors=oe,this.edgeUVs=pe,this.edgeIds=se,this.edgeVAO=ce,this.edgeCount=0,this.pointPositions=ge,this.pointColors=we,this.pointUVs=be,this.pointSizes=Se,this.pointIds=xe,this.pointVAO=fe,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=me,this.contourVAO=Te,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=k,this._view=k,this._projection=k,this._resolution=[1,1]}var M=L.prototype;function O(V,Z){if(!Z||!Z.length)return 1;for(var W=0;W<Z.length;++W){if(Z.length<2)return 1;if(Z[W][0]===V)return Z[W][1];if(Z[W][0]>V&&W>0){var G=(Z[W][0]-V)/(Z[W][0]-Z[W-1][0]);return Z[W][1]*(1-G)+G*Z[W-1][1]}}return 1}function P(V){var Z=e(V,o.vertex,o.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z.attributes.normal.location=4,Z}function S(V){var Z=e(V,x.vertex,x.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z}function E(V){var Z=e(V,d.vertex,d.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z.attributes.pointSize.location=4,Z}function R(V){var Z=e(V,w.vertex,w.fragment);return Z.attributes.position.location=0,Z.attributes.id.location=1,Z}function B(V){var Z=e(V,_.vertex,_.fragment);return Z.attributes.position.location=0,Z.attributes.id.location=1,Z.attributes.pointSize.location=4,Z}function H(V){var Z=e(V,T.vertex,T.fragment);return Z.attributes.position.location=0,Z}M.isOpaque=function(){return!this.hasAlpha},M.isTransparent=function(){return this.hasAlpha},M.pickSlots=1,M.setPickBase=function(V){this.pickId=V},M.highlight=function(V){if(V&&this.contourEnable){for(var Z=c(this.cells,this.intensity,V.intensity),W=Z.cells,G=Z.vertexIds,X=Z.vertexWeights,te=W.length,D=f.mallocFloat32(6*te),N=0,U=0;U<te;++U)for(var Q=W[U],j=0;j<2;++j){var J=Q[0];2===Q.length&&(J=Q[j]);for(var ne=X[J],se=1-ne,oe=this.positions[G[J][0]],pe=this.positions[G[J][1]],ce=0;ce<3;++ce)D[N++]=ne*oe[ce]+se*pe[ce]}this.contourCount=N/3|0,this.contourPositions.update(D.subarray(0,N)),f.free(D)}else this.contourCount=0},M.update=function(V){V=V||{};var Z=this.gl;this.dirty=!0,"contourEnable"in V&&(this.contourEnable=V.contourEnable),"contourColor"in V&&(this.contourColor=V.contourColor),"lineWidth"in V&&(this.lineWidth=V.lineWidth),"lightPosition"in V&&(this.lightPosition=V.lightPosition),this.hasAlpha=!1,"opacity"in V&&(this.opacity=V.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in V&&(this.opacityscale=V.opacityscale,this.hasAlpha=!0),"ambient"in V&&(this.ambientLight=V.ambient),"diffuse"in V&&(this.diffuseLight=V.diffuse),"specular"in V&&(this.specularLight=V.specular),"roughness"in V&&(this.roughness=V.roughness),"fresnel"in V&&(this.fresnel=V.fresnel),V.texture?(this.texture.dispose(),this.texture=a(Z,V.texture)):V.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=Z.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=Z.LINEAR,this.texture.setPixels(function(Yt,Fe){for(var He=l({colormap:Yt,nshades:256,format:"rgba"}),Oe=new Uint8Array(1024),$e=0;$e<256;++$e){for(var ke=He[$e],Le=0;Le<3;++Le)Oe[4*$e+Le]=ke[Le];Oe[4*$e+3]=Fe?255*O($e/255,Fe):255*ke[3]}return i(Oe,[256,256,4],[4,0,1])}(V.colormap,this.opacityscale)),this.texture.generateMipmap());var W=V.cells,G=V.positions;if(G&&W){var X=[],te=[],D=[],N=[],U=[],Q=[],j=[],J=[],K=[],re=[],ne=[],se=[],oe=[],pe=[];this.cells=W,this.positions=G;var ce=V.vertexNormals,ge=V.cellNormals,xe=void 0===V.vertexNormalsEpsilon?1e-6:V.vertexNormalsEpsilon;V.useFacetNormals&&!ge&&(ge=r.faceNormals(W,G,void 0===V.faceNormalsEpsilon?1e-6:V.faceNormalsEpsilon)),ge||ce||(ce=r.vertexNormals(W,G,xe));var be=V.vertexColors,Se=V.cellColors,fe=V.meshColor||[1,1,1,1],me=V.vertexUVs,Te=V.vertexIntensity,_e=V.cellUVs,Me=V.cellIntensity,Ie=1/0,ze=-1/0;if(!me&&!_e)if(Te)if(V.vertexIntensityBounds)Ie=+V.vertexIntensityBounds[0],ze=+V.vertexIntensityBounds[1];else for(var Ve=0;Ve<Te.length;++Ve){var Je=Te[Ve];Ie=Math.min(Ie,Je),ze=Math.max(ze,Je)}else if(Me)if(V.cellIntensityBounds)Ie=+V.cellIntensityBounds[0],ze=+V.cellIntensityBounds[1];else for(Ve=0;Ve<Me.length;++Ve)Je=Me[Ve],Ie=Math.min(Ie,Je),ze=Math.max(ze,Je);else for(Ve=0;Ve<G.length;++Ve)Je=G[Ve][2],Ie=Math.min(Ie,Je),ze=Math.max(ze,Je);this.intensity=Te||Me||function(Yt){for(var Fe=Yt.length,He=new Array(Fe),Oe=0;Oe<Fe;++Oe)He[Oe]=Yt[Oe][2];return He}(G),this.pickVertex=!(Me||Se);var De=V.pointSizes,Be=V.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Ve=0;Ve<G.length;++Ve)for(var Ze=G[Ve],Ye=0;Ye<3;++Ye)!isNaN(Ze[Ye])&&isFinite(Ze[Ye])&&(this.bounds[0][Ye]=Math.min(this.bounds[0][Ye],Ze[Ye]),this.bounds[1][Ye]=Math.max(this.bounds[1][Ye],Ze[Ye]));var tt=0,st=0,vt=0;e:for(Ve=0;Ve<W.length;++Ve){var Pt=W[Ve];switch(Pt.length){case 1:for(Ze=G[rt=Pt[0]],Ye=0;Ye<3;++Ye)if(isNaN(Ze[Ye])||!isFinite(Ze[Ye]))continue e;re.push(Ze[0],Ze[1],Ze[2]),et=be?be[rt]:Se?Se[Ve]:fe,this.opacityscale&&Te?te.push(et[0],et[1],et[2],this.opacity*O((Te[rt]-Ie)/(ze-Ie),this.opacityscale)):3===et.length?ne.push(et[0],et[1],et[2],this.opacity):(ne.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)),se.push((bt=me?me[rt]:Te?[(Te[rt]-Ie)/(ze-Ie),0]:_e?_e[Ve]:Me?[(Me[Ve]-Ie)/(ze-Ie),0]:[(Ze[2]-Ie)/(ze-Ie),0])[0],bt[1]),oe.push(De?De[rt]:Be),pe.push(Ve),vt+=1;break;case 2:for(Ye=0;Ye<2;++Ye){Ze=G[rt=Pt[Ye]];for(var Mt=0;Mt<3;++Mt)if(isNaN(Ze[Mt])||!isFinite(Ze[Mt]))continue e}for(Ye=0;Ye<2;++Ye)Ze=G[rt=Pt[Ye]],Q.push(Ze[0],Ze[1],Ze[2]),et=be?be[rt]:Se?Se[Ve]:fe,this.opacityscale&&Te?te.push(et[0],et[1],et[2],this.opacity*O((Te[rt]-Ie)/(ze-Ie),this.opacityscale)):3===et.length?j.push(et[0],et[1],et[2],this.opacity):(j.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)),J.push((bt=me?me[rt]:Te?[(Te[rt]-Ie)/(ze-Ie),0]:_e?_e[Ve]:Me?[(Me[Ve]-Ie)/(ze-Ie),0]:[(Ze[2]-Ie)/(ze-Ie),0])[0],bt[1]),K.push(Ve);st+=1;break;case 3:for(Ye=0;Ye<3;++Ye)for(Ze=G[rt=Pt[Ye]],Mt=0;Mt<3;++Mt)if(isNaN(Ze[Mt])||!isFinite(Ze[Mt]))continue e;for(Ye=0;Ye<3;++Ye){var rt,et,bt,Rt;Ze=G[rt=Pt[2-Ye]],X.push(Ze[0],Ze[1],Ze[2]),(et=be?be[rt]:Se?Se[Ve]:fe)?this.opacityscale&&Te?te.push(et[0],et[1],et[2],this.opacity*O((Te[rt]-Ie)/(ze-Ie),this.opacityscale)):3===et.length?te.push(et[0],et[1],et[2],this.opacity):(te.push(et[0],et[1],et[2],et[3]*this.opacity),et[3]<1&&(this.hasAlpha=!0)):te.push(.5,.5,.5,1),N.push((bt=me?me[rt]:Te?[(Te[rt]-Ie)/(ze-Ie),0]:_e?_e[Ve]:Me?[(Me[Ve]-Ie)/(ze-Ie),0]:[(Ze[2]-Ie)/(ze-Ie),0])[0],bt[1]),D.push((Rt=ce?ce[rt]:ge[Ve])[0],Rt[1],Rt[2]),U.push(Ve)}tt+=1}}this.pointCount=vt,this.edgeCount=st,this.triangleCount=tt,this.pointPositions.update(re),this.pointColors.update(ne),this.pointUVs.update(se),this.pointSizes.update(oe),this.pointIds.update(new Uint32Array(pe)),this.edgePositions.update(Q),this.edgeColors.update(j),this.edgeUVs.update(J),this.edgeIds.update(new Uint32Array(K)),this.trianglePositions.update(X),this.triangleColors.update(te),this.triangleUVs.update(N),this.triangleNormals.update(D),this.triangleIds.update(new Uint32Array(U))}},M.drawTransparent=M.draw=function(V){for(var Z=this.gl,W=(V=V||{}).model||k,G=V.view||k,X=V.projection||k,te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],D=0;D<3;++D)te[0][D]=Math.max(te[0][D],this.clipBounds[0][D]),te[1][D]=Math.min(te[1][D],this.clipBounds[1][D]);var N={model:W,view:G,projection:X,inverseModel:k.slice(),clipBounds:te,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};N.inverseModel=s(N.inverseModel,N.model),Z.disable(Z.CULL_FACE),this.texture.bind(0);var U=new Array(16);for(u(U,N.view,N.model),u(U,N.projection,U),s(U,U),D=0;D<3;++D)N.eyePosition[D]=U[12+D]/U[15];var Q,j=U[15];for(D=0;D<3;++D)j+=this.lightPosition[D]*U[4*D+3];for(D=0;D<3;++D){for(var J=U[12+D],K=0;K<3;++K)J+=U[4*K+D]*this.lightPosition[K];N.lightPosition[D]=J/j}this.triangleCount>0&&((Q=this.triShader).bind(),Q.uniforms=N,this.triangleVAO.bind(),Z.drawArrays(Z.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((Q=this.lineShader).bind(),Q.uniforms=N,this.edgeVAO.bind(),Z.lineWidth(this.lineWidth*this.pixelRatio),Z.drawArrays(Z.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((Q=this.pointShader).bind(),Q.uniforms=N,this.pointVAO.bind(),Z.drawArrays(Z.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((Q=this.contourShader).bind(),Q.uniforms=N,this.contourVAO.bind(),Z.drawArrays(Z.LINES,0,this.contourCount),this.contourVAO.unbind())},M.drawPick=function(V){for(var Z=this.gl,W=(V=V||{}).model||k,G=V.view||k,X=V.projection||k,te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],D=0;D<3;++D)te[0][D]=Math.max(te[0][D],this.clipBounds[0][D]),te[1][D]=Math.min(te[1][D],this.clipBounds[1][D]);this._model=[].slice.call(W),this._view=[].slice.call(G),this._projection=[].slice.call(X),this._resolution=[Z.drawingBufferWidth,Z.drawingBufferHeight];var N,U={model:W,view:G,projection:X,clipBounds:te,pickId:this.pickId/255};(N=this.pickShader).bind(),N.uniforms=U,this.triangleCount>0&&(this.triangleVAO.bind(),Z.drawArrays(Z.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),Z.lineWidth(this.lineWidth*this.pixelRatio),Z.drawArrays(Z.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((N=this.pointPickShader).bind(),N.uniforms=U,this.pointVAO.bind(),Z.drawArrays(Z.POINTS,0,this.pointCount),this.pointVAO.unbind())},M.pick=function(V){if(!V||V.id!==this.pickId)return null;for(var Z=V.value[0]+256*V.value[1]+65536*V.value[2],W=this.cells[Z],G=this.positions,X=new Array(W.length),te=0;te<W.length;++te)X[te]=G[W[te]];var D=V.coord[0],N=V.coord[1];if(!this.pickVertex){var U=this.positions[W[0]],Q=this.positions[W[1]],j=this.positions[W[2]];return{_cellCenter:!0,position:[D,N],index:Z,cell:W,cellId:Z,intensity:this.intensity[Z],dataCoordinate:[(U[0]+Q[0]+j[0])/3,(U[1]+Q[1]+j[1])/3,(U[2]+Q[2]+j[2])/3]}}var K=h(X,[D*this.pixelRatio,this._resolution[1]-N*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!K)return null;var re=K[2],ne=0;for(te=0;te<W.length;++te)ne+=re[te]*this.intensity[W[te]];return{position:K[1],index:W[K[0]],cell:W,cellId:Z,intensity:ne,dataCoordinate:this.positions[W[K[0]]]}},M.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},b.exports=function(V,Z){1===arguments.length&&(V=(Z=V).gl);var W=V.getExtension("OES_standard_derivatives")||V.getExtension("MOZ_OES_standard_derivatives")||V.getExtension("WEBKIT_OES_standard_derivatives");if(!W)throw new Error("derivatives not supported");var G=P(V),X=S(V),te=E(V),D=R(V),N=B(V),U=H(V),Q=a(V,i(new Uint8Array([255,255,255,255]),[1,1,4]));Q.generateMipmap(),Q.minFilter=V.LINEAR_MIPMAP_LINEAR,Q.magFilter=V.LINEAR;var j=n(V),J=n(V),K=n(V),re=n(V),ne=n(V),se=t(V,[{buffer:j,type:V.FLOAT,size:3},{buffer:ne,type:V.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:J,type:V.FLOAT,size:4},{buffer:K,type:V.FLOAT,size:2},{buffer:re,type:V.FLOAT,size:3}]),oe=n(V),pe=n(V),ce=n(V),ge=n(V),xe=t(V,[{buffer:oe,type:V.FLOAT,size:3},{buffer:ge,type:V.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:pe,type:V.FLOAT,size:4},{buffer:ce,type:V.FLOAT,size:2}]),we=n(V),be=n(V),Se=n(V),fe=n(V),me=n(V),Te=t(V,[{buffer:we,type:V.FLOAT,size:3},{buffer:me,type:V.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:be,type:V.FLOAT,size:4},{buffer:Se,type:V.FLOAT,size:2},{buffer:fe,type:V.FLOAT,size:1}]),_e=n(V),Me=t(V,[{buffer:_e,type:V.FLOAT,size:3}]),Ie=new L(V,Q,G,X,te,D,N,U,j,ne,J,K,re,se,oe,ge,pe,ce,xe,we,me,be,Se,fe,Te,_e,Me);return Ie.update(Z),Ie}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(m,b,v){"use strict";b.exports=function(i){var l=i.gl;return new a(i,e(l,[0,0,0,1,1,0,1,1]),n(l,t.boxVert,t.lineFrag))};var e=m("gl-buffer"),n=m("gl-shader"),t=m("./shaders");function a(i,l,c){this.plot=i,this.vbo=l,this.shader=c}var r,u,s=a.prototype;s.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},s.drawBox=(r=[0,0],u=[0,0],function(i,l,c,f,g){var o=this.shader,x=this.plot.gl;r[0]=i,r[1]=l,u[0]=c,u[1]=f,o.uniforms.lo=r,o.uniforms.hi=u,o.uniforms.color=g,x.drawArrays(x.TRIANGLE_STRIP,0,4)}),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(m,b,v){"use strict";b.exports=function(h){var o=h.gl;return new r(h,e(o),n(o,a.gridVert,a.gridFrag),n(o,a.tickVert,a.gridFrag))};var e=m("gl-buffer"),n=m("gl-shader"),t=m("binary-search-bounds"),a=m("./shaders");function r(h,o,x,d){this.plot=h,this.vbo=o,this.shader=x,this.tickShader=d,this.ticks=[[],[]]}function u(h,o){return h-o}var s,i,l,c,f,h,o,x,d,w,_,g=r.prototype;g.draw=(s=[0,0],i=[0,0],l=[0,0],function(){for(var h=this.plot,o=this.vbo,x=this.shader,d=this.ticks,w=h.gl,_=h._tickBounds,T=h.dataBox,k=h.viewBox,L=h.gridLineWidth,M=h.gridLineColor,O=h.gridLineEnable,P=h.pixelRatio,S=0;S<2;++S){var E=_[S],B=.5*(T[S+2]+T[S]),H=T[S+2]-T[S];i[S]=2*(_[S+2]-E)/H,s[S]=2*(E-B)/H}x.bind(),o.bind(),x.attributes.dataCoord.pointer(),x.uniforms.dataShift=s,x.uniforms.dataScale=i;var V=0;for(S=0;S<2;++S){l[0]=l[1]=0,l[S]=1,x.uniforms.dataAxis=l,x.uniforms.lineWidth=L[S]/(k[S+2]-k[S])*P,x.uniforms.color=M[S];var Z=6*d[S].length;O[S]&&Z&&w.drawArrays(w.TRIANGLES,V,Z),V+=Z}}),g.drawTickMarks=(h=[0,0],o=[0,0],x=[1,0],d=[0,1],w=[0,0],_=[0,0],function(){for(var T=this.plot,k=this.vbo,L=this.tickShader,M=this.ticks,O=T.gl,P=T._tickBounds,S=T.dataBox,E=T.viewBox,R=T.pixelRatio,B=T.screenBox,H=B[2]-B[0],V=B[3]-B[1],Z=E[2]-E[0],W=E[3]-E[1],G=0;G<2;++G){var X=P[G],D=.5*(S[G+2]+S[G]),N=S[G+2]-S[G];o[G]=2*(P[G+2]-X)/N,h[G]=2*(X-D)/N}o[0]*=Z/H,h[0]*=Z/H,o[1]*=W/V,h[1]*=W/V,L.bind(),k.bind(),L.attributes.dataCoord.pointer();var U=L.uniforms;U.dataShift=h,U.dataScale=o;var Q=T.tickMarkLength,j=T.tickMarkWidth,J=T.tickMarkColor,K=6*M[0].length,re=Math.min(t.ge(M[0],(S[0]-P[0])/(P[2]-P[0]),u),M[0].length),ne=Math.min(t.gt(M[0],(S[2]-P[0])/(P[2]-P[0]),u),M[0].length),se=0+6*re,oe=6*Math.max(0,ne-re),pe=Math.min(t.ge(M[1],(S[1]-P[1])/(P[3]-P[1]),u),M[1].length),ce=Math.min(t.gt(M[1],(S[3]-P[1])/(P[3]-P[1]),u),M[1].length),ge=K+6*pe,xe=6*Math.max(0,ce-pe);w[0]=2*(E[0]-Q[1])/H-1,w[1]=(E[3]+E[1])/V-1,_[0]=Q[1]*R/H,_[1]=j[1]*R/V,xe&&(U.color=J[1],U.tickScale=_,U.dataAxis=d,U.screenOffset=w,O.drawArrays(O.TRIANGLES,ge,xe)),w[0]=(E[2]+E[0])/H-1,w[1]=2*(E[1]-Q[0])/V-1,_[0]=j[0]*R/H,_[1]=Q[0]*R/V,oe&&(U.color=J[0],U.tickScale=_,U.dataAxis=x,U.screenOffset=w,O.drawArrays(O.TRIANGLES,se,oe)),w[0]=2*(E[2]+Q[3])/H-1,w[1]=(E[3]+E[1])/V-1,_[0]=Q[3]*R/H,_[1]=j[3]*R/V,xe&&(U.color=J[3],U.tickScale=_,U.dataAxis=d,U.screenOffset=w,O.drawArrays(O.TRIANGLES,ge,xe)),w[0]=(E[2]+E[0])/H-1,w[1]=2*(E[3]+Q[2])/V-1,_[0]=j[2]*R/H,_[1]=Q[2]*R/V,oe&&(U.color=J[2],U.tickScale=_,U.dataAxis=x,U.screenOffset=w,O.drawArrays(O.TRIANGLES,se,oe))}),g.update=(c=[1,1,-1,-1,1,-1],f=[1,-1,1,1,-1,-1],function(h){for(var o=h.ticks,x=h.bounds,d=new Float32Array(18*(o[0].length+o[1].length)),w=0,_=[[],[]],T=0;T<2;++T)for(var k=_[T],L=o[T],M=x[T],O=x[T+2],P=0;P<L.length;++P){var S=(L[P].x-M)/(O-M);k.push(S);for(var E=0;E<6;++E)d[w++]=S,d[w++]=c[E],d[w++]=f[E]}this.ticks=_,this.vbo.update(d)}),g.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(m,b,v){"use strict";b.exports=function(i){var l=i.gl;return new a(i,e(l,[-1,-1,-1,1,1,-1,1,1]),n(l,t.lineVert,t.lineFrag))};var e=m("gl-buffer"),n=m("gl-shader"),t=m("./shaders");function a(i,l,c){this.plot=i,this.vbo=l,this.shader=c}var r,u,s=a.prototype;s.bind=function(){var i=this.shader;this.vbo.bind(),this.shader.bind(),i.attributes.coord.pointer(),i.uniforms.screenBox=this.plot.screenBox},s.drawLine=(r=[0,0],u=[0,0],function(i,l,c,f,g,h){var o=this.plot,x=this.shader,d=o.gl;r[0]=i,r[1]=l,u[0]=c,u[1]=f,x.uniforms.start=r,x.uniforms.end=u,x.uniforms.width=g*o.pixelRatio,x.uniforms.color=h,d.drawArrays(d.TRIANGLE_STRIP,0,4)}),s.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(m,b,v){"use strict";var e=m("glslify"),n=e(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);b.exports={lineVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:n,textVert:e(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:n,gridVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:n,boxVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(m,b,v){"use strict";b.exports=function(o){var x=o.gl;return new u(o,e(x),n(x,r.textVert,r.textFrag))};var e=m("gl-buffer"),n=m("gl-shader"),t=m("text-cache"),a=m("binary-search-bounds"),r=m("./shaders");function u(o,x,d){this.plot=o,this.vbo=x,this.shader=d,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var s,i,l,c,f,g,o,x,h=u.prototype;h.drawTicks=(s=[0,0],i=[0,0],l=[0,0],function(o){var x=this.plot,d=this.shader,w=this.tickX[o],_=this.tickOffset[o],T=x.gl,k=x.viewBox,L=x.dataBox,M=x.screenBox,O=x.pixelRatio,P=x.tickEnable,S=x.tickPad,E=x.tickColor,R=x.tickAngle,B=x.labelEnable,H=x.labelPad,V=x.labelColor,Z=x.labelAngle,W=this.labelOffset[o],G=this.labelCount[o],X=a.lt(w,L[o]),te=a.le(w,L[o+2]);s[0]=s[1]=0,s[o]=1,i[o]=(k[2+o]+k[o])/(M[2+o]-M[o])-1;var D=2/M[2+(1^o)]-M[1^o];i[1^o]=D*k[1^o]-1,P[o]&&(i[1^o]-=D*O*S[o],X<te&&_[te]>_[X]&&(d.uniforms.dataAxis=s,d.uniforms.screenOffset=i,d.uniforms.color=E[o],d.uniforms.angle=R[o],T.drawArrays(T.TRIANGLES,_[X],_[te]-_[X]))),B[o]&&G&&(i[1^o]-=D*O*H[o],d.uniforms.dataAxis=l,d.uniforms.screenOffset=i,d.uniforms.color=V[o],d.uniforms.angle=Z[o],T.drawArrays(T.TRIANGLES,W,G)),i[1^o]=D*k[2+(1^o)]-1,P[o+2]&&(i[1^o]+=D*O*S[o+2],X<te&&_[te]>_[X]&&(d.uniforms.dataAxis=s,d.uniforms.screenOffset=i,d.uniforms.color=E[o+2],d.uniforms.angle=R[o+2],T.drawArrays(T.TRIANGLES,_[X],_[te]-_[X]))),B[o+2]&&G&&(i[1^o]+=D*O*H[o+2],d.uniforms.dataAxis=l,d.uniforms.screenOffset=i,d.uniforms.color=V[o+2],d.uniforms.angle=Z[o+2],T.drawArrays(T.TRIANGLES,W,G))}),h.drawTitle=(o=[0,0],x=[0,0],function(){var d=this.plot,w=this.shader,_=d.gl,T=d.screenBox,k=d.titleCenter,L=d.titleAngle,M=d.titleColor,O=d.pixelRatio;if(this.titleCount){for(var P=0;P<2;++P)x[P]=2*(k[P]*O-T[P])/(T[2+P]-T[P])-1;w.bind(),w.uniforms.dataAxis=o,w.uniforms.screenOffset=x,w.uniforms.angle=L,w.uniforms.color=M,_.drawArrays(_.TRIANGLES,this.titleOffset,this.titleCount)}}),h.bind=(c=[0,0],f=[0,0],g=[0,0],function(){var o=this.plot,x=this.shader,d=o._tickBounds,w=o.dataBox,_=o.screenBox,T=o.viewBox;x.bind();for(var k=0;k<2;++k){var L=d[k],O=.5*(w[k+2]+w[k]),P=w[k+2]-w[k],E=T[k+2]-T[k],B=_[k+2]-_[k];f[k]=2*(d[k+2]-L)/P*E/B,c[k]=2*(L-O)/P*E/B}g[1]=2*o.pixelRatio/(_[3]-_[1]),g[0]=g[1]*(_[3]-_[1])/(_[2]-_[0]),x.uniforms.dataScale=f,x.uniforms.dataShift=c,x.uniforms.textScale=g,this.vbo.bind(),x.attributes.textCoordinate.pointer()}),h.update=function(o){var x,d,w,_,T,k=[],L=o.ticks,M=o.bounds;for(T=0;T<2;++T){var O=[Math.floor(k.length/3)],P=[-1/0],S=L[T];for(x=0;x<S.length;++x){var E=S[x],R=E.x,H=E.font||"sans-serif";_=E.fontSize||12;for(var V=1/(M[T+2]-M[T]),Z=M[T],W=E.text.split("\n"),G=0;G<W.length;G++)for(w=t(H,W[G]).data,d=0;d<w.length;d+=2)k.push(w[d]*_,-w[d+1]*_-G*_*1.2,(R-Z)*V);O.push(Math.floor(k.length/3)),P.push(R)}this.tickOffset[T]=O,this.tickX[T]=P}for(T=0;T<2;++T){for(this.labelOffset[T]=Math.floor(k.length/3),w=t(o.labelFont[T],o.labels[T],{textAlign:"center"}).data,_=o.labelSize[T],x=0;x<w.length;x+=2)k.push(w[x]*_,-w[x+1]*_,0);this.labelCount[T]=Math.floor(k.length/3)-this.labelOffset[T]}for(this.titleOffset=Math.floor(k.length/3),w=t(o.titleFont,o.title).data,_=o.titleSize,x=0;x<w.length;x+=2)k.push(w[x]*_,-w[x+1]*_,0);this.titleCount=Math.floor(k.length/3)-this.titleOffset,this.vbo.update(k)},h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(m,b,v){"use strict";b.exports=function(c){var f=c.gl,h=new u(f,e(f,[f.drawingBufferWidth,f.drawingBufferHeight]));return h.grid=n(h),h.text=t(h),h.line=a(h),h.box=r(h),h.update(c),h};var e=m("gl-select-static"),n=m("./lib/grid"),t=m("./lib/text"),a=m("./lib/line"),r=m("./lib/box");function u(c,f){this.gl=c,this.pickBuffer=f,this.screenBox=[0,0,c.drawingBufferWidth,c.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=u.prototype;function i(c){for(var f=c.slice(),g=0;g<f.length;++g)f[g]=f[g].slice();return f}function l(c,f){return c.x-f.x}s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){var c=this.gl,f=this.screenBox,g=this.viewBox,h=this.dataBox,o=this.pixelRatio,x=this.grid,d=this.line,w=this.text,_=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,c.bindFramebuffer(c.FRAMEBUFFER,null),c.enable(c.SCISSOR_TEST),c.disable(c.DEPTH_TEST),c.depthFunc(c.LESS),c.depthMask(!1),c.enable(c.BLEND),c.blendEquation(c.FUNC_ADD,c.FUNC_ADD),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),this.borderColor){c.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]);var T=this.borderColor;c.clearColor(T[0]*T[3],T[1]*T[3],T[2]*T[3],T[3]),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)}c.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),c.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]);var k=this.backgroundColor;c.clearColor(k[0]*k[3],k[1]*k[3],k[2]*k[3],k[3]),c.clear(c.COLOR_BUFFER_BIT),x.draw();var L=this.zeroLineEnable,M=this.zeroLineColor,O=this.zeroLineWidth;if(L[0]||L[1]){d.bind();for(var P=0;P<2;++P)if(L[P]&&h[P]<=0&&h[P+2]>=0){var S=f[P]-h[P]*(f[P+2]-f[P])/(h[P+2]-h[P]);0===P?d.drawLine(S,f[1],S,f[3],O[P],M[P]):d.drawLine(f[0],S,f[2],S,O[P],M[P])}}for(P=0;P<_.length;++P)_[P].draw();c.viewport(f[0],f[1],f[2]-f[0],f[3]-f[1]),c.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]),this.grid.drawTickMarks(),d.bind();var E=this.borderLineEnable,R=this.borderLineWidth,B=this.borderLineColor;for(E[1]&&d.drawLine(g[0],g[1]-.5*R[1]*o,g[0],g[3]+.5*R[3]*o,R[1],B[1]),E[0]&&d.drawLine(g[0]-.5*R[0]*o,g[1],g[2]+.5*R[2]*o,g[1],R[0],B[0]),E[3]&&d.drawLine(g[2],g[1]-.5*R[1]*o,g[2],g[3]+.5*R[3]*o,R[3],B[3]),E[2]&&d.drawLine(g[0]-.5*R[0]*o,g[3],g[2]+.5*R[2]*o,g[3],R[2],B[2]),w.bind(),P=0;P<2;++P)w.drawTicks(P);this.titleEnable&&w.drawTitle();var H=this.overlays;for(P=0;P<H.length;++P)H[P].draw();c.disable(c.SCISSOR_TEST),c.disable(c.BLEND),c.depthMask(!0)}},s.drawPick=function(){if(!this.static){var c=this.pickBuffer;this._pickTimeout=null,c.begin();for(var f=1,g=this.objects,h=0;h<g.length;++h)f=g[h].drawPick(f);c.end()}},s.pick=function(c,f){if(!this.static){var g=this.pixelRatio,h=this.pickPixelRatio,o=this.viewBox,x=0|Math.round((c-o[0]/g)*h),d=0|Math.round((f-o[1]/g)*h),w=this.pickBuffer.query(x,d,this.pickRadius);if(!w)return null;for(var _=w.id+(w.value[0]<<8)+(w.value[1]<<16)+(w.value[2]<<24),T=this.objects,k=0;k<T.length;++k){var L=T[k].pick(x,d,_);if(L)return L}return null}},s.setScreenBox=function(c){var f=this.screenBox,g=this.pixelRatio;f[0]=0|Math.round(c[0]*g),f[1]=0|Math.round(c[1]*g),f[2]=0|Math.round(c[2]*g),f[3]=0|Math.round(c[3]*g),this.setDirty()},s.setDataBox=function(c){var f=this.dataBox;(f[0]!==c[0]||f[1]!==c[1]||f[2]!==c[2]||f[3]!==c[3])&&(f[0]=c[0],f[1]=c[1],f[2]=c[2],f[3]=c[3],this.setDirty())},s.setViewBox=function(c){var f=this.pixelRatio,g=this.viewBox;g[0]=0|Math.round(c[0]*f),g[1]=0|Math.round(c[1]*f),g[2]=0|Math.round(c[2]*f),g[3]=0|Math.round(c[3]*f);var h=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((c[2]-c[0])*h),0|Math.round((c[3]-c[1])*h)],this.setDirty()},s.update=function(c){var f=this.gl;this.pixelRatio=(c=c||{}).pixelRatio||1;var g=this.pixelRatio;this.pickPixelRatio=Math.max(g,1),this.setScreenBox(c.screenBox||[0,0,f.drawingBufferWidth/g,f.drawingBufferHeight/g]),this.setViewBox(c.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/g,.125*(this.screenBox[3]-this.screenBox[1])/g,.875*(this.screenBox[2]-this.screenBox[0])/g,.875*(this.screenBox[3]-this.screenBox[1])/g]);var h=this.viewBox,o=(h[2]-h[0])/(h[3]-h[1]);this.setDataBox(c.dataBox||[-10,-10/o,10,10/o]),this.borderColor=!1!==c.borderColor&&(c.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(c.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(c.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(c.gridLineWidth||[1,1]).slice(),this.gridLineColor=i(c.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(c.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(c.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=i(c.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(c.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(c.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=i(c.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(c.titleCenter||[.5*(h[0]+h[2])/g,(h[3]+120)/g]).slice(),this.titleEnable=!("titleEnable"in c)||!!c.titleEnable,this.titleAngle=c.titleAngle||0,this.titleColor=(c.titleColor||[0,0,0,1]).slice(),this.labelPad=(c.labelPad||[15,15,15,15]).slice(),this.labelAngle=(c.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(c.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=i(c.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(c.tickPad||[15,15,15,15]).slice(),this.tickAngle=(c.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(c.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=i(c.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(c.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(c.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=i(c.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var x=c.ticks||[[],[]],d=this._tickBounds;d[0]=d[1]=1/0,d[2]=d[3]=-1/0;for(var w=0;w<2;++w){var _=x[w].slice(0);0!==_.length&&(_.sort(l),d[w]=Math.min(d[w],_[0].x),d[w+2]=Math.max(d[w+2],_[_.length-1].x))}this.grid.update({bounds:d,ticks:x}),this.text.update({bounds:d,ticks:x,labels:c.labels||["x","y"],labelSize:c.labelSize||[12,12],labelFont:c.labelFont||["sans-serif","sans-serif"],title:c.title||"",titleSize:c.titleSize||18,titleFont:c.titleFont||"sans-serif"}),this.static=!!c.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var c=this.objects.length-1;c>=0;--c)this.objects[c].dispose();for(this.objects.length=0,c=this.overlays.length-1;c>=0;--c)this.overlays[c].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(c){this.objects.indexOf(c)<0&&(this.objects.push(c),this.setDirty())},s.removeObject=function(c){for(var f=this.objects,g=0;g<f.length;++g)if(f[g]===c){f.splice(g,1),this.setDirty();break}},s.addOverlay=function(c){this.overlays.indexOf(c)<0&&(this.overlays.push(c),this.setOverlayDirty())},s.removeOverlay=function(c){for(var f=this.overlays,g=0;g<f.length;++g)if(f[g]===c){f.splice(g,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(m,b,v){"use strict";b.exports=function(s,i){s=s||document.body;var l=[.01,1/0];"distanceLimits"in(i=i||{})&&(l[0]=i.distanceLimits[0],l[1]=i.distanceLimits[1]),"zoomMin"in i&&(l[0]=i.zoomMin),"zoomMax"in i&&(l[1]=i.zoomMax);var c=n({center:i.center||[0,0,0],up:i.up||[0,1,0],eye:i.eye||[0,0,10],mode:i.mode||"orbit",distanceLimits:l}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=0,h=s.clientWidth,o=s.clientHeight,x={keyBindingMode:"rotate",enableWheel:!0,view:c,element:s,delay:i.delay||16,rotateSpeed:i.rotateSpeed||1,zoomSpeed:i.zoomSpeed||1,translateSpeed:i.translateSpeed||1,flipX:!!i.flipX,flipY:!!i.flipY,modes:c.modes,_ortho:i._ortho||i.projection&&"orthographic"===i.projection.type||!1,tick:function(){var d=e(),w=this.delay,_=d-2*w;c.idle(d-w),c.recalcMatrix(_),c.flush(d-(100+2*w));for(var T=!0,k=c.computedMatrix,L=0;L<16;++L)T=T&&f[L]===k[L],f[L]=k[L];var M=s.clientWidth===h&&s.clientHeight===o;return h=s.clientWidth,o=s.clientHeight,T?!M:(g=Math.exp(c.computedRadius[0]),!0)},lookAt:function(d,w,_){c.lookAt(c.lastT(),d,w,_)},rotate:function(d,w,_){c.rotate(c.lastT(),d,w,_)},pan:function(d,w,_){c.pan(c.lastT(),d,w,_)},translate:function(d,w,_){c.translate(c.lastT(),d,w,_)}};return Object.defineProperties(x,{matrix:{get:function(){return c.computedMatrix},set:function(d){return c.setMatrix(c.lastT(),d),c.computedMatrix},enumerable:!0},mode:{get:function(){return c.getMode()},set:function(d){var w=c.computedUp.slice(),_=c.computedEye.slice(),T=c.computedCenter.slice();if(c.setMode(d),"turntable"===d){var k=e();c._active.lookAt(k,_,T,w),c._active.lookAt(k+500,_,T,[0,0,1]),c._active.flush(k)}return c.getMode()},enumerable:!0},center:{get:function(){return c.computedCenter},set:function(d){return c.lookAt(c.lastT(),null,d),c.computedCenter},enumerable:!0},eye:{get:function(){return c.computedEye},set:function(d){return c.lookAt(c.lastT(),d),c.computedEye},enumerable:!0},up:{get:function(){return c.computedUp},set:function(d){return c.lookAt(c.lastT(),null,null,d),c.computedUp},enumerable:!0},distance:{get:function(){return g},set:function(d){return c.setDistance(c.lastT(),d),d},enumerable:!0},distanceLimits:{get:function(){return c.getDistanceLimits(l)},set:function(d){return c.setDistanceLimits(d),d},enumerable:!0}}),s.addEventListener("contextmenu",function(d){return d.preventDefault(),!1}),x._lastX=-1,x._lastY=-1,x._lastMods={shift:!1,control:!1,alt:!1,meta:!1},x.enableMouseListeners=function(){function d(w,_,T,k){var L=x.keyBindingMode;if(!1!==L){var M="rotate"===L,O="pan"===L,P="zoom"===L,S=!!k.control,E=!!k.alt,R=!!k.shift,B=!!(1&w),H=!!(2&w),V=!!(4&w),Z=1/s.clientHeight,W=Z*(_-x._lastX),G=Z*(T-x._lastY),X=x.flipX?1:-1,te=x.flipY?1:-1,D=Math.PI*x.rotateSpeed,N=e();if(-1!==x._lastX&&-1!==x._lastY&&((M&&B&&!S&&!E&&!R||B&&!S&&!E&&R)&&c.rotate(N,X*D*W,-te*D*G,0),(O&&B&&!S&&!E&&!R||H||B&&S&&!E&&!R)&&c.pan(N,-x.translateSpeed*W*g,x.translateSpeed*G*g,0),P&&B&&!S&&!E&&!R||V||B&&!S&&E&&!R)){var U=-x.zoomSpeed*G/window.innerHeight*(N-c.lastT())*100;c.pan(N,0,0,g*(Math.exp(U)-1))}return x._lastX=_,x._lastY=T,x._lastMods=k,!0}}x.mouseListener=t(s,d),s.addEventListener("touchstart",function(w){var _=r(w.changedTouches[0],s);d(0,_[0],_[1],x._lastMods),d(1,_[0],_[1],x._lastMods)},!!u&&{passive:!0}),s.addEventListener("touchmove",function(w){var _=r(w.changedTouches[0],s);d(1,_[0],_[1],x._lastMods),w.preventDefault()},!!u&&{passive:!1}),s.addEventListener("touchend",function(w){d(0,x._lastX,x._lastY,x._lastMods)},!!u&&{passive:!0}),x.wheelListener=a(s,function(w,_){if(!1!==x.keyBindingMode&&x.enableWheel){var T=x.flipX?1:-1,k=x.flipY?1:-1,L=e();if(Math.abs(w)>Math.abs(_))c.rotate(L,0,0,-w*T*Math.PI*x.rotateSpeed/window.innerWidth);else if(!x._ortho){var M=-x.zoomSpeed*k*_/window.innerHeight*(L-c.lastT())/20;c.pan(L,0,0,g*(Math.exp(M)-1))}}},!0)},x.enableMouseListeners(),x};var e=m("right-now"),n=m("3d-view"),t=m("mouse-change"),a=m("mouse-wheel"),r=m("mouse-event-offset"),u=m("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(m,b,v){var e=m("glslify"),n=m("gl-shader"),t=e(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),a=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);b.exports=function(r){return n(r,t,a,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(m,b,v){"use strict";var e=m("./camera.js"),n=m("gl-axes3d"),t=m("gl-axes3d/properties"),a=m("gl-spikes3d"),r=m("gl-select-static"),u=m("gl-fbo"),s=m("a-big-triangle"),i=m("mouse-change"),l=m("gl-mat4/perspective"),c=m("gl-mat4/ortho"),f=m("./lib/shader"),g=m("is-mobile")({tablet:!0,featureDetect:!0});function h(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function o(d){var w=Math.round(Math.log(Math.abs(d))/Math.log(10));if(w<0){var _=Math.round(Math.pow(10,-w));return Math.ceil(d*_)/_}return w>0?(_=Math.round(Math.pow(10,w)),Math.ceil(d/_)*_):Math.ceil(d)}function x(d){return"boolean"!=typeof d||d}b.exports={createScene:function(d){(d=d||{}).camera=d.camera||{};var w=d.canvas;w||(w=document.createElement("canvas"),d.container?d.container.appendChild(w):document.body.appendChild(w));var _=d.gl;if(_||(d.glOptions&&(g=!!d.glOptions.preserveDrawingBuffer),_=function(ce,ge){var xe=null;try{(xe=ce.getContext("webgl",ge))||(xe=ce.getContext("experimental-webgl",ge))}catch(we){return null}return xe}(w,d.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:g})),!_)throw new Error("webgl not supported");var T=d.bounds||[[-10,-10,-10],[10,10,10]],k=new h,L=u(_,_.drawingBufferWidth,_.drawingBufferHeight,{preferFloat:!g}),M=f(_),O=d.cameraObject&&!0===d.cameraObject._ortho||d.camera.projection&&"orthographic"===d.camera.projection.type||!1,P={eye:d.camera.eye||[2,0,0],center:d.camera.center||[0,0,0],up:d.camera.up||[0,1,0],zoomMin:d.camera.zoomMax||.1,zoomMax:d.camera.zoomMin||100,mode:d.camera.mode||"turntable",_ortho:O},S=d.axes||{},E=n(_,S);E.enable=!S.disable;var B=a(_,d.spikes||{}),H=[],V=[],Z=[],W=[],G=!0,X=!0,N={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},U=(X=!0,[_.drawingBufferWidth,_.drawingBufferHeight]),Q=d.cameraObject||e(w,P),j={gl:_,contextLost:!1,pixelRatio:d.pixelRatio||1,canvas:w,selection:k,camera:Q,axes:E,axesPixels:null,spikes:B,bounds:T,objects:H,shape:U,aspect:d.aspectRatio||[1,1,1],pickRadius:d.pickRadius||10,zNear:d.zNear||.01,zFar:d.zFar||1e3,fovy:d.fovy||Math.PI/4,clearColor:d.clearColor||[0,0,0,0],autoResize:x(d.autoResize),autoBounds:x(d.autoBounds),autoScale:!!d.autoScale,autoCenter:x(d.autoCenter),clipToBounds:x(d.clipToBounds),snapToData:!!d.snapToData,onselect:d.onselect||null,onrender:d.onrender||null,onclick:d.onclick||null,cameraParams:N,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ce){this.aspect[0]=ce.x,this.aspect[1]=ce.y,this.aspect[2]=ce.z,X=!0},setBounds:function(ce,ge){this.bounds[0][ce]=ge.min,this.bounds[1][ce]=ge.max},setClearColor:function(ce){this.clearColor=ce},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},J=[_.drawingBufferWidth/j.pixelRatio|0,_.drawingBufferHeight/j.pixelRatio|0];function K(){if(!j._stopped&&j.autoResize){var ce=w.parentNode,ge=1,xe=1;ce&&ce!==document.body?(ge=ce.clientWidth,xe=ce.clientHeight):(ge=window.innerWidth,xe=window.innerHeight);var we=0|Math.ceil(ge*j.pixelRatio),be=0|Math.ceil(xe*j.pixelRatio);if(we!==w.width||be!==w.height){w.width=we,w.height=be;var Se=w.style;Se.position=Se.position||"absolute",Se.left="0px",Se.top="0px",Se.width=ge+"px",Se.height=xe+"px",G=!0}}}function re(){for(var ce=H.length,ge=W.length,xe=0;xe<ge;++xe)Z[xe]=0;e:for(xe=0;xe<ce;++xe){var we=H[xe],be=we.pickSlots;if(be){for(var Se=0;Se<ge;++Se)if(Z[Se]+be<255){V[xe]=Se,we.setPickBase(Z[Se]+1),Z[Se]+=be;continue e}var fe=r(_,U);V[xe]=ge,W.push(fe),Z.push(be),we.setPickBase(1),ge+=1}else V[xe]=-1}for(;ge>0&&0===Z[ge-1];)Z.pop(),W.pop().dispose()}function ne(){if(j.contextLost)return!0;_.isContextLost()&&(j.contextLost=!0,j.mouseListener.enabled=!1,j.selection.object=null,j.oncontextloss&&j.oncontextloss())}j.autoResize&&K(),window.addEventListener("resize",K),j.update=function(ce){j._stopped||(ce=ce||{},G=!0,X=!0)},j.add=function(ce){j._stopped||(ce.axes=E,H.push(ce),V.push(-1),G=!0,X=!0,re())},j.remove=function(ce){if(!j._stopped){var ge=H.indexOf(ce);ge<0||(H.splice(ge,1),V.pop(),G=!0,X=!0,re())}},j.dispose=function(){if(!j._stopped&&(j._stopped=!0,window.removeEventListener("resize",K),w.removeEventListener("webglcontextlost",ne),j.mouseListener.enabled=!1,!j.contextLost)){E.dispose(),B.dispose();for(var ce=0;ce<H.length;++ce)H[ce].dispose();for(L.dispose(),ce=0;ce<W.length;++ce)W[ce].dispose();M.dispose(),_=null,E=null,B=null,H=[]}},j._mouseRotating=!1,j._prevButtons=0,j.enableMouseListeners=function(){j.mouseListener=i(w,function(ce,ge,xe){if(!j._stopped){var we=W.length,be=H.length,Se=k.object;k.distance=1/0,k.mouse[0]=ge,k.mouse[1]=xe,k.object=null,k.screen=null,k.dataCoordinate=k.dataPosition=null;var fe=!1;if(ce&&j._prevButtons)j._mouseRotating=!0;else{j._mouseRotating&&(X=!0),j._mouseRotating=!1;for(var me=0;me<we;++me){var Te=W[me].query(ge,J[1]-xe-1,j.pickRadius);if(Te){if(Te.distance>k.distance)continue;for(var _e=0;_e<be;++_e){var Me=H[_e];if(V[_e]===me){var Ie=Me.pick(Te);Ie&&(k.buttons=ce,k.screen=Te.coord,k.distance=Te.distance,k.object=Me,k.index=Ie.distance,k.dataPosition=Ie.position,k.dataCoordinate=Ie.dataCoordinate,k.data=Ie,fe=!0)}}}}}Se&&Se!==k.object&&(Se.highlight&&Se.highlight(null),G=!0),k.object&&(k.object.highlight&&k.object.highlight(k.data),G=!0),(fe=fe||k.object!==Se)&&j.onselect&&j.onselect(k),1&ce&&!(1&j._prevButtons)&&j.onclick&&j.onclick(k),j._prevButtons=ce}})},w.addEventListener("webglcontextlost",ne);var se=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],oe=[se[0].slice(),se[1].slice()];function pe(){if(!ne()){K();var ce=j.camera.tick();N.view=j.camera.matrix,G=G||ce,X=X||ce,E.pixelRatio=j.pixelRatio,B.pixelRatio=j.pixelRatio;var ge=H.length,xe=se[0],we=se[1];xe[0]=xe[1]=xe[2]=1/0,we[0]=we[1]=we[2]=-1/0;for(var be=0;be<ge;++be){(Be=H[be]).pixelRatio=j.pixelRatio,Be.axes=j.axes,G=G||!!Be.dirty,X=X||!!Be.dirty;var Se=Be.bounds;if(Se)for(var fe=Se[0],me=Se[1],Te=0;Te<3;++Te)xe[Te]=Math.min(xe[Te],fe[Te]),we[Te]=Math.max(we[Te],me[Te])}var _e=j.bounds;if(j.autoBounds)for(Te=0;Te<3;++Te){if(we[Te]<xe[Te])xe[Te]=-1,we[Te]=1;else{xe[Te]===we[Te]&&(xe[Te]-=1,we[Te]+=1);var Me=.05*(we[Te]-xe[Te]);xe[Te]=xe[Te]-Me,we[Te]=we[Te]+Me}_e[0][Te]=xe[Te],_e[1][Te]=we[Te]}var Ie=!1;for(Te=0;Te<3;++Te)Ie=Ie||oe[0][Te]!==_e[0][Te]||oe[1][Te]!==_e[1][Te],oe[0][Te]=_e[0][Te],oe[1][Te]=_e[1][Te];if(X=X||Ie,G=G||Ie){if(Ie){var ze=[0,0,0];for(be=0;be<3;++be)ze[be]=o((_e[1][be]-_e[0][be])/10);E.update(E.autoTicks?{bounds:_e,tickSpacing:ze}:{bounds:_e})}var Ve=_.drawingBufferWidth,Je=_.drawingBufferHeight;for(U[0]=Ve,U[1]=Je,J[0]=0|Math.max(Ve/j.pixelRatio,1),J[1]=0|Math.max(Je/j.pixelRatio,1),function(Ze,Ye){var tt=Ze.bounds,st=Ze.cameraParams,vt=st.projection,Pt=st.model,et=Ze.zNear,bt=Ze.zFar,Rt=Ze.fovy,Yt=Ze.gl.drawingBufferWidth/Ze.gl.drawingBufferHeight;Ye?(c(vt,-Yt,Yt,-1,1,et,bt),st._ortho=!0):(l(vt,Rt,Yt,et,bt),st._ortho=!1);for(var Fe=0;Fe<16;++Fe)Pt[Fe]=0;Pt[15]=1;var He=0;for(Fe=0;Fe<3;++Fe)He=Math.max(He,tt[1][Fe]-tt[0][Fe]);for(Fe=0;Fe<3;++Fe)Pt[5*Fe]=Ze.autoScale?Ze.aspect[Fe]/(tt[1][Fe]-tt[0][Fe]):1/He,Ze.autoCenter&&(Pt[12+Fe]=.5*-Pt[5*Fe]*(tt[0][Fe]+tt[1][Fe]))}(j,O),be=0;be<ge;++be)(Be=H[be]).axesBounds=_e,j.clipToBounds&&(Be.clipBounds=_e);k.object&&(B.position=j.snapToData?k.dataCoordinate:k.dataPosition,B.bounds=_e),X&&(X=!1,function(){if(!ne()){_.colorMask(!0,!0,!0,!0),_.depthMask(!0),_.disable(_.BLEND),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL);for(var Ze=H.length,Ye=W.length,tt=0;tt<Ye;++tt){var st=W[tt];st.shape=J,st.begin();for(var vt=0;vt<Ze;++vt)if(V[vt]===tt){var Pt=H[vt];Pt.drawPick&&(Pt.pixelRatio=1,Pt.drawPick(N))}st.end()}}}()),j.axesPixels=t(j.axes,N,Ve,Je),j.onrender&&j.onrender(),_.bindFramebuffer(_.FRAMEBUFFER,null),_.viewport(0,0,Ve,Je),j.clearRGBA(),_.depthMask(!0),_.colorMask(!0,!0,!0,!0),_.enable(_.DEPTH_TEST),_.depthFunc(_.LEQUAL),_.disable(_.BLEND),_.disable(_.CULL_FACE);var De=!1;for(E.enable&&(De=De||E.isTransparent(),E.draw(N)),B.axes=E,k.object&&B.draw(N),_.disable(_.CULL_FACE),be=0;be<ge;++be)(Be=H[be]).axes=E,Be.pixelRatio=j.pixelRatio,Be.isOpaque&&Be.isOpaque()&&Be.draw(N),Be.isTransparent&&Be.isTransparent()&&(De=!0);if(De){for(L.shape=U,L.bind(),_.clear(_.DEPTH_BUFFER_BIT),_.colorMask(!1,!1,!1,!1),_.depthMask(!0),_.depthFunc(_.LESS),E.enable&&E.isTransparent()&&E.drawTransparent(N),be=0;be<ge;++be)(Be=H[be]).isOpaque&&Be.isOpaque()&&Be.draw(N);for(_.enable(_.BLEND),_.blendEquation(_.FUNC_ADD),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.colorMask(!0,!0,!0,!0),_.depthMask(!1),_.clearColor(0,0,0,0),_.clear(_.COLOR_BUFFER_BIT),E.isTransparent()&&E.drawTransparent(N),be=0;be<ge;++be){var Be;(Be=H[be]).isTransparent&&Be.isTransparent()&&Be.drawTransparent(N)}_.bindFramebuffer(_.FRAMEBUFFER,null),_.blendFunc(_.ONE,_.ONE_MINUS_SRC_ALPHA),_.disable(_.DEPTH_TEST),M.bind(),L.color[0].bind(0),M.uniforms.accumBuffer=0,s(_),_.disable(_.BLEND)}for(G=!1,be=0;be<ge;++be)H[be].dirty=!1}}}return j.enableMouseListeners(),function ce(){j._stopped||j.contextLost||(pe(),requestAnimationFrame(ce))}(),j.redraw=function(){j._stopped||(G=!0,pe())},j},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(m,b,v){var e=m("glslify");v.pointVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),v.pointFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),v.pickVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),v.pickFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(m,b,v){"use strict";var e=m("gl-shader"),n=m("gl-buffer"),t=m("typedarray-pool"),a=m("./lib/shader");function r(l,c,f,g,h){this.plot=l,this.offsetBuffer=c,this.pickBuffer=f,this.shader=g,this.pickShader=h,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}b.exports=function(l,c){var f=l.gl,d=new r(l,n(f),n(f),e(f,a.pointVertex,a.pointFragment),e(f,a.pickVertex,a.pickFragment));return d.update(c),l.addObject(d),d};var u,s,i=r.prototype;i.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},i.update=function(l){var c;function f(_,T){return _ in l?l[_]:T}l=l||{},this.sizeMin=f("sizeMin",.5),this.sizeMax=f("sizeMax",20),this.color=f("color",[1,0,0,1]).slice(),this.areaRatio=f("areaRatio",1),this.borderColor=f("borderColor",[0,0,0,1]).slice(),this.blend=f("blend",!1);var g=l.positions.length>>>1,h=l.positions instanceof Float32Array,o=l.idToIndex instanceof Int32Array&&l.idToIndex.length>=g,x=l.positions,d=h?x:t.mallocFloat32(x.length),w=o?l.idToIndex:t.mallocInt32(g);if(h||d.set(x),!o)for(d.set(x),c=0;c<g;c++)w[c]=c;this.points=x,this.offsetBuffer.update(d),this.pickBuffer.update(w),h||t.free(d),o||t.free(w),this.pointCount=g,this.pickOffset=0},i.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],s=[0,0,0,0],function(l){var c=void 0!==l,f=c?this.pickShader:this.shader,g=this.plot.gl,h=this.plot.dataBox;if(0===this.pointCount)return l;var o=h[2]-h[0],x=h[3]-h[1],d=function(k,L){var M,O=0,P=k.length>>>1;for(M=0;M<P;M++){var S=k[2*M],E=k[2*M+1];S>=L[0]&&S<=L[2]&&E>=L[1]&&E<=L[3]&&O++}return O}(this.points,h),w=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(d,.33333)));u[0]=2/o,u[4]=2/x,u[6]=-2*h[0]/o-1,u[7]=-2*h[1]/x-1,this.offsetBuffer.bind(),f.bind(),f.attributes.position.pointer(),f.uniforms.matrix=u,f.uniforms.color=this.color,f.uniforms.borderColor=this.borderColor,f.uniforms.pointCloud=w<5,f.uniforms.pointSize=w,f.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),c&&(s[0]=255&l,s[1]=l>>8&255,s[2]=l>>16&255,s[3]=l>>24&255,this.pickBuffer.bind(),f.attributes.pickId.pointer(g.UNSIGNED_BYTE),f.uniforms.pickOffset=s,this.pickOffset=l);var _=g.getParameter(g.BLEND),T=g.getParameter(g.DITHER);return _&&!this.blend&&g.disable(g.BLEND),T&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),_&&!this.blend&&g.enable(g.BLEND),T&&g.enable(g.DITHER),l+this.pointCount}),i.draw=i.unifiedDraw,i.drawPick=i.unifiedDraw,i.pick=function(l,c,f){var g=this.pickOffset;if(f<g||f>=g+this.pointCount)return null;var o=f-g,x=this.points;return{object:this,pointId:o,dataCoord:[x[2*o],x[2*o+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(m,b,v){b.exports=function(e,n,t,a){var r,u,s,i,l,c=n[0],f=n[1],g=n[2],h=n[3],o=t[0],x=t[1],d=t[2],w=t[3];return(u=c*o+f*x+g*d+h*w)<0&&(u=-u,o=-o,x=-x,d=-d,w=-w),1-u>1e-6?(r=Math.acos(u),s=Math.sin(r),i=Math.sin((1-a)*r)/s,l=Math.sin(a*r)/s):(i=1-a,l=a),e[0]=i*c+l*o,e[1]=i*f+l*x,e[2]=i*g+l*d,e[3]=i*h+l*w,e}},{}],125:[function(m,b,v){"use strict";b.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(m,b,v){"use strict";var e=m("vectorize-text");b.exports=function(t,a,r){var u=n[a];if(u||(u=n[a]={}),t in u)return u[t];var s={textAlign:"center",textBaseline:"middle",lineHeight:1,font:a,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},i=e(t,s);s.triangles=!1;var l,c,f=e(t,s);if(r&&1!==r){for(l=0;l<i.positions.length;++l)for(c=0;c<i.positions[l].length;++c)i.positions[l][c]/=r;for(l=0;l<f.positions.length;++l)for(c=0;c<f.positions[l].length;++c)f.positions[l][c]/=r}var g=[[1/0,1/0],[-1/0,-1/0]],h=f.positions.length;for(l=0;l<h;++l){var o=f.positions[l];for(c=0;c<2;++c)g[0][c]=Math.min(g[0][c],o[c]),g[1][c]=Math.max(g[1][c],o[c])}return u[t]=[i,f,g]};var n={}},{"vectorize-text":311}],127:[function(m,b,v){var e=m("gl-shader"),n=m("glslify"),t=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),r=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),u=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),i=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],l={vertex:t,fragment:u,attributes:i},c={vertex:a,fragment:u,attributes:i},f={vertex:r,fragment:u,attributes:i},g={vertex:t,fragment:s,attributes:i},h={vertex:a,fragment:s,attributes:i},o={vertex:r,fragment:s,attributes:i};function x(d,w){var _=e(d,w),T=_.attributes;return T.position.location=0,T.color.location=1,T.glyph.location=2,T.id.location=3,_}v.createPerspective=function(d){return x(d,l)},v.createOrtho=function(d){return x(d,c)},v.createProject=function(d){return x(d,f)},v.createPickPerspective=function(d){return x(d,g)},v.createPickOrtho=function(d){return x(d,h)},v.createPickProject=function(d){return x(d,o)}},{"gl-shader":132,glslify:231}],128:[function(m,b,v){"use strict";var e=m("is-string-blank"),n=m("gl-buffer"),t=m("gl-vao"),a=m("typedarray-pool"),r=m("gl-mat4/multiply"),u=m("./lib/shaders"),s=m("./lib/glyphs"),i=m("./lib/get-simple-string"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(Z,W){var G=Z[0],X=Z[1],te=Z[2],D=Z[3];return Z[0]=W[0]*G+W[4]*X+W[8]*te+W[12]*D,Z[1]=W[1]*G+W[5]*X+W[9]*te+W[13]*D,Z[2]=W[2]*G+W[6]*X+W[10]*te+W[14]*D,Z[3]=W[3]*G+W[7]*X+W[11]*te+W[15]*D,Z}function f(Z,W,G,X){return c(X,X),c(X,X),c(X,X)}function g(Z,W){this.index=Z,this.dataCoordinate=this.position=W}function h(Z){return!0===Z||Z>1?1:Z}function o(Z,W,G,X,te,D,N,U,Q,j,J,K){this.gl=Z,this.pixelRatio=1,this.shader=W,this.orthoShader=G,this.projectShader=X,this.pointBuffer=te,this.colorBuffer=D,this.glyphBuffer=N,this.idBuffer=U,this.vao=Q,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=j,this.pickOrthoShader=J,this.pickProjectShader=K,this.points=[],this._selectResult=new g(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}b.exports=function(Z){var W=Z.gl,G=u.createPerspective(W),X=u.createOrtho(W),te=u.createProject(W),D=u.createPickPerspective(W),N=u.createPickOrtho(W),U=u.createPickProject(W),Q=n(W),j=n(W),J=n(W),K=n(W),ne=new o(W,G,X,te,Q,j,J,K,t(W,[{buffer:Q,size:3,type:W.FLOAT},{buffer:j,size:4,type:W.FLOAT},{buffer:J,size:2,type:W.FLOAT},{buffer:K,size:4,type:W.UNSIGNED_BYTE,normalized:!0}]),D,N,U);return ne.update(Z),ne};var x=o.prototype;x.pickSlots=1,x.setPickBase=function(Z){this.pickId=Z},x.isTransparent=function(){if(this.hasAlpha)return!0;for(var Z=0;Z<3;++Z)if(this.axesProject[Z]&&this.projectHasAlpha)return!0;return!1},x.isOpaque=function(){if(!this.hasAlpha)return!0;for(var Z=0;Z<3;++Z)if(this.axesProject[Z]&&!this.projectHasAlpha)return!0;return!1};var d=[0,0],w=[0,0,0],_=[0,0,0],T=[0,0,0,1],k=[0,0,0,1],L=l.slice(),M=[0,0,0],O=[[0,0,0],[0,0,0]];function P(Z){return Z[0]=Z[1]=Z[2]=0,Z}function S(Z,W){return Z[0]=W[0],Z[1]=W[1],Z[2]=W[2],Z[3]=1,Z}function E(Z,W,G,X){return Z[0]=W[0],Z[1]=W[1],Z[2]=W[2],Z[G]=X,Z}var B=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function H(Z,W,G,X,te,D,N){var U=G.gl;if((D===G.projectHasAlpha||N)&&function(Z,W,G,X){var te,D=W.axesProject,N=W.gl,U=Z.uniforms,Q=G.model||l,j=G.view||l,J=G.projection||l,K=W.axesBounds,re=function(_e){for(var Me=O,Ie=0;Ie<2;++Ie)for(var ze=0;ze<3;++ze)Me[Ie][ze]=Math.max(Math.min(_e[Ie][ze],1e8),-1e8);return Me}(W.clipBounds);te=W.axes&&W.axes.lastCubeProps?W.axes.lastCubeProps.axis:[1,1,1],d[0]=2/N.drawingBufferWidth,d[1]=2/N.drawingBufferHeight,Z.bind(),U.view=j,U.projection=J,U.screenSize=d,U.highlightId=W.highlightId,U.highlightScale=W.highlightScale,U.clipBounds=re,U.pickGroup=W.pickId/255,U.pixelRatio=X;for(var ne=0;ne<3;++ne)if(D[ne]){U.scale=W.projectScale[ne],U.opacity=W.projectOpacity[ne];for(var se=L,oe=0;oe<16;++oe)se[oe]=0;for(oe=0;oe<4;++oe)se[5*oe]=1;se[5*ne]=0,se[12+ne]=te[ne]<0?K[0][ne]:K[1][ne],r(se,Q,se),U.model=se;var pe=(ne+1)%3,ce=(ne+2)%3,ge=P(w),xe=P(_);ge[pe]=1,xe[ce]=1;var we=f(0,0,0,S(T,ge)),be=f(0,0,0,S(k,xe));if(Math.abs(we[1])>Math.abs(be[1])){var Se=we;we=be,be=Se,Se=ge,ge=xe,xe=Se;var fe=pe;pe=ce,ce=fe}we[0]<0&&(ge[pe]=-1),be[1]>0&&(xe[ce]=-1);var me=0,Te=0;for(oe=0;oe<4;++oe)me+=Math.pow(Q[4*pe+oe],2),Te+=Math.pow(Q[4*ce+oe],2);ge[pe]/=Math.sqrt(me),xe[ce]/=Math.sqrt(Te),U.axes[0]=ge,U.axes[1]=xe,U.fragClipBounds[0]=E(M,re[0],ne,-1e8),U.fragClipBounds[1]=E(M,re[1],ne,1e8),W.vao.bind(),W.vao.draw(N.TRIANGLES,W.vertexCount),W.lineWidth>0&&(N.lineWidth(W.lineWidth*X),W.vao.draw(N.LINES,W.lineVertexCount,W.vertexCount)),W.vao.unbind()}}(W,G,X,te),D===G.hasAlpha||N){Z.bind();var Q=Z.uniforms;Q.model=X.model||l,Q.view=X.view||l,Q.projection=X.projection||l,d[0]=2/U.drawingBufferWidth,d[1]=2/U.drawingBufferHeight,Q.screenSize=d,Q.highlightId=G.highlightId,Q.highlightScale=G.highlightScale,Q.fragClipBounds=B,Q.clipBounds=G.axes.bounds,Q.opacity=G.opacity,Q.pickGroup=G.pickId/255,Q.pixelRatio=te,G.vao.bind(),G.vao.draw(U.TRIANGLES,G.vertexCount),G.lineWidth>0&&(U.lineWidth(G.lineWidth*te),G.vao.draw(U.LINES,G.lineVertexCount,G.vertexCount)),G.vao.unbind()}}function V(Z,W,G,X){var te;te=Array.isArray(Z)?W<Z.length?Z[W]:void 0:Z,te=i(te);var D=!0;e(te)&&(te="\u25bc",D=!1);var N=s(te,G,X);return{mesh:N[0],lines:N[1],bounds:N[2],visible:D}}x.draw=function(Z){H(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Z,this.pixelRatio,!1,!1)},x.drawTransparent=function(Z){H(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,Z,this.pixelRatio,!0,!1)},x.drawPick=function(Z){H(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,Z,1,!0,!0)},x.pick=function(Z){if(!Z||Z.id!==this.pickId)return null;var W=Z.value[2]+(Z.value[1]<<8)+(Z.value[0]<<16);if(W>=this.pointCount||W<0)return null;var G=this.points[W],X=this._selectResult;X.index=W;for(var te=0;te<3;++te)X.position[te]=X.dataCoordinate[te]=G[te];return X},x.highlight=function(Z){if(Z){var W=Z.index;this.highlightId=[(255&W)/255,(W>>8&255)/255,(W>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},x.update=function(Z){if("perspective"in(Z=Z||{})&&(this.useOrtho=!Z.perspective),"orthographic"in Z&&(this.useOrtho=!!Z.orthographic),"lineWidth"in Z&&(this.lineWidth=Z.lineWidth),"project"in Z)if(Array.isArray(Z.project))this.axesProject=Z.project;else{var W=!!Z.project;this.axesProject=[W,W,W]}if("projectScale"in Z)if(Array.isArray(Z.projectScale))this.projectScale=Z.projectScale.slice();else{var G=+Z.projectScale;this.projectScale=[G,G,G]}if(this.projectHasAlpha=!1,"projectOpacity"in Z){this.projectOpacity=Array.isArray(Z.projectOpacity)?Z.projectOpacity.slice():[G=+Z.projectOpacity,G,G];for(var X=0;X<3;++X)this.projectOpacity[X]=h(this.projectOpacity[X]),this.projectOpacity[X]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in Z&&(this.opacity=h(Z.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var te,D,N=Z.position,U=Z.font||"normal",Q=Z.alignment||[0,0];if(2===Q.length)te=Q[0],D=Q[1];else for(te=[],D=[],X=0;X<Q.length;++X)te[X]=Q[X][0],D[X]=Q[X][1];var j=[1/0,1/0,1/0],J=[-1/0,-1/0,-1/0],K=Z.glyph,re=Z.color,ne=Z.size,se=Z.angle,oe=Z.lineColor,pe=-1,ce=0,ge=0,xe=0;if(N.length){xe=N.length;e:for(X=0;X<xe;++X){for(var we=N[X],be=0;be<3;++be)if(isNaN(we[be])||!isFinite(we[be]))continue e;var Se=(tt=V(K,X,U,this.pixelRatio)).mesh,fe=tt.lines,me=tt.bounds;ce+=3*Se.cells.length,ge+=2*fe.edges.length}}var Te=ce+ge,_e=a.mallocFloat(3*Te),Me=a.mallocFloat(4*Te),Ie=a.mallocFloat(2*Te),ze=a.mallocUint32(Te);if(Te>0){var Ve=0,Je=ce,De=[0,0,0,1],Be=[0,0,0,1],Ze=Array.isArray(re)&&Array.isArray(re[0]),Ye=Array.isArray(oe)&&Array.isArray(oe[0]);e:for(X=0;X<xe;++X){for(pe+=1,we=N[X],be=0;be<3;++be){if(isNaN(we[be])||!isFinite(we[be]))continue e;J[be]=Math.max(J[be],we[be]),j[be]=Math.min(j[be],we[be])}Se=(tt=V(K,X,U,this.pixelRatio)).mesh,fe=tt.lines,me=tt.bounds;var tt,st=tt.visible;if(st)if(Array.isArray(re)){if(3===(vt=Ze?X<re.length?re[X]:[0,0,0,0]:re).length){for(be=0;be<3;++be)De[be]=vt[be];De[3]=1}else if(4===vt.length){for(be=0;be<4;++be)De[be]=vt[be];!this.hasAlpha&&vt[3]<1&&(this.hasAlpha=!0)}}else De[0]=De[1]=De[2]=0,De[3]=1;else De=[1,1,1,0];if(st)if(Array.isArray(oe)){var vt;if(3===(vt=Ye?X<oe.length?oe[X]:[0,0,0,0]:oe).length){for(be=0;be<3;++be)Be[be]=vt[be];Be[be]=1}else if(4===vt.length){for(be=0;be<4;++be)Be[be]=vt[be];!this.hasAlpha&&vt[3]<1&&(this.hasAlpha=!0)}}else Be[0]=Be[1]=Be[2]=0,Be[3]=1;else Be=[1,1,1,0];var Pt=.5;st?Array.isArray(ne)?Pt=X<ne.length?+ne[X]:12:ne?Pt=+ne:this.useOrtho&&(Pt=12):Pt=0;var Mt=0;Array.isArray(se)?Mt=X<se.length?+se[X]:0:se&&(Mt=+se);var rt=Math.cos(Mt),et=Math.sin(Mt);for(we=N[X],be=0;be<3;++be)J[be]=Math.max(J[be],we[be]),j[be]=Math.min(j[be],we[be]);var bt=te,Rt=D;bt=0,Array.isArray(te)?bt=X<te.length?te[X]:0:te&&(bt=te),Rt=0,Array.isArray(D)?Rt=X<D.length?D[X]:0:D&&(Rt=D);var Yt=[bt*=bt>0?1-me[0][0]:bt<0?1+me[1][0]:1,Rt*=Rt>0?1-me[0][1]:Rt<0?1+me[1][1]:1],Fe=Se.cells||[],He=Se.positions||[];for(be=0;be<Fe.length;++be)for(var Oe=Fe[be],$e=0;$e<3;++$e){for(var ke=0;ke<3;++ke)_e[3*Ve+ke]=we[ke];for(ke=0;ke<4;++ke)Me[4*Ve+ke]=De[ke];ze[Ve]=pe;var Le=He[Oe[$e]];Ie[2*Ve]=Pt*(rt*Le[0]-et*Le[1]+Yt[0]),Ie[2*Ve+1]=Pt*(et*Le[0]+rt*Le[1]+Yt[1]),Ve+=1}for(Fe=fe.edges,He=fe.positions,be=0;be<Fe.length;++be)for(Oe=Fe[be],$e=0;$e<2;++$e){for(ke=0;ke<3;++ke)_e[3*Je+ke]=we[ke];for(ke=0;ke<4;++ke)Me[4*Je+ke]=Be[ke];ze[Je]=pe,Ie[2*Je]=Pt*(rt*(Le=He[Oe[$e]])[0]-et*Le[1]+Yt[0]),Ie[2*Je+1]=Pt*(et*Le[0]+rt*Le[1]+Yt[1]),Je+=1}}}this.bounds=[j,J],this.points=N,this.pointCount=N.length,this.vertexCount=ce,this.lineVertexCount=ge,this.pointBuffer.update(_e),this.colorBuffer.update(Me),this.glyphBuffer.update(Ie),this.idBuffer.update(ze),a.free(_e),a.free(Me),a.free(Ie),a.free(ze)},x.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(m,b,v){"use strict";var e=m("glslify");v.boxVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),v.boxFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(m,b,v){"use strict";var e=m("gl-shader"),n=m("gl-buffer"),t=m("./lib/shaders");function a(u,s,i){this.plot=u,this.boxBuffer=s,this.boxShader=i,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}b.exports=function(u,s){var i=u.gl,f=new a(u,n(i,[0,0,0,1,1,0,1,1]),e(i,t.boxVertex,t.boxFragment));return f.update(s),u.addOverlay(f),f};var r=a.prototype;r.draw=function(){if(this.enabled){var u=this.plot,s=this.selectBox,i=this.borderWidth,l=this.innerColor,c=this.outerColor,f=this.borderColor,g=u.box,h=u.screenBox,o=u.dataBox,x=u.viewBox,d=u.pixelRatio,w=(s[0]-o[0])*(x[2]-x[0])/(o[2]-o[0])+x[0],_=(s[1]-o[1])*(x[3]-x[1])/(o[3]-o[1])+x[1],T=(s[2]-o[0])*(x[2]-x[0])/(o[2]-o[0])+x[0],k=(s[3]-o[1])*(x[3]-x[1])/(o[3]-o[1])+x[1];if(w=Math.max(w,x[0]),_=Math.max(_,x[1]),T=Math.min(T,x[2]),k=Math.min(k,x[3]),!(T<w||k<_)){g.bind();var L=h[2]-h[0],M=h[3]-h[1];if(this.outerFill&&(g.drawBox(0,0,L,_,c),g.drawBox(0,_,w,k,c),g.drawBox(0,k,L,M,c),g.drawBox(T,_,L,k,c)),this.innerFill&&g.drawBox(w,_,T,k,l),i>0){var O=i*d;g.drawBox(w-O,_-O,T+O,_+O,f),g.drawBox(w-O,k-O,T+O,k+O,f),g.drawBox(w-O,_-O,w+O,k+O,f),g.drawBox(T-O,_-O,T+O,k+O,f)}}}},r.update=function(u){this.innerFill=!!(u=u||{}).innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},r.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(m,b,v){"use strict";b.exports=function(i,l){var c=l[0],f=l[1];return new u(i,e(i,c,f,{}),n.mallocUint8(c*f*4))};var e=m("gl-fbo"),n=m("typedarray-pool"),t=m("ndarray"),a=m("bit-twiddle").nextPow2;function r(i,l,c,f,g){this.coord=[i,l],this.id=c,this.value=f,this.distance=g}function u(i,l,c){this.gl=i,this.fbo=l,this.buffer=c,this._readTimeout=null;var f=this;this._readCallback=function(){f.gl&&(l.bind(),i.readPixels(0,0,l.shape[0],l.shape[1],i.RGBA,i.UNSIGNED_BYTE,f.buffer),f._readTimeout=null)}}var s=u.prototype;Object.defineProperty(s,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(i){if(this.gl){this.fbo.shape=i;var l=this.fbo.shape[0],c=this.fbo.shape[1];if(c*l*4>this.buffer.length){n.free(this.buffer);for(var f=this.buffer=n.mallocUint8(a(c*l*4)),g=0;g<c*l*4;++g)f[g]=255}return i}}}),s.begin=function(){var i=this.gl;i&&(this.fbo.bind(),i.clearColor(1,1,1,1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT))},s.end=function(){var i=this.gl;i&&(i.bindFramebuffer(i.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},s.query=function(i,l,c){if(!this.gl)return null;var f=this.fbo.shape.slice();i|=0,l|=0,"number"!=typeof c&&(c=1);var g=0|Math.min(Math.max(i-c,0),f[0]),h=0|Math.min(Math.max(i+c,0),f[0]),o=0|Math.min(Math.max(l-c,0),f[1]),x=0|Math.min(Math.max(l+c,0),f[1]);if(h<=g||x<=o)return null;var d=[h-g,x-o],w=t(this.buffer,[d[0],d[1],4],[4,4*f[0],1],4*(g+f[0]*o)),_=function(L,M,O){for(var P=1e8,S=-1,E=-1,R=L.shape[0],B=L.shape[1],H=0;H<R;H++)for(var V=0;V<B;V++){var Z=L.get(H,V,0),W=L.get(H,V,1),G=L.get(H,V,2),X=L.get(H,V,3);if(Z<255||W<255||G<255||X<255){var te=M-H,D=O-V,N=te*te+D*D;N<P&&(P=N,S=H,E=V)}}return[S,E,P]}(w.hi(d[0],d[1],1),c,c),T=_[0],k=_[1];return T<0||Math.pow(this.radius,2)<_[2]?null:new r(T+g|0,k+o|0,w.get(T,k,0),[w.get(T,k,1),w.get(T,k,2),w.get(T,k,3)],Math.sqrt(_[2]))},s.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(m,b,v){"use strict";var e=m("./lib/create-uniforms"),n=m("./lib/create-attributes"),t=m("./lib/reflect"),a=m("./lib/shader-cache"),r=m("./lib/runtime-reflect"),u=m("./lib/GLError");function s(c){this.gl=c,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var i=s.prototype;function l(c,f){return c.name<f.name?-1:1}i.bind=function(){var c;this.program||this._relink();var f=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),g=this.gl.lastAttribCount;if(f>g)for(c=g;c<f;c++)this.gl.enableVertexAttribArray(c);else if(g>f)for(c=f;c<g;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=f,this.gl.useProgram(this.program)},i.dispose=function(){for(var c=this.gl.lastAttribCount,f=0;f<c;f++)this.gl.disableVertexAttribArray(f);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},i.update=function(c,f,g,h){if(!f||1===arguments.length){var o=c;c=o.vertex,f=o.fragment,g=o.uniforms,h=o.attributes}var x=this,d=x.gl,w=x._vref;x._vref=a.shader(d,d.VERTEX_SHADER,c),w&&w.dispose(),x.vertShader=x._vref.shader;var _=this._fref;if(x._fref=a.shader(d,d.FRAGMENT_SHADER,f),_&&_.dispose(),x.fragShader=x._fref.shader,!g||!h){var T=d.createProgram();if(d.attachShader(T,x.fragShader),d.attachShader(T,x.vertShader),d.linkProgram(T),!d.getProgramParameter(T,d.LINK_STATUS)){var k=d.getProgramInfoLog(T);throw new u(k,"Error linking program:"+k)}g=g||r.uniforms(d,T),h=h||r.attributes(d,T),d.deleteProgram(T)}(h=h.slice()).sort(l);var L,M=[],O=[],P=[];for(L=0;L<h.length;++L){var S=h[L];if(S.type.indexOf("mat")>=0){for(var E=0|S.type.charAt(S.type.length-1),R=new Array(E),B=0;B<E;++B)R[B]=P.length,O.push(S.name+"["+B+"]"),"number"==typeof S.location?P.push(S.location+B):Array.isArray(S.location)&&S.location.length===E&&"number"==typeof S.location[B]?P.push(0|S.location[B]):P.push(-1);M.push({name:S.name,type:S.type,locations:R})}else M.push({name:S.name,type:S.type,locations:[P.length]}),O.push(S.name),P.push("number"==typeof S.location?0|S.location:-1)}var H=0;for(L=0;L<P.length;++L)if(P[L]<0){for(;P.indexOf(H)>=0;)H+=1;P[L]=H}var V=new Array(g.length);function Z(){x.program=a.program(d,x._vref,x._fref,O,P);for(var W=0;W<g.length;++W)V[W]=d.getUniformLocation(x.program,g[W].name)}Z(),x._relink=Z,x.types={uniforms:t(g),attributes:t(h)},x.attributes=n(d,x,M,P),Object.defineProperty(x,"uniforms",e(d,x,g,V))},b.exports=function(c,f,g,h,o){var x=new s(c);return x.update(f,g,h,o),x}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(m,b,v){function e(n,t,a){this.shortMessage=t||"",this.longMessage=a||"",this.rawError=n||"",this.message="gl-shader: "+(t||n||"")+(a?"\n"+a:""),this.stack=(new Error).stack}(e.prototype=new Error).name="GLError",e.prototype.constructor=e,b.exports=e},{}],134:[function(m,b,v){"use strict";b.exports=function(s,i,l,c){for(var f={},g=0,h=l.length;g<h;++g){var o=l[g],x=o.name,d=o.type,w=o.locations;switch(d){case"bool":case"int":case"float":r(s,i,w[0],c,1,f,x);break;default:if(d.indexOf("vec")>=0){if((_=d.charCodeAt(d.length-1)-48)<2||_>4)throw new e("","Invalid data type for attribute "+x+": "+d);r(s,i,w[0],c,_,f,x)}else{if(!(d.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+x+": "+d);var _;if((_=d.charCodeAt(d.length-1)-48)<2||_>4)throw new e("","Invalid data type for attribute "+x+": "+d);u(s,i,w,c,_,f,x)}}}return f};var e=m("./GLError");function n(s,i,l,c,f,g){this._gl=s,this._wrapper=i,this._index=l,this._locations=c,this._dimension=f,this._constFunc=g}var t=n.prototype;t.pointer=function(s,i,l,c){var f=this._gl,g=this._locations[this._index];f.vertexAttribPointer(g,this._dimension,s||f.FLOAT,!!i,l||0,c||0),f.enableVertexAttribArray(g)},t.set=function(s,i,l,c){return this._constFunc(this._locations[this._index],s,i,l,c)},Object.defineProperty(t,"location",{get:function(){return this._locations[this._index]},set:function(s){return s!==this._locations[this._index]&&(this._locations[this._index]=0|s,this._wrapper.program=null),0|s}});var a=[function(s,i,l){return void 0===l.length?s.vertexAttrib1f(i,l):s.vertexAttrib1fv(i,l)},function(s,i,l,c){return void 0===l.length?s.vertexAttrib2f(i,l,c):s.vertexAttrib2fv(i,l)},function(s,i,l,c,f){return void 0===l.length?s.vertexAttrib3f(i,l,c,f):s.vertexAttrib3fv(i,l)},function(s,i,l,c,f,g){return void 0===l.length?s.vertexAttrib4f(i,l,c,f,g):s.vertexAttrib4fv(i,l)}];function r(s,i,l,c,f,g,h){var o=a[f],x=new n(s,i,l,c,f,o);Object.defineProperty(g,h,{set:function(d){return s.disableVertexAttribArray(c[l]),o(s,c[l],d),d},get:function(){return x},enumerable:!0})}function u(s,i,l,c,f,g,h){for(var o=new Array(f),x=new Array(f),d=0;d<f;++d)r(s,i,l[d],c,f,o,d),x[d]=o[d];Object.defineProperty(o,"location",{set:function(T){if(Array.isArray(T))for(var k=0;k<f;++k)x[k].location=T[k];else for(k=0;k<f;++k)x[k].location=T+k;return T},get:function(){for(var T=new Array(f),k=0;k<f;++k)T[k]=c[l[k]];return T},enumerable:!0}),o.pointer=function(T,k,L,M){T=T||s.FLOAT,k=!!k,L=L||f*f,M=M||0;for(var O=0;O<f;++O){var P=c[l[O]];s.vertexAttribPointer(P,f,T,k,L,M+O*f),s.enableVertexAttribArray(P)}};var w=new Array(f),_=s["vertexAttrib"+f+"fv"];Object.defineProperty(g,h,{set:function(T){for(var k=0;k<f;++k){var L=c[l[k]];if(s.disableVertexAttribArray(L),Array.isArray(T[0]))_.call(s,L,T[k]);else{for(var M=0;M<f;++M)w[M]=T[f*k+M];_.call(s,L,w)}}return T},get:function(){return o},enumerable:!0})}},{"./GLError":133}],135:[function(m,b,v){"use strict";var e=m("./reflect"),n=m("./GLError");function t(r){return function(){return r}}function a(r,u){for(var s=new Array(r),i=0;i<r;++i)s[i]=u;return s}b.exports=function(r,u,s,i){function l(h){return function(o){for(var x=function B(H,V){if("object"!=typeof V)return[[H,V]];var Z=[];for(var W in V){var G=V[W],X=H;parseInt(W)+""===W?X+="["+W+"]":X+="."+W,"object"==typeof G?Z.push.apply(Z,B(X,G)):Z.push([X,G])}return Z}("",h),d=0;d<x.length;++d){var w=x[d],_=w[0],T=w[1];if(i[T]){var k=o;if("string"==typeof _&&(0===_.indexOf(".")||0===_.indexOf("["))){var L=_;if(0===_.indexOf(".")&&(L=_.slice(1)),L.indexOf("]")===L.length-1){var M=L.indexOf("["),O=L.slice(0,M),P=L.slice(M+1,L.length-1);k=O?o[O][P]:o[P]}else k=o[L]}var S,E=s[T].type;switch(E){case"bool":case"int":case"sampler2D":case"samplerCube":r.uniform1i(i[T],k);break;case"float":r.uniform1f(i[T],k);break;default:var R=E.indexOf("vec");if(!(0<=R&&R<=1&&E.length===4+R)){if(0===E.indexOf("mat")&&4===E.length){if((S=E.charCodeAt(E.length-1)-48)<2||S>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+E);r["uniformMatrix"+S+"fv"](i[T],!1,k);break}throw new n("","Unknown uniform data type for "+name+": "+E)}if((S=E.charCodeAt(E.length-1)-48)<2||S>4)throw new n("","Invalid data type");switch(E.charAt(0)){case"b":case"i":r["uniform"+S+"iv"](i[T],k);break;case"v":r["uniform"+S+"fv"](i[T],k);break;default:throw new n("","Unrecognized data type for vector "+name+": "+E)}}}}}}function c(h,o,x){if("object"==typeof x){var d=f(x);Object.defineProperty(h,o,{get:t(d),set:l(x),enumerable:!0,configurable:!1})}else i[x]?Object.defineProperty(h,o,{get:(w=x,function(_,T,k){return _.getUniform(T.program,k[w])}),set:l(x),enumerable:!0,configurable:!1}):h[o]=function(_){switch(_){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var T=_.indexOf("vec");if(0<=T&&T<=1&&_.length===4+T){if((k=_.charCodeAt(_.length-1)-48)<2||k>4)throw new n("","Invalid data type");return"b"===_.charAt(0)?a(k,!1):a(k,0)}if(0===_.indexOf("mat")&&4===_.length){var k;if((k=_.charCodeAt(_.length-1)-48)<2||k>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+_);return a(k*k,0)}throw new n("","Unknown uniform data type for "+name+": "+_)}}(s[x].type);var w}function f(h){var o;if(Array.isArray(h)){o=new Array(h.length);for(var x=0;x<h.length;++x)c(o,x,h[x])}else for(var d in o={},h)c(o,d,h[d]);return o}var g=e(s,!0);return{get:t(f(g)),set:l(g),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(m,b,v){"use strict";b.exports=function(e,n){for(var t={},a=0;a<e.length;++a)for(var r=e[a].name.split("."),u=t,s=0;s<r.length;++s){var i=r[s].split("[");if(i.length>1){i[0]in u||(u[i[0]]=[]),u=u[i[0]];for(var l=1;l<i.length;++l){var c=parseInt(i[l]);l<i.length-1||s<r.length-1?(c in u||(u[c]=l<i.length-1?[]:{}),u=u[c]):u[c]=n?a:e[a].type}}else s<r.length-1?(i[0]in u||(u[i[0]]={}),u=u[i[0]]):u[i[0]]=n?a:e[a].type}return t}},{}],137:[function(m,b,v){"use strict";v.uniforms=function(a,r){for(var u=a.getProgramParameter(r,a.ACTIVE_UNIFORMS),s=[],i=0;i<u;++i){var l=a.getActiveUniform(r,i);if(l){var c=t(a,l.type);if(l.size>1)for(var f=0;f<l.size;++f)s.push({name:l.name.replace("[0]","["+f+"]"),type:c});else s.push({name:l.name,type:c})}}return s},v.attributes=function(a,r){for(var u=a.getProgramParameter(r,a.ACTIVE_ATTRIBUTES),s=[],i=0;i<u;++i){var l=a.getActiveAttrib(r,i);l&&s.push({name:l.name,type:t(a,l.type)})}return s};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},n=null;function t(a,r){if(!n){var u=Object.keys(e);n={};for(var s=0;s<u.length;++s){var i=u[s];n[a[i]]=e[i]}}return n[r]}},{}],138:[function(m,b,v){"use strict";v.shader=function(l,c,f){return i(l).getShaderReference(c,f)},v.program=function(l,c,f,g,h){return i(l).getProgram(c,f,g,h)};var e=m("./GLError"),n=m("gl-format-compiler-error"),t=new("undefined"==typeof WeakMap?m("weakmap-shim"):WeakMap),a=0;function r(l,c,f,g,h,o,x){this.id=l,this.src=c,this.type=f,this.shader=g,this.count=o,this.programs=[],this.cache=x}function u(l){this.gl=l,this.shaders=[{},{}],this.programs={}}r.prototype.dispose=function(){if(0==--this.count){for(var l=this.cache,c=l.gl,f=this.programs,g=0,h=f.length;g<h;++g){var o=l.programs[f[g]];o&&(delete l.programs[g],c.deleteProgram(o))}c.deleteShader(this.shader),delete l.shaders[this.type===c.FRAGMENT_SHADER|0][this.src]}};var s=u.prototype;function i(l){var c=t.get(l);return c||(c=new u(l),t.set(l,c)),c}s.getShaderReference=function(l,c){var f=this.gl,g=this.shaders[l===f.FRAGMENT_SHADER|0],h=g[c];if(h&&f.isShader(h.shader))h.count+=1;else{var o=function(x,d,w){var _=x.createShader(d);if(x.shaderSource(_,w),x.compileShader(_),!x.getShaderParameter(_,x.COMPILE_STATUS)){var T=x.getShaderInfoLog(_);try{var k=n(T,w,d)}catch(L){throw console.warn("Failed to format compiler error: "+L),new e(T,"Error compiling shader:\n"+T)}throw new e(T,k.short,k.long)}return _}(f,l,c);h=g[c]=new r(a++,c,l,o,[],1,this)}return h},s.getProgram=function(l,c,f,g){var h=[l.id,c.id,f.join(":"),g.join(":")].join("@"),o=this.programs[h];return o&&this.gl.isProgram(o)||(this.programs[h]=o=function(x,d,w,_,T){var k=x.createProgram();x.attachShader(k,d),x.attachShader(k,w);for(var L=0;L<_.length;++L)x.bindAttribLocation(k,T[L],_[L]);if(x.linkProgram(k),!x.getProgramParameter(k,x.LINK_STATUS)){var M=x.getProgramInfoLog(k);throw new e(M,"Error linking program: "+M)}return k}(this.gl,l.shader,c.shader,f,g),l.programs.push(h),c.programs.push(h)),o}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(m,b,v){"use strict";function e(t){this.plot=t,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}b.exports=function(t,a){var r=new e(t);return r.update(a),t.addOverlay(r),r};var n=e.prototype;n.update=function(t){this.enable=((t=t||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(t.width||[1,1,1,1]).slice(),this.color=(t.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(a){return a.slice()}),this.center=(t.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},n.draw=function(){var t=this.enable,a=this.width,r=this.color,u=this.center,s=this.plot,i=s.line,l=s.dataBox,c=s.viewBox;if(i.bind(),l[0]<=u[0]&&u[0]<=l[2]&&l[1]<=u[1]&&u[1]<=l[3]){var f=c[0]+(u[0]-l[0])/(l[2]-l[0])*(c[2]-c[0]),g=c[1]+(u[1]-l[1])/(l[3]-l[1])*(c[3]-c[1]);t[0]&&i.drawLine(f,g,c[0],g,a[0],r[0]),t[1]&&i.drawLine(f,g,f,c[1],a[1],r[1]),t[2]&&i.drawLine(f,g,c[2],g,a[2],r[2]),t[3]&&i.drawLine(f,g,f,c[3],a[3],r[3])}},n.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(m,b,v){"use strict";var e=m("glslify"),n=m("gl-shader"),t=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),a=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);b.exports=function(r){return n(r,t,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(m,b,v){"use strict";var e=m("gl-buffer"),n=m("gl-vao"),t=m("./shaders/index");b.exports=function(c,f){var g=[];function h(_,T,k,L,M,O){var P=[_,T,k,0,0,0,1];P[L+3]=1,P[L]=M,g.push.apply(g,P),P[6]=-1,g.push.apply(g,P),P[L]=O,g.push.apply(g,P),g.push.apply(g,P),P[6]=1,g.push.apply(g,P),P[L]=M,g.push.apply(g,P)}h(0,0,0,0,0,1),h(0,0,0,1,0,1),h(0,0,0,2,0,1),h(1,0,0,1,-1,1),h(1,0,0,2,-1,1),h(0,1,0,0,-1,1),h(0,1,0,2,-1,1),h(0,0,1,0,-1,1),h(0,0,1,1,-1,1);var o=e(c,g),x=n(c,[{type:c.FLOAT,buffer:o,size:3,offset:0,stride:28},{type:c.FLOAT,buffer:o,size:3,offset:12,stride:28},{type:c.FLOAT,buffer:o,size:1,offset:24,stride:28}]),d=t(c);d.attributes.position.location=0,d.attributes.color.location=1,d.attributes.weight.location=2;var w=new r(c,o,x,d);return w.update(f),w};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(c,f,g,h){this.gl=c,this.buffer=f,this.vao=g,this.shader=h,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=r.prototype,s=[0,0,0],i=[0,0,0],l=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(c){},u.draw=function(c){var f=this.gl,g=this.vao,h=this.shader;g.bind(),h.bind();var o,x=c.model||a,d=c.view||a,w=c.projection||a;this.axes&&(o=this.axes.lastCubeProps.axis);for(var _=s,T=i,k=0;k<3;++k)o&&o[k]<0?(_[k]=this.bounds[0][k],T[k]=this.bounds[1][k]):(_[k]=this.bounds[1][k],T[k]=this.bounds[0][k]);for(l[0]=f.drawingBufferWidth,l[1]=f.drawingBufferHeight,h.uniforms.model=x,h.uniforms.view=d,h.uniforms.projection=w,h.uniforms.coordinates=[this.position,_,T],h.uniforms.colors=this.colors,h.uniforms.screenShape=l,k=0;k<3;++k)h.uniforms.lineWidth=this.lineWidth[k]*this.pixelRatio,this.enabled[k]&&(g.draw(f.TRIANGLES,6,6*k),this.drawSides[k]&&g.draw(f.TRIANGLES,12,18+12*k));g.unbind()},u.update=function(c){c&&("bounds"in c&&(this.bounds=c.bounds),"position"in c&&(this.position=c.position),"lineWidth"in c&&(this.lineWidth=c.lineWidth),"colors"in c&&(this.colors=c.colors),"enabled"in c&&(this.enabled=c.enabled),"drawSides"in c&&(this.drawSides=c.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(m,b,v){var e=m("glslify"),n=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),t=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),r=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);v.meshShader={vertex:n,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},v.pickShader={vertex:a,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(m,b,v){"use strict";var e=m("gl-vec3"),n=m("gl-vec4"),t=["xyz","xzy","yxz","yzx","zxy","zyx"],r=function(c,f){var g,h=c.length;for(g=0;g<h;g++){var o=c[g];if(o===f)return g;if(o>f)return g-1}return g},u=function(c,f,g){return c<f?f:c>g?g:c},s=function(c){var f=1/0;c.sort(function(x,d){return x-d});for(var g=c.length,h=1;h<g;h++){var o=Math.abs(c[h]-c[h-1]);o<f&&(f=o)}return f};b.exports=function(c,f){var g=c.startingPositions,h=c.maxLength||1e3,o=c.tubeSize||1,x=c.absoluteTubeSize,d=c.gridFill||"+x+y+z",w={};-1!==d.indexOf("-x")&&(w.reversedX=!0),-1!==d.indexOf("-y")&&(w.reversedY=!0),-1!==d.indexOf("-z")&&(w.reversedZ=!0),w.filled=t.indexOf(d.replace(/-/g,"").replace(/\+/g,""));var oe,pe,ce,ge,_=c.getVelocity||function(oe){return function(pe,ce,ge){var xe=ce.vectors,we=ce.meshgrid,be=pe[0],Se=pe[1],fe=pe[2],me=we[0].length,Te=we[1].length,_e=we[2].length,Me=r(we[0],be),Ie=r(we[1],Se),ze=r(we[2],fe),Ve=Me+1,Je=Ie+1,De=ze+1;if(Me=u(Me,0,me-1),Ve=u(Ve,0,me-1),Ie=u(Ie,0,Te-1),Je=u(Je,0,Te-1),ze=u(ze,0,_e-1),De=u(De,0,_e-1),Me<0||Ie<0||ze<0||Ve>me-1||Je>Te-1||De>_e-1)return e.create();var Be,Ze,Ye,tt,st,vt,Pt=we[0][Me],rt=we[1][Ie],bt=we[2][ze],Rt=(be-Pt)/(we[0][Ve]-Pt),Yt=(Se-rt)/(we[1][Je]-rt),Fe=(fe-bt)/(we[2][De]-bt);switch(isFinite(Rt)||(Rt=.5),isFinite(Yt)||(Yt=.5),isFinite(Fe)||(Fe=.5),ge.reversedX&&(Me=me-1-Me,Ve=me-1-Ve),ge.reversedY&&(Ie=Te-1-Ie,Je=Te-1-Je),ge.reversedZ&&(ze=_e-1-ze,De=_e-1-De),ge.filled){case 5:st=ze,vt=De,Ye=Ie*_e,tt=Je*_e,Be=Me*_e*Te,Ze=Ve*_e*Te;break;case 4:st=ze,vt=De,Be=Me*_e,Ze=Ve*_e,Ye=Ie*_e*me,tt=Je*_e*me;break;case 3:Ye=Ie,tt=Je,st=ze*Te,vt=De*Te,Be=Me*Te*_e,Ze=Ve*Te*_e;break;case 2:Ye=Ie,tt=Je,Be=Me*Te,Ze=Ve*Te,st=ze*Te*me,vt=De*Te*me;break;case 1:Be=Me,Ze=Ve,st=ze*me,vt=De*me,Ye=Ie*me*_e,tt=Je*me*_e;break;default:Be=Me,Ze=Ve,Ye=Ie*me,tt=Je*me,st=ze*me*Te,vt=De*me*Te}var He=xe[Be+Ye+st],Oe=xe[Be+Ye+vt],$e=xe[Be+tt+st],ke=xe[Be+tt+vt],Le=xe[Ze+Ye+st],Pe=xe[Ze+Ye+vt],Ce=xe[Ze+tt+st],Xe=xe[Ze+tt+vt],at=e.create(),pt=e.create(),ut=e.create(),St=e.create();e.lerp(at,He,Le,Rt),e.lerp(pt,Oe,Pe,Rt),e.lerp(ut,$e,Ce,Rt),e.lerp(St,ke,Xe,Rt);var ot=e.create(),Et=e.create();e.lerp(ot,at,ut,Yt),e.lerp(Et,pt,St,Yt);var Lt=e.create();return e.lerp(Lt,ot,Et,Fe),Lt}(oe,c,w)},T=c.getDivergence||function(oe,pe){var ce=e.create(),ge=1e-4;e.add(ce,oe,[ge,0,0]);var xe=_(ce);e.subtract(xe,xe,pe),e.scale(xe,xe,1/ge),e.add(ce,oe,[0,ge,0]);var we=_(ce);e.subtract(we,we,pe),e.scale(we,we,1/ge),e.add(ce,oe,[0,0,ge]);var be=_(ce);return e.subtract(be,be,pe),e.scale(be,be,1/ge),e.add(ce,xe,we),e.add(ce,ce,be),ce},k=[],L=f[0][0],M=f[0][1],O=f[0][2],P=f[1][0],S=f[1][1],E=f[1][2],B=10*e.distance(f[0],f[1])/h,H=B*B,V=1,Z=0,W=g.length;W>1&&(V=function(oe){for(var pe=[],ce=[],ge=[],xe={},we={},be={},Se=oe.length,fe=0;fe<Se;fe++){var me=oe[fe],Te=me[0],_e=me[1],Me=me[2];xe[Te]||(pe.push(Te),xe[Te]=!0),we[_e]||(ce.push(_e),we[_e]=!0),be[Me]||(ge.push(Me),be[Me]=!0)}var Ie=s(pe),ze=s(ce),Ve=s(ge),Je=Math.min(Ie,ze,Ve);return isFinite(Je)?Je:1}(g));for(var G=0;G<W;G++){var X=e.create();e.copy(X,g[G]);var te=[X],D=[],N=_(X),U=X;D.push(N);var Q=[],j=T(X,N),J=e.length(j);isFinite(J)&&J>Z&&(Z=J),Q.push(J),k.push({points:te,velocities:D,divergences:Q});for(var K=0;K<100*h&&te.length<h&&(void 0,void 0,void 0,ce=(oe=X)[1],ge=oe[2],!((pe=oe[0])<L||pe>P||ce<M||ce>S||ge<O||ge>E));){K++;var re=e.clone(N),ne=e.squaredLength(re);if(0===ne)break;ne>H&&e.scale(re,re,B/Math.sqrt(ne)),e.add(re,re,X),N=_(re),e.squaredDistance(U,re)-H>-1e-4*H&&(te.push(re),U=re,D.push(N),j=T(re,N),J=e.length(j),isFinite(J)&&J>Z&&(Z=J),Q.push(J)),X=re}}var se=function(c,f,g,h){for(var o=0,x=0;x<c.length;x++)for(var d=c[x].velocities,w=0;w<d.length;w++)o=Math.max(o,e.length(d[w]));var _=c.map(function(B){return function(H,V,Z,W){for(var G=H.points,X=H.velocities,te=H.divergences,D=[],N=[],U=[],Q=[],j=[],J=[],K=0,re=0,ne=n.create(),se=n.create(),oe=0;oe<G.length;oe++){var pe=G[oe],ce=X[oe],ge=te[oe];0===V&&(ge=.05*Z),re=e.length(ce)/W,ne=n.create(),e.copy(ne,ce),ne[3]=ge;for(var xe=0;xe<8;xe++)j[xe]=[pe[0],pe[1],pe[2],xe];if(Q.length>0)for(xe=0;xe<8;xe++){var we=(xe+1)%8;D.push(Q[xe],j[xe],j[we],j[we],Q[we],Q[xe]),U.push(se,ne,ne,ne,se,se),J.push(K,re,re,re,K,K);var be=D.length;N.push([be-6,be-5,be-4],[be-3,be-2,be-1])}var Se=Q;Q=j,j=Se;var fe=se;se=ne,ne=fe;var me=K;K=re,re=me}return{positions:D,cells:N,vectors:U,vertexIntensity:J}}(B,g,h,o)}),T=[],k=[],L=[],M=[];for(x=0;x<_.length;x++){var O=_[x],P=T.length;for(T=T.concat(O.positions),L=L.concat(O.vectors),M=M.concat(O.vertexIntensity),w=0;w<O.cells.length;w++){var S=O.cells[w],E=[];k.push(E);for(var R=0;R<S.length;R++)E.push(S[R]+P)}}return{positions:T,cells:k,vectors:L,vertexIntensity:M,colormap:f}}(k,c.colormap,Z,V);return x?se.tubeScale=x:(0===Z&&(Z=1),se.tubeScale=.5*o*V/Z),se};var i=m("./lib/shaders"),l=m("gl-cone3d").createMesh;b.exports.createTubeMesh=function(c,f){return l(c,f,{shaders:i,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(m,b,v){var e=m("gl-shader"),n=m("glslify"),t=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),r=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),u=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);v.createShader=function(s){var i=e(s,t,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},v.createPickShader=function(s){var i=e(s,t,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},v.createContourShader=function(s){var i=e(s,r,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i},v.createPickContourShader=function(s){var i=e(s,r,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i}},{"gl-shader":132,glslify:231}],145:[function(m,b,v){"use strict";b.exports=function(N){var U=N.gl,Q=d(U),j=_(U),J=w(U),K=T(U),re=n(U),ne=t(U,[{buffer:re,size:4,stride:40,offset:0},{buffer:re,size:3,stride:40,offset:16},{buffer:re,size:3,stride:40,offset:28}]),se=n(U),oe=t(U,[{buffer:se,size:4,stride:20,offset:0},{buffer:se,size:1,stride:20,offset:16}]),pe=n(U),ce=t(U,[{buffer:pe,size:2,type:U.FLOAT}]),ge=a(U,1,256,U.RGBA,U.UNSIGNED_BYTE);ge.minFilter=U.LINEAR,ge.magFilter=U.LINEAR;var xe=new P(U,[0,0],[[0,0,0],[0,0,0]],Q,j,re,ne,ge,J,K,se,oe,pe,ce,[0,0,0]),we={levels:[[],[],[]]};for(var be in N)we[be]=N[be];return we.colormap=we.colormap||"jet",xe.update(we),xe};var e=m("bit-twiddle"),n=m("gl-buffer"),t=m("gl-vao"),a=m("gl-texture2d"),r=m("typedarray-pool"),u=m("colormap"),s=m("ndarray-ops"),i=m("ndarray-pack"),l=m("ndarray"),c=m("surface-nets"),f=m("gl-mat4/multiply"),g=m("gl-mat4/invert"),h=m("binary-search-bounds"),o=m("ndarray-gradient"),x=m("./lib/shaders"),d=x.createShader,w=x.createContourShader,_=x.createPickShader,T=x.createPickContourShader,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],M=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function O(N,U,Q,j,J){this.position=N,this.index=U,this.uv=Q,this.level=j,this.dataCoordinate=J}function P(N,U,Q,j,J,K,re,ne,se,oe,pe,ce,ge,xe,we){this.gl=N,this.shape=U,this.bounds=Q,this.objectOffset=we,this.intensityBounds=[],this._shader=j,this._pickShader=J,this._coordinateBuffer=K,this._vao=re,this._colorMap=ne,this._contourShader=se,this._contourPickShader=oe,this._contourBuffer=pe,this._contourVAO=ce,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new O([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ge,this._dynamicVAO=xe,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[l(r.mallocFloat(1024),[0,0]),l(r.mallocFloat(1024),[0,0]),l(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var N=0;N<3;++N){var U=M[N],Q=(N+2)%3;U[(N+1)%3+0]=1,U[Q+3]=1,U[N+6]=1}}();var S=P.prototype;S.genColormap=function(N,U){var Q=!1,j=i([u({colormap:N,nshades:256,format:"rgba"}).map(function(J,K){var re=U?function(ne,se){if(!se||!se.length)return 1;for(var oe=0;oe<se.length;++oe){if(se.length<2)return 1;if(se[oe][0]===ne)return se[oe][1];if(se[oe][0]>ne&&oe>0){var pe=(se[oe][0]-ne)/(se[oe][0]-se[oe-1][0]);return se[oe][1]*(1-pe)+pe*se[oe-1][1]}}return 1}(K/255,U):J[3];return re<1&&(Q=!0),[J[0],J[1],J[2],255*re]})]);return s.divseq(j,255),this.hasAlphaScale=Q,j},S.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},S.isOpaque=function(){return!this.isTransparent()},S.pickSlots=1,S.setPickBase=function(N){this.pickId=N};var E=[0,0,0],R={showSurface:!1,showContour:!1,projections:[k.slice(),k.slice(),k.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function B(N,U){var Q,j,J,K=U.axes&&U.axes.lastCubeProps.axis||E,re=U.showSurface,ne=U.showContour;for(Q=0;Q<3;++Q)for(re=re||U.surfaceProject[Q],j=0;j<3;++j)ne=ne||U.contourProject[Q][j];for(Q=0;Q<3;++Q){var se=R.projections[Q];for(j=0;j<16;++j)se[j]=0;for(j=0;j<4;++j)se[5*j]=1;se[5*Q]=0,se[12+Q]=U.axesBounds[+(K[Q]>0)][Q],f(se,N.model,se);var oe=R.clipBounds[Q];for(J=0;J<2;++J)for(j=0;j<3;++j)oe[J][j]=N.clipBounds[J][j];oe[0][Q]=-1e8,oe[1][Q]=1e8}return R.showSurface=re,R.showContour=ne,R}var H={model:k,view:k,projection:k,inverseModel:k.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},V=k.slice(),Z=[1,0,0,0,1,0,0,0,1];function W(N,U){N=N||{};var Q=this.gl;Q.disable(Q.CULL_FACE),this._colorMap.bind(0);var j=H;j.model=N.model||k,j.view=N.view||k,j.projection=N.projection||k,j.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],j.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],j.objectOffset=this.objectOffset,j.contourColor=this.contourColor[0],j.inverseModel=g(j.inverseModel,j.model);for(var J=0;J<2;++J)for(var K=j.clipBounds[J],re=0;re<3;++re)K[re]=Math.min(Math.max(this.clipBounds[J][re],-1e8),1e8);j.kambient=this.ambientLight,j.kdiffuse=this.diffuseLight,j.kspecular=this.specularLight,j.roughness=this.roughness,j.fresnel=this.fresnel,j.opacity=this.opacity,j.height=0,j.permutation=Z,j.vertexColor=this.vertexColor;var ne=V;for(f(ne,j.view,j.model),f(ne,j.projection,ne),g(ne,ne),J=0;J<3;++J)j.eyePosition[J]=ne[12+J]/ne[15];var se=ne[15];for(J=0;J<3;++J)se+=this.lightPosition[J]*ne[4*J+3];for(J=0;J<3;++J){var oe=ne[12+J];for(re=0;re<3;++re)oe+=ne[4*re+J]*this.lightPosition[re];j.lightPosition[J]=oe/se}var pe=B(j,this);if(pe.showSurface){for(this._shader.bind(),this._shader.uniforms=j,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(Q.TRIANGLES,this._vertexCount),J=0;J<3;++J)this.surfaceProject[J]&&this.vertexCount&&(this._shader.uniforms.model=pe.projections[J],this._shader.uniforms.clipBounds=pe.clipBounds[J],this._vao.draw(Q.TRIANGLES,this._vertexCount));this._vao.unbind()}if(pe.showContour){var ce=this._contourShader;j.kambient=1,j.kdiffuse=0,j.kspecular=0,j.opacity=1,ce.bind(),ce.uniforms=j;var ge=this._contourVAO;for(ge.bind(),J=0;J<3;++J)for(ce.uniforms.permutation=M[J],Q.lineWidth(this.contourWidth[J]*this.pixelRatio),re=0;re<this.contourLevels[J].length;++re)re===this.highlightLevel[J]?(ce.uniforms.contourColor=this.highlightColor[J],ce.uniforms.contourTint=this.highlightTint[J]):0!==re&&re-1!==this.highlightLevel[J]||(ce.uniforms.contourColor=this.contourColor[J],ce.uniforms.contourTint=this.contourTint[J]),this._contourCounts[J][re]&&(ce.uniforms.height=this.contourLevels[J][re],ge.draw(Q.LINES,this._contourCounts[J][re],this._contourOffsets[J][re]));for(J=0;J<3;++J)for(ce.uniforms.model=pe.projections[J],ce.uniforms.clipBounds=pe.clipBounds[J],re=0;re<3;++re)if(this.contourProject[J][re]){ce.uniforms.permutation=M[re],Q.lineWidth(this.contourWidth[re]*this.pixelRatio);for(var xe=0;xe<this.contourLevels[re].length;++xe)xe===this.highlightLevel[re]?(ce.uniforms.contourColor=this.highlightColor[re],ce.uniforms.contourTint=this.highlightTint[re]):0!==xe&&xe-1!==this.highlightLevel[re]||(ce.uniforms.contourColor=this.contourColor[re],ce.uniforms.contourTint=this.contourTint[re]),this._contourCounts[re][xe]&&(ce.uniforms.height=this.contourLevels[re][xe],ge.draw(Q.LINES,this._contourCounts[re][xe],this._contourOffsets[re][xe]))}for(ge.unbind(),(ge=this._dynamicVAO).bind(),J=0;J<3;++J)if(0!==this._dynamicCounts[J])for(ce.uniforms.model=j.model,ce.uniforms.clipBounds=j.clipBounds,ce.uniforms.permutation=M[J],Q.lineWidth(this.dynamicWidth[J]*this.pixelRatio),ce.uniforms.contourColor=this.dynamicColor[J],ce.uniforms.contourTint=this.dynamicTint[J],ce.uniforms.height=this.dynamicLevel[J],ge.draw(Q.LINES,this._dynamicCounts[J],this._dynamicOffsets[J]),re=0;re<3;++re)this.contourProject[re][J]&&(ce.uniforms.model=pe.projections[re],ce.uniforms.clipBounds=pe.clipBounds[re],ge.draw(Q.LINES,this._dynamicCounts[J],this._dynamicOffsets[J]));ge.unbind()}}S.draw=function(N){return W.call(this,N,!1)},S.drawTransparent=function(N){return W.call(this,N,!0)};var G={model:k,view:k,projection:k,inverseModel:k,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function X(N,U){return Array.isArray(N)?[U(N[0]),U(N[1]),U(N[2])]:[U(N),U(N),U(N)]}function te(N){return Array.isArray(N)?3===N.length?[N[0],N[1],N[2],1]:[N[0],N[1],N[2],N[3]]:[0,0,0,1]}function D(N){if(Array.isArray(N)){if(Array.isArray(N))return[te(N[0]),te(N[1]),te(N[2])];var U=te(N);return[U.slice(),U.slice(),U.slice()]}}S.drawPick=function(N){N=N||{};var U=this.gl;U.disable(U.CULL_FACE);var Q=G;Q.model=N.model||k,Q.view=N.view||k,Q.projection=N.projection||k,Q.shape=this._field[2].shape,Q.pickId=this.pickId/255,Q.lowerBound=this.bounds[0],Q.upperBound=this.bounds[1],Q.objectOffset=this.objectOffset,Q.permutation=Z;for(var j=0;j<2;++j)for(var J=Q.clipBounds[j],K=0;K<3;++K)J[K]=Math.min(Math.max(this.clipBounds[j][K],-1e8),1e8);var re=B(Q,this);if(re.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=Q,this._vao.bind(),this._vao.draw(U.TRIANGLES,this._vertexCount),j=0;j<3;++j)this.surfaceProject[j]&&(this._pickShader.uniforms.model=re.projections[j],this._pickShader.uniforms.clipBounds=re.clipBounds[j],this._vao.draw(U.TRIANGLES,this._vertexCount));this._vao.unbind()}if(re.showContour){var ne=this._contourPickShader;ne.bind(),ne.uniforms=Q;var se=this._contourVAO;for(se.bind(),K=0;K<3;++K)for(U.lineWidth(this.contourWidth[K]*this.pixelRatio),ne.uniforms.permutation=M[K],j=0;j<this.contourLevels[K].length;++j)this._contourCounts[K][j]&&(ne.uniforms.height=this.contourLevels[K][j],se.draw(U.LINES,this._contourCounts[K][j],this._contourOffsets[K][j]));for(j=0;j<3;++j)for(ne.uniforms.model=re.projections[j],ne.uniforms.clipBounds=re.clipBounds[j],K=0;K<3;++K)if(this.contourProject[j][K]){ne.uniforms.permutation=M[K],U.lineWidth(this.contourWidth[K]*this.pixelRatio);for(var oe=0;oe<this.contourLevels[K].length;++oe)this._contourCounts[K][oe]&&(ne.uniforms.height=this.contourLevels[K][oe],se.draw(U.LINES,this._contourCounts[K][oe],this._contourOffsets[K][oe]))}se.unbind()}},S.pick=function(N){if(!N||N.id!==this.pickId)return null;var U=this._field[2].shape,Q=this._pickResult,j=U[0]*(N.value[0]+(N.value[2]>>4)/16)/255,J=Math.floor(j),K=j-J,re=U[1]*(N.value[1]+(15&N.value[2])/16)/255,ne=Math.floor(re),se=re-ne;J+=1,ne+=1;var oe=Q.position;oe[0]=oe[1]=oe[2]=0;for(var pe=0;pe<2;++pe)for(var ce=pe?K:1-K,ge=0;ge<2;++ge)for(var xe=J+pe,we=ne+ge,be=ce*(ge?se:1-se),Se=0;Se<3;++Se)oe[Se]+=this._field[Se].get(xe,we)*be;for(var fe=this._pickResult.level,me=0;me<3;++me)if(fe[me]=h.le(this.contourLevels[me],oe[me]),fe[me]<0)this.contourLevels[me].length>0&&(fe[me]=0);else if(fe[me]<this.contourLevels[me].length-1){var _e=this.contourLevels[me][fe[me]+1];Math.abs(this.contourLevels[me][fe[me]]-oe[me])>Math.abs(_e-oe[me])&&(fe[me]+=1)}for(Q.index[0]=K<.5?J:J+1,Q.index[1]=se<.5?ne:ne+1,Q.uv[0]=j/U[0],Q.uv[1]=re/U[1],Se=0;Se<3;++Se)Q.dataCoordinate[Se]=this._field[Se].get(Q.index[0],Q.index[1]);return Q},S.padField=function(N,U){var Q=U.shape.slice(),j=N.shape.slice();s.assign(N.lo(1,1).hi(Q[0],Q[1]),U),s.assign(N.lo(1).hi(Q[0],1),U.hi(Q[0],1)),s.assign(N.lo(1,j[1]-1).hi(Q[0],1),U.lo(0,Q[1]-1).hi(Q[0],1)),s.assign(N.lo(0,1).hi(1,Q[1]),U.hi(1)),s.assign(N.lo(j[0]-1,1).hi(1,Q[1]),U.lo(Q[0]-1)),N.set(0,0,U.get(0,0)),N.set(0,j[1]-1,U.get(0,Q[1]-1)),N.set(j[0]-1,0,U.get(Q[0]-1,0)),N.set(j[0]-1,j[1]-1,U.get(Q[0]-1,Q[1]-1))},S.update=function(N){this.objectOffset=(N=N||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in N&&(this.contourWidth=X(N.contourWidth,Number)),"showContour"in N&&(this.showContour=X(N.showContour,Boolean)),"showSurface"in N&&(this.showSurface=!!N.showSurface),"contourTint"in N&&(this.contourTint=X(N.contourTint,Boolean)),"contourColor"in N&&(this.contourColor=D(N.contourColor)),"contourProject"in N&&(this.contourProject=X(N.contourProject,function(Gt){return X(Gt,Boolean)})),"surfaceProject"in N&&(this.surfaceProject=N.surfaceProject),"dynamicColor"in N&&(this.dynamicColor=D(N.dynamicColor)),"dynamicTint"in N&&(this.dynamicTint=X(N.dynamicTint,Number)),"dynamicWidth"in N&&(this.dynamicWidth=X(N.dynamicWidth,Number)),"opacity"in N&&(this.opacity=N.opacity),"opacityscale"in N&&(this.opacityscale=N.opacityscale),"colorBounds"in N&&(this.colorBounds=N.colorBounds),"vertexColor"in N&&(this.vertexColor=N.vertexColor?1:0),"colormap"in N&&this._colorMap.setPixels(this.genColormap(N.colormap,this.opacityscale));var U=N.field||N.coords&&N.coords[2]||null,Q=!1;if(U||(U=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in N||"coords"in N){var j=(U.shape[0]+2)*(U.shape[1]+2);j>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(e.nextPow2(j))),this._field[2]=l(this._field[2].data,[U.shape[0]+2,U.shape[1]+2]),this.padField(this._field[2],U),this.shape=U.shape.slice();for(var J=this.shape,K=0;K<2;++K)this._field[2].size>this._field[K].data.length&&(r.freeFloat(this._field[K].data),this._field[K].data=r.mallocFloat(this._field[2].size)),this._field[K]=l(this._field[K].data,[J[0]+2,J[1]+2]);if(N.coords){var re=N.coords;if(!Array.isArray(re)||3!==re.length)throw new Error("gl-surface: invalid coordinates for x/y");for(K=0;K<2;++K){var ne=re[K];for(ge=0;ge<2;++ge)if(ne.shape[ge]!==J[ge])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[K],ne)}}else if(N.ticks){var se=N.ticks;if(!Array.isArray(se)||2!==se.length)throw new Error("gl-surface: invalid ticks");for(K=0;K<2;++K){var oe=se[K];if((Array.isArray(oe)||oe.length)&&(oe=l(oe)),oe.shape[0]!==J[K])throw new Error("gl-surface: invalid tick length");var pe=l(oe.data,J);pe.stride[K]=oe.stride[0],pe.stride[1^K]=0,this.padField(this._field[K],pe)}}else{for(K=0;K<2;++K){var ce=[0,0];ce[K]=1,this._field[K]=l(this._field[K].data,[J[0]+2,J[1]+2],ce,0)}this._field[0].set(0,0,0);for(var ge=0;ge<J[0];++ge)this._field[0].set(ge+1,0,ge);for(this._field[0].set(J[0]+1,0,J[0]-1),this._field[1].set(0,0,0),ge=0;ge<J[1];++ge)this._field[1].set(0,ge+1,ge);this._field[1].set(0,J[1]+1,J[1]-1)}var xe=this._field,we=l(r.mallocFloat(3*xe[2].size*2),[3,J[0]+2,J[1]+2,2]);for(K=0;K<3;++K)o(we.pick(K),xe[K],"mirror");var be=l(r.mallocFloat(3*xe[2].size),[J[0]+2,J[1]+2,3]);for(K=0;K<J[0]+2;++K)for(ge=0;ge<J[1]+2;++ge){var Se=we.get(0,K,ge,0),fe=we.get(0,K,ge,1),me=we.get(1,K,ge,0),Te=we.get(1,K,ge,1),_e=we.get(2,K,ge,0),Me=we.get(2,K,ge,1),Ie=me*Me-Te*_e,ze=_e*fe-Me*Se,Ve=Se*Te-fe*me,Je=Math.sqrt(Ie*Ie+ze*ze+Ve*Ve);Je<1e-8?(Je=Math.max(Math.abs(Ie),Math.abs(ze),Math.abs(Ve)))<1e-8?(Ve=1,ze=Ie=0,Je=1):Je=1/Je:Je=1/Math.sqrt(Je),be.set(K,ge,0,Ie*Je),be.set(K,ge,1,ze*Je),be.set(K,ge,2,Ve*Je)}r.free(we.data);var De=[1/0,1/0,1/0],Be=[-1/0,-1/0,-1/0],Ze=1/0,Ye=-1/0,st=r.mallocFloat(e.nextPow2((J[0]-1)*(J[1]-1)*6*10)),vt=0,Pt=0;for(K=0;K<J[0]-1;++K)e:for(ge=0;ge<J[1]-1;++ge){for(var Mt=0;Mt<2;++Mt)for(var rt=0;rt<2;++rt)for(var et=0;et<3;++et){var bt=this._field[et].get(1+K+Mt,1+ge+rt);if(isNaN(bt)||!isFinite(bt))continue e}for(et=0;et<6;++et){var Rt=K+L[et][0],Yt=ge+L[et][1],Fe=this._field[0].get(Rt+1,Yt+1),He=this._field[1].get(Rt+1,Yt+1);bt=this._field[2].get(Rt+1,Yt+1),Ie=be.get(Rt+1,Yt+1,0),ze=be.get(Rt+1,Yt+1,1),Ve=be.get(Rt+1,Yt+1,2),N.intensity&&(Oe=N.intensity.get(Rt,Yt));var Oe=N.intensity?N.intensity.get(Rt,Yt):bt+this.objectOffset[2];st[vt++]=Rt,st[vt++]=Yt,st[vt++]=Fe,st[vt++]=He,st[vt++]=bt,st[vt++]=0,st[vt++]=Oe,st[vt++]=Ie,st[vt++]=ze,st[vt++]=Ve,De[0]=Math.min(De[0],Fe+this.objectOffset[0]),De[1]=Math.min(De[1],He+this.objectOffset[1]),De[2]=Math.min(De[2],bt+this.objectOffset[2]),Ze=Math.min(Ze,Oe),Be[0]=Math.max(Be[0],Fe+this.objectOffset[0]),Be[1]=Math.max(Be[1],He+this.objectOffset[1]),Be[2]=Math.max(Be[2],bt+this.objectOffset[2]),Ye=Math.max(Ye,Oe),Pt+=1}}for(N.intensityBounds&&(Ze=+N.intensityBounds[0],Ye=+N.intensityBounds[1]),K=6;K<vt;K+=10)st[K]=(st[K]-Ze)/(Ye-Ze);this._vertexCount=Pt,this._coordinateBuffer.update(st.subarray(0,vt)),r.freeFloat(st),r.free(be.data),this.bounds=[De,Be],this.intensity=N.intensity||this._field[2],this.intensityBounds[0]===Ze&&this.intensityBounds[1]===Ye||(Q=!0),this.intensityBounds=[Ze,Ye]}if("levels"in N){var $e=N.levels;for($e=Array.isArray($e[0])?$e.slice():[[],[],$e],K=0;K<3;++K)$e[K]=$e[K].slice(),$e[K].sort(function(Gt,Kt){return Gt-Kt});for(K=0;K<3;++K)for(ge=0;ge<$e[K].length;++ge)$e[K][ge]-=this.objectOffset[K];e:for(K=0;K<3;++K){if($e[K].length!==this.contourLevels[K].length){Q=!0;break}for(ge=0;ge<$e[K].length;++ge)if($e[K][ge]!==this.contourLevels[K][ge]){Q=!0;break e}}this.contourLevels=$e}if(Q){xe=this._field,J=this.shape;for(var ke=[],Le=0;Le<3;++Le){var Pe=this.contourLevels[Le],Ce=[],Xe=[],at=[0,0,0];for(K=0;K<Pe.length;++K){var pt=c(this._field[Le],Pe[K]);Ce.push(ke.length/5|0),Pt=0;e:for(ge=0;ge<pt.cells.length;++ge){var ut=pt.cells[ge];for(et=0;et<2;++et){var St=pt.positions[ut[et]],ot=St[0],Et=0|Math.floor(ot),Lt=ot-Et,Qe=St[1],mt=0|Math.floor(Qe),It=Qe-mt,jt=!1;t:for(var Zt=0;Zt<3;++Zt){at[Zt]=0;var Re=(Le+Zt+1)%3;for(Mt=0;Mt<2;++Mt){var lt=Mt?Lt:1-Lt;for(Rt=0|Math.min(Math.max(Et+Mt,0),J[0]),rt=0;rt<2;++rt){var _t=rt?It:1-It;if(Yt=0|Math.min(Math.max(mt+rt,0),J[1]),bt=Zt<2?this._field[Re].get(Rt,Yt):(this.intensity.get(Rt,Yt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(bt)||isNaN(bt)){jt=!0;break t}at[Zt]+=lt*_t*bt}}}if(jt){if(et>0){for(var Vt=0;Vt<5;++Vt)ke.pop();Pt-=1}continue e}ke.push(at[0],at[1],St[0],St[1],at[2]),Pt+=1}}Xe.push(Pt)}this._contourOffsets[Le]=Ce,this._contourCounts[Le]=Xe}var nr=r.mallocFloat(ke.length);for(K=0;K<ke.length;++K)nr[K]=ke[K];this._contourBuffer.update(nr),r.freeFloat(nr)}},S.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var N=0;N<3;++N)r.freeFloat(this._field[N].data)},S.highlight=function(N){var U,Q;if(!N)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(U=0;U<3;++U)this.highlightLevel[U]=this.enableHighlight[U]?N.level[U]:-1;for(Q=this.snapToData?N.dataCoordinate:N.position,U=0;U<3;++U)Q[U]-=this.objectOffset[U];if(this.enableDynamic[0]&&Q[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&Q[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&Q[2]!==this.dynamicLevel[2]){for(var j=0,J=this.shape,K=r.mallocFloat(12*J[0]*J[1]),re=0;re<3;++re)if(this.enableDynamic[re]){this.dynamicLevel[re]=Q[re];var pe=this._field[(re+1)%3],ce=this._field[(re+2)%3],ge=c(this._field[re],Q[re]),xe=ge.cells,we=ge.positions;for(this._dynamicOffsets[re]=j,U=0;U<xe.length;++U)for(var be=xe[U],Se=0;Se<2;++Se){var fe=we[be[Se]],me=+fe[0],Te=0|me,_e=0|Math.min(Te+1,J[0]),Me=me-Te,Ie=1-Me,ze=+fe[1],Ve=0|ze,Je=0|Math.min(Ve+1,J[1]),De=ze-Ve,Be=1-De,Ze=Ie*Be,Ye=Ie*De,tt=Me*Be,st=Me*De,vt=Ze*pe.get(Te,Ve)+Ye*pe.get(Te,Je)+tt*pe.get(_e,Ve)+st*pe.get(_e,Je),Pt=Ze*ce.get(Te,Ve)+Ye*ce.get(Te,Je)+tt*ce.get(_e,Ve)+st*ce.get(_e,Je);if(isNaN(vt)||isNaN(Pt)){Se&&(j-=1);break}K[2*j+0]=vt,K[2*j+1]=Pt,j+=1}this._dynamicCounts[re]=j-this._dynamicOffsets[re]}else this.dynamicLevel[re]=NaN,this._dynamicCounts[re]=0;this._dynamicBuffer.update(K.subarray(0,2*j)),r.freeFloat(K)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(m,b,v){"use strict";var e=m("ndarray"),n=m("ndarray-ops"),t=m("typedarray-pool");b.exports=function(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(a||s(_),"number"==typeof arguments[1])return x(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return x(_,0|arguments[1][0],0|arguments[1][1],arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var T=arguments[1],k=i(T)?T:T.raw;if(k)return d(_,k,0|T.width,0|T.height,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(T.shape&&T.data&&T.stride)return w(_,T)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,r=null,u=null;function s(_){a=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],r=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],u=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function i(_){return"undefined"!=typeof HTMLCanvasElement&&_ instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&_ instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&_ instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&_ instanceof ImageData}var l=function(_,T){n.muls(_,T,255)};function c(_,T,k){var L=_.gl,M=L.getParameter(L.MAX_TEXTURE_SIZE);if(T<0||T>M||k<0||k>M)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[T,k],_.bind(),L.texImage2D(L.TEXTURE_2D,0,_.format,T,k,0,_.format,_.type,null),_._mipLevels=[0],_}function f(_,T,k,L,M,O){this.gl=_,this.handle=T,this.format=M,this.type=O,this._shape=[k,L],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var P=this,S=[this._wrapS,this._wrapT];Object.defineProperties(S,[{get:function(){return P._wrapS},set:function(R){return P.wrapS=R}},{get:function(){return P._wrapT},set:function(R){return P.wrapT=R}}]),this._wrapVector=S;var E=[this._shape[0],this._shape[1]];Object.defineProperties(E,[{get:function(){return P._shape[0]},set:function(R){return P.width=R}},{get:function(){return P._shape[1]},set:function(R){return P.height=R}}]),this._shapeVector=E}var g=f.prototype;function h(_,T){return 3===_.length?1===T[2]&&T[1]===_[0]*_[2]&&T[0]===_[2]:1===T[0]&&T[1]===_[0]}function o(_){var T=_.createTexture();return _.bindTexture(_.TEXTURE_2D,T),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),T}function x(_,T,k,L,M){var O=_.getParameter(_.MAX_TEXTURE_SIZE);if(T<0||T>O||k<0||k>O)throw new Error("gl-texture2d: Invalid texture shape");if(M===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var P=o(_);return _.texImage2D(_.TEXTURE_2D,0,L,T,k,0,L,M,null),new f(_,P,T,k,L,M)}function d(_,T,k,L,M,O){var P=o(_);return _.texImage2D(_.TEXTURE_2D,0,M,M,O,T),new f(_,P,k,L,M,O)}function w(_,T){var k=T.dtype,L=T.shape.slice(),M=_.getParameter(_.MAX_TEXTURE_SIZE);if(L[0]<0||L[0]>M||L[1]<0||L[1]>M)throw new Error("gl-texture2d: Invalid texture size");var O=h(L,T.stride.slice()),P=0;"float32"===k?P=_.FLOAT:"float64"===k?(P=_.FLOAT,O=!1,k="float32"):"uint8"===k?P=_.UNSIGNED_BYTE:(P=_.UNSIGNED_BYTE,O=!1,k="uint8");var S,E,R=0;if(2===L.length)R=_.LUMINANCE,T=e(T.data,L=[L[0],L[1],1],[T.stride[0],T.stride[1],1],T.offset);else{if(3!==L.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===L[2])R=_.ALPHA;else if(2===L[2])R=_.LUMINANCE_ALPHA;else if(3===L[2])R=_.RGB;else{if(4!==L[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");R=_.RGBA}}P!==_.FLOAT||_.getExtension("OES_texture_float")||(P=_.UNSIGNED_BYTE,O=!1);var B=T.size;if(O)S=0===T.offset&&T.data.length===B?T.data:T.data.subarray(T.offset,T.offset+B);else{var H=[L[2],L[2]*L[0],1];E=t.malloc(B,k);var V=e(E,L,H,0);"float32"!==k&&"float64"!==k||P!==_.UNSIGNED_BYTE?n.assign(V,T):l(V,T),S=E.subarray(0,B)}var Z=o(_);return _.texImage2D(_.TEXTURE_2D,0,R,L[0],L[1],0,R,P,S),O||t.free(E),new f(_,Z,L[0],L[1],R,P)}Object.defineProperties(g,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var T=this.gl;if(this.type===T.FLOAT&&a.indexOf(_)>=0&&(T.getExtension("OES_texture_float_linear")||(_=T.NEAREST)),r.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var T=this.gl;if(this.type===T.FLOAT&&a.indexOf(_)>=0&&(T.getExtension("OES_texture_float_linear")||(_=T.NEAREST)),r.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var T=this._anisoSamples;if(this._anisoSamples=0|Math.max(_,1),T!==this._anisoSamples){var k=this.gl.getExtension("EXT_texture_filter_anisotropic");k&&this.gl.texParameterf(this.gl.TEXTURE_2D,k.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),u.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),2!==_.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var T=0;T<2;++T)if(u.indexOf(_[T])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var k=this.gl;return this.bind(),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,this._wrapS),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(Array.isArray(_)){if(2!==_.length)throw new Error("gl-texture2d: Invalid texture shape")}else _=[0|_,0|_];return c(this,0|_[0],0|_[1]),[0|_[0],0|_[1]]}},width:{get:function(){return this._shape[0]},set:function(_){return c(this,_|=0,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return c(this,this._shape[0],_|=0),_}}}),g.bind=function(_){var T=this.gl;return void 0!==_&&T.activeTexture(T.TEXTURE0+(0|_)),T.bindTexture(T.TEXTURE_2D,this.handle),void 0!==_?0|_:T.getParameter(T.ACTIVE_TEXTURE)-T.TEXTURE0},g.dispose=function(){this.gl.deleteTexture(this.handle)},g.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),T=0;_>0;++T,_>>>=1)this._mipLevels.indexOf(T)<0&&this._mipLevels.push(T)},g.setPixels=function(_,T,k,L){var M=this.gl;this.bind(),Array.isArray(T)?(L=k,k=0|T[1],T=0|T[0]):(T=T||0,k=k||0),L=L||0;var O=i(_)?_:_.raw;if(O)this._mipLevels.indexOf(L)<0?(M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,this.type,O),this._mipLevels.push(L)):M.texSubImage2D(M.TEXTURE_2D,L,T,k,this.format,this.type,O);else{if(!(_.shape&&_.stride&&_.data))throw new Error("gl-texture2d: Unsupported data type");if(_.shape.length<2||T+_.shape[1]>this._shape[1]>>>L||k+_.shape[0]>this._shape[0]>>>L||T<0||k<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(P,S,E,R,B,H,V,Z){var W=Z.dtype,G=Z.shape.slice();if(G.length<2||G.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var X=0,te=0,D=h(G,Z.stride.slice());if("float32"===W?X=P.FLOAT:"float64"===W?(X=P.FLOAT,D=!1,W="float32"):"uint8"===W?X=P.UNSIGNED_BYTE:(X=P.UNSIGNED_BYTE,D=!1,W="uint8"),2===G.length)te=P.LUMINANCE,Z=e(Z.data,G=[G[0],G[1],1],[Z.stride[0],Z.stride[1],1],Z.offset);else{if(3!==G.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===G[2])te=P.ALPHA;else if(2===G[2])te=P.LUMINANCE_ALPHA;else if(3===G[2])te=P.RGB;else{if(4!==G[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");te=P.RGBA}}if(te!==P.LUMINANCE&&te!==P.ALPHA||B!==P.LUMINANCE&&B!==P.ALPHA||(te=B),te!==B)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var N=Z.size,U=V.indexOf(R)<0;if(U&&V.push(R),X===H&&D)0===Z.offset&&Z.data.length===N?U?P.texImage2D(P.TEXTURE_2D,R,B,G[0],G[1],0,B,H,Z.data):P.texSubImage2D(P.TEXTURE_2D,R,S,E,G[0],G[1],B,H,Z.data):U?P.texImage2D(P.TEXTURE_2D,R,B,G[0],G[1],0,B,H,Z.data.subarray(Z.offset,Z.offset+N)):P.texSubImage2D(P.TEXTURE_2D,R,S,E,G[0],G[1],B,H,Z.data.subarray(Z.offset,Z.offset+N));else{var Q;Q=H===P.FLOAT?t.mallocFloat32(N):t.mallocUint8(N);var j=e(Q,G,[G[2],G[2]*G[0],1]);X===P.FLOAT&&H===P.UNSIGNED_BYTE?l(j,Z):n.assign(j,Z),U?P.texImage2D(P.TEXTURE_2D,R,B,G[0],G[1],0,B,H,Q.subarray(0,N)):P.texSubImage2D(P.TEXTURE_2D,R,S,E,G[0],G[1],B,H,Q.subarray(0,N)),H===P.FLOAT?t.freeFloat32(Q):t.freeUint8(Q)}}(M,T,k,L,this.format,this.type,this._mipLevels,_)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(m,b,v){"use strict";b.exports=function(e,n,t){n?n.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var a=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(t){if(t.length>a)throw new Error("gl-vao: Too many vertex attributes");for(var r=0;r<t.length;++r){var u=t[r];if(u.buffer){var i=u.size||4,l=u.type||e.FLOAT,c=!!u.normalized,f=u.stride||0,g=u.offset||0;u.buffer.bind(),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,i,l,c,f,g)}else{if("number"==typeof u)e.vertexAttrib1f(r,u);else if(1===u.length)e.vertexAttrib1f(r,u[0]);else if(2===u.length)e.vertexAttrib2f(r,u[0],u[1]);else if(3===u.length)e.vertexAttrib3f(r,u[0],u[1],u[2]);else{if(4!==u.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(r,u[0],u[1],u[2],u[3])}e.disableVertexAttribArray(r)}}for(;r<a;++r)e.disableVertexAttribArray(r)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),r=0;r<a;++r)e.disableVertexAttribArray(r)}},{}],148:[function(m,b,v){"use strict";var e=m("./do-bind.js");function n(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}n.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},n.prototype.update=function(t,a,r){this._elements=a,this._attributes=t,this._elementsType=r||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(t,a,r){r=r||0;var u=this.gl;this._elements?u.drawElements(t,a,this._elementsType,r):u.drawArrays(t,r,a)},b.exports=function(t){return new n(t)}},{"./do-bind.js":147}],149:[function(m,b,v){"use strict";var e=m("./do-bind.js");function n(a,r,u,s,i,l){this.location=a,this.dimension=r,this.a=u,this.b=s,this.c=i,this.d=l}function t(a,r,u){this.gl=a,this._ext=r,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=a.UNSIGNED_SHORT}n.prototype.bind=function(a){switch(this.dimension){case 1:a.vertexAttrib1f(this.location,this.a);break;case 2:a.vertexAttrib2f(this.location,this.a,this.b);break;case 3:a.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:a.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},t.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var a=0;a<this._attribs.length;++a)this._attribs[a].bind(this.gl)},t.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},t.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},t.prototype.update=function(a,r,u){if(this.bind(),e(this.gl,r,a),this.unbind(),this._attribs.length=0,a)for(var s=0;s<a.length;++s){var i=a[s];"number"==typeof i?this._attribs.push(new n(s,1,i)):Array.isArray(i)&&this._attribs.push(new n(s,i.length,i[0],i[1],i[2],i[3]))}this._useElements=!!r,this._elementsType=u||this.gl.UNSIGNED_SHORT},t.prototype.draw=function(a,r,u){u=u||0;var s=this.gl;this._useElements?s.drawElements(a,r,this._elementsType,u):s.drawArrays(a,u,r)},b.exports=function(a,r){return new t(a,r,r.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(m,b,v){"use strict";var e=m("./lib/vao-native.js"),n=m("./lib/vao-emulated.js");function t(a){this.bindVertexArrayOES=a.bindVertexArray.bind(a),this.createVertexArrayOES=a.createVertexArray.bind(a),this.deleteVertexArrayOES=a.deleteVertexArray.bind(a)}b.exports=function(a,r,u,s){var i,l=a.createVertexArray?new t(a):a.getExtension("OES_vertex_array_object");return(i=l?e(a,l):n(a)).update(r,u,s),i}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(m,b,v){b.exports=function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e}},{}],152:[function(m,b,v){b.exports=function(a,r){var u=e(a[0],a[1],a[2]),s=e(r[0],r[1],r[2]);n(u,u),n(s,s);var i=t(u,s);return i>1?0:Math.acos(i)};var e=m("./fromValues"),n=m("./normalize"),t=m("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(m,b,v){b.exports=function(e,n){return e[0]=Math.ceil(n[0]),e[1]=Math.ceil(n[1]),e[2]=Math.ceil(n[2]),e}},{}],154:[function(m,b,v){b.exports=function(e){var n=new Float32Array(3);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n}},{}],155:[function(m,b,v){b.exports=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e}},{}],156:[function(m,b,v){b.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(m,b,v){b.exports=function(e,n,t){var a=n[0],r=n[1],u=n[2],s=t[0],i=t[1],l=t[2];return e[0]=r*l-u*i,e[1]=u*s-a*l,e[2]=a*i-r*s,e}},{}],158:[function(m,b,v){b.exports=m("./distance")},{"./distance":159}],159:[function(m,b,v){b.exports=function(e,n){var t=n[0]-e[0],a=n[1]-e[1],r=n[2]-e[2];return Math.sqrt(t*t+a*a+r*r)}},{}],160:[function(m,b,v){b.exports=m("./divide")},{"./divide":161}],161:[function(m,b,v){b.exports=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e}},{}],162:[function(m,b,v){b.exports=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]}},{}],163:[function(m,b,v){b.exports=1e-6},{}],164:[function(m,b,v){b.exports=function(n,t){var a=n[0],r=n[1],u=n[2],s=t[0],i=t[1],l=t[2];return Math.abs(a-s)<=e*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(r-i)<=e*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(u-l)<=e*Math.max(1,Math.abs(u),Math.abs(l))};var e=m("./epsilon")},{"./epsilon":163}],165:[function(m,b,v){b.exports=function(e,n){return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}},{}],166:[function(m,b,v){b.exports=function(e,n){return e[0]=Math.floor(n[0]),e[1]=Math.floor(n[1]),e[2]=Math.floor(n[2]),e}},{}],167:[function(m,b,v){b.exports=function(n,t,a,r,u,s){var i,l;for(t||(t=3),a||(a=0),l=r?Math.min(r*t+a,n.length):n.length,i=a;i<l;i+=t)e[0]=n[i],e[1]=n[i+1],e[2]=n[i+2],u(e,e,s),n[i]=e[0],n[i+1]=e[1],n[i+2]=e[2];return n};var e=m("./create")()},{"./create":156}],168:[function(m,b,v){b.exports=function(e,n,t){var a=new Float32Array(3);return a[0]=e,a[1]=n,a[2]=t,a}},{}],169:[function(m,b,v){b.exports={EPSILON:m("./epsilon"),create:m("./create"),clone:m("./clone"),angle:m("./angle"),fromValues:m("./fromValues"),copy:m("./copy"),set:m("./set"),equals:m("./equals"),exactEquals:m("./exactEquals"),add:m("./add"),subtract:m("./subtract"),sub:m("./sub"),multiply:m("./multiply"),mul:m("./mul"),divide:m("./divide"),div:m("./div"),min:m("./min"),max:m("./max"),floor:m("./floor"),ceil:m("./ceil"),round:m("./round"),scale:m("./scale"),scaleAndAdd:m("./scaleAndAdd"),distance:m("./distance"),dist:m("./dist"),squaredDistance:m("./squaredDistance"),sqrDist:m("./sqrDist"),length:m("./length"),len:m("./len"),squaredLength:m("./squaredLength"),sqrLen:m("./sqrLen"),negate:m("./negate"),inverse:m("./inverse"),normalize:m("./normalize"),dot:m("./dot"),cross:m("./cross"),lerp:m("./lerp"),random:m("./random"),transformMat4:m("./transformMat4"),transformMat3:m("./transformMat3"),transformQuat:m("./transformQuat"),rotateX:m("./rotateX"),rotateY:m("./rotateY"),rotateZ:m("./rotateZ"),forEach:m("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(m,b,v){b.exports=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e}},{}],171:[function(m,b,v){b.exports=m("./length")},{"./length":172}],172:[function(m,b,v){b.exports=function(e){var n=e[0],t=e[1],a=e[2];return Math.sqrt(n*n+t*t+a*a)}},{}],173:[function(m,b,v){b.exports=function(e,n,t,a){var r=n[0],u=n[1],s=n[2];return e[0]=r+a*(t[0]-r),e[1]=u+a*(t[1]-u),e[2]=s+a*(t[2]-s),e}},{}],174:[function(m,b,v){b.exports=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e}},{}],175:[function(m,b,v){b.exports=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e}},{}],176:[function(m,b,v){b.exports=m("./multiply")},{"./multiply":177}],177:[function(m,b,v){b.exports=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e}},{}],178:[function(m,b,v){b.exports=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e}},{}],179:[function(m,b,v){b.exports=function(e,n){var t=n[0],a=n[1],r=n[2],u=t*t+a*a+r*r;return u>0&&(u=1/Math.sqrt(u),e[0]=n[0]*u,e[1]=n[1]*u,e[2]=n[2]*u),e}},{}],180:[function(m,b,v){b.exports=function(e,n){n=n||1;var t=2*Math.random()*Math.PI,a=2*Math.random()-1,r=Math.sqrt(1-a*a)*n;return e[0]=Math.cos(t)*r,e[1]=Math.sin(t)*r,e[2]=a*n,e}},{}],181:[function(m,b,v){b.exports=function(e,n,t,a){var r=t[1],u=t[2],s=n[1]-r,i=n[2]-u,l=Math.sin(a),c=Math.cos(a);return e[0]=n[0],e[1]=r+s*c-i*l,e[2]=u+s*l+i*c,e}},{}],182:[function(m,b,v){b.exports=function(e,n,t,a){var r=t[0],u=t[2],s=n[0]-r,i=n[2]-u,l=Math.sin(a),c=Math.cos(a);return e[0]=r+i*l+s*c,e[1]=n[1],e[2]=u+i*c-s*l,e}},{}],183:[function(m,b,v){b.exports=function(e,n,t,a){var r=t[0],u=t[1],s=n[0]-r,i=n[1]-u,l=Math.sin(a),c=Math.cos(a);return e[0]=r+s*c-i*l,e[1]=u+s*l+i*c,e[2]=n[2],e}},{}],184:[function(m,b,v){b.exports=function(e,n){return e[0]=Math.round(n[0]),e[1]=Math.round(n[1]),e[2]=Math.round(n[2]),e}},{}],185:[function(m,b,v){b.exports=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e}},{}],186:[function(m,b,v){b.exports=function(e,n,t,a){return e[0]=n[0]+t[0]*a,e[1]=n[1]+t[1]*a,e[2]=n[2]+t[2]*a,e}},{}],187:[function(m,b,v){b.exports=function(e,n,t,a){return e[0]=n,e[1]=t,e[2]=a,e}},{}],188:[function(m,b,v){b.exports=m("./squaredDistance")},{"./squaredDistance":190}],189:[function(m,b,v){b.exports=m("./squaredLength")},{"./squaredLength":191}],190:[function(m,b,v){b.exports=function(e,n){var t=n[0]-e[0],a=n[1]-e[1],r=n[2]-e[2];return t*t+a*a+r*r}},{}],191:[function(m,b,v){b.exports=function(e){var n=e[0],t=e[1],a=e[2];return n*n+t*t+a*a}},{}],192:[function(m,b,v){b.exports=m("./subtract")},{"./subtract":193}],193:[function(m,b,v){b.exports=function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e}},{}],194:[function(m,b,v){b.exports=function(e,n,t){var a=n[0],r=n[1],u=n[2];return e[0]=a*t[0]+r*t[3]+u*t[6],e[1]=a*t[1]+r*t[4]+u*t[7],e[2]=a*t[2]+r*t[5]+u*t[8],e}},{}],195:[function(m,b,v){b.exports=function(e,n,t){var a=n[0],r=n[1],u=n[2],s=t[3]*a+t[7]*r+t[11]*u+t[15];return e[0]=(t[0]*a+t[4]*r+t[8]*u+t[12])/(s=s||1),e[1]=(t[1]*a+t[5]*r+t[9]*u+t[13])/s,e[2]=(t[2]*a+t[6]*r+t[10]*u+t[14])/s,e}},{}],196:[function(m,b,v){b.exports=function(e,n,t){var a=n[0],r=n[1],u=n[2],s=t[0],i=t[1],l=t[2],c=t[3],f=c*a+i*u-l*r,g=c*r+l*a-s*u,h=c*u+s*r-i*a,o=-s*a-i*r-l*u;return e[0]=f*c+o*-s+g*-l-h*-i,e[1]=g*c+o*-i+h*-s-f*-l,e[2]=h*c+o*-l+f*-i-g*-s,e}},{}],197:[function(m,b,v){b.exports=function(e,n,t){return e[0]=n[0]+t[0],e[1]=n[1]+t[1],e[2]=n[2]+t[2],e[3]=n[3]+t[3],e}},{}],198:[function(m,b,v){b.exports=function(e){var n=new Float32Array(4);return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}},{}],199:[function(m,b,v){b.exports=function(e,n){return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e}},{}],200:[function(m,b,v){b.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(m,b,v){b.exports=function(e,n){var t=n[0]-e[0],a=n[1]-e[1],r=n[2]-e[2],u=n[3]-e[3];return Math.sqrt(t*t+a*a+r*r+u*u)}},{}],202:[function(m,b,v){b.exports=function(e,n,t){return e[0]=n[0]/t[0],e[1]=n[1]/t[1],e[2]=n[2]/t[2],e[3]=n[3]/t[3],e}},{}],203:[function(m,b,v){b.exports=function(e,n){return e[0]*n[0]+e[1]*n[1]+e[2]*n[2]+e[3]*n[3]}},{}],204:[function(m,b,v){b.exports=function(e,n,t,a){var r=new Float32Array(4);return r[0]=e,r[1]=n,r[2]=t,r[3]=a,r}},{}],205:[function(m,b,v){b.exports={create:m("./create"),clone:m("./clone"),fromValues:m("./fromValues"),copy:m("./copy"),set:m("./set"),add:m("./add"),subtract:m("./subtract"),multiply:m("./multiply"),divide:m("./divide"),min:m("./min"),max:m("./max"),scale:m("./scale"),scaleAndAdd:m("./scaleAndAdd"),distance:m("./distance"),squaredDistance:m("./squaredDistance"),length:m("./length"),squaredLength:m("./squaredLength"),negate:m("./negate"),inverse:m("./inverse"),normalize:m("./normalize"),dot:m("./dot"),lerp:m("./lerp"),random:m("./random"),transformMat4:m("./transformMat4"),transformQuat:m("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(m,b,v){b.exports=function(e,n){return e[0]=1/n[0],e[1]=1/n[1],e[2]=1/n[2],e[3]=1/n[3],e}},{}],207:[function(m,b,v){b.exports=function(e){var n=e[0],t=e[1],a=e[2],r=e[3];return Math.sqrt(n*n+t*t+a*a+r*r)}},{}],208:[function(m,b,v){b.exports=function(e,n,t,a){var r=n[0],u=n[1],s=n[2],i=n[3];return e[0]=r+a*(t[0]-r),e[1]=u+a*(t[1]-u),e[2]=s+a*(t[2]-s),e[3]=i+a*(t[3]-i),e}},{}],209:[function(m,b,v){b.exports=function(e,n,t){return e[0]=Math.max(n[0],t[0]),e[1]=Math.max(n[1],t[1]),e[2]=Math.max(n[2],t[2]),e[3]=Math.max(n[3],t[3]),e}},{}],210:[function(m,b,v){b.exports=function(e,n,t){return e[0]=Math.min(n[0],t[0]),e[1]=Math.min(n[1],t[1]),e[2]=Math.min(n[2],t[2]),e[3]=Math.min(n[3],t[3]),e}},{}],211:[function(m,b,v){b.exports=function(e,n,t){return e[0]=n[0]*t[0],e[1]=n[1]*t[1],e[2]=n[2]*t[2],e[3]=n[3]*t[3],e}},{}],212:[function(m,b,v){b.exports=function(e,n){return e[0]=-n[0],e[1]=-n[1],e[2]=-n[2],e[3]=-n[3],e}},{}],213:[function(m,b,v){b.exports=function(e,n){var t=n[0],a=n[1],r=n[2],u=n[3],s=t*t+a*a+r*r+u*u;return s>0&&(s=1/Math.sqrt(s),e[0]=t*s,e[1]=a*s,e[2]=r*s,e[3]=u*s),e}},{}],214:[function(m,b,v){var e=m("./normalize"),n=m("./scale");b.exports=function(t,a){return a=a||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),e(t,t),n(t,t,a),t}},{"./normalize":213,"./scale":215}],215:[function(m,b,v){b.exports=function(e,n,t){return e[0]=n[0]*t,e[1]=n[1]*t,e[2]=n[2]*t,e[3]=n[3]*t,e}},{}],216:[function(m,b,v){b.exports=function(e,n,t,a){return e[0]=n[0]+t[0]*a,e[1]=n[1]+t[1]*a,e[2]=n[2]+t[2]*a,e[3]=n[3]+t[3]*a,e}},{}],217:[function(m,b,v){b.exports=function(e,n,t,a,r){return e[0]=n,e[1]=t,e[2]=a,e[3]=r,e}},{}],218:[function(m,b,v){b.exports=function(e,n){var t=n[0]-e[0],a=n[1]-e[1],r=n[2]-e[2],u=n[3]-e[3];return t*t+a*a+r*r+u*u}},{}],219:[function(m,b,v){b.exports=function(e){var n=e[0],t=e[1],a=e[2],r=e[3];return n*n+t*t+a*a+r*r}},{}],220:[function(m,b,v){b.exports=function(e,n,t){return e[0]=n[0]-t[0],e[1]=n[1]-t[1],e[2]=n[2]-t[2],e[3]=n[3]-t[3],e}},{}],221:[function(m,b,v){b.exports=function(e,n,t){var a=n[0],r=n[1],u=n[2],s=n[3];return e[0]=t[0]*a+t[4]*r+t[8]*u+t[12]*s,e[1]=t[1]*a+t[5]*r+t[9]*u+t[13]*s,e[2]=t[2]*a+t[6]*r+t[10]*u+t[14]*s,e[3]=t[3]*a+t[7]*r+t[11]*u+t[15]*s,e}},{}],222:[function(m,b,v){b.exports=function(e,n,t){var a=n[0],r=n[1],u=n[2],s=t[0],i=t[1],l=t[2],c=t[3],f=c*a+i*u-l*r,g=c*r+l*a-s*u,h=c*u+s*r-i*a,o=-s*a-i*r-l*u;return e[0]=f*c+o*-s+g*-l-h*-i,e[1]=g*c+o*-i+h*-s-f*-l,e[2]=h*c+o*-l+f*-i-g*-s,e[3]=n[3],e}},{}],223:[function(m,b,v){var e=m("glsl-tokenizer"),n=m("atob-lite");b.exports=function(t){for(var a=Array.isArray(t)?t:e(t),r=0;r<a.length;r++){var u=a[r];if("preprocessor"===u.type){var s=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(s&&s[2]){var l=s[2];return(s[1]?n(l):l).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(m,b,v){b.exports=function(s){var i,l,c,f=0,g=0,h=999,o=[],x=[],d=1,w=0,_=0,T=!1,k=!1,L="",M=t,O=e;"300 es"===(s=s||{}).version&&(M=r,O=a);var P={},S={};for(f=0;f<M.length;f++)P[M[f]]=!0;for(f=0;f<O.length;f++)S[O[f]]=!0;return function(N){return x=[],null!==N?function(U){var Q;for(f=0,U.toString&&(U=U.toString()),L+=U.replace(/\r\n/g,"\n"),c=L.length;i=L[f],f<c;){switch(Q=f,h){case 0:f="/"===i&&"*"===l?(o.push(i),E(o.join("")),h=999,f+1):(o.push(i),l=i,f+1);break;case 1:case 2:f="\r"!==i&&"\n"!==i||"\\"===l?(o.push(i),l=i,f+1):(E(o.join("")),h=999,f);break;case 3:f=Z();break;case 4:f="."===i||/[eE]/.test(i)?(o.push(i),h=5,l=i,f+1):"x"===i&&1===o.length&&"0"===o[0]?(h=11,o.push(i),l=i,f+1):/[^\d]/.test(i)?(E(o.join("")),h=999,f):(o.push(i),l=i,f+1);break;case 11:f=/[^a-fA-F0-9]/.test(i)?(E(o.join("")),h=999,f):(o.push(i),l=i,f+1);break;case 5:"f"===i&&(o.push(i),l=i,f+=1),f=/[eE]/.test(i)?(o.push(i),l=i,f+1):("-"!==i&&"+"!==i||!/[eE]/.test(l))&&/[^\d]/.test(i)?(E(o.join("")),h=999,f):(o.push(i),l=i,f+1);break;case 9999:f=D();break;case 9:f=/[^\s]/g.test(i)?(E(o.join("")),h=999,f):(o.push(i),l=i,f+1);break;case 999:o=o.length?[]:o,f="/"===l&&"*"===i?(_=g+f-1,h=0,l=i,f+1):"/"===l&&"/"===i?(_=g+f-1,h=1,l=i,f+1):"#"===i?(h=2,_=g+f,f):/\s/.test(i)?(h=9,_=g+f,f):(T=/\d/.test(i),k=/[^\w_]/.test(i),_=g+f,h=T?4:k?3:9999,f)}Q!==f&&("\n"===L[Q]?(w=0,++d):++w)}return g+=f,L=L.slice(f),x}(N):(o.length&&E(o.join("")),h=10,E("(eof)"),x)};function E(N){N.length&&x.push({type:u[h],data:N,position:_,line:d,column:w})}function Z(){if("."===l&&/\d/.test(i))return h=5,f;if("/"===l&&"*"===i)return h=0,f;if("/"===l&&"/"===i)return h=1,f;if("."===i&&o.length){for(;W(o););return h=5,f}if(";"===i||")"===i||"("===i){if(o.length)for(;W(o););return E(i),h=999,f+1}var N=2===o.length&&"="!==i;if(/[\w_\d\s]/.test(i)||N){for(;W(o););return h=999,f}return o.push(i),l=i,f+1}function W(N){for(var U,Q,j=0;;){if(U=n.indexOf(N.slice(0,N.length+j).join("")),Q=n[U],-1===U){if(j--+N.length>0)continue;Q=N.slice(0,1).join("")}return E(Q),_+=Q.length,(o=o.slice(Q.length)).length}}function D(){if(/[^\d\w_]/.test(i)){var N=o.join("");return h=S[N]?8:P[N]?7:6,E(o.join("")),h=999,f}return o.push(i),l=i,f+1}};var e=m("./lib/literals"),n=m("./lib/operators"),t=m("./lib/builtins"),a=m("./lib/literals-300es"),r=m("./lib/builtins-300es"),u=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(m,b,v){var e=m("./builtins");e=e.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),b.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(m,b,v){b.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(m,b,v){var e=m("./literals");b.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(m,b,v){b.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(m,b,v){b.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(m,b,v){var e=m("./index");b.exports=function(n,t){var a=e(t),r=[];return(r=r.concat(a(n))).concat(a(null))}},{"./index":224}],231:[function(m,b,v){b.exports=function(e){"string"==typeof e&&(e=[e]);for(var n=[].slice.call(arguments,1),t=[],a=0;a<e.length-1;a++)t.push(e[a],n[a]||"");return t.push(e[a]),t.join("")}},{}],232:[function(m,b,v){"use strict";var e=m("is-browser");b.exports=e&&function(){var n=!1;try{var t=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(a){n=!1}return n}()},{"is-browser":236}],233:[function(m,b,v){"use strict";b.exports=function(l,c){var f=l.length;if(0===f)throw new Error("Must have at least d+1 points");var g=l[0].length;if(f<=g)throw new Error("Must input at least d+1 points");var h=l.slice(0,g+1),o=e.apply(void 0,h);if(0===o)throw new Error("Input not in general position");for(var x=new Array(g+1),d=0;d<=g;++d)x[d]=d;o<0&&(x[0]=1,x[1]=0);var w=new t(x,new Array(g+1),!1),_=w.adjacent,T=new Array(g+2);for(d=0;d<=g;++d){for(var k=x.slice(),L=0;L<=g;++L)L===d&&(k[L]=-1);var M=k[0];k[0]=k[1],k[1]=M;var O=new t(k,new Array(g+1),!0);_[d]=O,T[d]=O}for(T[g+1]=w,d=0;d<=g;++d){k=_[d].vertices;var P=_[d].adjacent;for(L=0;L<=g;++L){var S=k[L];if(S<0)P[L]=w;else for(var E=0;E<=g;++E)_[E].vertices.indexOf(S)<0&&(P[L]=_[E])}}var R=new s(g,h,T),B=!!c;for(d=g+1;d<f;++d)R.insert(l[d],B);return R.boundary()};var e=m("robust-orientation"),n=m("simplicial-complex").compareCells;function t(l,c,f){this.vertices=l,this.adjacent=c,this.boundary=f,this.lastVisited=-1}function a(l,c,f){this.vertices=l,this.cell=c,this.index=f}function r(l,c){return n(l.vertices,c.vertices)}t.prototype.flip=function(){var l=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=l;var c=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=c};var u=[];function s(l,c,f){this.dimension=l,this.vertices=c,this.simplices=f,this.interior=f.filter(function(x){return!x.boundary}),this.tuple=new Array(l+1);for(var g=0;g<=l;++g)this.tuple[g]=this.vertices[g];var h,x,o=u[l];o||(o=u[l]=((h=e[l+1])||(h=e),x=h,function(){return x.apply(this,this.tuple)})),this.orient=o}var i=s.prototype;i.handleBoundaryDegeneracy=function(l,c){var f=this.dimension,g=this.vertices.length-1,h=this.tuple,o=this.vertices,x=[l];for(l.lastVisited=-g;x.length>0;)for(var d=(l=x.pop()).adjacent,w=0;w<=f;++w){var _=d[w];if(_.boundary&&!(_.lastVisited<=-g)){for(var T=_.vertices,k=0;k<=f;++k){var L=T[k];h[k]=L<0?c:o[L]}var M=this.orient();if(M>0)return _;_.lastVisited=-g,0===M&&x.push(_)}}return null},i.walk=function(l,c){var f=this.vertices.length-1,g=this.dimension,h=this.vertices,o=this.tuple,x=c?this.interior.length*Math.random()|0:this.interior.length-1,d=this.interior[x];e:for(;!d.boundary;){for(var w=d.vertices,_=d.adjacent,T=0;T<=g;++T)o[T]=h[w[T]];for(d.lastVisited=f,T=0;T<=g;++T){var k=_[T];if(!(k.lastVisited>=f)){var L=o[T];o[T]=l;var M=this.orient();if(o[T]=L,M<0){d=k;continue e}k.lastVisited=k.boundary?-f:f}}return}return d},i.addPeaks=function(l,c){var f=this.vertices.length-1,g=this.dimension,h=this.vertices,o=this.tuple,x=this.interior,d=this.simplices,w=[c];c.lastVisited=f,c.vertices[c.vertices.indexOf(-1)]=f,c.boundary=!1,x.push(c);for(var _=[];w.length>0;){var T=(c=w.pop()).vertices,k=c.adjacent,L=T.indexOf(f);if(!(L<0))for(var M=0;M<=g;++M)if(M!==L){var O=k[M];if(O.boundary&&!(O.lastVisited>=f)){var P=O.vertices;if(O.lastVisited!==-f){for(var S=0,E=0;E<=g;++E)P[E]<0?(S=E,o[E]=l):o[E]=h[P[E]];if(this.orient()>0){P[S]=f,O.boundary=!1,x.push(O),w.push(O),O.lastVisited=f;continue}O.lastVisited=-f}var R=O.adjacent,B=T.slice(),H=k.slice(),V=new t(B,H,!0);d.push(V);var Z=R.indexOf(c);if(!(Z<0))for(R[Z]=V,H[L]=O,B[M]=-1,H[M]=c,k[M]=V,V.flip(),E=0;E<=g;++E){var W=B[E];if(!(W<0||W===f)){for(var G=new Array(g-1),X=0,te=0;te<=g;++te){var D=B[te];D<0||te===E||(G[X++]=D)}_.push(new a(G,V,E))}}}}}for(_.sort(r),M=0;M+1<_.length;M+=2){var N=_[M],U=_[M+1];N.index<0||U.index<0||(N.cell.adjacent[N.index]=U.cell,U.cell.adjacent[U.index]=N.cell)}},i.insert=function(l,c){var f=this.vertices;f.push(l);var g=this.walk(l,c);if(g){for(var h=this.dimension,o=this.tuple,x=0;x<=h;++x){var d=g.vertices[x];o[x]=d<0?l:f[d]}var w=this.orient(o);w<0||(0!==w||(g=this.handleBoundaryDegeneracy(g,l)))&&this.addPeaks(l,g)}},i.boundary=function(){for(var l=this.dimension,c=[],f=this.simplices,g=f.length,h=0;h<g;++h){var o=f[h];if(o.boundary){for(var x=new Array(l),d=o.vertices,w=0,_=0,T=0;T<=l;++T)d[T]>=0?x[w++]=d[T]:_=1&T;if(_===(1&l)){var k=x[0];x[0]=x[1],x[1]=k}c.push(x)}}return c}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(m,b,v){"use strict";var e=m("binary-search-bounds");function n(w,_,T,k,L){this.mid=w,this.left=_,this.right=T,this.leftPoints=k,this.rightPoints=L,this.count=(_?_.count:0)+(T?T.count:0)+k.length}b.exports=function(w){return new x(w&&0!==w.length?o(w):null)};var t=n.prototype;function a(w,_){w.mid=_.mid,w.left=_.left,w.right=_.right,w.leftPoints=_.leftPoints,w.rightPoints=_.rightPoints,w.count=_.count}function r(w,_){var T=o(_);w.mid=T.mid,w.left=T.left,w.right=T.right,w.leftPoints=T.leftPoints,w.rightPoints=T.rightPoints,w.count=T.count}function u(w,_){var T=w.intervals([]);T.push(_),r(w,T)}function s(w,_){var T=w.intervals([]),k=T.indexOf(_);return k<0?0:(T.splice(k,1),r(w,T),1)}function i(w,_,T){for(var k=0;k<w.length&&w[k][0]<=_;++k){var L=T(w[k]);if(L)return L}}function l(w,_,T){for(var k=w.length-1;k>=0&&w[k][1]>=_;--k){var L=T(w[k]);if(L)return L}}function c(w,_){for(var T=0;T<w.length;++T){var k=_(w[T]);if(k)return k}}function f(w,_){return w-_}function g(w,_){return w[0]-_[0]||w[1]-_[1]}function h(w,_){return w[1]-_[1]||w[0]-_[0]}function o(w){if(0===w.length)return null;for(var _=[],T=0;T<w.length;++T)_.push(w[T][0],w[T][1]);_.sort(f);var k=_[_.length>>1],L=[],M=[],O=[];for(T=0;T<w.length;++T){var P=w[T];P[1]<k?L.push(P):k<P[0]?M.push(P):O.push(P)}var S=O,E=O.slice();return S.sort(g),E.sort(h),new n(k,o(L),o(M),S,E)}function x(w){this.root=w}t.intervals=function(w){return w.push.apply(w,this.leftPoints),this.left&&this.left.intervals(w),this.right&&this.right.intervals(w),w},t.insert=function(w){var _=this.count-this.leftPoints.length;if(this.count+=1,w[1]<this.mid)this.left?4*(this.left.count+1)>3*(_+1)?u(this,w):this.left.insert(w):this.left=o([w]);else if(w[0]>this.mid)this.right?4*(this.right.count+1)>3*(_+1)?u(this,w):this.right.insert(w):this.right=o([w]);else{var T=e.ge(this.leftPoints,w,g),k=e.ge(this.rightPoints,w,h);this.leftPoints.splice(T,0,w),this.rightPoints.splice(k,0,w)}},t.remove=function(w){var _=this.count-this.leftPoints;if(w[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(_-1)?s(this,w):2===(M=this.left.remove(w))?(this.left=null,this.count-=1,1):(1===M&&(this.count-=1),M):0;if(w[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(_-1)?s(this,w):2===(M=this.right.remove(w))?(this.right=null,this.count-=1,1):(1===M&&(this.count-=1),M):0;if(1===this.count)return this.leftPoints[0]===w?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===w){if(this.left&&this.right){for(var T=this,k=this.left;k.right;)T=k,k=k.right;if(T===this)k.right=this.right;else{var L=this.left,M=this.right;T.count-=k.count,T.right=k.left,k.left=L,k.right=M}a(this,k),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else a(this,this.left?this.left:this.right);return 1}for(L=e.ge(this.leftPoints,w,g);L<this.leftPoints.length&&this.leftPoints[L][0]===w[0];++L)if(this.leftPoints[L]===w)for(this.count-=1,this.leftPoints.splice(L,1),M=e.ge(this.rightPoints,w,h);M<this.rightPoints.length&&this.rightPoints[M][1]===w[1];++M)if(this.rightPoints[M]===w)return this.rightPoints.splice(M,1),1;return 0},t.queryPoint=function(w,_){return w<this.mid?this.left&&(T=this.left.queryPoint(w,_))?T:i(this.leftPoints,w,_):w>this.mid?this.right&&(T=this.right.queryPoint(w,_))?T:l(this.rightPoints,w,_):c(this.leftPoints,_);var T},t.queryInterval=function(w,_,T){var k;return w<this.mid&&this.left&&(k=this.left.queryInterval(w,_,T))||_>this.mid&&this.right&&(k=this.right.queryInterval(w,_,T))?k:_<this.mid?i(this.leftPoints,_,T):w>this.mid?l(this.rightPoints,w,T):c(this.leftPoints,T)};var d=x.prototype;d.insert=function(w){this.root?this.root.insert(w):this.root=new n(w[0],null,null,[w],[w])},d.remove=function(w){if(this.root){var _=this.root.remove(w);return 2===_&&(this.root=null),0!==_}return!1},d.queryPoint=function(w,_){if(this.root)return this.root.queryPoint(w,_)},d.queryInterval=function(w,_,T){if(w<=_&&this.root)return this.root.queryInterval(w,_,T)},Object.defineProperty(d,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(d,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(m,b,v){"use strict";b.exports=function(e){for(var n=new Array(e),t=0;t<e;++t)n[t]=t;return n}},{}],236:[function(m,b,v){b.exports=!0},{}],237:[function(m,b,v){function e(n){return!!n.constructor&&"function"==typeof n.constructor.isBuffer&&n.constructor.isBuffer(n)}b.exports=function(n){return null!=n&&(e(n)||"function"==typeof(t=n).readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))||!!n._isBuffer);var t}},{}],238:[function(m,b,v){"use strict";b.exports=t,b.exports.isMobile=t,b.exports.default=t;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function t(a){a||(a={});var r=a.ua;if(r||"undefined"==typeof navigator||(r=navigator.userAgent),r&&r.headers&&"string"==typeof r.headers["user-agent"]&&(r=r.headers["user-agent"]),"string"!=typeof r)return!1;var u=a.tablet?n.test(r):e.test(r);return!u&&a.tablet&&a.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==r.indexOf("Macintosh")&&-1!==r.indexOf("Safari")&&(u=!0),u}},{}],239:[function(m,b,v){"use strict";b.exports=function(e){for(var n,t=e.length,a=0;a<t;a++)if(((n=e.charCodeAt(a))<9||n>13)&&32!==n&&133!==n&&160!==n&&5760!==n&&6158!==n&&(n<8192||n>8205)&&8232!==n&&8233!==n&&8239!==n&&8287!==n&&8288!==n&&12288!==n&&65279!==n)return!1;return!0}},{}],240:[function(m,b,v){b.exports=function(e,n,t){return e*(1-t)+n*t}},{}],241:[function(m,b,v){var e=m("./normalize"),n=m("gl-mat4/create"),t=m("gl-mat4/clone"),a=m("gl-mat4/determinant"),r=m("gl-mat4/invert"),u=m("gl-mat4/transpose"),s={length:m("gl-vec3/length"),normalize:m("gl-vec3/normalize"),dot:m("gl-vec3/dot"),cross:m("gl-vec3/cross")},i=n(),l=n(),c=[0,0,0,0],f=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];function h(o,x,d,w,_){o[0]=x[0]*w+d[0]*_,o[1]=x[1]*w+d[1]*_,o[2]=x[2]*w+d[2]*_}b.exports=function(o,x,d,w,_,T){if(x||(x=[0,0,0]),d||(d=[0,0,0]),w||(w=[0,0,0]),_||(_=[0,0,0,1]),T||(T=[0,0,0,1]),!e(i,o)||(t(l,i),l[3]=0,l[7]=0,l[11]=0,l[15]=1,Math.abs(a(l)<1e-8)))return!1;var k,L,M,O,P,S,E,te,D,R=i[3],B=i[7],H=i[11],V=i[12],Z=i[13],W=i[14],G=i[15];if(0!==R||0!==B||0!==H){if(c[0]=R,c[1]=B,c[2]=H,c[3]=G,!r(l,l))return!1;u(l,l),O=(L=c)[0],(k=_)[0]=(M=l)[0]*O+M[4]*(P=L[1])+M[8]*(S=L[2])+M[12]*(E=L[3]),k[1]=M[1]*O+M[5]*P+M[9]*S+M[13]*E,k[2]=M[2]*O+M[6]*P+M[10]*S+M[14]*E,k[3]=M[3]*O+M[7]*P+M[11]*S+M[15]*E}else _[0]=_[1]=_[2]=0,_[3]=1;if(x[0]=V,x[1]=Z,x[2]=W,(te=f)[0][0]=(D=i)[0],te[0][1]=D[1],te[0][2]=D[2],te[1][0]=D[4],te[1][1]=D[5],te[1][2]=D[6],te[2][0]=D[8],te[2][1]=D[9],te[2][2]=D[10],d[0]=s.length(f[0]),s.normalize(f[0],f[0]),w[0]=s.dot(f[0],f[1]),h(f[1],f[1],f[0],1,-w[0]),d[1]=s.length(f[1]),s.normalize(f[1],f[1]),w[0]/=d[1],w[1]=s.dot(f[0],f[2]),h(f[2],f[2],f[0],1,-w[1]),w[2]=s.dot(f[1],f[2]),h(f[2],f[2],f[1],1,-w[2]),d[2]=s.length(f[2]),s.normalize(f[2],f[2]),w[1]/=d[2],w[2]/=d[2],s.cross(g,f[1],f[2]),s.dot(f[0],g)<0)for(var X=0;X<3;X++)d[X]*=-1,f[X][0]*=-1,f[X][1]*=-1,f[X][2]*=-1;return T[0]=.5*Math.sqrt(Math.max(1+f[0][0]-f[1][1]-f[2][2],0)),T[1]=.5*Math.sqrt(Math.max(1-f[0][0]+f[1][1]-f[2][2],0)),T[2]=.5*Math.sqrt(Math.max(1-f[0][0]-f[1][1]+f[2][2],0)),T[3]=.5*Math.sqrt(Math.max(1+f[0][0]+f[1][1]+f[2][2],0)),f[2][1]>f[1][2]&&(T[0]=-T[0]),f[0][2]>f[2][0]&&(T[1]=-T[1]),f[1][0]>f[0][1]&&(T[2]=-T[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(m,b,v){b.exports=function(e,n){var t=n[15];if(0===t)return!1;for(var a=1/t,r=0;r<16;r++)e[r]=n[r]*a;return!0}},{}],243:[function(m,b,v){var e=m("gl-vec3/lerp"),n=m("mat4-recompose"),t=m("mat4-decompose"),a=m("gl-mat4/determinant"),r=m("quat-slerp"),u=l(),s=l(),i=l();function l(){return{translate:c(),scale:c(1),skew:c(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function c(f){return[f||0,f||0,f||0]}b.exports=function(f,g,h,o){if(0===a(g)||0===a(h))return!1;var x=t(g,u.translate,u.scale,u.skew,u.perspective,u.quaternion),d=t(h,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!(!x||!d||(e(i.translate,u.translate,s.translate,o),e(i.skew,u.skew,s.skew,o),e(i.scale,u.scale,s.scale,o),e(i.perspective,u.perspective,s.perspective,o),r(i.quaternion,u.quaternion,s.quaternion,o),n(f,i.translate,i.scale,i.skew,i.perspective,i.quaternion),0))}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(m,b,v){var e={identity:m("gl-mat4/identity"),translate:m("gl-mat4/translate"),multiply:m("gl-mat4/multiply"),create:m("gl-mat4/create"),scale:m("gl-mat4/scale"),fromRotationTranslation:m("gl-mat4/fromRotationTranslation")},n=(e.create(),e.create());b.exports=function(t,a,r,u,s,i){return e.identity(t),e.fromRotationTranslation(t,i,a),t[3]=s[0],t[7]=s[1],t[11]=s[2],t[15]=s[3],e.identity(n),0!==u[2]&&(n[9]=u[2],e.multiply(t,t,n)),0!==u[1]&&(n[9]=0,n[8]=u[1],e.multiply(t,t,n)),0!==u[0]&&(n[8]=0,n[4]=u[0],e.multiply(t,t,n)),e.scale(t,t,r),t}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(m,b,v){"use strict";var e=m("binary-search-bounds"),n=m("mat4-interpolate"),t=m("gl-mat4/invert"),a=m("gl-mat4/rotateX"),r=m("gl-mat4/rotateY"),u=m("gl-mat4/rotateZ"),s=m("gl-mat4/lookAt"),i=m("gl-mat4/translate"),l=(m("gl-mat4/scale"),m("gl-vec3/normalize")),c=[0,0,0];function f(o){this._components=o.slice(),this._time=[0],this.prevMatrix=o.slice(),this.nextMatrix=o.slice(),this.computedMatrix=o.slice(),this.computedInverse=o.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}b.exports=function(o){return new f((o=o||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var g=f.prototype;g.recalcMatrix=function(o){var x=this._time,d=e.le(x,o),w=this.computedMatrix;if(!(d<0)){var _=this._components;if(d===x.length-1)for(var T=16*d,k=0;k<16;++k)w[k]=_[T++];else{var L=x[d+1]-x[d],M=(T=16*d,this.prevMatrix),O=!0;for(k=0;k<16;++k)M[k]=_[T++];var P=this.nextMatrix;for(k=0;k<16;++k)P[k]=_[T++],O=O&&M[k]===P[k];if(L<1e-6||O)for(k=0;k<16;++k)w[k]=M[k];else n(w,M,P,(o-x[d])/L)}var S=this.computedUp;S[0]=w[1],S[1]=w[5],S[2]=w[9],l(S,S);var E=this.computedInverse;t(E,w);var R=this.computedEye,B=E[15];R[0]=E[12]/B,R[1]=E[13]/B,R[2]=E[14]/B;var H=this.computedCenter,V=Math.exp(this.computedRadius[0]);for(k=0;k<3;++k)H[k]=R[k]-w[2+4*k]*V}},g.idle=function(o){if(!(o<this.lastT())){for(var x=this._components,d=x.length-16,w=0;w<16;++w)x.push(x[d++]);this._time.push(o)}},g.flush=function(o){var x=e.gt(this._time,o)-2;x<0||(this._time.splice(0,x),this._components.splice(0,16*x))},g.lastT=function(){return this._time[this._time.length-1]},g.lookAt=function(o,x,d,w){this.recalcMatrix(o),this.setMatrix(o,s(this.computedMatrix,x=x||this.computedEye,d=d||c,w=w||this.computedUp));for(var _=0,T=0;T<3;++T)_+=Math.pow(d[T]-x[T],2);_=Math.log(Math.sqrt(_)),this.computedRadius[0]=_},g.rotate=function(o,x,d,w){this.recalcMatrix(o);var _=this.computedInverse;x&&r(_,_,x),d&&a(_,_,d),w&&u(_,_,w),this.setMatrix(o,t(this.computedMatrix,_))};var h=[0,0,0];g.pan=function(o,x,d,w){h[0]=-(x||0),h[1]=-(d||0),h[2]=-(w||0),this.recalcMatrix(o);var _=this.computedInverse;i(_,_,h),this.setMatrix(o,t(_,_))},g.translate=function(o,x,d,w){h[0]=x||0,h[1]=d||0,h[2]=w||0,this.recalcMatrix(o);var _=this.computedMatrix;i(_,_,h),this.setMatrix(o,_)},g.setMatrix=function(o,x){if(!(o<this.lastT())){this._time.push(o);for(var d=0;d<16;++d)this._components.push(x[d])}},g.setDistance=function(o,x){this.computedRadius[0]=x},g.setDistanceLimits=function(o,x){var d=this._limits;d[0]=o,d[1]=x},g.getDistanceLimits=function(o){var x=this._limits;return o?(o[0]=x[0],o[1]=x[1],o):x}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(m,b,v){"use strict";b.exports=function(n){var t=n.length;if(t<3){for(var a=new Array(t),r=0;r<t;++r)a[r]=r;return 2===t&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:a}var u=new Array(t);for(r=0;r<t;++r)u[r]=r;u.sort(function(x,d){return n[x][0]-n[d][0]||n[x][1]-n[d][1]});var s=[u[0],u[1]],i=[u[0],u[1]];for(r=2;r<t;++r){for(var l=u[r],c=n[l],f=s.length;f>1&&e(n[s[f-2]],n[s[f-1]],c)<=0;)f-=1,s.pop();for(s.push(l),f=i.length;f>1&&e(n[i[f-2]],n[i[f-1]],c)>=0;)f-=1,i.pop();i.push(l)}a=new Array(i.length+s.length-2);for(var g=0,h=(r=0,s.length);r<h;++r)a[g++]=s[r];for(var o=i.length-2;o>0;--o)a[g++]=i[o];return a};var e=m("robust-orientation")[3]},{"robust-orientation":284}],247:[function(m,b,v){"use strict";b.exports=function(n,t){t||(t=n,n=window);var a=0,r=0,u=0,s={shift:!1,alt:!1,control:!1,meta:!1},i=!1;function l(T){var k=!1;return"altKey"in T&&(k=k||T.altKey!==s.alt,s.alt=!!T.altKey),"shiftKey"in T&&(k=k||T.shiftKey!==s.shift,s.shift=!!T.shiftKey),"ctrlKey"in T&&(k=k||T.ctrlKey!==s.control,s.control=!!T.ctrlKey),"metaKey"in T&&(k=k||T.metaKey!==s.meta,s.meta=!!T.metaKey),k}function c(T,k){var L=e.x(k),M=e.y(k);"buttons"in k&&(T=0|k.buttons),(T!==a||L!==r||M!==u||l(k))&&(a=0|T,r=L||0,u=M||0,t&&t(a,r,u,s))}function f(T){c(0,T)}function g(){(a||r||u||s.shift||s.alt||s.meta||s.control)&&(r=u=0,a=0,s.shift=s.alt=s.control=s.meta=!1,t&&t(0,0,0,s))}function h(T){l(T)&&t&&t(a,r,u,s)}function o(T){0===e.buttons(T)?c(0,T):c(a,T)}function x(T){c(a|e.buttons(T),T)}function d(T){c(a&~e.buttons(T),T)}function w(){i||(i=!0,n.addEventListener("mousemove",o),n.addEventListener("mousedown",x),n.addEventListener("mouseup",d),n.addEventListener("mouseleave",f),n.addEventListener("mouseenter",f),n.addEventListener("mouseout",f),n.addEventListener("mouseover",f),n.addEventListener("blur",g),n.addEventListener("keyup",h),n.addEventListener("keydown",h),n.addEventListener("keypress",h),n!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}w();var _={element:n};return Object.defineProperties(_,{enabled:{get:function(){return i},set:function(T){T?w():!i||(i=!1,n.removeEventListener("mousemove",o),n.removeEventListener("mousedown",x),n.removeEventListener("mouseup",d),n.removeEventListener("mouseleave",f),n.removeEventListener("mouseenter",f),n.removeEventListener("mouseout",f),n.removeEventListener("mouseover",f),n.removeEventListener("blur",g),n.removeEventListener("keyup",h),n.removeEventListener("keydown",h),n.removeEventListener("keypress",h),n!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))},enumerable:!0},buttons:{get:function(){return a},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),_};var e=m("mouse-event")},{"mouse-event":249}],248:[function(m,b,v){var e={left:0,top:0};b.exports=function(n,t,a){t=t||n.currentTarget||n.srcElement,Array.isArray(a)||(a=[0,0]);var i,r=n.clientX||0,u=n.clientY||0,s=(i=t)===window||i===document||i===document.body?e:i.getBoundingClientRect();return a[0]=r-s.left,a[1]=u-s.top,a}},{}],249:[function(m,b,v){"use strict";function e(n){return n.target||n.srcElement||window}v.buttons=function(n){if("object"==typeof n){if("buttons"in n)return n.buttons;if("which"in n){if(2===(t=n.which))return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in n){var t;if(1===(t=n.button))return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0},v.element=e,v.x=function(n){if("object"==typeof n){if("offsetX"in n)return n.offsetX;var t=e(n).getBoundingClientRect();return n.clientX-t.left}return 0},v.y=function(n){if("object"==typeof n){if("offsetY"in n)return n.offsetY;var t=e(n).getBoundingClientRect();return n.clientY-t.top}return 0}},{}],250:[function(m,b,v){"use strict";var e=m("to-px");b.exports=function(n,t,a){"function"==typeof n&&(a=!!t,t=n,n=window);var r=e("ex",n),u=function(s){a&&s.preventDefault();var i=s.deltaX||0,l=s.deltaY||0,c=s.deltaZ||0,f=1;switch(s.deltaMode){case 1:f=r;break;case 2:f=window.innerHeight}if(l*=f,c*=f,(i*=f)||l||c)return t(i,l,c,s)};return n.addEventListener("wheel",u),u}},{"to-px":304}],251:[function(m,b,v){"use strict";var e=m("typedarray-pool");b.exports=function(t){function a(f){throw new Error("ndarray-extract-contour: "+f)}"object"!=typeof t&&a("Must specify arguments");var r=t.order;Array.isArray(r)||a("Must specify order");var f,g,h,w,u=t.arrayArguments||1;u<1&&a("Must have at least one array argument"),(t.scalarArguments||0)<0&&a("Scalar arg count must be > 0"),"function"!=typeof t.vertex&&a("Must specify vertex creation function"),"function"!=typeof t.cell&&a("Must specify cell creation function"),"function"!=typeof t.phase&&a("Must specify phase function");for(var i=t.getters||[],l=new Array(u),c=0;c<u;++c)l[c]=i.indexOf(c)>=0;return f=t.vertex,g=t.cell,h=t.phase,w=[l,r].join(","),(0,n[w])(f,g,h,e.mallocUint32,e.freeUint32)};var n={"false,0,1":function(t,a,r,u,s){return function(i,l,c,f){var g,h=0|i.shape[0],o=0|i.shape[1],x=i.data,w=0|i.stride[0],_=0|i.stride[1],T=0|i.offset,k=0|-w,L=0,M=0|-_,O=0,P=-w-_|0,S=0,E=0|w,R=_-w*h|0,B=0,H=0,V=0,Z=2*h|0,W=u(Z),G=u(Z),X=0,te=0,D=-1,N=-1,U=0,Q=0|-h,j=0|h,J=0,K=-h-1|0,re=h-1|0,ne=0,se=0,oe=0;for(B=0;B<h;++B)W[X++]=r(x[T],l,c,f),T+=E;if(T+=R,o>0){if(H=1,W[X++]=r(x[T],l,c,f),T+=E,h>0)for(B=1,te=W[X]=r(g=x[T],l,c,f),J=W[X+Q],ne=W[X+K],te===(U=W[X+D])&&te===J&&te===ne||(t(B,H,g,L=x[T+k],O=x[T+M],S=x[T+P],te,U,J,ne,l,c,f),se=G[X]=V++),X+=1,T+=E,B=2;B<h;++B)te=W[X]=r(g=x[T],l,c,f),J=W[X+Q],ne=W[X+K],te===(U=W[X+D])&&te===J&&te===ne||(t(B,H,g,L=x[T+k],O=x[T+M],S=x[T+P],te,U,J,ne,l,c,f),se=G[X]=V++,ne!==U&&a(G[X+D],se,S,L,ne,U,l,c,f)),X+=1,T+=E;for(T+=R,X=0,oe=D,D=N,N=oe,oe=Q,Q=j,j=oe,oe=K,K=re,re=oe,H=2;H<o;++H){if(W[X++]=r(x[T],l,c,f),T+=E,h>0)for(B=1,te=W[X]=r(g=x[T],l,c,f),J=W[X+Q],ne=W[X+K],te===(U=W[X+D])&&te===J&&te===ne||(t(B,H,g,L=x[T+k],O=x[T+M],S=x[T+P],te,U,J,ne,l,c,f),se=G[X]=V++,ne!==J&&a(G[X+Q],se,O,S,J,ne,l,c,f)),X+=1,T+=E,B=2;B<h;++B)te=W[X]=r(g=x[T],l,c,f),J=W[X+Q],ne=W[X+K],te===(U=W[X+D])&&te===J&&te===ne||(t(B,H,g,L=x[T+k],O=x[T+M],S=x[T+P],te,U,J,ne,l,c,f),se=G[X]=V++,ne!==J&&a(G[X+Q],se,O,S,J,ne,l,c,f),ne!==U&&a(G[X+D],se,S,L,ne,U,l,c,f)),X+=1,T+=E;1&H&&(X=0),oe=D,D=N,N=oe,oe=Q,Q=j,j=oe,oe=K,K=re,re=oe,T+=R}}s(G),s(W)}},"false,1,0":function(t,a,r,u,s){return function(i,l,c,f){var g,h=0|i.shape[0],o=0|i.shape[1],x=i.data,w=0|i.stride[0],_=0|i.stride[1],T=0|i.offset,k=0|-w,L=0,M=0|-_,O=0,P=-w-_|0,S=0,E=0|_,R=w-_*o|0,B=0,H=0,V=0,Z=2*o|0,W=u(Z),G=u(Z),X=0,te=0,D=-1,N=-1,U=0,Q=0|-o,j=0|o,J=0,K=-o-1|0,re=o-1|0,ne=0,se=0,oe=0;for(H=0;H<o;++H)W[X++]=r(x[T],l,c,f),T+=E;if(T+=R,h>0){if(B=1,W[X++]=r(x[T],l,c,f),T+=E,o>0)for(H=1,te=W[X]=r(g=x[T],l,c,f),U=W[X+D],ne=W[X+K],te===(J=W[X+Q])&&te===U&&te===ne||(t(B,H,g,L=x[T+k],O=x[T+M],S=x[T+P],te,J,U,ne,l,c,f),se=G[X]=V++),X+=1,T+=E,H=2;H<o;++H)te=W[X]=r(g=x[T],l,c,f),U=W[X+D],ne=W[X+K],te===(J=W[X+Q])&&te===U&&te===ne||(t(B,H,g,L=x[T+k],O=x[T+M],S=x[T+P],te,J,U,ne,l,c,f),se=G[X]=V++,ne!==U&&a(G[X+D],se,O,S,U,ne,l,c,f)),X+=1,T+=E;for(T+=R,X=0,oe=Q,Q=j,j=oe,oe=D,D=N,N=oe,oe=K,K=re,re=oe,B=2;B<h;++B){if(W[X++]=r(x[T],l,c,f),T+=E,o>0)for(H=1,te=W[X]=r(g=x[T],l,c,f),U=W[X+D],ne=W[X+K],te===(J=W[X+Q])&&te===U&&te===ne||(t(B,H,g,L=x[T+k],O=x[T+M],S=x[T+P],te,J,U,ne,l,c,f),se=G[X]=V++,ne!==J&&a(G[X+Q],se,S,L,ne,J,l,c,f)),X+=1,T+=E,H=2;H<o;++H)te=W[X]=r(g=x[T],l,c,f),U=W[X+D],ne=W[X+K],te===(J=W[X+Q])&&te===U&&te===ne||(t(B,H,g,L=x[T+k],O=x[T+M],S=x[T+P],te,J,U,ne,l,c,f),se=G[X]=V++,ne!==U&&a(G[X+D],se,O,S,U,ne,l,c,f),ne!==J&&a(G[X+Q],se,S,L,ne,J,l,c,f)),X+=1,T+=E;1&B&&(X=0),oe=Q,Q=j,j=oe,oe=D,D=N,N=oe,oe=K,K=re,re=oe,T+=R}}s(G),s(W)}}}},{"typedarray-pool":308}],252:[function(m,b,v){"use strict";var e=m("dup"),n={zero:function(h,o,x,d){var w=h[0];d|=0;var _=0,T=x[0];for(_=0;_<w;++_)o[d]=0,d+=T},fdTemplate1:function(h,o,x,d,w,_,T){var k=h[0],L=x[0],M=-1*L,O=L;d|=0,T|=0;var P=0,S=L,E=_[0];for(P=0;P<k;++P)w[T]=.5*(o[d+M]-o[d+O]),d+=S,T+=E},fdTemplate2:function(h,o,x,d,w,_,T,k,L,M){var O=h[0],P=h[1],S=x[0],E=x[1],B=_[1],V=L[1],Z=-1*S,W=S,G=-1*E,X=E;d|=0,T|=0,M|=0;var te=0,D=0,N=E,U=S-P*E,Q=B,j=_[0]-P*B,J=V,K=L[0]-P*V;for(D=0;D<O;++D){for(te=0;te<P;++te)w[T]=.5*(o[d+Z]-o[d+W]),k[M]=.5*(o[d+G]-o[d+X]),d+=N,T+=Q,M+=J;d+=U,T+=j,M+=K}}},t={cdiff:function(h){var o={};return function(x,d,w){var _=x.dtype,T=x.order,k=d.dtype,L=d.order,M=w.dtype,O=w.order,P=[_,T.join(),k,L.join(),M,O.join()].join(),S=o[P];return S||(o[P]=S=h([_,T,k,L,M,O])),S(x.shape.slice(0),x.data,x.stride,0|x.offset,d.data,d.stride,0|d.offset,w.data,w.stride,0|w.offset)}},zero:function(h){var o={};return function(x){var d=x.dtype,w=x.order,_=[d,w.join()].join(),T=o[_];return T||(o[_]=T=h([d,w])),T(x.shape.slice(0),x.data,x.stride,0|x.offset)}},fdTemplate1:function(h){var o={};return function(x,d){var w=x.dtype,_=x.order,T=d.dtype,k=d.order,L=[w,_.join(),T,k.join()].join(),M=o[L];return M||(o[L]=M=h([w,_,T,k])),M(x.shape.slice(0),x.data,x.stride,0|x.offset,d.data,d.stride,0|d.offset)}},fdTemplate2:function(h){var o={};return function(x,d,w){var _=x.dtype,T=x.order,k=d.dtype,L=d.order,M=w.dtype,O=w.order,P=[_,T.join(),k,L.join(),M,O.join()].join(),S=o[P];return S||(o[P]=S=h([_,T,k,L,M,O])),S(x.shape.slice(0),x.data,x.stride,0|x.offset,d.data,d.stride,0|d.offset,w.data,w.stride,0|w.offset)}}};function a(h){return(0,t[h.funcName])(r.bind(void 0,h))}function r(h){return n[h.funcName]}function u(h){return a({funcName:h.funcName})}var s={},i={},l=u({funcName:"cdiff"}),c=u({funcName:"zero"});function f(h){return h in s?s[h]:s[h]=u({funcName:"fdTemplate"+h})}function g(h,o,x,d){return function(w,_){var T=_.shape.slice();return T[0]>2&&T[1]>2&&d(_.pick(-1,-1).lo(1,1).hi(T[0]-2,T[1]-2),w.pick(-1,-1,0).lo(1,1).hi(T[0]-2,T[1]-2),w.pick(-1,-1,1).lo(1,1).hi(T[0]-2,T[1]-2)),T[1]>2&&(x(_.pick(0,-1).lo(1).hi(T[1]-2),w.pick(0,-1,1).lo(1).hi(T[1]-2)),o(w.pick(0,-1,0).lo(1).hi(T[1]-2))),T[1]>2&&(x(_.pick(T[0]-1,-1).lo(1).hi(T[1]-2),w.pick(T[0]-1,-1,1).lo(1).hi(T[1]-2)),o(w.pick(T[0]-1,-1,0).lo(1).hi(T[1]-2))),T[0]>2&&(x(_.pick(-1,0).lo(1).hi(T[0]-2),w.pick(-1,0,0).lo(1).hi(T[0]-2)),o(w.pick(-1,0,1).lo(1).hi(T[0]-2))),T[0]>2&&(x(_.pick(-1,T[1]-1).lo(1).hi(T[0]-2),w.pick(-1,T[1]-1,0).lo(1).hi(T[0]-2)),o(w.pick(-1,T[1]-1,1).lo(1).hi(T[0]-2))),w.set(0,0,0,0),w.set(0,0,1,0),w.set(T[0]-1,0,0,0),w.set(T[0]-1,0,1,0),w.set(0,T[1]-1,0,0),w.set(0,T[1]-1,1,0),w.set(T[0]-1,T[1]-1,0,0),w.set(T[0]-1,T[1]-1,1,0),w}}b.exports=function(h,o,x){return Array.isArray(x)||(x=e(o.dimension,"string"==typeof x?x:"clamp")),0===o.size?h:0===o.dimension?(h.set(0),h):function(d){var w=d.join();if(L=i[w])return L;for(var _=d.length,T=[l,c],k=1;k<=_;++k)T.push(f(k));var L=g.apply(void 0,T);return i[w]=L,L}(x)(h,o)}},{dup:65}],253:[function(m,b,v){"use strict";function e(r,u){var s=Math.floor(u),i=u-s,c=0<=s+1&&s+1<r.shape[0];return(1-i)*(0<=s&&s<r.shape[0]?+r.get(s):0)+i*(c?+r.get(s+1):0)}function n(r,u,s){var i=Math.floor(u),l=u-i,c=0<=i&&i<r.shape[0],f=0<=i+1&&i+1<r.shape[0],g=Math.floor(s),h=s-g,o=0<=g&&g<r.shape[1],x=0<=g+1&&g+1<r.shape[1],d=c&&o?r.get(i,g):0,w=c&&x?r.get(i,g+1):0;return(1-h)*((1-l)*d+l*(f&&o?r.get(i+1,g):0))+h*((1-l)*w+l*(f&&x?r.get(i+1,g+1):0))}function t(r,u,s,i){var l=Math.floor(u),c=u-l,f=0<=l&&l<r.shape[0],g=0<=l+1&&l+1<r.shape[0],h=Math.floor(s),o=s-h,x=0<=h&&h<r.shape[1],d=0<=h+1&&h+1<r.shape[1],w=Math.floor(i),_=i-w,T=0<=w&&w<r.shape[2],k=0<=w+1&&w+1<r.shape[2],L=f&&x&&T?r.get(l,h,w):0,M=f&&d&&T?r.get(l,h+1,w):0,O=g&&x&&T?r.get(l+1,h,w):0,P=g&&d&&T?r.get(l+1,h+1,w):0,S=f&&x&&k?r.get(l,h,w+1):0,E=f&&d&&k?r.get(l,h+1,w+1):0;return(1-_)*((1-o)*((1-c)*L+c*O)+o*((1-c)*M+c*P))+_*((1-o)*((1-c)*S+c*(g&&x&&k?r.get(l+1,h,w+1):0))+o*((1-c)*E+c*(g&&d&&k?r.get(l+1,h+1,w+1):0)))}function a(r){var u,s,i=0|r.shape.length,l=new Array(i),c=new Array(i),f=new Array(i),g=new Array(i);for(u=0;u<i;++u)s=+arguments[u+1],l[u]=Math.floor(s),c[u]=s-l[u],f[u]=0<=l[u]&&l[u]<r.shape[u],g[u]=0<=l[u]+1&&l[u]+1<r.shape[u];var h,o,x,d=0;e:for(u=0;u<1<<i;++u){for(o=1,x=r.offset,h=0;h<i;++h)if(u&1<<h){if(!g[h])continue e;o*=c[h],x+=r.stride[h]*(l[h]+1)}else{if(!f[h])continue e;o*=1-c[h],x+=r.stride[h]*l[h]}d+=o*r.data[x]}return d}b.exports=function(r,u,s,i){switch(r.shape.length){case 0:return 0;case 1:return e(r,u);case 2:return n(r,u,s);case 3:return t(r,u,s,i);default:return a.apply(void 0,arguments)}},b.exports.d1=e,b.exports.d2=n,b.exports.d3=t},{}],254:[function(m,b,v){"use strict";var e={"float64,2,1,0":function(){return function(u,s,i,l,c){var f=u[0],g=u[1],h=u[2],x=i[1],d=i[2];l|=0;var w=0,_=0,T=0,k=d,L=x-h*d,M=i[0]-g*x;for(T=0;T<f;++T){for(_=0;_<g;++_){for(w=0;w<h;++w)s[l]/=c,l+=k;l+=L}l+=M}}},"uint8,2,0,1,float64,2,1,0":function(){return function(u,s,i,l,c,f,g,h){for(var o=u[0],x=u[1],d=u[2],w=i[0],_=i[1],T=i[2],k=f[0],L=f[1],M=f[2],O=l|=0,P=g|=0,S=0|u[0];S>0;){S<64?(o=S,S=0):(o=64,S-=64);for(var E=0|u[1];E>0;){E<64?(x=E,E=0):(x=64,E-=64),l=O+S*w+E*_,g=P+S*k+E*L;var R=0,B=0,H=0,V=T,Z=w-d*T,W=_-o*w,G=M,X=k-d*M,te=L-o*k;for(H=0;H<x;++H){for(B=0;B<o;++B){for(R=0;R<d;++R)s[l]=c[g]*h,l+=V,g+=G;l+=Z,g+=X}l+=W,g+=te}}}}},"float32,1,0,float32,1,0":function(){return function(u,s,i,l,c,f,g){var h=u[0],o=u[1],d=i[1],_=f[1];l|=0,g|=0;var T=0,k=0,L=d,M=i[0]-o*d,O=_,P=f[0]-o*_;for(k=0;k<h;++k){for(T=0;T<o;++T)s[l]=c[g],l+=L,g+=O;l+=M,g+=P}}},"float32,1,0,float32,0,1":function(){return function(u,s,i,l,c,f,g){for(var h=u[0],o=u[1],x=i[0],d=i[1],w=f[0],_=f[1],T=l|=0,k=g|=0,L=0|u[1];L>0;){L<64?(o=L,L=0):(o=64,L-=64);for(var M=0|u[0];M>0;){M<64?(h=M,M=0):(h=64,M-=64),l=T+L*d+M*x,g=k+L*_+M*w;var O=0,P=0,S=d,E=x-o*d,R=_,B=w-o*_;for(P=0;P<h;++P){for(O=0;O<o;++O)s[l]=c[g],l+=S,g+=R;l+=E,g+=B}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(u,s,i,l,c,f,g){for(var h=u[0],o=u[1],x=u[2],d=i[0],w=i[1],_=i[2],T=f[0],k=f[1],L=f[2],M=l|=0,O=g|=0,P=0|u[2];P>0;){P<64?(x=P,P=0):(x=64,P-=64);for(var S=0|u[0];S>0;){S<64?(h=S,S=0):(h=64,S-=64);for(var E=0|u[1];E>0;){E<64?(o=E,E=0):(o=64,E-=64),l=M+P*_+S*d+E*w,g=O+P*L+S*T+E*k;var R=0,B=0,H=0,V=_,Z=d-x*_,W=w-h*d,G=L,X=T-x*L,te=k-h*T;for(H=0;H<o;++H){for(B=0;B<h;++B){for(R=0;R<x;++R)s[l]=c[g],l+=V,g+=G;l+=Z,g+=X}l+=W,g+=te}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(u,s,i,l,c,f,g){var h=u[0],o=u[1],x=u[2],d=i[0],_=i[2],T=f[0],L=f[2];l|=0,g|=0;var M=0,O=0,P=0,S=_,E=d-x*_,R=i[1]-h*d,B=L,H=T-x*L,V=f[1]-h*T;for(P=0;P<o;++P){for(O=0;O<h;++O){for(M=0;M<x;++M)s[l]=c[g],l+=S,g+=B;l+=E,g+=H}l+=R,g+=V}}}},n=function(u,s){var i=s.join(",");return(0,e[i])()},t={mul:function(u){var s={};return function(i,l,c){var f=i.dtype,g=i.order,h=l.dtype,o=l.order,x=c.dtype,d=c.order,w=[f,g.join(),h,o.join(),x,d.join()].join(),_=s[w];return _||(s[w]=_=u([f,g,h,o,x,d])),_(i.shape.slice(0),i.data,i.stride,0|i.offset,l.data,l.stride,0|l.offset,c.data,c.stride,0|c.offset)}},muls:function(u){var s={};return function(i,l,c){var f=i.dtype,g=i.order,h=l.dtype,o=l.order,x=[f,g.join(),h,o.join()].join(),d=s[x];return d||(s[x]=d=u([f,g,h,o])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,l.data,l.stride,0|l.offset,c)}},mulseq:function(u){var s={};return function(i,l){var c=i.dtype,f=i.order,g=[c,f.join()].join(),h=s[g];return h||(s[g]=h=u([c,f])),h(i.shape.slice(0),i.data,i.stride,0|i.offset,l)}},div:function(u){var s={};return function(i,l,c){var f=i.dtype,g=i.order,h=l.dtype,o=l.order,x=c.dtype,d=c.order,w=[f,g.join(),h,o.join(),x,d.join()].join(),_=s[w];return _||(s[w]=_=u([f,g,h,o,x,d])),_(i.shape.slice(0),i.data,i.stride,0|i.offset,l.data,l.stride,0|l.offset,c.data,c.stride,0|c.offset)}},divs:function(u){var s={};return function(i,l,c){var f=i.dtype,g=i.order,h=l.dtype,o=l.order,x=[f,g.join(),h,o.join()].join(),d=s[x];return d||(s[x]=d=u([f,g,h,o])),d(i.shape.slice(0),i.data,i.stride,0|i.offset,l.data,l.stride,0|l.offset,c)}},divseq:function(u){var s={};return function(i,l){var c=i.dtype,f=i.order,g=[c,f.join()].join(),h=s[g];return h||(s[g]=h=u([c,f])),h(i.shape.slice(0),i.data,i.stride,0|i.offset,l)}},assign:function(u){var s={};return function(i,l){var c=i.dtype,f=i.order,g=l.dtype,h=l.order,o=[c,f.join(),g,h.join()].join(),x=s[o];return x||(s[o]=x=u([c,f,g,h])),x(i.shape.slice(0),i.data,i.stride,0|i.offset,l.data,l.stride,0|l.offset)}}};function a(u){return(0,t[(s={funcName:u.funcName}).funcName])(n.bind(void 0,s));var s}var r={mul:"*",div:"/"};(function(){for(var u in r)v[u]=a({funcName:u}),v[u+"s"]=a({funcName:u+"s"}),v[u+"seq"]=a({funcName:u+"seq"})})(),v.assign=a({funcName:"assign"})},{}],255:[function(m,b,v){"use strict";var e=m("ndarray"),n=m("./doConvert.js");b.exports=function(t,a){for(var r=[],u=t,s=1;Array.isArray(u);)r.push(u.length),s*=u.length,u=u[0];return 0===r.length?e():(a||(a=e(new Float64Array(s),r)),n(a,t),a)}},{"./doConvert.js":256,ndarray:259}],256:[function(m,b,v){"use strict";var t,a;b.exports=(t=function(){return function(t,a,r,u,s){var i=t[0],l=t[1],c=t[2],g=r[1],h=r[2],o=[0,0,0];u|=0;var x=0,d=0,w=0,_=h,T=g-c*h,k=r[0]-l*g;for(w=0;w<i;++w){for(d=0;d<l;++d){for(x=0;x<c;++x){var L,M=s;for(L=0;L<o.length-1;++L)M=M[o[L]];a[u]=M[o[o.length-1]],u+=_,++o[2]}u+=T,o[2]-=c,++o[1]}u+=k,o[1]-=l,++o[0]}}}.bind(void 0,{funcName:"convert"}),a={},function(r,u){var s=r.dtype,i=r.order,l=[s,i.join()].join(),c=a[l];return c||(a[l]=c=t([s,i])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,u)})},{}],257:[function(m,b,v){"use strict";var e=m("typedarray-pool");function n(u){return"uint32"===u?[e.mallocUint32,e.freeUint32]:null}var t={"uint32,1,0":function(u,s){return function(i,l,c,f,g,h,o,x,d,w,_){var T,k,L,M,O,P,S,E,R=i*g+f,B=u(x);for(T=i+1;T<=l;++T){for(k=T,L=R+=g,O=0,P=R,M=0;M<x;++M)B[O++]=c[P],P+=d;e:for(;k-- >i;){O=0,P=L-g;t:for(M=0;M<x;++M){if((S=c[P])<(E=B[O]))break e;if(S>E)break t;P+=w,O+=_}for(O=L,P=L-g,M=0;M<x;++M)c[O]=c[P],O+=d,P+=d;L-=g}for(O=L,P=0,M=0;M<x;++M)c[O]=B[P++],O+=d}s(B)}}},a={"uint32,1,0":function(u,s,i){return function l(c,f,g,h,o,x,d,w,_,T,k){var L,M,P,S,E,R,B,H,V,Z,W,G,X,te,D,N,U,Q,j,J,K,re,ne,se,oe=(f-c+1)/6|0,pe=c+oe,ce=f-oe,ge=c+f>>1,xe=ge-oe,we=ge+oe,be=pe,Se=xe,fe=ge,me=we,Te=ce,_e=c+1,Me=f-1,Ie=!0,ze=0,Ve=0,Je=0,De=w,Be=s(De),Ze=s(De);Z=o*be,W=o*Se,se=h;e:for(V=0;V<w;++V){if((Je=g[R=Z+se]-g[B=W+se])>0){M=be,be=Se,Se=M;break e}if(Je<0)break e;se+=T}Z=o*me,W=o*Te,se=h;e:for(V=0;V<w;++V){if((Je=g[R=Z+se]-g[B=W+se])>0){M=me,me=Te,Te=M;break e}if(Je<0)break e;se+=T}Z=o*be,W=o*fe,se=h;e:for(V=0;V<w;++V){if((Je=g[R=Z+se]-g[B=W+se])>0){M=be,be=fe,fe=M;break e}if(Je<0)break e;se+=T}Z=o*Se,W=o*fe,se=h;e:for(V=0;V<w;++V){if((Je=g[R=Z+se]-g[B=W+se])>0){M=Se,Se=fe,fe=M;break e}if(Je<0)break e;se+=T}Z=o*be,W=o*me,se=h;e:for(V=0;V<w;++V){if((Je=g[R=Z+se]-g[B=W+se])>0){M=be,be=me,me=M;break e}if(Je<0)break e;se+=T}Z=o*fe,W=o*me,se=h;e:for(V=0;V<w;++V){if((Je=g[R=Z+se]-g[B=W+se])>0){M=fe,fe=me,me=M;break e}if(Je<0)break e;se+=T}Z=o*Se,W=o*Te,se=h;e:for(V=0;V<w;++V){if((Je=g[R=Z+se]-g[B=W+se])>0){M=Se,Se=Te,Te=M;break e}if(Je<0)break e;se+=T}Z=o*Se,W=o*fe,se=h;e:for(V=0;V<w;++V){if((Je=g[R=Z+se]-g[B=W+se])>0){M=Se,Se=fe,fe=M;break e}if(Je<0)break e;se+=T}Z=o*me,W=o*Te,se=h;e:for(V=0;V<w;++V){if((Je=g[R=Z+se]-g[B=W+se])>0){M=me,me=Te,Te=M;break e}if(Je<0)break e;se+=T}for(Z=o*be,W=o*Se,G=o*fe,X=o*me,te=o*Te,D=o*pe,N=o*ge,U=o*ce,ne=0,se=h,V=0;V<w;++V)R=Z+se,H=G+se,Q=X+se,j=te+se,J=D+se,K=N+se,re=U+se,Be[ne]=g[B=W+se],Ze[ne]=g[Q],Ie=Ie&&Be[ne]===Ze[ne],P=g[H],S=g[j],g[J]=g[R],g[K]=P,g[re]=S,++ne,se+=_;for(Z=o*xe,W=o*c,se=h,V=0;V<w;++V)g[R=Z+se]=g[B=W+se],se+=_;for(Z=o*we,W=o*f,se=h,V=0;V<w;++V)g[R=Z+se]=g[B=W+se],se+=_;if(Ie)for(E=_e;E<=Me;++E){for(R=h+E*o,ne=0,V=0;V<w&&0==(Je=g[R]-Be[ne]);++V)ne+=k,R+=T;if(0!==Je)if(Je<0){if(E!==_e)for(Z=o*E,W=o*_e,se=h,V=0;V<w;++V)L=g[R=Z+se],g[R]=g[B=W+se],g[B]=L,se+=_;++_e}else for(;;){for(R=h+Me*o,ne=0,V=0;V<w&&0==(Je=g[R]-Be[ne]);++V)ne+=k,R+=T;if(!(Je>0)){if(Je<0){for(Z=o*E,W=o*_e,G=o*Me,se=h,V=0;V<w;++V)H=G+se,L=g[R=Z+se],g[R]=g[B=W+se],g[B]=g[H],g[H]=L,se+=_;++_e,--Me;break}for(Z=o*E,W=o*Me,se=h,V=0;V<w;++V)L=g[R=Z+se],g[R]=g[B=W+se],g[B]=L,se+=_;--Me;break}Me--}}else for(E=_e;E<=Me;++E){for(R=h+E*o,ne=0,V=0;V<w&&0==(ze=g[R]-Be[ne]);++V)ne+=k,R+=T;if(ze<0){if(E!==_e)for(Z=o*E,W=o*_e,se=h,V=0;V<w;++V)L=g[R=Z+se],g[R]=g[B=W+se],g[B]=L,se+=_;++_e}else{for(R=h+E*o,ne=0,V=0;V<w&&0==(Ve=g[R]-Ze[ne]);++V)ne+=k,R+=T;if(Ve>0)for(;;){for(R=h+Me*o,ne=0,V=0;V<w&&0==(Je=g[R]-Ze[ne]);++V)ne+=k,R+=T;if(!(Je>0)){for(R=h+Me*o,ne=0,V=0;V<w&&0==(Je=g[R]-Be[ne]);++V)ne+=k,R+=T;if(Je<0){for(Z=o*E,W=o*_e,G=o*Me,se=h,V=0;V<w;++V)H=G+se,L=g[R=Z+se],g[R]=g[B=W+se],g[B]=g[H],g[H]=L,se+=_;++_e,--Me}else{for(Z=o*E,W=o*Me,se=h,V=0;V<w;++V)L=g[R=Z+se],g[R]=g[B=W+se],g[B]=L,se+=_;--Me}break}if(--Me<E)break}}}for(Z=o*c,W=o*(_e-1),ne=0,se=h,V=0;V<w;++V)g[R=Z+se]=g[B=W+se],g[B]=Be[ne],++ne,se+=_;for(Z=o*f,W=o*(Me+1),ne=0,se=h,V=0;V<w;++V)g[R=Z+se]=g[B=W+se],g[B]=Ze[ne],++ne,se+=_;if(_e-2-c<=32?u(c,_e-2,g,h,o,x,d,w,_,T,k):l(c,_e-2,g,h,o,x,d,w,_,T,k),f-(Me+2)<=32?u(Me+2,f,g,h,o,x,d,w,_,T,k):l(Me+2,f,g,h,o,x,d,w,_,T,k),Ie)return i(Be),void i(Ze);if(_e<pe&&Me>ce){e:for(;;){for(R=h+_e*o,ne=0,se=h,V=0;V<w;++V){if(g[R]!==Be[ne])break e;++ne,R+=_}++_e}e:for(;;){for(R=h+Me*o,ne=0,se=h,V=0;V<w;++V){if(g[R]!==Ze[ne])break e;++ne,R+=_}--Me}for(E=_e;E<=Me;++E){for(R=h+E*o,ne=0,V=0;V<w&&0==(ze=g[R]-Be[ne]);++V)ne+=k,R+=T;if(0===ze){if(E!==_e)for(Z=o*E,W=o*_e,se=h,V=0;V<w;++V)L=g[R=Z+se],g[R]=g[B=W+se],g[B]=L,se+=_;++_e}else{for(R=h+E*o,ne=0,V=0;V<w&&0==(Ve=g[R]-Ze[ne]);++V)ne+=k,R+=T;if(0===Ve)for(;;){for(R=h+Me*o,ne=0,V=0;V<w&&0==(Je=g[R]-Ze[ne]);++V)ne+=k,R+=T;if(0!==Je){for(R=h+Me*o,ne=0,V=0;V<w&&0==(Je=g[R]-Be[ne]);++V)ne+=k,R+=T;if(Je<0){for(Z=o*E,W=o*_e,G=o*Me,se=h,V=0;V<w;++V)H=G+se,L=g[R=Z+se],g[R]=g[B=W+se],g[B]=g[H],g[H]=L,se+=_;++_e,--Me}else{for(Z=o*E,W=o*Me,se=h,V=0;V<w;++V)L=g[R=Z+se],g[R]=g[B=W+se],g[B]=L,se+=_;--Me}break}if(--Me<E)break}}}}i(Be),i(Ze),Me-_e<=32?u(_e,Me,g,h,o,x,d,w,_,T,k):l(_e,Me,g,h,o,x,d,w,_,T,k)}}},r={"uint32,1,0":function(u,s){return function(i){var l=i.data,c=0|i.offset,f=i.shape,g=i.stride,h=0|g[0],o=0|f[0],x=0|g[1],d=0|f[1],w=x,_=x;o<=32?u(0,o-1,l,c,h,x,o,d,w,_,1):s(0,o-1,l,c,h,x,o,d,w,_,1)}}};b.exports=function(u,s){var g,h,o,x,d,i=[s,u].join(","),l=r[i],c=(g=u,o=n(h=s),x=[h,g].join(","),d=t[x],o?d(o[0],o[1]):d()),f=function(g,h,o){var x=n(h),d=[h,g].join(","),w=a[d];return g.length>1&&x?w(o,x[0],x[1]):w(o)}(u,s,c);return l(c,f)}},{"typedarray-pool":308}],258:[function(m,b,v){"use strict";var e=m("./lib/compile_sort.js"),n={};b.exports=function(t){var a=t.order,r=t.dtype,u=[a,r].join(":"),s=n[u];return s||(n[u]=s=e(a,r)),s(t),t}},{"./lib/compile_sort.js":257}],259:[function(m,b,v){var e=m("is-buffer"),n="undefined"!=typeof Float64Array;function t(i,l){return i[0]-l[0]}function a(){var i,l=this.stride,c=new Array(l.length);for(i=0;i<c.length;++i)c[i]=[Math.abs(l[i]),i];c.sort(t);var f=new Array(c.length);for(i=0;i<f.length;++i)f[i]=c[i][1];return f}var r={T:function(i){function l(f){this.data=f}var c=l.prototype;return c.dtype=i,c.index=function(){return-1},c.size=0,c.dimension=-1,c.shape=c.stride=c.order=[],c.lo=c.hi=c.transpose=c.step=function(){return new l(this.data)},c.get=c.set=function(){},c.pick=function(){return null},function(f){return new l(f)}},0:function(i,l){function c(g,h){this.data=g,this.offset=h}var f=c.prototype;return f.dtype=i,f.index=function(){return this.offset},f.dimension=0,f.size=1,f.shape=f.stride=f.order=[],f.lo=f.hi=f.transpose=f.step=function(){return new c(this.data,this.offset)},f.pick=function(){return l(this.data)},f.valueOf=f.get=function(){return"generic"===i?this.data.get(this.offset):this.data[this.offset]},f.set=function(g){return"generic"===i?this.data.set(this.offset,g):this.data[this.offset]=g},function(g,h,o,x){return new c(g,x)}},1:function(i,l,c){function f(h,o,x,d){this.data=h,this.shape=[o],this.stride=[x],this.offset=0|d}var g=f.prototype;return g.dtype=i,g.dimension=1,Object.defineProperty(g,"size",{get:function(){return this.shape[0]}}),g.order=[0],g.set=function(h,o){return"generic"===i?this.data.set(this.offset+this.stride[0]*h,o):this.data[this.offset+this.stride[0]*h]=o},g.get=function(h){return"generic"===i?this.data.get(this.offset+this.stride[0]*h):this.data[this.offset+this.stride[0]*h]},g.index=function(h){return this.offset+this.stride[0]*h},g.hi=function(h){return new f(this.data,"number"!=typeof h||h<0?this.shape[0]:0|h,this.stride[0],this.offset)},g.lo=function(h){var o=this.offset,x=0,d=this.shape[0],w=this.stride[0];return"number"==typeof h&&h>=0&&(o+=w*(x=0|h),d-=x),new f(this.data,d,w,o)},g.step=function(h){var o=this.shape[0],x=this.stride[0],d=this.offset,w=0,_=Math.ceil;return"number"==typeof h&&((w=0|h)<0?(d+=x*(o-1),o=_(-o/w)):o=_(o/w),x*=w),new f(this.data,o,x,d)},g.transpose=function(h){return new f(this.data,this.shape[h=void 0===h?0:0|h],this.stride[h],this.offset)},g.pick=function(h){var o=[],x=[],d=this.offset;return"number"==typeof h&&h>=0?d=d+this.stride[0]*h|0:(o.push(this.shape[0]),x.push(this.stride[0])),(0,l[o.length+1])(this.data,o,x,d)},function(h,o,x,d){return new f(h,o[0],x[0],d)}},2:function(i,l,c){function f(h,o,x,d,w,_){this.data=h,this.shape=[o,x],this.stride=[d,w],this.offset=0|_}var g=f.prototype;return g.dtype=i,g.dimension=2,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(g,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),g.set=function(h,o,x){return"generic"===i?this.data.set(this.offset+this.stride[0]*h+this.stride[1]*o,x):this.data[this.offset+this.stride[0]*h+this.stride[1]*o]=x},g.get=function(h,o){return"generic"===i?this.data.get(this.offset+this.stride[0]*h+this.stride[1]*o):this.data[this.offset+this.stride[0]*h+this.stride[1]*o]},g.index=function(h,o){return this.offset+this.stride[0]*h+this.stride[1]*o},g.hi=function(h,o){return new f(this.data,"number"!=typeof h||h<0?this.shape[0]:0|h,"number"!=typeof o||o<0?this.shape[1]:0|o,this.stride[0],this.stride[1],this.offset)},g.lo=function(h,o){var x=this.offset,d=0,w=this.shape[0],_=this.shape[1],T=this.stride[0],k=this.stride[1];return"number"==typeof h&&h>=0&&(x+=T*(d=0|h),w-=d),"number"==typeof o&&o>=0&&(x+=k*(d=0|o),_-=d),new f(this.data,w,_,T,k,x)},g.step=function(h,o){var x=this.shape[0],d=this.shape[1],w=this.stride[0],_=this.stride[1],T=this.offset,k=0,L=Math.ceil;return"number"==typeof h&&((k=0|h)<0?(T+=w*(x-1),x=L(-x/k)):x=L(x/k),w*=k),"number"==typeof o&&((k=0|o)<0?(T+=_*(d-1),d=L(-d/k)):d=L(d/k),_*=k),new f(this.data,x,d,w,_,T)},g.transpose=function(h,o){var x=this.shape,d=this.stride;return new f(this.data,x[h=void 0===h?0:0|h],x[o=void 0===o?1:0|o],d[h],d[o],this.offset)},g.pick=function(h,o){var x=[],d=[],w=this.offset;return"number"==typeof h&&h>=0?w=w+this.stride[0]*h|0:(x.push(this.shape[0]),d.push(this.stride[0])),"number"==typeof o&&o>=0?w=w+this.stride[1]*o|0:(x.push(this.shape[1]),d.push(this.stride[1])),(0,l[x.length+1])(this.data,x,d,w)},function(h,o,x,d){return new f(h,o[0],o[1],x[0],x[1],d)}},3:function(i,l,c){function f(h,o,x,d,w,_,T,k){this.data=h,this.shape=[o,x,d],this.stride=[w,_,T],this.offset=0|k}var g=f.prototype;return g.dtype=i,g.dimension=3,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(g,"order",{get:function(){var h=Math.abs(this.stride[0]),o=Math.abs(this.stride[1]),x=Math.abs(this.stride[2]);return h>o?o>x?[2,1,0]:h>x?[1,2,0]:[1,0,2]:h>x?[2,0,1]:x>o?[0,1,2]:[0,2,1]}}),g.set=function(h,o,x,d){return"generic"===i?this.data.set(this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x,d):this.data[this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x]=d},g.get=function(h,o,x){return"generic"===i?this.data.get(this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x):this.data[this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x]},g.index=function(h,o,x){return this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x},g.hi=function(h,o,x){return new f(this.data,"number"!=typeof h||h<0?this.shape[0]:0|h,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof x||x<0?this.shape[2]:0|x,this.stride[0],this.stride[1],this.stride[2],this.offset)},g.lo=function(h,o,x){var d=this.offset,w=0,_=this.shape[0],T=this.shape[1],k=this.shape[2],L=this.stride[0],M=this.stride[1],O=this.stride[2];return"number"==typeof h&&h>=0&&(d+=L*(w=0|h),_-=w),"number"==typeof o&&o>=0&&(d+=M*(w=0|o),T-=w),"number"==typeof x&&x>=0&&(d+=O*(w=0|x),k-=w),new f(this.data,_,T,k,L,M,O,d)},g.step=function(h,o,x){var d=this.shape[0],w=this.shape[1],_=this.shape[2],T=this.stride[0],k=this.stride[1],L=this.stride[2],M=this.offset,O=0,P=Math.ceil;return"number"==typeof h&&((O=0|h)<0?(M+=T*(d-1),d=P(-d/O)):d=P(d/O),T*=O),"number"==typeof o&&((O=0|o)<0?(M+=k*(w-1),w=P(-w/O)):w=P(w/O),k*=O),"number"==typeof x&&((O=0|x)<0?(M+=L*(_-1),_=P(-_/O)):_=P(_/O),L*=O),new f(this.data,d,w,_,T,k,L,M)},g.transpose=function(h,o,x){var d=this.shape,w=this.stride;return new f(this.data,d[h=void 0===h?0:0|h],d[o=void 0===o?1:0|o],d[x=void 0===x?2:0|x],w[h],w[o],w[x],this.offset)},g.pick=function(h,o,x){var d=[],w=[],_=this.offset;return"number"==typeof h&&h>=0?_=_+this.stride[0]*h|0:(d.push(this.shape[0]),w.push(this.stride[0])),"number"==typeof o&&o>=0?_=_+this.stride[1]*o|0:(d.push(this.shape[1]),w.push(this.stride[1])),"number"==typeof x&&x>=0?_=_+this.stride[2]*x|0:(d.push(this.shape[2]),w.push(this.stride[2])),(0,l[d.length+1])(this.data,d,w,_)},function(h,o,x,d){return new f(h,o[0],o[1],o[2],x[0],x[1],x[2],d)}},4:function(i,l,c){function f(h,o,x,d,w,_,T,k,L,M){this.data=h,this.shape=[o,x,d,w],this.stride=[_,T,k,L],this.offset=0|M}var g=f.prototype;return g.dtype=i,g.dimension=4,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(g,"order",{get:c}),g.set=function(h,o,x,d,w){return"generic"===i?this.data.set(this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x+this.stride[3]*d,w):this.data[this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x+this.stride[3]*d]=w},g.get=function(h,o,x,d){return"generic"===i?this.data.get(this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x+this.stride[3]*d):this.data[this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x+this.stride[3]*d]},g.index=function(h,o,x,d){return this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x+this.stride[3]*d},g.hi=function(h,o,x,d){return new f(this.data,"number"!=typeof h||h<0?this.shape[0]:0|h,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof x||x<0?this.shape[2]:0|x,"number"!=typeof d||d<0?this.shape[3]:0|d,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},g.lo=function(h,o,x,d){var w=this.offset,_=0,T=this.shape[0],k=this.shape[1],L=this.shape[2],M=this.shape[3],O=this.stride[0],P=this.stride[1],S=this.stride[2],E=this.stride[3];return"number"==typeof h&&h>=0&&(w+=O*(_=0|h),T-=_),"number"==typeof o&&o>=0&&(w+=P*(_=0|o),k-=_),"number"==typeof x&&x>=0&&(w+=S*(_=0|x),L-=_),"number"==typeof d&&d>=0&&(w+=E*(_=0|d),M-=_),new f(this.data,T,k,L,M,O,P,S,E,w)},g.step=function(h,o,x,d){var w=this.shape[0],_=this.shape[1],T=this.shape[2],k=this.shape[3],L=this.stride[0],M=this.stride[1],O=this.stride[2],P=this.stride[3],S=this.offset,E=0,R=Math.ceil;return"number"==typeof h&&((E=0|h)<0?(S+=L*(w-1),w=R(-w/E)):w=R(w/E),L*=E),"number"==typeof o&&((E=0|o)<0?(S+=M*(_-1),_=R(-_/E)):_=R(_/E),M*=E),"number"==typeof x&&((E=0|x)<0?(S+=O*(T-1),T=R(-T/E)):T=R(T/E),O*=E),"number"==typeof d&&((E=0|d)<0?(S+=P*(k-1),k=R(-k/E)):k=R(k/E),P*=E),new f(this.data,w,_,T,k,L,M,O,P,S)},g.transpose=function(h,o,x,d){var w=this.shape,_=this.stride;return new f(this.data,w[h=void 0===h?0:0|h],w[o=void 0===o?1:0|o],w[x=void 0===x?2:0|x],w[d=void 0===d?3:0|d],_[h],_[o],_[x],_[d],this.offset)},g.pick=function(h,o,x,d){var w=[],_=[],T=this.offset;return"number"==typeof h&&h>=0?T=T+this.stride[0]*h|0:(w.push(this.shape[0]),_.push(this.stride[0])),"number"==typeof o&&o>=0?T=T+this.stride[1]*o|0:(w.push(this.shape[1]),_.push(this.stride[1])),"number"==typeof x&&x>=0?T=T+this.stride[2]*x|0:(w.push(this.shape[2]),_.push(this.stride[2])),"number"==typeof d&&d>=0?T=T+this.stride[3]*d|0:(w.push(this.shape[3]),_.push(this.stride[3])),(0,l[w.length+1])(this.data,w,_,T)},function(h,o,x,d){return new f(h,o[0],o[1],o[2],o[3],x[0],x[1],x[2],x[3],d)}},5:function(i,l,c){function f(h,o,x,d,w,_,T,k,L,M,O,P){this.data=h,this.shape=[o,x,d,w,_],this.stride=[T,k,L,M,O],this.offset=0|P}var g=f.prototype;return g.dtype=i,g.dimension=5,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(g,"order",{get:c}),g.set=function(h,o,x,d,w,_){return"generic"===i?this.data.set(this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x+this.stride[3]*d+this.stride[4]*w,_):this.data[this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x+this.stride[3]*d+this.stride[4]*w]=_},g.get=function(h,o,x,d,w){return"generic"===i?this.data.get(this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x+this.stride[3]*d+this.stride[4]*w):this.data[this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x+this.stride[3]*d+this.stride[4]*w]},g.index=function(h,o,x,d,w){return this.offset+this.stride[0]*h+this.stride[1]*o+this.stride[2]*x+this.stride[3]*d+this.stride[4]*w},g.hi=function(h,o,x,d,w){return new f(this.data,"number"!=typeof h||h<0?this.shape[0]:0|h,"number"!=typeof o||o<0?this.shape[1]:0|o,"number"!=typeof x||x<0?this.shape[2]:0|x,"number"!=typeof d||d<0?this.shape[3]:0|d,"number"!=typeof w||w<0?this.shape[4]:0|w,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},g.lo=function(h,o,x,d,w){var _=this.offset,T=0,k=this.shape[0],L=this.shape[1],M=this.shape[2],O=this.shape[3],P=this.shape[4],S=this.stride[0],E=this.stride[1],R=this.stride[2],B=this.stride[3],H=this.stride[4];return"number"==typeof h&&h>=0&&(_+=S*(T=0|h),k-=T),"number"==typeof o&&o>=0&&(_+=E*(T=0|o),L-=T),"number"==typeof x&&x>=0&&(_+=R*(T=0|x),M-=T),"number"==typeof d&&d>=0&&(_+=B*(T=0|d),O-=T),"number"==typeof w&&w>=0&&(_+=H*(T=0|w),P-=T),new f(this.data,k,L,M,O,P,S,E,R,B,H,_)},g.step=function(h,o,x,d,w){var _=this.shape[0],T=this.shape[1],k=this.shape[2],L=this.shape[3],M=this.shape[4],O=this.stride[0],P=this.stride[1],S=this.stride[2],E=this.stride[3],R=this.stride[4],B=this.offset,H=0,V=Math.ceil;return"number"==typeof h&&((H=0|h)<0?(B+=O*(_-1),_=V(-_/H)):_=V(_/H),O*=H),"number"==typeof o&&((H=0|o)<0?(B+=P*(T-1),T=V(-T/H)):T=V(T/H),P*=H),"number"==typeof x&&((H=0|x)<0?(B+=S*(k-1),k=V(-k/H)):k=V(k/H),S*=H),"number"==typeof d&&((H=0|d)<0?(B+=E*(L-1),L=V(-L/H)):L=V(L/H),E*=H),"number"==typeof w&&((H=0|w)<0?(B+=R*(M-1),M=V(-M/H)):M=V(M/H),R*=H),new f(this.data,_,T,k,L,M,O,P,S,E,R,B)},g.transpose=function(h,o,x,d,w){var _=this.shape,T=this.stride;return new f(this.data,_[h=void 0===h?0:0|h],_[o=void 0===o?1:0|o],_[x=void 0===x?2:0|x],_[d=void 0===d?3:0|d],_[w=void 0===w?4:0|w],T[h],T[o],T[x],T[d],T[w],this.offset)},g.pick=function(h,o,x,d,w){var _=[],T=[],k=this.offset;return"number"==typeof h&&h>=0?k=k+this.stride[0]*h|0:(_.push(this.shape[0]),T.push(this.stride[0])),"number"==typeof o&&o>=0?k=k+this.stride[1]*o|0:(_.push(this.shape[1]),T.push(this.stride[1])),"number"==typeof x&&x>=0?k=k+this.stride[2]*x|0:(_.push(this.shape[2]),T.push(this.stride[2])),"number"==typeof d&&d>=0?k=k+this.stride[3]*d|0:(_.push(this.shape[3]),T.push(this.stride[3])),"number"==typeof w&&w>=0?k=k+this.stride[4]*w|0:(_.push(this.shape[4]),T.push(this.stride[4])),(0,l[_.length+1])(this.data,_,T,k)},function(h,o,x,d){return new f(h,o[0],o[1],o[2],o[3],o[4],x[0],x[1],x[2],x[3],x[4],d)}}};function u(i,l){var c=-1===l?"T":String(l),f=r[c];return-1===l?f(i):0===l?f(i,s[i][0]):f(i,s[i],a)}var s={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};b.exports=function(i,l,c,f){if(void 0===i)return(0,s.array[0])([]);"number"==typeof i&&(i=[i]),void 0===l&&(l=[i.length]);var g=l.length;if(void 0===c){c=new Array(g);for(var h=g-1,o=1;h>=0;--h)c[h]=o,o*=l[h]}if(void 0===f)for(f=0,h=0;h<g;++h)c[h]<0&&(f-=(l[h]-1)*c[h]);for(var x=function(w){if(e(w))return"buffer";if(n)switch(Object.prototype.toString.call(w)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(w)?"array":"generic"}(i),d=s[x];d.length<=g+1;)d.push(u(x,d.length-1));return(0,d[g+1])(i,l,c,f)}},{"is-buffer":237}],260:[function(m,b,v){"use strict";var e=m("double-bits"),n=Math.pow(2,-1074);b.exports=function(t,a){if(isNaN(t)||isNaN(a))return NaN;if(t===a)return t;if(0===t)return a<0?-n:n;var r=e.hi(t),u=e.lo(t);return a>t==t>0?u===-1>>>0?(r+=1,u=0):u+=1:0===u?(u=-1>>>0,r-=1):u-=1,e.pack(u,r)}},{"double-bits":64}],261:[function(m,b,v){v.vertexNormals=function(e,n,t){for(var a=n.length,r=new Array(a),u=void 0===t?1e-6:t,s=0;s<a;++s)r[s]=[0,0,0];for(s=0;s<e.length;++s)for(var i=e[s],c=i[i.length-1],f=i[0],g=0;g<i.length;++g){for(var h=n[c],o=n[c=f],x=n[f=i[(g+1)%i.length]],d=new Array(3),w=0,_=new Array(3),T=0,k=0;k<3;++k)d[k]=h[k]-o[k],w+=d[k]*d[k],_[k]=x[k]-o[k],T+=_[k]*_[k];if(w*T>u){var L=r[c],M=1/Math.sqrt(w*T);for(k=0;k<3;++k){var O=(k+1)%3,P=(k+2)%3;L[k]+=M*(_[O]*d[P]-_[P]*d[O])}}}for(s=0;s<a;++s){L=r[s];var S=0;for(k=0;k<3;++k)S+=L[k]*L[k];if(S>u)for(M=1/Math.sqrt(S),k=0;k<3;++k)L[k]*=M;else for(k=0;k<3;++k)L[k]=0}return r},v.faceNormals=function(e,n,t){for(var a=e.length,r=new Array(a),u=void 0===t?1e-6:t,s=0;s<a;++s){for(var i=e[s],l=new Array(3),c=0;c<3;++c)l[c]=n[i[c]];var f=new Array(3),g=new Array(3);for(c=0;c<3;++c)f[c]=l[1][c]-l[0][c],g[c]=l[2][c]-l[0][c];var h=new Array(3),o=0;for(c=0;c<3;++c){var x=(c+1)%3,d=(c+2)%3;h[c]=f[x]*g[d]-f[d]*g[x],o+=h[c]*h[c]}for(o=o>u?1/Math.sqrt(o):0,c=0;c<3;++c)h[c]*=o;r[s]=h}return r}},{}],262:[function(m,b,v){"use strict";b.exports=function(e,n,t,a,r,u,s,i,l,c){var f=n+u+c;if(g>0){var g=Math.sqrt(f+1);e[0]=.5*(s-l)/g,e[1]=.5*(i-a)/g,e[2]=.5*(t-u)/g,e[3]=.5*g}else{var h=Math.max(n,u,c);g=Math.sqrt(2*h-f+1),n>=h?(e[0]=.5*g,e[1]=.5*(r+t)/g,e[2]=.5*(i+a)/g,e[3]=.5*(s-l)/g):u>=h?(e[0]=.5*(t+r)/g,e[1]=.5*g,e[2]=.5*(l+s)/g,e[3]=.5*(i-a)/g):(e[0]=.5*(a+i)/g,e[1]=.5*(s+l)/g,e[2]=.5*g,e[3]=.5*(t-r)/g)}return e}},{}],263:[function(m,b,v){"use strict";b.exports=function(f){var g=(f=f||{}).center||[0,0,0],h=f.rotation||[0,0,0,1],o=f.radius||1;g=[].slice.call(g,0,3),i(h=[].slice.call(h,0,4),h);var x=new l(h,g,Math.log(o));return x.setDistanceLimits(f.zoomMin,f.zoomMax),("eye"in f||"up"in f)&&x.lookAt(0,f.eye,f.center,f.up),x};var e=m("filtered-vector"),n=m("gl-mat4/lookAt"),t=m("gl-mat4/fromQuat"),a=m("gl-mat4/invert"),r=m("./lib/quatFromFrame");function u(f,g,h){return Math.sqrt(Math.pow(f,2)+Math.pow(g,2)+Math.pow(h,2))}function s(f,g,h,o){return Math.sqrt(Math.pow(f,2)+Math.pow(g,2)+Math.pow(h,2)+Math.pow(o,2))}function i(f,g){var h=g[0],o=g[1],x=g[2],d=g[3],w=s(h,o,x,d);w>1e-6?(f[0]=h/w,f[1]=o/w,f[2]=x/w,f[3]=d/w):(f[0]=f[1]=f[2]=0,f[3]=1)}function l(f,g,h){this.radius=e([h]),this.center=e(g),this.rotation=e(f),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var c=l.prototype;c.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},c.recalcMatrix=function(f){this.radius.curve(f),this.center.curve(f),this.rotation.curve(f);var g=this.computedRotation;i(g,g);var h=this.computedMatrix;t(h,g);var o=this.computedCenter,x=this.computedEye,d=this.computedUp,w=Math.exp(this.computedRadius[0]);x[0]=o[0]+w*h[2],x[1]=o[1]+w*h[6],x[2]=o[2]+w*h[10],d[0]=h[1],d[1]=h[5],d[2]=h[9];for(var _=0;_<3;++_){for(var T=0,k=0;k<3;++k)T+=h[_+4*k]*x[k];h[12+_]=-T}},c.getMatrix=function(f,g){this.recalcMatrix(f);var h=this.computedMatrix;if(g){for(var o=0;o<16;++o)g[o]=h[o];return g}return h},c.idle=function(f){this.center.idle(f),this.radius.idle(f),this.rotation.idle(f)},c.flush=function(f){this.center.flush(f),this.radius.flush(f),this.rotation.flush(f)},c.pan=function(f,g,h,o){g=g||0,h=h||0,o=o||0,this.recalcMatrix(f);var x=this.computedMatrix,d=x[1],w=x[5],_=x[9],T=u(d,w,_),k=x[0],L=x[4],M=x[8],O=k*(d/=T)+L*(w/=T)+M*(_/=T),P=u(k-=d*O,L-=w*O,M-=_*O),S=x[2],E=x[6],R=x[10],B=S*d+E*w+R*_,H=S*(k/=P)+E*(L/=P)+R*(M/=P),V=u(S-=B*d+H*k,E-=B*w+H*L,R-=B*_+H*M);S/=V,E/=V,R/=V,this.center.move(f,k*g+d*h,L*g+w*h,M*g+_*h);var X=Math.exp(this.computedRadius[0]);X=Math.max(1e-4,X+o),this.radius.set(f,Math.log(X))},c.rotate=function(f,g,h,o){this.recalcMatrix(f);var x=this.computedMatrix,M=x[2],O=x[6],P=x[10],S=(g=g||0)*x[0]+(h=h||0)*x[1],E=g*x[4]+h*x[5],R=g*x[8]+h*x[9],B=-(O*R-P*E),H=-(P*S-M*R),V=-(M*E-O*S),Z=Math.sqrt(Math.max(0,1-Math.pow(B,2)-Math.pow(H,2)-Math.pow(V,2))),W=s(B,H,V,Z);W>1e-6?(B/=W,H/=W,V/=W,Z/=W):(B=H=V=0,Z=1);var G=this.computedRotation,X=G[0],te=G[1],D=G[2],N=G[3],U=X*Z+N*B+te*V-D*H,Q=te*Z+N*H+D*B-X*V,j=D*Z+N*V+X*H-te*B,J=N*Z-X*B-te*H-D*V;if(o){B=M,H=O,V=P;var K=Math.sin(o)/u(B,H,V);B*=K,H*=K,V*=K,J=J*(Z=Math.cos(g))-(U=U*Z+J*B+Q*V-j*H)*B-(Q=Q*Z+J*H+j*B-U*V)*H-(j=j*Z+J*V+U*H-Q*B)*V}var re=s(U,Q,j,J);re>1e-6?(U/=re,Q/=re,j/=re,J/=re):(U=Q=j=0,J=1),this.rotation.set(f,U,Q,j,J)},c.lookAt=function(f,g,h,o){this.recalcMatrix(f);var x=this.computedMatrix;n(x,g=g||this.computedEye,h=h||this.computedCenter,o=o||this.computedUp);var d=this.computedRotation;r(d,x[0],x[1],x[2],x[4],x[5],x[6],x[8],x[9],x[10]),i(d,d),this.rotation.set(f,d[0],d[1],d[2],d[3]);for(var w=0,_=0;_<3;++_)w+=Math.pow(h[_]-g[_],2);this.radius.set(f,.5*Math.log(Math.max(w,1e-6))),this.center.set(f,h[0],h[1],h[2])},c.translate=function(f,g,h,o){this.center.move(f,g||0,h||0,o||0)},c.setMatrix=function(f,g){var h=this.computedRotation;r(h,g[0],g[1],g[2],g[4],g[5],g[6],g[8],g[9],g[10]),i(h,h),this.rotation.set(f,h[0],h[1],h[2],h[3]);var o=this.computedMatrix;a(o,g);var x=o[15];if(Math.abs(x)>1e-6){var d=o[12]/x,w=o[13]/x,_=o[14]/x;this.recalcMatrix(f);var T=Math.exp(this.computedRadius[0]);this.center.set(f,d-o[2]*T,w-o[6]*T,_-o[10]*T),this.radius.idle(f)}else this.center.idle(f),this.radius.idle(f)},c.setDistance=function(f,g){g>0&&this.radius.set(f,Math.log(g))},c.setDistanceLimits=function(f,g){f=f>0?Math.log(f):-1/0,g=g>0?Math.log(g):1/0,g=Math.max(g,f),this.radius.bounds[0][0]=f,this.radius.bounds[1][0]=g},c.getDistanceLimits=function(f){var g=this.radius.bounds;return f?(f[0]=Math.exp(g[0][0]),f[1]=Math.exp(g[1][0]),f):[Math.exp(g[0][0]),Math.exp(g[1][0])]},c.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},c.fromJSON=function(f){var g=this.lastT(),h=f.center;h&&this.center.set(g,h[0],h[1],h[2]);var o=f.rotation;o&&this.rotation.set(g,o[0],o[1],o[2],o[3]);var x=f.distance;x&&x>0&&this.radius.set(g,Math.log(x)),this.setDistanceLimits(f.zoomMin,f.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(m,b,v){"use strict";var e=m("repeat-string");b.exports=function(n,t,a){return e(a=void 0!==a?a+"":" ",t)+n}},{"repeat-string":277}],265:[function(m,b,v){b.exports=function(e,n){n||(n=[0,""]),e=String(e);var t=parseFloat(e,10);return n[0]=t,n[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}},{}],266:[function(m,b,v){"use strict";b.exports=function(n,t){for(var a=0|t.length,r=n.length,u=[new Array(a),new Array(a)],s=0;s<a;++s)u[0][s]=[],u[1][s]=[];for(s=0;s<r;++s){var i=n[s];u[0][i[0]].push(i),u[1][i[1]].push(i)}var _,l=[];for(s=0;s<a;++s)u[0][s].length+u[1][s].length===0&&l.push([s]);function c(w,_){var T=u[_][w[_]];T.splice(T.indexOf(w),1)}function f(w,_,T){for(var k,L,M,O=0;O<2;++O)if(u[O][_].length>0){k=u[O][_][0],M=O;break}L=k[1^M];for(var P=0;P<2;++P)for(var S=u[P][_],E=0;E<S.length;++E){var R=S[E],B=R[1^P];e(t[w],t[_],t[L],t[B])>0&&(k=R,L=B,M=P)}return T||k&&c(k,M),L}function g(w,_){var T=u[_][w][0],k=[w];c(T,_);for(var L=T[1^_];;){for(;L!==w;)k.push(L),L=f(k[k.length-2],L,!1);if(u[0][w].length+u[1][w].length===0)break;var M=k[k.length-1],O=w,P=k[1],S=f(M,O,!0);if(e(t[M],t[O],t[P],t[S])<0)break;k.push(w),L=f(M,O)}return k}for(s=0;s<a;++s)for(var o=0;o<2;++o){for(var x=[];u[o][s].length>0;){var d=g(s,o);(_=d)[1]===_[_.length-1]?x.push.apply(x,d):(x.length>0&&l.push(x),x=d)}x.length>0&&l.push(x)}return l};var e=m("compare-angle")},{"compare-angle":54}],267:[function(m,b,v){"use strict";b.exports=function(n,t){for(var a=e(n,t.length),r=new Array(t.length),u=new Array(t.length),s=[],i=0;i<t.length;++i){var l=a[i].length;u[i]=l,r[i]=!0,l<=1&&s.push(i)}for(;s.length>0;){var c=s.pop();r[c]=!1;var f=a[c];for(i=0;i<f.length;++i){var g=f[i];0==--u[g]&&s.push(g)}}var h=new Array(t.length),o=[];for(i=0;i<t.length;++i)r[i]?(h[i]=c=o.length,o.push(t[i])):h[i]=-1;var x=[];for(i=0;i<n.length;++i){var d=n[i];r[d[0]]&&r[d[1]]&&x.push([h[d[0]],h[d[1]]])}return[x,o]};var e=m("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(m,b,v){"use strict";b.exports=function(l,c){for(var f=s(l,c),g=(c=f[1]).length,h=e(l=f[0],c.length),o=0;o<g;++o)if(h[o].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var x=n(l,c),d=(x=x.filter(function(oe){for(var pe=oe.length,ce=[0],ge=0;ge<pe;++ge){var xe=c[oe[ge]],we=c[oe[(ge+1)%pe]],be=a(-xe[0],xe[1]),Se=a(-xe[0],we[1]),fe=a(we[0],xe[1]),me=a(we[0],we[1]);ce=r(ce,r(r(be,Se),r(fe,me)))}return ce[ce.length-1]>0})).length,w=new Array(d),_=new Array(d);for(o=0;o<d;++o){w[o]=o;var T=new Array(d),k=x[o].map(function(oe){return c[oe]}),L=t([k]),M=0;e:for(var O=0;O<d;++O)if(T[O]=0,o!==O){for(var P=(ne=x[O]).length,S=0;S<P;++S){var E=L(c[ne[S]]);if(0!==E){E<0&&(T[O]=1,M+=1);continue e}}T[O]=1,M+=1}_[o]=[M,o,T]}for(_.sort(function(oe,pe){return pe[0]-oe[0]}),o=0;o<d;++o){var R=(T=_[o])[1],B=T[2];for(O=0;O<d;++O)B[O]&&(w[O]=R)}var H=function(oe){for(var pe=new Array(oe),ce=0;ce<oe;++ce)pe[ce]=[];return pe}(d);for(o=0;o<d;++o)H[o].push(w[o]),H[w[o]].push(o);var V={},Z=i(g,!1);for(o=0;o<d;++o)for(P=(ne=x[o]).length,O=0;O<P;++O){var W=ne[O],G=ne[(O+1)%P],X=Math.min(W,G)+":"+Math.max(W,G);if(X in V){var te=V[X];H[te].push(o),H[o].push(te),Z[W]=Z[G]=!0}else V[X]=o}function D(oe){for(var pe=oe.length,ce=0;ce<pe;++ce)if(!Z[oe[ce]])return!1;return!0}var N=[],U=i(d,-1);for(o=0;o<d;++o)w[o]!==o||D(x[o])?U[o]=-1:(N.push(o),U[o]=0);for(f=[];N.length>0;){var Q=N.pop(),j=H[Q];u(j,function(oe,pe){return oe-pe});var J,K=j.length,re=U[Q];if(0===re){var ne=x[Q];J=[ne]}for(o=0;o<K;++o){var se=j[o];U[se]>=0||(U[se]=1^re,N.push(se),0===re&&(D(ne=x[se])||(ne.reverse(),J.push(ne))))}0===re&&f.push(J)}return f};var e=m("edges-to-adjacency-list"),n=m("planar-dual"),t=m("point-in-big-polygon"),a=m("two-product"),r=m("robust-sum"),u=m("uniq"),s=m("./lib/trim-leaves");function i(l,c){for(var f=new Array(l),g=0;g<l;++g)f[g]=c;return f}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(m,b,v){b.exports=function(i){for(var l=i.length,c=[],f=[],g=0;g<l;++g)for(var h=i[g],o=h.length,x=o-1,d=0;d<o;x=d++){var w=h[x],_=h[d];w[0]===_[0]?f.push([w,_]):c.push([w,_])}if(0===c.length)return 0===f.length?s:(T=u(f),function(M){return T(M[0],M[1])?0:1});var T,M,O,k=n(c),L=(M=k.slabs,O=k.coordinates,function(P){var S=a.le(O,P[0]);if(S<0)return 1;var E=M[S];if(!E){if(!(S>0&&O[S]===P[0]))return 1;E=M[S-1]}for(var R=1;E;){var B=E.key,H=e(P,B[0],B[1]);if(B[0][0]<B[1][0])if(H<0)E=E.left;else{if(!(H>0))return 0;R=-1,E=E.right}else if(H>0)E=E.left;else{if(!(H<0))return 0;R=1,E=E.right}}return R});return 0===f.length?L:function(M,O){return function(P){return M(P[0],P[1])?0:O(P)}}(u(f),L)};var e=m("robust-orientation")[3],n=m("slab-decomposition"),t=m("interval-tree-1d"),a=m("binary-search-bounds");function r(){return!0}function u(i){for(var l={},c=0;c<i.length;++c){var f=i[c],g=f[0][0],h=f[0][1],o=f[1][1],x=[Math.min(h,o),Math.max(h,o)];g in l?l[g].push(x):l[g]=[x]}var T,d={},w=Object.keys(l);for(c=0;c<w.length;++c)d[w[c]]=t(l[w[c]]);return T=d,function(k,L){var M=T[k];return!!M&&!!M.queryPoint(L,r)}}function s(i){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(m,b,v){"use strict";var e=new Float64Array(4),n=new Float64Array(4),t=new Float64Array(4);b.exports=function(a,r,u,s,i){e.length<s.length&&(e=new Float64Array(s.length),n=new Float64Array(s.length),t=new Float64Array(s.length));for(var l=0;l<s.length;++l)e[l]=a[l]-s[l],n[l]=r[l]-a[l],t[l]=u[l]-a[l];var c=0,f=0,g=0,h=0,o=0,x=0;for(l=0;l<s.length;++l){var d=n[l],w=t[l],_=e[l];c+=d*d,f+=d*w,g+=w*w,h+=_*d,o+=_*w,x+=_*_}var T,k,L,M,O,P=Math.abs(c*g-f*f),S=f*o-g*h,E=f*h-c*o;if(S+E<=P)if(S<0)E<0&&h<0?(E=0,-h>=c?(S=1,T=c+2*h+x):T=h*(S=-h/c)+x):(S=0,o>=0?(E=0,T=x):-o>=g?(E=1,T=g+2*o+x):T=o*(E=-o/g)+x);else if(E<0)E=0,h>=0?(S=0,T=x):-h>=c?(S=1,T=c+2*h+x):T=h*(S=-h/c)+x;else{var R=1/P;T=(S*=R)*(c*S+f*(E*=R)+2*h)+E*(f*S+g*E+2*o)+x}else S<0?(L=g+o)>(k=f+h)?(M=L-k)>=(O=c-2*f+g)?(S=1,E=0,T=c+2*h+x):T=(S=M/O)*(c*S+f*(E=1-S)+2*h)+E*(f*S+g*E+2*o)+x:(S=0,L<=0?(E=1,T=g+2*o+x):o>=0?(E=0,T=x):T=o*(E=-o/g)+x):E<0?(L=c+h)>(k=f+o)?(M=L-k)>=(O=c-2*f+g)?(E=1,S=0,T=g+2*o+x):T=(S=1-(E=M/O))*(c*S+f*E+2*h)+E*(f*S+g*E+2*o)+x:(E=0,L<=0?(S=1,T=c+2*h+x):h>=0?(S=0,T=x):T=h*(S=-h/c)+x):(M=g+o-f-h)<=0?(S=0,E=1,T=g+2*o+x):M>=(O=c-2*f+g)?(S=1,E=0,T=c+2*h+x):T=(S=M/O)*(c*S+f*(E=1-S)+2*h)+E*(f*S+g*E+2*o)+x;var B=1-S-E;for(l=0;l<s.length;++l)i[l]=B*a[l]+S*r[l]+E*u[l];return T<0?0:T}},{}],271:[function(m,b,v){b.exports=m("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(m,b,v){"use strict";var e=m("big-rat/add");b.exports=function(n,t){for(var a=n.length,r=new Array(a),u=0;u<a;++u)r[u]=e(n[u],t[u]);return r}},{"big-rat/add":15}],273:[function(m,b,v){"use strict";b.exports=function(n){for(var t=new Array(n.length),a=0;a<n.length;++a)t[a]=e(n[a]);return t};var e=m("big-rat")},{"big-rat":18}],274:[function(m,b,v){"use strict";var e=m("big-rat"),n=m("big-rat/mul");b.exports=function(t,a){for(var r=e(a),u=t.length,s=new Array(u),i=0;i<u;++i)s[i]=n(t[i],r);return s}},{"big-rat":18,"big-rat/mul":27}],275:[function(m,b,v){"use strict";var e=m("big-rat/sub");b.exports=function(n,t){for(var a=n.length,r=new Array(a),u=0;u<a;++u)r[u]=e(n[u],t[u]);return r}},{"big-rat/sub":29}],276:[function(m,b,v){"use strict";var e=m("compare-cell"),n=m("compare-oriented-cell"),t=m("cell-orientation");b.exports=function(a){a.sort(n);for(var r=a.length,u=0,s=0;s<r;++s){var i=a[s],l=t(i);if(0!==l){if(u>0){var c=a[u-1];if(0===e(i,c)&&t(c)!==l){u-=1;continue}}a[u++]=i}}return a.length=u,a}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(m,b,v){"use strict";var e,n="";b.exports=function(t,a){if("string"!=typeof t)throw new TypeError("expected a string");if(1===a)return t;if(2===a)return t+t;var r=t.length*a;if(e!==t||void 0===e)e=t,n="";else if(n.length>=r)return n.substr(0,r);for(;r>n.length&&a>1;)1&a&&(n+=t),a>>=1,t+=t;return n=(n+=t).substr(0,r)}},{}],278:[function(m,b,v){(function(e){(function(){b.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==p?p:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(m,b,v){"use strict";b.exports=function(e){for(var n=e.length,t=e[e.length-1],a=n,r=n-2;r>=0;--r){var u=t,s=e[r];(l=s-((t=u+s)-u))&&(e[--a]=t,t=l)}var i=0;for(r=a;r<n;++r){var l;(l=(s=t)-((t=(u=e[r])+s)-u))&&(e[i++]=l)}return e[i++]=t,e.length=i,e}},{}],280:[function(m,b,v){"use strict";var e=m("two-product"),n=m("robust-sum"),t=m("robust-scale"),a=m("robust-compress");function r(c,f,g,h){return function(o){return h(c(g(o[0][0],o[1][1]),g(-o[0][1],o[1][0])))}}function u(c,f,g,h){return function(o){return h(c(f(c(g(o[1][1],o[2][2]),g(-o[1][2],o[2][1])),o[0][0]),c(f(c(g(o[1][0],o[2][2]),g(-o[1][2],o[2][0])),-o[0][1]),f(c(g(o[1][0],o[2][1]),g(-o[1][1],o[2][0])),o[0][2]))))}}function s(c){return(2===c?r:3===c?u:void 0)(n,t,e,a)}var i=[function(){return[0]},function(c){return[c[0][0]]}];function l(c,f,g,h,o,x){return function(d){switch(d.length){case 0:return c(d);case 1:return f(d);case 2:return g(d);case 3:return h(d)}var w=o[d.length];return w||(w=o[d.length]=x(d.length)),w(d)}}!function(){for(;i.length<4;)i.push(s(i.length));b.exports=l.apply(void 0,i.concat([i,s]));for(var c=0;c<i.length;++c)b.exports[c]=i[c]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(m,b,v){"use strict";var e=m("two-product"),n=m("robust-sum");b.exports=function(t,a){for(var r=e(t[0],a[0]),u=1;u<t.length;++u)r=n(r,e(t[u],a[u]));return r}},{"robust-sum":289,"two-product":306}],282:[function(m,b,v){"use strict";var e=m("two-product"),n=m("robust-sum"),t=m("robust-subtract"),a=m("robust-scale");function r(h){return(3===h?u:4===h?s:5===h?i:l)(n,t,e,a)}function u(h,o,x,d){return function(w,_,T){var k=x(w[0],w[0]),L=d(k,_[0]),M=d(k,T[0]),O=x(_[0],_[0]),P=d(O,w[0]),S=d(O,T[0]),E=x(T[0],T[0]),R=d(E,w[0]),B=d(E,_[0]),H=h(o(B,S),o(P,L)),V=o(R,M),Z=o(H,V);return Z[Z.length-1]}}function s(h,o,x,d){return function(w,_,T,k){var L=h(x(w[0],w[0]),x(w[1],w[1])),M=d(L,_[0]),O=d(L,T[0]),P=d(L,k[0]),S=h(x(_[0],_[0]),x(_[1],_[1])),E=d(S,w[0]),R=d(S,T[0]),B=d(S,k[0]),H=h(x(T[0],T[0]),x(T[1],T[1])),V=d(H,w[0]),Z=d(H,_[0]),W=d(H,k[0]),G=h(x(k[0],k[0]),x(k[1],k[1])),X=d(G,w[0]),te=d(G,_[0]),D=d(G,T[0]),N=h(h(d(o(D,W),_[1]),h(d(o(te,B),-T[1]),d(o(Z,R),k[1]))),h(d(o(te,B),w[1]),h(d(o(X,P),-_[1]),d(o(E,M),k[1])))),U=h(h(d(o(D,W),w[1]),h(d(o(X,P),-T[1]),d(o(V,O),k[1]))),h(d(o(Z,R),w[1]),h(d(o(V,O),-_[1]),d(o(E,M),T[1])))),Q=o(N,U);return Q[Q.length-1]}}function i(h,o,x,d){return function(w,_,T,k,L){var M=h(x(w[0],w[0]),h(x(w[1],w[1]),x(w[2],w[2]))),O=d(M,_[0]),P=d(M,T[0]),S=d(M,k[0]),E=d(M,L[0]),R=h(x(_[0],_[0]),h(x(_[1],_[1]),x(_[2],_[2]))),B=d(R,w[0]),H=d(R,T[0]),V=d(R,k[0]),Z=d(R,L[0]),W=h(x(T[0],T[0]),h(x(T[1],T[1]),x(T[2],T[2]))),G=d(W,w[0]),X=d(W,_[0]),te=d(W,k[0]),D=d(W,L[0]),N=h(x(k[0],k[0]),h(x(k[1],k[1]),x(k[2],k[2]))),U=d(N,w[0]),Q=d(N,_[0]),j=d(N,T[0]),J=d(N,L[0]),K=h(x(L[0],L[0]),h(x(L[1],L[1]),x(L[2],L[2]))),re=d(K,w[0]),ne=d(K,_[0]),se=d(K,T[0]),oe=d(K,k[0]),pe=h(h(h(d(h(d(o(oe,J),T[1]),h(d(o(se,D),-k[1]),d(o(j,te),L[1]))),_[2]),h(d(h(d(o(oe,J),_[1]),h(d(o(ne,Z),-k[1]),d(o(Q,V),L[1]))),-T[2]),d(h(d(o(se,D),_[1]),h(d(o(ne,Z),-T[1]),d(o(X,H),L[1]))),k[2]))),h(d(h(d(o(j,te),_[1]),h(d(o(Q,V),-T[1]),d(o(X,H),k[1]))),-L[2]),h(d(h(d(o(oe,J),_[1]),h(d(o(ne,Z),-k[1]),d(o(Q,V),L[1]))),w[2]),d(h(d(o(oe,J),w[1]),h(d(o(re,E),-k[1]),d(o(U,S),L[1]))),-_[2])))),h(h(d(h(d(o(ne,Z),w[1]),h(d(o(re,E),-_[1]),d(o(B,O),L[1]))),k[2]),h(d(h(d(o(Q,V),w[1]),h(d(o(U,S),-_[1]),d(o(B,O),k[1]))),-L[2]),d(h(d(o(j,te),_[1]),h(d(o(Q,V),-T[1]),d(o(X,H),k[1]))),w[2]))),h(d(h(d(o(j,te),w[1]),h(d(o(U,S),-T[1]),d(o(G,P),k[1]))),-_[2]),h(d(h(d(o(Q,V),w[1]),h(d(o(U,S),-_[1]),d(o(B,O),k[1]))),T[2]),d(h(d(o(X,H),w[1]),h(d(o(G,P),-_[1]),d(o(B,O),T[1]))),-k[2]))))),ce=h(h(h(d(h(d(o(oe,J),T[1]),h(d(o(se,D),-k[1]),d(o(j,te),L[1]))),w[2]),d(h(d(o(oe,J),w[1]),h(d(o(re,E),-k[1]),d(o(U,S),L[1]))),-T[2])),h(d(h(d(o(se,D),w[1]),h(d(o(re,E),-T[1]),d(o(G,P),L[1]))),k[2]),d(h(d(o(j,te),w[1]),h(d(o(U,S),-T[1]),d(o(G,P),k[1]))),-L[2]))),h(h(d(h(d(o(se,D),_[1]),h(d(o(ne,Z),-T[1]),d(o(X,H),L[1]))),w[2]),d(h(d(o(se,D),w[1]),h(d(o(re,E),-T[1]),d(o(G,P),L[1]))),-_[2])),h(d(h(d(o(ne,Z),w[1]),h(d(o(re,E),-_[1]),d(o(B,O),L[1]))),T[2]),d(h(d(o(X,H),w[1]),h(d(o(G,P),-_[1]),d(o(B,O),T[1]))),-L[2])))),ge=o(pe,ce);return ge[ge.length-1]}}function l(h,o,x,d){return function(w,_,T,k,L,M){var O=h(h(x(w[0],w[0]),x(w[1],w[1])),h(x(w[2],w[2]),x(w[3],w[3]))),P=d(O,_[0]),S=d(O,T[0]),E=d(O,k[0]),R=d(O,L[0]),B=d(O,M[0]),H=h(h(x(_[0],_[0]),x(_[1],_[1])),h(x(_[2],_[2]),x(_[3],_[3]))),V=d(H,w[0]),Z=d(H,T[0]),W=d(H,k[0]),G=d(H,L[0]),X=d(H,M[0]),te=h(h(x(T[0],T[0]),x(T[1],T[1])),h(x(T[2],T[2]),x(T[3],T[3]))),D=d(te,w[0]),N=d(te,_[0]),U=d(te,k[0]),Q=d(te,L[0]),j=d(te,M[0]),J=h(h(x(k[0],k[0]),x(k[1],k[1])),h(x(k[2],k[2]),x(k[3],k[3]))),K=d(J,w[0]),re=d(J,_[0]),ne=d(J,T[0]),se=d(J,L[0]),oe=d(J,M[0]),pe=h(h(x(L[0],L[0]),x(L[1],L[1])),h(x(L[2],L[2]),x(L[3],L[3]))),ce=d(pe,w[0]),ge=d(pe,_[0]),xe=d(pe,T[0]),we=d(pe,k[0]),be=d(pe,M[0]),Se=h(h(x(M[0],M[0]),x(M[1],M[1])),h(x(M[2],M[2]),x(M[3],M[3]))),fe=d(Se,w[0]),me=d(Se,_[0]),Te=d(Se,T[0]),_e=d(Se,k[0]),Me=d(Se,L[0]),Ie=h(h(h(d(h(h(d(h(d(o(Me,be),k[1]),h(d(o(_e,oe),-L[1]),d(o(we,se),M[1]))),T[2]),d(h(d(o(Me,be),T[1]),h(d(o(Te,j),-L[1]),d(o(xe,Q),M[1]))),-k[2])),h(d(h(d(o(_e,oe),T[1]),h(d(o(Te,j),-k[1]),d(o(ne,U),M[1]))),L[2]),d(h(d(o(we,se),T[1]),h(d(o(xe,Q),-k[1]),d(o(ne,U),L[1]))),-M[2]))),_[3]),h(d(h(h(d(h(d(o(Me,be),k[1]),h(d(o(_e,oe),-L[1]),d(o(we,se),M[1]))),_[2]),d(h(d(o(Me,be),_[1]),h(d(o(me,X),-L[1]),d(o(ge,G),M[1]))),-k[2])),h(d(h(d(o(_e,oe),_[1]),h(d(o(me,X),-k[1]),d(o(re,W),M[1]))),L[2]),d(h(d(o(we,se),_[1]),h(d(o(ge,G),-k[1]),d(o(re,W),L[1]))),-M[2]))),-T[3]),d(h(h(d(h(d(o(Me,be),T[1]),h(d(o(Te,j),-L[1]),d(o(xe,Q),M[1]))),_[2]),d(h(d(o(Me,be),_[1]),h(d(o(me,X),-L[1]),d(o(ge,G),M[1]))),-T[2])),h(d(h(d(o(Te,j),_[1]),h(d(o(me,X),-T[1]),d(o(N,Z),M[1]))),L[2]),d(h(d(o(xe,Q),_[1]),h(d(o(ge,G),-T[1]),d(o(N,Z),L[1]))),-M[2]))),k[3]))),h(h(d(h(h(d(h(d(o(_e,oe),T[1]),h(d(o(Te,j),-k[1]),d(o(ne,U),M[1]))),_[2]),d(h(d(o(_e,oe),_[1]),h(d(o(me,X),-k[1]),d(o(re,W),M[1]))),-T[2])),h(d(h(d(o(Te,j),_[1]),h(d(o(me,X),-T[1]),d(o(N,Z),M[1]))),k[2]),d(h(d(o(ne,U),_[1]),h(d(o(re,W),-T[1]),d(o(N,Z),k[1]))),-M[2]))),-L[3]),d(h(h(d(h(d(o(we,se),T[1]),h(d(o(xe,Q),-k[1]),d(o(ne,U),L[1]))),_[2]),d(h(d(o(we,se),_[1]),h(d(o(ge,G),-k[1]),d(o(re,W),L[1]))),-T[2])),h(d(h(d(o(xe,Q),_[1]),h(d(o(ge,G),-T[1]),d(o(N,Z),L[1]))),k[2]),d(h(d(o(ne,U),_[1]),h(d(o(re,W),-T[1]),d(o(N,Z),k[1]))),-L[2]))),M[3])),h(d(h(h(d(h(d(o(Me,be),k[1]),h(d(o(_e,oe),-L[1]),d(o(we,se),M[1]))),_[2]),d(h(d(o(Me,be),_[1]),h(d(o(me,X),-L[1]),d(o(ge,G),M[1]))),-k[2])),h(d(h(d(o(_e,oe),_[1]),h(d(o(me,X),-k[1]),d(o(re,W),M[1]))),L[2]),d(h(d(o(we,se),_[1]),h(d(o(ge,G),-k[1]),d(o(re,W),L[1]))),-M[2]))),w[3]),d(h(h(d(h(d(o(Me,be),k[1]),h(d(o(_e,oe),-L[1]),d(o(we,se),M[1]))),w[2]),d(h(d(o(Me,be),w[1]),h(d(o(fe,B),-L[1]),d(o(ce,R),M[1]))),-k[2])),h(d(h(d(o(_e,oe),w[1]),h(d(o(fe,B),-k[1]),d(o(K,E),M[1]))),L[2]),d(h(d(o(we,se),w[1]),h(d(o(ce,R),-k[1]),d(o(K,E),L[1]))),-M[2]))),-_[3])))),h(h(h(d(h(h(d(h(d(o(Me,be),_[1]),h(d(o(me,X),-L[1]),d(o(ge,G),M[1]))),w[2]),d(h(d(o(Me,be),w[1]),h(d(o(fe,B),-L[1]),d(o(ce,R),M[1]))),-_[2])),h(d(h(d(o(me,X),w[1]),h(d(o(fe,B),-_[1]),d(o(V,P),M[1]))),L[2]),d(h(d(o(ge,G),w[1]),h(d(o(ce,R),-_[1]),d(o(V,P),L[1]))),-M[2]))),k[3]),d(h(h(d(h(d(o(_e,oe),_[1]),h(d(o(me,X),-k[1]),d(o(re,W),M[1]))),w[2]),d(h(d(o(_e,oe),w[1]),h(d(o(fe,B),-k[1]),d(o(K,E),M[1]))),-_[2])),h(d(h(d(o(me,X),w[1]),h(d(o(fe,B),-_[1]),d(o(V,P),M[1]))),k[2]),d(h(d(o(re,W),w[1]),h(d(o(K,E),-_[1]),d(o(V,P),k[1]))),-M[2]))),-L[3])),h(d(h(h(d(h(d(o(we,se),_[1]),h(d(o(ge,G),-k[1]),d(o(re,W),L[1]))),w[2]),d(h(d(o(we,se),w[1]),h(d(o(ce,R),-k[1]),d(o(K,E),L[1]))),-_[2])),h(d(h(d(o(ge,G),w[1]),h(d(o(ce,R),-_[1]),d(o(V,P),L[1]))),k[2]),d(h(d(o(re,W),w[1]),h(d(o(K,E),-_[1]),d(o(V,P),k[1]))),-L[2]))),M[3]),d(h(h(d(h(d(o(_e,oe),T[1]),h(d(o(Te,j),-k[1]),d(o(ne,U),M[1]))),_[2]),d(h(d(o(_e,oe),_[1]),h(d(o(me,X),-k[1]),d(o(re,W),M[1]))),-T[2])),h(d(h(d(o(Te,j),_[1]),h(d(o(me,X),-T[1]),d(o(N,Z),M[1]))),k[2]),d(h(d(o(ne,U),_[1]),h(d(o(re,W),-T[1]),d(o(N,Z),k[1]))),-M[2]))),w[3]))),h(h(d(h(h(d(h(d(o(_e,oe),T[1]),h(d(o(Te,j),-k[1]),d(o(ne,U),M[1]))),w[2]),d(h(d(o(_e,oe),w[1]),h(d(o(fe,B),-k[1]),d(o(K,E),M[1]))),-T[2])),h(d(h(d(o(Te,j),w[1]),h(d(o(fe,B),-T[1]),d(o(D,S),M[1]))),k[2]),d(h(d(o(ne,U),w[1]),h(d(o(K,E),-T[1]),d(o(D,S),k[1]))),-M[2]))),-_[3]),d(h(h(d(h(d(o(_e,oe),_[1]),h(d(o(me,X),-k[1]),d(o(re,W),M[1]))),w[2]),d(h(d(o(_e,oe),w[1]),h(d(o(fe,B),-k[1]),d(o(K,E),M[1]))),-_[2])),h(d(h(d(o(me,X),w[1]),h(d(o(fe,B),-_[1]),d(o(V,P),M[1]))),k[2]),d(h(d(o(re,W),w[1]),h(d(o(K,E),-_[1]),d(o(V,P),k[1]))),-M[2]))),T[3])),h(d(h(h(d(h(d(o(Te,j),_[1]),h(d(o(me,X),-T[1]),d(o(N,Z),M[1]))),w[2]),d(h(d(o(Te,j),w[1]),h(d(o(fe,B),-T[1]),d(o(D,S),M[1]))),-_[2])),h(d(h(d(o(me,X),w[1]),h(d(o(fe,B),-_[1]),d(o(V,P),M[1]))),T[2]),d(h(d(o(N,Z),w[1]),h(d(o(D,S),-_[1]),d(o(V,P),T[1]))),-M[2]))),-k[3]),d(h(h(d(h(d(o(ne,U),_[1]),h(d(o(re,W),-T[1]),d(o(N,Z),k[1]))),w[2]),d(h(d(o(ne,U),w[1]),h(d(o(K,E),-T[1]),d(o(D,S),k[1]))),-_[2])),h(d(h(d(o(re,W),w[1]),h(d(o(K,E),-_[1]),d(o(V,P),k[1]))),T[2]),d(h(d(o(N,Z),w[1]),h(d(o(D,S),-_[1]),d(o(V,P),T[1]))),-k[2]))),M[3]))))),ze=h(h(h(d(h(h(d(h(d(o(Me,be),k[1]),h(d(o(_e,oe),-L[1]),d(o(we,se),M[1]))),T[2]),d(h(d(o(Me,be),T[1]),h(d(o(Te,j),-L[1]),d(o(xe,Q),M[1]))),-k[2])),h(d(h(d(o(_e,oe),T[1]),h(d(o(Te,j),-k[1]),d(o(ne,U),M[1]))),L[2]),d(h(d(o(we,se),T[1]),h(d(o(xe,Q),-k[1]),d(o(ne,U),L[1]))),-M[2]))),w[3]),h(d(h(h(d(h(d(o(Me,be),k[1]),h(d(o(_e,oe),-L[1]),d(o(we,se),M[1]))),w[2]),d(h(d(o(Me,be),w[1]),h(d(o(fe,B),-L[1]),d(o(ce,R),M[1]))),-k[2])),h(d(h(d(o(_e,oe),w[1]),h(d(o(fe,B),-k[1]),d(o(K,E),M[1]))),L[2]),d(h(d(o(we,se),w[1]),h(d(o(ce,R),-k[1]),d(o(K,E),L[1]))),-M[2]))),-T[3]),d(h(h(d(h(d(o(Me,be),T[1]),h(d(o(Te,j),-L[1]),d(o(xe,Q),M[1]))),w[2]),d(h(d(o(Me,be),w[1]),h(d(o(fe,B),-L[1]),d(o(ce,R),M[1]))),-T[2])),h(d(h(d(o(Te,j),w[1]),h(d(o(fe,B),-T[1]),d(o(D,S),M[1]))),L[2]),d(h(d(o(xe,Q),w[1]),h(d(o(ce,R),-T[1]),d(o(D,S),L[1]))),-M[2]))),k[3]))),h(h(d(h(h(d(h(d(o(_e,oe),T[1]),h(d(o(Te,j),-k[1]),d(o(ne,U),M[1]))),w[2]),d(h(d(o(_e,oe),w[1]),h(d(o(fe,B),-k[1]),d(o(K,E),M[1]))),-T[2])),h(d(h(d(o(Te,j),w[1]),h(d(o(fe,B),-T[1]),d(o(D,S),M[1]))),k[2]),d(h(d(o(ne,U),w[1]),h(d(o(K,E),-T[1]),d(o(D,S),k[1]))),-M[2]))),-L[3]),d(h(h(d(h(d(o(we,se),T[1]),h(d(o(xe,Q),-k[1]),d(o(ne,U),L[1]))),w[2]),d(h(d(o(we,se),w[1]),h(d(o(ce,R),-k[1]),d(o(K,E),L[1]))),-T[2])),h(d(h(d(o(xe,Q),w[1]),h(d(o(ce,R),-T[1]),d(o(D,S),L[1]))),k[2]),d(h(d(o(ne,U),w[1]),h(d(o(K,E),-T[1]),d(o(D,S),k[1]))),-L[2]))),M[3])),h(d(h(h(d(h(d(o(Me,be),T[1]),h(d(o(Te,j),-L[1]),d(o(xe,Q),M[1]))),_[2]),d(h(d(o(Me,be),_[1]),h(d(o(me,X),-L[1]),d(o(ge,G),M[1]))),-T[2])),h(d(h(d(o(Te,j),_[1]),h(d(o(me,X),-T[1]),d(o(N,Z),M[1]))),L[2]),d(h(d(o(xe,Q),_[1]),h(d(o(ge,G),-T[1]),d(o(N,Z),L[1]))),-M[2]))),w[3]),d(h(h(d(h(d(o(Me,be),T[1]),h(d(o(Te,j),-L[1]),d(o(xe,Q),M[1]))),w[2]),d(h(d(o(Me,be),w[1]),h(d(o(fe,B),-L[1]),d(o(ce,R),M[1]))),-T[2])),h(d(h(d(o(Te,j),w[1]),h(d(o(fe,B),-T[1]),d(o(D,S),M[1]))),L[2]),d(h(d(o(xe,Q),w[1]),h(d(o(ce,R),-T[1]),d(o(D,S),L[1]))),-M[2]))),-_[3])))),h(h(h(d(h(h(d(h(d(o(Me,be),_[1]),h(d(o(me,X),-L[1]),d(o(ge,G),M[1]))),w[2]),d(h(d(o(Me,be),w[1]),h(d(o(fe,B),-L[1]),d(o(ce,R),M[1]))),-_[2])),h(d(h(d(o(me,X),w[1]),h(d(o(fe,B),-_[1]),d(o(V,P),M[1]))),L[2]),d(h(d(o(ge,G),w[1]),h(d(o(ce,R),-_[1]),d(o(V,P),L[1]))),-M[2]))),T[3]),d(h(h(d(h(d(o(Te,j),_[1]),h(d(o(me,X),-T[1]),d(o(N,Z),M[1]))),w[2]),d(h(d(o(Te,j),w[1]),h(d(o(fe,B),-T[1]),d(o(D,S),M[1]))),-_[2])),h(d(h(d(o(me,X),w[1]),h(d(o(fe,B),-_[1]),d(o(V,P),M[1]))),T[2]),d(h(d(o(N,Z),w[1]),h(d(o(D,S),-_[1]),d(o(V,P),T[1]))),-M[2]))),-L[3])),h(d(h(h(d(h(d(o(xe,Q),_[1]),h(d(o(ge,G),-T[1]),d(o(N,Z),L[1]))),w[2]),d(h(d(o(xe,Q),w[1]),h(d(o(ce,R),-T[1]),d(o(D,S),L[1]))),-_[2])),h(d(h(d(o(ge,G),w[1]),h(d(o(ce,R),-_[1]),d(o(V,P),L[1]))),T[2]),d(h(d(o(N,Z),w[1]),h(d(o(D,S),-_[1]),d(o(V,P),T[1]))),-L[2]))),M[3]),d(h(h(d(h(d(o(we,se),T[1]),h(d(o(xe,Q),-k[1]),d(o(ne,U),L[1]))),_[2]),d(h(d(o(we,se),_[1]),h(d(o(ge,G),-k[1]),d(o(re,W),L[1]))),-T[2])),h(d(h(d(o(xe,Q),_[1]),h(d(o(ge,G),-T[1]),d(o(N,Z),L[1]))),k[2]),d(h(d(o(ne,U),_[1]),h(d(o(re,W),-T[1]),d(o(N,Z),k[1]))),-L[2]))),w[3]))),h(h(d(h(h(d(h(d(o(we,se),T[1]),h(d(o(xe,Q),-k[1]),d(o(ne,U),L[1]))),w[2]),d(h(d(o(we,se),w[1]),h(d(o(ce,R),-k[1]),d(o(K,E),L[1]))),-T[2])),h(d(h(d(o(xe,Q),w[1]),h(d(o(ce,R),-T[1]),d(o(D,S),L[1]))),k[2]),d(h(d(o(ne,U),w[1]),h(d(o(K,E),-T[1]),d(o(D,S),k[1]))),-L[2]))),-_[3]),d(h(h(d(h(d(o(we,se),_[1]),h(d(o(ge,G),-k[1]),d(o(re,W),L[1]))),w[2]),d(h(d(o(we,se),w[1]),h(d(o(ce,R),-k[1]),d(o(K,E),L[1]))),-_[2])),h(d(h(d(o(ge,G),w[1]),h(d(o(ce,R),-_[1]),d(o(V,P),L[1]))),k[2]),d(h(d(o(re,W),w[1]),h(d(o(K,E),-_[1]),d(o(V,P),k[1]))),-L[2]))),T[3])),h(d(h(h(d(h(d(o(xe,Q),_[1]),h(d(o(ge,G),-T[1]),d(o(N,Z),L[1]))),w[2]),d(h(d(o(xe,Q),w[1]),h(d(o(ce,R),-T[1]),d(o(D,S),L[1]))),-_[2])),h(d(h(d(o(ge,G),w[1]),h(d(o(ce,R),-_[1]),d(o(V,P),L[1]))),T[2]),d(h(d(o(N,Z),w[1]),h(d(o(D,S),-_[1]),d(o(V,P),T[1]))),-L[2]))),-k[3]),d(h(h(d(h(d(o(ne,U),_[1]),h(d(o(re,W),-T[1]),d(o(N,Z),k[1]))),w[2]),d(h(d(o(ne,U),w[1]),h(d(o(K,E),-T[1]),d(o(D,S),k[1]))),-_[2])),h(d(h(d(o(re,W),w[1]),h(d(o(K,E),-_[1]),d(o(V,P),k[1]))),T[2]),d(h(d(o(N,Z),w[1]),h(d(o(D,S),-_[1]),d(o(V,P),T[1]))),-k[2]))),L[3]))))),Ve=o(Ie,ze);return Ve[Ve.length-1]}}var c=[function(){return 0},function(){return 0},function(){return 0}];function f(h){var o=c[h.length];return o||(o=c[h.length]=r(h.length)),o.apply(void 0,h)}function g(h,o,x,d,w,_,T,k){return function(L,M,O,P,S,E){switch(arguments.length){case 0:case 1:return 0;case 2:return d(L,M);case 3:return w(L,M,O);case 4:return _(L,M,O,P);case 5:return T(L,M,O,P,S);case 6:return k(L,M,O,P,S,E)}for(var R=new Array(arguments.length),B=0;B<arguments.length;++B)R[B]=arguments[B];return h(R)}}!function(){for(;c.length<=6;)c.push(r(c.length));b.exports=g.apply(void 0,[f].concat(c));for(var h=0;h<=6;++h)b.exports[h]=c[h]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(m,b,v){"use strict";var e=m("robust-determinant");function n(s){return(2===s?t:a)(s<3?e[s]:e)}function t(s){return function(i,l){return[s([[+l[0],+i[0][1]],[+l[1],+i[1][1]]]),s([[+i[0][0],+l[0]],[+i[1][0],+l[1]]]),s(i)]}}function a(s){return function(i,l){return[s([[+l[0],+i[0][1],+i[0][2]],[+l[1],+i[1][1],+i[1][2]],[+l[2],+i[2][1],+i[2][2]]]),s([[+i[0][0],+l[0],+i[0][2]],[+i[1][0],+l[1],+i[1][2]],[+i[2][0],+l[2],+i[2][2]]]),s([[+i[0][0],+i[0][1],+l[0]],[+i[1][0],+i[1][1],+l[1]],[+i[2][0],+i[2][1],+l[2]]]),s(i)]}}var r=[function(){return[[0]]},function(s,i){return[[i[0]],[s[0][0]]]}];function u(s,i,l,c,f,g){return function(h,o){switch(h.length){case 0:return s(h,o);case 1:return i(h,o);case 2:return l(h,o);case 3:return c(h,o)}var x=f[h.length];return x||(x=f[h.length]=g(h.length)),x(h,o)}}!function(){for(;r.length<=3;)r.push(n(r.length));b.exports=u.apply(void 0,r.concat([r,n]));for(var s=0;s<3;++s)b.exports[s]=r[s]}()},{"robust-determinant":280}],284:[function(m,b,v){"use strict";var e=m("two-product"),n=m("robust-sum"),t=m("robust-scale"),a=m("robust-subtract");function r(o,x,d,w){return function(_,T,k){var L=o(o(x(T[1],k[0]),x(-k[1],T[0])),o(x(_[1],T[0]),x(-T[1],_[0]))),M=o(x(_[1],k[0]),x(-k[1],_[0])),O=w(L,M);return O[O.length-1]}}function u(o,x,d,w){return function(_,T,k,L){var M=o(o(d(o(x(k[1],L[0]),x(-L[1],k[0])),T[2]),o(d(o(x(T[1],L[0]),x(-L[1],T[0])),-k[2]),d(o(x(T[1],k[0]),x(-k[1],T[0])),L[2]))),o(d(o(x(T[1],L[0]),x(-L[1],T[0])),_[2]),o(d(o(x(_[1],L[0]),x(-L[1],_[0])),-T[2]),d(o(x(_[1],T[0]),x(-T[1],_[0])),L[2])))),O=o(o(d(o(x(k[1],L[0]),x(-L[1],k[0])),_[2]),o(d(o(x(_[1],L[0]),x(-L[1],_[0])),-k[2]),d(o(x(_[1],k[0]),x(-k[1],_[0])),L[2]))),o(d(o(x(T[1],k[0]),x(-k[1],T[0])),_[2]),o(d(o(x(_[1],k[0]),x(-k[1],_[0])),-T[2]),d(o(x(_[1],T[0]),x(-T[1],_[0])),k[2])))),P=w(M,O);return P[P.length-1]}}function s(o,x,d,w){return function(_,T,k,L,M){var O=o(o(o(d(o(d(o(x(L[1],M[0]),x(-M[1],L[0])),k[2]),o(d(o(x(k[1],M[0]),x(-M[1],k[0])),-L[2]),d(o(x(k[1],L[0]),x(-L[1],k[0])),M[2]))),T[3]),o(d(o(d(o(x(L[1],M[0]),x(-M[1],L[0])),T[2]),o(d(o(x(T[1],M[0]),x(-M[1],T[0])),-L[2]),d(o(x(T[1],L[0]),x(-L[1],T[0])),M[2]))),-k[3]),d(o(d(o(x(k[1],M[0]),x(-M[1],k[0])),T[2]),o(d(o(x(T[1],M[0]),x(-M[1],T[0])),-k[2]),d(o(x(T[1],k[0]),x(-k[1],T[0])),M[2]))),L[3]))),o(d(o(d(o(x(k[1],L[0]),x(-L[1],k[0])),T[2]),o(d(o(x(T[1],L[0]),x(-L[1],T[0])),-k[2]),d(o(x(T[1],k[0]),x(-k[1],T[0])),L[2]))),-M[3]),o(d(o(d(o(x(L[1],M[0]),x(-M[1],L[0])),T[2]),o(d(o(x(T[1],M[0]),x(-M[1],T[0])),-L[2]),d(o(x(T[1],L[0]),x(-L[1],T[0])),M[2]))),_[3]),d(o(d(o(x(L[1],M[0]),x(-M[1],L[0])),_[2]),o(d(o(x(_[1],M[0]),x(-M[1],_[0])),-L[2]),d(o(x(_[1],L[0]),x(-L[1],_[0])),M[2]))),-T[3])))),o(o(d(o(d(o(x(T[1],M[0]),x(-M[1],T[0])),_[2]),o(d(o(x(_[1],M[0]),x(-M[1],_[0])),-T[2]),d(o(x(_[1],T[0]),x(-T[1],_[0])),M[2]))),L[3]),o(d(o(d(o(x(T[1],L[0]),x(-L[1],T[0])),_[2]),o(d(o(x(_[1],L[0]),x(-L[1],_[0])),-T[2]),d(o(x(_[1],T[0]),x(-T[1],_[0])),L[2]))),-M[3]),d(o(d(o(x(k[1],L[0]),x(-L[1],k[0])),T[2]),o(d(o(x(T[1],L[0]),x(-L[1],T[0])),-k[2]),d(o(x(T[1],k[0]),x(-k[1],T[0])),L[2]))),_[3]))),o(d(o(d(o(x(k[1],L[0]),x(-L[1],k[0])),_[2]),o(d(o(x(_[1],L[0]),x(-L[1],_[0])),-k[2]),d(o(x(_[1],k[0]),x(-k[1],_[0])),L[2]))),-T[3]),o(d(o(d(o(x(T[1],L[0]),x(-L[1],T[0])),_[2]),o(d(o(x(_[1],L[0]),x(-L[1],_[0])),-T[2]),d(o(x(_[1],T[0]),x(-T[1],_[0])),L[2]))),k[3]),d(o(d(o(x(T[1],k[0]),x(-k[1],T[0])),_[2]),o(d(o(x(_[1],k[0]),x(-k[1],_[0])),-T[2]),d(o(x(_[1],T[0]),x(-T[1],_[0])),k[2]))),-L[3]))))),P=o(o(o(d(o(d(o(x(L[1],M[0]),x(-M[1],L[0])),k[2]),o(d(o(x(k[1],M[0]),x(-M[1],k[0])),-L[2]),d(o(x(k[1],L[0]),x(-L[1],k[0])),M[2]))),_[3]),d(o(d(o(x(L[1],M[0]),x(-M[1],L[0])),_[2]),o(d(o(x(_[1],M[0]),x(-M[1],_[0])),-L[2]),d(o(x(_[1],L[0]),x(-L[1],_[0])),M[2]))),-k[3])),o(d(o(d(o(x(k[1],M[0]),x(-M[1],k[0])),_[2]),o(d(o(x(_[1],M[0]),x(-M[1],_[0])),-k[2]),d(o(x(_[1],k[0]),x(-k[1],_[0])),M[2]))),L[3]),d(o(d(o(x(k[1],L[0]),x(-L[1],k[0])),_[2]),o(d(o(x(_[1],L[0]),x(-L[1],_[0])),-k[2]),d(o(x(_[1],k[0]),x(-k[1],_[0])),L[2]))),-M[3]))),o(o(d(o(d(o(x(k[1],M[0]),x(-M[1],k[0])),T[2]),o(d(o(x(T[1],M[0]),x(-M[1],T[0])),-k[2]),d(o(x(T[1],k[0]),x(-k[1],T[0])),M[2]))),_[3]),d(o(d(o(x(k[1],M[0]),x(-M[1],k[0])),_[2]),o(d(o(x(_[1],M[0]),x(-M[1],_[0])),-k[2]),d(o(x(_[1],k[0]),x(-k[1],_[0])),M[2]))),-T[3])),o(d(o(d(o(x(T[1],M[0]),x(-M[1],T[0])),_[2]),o(d(o(x(_[1],M[0]),x(-M[1],_[0])),-T[2]),d(o(x(_[1],T[0]),x(-T[1],_[0])),M[2]))),k[3]),d(o(d(o(x(T[1],k[0]),x(-k[1],T[0])),_[2]),o(d(o(x(_[1],k[0]),x(-k[1],_[0])),-T[2]),d(o(x(_[1],T[0]),x(-T[1],_[0])),k[2]))),-M[3])))),S=w(O,P);return S[S.length-1]}}function i(o){return(3===o?r:4===o?u:s)(n,e,t,a)}var l=i(3),c=i(4),f=[function(){return 0},function(){return 0},function(o,x){return x[0]-o[0]},function(o,x,d){var w,_=(o[1]-d[1])*(x[0]-d[0]),T=(o[0]-d[0])*(x[1]-d[1]),k=_-T;if(_>0){if(T<=0)return k;w=_+T}else{if(!(_<0)||T>=0)return k;w=-(_+T)}var L=33306690738754716e-32*w;return k>=L||k<=-L?k:l(o,x,d)},function(o,x,d,w){var _=o[0]-w[0],T=x[0]-w[0],k=d[0]-w[0],L=o[1]-w[1],M=x[1]-w[1],O=d[1]-w[1],P=o[2]-w[2],S=x[2]-w[2],E=d[2]-w[2],R=T*O,B=k*M,H=k*L,V=_*O,Z=_*M,W=T*L,G=P*(R-B)+S*(H-V)+E*(Z-W),X=7771561172376103e-31*((Math.abs(R)+Math.abs(B))*Math.abs(P)+(Math.abs(H)+Math.abs(V))*Math.abs(S)+(Math.abs(Z)+Math.abs(W))*Math.abs(E));return G>X||-G>X?G:c(o,x,d,w)}];function g(o){var x=f[o.length];return x||(x=f[o.length]=i(o.length)),x.apply(void 0,o)}function h(o,x,d,w,_,T,k){return function(L,M,O,P,S){switch(arguments.length){case 0:case 1:return 0;case 2:return w(L,M);case 3:return _(L,M,O);case 4:return T(L,M,O,P);case 5:return k(L,M,O,P,S)}for(var E=new Array(arguments.length),R=0;R<arguments.length;++R)E[R]=arguments[R];return o(E)}}!function(){for(;f.length<=5;)f.push(i(f.length));b.exports=h.apply(void 0,[g].concat(f));for(var o=0;o<=5;++o)b.exports[o]=f[o]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(m,b,v){"use strict";var e=m("robust-sum"),n=m("robust-scale");b.exports=function(t,a){if(1===t.length)return n(a,t[0]);if(1===a.length)return n(t,a[0]);if(0===t.length||0===a.length)return[0];var r=[0];if(t.length<a.length)for(var u=0;u<t.length;++u)r=e(r,n(a,t[u]));else for(u=0;u<a.length;++u)r=e(r,n(t,a[u]));return r}},{"robust-scale":286,"robust-sum":289}],286:[function(m,b,v){"use strict";var e=m("two-product"),n=m("two-sum");b.exports=function(t,a){var r=t.length;if(1===r){var u=e(t[0],a);return u[0]?u:[u[1]]}var s=new Array(2*r),i=[.1,.1],l=[.1,.1],c=0;e(t[0],a,i),i[0]&&(s[c++]=i[0]);for(var f=1;f<r;++f){e(t[f],a,l),n(i[1],l[0],i),i[0]&&(s[c++]=i[0]);var h=l[1],o=i[1],x=h+o,d=o-(x-h);i[1]=x,d&&(s[c++]=d)}return i[1]&&(s[c++]=i[1]),0===c&&(s[c++]=0),s.length=c,s}},{"two-product":306,"two-sum":307}],287:[function(m,b,v){"use strict";b.exports=function(n,t,a,r){var u=e(n,a,r),s=e(t,a,r);if(u>0&&s>0||u<0&&s<0)return!1;var i=e(a,n,t),l=e(r,n,t);return!(i>0&&l>0||i<0&&l<0)&&(0!==u||0!==s||0!==i||0!==l||function(c,f,g,h){for(var o=0;o<2;++o){var x=c[o],d=f[o],w=Math.min(x,d),_=Math.max(x,d),T=g[o],k=h[o],L=Math.min(T,k);if(Math.max(T,k)<w||_<L)return!1}return!0}(n,t,a,r))};var e=m("robust-orientation")[3]},{"robust-orientation":284}],288:[function(m,b,v){"use strict";b.exports=function(e,n){var O,P,S,E,R,t=0|e.length,a=0|n.length;if(1===t&&1===a)return(R=(O=e[0])-((S=O+(P=-n[0]))-(E=S-O))+(P-E))?[R,S]:[S];var r,u,s=new Array(t+a),i=0,l=0,c=0,f=Math.abs,g=e[l],h=f(g),o=-n[c],x=f(o);h<x?(u=g,(l+=1)<t&&(h=f(g=e[l]))):(u=o,(c+=1)<a&&(x=f(o=-n[c]))),l<t&&h<x||c>=a?(r=g,(l+=1)<t&&(h=f(g=e[l]))):(r=o,(c+=1)<a&&(x=f(o=-n[c])));for(var d,w,_=r+u,T=_-r,k=u-T,L=k,M=_;l<t&&c<a;)h<x?(r=g,(l+=1)<t&&(h=f(g=e[l]))):(r=o,(c+=1)<a&&(x=f(o=-n[c]))),(k=(u=L)-(T=(_=r+u)-r))&&(s[i++]=k),L=M-((d=M+_)-(w=d-M))+(_-w),M=d;for(;l<t;)(k=(u=L)-(T=(_=(r=g)+u)-r))&&(s[i++]=k),L=M-((d=M+_)-(w=d-M))+(_-w),M=d,(l+=1)<t&&(g=e[l]);for(;c<a;)(k=(u=L)-(T=(_=(r=o)+u)-r))&&(s[i++]=k),L=M-((d=M+_)-(w=d-M))+(_-w),M=d,(c+=1)<a&&(o=-n[c]);return L&&(s[i++]=L),M&&(s[i++]=M),i||(s[i++]=0),s.length=i,s}},{}],289:[function(m,b,v){"use strict";b.exports=function(e,n){var O,P,S,E,R,t=0|e.length,a=0|n.length;if(1===t&&1===a)return(R=(O=e[0])-((S=O+(P=n[0]))-(E=S-O))+(P-E))?[R,S]:[S];var r,u,s=new Array(t+a),i=0,l=0,c=0,f=Math.abs,g=e[l],h=f(g),o=n[c],x=f(o);h<x?(u=g,(l+=1)<t&&(h=f(g=e[l]))):(u=o,(c+=1)<a&&(x=f(o=n[c]))),l<t&&h<x||c>=a?(r=g,(l+=1)<t&&(h=f(g=e[l]))):(r=o,(c+=1)<a&&(x=f(o=n[c])));for(var d,w,_=r+u,T=_-r,k=u-T,L=k,M=_;l<t&&c<a;)h<x?(r=g,(l+=1)<t&&(h=f(g=e[l]))):(r=o,(c+=1)<a&&(x=f(o=n[c]))),(k=(u=L)-(T=(_=r+u)-r))&&(s[i++]=k),L=M-((d=M+_)-(w=d-M))+(_-w),M=d;for(;l<t;)(k=(u=L)-(T=(_=(r=g)+u)-r))&&(s[i++]=k),L=M-((d=M+_)-(w=d-M))+(_-w),M=d,(l+=1)<t&&(g=e[l]);for(;c<a;)(k=(u=L)-(T=(_=(r=o)+u)-r))&&(s[i++]=k),L=M-((d=M+_)-(w=d-M))+(_-w),M=d,(c+=1)<a&&(o=n[c]);return L&&(s[i++]=L),M&&(s[i++]=M),i||(s[i++]=0),s.length=i,s}},{}],290:[function(m,b,v){"use strict";b.exports=function(t){return n(e(t))};var e=m("boundary-cells"),n=m("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(m,b,v){"use strict";b.exports=function(r,u,s,i){if(s=s||0,void 0===i&&(i=function(d){for(var w=d.length,_=0,T=0;T<w;++T)_=0|Math.max(_,d[T].length);return _-1}(r)),0===r.length||i<1)return{cells:[],vertexIds:[],vertexWeights:[]};var l=function(d,w){for(var _=d.length,T=n.mallocUint8(_),k=0;k<_;++k)T[k]=d[k]<w|0;return T}(u,+s),c=function(d,w){for(var _=d.length,k=n.mallocUint32(2*(w*(w+1)/2*_|0)),L=0,M=0;M<_;++M)for(var O=d[M],P=(w=O.length,0);P<w;++P)for(var S=0;S<P;++S){var E=O[S],R=O[P];k[L++]=0|Math.min(E,R),k[L++]=0|Math.max(E,R)}t(e(k,[L/2|0,2]));var B=2;for(M=2;M<L;M+=2)k[M-2]===k[M]&&k[M-1]===k[M+1]||(k[B++]=k[M],k[B++]=k[M+1]);return e(k,[B/2|0,2])}(r,i),f=function(d,w,_,T){for(var k=d.data,L=d.shape[0],M=n.mallocDouble(L),O=0,P=0;P<L;++P){var S=k[2*P],E=k[2*P+1];if(_[S]!==_[E]){var R=w[S],B=w[E];k[2*O]=S,k[2*O+1]=E,M[O++]=(B-T)/(B-R)}}return d.shape[0]=O,e(M,[O])}(c,u,l,+s),g=function(d,w){var _=n.mallocInt32(2*w),T=d.shape[0],k=d.data;_[0]=0;for(var L=0,M=0;M<T;++M){var O=k[2*M];if(O!==L){for(_[2*L+1]=M;++L<O;)_[2*L]=M,_[2*L+1]=M;_[2*L]=M}}for(_[2*L+1]=T;++L<w;)_[2*L]=_[2*L+1]=T;return _}(c,0|u.length),h=a(i)(r,c.data,g,l),o=function(d){for(var w=0|d.shape[0],_=d.data,T=new Array(w),k=0;k<w;++k)T[k]=[_[2*k],_[2*k+1]];return T}(c),x=[].slice.call(f.data,0,f.shape[0]);return n.free(l),n.free(c.data),n.free(f.data),n.free(g),{cells:h,vertexIds:o,vertexWeights:x}};var e=m("ndarray"),n=m("typedarray-pool"),t=m("ndarray-sort"),a=m("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(m,b,v){"use strict";b.exports=function(n){return e[n]()};var e=[function(){return function(n,t,a,r){for(var u=n.length,s=0;s<u;++s);return[]}},function(){function n(t,a,r,u){for(var s=0|Math.min(r,u),i=0|Math.max(r,u),l=t[2*s],c=t[2*s+1];l<c;){var f=l+c>>1,g=a[2*f+1];if(g===i)return f;i<g?c=f:l=f+1}return l}return function(t,a,r,u){for(var s=t.length,i=[],l=0;l<s;++l){var c=t[l];if(2===c.length){var f=(u[c[0]]<<0)+(u[c[1]]<<1);if(0===f||3===f)continue;switch(f){case 0:break;case 1:i.push([n(r,a,c[0],c[1])]);break;case 2:i.push([n(r,a,c[1],c[0])])}}}return i}},function(){function n(t,a,r,u){for(var s=0|Math.min(r,u),i=0|Math.max(r,u),l=t[2*s],c=t[2*s+1];l<c;){var f=l+c>>1,g=a[2*f+1];if(g===i)return f;i<g?c=f:l=f+1}return l}return function(t,a,r,u){for(var s=t.length,i=[],l=0;l<s;++l){var c=t[l],f=c.length;if(3===f){if(0==(g=(u[c[0]]<<0)+(u[c[1]]<<1)+(u[c[2]]<<2))||7===g)continue;switch(g){case 0:break;case 1:i.push([n(r,a,c[0],c[2]),n(r,a,c[0],c[1])]);break;case 2:i.push([n(r,a,c[1],c[0]),n(r,a,c[1],c[2])]);break;case 3:i.push([n(r,a,c[0],c[2]),n(r,a,c[1],c[2])]);break;case 4:i.push([n(r,a,c[2],c[1]),n(r,a,c[2],c[0])]);break;case 5:i.push([n(r,a,c[2],c[1]),n(r,a,c[0],c[1])]);break;case 6:i.push([n(r,a,c[1],c[0]),n(r,a,c[2],c[0])])}}else if(2===f){var g;if(0==(g=(u[c[0]]<<0)+(u[c[1]]<<1))||3===g)continue;switch(g){case 0:break;case 1:i.push([n(r,a,c[0],c[1])]);break;case 2:i.push([n(r,a,c[1],c[0])])}}}return i}},function(){function n(t,a,r,u){for(var s=0|Math.min(r,u),i=0|Math.max(r,u),l=t[2*s],c=t[2*s+1];l<c;){var f=l+c>>1,g=a[2*f+1];if(g===i)return f;i<g?c=f:l=f+1}return l}return function(t,a,r,u){for(var s=t.length,i=[],l=0;l<s;++l){var c=t[l],f=c.length;if(4===f){if(0==(g=(u[c[0]]<<0)+(u[c[1]]<<1)+(u[c[2]]<<2)+(u[c[3]]<<3))||15===g)continue;switch(g){case 0:break;case 1:i.push([n(r,a,c[0],c[1]),n(r,a,c[0],c[2]),n(r,a,c[0],c[3])]);break;case 2:i.push([n(r,a,c[1],c[2]),n(r,a,c[1],c[0]),n(r,a,c[1],c[3])]);break;case 3:i.push([n(r,a,c[1],c[2]),n(r,a,c[0],c[2]),n(r,a,c[0],c[3])],[n(r,a,c[1],c[3]),n(r,a,c[1],c[2]),n(r,a,c[0],c[3])]);break;case 4:i.push([n(r,a,c[2],c[0]),n(r,a,c[2],c[1]),n(r,a,c[2],c[3])]);break;case 5:i.push([n(r,a,c[0],c[1]),n(r,a,c[2],c[1]),n(r,a,c[0],c[3])],[n(r,a,c[2],c[1]),n(r,a,c[2],c[3]),n(r,a,c[0],c[3])]);break;case 6:i.push([n(r,a,c[2],c[0]),n(r,a,c[1],c[0]),n(r,a,c[1],c[3])],[n(r,a,c[2],c[3]),n(r,a,c[2],c[0]),n(r,a,c[1],c[3])]);break;case 7:i.push([n(r,a,c[0],c[3]),n(r,a,c[1],c[3]),n(r,a,c[2],c[3])]);break;case 8:i.push([n(r,a,c[3],c[1]),n(r,a,c[3],c[0]),n(r,a,c[3],c[2])]);break;case 9:i.push([n(r,a,c[3],c[1]),n(r,a,c[0],c[1]),n(r,a,c[0],c[2])],[n(r,a,c[3],c[2]),n(r,a,c[3],c[1]),n(r,a,c[0],c[2])]);break;case 10:i.push([n(r,a,c[1],c[0]),n(r,a,c[3],c[0]),n(r,a,c[1],c[2])],[n(r,a,c[3],c[0]),n(r,a,c[3],c[2]),n(r,a,c[1],c[2])]);break;case 11:i.push([n(r,a,c[1],c[2]),n(r,a,c[0],c[2]),n(r,a,c[3],c[2])]);break;case 12:i.push([n(r,a,c[3],c[0]),n(r,a,c[2],c[0]),n(r,a,c[2],c[1])],[n(r,a,c[3],c[1]),n(r,a,c[3],c[0]),n(r,a,c[2],c[1])]);break;case 13:i.push([n(r,a,c[0],c[1]),n(r,a,c[2],c[1]),n(r,a,c[3],c[1])]);break;case 14:i.push([n(r,a,c[2],c[0]),n(r,a,c[1],c[0]),n(r,a,c[3],c[0])])}}else if(3===f){if(0==(g=(u[c[0]]<<0)+(u[c[1]]<<1)+(u[c[2]]<<2))||7===g)continue;switch(g){case 0:break;case 1:i.push([n(r,a,c[0],c[2]),n(r,a,c[0],c[1])]);break;case 2:i.push([n(r,a,c[1],c[0]),n(r,a,c[1],c[2])]);break;case 3:i.push([n(r,a,c[0],c[2]),n(r,a,c[1],c[2])]);break;case 4:i.push([n(r,a,c[2],c[1]),n(r,a,c[2],c[0])]);break;case 5:i.push([n(r,a,c[2],c[1]),n(r,a,c[0],c[1])]);break;case 6:i.push([n(r,a,c[1],c[0]),n(r,a,c[2],c[0])])}}else if(2===f){var g;if(0==(g=(u[c[0]]<<0)+(u[c[1]]<<1))||3===g)continue;switch(g){case 0:break;case 1:i.push([n(r,a,c[0],c[1])]);break;case 2:i.push([n(r,a,c[1],c[0])])}}}return i}}]},{}],293:[function(m,b,v){"use strict";var e=m("bit-twiddle"),n=m("union-find");function t(c,f){var g=c.length,h=c.length-f.length,o=Math.min;if(h)return h;switch(g){case 0:return 0;case 1:return c[0]-f[0];case 2:return(w=c[0]+c[1]-f[0]-f[1])||o(c[0],c[1])-o(f[0],f[1]);case 3:var x=c[0]+c[1],d=f[0]+f[1];if(w=x+c[2]-(d+f[2]))return w;var w,_=o(c[0],c[1]),T=o(f[0],f[1]);return(w=o(_,c[2])-o(T,f[2]))||o(_+c[2],x)-o(T+f[2],d);default:var k=c.slice(0);k.sort();var L=f.slice(0);L.sort();for(var M=0;M<g;++M)if(h=k[M]-L[M])return h;return 0}}function a(c,f){return t(c[0],f[0])}function r(c,f){if(f){for(var g=c.length,h=new Array(g),o=0;o<g;++o)h[o]=[c[o],f[o]];for(h.sort(a),o=0;o<g;++o)c[o]=h[o][0],f[o]=h[o][1];return c}return c.sort(t),c}function u(c){if(0===c.length)return[];for(var f=1,g=c.length,h=1;h<g;++h){var o=c[h];if(t(o,c[h-1])){if(h===f){f++;continue}c[f++]=o}}return c.length=f,c}function s(c,f){for(var g=0,h=c.length-1,o=-1;g<=h;){var x=g+h>>1,d=t(c[x],f);d<=0?(0===d&&(o=x),g=x+1):d>0&&(h=x-1)}return o}function i(c,f){for(var g=new Array(c.length),h=0,o=g.length;h<o;++h)g[h]=[];for(var x=[],d=(h=0,f.length);h<d;++h)for(var w=f[h],_=w.length,T=1,k=1<<_;T<k;++T){x.length=e.popCount(T);for(var L=0,M=0;M<_;++M)T&1<<M&&(x[L++]=w[M]);var O=s(c,x);if(!(O<0))for(;g[O++].push(h),!(O>=c.length||0!==t(c[O],x)););}return g}function l(c,f){if(f<0)return[];for(var g=[],h=(1<<f+1)-1,o=0;o<c.length;++o)for(var x=c[o],d=h;d<1<<x.length;d=e.nextCombination(d)){for(var w=new Array(f+1),_=0,T=0;T<x.length;++T)d&1<<T&&(w[_++]=x[T]);g.push(w)}return r(g)}v.dimension=function(c){for(var f=0,g=Math.max,h=0,o=c.length;h<o;++h)f=g(f,c[h].length);return f-1},v.countVertices=function(c){for(var f=-1,g=Math.max,h=0,o=c.length;h<o;++h)for(var x=c[h],d=0,w=x.length;d<w;++d)f=g(f,x[d]);return f+1},v.cloneCells=function(c){for(var f=new Array(c.length),g=0,h=c.length;g<h;++g)f[g]=c[g].slice(0);return f},v.compareCells=t,v.normalize=r,v.unique=u,v.findCell=s,v.incidence=i,v.dual=function(c,f){if(!f)return i(u(l(c,0)),c);for(var g=new Array(f),h=0;h<f;++h)g[h]=[];h=0;for(var o=c.length;h<o;++h)for(var x=c[h],d=0,w=x.length;d<w;++d)g[x[d]].push(h);return g},v.explode=function(c){for(var f=[],g=0,h=c.length;g<h;++g)for(var o=c[g],x=0|o.length,d=1,w=1<<x;d<w;++d){for(var _=[],T=0;T<x;++T)d>>>T&1&&_.push(o[T]);f.push(_)}return r(f)},v.skeleton=l,v.boundary=function(c){for(var f=[],g=0,h=c.length;g<h;++g)for(var o=c[g],x=0,d=o.length;x<d;++x){for(var w=new Array(o.length-1),_=0,T=0;_<d;++_)_!==x&&(w[T++]=o[_]);f.push(w)}return r(f)},v.connectedComponents=function(c,f){return f?function(g,h){for(var o=new n(h),x=0;x<g.length;++x)for(var d=g[x],w=0;w<d.length;++w)for(var _=w+1;_<d.length;++_)o.link(d[w],d[_]);var T=[],k=o.ranks;for(x=0;x<k.length;++x)k[x]=-1;for(x=0;x<g.length;++x){var L=o.find(g[x][0]);k[L]<0?(k[L]=T.length,T.push([g[x].slice(0)])):T[k[L]].push(g[x].slice(0))}return T}(c,f):function(g){for(var h=u(r(l(g,0))),o=new n(h.length),x=0;x<g.length;++x)for(var d=g[x],w=0;w<d.length;++w)for(var _=s(h,[d[w]]),T=w+1;T<d.length;++T)o.link(_,s(h,[d[T]]));var k=[],L=o.ranks;for(x=0;x<L.length;++x)L[x]=-1;for(x=0;x<g.length;++x){var M=o.find(s(h,[g[x][0]]));L[M]<0?(L[M]=k.length,k.push([g[x].slice(0)])):k[L[M]].push(g[x].slice(0))}return k}(c)}},{"bit-twiddle":32,"union-find":309}],294:[function(m,b,v){arguments[4][32][0].apply(v,arguments)},{dup:32}],295:[function(m,b,v){arguments[4][293][0].apply(v,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(m,b,v){"use strict";function e(n){this.roots=new Array(n),this.ranks=new Array(n);for(var t=0;t<n;++t)this.roots[t]=t,this.ranks[t]=0}b.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},e.prototype.find=function(n){for(var t=this.roots;t[n]!==n;){var a=t[n];t[n]=t[a],n=a}return n},e.prototype.link=function(n,t){var a=this.find(n),r=this.find(t);if(a!==r){var u=this.ranks,s=this.roots,i=u[a],l=u[r];i<l?s[a]=r:l<i?s[r]=a:(s[r]=a,++u[a])}}},{}],297:[function(m,b,v){"use strict";b.exports=function(t,a,r){for(var u=a.length,s=t.length,i=new Array(u),l=new Array(u),c=new Array(u),f=new Array(u),g=0;g<u;++g)i[g]=l[g]=-1,c[g]=1/0,f[g]=!1;for(g=0;g<s;++g){var h=t[g];if(2!==h.length)throw new Error("Input must be a graph");var o=h[1],x=h[0];l[x]=-1!==l[x]?-2:o,i[o]=-1!==i[o]?-2:x}function d(W){if(f[W])return 1/0;var X,te,U=i[W],Q=l[W];return U<0||Q<0?1/0:(X=a[U],te=a[Q],Math.abs(e(a[W],X,te))/Math.sqrt(Math.pow(X[0]-te[0],2)+Math.pow(X[1]-te[1],2)))}function w(W,G){var X=S[W],te=S[G];S[W]=te,S[G]=X,E[X]=G,E[te]=W}function _(W){return c[S[W]]}function T(W){return 1&W?W-1>>1:(W>>1)-1}function k(W){for(var G=_(W);;){var X=G,te=2*W+1,D=2*(W+1),N=W;if(te<R){var U=_(te);U<X&&(N=te,X=U)}if(D<R&&_(D)<X&&(N=D),N===W)return W;w(W,N),W=N}}function L(W){for(var G=_(W);W>0;){var X=T(W);if(!(X>=0&&G<_(X)))return W;w(W,X),W=X}}function M(){if(R>0){var W=S[0];return w(0,R-1),R-=1,k(0),W}return-1}function O(W,G){var X=S[W];return c[X]===G?W:(c[X]=-1/0,L(W),M(),c[X]=G,L((R+=1)-1))}function P(W){if(!f[W]){f[W]=!0;var G=i[W],X=l[W];i[X]>=0&&(i[X]=G),l[G]>=0&&(l[G]=X),E[G]>=0&&O(E[G],d(G)),E[X]>=0&&O(E[X],d(X))}}var S=[],E=new Array(u);for(g=0;g<u;++g)(c[g]=d(g))<1/0?(E[g]=S.length,S.push(g)):E[g]=-1;var R=S.length;for(g=R>>1;g>=0;--g)k(g);for(;;){var B=M();if(B<0||c[B]>r)break;P(B)}var H=[];for(g=0;g<u;++g)f[g]||(E[g]=H.length,H.push(a[g].slice()));function V(W,G){if(W[G]<0)return G;var X=G,te=G;do{var D=W[te];if(!f[te]||D<0||D===te||(D=W[te=D],!f[te]||D<0||D===te))break;te=D,X=W[X]}while(X!==te);for(var N=G;N!==te;N=W[N])W[N]=te;return te}var Z=[];return t.forEach(function(W){var G=V(i,W[0]),X=V(l,W[1]);if(G>=0&&X>=0&&G!==X){var te=E[G],D=E[X];te!==D&&Z.push([te,D])}}),n.unique(n.normalize(Z)),{positions:H,edges:Z}};var e=m("robust-orientation"),n=m("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(m,b,v){"use strict";b.exports=function(t,a){var r,u,s,i;if(a[0][0]<a[1][0])r=a[0],u=a[1];else{if(!(a[0][0]>a[1][0]))return n(a,t);r=a[1],u=a[0]}if(t[0][0]<t[1][0])s=t[0],i=t[1];else{if(!(t[0][0]>t[1][0]))return-n(t,a);s=t[1],i=t[0]}var l=e(r,u,i),c=e(r,u,s);if(l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;if(l=e(i,s,u),c=e(i,s,r),l<0){if(c<=0)return l}else if(l>0){if(c>=0)return l}else if(c)return c;return u[0]-i[0]};var e=m("robust-orientation");function n(t,a){var r,u,s,i;if(a[0][0]<a[1][0])r=a[0],u=a[1];else{if(!(a[0][0]>a[1][0])){var l=Math.min(t[0][1],t[1][1]),c=Math.max(t[0][1],t[1][1]),f=Math.min(a[0][1],a[1][1]),g=Math.max(a[0][1],a[1][1]);return c<f?c-f:l>g?l-g:c-g}r=a[1],u=a[0]}t[0][1]<t[1][1]?(s=t[0],i=t[1]):(s=t[1],i=t[0]);var h=e(u,r,s);return h||(h=e(u,r,i))||i-u}},{"robust-orientation":284}],299:[function(m,b,v){"use strict";b.exports=function(c){for(var f=c.length,g=2*f,h=new Array(g),o=0;o<f;++o){var x=c[o],d=x[0][0]<x[1][0];h[2*o]=new l(x[0][0],x,d,o),h[2*o+1]=new l(x[1][0],x,!d,o)}h.sort(function(P,S){var E=P.x-S.x;return E||(E=P.create-S.create)||Math.min(P.segment[0][1],P.segment[1][1])-Math.min(S.segment[0][1],S.segment[1][1])});var w=n(a),_=[],T=[],k=[];for(o=0;o<g;){for(var L=h[o].x,M=[];o<g;){var O=h[o];if(O.x!==L)break;o+=1,O.segment[0][0]===O.x&&O.segment[1][0]===O.x?O.create&&(O.segment[0][1]<O.segment[1][1]?(M.push(new i(O.segment[0][1],O.index,!0,!0)),M.push(new i(O.segment[1][1],O.index,!1,!1))):(M.push(new i(O.segment[1][1],O.index,!0,!1)),M.push(new i(O.segment[0][1],O.index,!1,!0)))):w=O.create?w.insert(O.segment,O.index):w.remove(O.segment)}_.push(w.root),T.push(L),k.push(M)}return new r(_,T,k)};var e=m("binary-search-bounds"),n=m("functional-red-black-tree"),t=m("robust-orientation"),a=m("./lib/order-segments");function r(c,f,g){this.slabs=c,this.coordinates=f,this.horizontal=g}function u(c,f){return c.y-f}function s(c,f){for(var g=null;c;){var h,o,x=c.key;x[0][0]<x[1][0]?(h=x[0],o=x[1]):(h=x[1],o=x[0]);var d=t(h,o,f);if(d<0)c=c.left;else if(d>0)if(f[0]!==x[1][0])g=c,c=c.right;else{if(w=s(c.right,f))return w;c=c.left}else{if(f[0]!==x[1][0])return c;var w;if(w=s(c.right,f))return w;c=c.left}}return g}function i(c,f,g,h){this.y=c,this.index=f,this.start=g,this.closed=h}function l(c,f,g,h){this.x=c,this.segment=f,this.create=g,this.index=h}r.prototype.castUp=function(c){var f=e.le(this.coordinates,c[0]);if(f<0)return-1;var g=s(this.slabs[f],c),h=-1;if(g&&(h=g.value),this.coordinates[f]===c[0]){var o=null;if(g&&(o=g.key),f>0){var x=s(this.slabs[f-1],c);x&&(o?a(x.key,o)>0&&(o=x.key,h=x.value):(h=x.value,o=x.key))}var d=this.horizontal[f];if(d.length>0){var w=e.ge(d,c[1],u);if(w<d.length){var _=d[w];if(c[1]===_.y){if(_.closed)return _.index;for(;w<d.length-1&&d[w+1].y===c[1];)if((_=d[w+=1]).closed)return _.index;if(_.y===c[1]&&!_.start){if((w+=1)>=d.length)return h;_=d[w]}}if(_.start)if(o){var T=t(o[0],o[1],[c[0],_.y]);o[0][0]>o[1][0]&&(T=-T),T>0&&(h=_.index)}else h=_.index;else _.y!==c[1]&&(h=_.index)}}}return h}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(m,b,v){"use strict";var e=m("robust-dot-product"),n=m("robust-sum");function t(r,u){var s=n(e(r,u),[u[u.length-1]]);return s[s.length-1]}function a(r,u,s,i){var l=-u/(i-u);l<0?l=0:l>1&&(l=1);for(var c=1-l,f=r.length,g=new Array(f),h=0;h<f;++h)g[h]=l*r[h]+c*s[h];return g}b.exports=function(r,u){for(var s=[],i=[],l=t(r[r.length-1],u),c=r[r.length-1],f=r[0],g=0;g<r.length;++g,c=f){var h=t(f=r[g],u);if(l<0&&h>0||l>0&&h<0){var o=a(c,h,f,l);s.push(o),i.push(o.slice())}h<0?i.push(f.slice()):h>0?s.push(f.slice()):(s.push(f.slice()),i.push(f.slice())),l=h}return{positive:s,negative:i}},b.exports.positive=function(r,u){for(var s=[],i=t(r[r.length-1],u),l=r[r.length-1],c=r[0],f=0;f<r.length;++f,l=c){var g=t(c=r[f],u);(i<0&&g>0||i>0&&g<0)&&s.push(a(l,g,c,i)),g>=0&&s.push(c.slice()),i=g}return s},b.exports.negative=function(r,u){for(var s=[],i=t(r[r.length-1],u),l=r[r.length-1],c=r[0],f=0;f<r.length;++f,l=c){var g=t(c=r[f],u);(i<0&&g>0||i>0&&g<0)&&s.push(a(l,g,c,i)),g<=0&&s.push(c.slice()),i=g}return s}},{"robust-dot-product":281,"robust-sum":289}],301:[function(m,b,v){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(s){return a(u(s),arguments)}function t(s,i){return n.apply(null,[s].concat(i||[]))}function a(s,i){var l,c,f,g,h,o,x,d,w,_=1,T=s.length,k="";for(c=0;c<T;c++)if("string"==typeof s[c])k+=s[c];else if("object"==typeof s[c]){if((g=s[c]).keys)for(l=i[_],f=0;f<g.keys.length;f++){if(null==l)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[f],g.keys[f-1]));l=l[g.keys[f]]}else l=g.param_no?i[g.param_no]:i[_++];if(e.not_type.test(g.type)&&e.not_primitive.test(g.type)&&l instanceof Function&&(l=l()),e.numeric_arg.test(g.type)&&"number"!=typeof l&&isNaN(l))throw new TypeError(n("[sprintf] expecting number but found %T",l));switch(e.number.test(g.type)&&(d=l>=0),g.type){case"b":l=parseInt(l,10).toString(2);break;case"c":l=String.fromCharCode(parseInt(l,10));break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,g.width?parseInt(g.width):0);break;case"e":l=g.precision?parseFloat(l).toExponential(g.precision):parseFloat(l).toExponential();break;case"f":l=g.precision?parseFloat(l).toFixed(g.precision):parseFloat(l);break;case"g":l=g.precision?String(Number(l.toPrecision(g.precision))):parseFloat(l);break;case"o":l=(parseInt(l,10)>>>0).toString(8);break;case"s":l=String(l),l=g.precision?l.substring(0,g.precision):l;break;case"t":l=String(!!l),l=g.precision?l.substring(0,g.precision):l;break;case"T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),l=g.precision?l.substring(0,g.precision):l;break;case"u":l=parseInt(l,10)>>>0;break;case"v":l=l.valueOf(),l=g.precision?l.substring(0,g.precision):l;break;case"x":l=(parseInt(l,10)>>>0).toString(16);break;case"X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase()}e.json.test(g.type)?k+=l:(!e.number.test(g.type)||d&&!g.sign?w="":(w=d?"+":"-",l=l.toString().replace(e.sign,"")),o=g.pad_char?"0"===g.pad_char?"0":g.pad_char.charAt(1):" ",x=g.width-(w+l).length,h=g.width&&x>0?o.repeat(x):"",k+=g.align?w+l+h:"0"===o?w+h+l:h+w+l)}return k}var r=Object.create(null);function u(s){if(r[s])return r[s];for(var i,l=s,c=[],f=0;l;){if(null!==(i=e.text.exec(l)))c.push(i[0]);else if(null!==(i=e.modulo.exec(l)))c.push("%");else{if(null===(i=e.placeholder.exec(l)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){f|=1;var g=[],h=i[2],o=[];if(null===(o=e.key.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(g.push(o[1]);""!==(h=h.substring(o[0].length));)if(null!==(o=e.key_access.exec(h)))g.push(o[1]);else{if(null===(o=e.index_access.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");g.push(o[1])}i[2]=g}else f|=2;if(3===f)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c.push({placeholder:i[0],param_no:i[1],keys:i[2],sign:i[3],pad_char:i[4],align:i[5],width:i[6],precision:i[7],type:i[8]})}l=l.substring(i[0].length)}return r[s]=c}void 0!==v&&(v.sprintf=n,v.vsprintf=t),"undefined"!=typeof window&&(window.sprintf=n,window.vsprintf=t)}()},{}],302:[function(m,b,v){"use strict";b.exports=function(r,u){if(r.dimension<=0)return{positions:[],cells:[]};if(1===r.dimension)return function(l,c){for(var f=n(l,c),g=f.length,h=new Array(g),o=new Array(g),x=0;x<g;++x)h[x]=[f[x]],o[x]=[x];return{positions:h,cells:o}}(r,u);var s=r.order.join()+"-"+r.dtype,i=a[s];return u=+u||0,i||(i=a[s]=function(l,c){var g=t[l.length+"d"];if(g)return g(e,l,c)}(r.order,r.dtype)),i(r,u)};var e=m("ndarray-extract-contour"),n=m("zero-crossings"),t={"2d":function(r,u,s){var i=r({order:u,scalarArguments:3,getters:"generic"===s?[0]:void 0,phase:function(l,c,f,g){return l>g|0},vertex:function(l,c,f,g,h,o,x,d,w,_,T,k,L){var M=(x<<0)+(d<<1)+(w<<2)+(_<<3)|0;if(0!==M&&15!==M)switch(M){case 0:case 15:T.push([l-.5,c-.5]);break;case 1:T.push([l-.25-.25*(g+f-2*L)/(f-g),c-.25-.25*(h+f-2*L)/(f-h)]);break;case 2:T.push([l-.75-.25*(-g-f+2*L)/(g-f),c-.25-.25*(o+g-2*L)/(g-o)]);break;case 3:T.push([l-.5,c-.5-.5*(h+f+o+g-4*L)/(f-h+g-o)]);break;case 4:T.push([l-.25-.25*(o+h-2*L)/(h-o),c-.75-.25*(-h-f+2*L)/(h-f)]);break;case 5:T.push([l-.5-.5*(g+f+o+h-4*L)/(f-g+h-o),c-.5]);break;case 6:T.push([l-.5-.25*(-g-f+o+h)/(g-f+h-o),c-.5-.25*(-h-f+o+g)/(h-f+g-o)]);break;case 7:T.push([l-.75-.25*(o+h-2*L)/(h-o),c-.75-.25*(o+g-2*L)/(g-o)]);break;case 8:T.push([l-.75-.25*(-o-h+2*L)/(o-h),c-.75-.25*(-o-g+2*L)/(o-g)]);break;case 9:T.push([l-.5-.25*(g+f+-o-h)/(f-g+o-h),c-.5-.25*(h+f+-o-g)/(f-h+o-g)]);break;case 10:T.push([l-.5-.5*(-g-f-o-h+4*L)/(g-f+o-h),c-.5]);break;case 11:T.push([l-.25-.25*(-o-h+2*L)/(o-h),c-.75-.25*(h+f-2*L)/(f-h)]);break;case 12:T.push([l-.5,c-.5-.5*(-h-f-o-g+4*L)/(h-f+o-g)]);break;case 13:T.push([l-.75-.25*(g+f-2*L)/(f-g),c-.25-.25*(-o-g+2*L)/(o-g)]);break;case 14:T.push([l-.25-.25*(-g-f+2*L)/(g-f),c-.25-.25*(-h-f+2*L)/(h-f)])}},cell:function(l,c,f,g,h,o,x,d,w){d.push(h?[l,c]:[c,l])}});return function(l,c){var f=[],g=[];return i(l,f,g,c),{positions:f,cells:g}}}},a={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(m,b,v){(function(e){(function(){"use strict";b.exports=function r(u,s,i){i=i||{};var l=a[u];l||(l=a[u]={" ":{data:new Float32Array(0),shape:.2}});var c=l[s];if(!c)if(s.length<=1||!/\d/.test(s))c=l[s]=function(L){for(var M=L.cells,O=L.positions,P=new Float32Array(6*M.length),S=0,E=0,R=0;R<M.length;++R)for(var B=M[R],H=0;H<3;++H){var V=O[B[H]];P[S++]=V[0],P[S++]=V[1]+1.4,E=Math.max(V[0],E)}return{data:P,shape:E}}(n(s,{triangles:!0,font:u,textAlign:i.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var f=s.split(/(\d|\s)/),g=new Array(f.length),h=0,o=0,x=0;x<f.length;++x)g[x]=r(u,f[x]),h+=g[x].data.length,o+=g[x].shape,x>0&&(o+=.02);var d=new Float32Array(h),w=0,_=-.5*o;for(x=0;x<g.length;++x){for(var T=g[x].data,k=0;k<T.length;k+=2)d[w++]=T[k]+_,d[w++]=T[k+1];_+=g[x].shape+.02}c=l[s]={data:d,shape:o}}return c};var n=m("vectorize-text"),t=window||e.global||{},a=t.__TEXT_CACHE||{};t.__TEXT_CACHE={}}).call(this)}).call(this,m("_process"))},{_process:5,"vectorize-text":311}],304:[function(m,b,v){"use strict";var e=m("parse-unit");function n(a,r){var u=e(getComputedStyle(a).getPropertyValue(r));return u[0]*t(u[1],a)}function t(a,r){switch(r=r||document.body,a=(a||"px").trim().toLowerCase(),r!==window&&r!==document||(r=document.body),a){case"%":return r.clientHeight/100;case"ch":case"ex":return function(u,s){var i=document.createElement("div");i.style["font-size"]="128"+u,s.appendChild(i);var l=n(i,"font-size")/128;return s.removeChild(i),l}(a,r);case"em":return n(r,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}b.exports=t},{"parse-unit":265}],305:[function(m,b,v){"use strict";b.exports=function(h){var o=(h=h||{}).center||[0,0,0],x=h.up||[0,1,0],d=h.right||l(x),w=h.radius||1,_=h.theta||0,T=h.phi||0;if(o=[].slice.call(o,0,3),x=[].slice.call(x,0,3),r(x,x),d=[].slice.call(d,0,3),r(d,d),"eye"in h){var k=h.eye,L=[k[0]-o[0],k[1]-o[1],k[2]-o[2]];a(d,L,x),s(d[0],d[1],d[2])<1e-6?d=l(x):r(d,d),w=s(L[0],L[1],L[2]);var M=u(x,L)/w,O=u(d,L)/w;T=Math.acos(M),_=Math.acos(O)}return w=Math.log(w),new c(h.zoomMin,h.zoomMax,o,x,d,w,_,T)};var e=m("filtered-vector"),n=m("gl-mat4/invert"),t=m("gl-mat4/rotate"),a=m("gl-vec3/cross"),r=m("gl-vec3/normalize"),u=m("gl-vec3/dot");function s(h,o,x){return Math.sqrt(Math.pow(h,2)+Math.pow(o,2)+Math.pow(x,2))}function i(h){return Math.min(1,Math.max(-1,h))}function l(h){var o=Math.abs(h[0]),x=Math.abs(h[1]),d=Math.abs(h[2]),w=[0,0,0];o>Math.max(x,d)?w[2]=1:x>Math.max(o,d)?w[0]=1:w[1]=1;for(var _=0,T=0,k=0;k<3;++k)_+=h[k]*h[k],T+=w[k]*h[k];for(k=0;k<3;++k)w[k]-=T/_*h[k];return r(w,w),w}function c(h,o,x,d,w,_,T,k){this.center=e(x),this.up=e(d),this.right=e(w),this.radius=e([_]),this.angle=e([T,k]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(h,o),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var f=c.prototype;f.setDistanceLimits=function(h,o){h=h>0?Math.log(h):-1/0,o=o>0?Math.log(o):1/0,o=Math.max(o,h),this.radius.bounds[0][0]=h,this.radius.bounds[1][0]=o},f.getDistanceLimits=function(h){var o=this.radius.bounds[0];return h?(h[0]=Math.exp(o[0][0]),h[1]=Math.exp(o[1][0]),h):[Math.exp(o[0][0]),Math.exp(o[1][0])]},f.recalcMatrix=function(h){this.center.curve(h),this.up.curve(h),this.right.curve(h),this.radius.curve(h),this.angle.curve(h);for(var o=this.computedUp,x=this.computedRight,d=0,w=0,_=0;_<3;++_)w+=o[_]*x[_],d+=o[_]*o[_];var T=Math.sqrt(d),k=0;for(_=0;_<3;++_)x[_]-=o[_]*w/d,k+=x[_]*x[_],o[_]/=T;var L=Math.sqrt(k);for(_=0;_<3;++_)x[_]/=L;var M=this.computedToward;a(M,o,x),r(M,M);var O=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],S=this.computedAngle[1],E=Math.cos(P),R=Math.sin(P),B=Math.cos(S),H=Math.sin(S),V=this.computedCenter,Z=E*B,W=R*B,G=H,X=-E*H,te=-R*H,D=B,N=this.computedEye,U=this.computedMatrix;for(_=0;_<3;++_){var Q=Z*x[_]+W*M[_]+G*o[_];U[4*_+1]=X*x[_]+te*M[_]+D*o[_],U[4*_+2]=Q,U[4*_+3]=0}var j=U[1],J=U[5],K=U[9],re=U[2],ne=U[6],se=U[10],oe=J*se-K*ne,pe=K*re-j*se,ce=j*ne-J*re,ge=s(oe,pe,ce);for(pe/=ge,ce/=ge,U[0]=oe/=ge,U[4]=pe,U[8]=ce,_=0;_<3;++_)N[_]=V[_]+U[2+4*_]*O;for(_=0;_<3;++_){k=0;for(var xe=0;xe<3;++xe)k+=U[_+4*xe]*N[xe];U[12+_]=-k}U[15]=1},f.getMatrix=function(h,o){this.recalcMatrix(h);var x=this.computedMatrix;if(o){for(var d=0;d<16;++d)o[d]=x[d];return o}return x};var g=[0,0,0];f.rotate=function(h,o,x,d){if(this.angle.move(h,o,x),d){this.recalcMatrix(h);var w=this.computedMatrix;g[0]=w[2],g[1]=w[6],g[2]=w[10];for(var _=this.computedUp,T=this.computedRight,k=this.computedToward,L=0;L<3;++L)w[4*L]=_[L],w[4*L+1]=T[L],w[4*L+2]=k[L];for(t(w,w,d,g),L=0;L<3;++L)_[L]=w[4*L],T[L]=w[4*L+1];this.up.set(h,_[0],_[1],_[2]),this.right.set(h,T[0],T[1],T[2])}},f.pan=function(h,o,x,d){o=o||0,x=x||0,d=d||0,this.recalcMatrix(h);var w=this.computedMatrix,_=(Math.exp(this.computedRadius[0]),w[1]),T=w[5],k=w[9],L=s(_,T,k),M=w[0],O=w[4],P=w[8],S=M*(_/=L)+O*(T/=L)+P*(k/=L),E=s(M-=_*S,O-=T*S,P-=k*S),R=(M/=E)*o+_*x,B=(O/=E)*o+T*x,H=(P/=E)*o+k*x;this.center.move(h,R,B,H);var V=Math.exp(this.computedRadius[0]);V=Math.max(1e-4,V+d),this.radius.set(h,Math.log(V))},f.translate=function(h,o,x,d){this.center.move(h,o||0,x||0,d||0)},f.setMatrix=function(h,o,x,d){var w=1;"number"==typeof x&&(w=0|x),(w<0||w>3)&&(w=1);var _=(w+2)%3;o||(this.recalcMatrix(h),o=this.computedMatrix);var T=o[w],k=o[w+4],L=o[w+8];if(d){var M=Math.abs(T),O=Math.abs(k),P=Math.abs(L),S=Math.max(M,O,P);M===S?(T=T<0?-1:1,k=L=0):P===S?(L=L<0?-1:1,T=k=0):(k=k<0?-1:1,T=L=0)}else{var E=s(T,k,L);T/=E,k/=E,L/=E}var R,B,H=o[_],V=o[_+4],Z=o[_+8],W=H*T+V*k+Z*L,G=s(H-=T*W,V-=k*W,Z-=L*W),X=k*(Z/=G)-L*(V/=G),te=L*(H/=G)-T*Z,D=T*V-k*H,N=s(X,te,D);if(X/=N,te/=N,D/=N,this.center.jump(h,fe,me,Te),this.radius.idle(h),this.up.jump(h,T,k,L),this.right.jump(h,H,V,Z),2===w){var U=o[1],Q=o[5],j=o[9];R=oe<0?-Math.PI/2:Math.PI/2,B=Math.atan2(U*X+Q*te+j*D,U*H+Q*V+j*Z)}else{var re=o[2],ne=o[6],se=o[10],oe=re*T+ne*k+se*L,pe=re*H+ne*V+se*Z,ce=re*X+ne*te+se*D;R=Math.asin(i(oe)),B=Math.atan2(ce,pe)}this.angle.jump(h,B,R),this.recalcMatrix(h);var ge=o[2],xe=o[6],we=o[10],be=this.computedMatrix;n(be,o);var Se=be[15],fe=be[12]/Se,me=be[13]/Se,Te=be[14]/Se,_e=Math.exp(this.computedRadius[0]);this.center.jump(h,fe-ge*_e,me-xe*_e,Te-we*_e)},f.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},f.idle=function(h){this.center.idle(h),this.up.idle(h),this.right.idle(h),this.radius.idle(h),this.angle.idle(h)},f.flush=function(h){this.center.flush(h),this.up.flush(h),this.right.flush(h),this.radius.flush(h),this.angle.flush(h)},f.setDistance=function(h,o){o>0&&this.radius.set(h,Math.log(o))},f.lookAt=function(h,o,x,d){this.recalcMatrix(h),o=o||this.computedEye,x=x||this.computedCenter;var w=(d=d||this.computedUp)[0],_=d[1],T=d[2],k=s(w,_,T);if(!(k<1e-6)){w/=k,_/=k,T/=k;var L=o[0]-x[0],M=o[1]-x[1],O=o[2]-x[2],P=s(L,M,O);if(!(P<1e-6)){L/=P,M/=P,O/=P;var S=this.computedRight,E=S[0],R=S[1],B=S[2],H=w*E+_*R+T*B,V=s(E-=H*w,R-=H*_,B-=H*T);if(!(V<.01&&(V=s(E=_*O-T*M,R=T*L-w*O,B=w*M-_*L))<1e-6)){E/=V,R/=V,B/=V,this.up.set(h,w,_,T),this.right.set(h,E,R,B),this.center.set(h,x[0],x[1],x[2]),this.radius.set(h,Math.log(P));var Z=_*B-T*R,W=T*E-w*B,G=w*R-_*E,X=s(Z,W,G),D=E*L+R*M+B*O,N=(Z/=X)*L+(W/=X)*M+(G/=X)*O,U=Math.asin(i(w*L+_*M+T*O)),Q=Math.atan2(N,D),j=this.angle._state,J=j[j.length-1],K=j[j.length-2];J%=2*Math.PI;var re=Math.abs(J+2*Math.PI-Q),ne=Math.abs(J-Q),se=Math.abs(J-2*Math.PI-Q);re<ne&&(J+=2*Math.PI),se<ne&&(J-=2*Math.PI),this.angle.jump(this.angle.lastT(),J,K),this.angle.set(h,Q,U)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(m,b,v){"use strict";b.exports=function(n,t,a){var r=n*t,u=e*n,s=u-(u-n),i=n-s,l=e*t,c=l-(l-t),f=t-c,g=i*f-(r-s*c-i*c-s*f);return a?(a[0]=g,a[1]=r,a):[g,r]};var e=+(Math.pow(2,27)+1)},{}],307:[function(m,b,v){"use strict";b.exports=function(e,n,t){var a=e+n,r=a-e,u=n-r,s=e-(a-r);return t?(t[0]=s+u,t[1]=a,t):[s+u,a]}},{}],308:[function(m,b,v){(function(e){(function(){"use strict";var n=m("bit-twiddle"),t=m("dup"),a=m("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:t([32,0]),UINT16:t([32,0]),UINT32:t([32,0]),BIGUINT64:t([32,0]),INT8:t([32,0]),INT16:t([32,0]),INT32:t([32,0]),BIGINT64:t([32,0]),FLOAT:t([32,0]),DOUBLE:t([32,0]),DATA:t([32,0]),UINT8C:t([32,0]),BUFFER:t([32,0])});var r="undefined"!=typeof Uint8ClampedArray,u="undefined"!=typeof BigUint64Array,s="undefined"!=typeof BigInt64Array,i=e.__TYPEDARRAY_POOL;i.UINT8C||(i.UINT8C=t([32,0])),i.BIGUINT64||(i.BIGUINT64=t([32,0])),i.BIGINT64||(i.BIGINT64=t([32,0])),i.BUFFER||(i.BUFFER=t([32,0]));var l=i.DATA,c=i.BUFFER;function f(E){if(E){var B=n.log2(E.length||E.byteLength);l[B].push(E)}}function g(E){E=n.nextPow2(E);var R=n.log2(E),B=l[R];return B.length>0?B.pop():new ArrayBuffer(E)}function h(E){return new Uint8Array(g(E),0,E)}function o(E){return new Uint16Array(g(2*E),0,E)}function x(E){return new Uint32Array(g(4*E),0,E)}function d(E){return new Int8Array(g(E),0,E)}function w(E){return new Int16Array(g(2*E),0,E)}function _(E){return new Int32Array(g(4*E),0,E)}function T(E){return new Float32Array(g(4*E),0,E)}function k(E){return new Float64Array(g(8*E),0,E)}function L(E){return r?new Uint8ClampedArray(g(E),0,E):h(E)}function M(E){return u?new BigUint64Array(g(8*E),0,E):null}function O(E){return s?new BigInt64Array(g(8*E),0,E):null}function P(E){return new DataView(g(E),0,E)}function S(E){E=n.nextPow2(E);var R=n.log2(E),B=c[R];return B.length>0?B.pop():new a(E)}v.free=function(E){if(a.isBuffer(E))c[n.log2(E.length)].push(E);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(E)&&(E=E.buffer),!E)return;var B=0|n.log2(E.length||E.byteLength);l[B].push(E)}},v.freeUint8=v.freeUint16=v.freeUint32=v.freeBigUint64=v.freeInt8=v.freeInt16=v.freeInt32=v.freeBigInt64=v.freeFloat32=v.freeFloat=v.freeFloat64=v.freeDouble=v.freeUint8Clamped=v.freeDataView=function(E){f(E.buffer)},v.freeArrayBuffer=f,v.freeBuffer=function(E){c[n.log2(E.length)].push(E)},v.malloc=function(E,R){if(void 0===R||"arraybuffer"===R)return g(E);switch(R){case"uint8":return h(E);case"uint16":return o(E);case"uint32":return x(E);case"int8":return d(E);case"int16":return w(E);case"int32":return _(E);case"float":case"float32":return T(E);case"double":case"float64":return k(E);case"uint8_clamped":return L(E);case"bigint64":return O(E);case"biguint64":return M(E);case"buffer":return S(E);case"data":case"dataview":return P(E);default:return null}return null},v.mallocArrayBuffer=g,v.mallocUint8=h,v.mallocUint16=o,v.mallocUint32=x,v.mallocInt8=d,v.mallocInt16=w,v.mallocInt32=_,v.mallocFloat32=v.mallocFloat=T,v.mallocFloat64=v.mallocDouble=k,v.mallocUint8Clamped=L,v.mallocBigUint64=M,v.mallocBigInt64=O,v.mallocDataView=P,v.mallocBuffer=S,v.clearCache=function(){for(var E=0;E<32;++E)i.UINT8[E].length=0,i.UINT16[E].length=0,i.UINT32[E].length=0,i.INT8[E].length=0,i.INT16[E].length=0,i.INT32[E].length=0,i.FLOAT[E].length=0,i.DOUBLE[E].length=0,i.BIGUINT64[E].length=0,i.BIGINT64[E].length=0,i.UINT8C[E].length=0,l[E].length=0,c[E].length=0}}).call(this)}).call(this,void 0!==p?p:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(m,b,v){"use strict";function e(t){this.roots=new Array(t),this.ranks=new Array(t);for(var a=0;a<t;++a)this.roots[a]=a,this.ranks[a]=0}b.exports=e;var n=e.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},n.find=function(t){for(var a=t,r=this.roots;r[t]!==t;)t=r[t];for(;r[a]!==t;){var u=r[a];r[a]=t,a=u}return t},n.link=function(t,a){var r=this.find(t),u=this.find(a);if(r!==u){var s=this.ranks,i=this.roots,l=s[r],c=s[u];l<c?i[r]=u:c<l?i[u]=r:(i[u]=r,++s[r])}}},{}],310:[function(m,b,v){"use strict";b.exports=function(e,n,t){return 0===e.length?e:n?(t||e.sort(n),function(a,r){for(var u=1,s=a.length,i=a[0],l=a[0],c=1;c<s;++c)if(l=i,r(i=a[c],l)){if(c===u){u++;continue}a[u++]=i}return a.length=u,a}(e,n)):(t||e.sort(),function(a){for(var r=1,u=a.length,s=a[0],i=a[0],l=1;l<u;++l,i=s)if(i=s,(s=a[l])!==i){if(l===r){r++;continue}a[r++]=s}return a.length=r,a}(e))}},{}],311:[function(m,b,v){"use strict";b.exports=function(a,r){return"object"==typeof r&&null!==r||(r={}),e(a,r.canvas||n,r.context||t,r)};var e=m("./lib/vtext"),n=null,t=null;"undefined"!=typeof document&&((n=document.createElement("canvas")).width=8192,n.height=1024,t=n.getContext("2d"))},{"./lib/vtext":312}],312:[function(m,b,v){b.exports=function(f,g,h,o){var x=64,d=1.25,w={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return o&&(o.size&&o.size>0&&(x=o.size),o.lineSpacing&&o.lineSpacing>0&&(d=o.lineSpacing),o.styletags&&o.styletags.breaklines&&(w.breaklines=!!o.styletags.breaklines),o.styletags&&o.styletags.bolds&&(w.bolds=!!o.styletags.bolds),o.styletags&&o.styletags.italics&&(w.italics=!!o.styletags.italics),o.styletags&&o.styletags.subscripts&&(w.subscripts=!!o.styletags.subscripts),o.styletags&&o.styletags.superscripts&&(w.superscripts=!!o.styletags.superscripts)),h.font=[o.fontStyle,o.fontVariant,o.fontWeight,x+"px",o.font].filter(function(_){return _}).join(" "),h.textAlign="start",h.textBaseline="alphabetic",h.direction="ltr",c(function(_,T,k,L,M,O){k=(k=k.replace(/\n/g,"")).replace(/\<br\>/g,!0===O.breaklines?"\n":" ");var P="",S=[];for(H=0;H<k.length;++H)S[H]=P;!0===O.bolds&&(S=s("b","b|",k,S)),!0===O.italics&&(S=s("i","i|",k,S)),!0===O.superscripts&&(S=s("sup","+1",k,S)),!0===O.subscripts&&(S=s("sub","-1",k,S));var E=[],R="";for(H=0;H<k.length;++H)null!==S[H]&&(R+=k[H],E.push(S[H]));var B,H,V,Z,W,G=R.split("\n"),X=G.length,te=Math.round(M*L),D=L,N=2*L,U=0,Q=X*te+N;_.height<Q&&(_.height=Q),T.fillStyle="#000",T.fillRect(0,0,_.width,_.height),T.fillStyle="#fff";var j=0,J="";function K(){if(""!==J){var xe=T.measureText(J).width;T.fillText(J,D+V,N+Z),V+=xe}}function re(){return Math.round(W)+"px "}function ne(xe,we){var be=""+T.font;if(!0===O.subscripts){var Se=xe.indexOf("-"),fe=we.indexOf("-"),me=Se>-1?parseInt(xe[1+Se]):0,Te=fe>-1?parseInt(we[1+fe]):0;me!==Te&&(be=be.replace(re(),"?px "),W*=Math.pow(.75,Te-me),be=be.replace("?px ",re())),Z+=.25*te*(Te-me)}if(!0===O.superscripts){var _e=xe.indexOf("+"),Me=we.indexOf("+"),Ie=_e>-1?parseInt(xe[1+_e]):0,ze=Me>-1?parseInt(we[1+Me]):0;Ie!==ze&&(be=be.replace(re(),"?px "),W*=Math.pow(.75,ze-Ie),be=be.replace("?px ",re())),Z-=.25*te*(ze-Ie)}if(!0===O.bolds){var Ve=xe.indexOf("b|")>-1,Je=we.indexOf("b|")>-1;!Ve&&Je&&(be=De?be.replace("italic ","italic bold "):"bold "+be),Ve&&!Je&&(be=be.replace("bold ",""))}if(!0===O.italics){var De=xe.indexOf("i|")>-1,Be=we.indexOf("i|")>-1;!De&&Be&&(be="italic "+be),De&&!Be&&(be=be.replace("italic ",""))}T.font=be}for(B=0;B<X;++B){var se=G[B]+"\n";for(V=0,Z=B*te,W=L,J="",H=0;H<se.length;++H){var oe=H+j<E.length?E[H+j]:E[E.length-1];P===oe?J+=se[H]:(K(),J=se[H],void 0!==oe&&(ne(P,oe),P=oe))}K(),j+=se.length;var pe=0|Math.round(V+2*D);U<pe&&(U=pe)}var ce=U,ge=N+te*X;return n(T.getImageData(0,0,ce,ge).data,[ge,ce,4]).pick(-1,-1,0).transpose(1,0)}(g,h,f,x,d,w),o,x)},b.exports.processPixels=c;var e=m("surface-nets"),n=m("ndarray"),t=m("simplify-planar-graph"),a=m("clean-pslg"),r=m("cdt2d"),u=m("planar-graph-to-polyline");function s(f,g,h,o){for(var x="<"+f+">",d="</"+f+">",w=x.length,_=d.length,T="+"===g[0]||"-"===g[0],k=0,L=-_;k>-1&&-1!==(k=h.indexOf(x,k))&&-1!==(L=h.indexOf(d,k+w))&&!(L<=k);){for(var M=k;M<L+_;++M)if(M<k+w||M>=L)o[M]=null,h=h.substr(0,M)+" "+h.substr(M+1);else if(null!==o[M]){var O=o[M].indexOf(g[0]);-1===O?o[M]+=g:T&&(o[M]=o[M].substr(0,O+1)+(1+parseInt(o[M][O+1]))+o[M].substr(O+2))}var P=k+w,S=h.substr(P,L-P).indexOf(x);k=-1!==S?S:L+_}return o}function l(f,g,h,o){var x=function(f,g){var h=e(f,128);return g?t(h.cells,h.positions,.25):{edges:h.cells,positions:h.positions}}(f,o),d=function(B,H,V){for(var Z=H.textAlign||"start",W=H.textBaseline||"alphabetic",G=[1<<30,1<<30],X=[0,0],te=B.length,D=0;D<te;++D)for(var N=B[D],U=0;U<2;++U)G[U]=0|Math.min(G[U],N[U]),X[U]=0|Math.max(X[U],N[U]);var Q=0;switch(Z){case"center":Q=-.5*(G[0]+X[0]);break;case"right":case"end":Q=-X[0];break;case"left":case"start":Q=-G[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+Z+"'")}var j=0;switch(W){case"hanging":case"top":j=-G[1];break;case"middle":j=-.5*(G[1]+X[1]);break;case"alphabetic":case"ideographic":j=-3*V;break;case"bottom":j=-X[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+W+"'")}var J=1/V;return"lineHeight"in H?J*=+H.lineHeight:"width"in H?J=H.width/(X[0]-G[0]):"height"in H&&(J=H.height/(X[1]-G[1])),B.map(function(K){return[J*(K[0]+Q),J*(K[1]+j)]})}(x.positions,g,h),w=x.edges,_="ccw"===g.orientation;if(a(d,w),g.polygons||g.polygon||g.polyline){for(var T=u(w,d),k=new Array(T.length),L=0;L<T.length;++L){for(var M=T[L],O=new Array(M.length),P=0;P<M.length;++P){for(var S=M[P],E=new Array(S.length),R=0;R<S.length;++R)E[R]=d[S[R]].slice();_&&E.reverse(),O[P]=E}k[L]=O}return k}return g.triangles||g.triangulate||g.triangle?{cells:r(d,w,{delaunay:!1,exterior:!1,interior:!0}),positions:d}:{edges:w,positions:d}}function c(f,g,h){try{return l(f,g,h,!0)}catch(o){}try{return l(f,g,h,!1)}catch(o){}return g.polygons||g.polyline||g.polygon?[]:g.triangles||g.triangulate||g.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(m,b,v){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=x);var e=!1;if("function"==typeof WeakMap){var n=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var t=new n,a=Object.freeze({});if(t.set(a,1),1===t.get(a))return void(b.exports=WeakMap);e=!0}}var r=Object.getOwnPropertyNames,u=Object.defineProperty,s=Object.isExtensible,i="weakmap:ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var l=new ArrayBuffer(25),c=new Uint8Array(l);crypto.getRandomValues(c),i="weakmap:rand:"+Array.prototype.map.call(c,function(k){return(k%36).toString(36)}).join("")+"___"}if(u(Object,"getOwnPropertyNames",{value:function(k){return r(k).filter(d)}}),"getPropertyNames"in Object){var f=Object.getPropertyNames;u(Object,"getPropertyNames",{value:function(k){return f(k).filter(d)}})}!function(){var k=Object.freeze;u(Object,"freeze",{value:function(O){return w(O),k(O)}});var L=Object.seal;u(Object,"seal",{value:function(O){return w(O),L(O)}});var M=Object.preventExtensions;u(Object,"preventExtensions",{value:function(O){return w(O),M(O)}})}();var g=!1,h=0,o=function(){this instanceof o||T();var k=[],L=[],M=h++;return Object.create(o.prototype,{get___:{value:_(function(O,P){var S,E=w(O);return E?M in E?E[M]:P:(S=k.indexOf(O))>=0?L[S]:P})},has___:{value:_(function(O){var P=w(O);return P?M in P:k.indexOf(O)>=0})},set___:{value:_(function(O,P){var S,E=w(O);return E?E[M]=P:(S=k.indexOf(O))>=0?L[S]=P:(L[S=k.length]=P,k[S]=O),this})},delete___:{value:_(function(O){var P,S,E=w(O);return E?M in E&&delete E[M]:!((P=k.indexOf(O))<0||(S=k.length-1,k[P]=void 0,L[P]=L[S],k[P]=k[S],k.length=S,L.length=S,0))})}})};o.prototype=Object.create(Object.prototype,{get:{value:function(k,L){return this.get___(k,L)},writable:!0,configurable:!0},has:{value:function(k){return this.has___(k)},writable:!0,configurable:!0},set:{value:function(k,L){return this.set___(k,L)},writable:!0,configurable:!0},delete:{value:function(k){return this.delete___(k)},writable:!0,configurable:!0}}),"function"==typeof n?function(){function k(){this instanceof o||T();var L,M=new n,O=void 0,P=!1;return L=e?function(S,E){return M.set(S,E),M.has(S)||(O||(O=new o),O.set(S,E)),this}:function(S,E){if(P)try{M.set(S,E)}catch(R){O||(O=new o),O.set___(S,E)}else M.set(S,E);return this},Object.create(o.prototype,{get___:{value:_(function(S,E){return O?M.has(S)?M.get(S):O.get___(S,E):M.get(S,E)})},has___:{value:_(function(S){return M.has(S)||!!O&&O.has___(S)})},set___:{value:_(L)},delete___:{value:_(function(S){var E=!!M.delete(S);return O&&O.delete___(S)||E})},permitHostObjects___:{value:_(function(S){if(S!==x)throw new Error("bogus call to permitHostObjects___");P=!0})}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),k.prototype=o.prototype,b.exports=k,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),b.exports=o)}function x(k){k.permitHostObjects___&&k.permitHostObjects___(x)}function d(k){return!("weakmap:"==k.substr(0,"weakmap:".length)&&"___"===k.substr(k.length-3))}function w(k){if(k!==Object(k))throw new TypeError("Not an object: "+k);var L=k[i];if(L&&L.key===k)return L;if(s(k)){L={key:k};try{return u(k,i,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch(M){return}}}function _(k){return k.prototype=null,Object.freeze(k)}function T(){g||"undefined"==typeof console||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(m,b,v){var e=m("./hidden-store.js");b.exports=function(){var n={};return function(t){if(("object"!=typeof t||null===t)&&"function"!=typeof t)throw new Error("Weakmap-shim: Key must be object");var a=t.valueOf(n);return a&&a.identity===n?a:e(t,n)}}},{"./hidden-store.js":315}],315:[function(m,b,v){b.exports=function(e,n){var t={identity:n},a=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(r){return r!==n?a.apply(this,arguments):t},writable:!0}),t}},{}],316:[function(m,b,v){var e=m("./create-store.js");b.exports=function(){var n=e();return{get:function(t,a){var r=n(t);return r.hasOwnProperty("value")?r.value:a},set:function(t,a){return n(t).value=a,this},has:function(t){return"value"in n(t)},delete:function(t){return delete n(t).value}}}},{"./create-store.js":314}],317:[function(m,b,v){"use strict";var t,a;b.exports=(t=function(){return function(t,a,r,u,s,i){var l=t[0],c=r[0],f=[0],g=c;u|=0;var h=0,o=c;for(h=0;h<l;++h){var x=a[u]-i,d=a[u+g]-i;x>=0!=d>=0&&s.push(f[0]+.5+.5*(x+d)/(x-d)),u+=o,++f[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),a={},function(r,u,s){var i=r.dtype,l=r.order,c=[i,l.join()].join(),f=a[c];return f||(a[c]=f=t([i,l])),f(r.shape.slice(0),r.data,r.stride,0|r.offset,u,s)})},{}],318:[function(m,b,v){"use strict";b.exports=function(n,t){var a=[];return t=+t||0,e(n.hi(n.shape[0]-1),a,t),a};var e=m("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[27])(27)});